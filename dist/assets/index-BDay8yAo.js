function CS(n,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();function Tv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pf={exports:{}},Jl={},Af={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function ES(){if(Z0)return wt;Z0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function N(Y){return Y===null||typeof Y!="object"?null:(Y=v&&Y[v]||Y["@@iterator"],typeof Y=="function"?Y:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,_={};function P(Y,de,te){this.props=Y,this.context=de,this.refs=_,this.updater=te||T}P.prototype.isReactComponent={},P.prototype.setState=function(Y,de){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,de,"setState")},P.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function L(){}L.prototype=P.prototype;function z(Y,de,te){this.props=Y,this.context=de,this.refs=_,this.updater=te||T}var F=z.prototype=new L;F.constructor=z,k(F,P.prototype),F.isPureReactComponent=!0;var K=Array.isArray,ee=Object.prototype.hasOwnProperty,W={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function C(Y,de,te){var xe,q={},Ae=null,Pe=null;if(de!=null)for(xe in de.ref!==void 0&&(Pe=de.ref),de.key!==void 0&&(Ae=""+de.key),de)ee.call(de,xe)&&!D.hasOwnProperty(xe)&&(q[xe]=de[xe]);var $e=arguments.length-2;if($e===1)q.children=te;else if(1<$e){for(var tt=Array($e),ht=0;ht<$e;ht++)tt[ht]=arguments[ht+2];q.children=tt}if(Y&&Y.defaultProps)for(xe in $e=Y.defaultProps,$e)q[xe]===void 0&&(q[xe]=$e[xe]);return{$$typeof:n,type:Y,key:Ae,ref:Pe,props:q,_owner:W.current}}function I(Y,de){return{$$typeof:n,type:Y.type,key:de,ref:Y.ref,props:Y.props,_owner:Y._owner}}function $(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===n}function O(Y){var de={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(te){return de[te]})}var V=/\/+/g;function A(Y,de){return typeof Y=="object"&&Y!==null&&Y.key!=null?O(""+Y.key):de.toString(36)}function se(Y,de,te,xe,q){var Ae=typeof Y;(Ae==="undefined"||Ae==="boolean")&&(Y=null);var Pe=!1;if(Y===null)Pe=!0;else switch(Ae){case"string":case"number":Pe=!0;break;case"object":switch(Y.$$typeof){case n:case e:Pe=!0}}if(Pe)return Pe=Y,q=q(Pe),Y=xe===""?"."+A(Pe,0):xe,K(q)?(te="",Y!=null&&(te=Y.replace(V,"$&/")+"/"),se(q,de,te,"",function(ht){return ht})):q!=null&&($(q)&&(q=I(q,te+(!q.key||Pe&&Pe.key===q.key?"":(""+q.key).replace(V,"$&/")+"/")+Y)),de.push(q)),1;if(Pe=0,xe=xe===""?".":xe+":",K(Y))for(var $e=0;$e<Y.length;$e++){Ae=Y[$e];var tt=xe+A(Ae,$e);Pe+=se(Ae,de,te,tt,q)}else if(tt=N(Y),typeof tt=="function")for(Y=tt.call(Y),$e=0;!(Ae=Y.next()).done;)Ae=Ae.value,tt=xe+A(Ae,$e++),Pe+=se(Ae,de,te,tt,q);else if(Ae==="object")throw de=String(Y),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.");return Pe}function fe(Y,de,te){if(Y==null)return Y;var xe=[],q=0;return se(Y,xe,"","",function(Ae){return de.call(te,Ae,q++)}),xe}function Se(Y){if(Y._status===-1){var de=Y._result;de=de(),de.then(function(te){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=te)},function(te){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=te)}),Y._status===-1&&(Y._status=0,Y._result=de)}if(Y._status===1)return Y._result.default;throw Y._result}var Ie={current:null},le={transition:null},be={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:le,ReactCurrentOwner:W};function ve(){throw Error("act(...) is not supported in production builds of React.")}return wt.Children={map:fe,forEach:function(Y,de,te){fe(Y,function(){de.apply(this,arguments)},te)},count:function(Y){var de=0;return fe(Y,function(){de++}),de},toArray:function(Y){return fe(Y,function(de){return de})||[]},only:function(Y){if(!$(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},wt.Component=P,wt.Fragment=s,wt.Profiler=i,wt.PureComponent=z,wt.StrictMode=r,wt.Suspense=f,wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=be,wt.act=ve,wt.cloneElement=function(Y,de,te){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var xe=k({},Y.props),q=Y.key,Ae=Y.ref,Pe=Y._owner;if(de!=null){if(de.ref!==void 0&&(Ae=de.ref,Pe=W.current),de.key!==void 0&&(q=""+de.key),Y.type&&Y.type.defaultProps)var $e=Y.type.defaultProps;for(tt in de)ee.call(de,tt)&&!D.hasOwnProperty(tt)&&(xe[tt]=de[tt]===void 0&&$e!==void 0?$e[tt]:de[tt])}var tt=arguments.length-2;if(tt===1)xe.children=te;else if(1<tt){$e=Array(tt);for(var ht=0;ht<tt;ht++)$e[ht]=arguments[ht+2];xe.children=$e}return{$$typeof:n,type:Y.type,key:q,ref:Ae,props:xe,_owner:Pe}},wt.createContext=function(Y){return Y={$$typeof:c,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:o,_context:Y},Y.Consumer=Y},wt.createElement=C,wt.createFactory=function(Y){var de=C.bind(null,Y);return de.type=Y,de},wt.createRef=function(){return{current:null}},wt.forwardRef=function(Y){return{$$typeof:u,render:Y}},wt.isValidElement=$,wt.lazy=function(Y){return{$$typeof:y,_payload:{_status:-1,_result:Y},_init:Se}},wt.memo=function(Y,de){return{$$typeof:h,type:Y,compare:de===void 0?null:de}},wt.startTransition=function(Y){var de=le.transition;le.transition={};try{Y()}finally{le.transition=de}},wt.unstable_act=ve,wt.useCallback=function(Y,de){return Ie.current.useCallback(Y,de)},wt.useContext=function(Y){return Ie.current.useContext(Y)},wt.useDebugValue=function(){},wt.useDeferredValue=function(Y){return Ie.current.useDeferredValue(Y)},wt.useEffect=function(Y,de){return Ie.current.useEffect(Y,de)},wt.useId=function(){return Ie.current.useId()},wt.useImperativeHandle=function(Y,de,te){return Ie.current.useImperativeHandle(Y,de,te)},wt.useInsertionEffect=function(Y,de){return Ie.current.useInsertionEffect(Y,de)},wt.useLayoutEffect=function(Y,de){return Ie.current.useLayoutEffect(Y,de)},wt.useMemo=function(Y,de){return Ie.current.useMemo(Y,de)},wt.useReducer=function(Y,de,te){return Ie.current.useReducer(Y,de,te)},wt.useRef=function(Y){return Ie.current.useRef(Y)},wt.useState=function(Y){return Ie.current.useState(Y)},wt.useSyncExternalStore=function(Y,de,te){return Ie.current.useSyncExternalStore(Y,de,te)},wt.useTransition=function(){return Ie.current.useTransition()},wt.version="18.3.1",wt}var X0;function Qp(){return X0||(X0=1,Af.exports=ES()),Af.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q0;function TS(){if(Q0)return Jl;Q0=1;var n=Qp(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(u,f,h){var y,v={},N=null,T=null;h!==void 0&&(N=""+h),f.key!==void 0&&(N=""+f.key),f.ref!==void 0&&(T=f.ref);for(y in f)r.call(f,y)&&!o.hasOwnProperty(y)&&(v[y]=f[y]);if(u&&u.defaultProps)for(y in f=u.defaultProps,f)v[y]===void 0&&(v[y]=f[y]);return{$$typeof:e,type:u,key:N,ref:T,props:v,_owner:i.current}}return Jl.Fragment=s,Jl.jsx=c,Jl.jsxs=c,Jl}var ex;function PS(){return ex||(ex=1,Pf.exports=TS()),Pf.exports}var t=PS(),S=Qp();const Ba=Tv(S),AS=CS({__proto__:null,default:Ba},[S]);var Wd={},If={exports:{}},bn={},Rf={exports:{}},Df={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function IS(){return tx||(tx=1,(function(n){function e(le,be){var ve=le.length;le.push(be);e:for(;0<ve;){var Y=ve-1>>>1,de=le[Y];if(0<i(de,be))le[Y]=be,le[ve]=de,ve=Y;else break e}}function s(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var be=le[0],ve=le.pop();if(ve!==be){le[0]=ve;e:for(var Y=0,de=le.length,te=de>>>1;Y<te;){var xe=2*(Y+1)-1,q=le[xe],Ae=xe+1,Pe=le[Ae];if(0>i(q,ve))Ae<de&&0>i(Pe,q)?(le[Y]=Pe,le[Ae]=ve,Y=Ae):(le[Y]=q,le[xe]=ve,Y=xe);else if(Ae<de&&0>i(Pe,ve))le[Y]=Pe,le[Ae]=ve,Y=Ae;else break e}}return be}function i(le,be){var ve=le.sortIndex-be.sortIndex;return ve!==0?ve:le.id-be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var f=[],h=[],y=1,v=null,N=3,T=!1,k=!1,_=!1,P=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(le){for(var be=s(h);be!==null;){if(be.callback===null)r(h);else if(be.startTime<=le)r(h),be.sortIndex=be.expirationTime,e(f,be);else break;be=s(h)}}function K(le){if(_=!1,F(le),!k)if(s(f)!==null)k=!0,Se(ee);else{var be=s(h);be!==null&&Ie(K,be.startTime-le)}}function ee(le,be){k=!1,_&&(_=!1,L(C),C=-1),T=!0;var ve=N;try{for(F(be),v=s(f);v!==null&&(!(v.expirationTime>be)||le&&!O());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,N=v.priorityLevel;var de=Y(v.expirationTime<=be);be=n.unstable_now(),typeof de=="function"?v.callback=de:v===s(f)&&r(f),F(be)}else r(f);v=s(f)}if(v!==null)var te=!0;else{var xe=s(h);xe!==null&&Ie(K,xe.startTime-be),te=!1}return te}finally{v=null,N=ve,T=!1}}var W=!1,D=null,C=-1,I=5,$=-1;function O(){return!(n.unstable_now()-$<I)}function V(){if(D!==null){var le=n.unstable_now();$=le;var be=!0;try{be=D(!0,le)}finally{be?A():(W=!1,D=null)}}else W=!1}var A;if(typeof z=="function")A=function(){z(V)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,fe=se.port2;se.port1.onmessage=V,A=function(){fe.postMessage(null)}}else A=function(){P(V,0)};function Se(le){D=le,W||(W=!0,A())}function Ie(le,be){C=P(function(){le(n.unstable_now())},be)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){k||T||(k=!0,Se(ee))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_getFirstCallbackNode=function(){return s(f)},n.unstable_next=function(le){switch(N){case 1:case 2:case 3:var be=3;break;default:be=N}var ve=N;N=be;try{return le()}finally{N=ve}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,be){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var ve=N;N=le;try{return be()}finally{N=ve}},n.unstable_scheduleCallback=function(le,be,ve){var Y=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Y+ve:Y):ve=Y,le){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ve+de,le={id:y++,callback:be,priorityLevel:le,startTime:ve,expirationTime:de,sortIndex:-1},ve>Y?(le.sortIndex=ve,e(h,le),s(f)===null&&le===s(h)&&(_?(L(C),C=-1):_=!0,Ie(K,ve-Y))):(le.sortIndex=de,e(f,le),k||T||(k=!0,Se(ee))),le},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(le){var be=N;return function(){var ve=N;N=be;try{return le.apply(this,arguments)}finally{N=ve}}}})(Df)),Df}var sx;function RS(){return sx||(sx=1,Rf.exports=IS()),Rf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nx;function DS(){if(nx)return bn;nx=1;var n=Qp(),e=RS();function s(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,l){c(a,l),c(a+"Capture",l)}function c(a,l){for(i[a]=l,a=0;a<l.length;a++)r.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},v={};function N(a){return f.call(v,a)?!0:f.call(y,a)?!1:h.test(a)?v[a]=!0:(y[a]=!0,!1)}function T(a,l,d,m){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function k(a,l,d,m){if(l===null||typeof l>"u"||T(a,l,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function _(a,l,d,m,b,w,M){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=b,this.mustUseProperty=d,this.propertyName=a,this.type=l,this.sanitizeURL=w,this.removeEmptyString=M}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){P[a]=new _(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];P[l]=new _(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){P[a]=new _(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){P[a]=new _(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){P[a]=new _(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){P[a]=new _(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){P[a]=new _(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){P[a]=new _(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){P[a]=new _(a,5,!1,a.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function z(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(L,z);P[l]=new _(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(L,z);P[l]=new _(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(L,z);P[l]=new _(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){P[a]=new _(a,1,!1,a.toLowerCase(),null,!1,!1)}),P.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){P[a]=new _(a,1,!1,a.toLowerCase(),null,!0,!0)});function F(a,l,d,m){var b=P.hasOwnProperty(l)?P[l]:null;(b!==null?b.type!==0:m||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(k(l,d,b,m)&&(d=null),m||b===null?N(l)&&(d===null?a.removeAttribute(l):a.setAttribute(l,""+d)):b.mustUseProperty?a[b.propertyName]=d===null?b.type===3?!1:"":d:(l=b.attributeName,m=b.attributeNamespace,d===null?a.removeAttribute(l):(b=b.type,d=b===3||b===4&&d===!0?"":""+d,m?a.setAttributeNS(m,l,d):a.setAttribute(l,d))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),W=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),O=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),le=Symbol.iterator;function be(a){return a===null||typeof a!="object"?null:(a=le&&a[le]||a["@@iterator"],typeof a=="function"?a:null)}var ve=Object.assign,Y;function de(a){if(Y===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Y=l&&l[1]||""}return`
`+Y+a}var te=!1;function xe(a,l){if(!a||te)return"";te=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(he){var m=he}Reflect.construct(a,[],l)}else{try{l.call()}catch(he){m=he}a.call(l.prototype)}else{try{throw Error()}catch(he){m=he}a()}}catch(he){if(he&&m&&typeof he.stack=="string"){for(var b=he.stack.split(`
`),w=m.stack.split(`
`),M=b.length-1,B=w.length-1;1<=M&&0<=B&&b[M]!==w[B];)B--;for(;1<=M&&0<=B;M--,B--)if(b[M]!==w[B]){if(M!==1||B!==1)do if(M--,B--,0>B||b[M]!==w[B]){var X=`
`+b[M].replace(" at new "," at ");return a.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",a.displayName)),X}while(1<=M&&0<=B);break}}}finally{te=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?de(a):""}function q(a){switch(a.tag){case 5:return de(a.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 2:case 15:return a=xe(a.type,!1),a;case 11:return a=xe(a.type.render,!1),a;case 1:return a=xe(a.type,!0),a;default:return""}}function Ae(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case D:return"Fragment";case W:return"Portal";case I:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case se:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case O:return(a.displayName||"Context")+".Consumer";case $:return(a._context.displayName||"Context")+".Provider";case V:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case fe:return l=a.displayName||null,l!==null?l:Ae(a.type)||"Memo";case Se:l=a._payload,a=a._init;try{return Ae(a(l))}catch{}}return null}function Pe(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(l);case 8:return l===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function $e(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function tt(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ht(a){var l=tt(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),m=""+a[l];if(!a.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,w=d.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return b.call(this)},set:function(M){m=""+M,w.call(this,M)}}),Object.defineProperty(a,l,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(M){m=""+M},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function qt(a){a._valueTracker||(a._valueTracker=ht(a))}function Ne(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return a&&(m=tt(a)?a.checked?"true":"false":a.value),a=m,a!==d?(l.setValue(a),!0):!1}function Qe(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function yt(a,l){var d=l.checked;return ve({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??a._wrapperState.initialChecked})}function Ut(a,l){var d=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;d=$e(l.value!=null?l.value:d),a._wrapperState={initialChecked:m,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function oe(a,l){l=l.checked,l!=null&&F(a,"checked",l,!1)}function De(a,l){oe(a,l);var d=$e(l.value),m=l.type;if(d!=null)m==="number"?(d===0&&a.value===""||a.value!=d)&&(a.value=""+d):a.value!==""+d&&(a.value=""+d);else if(m==="submit"||m==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?ke(a,l.type,d):l.hasOwnProperty("defaultValue")&&ke(a,l.type,$e(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function Be(a,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,d||l===a.value||(a.value=l),a.defaultValue=l}d=a.name,d!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,d!==""&&(a.name=d)}function ke(a,l,d){(l!=="number"||Qe(a.ownerDocument)!==a)&&(d==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+d&&(a.defaultValue=""+d))}var We=Array.isArray;function Nt(a,l,d,m){if(a=a.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<a.length;d++)b=l.hasOwnProperty("$"+a[d].value),a[d].selected!==b&&(a[d].selected=b),b&&m&&(a[d].defaultSelected=!0)}else{for(d=""+$e(d),l=null,b=0;b<a.length;b++){if(a[b].value===d){a[b].selected=!0,m&&(a[b].defaultSelected=!0);return}l!==null||a[b].disabled||(l=a[b])}l!==null&&(l.selected=!0)}}function ye(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(s(91));return ve({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function J(a,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(s(92));if(We(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),d=l}a._wrapperState={initialValue:$e(d)}}function je(a,l){var d=$e(l.value),m=$e(l.defaultValue);d!=null&&(d=""+d,d!==a.value&&(a.value=d),l.defaultValue==null&&a.defaultValue!==d&&(a.defaultValue=d)),m!=null&&(a.defaultValue=""+m)}function jt(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function ft(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wt(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?ft(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Ft,Ss=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,m,b){MSApp.execUnsafeLocalFunction(function(){return a(l,d,m,b)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Ft=Ft||document.createElement("div"),Ft.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ft.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function as(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var Me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fs=["Webkit","ms","Moz","O"];Object.keys(Me).forEach(function(a){fs.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Me[l]=Me[a]})});function os(a,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||Me.hasOwnProperty(a)&&Me[a]?(""+l).trim():l+"px"}function Ws(a,l){a=a.style;for(var d in l)if(l.hasOwnProperty(d)){var m=d.indexOf("--")===0,b=os(d,l[d],m);d==="float"&&(d="cssFloat"),m?a.setProperty(d,b):a[d]=b}}var ur=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ds(a,l){if(l){if(ur[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(s(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(s(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(s(61))}if(l.style!=null&&typeof l.style!="object")throw Error(s(62))}}function Ms(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mn=null;function On(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ps=null,Os=null,$t=null;function ks(a){if(a=Dl(a)){if(typeof ps!="function")throw Error(s(280));var l=a.stateNode;l&&(l=ad(l),ps(a.stateNode,a.type,l))}}function ts(a){Os?$t?$t.push(a):$t=[a]:Os=a}function we(){if(Os){var a=Os,l=$t;if($t=Os=null,ks(a),l)for(a=0;a<l.length;a++)ks(l[a])}}function Je(a,l){return a(l)}function Ct(){}var Et=!1;function It(a,l,d){if(Et)return a(l,d);Et=!0;try{return Je(a,l,d)}finally{Et=!1,(Os!==null||$t!==null)&&(Ct(),we())}}function Dt(a,l){var d=a.stateNode;if(d===null)return null;var m=ad(d);if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(s(231,l,typeof d));return d}var Lt=!1;if(u)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch{Lt=!1}function Gn(a,l,d,m,b,w,M,B,X){var he=Array.prototype.slice.call(arguments,3);try{l.apply(d,he)}catch(Ee){this.onError(Ee)}}var un=!1,hn=null,hr=!1,Ls=null,vi={onError:function(a){un=!0,hn=a}};function Wr(a,l,d,m,b,w,M,B,X){un=!1,hn=null,Gn.apply(vi,arguments)}function Hr(a,l,d,m,b,w,M,B,X){if(Wr.apply(this,arguments),un){if(un){var he=hn;un=!1,hn=null}else throw Error(s(198));hr||(hr=!0,Ls=he)}}function en(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function Gr(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function wi(a){if(en(a)!==a)throw Error(s(188))}function fr(a){var l=a.alternate;if(!l){if(l=en(a),l===null)throw Error(s(188));return l!==a?null:a}for(var d=a,m=l;;){var b=d.return;if(b===null)break;var w=b.alternate;if(w===null){if(m=b.return,m!==null){d=m;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===d)return wi(b),a;if(w===m)return wi(b),l;w=w.sibling}throw Error(s(188))}if(d.return!==m.return)d=b,m=w;else{for(var M=!1,B=b.child;B;){if(B===d){M=!0,d=b,m=w;break}if(B===m){M=!0,m=b,d=w;break}B=B.sibling}if(!M){for(B=w.child;B;){if(B===d){M=!0,d=w,m=b;break}if(B===m){M=!0,m=w,d=b;break}B=B.sibling}if(!M)throw Error(s(189))}}if(d.alternate!==m)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?a:l}function Kr(a){return a=fr(a),a!==null?Ln(a):null}function Ln(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Ln(a);if(l!==null)return l;a=a.sibling}return null}var H=e.unstable_scheduleCallback,G=e.unstable_cancelCallback,Z=e.unstable_shouldYield,re=e.unstable_requestPaint,ge=e.unstable_now,Ke=e.unstable_getCurrentPriorityLevel,ot=e.unstable_ImmediatePriority,ue=e.unstable_UserBlockingPriority,me=e.unstable_NormalPriority,Le=e.unstable_LowPriority,St=e.unstable_IdlePriority,lt=null,mt=null;function Jt(a){if(mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(lt,a,void 0,(a.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:ze,R=Math.log,ne=Math.LN2;function ze(a){return a>>>=0,a===0?32:31-(R(a)/ne|0)|0}var _e=64,Fe=4194304;function He(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function gt(a,l){var d=a.pendingLanes;if(d===0)return 0;var m=0,b=a.suspendedLanes,w=a.pingedLanes,M=d&268435455;if(M!==0){var B=M&~b;B!==0?m=He(B):(w&=M,w!==0&&(m=He(w)))}else M=d&~b,M!==0?m=He(M):w!==0&&(m=He(w));if(m===0)return 0;if(l!==0&&l!==m&&(l&b)===0&&(b=m&-m,w=l&-l,b>=w||b===16&&(w&4194240)!==0))return l;if((m&4)!==0&&(m|=d&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=m;0<l;)d=31-kt(l),b=1<<d,m|=a[d],l&=~b;return m}function Yt(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pr(a,l){for(var d=a.suspendedLanes,m=a.pingedLanes,b=a.expirationTimes,w=a.pendingLanes;0<w;){var M=31-kt(w),B=1<<M,X=b[M];X===-1?((B&d)===0||(B&m)!==0)&&(b[M]=Yt(B,l)):X<=l&&(a.expiredLanes|=B),w&=~B}}function Jr(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Ni(){var a=_e;return _e<<=1,(_e&4194240)===0&&(_e=64),a}function ml(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function fa(a,l,d){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-kt(l),a[l]=d}function oh(a,l){var d=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var m=a.eventTimes;for(a=a.expirationTimes;0<d;){var b=31-kt(d),w=1<<b;l[b]=0,m[b]=-1,a[b]=-1,d&=~w}}function gl(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var m=31-kt(d),b=1<<m;b&l|a[m]&l&&(a[m]|=l),d&=~b}}var _t=0;function mr(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var xl,no,yl,bl,vl,gr=!1,ro=[],xr=null,yr=null,Us=null,pa=new Map,Yr=new Map,jn=[],Wc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ji(a,l){switch(a){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":pa.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(l.pointerId)}}function Kn(a,l,d,m,b,w){return a===null||a.nativeEvent!==w?(a={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:w,targetContainers:[b]},l!==null&&(l=Dl(l),l!==null&&no(l)),a):(a.eventSystemFlags|=m,l=a.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),a)}function Hc(a,l,d,m,b){switch(l){case"focusin":return xr=Kn(xr,a,l,d,m,b),!0;case"dragenter":return yr=Kn(yr,a,l,d,m,b),!0;case"mouseover":return Us=Kn(Us,a,l,d,m,b),!0;case"pointerover":var w=b.pointerId;return pa.set(w,Kn(pa.get(w)||null,a,l,d,m,b)),!0;case"gotpointercapture":return w=b.pointerId,Yr.set(w,Kn(Yr.get(w)||null,a,l,d,m,b)),!0}return!1}function io(a){var l=ya(a.target);if(l!==null){var d=en(l);if(d!==null){if(l=d.tag,l===13){if(l=Gr(d),l!==null){a.blockedOn=l,vl(a.priority,function(){yl(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ht(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=ao(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(d===null){d=a.nativeEvent;var m=new d.constructor(d.type,d);Mn=m,d.target.dispatchEvent(m),Mn=null}else return l=Dl(d),l!==null&&no(l),a.blockedOn=d,!1;l.shift()}return!0}function Gc(a,l,d){Ht(a)&&d.delete(l)}function lh(){gr=!1,xr!==null&&Ht(xr)&&(xr=null),yr!==null&&Ht(yr)&&(yr=null),Us!==null&&Ht(Us)&&(Us=null),pa.forEach(Gc),Yr.forEach(Gc)}function Si(a,l){a.blockedOn===l&&(a.blockedOn=null,gr||(gr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lh)))}function ki(a){function l(b){return Si(b,a)}if(0<ro.length){Si(ro[0],a);for(var d=1;d<ro.length;d++){var m=ro[d];m.blockedOn===a&&(m.blockedOn=null)}}for(xr!==null&&Si(xr,a),yr!==null&&Si(yr,a),Us!==null&&Si(Us,a),pa.forEach(l),Yr.forEach(l),d=0;d<jn.length;d++)m=jn[d],m.blockedOn===a&&(m.blockedOn=null);for(;0<jn.length&&(d=jn[0],d.blockedOn===null);)io(d),d.blockedOn===null&&jn.shift()}var Zr=K.ReactCurrentBatchConfig,Xr=!0;function br(a,l,d,m){var b=_t,w=Zr.transition;Zr.transition=null;try{_t=1,wl(a,l,d,m)}finally{_t=b,Zr.transition=w}}function Kc(a,l,d,m){var b=_t,w=Zr.transition;Zr.transition=null;try{_t=4,wl(a,l,d,m)}finally{_t=b,Zr.transition=w}}function wl(a,l,d,m){if(Xr){var b=ao(a,l,d,m);if(b===null)bh(a,l,m,vr,d),ji(a,m);else if(Hc(b,a,l,d,m))m.stopPropagation();else if(ji(a,m),l&4&&-1<Wc.indexOf(a)){for(;b!==null;){var w=Dl(b);if(w!==null&&xl(w),w=ao(a,l,d,m),w===null&&bh(a,l,m,vr,d),w===b)break;b=w}b!==null&&m.stopPropagation()}else bh(a,l,m,null,d)}}var vr=null;function ao(a,l,d,m){if(vr=null,a=On(m),a=ya(a),a!==null)if(l=en(a),l===null)a=null;else if(d=l.tag,d===13){if(a=Gr(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return vr=a,null}function oo(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case ot:return 1;case ue:return 4;case me:case Le:return 16;case St:return 536870912;default:return 16}default:return 16}}var Sn=null,lo=null,Qr=null;function Jc(){if(Qr)return Qr;var a,l=lo,d=l.length,m,b="value"in Sn?Sn.value:Sn.textContent,w=b.length;for(a=0;a<d&&l[a]===b[a];a++);var M=d-a;for(m=1;m<=M&&l[d-m]===b[w-m];m++);return Qr=b.slice(a,1<m?1-m:void 0)}function ma(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function wr(){return!0}function Nl(){return!1}function Hs(a){function l(d,m,b,w,M){this._reactName=d,this._targetInst=b,this.type=m,this.nativeEvent=w,this.target=M,this.currentTarget=null;for(var B in a)a.hasOwnProperty(B)&&(d=a[B],this[B]=d?d(w):w[B]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?wr:Nl,this.isPropagationStopped=Nl,this}return ve(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=wr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=wr)},persist:function(){},isPersistent:wr}),l}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=Hs(Nr),_i=ve({},Nr,{view:0,detail:0}),co=Hs(_i),uo,ho,kn,xa=ve({},_i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ss,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==kn&&(kn&&a.type==="mousemove"?(uo=a.screenX-kn.screenX,ho=a.screenY-kn.screenY):ho=uo=0,kn=a),uo)},movementY:function(a){return"movementY"in a?a.movementY:ho}}),jl=Hs(xa),Yc=ve({},xa,{dataTransfer:0}),Zc=Hs(Yc),fn=ve({},_i,{relatedTarget:0}),fo=Hs(fn),Xc=ve({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ci=Hs(Xc),p=ve({},Nr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),j=Hs(p),E=ve({},Nr,{data:0}),U=Hs(E),ae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xt(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Ue[a])?!!l[a]:!1}function ss(){return xt}var Bt=ve({},_i,{key:function(a){if(a.key){var l=ae[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=ma(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?pe[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ss,charCode:function(a){return a.type==="keypress"?ma(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ma(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),xs=Hs(Bt),Un=ve({},xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jr=Hs(Un),Sr=ve({},_i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ss}),kr=Hs(Sr),po=ve({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sl=Hs(po),vj=ve({},xa,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),wj=Hs(vj),Nj=[9,13,27,32],ch=u&&"CompositionEvent"in window,kl=null;u&&"documentMode"in document&&(kl=document.documentMode);var jj=u&&"TextEvent"in window&&!kl,Bm=u&&(!ch||kl&&8<kl&&11>=kl),qm=" ",Wm=!1;function Hm(a,l){switch(a){case"keyup":return Nj.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gm(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var mo=!1;function Sj(a,l){switch(a){case"compositionend":return Gm(l);case"keypress":return l.which!==32?null:(Wm=!0,qm);case"textInput":return a=l.data,a===qm&&Wm?null:a;default:return null}}function kj(a,l){if(mo)return a==="compositionend"||!ch&&Hm(a,l)?(a=Jc(),Qr=lo=Sn=null,mo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Bm&&l.locale!=="ko"?null:l.data;default:return null}}var _j={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Km(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!_j[a.type]:l==="textarea"}function Jm(a,l,d,m){ts(m),l=nd(l,"onChange"),0<l.length&&(d=new ga("onChange","change",null,d,m),a.push({event:d,listeners:l}))}var _l=null,Cl=null;function Cj(a){fg(a,0)}function Qc(a){var l=vo(a);if(Ne(l))return a}function Ej(a,l){if(a==="change")return l}var Ym=!1;if(u){var dh;if(u){var uh="oninput"in document;if(!uh){var Zm=document.createElement("div");Zm.setAttribute("oninput","return;"),uh=typeof Zm.oninput=="function"}dh=uh}else dh=!1;Ym=dh&&(!document.documentMode||9<document.documentMode)}function Xm(){_l&&(_l.detachEvent("onpropertychange",Qm),Cl=_l=null)}function Qm(a){if(a.propertyName==="value"&&Qc(Cl)){var l=[];Jm(l,Cl,a,On(a)),It(Cj,l)}}function Tj(a,l,d){a==="focusin"?(Xm(),_l=l,Cl=d,_l.attachEvent("onpropertychange",Qm)):a==="focusout"&&Xm()}function Pj(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Qc(Cl)}function Aj(a,l){if(a==="click")return Qc(l)}function Ij(a,l){if(a==="input"||a==="change")return Qc(l)}function Rj(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Jn=typeof Object.is=="function"?Object.is:Rj;function El(a,l){if(Jn(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var b=d[m];if(!f.call(l,b)||!Jn(a[b],l[b]))return!1}return!0}function eg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function tg(a,l){var d=eg(a);a=0;for(var m;d;){if(d.nodeType===3){if(m=a+d.textContent.length,a<=l&&m>=l)return{node:d,offset:l-a};a=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=eg(d)}}function sg(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?sg(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function ng(){for(var a=window,l=Qe();l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=Qe(a.document)}return l}function hh(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function Dj(a){var l=ng(),d=a.focusedElem,m=a.selectionRange;if(l!==d&&d&&d.ownerDocument&&sg(d.ownerDocument.documentElement,d)){if(m!==null&&hh(d)){if(l=m.start,a=m.end,a===void 0&&(a=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(a,d.value.length);else if(a=(l=d.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var b=d.textContent.length,w=Math.min(m.start,b);m=m.end===void 0?w:Math.min(m.end,b),!a.extend&&w>m&&(b=m,m=w,w=b),b=tg(d,w);var M=tg(d,m);b&&M&&(a.rangeCount!==1||a.anchorNode!==b.node||a.anchorOffset!==b.offset||a.focusNode!==M.node||a.focusOffset!==M.offset)&&(l=l.createRange(),l.setStart(b.node,b.offset),a.removeAllRanges(),w>m?(a.addRange(l),a.extend(M.node,M.offset)):(l.setEnd(M.node,M.offset),a.addRange(l)))}}for(l=[],a=d;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)a=l[d],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Mj=u&&"documentMode"in document&&11>=document.documentMode,go=null,fh=null,Tl=null,ph=!1;function rg(a,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ph||go==null||go!==Qe(m)||(m=go,"selectionStart"in m&&hh(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Tl&&El(Tl,m)||(Tl=m,m=nd(fh,"onSelect"),0<m.length&&(l=new ga("onSelect","select",null,l,d),a.push({event:l,listeners:m}),l.target=go)))}function ed(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var xo={animationend:ed("Animation","AnimationEnd"),animationiteration:ed("Animation","AnimationIteration"),animationstart:ed("Animation","AnimationStart"),transitionend:ed("Transition","TransitionEnd")},mh={},ig={};u&&(ig=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function td(a){if(mh[a])return mh[a];if(!xo[a])return a;var l=xo[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in ig)return mh[a]=l[d];return a}var ag=td("animationend"),og=td("animationiteration"),lg=td("animationstart"),cg=td("transitionend"),dg=new Map,ug="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(a,l){dg.set(a,l),o(l,[a])}for(var gh=0;gh<ug.length;gh++){var xh=ug[gh],Oj=xh.toLowerCase(),Lj=xh[0].toUpperCase()+xh.slice(1);Ei(Oj,"on"+Lj)}Ei(ag,"onAnimationEnd"),Ei(og,"onAnimationIteration"),Ei(lg,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(cg,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pl));function hg(a,l,d){var m=a.type||"unknown-event";a.currentTarget=d,Hr(m,l,void 0,a),a.currentTarget=null}function fg(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var m=a[d],b=m.event;m=m.listeners;e:{var w=void 0;if(l)for(var M=m.length-1;0<=M;M--){var B=m[M],X=B.instance,he=B.currentTarget;if(B=B.listener,X!==w&&b.isPropagationStopped())break e;hg(b,B,he),w=X}else for(M=0;M<m.length;M++){if(B=m[M],X=B.instance,he=B.currentTarget,B=B.listener,X!==w&&b.isPropagationStopped())break e;hg(b,B,he),w=X}}}if(hr)throw a=Ls,hr=!1,Ls=null,a}function Zt(a,l){var d=l[kh];d===void 0&&(d=l[kh]=new Set);var m=a+"__bubble";d.has(m)||(pg(l,a,2,!1),d.add(m))}function yh(a,l,d){var m=0;l&&(m|=4),pg(d,a,m,l)}var sd="_reactListening"+Math.random().toString(36).slice(2);function Al(a){if(!a[sd]){a[sd]=!0,r.forEach(function(d){d!=="selectionchange"&&(Uj.has(d)||yh(d,!1,a),yh(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[sd]||(l[sd]=!0,yh("selectionchange",!1,l))}}function pg(a,l,d,m){switch(oo(l)){case 1:var b=br;break;case 4:b=Kc;break;default:b=wl}d=b.bind(null,l,d,a),b=void 0,!Lt||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),m?b!==void 0?a.addEventListener(l,d,{capture:!0,passive:b}):a.addEventListener(l,d,!0):b!==void 0?a.addEventListener(l,d,{passive:b}):a.addEventListener(l,d,!1)}function bh(a,l,d,m,b){var w=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var B=m.stateNode.containerInfo;if(B===b||B.nodeType===8&&B.parentNode===b)break;if(M===4)for(M=m.return;M!==null;){var X=M.tag;if((X===3||X===4)&&(X=M.stateNode.containerInfo,X===b||X.nodeType===8&&X.parentNode===b))return;M=M.return}for(;B!==null;){if(M=ya(B),M===null)return;if(X=M.tag,X===5||X===6){m=w=M;continue e}B=B.parentNode}}m=m.return}It(function(){var he=w,Ee=On(d),Re=[];e:{var Ce=dg.get(a);if(Ce!==void 0){var qe=ga,Ze=a;switch(a){case"keypress":if(ma(d)===0)break e;case"keydown":case"keyup":qe=xs;break;case"focusin":Ze="focus",qe=fo;break;case"focusout":Ze="blur",qe=fo;break;case"beforeblur":case"afterblur":qe=fo;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=jl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=Zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=kr;break;case ag:case og:case lg:qe=Ci;break;case cg:qe=Sl;break;case"scroll":qe=co;break;case"wheel":qe=wj;break;case"copy":case"cut":case"paste":qe=j;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=jr}var Xe=(l&4)!==0,ms=!Xe&&a==="scroll",ie=Xe?Ce!==null?Ce+"Capture":null:Ce;Xe=[];for(var Q=he,ce;Q!==null;){ce=Q;var Oe=ce.stateNode;if(ce.tag===5&&Oe!==null&&(ce=Oe,ie!==null&&(Oe=Dt(Q,ie),Oe!=null&&Xe.push(Il(Q,Oe,ce)))),ms)break;Q=Q.return}0<Xe.length&&(Ce=new qe(Ce,Ze,null,d,Ee),Re.push({event:Ce,listeners:Xe}))}}if((l&7)===0){e:{if(Ce=a==="mouseover"||a==="pointerover",qe=a==="mouseout"||a==="pointerout",Ce&&d!==Mn&&(Ze=d.relatedTarget||d.fromElement)&&(ya(Ze)||Ze[ei]))break e;if((qe||Ce)&&(Ce=Ee.window===Ee?Ee:(Ce=Ee.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,qe?(Ze=d.relatedTarget||d.toElement,qe=he,Ze=Ze?ya(Ze):null,Ze!==null&&(ms=en(Ze),Ze!==ms||Ze.tag!==5&&Ze.tag!==6)&&(Ze=null)):(qe=null,Ze=he),qe!==Ze)){if(Xe=jl,Oe="onMouseLeave",ie="onMouseEnter",Q="mouse",(a==="pointerout"||a==="pointerover")&&(Xe=jr,Oe="onPointerLeave",ie="onPointerEnter",Q="pointer"),ms=qe==null?Ce:vo(qe),ce=Ze==null?Ce:vo(Ze),Ce=new Xe(Oe,Q+"leave",qe,d,Ee),Ce.target=ms,Ce.relatedTarget=ce,Oe=null,ya(Ee)===he&&(Xe=new Xe(ie,Q+"enter",Ze,d,Ee),Xe.target=ce,Xe.relatedTarget=ms,Oe=Xe),ms=Oe,qe&&Ze)t:{for(Xe=qe,ie=Ze,Q=0,ce=Xe;ce;ce=yo(ce))Q++;for(ce=0,Oe=ie;Oe;Oe=yo(Oe))ce++;for(;0<Q-ce;)Xe=yo(Xe),Q--;for(;0<ce-Q;)ie=yo(ie),ce--;for(;Q--;){if(Xe===ie||ie!==null&&Xe===ie.alternate)break t;Xe=yo(Xe),ie=yo(ie)}Xe=null}else Xe=null;qe!==null&&mg(Re,Ce,qe,Xe,!1),Ze!==null&&ms!==null&&mg(Re,ms,Ze,Xe,!0)}}e:{if(Ce=he?vo(he):window,qe=Ce.nodeName&&Ce.nodeName.toLowerCase(),qe==="select"||qe==="input"&&Ce.type==="file")var et=Ej;else if(Km(Ce))if(Ym)et=Ij;else{et=Pj;var nt=Tj}else(qe=Ce.nodeName)&&qe.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(et=Aj);if(et&&(et=et(a,he))){Jm(Re,et,d,Ee);break e}nt&&nt(a,Ce,he),a==="focusout"&&(nt=Ce._wrapperState)&&nt.controlled&&Ce.type==="number"&&ke(Ce,"number",Ce.value)}switch(nt=he?vo(he):window,a){case"focusin":(Km(nt)||nt.contentEditable==="true")&&(go=nt,fh=he,Tl=null);break;case"focusout":Tl=fh=go=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,rg(Re,d,Ee);break;case"selectionchange":if(Mj)break;case"keydown":case"keyup":rg(Re,d,Ee)}var rt;if(ch)e:{switch(a){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else mo?Hm(a,d)&&(ct="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(ct="onCompositionStart");ct&&(Bm&&d.locale!=="ko"&&(mo||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&mo&&(rt=Jc()):(Sn=Ee,lo="value"in Sn?Sn.value:Sn.textContent,mo=!0)),nt=nd(he,ct),0<nt.length&&(ct=new U(ct,a,null,d,Ee),Re.push({event:ct,listeners:nt}),rt?ct.data=rt:(rt=Gm(d),rt!==null&&(ct.data=rt)))),(rt=jj?Sj(a,d):kj(a,d))&&(he=nd(he,"onBeforeInput"),0<he.length&&(Ee=new U("onBeforeInput","beforeinput",null,d,Ee),Re.push({event:Ee,listeners:he}),Ee.data=rt))}fg(Re,l)})}function Il(a,l,d){return{instance:a,listener:l,currentTarget:d}}function nd(a,l){for(var d=l+"Capture",m=[];a!==null;){var b=a,w=b.stateNode;b.tag===5&&w!==null&&(b=w,w=Dt(a,d),w!=null&&m.unshift(Il(a,w,b)),w=Dt(a,l),w!=null&&m.push(Il(a,w,b))),a=a.return}return m}function yo(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function mg(a,l,d,m,b){for(var w=l._reactName,M=[];d!==null&&d!==m;){var B=d,X=B.alternate,he=B.stateNode;if(X!==null&&X===m)break;B.tag===5&&he!==null&&(B=he,b?(X=Dt(d,w),X!=null&&M.unshift(Il(d,X,B))):b||(X=Dt(d,w),X!=null&&M.push(Il(d,X,B)))),d=d.return}M.length!==0&&a.push({event:l,listeners:M})}var zj=/\r\n?/g,Fj=/\u0000|\uFFFD/g;function gg(a){return(typeof a=="string"?a:""+a).replace(zj,`
`).replace(Fj,"")}function rd(a,l,d){if(l=gg(l),gg(a)!==l&&d)throw Error(s(425))}function id(){}var vh=null,wh=null;function Nh(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var jh=typeof setTimeout=="function"?setTimeout:void 0,$j=typeof clearTimeout=="function"?clearTimeout:void 0,xg=typeof Promise=="function"?Promise:void 0,Vj=typeof queueMicrotask=="function"?queueMicrotask:typeof xg<"u"?function(a){return xg.resolve(null).then(a).catch(Bj)}:jh;function Bj(a){setTimeout(function(){throw a})}function Sh(a,l){var d=l,m=0;do{var b=d.nextSibling;if(a.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(m===0){a.removeChild(b),ki(l);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=b}while(d);ki(l)}function Ti(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function yg(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}var bo=Math.random().toString(36).slice(2),_r="__reactFiber$"+bo,Rl="__reactProps$"+bo,ei="__reactContainer$"+bo,kh="__reactEvents$"+bo,qj="__reactListeners$"+bo,Wj="__reactHandles$"+bo;function ya(a){var l=a[_r];if(l)return l;for(var d=a.parentNode;d;){if(l=d[ei]||d[_r]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=yg(a);a!==null;){if(d=a[_r])return d;a=yg(a)}return l}a=d,d=a.parentNode}return null}function Dl(a){return a=a[_r]||a[ei],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function vo(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(s(33))}function ad(a){return a[Rl]||null}var _h=[],wo=-1;function Pi(a){return{current:a}}function Xt(a){0>wo||(a.current=_h[wo],_h[wo]=null,wo--)}function Gt(a,l){wo++,_h[wo]=a.current,a.current=l}var Ai={},Gs=Pi(Ai),pn=Pi(!1),ba=Ai;function No(a,l){var d=a.type.contextTypes;if(!d)return Ai;var m=a.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var b={},w;for(w in d)b[w]=l[w];return m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=b),b}function mn(a){return a=a.childContextTypes,a!=null}function od(){Xt(pn),Xt(Gs)}function bg(a,l,d){if(Gs.current!==Ai)throw Error(s(168));Gt(Gs,l),Gt(pn,d)}function vg(a,l,d){var m=a.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var b in m)if(!(b in l))throw Error(s(108,Pe(a)||"Unknown",b));return ve({},d,m)}function ld(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ai,ba=Gs.current,Gt(Gs,a),Gt(pn,pn.current),!0}function wg(a,l,d){var m=a.stateNode;if(!m)throw Error(s(169));d?(a=vg(a,l,ba),m.__reactInternalMemoizedMergedChildContext=a,Xt(pn),Xt(Gs),Gt(Gs,a)):Xt(pn),Gt(pn,d)}var ti=null,cd=!1,Ch=!1;function Ng(a){ti===null?ti=[a]:ti.push(a)}function Hj(a){cd=!0,Ng(a)}function Ii(){if(!Ch&&ti!==null){Ch=!0;var a=0,l=_t;try{var d=ti;for(_t=1;a<d.length;a++){var m=d[a];do m=m(!0);while(m!==null)}ti=null,cd=!1}catch(b){throw ti!==null&&(ti=ti.slice(a+1)),H(ot,Ii),b}finally{_t=l,Ch=!1}}return null}var jo=[],So=0,dd=null,ud=0,zn=[],Fn=0,va=null,si=1,ni="";function wa(a,l){jo[So++]=ud,jo[So++]=dd,dd=a,ud=l}function jg(a,l,d){zn[Fn++]=si,zn[Fn++]=ni,zn[Fn++]=va,va=a;var m=si;a=ni;var b=32-kt(m)-1;m&=~(1<<b),d+=1;var w=32-kt(l)+b;if(30<w){var M=b-b%5;w=(m&(1<<M)-1).toString(32),m>>=M,b-=M,si=1<<32-kt(l)+b|d<<b|m,ni=w+a}else si=1<<w|d<<b|m,ni=a}function Eh(a){a.return!==null&&(wa(a,1),jg(a,1,0))}function Th(a){for(;a===dd;)dd=jo[--So],jo[So]=null,ud=jo[--So],jo[So]=null;for(;a===va;)va=zn[--Fn],zn[Fn]=null,ni=zn[--Fn],zn[Fn]=null,si=zn[--Fn],zn[Fn]=null}var _n=null,Cn=null,es=!1,Yn=null;function Sg(a,l){var d=qn(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=a,l=a.deletions,l===null?(a.deletions=[d],a.flags|=16):l.push(d)}function kg(a,l){switch(a.tag){case 5:var d=a.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,_n=a,Cn=Ti(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,_n=a,Cn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=va!==null?{id:si,overflow:ni}:null,a.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=qn(18,null,null,0),d.stateNode=l,d.return=a,a.child=d,_n=a,Cn=null,!0):!1;default:return!1}}function Ph(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Ah(a){if(es){var l=Cn;if(l){var d=l;if(!kg(a,l)){if(Ph(a))throw Error(s(418));l=Ti(d.nextSibling);var m=_n;l&&kg(a,l)?Sg(m,d):(a.flags=a.flags&-4097|2,es=!1,_n=a)}}else{if(Ph(a))throw Error(s(418));a.flags=a.flags&-4097|2,es=!1,_n=a}}}function _g(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;_n=a}function hd(a){if(a!==_n)return!1;if(!es)return _g(a),es=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!Nh(a.type,a.memoizedProps)),l&&(l=Cn)){if(Ph(a))throw Cg(),Error(s(418));for(;l;)Sg(a,l),l=Ti(l.nextSibling)}if(_g(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"){if(l===0){Cn=Ti(a.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}a=a.nextSibling}Cn=null}}else Cn=_n?Ti(a.stateNode.nextSibling):null;return!0}function Cg(){for(var a=Cn;a;)a=Ti(a.nextSibling)}function ko(){Cn=_n=null,es=!1}function Ih(a){Yn===null?Yn=[a]:Yn.push(a)}var Gj=K.ReactCurrentBatchConfig;function Ml(a,l,d){if(a=d.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(s(309));var m=d.stateNode}if(!m)throw Error(s(147,a));var b=m,w=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===w?l.ref:(l=function(M){var B=b.refs;M===null?delete B[w]:B[w]=M},l._stringRef=w,l)}if(typeof a!="string")throw Error(s(284));if(!d._owner)throw Error(s(290,a))}return a}function fd(a,l){throw a=Object.prototype.toString.call(l),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function Eg(a){var l=a._init;return l(a._payload)}function Tg(a){function l(ie,Q){if(a){var ce=ie.deletions;ce===null?(ie.deletions=[Q],ie.flags|=16):ce.push(Q)}}function d(ie,Q){if(!a)return null;for(;Q!==null;)l(ie,Q),Q=Q.sibling;return null}function m(ie,Q){for(ie=new Map;Q!==null;)Q.key!==null?ie.set(Q.key,Q):ie.set(Q.index,Q),Q=Q.sibling;return ie}function b(ie,Q){return ie=Fi(ie,Q),ie.index=0,ie.sibling=null,ie}function w(ie,Q,ce){return ie.index=ce,a?(ce=ie.alternate,ce!==null?(ce=ce.index,ce<Q?(ie.flags|=2,Q):ce):(ie.flags|=2,Q)):(ie.flags|=1048576,Q)}function M(ie){return a&&ie.alternate===null&&(ie.flags|=2),ie}function B(ie,Q,ce,Oe){return Q===null||Q.tag!==6?(Q=Sf(ce,ie.mode,Oe),Q.return=ie,Q):(Q=b(Q,ce),Q.return=ie,Q)}function X(ie,Q,ce,Oe){var et=ce.type;return et===D?Ee(ie,Q,ce.props.children,Oe,ce.key):Q!==null&&(Q.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Se&&Eg(et)===Q.type)?(Oe=b(Q,ce.props),Oe.ref=Ml(ie,Q,ce),Oe.return=ie,Oe):(Oe=Ld(ce.type,ce.key,ce.props,null,ie.mode,Oe),Oe.ref=Ml(ie,Q,ce),Oe.return=ie,Oe)}function he(ie,Q,ce,Oe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ce.containerInfo||Q.stateNode.implementation!==ce.implementation?(Q=kf(ce,ie.mode,Oe),Q.return=ie,Q):(Q=b(Q,ce.children||[]),Q.return=ie,Q)}function Ee(ie,Q,ce,Oe,et){return Q===null||Q.tag!==7?(Q=Ta(ce,ie.mode,Oe,et),Q.return=ie,Q):(Q=b(Q,ce),Q.return=ie,Q)}function Re(ie,Q,ce){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=Sf(""+Q,ie.mode,ce),Q.return=ie,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case ee:return ce=Ld(Q.type,Q.key,Q.props,null,ie.mode,ce),ce.ref=Ml(ie,null,Q),ce.return=ie,ce;case W:return Q=kf(Q,ie.mode,ce),Q.return=ie,Q;case Se:var Oe=Q._init;return Re(ie,Oe(Q._payload),ce)}if(We(Q)||be(Q))return Q=Ta(Q,ie.mode,ce,null),Q.return=ie,Q;fd(ie,Q)}return null}function Ce(ie,Q,ce,Oe){var et=Q!==null?Q.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return et!==null?null:B(ie,Q,""+ce,Oe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case ee:return ce.key===et?X(ie,Q,ce,Oe):null;case W:return ce.key===et?he(ie,Q,ce,Oe):null;case Se:return et=ce._init,Ce(ie,Q,et(ce._payload),Oe)}if(We(ce)||be(ce))return et!==null?null:Ee(ie,Q,ce,Oe,null);fd(ie,ce)}return null}function qe(ie,Q,ce,Oe,et){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return ie=ie.get(ce)||null,B(Q,ie,""+Oe,et);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case ee:return ie=ie.get(Oe.key===null?ce:Oe.key)||null,X(Q,ie,Oe,et);case W:return ie=ie.get(Oe.key===null?ce:Oe.key)||null,he(Q,ie,Oe,et);case Se:var nt=Oe._init;return qe(ie,Q,ce,nt(Oe._payload),et)}if(We(Oe)||be(Oe))return ie=ie.get(ce)||null,Ee(Q,ie,Oe,et,null);fd(Q,Oe)}return null}function Ze(ie,Q,ce,Oe){for(var et=null,nt=null,rt=Q,ct=Q=0,Is=null;rt!==null&&ct<ce.length;ct++){rt.index>ct?(Is=rt,rt=null):Is=rt.sibling;var Mt=Ce(ie,rt,ce[ct],Oe);if(Mt===null){rt===null&&(rt=Is);break}a&&rt&&Mt.alternate===null&&l(ie,rt),Q=w(Mt,Q,ct),nt===null?et=Mt:nt.sibling=Mt,nt=Mt,rt=Is}if(ct===ce.length)return d(ie,rt),es&&wa(ie,ct),et;if(rt===null){for(;ct<ce.length;ct++)rt=Re(ie,ce[ct],Oe),rt!==null&&(Q=w(rt,Q,ct),nt===null?et=rt:nt.sibling=rt,nt=rt);return es&&wa(ie,ct),et}for(rt=m(ie,rt);ct<ce.length;ct++)Is=qe(rt,ie,ct,ce[ct],Oe),Is!==null&&(a&&Is.alternate!==null&&rt.delete(Is.key===null?ct:Is.key),Q=w(Is,Q,ct),nt===null?et=Is:nt.sibling=Is,nt=Is);return a&&rt.forEach(function($i){return l(ie,$i)}),es&&wa(ie,ct),et}function Xe(ie,Q,ce,Oe){var et=be(ce);if(typeof et!="function")throw Error(s(150));if(ce=et.call(ce),ce==null)throw Error(s(151));for(var nt=et=null,rt=Q,ct=Q=0,Is=null,Mt=ce.next();rt!==null&&!Mt.done;ct++,Mt=ce.next()){rt.index>ct?(Is=rt,rt=null):Is=rt.sibling;var $i=Ce(ie,rt,Mt.value,Oe);if($i===null){rt===null&&(rt=Is);break}a&&rt&&$i.alternate===null&&l(ie,rt),Q=w($i,Q,ct),nt===null?et=$i:nt.sibling=$i,nt=$i,rt=Is}if(Mt.done)return d(ie,rt),es&&wa(ie,ct),et;if(rt===null){for(;!Mt.done;ct++,Mt=ce.next())Mt=Re(ie,Mt.value,Oe),Mt!==null&&(Q=w(Mt,Q,ct),nt===null?et=Mt:nt.sibling=Mt,nt=Mt);return es&&wa(ie,ct),et}for(rt=m(ie,rt);!Mt.done;ct++,Mt=ce.next())Mt=qe(rt,ie,ct,Mt.value,Oe),Mt!==null&&(a&&Mt.alternate!==null&&rt.delete(Mt.key===null?ct:Mt.key),Q=w(Mt,Q,ct),nt===null?et=Mt:nt.sibling=Mt,nt=Mt);return a&&rt.forEach(function(_S){return l(ie,_S)}),es&&wa(ie,ct),et}function ms(ie,Q,ce,Oe){if(typeof ce=="object"&&ce!==null&&ce.type===D&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case ee:e:{for(var et=ce.key,nt=Q;nt!==null;){if(nt.key===et){if(et=ce.type,et===D){if(nt.tag===7){d(ie,nt.sibling),Q=b(nt,ce.props.children),Q.return=ie,ie=Q;break e}}else if(nt.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Se&&Eg(et)===nt.type){d(ie,nt.sibling),Q=b(nt,ce.props),Q.ref=Ml(ie,nt,ce),Q.return=ie,ie=Q;break e}d(ie,nt);break}else l(ie,nt);nt=nt.sibling}ce.type===D?(Q=Ta(ce.props.children,ie.mode,Oe,ce.key),Q.return=ie,ie=Q):(Oe=Ld(ce.type,ce.key,ce.props,null,ie.mode,Oe),Oe.ref=Ml(ie,Q,ce),Oe.return=ie,ie=Oe)}return M(ie);case W:e:{for(nt=ce.key;Q!==null;){if(Q.key===nt)if(Q.tag===4&&Q.stateNode.containerInfo===ce.containerInfo&&Q.stateNode.implementation===ce.implementation){d(ie,Q.sibling),Q=b(Q,ce.children||[]),Q.return=ie,ie=Q;break e}else{d(ie,Q);break}else l(ie,Q);Q=Q.sibling}Q=kf(ce,ie.mode,Oe),Q.return=ie,ie=Q}return M(ie);case Se:return nt=ce._init,ms(ie,Q,nt(ce._payload),Oe)}if(We(ce))return Ze(ie,Q,ce,Oe);if(be(ce))return Xe(ie,Q,ce,Oe);fd(ie,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,Q!==null&&Q.tag===6?(d(ie,Q.sibling),Q=b(Q,ce),Q.return=ie,ie=Q):(d(ie,Q),Q=Sf(ce,ie.mode,Oe),Q.return=ie,ie=Q),M(ie)):d(ie,Q)}return ms}var _o=Tg(!0),Pg=Tg(!1),pd=Pi(null),md=null,Co=null,Rh=null;function Dh(){Rh=Co=md=null}function Mh(a){var l=pd.current;Xt(pd),a._currentValue=l}function Oh(a,l,d){for(;a!==null;){var m=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),a===d)break;a=a.return}}function Eo(a,l){md=a,Rh=Co=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(gn=!0),a.firstContext=null)}function $n(a){var l=a._currentValue;if(Rh!==a)if(a={context:a,memoizedValue:l,next:null},Co===null){if(md===null)throw Error(s(308));Co=a,md.dependencies={lanes:0,firstContext:a}}else Co=Co.next=a;return l}var Na=null;function Lh(a){Na===null?Na=[a]:Na.push(a)}function Ag(a,l,d,m){var b=l.interleaved;return b===null?(d.next=d,Lh(l)):(d.next=b.next,b.next=d),l.interleaved=d,ri(a,m)}function ri(a,l){a.lanes|=l;var d=a.alternate;for(d!==null&&(d.lanes|=l),d=a,a=a.return;a!==null;)a.childLanes|=l,d=a.alternate,d!==null&&(d.childLanes|=l),d=a,a=a.return;return d.tag===3?d.stateNode:null}var Ri=!1;function Uh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ig(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ii(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Di(a,l,d){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(Rt&2)!==0){var b=m.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),m.pending=l,ri(a,d)}return b=m.interleaved,b===null?(l.next=l,Lh(m)):(l.next=b.next,b.next=l),m.interleaved=l,ri(a,d)}function gd(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var m=l.lanes;m&=a.pendingLanes,d|=m,l.lanes=d,gl(a,d)}}function Rg(a,l){var d=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var b=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var M={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};w===null?b=w=M:w=w.next=M,d=d.next}while(d!==null);w===null?b=w=l:w=w.next=l}else b=w=l;d={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:m.shared,effects:m.effects},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}function xd(a,l,d,m){var b=a.updateQueue;Ri=!1;var w=b.firstBaseUpdate,M=b.lastBaseUpdate,B=b.shared.pending;if(B!==null){b.shared.pending=null;var X=B,he=X.next;X.next=null,M===null?w=he:M.next=he,M=X;var Ee=a.alternate;Ee!==null&&(Ee=Ee.updateQueue,B=Ee.lastBaseUpdate,B!==M&&(B===null?Ee.firstBaseUpdate=he:B.next=he,Ee.lastBaseUpdate=X))}if(w!==null){var Re=b.baseState;M=0,Ee=he=X=null,B=w;do{var Ce=B.lane,qe=B.eventTime;if((m&Ce)===Ce){Ee!==null&&(Ee=Ee.next={eventTime:qe,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var Ze=a,Xe=B;switch(Ce=l,qe=d,Xe.tag){case 1:if(Ze=Xe.payload,typeof Ze=="function"){Re=Ze.call(qe,Re,Ce);break e}Re=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=Xe.payload,Ce=typeof Ze=="function"?Ze.call(qe,Re,Ce):Ze,Ce==null)break e;Re=ve({},Re,Ce);break e;case 2:Ri=!0}}B.callback!==null&&B.lane!==0&&(a.flags|=64,Ce=b.effects,Ce===null?b.effects=[B]:Ce.push(B))}else qe={eventTime:qe,lane:Ce,tag:B.tag,payload:B.payload,callback:B.callback,next:null},Ee===null?(he=Ee=qe,X=Re):Ee=Ee.next=qe,M|=Ce;if(B=B.next,B===null){if(B=b.shared.pending,B===null)break;Ce=B,B=Ce.next,Ce.next=null,b.lastBaseUpdate=Ce,b.shared.pending=null}}while(!0);if(Ee===null&&(X=Re),b.baseState=X,b.firstBaseUpdate=he,b.lastBaseUpdate=Ee,l=b.shared.interleaved,l!==null){b=l;do M|=b.lane,b=b.next;while(b!==l)}else w===null&&(b.shared.lanes=0);ka|=M,a.lanes=M,a.memoizedState=Re}}function Dg(a,l,d){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var m=a[l],b=m.callback;if(b!==null){if(m.callback=null,m=d,typeof b!="function")throw Error(s(191,b));b.call(m)}}}var Ol={},Cr=Pi(Ol),Ll=Pi(Ol),Ul=Pi(Ol);function ja(a){if(a===Ol)throw Error(s(174));return a}function zh(a,l){switch(Gt(Ul,l),Gt(Ll,a),Gt(Cr,Ol),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Wt(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=Wt(l,a)}Xt(Cr),Gt(Cr,l)}function To(){Xt(Cr),Xt(Ll),Xt(Ul)}function Mg(a){ja(Ul.current);var l=ja(Cr.current),d=Wt(l,a.type);l!==d&&(Gt(Ll,a),Gt(Cr,d))}function Fh(a){Ll.current===a&&(Xt(Cr),Xt(Ll))}var ns=Pi(0);function yd(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var $h=[];function Vh(){for(var a=0;a<$h.length;a++)$h[a]._workInProgressVersionPrimary=null;$h.length=0}var bd=K.ReactCurrentDispatcher,Bh=K.ReactCurrentBatchConfig,Sa=0,rs=null,_s=null,Ps=null,vd=!1,zl=!1,Fl=0,Kj=0;function Ks(){throw Error(s(321))}function qh(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!Jn(a[d],l[d]))return!1;return!0}function Wh(a,l,d,m,b,w){if(Sa=w,rs=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,bd.current=a===null||a.memoizedState===null?Xj:Qj,a=d(m,b),zl){w=0;do{if(zl=!1,Fl=0,25<=w)throw Error(s(301));w+=1,Ps=_s=null,l.updateQueue=null,bd.current=eS,a=d(m,b)}while(zl)}if(bd.current=jd,l=_s!==null&&_s.next!==null,Sa=0,Ps=_s=rs=null,vd=!1,l)throw Error(s(300));return a}function Hh(){var a=Fl!==0;return Fl=0,a}function Er(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ps===null?rs.memoizedState=Ps=a:Ps=Ps.next=a,Ps}function Vn(){if(_s===null){var a=rs.alternate;a=a!==null?a.memoizedState:null}else a=_s.next;var l=Ps===null?rs.memoizedState:Ps.next;if(l!==null)Ps=l,_s=a;else{if(a===null)throw Error(s(310));_s=a,a={memoizedState:_s.memoizedState,baseState:_s.baseState,baseQueue:_s.baseQueue,queue:_s.queue,next:null},Ps===null?rs.memoizedState=Ps=a:Ps=Ps.next=a}return Ps}function $l(a,l){return typeof l=="function"?l(a):l}function Gh(a){var l=Vn(),d=l.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var m=_s,b=m.baseQueue,w=d.pending;if(w!==null){if(b!==null){var M=b.next;b.next=w.next,w.next=M}m.baseQueue=b=w,d.pending=null}if(b!==null){w=b.next,m=m.baseState;var B=M=null,X=null,he=w;do{var Ee=he.lane;if((Sa&Ee)===Ee)X!==null&&(X=X.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),m=he.hasEagerState?he.eagerState:a(m,he.action);else{var Re={lane:Ee,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};X===null?(B=X=Re,M=m):X=X.next=Re,rs.lanes|=Ee,ka|=Ee}he=he.next}while(he!==null&&he!==w);X===null?M=m:X.next=B,Jn(m,l.memoizedState)||(gn=!0),l.memoizedState=m,l.baseState=M,l.baseQueue=X,d.lastRenderedState=m}if(a=d.interleaved,a!==null){b=a;do w=b.lane,rs.lanes|=w,ka|=w,b=b.next;while(b!==a)}else b===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Kh(a){var l=Vn(),d=l.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var m=d.dispatch,b=d.pending,w=l.memoizedState;if(b!==null){d.pending=null;var M=b=b.next;do w=a(w,M.action),M=M.next;while(M!==b);Jn(w,l.memoizedState)||(gn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,m]}function Og(){}function Lg(a,l){var d=rs,m=Vn(),b=l(),w=!Jn(m.memoizedState,b);if(w&&(m.memoizedState=b,gn=!0),m=m.queue,Jh(Fg.bind(null,d,m,a),[a]),m.getSnapshot!==l||w||Ps!==null&&Ps.memoizedState.tag&1){if(d.flags|=2048,Vl(9,zg.bind(null,d,m,b,l),void 0,null),As===null)throw Error(s(349));(Sa&30)!==0||Ug(d,l,b)}return b}function Ug(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=rs.updateQueue,l===null?(l={lastEffect:null,stores:null},rs.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function zg(a,l,d,m){l.value=d,l.getSnapshot=m,$g(l)&&Vg(a)}function Fg(a,l,d){return d(function(){$g(l)&&Vg(a)})}function $g(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!Jn(a,d)}catch{return!0}}function Vg(a){var l=ri(a,1);l!==null&&er(l,a,1,-1)}function Bg(a){var l=Er();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:a},l.queue=a,a=a.dispatch=Zj.bind(null,rs,a),[l.memoizedState,a]}function Vl(a,l,d,m){return a={tag:a,create:l,destroy:d,deps:m,next:null},l=rs.updateQueue,l===null?(l={lastEffect:null,stores:null},rs.updateQueue=l,l.lastEffect=a.next=a):(d=l.lastEffect,d===null?l.lastEffect=a.next=a:(m=d.next,d.next=a,a.next=m,l.lastEffect=a)),a}function qg(){return Vn().memoizedState}function wd(a,l,d,m){var b=Er();rs.flags|=a,b.memoizedState=Vl(1|l,d,void 0,m===void 0?null:m)}function Nd(a,l,d,m){var b=Vn();m=m===void 0?null:m;var w=void 0;if(_s!==null){var M=_s.memoizedState;if(w=M.destroy,m!==null&&qh(m,M.deps)){b.memoizedState=Vl(l,d,w,m);return}}rs.flags|=a,b.memoizedState=Vl(1|l,d,w,m)}function Wg(a,l){return wd(8390656,8,a,l)}function Jh(a,l){return Nd(2048,8,a,l)}function Hg(a,l){return Nd(4,2,a,l)}function Gg(a,l){return Nd(4,4,a,l)}function Kg(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Jg(a,l,d){return d=d!=null?d.concat([a]):null,Nd(4,4,Kg.bind(null,l,a),d)}function Yh(){}function Yg(a,l){var d=Vn();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&qh(l,m[1])?m[0]:(d.memoizedState=[a,l],a)}function Zg(a,l){var d=Vn();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&qh(l,m[1])?m[0]:(a=a(),d.memoizedState=[a,l],a)}function Xg(a,l,d){return(Sa&21)===0?(a.baseState&&(a.baseState=!1,gn=!0),a.memoizedState=d):(Jn(d,l)||(d=Ni(),rs.lanes|=d,ka|=d,a.baseState=!0),l)}function Jj(a,l){var d=_t;_t=d!==0&&4>d?d:4,a(!0);var m=Bh.transition;Bh.transition={};try{a(!1),l()}finally{_t=d,Bh.transition=m}}function Qg(){return Vn().memoizedState}function Yj(a,l,d){var m=Ui(a);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},e0(a))t0(l,d);else if(d=Ag(a,l,d,m),d!==null){var b=sn();er(d,a,m,b),s0(d,l,m)}}function Zj(a,l,d){var m=Ui(a),b={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(e0(a))t0(l,b);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var M=l.lastRenderedState,B=w(M,d);if(b.hasEagerState=!0,b.eagerState=B,Jn(B,M)){var X=l.interleaved;X===null?(b.next=b,Lh(l)):(b.next=X.next,X.next=b),l.interleaved=b;return}}catch{}finally{}d=Ag(a,l,b,m),d!==null&&(b=sn(),er(d,a,m,b),s0(d,l,m))}}function e0(a){var l=a.alternate;return a===rs||l!==null&&l===rs}function t0(a,l){zl=vd=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function s0(a,l,d){if((d&4194240)!==0){var m=l.lanes;m&=a.pendingLanes,d|=m,l.lanes=d,gl(a,d)}}var jd={readContext:$n,useCallback:Ks,useContext:Ks,useEffect:Ks,useImperativeHandle:Ks,useInsertionEffect:Ks,useLayoutEffect:Ks,useMemo:Ks,useReducer:Ks,useRef:Ks,useState:Ks,useDebugValue:Ks,useDeferredValue:Ks,useTransition:Ks,useMutableSource:Ks,useSyncExternalStore:Ks,useId:Ks,unstable_isNewReconciler:!1},Xj={readContext:$n,useCallback:function(a,l){return Er().memoizedState=[a,l===void 0?null:l],a},useContext:$n,useEffect:Wg,useImperativeHandle:function(a,l,d){return d=d!=null?d.concat([a]):null,wd(4194308,4,Kg.bind(null,l,a),d)},useLayoutEffect:function(a,l){return wd(4194308,4,a,l)},useInsertionEffect:function(a,l){return wd(4,2,a,l)},useMemo:function(a,l){var d=Er();return l=l===void 0?null:l,a=a(),d.memoizedState=[a,l],a},useReducer:function(a,l,d){var m=Er();return l=d!==void 0?d(l):l,m.memoizedState=m.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},m.queue=a,a=a.dispatch=Yj.bind(null,rs,a),[m.memoizedState,a]},useRef:function(a){var l=Er();return a={current:a},l.memoizedState=a},useState:Bg,useDebugValue:Yh,useDeferredValue:function(a){return Er().memoizedState=a},useTransition:function(){var a=Bg(!1),l=a[0];return a=Jj.bind(null,a[1]),Er().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,d){var m=rs,b=Er();if(es){if(d===void 0)throw Error(s(407));d=d()}else{if(d=l(),As===null)throw Error(s(349));(Sa&30)!==0||Ug(m,l,d)}b.memoizedState=d;var w={value:d,getSnapshot:l};return b.queue=w,Wg(Fg.bind(null,m,w,a),[a]),m.flags|=2048,Vl(9,zg.bind(null,m,w,d,l),void 0,null),d},useId:function(){var a=Er(),l=As.identifierPrefix;if(es){var d=ni,m=si;d=(m&~(1<<32-kt(m)-1)).toString(32)+d,l=":"+l+"R"+d,d=Fl++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=Kj++,l=":"+l+"r"+d.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},Qj={readContext:$n,useCallback:Yg,useContext:$n,useEffect:Jh,useImperativeHandle:Jg,useInsertionEffect:Hg,useLayoutEffect:Gg,useMemo:Zg,useReducer:Gh,useRef:qg,useState:function(){return Gh($l)},useDebugValue:Yh,useDeferredValue:function(a){var l=Vn();return Xg(l,_s.memoizedState,a)},useTransition:function(){var a=Gh($l)[0],l=Vn().memoizedState;return[a,l]},useMutableSource:Og,useSyncExternalStore:Lg,useId:Qg,unstable_isNewReconciler:!1},eS={readContext:$n,useCallback:Yg,useContext:$n,useEffect:Jh,useImperativeHandle:Jg,useInsertionEffect:Hg,useLayoutEffect:Gg,useMemo:Zg,useReducer:Kh,useRef:qg,useState:function(){return Kh($l)},useDebugValue:Yh,useDeferredValue:function(a){var l=Vn();return _s===null?l.memoizedState=a:Xg(l,_s.memoizedState,a)},useTransition:function(){var a=Kh($l)[0],l=Vn().memoizedState;return[a,l]},useMutableSource:Og,useSyncExternalStore:Lg,useId:Qg,unstable_isNewReconciler:!1};function Zn(a,l){if(a&&a.defaultProps){l=ve({},l),a=a.defaultProps;for(var d in a)l[d]===void 0&&(l[d]=a[d]);return l}return l}function Zh(a,l,d,m){l=a.memoizedState,d=d(m,l),d=d==null?l:ve({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Sd={isMounted:function(a){return(a=a._reactInternals)?en(a)===a:!1},enqueueSetState:function(a,l,d){a=a._reactInternals;var m=sn(),b=Ui(a),w=ii(m,b);w.payload=l,d!=null&&(w.callback=d),l=Di(a,w,b),l!==null&&(er(l,a,b,m),gd(l,a,b))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var m=sn(),b=Ui(a),w=ii(m,b);w.tag=1,w.payload=l,d!=null&&(w.callback=d),l=Di(a,w,b),l!==null&&(er(l,a,b,m),gd(l,a,b))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=sn(),m=Ui(a),b=ii(d,m);b.tag=2,l!=null&&(b.callback=l),l=Di(a,b,m),l!==null&&(er(l,a,m,d),gd(l,a,m))}};function n0(a,l,d,m,b,w,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,w,M):l.prototype&&l.prototype.isPureReactComponent?!El(d,m)||!El(b,w):!0}function r0(a,l,d){var m=!1,b=Ai,w=l.contextType;return typeof w=="object"&&w!==null?w=$n(w):(b=mn(l)?ba:Gs.current,m=l.contextTypes,w=(m=m!=null)?No(a,b):Ai),l=new l(d,w),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Sd,a.stateNode=l,l._reactInternals=a,m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=w),l}function i0(a,l,d,m){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==a&&Sd.enqueueReplaceState(l,l.state,null)}function Xh(a,l,d,m){var b=a.stateNode;b.props=d,b.state=a.memoizedState,b.refs={},Uh(a);var w=l.contextType;typeof w=="object"&&w!==null?b.context=$n(w):(w=mn(l)?ba:Gs.current,b.context=No(a,w)),b.state=a.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Zh(a,l,w,d),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(l=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),l!==b.state&&Sd.enqueueReplaceState(b,b.state,null),xd(a,d,b,m),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308)}function Po(a,l){try{var d="",m=l;do d+=q(m),m=m.return;while(m);var b=d}catch(w){b=`
Error generating stack: `+w.message+`
`+w.stack}return{value:a,source:l,stack:b,digest:null}}function Qh(a,l,d){return{value:a,source:null,stack:d??null,digest:l??null}}function ef(a,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var tS=typeof WeakMap=="function"?WeakMap:Map;function a0(a,l,d){d=ii(-1,d),d.tag=3,d.payload={element:null};var m=l.value;return d.callback=function(){Ad||(Ad=!0,gf=m),ef(a,l)},d}function o0(a,l,d){d=ii(-1,d),d.tag=3;var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var b=l.value;d.payload=function(){return m(b)},d.callback=function(){ef(a,l)}}var w=a.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(d.callback=function(){ef(a,l),typeof m!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var M=l.stack;this.componentDidCatch(l.value,{componentStack:M!==null?M:""})}),d}function l0(a,l,d){var m=a.pingCache;if(m===null){m=a.pingCache=new tS;var b=new Set;m.set(l,b)}else b=m.get(l),b===void 0&&(b=new Set,m.set(l,b));b.has(d)||(b.add(d),a=mS.bind(null,a,l,d),l.then(a,a))}function c0(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function d0(a,l,d,m,b){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=ii(-1,1),l.tag=2,Di(d,l,1))),d.lanes|=1),a):(a.flags|=65536,a.lanes=b,a)}var sS=K.ReactCurrentOwner,gn=!1;function tn(a,l,d,m){l.child=a===null?Pg(l,null,d,m):_o(l,a.child,d,m)}function u0(a,l,d,m,b){d=d.render;var w=l.ref;return Eo(l,b),m=Wh(a,l,d,m,w,b),d=Hh(),a!==null&&!gn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~b,ai(a,l,b)):(es&&d&&Eh(l),l.flags|=1,tn(a,l,m,b),l.child)}function h0(a,l,d,m,b){if(a===null){var w=d.type;return typeof w=="function"&&!jf(w)&&w.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=w,f0(a,l,w,m,b)):(a=Ld(d.type,null,m,l,l.mode,b),a.ref=l.ref,a.return=l,l.child=a)}if(w=a.child,(a.lanes&b)===0){var M=w.memoizedProps;if(d=d.compare,d=d!==null?d:El,d(M,m)&&a.ref===l.ref)return ai(a,l,b)}return l.flags|=1,a=Fi(w,m),a.ref=l.ref,a.return=l,l.child=a}function f0(a,l,d,m,b){if(a!==null){var w=a.memoizedProps;if(El(w,m)&&a.ref===l.ref)if(gn=!1,l.pendingProps=m=w,(a.lanes&b)!==0)(a.flags&131072)!==0&&(gn=!0);else return l.lanes=a.lanes,ai(a,l,b)}return tf(a,l,d,m,b)}function p0(a,l,d){var m=l.pendingProps,b=m.children,w=a!==null?a.memoizedState:null;if(m.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(Io,En),En|=d;else{if((d&1073741824)===0)return a=w!==null?w.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Gt(Io,En),En|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=w!==null?w.baseLanes:d,Gt(Io,En),En|=m}else w!==null?(m=w.baseLanes|d,l.memoizedState=null):m=d,Gt(Io,En),En|=m;return tn(a,l,b,d),l.child}function m0(a,l){var d=l.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function tf(a,l,d,m,b){var w=mn(d)?ba:Gs.current;return w=No(l,w),Eo(l,b),d=Wh(a,l,d,m,w,b),m=Hh(),a!==null&&!gn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~b,ai(a,l,b)):(es&&m&&Eh(l),l.flags|=1,tn(a,l,d,b),l.child)}function g0(a,l,d,m,b){if(mn(d)){var w=!0;ld(l)}else w=!1;if(Eo(l,b),l.stateNode===null)_d(a,l),r0(l,d,m),Xh(l,d,m,b),m=!0;else if(a===null){var M=l.stateNode,B=l.memoizedProps;M.props=B;var X=M.context,he=d.contextType;typeof he=="object"&&he!==null?he=$n(he):(he=mn(d)?ba:Gs.current,he=No(l,he));var Ee=d.getDerivedStateFromProps,Re=typeof Ee=="function"||typeof M.getSnapshotBeforeUpdate=="function";Re||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(B!==m||X!==he)&&i0(l,M,m,he),Ri=!1;var Ce=l.memoizedState;M.state=Ce,xd(l,m,M,b),X=l.memoizedState,B!==m||Ce!==X||pn.current||Ri?(typeof Ee=="function"&&(Zh(l,d,Ee,m),X=l.memoizedState),(B=Ri||n0(l,d,B,m,Ce,X,he))?(Re||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(l.flags|=4194308)):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=X),M.props=m,M.state=X,M.context=he,m=B):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{M=l.stateNode,Ig(a,l),B=l.memoizedProps,he=l.type===l.elementType?B:Zn(l.type,B),M.props=he,Re=l.pendingProps,Ce=M.context,X=d.contextType,typeof X=="object"&&X!==null?X=$n(X):(X=mn(d)?ba:Gs.current,X=No(l,X));var qe=d.getDerivedStateFromProps;(Ee=typeof qe=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(B!==Re||Ce!==X)&&i0(l,M,m,X),Ri=!1,Ce=l.memoizedState,M.state=Ce,xd(l,m,M,b);var Ze=l.memoizedState;B!==Re||Ce!==Ze||pn.current||Ri?(typeof qe=="function"&&(Zh(l,d,qe,m),Ze=l.memoizedState),(he=Ri||n0(l,d,he,m,Ce,Ze,X)||!1)?(Ee||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(m,Ze,X),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(m,Ze,X)),typeof M.componentDidUpdate=="function"&&(l.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof M.componentDidUpdate!="function"||B===a.memoizedProps&&Ce===a.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&Ce===a.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=Ze),M.props=m,M.state=Ze,M.context=X,m=he):(typeof M.componentDidUpdate!="function"||B===a.memoizedProps&&Ce===a.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&Ce===a.memoizedState||(l.flags|=1024),m=!1)}return sf(a,l,d,m,w,b)}function sf(a,l,d,m,b,w){m0(a,l);var M=(l.flags&128)!==0;if(!m&&!M)return b&&wg(l,d,!1),ai(a,l,w);m=l.stateNode,sS.current=l;var B=M&&typeof d.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,a!==null&&M?(l.child=_o(l,a.child,null,w),l.child=_o(l,null,B,w)):tn(a,l,B,w),l.memoizedState=m.state,b&&wg(l,d,!0),l.child}function x0(a){var l=a.stateNode;l.pendingContext?bg(a,l.pendingContext,l.pendingContext!==l.context):l.context&&bg(a,l.context,!1),zh(a,l.containerInfo)}function y0(a,l,d,m,b){return ko(),Ih(b),l.flags|=256,tn(a,l,d,m),l.child}var nf={dehydrated:null,treeContext:null,retryLane:0};function rf(a){return{baseLanes:a,cachePool:null,transitions:null}}function b0(a,l,d){var m=l.pendingProps,b=ns.current,w=!1,M=(l.flags&128)!==0,B;if((B=M)||(B=a!==null&&a.memoizedState===null?!1:(b&2)!==0),B?(w=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(b|=1),Gt(ns,b&1),a===null)return Ah(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(M=m.children,a=m.fallback,w?(m=l.mode,w=l.child,M={mode:"hidden",children:M},(m&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=M):w=Ud(M,m,0,null),a=Ta(a,m,d,null),w.return=l,a.return=l,w.sibling=a,l.child=w,l.child.memoizedState=rf(d),l.memoizedState=nf,a):af(l,M));if(b=a.memoizedState,b!==null&&(B=b.dehydrated,B!==null))return nS(a,l,M,m,B,b,d);if(w){w=m.fallback,M=l.mode,b=a.child,B=b.sibling;var X={mode:"hidden",children:m.children};return(M&1)===0&&l.child!==b?(m=l.child,m.childLanes=0,m.pendingProps=X,l.deletions=null):(m=Fi(b,X),m.subtreeFlags=b.subtreeFlags&14680064),B!==null?w=Fi(B,w):(w=Ta(w,M,d,null),w.flags|=2),w.return=l,m.return=l,m.sibling=w,l.child=m,m=w,w=l.child,M=a.child.memoizedState,M=M===null?rf(d):{baseLanes:M.baseLanes|d,cachePool:null,transitions:M.transitions},w.memoizedState=M,w.childLanes=a.childLanes&~d,l.memoizedState=nf,m}return w=a.child,a=w.sibling,m=Fi(w,{mode:"visible",children:m.children}),(l.mode&1)===0&&(m.lanes=d),m.return=l,m.sibling=null,a!==null&&(d=l.deletions,d===null?(l.deletions=[a],l.flags|=16):d.push(a)),l.child=m,l.memoizedState=null,m}function af(a,l){return l=Ud({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function kd(a,l,d,m){return m!==null&&Ih(m),_o(l,a.child,null,d),a=af(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function nS(a,l,d,m,b,w,M){if(d)return l.flags&256?(l.flags&=-257,m=Qh(Error(s(422))),kd(a,l,M,m)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(w=m.fallback,b=l.mode,m=Ud({mode:"visible",children:m.children},b,0,null),w=Ta(w,b,M,null),w.flags|=2,m.return=l,w.return=l,m.sibling=w,l.child=m,(l.mode&1)!==0&&_o(l,a.child,null,M),l.child.memoizedState=rf(M),l.memoizedState=nf,w);if((l.mode&1)===0)return kd(a,l,M,null);if(b.data==="$!"){if(m=b.nextSibling&&b.nextSibling.dataset,m)var B=m.dgst;return m=B,w=Error(s(419)),m=Qh(w,m,void 0),kd(a,l,M,m)}if(B=(M&a.childLanes)!==0,gn||B){if(m=As,m!==null){switch(M&-M){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(m.suspendedLanes|M))!==0?0:b,b!==0&&b!==w.retryLane&&(w.retryLane=b,ri(a,b),er(m,a,b,-1))}return Nf(),m=Qh(Error(s(421))),kd(a,l,M,m)}return b.data==="$?"?(l.flags|=128,l.child=a.child,l=gS.bind(null,a),b._reactRetry=l,null):(a=w.treeContext,Cn=Ti(b.nextSibling),_n=l,es=!0,Yn=null,a!==null&&(zn[Fn++]=si,zn[Fn++]=ni,zn[Fn++]=va,si=a.id,ni=a.overflow,va=l),l=af(l,m.children),l.flags|=4096,l)}function v0(a,l,d){a.lanes|=l;var m=a.alternate;m!==null&&(m.lanes|=l),Oh(a.return,l,d)}function of(a,l,d,m,b){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:b}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=m,w.tail=d,w.tailMode=b)}function w0(a,l,d){var m=l.pendingProps,b=m.revealOrder,w=m.tail;if(tn(a,l,m.children,d),m=ns.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&v0(a,d,l);else if(a.tag===19)v0(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}if(Gt(ns,m),(l.mode&1)===0)l.memoizedState=null;else switch(b){case"forwards":for(d=l.child,b=null;d!==null;)a=d.alternate,a!==null&&yd(a)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),of(l,!1,b,d,w);break;case"backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(a=b.alternate,a!==null&&yd(a)===null){l.child=b;break}a=b.sibling,b.sibling=d,d=b,b=a}of(l,!0,d,null,w);break;case"together":of(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function _d(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function ai(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),ka|=l.lanes,(d&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(s(153));if(l.child!==null){for(a=l.child,d=Fi(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=Fi(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function rS(a,l,d){switch(l.tag){case 3:x0(l),ko();break;case 5:Mg(l);break;case 1:mn(l.type)&&ld(l);break;case 4:zh(l,l.stateNode.containerInfo);break;case 10:var m=l.type._context,b=l.memoizedProps.value;Gt(pd,m._currentValue),m._currentValue=b;break;case 13:if(m=l.memoizedState,m!==null)return m.dehydrated!==null?(Gt(ns,ns.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?b0(a,l,d):(Gt(ns,ns.current&1),a=ai(a,l,d),a!==null?a.sibling:null);Gt(ns,ns.current&1);break;case 19:if(m=(d&l.childLanes)!==0,(a.flags&128)!==0){if(m)return w0(a,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Gt(ns,ns.current),m)break;return null;case 22:case 23:return l.lanes=0,p0(a,l,d)}return ai(a,l,d)}var N0,lf,j0,S0;N0=function(a,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)a.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},lf=function(){},j0=function(a,l,d,m){var b=a.memoizedProps;if(b!==m){a=l.stateNode,ja(Cr.current);var w=null;switch(d){case"input":b=yt(a,b),m=yt(a,m),w=[];break;case"select":b=ve({},b,{value:void 0}),m=ve({},m,{value:void 0}),w=[];break;case"textarea":b=ye(a,b),m=ye(a,m),w=[];break;default:typeof b.onClick!="function"&&typeof m.onClick=="function"&&(a.onclick=id)}Ds(d,m);var M;d=null;for(he in b)if(!m.hasOwnProperty(he)&&b.hasOwnProperty(he)&&b[he]!=null)if(he==="style"){var B=b[he];for(M in B)B.hasOwnProperty(M)&&(d||(d={}),d[M]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(i.hasOwnProperty(he)?w||(w=[]):(w=w||[]).push(he,null));for(he in m){var X=m[he];if(B=b!=null?b[he]:void 0,m.hasOwnProperty(he)&&X!==B&&(X!=null||B!=null))if(he==="style")if(B){for(M in B)!B.hasOwnProperty(M)||X&&X.hasOwnProperty(M)||(d||(d={}),d[M]="");for(M in X)X.hasOwnProperty(M)&&B[M]!==X[M]&&(d||(d={}),d[M]=X[M])}else d||(w||(w=[]),w.push(he,d)),d=X;else he==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,B=B?B.__html:void 0,X!=null&&B!==X&&(w=w||[]).push(he,X)):he==="children"?typeof X!="string"&&typeof X!="number"||(w=w||[]).push(he,""+X):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(i.hasOwnProperty(he)?(X!=null&&he==="onScroll"&&Zt("scroll",a),w||B===X||(w=[])):(w=w||[]).push(he,X))}d&&(w=w||[]).push("style",d);var he=w;(l.updateQueue=he)&&(l.flags|=4)}},S0=function(a,l,d,m){d!==m&&(l.flags|=4)};function Bl(a,l){if(!es)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function Js(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,m=0;if(l)for(var b=a.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags&14680064,m|=b.flags&14680064,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=m,a.childLanes=d,l}function iS(a,l,d){var m=l.pendingProps;switch(Th(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Js(l),null;case 1:return mn(l.type)&&od(),Js(l),null;case 3:return m=l.stateNode,To(),Xt(pn),Xt(Gs),Vh(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(a===null||a.child===null)&&(hd(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Yn!==null&&(bf(Yn),Yn=null))),lf(a,l),Js(l),null;case 5:Fh(l);var b=ja(Ul.current);if(d=l.type,a!==null&&l.stateNode!=null)j0(a,l,d,m,b),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(s(166));return Js(l),null}if(a=ja(Cr.current),hd(l)){m=l.stateNode,d=l.type;var w=l.memoizedProps;switch(m[_r]=l,m[Rl]=w,a=(l.mode&1)!==0,d){case"dialog":Zt("cancel",m),Zt("close",m);break;case"iframe":case"object":case"embed":Zt("load",m);break;case"video":case"audio":for(b=0;b<Pl.length;b++)Zt(Pl[b],m);break;case"source":Zt("error",m);break;case"img":case"image":case"link":Zt("error",m),Zt("load",m);break;case"details":Zt("toggle",m);break;case"input":Ut(m,w),Zt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!w.multiple},Zt("invalid",m);break;case"textarea":J(m,w),Zt("invalid",m)}Ds(d,w),b=null;for(var M in w)if(w.hasOwnProperty(M)){var B=w[M];M==="children"?typeof B=="string"?m.textContent!==B&&(w.suppressHydrationWarning!==!0&&rd(m.textContent,B,a),b=["children",B]):typeof B=="number"&&m.textContent!==""+B&&(w.suppressHydrationWarning!==!0&&rd(m.textContent,B,a),b=["children",""+B]):i.hasOwnProperty(M)&&B!=null&&M==="onScroll"&&Zt("scroll",m)}switch(d){case"input":qt(m),Be(m,w,!0);break;case"textarea":qt(m),jt(m);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(m.onclick=id)}m=b,l.updateQueue=m,m!==null&&(l.flags|=4)}else{M=b.nodeType===9?b:b.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=ft(d)),a==="http://www.w3.org/1999/xhtml"?d==="script"?(a=M.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof m.is=="string"?a=M.createElement(d,{is:m.is}):(a=M.createElement(d),d==="select"&&(M=a,m.multiple?M.multiple=!0:m.size&&(M.size=m.size))):a=M.createElementNS(a,d),a[_r]=l,a[Rl]=m,N0(a,l,!1,!1),l.stateNode=a;e:{switch(M=Ms(d,m),d){case"dialog":Zt("cancel",a),Zt("close",a),b=m;break;case"iframe":case"object":case"embed":Zt("load",a),b=m;break;case"video":case"audio":for(b=0;b<Pl.length;b++)Zt(Pl[b],a);b=m;break;case"source":Zt("error",a),b=m;break;case"img":case"image":case"link":Zt("error",a),Zt("load",a),b=m;break;case"details":Zt("toggle",a),b=m;break;case"input":Ut(a,m),b=yt(a,m),Zt("invalid",a);break;case"option":b=m;break;case"select":a._wrapperState={wasMultiple:!!m.multiple},b=ve({},m,{value:void 0}),Zt("invalid",a);break;case"textarea":J(a,m),b=ye(a,m),Zt("invalid",a);break;default:b=m}Ds(d,b),B=b;for(w in B)if(B.hasOwnProperty(w)){var X=B[w];w==="style"?Ws(a,X):w==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&Ss(a,X)):w==="children"?typeof X=="string"?(d!=="textarea"||X!=="")&&as(a,X):typeof X=="number"&&as(a,""+X):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?X!=null&&w==="onScroll"&&Zt("scroll",a):X!=null&&F(a,w,X,M))}switch(d){case"input":qt(a),Be(a,m,!1);break;case"textarea":qt(a),jt(a);break;case"option":m.value!=null&&a.setAttribute("value",""+$e(m.value));break;case"select":a.multiple=!!m.multiple,w=m.value,w!=null?Nt(a,!!m.multiple,w,!1):m.defaultValue!=null&&Nt(a,!!m.multiple,m.defaultValue,!0);break;default:typeof b.onClick=="function"&&(a.onclick=id)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Js(l),null;case 6:if(a&&l.stateNode!=null)S0(a,l,a.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(s(166));if(d=ja(Ul.current),ja(Cr.current),hd(l)){if(m=l.stateNode,d=l.memoizedProps,m[_r]=l,(w=m.nodeValue!==d)&&(a=_n,a!==null))switch(a.tag){case 3:rd(m.nodeValue,d,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&rd(m.nodeValue,d,(a.mode&1)!==0)}w&&(l.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[_r]=l,l.stateNode=m}return Js(l),null;case 13:if(Xt(ns),m=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(es&&Cn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Cg(),ko(),l.flags|=98560,w=!1;else if(w=hd(l),m!==null&&m.dehydrated!==null){if(a===null){if(!w)throw Error(s(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(s(317));w[_r]=l}else ko(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Js(l),w=!1}else Yn!==null&&(bf(Yn),Yn=null),w=!0;if(!w)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(m=m!==null,m!==(a!==null&&a.memoizedState!==null)&&m&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(ns.current&1)!==0?Cs===0&&(Cs=3):Nf())),l.updateQueue!==null&&(l.flags|=4),Js(l),null);case 4:return To(),lf(a,l),a===null&&Al(l.stateNode.containerInfo),Js(l),null;case 10:return Mh(l.type._context),Js(l),null;case 17:return mn(l.type)&&od(),Js(l),null;case 19:if(Xt(ns),w=l.memoizedState,w===null)return Js(l),null;if(m=(l.flags&128)!==0,M=w.rendering,M===null)if(m)Bl(w,!1);else{if(Cs!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(M=yd(a),M!==null){for(l.flags|=128,Bl(w,!1),m=M.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),l.subtreeFlags=0,m=d,d=l.child;d!==null;)w=d,a=m,w.flags&=14680066,M=w.alternate,M===null?(w.childLanes=0,w.lanes=a,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=M.childLanes,w.lanes=M.lanes,w.child=M.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=M.memoizedProps,w.memoizedState=M.memoizedState,w.updateQueue=M.updateQueue,w.type=M.type,a=M.dependencies,w.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),d=d.sibling;return Gt(ns,ns.current&1|2),l.child}a=a.sibling}w.tail!==null&&ge()>Ro&&(l.flags|=128,m=!0,Bl(w,!1),l.lanes=4194304)}else{if(!m)if(a=yd(M),a!==null){if(l.flags|=128,m=!0,d=a.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Bl(w,!0),w.tail===null&&w.tailMode==="hidden"&&!M.alternate&&!es)return Js(l),null}else 2*ge()-w.renderingStartTime>Ro&&d!==1073741824&&(l.flags|=128,m=!0,Bl(w,!1),l.lanes=4194304);w.isBackwards?(M.sibling=l.child,l.child=M):(d=w.last,d!==null?d.sibling=M:l.child=M,w.last=M)}return w.tail!==null?(l=w.tail,w.rendering=l,w.tail=l.sibling,w.renderingStartTime=ge(),l.sibling=null,d=ns.current,Gt(ns,m?d&1|2:d&1),l):(Js(l),null);case 22:case 23:return wf(),m=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==m&&(l.flags|=8192),m&&(l.mode&1)!==0?(En&1073741824)!==0&&(Js(l),l.subtreeFlags&6&&(l.flags|=8192)):Js(l),null;case 24:return null;case 25:return null}throw Error(s(156,l.tag))}function aS(a,l){switch(Th(l),l.tag){case 1:return mn(l.type)&&od(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return To(),Xt(pn),Xt(Gs),Vh(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Fh(l),null;case 13:if(Xt(ns),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(s(340));ko()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Xt(ns),null;case 4:return To(),null;case 10:return Mh(l.type._context),null;case 22:case 23:return wf(),null;case 24:return null;default:return null}}var Cd=!1,Ys=!1,oS=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Ao(a,l){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){ls(a,l,m)}else d.current=null}function cf(a,l,d){try{d()}catch(m){ls(a,l,m)}}var k0=!1;function lS(a,l){if(vh=Xr,a=ng(),hh(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var b=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var M=0,B=-1,X=-1,he=0,Ee=0,Re=a,Ce=null;t:for(;;){for(var qe;Re!==d||b!==0&&Re.nodeType!==3||(B=M+b),Re!==w||m!==0&&Re.nodeType!==3||(X=M+m),Re.nodeType===3&&(M+=Re.nodeValue.length),(qe=Re.firstChild)!==null;)Ce=Re,Re=qe;for(;;){if(Re===a)break t;if(Ce===d&&++he===b&&(B=M),Ce===w&&++Ee===m&&(X=M),(qe=Re.nextSibling)!==null)break;Re=Ce,Ce=Re.parentNode}Re=qe}d=B===-1||X===-1?null:{start:B,end:X}}else d=null}d=d||{start:0,end:0}}else d=null;for(wh={focusedElem:a,selectionRange:d},Xr=!1,Ye=l;Ye!==null;)if(l=Ye,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Ye=a;else for(;Ye!==null;){l=Ye;try{var Ze=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Ze!==null){var Xe=Ze.memoizedProps,ms=Ze.memoizedState,ie=l.stateNode,Q=ie.getSnapshotBeforeUpdate(l.elementType===l.type?Xe:Zn(l.type,Xe),ms);ie.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var ce=l.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Oe){ls(l,l.return,Oe)}if(a=l.sibling,a!==null){a.return=l.return,Ye=a;break}Ye=l.return}return Ze=k0,k0=!1,Ze}function ql(a,l,d){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&a)===a){var w=b.destroy;b.destroy=void 0,w!==void 0&&cf(l,d,w)}b=b.next}while(b!==m)}}function Ed(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&a)===a){var m=d.create;d.destroy=m()}d=d.next}while(d!==l)}}function df(a){var l=a.ref;if(l!==null){var d=a.stateNode;switch(a.tag){case 5:a=d;break;default:a=d}typeof l=="function"?l(a):l.current=a}}function _0(a){var l=a.alternate;l!==null&&(a.alternate=null,_0(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[_r],delete l[Rl],delete l[kh],delete l[qj],delete l[Wj])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function C0(a){return a.tag===5||a.tag===3||a.tag===4}function E0(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||C0(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function uf(a,l,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(a,l):d.insertBefore(a,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(a,d)):(l=d,l.appendChild(a)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=id));else if(m!==4&&(a=a.child,a!==null))for(uf(a,l,d),a=a.sibling;a!==null;)uf(a,l,d),a=a.sibling}function hf(a,l,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(m!==4&&(a=a.child,a!==null))for(hf(a,l,d),a=a.sibling;a!==null;)hf(a,l,d),a=a.sibling}var zs=null,Xn=!1;function Mi(a,l,d){for(d=d.child;d!==null;)T0(a,l,d),d=d.sibling}function T0(a,l,d){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(lt,d)}catch{}switch(d.tag){case 5:Ys||Ao(d,l);case 6:var m=zs,b=Xn;zs=null,Mi(a,l,d),zs=m,Xn=b,zs!==null&&(Xn?(a=zs,d=d.stateNode,a.nodeType===8?a.parentNode.removeChild(d):a.removeChild(d)):zs.removeChild(d.stateNode));break;case 18:zs!==null&&(Xn?(a=zs,d=d.stateNode,a.nodeType===8?Sh(a.parentNode,d):a.nodeType===1&&Sh(a,d),ki(a)):Sh(zs,d.stateNode));break;case 4:m=zs,b=Xn,zs=d.stateNode.containerInfo,Xn=!0,Mi(a,l,d),zs=m,Xn=b;break;case 0:case 11:case 14:case 15:if(!Ys&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){b=m=m.next;do{var w=b,M=w.destroy;w=w.tag,M!==void 0&&((w&2)!==0||(w&4)!==0)&&cf(d,l,M),b=b.next}while(b!==m)}Mi(a,l,d);break;case 1:if(!Ys&&(Ao(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(B){ls(d,l,B)}Mi(a,l,d);break;case 21:Mi(a,l,d);break;case 22:d.mode&1?(Ys=(m=Ys)||d.memoizedState!==null,Mi(a,l,d),Ys=m):Mi(a,l,d);break;default:Mi(a,l,d)}}function P0(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new oS),l.forEach(function(m){var b=xS.bind(null,a,m);d.has(m)||(d.add(m),m.then(b,b))})}}function Qn(a,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var b=d[m];try{var w=a,M=l,B=M;e:for(;B!==null;){switch(B.tag){case 5:zs=B.stateNode,Xn=!1;break e;case 3:zs=B.stateNode.containerInfo,Xn=!0;break e;case 4:zs=B.stateNode.containerInfo,Xn=!0;break e}B=B.return}if(zs===null)throw Error(s(160));T0(w,M,b),zs=null,Xn=!1;var X=b.alternate;X!==null&&(X.return=null),b.return=null}catch(he){ls(b,l,he)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)A0(l,a),l=l.sibling}function A0(a,l){var d=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Qn(l,a),Tr(a),m&4){try{ql(3,a,a.return),Ed(3,a)}catch(Xe){ls(a,a.return,Xe)}try{ql(5,a,a.return)}catch(Xe){ls(a,a.return,Xe)}}break;case 1:Qn(l,a),Tr(a),m&512&&d!==null&&Ao(d,d.return);break;case 5:if(Qn(l,a),Tr(a),m&512&&d!==null&&Ao(d,d.return),a.flags&32){var b=a.stateNode;try{as(b,"")}catch(Xe){ls(a,a.return,Xe)}}if(m&4&&(b=a.stateNode,b!=null)){var w=a.memoizedProps,M=d!==null?d.memoizedProps:w,B=a.type,X=a.updateQueue;if(a.updateQueue=null,X!==null)try{B==="input"&&w.type==="radio"&&w.name!=null&&oe(b,w),Ms(B,M);var he=Ms(B,w);for(M=0;M<X.length;M+=2){var Ee=X[M],Re=X[M+1];Ee==="style"?Ws(b,Re):Ee==="dangerouslySetInnerHTML"?Ss(b,Re):Ee==="children"?as(b,Re):F(b,Ee,Re,he)}switch(B){case"input":De(b,w);break;case"textarea":je(b,w);break;case"select":var Ce=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!w.multiple;var qe=w.value;qe!=null?Nt(b,!!w.multiple,qe,!1):Ce!==!!w.multiple&&(w.defaultValue!=null?Nt(b,!!w.multiple,w.defaultValue,!0):Nt(b,!!w.multiple,w.multiple?[]:"",!1))}b[Rl]=w}catch(Xe){ls(a,a.return,Xe)}}break;case 6:if(Qn(l,a),Tr(a),m&4){if(a.stateNode===null)throw Error(s(162));b=a.stateNode,w=a.memoizedProps;try{b.nodeValue=w}catch(Xe){ls(a,a.return,Xe)}}break;case 3:if(Qn(l,a),Tr(a),m&4&&d!==null&&d.memoizedState.isDehydrated)try{ki(l.containerInfo)}catch(Xe){ls(a,a.return,Xe)}break;case 4:Qn(l,a),Tr(a);break;case 13:Qn(l,a),Tr(a),b=a.child,b.flags&8192&&(w=b.memoizedState!==null,b.stateNode.isHidden=w,!w||b.alternate!==null&&b.alternate.memoizedState!==null||(mf=ge())),m&4&&P0(a);break;case 22:if(Ee=d!==null&&d.memoizedState!==null,a.mode&1?(Ys=(he=Ys)||Ee,Qn(l,a),Ys=he):Qn(l,a),Tr(a),m&8192){if(he=a.memoizedState!==null,(a.stateNode.isHidden=he)&&!Ee&&(a.mode&1)!==0)for(Ye=a,Ee=a.child;Ee!==null;){for(Re=Ye=Ee;Ye!==null;){switch(Ce=Ye,qe=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:ql(4,Ce,Ce.return);break;case 1:Ao(Ce,Ce.return);var Ze=Ce.stateNode;if(typeof Ze.componentWillUnmount=="function"){m=Ce,d=Ce.return;try{l=m,Ze.props=l.memoizedProps,Ze.state=l.memoizedState,Ze.componentWillUnmount()}catch(Xe){ls(m,d,Xe)}}break;case 5:Ao(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){D0(Re);continue}}qe!==null?(qe.return=Ce,Ye=qe):D0(Re)}Ee=Ee.sibling}e:for(Ee=null,Re=a;;){if(Re.tag===5){if(Ee===null){Ee=Re;try{b=Re.stateNode,he?(w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(B=Re.stateNode,X=Re.memoizedProps.style,M=X!=null&&X.hasOwnProperty("display")?X.display:null,B.style.display=os("display",M))}catch(Xe){ls(a,a.return,Xe)}}}else if(Re.tag===6){if(Ee===null)try{Re.stateNode.nodeValue=he?"":Re.memoizedProps}catch(Xe){ls(a,a.return,Xe)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===a)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===a)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===a)break e;Ee===Re&&(Ee=null),Re=Re.return}Ee===Re&&(Ee=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:Qn(l,a),Tr(a),m&4&&P0(a);break;case 21:break;default:Qn(l,a),Tr(a)}}function Tr(a){var l=a.flags;if(l&2){try{e:{for(var d=a.return;d!==null;){if(C0(d)){var m=d;break e}d=d.return}throw Error(s(160))}switch(m.tag){case 5:var b=m.stateNode;m.flags&32&&(as(b,""),m.flags&=-33);var w=E0(a);hf(a,w,b);break;case 3:case 4:var M=m.stateNode.containerInfo,B=E0(a);uf(a,B,M);break;default:throw Error(s(161))}}catch(X){ls(a,a.return,X)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function cS(a,l,d){Ye=a,I0(a)}function I0(a,l,d){for(var m=(a.mode&1)!==0;Ye!==null;){var b=Ye,w=b.child;if(b.tag===22&&m){var M=b.memoizedState!==null||Cd;if(!M){var B=b.alternate,X=B!==null&&B.memoizedState!==null||Ys;B=Cd;var he=Ys;if(Cd=M,(Ys=X)&&!he)for(Ye=b;Ye!==null;)M=Ye,X=M.child,M.tag===22&&M.memoizedState!==null?M0(b):X!==null?(X.return=M,Ye=X):M0(b);for(;w!==null;)Ye=w,I0(w),w=w.sibling;Ye=b,Cd=B,Ys=he}R0(a)}else(b.subtreeFlags&8772)!==0&&w!==null?(w.return=b,Ye=w):R0(a)}}function R0(a){for(;Ye!==null;){var l=Ye;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Ys||Ed(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!Ys)if(d===null)m.componentDidMount();else{var b=l.elementType===l.type?d.memoizedProps:Zn(l.type,d.memoizedProps);m.componentDidUpdate(b,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var w=l.updateQueue;w!==null&&Dg(l,w,m);break;case 3:var M=l.updateQueue;if(M!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}Dg(l,M,d)}break;case 5:var B=l.stateNode;if(d===null&&l.flags&4){d=B;var X=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&d.focus();break;case"img":X.src&&(d.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var he=l.alternate;if(he!==null){var Ee=he.memoizedState;if(Ee!==null){var Re=Ee.dehydrated;Re!==null&&ki(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Ys||l.flags&512&&df(l)}catch(Ce){ls(l,l.return,Ce)}}if(l===a){Ye=null;break}if(d=l.sibling,d!==null){d.return=l.return,Ye=d;break}Ye=l.return}}function D0(a){for(;Ye!==null;){var l=Ye;if(l===a){Ye=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Ye=d;break}Ye=l.return}}function M0(a){for(;Ye!==null;){var l=Ye;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{Ed(4,l)}catch(X){ls(l,d,X)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var b=l.return;try{m.componentDidMount()}catch(X){ls(l,b,X)}}var w=l.return;try{df(l)}catch(X){ls(l,w,X)}break;case 5:var M=l.return;try{df(l)}catch(X){ls(l,M,X)}}}catch(X){ls(l,l.return,X)}if(l===a){Ye=null;break}var B=l.sibling;if(B!==null){B.return=l.return,Ye=B;break}Ye=l.return}}var dS=Math.ceil,Td=K.ReactCurrentDispatcher,ff=K.ReactCurrentOwner,Bn=K.ReactCurrentBatchConfig,Rt=0,As=null,ys=null,Fs=0,En=0,Io=Pi(0),Cs=0,Wl=null,ka=0,Pd=0,pf=0,Hl=null,xn=null,mf=0,Ro=1/0,oi=null,Ad=!1,gf=null,Oi=null,Id=!1,Li=null,Rd=0,Gl=0,xf=null,Dd=-1,Md=0;function sn(){return(Rt&6)!==0?ge():Dd!==-1?Dd:Dd=ge()}function Ui(a){return(a.mode&1)===0?1:(Rt&2)!==0&&Fs!==0?Fs&-Fs:Gj.transition!==null?(Md===0&&(Md=Ni()),Md):(a=_t,a!==0||(a=window.event,a=a===void 0?16:oo(a.type)),a)}function er(a,l,d,m){if(50<Gl)throw Gl=0,xf=null,Error(s(185));fa(a,d,m),((Rt&2)===0||a!==As)&&(a===As&&((Rt&2)===0&&(Pd|=d),Cs===4&&zi(a,Fs)),yn(a,m),d===1&&Rt===0&&(l.mode&1)===0&&(Ro=ge()+500,cd&&Ii()))}function yn(a,l){var d=a.callbackNode;pr(a,l);var m=gt(a,a===As?Fs:0);if(m===0)d!==null&&G(d),a.callbackNode=null,a.callbackPriority=0;else if(l=m&-m,a.callbackPriority!==l){if(d!=null&&G(d),l===1)a.tag===0?Hj(L0.bind(null,a)):Ng(L0.bind(null,a)),Vj(function(){(Rt&6)===0&&Ii()}),d=null;else{switch(mr(m)){case 1:d=ot;break;case 4:d=ue;break;case 16:d=me;break;case 536870912:d=St;break;default:d=me}d=W0(d,O0.bind(null,a))}a.callbackPriority=l,a.callbackNode=d}}function O0(a,l){if(Dd=-1,Md=0,(Rt&6)!==0)throw Error(s(327));var d=a.callbackNode;if(Do()&&a.callbackNode!==d)return null;var m=gt(a,a===As?Fs:0);if(m===0)return null;if((m&30)!==0||(m&a.expiredLanes)!==0||l)l=Od(a,m);else{l=m;var b=Rt;Rt|=2;var w=z0();(As!==a||Fs!==l)&&(oi=null,Ro=ge()+500,Ca(a,l));do try{fS();break}catch(B){U0(a,B)}while(!0);Dh(),Td.current=w,Rt=b,ys!==null?l=0:(As=null,Fs=0,l=Cs)}if(l!==0){if(l===2&&(b=Jr(a),b!==0&&(m=b,l=yf(a,b))),l===1)throw d=Wl,Ca(a,0),zi(a,m),yn(a,ge()),d;if(l===6)zi(a,m);else{if(b=a.current.alternate,(m&30)===0&&!uS(b)&&(l=Od(a,m),l===2&&(w=Jr(a),w!==0&&(m=w,l=yf(a,w))),l===1))throw d=Wl,Ca(a,0),zi(a,m),yn(a,ge()),d;switch(a.finishedWork=b,a.finishedLanes=m,l){case 0:case 1:throw Error(s(345));case 2:Ea(a,xn,oi);break;case 3:if(zi(a,m),(m&130023424)===m&&(l=mf+500-ge(),10<l)){if(gt(a,0)!==0)break;if(b=a.suspendedLanes,(b&m)!==m){sn(),a.pingedLanes|=a.suspendedLanes&b;break}a.timeoutHandle=jh(Ea.bind(null,a,xn,oi),l);break}Ea(a,xn,oi);break;case 4:if(zi(a,m),(m&4194240)===m)break;for(l=a.eventTimes,b=-1;0<m;){var M=31-kt(m);w=1<<M,M=l[M],M>b&&(b=M),m&=~w}if(m=b,m=ge()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*dS(m/1960))-m,10<m){a.timeoutHandle=jh(Ea.bind(null,a,xn,oi),m);break}Ea(a,xn,oi);break;case 5:Ea(a,xn,oi);break;default:throw Error(s(329))}}}return yn(a,ge()),a.callbackNode===d?O0.bind(null,a):null}function yf(a,l){var d=Hl;return a.current.memoizedState.isDehydrated&&(Ca(a,l).flags|=256),a=Od(a,l),a!==2&&(l=xn,xn=d,l!==null&&bf(l)),a}function bf(a){xn===null?xn=a:xn.push.apply(xn,a)}function uS(a){for(var l=a;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var b=d[m],w=b.getSnapshot;b=b.value;try{if(!Jn(w(),b))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function zi(a,l){for(l&=~pf,l&=~Pd,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var d=31-kt(l),m=1<<d;a[d]=-1,l&=~m}}function L0(a){if((Rt&6)!==0)throw Error(s(327));Do();var l=gt(a,0);if((l&1)===0)return yn(a,ge()),null;var d=Od(a,l);if(a.tag!==0&&d===2){var m=Jr(a);m!==0&&(l=m,d=yf(a,m))}if(d===1)throw d=Wl,Ca(a,0),zi(a,l),yn(a,ge()),d;if(d===6)throw Error(s(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,Ea(a,xn,oi),yn(a,ge()),null}function vf(a,l){var d=Rt;Rt|=1;try{return a(l)}finally{Rt=d,Rt===0&&(Ro=ge()+500,cd&&Ii())}}function _a(a){Li!==null&&Li.tag===0&&(Rt&6)===0&&Do();var l=Rt;Rt|=1;var d=Bn.transition,m=_t;try{if(Bn.transition=null,_t=1,a)return a()}finally{_t=m,Bn.transition=d,Rt=l,(Rt&6)===0&&Ii()}}function wf(){En=Io.current,Xt(Io)}function Ca(a,l){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==-1&&(a.timeoutHandle=-1,$j(d)),ys!==null)for(d=ys.return;d!==null;){var m=d;switch(Th(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&od();break;case 3:To(),Xt(pn),Xt(Gs),Vh();break;case 5:Fh(m);break;case 4:To();break;case 13:Xt(ns);break;case 19:Xt(ns);break;case 10:Mh(m.type._context);break;case 22:case 23:wf()}d=d.return}if(As=a,ys=a=Fi(a.current,null),Fs=En=l,Cs=0,Wl=null,pf=Pd=ka=0,xn=Hl=null,Na!==null){for(l=0;l<Na.length;l++)if(d=Na[l],m=d.interleaved,m!==null){d.interleaved=null;var b=m.next,w=d.pending;if(w!==null){var M=w.next;w.next=b,m.next=M}d.pending=m}Na=null}return a}function U0(a,l){do{var d=ys;try{if(Dh(),bd.current=jd,vd){for(var m=rs.memoizedState;m!==null;){var b=m.queue;b!==null&&(b.pending=null),m=m.next}vd=!1}if(Sa=0,Ps=_s=rs=null,zl=!1,Fl=0,ff.current=null,d===null||d.return===null){Cs=1,Wl=l,ys=null;break}e:{var w=a,M=d.return,B=d,X=l;if(l=Fs,B.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var he=X,Ee=B,Re=Ee.tag;if((Ee.mode&1)===0&&(Re===0||Re===11||Re===15)){var Ce=Ee.alternate;Ce?(Ee.updateQueue=Ce.updateQueue,Ee.memoizedState=Ce.memoizedState,Ee.lanes=Ce.lanes):(Ee.updateQueue=null,Ee.memoizedState=null)}var qe=c0(M);if(qe!==null){qe.flags&=-257,d0(qe,M,B,w,l),qe.mode&1&&l0(w,he,l),l=qe,X=he;var Ze=l.updateQueue;if(Ze===null){var Xe=new Set;Xe.add(X),l.updateQueue=Xe}else Ze.add(X);break e}else{if((l&1)===0){l0(w,he,l),Nf();break e}X=Error(s(426))}}else if(es&&B.mode&1){var ms=c0(M);if(ms!==null){(ms.flags&65536)===0&&(ms.flags|=256),d0(ms,M,B,w,l),Ih(Po(X,B));break e}}w=X=Po(X,B),Cs!==4&&(Cs=2),Hl===null?Hl=[w]:Hl.push(w),w=M;do{switch(w.tag){case 3:w.flags|=65536,l&=-l,w.lanes|=l;var ie=a0(w,X,l);Rg(w,ie);break e;case 1:B=X;var Q=w.type,ce=w.stateNode;if((w.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Oi===null||!Oi.has(ce)))){w.flags|=65536,l&=-l,w.lanes|=l;var Oe=o0(w,B,l);Rg(w,Oe);break e}}w=w.return}while(w!==null)}$0(d)}catch(et){l=et,ys===d&&d!==null&&(ys=d=d.return);continue}break}while(!0)}function z0(){var a=Td.current;return Td.current=jd,a===null?jd:a}function Nf(){(Cs===0||Cs===3||Cs===2)&&(Cs=4),As===null||(ka&268435455)===0&&(Pd&268435455)===0||zi(As,Fs)}function Od(a,l){var d=Rt;Rt|=2;var m=z0();(As!==a||Fs!==l)&&(oi=null,Ca(a,l));do try{hS();break}catch(b){U0(a,b)}while(!0);if(Dh(),Rt=d,Td.current=m,ys!==null)throw Error(s(261));return As=null,Fs=0,Cs}function hS(){for(;ys!==null;)F0(ys)}function fS(){for(;ys!==null&&!Z();)F0(ys)}function F0(a){var l=q0(a.alternate,a,En);a.memoizedProps=a.pendingProps,l===null?$0(a):ys=l,ff.current=null}function $0(a){var l=a;do{var d=l.alternate;if(a=l.return,(l.flags&32768)===0){if(d=iS(d,l,En),d!==null){ys=d;return}}else{if(d=aS(d,l),d!==null){d.flags&=32767,ys=d;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Cs=6,ys=null;return}}if(l=l.sibling,l!==null){ys=l;return}ys=l=a}while(l!==null);Cs===0&&(Cs=5)}function Ea(a,l,d){var m=_t,b=Bn.transition;try{Bn.transition=null,_t=1,pS(a,l,d,m)}finally{Bn.transition=b,_t=m}return null}function pS(a,l,d,m){do Do();while(Li!==null);if((Rt&6)!==0)throw Error(s(327));d=a.finishedWork;var b=a.finishedLanes;if(d===null)return null;if(a.finishedWork=null,a.finishedLanes=0,d===a.current)throw Error(s(177));a.callbackNode=null,a.callbackPriority=0;var w=d.lanes|d.childLanes;if(oh(a,w),a===As&&(ys=As=null,Fs=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Id||(Id=!0,W0(me,function(){return Do(),null})),w=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||w){w=Bn.transition,Bn.transition=null;var M=_t;_t=1;var B=Rt;Rt|=4,ff.current=null,lS(a,d),A0(d,a),Dj(wh),Xr=!!vh,wh=vh=null,a.current=d,cS(d),re(),Rt=B,_t=M,Bn.transition=w}else a.current=d;if(Id&&(Id=!1,Li=a,Rd=b),w=a.pendingLanes,w===0&&(Oi=null),Jt(d.stateNode),yn(a,ge()),l!==null)for(m=a.onRecoverableError,d=0;d<l.length;d++)b=l[d],m(b.value,{componentStack:b.stack,digest:b.digest});if(Ad)throw Ad=!1,a=gf,gf=null,a;return(Rd&1)!==0&&a.tag!==0&&Do(),w=a.pendingLanes,(w&1)!==0?a===xf?Gl++:(Gl=0,xf=a):Gl=0,Ii(),null}function Do(){if(Li!==null){var a=mr(Rd),l=Bn.transition,d=_t;try{if(Bn.transition=null,_t=16>a?16:a,Li===null)var m=!1;else{if(a=Li,Li=null,Rd=0,(Rt&6)!==0)throw Error(s(331));var b=Rt;for(Rt|=4,Ye=a.current;Ye!==null;){var w=Ye,M=w.child;if((Ye.flags&16)!==0){var B=w.deletions;if(B!==null){for(var X=0;X<B.length;X++){var he=B[X];for(Ye=he;Ye!==null;){var Ee=Ye;switch(Ee.tag){case 0:case 11:case 15:ql(8,Ee,w)}var Re=Ee.child;if(Re!==null)Re.return=Ee,Ye=Re;else for(;Ye!==null;){Ee=Ye;var Ce=Ee.sibling,qe=Ee.return;if(_0(Ee),Ee===he){Ye=null;break}if(Ce!==null){Ce.return=qe,Ye=Ce;break}Ye=qe}}}var Ze=w.alternate;if(Ze!==null){var Xe=Ze.child;if(Xe!==null){Ze.child=null;do{var ms=Xe.sibling;Xe.sibling=null,Xe=ms}while(Xe!==null)}}Ye=w}}if((w.subtreeFlags&2064)!==0&&M!==null)M.return=w,Ye=M;else e:for(;Ye!==null;){if(w=Ye,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:ql(9,w,w.return)}var ie=w.sibling;if(ie!==null){ie.return=w.return,Ye=ie;break e}Ye=w.return}}var Q=a.current;for(Ye=Q;Ye!==null;){M=Ye;var ce=M.child;if((M.subtreeFlags&2064)!==0&&ce!==null)ce.return=M,Ye=ce;else e:for(M=Q;Ye!==null;){if(B=Ye,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:Ed(9,B)}}catch(et){ls(B,B.return,et)}if(B===M){Ye=null;break e}var Oe=B.sibling;if(Oe!==null){Oe.return=B.return,Ye=Oe;break e}Ye=B.return}}if(Rt=b,Ii(),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(lt,a)}catch{}m=!0}return m}finally{_t=d,Bn.transition=l}}return!1}function V0(a,l,d){l=Po(d,l),l=a0(a,l,1),a=Di(a,l,1),l=sn(),a!==null&&(fa(a,1,l),yn(a,l))}function ls(a,l,d){if(a.tag===3)V0(a,a,d);else for(;l!==null;){if(l.tag===3){V0(l,a,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Oi===null||!Oi.has(m))){a=Po(d,a),a=o0(l,a,1),l=Di(l,a,1),a=sn(),l!==null&&(fa(l,1,a),yn(l,a));break}}l=l.return}}function mS(a,l,d){var m=a.pingCache;m!==null&&m.delete(l),l=sn(),a.pingedLanes|=a.suspendedLanes&d,As===a&&(Fs&d)===d&&(Cs===4||Cs===3&&(Fs&130023424)===Fs&&500>ge()-mf?Ca(a,0):pf|=d),yn(a,l)}function B0(a,l){l===0&&((a.mode&1)===0?l=1:(l=Fe,Fe<<=1,(Fe&130023424)===0&&(Fe=4194304)));var d=sn();a=ri(a,l),a!==null&&(fa(a,l,d),yn(a,d))}function gS(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),B0(a,d)}function xS(a,l){var d=0;switch(a.tag){case 13:var m=a.stateNode,b=a.memoizedState;b!==null&&(d=b.retryLane);break;case 19:m=a.stateNode;break;default:throw Error(s(314))}m!==null&&m.delete(l),B0(a,d)}var q0;q0=function(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps||pn.current)gn=!0;else{if((a.lanes&d)===0&&(l.flags&128)===0)return gn=!1,rS(a,l,d);gn=(a.flags&131072)!==0}else gn=!1,es&&(l.flags&1048576)!==0&&jg(l,ud,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;_d(a,l),a=l.pendingProps;var b=No(l,Gs.current);Eo(l,d),b=Wh(null,l,m,a,b,d);var w=Hh();return l.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,mn(m)?(w=!0,ld(l)):w=!1,l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Uh(l),b.updater=Sd,l.stateNode=b,b._reactInternals=l,Xh(l,m,a,d),l=sf(null,l,m,!0,w,d)):(l.tag=0,es&&w&&Eh(l),tn(null,l,b,d),l=l.child),l;case 16:m=l.elementType;e:{switch(_d(a,l),a=l.pendingProps,b=m._init,m=b(m._payload),l.type=m,b=l.tag=bS(m),a=Zn(m,a),b){case 0:l=tf(null,l,m,a,d);break e;case 1:l=g0(null,l,m,a,d);break e;case 11:l=u0(null,l,m,a,d);break e;case 14:l=h0(null,l,m,Zn(m.type,a),d);break e}throw Error(s(306,m,""))}return l;case 0:return m=l.type,b=l.pendingProps,b=l.elementType===m?b:Zn(m,b),tf(a,l,m,b,d);case 1:return m=l.type,b=l.pendingProps,b=l.elementType===m?b:Zn(m,b),g0(a,l,m,b,d);case 3:e:{if(x0(l),a===null)throw Error(s(387));m=l.pendingProps,w=l.memoizedState,b=w.element,Ig(a,l),xd(l,m,null,d);var M=l.memoizedState;if(m=M.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){b=Po(Error(s(423)),l),l=y0(a,l,m,d,b);break e}else if(m!==b){b=Po(Error(s(424)),l),l=y0(a,l,m,d,b);break e}else for(Cn=Ti(l.stateNode.containerInfo.firstChild),_n=l,es=!0,Yn=null,d=Pg(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(ko(),m===b){l=ai(a,l,d);break e}tn(a,l,m,d)}l=l.child}return l;case 5:return Mg(l),a===null&&Ah(l),m=l.type,b=l.pendingProps,w=a!==null?a.memoizedProps:null,M=b.children,Nh(m,b)?M=null:w!==null&&Nh(m,w)&&(l.flags|=32),m0(a,l),tn(a,l,M,d),l.child;case 6:return a===null&&Ah(l),null;case 13:return b0(a,l,d);case 4:return zh(l,l.stateNode.containerInfo),m=l.pendingProps,a===null?l.child=_o(l,null,m,d):tn(a,l,m,d),l.child;case 11:return m=l.type,b=l.pendingProps,b=l.elementType===m?b:Zn(m,b),u0(a,l,m,b,d);case 7:return tn(a,l,l.pendingProps,d),l.child;case 8:return tn(a,l,l.pendingProps.children,d),l.child;case 12:return tn(a,l,l.pendingProps.children,d),l.child;case 10:e:{if(m=l.type._context,b=l.pendingProps,w=l.memoizedProps,M=b.value,Gt(pd,m._currentValue),m._currentValue=M,w!==null)if(Jn(w.value,M)){if(w.children===b.children&&!pn.current){l=ai(a,l,d);break e}}else for(w=l.child,w!==null&&(w.return=l);w!==null;){var B=w.dependencies;if(B!==null){M=w.child;for(var X=B.firstContext;X!==null;){if(X.context===m){if(w.tag===1){X=ii(-1,d&-d),X.tag=2;var he=w.updateQueue;if(he!==null){he=he.shared;var Ee=he.pending;Ee===null?X.next=X:(X.next=Ee.next,Ee.next=X),he.pending=X}}w.lanes|=d,X=w.alternate,X!==null&&(X.lanes|=d),Oh(w.return,d,l),B.lanes|=d;break}X=X.next}}else if(w.tag===10)M=w.type===l.type?null:w.child;else if(w.tag===18){if(M=w.return,M===null)throw Error(s(341));M.lanes|=d,B=M.alternate,B!==null&&(B.lanes|=d),Oh(M,d,l),M=w.sibling}else M=w.child;if(M!==null)M.return=w;else for(M=w;M!==null;){if(M===l){M=null;break}if(w=M.sibling,w!==null){w.return=M.return,M=w;break}M=M.return}w=M}tn(a,l,b.children,d),l=l.child}return l;case 9:return b=l.type,m=l.pendingProps.children,Eo(l,d),b=$n(b),m=m(b),l.flags|=1,tn(a,l,m,d),l.child;case 14:return m=l.type,b=Zn(m,l.pendingProps),b=Zn(m.type,b),h0(a,l,m,b,d);case 15:return f0(a,l,l.type,l.pendingProps,d);case 17:return m=l.type,b=l.pendingProps,b=l.elementType===m?b:Zn(m,b),_d(a,l),l.tag=1,mn(m)?(a=!0,ld(l)):a=!1,Eo(l,d),r0(l,m,b),Xh(l,m,b,d),sf(null,l,m,!0,a,d);case 19:return w0(a,l,d);case 22:return p0(a,l,d)}throw Error(s(156,l.tag))};function W0(a,l){return H(a,l)}function yS(a,l,d,m){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(a,l,d,m){return new yS(a,l,d,m)}function jf(a){return a=a.prototype,!(!a||!a.isReactComponent)}function bS(a){if(typeof a=="function")return jf(a)?1:0;if(a!=null){if(a=a.$$typeof,a===V)return 11;if(a===fe)return 14}return 2}function Fi(a,l){var d=a.alternate;return d===null?(d=qn(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&14680064,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function Ld(a,l,d,m,b,w){var M=2;if(m=a,typeof a=="function")jf(a)&&(M=1);else if(typeof a=="string")M=5;else e:switch(a){case D:return Ta(d.children,b,w,l);case C:M=8,b|=8;break;case I:return a=qn(12,d,l,b|2),a.elementType=I,a.lanes=w,a;case A:return a=qn(13,d,l,b),a.elementType=A,a.lanes=w,a;case se:return a=qn(19,d,l,b),a.elementType=se,a.lanes=w,a;case Ie:return Ud(d,b,w,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case $:M=10;break e;case O:M=9;break e;case V:M=11;break e;case fe:M=14;break e;case Se:M=16,m=null;break e}throw Error(s(130,a==null?a:typeof a,""))}return l=qn(M,d,l,b),l.elementType=a,l.type=m,l.lanes=w,l}function Ta(a,l,d,m){return a=qn(7,a,m,l),a.lanes=d,a}function Ud(a,l,d,m){return a=qn(22,a,m,l),a.elementType=Ie,a.lanes=d,a.stateNode={isHidden:!1},a}function Sf(a,l,d){return a=qn(6,a,null,l),a.lanes=d,a}function kf(a,l,d){return l=qn(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function vS(a,l,d,m,b){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ml(0),this.expirationTimes=ml(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ml(0),this.identifierPrefix=m,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function _f(a,l,d,m,b,w,M,B,X){return a=new vS(a,l,d,B,X),l===1?(l=1,w===!0&&(l|=8)):l=0,w=qn(3,null,null,l),a.current=w,w.stateNode=a,w.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uh(w),a}function wS(a,l,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:m==null?null:""+m,children:a,containerInfo:l,implementation:d}}function H0(a){if(!a)return Ai;a=a._reactInternals;e:{if(en(a)!==a||a.tag!==1)throw Error(s(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(mn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(s(171))}if(a.tag===1){var d=a.type;if(mn(d))return vg(a,d,l)}return l}function G0(a,l,d,m,b,w,M,B,X){return a=_f(d,m,!0,a,b,w,M,B,X),a.context=H0(null),d=a.current,m=sn(),b=Ui(d),w=ii(m,b),w.callback=l??null,Di(d,w,b),a.current.lanes=b,fa(a,b,m),yn(a,m),a}function zd(a,l,d,m){var b=l.current,w=sn(),M=Ui(b);return d=H0(d),l.context===null?l.context=d:l.pendingContext=d,l=ii(w,M),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Di(b,l,M),a!==null&&(er(a,b,M,w),gd(a,b,M)),M}function Fd(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function K0(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function Cf(a,l){K0(a,l),(a=a.alternate)&&K0(a,l)}function NS(){return null}var J0=typeof reportError=="function"?reportError:function(a){console.error(a)};function Ef(a){this._internalRoot=a}$d.prototype.render=Ef.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(s(409));zd(a,l,null,null)},$d.prototype.unmount=Ef.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;_a(function(){zd(null,a,null,null)}),l[ei]=null}};function $d(a){this._internalRoot=a}$d.prototype.unstable_scheduleHydration=function(a){if(a){var l=bl();a={blockedOn:null,target:a,priority:l};for(var d=0;d<jn.length&&l!==0&&l<jn[d].priority;d++);jn.splice(d,0,a),d===0&&io(a)}};function Tf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Vd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Y0(){}function jS(a,l,d,m,b){if(b){if(typeof m=="function"){var w=m;m=function(){var he=Fd(M);w.call(he)}}var M=G0(l,m,a,0,null,!1,!1,"",Y0);return a._reactRootContainer=M,a[ei]=M.current,Al(a.nodeType===8?a.parentNode:a),_a(),M}for(;b=a.lastChild;)a.removeChild(b);if(typeof m=="function"){var B=m;m=function(){var he=Fd(X);B.call(he)}}var X=_f(a,0,!1,null,null,!1,!1,"",Y0);return a._reactRootContainer=X,a[ei]=X.current,Al(a.nodeType===8?a.parentNode:a),_a(function(){zd(l,X,d,m)}),X}function Bd(a,l,d,m,b){var w=d._reactRootContainer;if(w){var M=w;if(typeof b=="function"){var B=b;b=function(){var X=Fd(M);B.call(X)}}zd(l,M,a,b)}else M=jS(d,l,a,b,m);return Fd(M)}xl=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var d=He(l.pendingLanes);d!==0&&(gl(l,d|1),yn(l,ge()),(Rt&6)===0&&(Ro=ge()+500,Ii()))}break;case 13:_a(function(){var m=ri(a,1);if(m!==null){var b=sn();er(m,a,1,b)}}),Cf(a,1)}},no=function(a){if(a.tag===13){var l=ri(a,134217728);if(l!==null){var d=sn();er(l,a,134217728,d)}Cf(a,134217728)}},yl=function(a){if(a.tag===13){var l=Ui(a),d=ri(a,l);if(d!==null){var m=sn();er(d,a,l,m)}Cf(a,l)}},bl=function(){return _t},vl=function(a,l){var d=_t;try{return _t=a,l()}finally{_t=d}},ps=function(a,l,d){switch(l){case"input":if(De(a,d),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==a&&m.form===a.form){var b=ad(m);if(!b)throw Error(s(90));Ne(m),De(m,b)}}}break;case"textarea":je(a,d);break;case"select":l=d.value,l!=null&&Nt(a,!!d.multiple,l,!1)}},Je=vf,Ct=_a;var SS={usingClientEntryPoint:!1,Events:[Dl,vo,ad,ts,we,vf]},Kl={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kS={bundleType:Kl.bundleType,version:Kl.version,rendererPackageName:Kl.rendererPackageName,rendererConfig:Kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Kr(a),a===null?null:a.stateNode},findFiberByHostInstance:Kl.findFiberByHostInstance||NS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qd.isDisabled&&qd.supportsFiber)try{lt=qd.inject(kS),mt=qd}catch{}}return bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SS,bn.createPortal=function(a,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tf(l))throw Error(s(200));return wS(a,l,null,d)},bn.createRoot=function(a,l){if(!Tf(a))throw Error(s(299));var d=!1,m="",b=J0;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),l=_f(a,1,!1,null,null,d,!1,m,b),a[ei]=l.current,Al(a.nodeType===8?a.parentNode:a),new Ef(l)},bn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=Kr(l),a=a===null?null:a.stateNode,a},bn.flushSync=function(a){return _a(a)},bn.hydrate=function(a,l,d){if(!Vd(l))throw Error(s(200));return Bd(null,a,l,!0,d)},bn.hydrateRoot=function(a,l,d){if(!Tf(a))throw Error(s(405));var m=d!=null&&d.hydratedSources||null,b=!1,w="",M=J0;if(d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onRecoverableError!==void 0&&(M=d.onRecoverableError)),l=G0(l,null,a,1,d??null,b,!1,w,M),a[ei]=l.current,Al(a),m)for(a=0;a<m.length;a++)d=m[a],b=d._getVersion,b=b(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,b]:l.mutableSourceEagerHydrationData.push(d,b);return new $d(l)},bn.render=function(a,l,d){if(!Vd(l))throw Error(s(200));return Bd(null,a,l,!1,d)},bn.unmountComponentAtNode=function(a){if(!Vd(a))throw Error(s(40));return a._reactRootContainer?(_a(function(){Bd(null,null,a,!1,function(){a._reactRootContainer=null,a[ei]=null})}),!0):!1},bn.unstable_batchedUpdates=vf,bn.unstable_renderSubtreeIntoContainer=function(a,l,d,m){if(!Vd(d))throw Error(s(200));if(a==null||a._reactInternals===void 0)throw Error(s(38));return Bd(a,l,d,!1,m)},bn.version="18.3.1-next-f1338f8080-20240426",bn}var rx;function Pv(){if(rx)return If.exports;rx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),If.exports=DS(),If.exports}var ix;function MS(){if(ix)return Wd;ix=1;var n=Pv();return Wd.createRoot=n.createRoot,Wd.hydrateRoot=n.hydrateRoot,Wd}var OS=MS();const LS=Tv(OS);Pv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cc(){return cc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},cc.apply(this,arguments)}var Zi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Zi||(Zi={}));const ax="popstate";function US(n){n===void 0&&(n={});function e(i,o){let{pathname:c="/",search:u="",hash:f=""}=eo(i.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),pp("",{pathname:c,search:u,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(i,o){let c=i.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let f=i.location.href,h=f.indexOf("#");u=h===-1?f:f.slice(0,h)}return u+"#"+(typeof o=="string"?o:xu(o))}function r(i,o){Vu(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return FS(e,s,r,n)}function gs(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Vu(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zS(){return Math.random().toString(36).substr(2,8)}function ox(n,e){return{usr:n.state,key:n.key,idx:e}}function pp(n,e,s,r){return s===void 0&&(s=null),cc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?eo(e):e,{state:s,key:e&&e.key||r||zS()})}function xu(n){let{pathname:e="/",search:s="",hash:r=""}=n;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function eo(n){let e={};if(n){let s=n.indexOf("#");s>=0&&(e.hash=n.substr(s),n=n.substr(0,s));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function FS(n,e,s,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,u=Zi.Pop,f=null,h=y();h==null&&(h=0,c.replaceState(cc({},c.state,{idx:h}),""));function y(){return(c.state||{idx:null}).idx}function v(){u=Zi.Pop;let P=y(),L=P==null?null:P-h;h=P,f&&f({action:u,location:_.location,delta:L})}function N(P,L){u=Zi.Push;let z=pp(_.location,P,L);s&&s(z,P),h=y()+1;let F=ox(z,h),K=_.createHref(z);try{c.pushState(F,"",K)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;i.location.assign(K)}o&&f&&f({action:u,location:_.location,delta:1})}function T(P,L){u=Zi.Replace;let z=pp(_.location,P,L);s&&s(z,P),h=y();let F=ox(z,h),K=_.createHref(z);c.replaceState(F,"",K),o&&f&&f({action:u,location:_.location,delta:0})}function k(P){let L=i.location.origin!=="null"?i.location.origin:i.location.href,z=typeof P=="string"?P:xu(P);return z=z.replace(/ $/,"%20"),gs(L,"No window.location.(origin|href) available to create URL for href: "+z),new URL(z,L)}let _={get action(){return u},get location(){return n(i,c)},listen(P){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(ax,v),f=P,()=>{i.removeEventListener(ax,v),f=null}},createHref(P){return e(i,P)},createURL:k,encodeLocation(P){let L=k(P);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:N,replace:T,go(P){return c.go(P)}};return _}var lx;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(lx||(lx={}));function $S(n,e,s){return s===void 0&&(s="/"),VS(n,e,s)}function VS(n,e,s,r){let i=typeof e=="string"?eo(e):e,o=em(i.pathname||"/",s);if(o==null)return null;let c=Av(n);BS(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let h=t1(o);u=XS(c[f],h)}return u}function Av(n,e,s,r){e===void 0&&(e=[]),s===void 0&&(s=[]),r===void 0&&(r="");let i=(o,c,u)=>{let f={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};f.relativePath.startsWith("/")&&(gs(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let h=Qi([r,f.relativePath]),y=s.concat(f);o.children&&o.children.length>0&&(gs(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Av(o.children,e,y,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:YS(h,o.index),routesMeta:y})};return n.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let f of Iv(o.path))i(o,c,f)}),e}function Iv(n){let e=n.split("/");if(e.length===0)return[];let[s,...r]=e,i=s.endsWith("?"),o=s.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=Iv(r.join("/")),u=[];return u.push(...c.map(f=>f===""?o:[o,f].join("/"))),i&&u.push(...c),u.map(f=>n.startsWith("/")&&f===""?"/":f)}function BS(n){n.sort((e,s)=>e.score!==s.score?s.score-e.score:ZS(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const qS=/^:[\w-]+$/,WS=3,HS=2,GS=1,KS=10,JS=-2,cx=n=>n==="*";function YS(n,e){let s=n.split("/"),r=s.length;return s.some(cx)&&(r+=JS),e&&(r+=HS),s.filter(i=>!cx(i)).reduce((i,o)=>i+(qS.test(o)?WS:o===""?GS:KS),r)}function ZS(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function XS(n,e,s){let{routesMeta:r}=n,i={},o="/",c=[];for(let u=0;u<r.length;++u){let f=r[u],h=u===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=QS({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},y),N=f.route;if(!v)return null;Object.assign(i,v.params),c.push({params:i,pathname:Qi([o,v.pathname]),pathnameBase:a1(Qi([o,v.pathnameBase])),route:N}),v.pathnameBase!=="/"&&(o=Qi([o,v.pathnameBase]))}return c}function QS(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[s,r]=e1(n.path,n.caseSensitive,n.end),i=e.match(s);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,y,v)=>{let{paramName:N,isOptional:T}=y;if(N==="*"){let _=u[v]||"";c=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const k=u[v];return T&&!k?h[N]=void 0:h[N]=(k||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:c,pattern:n}}function e1(n,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Vu(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function t1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vu(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function em(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=n.charAt(s);return r&&r!=="/"?null:n.slice(s)||"/"}const s1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,n1=n=>s1.test(n);function r1(n,e){e===void 0&&(e="/");let{pathname:s,search:r="",hash:i=""}=typeof n=="string"?eo(n):n,o;if(s)if(n1(s))o=s;else{if(s.includes("//")){let c=s;s=s.replace(/\/\/+/g,"/"),Vu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+s))}s.startsWith("/")?o=dx(s.substring(1),"/"):o=dx(s,e)}else o=e;return{pathname:o,search:o1(r),hash:l1(i)}}function dx(n,e){let s=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Mf(n,e,s,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function i1(n){return n.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function tm(n,e){let s=i1(n);return e?s.map((r,i)=>i===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function sm(n,e,s,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=eo(n):(i=cc({},n),gs(!i.pathname||!i.pathname.includes("?"),Mf("?","pathname","search",i)),gs(!i.pathname||!i.pathname.includes("#"),Mf("#","pathname","hash",i)),gs(!i.search||!i.search.includes("#"),Mf("#","search","hash",i)));let o=n===""||i.pathname==="",c=o?"/":i.pathname,u;if(c==null)u=s;else{let v=e.length-1;if(!r&&c.startsWith("..")){let N=c.split("/");for(;N[0]==="..";)N.shift(),v-=1;i.pathname=N.join("/")}u=v>=0?e[v]:"/"}let f=r1(i,u),h=c&&c!=="/"&&c.endsWith("/"),y=(o||c===".")&&s.endsWith("/");return!f.pathname.endsWith("/")&&(h||y)&&(f.pathname+="/"),f}const Qi=n=>n.join("/").replace(/\/\/+/g,"/"),a1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),o1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,l1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function c1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Rv=["post","put","patch","delete"];new Set(Rv);const d1=["get",...Rv];new Set(d1);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dc(){return dc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},dc.apply(this,arguments)}const nm=S.createContext(null),u1=S.createContext(null),aa=S.createContext(null),Bu=S.createContext(null),Vr=S.createContext({outlet:null,matches:[],isDataRoute:!1}),Dv=S.createContext(null);function h1(n,e){let{relative:s}=e===void 0?{}:e;ol()||gs(!1);let{basename:r,navigator:i}=S.useContext(aa),{hash:o,pathname:c,search:u}=Ov(n,{relative:s}),f=c;return r!=="/"&&(f=c==="/"?r:Qi([r,c])),i.createHref({pathname:f,search:u,hash:o})}function ol(){return S.useContext(Bu)!=null}function oa(){return ol()||gs(!1),S.useContext(Bu).location}function Mv(n){S.useContext(aa).static||S.useLayoutEffect(n)}function cn(){let{isDataRoute:n}=S.useContext(Vr);return n?C1():f1()}function f1(){ol()||gs(!1);let n=S.useContext(nm),{basename:e,future:s,navigator:r}=S.useContext(aa),{matches:i}=S.useContext(Vr),{pathname:o}=oa(),c=JSON.stringify(tm(i,s.v7_relativeSplatPath)),u=S.useRef(!1);return Mv(()=>{u.current=!0}),S.useCallback(function(h,y){if(y===void 0&&(y={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let v=sm(h,JSON.parse(c),o,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Qi([e,v.pathname])),(y.replace?r.replace:r.push)(v,y.state,y)},[e,r,c,o,n])}const p1=S.createContext(null);function m1(n){let e=S.useContext(Vr).outlet;return e&&S.createElement(p1.Provider,{value:n},e)}function Rc(){let{matches:n}=S.useContext(Vr),e=n[n.length-1];return e?e.params:{}}function Ov(n,e){let{relative:s}=e===void 0?{}:e,{future:r}=S.useContext(aa),{matches:i}=S.useContext(Vr),{pathname:o}=oa(),c=JSON.stringify(tm(i,r.v7_relativeSplatPath));return S.useMemo(()=>sm(n,JSON.parse(c),o,s==="path"),[n,c,o,s])}function g1(n,e){return x1(n,e)}function x1(n,e,s,r){ol()||gs(!1);let{navigator:i}=S.useContext(aa),{matches:o}=S.useContext(Vr),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let h=oa(),y;if(e){var v;let P=typeof e=="string"?eo(e):e;f==="/"||(v=P.pathname)!=null&&v.startsWith(f)||gs(!1),y=P}else y=h;let N=y.pathname||"/",T=N;if(f!=="/"){let P=f.replace(/^\//,"").split("/");T="/"+N.replace(/^\//,"").split("/").slice(P.length).join("/")}let k=$S(n,{pathname:T}),_=N1(k&&k.map(P=>Object.assign({},P,{params:Object.assign({},u,P.params),pathname:Qi([f,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?f:Qi([f,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),o,s,r);return e&&_?S.createElement(Bu.Provider,{value:{location:dc({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Zi.Pop}},_):_}function y1(){let n=_1(),e=c1(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),s=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),s?S.createElement("pre",{style:i},s):null,null)}const b1=S.createElement(y1,null);class v1 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?S.createElement(Vr.Provider,{value:this.props.routeContext},S.createElement(Dv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function w1(n){let{routeContext:e,match:s,children:r}=n,i=S.useContext(nm);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),S.createElement(Vr.Provider,{value:e},r)}function N1(n,e,s,r){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),r===void 0&&(r=null),n==null){var o;if(!s)return null;if(s.errors)n=s.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)n=s.matches;else return null}let c=n,u=(i=s)==null?void 0:i.errors;if(u!=null){let y=c.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);y>=0||gs(!1),c=c.slice(0,Math.min(c.length,y+1))}let f=!1,h=-1;if(s&&r&&r.v7_partialHydration)for(let y=0;y<c.length;y++){let v=c[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(h=y),v.route.id){let{loaderData:N,errors:T}=s,k=v.route.loader&&N[v.route.id]===void 0&&(!T||T[v.route.id]===void 0);if(v.route.lazy||k){f=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((y,v,N)=>{let T,k=!1,_=null,P=null;s&&(T=u&&v.route.id?u[v.route.id]:void 0,_=v.route.errorElement||b1,f&&(h<0&&N===0?(E1("route-fallback"),k=!0,P=null):h===N&&(k=!0,P=v.route.hydrateFallbackElement||null)));let L=e.concat(c.slice(0,N+1)),z=()=>{let F;return T?F=_:k?F=P:v.route.Component?F=S.createElement(v.route.Component,null):v.route.element?F=v.route.element:F=y,S.createElement(w1,{match:v,routeContext:{outlet:y,matches:L,isDataRoute:s!=null},children:F})};return s&&(v.route.ErrorBoundary||v.route.errorElement||N===0)?S.createElement(v1,{location:s.location,revalidation:s.revalidation,component:_,error:T,children:z(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):z()},null)}var Lv=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Lv||{}),Uv=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Uv||{});function j1(n){let e=S.useContext(nm);return e||gs(!1),e}function S1(n){let e=S.useContext(u1);return e||gs(!1),e}function k1(n){let e=S.useContext(Vr);return e||gs(!1),e}function zv(n){let e=k1(),s=e.matches[e.matches.length-1];return s.route.id||gs(!1),s.route.id}function _1(){var n;let e=S.useContext(Dv),s=S1(),r=zv();return e!==void 0?e:(n=s.errors)==null?void 0:n[r]}function C1(){let{router:n}=j1(Lv.UseNavigateStable),e=zv(Uv.UseNavigateStable),s=S.useRef(!1);return Mv(()=>{s.current=!0}),S.useCallback(function(i,o){o===void 0&&(o={}),s.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,dc({fromRouteId:e},o)))},[n,e])}const ux={};function E1(n,e,s){ux[n]||(ux[n]=!0)}function T1(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function P1(n){let{to:e,replace:s,state:r,relative:i}=n;ol()||gs(!1);let{future:o,static:c}=S.useContext(aa),{matches:u}=S.useContext(Vr),{pathname:f}=oa(),h=cn(),y=sm(e,tm(u,o.v7_relativeSplatPath),f,i==="path"),v=JSON.stringify(y);return S.useEffect(()=>h(JSON.parse(v),{replace:s,state:r,relative:i}),[h,v,i,s,r]),null}function Fv(n){return m1(n.context)}function bt(n){gs(!1)}function A1(n){let{basename:e="/",children:s=null,location:r,navigationType:i=Zi.Pop,navigator:o,static:c=!1,future:u}=n;ol()&&gs(!1);let f=e.replace(/^\/*/,"/"),h=S.useMemo(()=>({basename:f,navigator:o,static:c,future:dc({v7_relativeSplatPath:!1},u)}),[f,u,o,c]);typeof r=="string"&&(r=eo(r));let{pathname:y="/",search:v="",hash:N="",state:T=null,key:k="default"}=r,_=S.useMemo(()=>{let P=em(y,f);return P==null?null:{location:{pathname:P,search:v,hash:N,state:T,key:k},navigationType:i}},[f,y,v,N,T,k,i]);return _==null?null:S.createElement(aa.Provider,{value:h},S.createElement(Bu.Provider,{children:s,value:_}))}function I1(n){let{children:e,location:s}=n;return g1(mp(e),s)}new Promise(()=>{});function mp(n,e){e===void 0&&(e=[]);let s=[];return S.Children.forEach(n,(r,i)=>{if(!S.isValidElement(r))return;let o=[...e,i];if(r.type===S.Fragment){s.push.apply(s,mp(r.props.children,o));return}r.type!==bt&&gs(!1),!r.props.index||!r.props.children||gs(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=mp(r.props.children,o)),s.push(c)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gp(){return gp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},gp.apply(this,arguments)}function R1(n,e){if(n==null)return{};var s={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(s[i]=n[i]);return s}function D1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function M1(n,e){return n.button===0&&(!e||e==="_self")&&!D1(n)}const O1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],L1="6";try{window.__reactRouterVersion=L1}catch{}const U1="startTransition",hx=AS[U1];function z1(n){let{basename:e,children:s,future:r,window:i}=n,o=S.useRef();o.current==null&&(o.current=US({window:i,v5Compat:!0}));let c=o.current,[u,f]=S.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},y=S.useCallback(v=>{h&&hx?hx(()=>f(v)):f(v)},[f,h]);return S.useLayoutEffect(()=>c.listen(y),[c,y]),S.useEffect(()=>T1(r),[r]),S.createElement(A1,{basename:e,children:s,location:u.location,navigationType:u.action,navigator:c,future:r})}const F1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=S.forwardRef(function(e,s){let{onClick:r,relative:i,reloadDocument:o,replace:c,state:u,target:f,to:h,preventScrollReset:y,viewTransition:v}=e,N=R1(e,O1),{basename:T}=S.useContext(aa),k,_=!1;if(typeof h=="string"&&$1.test(h)&&(k=h,F1))try{let F=new URL(window.location.href),K=h.startsWith("//")?new URL(F.protocol+h):new URL(h),ee=em(K.pathname,T);K.origin===F.origin&&ee!=null?h=ee+K.search+K.hash:_=!0}catch{}let P=h1(h,{relative:i}),L=V1(h,{replace:c,state:u,target:f,preventScrollReset:y,relative:i,viewTransition:v});function z(F){r&&r(F),F.defaultPrevented||L(F)}return S.createElement("a",gp({},N,{href:k||P,onClick:_||o?r:z,ref:s,target:f}))});var fx;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(fx||(fx={}));var px;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(px||(px={}));function V1(n,e){let{target:s,replace:r,state:i,preventScrollReset:o,relative:c,viewTransition:u}=e===void 0?{}:e,f=cn(),h=oa(),y=Ov(n,{relative:c});return S.useCallback(v=>{if(M1(v,s)){v.preventDefault();let N=r!==void 0?r:xu(h)===xu(y);f(n,{replace:N,state:i,preventScrollReset:o,relative:c,viewTransition:u})}},[h,f,y,r,i,s,n,o,c,u])}const mx=[{id:"bc0ef8b5-e4b9-4bc8-aedd-d677391d74c0",name:"Red Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763528572144%2F1763528976141_red%20model.png?alt=media&token=1deef60f-3c4f-4e3e-beae-763d1b39621e",description:"Passion & Energy"},{id:"23bcfca6-5735-4481-ab25-9d61ac83bc3f",name:"Pink Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763716235698%2F1763716259515_pink%20model.png?alt=media&token=c41510b1-9946-49d0-8b19-f679f24d392b",description:"Love & Softness"},{id:"3427e08d-f82c-47c7-b5e7-2b8567733f38",name:"Silver Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732069765%2F1763732089246_silver%20model.png?alt=media&token=eb30db54-99d1-4c3f-ba97-0f2b34934d79",description:"Sleek & Modern"},{id:"3efca09b-07d8-40f2-8b6e-104049593cb3",name:"Colorfull",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763849326772%2F1763849625346_colorfull.jpg?alt=media&token=41d78666-4aa1-47a0-935f-c5361b4538ac",description:"Vibrant & Fun"},{id:"530b80f1-ac27-4ab4-ac10-f093d9d48dde",name:"Green Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732028982%2F1763732064239_download%20(1).png?alt=media&token=1b184b78-799f-4d79-9e55-8d122c2c07eb",description:"Nature & Harmony"},{id:"5fa9457f-3d9b-421c-9746-6bffbee4d4da",name:"Yellow Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732120801%2F1763732142964_download.png?alt=media&token=49c0be99-48b2-47ba-9cb4-38628d2876fe",description:"Joy & Sunshine"},{id:"6e673b67-9dd3-44b8-8797-51cc7e4ddf07",name:"Orange Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732327301%2F1763732349258_orange%20model.png?alt=media&token=78d402fc-e0f7-4b73-b0d3-a7502f7bc6d3",description:"Warmth & Creativity"},{id:"80da52b5-5130-462c-8f27-bdf7ff1c6564",name:"Black Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732028102%2F1763732058240_1.jpg?alt=media&token=6458bde4-9255-4c11-9015-ec738b79a8cb",description:"Bold & Mysterious"},{id:"8e8e275a-98fb-42b9-8551-ffeff03fb92a",name:"Purple Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763529047916%2F1763529076550_purple%20model.png?alt=media&token=10fa0811-7c4c-4c41-9165-262addea89f3",description:"Royalty & Spirit"},{id:"9667b780-6f85-48ad-a19e-da0951efc590",name:"Bronze and Brown Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732005647%2F1763732023012_copper%20model.png?alt=media&token=72619e26-b086-4913-a97f-ed8bea238d23",description:"Earthy & Ancient"},{id:"9d24210c-eb1c-4273-8f6d-beebe2016fc4",name:"Blue Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763529024900%2F1763529043293_2.jpg?alt=media&token=29dcba53-1264-45a2-9b68-a661a277cc91",description:"Calm & Ocean"},{id:"9d9fff97-3b25-409e-9e39-4a3b6412bb57",name:"Girls",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1764232246395%2F1764232265823_girls%20color%20background.jpg?alt=media&token=13860e81-a2e7-48fc-a6b3-42d0763c8d41",description:"Fun & Playful"},{id:"b40795f0-5b04-4e95-8e84-40ca3c9561d1",name:"White & Pearl Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763731966302%2F1763731995895_white%20model.png?alt=media&token=56bdfed9-00c4-4442-ac6a-358d1223e04c",description:"Elegance & Purity"},{id:"1ef06240-10e5-4bdf-9286-84d355991e95",name:"Gold Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732095040%2F1763732116711_gold%20model.png?alt=media&token=25b5331b-6bf1-4ecc-94c8-1ceb31ccdcc7",description:"Luxury & Wealth"}],B1=[{id:"1761729812469",code:"SPV-003",name:"Sweetheart Red Resin Stud Earrings",slug:"sweetheart-red-resin-studs",description:"Embrace a touch of whimsy with these adorable sweetheart stud earrings, meticulously crafted from vibrant epoxy resin. Each glossy red heart reflects light beautifully.",whenAndHowToWear:"Perfect for date nights or adding a pop of color to a monochrome outfit.",price:29,priceUSD:2,compareAtPrice:45,memberPrice:14.5,costPrice:5,category:"Red Collection",type:"Stud",status:"published",images:[],stock:58,tags:["Red heart earrings","stud earrings","resin jewelry","handmade"],seoKeywords:["heart earrings","red studs"],earringMaterials:[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal"},{name:"Stainless Steel",modifier:0,description:"Hypo-allergenic"}],isNewArrival:!1,isBestSeller:!0,reviews:[{id:"rev1",userName:"Amelia Thompson",location:"London, UK",content:"The sparkle of these earrings is absolutely mesmerizing, perfect for adding elegance to any outfit.",rating:5,date:"2024-11-15T10:30:00Z"},{id:"rev2",userName:"Carlos Ramirez",location:"Mexico City, Mexico",content:"Good quality, but the durability could be better for everyday wear.",rating:4,date:"2024-12-20T14:45:00Z"},{id:"rev3",userName:"Yuki Tanaka",location:"Tokyo, Japan",content:"These arrived faster than expected and the craftsmanship is impeccable. Highly recommend for special occasions.",rating:5,date:"2025-01-22T09:15:00Z"},{id:"rev4",userName:"Fatima Al-Zahra",location:"Dubai, UAE",content:"Beautiful design, though the price feels a bit high for the materials used.",rating:4,date:"2025-02-25T16:20:00Z"},{id:"rev5",userName:"Liam O'Sullivan",location:"Dublin, Ireland",content:"The color is vibrant and the design is unique. Perfect for everyday wear.",rating:4,date:"2025-03-28T11:00:00Z"},{id:"rev6",userName:"Priya Sharma",location:"Mumbai, India",content:"Nice piece, but I wish it sparkled more under different lights.",rating:3,date:"2025-04-01T13:30:00Z"},{id:"rev7",userName:"Hans Mueller",location:"Berlin, Germany",content:"Exceeded my expectations in terms of quality and style. The opal shines beautifully under light.",rating:5,date:"2025-05-03T08:45:00Z"},{id:"rev8",userName:"Isabella Rossi",location:"Rome, Italy",content:"Elegant design, but the durability is questionable after a few wears.",rating:3,date:"2025-06-05T17:10:00Z"},{id:"rev9",userName:"Ahmed Hassan",location:"Cairo, Egypt",content:"The ring fits perfectly and the stone has amazing play of colors. Worth every penny.",rating:5,date:"2025-07-07T12:25:00Z"},{id:"rev10",userName:"Sophie Dubois",location:"Paris, France",content:"Charming, and the price is reasonable for the sparkle it provides.",rating:4,date:"2025-08-09T15:50:00Z"},{id:"rev11",userName:"Raj Patel",location:"Sydney, Australia",content:"Fast shipping and the product is as described. Very satisfied with the purchase.",rating:5,date:"2025-09-11T10:05:00Z"},{id:"rev12",userName:"Elena Petrova",location:"Moscow, Russia",content:"Unique style, but the durability leaves much to be desired.",rating:3,date:"2025-10-13T14:30:00Z"},{id:"rev13",userName:"Miguel Santos",location:"So Paulo, Brazil",content:"The earrings are lightweight and comfortable to wear all day. Love the red color.",rating:4,date:"2025-11-15T09:20:00Z"}],createdAt:new Date().toISOString()},{id:"1762477248818",code:"SPV-052",name:"Ethereal Aurora Oval Opal Ring",slug:"ethereal-aurora-oval-opal-ring",description:"Experience the captivating play of color in this unique oval opal ring, meticulously set in gleaming sterling silver.",price:129,priceUSD:7,costPrice:50,memberPrice:60,backOfficeLink:"https://www.temu.com/example-ring-link",madeBy:"Outsourced",category:"White or Pearl Collection",type:"Ring",status:"published",images:[],stock:7,ringStock:{5:1,6:1,7:1,8:1,9:1,10:1,11:1},tags:["Opal ring","sterling silver","statement ring"],isNewArrival:!0,isFeaturedRing:!0,reviews:[{id:"rev14",userName:"Aisha Khan",location:"Karachi, Pakistan",content:"Gorgeous sparkle, but the price is a bit steep for what you get.",rating:4,date:"2024-11-17T16:45:00Z"},{id:"rev15",userName:"Oliver Jensen",location:"Copenhagen, Denmark",content:"High-quality materials and excellent customer service. The ring is a standout piece.",rating:5,date:"2024-12-19T11:15:00Z"},{id:"rev16",userName:"Nina Kowalski",location:"Warsaw, Poland",content:"Decent value, though durability could be improved.",rating:3,date:"2025-01-21T13:40:00Z"},{id:"rev17",userName:"Diego Fernandez",location:"Buenos Aires, Argentina",content:"The opal's iridescence is mesmerizing. Arrived well-packaged and on time.",rating:5,date:"2025-02-23T08:55:00Z"},{id:"rev18",userName:"Layla Al-Farsi",location:"Riyadh, Saudi Arabia",content:"Stylish accessory with great sparkle, worth the investment.",rating:5,date:"2025-03-25T17:25:00Z"},{id:"rev19",userName:"Finn Larsen",location:"Oslo, Norway",content:"Great attention to detail in the craftsmanship. Perfect for gifting.",rating:4,date:"2025-04-27T12:10:00Z"},{id:"rev20",userName:"Zara Ahmed",location:"Lagos, Nigeria",content:"Impressive quality, but the durability is not as expected.",rating:3,date:"2025-05-29T15:35:00Z"},{id:"rev21",userName:"Luca Bianchi",location:"Milan, Italy",content:"The earrings sparkle just right and the resin is smooth. Very happy with this buy.",rating:5,date:"2025-06-31T10:50:00Z"},{id:"rev22",userName:"Anika Gupta",location:"Delhi, India",content:"Solid choice, and the price matches the sparkle and quality.",rating:4,date:"2025-07-02T14:15:00Z"},{id:"rev23",userName:"Victor Nguyen",location:"Ho Chi Minh City, Vietnam",content:"Beautiful design and the silver setting enhances the opal perfectly. Highly recommended.",rating:5,date:"2025-08-04T09:30:00Z"},{id:"rev24",userName:"Maya Cohen",location:"Tel Aviv, Israel",content:"Lovely item with excellent durability for daily use.",rating:4,date:"2025-09-06T16:55:00Z"},{id:"rev25",userName:"Johan Svensson",location:"Stockholm, Sweden",content:"The product exceeded my expectations. The color and fit are spot on.",rating:5,date:"2025-10-08T11:40:00Z"}],createdAt:new Date().toISOString()}],Pr={id:"guest",name:"Guest",email:"",isMember:!1,membershipTier:"none",loyaltyPoints:0,affiliateCode:"",affiliateEarnings:0,wishlist:[],notifications:[],isAdmin:!1,socialRewards:{},shippingAddress:{street:"",suburb:"",city:"",province:"",postalCode:""}},q1=[{id:"s1",title:"Summer Tech Sale",products:["1761729812469"],discountPercentage:15,endsAt:new Date(Date.now()+864e5*2).toISOString(),image:"https://picsum.photos/800/400?random=20"}];function qu(n,e){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(s[r[i]]=n[r[i]]);return s}function W1(n,e,s,r){function i(o){return o instanceof s?o:new s(function(c){c(o)})}return new(s||(s=Promise))(function(o,c){function u(y){try{h(r.next(y))}catch(v){c(v)}}function f(y){try{h(r.throw(y))}catch(v){c(v)}}function h(y){y.done?o(y.value):i(y.value).then(u,f)}h((r=r.apply(n,e||[])).next())})}const H1=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class rm extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class G1 extends rm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gx extends rm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class xx extends rm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xp;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(xp||(xp={}));class K1{constructor(e,{headers:s={},customFetch:r,region:i=xp.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=H1(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return W1(this,arguments,void 0,function*(s,r={}){var i;let o,c;try{const{headers:u,method:f,body:h,signal:y,timeout:v}=r;let N={},{region:T}=r;T||(T=this.region);const k=new URL(`${this.url}/${s}`);T&&T!=="any"&&(N["x-region"]=T,k.searchParams.set("forceFunctionRegion",T));let _;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(N["Content-Type"]="application/octet-stream",_=h):typeof h=="string"?(N["Content-Type"]="text/plain",_=h):typeof FormData<"u"&&h instanceof FormData?_=h:(N["Content-Type"]="application/json",_=JSON.stringify(h)):_=h;let P=y;v&&(c=new AbortController,o=setTimeout(()=>c.abort(),v),y?(P=c.signal,y.addEventListener("abort",()=>c.abort())):P=c.signal);const L=yield this.fetch(k.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},N),this.headers),u),body:_,signal:P}).catch(ee=>{throw new G1(ee)}),z=L.headers.get("x-relay-error");if(z&&z==="true")throw new gx(L);if(!L.ok)throw new xx(L);let F=((i=L.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),K;return F==="application/json"?K=yield L.json():F==="application/octet-stream"||F==="application/pdf"?K=yield L.blob():F==="text/event-stream"?K=L:F==="multipart/form-data"?K=yield L.formData():K=yield L.text(),{data:K,error:null,response:L}}catch(u){return{data:null,error:u,response:u instanceof xx||u instanceof gx?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var J1=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},Y1=class{constructor(n){var e,s;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(s=n.isMaybeSingle)!==null&&s!==void 0?s:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let c=null,u=null,f=null,h=o.status,y=o.statusText;if(o.ok){var v,N;if(s.method!=="HEAD"){var T;const L=await o.text();L===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((T=s.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?u=L:u=JSON.parse(L))}const _=(v=s.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),P=(N=o.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");_&&P&&P.length>1&&(f=parseInt(P[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,y="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var k;const _=await o.text();try{c=JSON.parse(_),Array.isArray(c)&&o.status===404&&(u=[],c=null,h=200,y="OK")}catch{o.status===404&&_===""?(h=204,y="No Content"):c={message:_}}if(c&&s.isMaybeSingle&&(!(c==null||(k=c.details)===null||k===void 0)&&k.includes("0 rows"))&&(c=null,h=200,y="OK"),c&&s.shouldThrowOnError)throw new J1(c)}return{error:c,data:u,count:f,status:h,statusText:y}});return this.shouldThrowOnError||(i=i.catch(o=>{var c;let u="";const f=o==null?void 0:o.cause;if(f){var h,y,v,N;const k=(h=f==null?void 0:f.message)!==null&&h!==void 0?h:"",_=(y=f==null?void 0:f.code)!==null&&y!==void 0?y:"";u=`${(v=o==null?void 0:o.name)!==null&&v!==void 0?v:"FetchError"}: ${o==null?void 0:o.message}`,u+=`

Caused by: ${(N=f==null?void 0:f.name)!==null&&N!==void 0?N:"Error"}: ${k}`,_&&(u+=` (${_})`),f!=null&&f.stack&&(u+=`
${f.stack}`)}else{var T;u=(T=o==null?void 0:o.stack)!==null&&T!==void 0?T:""}return{error:{message:`${(c=o==null?void 0:o.name)!==null&&c!==void 0?c:"FetchError"}: ${o==null?void 0:o.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(n,e)}returns(){return this}overrideTypes(){return this}},Z1=class extends Y1{select(n){let e=!1;const s=(n??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${n}.${e?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:s=e}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${n}`),this}range(n,e,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${n}`),this.url.searchParams.set(o,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var c;const u=[n?"analyze":null,e?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${f}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const yx=new RegExp("[,()]");var Bo=class extends Z1{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const s=Array.from(new Set(e)).map(r=>typeof r=="string"&&yx.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`in.(${s})`),this}notIn(n,e){const s=Array.from(new Set(e)).map(r=>typeof r=="string"&&yx.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`not.in.(${s})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:s,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(n,`${i}fts${o}.${e}`),this}match(n){return Object.entries(n).forEach(([e,s])=>{this.url.searchParams.append(e,`eq.${s}`)}),this}not(n,e,s){return this.url.searchParams.append(n,`not.${e}.${s}`),this}or(n,{foreignTable:e,referencedTable:s=e}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${n})`),this}filter(n,e,s){return this.url.searchParams.append(n,`${e}.${s}`),this}},X1=class{constructor(n,{headers:e={},schema:s,fetch:r}){this.url=n,this.headers=new Headers(e),this.schema=s,this.fetch=r}select(n,e){const{head:s=!1,count:r}=e??{},i=s?"HEAD":"GET";let o=!1;const c=(n??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",c),r&&this.headers.append("Prefer",`count=${r}`),new Bo({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:e,defaultToNull:s=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const o=n.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Bo({method:i,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(n,{onConflict:e,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){var o;const c="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const u=n.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(u.length>0){const f=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new Bo({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(n,{count:e}={}){var s;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Bo({method:r,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:n}={}){var e;const s="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new Bo({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Q1=class $v{constructor(e,{headers:s={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(s),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new X1(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $v(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:i=!1,count:o}={}){var c;let u;const f=new URL(`${this.url}/rpc/${e}`);let h;r||i?(u=r?"HEAD":"GET",Object.entries(s).filter(([v,N])=>N!==void 0).map(([v,N])=>[v,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([v,N])=>{f.searchParams.append(v,N)})):(u="POST",h=s);const y=new Headers(this.headers);return o&&y.set("Prefer",`count=${o}`),new Bo({method:u,url:f,headers:y,schema:this.schemaName,body:h,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class e2{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const r=s.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const r=this.getWebSocketConstructor();return new r(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const t2="2.89.0",s2=`realtime-js/${t2}`,Vv="1.0.0",n2="2.0.0",bx=Vv,yp=1e4,r2=1e3,i2=100;var qi;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(qi||(qi={}));var Ts;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ts||(Ts={}));var nr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(nr||(nr={}));var bp;(function(n){n.websocket="websocket"})(bp||(bp={}));var Da;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Da||(Da={}));class a2{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,s){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return s(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var s;return this._isArrayBuffer((s=e.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var s,r;const i=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var s,r;const i=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,s,r){var i,o;const c=e.topic,u=(i=e.ref)!==null&&i!==void 0?i:"",f=(o=e.join_ref)!==null&&o!==void 0?o:"",h=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},v=Object.keys(y).length===0?"":JSON.stringify(y);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const N=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+u.length+c.length+h.length+v.length,T=new ArrayBuffer(this.HEADER_LENGTH+N);let k=new DataView(T),_=0;k.setUint8(_++,this.KINDS.userBroadcastPush),k.setUint8(_++,f.length),k.setUint8(_++,u.length),k.setUint8(_++,c.length),k.setUint8(_++,h.length),k.setUint8(_++,v.length),k.setUint8(_++,s),Array.from(f,L=>k.setUint8(_++,L.charCodeAt(0))),Array.from(u,L=>k.setUint8(_++,L.charCodeAt(0))),Array.from(c,L=>k.setUint8(_++,L.charCodeAt(0))),Array.from(h,L=>k.setUint8(_++,L.charCodeAt(0))),Array.from(v,L=>k.setUint8(_++,L.charCodeAt(0)));var P=new Uint8Array(T.byteLength+r.byteLength);return P.set(new Uint8Array(T),0),P.set(new Uint8Array(r),T.byteLength),P.buffer}decode(e,s){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return s(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,c,u,f]=r;return s({join_ref:i,ref:o,topic:c,event:u,payload:f})}return s({})}_binaryDecode(e){const s=new DataView(e),r=s.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,s,i)}}_decodeUserBroadcast(e,s,r){const i=s.getUint8(1),o=s.getUint8(2),c=s.getUint8(3),u=s.getUint8(4);let f=this.HEADER_LENGTH+4;const h=r.decode(e.slice(f,f+i));f=f+i;const y=r.decode(e.slice(f,f+o));f=f+o;const v=r.decode(e.slice(f,f+c));f=f+c;const N=e.slice(f,e.byteLength),T=u===this.JSON_ENCODING?JSON.parse(r.decode(N)):N,k={type:this.BROADCAST_EVENT,event:y,payload:T};return c>0&&(k.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(e){var s;return e instanceof ArrayBuffer||((s=e==null?void 0:e.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(e,s){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>s.includes(r)))}}class Bv{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Kt||(Kt={}));const vx=(n,e,s={})=>{var r;const i=(r=s.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=o2(c,n,e,i),o),{}):{}},o2=(n,e,s,r)=>{const i=e.find(u=>u.name===n),o=i==null?void 0:i.type,c=s[n];return o&&!r.includes(o)?qv(o,c):vp(c)},qv=(n,e)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return u2(e,s)}switch(n){case Kt.bool:return l2(e);case Kt.float4:case Kt.float8:case Kt.int2:case Kt.int4:case Kt.int8:case Kt.numeric:case Kt.oid:return c2(e);case Kt.json:case Kt.jsonb:return d2(e);case Kt.timestamp:return h2(e);case Kt.abstime:case Kt.date:case Kt.daterange:case Kt.int4range:case Kt.int8range:case Kt.money:case Kt.reltime:case Kt.text:case Kt.time:case Kt.timestamptz:case Kt.timetz:case Kt.tsrange:case Kt.tstzrange:return vp(e);default:return vp(e)}},vp=n=>n,l2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},c2=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},d2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},u2=(n,e)=>{if(typeof n!="string")return n;const s=n.length-1,r=n[s];if(n[0]==="{"&&r==="}"){let o;const c=n.slice(1,s);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(u=>qv(e,u))}return n},h2=n=>typeof n=="string"?n.replace(" ","T"):n,Wv=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Of{constructor(e,s,r={},i=yp){this.channel=e,this.event=s,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wx;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(wx||(wx={}));class Zl{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:c,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zl.syncState(this.state,i,o,c),this.pendingDiffs.forEach(f=>{this.state=Zl.syncDiff(this.state,f,o,c)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:c,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Zl.syncDiff(this.state,i,o,c),u())}),this.onJoin((i,o,c)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:c})}),this.onLeave((i,o,c)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,i){const o=this.cloneDeep(e),c=this.transformState(s),u={},f={};return this.map(o,(h,y)=>{c[h]||(f[h]=y)}),this.map(c,(h,y)=>{const v=o[h];if(v){const N=y.map(P=>P.presence_ref),T=v.map(P=>P.presence_ref),k=y.filter(P=>T.indexOf(P.presence_ref)<0),_=v.filter(P=>N.indexOf(P.presence_ref)<0);k.length>0&&(u[h]=k),_.length>0&&(f[h]=_)}else u[h]=y}),this.syncDiff(o,{joins:u,leaves:f},r,i)}static syncDiff(e,s,r,i){const{joins:o,leaves:c}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,f)=>{var h;const y=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(f),y.length>0){const v=e[u].map(T=>T.presence_ref),N=y.filter(T=>v.indexOf(T.presence_ref)<0);e[u].unshift(...N)}r(u,y,f)}),this.map(c,(u,f)=>{let h=e[u];if(!h)return;const y=f.map(v=>v.presence_ref);h=h.filter(v=>y.indexOf(v.presence_ref)<0),e[u]=h,i(u,h,f),h.length===0&&delete e[u]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const i=e[r];return"metas"in i?s[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[r]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nx;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Nx||(Nx={}));var Xl;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Xl||(Xl={}));var li;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(li||(li={}));class Ho{constructor(e,s={config:{}},r){var i,o;if(this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Ts.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Of(this,nr.join,this.params,this.timeout),this.rejoinTimer=new Bv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ts.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ts.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nr.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new Zl(this),this.broadcastEndpointURL=Wv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ts.closed){const{config:{broadcast:c,presence:u,private:f}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(T=>T.filter))!==null&&i!==void 0?i:[],y=!!this.bindings[Xl.PRESENCE]&&this.bindings[Xl.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,v={},N={broadcast:c,presence:Object.assign(Object.assign({},u),{enabled:y}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(li.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(li.CLOSED)),this.updateJoinPayload(Object.assign({config:N},v)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:T})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){e==null||e(li.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,P=(k=_==null?void 0:_.length)!==null&&k!==void 0?k:0,L=[];for(let z=0;z<P;z++){const F=_[z],{filter:{event:K,schema:ee,table:W,filter:D}}=F,C=T&&T[z];if(C&&C.event===K&&Ho.isFilterValueEqual(C.schema,ee)&&Ho.isFilterValueEqual(C.table,W)&&Ho.isFilterValueEqual(C.filter,D))L.push(Object.assign(Object.assign({},F),{id:C.id}));else{this.unsubscribe(),this.state=Ts.errored,e==null||e(li.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,e&&e(li.SUBSCRIBED);return}}).receive("error",T=>{this.state=Ts.errored,e==null||e(li.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(li.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this.state===Ts.joined&&e===Xl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,s,r)}async httpSend(e,s,r={}){var i;if(s==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let f=u.statusText;try{const h=await u.json();f=h.error||h.message||f}catch{}return Promise.reject(new Error(f))}async send(e,s={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,u,f;const h=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(c=this.params)===null||c===void 0?void 0:c.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ts.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Of(this,nr.leave,{},e),r.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ts.closed,this.bindings={}}async _fetchWithTimeout(e,s,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(o),c}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Of(this,e,s,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>i2){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var i,o;const c=e.toLocaleLowerCase(),{close:u,error:f,leave:h,join:y}=nr;if(r&&[u,f,h,y].indexOf(c)>=0&&r!==this._joinRef())return;let N=this._onMessage(c,s,r);if(s&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(T=>{var k,_,P;return((k=T.filter)===null||k===void 0?void 0:k.event)==="*"||((P=(_=T.filter)===null||_===void 0?void 0:_.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===c}).map(T=>T.callback(N,r)):(o=this.bindings[c])===null||o===void 0||o.filter(T=>{var k,_,P,L,z,F;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in T){const K=T.id,ee=(k=T.filter)===null||k===void 0?void 0:k.event;return K&&((_=s.ids)===null||_===void 0?void 0:_.includes(K))&&(ee==="*"||(ee==null?void 0:ee.toLocaleLowerCase())===((P=s.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const K=(z=(L=T==null?void 0:T.filter)===null||L===void 0?void 0:L.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return K==="*"||K===((F=s==null?void 0:s.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===c}).map(T=>{if(typeof N=="object"&&"ids"in N){const k=N.data,{schema:_,table:P,commit_timestamp:L,type:z,errors:F}=k;N=Object.assign(Object.assign({},{schema:_,table:P,commit_timestamp:L,eventType:z,new:{},old:{},errors:F}),this._getPayloadRecords(k))}T.callback(N,r)})}_isClosed(){return this.state===Ts.closed}_isJoined(){return this.state===Ts.joined}_isJoining(){return this.state===Ts.joining}_isLeaving(){return this.state===Ts.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const i=e.toLocaleLowerCase(),o={type:i,filter:s,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Ho.isEqual(i.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}static isFilterValueEqual(e,s){return(e??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(nr.close,{},e)}_onError(e){this._on(nr.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ts.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=vx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=vx(e.columns,e.old_record)),s}}const Lf=()=>{},Hd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},f2=[1e3,2e3,5e3,1e4],p2=1e4,m2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class g2{constructor(e,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yp,this.transport=null,this.heartbeatIntervalMs=Hd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lf,this.ref=0,this.reconnectTimer=null,this.vsn=bx,this.logger=Lf,this.conn=null,this.sendBuffer=[],this.serializer=new a2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=s==null?void 0:s.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${bp.websocket}`,this.httpEndpoint=Wv(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=e2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case qi.connecting:return Da.Connecting;case qi.open:return Da.Open;case qi.closing:return Da.Closing;default:return Da.Closed}}isConnected(){return this.connectionState()===Da.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Ho(`realtime:${e}`,s,this);return this.channels.push(o),o}}push(e){const{topic:s,event:r,payload:i,ref:o}=e,c=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${s} ${r} (${o})`,i),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(r2,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Hd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:c}=s,u=c?`(${c})`:"",f=o.status||"";this.log("receive",`${f} ${r} ${i} ${u}`.trim(),o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,o,c)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===qi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===qi.open||this.conn.readyState===qi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(nr.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${r}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([m2],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s,r=!1;if(e)s=e,r=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),s=this.accessTokenValue}else s=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(i=>{const o={access_token:s,version:s2};s&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(nr.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(s)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Bv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Hd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,r,i,o,c,u,f,h,y,v,N,T;switch(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:yp,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Hd.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:Lf,this.vsn=(f=e==null?void 0:e.vsn)!==null&&f!==void 0?f:bx,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(k=>f2[k-1]||p2),this.vsn){case Vv:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:((k,_)=>_(JSON.stringify(k))),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:((k,_)=>_(JSON.parse(k)));break;case n2:this.encode=(N=e==null?void 0:e.encode)!==null&&N!==void 0?N:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var uc=class extends Error{constructor(n,e){var s;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((s=e.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function x2(n,e,s){const r=new URL(e,n);if(s)for(const[i,o]of Object.entries(s))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function y2(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function b2(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:s,path:r,query:i,body:o,headers:c}){const u=x2(n.baseUrl,r,i),f=await y2(n.auth),h=await e(u,{method:s,headers:{...o?{"Content-Type":"application/json"}:{},...f,...c},body:o?JSON.stringify(o):void 0}),y=await h.text(),v=(h.headers.get("content-type")||"").includes("application/json"),N=v&&y?JSON.parse(y):y;if(!h.ok){const T=v?N:void 0,k=T==null?void 0:T.error;throw new uc((k==null?void 0:k.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:T})}return{status:h.status,headers:h.headers,data:N}}}}function Gd(n){return n.join("")}var v2=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:Gd(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const s={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gd(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gd(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gd(n.namespace)}`}),!0}catch(e){if(e instanceof uc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(s){if(s instanceof uc&&s.status===409)return;throw s}}};function Mo(n){return n.join("")}var w2=class{constructor(n,e="",s){this.client=n,this.prefix=e,this.accessDelegation=s}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mo(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mo(n.namespace)}/tables`,body:e,headers:s})).data.metadata}async updateTable(n,e){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mo(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Mo(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mo(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Mo(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(s){if(s instanceof uc&&s.status===404)return!1;throw s}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(s){if(s instanceof uc&&s.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw s}}},N2=class{constructor(n){var r;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const s=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=b2({baseUrl:s,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new v2(this.client,e),this.tableOps=new w2(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},Wu=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function is(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var j2=class extends Wu{constructor(n,e,s){super(n),this.name="StorageApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},wp=class extends Wu{constructor(n,e){super(n),this.name="StorageUnknownError",this.originalError=e}};const im=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),S2=()=>Response,Np=n=>{if(Array.isArray(n))return n.map(s=>Np(s));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([s,r])=>{const i=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Np(r)}),e},k2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},_2=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function hc(n){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(n)}function C2(n,e){if(hc(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var r=s.call(n,e);if(hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function E2(n){var e=C2(n,"string");return hc(e)=="symbol"?e:e+""}function T2(n,e,s){return(e=E2(e))in n?Object.defineProperty(n,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[e]=s,n}function jx(n,e){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),s.push.apply(s,r)}return s}function at(n){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?jx(Object(s),!0).forEach(function(r){T2(n,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):jx(Object(s)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(s,r))})}return n}const Uf=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},P2=async(n,e,s)=>{n instanceof await S2()&&!(s!=null&&s.noResolveJson)?n.json().then(r=>{const i=n.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new j2(Uf(r),i,o))}).catch(r=>{e(new wp(Uf(r),r))}):e(new wp(Uf(n),n))},A2=(n,e,s,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(k2(r)?(i.headers=at({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),at(at({},i),s))};async function Dc(n,e,s,r,i,o){return new Promise((c,u)=>{n(s,A2(e,r,i,o)).then(f=>{if(!f.ok)throw f;return r!=null&&r.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>P2(f,u,r))})}async function fc(n,e,s,r){return Dc(n,"GET",e,s,r)}async function sr(n,e,s,r,i){return Dc(n,"POST",e,r,i,s)}async function jp(n,e,s,r,i){return Dc(n,"PUT",e,r,i,s)}async function I2(n,e,s,r){return Dc(n,"HEAD",e,at(at({},s),{},{noResolveJson:!0}),r)}async function am(n,e,s,r,i){return Dc(n,"DELETE",e,r,i,s)}var R2=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(is(e))return{data:null,error:e};throw e}}};let Hv;Hv=Symbol.toStringTag;var D2=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[Hv]="BlobDownloadBuilder",this.promise=null}asStream(){return new R2(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(is(e))return{data:null,error:e};throw e}}};const M2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var O2=class{constructor(n,e={},s,r){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.bucketId=s,this.fetch=im(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,e,s,r){var i=this;try{let o;const c=at(at({},Sx),r);let u=at(at({},i.headers),n==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",i.encodeMetadata(f)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),f&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(f))):(o=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType,f&&(u["x-metadata"]=i.toBase64(i.encodeMetadata(f))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),r!=null&&r.headers&&(u=at(at({},u),r.headers));const h=i._removeEmptyFolders(e),y=i._getFinalPath(h),v=await(n=="PUT"?jp:sr)(i.fetch,`${i.url}/object/${y}`,o,at({headers:u},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:h,id:v.Id,fullPath:v.Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(is(o))return{data:null,error:o};throw o}}async upload(n,e,s){return this.uploadOrUpdate("POST",n,e,s)}async uploadToSignedUrl(n,e,s,r){var i=this;const o=i._removeEmptyFolders(n),c=i._getFinalPath(o),u=new URL(i.url+`/object/upload/sign/${c}`);u.searchParams.set("token",e);try{let f;const h=at({upsert:Sx.upsert},r),y=at(at({},i.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",h.cacheControl)):(f=s,y["cache-control"]=`max-age=${h.cacheControl}`,y["content-type"]=h.contentType),{data:{path:o,fullPath:(await jp(i.fetch,u.toString(),f,{headers:y})).Key},error:null}}catch(f){if(i.shouldThrowOnError)throw f;if(is(f))return{data:null,error:f};throw f}}async createSignedUploadUrl(n,e){var s=this;try{let r=s._getFinalPath(n);const i=at({},s.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const o=await sr(s.fetch,`${s.url}/object/upload/sign/${r}`,{},{headers:i}),c=new URL(s.url+o.url),u=c.searchParams.get("token");if(!u)throw new Wu("No token returned by API");return{data:{signedUrl:c.toString(),path:n,token:u},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(is(r))return{data:null,error:r};throw r}}async update(n,e,s){return this.uploadOrUpdate("PUT",n,e,s)}async move(n,e,s){var r=this;try{return{data:await sr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:s==null?void 0:s.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(is(i))return{data:null,error:i};throw i}}async copy(n,e,s){var r=this;try{return{data:{path:(await sr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:s==null?void 0:s.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(is(i))return{data:null,error:i};throw i}}async createSignedUrl(n,e,s){var r=this;try{let i=r._getFinalPath(n),o=await sr(r.fetch,`${r.url}/object/sign/${i}`,at({expiresIn:e},s!=null&&s.transform?{transform:s.transform}:{}),{headers:r.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(is(i))return{data:null,error:i};throw i}}async createSignedUrls(n,e,s){var r=this;try{const i=await sr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:n},{headers:r.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(c=>at(at({},c),{},{signedUrl:c.signedURL?encodeURI(`${r.url}${c.signedURL}${o}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(is(i))return{data:null,error:i};throw i}}download(n,e){const s=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",o=this._getFinalPath(n),c=()=>fc(this.fetch,`${this.url}/${s}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new D2(c,this.shouldThrowOnError)}async info(n){var e=this;const s=e._getFinalPath(n);try{return{data:Np(await fc(e.fetch,`${e.url}/object/info/${s}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(is(r))return{data:null,error:r};throw r}}async exists(n){var e=this;const s=e._getFinalPath(n);try{return await I2(e.fetch,`${e.url}/object/${s}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(is(r)&&r instanceof wp){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(n,e){const s=this._getFinalPath(n),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${u}`)}}}async remove(n){var e=this;try{return{data:await am(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}async list(n,e,s){var r=this;try{const i=at(at(at({},M2),e),{},{prefix:n||""});return{data:await sr(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},s),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(is(i))return{data:null,error:i};throw i}}async listV2(n,e){var s=this;try{const r=at({},n);return{data:await sr(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,r,{headers:s.headers},e),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(is(r))return{data:null,error:r};throw r}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const Gv="2.89.0",Kv={"X-Client-Info":`storage-js/${Gv}`};var L2=class{constructor(n,e={},s,r){this.shouldThrowOnError=!1;const i=new URL(n);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=at(at({},Kv),e),this.fetch=im(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var e=this;try{const s=e.listBucketOptionsToQueryString(n);return{data:await fc(e.fetch,`${e.url}/bucket${s}`,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}async getBucket(n){var e=this;try{return{data:await fc(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}async createBucket(n,e={public:!1}){var s=this;try{return{data:await sr(s.fetch,`${s.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(is(r))return{data:null,error:r};throw r}}async updateBucket(n,e){var s=this;try{return{data:await jp(s.fetch,`${s.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(is(r))return{data:null,error:r};throw r}}async emptyBucket(n){var e=this;try{return{data:await sr(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}async deleteBucket(n){var e=this;try{return{data:await am(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},U2=class{constructor(n,e={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=at(at({},Kv),e),this.fetch=im(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await sr(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}async listBuckets(n){var e=this;try{const s=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&s.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&s.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&s.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&s.set("sortOrder",n.sortOrder),n!=null&&n.search&&s.set("search",n.search);const r=s.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await fc(e.fetch,i,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}async deleteBucket(n){var e=this;try{return{data:await am(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}from(n){var e=this;if(!_2(n))throw new Wu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new N2({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(s,{get(i,o){const c=i[o];return typeof c!="function"?c:async(...u)=>{try{return{data:await c.apply(i,u),error:null}}catch(f){if(r)throw f;return{data:null,error:f}}}}})}};const om={"X-Client-Info":`storage-js/${Gv}`,"Content-Type":"application/json"};var Jv=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function An(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var zf=class extends Jv{constructor(n,e,s){super(n),this.name="StorageVectorsApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},z2=class extends Jv{constructor(n,e){super(n),this.name="StorageVectorsUnknownError",this.originalError=e}};const lm=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),F2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},kx=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),$2=async(n,e,s)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(s!=null&&s.noResolveJson)){const r=n.status||500,i=n;if(typeof i.json=="function")i.json().then(o=>{const c=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||r+"";e(new zf(kx(o),r,c))}).catch(()=>{const o=r+"";e(new zf(i.statusText||`HTTP ${r} error`,r,o))});else{const o=r+"";e(new zf(i.statusText||`HTTP ${r} error`,r,o))}}else e(new z2(kx(n),n))},V2=(n,e,s,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(F2(r)?(i.headers=at({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,at(at({},i),s)):i};async function B2(n,e,s,r,i,o){return new Promise((c,u)=>{n(s,V2(e,r,i,o)).then(f=>{if(!f.ok)throw f;if(r!=null&&r.noResolveJson)return f;const h=f.headers.get("content-type");return!h||!h.includes("application/json")?{}:f.json()}).then(f=>c(f)).catch(f=>$2(f,u,r))})}async function In(n,e,s,r,i){return B2(n,"POST",e,r,i,s)}var q2=class{constructor(n,e={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=at(at({},om),e),this.fetch=lm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async getIndex(n,e){var s=this;try{return{data:await In(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}}async listIndexes(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async deleteIndex(n,e){var s=this;try{return{data:await In(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:s.headers})||{},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}}},W2=class{constructor(n,e={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=at(at({},om),e),this.fetch=lm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var e=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await In(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async getVectors(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async listVectors(n){var e=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await In(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async queryVectors(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async deleteVectors(n){var e=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await In(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}},H2=class{constructor(n,e={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=at(at({},om),e),this.fetch=lm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async getBucket(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async listBuckets(n={}){var e=this;try{return{data:await In(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async deleteBucket(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}},G2=class extends H2{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new K2(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,s=this;return e().call(s,n)}async getBucket(n){var e=()=>super.getBucket,s=this;return e().call(s,n)}async listBuckets(n={}){var e=()=>super.listBuckets,s=this;return e().call(s,n)}async deleteBucket(n){var e=()=>super.deleteBucket,s=this;return e().call(s,n)}},K2=class extends q2{constructor(n,e,s,r){super(n,e,r),this.vectorBucketName=s}async createIndex(n){var e=()=>super.createIndex,s=this;return e().call(s,at(at({},n),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,s=this;return e().call(s,at(at({},n),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,s=this;return e().call(s,s.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,s=this;return e().call(s,s.vectorBucketName,n)}index(n){return new J2(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},J2=class extends W2{constructor(n,e,s,r,i){super(n,e,i),this.vectorBucketName=s,this.indexName=r}async putVectors(n){var e=()=>super.putVectors,s=this;return e().call(s,at(at({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(n){var e=()=>super.getVectors,s=this;return e().call(s,at(at({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,s=this;return e().call(s,at(at({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,s=this;return e().call(s,at(at({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,s=this;return e().call(s,at(at({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},Y2=class extends L2{constructor(n,e={},s,r){super(n,e,s,r)}from(n){return new O2(this.url,this.headers,n,this.fetch)}get vectors(){return new G2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new U2(this.url+"/iceberg",this.headers,this.fetch)}};const Yv="2.89.0",qo=30*1e3,Sp=3,Ff=Sp*qo,Z2="http://localhost:9999",X2="supabase.auth.token",Q2={"X-Client-Info":`gotrue-js/${Yv}`},kp="X-Supabase-Api-Version",Zv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ek=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tk=600*1e3;class pc extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function st(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class sk extends pc{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function nk(n){return st(n)&&n.name==="AuthApiError"}class Ma extends pc{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class bi extends pc{constructor(e,s,r,i){super(e,r,i),this.name=s,this.status=r}}class Pn extends bi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rk(n){return st(n)&&n.name==="AuthSessionMissingError"}class Oo extends bi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kd extends bi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jd extends bi{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ik(n){return st(n)&&n.name==="AuthImplicitGrantRedirectError"}class _x extends bi{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ak extends bi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class _p extends bi{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function $f(n){return st(n)&&n.name==="AuthRetryableFetchError"}class Cx extends bi{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class Cp extends bi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const yu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ex=` 	
\r=`.split(""),ok=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Ex.length;e+=1)n[Ex[e].charCodeAt(0)]=-2;for(let e=0;e<yu.length;e+=1)n[yu[e].charCodeAt(0)]=e;return n})();function Tx(n,e,s){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(yu[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(yu[r]),e.queuedBits-=6}}function Xv(n,e,s){const r=ok[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Px(n){const e=[],s=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=c=>{dk(c,r,s)};for(let c=0;c<n.length;c+=1)Xv(n.charCodeAt(c),i,o);return e.join("")}function lk(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function ck(n,e){for(let s=0;s<n.length;s+=1){let r=n.charCodeAt(s);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}lk(r,e)}}function dk(n,e,s){if(e.utf8seq===0){if(n<=127){s(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Jo(n){const e=[],s={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)Xv(n.charCodeAt(i),s,r);return new Uint8Array(e)}function uk(n){const e=[];return ck(n,s=>e.push(s)),new Uint8Array(e)}function za(n){const e=[],s={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>Tx(i,s,r)),Tx(null,s,r),e.join("")}function hk(n){return Math.round(Date.now()/1e3)+n}function fk(){return Symbol("auth-callback")}const Vs=()=>typeof window<"u"&&typeof document<"u",Pa={tested:!1,writable:!1},Qv=()=>{if(!Vs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pa.tested)return Pa.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Pa.tested=!0,Pa.writable=!0}catch{Pa.tested=!0,Pa.writable=!1}return Pa.writable};function pk(n){const e={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return s.searchParams.forEach((r,i)=>{e[i]=r}),e}const ew=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),mk=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Wo=async(n,e,s)=>{await n.setItem(e,JSON.stringify(s))},Aa=async(n,e)=>{const s=await n.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},$s=async(n,e)=>{await n.removeItem(e)};let tw=class sw{constructor(){this.promise=new sw.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}};tw.promiseConstructor=Promise;function Vf(n){const e=n.split(".");if(e.length!==3)throw new Cp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ek.test(e[r]))throw new Cp("JWT not in base64url format");return{header:JSON.parse(Px(e[0])),payload:JSON.parse(Px(e[1])),signature:Jo(e[2]),raw:{header:e[0],payload:e[1]}}}async function gk(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function xk(n,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await n(o);if(!e(o,null,c)){r(c);return}}catch(c){if(!e(o,c)){i(c);return}}})()})}function yk(n){return("0"+n.toString(16)).substr(-2)}function bk(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let i="";for(let o=0;o<56;o++)i+=s.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,yk).join("")}async function vk(n){const s=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function wk(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=await vk(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Lo(n,e,s=!1){const r=bk();let i=r;s&&(i+="/PASSWORD_RECOVERY"),await Wo(n,`${e}-code-verifier`,i);const o=await wk(r);return[o,r===o?"plain":"s256"]}const Nk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jk(n){const e=n.headers.get(kp);if(!e||!e.match(Nk))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Sk(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function kk(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _k=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Uo(n){if(!_k.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bf(){const n={};return new Proxy(n,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ck(n,e){return new Proxy(n,{get:(s,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(s,r,i)}})}function Ax(n){return JSON.parse(JSON.stringify(n))}const Ia=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Ek=[502,503,504];async function Ix(n){var e;if(!mk(n))throw new _p(Ia(n),0);if(Ek.includes(n.status))throw new _p(Ia(n),n.status);let s;try{s=await n.json()}catch(o){throw new Ma(Ia(o),o)}let r;const i=jk(n);if(i&&i.getTime()>=Zv["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Cx(Ia(s),n.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Pn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new Cx(Ia(s),n.status,s.weak_password.reasons);throw new sk(Ia(s),n.status||500,r)}const Tk=(n,e,s,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),s))};async function it(n,e,s,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[kp]||(o[kp]=Zv["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const c=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await Pk(n,e,s+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function Pk(n,e,s,r,i,o){const c=Tk(e,r,i,o);let u;try{u=await n(s,Object.assign({},c))}catch(f){throw console.error(f),new _p(Ia(f),0)}if(u.ok||await Ix(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(f){await Ix(f)}}function tr(n){var e;let s=null;Rk(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=hk(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:s,user:r},error:null}}function Rx(n){const e=tr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Wi(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Ak(n){return{data:n,error:null}}function Ik(n){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:o}=n,c=qu(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:o},f=Object.assign({},c);return{data:{properties:u,user:f},error:null}}function Dx(n){return n}function Rk(n){return n.access_token&&n.refresh_token&&n.expires_in}const qf=["global","local","others"];class Dk{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=ew(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=qf[0]){if(qf.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qf.join(", ")}`);try{return await it(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await it(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Wi})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=qu(e,["options"]),i=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await it(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Ik,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(st(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await it(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wi})}catch(s){if(st(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,i,o,c,u,f;try{const h={nextPage:null,lastPage:0,total:0},y=await it(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Dx});if(y.error)throw y.error;const v=await y.json(),N=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(f=(u=y.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return T.length>0&&(T.forEach(k=>{const _=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);h[`${P}Page`]=_}),h.total=parseInt(N)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(st(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Uo(e);try{return await it(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wi})}catch(s){if(st(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Uo(e);try{return await it(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Wi})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){Uo(e);try{return await it(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Wi})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Uo(e.userId);try{const{data:s,error:r}=await it(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:r}}catch(s){if(st(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Uo(e.userId),Uo(e.id);try{return{data:await it(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(st(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,r,i,o,c,u,f;try{const h={nextPage:null,lastPage:0,total:0},y=await it(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Dx});if(y.error)throw y.error;const v=await y.json(),N=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(f=(u=y.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return T.length>0&&(T.forEach(k=>{const _=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);h[`${P}Page`]=_}),h.total=parseInt(N)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(st(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await it(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(st(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await it(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(st(s))return{data:null,error:s};throw s}}async _updateOAuthClient(e,s){try{return await it(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(st(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await it(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(st(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await it(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(st(s))return{data:null,error:s};throw s}}}function Mx(n={}){return{getItem:e=>n[e]||null,setItem:(e,s)=>{n[e]=s},removeItem:e=>{delete n[e]}}}const zo={debug:!!(globalThis&&Qv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Mk extends nw{}async function Ok(n,e,s){zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),zo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await s()}finally{zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Mk(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(zo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Lk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function rw(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Uk(n){return parseInt(n,16)}function zk(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Fk(n){var e;const{chainId:s,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:c,notBefore:u,requestId:f,resources:h,scheme:y,uri:v,version:N}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(N!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${N}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const T=rw(n.address),k=y?`${y}://${r}`:r,_=n.statement?`${n.statement}
`:"",P=`${k} wants you to sign in with your Ethereum account:
${T}

${_}`;let L=`URI: ${v}
Version: ${N}
Chain ID: ${s}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(i&&(L+=`
Expiration Time: ${i.toISOString()}`),u&&(L+=`
Not Before: ${u.toISOString()}`),f&&(L+=`
Request ID: ${f}`),h){let z=`
Resources:`;for(const F of h){if(!F||typeof F!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${F}`);z+=`
- ${F}`}L+=z}return`${P}
${L}`}class bs extends Error{constructor({message:e,code:s,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=s}}class bu extends bs{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function $k({error:n,options:e}){var s,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new bs({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new bs({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new bs({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new bs({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new bs({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new bs({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new bs({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new bs({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(iw(c)){if(o.rp.id!==c)return new bs({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new bs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new bs({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new bs({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new bs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Vk({error:n,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new bs({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new bs({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(iw(r)){if(s.rpId!==r)return new bs({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new bs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new bs({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new bs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Bk{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const qk=new Bk;function Wk(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:s,excludeCredentials:r}=n,i=qu(n,["challenge","user","excludeCredentials"]),o=Jo(e).buffer,c=Object.assign(Object.assign({},s),{id:Jo(s.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:c});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const h=r[f];u.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:Jo(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function Hk(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:s}=n,r=qu(n,["challenge","allowCredentials"]),i=Jo(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(s&&s.length>0){o.allowCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const u=s[c];o.allowCredentials[c]=Object.assign(Object.assign({},u),{id:Jo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function Gk(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:za(new Uint8Array(n.response.attestationObject)),clientDataJSON:za(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Kk(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:za(new Uint8Array(i.authenticatorData)),clientDataJSON:za(new Uint8Array(i.clientDataJSON)),signature:za(new Uint8Array(i.signature)),userHandle:i.userHandle?za(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function iw(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Ox(){var n,e;return!!(Vs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Jk(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new bu("Browser returned unexpected credential type",e)}:{data:null,error:new bu("Empty credential response",e)}}catch(e){return{data:null,error:$k({error:e,options:n})}}}async function Yk(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new bu("Browser returned unexpected credential type",e)}:{data:null,error:new bu("Empty credential response",e)}}catch(e){return{data:null,error:Vk({error:e,options:n})}}}const Zk={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Xk={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function vu(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),s=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const o in i){const c=i[o];if(c!==void 0)if(Array.isArray(c))r[o]=c;else if(s(c))r[o]=c;else if(e(c)){const u=r[o];e(u)?r[o]=vu(u,c):r[o]=vu(c)}else r[o]=c}return r}function Qk(n,e){return vu(Zk,n,e||{})}function e_(n,e){return vu(Xk,n,e||{})}class t_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:r,signal:i},o){try{const{data:c,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!c)return{data:null,error:u};const f=i??qk.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=Qk(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:y,error:v}=await Jk({publicKey:h,signal:f});return y?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const h=e_(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:y,error:v}=await Yk(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:f}));return y?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(c){return st(c)?{data:null,error:c}:{data:null,error:new Ma("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:s,webauthn:r}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!s)return{data:null,error:new pc("rpId is required for WebAuthn authentication")};try{if(!Ox())return{data:null,error:new Ma("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:r},signal:i},{request:o});if(!c)return{data:null,error:u};const{webauthn:f}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:f.type,rpId:s,rpOrigins:r,credential_response:f.credential_response}})}catch(c){return st(c)?{data:null,error:c}:{data:null,error:new Ma("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!s)return{data:null,error:new pc("rpId is required for WebAuthn registration")};try{if(!Ox())return{data:null,error:new Ma("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(y=>{var v;return(v=y.data)===null||v===void 0?void 0:v.all.find(N=>N.factor_type==="webauthn"&&N.friendly_name===e&&N.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:u};const{data:f,error:h}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:s,rpOrigins:r},signal:i},{create:o});return f?this._verify({factorId:c.id,challengeId:f.challengeId,webauthn:{rpId:s,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(c){return st(c)?{data:null,error:c}:{data:null,error:new Ma("Unexpected error in register",c)}}}}Lk();const s_={url:Z2,storageKey:X2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Q2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Lx(n,e,s){return await s()}const Fo={};class mc{get jwks(){var e,s;return(s=(e=Fo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Fo[this.storageKey]=Object.assign(Object.assign({},Fo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Fo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Fo[this.storageKey]=Object.assign(Object.assign({},Fo[this.storageKey]),{cachedAt:e})}constructor(e){var s,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},s_),e);if(this.storageKey=o.storageKey,this.instanceID=(s=mc.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,mc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Vs()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Dk({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=ew(o.fetch),this.lock=o.lock||Lx,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Vs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Ok:this.lock=Lx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new t_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Qv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mx(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Mx(this.memoryStorage)),Vs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Yv}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let s={},r="none";if(Vs()&&(s=pk(window.location.href),this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce")),Vs()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(s,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),ik(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",c,"redirect type",u),await this._saveSession(c),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return st(s)?this._returnResult({error:s}):this._returnResult({error:new Ma("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,i;try{const o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:tr}),{data:c,error:u}=o;if(u||!c)return this._returnResult({data:{user:null,session:null},error:u});const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(o){if(st(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var s,r,i;try{let o;if("email"in e){const{email:y,password:v,options:N}=e;let T=null,k=null;this.flowType==="pkce"&&([T,k]=await Lo(this.storage,this.storageKey)),o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:y,password:v,data:(s=N==null?void 0:N.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:T,code_challenge_method:k},xform:tr})}else if("phone"in e){const{phone:y,password:v,options:N}=e;o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(r=N==null?void 0:N.data)!==null&&r!==void 0?r:{},channel:(i=N==null?void 0:N.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:tr})}else throw new Kd("You must provide either an email or phone number and a password");const{data:c,error:u}=o;if(u||!c)return await $s(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(o){if(await $s(this.storage,`${this.storageKey}-code-verifier`),st(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let s;if("email"in e){const{email:o,password:c,options:u}=e;s=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Rx})}else if("phone"in e){const{phone:o,password:c,options:u}=e;s=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Rx})}else throw new Kd("You must provide either an email or phone number and a password");const{data:r,error:i}=s;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new Oo;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(s){if(st(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(e){var s,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,r,i,o,c,u,f,h,y,v,N;let T,k;if("message"in e)T=e.message,k=e.signature;else{const{chain:_,wallet:P,statement:L,options:z}=e;let F;if(Vs())if(typeof P=="object")F=P;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")F=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(z!=null&&z.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=P}const K=new URL((s=z==null?void 0:z.url)!==null&&s!==void 0?s:window.location.href),ee=await F.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ee||ee.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=rw(ee[0]);let D=(r=z==null?void 0:z.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!D){const I=await F.request({method:"eth_chainId"});D=Uk(I)}const C={domain:K.host,address:W,statement:L,uri:K.href,version:"1",chainId:D,nonce:(i=z==null?void 0:z.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(c=(o=z==null?void 0:z.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(u=z==null?void 0:z.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=z==null?void 0:z.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=z==null?void 0:z.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(y=z==null?void 0:z.signInWithEthereum)===null||y===void 0?void 0:y.resources};T=Fk(C),k=await F.request({method:"personal_sign",params:[zk(T),W]})}try{const{data:_,error:P}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:k},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(N=e.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:tr});if(P)throw P;if(!_||!_.session||!_.user){const L=new Oo;return this._returnResult({data:{user:null,session:null},error:L})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:P})}catch(_){if(st(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(e){var s,r,i,o,c,u,f,h,y,v,N,T;let k,_;if("message"in e)k=e.message,_=e.signature;else{const{chain:P,wallet:L,statement:z,options:F}=e;let K;if(Vs())if(typeof L=="object")K=L;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))K=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!(F!=null&&F.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");K=L}const ee=new URL((s=F==null?void 0:F.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in K&&K.signIn){const W=await K.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},F==null?void 0:F.signInWithSolana),{version:"1",domain:ee.host,uri:ee.href}),z?{statement:z}:null));let D;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")D=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)D=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)k=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),_=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in K)||typeof K.signMessage!="function"||!("publicKey"in K)||typeof K!="object"||!K.publicKey||!("toBase58"in K.publicKey)||typeof K.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${ee.host} wants you to sign in with your Solana account:`,K.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${ee.href}`,`Issued At: ${(i=(r=F==null?void 0:F.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=F==null?void 0:F.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...!((c=F==null?void 0:F.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...!((u=F==null?void 0:F.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...!((f=F==null?void 0:F.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...!((h=F==null?void 0:F.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...!((v=(y=F==null?void 0:F.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...F.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const W=await K.signMessage(new TextEncoder().encode(k),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=W}}try{const{data:P,error:L}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:za(_)},!((N=e.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:tr});if(L)throw L;if(!P||!P.session||!P.user){const z=new Oo;return this._returnResult({data:{user:null,session:null},error:z})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:L})}catch(P){if(st(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async _exchangeCodeForSession(e){const s=await Aa(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(s??"").split("/");try{if(!r&&this.flowType==="pkce")throw new ak;const{data:o,error:c}=await it(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:tr});if(await $s(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const u=new Oo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:c})}catch(o){if(await $s(this.storage,`${this.storageKey}-code-verifier`),st(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:s,provider:r,token:i,access_token:o,nonce:c}=e,u=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:tr}),{data:f,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f||!f.session||!f.user){const y=new Oo;return this._returnResult({data:{user:null,session:null},error:y})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:h})}catch(s){if(st(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(e){var s,r,i,o,c;try{if("email"in e){const{email:u,options:f}=e;let h=null,y=null;this.flowType==="pkce"&&([h,y]=await Lo(this.storage,this.storageKey));const{error:v}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:y},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:u,options:f}=e,{data:h,error:y}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},create_user:(o=f==null?void 0:f.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(c=f==null?void 0:f.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:y})}throw new Kd("You must provide either an email or phone number.")}catch(u){if(await $s(this.storage,`${this.storageKey}-code-verifier`),st(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var s,r;try{let i,o;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:u}=await it(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:tr});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,h=c.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(i){if(st(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var s,r,i,o,c;try{let u=null,f=null;this.flowType==="pkce"&&([u,f]=await Lo(this.storage,this.storageKey));const h=await it(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:Ak});return!((o=h.data)===null||o===void 0)&&o.url&&Vs()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await $s(this.storage,`${this.storageKey}-code-verifier`),st(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Pn;const{error:i}=await it(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(st(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:c}=await it(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:c,error:u}=await it(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new Kd("You must provide either an email or phone number and a type")}catch(s){if(st(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Aa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ff:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await Aa(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Bf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=Ck(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const s=await this._acquireLock(-1,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(e){try{return e?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wi}):await this._useSession(async s=>{var r,i,o;const{data:c,error:u}=s;if(u)throw u;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pn}:await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Wi})})}catch(s){if(st(s))return rk(s)&&(await this._removeSession(),await $s(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Pn;const c=i.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await Lo(this.storage,this.storageKey));const{data:h,error:y}=await it(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:c.access_token,xform:Wi});if(y)throw y;return c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(await $s(this.storage,`${this.storageKey}-code-verifier`),st(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pn;const s=Date.now()/1e3;let r=s,i=!0,o=null;const{payload:c}=Vf(e.access_token);if(c.exp&&(r=c.exp,i=r<=s),i){const{data:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(s){if(st(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:c,error:u}=s;if(u)throw u;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Pn;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(st(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(e,s){try{if(!Vs())throw new Jd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new _x("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jd("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _x("No code detected.");const{data:z,error:F}=await this._exchangeCodeForSession(e.code);if(F)throw F;const K=new URL(window.location.href);return K.searchParams.delete("code"),window.history.replaceState(window.history.state,"",K.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:c,expires_in:u,expires_at:f,token_type:h}=e;if(!o||!u||!c||!h)throw new Jd("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(u);let N=y+v;f&&(N=parseInt(f));const T=N-y;T*1e3<=qo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${v}s`);const k=N-v;y-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,N,y):y-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,N,y);const{data:_,error:P}=await this._getUser(o);if(P)throw P;const L={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:v,expires_at:N,refresh_token:c,token_type:h,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:e.type},error:null})}catch(r){if(st(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Aa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:i,error:o}=s;if(o)return this._returnResult({error:o});const c=(r=i.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:u}=await this.admin.signOut(c,e);if(u&&!(nk(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await $s(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const s=fk(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,i;try{const{data:{session:o},error:c}=s;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,s={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Lo(this.storage,this.storageKey,!0));try{return await it(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(await $s(this.storage,`${this.storageKey}-code-verifier`),st(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:r,error:i}=await this._useSession(async o=>{var c,u,f,h,y;const{data:v,error:N}=o;if(N)throw N;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await it(this.fetch,"GET",T,{headers:this.headers,jwt:(y=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&y!==void 0?y:void 0})});if(i)throw i;return Vs()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(st(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var r;try{const{error:i,data:{session:o}}=s;if(i)throw i;const{options:c,provider:u,token:f,access_token:h,nonce:y}=e,v=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:f,access_token:h,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:tr}),{data:N,error:T}=v;return T?this._returnResult({data:{user:null,session:null},error:T}):!N||!N.session||!N.user?this._returnResult({data:{user:null,session:null},error:new Oo}):(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("USER_UPDATED",N.session)),this._returnResult({data:N,error:T}))}catch(i){if(await $s(this.storage,`${this.storageKey}-code-verifier`),st(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,i;const{data:o,error:c}=s;if(c)throw c;return await it(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await xk(async i=>(i>0&&await gk(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await it(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tr})),(i,o)=>{const c=200*Math.pow(2,i);return o&&$f(o)&&Date.now()+c-r<qo})}catch(r){if(this._debug(s,"error",r),st(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Vs()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Aa(this.storage,this.storageKey);if(i&&this.userStorage){let c=await Aa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:i.user},await Wo(this.userStorage,this.storageKey+"-user",c)),i.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Bf()}else if(i&&!i.user&&!i.user){const c=await Aa(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(i.user=c.user,await $s(this.storage,this.storageKey+"-user"),await Wo(this.storage,this.storageKey,i)):i.user=Bf()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Ff;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Ff}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:c}=await this._callRefreshToken(i.refresh_token);c&&(console.error(c),$f(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:u}=await this._getUser(i.access_token);!u&&(c!=null&&c.user)?(i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new tw;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new Pn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),st(o)){const c={data:null,error:o};return $f(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,s)}catch(f){o.push(f)}});if(await Promise.all(c),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await $s(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await Wo(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const o=Ax(i);await Wo(this.storage,this.storageKey,o)}else{const i=Ax(s);await Wo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await $s(this.storage,this.storageKey),await $s(this.storage,this.storageKey+"-code-verifier"),await $s(this.storage,this.storageKey+"-user"),this.userStorage&&await $s(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Vs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/qo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${qo}ms, refresh threshold is ${Sp} ticks`),i<=Sp&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof nw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Vs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const i=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,c]=await Lo(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;return o?this._returnResult({data:null,error:o}):await it(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,i;const{data:o,error:c}=s;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:h}=await it(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&f.type==="totp"&&(!((i=f==null?void 0:f.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Gk(e.webauthn.credential_response):Kk(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:f}=await it(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:f}))})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const c=await it(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:u}=c;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Wk(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Hk(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=s==null?void 0:s.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,s;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Vf(r.access_token);let c=null;o.aal&&(c=o.aal);let u=c;((s=(e=r.user.factors)===null||e===void 0?void 0:e.filter(y=>y.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(u="aal2");const h=o.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;return i?this._returnResult({data:null,error:i}):r?await it(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Pn})})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Pn});const c=await it(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return c.data&&c.data.redirect_url&&Vs()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Pn});const c=await it(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return c.data&&c.data.redirect_url&&Vs()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;return r?this._returnResult({data:null,error:r}):s?await it(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Pn})})}catch(e){if(st(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;return i?this._returnResult({data:null,error:i}):r?(await it(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Pn})})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+tk>i)return r;const{data:o,error:c}=await it(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:T,error:k}=await this.getSession();if(k||!T.session)return this._returnResult({data:null,error:k});r=T.session.access_token}const{header:i,payload:o,signature:c,raw:{header:u,payload:f}}=Vf(r);s!=null&&s.allowExpired||Sk(o.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!h){const{error:T}=await this.getUser(r);if(T)throw T;return{data:{claims:o,header:i,signature:c},error:null}}const y=kk(i.alg),v=await crypto.subtle.importKey("jwk",h,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,c,uk(`${u}.${f}`)))throw new Cp("Invalid JWT signature");return{data:{claims:o,header:i,signature:c},error:null}}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}}}mc.nextInstanceID={};const n_=mc,r_="2.89.0";let Yl="";typeof Deno<"u"?Yl="deno":typeof document<"u"?Yl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Yl="react-native":Yl="node";const i_={"X-Client-Info":`supabase-js-${Yl}/${r_}`},a_={headers:i_},o_={schema:"public"},l_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},c_={};function gc(n){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(n)}function d_(n,e){if(gc(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var r=s.call(n,e);if(gc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function u_(n){var e=d_(n,"string");return gc(e)=="symbol"?e:e+""}function h_(n,e,s){return(e=u_(e))in n?Object.defineProperty(n,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[e]=s,n}function Ux(n,e){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),s.push.apply(s,r)}return s}function cs(n){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Ux(Object(s),!0).forEach(function(r){h_(n,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Ux(Object(s)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(s,r))})}return n}const f_=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),p_=()=>Headers,m_=(n,e,s)=>{const r=f_(s),i=p_();return async(o,c)=>{var u;const f=(u=await e())!==null&&u!==void 0?u:n;let h=new i(c==null?void 0:c.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),r(o,cs(cs({},c),{},{headers:h}))}};function g_(n){return n.endsWith("/")?n:n+"/"}function x_(n,e){var s,r;const{db:i,auth:o,realtime:c,global:u}=n,{db:f,auth:h,realtime:y,global:v}=e,N={db:cs(cs({},f),i),auth:cs(cs({},h),o),realtime:cs(cs({},y),c),storage:{},global:cs(cs(cs({},v),u),{},{headers:cs(cs({},(s=v==null?void 0:v.headers)!==null&&s!==void 0?s:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?N.accessToken=n.accessToken:delete N.accessToken,N}function y_(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(g_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var b_=class extends n_{constructor(n){super(n)}},v_=class{constructor(n,e,s){var r,i;this.supabaseUrl=n,this.supabaseKey=e;const o=y_(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:o_,realtime:c_,auth:cs(cs({},l_),{},{storageKey:c}),global:a_},f=x_(s??{},u);if(this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=f.auth)!==null&&h!==void 0?h:{},this.headers,f.global.fetch)}this.fetch=m_(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(cs({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new Q1(new URL("rest/v1",o).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Y2(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new K1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,s)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,s;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return(e=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:s,storage:r,userStorage:i,storageKey:o,flowType:c,lock:u,debug:f,throwOnError:h},y,v){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new b_({url:this.authUrl.href,headers:cs(cs({},N),y),storageKey:o,autoRefreshToken:n,persistSession:e,detectSessionInUrl:s,storage:r,userStorage:i,flowType:c,lock:u,debug:f,throwOnError:h,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new g2(this.realtimeUrl.href,cs(cs({},n),{},{params:cs(cs({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(n,e,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const w_=(n,e,s)=>new v_(n,e,s);function N_(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}N_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const j_="https://xqcnqtrzamgzsrgbmxuk.supabase.co",S_="sb_publishable_KwSUm9DTjeHvxqOSfECRFQ_4dkpCxAW",k_=!0;console.log(" Supabase Client initialized successfully");const Ge=w_(j_,S_),Es=k_;async function __(n,e){return Ge.auth.signInWithPassword({email:n,password:e})}async function C_(n,e,s){var i,o,c;const r=await Ge.auth.signUp({email:n,password:e});if(r.error)throw r.error;try{const u=((o=(i=r==null?void 0:r.data)==null?void 0:i.user)==null?void 0:o.id)||((c=r==null?void 0:r.user)==null?void 0:c.id);u&&s&&await Ge.from("users").upsert([{id:u,email:n,...s}])}catch(u){console.warn("Failed to write signup metadata to users table:",u)}return r}async function Bs(n,e={}){try{let s=Ge.from(n).select(e.select||"*");if(e.filters)for(const i of Object.keys(e.filters))s=s.eq(i,e.filters[i]);e.orderBy&&(s=s.order(e.orderBy.column,{ascending:!!e.orderBy.ascending})),typeof e.limit=="number"&&(s=s.limit(e.limit)),typeof e.offset=="number"&&(s=s.range(e.offset,(e.offset||0)+(e.limit||0)-1));const r=await s;if(r.error)throw r.error;return r.data}catch(s){return console.warn("queryDocuments failed:",s),null}}async function Mc(n,e){try{const{data:s,error:r}=await Ge.from(n).select("*").eq("id",e).maybeSingle();if(r)throw r;return s}catch(s){return console.warn("getDocument failed:",s),null}}async function Rr(n,e){const{data:s,error:r}=await Ge.from(n).insert([e]);if(r)throw r;return s}async function di(n,e,s){const{data:r,error:i}=await Ge.from(n).update(s).eq("id",e);if(i)throw i;return r}async function cm(n,e){const{data:s,error:r}=await Ge.from(n).delete().eq("id",e);if(r)throw r;return s}function Wf(n,e){try{const s=Ge.channel(`${n}_realtime`).on("postgres_changes",{event:"*",schema:"public",table:n},r=>e(r)).subscribe();return()=>{try{s.unsubscribe()}catch(r){console.warn("unsubscribe failed:",r)}}}catch(s){return console.warn("subscribeToTable failed:",s),()=>{}}}async function dm(n,e,s){try{const{error:r}=await Ge.storage.from(n).upload(e,s,{upsert:!0});if(r)throw r;const{data:i}=Ge.storage.from(n).getPublicUrl(e);return(i==null?void 0:i.publicUrl)||null}catch(r){throw console.error("uploadFile failed:",r),r}}async function Xi(n,e){var s;try{let r=null;try{const{data:o}=await Ge.auth.getSession();r=((s=o==null?void 0:o.session)==null?void 0:s.access_token)||null}catch{r=null}const i=await fetch(`/api/functions/${n}`,{method:"POST",headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{}},body:JSON.stringify(e||{})});if(!i.ok){const o=await i.text();throw new Error(o||`Function ${n} failed with status ${i.status}`)}return await i.json()}catch(r){throw console.warn("callServerFunction failed:",n,r),r}}const E_=()=>{};var zx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=function(n){const e=[];let s=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},T_=function(n){const e=[];let s=0,r=0;for(;s<n.length;){const i=n[s++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[s++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[s++],c=n[s++],u=n[s++],f=((i&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=n[s++],c=n[s++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},ow={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],c=i+1<n.length,u=c?n[i+1]:0,f=i+2<n.length,h=f?n[i+2]:0,y=o>>2,v=(o&3)<<4|u>>4;let N=(u&15)<<2|h>>6,T=h&63;f||(T=64,c||(N=64)),r.push(s[y],s[v],s[N],s[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):T_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=s[n.charAt(i++)],u=i<n.length?s[n.charAt(i)]:0;++i;const h=i<n.length?s[n.charAt(i)]:64;++i;const v=i<n.length?s[n.charAt(i)]:64;if(++i,o==null||u==null||h==null||v==null)throw new P_;const N=o<<2|u>>4;if(r.push(N),h!==64){const T=u<<4&240|h>>2;if(r.push(T),v!==64){const k=h<<6&192|v;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class P_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const A_=function(n){const e=aw(n);return ow.encodeByteArray(e,!0)},wu=function(n){return A_(n).replace(/\./g,"")},lw=function(n){try{return ow.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=()=>I_().__FIREBASE_DEFAULTS__,D_=()=>{if(typeof process>"u"||typeof zx>"u")return;const n=zx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},M_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&lw(n[1]);return e&&JSON.parse(e)},um=()=>{try{return E_()||R_()||D_()||M_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cw=n=>{var e,s;return(s=(e=um())==null?void 0:e.emulatorHosts)==null?void 0:s[n]},hm=n=>{const e=cw(n);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},dw=()=>{var n;return(n=um())==null?void 0:n.config},uw=n=>{var e;return(e=um())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hu(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[wu(JSON.stringify(s)),wu(JSON.stringify(c)),""].join(".")}const Ql={};function L_(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ql))Ql[e]?n.emulator.push(e):n.prod.push(e);return n}function U_(n){let e=document.getElementById(n),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),s=!0),{created:s,element:e}}let Fx=!1;function Gu(n,e){if(typeof window>"u"||typeof document>"u"||!to(window.location.host)||Ql[n]===e||Ql[n]||Fx)return;Ql[n]=e;function s(N){return`__firebase__banner__${N}`}const r="__firebase__banner",o=L_().prod.length>0;function c(){const N=document.getElementById(r);N&&N.remove()}function u(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function f(N,T){N.setAttribute("width","24"),N.setAttribute("id",T),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function h(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Fx=!0,c()},N}function y(N,T){N.setAttribute("id",T),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function v(){const N=U_(r),T=s("text"),k=document.getElementById(T)||document.createElement("span"),_=s("learnmore"),P=document.getElementById(_)||document.createElement("a"),L=s("preprendIcon"),z=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const F=N.element;u(F),y(P,_);const K=h();f(z,L),F.append(z,k,P,K),document.body.appendChild(F)}o?(k.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function F_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function V_(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fm(){try{return typeof indexedDB=="object"}catch{return!1}}function pm(){return new Promise((n,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(s){e(s)}})}function pw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="FirebaseError";class Hn extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=B_,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,la.prototype.create)}}class la{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?q_(o,r):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new Hn(i,u,r)}}function q_(n,e){return n.replace(W_,(s,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const W_=/\{\$([^}]+)}/g;function H_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function sa(n,e){if(n===e)return!0;const s=Object.keys(n),r=Object.keys(e);for(const i of s){if(!r.includes(i))return!1;const o=n[i],c=e[i];if($x(o)&&$x(c)){if(!sa(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!s.includes(i))return!1;return!0}function $x(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(n){const e=[];for(const[s,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function G_(n,e){const s=new K_(n,e);return s.subscribe.bind(s)}class K_{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let i;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");J_(e,["next","error","complete"])?i=e:i={next:e,error:s,complete:r},i.next===void 0&&(i.next=Hf),i.error===void 0&&(i.error=Hf),i.complete===void 0&&(i.complete=Hf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J_(n,e){if(typeof n!="object"||n===null)return!1;for(const s of e)if(s in n&&typeof n[s]=="function")return!0;return!1}function Hf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=1e3,Z_=2,X_=14400*1e3,Q_=.5;function Vx(n,e=Y_,s=Z_){const r=e*Math.pow(s,n),i=Math.round(Q_*r*(Math.random()-.5)*2);return Math.min(X_,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(n){return n&&n._delegate?n._delegate:n}class ln{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new O_;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sC(e))try{this.getOrInitializeService({instanceIdentifier:Ra})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ra){return this.instances.has(e)}getOptions(e=Ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&c.resolve(i)}return i}onInit(e,s){const r=this.normalizeInstanceIdentifier(s),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const i of r)try{i(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tC(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ra){return this.component?this.component.multipleInstances?e:Ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tC(n){return n===Ra?void 0:n}function sC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new eC(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(zt||(zt={}));const rC={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},iC=zt.INFO,aC={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},oC=(n,e,...s)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=aC[e];if(i)console[i](`[${r}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ku{constructor(e){this.name=e,this._logLevel=iC,this._logHandler=oC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...e),this._logHandler(this,zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...e),this._logHandler(this,zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,zt.INFO,...e),this._logHandler(this,zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,zt.WARN,...e),this._logHandler(this,zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...e),this._logHandler(this,zt.ERROR,...e)}}const lC=(n,e)=>e.some(s=>n instanceof s);let Bx,qx;function cC(){return Bx||(Bx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dC(){return qx||(qx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mw=new WeakMap,Ep=new WeakMap,gw=new WeakMap,Gf=new WeakMap,mm=new WeakMap;function uC(n){const e=new Promise((s,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{s(pi(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(s=>{s instanceof IDBCursor&&mw.set(s,n)}).catch(()=>{}),mm.set(e,n),e}function hC(n){if(Ep.has(n))return;const e=new Promise((s,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{s(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Ep.set(n,e)}let Tp={get(n,e,s){if(n instanceof IDBTransaction){if(e==="done")return Ep.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gw.get(n);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return pi(n[e])},set(n,e,s){return n[e]=s,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function fC(n){Tp=n(Tp)}function pC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=n.call(Kf(this),e,...s);return gw.set(r,e.sort?e.sort():[e]),pi(r)}:dC().includes(n)?function(...e){return n.apply(Kf(this),e),pi(mw.get(this))}:function(...e){return pi(n.apply(Kf(this),e))}}function mC(n){return typeof n=="function"?pC(n):(n instanceof IDBTransaction&&hC(n),lC(n,cC())?new Proxy(n,Tp):n)}function pi(n){if(n instanceof IDBRequest)return uC(n);if(Gf.has(n))return Gf.get(n);const e=mC(n);return e!==n&&(Gf.set(n,e),mm.set(e,n)),e}const Kf=n=>mm.get(n);function Ju(n,e,{blocked:s,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(n,e),u=pi(c);return r&&c.addEventListener("upgradeneeded",f=>{r(pi(c.result),f.oldVersion,f.newVersion,pi(c.transaction),f)}),s&&c.addEventListener("blocked",f=>s(f.oldVersion,f.newVersion,f)),u.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}function Jf(n,{blocked:e}={}){const s=indexedDB.deleteDatabase(n);return e&&s.addEventListener("blocked",r=>e(r.oldVersion,r)),pi(s).then(()=>{})}const gC=["get","getKey","getAll","getAllKeys","count"],xC=["put","add","delete","clear"],Yf=new Map;function Wx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yf.get(e))return Yf.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,i=xC.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gC.includes(s)))return;const o=async function(c,...u){const f=this.transaction(c,i?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[s](...u),i&&f.done]))[0]};return Yf.set(e,o),o}fC(n=>({...n,get:(e,s,r)=>Wx(e,s)||n.get(e,s,r),has:(e,s)=>!!Wx(e,s)||n.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(bC(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function bC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pp="@firebase/app",Hx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new Ku("@firebase/app"),vC="@firebase/app-compat",wC="@firebase/analytics-compat",NC="@firebase/analytics",jC="@firebase/app-check-compat",SC="@firebase/app-check",kC="@firebase/auth",_C="@firebase/auth-compat",CC="@firebase/database",EC="@firebase/data-connect",TC="@firebase/database-compat",PC="@firebase/functions",AC="@firebase/functions-compat",IC="@firebase/installations",RC="@firebase/installations-compat",DC="@firebase/messaging",MC="@firebase/messaging-compat",OC="@firebase/performance",LC="@firebase/performance-compat",UC="@firebase/remote-config",zC="@firebase/remote-config-compat",FC="@firebase/storage",$C="@firebase/storage-compat",VC="@firebase/firestore",BC="@firebase/ai",qC="@firebase/firestore-compat",WC="firebase",HC="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="[DEFAULT]",GC={[Pp]:"fire-core",[vC]:"fire-core-compat",[NC]:"fire-analytics",[wC]:"fire-analytics-compat",[SC]:"fire-app-check",[jC]:"fire-app-check-compat",[kC]:"fire-auth",[_C]:"fire-auth-compat",[CC]:"fire-rtdb",[EC]:"fire-data-connect",[TC]:"fire-rtdb-compat",[PC]:"fire-fn",[AC]:"fire-fn-compat",[IC]:"fire-iid",[RC]:"fire-iid-compat",[DC]:"fire-fcm",[MC]:"fire-fcm-compat",[OC]:"fire-perf",[LC]:"fire-perf-compat",[UC]:"fire-rc",[zC]:"fire-rc-compat",[FC]:"fire-gcs",[$C]:"fire-gcs-compat",[VC]:"fire-fst",[qC]:"fire-fst-compat",[BC]:"fire-vertex","fire-js":"fire-js",[WC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=new Map,KC=new Map,Ip=new Map;function Gx(n,e){try{n.container.addComponent(e)}catch(s){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,s)}}function Nn(n){const e=n.name;if(Ip.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;Ip.set(e,n);for(const s of Nu.values())Gx(s,n);for(const s of KC.values())Gx(s,n);return!0}function Br(n,e){const s=n.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),n.container.getProvider(e)}function Wn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ea=new la("app","Firebase",JC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,s,r){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ea.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=HC;function xw(n,e={}){let s=n;typeof e!="object"&&(e={name:e});const r={name:Ap,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ea.create("bad-app-name",{appName:String(i)});if(s||(s=dw()),!s)throw ea.create("no-options");const o=Nu.get(i);if(o){if(sa(s,o.options)&&sa(r,o.config))return o;throw ea.create("duplicate-app",{appName:i})}const c=new nC(i);for(const f of Ip.values())c.addComponent(f);const u=new YC(s,r,c);return Nu.set(i,u),u}function ll(n=Ap){const e=Nu.get(n);if(!e&&n===Ap&&dw())return xw();if(!e)throw ea.create("no-app",{appName:n});return e}function Rs(n,e,s){let r=GC[n]??n;s&&(r+=`-${s}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(c.join(" "));return}Nn(new ln(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="firebase-heartbeat-database",XC=1,xc="firebase-heartbeat-store";let Zf=null;function yw(){return Zf||(Zf=Ju(ZC,XC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xc)}catch(s){console.warn(s)}}}}).catch(n=>{throw ea.create("idb-open",{originalErrorMessage:n.message})})),Zf}async function QC(n){try{const s=(await yw()).transaction(xc),r=await s.objectStore(xc).get(bw(n));return await s.done,r}catch(e){if(e instanceof Hn)gi.warn(e.message);else{const s=ea.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(s.message)}}}async function Kx(n,e){try{const r=(await yw()).transaction(xc,"readwrite");await r.objectStore(xc).put(e,bw(n)),await r.done}catch(s){if(s instanceof Hn)gi.warn(s.message);else{const r=ea.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});gi.warn(r.message)}}}function bw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=1024,tE=30;class sE{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new rE(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Jx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>tE){const c=iE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=Jx(),{heartbeatsToSend:r,unsentEntries:i}=nE(this._heartbeatsCache.heartbeats),o=wu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(s){return gi.warn(s),""}}}function Jx(){return new Date().toISOString().substring(0,10)}function nE(n,e=eE){const s=[];let r=n.slice();for(const i of n){const o=s.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),Yx(s)>e){o.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),Yx(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class rE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fm()?pm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await QC(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Kx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Kx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Yx(n){return wu(JSON.stringify({version:2,heartbeats:n})).length}function iE(n){if(n.length===0)return-1;let e=0,s=n[0].date;for(let r=1;r<n.length;r++)n[r].date<s&&(s=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(n){Nn(new ln("platform-logger",e=>new yC(e),"PRIVATE")),Nn(new ln("heartbeat",e=>new sE(e),"PRIVATE")),Rs(Pp,Hx,n),Rs(Pp,Hx,"esm2020"),Rs("fire-js","")}aE("");var oE="firebase",lE="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rs(oE,lE,"app");var Zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gm;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,C){function I(){}I.prototype=C.prototype,D.F=C.prototype,D.prototype=new I,D.prototype.constructor=D,D.D=function($,O,V){for(var A=Array(arguments.length-2),se=2;se<arguments.length;se++)A[se-2]=arguments[se];return C.prototype[O].apply($,A)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,C,I){I||(I=0);const $=Array(16);if(typeof C=="string")for(var O=0;O<16;++O)$[O]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(O=0;O<16;++O)$[O]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=D.g[0],I=D.g[1],O=D.g[2];let V=D.g[3],A;A=C+(V^I&(O^V))+$[0]+3614090360&4294967295,C=I+(A<<7&4294967295|A>>>25),A=V+(O^C&(I^O))+$[1]+3905402710&4294967295,V=C+(A<<12&4294967295|A>>>20),A=O+(I^V&(C^I))+$[2]+606105819&4294967295,O=V+(A<<17&4294967295|A>>>15),A=I+(C^O&(V^C))+$[3]+3250441966&4294967295,I=O+(A<<22&4294967295|A>>>10),A=C+(V^I&(O^V))+$[4]+4118548399&4294967295,C=I+(A<<7&4294967295|A>>>25),A=V+(O^C&(I^O))+$[5]+1200080426&4294967295,V=C+(A<<12&4294967295|A>>>20),A=O+(I^V&(C^I))+$[6]+2821735955&4294967295,O=V+(A<<17&4294967295|A>>>15),A=I+(C^O&(V^C))+$[7]+4249261313&4294967295,I=O+(A<<22&4294967295|A>>>10),A=C+(V^I&(O^V))+$[8]+1770035416&4294967295,C=I+(A<<7&4294967295|A>>>25),A=V+(O^C&(I^O))+$[9]+2336552879&4294967295,V=C+(A<<12&4294967295|A>>>20),A=O+(I^V&(C^I))+$[10]+4294925233&4294967295,O=V+(A<<17&4294967295|A>>>15),A=I+(C^O&(V^C))+$[11]+2304563134&4294967295,I=O+(A<<22&4294967295|A>>>10),A=C+(V^I&(O^V))+$[12]+1804603682&4294967295,C=I+(A<<7&4294967295|A>>>25),A=V+(O^C&(I^O))+$[13]+4254626195&4294967295,V=C+(A<<12&4294967295|A>>>20),A=O+(I^V&(C^I))+$[14]+2792965006&4294967295,O=V+(A<<17&4294967295|A>>>15),A=I+(C^O&(V^C))+$[15]+1236535329&4294967295,I=O+(A<<22&4294967295|A>>>10),A=C+(O^V&(I^O))+$[1]+4129170786&4294967295,C=I+(A<<5&4294967295|A>>>27),A=V+(I^O&(C^I))+$[6]+3225465664&4294967295,V=C+(A<<9&4294967295|A>>>23),A=O+(C^I&(V^C))+$[11]+643717713&4294967295,O=V+(A<<14&4294967295|A>>>18),A=I+(V^C&(O^V))+$[0]+3921069994&4294967295,I=O+(A<<20&4294967295|A>>>12),A=C+(O^V&(I^O))+$[5]+3593408605&4294967295,C=I+(A<<5&4294967295|A>>>27),A=V+(I^O&(C^I))+$[10]+38016083&4294967295,V=C+(A<<9&4294967295|A>>>23),A=O+(C^I&(V^C))+$[15]+3634488961&4294967295,O=V+(A<<14&4294967295|A>>>18),A=I+(V^C&(O^V))+$[4]+3889429448&4294967295,I=O+(A<<20&4294967295|A>>>12),A=C+(O^V&(I^O))+$[9]+568446438&4294967295,C=I+(A<<5&4294967295|A>>>27),A=V+(I^O&(C^I))+$[14]+3275163606&4294967295,V=C+(A<<9&4294967295|A>>>23),A=O+(C^I&(V^C))+$[3]+4107603335&4294967295,O=V+(A<<14&4294967295|A>>>18),A=I+(V^C&(O^V))+$[8]+1163531501&4294967295,I=O+(A<<20&4294967295|A>>>12),A=C+(O^V&(I^O))+$[13]+2850285829&4294967295,C=I+(A<<5&4294967295|A>>>27),A=V+(I^O&(C^I))+$[2]+4243563512&4294967295,V=C+(A<<9&4294967295|A>>>23),A=O+(C^I&(V^C))+$[7]+1735328473&4294967295,O=V+(A<<14&4294967295|A>>>18),A=I+(V^C&(O^V))+$[12]+2368359562&4294967295,I=O+(A<<20&4294967295|A>>>12),A=C+(I^O^V)+$[5]+4294588738&4294967295,C=I+(A<<4&4294967295|A>>>28),A=V+(C^I^O)+$[8]+2272392833&4294967295,V=C+(A<<11&4294967295|A>>>21),A=O+(V^C^I)+$[11]+1839030562&4294967295,O=V+(A<<16&4294967295|A>>>16),A=I+(O^V^C)+$[14]+4259657740&4294967295,I=O+(A<<23&4294967295|A>>>9),A=C+(I^O^V)+$[1]+2763975236&4294967295,C=I+(A<<4&4294967295|A>>>28),A=V+(C^I^O)+$[4]+1272893353&4294967295,V=C+(A<<11&4294967295|A>>>21),A=O+(V^C^I)+$[7]+4139469664&4294967295,O=V+(A<<16&4294967295|A>>>16),A=I+(O^V^C)+$[10]+3200236656&4294967295,I=O+(A<<23&4294967295|A>>>9),A=C+(I^O^V)+$[13]+681279174&4294967295,C=I+(A<<4&4294967295|A>>>28),A=V+(C^I^O)+$[0]+3936430074&4294967295,V=C+(A<<11&4294967295|A>>>21),A=O+(V^C^I)+$[3]+3572445317&4294967295,O=V+(A<<16&4294967295|A>>>16),A=I+(O^V^C)+$[6]+76029189&4294967295,I=O+(A<<23&4294967295|A>>>9),A=C+(I^O^V)+$[9]+3654602809&4294967295,C=I+(A<<4&4294967295|A>>>28),A=V+(C^I^O)+$[12]+3873151461&4294967295,V=C+(A<<11&4294967295|A>>>21),A=O+(V^C^I)+$[15]+530742520&4294967295,O=V+(A<<16&4294967295|A>>>16),A=I+(O^V^C)+$[2]+3299628645&4294967295,I=O+(A<<23&4294967295|A>>>9),A=C+(O^(I|~V))+$[0]+4096336452&4294967295,C=I+(A<<6&4294967295|A>>>26),A=V+(I^(C|~O))+$[7]+1126891415&4294967295,V=C+(A<<10&4294967295|A>>>22),A=O+(C^(V|~I))+$[14]+2878612391&4294967295,O=V+(A<<15&4294967295|A>>>17),A=I+(V^(O|~C))+$[5]+4237533241&4294967295,I=O+(A<<21&4294967295|A>>>11),A=C+(O^(I|~V))+$[12]+1700485571&4294967295,C=I+(A<<6&4294967295|A>>>26),A=V+(I^(C|~O))+$[3]+2399980690&4294967295,V=C+(A<<10&4294967295|A>>>22),A=O+(C^(V|~I))+$[10]+4293915773&4294967295,O=V+(A<<15&4294967295|A>>>17),A=I+(V^(O|~C))+$[1]+2240044497&4294967295,I=O+(A<<21&4294967295|A>>>11),A=C+(O^(I|~V))+$[8]+1873313359&4294967295,C=I+(A<<6&4294967295|A>>>26),A=V+(I^(C|~O))+$[15]+4264355552&4294967295,V=C+(A<<10&4294967295|A>>>22),A=O+(C^(V|~I))+$[6]+2734768916&4294967295,O=V+(A<<15&4294967295|A>>>17),A=I+(V^(O|~C))+$[13]+1309151649&4294967295,I=O+(A<<21&4294967295|A>>>11),A=C+(O^(I|~V))+$[4]+4149444226&4294967295,C=I+(A<<6&4294967295|A>>>26),A=V+(I^(C|~O))+$[11]+3174756917&4294967295,V=C+(A<<10&4294967295|A>>>22),A=O+(C^(V|~I))+$[2]+718787259&4294967295,O=V+(A<<15&4294967295|A>>>17),A=I+(V^(O|~C))+$[9]+3951481745&4294967295,D.g[0]=D.g[0]+C&4294967295,D.g[1]=D.g[1]+(O+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+V&4294967295}r.prototype.v=function(D,C){C===void 0&&(C=D.length);const I=C-this.blockSize,$=this.C;let O=this.h,V=0;for(;V<C;){if(O==0)for(;V<=I;)i(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<C;)if($[O++]=D.charCodeAt(V++),O==this.blockSize){i(this,$),O=0;break}}else for(;V<C;)if($[O++]=D[V++],O==this.blockSize){i(this,$),O=0;break}}this.h=O,this.o+=C},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var C=1;C<D.length-8;++C)D[C]=0;C=this.o*8;for(var I=D.length-8;I<D.length;++I)D[I]=C&255,C/=256;for(this.v(D),D=Array(16),C=0,I=0;I<4;++I)for(let $=0;$<32;$+=8)D[C++]=this.g[I]>>>$&255;return D};function o(D,C){var I=u;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=C(D)}function c(D,C){this.h=C;const I=[];let $=!0;for(let O=D.length-1;O>=0;O--){const V=D[O]|0;$&&V==C||(I[O]=V,$=!1)}this.g=I}var u={};function f(D){return-128<=D&&D<128?o(D,function(C){return new c([C|0],C<0?-1:0)}):new c([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return v;if(D<0)return P(h(-D));const C=[];let I=1;for(let $=0;D>=I;$++)C[$]=D/I|0,I*=4294967296;return new c(C,0)}function y(D,C){if(D.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(D.charAt(0)=="-")return P(y(D.substring(1),C));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(C,8));let $=v;for(let V=0;V<D.length;V+=8){var O=Math.min(8,D.length-V);const A=parseInt(D.substring(V,V+O),C);O<8?(O=h(Math.pow(C,O)),$=$.j(O).add(h(A))):($=$.j(I),$=$.add(h(A)))}return $}var v=f(0),N=f(1),T=f(16777216);n=c.prototype,n.m=function(){if(_(this))return-P(this).m();let D=0,C=1;for(let I=0;I<this.g.length;I++){const $=this.i(I);D+=($>=0?$:4294967296+$)*C,C*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(k(this))return"0";if(_(this))return"-"+P(this).toString(D);const C=h(Math.pow(D,6));var I=this;let $="";for(;;){const O=K(I,C).g;I=L(I,O.j(C));let V=((I.g.length>0?I.g[0]:I.h)>>>0).toString(D);if(I=O,k(I))return V+$;for(;V.length<6;)V="0"+V;$=V+$}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function k(D){if(D.h!=0)return!1;for(let C=0;C<D.g.length;C++)if(D.g[C]!=0)return!1;return!0}function _(D){return D.h==-1}n.l=function(D){return D=L(this,D),_(D)?-1:k(D)?0:1};function P(D){const C=D.g.length,I=[];for(let $=0;$<C;$++)I[$]=~D.g[$];return new c(I,~D.h).add(N)}n.abs=function(){return _(this)?P(this):this},n.add=function(D){const C=Math.max(this.g.length,D.g.length),I=[];let $=0;for(let O=0;O<=C;O++){let V=$+(this.i(O)&65535)+(D.i(O)&65535),A=(V>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);$=A>>>16,V&=65535,A&=65535,I[O]=A<<16|V}return new c(I,I[I.length-1]&-2147483648?-1:0)};function L(D,C){return D.add(P(C))}n.j=function(D){if(k(this)||k(D))return v;if(_(this))return _(D)?P(this).j(P(D)):P(P(this).j(D));if(_(D))return P(this.j(P(D)));if(this.l(T)<0&&D.l(T)<0)return h(this.m()*D.m());const C=this.g.length+D.g.length,I=[];for(var $=0;$<2*C;$++)I[$]=0;for($=0;$<this.g.length;$++)for(let O=0;O<D.g.length;O++){const V=this.i($)>>>16,A=this.i($)&65535,se=D.i(O)>>>16,fe=D.i(O)&65535;I[2*$+2*O]+=A*fe,z(I,2*$+2*O),I[2*$+2*O+1]+=V*fe,z(I,2*$+2*O+1),I[2*$+2*O+1]+=A*se,z(I,2*$+2*O+1),I[2*$+2*O+2]+=V*se,z(I,2*$+2*O+2)}for(D=0;D<C;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=C;D<2*C;D++)I[D]=0;return new c(I,0)};function z(D,C){for(;(D[C]&65535)!=D[C];)D[C+1]+=D[C]>>>16,D[C]&=65535,C++}function F(D,C){this.g=D,this.h=C}function K(D,C){if(k(C))throw Error("division by zero");if(k(D))return new F(v,v);if(_(D))return C=K(P(D),C),new F(P(C.g),P(C.h));if(_(C))return C=K(D,P(C)),new F(P(C.g),C.h);if(D.g.length>30){if(_(D)||_(C))throw Error("slowDivide_ only works with positive integers.");for(var I=N,$=C;$.l(D)<=0;)I=ee(I),$=ee($);var O=W(I,1),V=W($,1);for($=W($,2),I=W(I,2);!k($);){var A=V.add($);A.l(D)<=0&&(O=O.add(I),V=A),$=W($,1),I=W(I,1)}return C=L(D,O.j(C)),new F(O,C)}for(O=v;D.l(C)>=0;){for(I=Math.max(1,Math.floor(D.m()/C.m())),$=Math.ceil(Math.log(I)/Math.LN2),$=$<=48?1:Math.pow(2,$-48),V=h(I),A=V.j(C);_(A)||A.l(D)>0;)I-=$,V=h(I),A=V.j(C);k(V)&&(V=N),O=O.add(V),D=L(D,A)}return new F(O,D)}n.B=function(D){return K(this,D).h},n.and=function(D){const C=Math.max(this.g.length,D.g.length),I=[];for(let $=0;$<C;$++)I[$]=this.i($)&D.i($);return new c(I,this.h&D.h)},n.or=function(D){const C=Math.max(this.g.length,D.g.length),I=[];for(let $=0;$<C;$++)I[$]=this.i($)|D.i($);return new c(I,this.h|D.h)},n.xor=function(D){const C=Math.max(this.g.length,D.g.length),I=[];for(let $=0;$<C;$++)I[$]=this.i($)^D.i($);return new c(I,this.h^D.h)};function ee(D){const C=D.g.length+1,I=[];for(let $=0;$<C;$++)I[$]=D.i($)<<1|D.i($-1)>>>31;return new c(I,D.h)}function W(D,C){const I=C>>5;C%=32;const $=D.g.length-I,O=[];for(let V=0;V<$;V++)O[V]=C>0?D.i(V+I)>>>C|D.i(V+I+1)<<32-C:D.i(V+I);return new c(O,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=y,gm=c}).apply(typeof Zx<"u"?Zx:typeof self<"u"?self:typeof window<"u"?window:{});var Yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var n,e=Object.defineProperty;function s(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yd=="object"&&Yd];for(var j=0;j<p.length;++j){var E=p[j];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=s(this);function i(p,j){if(j)e:{var E=r;p=p.split(".");for(var U=0;U<p.length-1;U++){var ae=p[U];if(!(ae in E))break e;E=E[ae]}p=p[p.length-1],U=E[p],j=j(U),j!=U&&j!=null&&e(E,p,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(p){return p||function(j){var E=[],U;for(U in j)Object.prototype.hasOwnProperty.call(j,U)&&E.push([U,j[U]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(p){var j=typeof p;return j=="object"&&p!=null||j=="function"}function f(p,j,E){return p.call.apply(p.bind,arguments)}function h(p,j,E){return h=f,h.apply(null,arguments)}function y(p,j){var E=Array.prototype.slice.call(arguments,1);return function(){var U=E.slice();return U.push.apply(U,arguments),p.apply(this,U)}}function v(p,j){function E(){}E.prototype=j.prototype,p.Z=j.prototype,p.prototype=new E,p.prototype.constructor=p,p.Ob=function(U,ae,pe){for(var Ue=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)Ue[xt-2]=arguments[xt];return j.prototype[ae].apply(U,Ue)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function T(p){const j=p.length;if(j>0){const E=Array(j);for(let U=0;U<j;U++)E[U]=p[U];return E}return[]}function k(p,j){for(let U=1;U<arguments.length;U++){const ae=arguments[U];var E=typeof ae;if(E=E!="object"?E:ae?Array.isArray(ae)?"array":E:"null",E=="array"||E=="object"&&typeof ae.length=="number"){E=p.length||0;const pe=ae.length||0;p.length=E+pe;for(let Ue=0;Ue<pe;Ue++)p[E+Ue]=ae[Ue]}else p.push(ae)}}class _{constructor(j,E){this.i=j,this.j=E,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function P(p){c.setTimeout(()=>{throw p},0)}function L(){var p=D;let j=null;return p.g&&(j=p.g,p.g=p.g.next,p.g||(p.h=null),j.next=null),j}class z{constructor(){this.h=this.g=null}add(j,E){const U=F.get();U.set(j,E),this.h?this.h.next=U:this.g=U,this.h=U}}var F=new _(()=>new K,p=>p.reset());class K{constructor(){this.next=this.g=this.h=null}set(j,E){this.h=j,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,W=!1,D=new z,C=()=>{const p=Promise.resolve(void 0);ee=()=>{p.then(I)}};function I(){for(var p;p=L();){try{p.h.call(p.g)}catch(E){P(E)}var j=F;j.j(p),j.h<100&&(j.h++,p.next=j.g,j.g=p)}W=!1}function $(){this.u=this.u,this.C=this.C}$.prototype.u=!1,$.prototype.dispose=function(){this.u||(this.u=!0,this.N())},$.prototype[Symbol.dispose]=function(){this.dispose()},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(p,j){this.type=p,this.g=this.target=j,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,j=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const E=()=>{};c.addEventListener("test",E,j),c.removeEventListener("test",E,j)}catch{}return p})();function A(p){return/^[\s\xa0]*$/.test(p)}function se(p,j){O.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,j)}v(se,O),se.prototype.init=function(p,j){const E=this.type=p.type,U=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=j,j=p.relatedTarget,j||(E=="mouseover"?j=p.fromElement:E=="mouseout"&&(j=p.toElement)),this.relatedTarget=j,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),Se=0;function Ie(p,j,E,U,ae){this.listener=p,this.proxy=null,this.src=j,this.type=E,this.capture=!!U,this.ha=ae,this.key=++Se,this.da=this.fa=!1}function le(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function be(p,j,E){for(const U in p)j.call(E,p[U],U,p)}function ve(p,j){for(const E in p)j.call(void 0,p[E],E,p)}function Y(p){const j={};for(const E in p)j[E]=p[E];return j}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(p,j){let E,U;for(let ae=1;ae<arguments.length;ae++){U=arguments[ae];for(E in U)p[E]=U[E];for(let pe=0;pe<de.length;pe++)E=de[pe],Object.prototype.hasOwnProperty.call(U,E)&&(p[E]=U[E])}}function xe(p){this.src=p,this.g={},this.h=0}xe.prototype.add=function(p,j,E,U,ae){const pe=p.toString();p=this.g[pe],p||(p=this.g[pe]=[],this.h++);const Ue=Ae(p,j,U,ae);return Ue>-1?(j=p[Ue],E||(j.fa=!1)):(j=new Ie(j,this.src,pe,!!U,ae),j.fa=E,p.push(j)),j};function q(p,j){const E=j.type;if(E in p.g){var U=p.g[E],ae=Array.prototype.indexOf.call(U,j,void 0),pe;(pe=ae>=0)&&Array.prototype.splice.call(U,ae,1),pe&&(le(j),p.g[E].length==0&&(delete p.g[E],p.h--))}}function Ae(p,j,E,U){for(let ae=0;ae<p.length;++ae){const pe=p[ae];if(!pe.da&&pe.listener==j&&pe.capture==!!E&&pe.ha==U)return ae}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),$e={};function tt(p,j,E,U,ae){if(Array.isArray(j)){for(let pe=0;pe<j.length;pe++)tt(p,j[pe],E,U,ae);return null}return E=Be(E),p&&p[fe]?p.J(j,E,u(U)?!!U.capture:!1,ae):ht(p,j,E,!1,U,ae)}function ht(p,j,E,U,ae,pe){if(!j)throw Error("Invalid event type");const Ue=u(ae)?!!ae.capture:!!ae;let xt=oe(p);if(xt||(p[Pe]=xt=new xe(p)),E=xt.add(j,E,U,Ue,pe),E.proxy)return E;if(U=qt(),E.proxy=U,U.src=p,U.listener=E,p.addEventListener)V||(ae=Ue),ae===void 0&&(ae=!1),p.addEventListener(j.toString(),U,ae);else if(p.attachEvent)p.attachEvent(yt(j.toString()),U);else if(p.addListener&&p.removeListener)p.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return E}function qt(){function p(E){return j.call(p.src,p.listener,E)}const j=Ut;return p}function Ne(p,j,E,U,ae){if(Array.isArray(j))for(var pe=0;pe<j.length;pe++)Ne(p,j[pe],E,U,ae);else U=u(U)?!!U.capture:!!U,E=Be(E),p&&p[fe]?(p=p.i,pe=String(j).toString(),pe in p.g&&(j=p.g[pe],E=Ae(j,E,U,ae),E>-1&&(le(j[E]),Array.prototype.splice.call(j,E,1),j.length==0&&(delete p.g[pe],p.h--)))):p&&(p=oe(p))&&(j=p.g[j.toString()],p=-1,j&&(p=Ae(j,E,U,ae)),(E=p>-1?j[p]:null)&&Qe(E))}function Qe(p){if(typeof p!="number"&&p&&!p.da){var j=p.src;if(j&&j[fe])q(j.i,p);else{var E=p.type,U=p.proxy;j.removeEventListener?j.removeEventListener(E,U,p.capture):j.detachEvent?j.detachEvent(yt(E),U):j.addListener&&j.removeListener&&j.removeListener(U),(E=oe(j))?(q(E,p),E.h==0&&(E.src=null,j[Pe]=null)):le(p)}}}function yt(p){return p in $e?$e[p]:$e[p]="on"+p}function Ut(p,j){if(p.da)p=!0;else{j=new se(j,this);const E=p.listener,U=p.ha||p.src;p.fa&&Qe(p),p=E.call(U,j)}return p}function oe(p){return p=p[Pe],p instanceof xe?p:null}var De="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(p){return typeof p=="function"?p:(p[De]||(p[De]=function(j){return p.handleEvent(j)}),p[De])}function ke(){$.call(this),this.i=new xe(this),this.M=this,this.G=null}v(ke,$),ke.prototype[fe]=!0,ke.prototype.removeEventListener=function(p,j,E,U){Ne(this,p,j,E,U)};function We(p,j){var E,U=p.G;if(U)for(E=[];U;U=U.G)E.push(U);if(p=p.M,U=j.type||j,typeof j=="string")j=new O(j,p);else if(j instanceof O)j.target=j.target||p;else{var ae=j;j=new O(U,p),te(j,ae)}ae=!0;let pe,Ue;if(E)for(Ue=E.length-1;Ue>=0;Ue--)pe=j.g=E[Ue],ae=Nt(pe,U,!0,j)&&ae;if(pe=j.g=p,ae=Nt(pe,U,!0,j)&&ae,ae=Nt(pe,U,!1,j)&&ae,E)for(Ue=0;Ue<E.length;Ue++)pe=j.g=E[Ue],ae=Nt(pe,U,!1,j)&&ae}ke.prototype.N=function(){if(ke.Z.N.call(this),this.i){var p=this.i;for(const j in p.g){const E=p.g[j];for(let U=0;U<E.length;U++)le(E[U]);delete p.g[j],p.h--}}this.G=null},ke.prototype.J=function(p,j,E,U){return this.i.add(String(p),j,!1,E,U)},ke.prototype.K=function(p,j,E,U){return this.i.add(String(p),j,!0,E,U)};function Nt(p,j,E,U){if(j=p.i.g[String(j)],!j)return!0;j=j.concat();let ae=!0;for(let pe=0;pe<j.length;++pe){const Ue=j[pe];if(Ue&&!Ue.da&&Ue.capture==E){const xt=Ue.listener,ss=Ue.ha||Ue.src;Ue.fa&&q(p.i,Ue),ae=xt.call(ss,U)!==!1&&ae}}return ae&&!U.defaultPrevented}function ye(p,j){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=h(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:c.setTimeout(p,j||0)}function J(p){p.g=ye(()=>{p.g=null,p.i&&(p.i=!1,J(p))},p.l);const j=p.h;p.h=null,p.m.apply(null,j)}class je extends ${constructor(j,E){super(),this.m=j,this.l=E,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jt(p){$.call(this),this.h=p,this.g={}}v(jt,$);var ft=[];function Wt(p){be(p.g,function(j,E){this.g.hasOwnProperty(E)&&Qe(j)},p),p.g={}}jt.prototype.N=function(){jt.Z.N.call(this),Wt(this)},jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ft=c.JSON.stringify,Ss=c.JSON.parse,as=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function Me(){}function fs(){}var os={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ws(){O.call(this,"d")}v(Ws,O);function ur(){O.call(this,"c")}v(ur,O);var Ds={},Ms=null;function Mn(){return Ms=Ms||new ke}Ds.Ia="serverreachability";function On(p){O.call(this,Ds.Ia,p)}v(On,O);function ps(p){const j=Mn();We(j,new On(j))}Ds.STAT_EVENT="statevent";function Os(p,j){O.call(this,Ds.STAT_EVENT,p),this.stat=j}v(Os,O);function $t(p){const j=Mn();We(j,new Os(j,p))}Ds.Ja="timingevent";function ks(p,j){O.call(this,Ds.Ja,p),this.size=j}v(ks,O);function ts(p,j){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},j)}function we(){this.g=!0}we.prototype.ua=function(){this.g=!1};function Je(p,j,E,U,ae,pe){p.info(function(){if(p.g)if(pe){var Ue="",xt=pe.split("&");for(let Bt=0;Bt<xt.length;Bt++){var ss=xt[Bt].split("=");if(ss.length>1){const xs=ss[0];ss=ss[1];const Un=xs.split("_");Ue=Un.length>=2&&Un[1]=="type"?Ue+(xs+"="+ss+"&"):Ue+(xs+"=redacted&")}}}else Ue=null;else Ue=pe;return"XMLHTTP REQ ("+U+") [attempt "+ae+"]: "+j+`
`+E+`
`+Ue})}function Ct(p,j,E,U,ae,pe,Ue){p.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ae+"]: "+j+`
`+E+`
`+pe+" "+Ue})}function Et(p,j,E,U){p.info(function(){return"XMLHTTP TEXT ("+j+"): "+Dt(p,E)+(U?" "+U:"")})}function It(p,j){p.info(function(){return"TIMEOUT: "+j})}we.prototype.info=function(){};function Dt(p,j){if(!p.g)return j;if(!j)return null;try{const pe=JSON.parse(j);if(pe){for(p=0;p<pe.length;p++)if(Array.isArray(pe[p])){var E=pe[p];if(!(E.length<2)){var U=E[1];if(Array.isArray(U)&&!(U.length<1)){var ae=U[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let Ue=1;Ue<U.length;Ue++)U[Ue]=""}}}}return Ft(pe)}catch{return j}}var Lt={NO_ERROR:0,TIMEOUT:8},Vt={},Gn;function un(){}v(un,Me),un.prototype.g=function(){return new XMLHttpRequest},Gn=new un;function hn(p){return encodeURIComponent(String(p))}function hr(p){var j=1;p=p.split(":");const E=[];for(;j>0&&p.length;)E.push(p.shift()),j--;return p.length&&E.push(p.join(":")),E}function Ls(p,j,E,U){this.j=p,this.i=j,this.l=E,this.S=U||1,this.V=new jt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vi}function vi(){this.i=null,this.g="",this.h=!1}var Wr={},Hr={};function en(p,j,E){p.M=1,p.A=gt(ne(j)),p.u=E,p.R=!0,Gr(p,null)}function Gr(p,j){p.F=Date.now(),Ln(p),p.B=ne(p.A);var E=p.B,U=p.S;Array.isArray(U)||(U=[String(U)]),bl(E.i,"t",U),p.C=0,E=p.j.L,p.h=new vi,p.g=Yc(p.j,E?j:null,!p.u),p.P>0&&(p.O=new je(h(p.Y,p,p.g),p.P)),j=p.V,E=p.g,U=p.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(ft[0]=ae.toString()),ae=ft);for(let pe=0;pe<ae.length;pe++){const Ue=tt(E,ae[pe],U||j.handleEvent,!1,j.h||j);if(!Ue)break;j.g[Ue.key]=Ue}j=p.J?Y(p.J):{},p.u?(p.v||(p.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,j)):(p.v="GET",p.g.ea(p.B,p.v,null,j)),ps(),Je(p.i,p.v,p.B,p.l,p.S,p.u)}Ls.prototype.ba=function(p){p=p.target;const j=this.O;j&&br(p)==3?j.j():this.Y(p)},Ls.prototype.Y=function(p){try{if(p==this.g)e:{const xt=br(this.g),ss=this.g.ya(),Bt=this.g.ca();if(!(xt<3)&&(xt!=3||this.g&&(this.h.h||this.g.la()||Kc(this.g)))){this.K||xt!=4||ss==7||(ss==8||Bt<=0?ps(3):ps(2)),G(this);var j=this.g.ca();this.X=j;var E=wi(this);if(this.o=j==200,Ct(this.i,this.v,this.B,this.l,this.S,xt,j),this.o){if(this.U&&!this.L){t:{if(this.g){var U,ae=this.g;if((U=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(U)){var pe=U;break t}}pe=null}if(p=pe)Et(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ge(this,p);else{this.o=!1,this.m=3,$t(12),re(this),Z(this);break e}}if(this.R){p=!0;let xs;for(;!this.K&&this.C<E.length;)if(xs=Kr(this,E),xs==Hr){xt==4&&(this.m=4,$t(14),p=!1),Et(this.i,this.l,null,"[Incomplete Response]");break}else if(xs==Wr){this.m=4,$t(15),Et(this.i,this.l,E,"[Invalid Chunk]"),p=!1;break}else Et(this.i,this.l,xs,null),ge(this,xs);if(fr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||E.length!=0||this.h.h||(this.m=1,$t(16),p=!1),this.o=this.o&&p,!p)Et(this.i,this.l,E,"[Invalid Chunked Response]"),re(this),Z(this);else if(E.length>0&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.aa&&!Ue.P&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),ga(Ue),Ue.P=!0,$t(11))}}else Et(this.i,this.l,E,null),ge(this,E);xt==4&&re(this),this.o&&!this.K&&(xt==4?uo(this.j,this):(this.o=!1,Ln(this)))}else wl(this.g),j==400&&E.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),re(this),Z(this)}}}catch{}finally{}};function wi(p){if(!fr(p))return p.g.la();const j=Kc(p.g);if(j==="")return"";let E="";const U=j.length,ae=br(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return re(p),Z(p),"";p.h.i=new c.TextDecoder}for(let pe=0;pe<U;pe++)p.h.h=!0,E+=p.h.i.decode(j[pe],{stream:!(ae&&pe==U-1)});return j.length=0,p.h.g+=E,p.C=0,p.h.g}function fr(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Kr(p,j){var E=p.C,U=j.indexOf(`
`,E);return U==-1?Hr:(E=Number(j.substring(E,U)),isNaN(E)?Wr:(U+=1,U+E>j.length?Hr:(j=j.slice(U,U+E),p.C=U+E,j)))}Ls.prototype.cancel=function(){this.K=!0,re(this)};function Ln(p){p.T=Date.now()+p.H,H(p,p.H)}function H(p,j){if(p.D!=null)throw Error("WatchDog timer not null");p.D=ts(h(p.aa,p),j)}function G(p){p.D&&(c.clearTimeout(p.D),p.D=null)}Ls.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(It(this.i,this.B),this.M!=2&&(ps(),$t(17)),re(this),this.m=2,Z(this)):H(this,this.T-p)};function Z(p){p.j.I==0||p.K||uo(p.j,p)}function re(p){G(p);var j=p.O;j&&typeof j.dispose=="function"&&j.dispose(),p.O=null,Wt(p.V),p.g&&(j=p.g,p.g=null,j.abort(),j.dispose())}function ge(p,j){try{var E=p.j;if(E.I!=0&&(E.g==p||Le(E.h,p))){if(!p.L&&Le(E.h,p)&&E.I==3){try{var U=E.Ba.g.parse(j)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ae=U;if(ae[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<p.F)co(E),Sn(E);else break e;Nr(E),$t(18)}}else E.xa=ae[1],0<E.xa-E.K&&ae[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=ts(h(E.Va,E),6e3));me(E.h)<=1&&E.ta&&(E.ta=void 0)}else kn(E,11)}else if((p.L||E.g==p)&&co(E),!A(j))for(ae=E.Ba.g.parse(j),j=0;j<ae.length;j++){let Bt=ae[j];const xs=Bt[0];if(!(xs<=E.K))if(E.K=xs,Bt=Bt[1],E.I==2)if(Bt[0]=="c"){E.M=Bt[1],E.ba=Bt[2];const Un=Bt[3];Un!=null&&(E.ka=Un,E.j.info("VER="+E.ka));const jr=Bt[4];jr!=null&&(E.za=jr,E.j.info("SVER="+E.za));const Sr=Bt[5];Sr!=null&&typeof Sr=="number"&&Sr>0&&(U=1.5*Sr,E.O=U,E.j.info("backChannelRequestTimeoutMs_="+U)),U=E;const kr=p.g;if(kr){const po=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(po){var pe=U.h;pe.g||po.indexOf("spdy")==-1&&po.indexOf("quic")==-1&&po.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&(St(pe,pe.h),pe.h=null))}if(U.G){const Sl=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;Sl&&(U.wa=Sl,He(U.J,U.G,Sl))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-p.F,E.j.info("Handshake RTT: "+E.T+"ms")),U=E;var Ue=p;if(U.na=jl(U,U.L?U.ba:null,U.W),Ue.L){lt(U.h,Ue);var xt=Ue,ss=U.O;ss&&(xt.H=ss),xt.D&&(G(xt),Ln(xt)),U.g=Ue}else Hs(U);E.i.length>0&&Qr(E)}else Bt[0]!="stop"&&Bt[0]!="close"||kn(E,7);else E.I==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?kn(E,7):oo(E):Bt[0]!="noop"&&E.l&&E.l.qa(Bt),E.A=0)}}ps(4)}catch{}}var Ke=class{constructor(p,j){this.g=p,this.map=j}};function ot(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ue(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function me(p){return p.h?1:p.g?p.g.size:0}function Le(p,j){return p.h?p.h==j:p.g?p.g.has(j):!1}function St(p,j){p.g?p.g.add(j):p.h=j}function lt(p,j){p.h&&p.h==j?p.h=null:p.g&&p.g.has(j)&&p.g.delete(j)}ot.prototype.cancel=function(){if(this.i=mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function mt(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let j=p.i;for(const E of p.g.values())j=j.concat(E.G);return j}return T(p.i)}var Jt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kt(p,j){if(p){p=p.split("&");for(let E=0;E<p.length;E++){const U=p[E].indexOf("=");let ae,pe=null;U>=0?(ae=p[E].substring(0,U),pe=p[E].substring(U+1)):ae=p[E],j(ae,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function R(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;p instanceof R?(this.l=p.l,ze(this,p.j),this.o=p.o,this.g=p.g,_e(this,p.u),this.h=p.h,Fe(this,vl(p.i)),this.m=p.m):p&&(j=String(p).match(Jt))?(this.l=!1,ze(this,j[1]||"",!0),this.o=Yt(j[2]||""),this.g=Yt(j[3]||"",!0),_e(this,j[4]),this.h=Yt(j[5]||"",!0),Fe(this,j[6]||"",!0),this.m=Yt(j[7]||"")):(this.l=!1,this.i=new _t(null,this.l))}R.prototype.toString=function(){const p=[];var j=this.j;j&&p.push(pr(j,Ni,!0),":");var E=this.g;return(E||j=="file")&&(p.push("//"),(j=this.o)&&p.push(pr(j,Ni,!0),"@"),p.push(hn(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&p.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&p.push("/"),p.push(pr(E,E.charAt(0)=="/"?fa:ml,!0))),(E=this.i.toString())&&p.push("?",E),(E=this.m)&&p.push("#",pr(E,gl)),p.join("")},R.prototype.resolve=function(p){const j=ne(this);let E=!!p.j;E?ze(j,p.j):E=!!p.o,E?j.o=p.o:E=!!p.g,E?j.g=p.g:E=p.u!=null;var U=p.h;if(E)_e(j,p.u);else if(E=!!p.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var ae=j.h.lastIndexOf("/");ae!=-1&&(U=j.h.slice(0,ae+1)+U)}if(ae=U,ae==".."||ae==".")U="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){U=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const pe=[];for(let Ue=0;Ue<ae.length;){const xt=ae[Ue++];xt=="."?U&&Ue==ae.length&&pe.push(""):xt==".."?((pe.length>1||pe.length==1&&pe[0]!="")&&pe.pop(),U&&Ue==ae.length&&pe.push("")):(pe.push(xt),U=!0)}U=pe.join("/")}else U=ae}return E?j.h=U:E=p.i.toString()!=="",E?Fe(j,vl(p.i)):E=!!p.m,E&&(j.m=p.m),j};function ne(p){return new R(p)}function ze(p,j,E){p.j=E?Yt(j,!0):j,p.j&&(p.j=p.j.replace(/:$/,""))}function _e(p,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);p.u=j}else p.u=null}function Fe(p,j,E){j instanceof _t?(p.i=j,ro(p.i,p.l)):(E||(j=pr(j,oh)),p.i=new _t(j,p.l))}function He(p,j,E){p.i.set(j,E)}function gt(p){return He(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Yt(p,j){return p?j?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function pr(p,j,E){return typeof p=="string"?(p=encodeURI(p).replace(j,Jr),E&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Jr(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Ni=/[#\/\?@]/g,ml=/[#\?:]/g,fa=/[#\?]/g,oh=/[#\?@]/g,gl=/#/g;function _t(p,j){this.h=this.g=null,this.i=p||null,this.j=!!j}function mr(p){p.g||(p.g=new Map,p.h=0,p.i&&kt(p.i,function(j,E){p.add(decodeURIComponent(j.replace(/\+/g," ")),E)}))}n=_t.prototype,n.add=function(p,j){mr(this),this.i=null,p=gr(this,p);let E=this.g.get(p);return E||this.g.set(p,E=[]),E.push(j),this.h+=1,this};function xl(p,j){mr(p),j=gr(p,j),p.g.has(j)&&(p.i=null,p.h-=p.g.get(j).length,p.g.delete(j))}function no(p,j){return mr(p),j=gr(p,j),p.g.has(j)}n.forEach=function(p,j){mr(this),this.g.forEach(function(E,U){E.forEach(function(ae){p.call(j,ae,U,this)},this)},this)};function yl(p,j){mr(p);let E=[];if(typeof j=="string")no(p,j)&&(E=E.concat(p.g.get(gr(p,j))));else for(p=Array.from(p.g.values()),j=0;j<p.length;j++)E=E.concat(p[j]);return E}n.set=function(p,j){return mr(this),this.i=null,p=gr(this,p),no(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[j]),this.h+=1,this},n.get=function(p,j){return p?(p=yl(this,p),p.length>0?String(p[0]):j):j};function bl(p,j,E){xl(p,j),E.length>0&&(p.i=null,p.g.set(gr(p,j),T(E)),p.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],j=Array.from(this.g.keys());for(let U=0;U<j.length;U++){var E=j[U];const ae=hn(E);E=yl(this,E);for(let pe=0;pe<E.length;pe++){let Ue=ae;E[pe]!==""&&(Ue+="="+hn(E[pe])),p.push(Ue)}}return this.i=p.join("&")};function vl(p){const j=new _t;return j.i=p.i,p.g&&(j.g=new Map(p.g),j.h=p.h),j}function gr(p,j){return j=String(j),p.j&&(j=j.toLowerCase()),j}function ro(p,j){j&&!p.j&&(mr(p),p.i=null,p.g.forEach(function(E,U){const ae=U.toLowerCase();U!=ae&&(xl(this,U),bl(this,ae,E))},p)),p.j=j}function xr(p,j){const E=new we;if(c.Image){const U=new Image;U.onload=y(Us,E,"TestLoadImage: loaded",!0,j,U),U.onerror=y(Us,E,"TestLoadImage: error",!1,j,U),U.onabort=y(Us,E,"TestLoadImage: abort",!1,j,U),U.ontimeout=y(Us,E,"TestLoadImage: timeout",!1,j,U),c.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=p}else j(!1)}function yr(p,j){const E=new we,U=new AbortController,ae=setTimeout(()=>{U.abort(),Us(E,"TestPingServer: timeout",!1,j)},1e4);fetch(p,{signal:U.signal}).then(pe=>{clearTimeout(ae),pe.ok?Us(E,"TestPingServer: ok",!0,j):Us(E,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(ae),Us(E,"TestPingServer: error",!1,j)})}function Us(p,j,E,U,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),U(E)}catch{}}function pa(){this.g=new as}function Yr(p){this.i=p.Sb||null,this.h=p.ab||!1}v(Yr,Me),Yr.prototype.g=function(){return new jn(this.i,this.h)};function jn(p,j){ke.call(this),this.H=p,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(jn,ke),n=jn.prototype,n.open=function(p,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=j,this.readyState=1,Kn(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(j.body=p),(this.H||c).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ji(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Kn(this)),this.g&&(this.readyState=3,Kn(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wc(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wc(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var j=p.value?p.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!p.done}))&&(this.response=this.responseText+=j)}p.done?ji(this):Kn(this),this.readyState==3&&Wc(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,ji(this))},n.Na=function(p){this.g&&(this.response=p,ji(this))},n.ga=function(){this.g&&ji(this)};function ji(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Kn(p)}n.setRequestHeader=function(p,j){this.A.append(p,j)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],j=this.h.entries();for(var E=j.next();!E.done;)E=E.value,p.push(E[0]+": "+E[1]),E=j.next();return p.join(`\r
`)};function Kn(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Hc(p){let j="";return be(p,function(E,U){j+=U,j+=":",j+=E,j+=`\r
`}),j}function io(p,j,E){e:{for(U in E){var U=!1;break e}U=!0}U||(E=Hc(E),typeof p=="string"?E!=null&&hn(E):He(p,j,E))}function Ht(p){ke.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Ht,ke);var Gc=/^https?$/i,lh=["POST","PUT"];n=Ht.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,j,E,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);j=j?j.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gn.g(),this.g.onreadystatechange=N(h(this.Ca,this));try{this.B=!0,this.g.open(j,String(p),!0),this.B=!1}catch(pe){Si(this,pe);return}if(p=E||"",E=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ae in U)E.set(ae,U[ae]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const pe of U.keys())E.set(pe,U.get(pe));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(E.keys()).find(pe=>pe.toLowerCase()=="content-type"),ae=c.FormData&&p instanceof c.FormData,!(Array.prototype.indexOf.call(lh,j,void 0)>=0)||U||ae||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pe,Ue]of E)this.g.setRequestHeader(pe,Ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(pe){Si(this,pe)}};function Si(p,j){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=j,p.o=5,ki(p),Xr(p)}function ki(p){p.A||(p.A=!0,We(p,"complete"),We(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,We(this,"complete"),We(this,"abort"),Xr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xr(this,!0)),Ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Zr(this):this.Xa())},n.Xa=function(){Zr(this)};function Zr(p){if(p.h&&typeof o<"u"){if(p.v&&br(p)==4)setTimeout(p.Ca.bind(p),0);else if(We(p,"readystatechange"),br(p)==4){p.h=!1;try{const pe=p.ca();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var E;if(!(E=j)){var U;if(U=pe===0){let Ue=String(p.D).match(Jt)[1]||null;!Ue&&c.self&&c.self.location&&(Ue=c.self.location.protocol.slice(0,-1)),U=!Gc.test(Ue?Ue.toLowerCase():"")}E=U}if(E)We(p,"complete"),We(p,"success");else{p.o=6;try{var ae=br(p)>2?p.g.statusText:""}catch{ae=""}p.l=ae+" ["+p.ca()+"]",ki(p)}}finally{Xr(p)}}}}function Xr(p,j){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const E=p.g;p.g=null,j||We(p,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function br(p){return p.g?p.g.readyState:0}n.ca=function(){try{return br(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var j=this.g.responseText;return p&&j.indexOf(p)==0&&(j=j.substring(p.length)),Ss(j)}};function Kc(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function wl(p){const j={};p=(p.g&&br(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<p.length;U++){if(A(p[U]))continue;var E=hr(p[U]);const ae=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const pe=j[ae]||[];j[ae]=pe,pe.push(E)}ve(j,function(U){return U.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vr(p,j,E){return E&&E.internalChannelParams&&E.internalChannelParams[p]||j}function ao(p){this.za=0,this.i=[],this.j=new we,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vr("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vr("baseRetryDelayMs",5e3,p),this.Za=vr("retryDelaySeedMs",1e4,p),this.Ta=vr("forwardChannelMaxRetries",2,p),this.va=vr("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new ot(p&&p.concurrentRequestLimit),this.Ba=new pa,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ao.prototype,n.ka=8,n.I=1,n.connect=function(p,j,E,U){$t(0),this.W=p,this.H=j||{},E&&U!==void 0&&(this.H.OSID=E,this.H.OAID=U),this.F=this.X,this.J=jl(this,null,this.W),Qr(this)};function oo(p){if(lo(p),p.I==3){var j=p.V++,E=ne(p.J);if(He(E,"SID",p.M),He(E,"RID",j),He(E,"TYPE","terminate"),wr(p,E),j=new Ls(p,p.j,j),j.M=2,j.A=gt(ne(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(j.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=j.A,E=!0),E||(j.g=Yc(j.j,null),j.g.ea(j.A)),j.F=Date.now(),Ln(j)}xa(p)}function Sn(p){p.g&&(ga(p),p.g.cancel(),p.g=null)}function lo(p){Sn(p),p.v&&(c.clearTimeout(p.v),p.v=null),co(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&c.clearTimeout(p.m),p.m=null)}function Qr(p){if(!ue(p.h)&&!p.m){p.m=!0;var j=p.Ea;ee||C(),W||(ee(),W=!0),D.add(j,p),p.D=0}}function Jc(p,j){return me(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=j.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=ts(h(p.Ea,p,j),ho(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const ae=new Ls(this,this.j,p);let pe=this.o;if(this.U&&(pe?(pe=Y(pe),te(pe,this.U)):pe=this.U),this.u!==null||this.R||(ae.J=pe,pe=null),this.S)e:{for(var j=0,E=0;E<this.i.length;E++){t:{var U=this.i[E];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(j+=U,j>4096){j=E;break e}if(j===4096||E===this.i.length-1){j=E+1;break e}}j=1e3}else j=1e3;j=Nl(this,ae,j),E=ne(this.J),He(E,"RID",p),He(E,"CVER",22),this.G&&He(E,"X-HTTP-Session-Id",this.G),wr(this,E),pe&&(this.R?j="headers="+hn(Hc(pe))+"&"+j:this.u&&io(E,this.u,pe)),St(this.h,ae),this.Ra&&He(E,"TYPE","init"),this.S?(He(E,"$req",j),He(E,"SID","null"),ae.U=!0,en(ae,E,null)):en(ae,E,j),this.I=2}}else this.I==3&&(p?ma(this,p):this.i.length==0||ue(this.h)||ma(this))};function ma(p,j){var E;j?E=j.l:E=p.V++;const U=ne(p.J);He(U,"SID",p.M),He(U,"RID",E),He(U,"AID",p.K),wr(p,U),p.u&&p.o&&io(U,p.u,p.o),E=new Ls(p,p.j,E,p.D+1),p.u===null&&(E.J=p.o),j&&(p.i=j.G.concat(p.i)),j=Nl(p,E,1e3),E.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),St(p.h,E),en(E,U,j)}function wr(p,j){p.H&&be(p.H,function(E,U){He(j,U,E)}),p.l&&be({},function(E,U){He(j,U,E)})}function Nl(p,j,E){E=Math.min(p.i.length,E);const U=p.l?h(p.l.Ka,p.l,p):null;e:{var ae=p.i;let xt=-1;for(;;){const ss=["count="+E];xt==-1?E>0?(xt=ae[0].g,ss.push("ofs="+xt)):xt=0:ss.push("ofs="+xt);let Bt=!0;for(let xs=0;xs<E;xs++){var pe=ae[xs].g;const Un=ae[xs].map;if(pe-=xt,pe<0)xt=Math.max(0,ae[xs].g-100),Bt=!1;else try{pe="req"+pe+"_"||"";try{var Ue=Un instanceof Map?Un:Object.entries(Un);for(const[jr,Sr]of Ue){let kr=Sr;u(Sr)&&(kr=Ft(Sr)),ss.push(pe+jr+"="+encodeURIComponent(kr))}}catch(jr){throw ss.push(pe+"type="+encodeURIComponent("_badmap")),jr}}catch{U&&U(Un)}}if(Bt){Ue=ss.join("&");break e}}Ue=void 0}return p=p.i.splice(0,E),j.G=p,Ue}function Hs(p){if(!p.g&&!p.v){p.Y=1;var j=p.Da;ee||C(),W||(ee(),W=!0),D.add(j,p),p.A=0}}function Nr(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=ts(h(p.Da,p),ho(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,_i(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=ts(h(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),Sn(this),_i(this))};function ga(p){p.B!=null&&(c.clearTimeout(p.B),p.B=null)}function _i(p){p.g=new Ls(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var j=ne(p.na);He(j,"RID","rpc"),He(j,"SID",p.M),He(j,"AID",p.K),He(j,"CI",p.F?"0":"1"),!p.F&&p.ia&&He(j,"TO",p.ia),He(j,"TYPE","xmlhttp"),wr(p,j),p.u&&p.o&&io(j,p.u,p.o),p.O&&(p.g.H=p.O);var E=p.g;p=p.ba,E.M=1,E.A=gt(ne(j)),E.u=null,E.R=!0,Gr(E,p)}n.Va=function(){this.C!=null&&(this.C=null,Sn(this),Nr(this),$t(19))};function co(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function uo(p,j){var E=null;if(p.g==j){co(p),ga(p),p.g=null;var U=2}else if(Le(p.h,j))E=j.G,lt(p.h,j),U=1;else return;if(p.I!=0){if(j.o)if(U==1){E=j.u?j.u.length:0,j=Date.now()-j.F;var ae=p.D;U=Mn(),We(U,new ks(U,E)),Qr(p)}else Hs(p);else if(ae=j.m,ae==3||ae==0&&j.X>0||!(U==1&&Jc(p,j)||U==2&&Nr(p)))switch(E&&E.length>0&&(j=p.h,j.i=j.i.concat(E)),ae){case 1:kn(p,5);break;case 4:kn(p,10);break;case 3:kn(p,6);break;default:kn(p,2)}}}function ho(p,j){let E=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(E*=2),E*j}function kn(p,j){if(p.j.info("Error code "+j),j==2){var E=h(p.bb,p),U=p.Ua;const ae=!U;U=new R(U||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ze(U,"https"),gt(U),ae?xr(U.toString(),E):yr(U.toString(),E)}else $t(2);p.I=0,p.l&&p.l.pa(j),xa(p),lo(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function xa(p){if(p.I=0,p.ja=[],p.l){const j=mt(p.h);(j.length!=0||p.i.length!=0)&&(k(p.ja,j),k(p.ja,p.i),p.h.i.length=0,T(p.i),p.i.length=0),p.l.oa()}}function jl(p,j,E){var U=E instanceof R?ne(E):new R(E);if(U.g!="")j&&(U.g=j+"."+U.g),_e(U,U.u);else{var ae=c.location;U=ae.protocol,j=j?j+"."+ae.hostname:ae.hostname,ae=+ae.port;const pe=new R(null);U&&ze(pe,U),j&&(pe.g=j),ae&&_e(pe,ae),E&&(pe.h=E),U=pe}return E=p.G,j=p.wa,E&&j&&He(U,E,j),He(U,"VER",p.ka),wr(p,U),U}function Yc(p,j,E){if(j&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=p.Aa&&!p.ma?new Ht(new Yr({ab:E})):new Ht(p.ma),j.Fa(p.L),j}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zc(){}n=Zc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function fn(p,j){ke.call(this),this.g=new ao(j),this.l=p,this.h=j&&j.messageUrlParams||null,p=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(p?p["X-WebChannel-Content-Type"]=j.messageContentType:p={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(p?p["X-WebChannel-Client-Profile"]=j.sa:p={"X-WebChannel-Client-Profile":j.sa}),this.g.U=p,(p=j&&j.Qb)&&!A(p)&&(this.g.u=p),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!A(j)&&(this.g.G=j,p=this.h,p!==null&&j in p&&(p=this.h,j in p&&delete p[j])),this.j=new Ci(this)}v(fn,ke),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){oo(this.g)},fn.prototype.o=function(p){var j=this.g;if(typeof p=="string"){var E={};E.__data__=p,p=E}else this.v&&(E={},E.__data__=Ft(p),p=E);j.i.push(new Ke(j.Ya++,p)),j.I==3&&Qr(j)},fn.prototype.N=function(){this.g.l=null,delete this.j,oo(this.g),delete this.g,fn.Z.N.call(this)};function fo(p){Ws.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var j=p.__sm__;if(j){e:{for(const E in j){p=E;break e}p=void 0}(this.i=p)&&(p=this.i,j=j!==null&&p in j?j[p]:void 0),this.data=j}else this.data=p}v(fo,Ws);function Xc(){ur.call(this),this.status=1}v(Xc,ur);function Ci(p){this.g=p}v(Ci,Zc),Ci.prototype.ra=function(){We(this.g,"a")},Ci.prototype.qa=function(p){We(this.g,new fo(p))},Ci.prototype.pa=function(p){We(this.g,new Xc)},Ci.prototype.oa=function(){We(this.g,"b")},fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Lt.NO_ERROR=0,Lt.TIMEOUT=8,Lt.HTTP_ERROR=6,Vt.COMPLETE="complete",fs.EventType=os,os.OPEN="a",os.CLOSE="b",os.ERROR="c",os.MESSAGE="d",ke.prototype.listen=ke.prototype.J,Ht.prototype.listenOnce=Ht.prototype.K,Ht.prototype.getLastError=Ht.prototype.Ha,Ht.prototype.getLastErrorCode=Ht.prototype.ya,Ht.prototype.getStatus=Ht.prototype.ca,Ht.prototype.getResponseJson=Ht.prototype.La,Ht.prototype.getResponseText=Ht.prototype.la,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Fa}).apply(typeof Yd<"u"?Yd:typeof self<"u"?self:typeof window<"u"?window:{});const Xx="@firebase/firestore",Qx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new Ku("@firebase/firestore");function ar(n,...e){if(tl.logLevel<=zt.DEBUG){const s=e.map(xm);tl.debug(`Firestore (${Lc}): ${n}`,...s)}}function vw(n,...e){if(tl.logLevel<=zt.ERROR){const s=e.map(xm);tl.error(`Firestore (${Lc}): ${n}`,...s)}}function cE(n,...e){if(tl.logLevel<=zt.WARN){const s=e.map(xm);tl.warn(`Firestore (${Lc}): ${n}`,...s)}}function xm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(n,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,ww(n,r,s)}function ww(n,e,s){let r=`FIRESTORE (${Lc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw vw(r),new Error(r)}function ec(n,e,s,r){let i="Unexpected state";typeof s=="string"?i=s:r=s,n||ww(e,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class At extends Hn{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(nn.UNAUTHENTICATED)))}shutdown(){}}class uE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class hE{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){ec(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,s(f)):Promise.resolve();let o=new tc;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new tc,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},u=f=>{ar("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(ar("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new tc)}}),0),c()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(ar("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ec(typeof r.accessToken=="string",31837,{l:r}),new Nw(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ec(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class fE{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pE{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new fE(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ey{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mE{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){ec(this.o===void 0,3512);const r=o=>{o.error!=null&&ar("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ar("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?s(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{ar("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ar("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ey(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(ec(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new ey(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<n;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=gE(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<s&&(r+=e.charAt(i[o]%62))}return r}}function na(n,e){return n<e?-1:n>e?1:0}function yE(n,e){const s=Math.min(n.length,e.length);for(let r=0;r<s;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return Xf(i)===Xf(o)?na(i,o):Xf(i)?1:-1}return na(n.length,e.length)}const bE=55296,vE=57343;function Xf(n){const e=n.charCodeAt(0);return e>=bE&&e<=vE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="__name__";class Ar{constructor(e,s,r){s===void 0?s=0:s>e.length&&yc(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&yc(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return Ar.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Ar?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let i=0;i<r;i++){const o=Ar.compareSegments(e.get(i),s.get(i));if(o!==0)return o}return na(e.length,s.length)}static compareSegments(e,s){const r=Ar.isNumericId(e),i=Ar.isNumericId(s);return r&&!i?-1:!r&&i?1:r&&i?Ar.extractNumericId(e).compare(Ar.extractNumericId(s)):yE(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gm.fromString(e.substring(4,e.length-2))}}class rr extends Ar{construct(e,s,r){return new rr(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new At(Pt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((i=>i.length>0)))}return new rr(s)}static emptyPath(){return new rr([])}}const wE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Oa extends Ar{construct(e,s,r){return new Oa(e,s,r)}static isValidIdentifier(e){return wE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Oa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ty}static keyField(){return new Oa([ty])}static fromServerFormat(e){const s=[];let r="",i=0;const o=()=>{if(r.length===0)throw new At(Pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new At(Pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new At(Pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(r+=u,i++):(o(),i++)}if(o(),c)throw new At(Pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Oa(s)}static emptyPath(){return new Oa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.path=e}static fromPath(e){return new Fa(rr.fromString(e))}static fromName(e){return new Fa(rr.fromString(e).popFirst(5))}static empty(){return new Fa(rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return rr.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fa(new rr(e.slice()))}}function NE(n,e,s,r){if(e===!0&&r===!0)throw new At(Pt.INVALID_ARGUMENT,`${n} and ${s} cannot be used together.`)}function jE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function SE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":yc(12329,{type:typeof n})}function kE(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new At(Pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=SE(n);throw new At(Pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(n,e){const s={typeString:n};return e&&(s.value=e),s}function Uc(n,e){if(!jE(n))throw new At(Pt.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){s=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){s=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){s=`Expected '${r}' field to equal '${o.value}'`;break}}if(s)throw new At(Pt.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=-62135596800,ny=1e6;class Ir{static now(){return Ir.fromMillis(Date.now())}static fromDate(e){return Ir.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*ny);return new Ir(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new At(Pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new At(Pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<sy)throw new At(Pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new At(Pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ny}_compareTo(e){return this.seconds===e.seconds?na(this.nanoseconds,e.nanoseconds):na(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ir._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Uc(e,Ir._jsonSchema))return new Ir(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-sy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ir._jsonSchemaVersion="firestore/timestamp/1.0",Ir._jsonSchema={type:Ns("string",Ir._jsonSchemaVersion),seconds:Ns("number"),nanoseconds:Ns("number")};function _E(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new CE("Invalid base64 string: "+o):o}})(e);return new Ka(s)}static fromUint8Array(e){const s=(function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o})(e);return new Ka(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let i=0;i<s.length;i++)r[i]=s.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return na(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ka.EMPTY_BYTE_STRING=new Ka("");const ry="(default)";class ju{constructor(e,s){this.projectId=e,this.database=s||ry}static empty(){return new ju("","")}get isDefaultDatabase(){return this.database===ry}isEqual(e){return e instanceof ju&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,s=null,r=[],i=[],o=null,c="F",u=null,f=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TE(n){return new EE(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iy,Tt;(Tt=iy||(iy={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new gm([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=1048576;function Qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,s,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=s,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,s-r);i>0&&ar("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,s,r,i,o){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new tc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,i,o){const c=Date.now()+r,u=new ym(e,s,c,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new At(Pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var ay,oy;(oy=ay||(ay={})).Ma="default",oy.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="firestore.googleapis.com",cy=!0;class dy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new At(Pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jw,this.ssl=cy}else this.host=e.host,this.ssl=e.ssl??cy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AE)throw new At(Pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new At(Pt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new At(Pt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new At(Pt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sw{constructor(e,s,r,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new At(Pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new At(Pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dE;switch(r.type){case"firstParty":return new pE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new At(Pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=ly.get(s);r&&(ar("ComponentProvider","Removing Datastore"),ly.delete(s),r.terminate())})(this),Promise.resolve()}}function DE(n,e,s,r={}){var h;n=kE(n,Sw);const i=to(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${s}`;i&&(Hu(`https://${u}`),Gu("Firestore",!0)),o.host!==jw&&o.host!==u&&cE("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:u,ssl:i,emulatorOptions:r};if(!sa(f,c)&&(n._setSettings(f),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=nn.MOCK_USER;else{y=hw(r.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const N=r.mockUserToken.sub||r.mockUserToken.user_id;if(!N)throw new At(Pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new nn(N)}n._authCredentials=new uE(new Nw(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bm(this.firestore,e,this._query)}}class Mr{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mr(this.firestore,e,this._key)}toJSON(){return{type:Mr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,r){if(Uc(s,Mr._jsonSchema))return new Mr(e,r||null,new Fa(rr.fromString(s.referencePath)))}}Mr._jsonSchemaVersion="firestore/documentReference/1.0",Mr._jsonSchema={type:Ns("string",Mr._jsonSchemaVersion),referencePath:Ns("string")};class vm extends bm{constructor(e,s,r){super(e,s,TE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mr(this.firestore,null,new Fa(e))}withConverter(e){return new vm(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="AsyncQueue";class hy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new IE(this,"async_queue_retry"),this._c=()=>{const r=Qf();r&&ar(uy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const s=Qf();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=Qf();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new tc;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_E(e))throw e;ar(uy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,vw("INTERNAL UNHANDLED ERROR: ",fy(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(e,s,r){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const i=ym.createAndSchedule(this,e,s,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&yc(47125,{Pc:fy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function fy(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ME extends Sw{constructor(e,s,r,i){super(e,s,r,i),this.type="firestore",this._queue=new hy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hy(e),this._firestoreClient=void 0,await e}}}function OE(n,e){const s=typeof n=="object"?n:ll(),r=typeof n=="string"?n:e,i=Br(s,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=hm("firestore");o&&DE(i,...o)}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ui(Ka.fromBase64String(e))}catch(s){throw new At(Pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new ui(Ka.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ui._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Uc(e,ui._jsonSchema))return ui.fromBase64String(e.bytes)}}ui._jsonSchemaVersion="firestore/bytes/1.0",ui._jsonSchema={type:Ns("string",ui._jsonSchemaVersion),bytes:Ns("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new At(Pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new At(Pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new At(Pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return na(this._lat,e._lat)||na(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qa._jsonSchemaVersion}}static fromJSON(e){if(Uc(e,qa._jsonSchema))return new qa(e.latitude,e.longitude)}}qa._jsonSchemaVersion="firestore/geoPoint/1.0",qa._jsonSchema={type:Ns("string",qa._jsonSchemaVersion),latitude:Ns("number"),longitude:Ns("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Wa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Uc(e,Wa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new Wa(e.vectorValues);throw new At(Pt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wa._jsonSchemaVersion="firestore/vectorValue/1.0",Wa._jsonSchema={type:Ns("string",Wa._jsonSchemaVersion),vectorValues:Ns("object")};const LE=new RegExp("[~\\*/\\[\\]]");function UE(n,e,s){if(e.search(LE)>=0)throw py(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new kw(...e.split("."))._internalPath}catch{throw py(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function py(n,e,s,r,i){let o=`Function ${e}() called with invalid data`;o+=". ";let c="";return new At(Pt.INVALID_ARGUMENT,o+n+c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,s,r,i,o){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Cw("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class zE extends _w{data(){return super.data()}}function Cw(n,e){return typeof e=="string"?UE(n,e):e instanceof kw?e._internalPath:e._delegate._internalPath}class Zd{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yo extends _w{constructor(e,s,r,i,o,c){super(e,s,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(Cw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new At(Pt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=Yo._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}Yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yo._jsonSchema={type:Ns("string",Yo._jsonSchemaVersion),bundleSource:Ns("string","DocumentSnapshot"),bundleName:Ns("string"),bundle:Ns("string")};class au extends Yo{data(e={}){return super.data(e)}}class sc{constructor(e,s,r,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new Zd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new au(this._firestore,this._userDataWriter,r.key,r,new Zd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new At(Pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((u=>{const f=new au(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Zd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const f=new au(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Zd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,y=-1;return u.type!==0&&(h=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),y=c.indexOf(u.doc.key)),{type:FE(u.type),doc:f,oldIndex:h,newIndex:y}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new At(Pt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(s.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function FE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yc(61501,{type:n})}}sc._jsonSchemaVersion="firestore/querySnapshot/1.0",sc._jsonSchema={type:Ns("string",sc._jsonSchemaVersion),bundleSource:Ns("string","QuerySnapshot"),bundleName:Ns("string"),bundle:Ns("string")};(function(e,s=!0){(function(i){Lc=i})(so),Nn(new ln("firestore",((r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),u=new ME(new hE(r.getProvider("auth-internal")),new mE(c,r.getProvider("app-check-internal")),(function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new At(Pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ju(h.options.projectId,y)})(c,i),c);return o={useFetchStreams:s,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Rs(Xx,Qx,e),Rs(Xx,Qx,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="firebasestorage.googleapis.com",$E="storageBucket",VE=120*1e3,BE=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Hn{constructor(e,s,r=0){super(ep(e),`Firebase Storage: ${s} (${ep(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ep(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zr||(zr={}));function ep(n){return"storage/"+n}function qE(){const n="An unknown error occurred, please check the error payload for server response.";return new qr(zr.UNKNOWN,n)}function WE(){return new qr(zr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HE(){return new qr(zr.CANCELED,"User canceled the upload/download.")}function GE(n){return new qr(zr.INVALID_URL,"Invalid URL '"+n+"'.")}function KE(n){return new qr(zr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function my(n){return new qr(zr.INVALID_ARGUMENT,n)}function Tw(){return new qr(zr.APP_DELETED,"The Firebase app was deleted.")}function JE(n){return new qr(zr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let r;try{r=or.makeFromUrl(e,s)}catch{return new or(e,"")}if(r.path==="")return r;throw KE(e)}static makeFromUrl(e,s){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+i+c,"i"),f={bucket:1,path:3};function h(K){K.path_=decodeURIComponent(K.path)}const y="v[A-Za-z0-9_]+",v=s.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",T=new RegExp(`^https?://${v}/${y}/b/${i}/o${N}`,"i"),k={bucket:1,path:3},_=s===Ew?"(?:storage.googleapis.com|storage.cloud.google.com)":s,P="([^?#]*)",L=new RegExp(`^https?://${_}/${i}/${P}`,"i"),F=[{regex:u,indices:f,postModify:o},{regex:T,indices:k,postModify:h},{regex:L,indices:{bucket:1,path:2},postModify:h}];for(let K=0;K<F.length;K++){const ee=F[K],W=ee.regex.exec(e);if(W){const D=W[ee.indices.bucket];let C=W[ee.indices.path];C||(C=""),r=new or(D,C),ee.postModify(r);break}}if(r==null)throw GE(e);return r}}class YE{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n,e,s){let r=1,i=null,o=null,c=!1,u=0;function f(){return u===2}let h=!1;function y(...P){h||(h=!0,e.apply(null,P))}function v(P){i=setTimeout(()=>{i=null,n(T,f())},P)}function N(){o&&clearTimeout(o)}function T(P,...L){if(h){N();return}if(P){N(),y.call(null,P,...L);return}if(f()||c){N(),y.call(null,P,...L);return}r<64&&(r*=2);let F;u===1?(u=2,F=0):F=(r+Math.random())*1e3,v(F)}let k=!1;function _(P){k||(k=!0,N(),!h&&(i!==null?(P||(u=2),clearTimeout(i),v(0)):P||(u=1)))}return v(0),o=setTimeout(()=>{c=!0,_(!0)},s),_}function XE(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n){return n!==void 0}function gy(n,e,s,r){if(r<e)throw my(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>s)throw my(`Invalid value for '${n}'. Expected ${s} or less.`)}function eT(n){const e=encodeURIComponent;let s="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);s=s+i+"&"}return s=s.slice(0,-1),s}var Su;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Su||(Su={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(n,e){const s=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return s||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,s,r,i,o,c,u,f,h,y,v,N=!0,T=!1){this.url_=e,this.method_=s,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=y,this.connectionFactory_=v,this.retry=N,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,_)=>{this.resolve_=k,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Xd(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const f=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===Su.NO_ERROR,f=o.getStatus();if(!u||tT(f,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===Su.ABORT;r(!1,new Xd(!1,null,y));return}const h=this.successCodes_.indexOf(f)!==-1;r(!0,new Xd(h,o))})},s=(r,i)=>{const o=this.resolve_,c=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(u,u.getResponse());QE(f)?o(f):o()}catch(f){c(f)}else if(u!==null){const f=qE();f.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,f)):c(f)}else if(i.canceled){const f=this.appDelete_?Tw():HE();c(f)}else{const f=WE();c(f)}};this.canceled_?s(!1,new Xd(!1,null,!0)):this.backoffId_=ZE(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XE(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xd{constructor(e,s,r){this.wasSuccessCode=e,this.connection=s,this.canceled=!!r}}function nT(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function rT(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iT(n,e){e&&(n["X-Firebase-GMPID"]=e)}function aT(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function oT(n,e,s,r,i,o,c=!0,u=!1){const f=eT(n.urlParams),h=n.url+f,y=Object.assign({},n.headers);return iT(y,e),nT(y,s),rT(y,o),aT(y,r),new sT(h,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function cT(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,s){this._service=e,s instanceof or?this._location=s:this._location=or.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new ku(e,s)}get root(){const e=new or(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cT(this._location.path)}get storage(){return this._service}get parent(){const e=lT(this._location.path);if(e===null)return null;const s=new or(this._location.bucket,e);return new ku(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw JE(e)}}function xy(n,e){const s=e==null?void 0:e[$E];return s==null?null:or.makeFromBucketSpec(s,n)}function dT(n,e,s,r={}){n.host=`${e}:${s}`;const i=to(e);i&&(Hu(`https://${n.host}/b`),Gu("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:hw(o,n.app.options.projectId))}class uT{constructor(e,s,r,i,o,c=!1){this.app=e,this._authProvider=s,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=Ew,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VE,this._maxUploadRetryTime=BE,this._requests=new Set,i!=null?this._bucket=or.makeFromBucketSpec(i,this._host):this._bucket=xy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=or.makeFromBucketSpec(this._url,e):this._bucket=xy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=await e.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ku(this,e)}_makeRequest(e,s,r,i,o=!0){if(this._deleted)return new YE(Tw());{const c=oT(e,this._appId,r,i,s,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,s){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,r,i).getPromise()}}const yy="@firebase/storage",by="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="storage";function hT(n=ll(),e){n=dn(n);const r=Br(n,Pw).getImmediate({identifier:e}),i=hm("storage");return i&&fT(r,...i),r}function fT(n,e,s,r={}){dT(n,e,s,r)}function pT(n,{instanceIdentifier:e}){const s=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new uT(s,r,i,e,so)}function mT(){Nn(new ln(Pw,pT,"PUBLIC").setMultipleInstances(!0)),Rs(yy,by,""),Rs(yy,by,"esm2020")}mT();function Aw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gT=Aw,Iw=new la("auth","Firebase",Aw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new Ku("@firebase/auth");function xT(n,...e){_u.logLevel<=zt.WARN&&_u.warn(`Auth (${so}): ${n}`,...e)}function ou(n,...e){_u.logLevel<=zt.ERROR&&_u.error(`Auth (${so}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(n,...e){throw wm(n,...e)}function Lr(n,...e){return wm(n,...e)}function Rw(n,e,s){const r={...gT(),[e]:s};return new la("auth","Firebase",r).create(e,{appName:n.name})}function Ha(n){return Rw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wm(n,...e){if(typeof n!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(s,...r)}return Iw.create(n,...e)}function ut(n,e,...s){if(!n)throw wm(e,...s)}function hi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ou(e),new Error(e)}function yi(n,e){n||hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function yT(){return vy()==="http:"||vy()==="https:"}function vy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yT()||fw()||"connection"in navigator)?navigator.onLine:!0}function vT(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,s){this.shortDelay=e,this.longDelay=s,yi(s>e,"Short delay should be less than long delay!"),this.isMobile=z_()||$_()}get(){return bT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(n,e){yi(n.emulator,"Emulator should always be set here");const{url:s}=n.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jT=new zc(3e4,6e4);function jm(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function cl(n,e,s,r,i={}){return Mw(n,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const u=Oc({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:f,...o};return F_()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&to(n.emulatorConfig.host)&&(h.credentials="include"),Dw.fetch()(await Ow(n,n.config.apiHost,s,u),h)})}async function Mw(n,e,s){n._canInitEmulator=!1;const r={...wT,...e};try{const i=new kT(n),o=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Qd(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[f,h]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qd(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Qd(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw Qd(n,"user-disabled",c);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Rw(n,y,h);xi(n,y)}}catch(i){if(i instanceof Hn)throw i;xi(n,"network-request-failed",{message:String(i)})}}async function ST(n,e,s,r,i={}){const o=await cl(n,e,s,r,i);return"mfaPendingCredential"in o&&xi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function Ow(n,e,s,r){const i=`${e}${s}?${r}`,o=n,c=o.config.emulator?Nm(n.config,i):`${n.config.apiScheme}://${i}`;return NT.includes(s)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}class kT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(Lr(this.auth,"network-request-failed")),jT.get())})}}function Qd(n,e,s){const r={appName:n.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const i=Lr(n,e,r);return i.customData._tokenResponse=s,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(n,e){return cl(n,"POST","/v1/accounts:delete",e)}async function Cu(n,e){return cl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CT(n,e=!1){const s=dn(n),r=await s.getIdToken(e),i=Sm(r);ut(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:nc(tp(i.auth_time)),issuedAtTime:nc(tp(i.iat)),expirationTime:nc(tp(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function tp(n){return Number(n)*1e3}function Sm(n){const[e,s,r]=n.split(".");if(e===void 0||s===void 0||r===void 0)return ou("JWT malformed, contained fewer than 3 sections"),null;try{const i=lw(s);return i?JSON.parse(i):(ou("Failed to decode base64 JWT payload"),null)}catch(i){return ou("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function wy(n){const e=Sm(n);return ut(e,"internal-error"),ut(typeof e.exp<"u","internal-error"),ut(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(n,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Hn&&ET(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function ET({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=nc(this.lastLoginAt),this.creationTime=nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(n){var v;const e=n.auth,s=await n.getIdToken(),r=await bc(n,Cu(e,{idToken:s}));ut(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=(v=i.providerUserInfo)!=null&&v.length?Lw(i.providerUserInfo):[],c=AT(n.providerData,o),u=n.isAnonymous,f=!(n.email&&i.passwordHash)&&!(c!=null&&c.length),h=u?f:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Dp(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,y)}async function PT(n){const e=dn(n);await Eu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AT(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Lw(n){return n.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IT(n,e){const s=await Mw(n,{},async()=>{const r=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=await Ow(n,i,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:r};return n.emulatorConfig&&to(n.emulatorConfig.host)&&(f.credentials="include"),Dw.fetch()(c,f)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function RT(n,e){return cl(n,"POST","/v2/accounts:revokeToken",jm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ut(e.idToken,"internal-error"),ut(typeof e.idToken<"u","internal-error"),ut(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){ut(e.length!==0,"internal-error");const s=wy(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(ut(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:i,expiresIn:o}=await IT(e,s);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:i,expirationTime:o}=s,c=new Zo;return r&&(ut(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(ut(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(ut(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zo,this.toJSON())}_performRefresh(){return hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(n,e){ut(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class lr{constructor({uid:e,auth:s,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new TT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Dp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const s=await bc(this,this.stsTokenManager.getToken(this.auth,e));return ut(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return CT(this,e)}reload(){return PT(this)}_assign(e){this!==e&&(ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new lr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await Eu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(Ha(this.auth));const e=await this.getIdToken();return await bc(this,_T(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const r=s.displayName??void 0,i=s.email??void 0,o=s.phoneNumber??void 0,c=s.photoURL??void 0,u=s.tenantId??void 0,f=s._redirectEventId??void 0,h=s.createdAt??void 0,y=s.lastLoginAt??void 0,{uid:v,emailVerified:N,isAnonymous:T,providerData:k,stsTokenManager:_}=s;ut(v&&_,e,"internal-error");const P=Zo.fromJSON(this.name,_);ut(typeof v=="string",e,"internal-error"),Vi(r,e.name),Vi(i,e.name),ut(typeof N=="boolean",e,"internal-error"),ut(typeof T=="boolean",e,"internal-error"),Vi(o,e.name),Vi(c,e.name),Vi(u,e.name),Vi(f,e.name),Vi(h,e.name),Vi(y,e.name);const L=new lr({uid:v,auth:e,email:i,emailVerified:N,displayName:r,isAnonymous:T,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:P,createdAt:h,lastLoginAt:y});return k&&Array.isArray(k)&&(L.providerData=k.map(z=>({...z}))),f&&(L._redirectEventId=f),L}static async _fromIdTokenResponse(e,s,r=!1){const i=new Zo;i.updateFromServerResponse(s);const o=new lr({uid:s.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Eu(o),o}static async _fromGetAccountInfoResponse(e,s,r){const i=s.users[0];ut(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Lw(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Zo;u.updateFromIdToken(r);const f=new lr({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:c}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Dp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=new Map;function fi(n){yi(n instanceof Function,"Expected a class definition");let e=Ny.get(n);return e?(yi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ny.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Uw.type="NONE";const jy=Uw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(n,e,s){return`firebase:${n}:${e}:${s}`}class Xo{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=lu(this.userKey,i.apiKey,o),this.fullPersistenceKey=lu("persistence",i.apiKey,o),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await Cu(this.auth,{idToken:e}).catch(()=>{});return s?lr._fromGetAccountInfoResponse(this.auth,s,e):null}return lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new Xo(fi(jy),e,r);const i=(await Promise.all(s.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=i[0]||fi(jy);const c=lu(r,e.config.apiKey,e.name);let u=null;for(const h of s)try{const y=await h._get(c);if(y){let v;if(typeof y=="string"){const N=await Cu(e,{idToken:y}).catch(()=>{});if(!N)break;v=await lr._fromGetAccountInfoResponse(e,N,y)}else v=lr._fromJSON(e,y);h!==o&&(u=v),o=h;break}}catch{}const f=i.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Xo(o,e,r):(o=f[0],u&&await o._set(c,u.toJSON()),await Promise.all(s.map(async h=>{if(h!==o)try{await h._remove(c)}catch{}})),new Xo(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qw(e))return"Blackberry";if(Ww(e))return"Webos";if(Fw(e))return"Safari";if((e.includes("chrome/")||$w(e))&&!e.includes("edge/"))return"Chrome";if(Bw(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function zw(n=on()){return/firefox\//i.test(n)}function Fw(n=on()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $w(n=on()){return/crios\//i.test(n)}function Vw(n=on()){return/iemobile/i.test(n)}function Bw(n=on()){return/android/i.test(n)}function qw(n=on()){return/blackberry/i.test(n)}function Ww(n=on()){return/webos/i.test(n)}function km(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function DT(n=on()){var e;return km(n)&&!!((e=window.navigator)!=null&&e.standalone)}function MT(){return V_()&&document.documentMode===10}function Hw(n=on()){return km(n)||Bw(n)||Ww(n)||qw(n)||/windows phone/i.test(n)||Vw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(n,e=[]){let s;switch(n){case"Browser":s=Sy(on());break;case"Worker":s=`${Sy(on())}-${n}`;break;default:s=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${so}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=o=>new Promise((c,u)=>{try{const f=e(o);c(f)}catch(f){u(f)}});r.onAbort=s,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const i of s)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(n,e={}){return cl(n,"GET","/v2/passwordPolicy",jm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=6;class zT{constructor(e){var r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??UT,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),i&&(s.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,s,r,i){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ky(this),this.idTokenSubscription=new ky(this),this.beforeStateQueue=new OT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Iw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=fi(s)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Xo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await Cu(this,{idToken:e}),r=await lr._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Wn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===u)&&(f!=null&&f.user)&&(r=f.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await Eu(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(Ha(this));const s=e?dn(e):null;return s&&ut(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(Ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(Ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LT(this),s=new zT(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new la("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await RT(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&fi(e)||this._popupRedirectResolver;ut(s,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[fi(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)==null?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((s=this.currentUser)==null?void 0:s.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,i){if(this._deleted)return()=>{};const o=typeof s=="function"?s:s.next.bind(s);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ut(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof s=="function"){const f=e.addObserver(s,r,i);return()=>{c=!0,f()}}else{const f=e.addObserver(s);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());s&&(e["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var s;if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((s=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getToken());return e!=null&&e.error&&xT(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function _m(n){return dn(n)}class ky{constructor(e){this.auth=e,this.observer=null,this.addObserver=G_(s=>this.observer=s)}get next(){return ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $T(n){Cm=n}function VT(n){return Cm.loadJS(n)}function BT(){return Cm.gapiScript}function qT(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(n,e){const s=Br(n,"auth");if(s.isInitialized()){const i=s.getImmediate(),o=s.getOptions();if(sa(o,e??{}))return i;xi(i,"already-initialized")}return s.initialize({options:e})}function HT(n,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(fi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function GT(n,e,s){const r=_m(n);ut(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=Kw(e),{host:c,port:u}=KT(e),f=u===null?"":`:${u}`,h={url:`${o}//${c}${f}/`},y=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ut(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ut(sa(h,r.config.emulator)&&sa(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,to(c)?(Hu(`${o}//${c}${f}`),Gu("Auth",!0)):JT()}function Kw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function KT(n){const e=Kw(n),s=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:_y(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:_y(c)}}}function _y(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function JT(){function n(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return hi("not implemented")}_getIdTokenResponse(e){return hi("not implemented")}_linkToIdToken(e,s){return hi("not implemented")}_getReauthenticationResolver(e){return hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(n,e){return ST(n,"POST","/v1/accounts:signInWithIdp",jm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="http://localhost";class Ja extends Jw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new Ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):xi("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=s;if(!r||!i)return null;const c=new Ja(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const s=this.buildRequest();return Qo(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,Qo(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,Qo(e,s)}buildRequest(){const e={requestUri:YT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Oc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends Yw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Fc{constructor(){super("facebook.com")}static credential(e){return Ja._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return Ja._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return Gi.credential(s,r)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Fc{constructor(){super("github.com")}static credential(e){return Ja._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.GITHUB_SIGN_IN_METHOD="github.com";Ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Fc{constructor(){super("twitter.com")}static credential(e,s){return Ja._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return Ji.credential(s,r)}catch{return null}}}Ji.TWITTER_SIGN_IN_METHOD="twitter.com";Ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,i=!1){const o=await lr._fromIdTokenResponse(e,r,i),c=Cy(r);return new sl({user:o,providerId:c,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const i=Cy(r);return new sl({user:e,providerId:i,_tokenResponse:r,operationType:s})}}function Cy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends Hn{constructor(e,s,r,i){super(s.code,s.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Tu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,i){return new Tu(e,s,r,i)}}function Zw(n,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(n):s._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Tu._fromErrorAndOperation(n,o,e,r):o})}async function ZT(n,e,s=!1){const r=await bc(n,e._linkToIdToken(n.auth,await n.getIdToken()),s);return sl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XT(n,e,s=!1){const{auth:r}=n;if(Wn(r.app))return Promise.reject(Ha(r));const i="reauthenticate";try{const o=await bc(n,Zw(r,i,e,n),s);ut(o.idToken,r,"internal-error");const c=Sm(o.idToken);ut(c,r,"internal-error");const{sub:u}=c;return ut(n.uid===u,r,"user-mismatch"),sl._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&xi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QT(n,e,s=!1){if(Wn(n.app))return Promise.reject(Ha(n));const r="signIn",i=await Zw(n,r,e),o=await sl._fromIdTokenResponse(n,r,i);return s||await n._updateCurrentUser(o.user),o}function eP(n,e,s,r){return dn(n).onIdTokenChanged(e,s,r)}function tP(n,e,s){return dn(n).beforeAuthStateChanged(e,s)}const Pu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Pu,"1"),this.storage.removeItem(Pu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=1e3,nP=10;class Qw extends Xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),i=this.localCache[s];r!==i&&e(s,i,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const r=e.key;s?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!s&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);MT()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,nP):i()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},sP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qw.type="LOCAL";const rP=Qw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN extends Xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}eN.type="SESSION";const tN=eN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(i=>i.isListeningto(e));if(s)return s;const r=new Yu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:i,data:o}=s.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(c).map(async h=>h(s.origin,o)),f=await iP(u);s.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(n="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return n+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((u,f)=>{const h=Em("",20);i.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(v){const N=v;if(N.data.eventId===h)switch(N.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(N.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:s},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return window}function oP(n){Ur().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function lP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function dP(){return sN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="firebaseLocalStorageDb",uP=1,Au="firebaseLocalStorage",rN="fbase_key";class $c{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Zu(n,e){return n.transaction([Au],e?"readwrite":"readonly").objectStore(Au)}function hP(){const n=indexedDB.deleteDatabase(nN);return new $c(n).toPromise()}function Mp(){const n=indexedDB.open(nN,uP);return new Promise((e,s)=>{n.addEventListener("error",()=>{s(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Au,{keyPath:rN})}catch(i){s(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Au)?e(r):(r.close(),await hP(),e(await Mp()))})})}async function Ey(n,e,s){const r=Zu(n,!0).put({[rN]:e,value:s});return new $c(r).toPromise()}async function fP(n,e){const s=Zu(n,!1).get(e),r=await new $c(s).toPromise();return r===void 0?null:r.value}function Ty(n,e){const s=Zu(n,!0).delete(e);return new $c(s).toPromise()}const pP=800,mP=3;class iN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mp(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>mP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yu._getInstance(dP()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var s,r;if(this.activeServiceWorker=await lP(),!this.activeServiceWorker)return;this.sender=new aP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(s=e[0])!=null&&s.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mp();return await Ey(e,Pu,"1"),await Ty(e,Pu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ey(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>fP(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ty(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Zu(i,!1).getAll();return new $c(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iN.type="LOCAL";const gP=iN;new zc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(n,e){return e?fi(e):(ut(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm extends Jw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qo(e,this._buildIdpRequest())}_linkToIdToken(e,s){return Qo(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return Qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function yP(n){return QT(n.auth,new Tm(n),n.bypassAuthState)}function bP(n){const{auth:e,user:s}=n;return ut(s,e,"internal-error"),XT(s,new Tm(n),n.bypassAuthState)}async function vP(n){const{auth:e,user:s}=n;return ut(s,e,"internal-error"),ZT(s,new Tm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,s,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:i,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:s,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yP;case"linkViaPopup":case"linkViaRedirect":return vP;case"reauthViaPopup":case"reauthViaRedirect":return bP;default:xi(this.auth,"internal-error")}}resolve(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new zc(2e3,1e4);class Go extends aN{constructor(e,s,r,i,o){super(e,s,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Go.currentPopupAction&&Go.currentPopupAction.cancel(),Go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ut(e,this.auth,"internal-error"),e}async onExecution(){yi(this.filter.length===1,"Popup operations only handle one event");const e=Em();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if((r=(s=this.authWindow)==null?void 0:s.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wP.get())};e()}}Go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="pendingRedirect",cu=new Map;class jP extends aN{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=cu.get(this.auth._key());if(!e){try{const r=await SP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}cu.set(this.auth._key(),e)}return this.bypassAuthState||cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SP(n,e){const s=CP(e),r=_P(n);if(!await r._isAvailable())return!1;const i=await r._get(s)==="true";return await r._remove(s),i}function kP(n,e){cu.set(n._key(),e)}function _P(n){return fi(n._redirectPersistence)}function CP(n){return lu(NP,n.config.apiKey,n.name)}async function EP(n,e,s=!1){if(Wn(n.app))return Promise.reject(Ha(n));const r=_m(n),i=xP(r,e),c=await new jP(r,i,s).execute();return c&&!s&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=600*1e3;class PP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AP(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!oN(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";s.onError(Lr(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Py(e))}saveEventToCache(e){this.cachedEventUids.add(Py(e)),this.lastProcessedEventTime=Date.now()}}function Py(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function oN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IP(n,e={}){return cl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DP=/^https?/;async function MP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await IP(n);for(const s of e)try{if(OP(s))return}catch{}xi(n,"unauthorized-domain")}function OP(n){const e=Rp(),{protocol:s,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?s==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&c.hostname===r}if(!DP.test(s))return!1;if(RP.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=new zc(3e4,6e4);function Ay(){const n=Ur().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let s=0;s<n.CP.length;s++)n.CP[s]=null}}function UP(n){return new Promise((e,s)=>{var i,o,c;function r(){Ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ay(),s(Lr(n,"network-request-failed"))},timeout:LP.get()})}if((o=(i=Ur().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=Ur().gapi)!=null&&c.load)r();else{const u=qT("iframefcb");return Ur()[u]=()=>{gapi.load?r():s(Lr(n,"network-request-failed"))},VT(`${BT()}?onload=${u}`).catch(f=>s(f))}}).catch(e=>{throw du=null,e})}let du=null;function zP(n){return du=du||UP(n),du}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=new zc(5e3,15e3),$P="__/auth/iframe",VP="emulator/auth/iframe",BP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WP(n){const e=n.config;ut(e.authDomain,n,"auth-domain-config-required");const s=e.emulator?Nm(e,VP):`https://${n.config.authDomain}/${$P}`,r={apiKey:e.apiKey,appName:n.name,v:so},i=qP.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${s}?${Oc(r).slice(1)}`}async function HP(n){const e=await zP(n),s=Ur().gapi;return ut(s,n,"internal-error"),e.open({where:document.body,url:WP(n),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BP,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=Lr(n,"network-request-failed"),u=Ur().setTimeout(()=>{o(c)},FP.get());function f(){Ur().clearTimeout(u),i(r)}r.ping(f).then(f,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KP=500,JP=600,YP="_blank",ZP="http://localhost";class Iy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XP(n,e,s,r=KP,i=JP){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const f={...GP,width:r.toString(),height:i.toString(),top:o,left:c},h=on().toLowerCase();s&&(u=$w(h)?YP:s),zw(h)&&(e=e||ZP,f.scrollbars="yes");const y=Object.entries(f).reduce((N,[T,k])=>`${N}${T}=${k},`,"");if(DT(h)&&u!=="_self")return QP(e||"",u),new Iy(null);const v=window.open(e||"",u,y);ut(v,n,"popup-blocked");try{v.focus()}catch{}return new Iy(v)}function QP(n,e){const s=document.createElement("a");s.href=n,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="__/auth/handler",t4="emulator/auth/handler",s4=encodeURIComponent("fac");async function Ry(n,e,s,r,i,o){ut(n.config.authDomain,n,"auth-domain-config-required"),ut(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:s,redirectUrl:r,v:so,eventId:i};if(e instanceof Yw){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",H_(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(e instanceof Fc){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const f=await n._getAppCheckToken(),h=f?`#${s4}=${encodeURIComponent(f)}`:"";return`${n4(n)}?${Oc(u).slice(1)}${h}`}function n4({config:n}){return n.emulator?Nm(n,t4):`https://${n.authDomain}/${e4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="webStorageSupport";class r4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tN,this._completeRedirectFn=EP,this._overrideRedirectResult=kP}async _openPopup(e,s,r,i){var c;yi((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await Ry(e,s,r,Rp(),i);return XP(e,o,Em())}async _openRedirect(e,s,r,i){await this._originValidation(e);const o=await Ry(e,s,r,Rp(),i);return oP(o),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:i,promise:o}=this.eventManagers[s];return i?Promise.resolve(i):(yi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await HP(e),r=new PP(e);return s.register("authEvent",i=>(ut(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(sp,{type:sp},i=>{var c;const o=(c=i==null?void 0:i[0])==null?void 0:c[sp];o!==void 0&&s(!!o),xi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=MP(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Hw()||Fw()||km()}}const i4=r4;var Dy="@firebase/auth",My="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l4(n){Nn(new ln("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;ut(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gw(n)},h=new FT(r,i,o,f);return HT(h,s),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),Nn(new ln("auth-internal",e=>{const s=_m(e.getProvider("auth").getImmediate());return(r=>new a4(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rs(Dy,My,o4(n)),Rs(Dy,My,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=300,d4=uw("authIdTokenMaxAge")||c4;let Oy=null;const u4=n=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>d4)return;const i=s==null?void 0:s.token;Oy!==i&&(Oy=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function h4(n=ll()){const e=Br(n,"auth");if(e.isInitialized())return e.getImmediate();const s=WT(n,{popupRedirectResolver:i4,persistence:[gP,rP,tN]}),r=uw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=u4(o.toString());tP(s,c,()=>c(s.currentUser)),eP(s,u=>c(u))}}const i=cw("auth");return i&&GT(s,`http://${i}`),s}function f4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}$T({loadJS(n){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Lr("internal-error");o.customData=i,s(o)},r.type="text/javascript",r.charset="UTF-8",f4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l4("Browser");const lN="@firebase/installations",Pm="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=1e4,dN=`w:${Pm}`,uN="FIS_v2",p4="https://firebaseinstallations.googleapis.com/v1",m4=3600*1e3,g4="installations",x4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ya=new la(g4,x4,y4);function hN(n){return n instanceof Hn&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN({projectId:n}){return`${p4}/projects/${n}/installations`}function pN(n){return{token:n.token,requestStatus:2,expiresIn:v4(n.expiresIn),creationTime:Date.now()}}async function mN(n,e){const r=(await e.json()).error;return Ya.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function gN({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function b4(n,{refreshToken:e}){const s=gN(n);return s.append("Authorization",w4(e)),s}async function xN(n){const e=await n();return e.status>=500&&e.status<600?n():e}function v4(n){return Number(n.replace("s","000"))}function w4(n){return`${uN} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4({appConfig:n,heartbeatServiceProvider:e},{fid:s}){const r=fN(n),i=gN(n),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const c={fid:s,authVersion:uN,appId:n.appId,sdkVersion:dN},u={method:"POST",headers:i,body:JSON.stringify(c)},f=await xN(()=>fetch(r,u));if(f.ok){const h=await f.json();return{fid:h.fid||s,registrationStatus:2,refreshToken:h.refreshToken,authToken:pN(h.authToken)}}else throw await mN("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=/^[cdef][\w-]{21}$/,Op="";function k4(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const s=_4(n);return S4.test(s)?s:Op}catch{return Op}}function _4(n){return j4(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=new Map;function vN(n,e){const s=Xu(n);wN(s,e),C4(s,e)}function wN(n,e){const s=bN.get(n);if(s)for(const r of s)r(e)}function C4(n,e){const s=E4();s&&s.postMessage({key:n,fid:e}),T4()}let $a=null;function E4(){return!$a&&"BroadcastChannel"in self&&($a=new BroadcastChannel("[Firebase] FID Change"),$a.onmessage=n=>{wN(n.data.key,n.data.fid)}),$a}function T4(){bN.size===0&&$a&&($a.close(),$a=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4="firebase-installations-database",A4=1,Za="firebase-installations-store";let np=null;function Am(){return np||(np=Ju(P4,A4,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Za)}}})),np}async function Iu(n,e){const s=Xu(n),i=(await Am()).transaction(Za,"readwrite"),o=i.objectStore(Za),c=await o.get(s);return await o.put(e,s),await i.done,(!c||c.fid!==e.fid)&&vN(n,e.fid),e}async function NN(n){const e=Xu(n),r=(await Am()).transaction(Za,"readwrite");await r.objectStore(Za).delete(e),await r.done}async function Qu(n,e){const s=Xu(n),i=(await Am()).transaction(Za,"readwrite"),o=i.objectStore(Za),c=await o.get(s),u=e(c);return u===void 0?await o.delete(s):await o.put(u,s),await i.done,u&&(!c||c.fid!==u.fid)&&vN(n,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Im(n){let e;const s=await Qu(n.appConfig,r=>{const i=I4(r),o=R4(n,i);return e=o.registrationPromise,o.installationEntry});return s.fid===Op?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function I4(n){const e=n||{fid:k4(),registrationStatus:0};return jN(e)}function R4(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ya.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=D4(n,s);return{installationEntry:s,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:M4(n)}:{installationEntry:e}}async function D4(n,e){try{const s=await N4(n,e);return Iu(n.appConfig,s)}catch(s){throw hN(s)&&s.customData.serverCode===409?await NN(n.appConfig):await Iu(n.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function M4(n){let e=await Ly(n.appConfig);for(;e.registrationStatus===1;)await yN(100),e=await Ly(n.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:r}=await Im(n);return r||s}return e}function Ly(n){return Qu(n,e=>{if(!e)throw Ya.create("installation-not-found");return jN(e)})}function jN(n){return O4(n)?{fid:n.fid,registrationStatus:0}:n}function O4(n){return n.registrationStatus===1&&n.registrationTime+cN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L4({appConfig:n,heartbeatServiceProvider:e},s){const r=U4(n,s),i=b4(n,s),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const c={installation:{sdkVersion:dN,appId:n.appId}},u={method:"POST",headers:i,body:JSON.stringify(c)},f=await xN(()=>fetch(r,u));if(f.ok){const h=await f.json();return pN(h)}else throw await mN("Generate Auth Token",f)}function U4(n,{fid:e}){return`${fN(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rm(n,e=!1){let s;const r=await Qu(n.appConfig,o=>{if(!SN(o))throw Ya.create("not-registered");const c=o.authToken;if(!e&&$4(c))return o;if(c.requestStatus===1)return s=z4(n,e),o;{if(!navigator.onLine)throw Ya.create("app-offline");const u=B4(o);return s=F4(n,u),u}});return s?await s:r.authToken}async function z4(n,e){let s=await Uy(n.appConfig);for(;s.authToken.requestStatus===1;)await yN(100),s=await Uy(n.appConfig);const r=s.authToken;return r.requestStatus===0?Rm(n,e):r}function Uy(n){return Qu(n,e=>{if(!SN(e))throw Ya.create("not-registered");const s=e.authToken;return q4(s)?{...e,authToken:{requestStatus:0}}:e})}async function F4(n,e){try{const s=await L4(n,e),r={...e,authToken:s};return await Iu(n.appConfig,r),s}catch(s){if(hN(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await NN(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Iu(n.appConfig,r)}throw s}}function SN(n){return n!==void 0&&n.registrationStatus===2}function $4(n){return n.requestStatus===2&&!V4(n)}function V4(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+m4}function B4(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function q4(n){return n.requestStatus===1&&n.requestTime+cN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(n){const e=n,{installationEntry:s,registrationPromise:r}=await Im(e);return r?r.catch(console.error):Rm(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H4(n,e=!1){const s=n;return await G4(s),(await Rm(s,e)).token}async function G4(n){const{registrationPromise:e}=await Im(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(n){if(!n||!n.options)throw rp("App Configuration");if(!n.name)throw rp("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!n.options[s])throw rp(s);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function rp(n){return Ya.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="installations",J4="installations-internal",Y4=n=>{const e=n.getProvider("app").getImmediate(),s=K4(e),r=Br(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Z4=n=>{const e=n.getProvider("app").getImmediate(),s=Br(e,kN).getImmediate();return{getId:()=>W4(s),getToken:i=>H4(s,i)}};function X4(){Nn(new ln(kN,Y4,"PUBLIC")),Nn(new ln(J4,Z4,"PRIVATE"))}X4();Rs(lN,Pm);Rs(lN,Pm,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="/firebase-messaging-sw.js",eA="/firebase-cloud-messaging-push-scope",_N="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",tA="https://fcmregistrations.googleapis.com/v1",CN="google.c.a.c_id",sA="google.c.a.c_l",nA="google.c.a.ts",rA="google.c.a.e",zy=1e4;var Fy;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Fy||(Fy={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var vc;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(vc||(vc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function iA(n){const e="=".repeat((4-n.length%4)%4),s=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(s),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="fcm_token_details_db",aA=5,$y="fcm_token_object_Store";async function oA(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(ip))return null;let e=null;return(await Ju(ip,aA,{upgrade:async(r,i,o,c)=>{if(i<2||!r.objectStoreNames.contains($y))return;const u=c.objectStore($y),f=await u.index("fcmSenderId").get(n);if(await u.clear(),!!f){if(i===2){const h=f;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:h.createTime??Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:ci(h.vapidKey)}}}else if(i===3){const h=f;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ci(h.auth),p256dh:ci(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ci(h.vapidKey)}}}else if(i===4){const h=f;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ci(h.auth),p256dh:ci(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ci(h.vapidKey)}}}}}})).close(),await Jf(ip),await Jf("fcm_vapid_details_db"),await Jf("undefined"),lA(e)?e:null}function lA(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="firebase-messaging-database",dA=1,wc="firebase-messaging-store";let ap=null;function EN(){return ap||(ap=Ju(cA,dA,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(wc)}}})),ap}async function uA(n){const e=TN(n),r=await(await EN()).transaction(wc).objectStore(wc).get(e);if(r)return r;{const i=await oA(n.appConfig.senderId);if(i)return await Dm(n,i),i}}async function Dm(n,e){const s=TN(n),i=(await EN()).transaction(wc,"readwrite");return await i.objectStore(wc).put(e,s),await i.done,e}function TN({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Xs=new la("messaging","Messaging",hA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(n,e){const s=await Om(n),r=PN(e),i={method:"POST",headers:s,body:JSON.stringify(r)};let o;try{o=await(await fetch(Mm(n.appConfig),i)).json()}catch(c){throw Xs.create("token-subscribe-failed",{errorInfo:c==null?void 0:c.toString()})}if(o.error){const c=o.error.message;throw Xs.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw Xs.create("token-subscribe-no-token");return o.token}async function pA(n,e){const s=await Om(n),r=PN(e.subscriptionOptions),i={method:"PATCH",headers:s,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${Mm(n.appConfig)}/${e.token}`,i)).json()}catch(c){throw Xs.create("token-update-failed",{errorInfo:c==null?void 0:c.toString()})}if(o.error){const c=o.error.message;throw Xs.create("token-update-failed",{errorInfo:c})}if(!o.token)throw Xs.create("token-update-no-token");return o.token}async function mA(n,e){const r={method:"DELETE",headers:await Om(n)};try{const o=await(await fetch(`${Mm(n.appConfig)}/${e}`,r)).json();if(o.error){const c=o.error.message;throw Xs.create("token-unsubscribe-failed",{errorInfo:c})}}catch(i){throw Xs.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Mm({projectId:n}){return`${tA}/projects/${n}/registrations`}async function Om({appConfig:n,installations:e}){const s=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${s}`})}function PN({p256dh:n,auth:e,endpoint:s,vapidKey:r}){const i={web:{endpoint:s,auth:e,p256dh:n}};return r!==_N&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=10080*60*1e3;async function xA(n){const e=await bA(n.swRegistration,n.vapidKey),s={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:ci(e.getKey("auth")),p256dh:ci(e.getKey("p256dh"))},r=await uA(n.firebaseDependencies);if(r){if(vA(r.subscriptionOptions,s))return Date.now()>=r.createTime+gA?yA(n,{token:r.token,createTime:Date.now(),subscriptionOptions:s}):r.token;try{await mA(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Vy(n.firebaseDependencies,s)}else return Vy(n.firebaseDependencies,s)}async function yA(n,e){try{const s=await pA(n.firebaseDependencies,e),r={...e,token:s,createTime:Date.now()};return await Dm(n.firebaseDependencies,r),s}catch(s){throw s}}async function Vy(n,e){const r={token:await fA(n,e),createTime:Date.now(),subscriptionOptions:e};return await Dm(n,r),r.token}async function bA(n,e){const s=await n.pushManager.getSubscription();return s||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:iA(e)})}function vA(n,e){const s=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,o=e.p256dh===n.p256dh;return s&&r&&i&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return wA(e,n),NA(e,n),jA(e,n),e}function wA(n,e){if(!e.notification)return;n.notification={};const s=e.notification.title;s&&(n.notification.title=s);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const o=e.notification.icon;o&&(n.notification.icon=o)}function NA(n,e){e.data&&(n.data=e.data)}function jA(n,e){var i,o,c,u;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;n.fcmOptions={};const s=((o=e.fcmOptions)==null?void 0:o.link)??((c=e.notification)==null?void 0:c.click_action);s&&(n.fcmOptions.link=s);const r=(u=e.fcmOptions)==null?void 0:u.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n){return typeof n=="object"&&!!n&&CN in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(n){if(!n||!n.options)throw op("App Configuration Object");if(!n.name)throw op("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:s}=n;for(const r of e)if(!s[r])throw op(r);return{appName:n.name,projectId:s.projectId,apiKey:s.apiKey,appId:s.appId,senderId:s.messagingSenderId}}function op(n){return Xs.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,s,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=kA(e);this.firebaseDependencies={app:e,appConfig:i,installations:s,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(n){try{n.swRegistration=await navigator.serviceWorker.register(Q4,{scope:eA}),n.swRegistration.update().catch(()=>{}),await EA(n.swRegistration)}catch(e){throw Xs.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function EA(n){return new Promise((e,s)=>{const r=setTimeout(()=>s(new Error(`Service worker not registered after ${zy} ms`)),zy),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var c;((c=o.target)==null?void 0:c.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),s(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(n,e){if(!e&&!n.swRegistration&&await CA(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Xs.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=_N)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(n,e){if(!navigator)throw Xs.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Xs.create("permission-blocked");return await PA(n,e==null?void 0:e.vapidKey),await TA(n,e==null?void 0:e.serviceWorkerRegistration),xA(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(n,e,s){const r=IA(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:s[CN],message_name:s[sA],message_time:s[nA],message_device_time:Math.floor(Date.now()/1e3)})}function IA(n){switch(n){case vc.NOTIFICATION_CLICKED:return"notification_open";case vc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(n,e){const s=e.data;if(!s.isFirebaseMessaging)return;n.onMessageHandler&&s.messageType===vc.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(By(s)):n.onMessageHandler.next(By(s)));const r=s.data;SA(r)&&r[rA]==="1"&&await AA(n,s.messageType,r)}const qy="@firebase/messaging",Wy="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=n=>{const e=new _A(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",s=>RA(e,s)),e},MA=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>AN(e,r)}};function OA(){Nn(new ln("messaging",DA,"PUBLIC")),Nn(new ln("messaging-internal",MA,"PRIVATE")),Rs(qy,Wy),Rs(qy,Wy,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(){try{await pm()}catch{return!1}return typeof window<"u"&&fm()&&pw()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(n,e){if(!navigator)throw Xs.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(n=ll()){return LA().then(e=>{if(!e)throw Xs.create("unsupported-browser")},e=>{throw Xs.create("indexed-db-unsupported")}),Br(dn(n),"messaging").getImmediate()}async function FA(n,e){return n=dn(n),AN(n,e)}function $A(n,e){return n=dn(n),UA(n,e)}OA();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,s,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Wn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=s.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||s.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i==null||i.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const s=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return s.error?null:s.token}return null}async getContext(e){const s=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:s,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="us-central1";class BA{constructor(e,s,r,i,o=Lp,c=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new VA(e,s,r,i),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(o);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Lp}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const s=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${s}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${s}.cloudfunctions.net/${e}`}}function qA(n,e,s){const r=to(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${s}`,r&&(Hu(n.emulatorOrigin+"/backends"),Gu("Functions",!0))}const Hy="@firebase/functions",Gy="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="auth-internal",HA="app-check-internal",GA="messaging-internal";function KA(n){const e=(s,{instanceIdentifier:r})=>{const i=s.getProvider("app").getImmediate(),o=s.getProvider(WA),c=s.getProvider(GA),u=s.getProvider(HA);return new BA(i,o,c,u,r)};Nn(new ln(IN,e,"PUBLIC").setMultipleInstances(!0)),Rs(Hy,Gy,n),Rs(Hy,Gy,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(n=ll(),e=Lp){const r=Br(dn(n),IN).getImmediate({identifier:e}),i=hm("functions");return i&&YA(r,...i),r}function YA(n,e,s){qA(dn(n),e,s)}KA();const uu={apiKey:"AIzaSyCFi4LIpQBzs9QGnn4QQdNJtCvMOi_-VF8",authDomain:"spoilme-edee0.firebaseapp.com",projectId:"spoilme-edee0",storageBucket:"spoilme-edee0.appspot.com",messagingSenderId:"744288044885",appId:"1:744288044885:web:24614b67ffe485446151dc",measurementId:"G-H9VG45QVZR"},ZA=uu.apiKey&&uu.projectId&&uu.projectId!=="your-app-id";let XA=null,QA=null,eI=null,hu=null,tI=null,$o=null;if(ZA)try{$o=xw(uu),XA=OE($o,"spoilme");try{QA=hT($o),console.log("Firebase Storage initialized")}catch(n){console.error("Firebase Storage init failed:",n)}try{eI=h4($o),console.log("Firebase Auth initialized")}catch(n){console.error("Firebase Auth init failed:",n)}try{hu=zA($o),console.log("Firebase Messaging initialized")}catch(n){console.error("Firebase Messaging init failed:",n)}try{tI=JA($o),console.log("Firebase Functions initialized")}catch(n){console.error("Firebase Functions init failed:",n)}console.log("Firebase initialized successfully")}catch(n){console.error("Firebase initialization error:",n)}else console.warn("Firebase keys missing or invalid. Application running in Demo Mode (Local Storage).");const Ky="spv_fcm_token";async function Up(n){var e,s,r,i,o,c,u,f;try{if(typeof window>"u")return{ok:!1,reason:"not_in_browser"};if(!(n!=null&&n.userId))return{ok:!1,reason:"missing_userId"};if(!("Notification"in window))return{ok:!1,reason:"notifications_unsupported"};if(!("serviceWorker"in navigator))return{ok:!1,reason:"sw_unsupported"};if(!hu)return{ok:!1,reason:"firebase_messaging_not_configured"};const h=((s=(e=import.meta)==null?void 0:e.env)==null?void 0:s.VITE_FIREBASE_VAPID_KEY)||((i=(r=import.meta)==null?void 0:r.env)==null?void 0:i.VITE_FCM_VAPID_KEY)||((c=(o=import.meta)==null?void 0:o.env)==null?void 0:c.VITE_VAPID_KEY)||"";if(!h)return{ok:!1,reason:"missing_vapid_key"};if(await Notification.requestPermission()!=="granted")return{ok:!1,reason:"permission_not_granted"};const v=await navigator.serviceWorker.register("/firebase-messaging-sw.js");try{const k=n.userName||"valued customer";navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"USER_DATA",name:k}):(f=(u=(await navigator.serviceWorker.ready).active)==null?void 0:u.postMessage)==null||f.call(u,{type:"USER_DATA",name:k})}catch{}const N=await FA(hu,{vapidKey:h,serviceWorkerRegistration:v});if(!N)return{ok:!1,reason:"no_token"};localStorage.getItem(Ky)!==N&&(localStorage.setItem(Ky,N),await Ge.from("users").update({fcm_token:N}).eq("id",n.userId));try{$A(hu,k=>{var L,z;const _=(L=k==null?void 0:k.notification)==null?void 0:L.title,P=(z=k==null?void 0:k.notification)==null?void 0:z.body;_&&P&&Notification.permission==="granted"&&new Notification(_,{body:P})})}catch{}return{ok:!0,token:N}}catch(h){return console.warn("ensureFcmTokenRegistered failed:",h),{ok:!1,reason:(h==null?void 0:h.message)||String(h)}}}const RN=async(n,e)=>{n&&await Up({userId:n,userName:e})};var sI={};const DN=S.createContext(void 0),Qt=(n,e=new WeakSet)=>{if(n==null)return null;if(typeof n!="object")return n;if(e.has(n))return null;if(e.add(n),n instanceof Date)return n.toISOString();if(typeof n.toDate=="function")try{return n.toDate().toISOString()}catch{return null}if(n.path&&typeof n.path=="string"&&(n.firestore||n._key))return n.path;if(Array.isArray(n))return n.map(r=>Qt(r,e));if(n.seconds!==void 0&&n.nanoseconds!==void 0&&Object.keys(n).length<=4)return new Date(n.seconds*1e3+n.nanoseconds/1e6).toISOString();const s={};for(const r in n)if(!(r.startsWith("_")||r==="auth"||r==="firestore"||r==="proactiveRefresh"||r==="providerData")&&Object.prototype.hasOwnProperty.call(n,r)){const i=Qt(n[r],e);i!=null&&(s[r]=i)}return s},Jy=n=>{if(!n)return null;const e={...n};return e.is_admin!==void 0&&(e.isAdmin=!!e.is_admin),e.isAdmin===void 0&&(e.isAdmin=!1),e.created_at&&!e.createdAt&&(e.createdAt=typeof e.created_at=="string"?e.created_at:e.created_at.toISOString?e.created_at.toISOString():String(e.created_at)),e},nI=()=>{const n=["Thandiwe Zulu","Jessica Nel","Precious Khumalo","Sarah Van Der Merwe","Amahle Dlamini","Chloe Naidoo","Nicole Botha","Zanele Mthembu","Ashley Smith","Bianca Fourie"],e=new Date,s=e.getFullYear()*100+e.getMonth(),r=c=>{let u=c+=1831565813;return u=Math.imul(u^u>>>15,u|1),u^=u+Math.imul(u^u>>>7,u|61),((u^u>>>14)>>>0)/4294967296},i=n.map((c,u)=>({id:`aff_${u}`,name:c,sales:0,rank:0,change:"same"}));i[0].sales=28561.68;let o=28561.68;for(let c=1;c<i.length;c++){const f=1500+r(s+c)*3500,h=Math.floor(r(s+c+50)*99)/100;o=Math.max(1e3,o-f);const y=Math.floor(o)+h;i[c].sales=parseFloat(y.toFixed(2))}return i.forEach((c,u)=>{c.rank=u+1;const f=r(s+u+200);c.change=f>.6?"up":f<.3?"down":"same",u===0&&(c.change="same")}),i},Yy=n=>{const e=new Date,s=new Date(e.getFullYear(),0,1),r=Math.ceil(((e.getTime()-s.getTime())/864e5+s.getDay()+1)/7);if(n){const o=[];for(let c=3;c>=1;c--){const u=(r-1-c+52)%52;o.push(Zy[u])}return[n,...o.map((c,u)=>({rank:u+2,name:c.name,prize:c.currency==="ZAR"?500:30,currency:c.currency}))]}const i=[];for(let o=3;o>=0;o--){const c=(r-1-o+52)%52;i.push(Zy[c])}return i.map((o,c)=>({rank:c+1,name:o.name,prize:o.currency==="ZAR"?500:30,currency:o.currency}))},Zy=[{name:"Anja P.",location:"Pretoria, SA",currency:"ZAR"},{name:"Sarah Jenkins",location:"Texas, USA",currency:"USD"},{name:"Thandi M.",location:"Sandton, SA",currency:"ZAR"},{name:"Sophie Clarke",location:"London, UK",currency:"USD"},{name:"Johan V.",location:"Bloemfontein, SA",currency:"ZAR"},{name:"Emily R.",location:"New York, USA",currency:"USD"},{name:"Priya N.",location:"Durban, SA",currency:"ZAR"},{name:"Isabella G.",location:"Toronto, Canada",currency:"USD"},{name:"Bianca S.",location:"Cape Town, SA",currency:"ZAR"},{name:"Madison L.",location:"Chicago, USA",currency:"USD"},{name:"Lerato K.",location:"Soweto, SA",currency:"ZAR"},{name:"Charlotte B.",location:"Manchester, UK",currency:"USD"},{name:"David W.",location:"Port Elizabeth, SA",currency:"ZAR"},{name:"Jessica H.",location:"Florida, USA",currency:"USD"},{name:"Zanele T.",location:"Polokwane, SA",currency:"ZAR"},{name:"Olivia M.",location:"Dublin, Ireland",currency:"USD"},{name:"Riaan O.",location:"Paarl, SA",currency:"ZAR"},{name:"Ashley T.",location:"California, USA",currency:"USD"},{name:"Fatima A.",location:"Lenasia, SA",currency:"ZAR"},{name:"Emma W.",location:"Sydney, Australia",currency:"USD"},{name:"Michelle D.",location:"George, SA",currency:"ZAR"},{name:"Grace P.",location:"Ohio, USA",currency:"USD"},{name:"Nandi Z.",location:"East London, SA",currency:"ZAR"},{name:"Mia S.",location:"Berlin, Germany",currency:"USD"},{name:"Chantelle V.",location:"Boksburg, SA",currency:"ZAR"},{name:"Harper C.",location:"Arizona, USA",currency:"USD"},{name:"Sipho M.",location:"Johannesburg, SA",currency:"ZAR"},{name:"Chloe F.",location:"Bristol, UK",currency:"USD"},{name:"Elize B.",location:"Stellenbosch, SA",currency:"ZAR"},{name:"Samantha K.",location:"Nevada, USA",currency:"USD"},{name:"Yusuf E.",location:"Cape Town, SA",currency:"ZAR"},{name:"Lily J.",location:"Auckland, NZ",currency:"USD"},{name:"Monique L.",location:"Centurion, SA",currency:"ZAR"},{name:"Ava R.",location:"Washington, USA",currency:"USD"},{name:"Karabo P.",location:"Rustenburg, SA",currency:"ZAR"},{name:"Zoe T.",location:"Liverpool, UK",currency:"USD"},{name:"Andre F.",location:"Nelspruit, SA",currency:"ZAR"},{name:"Elizabeth N.",location:"Virginia, USA",currency:"USD"},{name:"Ts hepo G.",location:"Midrand, SA",currency:"ZAR"},{name:"Amelia H.",location:"Edinburgh, Scotland",currency:"USD"},{name:"Marlize J.",location:"Upington, SA",currency:"ZAR"},{name:"Victoria B.",location:"Georgia, USA",currency:"USD"},{name:"Keshav R.",location:"Chatsworth, SA",currency:"ZAR"},{name:"Hannah D.",location:"Leeds, UK",currency:"USD"},{name:"Angelique S.",location:"Krugersdorp, SA",currency:"ZAR"},{name:"Natalie M.",location:"Oregon, USA",currency:"USD"},{name:"Vusi K.",location:"Pietermaritzburg, SA",currency:"ZAR"},{name:"Layla O.",location:"Dubai, UAE",currency:"USD"},{name:"Sunette W.",location:"Mossel Bay, SA",currency:"ZAR"},{name:"Ella F.",location:"Colorado, USA",currency:"USD"},{name:"Bongani N.",location:"Soweto, SA",currency:"ZAR"},{name:"Scarlet V.",location:"Melbourne, Australia",currency:"USD"}],rI=({children:n})=>{const[e,s]=S.useState([]),[r,i]=S.useState([]),[o,c]=S.useState([]),[u,f]=S.useState(()=>{try{const H=localStorage.getItem("spv_cart");return H?JSON.parse(H):[]}catch(H){return console.error("Failed to load cart",H),[]}}),[h,y]=S.useState(Pr),[v,N]=S.useState(q1),[T,k]=S.useState([]),[_,P]=S.useState(!0),[L,z]=S.useState(null),[F,K]=S.useState(null),[ee,W]=S.useState([]),[D,C]=S.useState(0),[I,$]=S.useState([]),[O,V]=S.useState("local"),[A,se]=S.useState(!Es),[fe,Se]=S.useState(null),[Ie,le]=S.useState(!1),[be,ve]=S.useState([]),[Y,de]=S.useState([]),[te,xe]=S.useState("ZAR"),[q,Ae]=S.useState(null);S.useEffect(()=>{const H=localStorage.getItem("spv_active_user");if(H)try{const ge=JSON.parse(H);y(ge)}catch(ge){console.error("Error parsing stored user",ge),y(Pr)}W(nI()),$(Yy(q));const G=new Date,Z=G.getFullYear()*100+G.getMonth();C(780+Math.floor((ge=>{let Ke=ge+=1831565813;return Ke=Math.imul(Ke^Ke>>>15,Ke|1),Ke^=Ke+Math.imul(Ke^Ke>>>7,Ke|61),(Ke>>>0)/4294967296})(Z)*15));try{const ge=localStorage.getItem("spv_packaging_presets");ge&&ve(JSON.parse(ge));const Ke=localStorage.getItem("spv_material_presets");Ke&&de(JSON.parse(Ke))}catch(ge){console.error("Error loading presets",ge)}},[]),S.useEffect(()=>{localStorage.setItem("spv_cart",JSON.stringify(u))},[u]),S.useEffect(()=>{A&&localStorage.setItem("spv_orders",JSON.stringify(o))},[o,A]);const Pe=H=>{try{const G=Qt(H);localStorage.setItem("spv_active_user",JSON.stringify(G))}catch(G){console.error("Error saving user to localStorage",G)}},$e=async(H,G)=>{if(!A)try{await Ge.from("users").update(Qt(G)).eq("id",H)}catch(Z){console.error("Failed to update user fields in Supabase:",Z)}},tt=async(H,G,Z,re="/#/notifications")=>{if(!(A||!Es))try{await Xi("send-push",{title:G,body:Z,targetGroup:"individual",targetId:H,url:re})}catch(ge){console.warn("pushToIndividual failed:",ge)}},ht=async(H,G)=>{if(!A)try{const{data:Z}=await Ge.from("users").select("notifications").eq("id",H).maybeSingle(),re=Z&&Z.notifications||[],ge=[G,...re];await Ge.from("users").update({notifications:ge}).eq("id",H)}catch(Z){console.error("Failed to append notification to user:",Z)}},qt=async H=>{const G={...h,...H};y(G),Pe(G),!A&&h.id&&h.id!=="guest"&&await $e(h.id,Qt(G))},Ne=async()=>{try{if(typeof window>"u")return{ok:!1,message:"Not in browser"};const H=localStorage.getItem("spv_dev_admin");if(!H)return{ok:!1,message:"No local dev admin found"};const G=JSON.parse(H),Z={...Pr,...G,id:G.id||"admin_local",email:G.email};return y(Z),Pe(Z),console.log("signInWithLocalDevAdmin: signed in as local dev admin",Z.email),{ok:!0,message:"Signed in as local dev admin"}}catch(H){return console.warn("signInWithLocalDevAdmin failed:",H),{ok:!1,message:(H==null?void 0:H.message)||String(H)}}},Qe=()=>Se(null);S.useEffect(()=>{if(A||!h.id||h.id==="guest"||!Es)return;let H=!1;(async()=>{try{const{data:Z,error:re}=await Ge.from("users").select("*").eq("id",h.id).maybeSingle();if(!H&&!re&&Z){const ge={...h,...Z};y(ge),Pe(ge)}}catch(Z){console.warn("Failed to fetch user from Supabase:",Z)}})();const G=Ge.channel(`users:${h.id}`).on("postgres_changes",{event:"*",schema:"public",table:"users",filter:`id=eq.${h.id}`},Z=>{const re=Z.new;if(re){const ge={...h,...re};y(ge),Pe(ge)}}).subscribe();return()=>{H=!0;try{G.unsubscribe()}catch{}}},[h.id,A]),S.useEffect(()=>{A||!Es||!(h!=null&&h.id)||h.id==="guest"||RN(h.id,h.name||(h.firstName?`${h.firstName} ${h.lastName||""}`.trim():void 0))},[h.id,A]);const yt=H=>{ve(G=>{const re=G.find(ge=>ge.name===H.name)?G.map(ge=>ge.name===H.name?H:ge):[...G,H];return localStorage.setItem("spv_packaging_presets",JSON.stringify(re)),re})},Ut=H=>{ve(G=>{const Z=G.filter(re=>re.name!==H);return localStorage.setItem("spv_packaging_presets",JSON.stringify(Z)),Z})},oe=H=>{de(G=>{const re=G.find(ge=>ge.name===H.name)?G.map(ge=>ge.name===H.name?H:ge):[...G,H];return localStorage.setItem("spv_material_presets",JSON.stringify(re)),re})},De=H=>{de(G=>{const Z=G.filter(re=>re.name!==H);return localStorage.setItem("spv_material_presets",JSON.stringify(Z)),Z})},Be=async(H,G)=>{var re;const Z=H.trim().toLowerCase();Se(null);try{const{data:ge,error:Ke}=await Ge.auth.signInWithPassword({email:Z,password:G});if(Ke)return console.warn("Supabase signInWithPassword failed:",Ke.message),Se(Ke.message||"Sign-in failed."),!1;if(!(ge!=null&&ge.user))return Se("Authentication failed - no user data returned."),!1;const ot=ge.user.id,{data:ue,error:me}=await Ge.from("users").select("*").eq("id",ot).single();if(me){console.warn("Failed to fetch user profile:",me);const St={...Pr,id:ot,email:Z,name:((re=ge.user.user_metadata)==null?void 0:re.full_name)||""};try{await Ge.from("users").upsert([Qt(St)])}catch(mt){console.warn("Failed to create basic user profile:",mt)}let lt=Jy(St);return Z==="spoilmevintagediy@gmail.com"&&(lt.isAdmin=!0),lt.isActive===!1?(Se("Account is deactivated."),!1):(y(lt),Pe(lt),Kr(lt),!0)}let Le=Jy({...ue,id:ot});return Z==="spoilmevintagediy@gmail.com"&&(Le.isAdmin=!0),Le.isActive===!1?(Se("Account is deactivated."),!1):(y(Le),Pe(Le),Kr(Le),!0)}catch(ge){return console.warn("Login error:",ge),Se((ge==null?void 0:ge.message)||String(ge)),!1}},ke=async H=>{const G={...Pr,...H,id:`user_${Date.now()}`,affiliateCode:`Spoilme-${Date.now().toString().slice(-6)}`,affiliateStats:H.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1}};try{if(!A){if(H.password&&H.email){const{data:Z,error:re}=await Ge.auth.signUp({email:H.email,password:H.password});re?console.warn("Supabase signUp failed:",re.message):Z!=null&&Z.user&&(G.id=Z.user.id)}await Ge.from("users").upsert([Qt(G)])}return y(G),Pe(G),!0}catch(Z){return console.error("Registration Failed",Z),y(G),Pe(G),!0}},We=()=>{y(Pr),localStorage.removeItem("spv_active_user");try{Ge.auth.signOut()}catch{}},Nt=async H=>{const G={...h,shippingAddress:H};if(y(G),Pe(G),!A&&h.id!=="guest")try{await Ge.from("users").update({shippingAddress:H}).eq("id",h.id)}catch(Z){console.error("Error saving address to DB",Z)}},ye=async()=>{if(A){alert("Cannot seed users in Demo Mode.");return}const H=[{...Pr,id:"u1",name:"Elize Test 1",email:"eliz@gmail.com",password:"test",isMember:!1,membershipTier:"none",affiliateCode:"Spoilme-ELIZ01",affiliateStats:{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...Pr,id:"u2",name:"Anna Test 2",email:"anna@gmail.com",password:"test",isMember:!0,membershipTier:"basic",loyaltyPoints:100,affiliateCode:"Spoilme-ANNA02",affiliateStats:{status:"pending",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...Pr,id:"u3",name:"Fay Test 3",email:"fay@gmail.com",password:"test",isMember:!0,membershipTier:"premium",loyaltyPoints:500,affiliateCode:"Spoilme-FAY003",affiliateStats:{status:"approved",totalSalesCount:45,totalSalesValue:4500,commissionRate:10,balance:450,recurringBalance:50}},{...Pr,id:"u4",name:"Debs Test 4",email:"debs@gmail.com",password:"test",isMember:!0,membershipTier:"deluxe",loyaltyPoints:1e3,affiliateCode:"Spoilme-DEBS04",affiliateStats:{status:"approved",totalSalesCount:150,totalSalesValue:15e3,commissionRate:15,balance:2250,recurringBalance:300}}];try{for(const G of H)try{const{error:Z}=await Ge.from("users").upsert([Qt(G)]);if(Z)throw Z}catch(Z){console.error("Failed to upsert test user into Supabase:",Z)}alert("Test Users Created!")}catch(G){console.error("Error seeding users:",G)}};S.useEffect(()=>{if(console.log("Loading products, isDemoMode:",A,"isSupabaseConfigured:",Es),console.log("Loading products, isDemoMode:",A,"isSupabaseConfigured:",Es),A||!Es){V(A?"demo":"local");const G=localStorage.getItem("spv_products"),re=(G?JSON.parse(G):B1).filter(ue=>ue.status==="published");s(re);const ge=localStorage.getItem("spv_categories");i(ge?JSON.parse(ge):mx);const Ke=localStorage.getItem("spv_vouchers");Ke&&k(JSON.parse(Ke));const ot=localStorage.getItem("spv_orders");c(ot?JSON.parse(ot):[]),P(!1);return}const H=setTimeout(()=>{_&&(z("Connection timed out"),P(!1))},5e3);try{const G=new Map,Z=async ue=>{if(!ue)return null;if(typeof ue=="string"){if(ue.startsWith("http")||ue.startsWith("data:")||ue.startsWith("blob:")||ue.startsWith("/"))return ue;if(ue.startsWith("gs://"))try{const me=ue.match(/^gs:\/\/([^/]+)\/(.+)$/);if(me){const Le=me[1],St=me[2],lt=`https://firebasestorage.googleapis.com/v0/b/${Le}/o/${encodeURIComponent(St)}?alt=media`;return G.set(ue,lt),lt}}catch(me){return console.error("Failed to convert gs:// URL to a public URL",ue,me),null}if(!ue.startsWith("http"))try{if(G.has(ue))return G.get(ue);const me=["public","products","images","spoilme"];for(const Le of me)try{const{data:St}=Ge.storage.from(Le).getPublicUrl(ue);if(St&&St.publicUrl)return G.set(ue,St.publicUrl),St.publicUrl}catch{}}catch{}return ue}else if(typeof ue=="object"&&(ue.fullPath||ue.path))try{const me=ue.fullPath||ue.path,Le=me+"::path";if(G.has(Le))return G.get(Le);const St=["public","products","images","spoilme"];for(const lt of St)try{const{data:mt}=Ge.storage.from(lt).getPublicUrl(me);if(mt&&mt.publicUrl)return G.set(Le,mt.publicUrl),mt.publicUrl}catch{}}catch(me){return console.error("Failed to convert storage object path to public URL",ue,me),null}return null},re=ue=>{if(typeof ue!="string")return ue;const me=ue.trim();if(!me||!(me.startsWith("{")&&me.endsWith("}")||me.startsWith("[")&&me.endsWith("]")))return ue;try{return JSON.parse(me)}catch{return ue}},ge=(...ue)=>{for(const me of ue)if(me!=null&&(typeof me!="string"||me.trim()!==""))return me},Ke=async ue=>{var _e,Fe;const me={};Object.entries(ue||{}).forEach(([He,gt])=>{const Yt=He.replace(/_([a-z])/g,(pr,Jr)=>Jr.toUpperCase());me[Yt]=gt}),me.options=re(me.options);const Le=me.options&&typeof me.options=="object"&&!Array.isArray(me.options)?me.options:{};me.id=ge(me.id,ue==null?void 0:ue.id),me.code=ge(me.code,me.sku,ue==null?void 0:ue.sku,ue==null?void 0:ue.code,Le==null?void 0:Le.sku,Le==null?void 0:Le.code);const St=ge(me.priceUSD,me.priceUsd,ue==null?void 0:ue.price_usd,ue==null?void 0:ue.priceUSD,Le==null?void 0:Le.priceUSD,Le==null?void 0:Le.priceUsd);St!==void 0&&(me.priceUSD=typeof St=="number"?St:parseFloat(String(St))||0);const lt=ge(me.compareAtPriceUSD,me.compareAtPriceUsd,ue==null?void 0:ue.compare_at_price_usd,ue==null?void 0:ue.compareAtPriceUSD,Le==null?void 0:Le.compareAtPriceUSD,Le==null?void 0:Le.compareAtPriceUsd);lt!==void 0&&(me.compareAtPriceUSD=typeof lt=="number"?lt:parseFloat(String(lt))||0);const mt=ge(me.memberPriceUSD,me.memberPriceUsd,ue==null?void 0:ue.member_price_usd,ue==null?void 0:ue.memberPriceUSD,Le==null?void 0:Le.memberPriceUSD,Le==null?void 0:Le.memberPriceUsd);if(mt!==void 0&&(me.memberPriceUSD=typeof mt=="number"?mt:parseFloat(String(mt))||0),!me.type&&(Le!=null&&Le.type)&&(me.type=Le.type),(!me.colors||Array.isArray(me.colors)&&me.colors.length===0)&&(Le!=null&&Le.colors)&&(me.colors=Le.colors),(!me.tags||Array.isArray(me.tags)&&me.tags.length===0)&&(Le!=null&&Le.tags)&&(me.tags=Le.tags),!me.material&&(Le!=null&&Le.material)&&(me.material=Le.material),!me.description&&(Le!=null&&Le.description)&&(me.description=Le.description),!me.name&&(Le!=null&&Le.name)&&(me.name=Le.name),!me.createdAt&&(ue!=null&&ue.created_at))try{me.createdAt=typeof ue.created_at=="string"?ue.created_at:(_e=ue.created_at)!=null&&_e.toISOString?ue.created_at.toISOString():String(ue.created_at)}catch{me.createdAt=String(ue.created_at)}if(!me.updatedAt&&(ue!=null&&ue.updated_at))try{me.updatedAt=typeof ue.updated_at=="string"?ue.updated_at:(Fe=ue.updated_at)!=null&&Fe.toISOString?ue.updated_at.toISOString():String(ue.updated_at)}catch{me.updatedAt=String(ue.updated_at)}const Jt=re(me.images);me.images=Array.isArray(Jt)?Jt:Jt?[Jt]:[];const kt=re(me.tags);me.tags=Array.isArray(kt)?kt:kt?[kt]:[];const R=re(me.colors);me.colors=Array.isArray(R)?R:R?[R]:[];const ne=re(me.seoKeywords);me.seoKeywords=Array.isArray(ne)?ne:ne?[ne]:[];const ze=re(me.reviews);me.reviews=Array.isArray(ze)?ze:ze?[ze]:[];try{if(me.images&&Array.isArray(me.images)){const He=await Promise.all(me.images.map(async gt=>await Z(gt)));me.images=He.filter(Boolean)}}catch(He){console.error("Failed resolving product images for",me.id||(ue==null?void 0:ue.id),He)}return me},ot=async()=>{try{const{data:ue,error:me}=await Ge.from("products").select("*").eq("status","published").order("created_at",{ascending:!1});if(console.log(" SUPABASE ERROR:",me),console.log(" SUPABASE DATA:",ue),!me&&ue){const lt=await Promise.all(ue.map(async mt=>await Ke(mt)));if(console.log("Loaded products from Supabase:",lt.length),V("supabase"),lt.length===0)try{const{data:mt}=await Ge.from("products").select("*").limit(5);console.warn("No published products found  sample rows from products table:",mt)}catch(mt){console.warn("Failed to fetch sample products for debug:",mt)}s(lt)}else if(me&&String((me==null?void 0:me.message)||(me==null?void 0:me.code)||"").toLowerCase().includes("permission"))try{const mt=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?`http://${window.location.hostname}:3001/api`:sI.REACT_APP_API_URL||"/api",Jt=await fetch(`${mt}/products?limit=100`);if(Jt.ok){const kt=await Jt.json(),R=Array.isArray(kt.products)?kt.products:[],ne=await Promise.all(R.map(async ze=>await Ke(ze)));console.log("Loaded products from server endpoint:",ne.length),V("supabase"),s(ne)}}catch(lt){console.warn("Fallback to /api/products failed:",lt)}const{data:Le,error:St}=await Ge.from("categories").select("*").order("created_at",{ascending:!1});if(!St&&Le&&Le.length>0){const lt=await Promise.all(Le.map(async mt=>{const Jt={};Object.entries(mt).forEach(([kt,R])=>{const ne=kt.replace(/_([a-z])/g,(ze,_e)=>_e.toUpperCase());Jt[ne]=R});try{if(Jt.image){const kt=await Z(Jt.image);kt&&(Jt.image=kt)}}catch{}return Jt}));i(lt)}else i(mx);if(h!=null&&h.isAdmin){const{data:lt}=await Ge.from("orders").select("*").order("created_at",{ascending:!1});lt&&c(lt)}else if(h!=null&&h.email){const{data:lt}=await Ge.from("orders").select("*").eq("customer_email",h.email).order("created_at",{ascending:!1});lt&&c(lt)}clearTimeout(H),P(!1)}catch(ue){console.warn("Supabase fetch failed, falling back to Firestore where available:",ue)}};if(Es){ot();const ue=Ge.channel("public:products").on("postgres_changes",{event:"*",schema:"public",table:"products"},()=>ot()).subscribe(),me=Ge.channel("public:categories").on("postgres_changes",{event:"*",schema:"public",table:"categories"},()=>ot()).subscribe(),Le=Ge.channel("public:orders").on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>ot()).subscribe();return()=>{clearTimeout(H);try{ue.unsubscribe()}catch{}try{me.unsubscribe()}catch{}try{Le.unsubscribe()}catch{}}}}catch(G){console.log("Try-catch error in products useEffect:",G),clearTimeout(H),P(!1)}},[A,h.isAdmin,h.email]);const J=(H,G={})=>{f(Z=>{const re=Z.findIndex(ue=>ue.id===H.id&&ue.selectedSize===G.selectedSize&&ue.selectedMaterial===G.selectedMaterial&&ue.selectedChainStyle===G.selectedChainStyle&&ue.selectedChainLength===G.selectedChainLength),ge=re>-1?Z[re]:null,Ke=ge?ge.quantity:0;let ot=H.stock;if(H.type==="Ring"&&G.selectedSize&&H.ringStock&&(ot=H.ringStock[G.selectedSize]||0),Ke>=ot)return alert(`Sorry, you can't add more of this item. We only have ${ot} in stock.`),Z;if(re>-1){const ue=[...Z];return ue[re]={...ue[re],quantity:ue[re].quantity+1},ue}return[...Z,{...H,quantity:1,...G}]})},je=(H,G={})=>{f(Z=>Z.filter(re=>!(re.id===H&&re.selectedSize===G.selectedSize&&re.selectedMaterial===G.selectedMaterial&&re.selectedChainStyle===G.selectedChainStyle&&re.selectedChainLength===G.selectedChainLength)))},jt=(H,G,Z={})=>{if(G<=0){je(H,Z);return}const re=e.find(ot=>ot.id===H);if(!re)return;let ge=re.stock;re.type==="Ring"&&Z.selectedSize&&re.ringStock&&(ge=re.ringStock[Z.selectedSize]||0);const Ke=Math.min(G,ge);G>ge&&alert(`Sorry, we only have ${ge} of this item in stock. Quantity has been adjusted.`),f(ot=>ot.map(ue=>ue.id===H&&ue.selectedSize===Z.selectedSize&&ue.selectedMaterial===Z.selectedMaterial&&ue.selectedChainStyle===Z.selectedChainStyle&&ue.selectedChainLength===Z.selectedChainLength?{...ue,quantity:Ke}:ue))},ft=()=>{f([]),K(null)},Wt=H=>{y(G=>{const re=G.wishlist.includes(H)?G.wishlist.filter(Ke=>Ke!==H):[...G.wishlist,H],ge={...G,wishlist:re};return Pe(ge),ge})},Ft=async H=>{if(!h.id||h.id==="guest"){console.error("Cannot apply for affiliate as guest user directly.");return}const G={userId:h.id,status:"pending",appliedAt:new Date().toISOString(),autoApproveAt:new Date(Date.now()+3600*1e3),userEmail:h.email,userName:`${H.name} ${H.surname}`,gender:H.gender,reason:H.reason,socials:H.socials};if(!A)try{await Ge.from("affiliate_applications").insert([G])}catch(ge){throw console.error("Error submitting affiliate application to Supabase:",ge),ge}const Z={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},re={...h,name:`${H.name} ${H.surname}`,birthday:H.dob,notifications:[Z,...h.notifications],affiliateStats:{...h.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1},status:"pending",gender:H.gender,joinReason:`${H.reason} | Socials: ${H.socials}`}};y(re),Pe(re),!A&&h.id!=="guest"&&await $e(h.id,Qt(re))},Ss=async(H,G)=>{if(A)return;const Z={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Welcome to the Partnership Program!",message:`Welcome to Spoil Me Vintage Partnership Program! We are thrilled to have you on the team.${G?` Note from admin: ${G}`:""}`,date:new Date().toISOString(),isRead:!1};try{const{data:re}=await Ge.from("users").select("notifications").eq("id",H).maybeSingle(),ge=re&&re.notifications||[];await Ge.from("users").update({affiliateStats:{status:"approved",commissionRate:10,adminNote:G||""},notifications:[Z,...ge]}).eq("id",H),await tt(H,Z.title,Z.message,"/#/affiliate-program")}catch(re){console.error("approveAffiliate failed:",re)}},as=async(H,G)=>{if(A)return;const Z={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Partnership Application Update",message:`We regret to inform you that your application has been declined.${G?` Note: ${G}`:""}`,date:new Date().toISOString(),isRead:!1};try{const{data:re}=await Ge.from("users").select("notifications").eq("id",H).maybeSingle(),ge=re&&re.notifications||[];await Ge.from("users").update({affiliateStats:{status:"rejected",adminNote:G||""},notifications:[Z,...ge]}).eq("id",H),await tt(H,Z.title,Z.message,"/#/notifications")}catch(re){console.error("rejectAffiliate failed:",re)}},Me=async(H,G)=>{if(A)return;const Z={id:`aff_msg_${Date.now()}`,type:"affiliate_msg",title:"Partnership Update",message:G,date:new Date().toISOString(),isRead:!1};await ht(H,Z),await tt(H,Z.title,Z.message,"/#/notifications")},fs=async(H,G)=>{A||await $e(H,{affiliateStats:{...h.affiliateStats||{},commissionRate:G}})},os=async(H,G)=>{A||await $e(H,{affiliateStats:{...h.affiliateStats||{},parentId:G}})},Ws=async()=>{const H={...h,affiliateStats:{...h.affiliateStats,hasContentAccess:!0}};y(H),Pe(H),!A&&h.id!=="guest"&&await $e(h.id,Qt(H))},ur=async()=>{const H={...h,affiliateStats:{...h.affiliateStats,isElite:!0}};y(H),Pe(H),!A&&h.id!=="guest"&&await $e(h.id,Qt(H))},Ds=async(H,G)=>{var ot;if(!A&&!Ge)return{success:!1,message:"Database not ready"};let Z=null;if(A)if(h.affiliateCode===H)Z=h;else return{success:!1,message:"In Demo Mode, only your own code works."};else{const{data:ue,error:me}=await Ge.from("users").select("*").eq("affiliateCode",H).limit(1).maybeSingle();ue&&!me&&(Z=ue)}if(!Z)return{success:!1,message:"Affiliate code not found."};if(((ot=Z.affiliateStats)==null?void 0:ot.status)!=="approved"&&!A)return{success:!1,message:"Affiliate not approved."};const re=Z.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0},ge=G*re.commissionRate/100,Ke={...re,totalSalesCount:re.totalSalesCount+1,totalSalesValue:re.totalSalesValue+G,balance:re.balance+ge};if(Ke.totalSalesCount>=500?Ke.commissionRate=20:Ke.totalSalesCount>=100?Ke.commissionRate=15:Ke.totalSalesCount>=50&&(Ke.commissionRate=11),A)y({...Z,affiliateStats:Ke});else{const ue={id:`sale_${Date.now()}`,type:"system",title:"New Partnership Sale!",message:`You earned R${ge.toFixed(2)} commission!`,date:new Date().toISOString(),isRead:!1};try{await Ge.from("users").update({affiliateStats:Ke,notifications:[ue,...Z.notifications||[]]}).eq("id",Z.id)}catch(me){console.error("Failed to update affiliate user after sale:",me)}}return{success:!0,message:`Sale simulated! Added R${ge.toFixed(2)}.`}},Ms=async(H,G)=>{if(A){if(h.id===H){const Z={...h,loyaltyPoints:h.loyaltyPoints+G};y(Z),Pe(Z)}return}if(h.id===H){const Z={...h,loyaltyPoints:h.loyaltyPoints+G};y(Z),Pe(Z),await Ge.from("users").update({loyaltyPoints:Z.loyaltyPoints}).eq("id",H)}else try{const{data:Z}=await Ge.from("users").select("loyaltyPoints").eq("id",H).maybeSingle(),re=(Z&&Z.loyaltyPoints||0)+G;await Ge.from("users").update({loyaltyPoints:re}).eq("id",H)}catch(Z){console.error("adminAdjustPoints failed:",Z)}},Mn=async()=>{if(A)return[];try{const{data:H,error:G}=await Ge.from("users").select("*");if(G)throw G;return(H||[]).map(Z=>Qt(Z))}catch(H){return console.error("getAllUsers failed:",H),[]}},On=async H=>{const G=Qt(H),Z=[G,...e];if(s(Z),!A&&Es)try{console.log("DEBUG: Final Product Data to Firestore (Add):",JSON.stringify(G,null,2));try{const{error:re}=await Ge.from("products").upsert([G]);if(re)throw re;z(null)}catch(re){console.warn("Supabase addProduct failed, saving to local storage instead:",re);try{const ge=JSON.parse(localStorage.getItem("spv_products")||"[]");localStorage.setItem("spv_products",JSON.stringify([G,...ge]))}catch{}}z(null)}catch(re){console.error("CRITICAL FIRESTORE ERROR (addProduct):",re,"Product:",G);try{localStorage.setItem("spv_products",JSON.stringify(Z)),z(`Failed to add product: ${re.code||"Unknown Error"}. Changes saved locally.`),console.warn("Firestore write failed  product saved to localStorage instead.")}catch(ge){throw console.error("Fallback localStorage save also failed:",ge),new Error(`Critical Save Failure. Firestore and LocalStorage failed. (Details: ${ge.message})`)}throw new Error(re.message||"Failed to add product.")}else try{localStorage.setItem("spv_products",JSON.stringify(Z))}catch(re){throw console.error("Failed to save products to localStorage on addProduct:",re),new Error("Failed to add product in Demo Mode: LocalStorage error.")}},ps=async H=>{const G=Qt(H),Z=e.map(re=>re.id===G.id?G:re);if(s(Z),!A&&Es)try{console.log("DEBUG: Final Product Data to Firestore (Update):",JSON.stringify(G,null,2));try{const{error:re}=await Ge.from("products").update(G).eq("id",G.id);if(re)throw re;z(null)}catch(re){console.warn("Supabase updateProduct failed, saving to local storage instead:",re);try{const Ke=JSON.parse(localStorage.getItem("spv_products")||"[]").map(ot=>ot.id===G.id?G:ot);localStorage.setItem("spv_products",JSON.stringify(Ke))}catch{}}}catch(re){console.error("CRITICAL FIRESTORE ERROR (updateProduct):",re,"Product:",G);try{localStorage.setItem("spv_products",JSON.stringify(Z)),z(`Failed to update product: ${re.code||"Unknown Error"}. Changes saved locally.`),console.warn("Firestore write failed  update saved to localStorage instead.")}catch(ge){throw console.error("Fallback localStorage save also failed:",ge),new Error(`Critical Save Failure. Firestore and LocalStorage failed. (Details: ${ge.message})`)}throw new Error(re.message||"Failed to update product.")}else try{localStorage.setItem("spv_products",JSON.stringify(Z))}catch(re){throw console.error("Failed to save products to localStorage on updateProduct:",re),new Error("Failed to update product in Demo Mode: LocalStorage error.")}},Os=async H=>{const G=e.filter(Z=>Z.id!==H);if(s(G),!A&&Es)try{console.log("DEBUG: Final Product Delete to Supabase/Firestore:",H);try{const{error:Z}=await Ge.from("products").delete().eq("id",H);if(Z)throw Z}catch(Z){console.warn("Supabase deleteProduct failed, removing from local storage instead:",Z);try{const re=JSON.parse(localStorage.getItem("spv_products")||"[]");localStorage.setItem("spv_products",JSON.stringify(re.filter(ge=>ge.id!==H)))}catch{}}z(null)}catch(Z){console.error("CRITICAL FIRESTORE ERROR (deleteProduct):",Z,"productId:",H);try{localStorage.setItem("spv_products",JSON.stringify(G)),z(`Failed to delete product: ${Z.code||"Unknown Error"}. Change saved locally.`),console.warn("Firestore delete failed  delete reflected locally.")}catch(re){throw console.error("Fallback localStorage save also failed:",re),new Error(`Critical Delete Failure. Firestore and LocalStorage failed. (Details: ${re.message})`)}throw new Error(Z.message||"Failed to delete product.")}else try{localStorage.setItem("spv_products",JSON.stringify(G))}catch(Z){console.error("Failed to save products to localStorage on deleteProduct:",Z)}},$t=async H=>{const G=Qt(H);if(c(Z=>[G,...Z]),!A&&Es)try{const{error:Z}=await Ge.from("orders").upsert([G]);if(Z)throw Z}catch(Z){console.error("Failed to addOrder to Supabase, saving to local storage instead:",Z);try{const re=JSON.parse(localStorage.getItem("spv_orders")||"[]");localStorage.setItem("spv_orders",JSON.stringify([G,...re]))}catch{}}},ks=async H=>{const G=Qt(H);if(c(Z=>Z.map(re=>re.id===G.id?G:re)),!A&&Es)try{const{error:Z}=await Ge.from("orders").update(G).eq("id",G.id);if(Z)throw Z}catch(Z){console.error("Failed to updateOrder in Supabase, saving to local storage instead:",Z);try{const ge=JSON.parse(localStorage.getItem("spv_orders")||"[]").map(Ke=>Ke.id===G.id?G:Ke);localStorage.setItem("spv_orders",JSON.stringify(ge))}catch{}}},ts=async H=>{if(c(G=>G.filter(Z=>Z.id!==H)),!A&&Es)try{const{error:G}=await Ge.from("orders").delete().eq("id",H);if(G)throw G}catch(G){console.error("Failed to deleteOrder in Supabase, removing from local storage instead:",G);try{const Z=JSON.parse(localStorage.getItem("spv_orders")||"[]");localStorage.setItem("spv_orders",JSON.stringify(Z.filter(re=>re.id!==H)))}catch{}}},we=async H=>{const G=Qt(H);if(i(Z=>[...Z,G]),!A&&Es)try{const{error:Z}=await Ge.from("categories").upsert([G]);if(Z)throw Z}catch(Z){console.error("Supabase addCategory error, saving to local storage instead:",Z);try{const re=JSON.parse(localStorage.getItem("spv_categories")||"[]");localStorage.setItem("spv_categories",JSON.stringify([G,...re]))}catch{}}else localStorage.setItem("spv_categories",JSON.stringify([...r,G]))},Je=async H=>{const G=Qt(H);if(i(Z=>Z.map(re=>re.id===G.id?G:re)),!A&&Es)try{const{error:Z}=await Ge.from("categories").update(G).eq("id",G.id);if(Z)throw Z}catch(Z){console.error("Supabase updateCategory error, saving to local storage instead:",Z);try{const ge=JSON.parse(localStorage.getItem("spv_categories")||"[]").map(Ke=>Ke.id===G.id?G:Ke);localStorage.setItem("spv_categories",JSON.stringify(ge))}catch{}}else{const Z=r.map(re=>re.id===G.id?G:re);localStorage.setItem("spv_categories",JSON.stringify(Z))}},Ct=async H=>{if(i(G=>G.filter(Z=>Z.id!==H)),!A&&Es)try{const{error:G}=await Ge.from("categories").delete().eq("id",H);if(G)throw G}catch(G){console.error("Supabase deleteCategory error, removing from local storage instead:",G);try{const Z=JSON.parse(localStorage.getItem("spv_categories")||"[]");localStorage.setItem("spv_categories",JSON.stringify(Z.filter(re=>re.id!==H)))}catch{}}else{const G=r.filter(Z=>Z.id!==H);localStorage.setItem("spv_categories",JSON.stringify(G))}},Et=async H=>{const G=Qt(H);i(G),A&&localStorage.setItem("spv_categories",JSON.stringify(G))},It=H=>N(G=>[...G,H]),Dt=H=>{const G=Qt(H);k(re=>[...re,G]);const Z=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify([...Z,G]))},Lt=H=>{k(Z=>Z.filter(re=>re.code!==H));const G=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify(G.filter(Z=>Z.code!==H)))},Vt=H=>{const G=T.find(Z=>Z.code===H);return G?(K(G),!0):!1},Gn=()=>{localStorage.clear(),window.location.reload()},un=()=>u.reduce((H,G)=>H+(G.price+(G.selectedMaterialModifier||0))*G.quantity,0),hn=async H=>{var ue;if(!h.email)throw new Error("User must be logged in to checkout.");const G={...H,id:`ord_${Date.now()}`,orderNumber:`#SMV-${Date.now().toString().slice(-6)}`,date:new Date().toISOString(),customerName:h.name,customerEmail:h.email,status:"Pending"};await $t(G),h.affiliateCode&&h.affiliateCode!=="none"&&await wi(u,G.id,h.affiliateCode);const Z=[];for(const me of u)(ue=me.tags)!=null&&ue.includes("Voucher")||Z.push({id:`notif_${Date.now()}_${me.id}`,type:"review_request",title:"How was your purchase?",message:`Review ${me.name} to earn 100 Points!`,productId:me.id,productName:me.name,date:new Date().toISOString(),isRead:!1});let re=0;const ge=un();h!=null&&h.storeCredit&&h.storeCredit>0&&h.creditCurrency===te&&(re=Math.min(ge,h.storeCredit));const Ke=Math.floor(te==="ZAR"?H.total/10:H.total/3),ot={...h,loyaltyPoints:Math.max(0,h.loyaltyPoints+Ke-(H.pointsToRedeem||0)),storeCredit:Math.max(0,(h.storeCredit||0)-re),notifications:[...Z,...h.notifications]};return y(ot),Pe(ot),!A&&h.id!=="guest"&&await $e(h.id,Qt(ot)),G},hr=async(H,G)=>{const Z="GV-"+Math.random().toString(36).substr(2,9).toUpperCase(),re={code:Z,discountType:"fixed",value:H,minSpend:H,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};Dt(re);const ge={id:`gift_${Date.now()}`,type:"gift_ready",title:"Gift Ready",message:"Your voucher is ready.",date:new Date().toISOString(),isRead:!1,voucherData:{code:Z,amount:H,meta:G}},Ke={...h,notifications:[ge,...h.notifications]};y(Ke),Pe(Ke),!A&&h.id!=="guest"&&await $e(h.id,Qt(Ke))},Ls=async(H,G,Z,re)=>{if(h.id==="guest")return;const ge=e.find(ot=>ot.id===H);if(ge){const ot={id:`rev_${Date.now()}`,userName:h.name,location:"Verified Buyer",content:Z,rating:G,date:new Date().toLocaleDateString()};await ps({...ge,reviews:[ot,...ge.reviews||[]]})}const Ke={...h,loyaltyPoints:h.loyaltyPoints+100,notifications:h.notifications.filter(ot=>ot.id!==re)};y(Ke),Pe(Ke),!A&&h.id!=="guest"&&await $e(h.id,Qt(Ke))},vi=async H=>{const G={...h,loyaltyPoints:h.loyaltyPoints+50};y(G),Pe(G),!A&&h.id!=="guest"&&await $e(h.id,{loyaltyPoints:G.loyaltyPoints})},Wr=async(H,G)=>{if(h.id==="guest")return;const Z=h.socialRewards||{};if(Z[H])return;const re={...h,loyaltyPoints:h.loyaltyPoints+100,socialRewards:{...Z,[H]:!0},socialHandles:{...h.socialHandles,[H]:G}};y(re),Pe(re),!A&&h.id!=="guest"&&await $e(h.id,Qt(re))},Hr=(H,G,Z="system")=>{const re={id:`sys_${Date.now()}`,type:Z,title:H,message:G,date:new Date().toISOString(),isRead:!1},ge={...h,notifications:[re,...h.notifications]};y(ge),Pe(ge)},en=()=>{try{const H=JSON.stringify(e);return H.length>0?{status:"success",details:`Serialization OK. Size: ${(H.length/1024).toFixed(2)} KB`}:{status:"warning",details:"Empty products."}}catch(H){return{status:"error",details:`Error: ${H.message}`}}},Gr=()=>{xe(H=>H==="ZAR"?"USD":"ZAR")};S.useEffect(()=>{$(Yy(q))},[q]);const wi=async(H,G,Z)=>{var re,ge,Ke,ot;if(A){if(h.affiliateCode===Z){const ue=h.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,weeklyMilestones:{membershipsSold:0,salesValue:0,vaultItemsSold:0,weekStart:""}},me=H.reduce((St,lt)=>St+(te==="ZAR"?lt.price:lt.priceUSD)*lt.quantity,0),Le={...ue,totalSalesCount:ue.totalSalesCount+H.length,totalSalesValue:ue.totalSalesValue+me,balance:ue.balance+me*(ue.commissionRate/100)};y({...h,affiliateStats:Le}),Pe({...h,affiliateStats:Le})}return}try{const{data:ue}=await Ge.from("users").select("*").eq("affiliateCode",Z).limit(1).maybeSingle();if(!ue||((re=ue.affiliateStats)==null?void 0:re.status)!=="approved")return;const me=ue.affiliateStats,Le=H.filter(_e=>!_e.vaultItem),St=H.filter(_e=>_e.vaultItem);let lt=0,mt=0,Jt=0;const kt=[];for(const _e of Le){const Fe=te==="ZAR"?_e.price:_e.priceUSD,He=me.commissionRate/100,gt=Fe*_e.quantity*He;lt+=gt,kt.push({id:`comm_${Date.now()}_${_e.id}`,affiliateId:ue.id,orderId:G,itemId:_e.id,itemName:_e.name,itemType:"standard",basePrice:Fe,commissionRate:me.commissionRate,commissionAmount:gt,currency:te,date:new Date().toISOString()})}for(const _e of St){const Fe=te==="ZAR"?_e.price:_e.priceUSD,He=Fe*_e.quantity*.01;mt+=He,Jt+=_e.quantity,kt.push({id:`comm_${Date.now()}_${_e.id}`,affiliateId:ue.id,orderId:G,itemId:_e.id,itemName:_e.name,itemType:"vault",basePrice:Fe,commissionRate:1,commissionAmount:He,currency:te,date:new Date().toISOString()})}const R=lt+mt,ne={...me,totalSalesCount:me.totalSalesCount+H.length,totalSalesValue:me.totalSalesValue+H.reduce((_e,Fe)=>_e+(te==="ZAR"?Fe.price:Fe.priceUSD)*Fe.quantity,0),balance:(me.balance||0)+R,vaultPurchasesThisMonth:(me.vaultPurchasesThisMonth||0)+Jt,weeklyMilestones:{...me.weeklyMilestones,salesValue:(((ge=me.weeklyMilestones)==null?void 0:ge.salesValue)||0)+H.reduce((_e,Fe)=>_e+(te==="ZAR"?Fe.price:Fe.priceUSD)*Fe.quantity,0),vaultItemsSold:(((Ke=me.weeklyMilestones)==null?void 0:Ke.vaultItemsSold)||0)+Jt}};ne.totalSalesValue>=5e4?ne.commissionRate=20:ne.totalSalesValue>=15e3?ne.commissionRate=15:ne.totalSalesValue>=5e3&&(ne.commissionRate=11);const ze={id:`commission_${Date.now()}`,type:"system",title:"New Commission Earned!",message:`You earned ${te==="ZAR"?"R":"$"}${R.toFixed(2)} from this sale!`,date:new Date().toISOString(),isRead:!1};if(await Ge.from("users").update({affiliateStats:ne,notifications:[ze,...ue.notifications||[]]}).eq("id",ue.id),me.parentId)try{const{data:_e}=await Ge.from("users").select("*").eq("id",me.parentId).maybeSingle();if(_e&&((ot=_e.affiliateStats)==null?void 0:ot.status)==="approved"){const Fe=_e.affiliateStats,He=R*.01,gt={...Fe,balance:(Fe.balance||0)+He},Yt={id:`team_bonus_${Date.now()}`,type:"system",title:"Team Leader Bonus",message:`You earned ${te==="ZAR"?"R":"$"}${He.toFixed(2)} from a recruit's sale!`,date:new Date().toISOString(),isRead:!1};await Ge.from("users").update({affiliateStats:gt,notifications:[Yt,..._e.notifications||[]]}).eq("id",_e.id)}}catch(_e){console.error("Failed to process parent commission",_e)}try{kt.length>0&&await Ge.from("commission_records").insert(kt)}catch(_e){console.error("Failed to persist commission_records to Supabase:",_e);const Fe=JSON.parse(localStorage.getItem("commission_records")||"[]");localStorage.setItem("commission_records",JSON.stringify([...Fe,...kt]))}try{const _e=[],Fe=new Date().toISOString().split("T")[0];if(ne.weeklyMilestones.membershipsSold>=5&&!localStorage.getItem(`milestone_${ue.id}_sprinter_${Fe}`)){const gt=te==="ZAR"?50:5;ne.balance+=gt,_e.push({id:`milestone_${Date.now()}`,affiliateId:ue.id,type:"sprinter",achievedAt:new Date().toISOString(),bonusAmount:gt,currency:te,weekStart:Fe}),localStorage.setItem(`milestone_${ue.id}_sprinter_${Fe}`,"true")}if(_e.length>0){const He=JSON.parse(localStorage.getItem("affiliate_milestones")||"[]");localStorage.setItem("affiliate_milestones",JSON.stringify([...He,..._e]))}}catch(_e){console.warn("Failed processing affiliate milestones locally",_e)}}catch(ue){console.error("Failed to process affiliate commissions",ue)}},fr=async H=>{if(!(A||h.id==="guest"))try{const G={id:`acct_close_admin_${Date.now()}`,type:"system",title:"Account Closure Request",message:`${h.name} (${h.email}) has requested account closure. Reason: ${H}`,date:new Date().toISOString(),isRead:!1};await Ge.from("users").update({isActive:!1,closureReason:H,closureRequestedAt:new Date().toISOString(),scheduledDeletionAt:new Date(Date.now()+1440*60*1e3).toISOString()}).eq("id",h.id);const{data:Z}=await Ge.from("users").select("notifications").eq("email","spoilmevintagediy@gmail.com").limit(1).maybeSingle();if(Z){const ge=Z.notifications||[];await Ge.from("users").update({notifications:[G,...ge]}).eq("email","spoilmevintagediy@gmail.com")}const re={id:`acct_close_user_${Date.now()}`,type:"system",title:"Account Closure Requested",message:"Your account closure has been requested. Your account and all data will be permanently deleted within 24 hours.",date:new Date().toISOString(),isRead:!1};await ht(h.id,re),await tt(h.id,re.title,re.message,"/#/profile")}catch(G){throw console.error("Error closing account:",G),G}},Kr=H=>{"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"USER_DATA",name:H.name||H.firstName+" "+H.lastName||"valued customer"})},Ln=async H=>{if(!h.id||h.id==="guest"){console.error("Cannot apply for artist as guest user.");return}const G={uid:h.id,name:H.name,surname:H.surname,artistTradeName:H.artistTradeName,contactNumber:H.contactNumber,email:H.email,productImages:H.productImages,status:"pending",submittedAt:new Date().toISOString()};if(!A)try{await Ge.from("artist_applications").insert([G])}catch(ge){throw console.error("Error submitting artist application:",ge),ge}const Z={id:`artist_app_${Date.now()}`,type:"system",title:"Artist Partnership Application Received",message:"Your application to become an artist partner is pending review. We will contact you soon!",date:new Date().toISOString(),isRead:!1},re={...h,notifications:[Z,...h.notifications]};y(re),Pe(re),!A&&h.id!=="guest"&&await $e(h.id,Qt(re))};return t.jsx(DN.Provider,{value:{products:e,categories:r,cart:u,user:h,currentUser:h,specials:v,vouchers:T,appliedVoucher:F,affiliateLeaderboard:ee,memberCount:D,weeklyWinners:I,isDemoMode:A,isLoading:_,dbConnectionError:L,db:Ge,orders:o,isStickyProgressBarVisible:Ie,setIsStickyProgressBarVisible:le,currency:te,setCurrency:xe,toggleCurrency:Gr,packagingPresets:be,materialPresets:Y,savePackagingPreset:yt,deletePackagingPreset:Ut,saveMaterialPreset:oe,deleteMaterialPreset:De,login:Be,logout:We,register:ke,addToCart:J,removeFromCart:je,updateCartQuantity:jt,clearCart:ft,toggleWishlist:Wt,checkout:hn,submitReview:Ls,addSystemNotification:Hr,processGiftVoucherPurchase:hr,applyForAffiliate:Ft,approveAffiliate:Ss,rejectAffiliate:as,sendAffiliateMessage:Me,buyAffiliateContent:Ws,joinAffiliateElite:ur,simulateAffiliateSale:Ds,updateAffiliateTier:fs,assignAffiliateParent:os,applyForArtist:Ln,addProduct:On,updateProduct:ps,deleteProduct:Os,addOrder:$t,updateOrder:ks,deleteOrder:ts,addCategory:we,updateCategory:Je,deleteCategory:Ct,replaceCategories:Et,addSpecial:It,resetStore:Gn,seedTestUsers:ye,getAllUsers:Mn,runDataDiagnostics:en,adminAdjustPoints:Ms,getCartTotal:un,addVoucher:Dt,deleteVoucher:Lt,applyExternalVoucher:Vt,setAppliedVoucher:K,shareProduct:vi,claimSocialReward:Wr,updateUserAddress:Nt,updateUser:qt,manualWinner:q,setManualWinner:Ae,auth:Ge.auth,authErrorMessage:fe,clearAuthError:Qe,signInWithLocalDevAdmin:Ne,isSupabaseConfigured:Es,dataSource:O,closeAccount:fr},children:n})},vt=()=>{const n=S.useContext(DN);if(!n)throw new Error("useStore must be used within StoreProvider");return n};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(n,e)=>{const s=S.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:f,...h},y)=>S.createElement("svg",{ref:y,...iI,width:i,height:i,stroke:r,strokeWidth:c?Number(o)*24/Number(i):o,className:["lucide",`lucide-${aI(n)}`,u].join(" "),...h},[...e.map(([v,N])=>S.createElement(v,N)),...Array.isArray(f)?f:[f]]));return s.displayName=`${n}`,s};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=Te("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=Te("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=Te("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=Te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=Te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=Te("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Te("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=Te("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=Te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=Te("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=Te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=Te("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=Te("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=Te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=Te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=Te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=Te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=Te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=Te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=Te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=Te("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Te("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=Te("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=Te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=Te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=Te("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=Te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=Te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=Te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=Te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Te("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=Te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=Te("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Te("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=Te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=Te("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=Te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=Te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=Te("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=Te("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Te("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=Te("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=Te("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=Te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=Te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=Te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=Te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=Te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=Te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Te("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=Te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=Te("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=Te("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=Te("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=Te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=Te("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=Te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=Te("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=Te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=Te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=Te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=Te("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=Te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=Te("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=Te("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=Te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=Te("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=Te("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=Te("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=Te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Te("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=Te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=Te("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=Te("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=Te("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=Te("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=Te("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=Te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=Te("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Te("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Te("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Te("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=Te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=Te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=Te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=Te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=Te("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),sb=["Lerato in Sandton just unlocked The Secret Vault.","Thandi in Durban just unlocked The Secret Vault.","Johan in Cape Town just unlocked The Secret Vault.","Bianca in Pretoria just unlocked The Secret Vault.","Jessica in New York just unlocked The Secret Vault.","Emily in Texas just unlocked The Secret Vault.","Ashley in California just unlocked The Secret Vault.","Sarah in Florida just unlocked The Secret Vault.","Sophie in London just unlocked The Secret Vault.","Emma in Manchester just unlocked The Secret Vault."],MI=()=>{const{weeklyWinners:n,currency:e}=vt(),[s,r]=S.useState(!1),[i,o]=S.useState(""),[c,u]=S.useState("winner");return S.useEffect(()=>{let f;const h=()=>{if(Math.random()<.6&&n.length>0){const T=n[Math.floor(Math.random()*n.length)],k=T.currency==="ZAR"?`R${T.prize}`:`$${T.prize}`,_=`${T.name} just won ${k} in the Weekly Draw!`;o(_),u("winner")}else{const T=sb[Math.floor(Math.random()*sb.length)];o(T),u("vault")}r(!0),setTimeout(()=>{r(!1)},6e3);const N=Math.floor(Math.random()*20001+2e4);f=setTimeout(h,N)};return f=setTimeout(h,5e3),()=>clearTimeout(f)},[n,e]),i?t.jsx("div",{className:`fixed bottom-4 left-4 z-50 max-w-xs w-full transition-all duration-700 transform ${s?"translate-y-0 opacity-100":"translate-y-20 opacity-0 pointer-events-none"}`,children:t.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md border border-gray-800 p-3 rounded-xl shadow-2xl flex items-center gap-3 relative overflow-hidden group",children:[t.jsx("button",{onClick:()=>r(!1),className:"absolute top-1 right-1 text-gray-500 hover:text-white p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(us,{size:12})}),t.jsx("div",{className:`w-8 h-8 shrink-0 rounded-full border flex items-center justify-center ${c==="winner"?"border-yellow-500/30 bg-yellow-900/20":"border-purple-500/30 bg-purple-900/20"}`,children:c==="winner"?t.jsx(dr,{size:16,className:"text-yellow-400"}):t.jsx(Ot,{size:16,className:"text-purple-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-xs text-gray-200 leading-tight",children:i}),t.jsx("div",{className:"text-[9px] text-gray-500 mt-1",children:"Just now"})]})]})}):null},OI=500,qN=({subtotal:n,isSticky:e=!1,onContinueShopping:s,onClose:r})=>{const{currency:i}=vt();if(i==="USD")return null;const o=()=>i==="ZAR"?"R":"$",c=(N,T)=>i==="ZAR"?N:i==="USD"?0:N,u=c(OI),f=u-n,h=Math.min(n/u*100,100),y=n>=u,v=y?"Congratulations! You've unlocked FREE shipping!":`You're ${o()}${c(f).toFixed(2)} away from free shipping!`;return e?t.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[t.jsx("div",{className:"p-2 bg-pink-900/20 text-pink-500 rounded-full border border-pink-500/30",children:t.jsx(Fr,{size:20})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:`text-sm font-bold ${y?"text-green-400":"text-white"}`,children:v}),t.jsx("div",{className:"w-full bg-black/50 rounded-full h-2 mt-1 overflow-hidden border border-gray-700",children:t.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${y?"bg-green-500":"bg-pink-500"}`,style:{width:`${h}%`}})})]}),t.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-white",children:t.jsx(us,{size:18})})]})}):t.jsx("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-pink-500/30 rounded-2xl p-6 shadow-lg mb-8",children:t.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[t.jsx("div",{className:"p-3 bg-pink-900/30 text-pink-400 rounded-full border border-pink-500/30",children:t.jsx(Fr,{size:28})}),t.jsxs("div",{className:"flex-1 text-center md:text-left",children:[t.jsx("h3",{className:`text-lg font-bold ${y?"text-green-400":"text-white"}`,children:v}),t.jsx("div",{className:"w-full bg-black rounded-full h-2.5 mt-2 overflow-hidden border border-gray-700 shadow-inner",children:t.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${y?"bg-green-500":"bg-pink-500"} shadow-[inset_0_1px_1px_rgba(255,255,255,0.2)]`,style:{width:`${h}%`}})})]}),!y&&t.jsxs("button",{onClick:s,className:"w-full md:w-auto mt-2 md:mt-0 px-6 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:["Continue Shopping ",t.jsx(Qs,{size:18})]})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var al;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(al||(al={}));class dp extends Error{constructor(e,s,r){super(e),this.message=e,this.code=s,this.data=r}}const LI=n=>{var e,s;return n!=null&&n.androidBridge?"android":!((s=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||s===void 0)&&s.bridge?"ios":"web"},UI=n=>{const e=n.CapacitorCustomPlatform||null,s=n.Capacitor||{},r=s.Plugins=s.Plugins||{},i=()=>e!==null?e.name:LI(n),o=()=>i()!=="web",c=v=>{const N=h.get(v);return!!(N!=null&&N.platforms.has(i())||u(v))},u=v=>{var N;return(N=s.PluginHeaders)===null||N===void 0?void 0:N.find(T=>T.name===v)},f=v=>n.console.error(v),h=new Map,y=(v,N={})=>{const T=h.get(v);if(T)return console.warn(`Capacitor plugin "${v}" already registered. Cannot register plugins twice.`),T.proxy;const k=i(),_=u(v);let P;const L=async()=>(!P&&k in N?P=typeof N[k]=="function"?P=await N[k]():P=N[k]:e!==null&&!P&&"web"in N&&(P=typeof N.web=="function"?P=await N.web():P=N.web),P),z=(C,I)=>{var $,O;if(_){const V=_==null?void 0:_.methods.find(A=>I===A.name);if(V)return V.rtype==="promise"?A=>s.nativePromise(v,I.toString(),A):(A,se)=>s.nativeCallback(v,I.toString(),A,se);if(C)return($=C[I])===null||$===void 0?void 0:$.bind(C)}else{if(C)return(O=C[I])===null||O===void 0?void 0:O.bind(C);throw new dp(`"${v}" plugin is not implemented on ${k}`,al.Unimplemented)}},F=C=>{let I;const $=(...O)=>{const V=L().then(A=>{const se=z(A,C);if(se){const fe=se(...O);return I=fe==null?void 0:fe.remove,fe}else throw new dp(`"${v}.${C}()" is not implemented on ${k}`,al.Unimplemented)});return C==="addListener"&&(V.remove=async()=>I()),V};return $.toString=()=>`${C.toString()}() { [capacitor code] }`,Object.defineProperty($,"name",{value:C,writable:!1,configurable:!1}),$},K=F("addListener"),ee=F("removeListener"),W=(C,I)=>{const $=K({eventName:C},I),O=async()=>{const A=await $;ee({eventName:C,callbackId:A},I)},V=new Promise(A=>$.then(()=>A({remove:O})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await O()},V},D=new Proxy({},{get(C,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return _?W:K;case"removeListener":return ee;default:return F(I)}}});return r[v]=D,h.set(v,{name:v,proxy:D,platforms:new Set([...Object.keys(N),..._?[k]:[]])}),D};return s.convertFileSrc||(s.convertFileSrc=v=>v),s.getPlatform=i,s.handleError=f,s.isNativePlatform=o,s.isPluginAvailable=c,s.registerPlugin=y,s.Exception=dp,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},zI=n=>n.Capacitor=UI(n),Du=zI(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),hl=Du.registerPlugin;class WN{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,s){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(s);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,s);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,s,r){const i=this.listeners[e];if(!i){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(s),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(s))}hasListeners(e){var s;return!!(!((s=this.listeners[e])===null||s===void 0)&&s.length)}registerWindowListener(e,s){this.windowListeners[s]={registered:!1,windowEventName:e,pluginEventName:s,handler:r=>{this.notifyListeners(s,r)}}}unimplemented(e="not implemented"){return new Du.Exception(e,al.Unimplemented)}unavailable(e="not available"){return new Du.Exception(e,al.Unavailable)}async removeListener(e,s){const r=this.listeners[e];if(!r)return;const i=r.indexOf(s);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const s=this.retainedEventArguments[e];s&&(delete this.retainedEventArguments[e],s.forEach(r=>{this.notifyListeners(e,r)}))}}const nb=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),rb=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class FI extends WN{async getCookies(){const e=document.cookie,s={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=rb(i).trim(),o=rb(o).trim(),s[i]=o}),s}async setCookie(e){try{const s=nb(e.key),r=nb(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${s}=${r||""}${i}; path=${o}; ${c};`}catch(s){return Promise.reject(s)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(s){return Promise.reject(s)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const s of e)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}hl("CapacitorCookies",{web:()=>new FI});const $I=async n=>new Promise((e,s)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>s(i),r.readAsDataURL(n)}),VI=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,o,c)=>(i[o]=n[e[c]],i),{})},BI=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[o,c]=i;let u,f;return Array.isArray(c)?(f="",c.forEach(h=>{u=e?encodeURIComponent(h):h,f+=`${o}=${u}&`}),f.slice(0,-1)):(u=e?encodeURIComponent(c):c,f=`${o}=${u}`),`${r}&${f}`},"").substr(1):null,qI=(n,e={})=>{const s=Object.assign({method:n.method||"GET",headers:n.headers},e),i=VI(n.headers)["content-type"]||"";if(typeof n.data=="string")s.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[c,u]of Object.entries(n.data||{}))o.set(c,u);s.body=o.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const o=new FormData;if(n.data instanceof FormData)n.data.forEach((u,f)=>{o.append(f,u)});else for(const u of Object.keys(n.data))o.append(u,n.data[u]);s.body=o;const c=new Headers(s.headers);c.delete("content-type"),s.headers=c}else(i.includes("application/json")||typeof n.data=="object")&&(s.body=JSON.stringify(n.data));return s};class WI extends WN{async request(e){const s=qI(e,e.webFetchExtra),r=BI(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,s),c=o.headers.get("content-type")||"";let{responseType:u="text"}=o.ok?e:{};c.includes("application/json")&&(u="json");let f,h;switch(u){case"arraybuffer":case"blob":h=await o.blob(),f=await $I(h);break;case"json":f=await o.json();break;case"document":case"text":default:f=await o.text()}const y={};return o.headers.forEach((v,N)=>{y[N]=v}),{data:f,headers:y,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}hl("CapacitorHttp",{web:()=>new WI});async function HI(n){try{const e=globalThis.Capacitor||window.Capacitor,s=e&&e.Plugins&&e.Plugins.UpdaterPlugin;if(s&&typeof s.downloadAndInstall=="function"){try{await s.downloadAndInstall({url:n})}catch{await s.downloadAndInstall()}return}const r=e&&e.Plugins&&e.Plugins.CapacitorUpdater;if(r){if(typeof r.downloadUpdate=="function"){try{await r.downloadUpdate({url:n})}catch{try{await r.downloadUpdate()}catch(o){throw o}}typeof r.setUpdate=="function"&&await r.setUpdate();return}if(typeof r.downloadAndInstall=="function"){try{await r.downloadAndInstall({url:n})}catch{await r.downloadAndInstall()}return}}}catch{}try{if(typeof window<"u"&&n){window.open(n,"_blank");return}}catch{}throw new Error("Updater plugin not available and could not open APK URL")}hl("UpdaterPlugin",{web:()=>({openUrl:async()=>{console.warn("UpdaterPlugin not available on web")}})});const GI="https://spoilme-edee0.web.app/version.json",KI=()=>{if(typeof navigator>"u")return!1;const n=navigator.userAgent||navigator.vendor||"";return/Android|iPhone|iPad|iPod/i.test(n)};function JI({apkUrl:n="",playStoreUrl:e}){const[s,r]=S.useState(!1),[i,o]=S.useState(!1),[c,u]=S.useState(n),[f,h]=S.useState("");if(S.useEffect(()=>{var k,_;if(!KI())return;const N=(_=(k=window.Capacitor)==null?void 0:k.isNativePlatform)==null?void 0:_.call(k);o(N),(async()=>{try{console.log("Checking for update...");const L=await(await fetch(GI)).json();console.log("Fetched data:",L);const z=L.version,F=localStorage.getItem("appVersion")||"0.1";console.log("Latest version:",z,"Stored version:",F),z!==F?(N?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))!==z?(console.log("New version detected, showing update banner for this version"),u(L.apkUrl),h(L.version),r(!0)):(console.log("User already dismissed this version, not showing banner"),r(!1)):(console.log("No new version"),(N?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))||r(!0))}catch(P){console.error("Failed to check for update:",P),(N?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))||r(!0)}})()},[]),!s)return null;const y=()=>{const N=i?"updatePromptDismissed":"installPromptDismissed";try{f?localStorage.setItem(N,f):localStorage.setItem(N,String(Date.now()))}catch{}r(!1)},v=async()=>{try{window.Capacitor&&window.Capacitor.isNativePlatform&&window.Capacitor.isNativePlatform()?await HI(c):window.open(c,"_blank")}catch(N){console.error("Updater error",N),window.open(c,"_blank")}try{f?localStorage.setItem(i?"updatePromptDismissed":"installPromptDismissed",f):localStorage.setItem(i?"updatePromptDismissed":"installPromptDismissed",String(Date.now()))}catch{}try{f&&localStorage.setItem("appVersion",f)}catch{}r(!1)};return t.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[t.jsx("div",{className:"p-2 bg-cyan-900/20 text-cyan-500 rounded-full border border-cyan-500/30",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z",clipRule:"evenodd"})})}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-sm font-bold text-white",children:"Update available - Get the latest features!"})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:v,className:"px-4 py-2 bg-green-500 text-black rounded font-semibold text-sm",children:"Install Update"}),t.jsx("button",{onClick:y,className:"px-4 py-2 ring-1 ring-gray-700 rounded text-gray-300 text-sm",children:"Later"})]})]})})}const YI=()=>{const[n,e]=S.useState(!1),[s,r]=S.useState("https://spoilme-edee0.web.app/Spoil-Me-Vintage-0.4.apk"),[i,o]=S.useState("0.4"),{cart:c,user:u,isStickyProgressBarVisible:f,setIsStickyProgressBarVisible:h,getCartTotal:y,currency:v,toggleCurrency:N}=vt(),T=oa();S.useEffect(()=>{window.scrollTo(0,0)},[T.pathname]),S.useEffect(()=>{(async()=>{try{const F=await(await fetch("https://spoilme-edee0.web.app/version.json")).json();r(F.apkUrl),o(F.version)}catch(z){console.error("Failed to fetch latest APK URL:",z)}})()},[]);const k=c.reduce((L,z)=>L+z.quantity,0),_=y();u.wishlist&&u.wishlist.length;const P=u.notifications?u.notifications.filter(L=>!L.isRead).length:0;return t.jsxs("div",{className:"min-h-screen flex flex-col safe-area text-gray-100",children:[t.jsx("style",{children:`
        @keyframes marquee {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
        .animate-marquee {
          animation: marquee 10s linear infinite;
        }
        .animate-marquee:hover {
          animation-play-state: paused;
        }
      `}),t.jsx("div",{className:"w-full bg-zinc-900 border-b border-white/5 overflow-hidden py-2 relative z-[60]",children:t.jsxs("div",{className:"flex animate-marquee whitespace-nowrap",children:[t.jsxs("div",{className:"flex items-center gap-8 px-4",children:[t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(qs,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(js,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(Fr,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[t.jsx(ds,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[t.jsx(oc,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[t.jsx(ir,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(Xa,{size:14,className:"text-green-500"})," And lots more!"]})]}),t.jsxs("div",{className:"flex items-center gap-8 px-4",children:[t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(qs,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(js,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(Fr,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[t.jsx(ds,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[t.jsx(oc,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[t.jsx(ir,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(Xa,{size:14,className:"text-green-500"})," And lots more!"]})]})]})}),t.jsxs("header",{className:"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800 transition-all",children:[t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"relative flex flex-col lg:flex-row items-center justify-center lg:justify-between h-auto lg:h-20 py-4 lg:py-0 gap-3",children:[t.jsx("button",{className:"absolute top-1/2 -translate-y-1/2 left-4 lg:hidden p-2 rounded-md text-gray-400 hover:text-white",onClick:()=>e(!n),children:n?t.jsx(us,{size:24}):t.jsx(NI,{size:24})}),t.jsxs(Ve,{to:"/",className:"flex-shrink-0 group flex flex-col items-center leading-none",children:[t.jsx("span",{className:"font-cherry text-[24px] font-bold text-pink-500 group-hover:text-pink-400 transition-colors drop-shadow-[0_0_5px_rgba(236,72,153,0.5)]",children:"Spoil Me"}),t.jsx("span",{className:"font-cherry text-[24px] font-bold text-cyan-400 group-hover:text-cyan-300 transition-colors drop-shadow-[0_0_5px_rgba(34,211,238,0.5)] ml-7 -mt-1",children:"Vintage"})]}),t.jsxs("nav",{className:"hidden lg:flex absolute left-1/2 -translate-x-1/2 space-x-8",children:[t.jsx(Ve,{to:"/",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${T.pathname==="/"?"text-cyan-400":"text-gray-300"}`,children:"Home"}),t.jsx(Ve,{to:"/#catalog",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Catalog"}),t.jsx(Ve,{to:"/customized-wire-wrapped-pendants",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${T.pathname==="/customized-wire-wrapped-pendants"?"text-cyan-400":"text-gray-300"}`,children:"Custom Pendants"}),t.jsxs(Ve,{to:"/membership",className:`text-sm font-medium flex items-center gap-1 hover:text-purple-400 transition-colors ${T.pathname==="/membership"?"text-purple-400 font-bold":"text-gray-300"}`,children:[t.jsx(Ot,{size:14})," Membership"]}),t.jsx(Ve,{to:"/#specials",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Specials"})]}),t.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-3 w-full lg:w-auto justify-center lg:justify-end",children:[t.jsx("button",{onClick:N,className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors text-xs font-bold",title:`Switch to ${v==="ZAR"?"USD":"ZAR"}`,children:v}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors",children:t.jsx(ca,{size:20})}),u.email?t.jsx(Ve,{to:"/earn-rewards",className:"group flex items-center justify-center p-2 relative",title:"Your Loyalty Rewards",children:t.jsxs("div",{className:"flex items-center gap-1.5 hover:bg-purple-900/50 px-2 py-1 rounded-full transition-colors border border-transparent hover:border-purple-500/30",children:[t.jsx(ir,{size:20,className:"text-purple-400 group-hover:text-pink-400"}),t.jsx("span",{className:"hidden md:inline-block text-xs font-bold text-purple-200 group-hover:text-white",children:u.loyaltyPoints})]})}):t.jsx(Ve,{to:"/earn-rewards",className:"p-2 text-gray-400 hover:text-purple-400 transition-colors relative",title:"Earn Rewards",children:t.jsx(ir,{size:20})}),u.email&&t.jsxs(Ve,{to:"/notifications",className:"p-2 text-gray-400 hover:text-yellow-400 transition-colors relative group",children:[t.jsx(Yi,{size:20}),P>0&&t.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-yellow-400 rounded-full shadow-[0_0_5px_rgba(250,204,21,0.8)]",children:P})]}),u.email?t.jsx(Ve,{to:"/profile",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative",children:t.jsx($r,{size:20})}):t.jsx(Ve,{to:"/login",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative flex items-center gap-1",children:t.jsx(zN,{size:20})}),t.jsxs(Ve,{to:"/cart",className:"p-2 text-gray-400 hover:text-pink-500 transition-colors relative group",children:[t.jsx(ul,{size:20}),k>0&&t.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-green-400 rounded-full shadow-[0_0_5px_rgba(74,222,128,0.8)]",children:k})]})]})]})}),n&&t.jsx("div",{className:"lg:hidden absolute top-full left-0 w-full bg-zinc-900 border-b border-gray-800 shadow-lg animate-in slide-in-from-top-5 duration-200 z-40",children:t.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[t.jsx(Ve,{to:"/",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Home"}),t.jsxs(Ve,{to:"/customized-wire-wrapped-pendants",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[t.jsx(js,{size:16,className:"text-gold"})," Custom Pendants"]}),t.jsxs(Ve,{to:"/membership",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-purple-400 hover:bg-zinc-800 hover:text-purple-300 flex items-center gap-2",children:[t.jsx(Ot,{size:16})," Membership Perks"]}),t.jsxs(Ve,{to:"/earn-rewards",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[t.jsx(ir,{size:16,className:"text-purple-400"}),u.email?"My Rewards":"Earn Rewards",u.email&&t.jsxs("span",{className:"bg-purple-900/50 text-purple-200 text-[10px] px-2 py-0.5 rounded-full font-bold ml-auto",children:[u.loyaltyPoints," Pts"]})]}),t.jsxs(Ve,{to:"/affiliate-program",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-green-400 flex items-center gap-2",children:[t.jsx(Tc,{size:16,className:"text-green-500"})," Partnership Program"]}),t.jsxs(Ve,{to:"/artist-partnership",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-yellow-400 flex items-center gap-2",children:[t.jsx(js,{size:16,className:"text-yellow-400"})," Artist Partnership"]}),u.email?t.jsxs(Ve,{to:"/profile",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center justify-between",children:["My Profile",P>0&&t.jsxs("span",{className:"bg-yellow-400 text-black text-xs px-2 py-0.5 rounded-full font-bold",children:[P," New"]})]}):t.jsx(Ve,{to:"/login",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Login / Register"})]})})]}),t.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsx(Fv,{})}),t.jsx(MI,{}),f&&_>0&&t.jsx(qN,{subtotal:_,isSticky:!0,onClose:()=>h(!1)}),t.jsx(JI,{}),t.jsx("footer",{className:"bg-zinc-950 border-t border-gray-800 py-12",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"About"}),t.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[t.jsx("li",{children:t.jsx(Ve,{to:"/",className:"hover:text-white",children:"Our Story"})}),t.jsx("li",{children:t.jsx(Ve,{to:"/",className:"hover:text-white",children:"Careers"})}),t.jsx("li",{children:t.jsx(Ve,{to:"/",className:"hover:text-white",children:"Press"})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"Support"}),t.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[t.jsx("li",{children:t.jsx(Ve,{to:"/terms",className:"hover:text-white",children:"Contact Us"})}),t.jsx("li",{children:t.jsx(Ve,{to:"/terms",className:"hover:text-white",children:"Shipping"})}),t.jsx("li",{children:t.jsx(Ve,{to:"/terms",className:"hover:text-white",children:"Returns"})}),t.jsx("li",{children:t.jsx(Ve,{to:"/artist-partnership",className:"hover:text-white",children:"Artist Partnership"})})]})]})]}),u.isAdmin&&t.jsx("div",{className:"mt-12 pt-8 border-t border-gray-900 flex justify-center",children:t.jsxs(Ve,{to:"/admin",className:"flex items-center gap-2 text-xs text-red-400 hover:text-red-300 uppercase tracking-widest font-bold transition-colors bg-red-900/10 px-4 py-2 rounded border border-red-900/30",children:[t.jsx(LN,{size:14})," Admin Dashboard"]})})]})})]})},ZI=()=>{const n=oa(),e=cn(),{user:s}=vt();S.useEffect(()=>{if(!s){e("/login");return}if(!s.isAdmin){try{localStorage.setItem("spv_admin_denied",'Your account does not have admin rights. If this is a local dev machine use "Ensure Admin (dev)" on the Login page, or set is_admin=true for your user in the database.')}catch{}e("/login")}},[s,e]);const i=[{path:"/admin",icon:LN,label:"Dashboard",permission:"dashboard"},{path:"/admin/orders",icon:dl,label:"Orders",permission:"orders"},{path:"/admin/products",icon:_c,label:"Products",permission:"products"},{path:"/admin/categories",icon:EI,label:"Categories",permission:"categories"},{path:"/admin/artists",icon:VN,label:"Artists",permission:"artists"},{path:"/admin/gift-cards",icon:ds,label:"Gift Cards",permission:"giftCards"},{path:"/admin/social",icon:il,label:"Social Studio",permission:"social"},{path:"/admin/affiliates",icon:qs,label:"Affiliates",permission:"affiliates"},{path:"/admin/affiliate-requests",icon:Ko,label:"Requests",permission:"affiliates"},{path:"/admin/notifications",icon:Yi,label:"Push Notify",permission:"notifications"},{path:"/admin/winners",icon:dr,label:"Weekly Winners",permission:"winners"},{path:"/admin/expenses",icon:ws,label:"Expenses",permission:"expenses"},{path:"/admin/members",icon:Ko,label:"Membership",permission:"members"},{path:"/admin/vault",icon:lI,label:"Vault",permission:"vault"},{path:"/admin/custom-pendant-manager",icon:js,label:"Custom Pendants",permission:"products"},{path:"/admin/ad-pricing",icon:ws,label:"Ad Pricing",permission:"admin"}].filter(o=>{var c;return(s==null?void 0:s.email)==="spoilmevintagediy@gmail.com"?!0:((c=s==null?void 0:s.adminPermissions)==null?void 0:c[o.permission])===!0});return s!=null&&s.isAdmin?t.jsxs("div",{className:"min-h-screen bg-black flex text-gray-100",children:[t.jsxs("aside",{className:"w-64 bg-zinc-900 border-r border-gray-800 hidden md:flex flex-col fixed h-full",children:[t.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-gray-800",children:[t.jsx("span",{className:"text-xl font-bold text-pink-500",children:"Spoil Me Vintage"}),t.jsx("span",{className:"ml-2 text-xs bg-purple-900/50 border border-purple-500/50 text-purple-300 px-2 py-0.5 rounded",children:"ADMIN"})]}),t.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[t.jsxs(Ve,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-gray-400 hover:bg-zinc-800 hover:text-white rounded-lg mb-4 transition-colors",children:[t.jsx(ra,{size:18})," Back to Store"]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-2",children:"Management"}),i.slice(0,5).map(o=>t.jsx(up,{item:o,location:n},o.path)),t.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Marketing"}),i.slice(5,10).map(o=>t.jsx(up,{item:o,location:n},o.path)),t.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Operations"}),i.slice(10).map(o=>t.jsx(up,{item:o,location:n},o.path))]})]}),t.jsx("main",{className:"flex-1 md:ml-64 p-8 overflow-y-auto bg-black h-screen",children:t.jsx("div",{className:"max-w-6xl mx-auto pb-20 md:pb-0",children:t.jsx(Fv,{})})}),t.jsx("div",{className:"md:hidden fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 flex justify-between px-4 py-3 z-50 overflow-x-auto gap-4",children:i.map(o=>t.jsx(Ve,{to:o.path,className:`p-2 rounded-lg ${n.pathname===o.path?"text-pink-400 bg-pink-900/20":"text-gray-400 hover:text-white"}`,children:t.jsx(o.icon,{size:24})},o.path))})]}):null},up=({item:n,location:e})=>{const s=e.pathname===n.path;return t.jsxs(Ve,{to:n.path,className:`flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-colors ${s?"bg-pink-900/20 text-pink-400 border border-pink-500/20":"text-gray-400 hover:bg-zinc-800 hover:text-white"}`,children:[t.jsx(n.icon,{size:18})," ",n.label]})},Mu=({src:n,fallback:e,alt:s,className:r,onError:i,...o})=>{const c=HN(n||void 0,e);return t.jsx("img",{src:c||e||fl(),alt:s,className:r,onError:u=>{try{Qa(u)}catch{}i&&i(u)},...o})};function Qa(n){const e=n==null?void 0:n.target;e&&(e.src=fl())}function fl(n=600,e=600,s){const i=`<?xml version="1.0" encoding="UTF-8"?><svg xmlns='http://www.w3.org/2000/svg' width='${n}' height='${e}' viewBox='0 0 ${n} ${e}'><rect width='100%' height='100%' fill='%23222' /><text x='50%' y='50%' font-family='Arial, Helvetica, sans-serif' font-size='20' fill='%23ccc' dominant-baseline='middle' text-anchor='middle'>${XI(s||"Image")}</text></svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(i)}`}function XI(n){return String(n).replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}function HN(n,e){const[s,r]=S.useState(null);return S.useEffect(()=>{if(!n){r(e||fl());return}r(n)},[n,e]),s}const Vc=({product:n})=>{var Y,de;const{addToCart:e,toggleWishlist:s,user:r,cart:i,currency:o}=vt(),[c,u]=S.useState(!1),f=((Y=r.wishlist)==null?void 0:Y.includes(n.id))||!1,h=cn(),y=new Date,v=n.promoStartsAt?new Date(n.promoStartsAt):null,N=n.promoExpiresAt?new Date(n.promoExpiresAt):null,T=v&&!isNaN(v.getTime()),k=N&&!isNaN(N.getTime()),_=(n.promoPrice||0)>0&&(!T||v<=y)&&(!k||N>y),P=o==="ZAR"?n.price:n.priceUSD||n.price,L=o==="ZAR"?n.memberPrice||P*.8:n.memberPriceUSD||P*.8;let z=P,F=!1,K="none";r.isMember?(F=!0,_?r.membershipTier==="deluxe"&&n.promoDeluxeMemberPrice&&n.promoDeluxeMemberPrice>0?(z=n.promoDeluxeMemberPrice,K="deluxe"):r.membershipTier==="premium"&&n.promoPremiumMemberPrice&&n.promoPremiumMemberPrice>0?(z=n.promoPremiumMemberPrice,K="premium"):r.membershipTier==="basic"&&n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0?(z=n.promoBasicMemberPrice,K="basic"):z=Math.min(L,n.promoPrice||1/0):z=L):_&&(z=n.promoPrice);const ee=_&&n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0?n.promoBasicMemberPrice:L,D=n.reviews&&n.reviews.length>0?(n.reviews.reduce((te,xe)=>te+xe.rating,0)/n.reviews.length).toFixed(1):"5.0",C=n.reviews?n.reviews.length:0,I=n.soldCount||0,O=_?(()=>{if(!k||!N)return null;const te=N.getTime()-y.getTime();if(te<=0)return null;const xe=Math.floor(te/(1e3*60*60*24)),q=Math.floor(te%(1e3*60*60*24)/(1e3*60*60)),Ae=Math.floor(te%(1e3*60*60)/(1e3*60));return xe>0?`${xe}d ${q}h`:`${q}h ${Ae}m`})():null,V=n.type==="Ring"||n.showEarringOptions&&n.earringMaterials&&n.earringMaterials.length>1||(n.type==="Pendant"||n.type==="Necklace")&&n.chainStyles&&n.chainStyles.length>1,A=!!n.isSoldOut||n.stock<=0,se=i.filter(te=>te.id===n.id).reduce((te,xe)=>te+xe.quantity,0),fe=!V&&se>=n.stock,Se=()=>{A||fe||(V?h(`/product/${n.id}`):e({...n,price:z}))},Ie=_&&(n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0||n.promoDeluxeMemberPrice&&n.promoDeluxeMemberPrice>0),le=()=>o==="ZAR"?"R":"$",be=(te,xe)=>o==="ZAR"?te:o==="USD"?xe!==void 0?xe:0:te,ve=o==="ZAR"?n.compareAtPrice:n.compareAtPriceUSD||n.compareAtPrice;return o==="ZAR"?n.memberPrice||n.price*.8:n.memberPriceUSD||(n.priceUSD||n.price)*.8,t.jsxs("div",{className:"group relative bg-zinc-900 rounded-lg shadow-[0_0_30px_rgba(255,255,255,0.15)] hover:shadow-pink-500/20 transition-all duration-300 border border-gray-800 hover:border-pink-500/50 z-0 flex flex-col h-full",children:[t.jsxs(Ve,{to:`/product/${n.id}`,className:"block relative overflow-hidden aspect-square rounded-t-lg",children:[t.jsx(Mu,{src:n.image_url||n.imageUrl||((de=n.images)==null?void 0:de[0]),alt:n.name,className:`w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500 ${n.stock<=0?"opacity-50 grayscale":"opacity-90 group-hover:opacity-100"}`,fallback:fl(600),onError:Qa}),t.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1 z-10",children:[F&&t.jsxs("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-purple-400/30 flex items-center gap-1",children:[t.jsx(Ot,{size:10,fill:"currentColor"}),K!=="none"?`${K.toUpperCase()} PRICE`:"MEMBER"]}),!F&&_&&t.jsx("span",{className:"bg-green-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-green-500/30",children:"PROMO"}),n.isNewArrival&&t.jsx("span",{className:"bg-cyan-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-cyan-500/30",children:"NEW"})]}),_&&O&&!A&&t.jsxs("div",{className:"absolute bottom-0 left-0 w-full bg-black/80 backdrop-blur-md py-1 px-2 flex items-center justify-center gap-1.5 text-[10px] text-green-400 font-bold border-t border-green-500/30",children:[t.jsx(cr,{size:10})," Ends in: ",O]})]}),t.jsx("button",{onClick:te=>{te.preventDefault(),s(n.id)},className:`absolute top-2 right-2 p-2 rounded-full bg-black/50 backdrop-blur-md shadow-md transition-colors border border-transparent hover:border-pink-500 z-20 ${f?"text-pink-500":"text-gray-300 hover:text-white"}`,children:t.jsx(Lm,{size:18,fill:f?"currentColor":"none"})}),t.jsxs("div",{className:"p-4 rounded-b-lg flex flex-col flex-1 space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("p",{className:"text-xs text-cyan-400 font-medium uppercase tracking-wider truncate pr-2",children:n.category}),t.jsx("button",{onClick:Se,disabled:A||fe,className:`p-1.5 rounded-full transition-all flex-shrink-0 -mt-1 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed ${r.isMember?"bg-purple-600/20 text-purple-400 hover:bg-purple-600 hover:text-white border border-purple-500/30":"bg-zinc-800 text-gray-300 hover:bg-cyan-500 hover:text-black border border-gray-700"}`,title:V?"View Options":A?"Sold Out":fe?"Stock limit in cart":"Add to Cart",children:V?t.jsx(nl,{size:16}):t.jsx(dl,{size:16})})]}),t.jsx(Ve,{to:`/product/${n.id}`,children:t.jsx("h3",{className:"text-sm font-bold text-gray-100 leading-tight group-hover:text-pink-500 transition-colors line-clamp-2 h-10",children:n.name})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[t.jsx(Rn,{size:12,fill:"currentColor"}),t.jsx("span",{className:"text-xs font-bold text-gray-300",children:D}),t.jsxs("span",{className:"text-[10px] text-gray-500",children:["(",C,")"]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[I>0&&t.jsxs("div",{className:"text-gray-500 font-medium flex items-center gap-1",children:[I," sold"]}),n.stock>0&&n.stock<=5&&t.jsx("div",{className:"text-orange-400 font-medium flex items-center gap-1",children:"Low Stock"})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 min-h-[20px]",children:[ve&&t.jsxs("div",{className:"flex items-center gap-1 relative",children:[t.jsxs("span",{className:"text-[10px] text-gray-500 line-through",children:["RRP ",le(),ve.toFixed(2)]}),t.jsx("button",{onClick:te=>{te.preventDefault(),u(!c)},className:"text-gray-600 hover:text-gray-400 focus:outline-none",children:t.jsx(th,{size:10})}),c&&t.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 p-2 bg-zinc-950 border border-gray-700 rounded shadow-xl text-[10px] text-gray-300 z-50",children:"Recommended retail price."})]}),t.jsxs("span",{className:"text-sm font-bold text-green-400",children:["Retail ",le(),P.toFixed(2)]})]}),t.jsx("div",{className:"mt-auto pt-2 border-t border-gray-800/50",children:r.isMember?t.jsx("div",{className:"flex items-end justify-between",children:t.jsxs("div",{className:"flex flex-col w-full",children:[t.jsxs("span",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-wide flex items-center gap-1",children:[t.jsx(Ot,{size:10})," ",K!=="none"?K:"Member"," Price"]}),t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsxs("span",{className:"text-2xl font-bold text-white drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",children:[le(),be(z).toFixed(2)]}),z<n.price&&t.jsxs("span",{className:"text-xs text-gray-500 line-through",children:[le(),be(n.price).toFixed(2)]})]})]})}):t.jsx("div",{className:"flex items-end justify-between",children:t.jsxs("div",{className:"flex flex-col w-full",children:[_?t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsxs("span",{className:"text-2xl font-bold text-green-400",children:[le(),be(z).toFixed(2)]}),t.jsxs("span",{className:"text-xs text-gray-400 line-through",children:[le(),be(n.price).toFixed(2)]})]}):null,Ie?t.jsxs("div",{className:"flex flex-col gap-0.5 mt-1",children:[t.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[t.jsx("span",{children:"Basic & Premium:"}),t.jsxs("span",{className:"text-purple-400 font-bold",children:[le(),be(n.promoBasicMemberPrice||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[t.jsx("span",{children:"Deluxe:"}),t.jsxs("span",{className:"text-purple-400 font-bold",children:[le(),be(n.promoDeluxeMemberPrice||0).toFixed(2)]})]})]}):t.jsxs("div",{className:"text-[10px] text-gray-400 flex items-center gap-1 mt-0.5",children:["Members: ",t.jsxs("span",{className:"text-purple-400 font-bold",children:[le(),be(ee).toFixed(2)]})]})]})})})]})]})},QI=()=>{const[n,e]=S.useState(0),s=[" THIS WEEK'S WINNER: Anja P. from Pretoria just won a R500 Voucher!"," LAST WEEK'S WINNER: Sarah Jenkins from Texas just won a $30 Gift Box!"," PREVIOUS WINNER: Thandi M. from Joburg just won a R500 Voucher!"];return S.useEffect(()=>{const r=setInterval(()=>{e(i=>(i+1)%s.length)},3e3);return()=>clearInterval(r)},[]),t.jsx("div",{className:"flex items-center justify-center bg-yellow-400 p-2 rounded",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(dr,{size:16,className:"text-amber-700 mr-3 shrink-0"}),t.jsx("span",{className:"text-sm text-black font-bold tracking-wide",children:s[n]})]})})},eR=()=>{const{products:n,categories:e,user:s,currency:r}=vt(),i=S.useRef(null),o=S.useRef(null),c=S.useRef(null),u=S.useRef(null),f=S.useRef(null),h=S.useRef(null),[y,v]=S.useState(!1);S.useEffect(()=>{const A=setInterval(()=>v(se=>!se),5e3);return()=>clearInterval(A)},[]);const N=new Date,k=23+(N.getMonth()+N.getFullYear()*12)%3,_=N.getDate(),P=new Date(N.getFullYear(),N.getMonth()+1,0).getDate(),L=(_-1)/(P-1),z=Math.max(2,Math.floor(k-L*(k-2))),F=(A,se)=>{const fe=`${A.category||""} ${A.name||""} ${A.tags?A.tags.join(" "):""}`.toLowerCase();return se.some(Se=>fe.includes(Se.toLowerCase()))},K=n.filter(A=>F(A,["best seller","featured"])),ee=(K.length>0?K:n).slice(0,16),W=n.filter(A=>F(A,["stud","studs"])).slice(0,11),D=n.filter(A=>F(A,["dangle","drop","hook"])).slice(0,2),C=n.filter(A=>A.type==="Pendant"&&F(A,["pendant","unique"])).slice(0,23),I=n.filter(A=>F(A,["bracelet","bangle"])).slice(0,6),$=n.filter(A=>F(A,["set","combo","suite"])).slice(0,2),O=(A,se)=>{if(A.current){const fe=A.current.clientWidth*.8;A.current.scrollBy({left:se==="right"?fe:-fe,behavior:"smooth"})}},V=({title:A,items:se,reference:fe,linkTo:Se,icon:Ie,variant:le="standard"})=>{if(!se||se.length===0)return null;const be=le==="single"?"min-w-[90vw] md:min-w-[90vw] snap-center px-2":"min-w-[40vw] md:min-w-[200px] snap-start px-2";return t.jsxs("section",{className:"py-4",children:[t.jsxs("div",{className:"flex justify-between items-end mb-4 px-4",children:[t.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-white/20 pb-1 inline-block flex items-center gap-2",children:[Ie&&t.jsx(Ie,{size:20,className:"text-pink-400"})," ",A]}),t.jsxs(Ve,{to:Se,className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors bg-white/5 px-3 py-1 rounded-full border border-white/10",children:["View All ",t.jsx(Qs,{size:14})]})]}),t.jsxs("div",{className:"relative group/slider",children:[t.jsx("button",{onClick:()=>O(fe,"left"),className:"block absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg hover:bg-pink-600 transition-colors",children:t.jsx(mI,{size:20})}),t.jsx("button",{onClick:()=>O(fe,"right"),className:"block absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg hover:bg-pink-600 transition-colors",children:t.jsx(gI,{size:20})}),t.jsxs("div",{ref:fe,className:"flex overflow-x-auto snap-x snap-mandatory pb-6 px-2 no-scrollbar scroll-smooth",children:[se.map(ve=>t.jsx("div",{className:be,children:t.jsx(Vc,{product:ve})},ve.id)),t.jsxs("div",{className:`${le==="single"?"min-w-[90vw]":"min-w-[40vw]"} snap-center flex flex-col items-center justify-center p-4`,children:[t.jsx(Ve,{to:Se,className:"w-16 h-16 rounded-full bg-zinc-800 border border-gray-600 flex items-center justify-center text-white mb-2 shadow-lg",children:t.jsx(Qs,{})}),t.jsx("span",{className:"text-gray-400 text-xs",children:"View All"})]})]})]})]})};return t.jsxs("div",{className:"space-y-8 pb-20",children:[t.jsx("div",{className:"px-4 mt-4",children:t.jsxs("section",{className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-pink-900 via-purple-900 to-indigo-900 border border-pink-500/30 shadow-lg",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-full bg-white/5 skew-x-12 translate-x-10"}),t.jsxs("div",{className:"flex flex-col p-6 relative z-10 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-white/10 backdrop-blur-md rounded-full border border-white/20",children:t.jsx(Nc,{size:24,className:"text-pink-300"})}),t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center gap-2 mb-1",children:t.jsx("span",{className:"bg-green-500 text-white text-[10px] font-bold px-2 py-0.5 rounded shadow animate-pulse",children:"LIMITED OFFER"})}),t.jsx("h2",{className:"text-xl font-bold text-white leading-tight",children:"Buy a Gift Voucher"})]})]}),t.jsxs("p",{className:"text-sm text-gray-200",children:["Buy ",t.jsx("strong",{className:"text-white",children:"R250-R500"}),", get ",t.jsx("span",{className:"text-yellow-300 font-bold",children:"R100 EXTRA"}),"!"]}),t.jsxs(Ve,{to:"/gift-cards",className:"w-full text-center py-3 bg-white text-purple-900 font-bold rounded-full shadow-lg flex items-center justify-center gap-2",children:["Create Voucher ",t.jsx(Qs,{size:16})]})]})]})}),t.jsx("div",{className:"px-4",children:t.jsxs("div",{className:"relative rounded-2xl overflow-hidden border-4 border-cyan-500 shadow-[0_0_15px_rgba(34,211,238,0.3)]",children:[t.jsxs("section",{className:"relative bg-zinc-900 text-white p-6",children:[t.jsxs("div",{className:`absolute top-3 right-3 text-[10px] font-bold px-2 py-1 rounded-full bg-red-600 text-white border border-red-400 z-20 ${y?"animate-pulse":""}`,children:[z," spots left"]}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-900/20 via-black to-zinc-900"}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center space-y-4",children:[t.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-cyan-400 drop-shadow-lg",children:" The Spoil Me Club"}),t.jsxs("p",{className:"text-sm text-gray-300",children:["Join for just ",r==="ZAR"?"R19":"$2"," / month."]}),t.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[t.jsxs("p",{children:[" Get a ",r==="ZAR"?"R25":"$3"," Voucher instantly."]}),t.jsx("p",{children:" Auto-entry into Weekly R500 Drop."})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full pt-2",children:[t.jsx(Ve,{to:"/membership",className:"py-2.5 bg-pink-600 hover:bg-pink-500 text-white rounded-lg font-bold text-xs flex items-center justify-center",children:"JOIN CLUB"}),t.jsxs(Ve,{to:"/weekly-winners",className:"py-2.5 border border-gray-600 text-gray-300 rounded-lg font-bold text-xs flex items-center justify-center gap-1",children:["WINNERS ",t.jsx(dr,{size:12})]})]})]})]}),t.jsx(QI,{})]})}),t.jsx(V,{title:"Best Sellers",items:ee,reference:i,linkTo:"/catalog",icon:Tc}),t.jsxs("section",{className:"px-4",children:[t.jsx("div",{className:"flex justify-between items-end mb-4",children:t.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-purple-500 pb-1",children:"Shop Categories"})}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.map(A=>t.jsxs(Ve,{to:`/collections/${encodeURIComponent(A.name)}`,className:"relative aspect-square rounded-lg overflow-hidden border border-gray-800 bg-zinc-900 group",children:[t.jsx(Mu,{src:A.image,alt:A.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",fallback:fl(400),onError:Qa}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent flex flex-col justify-end p-2",children:t.jsx("span",{className:"font-handwriting text-xs md:text-sm font-bold text-white leading-none truncate",children:A.name})})]},A.id))})]}),t.jsx("section",{className:"px-4",children:t.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-900 via-pink-900 to-purple-900 rounded-2xl p-6 border-2 border-yellow-400 shadow-lg text-center",children:[t.jsx(Ot,{className:"absolute top-2 left-2 text-yellow-400/20 w-24 h-24 rotate-[-15deg]"}),t.jsxs("div",{className:"relative z-10 space-y-3",children:[t.jsx("h2",{className:"font-cherry text-3xl text-yellow-400 drop-shadow-md",children:"THE SECRET VAULT"}),t.jsx("p",{className:"font-architects text-sm text-gray-200 leading-relaxed",children:"Clearance & Samples. Massive discounts for Deluxe Members!"}),t.jsx(Ve,{to:"/vault",className:"inline-block w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-black font-bold rounded-full shadow-lg",children:"Enter The Vault"})]})]})}),t.jsx(V,{title:"Stud Earrings",items:W,reference:o,linkTo:"/catalog/stud"}),t.jsx(V,{title:"Dangle Earrings",items:D,reference:c,linkTo:"/catalog/dangle"}),t.jsx("section",{className:"px-4",children:t.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur rounded-xl border border-white/10 p-4 space-y-4 divide-y divide-white/10",children:[t.jsxs(Ve,{to:"/earn-rewards",className:"flex items-center gap-4 pt-1",children:[t.jsx("div",{className:"p-2 bg-pink-900/30 rounded-full text-pink-400",children:t.jsx(ds,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:s.email?`Points: ${s.loyaltyPoints}`:"Loyalty Rewards"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Redeem points for discounts."})]})]}),t.jsxs(Ve,{to:"/affiliate-program",className:"flex items-center gap-4 pt-4",children:[t.jsx("div",{className:"p-2 bg-green-900/30 rounded-full text-green-400",children:t.jsx(Tc,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Partnership Program"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Earn 20% commission."})]})]}),t.jsxs("div",{className:"flex items-center gap-4 pt-4",children:[t.jsx("div",{className:"p-2 bg-cyan-900/30 rounded-full text-cyan-400",children:t.jsx(cr,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Flash Sales"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Daily limited-time offers."})]})]})]})}),t.jsx(V,{title:"Unique Pendants",items:C,reference:u,linkTo:"/catalog/unique",variant:"single"}),t.jsx(V,{title:"Bracelets",items:I,reference:f,linkTo:"/catalog/bracelet"}),t.jsx("section",{className:"px-4",children:t.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-900 to-pink-900 p-6 text-center border border-purple-500/30",children:[t.jsx(js,{className:"absolute top-2 left-2 text-white/20 w-16 h-16 animate-pulse"}),t.jsxs("div",{className:"relative z-10 space-y-3",children:[t.jsx("h2",{className:"font-cherry text-2xl text-white",children:"Unlock VIP Pricing"}),t.jsxs("p",{className:"text-xs text-gray-200",children:["Save up to ",t.jsx("span",{className:"text-yellow-300 font-bold",children:"50% OFF"})," retail & get monthly free gifts."]}),t.jsx(Ve,{to:"/membership",className:"inline-block w-full py-3 bg-white text-purple-900 font-bold rounded-full shadow-lg mt-2",children:"View Perks"})]})]})}),t.jsx(V,{title:"Jewelry Sets",items:$,reference:h,linkTo:"/catalog/sets"}),t.jsx("section",{className:"px-4 mb-8",children:t.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border-2 border-yellow-600/50 text-center relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-yellow-900/10"}),t.jsxs("div",{className:"relative z-10 space-y-3",children:[t.jsx("h2",{className:"font-cherry text-2xl text-yellow-500",children:"JOIN OUR ARTIST NETWORK"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Jewelry artist? Showcase to 7,000+ collectors. Only 1% commission!"}),t.jsx(Ve,{to:"/artist-partnership",className:"inline-block w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-white font-bold rounded-full shadow-lg",children:"Start Your Shop"}),t.jsxs("p",{className:"text-[10px] text-gray-500",children:["From ",r==="ZAR"?"R19":"$1.50"," / month"]})]})]})})]})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou="analytics",tR="firebase_id",sR="origin",nR=60*1e3,rR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Um="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new Ku("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Dn=new la("analytics","Analytics",iR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(n){if(!n.startsWith(Um)){const e=Dn.create("invalid-gtag-resource",{gtagURL:n});return an.warn(e.message),""}return n}function GN(n){return Promise.all(n.map(e=>e.catch(s=>s)))}function oR(n,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(n,e)),s}function lR(n,e){const s=oR("firebase-js-sdk-policy",{createScriptURL:aR}),r=document.createElement("script"),i=`${Um}?l=${n}&id=${e}`;r.src=s?s==null?void 0:s.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function cR(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function dR(n,e,s,r,i,o){const c=r[i];try{if(c)await e[c];else{const f=(await GN(s)).find(h=>h.measurementId===i);f&&await e[f.appId]}}catch(u){an.error(u)}n("config",i,o)}async function uR(n,e,s,r,i){try{let o=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const u=await GN(s);for(const f of c){const h=u.find(v=>v.measurementId===f),y=h&&e[h.appId];if(y)o.push(y);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,i||{})}catch(o){an.error(o)}}function hR(n,e,s,r){async function i(o,...c){try{if(o==="event"){const[u,f]=c;await uR(n,e,s,u,f)}else if(o==="config"){const[u,f]=c;await dR(n,e,s,r,u,f)}else if(o==="consent"){const[u,f]=c;n("consent",u,f)}else if(o==="get"){const[u,f,h]=c;n("get",u,f,h)}else if(o==="set"){const[u]=c;n("set",u)}else n(o,...c)}catch(u){an.error(u)}}return i}function fR(n,e,s,r,i){let o=function(...c){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=hR(o,n,e,s),{gtagCore:o,wrappedGtag:window[i]}}function pR(n){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(Um)&&s.src.includes(n))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=30,gR=1e3;class xR{constructor(e={},s=gR){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const KN=new xR;function yR(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function bR(n){var c;const{appId:e,apiKey:s}=n,r={method:"GET",headers:yR(s)},i=rR.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let u="";try{const f=await o.json();(c=f.error)!=null&&c.message&&(u=f.error.message)}catch{}throw Dn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:u})}return o.json()}async function vR(n,e=KN,s){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw Dn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Dn.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new jR;return setTimeout(async()=>{u.abort()},nR),JN({appId:r,apiKey:i,measurementId:o},c,u,e)}async function JN(n,{throttleEndTimeMillis:e,backoffCount:s},r,i=KN){var u;const{appId:o,measurementId:c}=n;try{await wR(r,e)}catch(f){if(c)return an.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:o,measurementId:c};throw f}try{const f=await bR(n);return i.deleteThrottleMetadata(o),f}catch(f){const h=f;if(!NR(h)){if(i.deleteThrottleMetadata(o),c)return an.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:c};throw f}const y=Number((u=h==null?void 0:h.customData)==null?void 0:u.httpStatus)===503?Vx(s,i.intervalMillis,mR):Vx(s,i.intervalMillis),v={throttleEndTimeMillis:Date.now()+y,backoffCount:s+1};return i.setThrottleMetadata(o,v),an.debug(`Calling attemptFetch again in ${y} millis`),JN(n,v,r,i)}}function wR(n,e){return new Promise((s,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(s,i);n.addEventListener(()=>{clearTimeout(o),r(Dn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function NR(n){if(!(n instanceof Hn)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class jR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function SR(n,e,s,r,i){if(i&&i.global){n("event",s,r);return}else{const o=await e,c={...r,send_to:o};n("event",s,c)}}async function kR(n,e,s,r){if(r&&r.global){const i={};for(const o of Object.keys(s))i[`user_properties.${o}`]=s[o];return n("set",i),Promise.resolve()}else{const i=await e;n("config",i,{update:!0,user_properties:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(){if(fm())try{await pm()}catch(n){return an.warn(Dn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return an.warn(Dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function CR(n,e,s,r,i,o,c){const u=vR(n);u.then(N=>{s[N.measurementId]=N.appId,n.options.measurementId&&N.measurementId!==n.options.measurementId&&an.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>an.error(N)),e.push(u);const f=_R().then(N=>{if(N)return r.getId()}),[h,y]=await Promise.all([u,f]);pR(o)||lR(o,h.measurementId),i("js",new Date);const v=(c==null?void 0:c.config)??{};return v[sR]="firebase",v.update=!0,y!=null&&(v[tR]=y),i("config",h.measurementId,v),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.app=e}_delete(){return delete el[this.app.options.appId],Promise.resolve()}}let el={},ib=[];const ab={};let hp="dataLayer",TR="gtag",ob,zm,lb=!1;function PR(){const n=[];if(fw()&&n.push("This is a browser extension environment."),pw()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),s=Dn.create("invalid-analytics-context",{errorInfo:e});an.warn(s.message)}}function AR(n,e,s){PR();const r=n.options.appId;if(!r)throw Dn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)an.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Dn.create("no-api-key");if(el[r]!=null)throw Dn.create("already-exists",{id:r});if(!lb){cR(hp);const{wrappedGtag:o,gtagCore:c}=fR(el,ib,ab,hp,TR);zm=o,ob=c,lb=!0}return el[r]=CR(n,ib,ab,e,ob,hp,s),new ER(n)}function IR(n=ll()){n=dn(n);const e=Br(n,Ou);return e.isInitialized()?e.getImmediate():RR(n)}function RR(n,e={}){const s=Br(n,Ou);if(s.isInitialized()){const i=s.getImmediate();if(sa(e,s.getOptions()))return i;throw Dn.create("already-initialized")}return s.initialize({options:e})}function DR(n,e,s){n=dn(n),kR(zm,el[n.app.options.appId],e,s).catch(r=>an.error(r))}function YN(n,e,s,r){n=dn(n),SR(zm,el[n.app.options.appId],e,s,r).catch(i=>an.error(i))}const cb="@firebase/analytics",db="0.10.19";function MR(){Nn(new ln(Ou,(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return AR(r,i,s)},"PUBLIC")),Nn(new ln("analytics-internal",n,"PRIVATE")),Rs(cb,db),Rs(cb,db,"esm2020");function n(e){try{const s=e.getProvider(Ou).getImmediate();return{logEvent:(r,i,o)=>YN(s,r,i,o),setUserProperties:(r,i)=>DR(s,r,i)}}catch(s){throw Dn.create("interop-component-reg-failed",{reason:s})}}}MR();const OR={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},Vo=[{size:5,mm:49.3},{size:6,mm:51.9},{size:7,mm:54.4},{size:8,mm:57},{size:9,mm:59.5},{size:10,mm:62.1},{size:11,mm:64.6},{size:12,mm:67.2},{size:13,mm:69.7}],LR=()=>{const{id:n}=Rc(),{products:e,addToCart:s,toggleWishlist:r,user:i,shareProduct:o,cart:c,currency:u}=vt(),f=cn(),[h,y]=S.useState(0),[v,N]=S.useState(!1),[T,k]=S.useState(!1),[_,P]=S.useState(!1),[L,z]=S.useState(!1),[F,K]=S.useState(1),[ee,W]=S.useState(""),[D,C]=S.useState("Ring Finger"),[I,$]=S.useState(null),[O,V]=S.useState(""),[A,se]=S.useState(null),[fe,Se]=S.useState(""),[Ie,le]=S.useState(""),[be,ve]=S.useState([]),Y=5,de=10,[te,xe]=S.useState(Y),q=e.find(we=>we.id===n),Ae=q?e.filter(we=>we.category===q.category&&we.id!==q.id).slice(0,4):[];S.useEffect(()=>{window.scrollTo(0,0),P(!1)},[n]),S.useEffect(()=>{if(q){const we=ts(Wt),Je=IR();YN(Je,"view_item",{currency:u,value:we,items:[{item_id:q.id,item_name:q.name,price:we}]})}},[q,u]),S.useEffect(()=>{(async()=>{if(q)try{const Je=await Bs("reviews",{filters:{productId:q.id},orderBy:{column:"created_at",ascending:!1},limit:Math.min(te,de)});ve(Je.map(Ct=>({id:Ct.id,...Ct})))}catch(Je){console.error("Review fetch error:",Je)}})()},[q,te]);const Pe=q!=null&&q.reviews&&Array.isArray(q.reviews)?q.reviews:[],$e=S.useMemo(()=>{const we=[...Pe,...be],Je=new Set,Ct=[];for(const Lt of we){const Vt=((Lt==null?void 0:Lt.id)??"").toString();if(Vt){if(Je.has(Vt))continue;Je.add(Vt)}Ct.push(Lt)}const Et=Lt=>{const Vt=(Lt==null?void 0:Lt.created_at)??(Lt==null?void 0:Lt.createdAt)??(Lt==null?void 0:Lt.date);if(!Vt)return 0;if(typeof Vt=="string"){const Gn=Date.parse(Vt);return Number.isFinite(Gn)?Gn:0}if(Vt!=null&&Vt.toDate&&typeof Vt.toDate=="function")try{return Vt.toDate().getTime()}catch{return 0}return Vt instanceof Date?Vt.getTime():0},Dt=Ct.sort((Lt,Vt)=>Et(Vt)-Et(Lt)).slice(0,de);return Dt.slice(0,Math.min(te,Dt.length))},[Pe,be,te]),tt=S.useMemo(()=>{const we=[...Pe,...be],Je=It=>{const Dt=(It==null?void 0:It.created_at)??(It==null?void 0:It.createdAt)??(It==null?void 0:It.date);if(!Dt)return 0;if(typeof Dt=="string"){const Lt=Date.parse(Dt);return Number.isFinite(Lt)?Lt:0}if(Dt!=null&&Dt.toDate&&typeof Dt.toDate=="function")try{return Dt.toDate().getTime()}catch{return 0}return Dt instanceof Date?Dt.getTime():0},Ct=new Set,Et=[];for(const It of we){const Dt=((It==null?void 0:It.id)??"").toString();if(Dt){if(Ct.has(Dt))continue;Ct.add(Dt)}Et.push(It)}return Et.sort((It,Dt)=>Je(Dt)-Je(It)).slice(0,de).length},[Pe,be]);S.useEffect(()=>{if(q){if(q.type==="Ring"&&q.ringStock){const we=Object.entries(q.ringStock).filter(([Je,Ct])=>Ct>0).map(([Je])=>Je);we.length>0&&V(we[0])}(q.type==="Stud"||q.type==="Dangle")&&q.showEarringOptions&&q.earringMaterials&&q.earringMaterials.length>0&&se(q.earringMaterials[0]),(q.type==="Pendant"||q.type==="Necklace")&&q.chainStyles&&q.chainStyles.length>0&&(q.chainStyles.includes("Metal Chain")?Se("Metal Chain"):Se(q.chainStyles[0]))}},[q]),S.useEffect(()=>{if(fe==="Leather Cord")le("45cm");else if(fe==="Metal Chain"&&(q!=null&&q.pendantChainLengths)){const we=Object.keys(q.pendantChainLengths).find(Je=>q.pendantChainLengths[Je]);we&&le(we)}},[fe,q]);const ht=S.useMemo(()=>{var we;return((we=c.find(Je=>Je.id===(q==null?void 0:q.id)&&Je.selectedSize===O&&Je.selectedMaterial===(A==null?void 0:A.name)&&Je.selectedChainStyle===fe&&Je.selectedChainLength===Ie))==null?void 0:we.quantity)||0},[c,q==null?void 0:q.id,O,A,fe,Ie]),{availableStock:qt,isOutOfStock:Ne,isStockLimitInCart:Qe,buttonText:yt}=S.useMemo(()=>{var It;if(!q)return{availableStock:0,isOutOfStock:!0,isStockLimitInCart:!0,buttonText:"Product not found"};let we=q.stock,Je=we<=0,Ct="Add to Cart";q.type==="Ring"&&(O?(we=((It=q.ringStock)==null?void 0:It[O])||0,we<=0&&(Je=!0,Ct="Out of Stock")):(Je=!0,Ct="Select a Size")),q.isSoldOut&&(Je=!0);const Et=we>0&&ht>=we;return!Je&&Et&&(Ct="Stock limit in cart"),{availableStock:we,isOutOfStock:Je,isStockLimitInCart:Et,buttonText:Ct}},[q,O,ht]);if(!q)return t.jsx("div",{className:"text-center py-20 text-gray-400",children:"Product not found"});const Ut=i.wishlist.includes(q.id),oe=new Date,De=q.promoStartsAt?new Date(q.promoStartsAt):null,Be=q.promoExpiresAt?new Date(q.promoExpiresAt):null,ke=De&&!isNaN(De.getTime()),We=Be&&!isNaN(Be.getTime()),Nt=(q.promoPrice||0)>0&&(!ke||De<=oe)&&(!We||Be>oe),ye=u==="ZAR"?q.price:q.priceUSD!==void 0?q.priceUSD:0,J=u==="ZAR"?q.memberPrice||ye*.8:q.memberPriceUSD!==void 0?q.memberPriceUSD:ye*.8;let je=ye,jt="none";i.isMember?(je=J,Nt&&(i.membershipTier==="deluxe"&&q.promoDeluxeMemberPrice&&q.promoDeluxeMemberPrice>0?(je=q.promoDeluxeMemberPrice,jt="deluxe"):i.membershipTier==="premium"&&q.promoPremiumMemberPrice&&q.promoPremiumMemberPrice>0?(je=q.promoPremiumMemberPrice,jt="premium"):i.membershipTier==="basic"&&q.promoBasicMemberPrice&&q.promoBasicMemberPrice>0?(je=q.promoBasicMemberPrice,jt="basic"):(q.promoPrice||1/0)<J&&(je=q.promoPrice))):Nt&&(je=q.promoPrice);const ft=Nt&&q.promoBasicMemberPrice&&q.promoBasicMemberPrice>0?q.promoBasicMemberPrice:J;let Wt=je;A&&(Wt+=A.modifier);const Ft=ye+((A==null?void 0:A.modifier)||0),Ss=Ft-ft,as=Math.round(Ss/Ft*100),Me=Nt&&(q.promoBasicMemberPrice&&q.promoBasicMemberPrice>0||q.promoDeluxeMemberPrice&&q.promoDeluxeMemberPrice>0),fs=we=>Math.round((Ft-we)/Ft*100),os=S.useMemo(()=>[...Pe,...be].filter(Je=>typeof(Je==null?void 0:Je.rating)=="number"&&!Number.isNaN(Je.rating)),[Pe,be]),Ws=os.length>0,ur=Ws?(os.reduce((we,Je)=>we+Je.rating,0)/os.length).toFixed(1):"4.9",Ds=Ws?os.length:128,Ms=q.giftProductId?e.find(we=>we.id===q.giftProductId):null,Mn=()=>{Ne||Qe||(s({...q,price:ye},{selectedSize:O,selectedMaterial:A==null?void 0:A.name,selectedMaterialModifier:A==null?void 0:A.modifier,selectedChainStyle:fe,selectedChainLength:Ie}),Ms&&s(Ms,{}))},On=()=>{const we=parseFloat(ee);if(!we||isNaN(we))return;let Je=Vo[0],Ct=Math.abs(we-Je.mm);for(let Et=1;Et<Vo.length;Et++){const It=Math.abs(we-Vo[Et].mm);It<Ct&&(Ct=It,Je=Vo[Et])}we>Vo[Vo.length-1].mm+1.5?$(13):$(Je.size),K(4)},ps=()=>{z(!1),K(1),W(""),$(null)},Os=async we=>{const Je=window.location.href,Ct="Look at this I just bought or saw this isn't it beautiful!",Et=`${Ct} ${Je}`;if(i.id&&!_?(o(q.id),P(!0),alert("You earned 50 Loyalty Points for sharing!")):i.id,we==="native"&&navigator.share)try{await navigator.share({title:q.name,text:Ct,url:Je})}catch{console.log("Native share cancelled")}else we==="whatsapp"?window.open(`https://wa.me/?text=${encodeURIComponent(Et)}`,"_blank"):we==="facebook"&&window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(Je)}&quote=${encodeURIComponent(Ct)}`,"_blank")},$t=HN(q.images[h]||q.images[0]||"",fl(800,800,"Spoil Me Vintage")),ks=()=>u==="ZAR"?"R":"$",ts=(we,Je)=>u==="ZAR"?we:u==="USD"?Je!==void 0?Je:0:we;return t.jsxs("div",{className:"space-y-16 pt-4 pb-16 relative",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-4",children:[t.jsx(Ve,{to:"/",className:"hover:text-white",children:"Home"}),t.jsx("span",{children:"/"}),t.jsx(Ve,{to:`/collections/${encodeURIComponent(q.category)}`,className:"hover:text-white",children:q.category}),t.jsx("span",{children:"/"}),t.jsx("span",{className:"text-gray-300 truncate max-w-[200px]",children:q.name})]}),T&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>k(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-400",children:[t.jsx(lp,{size:32}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"Verified Purchases Only"})]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-4",children:"To maintain the integrity of our reviews, we only accept feedback from verified customers who have purchased this specific item."}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800 mb-6",children:[t.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"How it works:"}),t.jsxs("ul",{className:"text-xs text-gray-400 space-y-3",children:[t.jsxs("li",{className:"flex gap-2 items-start",children:[t.jsx(cr,{size:14,className:"text-cyan-400 shrink-0 mt-0.5"})," ",t.jsxs("span",{children:["A secure review link will be sent to you ",t.jsx("strong",{children:"25 days after purchase"}),"."]})]}),t.jsxs("li",{className:"flex gap-2 items-start",children:[t.jsx(Rn,{size:14,className:"text-yellow-400 shrink-0 mt-0.5"})," ",t.jsxs("span",{children:["Review honestly and earn ",t.jsx("strong",{children:"100 Loyalty Points"}),"!"]})]}),t.jsxs("li",{className:"flex gap-2 items-start",children:[t.jsx(ds,{size:14,className:"text-pink-500 shrink-0 mt-0.5"})," ",t.jsx("span",{children:"Use points (1000 pts = R10) for discounts on your next order."})]})]})]}),t.jsx("button",{onClick:()=>k(!1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-xl font-semibold transition-colors",children:"Understood"})]})]}),L&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:ps}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[t.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[t.jsx(tb,{className:"text-pink-500",size:20})," Find Your Ring Size"]}),t.jsx("button",{onClick:ps,className:"text-gray-500 hover:text-white",children:t.jsx(fu,{size:16})})]}),t.jsxs("div",{className:"min-h-[250px] flex flex-col",children:[F===1&&t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsxs("div",{className:"bg-pink-900/20 p-4 rounded-xl border border-pink-500/20 text-center",children:[t.jsx("span",{className:"text-3xl block mb-2",children:""}),t.jsx("p",{className:"text-sm text-pink-200 font-semibold",children:"Step 1"})]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Take a flexible measuring tape or a piece of string and wrap it around the base of the finger you want to wear the ring on."}),t.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/20 rounded-lg",children:[t.jsxs("p",{className:"text-xs text-yellow-400 font-bold flex items-center gap-2",children:[t.jsx(fu,{size:14})," Important:"]}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Please read your measurement in Millimeters (MM), not CM."})]})]}),F===2&&t.jsxs("div",{className:"flex-1 space-y-6 text-center flex flex-col justify-center",children:[t.jsx("p",{className:"text-white font-semibold",children:"Did you measure your finger with a tape or string?"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>K(3),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-xl font-bold transition-all",children:"Yes, I measured my finger"}),t.jsx("button",{onClick:()=>K(1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-gray-300 rounded-xl font-medium transition-all",children:"Back to Instructions"})]})]}),F===3&&t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Which finger?"}),t.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-sm",value:D,onChange:we=>C(we.target.value),children:[t.jsx("option",{children:"Thumb"}),t.jsx("option",{children:"Index Finger"}),t.jsx("option",{children:"Middle Finger"}),t.jsx("option",{children:"Ring Finger"}),t.jsx("option",{children:"Pinky Finger"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Measured Length (MM)"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",placeholder:"e.g. 54.5",className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-lg font-bold focus:border-pink-500 focus:outline-none",value:ee,onChange:we=>W(we.target.value)}),t.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-bold",children:"mm"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please enter the exact circumference."})]})]}),F===4&&t.jsxs("div",{className:"flex-1 text-center flex flex-col justify-center space-y-6",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Based on your ",D," measurement:"]}),t.jsxs("div",{className:"inline-block p-6 bg-zinc-800 rounded-full border-4 border-pink-500 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[t.jsx("span",{className:"block text-xs text-gray-400 uppercase tracking-wide",children:"US Size"}),t.jsx("span",{className:"text-4xl font-black text-white",children:I})]})]}),q.ringStock&&q.ringStock[(I==null?void 0:I.toString())||""]>0?t.jsxs("button",{onClick:()=>{V((I==null?void 0:I.toString())||""),ps()},className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold transition-all flex items-center justify-center gap-2",children:[t.jsx(dt,{size:18})," Select Size ",I]}):t.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/20 rounded-lg text-red-300 text-sm",children:["Sorry, Size ",I," is currently out of stock."]})]})]}),t.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-800",children:[F>1&&F<4?t.jsxs("button",{onClick:()=>K(we=>we-1),className:"text-gray-400 hover:text-white text-sm flex items-center gap-1",children:[t.jsx(ra,{size:14})," Back"]}):t.jsx("div",{}),F===1&&t.jsxs("button",{onClick:()=>K(2),className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500",children:["Next Step ",t.jsx(Qs,{size:14,className:"inline"})]}),F===3&&t.jsx("button",{onClick:On,disabled:!ee,className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Get My Size"}),F===4&&t.jsx("button",{onClick:ps,className:"text-gray-400 hover:text-white text-sm",children:"Close"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden bg-zinc-900 shadow-lg border border-gray-800 relative group",children:[t.jsx(Mu,{src:$t,alt:q.name,className:"w-full h-full object-cover opacity-95",onError:Qa}),t.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[q.isNewArrival&&t.jsx("span",{className:"bg-cyan-600/90 text-white text-xs font-bold px-3 py-1 rounded-full w-fit",children:"NEW"}),i.isMember&&t.jsxs("span",{className:"bg-purple-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-purple-400 flex items-center gap-1 w-fit",children:[t.jsx(Ot,{size:12,fill:"currentColor"}),jt!=="none"?`${jt.toUpperCase()} PRICE`:"MEMBER DEAL"]})]}),Nt&&!i.isMember&&t.jsx("span",{className:"absolute top-4 right-4 bg-green-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-[0_0_10px_rgba(74,222,128,0.5)]",children:"PROMO"})]}),t.jsx("div",{className:"grid grid-cols-4 gap-4",children:q.images.map((we,Je)=>t.jsx("button",{onClick:()=>y(Je),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${h===Je?"border-pink-500 opacity-100 shadow-[0_0_10px_rgba(236,72,153,0.4)]":"border-gray-800 opacity-60 hover:opacity-100"}`,children:t.jsx(Mu,{src:we,alt:`View ${Je}`,className:"w-full h-full object-cover",onError:Qa})},Je))})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[t.jsx("span",{className:"uppercase tracking-wider font-semibold text-cyan-400",children:q.category}),t.jsx("span",{children:""}),t.jsxs("div",{className:"flex items-center text-yellow-400 gap-1",children:[t.jsx(Rn,{size:14,fill:"currentColor"})," ",ur," (",Ds," reviews)"]})]}),t.jsx("h1",{className:"text-[26px] font-bold text-white mb-4",children:q.name}),t.jsxs("div",{className:"flex flex-col gap-1",children:[q.compareAtPrice&&q.compareAtPrice>Wt&&t.jsxs("div",{className:"flex items-center gap-2 relative",children:[t.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["RRP ",ks(),ts(q.compareAtPrice,q.compareAtPriceUSD).toFixed(2)]}),t.jsx("button",{onClick:()=>N(!v),className:"text-gray-500 hover:text-cyan-400",children:t.jsx(th,{size:14})}),v&&t.jsx("div",{className:"absolute top-6 left-0 z-10 bg-zinc-950 border border-gray-700 p-3 rounded-lg shadow-xl w-64 text-xs text-gray-300 leading-relaxed",children:"Recommended retail price (RRP) set by the manufacturer and used for price comparison purposes."})]}),t.jsxs("div",{className:"flex items-baseline gap-3",children:[t.jsxs("span",{className:`text-[32px] font-bold drop-shadow-sm ${i.isMember?"text-purple-400":"text-green-400"}`,children:[ks(),ts(Wt).toFixed(2)]}),Ft>Wt+.01&&t.jsxs("span",{className:"text-lg text-gray-600 line-through",children:[ks(),ts(Ft).toFixed(2)]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[Nt&&t.jsxs("div",{className:"flex items-center gap-2 text-xs bg-green-900/30 border border-green-500/30 text-green-400 px-2 py-1 rounded w-fit",children:[t.jsx(cr,{size:12})," Ends: ",new Date(q.promoExpiresAt).toLocaleDateString()]}),i.isMember&&t.jsxs("div",{className:"flex items-center gap-2 text-xs bg-purple-900/30 border border-purple-500/30 text-purple-400 px-2 py-1 rounded w-fit font-bold",children:[t.jsx(Ot,{size:12})," ",jt!=="none"?jt:"Member"," Pricing Applied"]})]}),t.jsx("div",{className:"mt-3 flex items-center gap-2 text-sm",children:Ne?t.jsx("span",{className:"bg-red-600 text-white font-black px-3 py-1 rounded-lg shadow-[0_0_10px_rgba(220,38,38,0.8)] border-2 border-red-400 animate-pulse",children:"Just SOLD"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${qt>0?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.8)]":"bg-red-500"}`}),t.jsx("span",{className:`${qt>0?qt<=5?"text-orange-400":"text-green-400":"text-red-400"} font-bold`,children:qt>0?qt<=5?`Only ${qt} left!`:"In Stock":"Out of Stock"})]})})]})]}),!i.isMember&&t.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-900/50 rounded-xl p-5 relative overflow-hidden group",children:[t.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:t.jsx(Ot,{size:80,className:"text-purple-500 transform rotate-12"})}),t.jsxs("h3",{className:"text-purple-400 font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2",children:[t.jsx(Ot,{size:16,fill:"currentColor"})," Unlock Membership Savings"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-zinc-800/50 border border-zinc-700/50",children:[t.jsx("span",{className:"text-gray-400",children:"Retail Price"}),t.jsxs("span",{className:"text-gray-300 font-medium",children:[ks(),ts(Ft).toFixed(2)]})]}),Me?t.jsxs("div",{className:"space-y-2",children:[q.promoBasicMemberPrice&&q.promoBasicMemberPrice>0&&t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Basic Member"}),t.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[fs(q.promoBasicMemberPrice),"% Off"]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[ks(),ts(q.promoBasicMemberPrice).toFixed(0)]})})]}),q.promoPremiumMemberPrice&&q.promoPremiumMemberPrice>0&&q.promoPremiumMemberPrice!==q.promoBasicMemberPrice&&t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Premium Member"}),t.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[fs(q.promoPremiumMemberPrice),"% Off"]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[ks(),ts(q.promoPremiumMemberPrice).toFixed(0)]})})]}),q.promoDeluxeMemberPrice&&q.promoDeluxeMemberPrice>0&&t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-lime-900/20 border border-lime-500/40",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-lime-200 font-bold text-xs",children:"Deluxe Member"}),t.jsxs("span",{className:"text-xs text-lime-300 uppercase font-bold",children:[fs(q.promoDeluxeMemberPrice),"% Off"]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("span",{className:"block text-lime-400 font-bold text-lg",children:[ks(),ts(q.promoDeluxeMemberPrice).toFixed(0)]})})]})]}):t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[t.jsx("span",{className:"text-purple-200 font-bold",children:"Member Price"}),t.jsxs("div",{className:"text-right",children:[t.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[ks(),ts(ft).toFixed(2)]}),t.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:["Save ",as,"%"]})]})]})]}),t.jsxs("div",{className:"mt-4 text-center",children:[t.jsx("button",{onClick:()=>f("/membership"),className:"w-full py-3 text-sm font-bold uppercase tracking-widest text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded hover:shadow-[0_0_15px_rgba(168,85,247,0.4)] transition-all",children:"Join Now"}),t.jsx("p",{className:"text-[10px] text-red-400 font-bold mt-2 uppercase tracking-wide animate-pulse",children:"LIMITED places Available"})]})]}),t.jsxs("div",{className:"space-y-6 mt-6 border-t border-gray-800 pt-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-cherry text-2xl text-pink-500 mb-2 tracking-wide",children:"Description"}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:q.description})]}),q.whenAndHowToWear&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-cherry text-2xl text-cyan-400 mb-2 tracking-wide",children:"Stylish Suggestions"}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:q.whenAndHowToWear})]}),q.material&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-cherry text-2xl text-purple-400 mb-2 tracking-wide",children:"Materials"}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:q.material})]}),q.isUniquePendant&&t.jsxs("div",{className:"bg-orange-900/10 border border-orange-500/20 rounded-xl p-5 mt-4",children:[t.jsxs("h3",{className:"font-cherry text-xl text-orange-400 mb-3 tracking-wide flex items-center gap-2",children:[t.jsx(fu,{size:20})," Oxidized Jewelry Care"]}),t.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"This unique pendant features a deliberate oxidized finish (darkened patina) to enhance the vintage detail."}),t.jsxs("ul",{className:"text-xs text-gray-400 space-y-2 list-disc pl-4",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Do NOT use liquid silver cleaner or dips:"})," These will strip the antique finish instantly."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Avoid polishing cloths:"})," Aggressive rubbing can remove the darkened details."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Keep it dry:"})," Remove before swimming or showering to preserve the wire wrapping."]}),t.jsx("li",{children:"To clean, simply wipe gently with a soft, dry cotton cloth."})]})]})]}),Ms&&t.jsxs("div",{className:"bg-gradient-to-r from-purple-900/40 to-pink-900/40 border border-purple-500/30 rounded-xl p-4 flex items-center gap-4 shadow-[0_0_15px_rgba(168,85,247,0.1)]",children:[t.jsx("div",{className:"p-3 bg-black/50 rounded-full text-pink-400 border border-pink-500/30",children:t.jsx(ds,{size:24})}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-pink-400 uppercase tracking-wider mb-1",children:"Free Gift Included"}),t.jsx("h4",{className:"font-bold text-white",children:Ms.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:["Value: R",q.giftValue||Ms.price]})]}),t.jsx("div",{className:"ml-auto",children:t.jsx("img",{src:Ms.images[0],alt:"Gift",className:"w-12 h-12 rounded object-cover border border-gray-700"})})]}),t.jsxs("div",{className:"space-y-6 py-4 border-t border-gray-800",children:[q.type==="Ring"&&q.ringStock&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Size"}),t.jsxs("button",{onClick:()=>{z(!0),K(1)},className:"text-xs text-pink-400 hover:text-pink-300 flex items-center gap-1 underline decoration-dotted underline-offset-4",children:[t.jsx(tb,{size:14})," Find My Ring Size"]})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(q.ringStock).map(([we,Je])=>t.jsx("button",{disabled:Je===0,onClick:()=>V(we),className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium border transition-all ${O===we?"bg-pink-600 border-pink-600 text-white shadow-[0_0_10px_rgba(236,72,153,0.5)]":Je===0?"bg-zinc-900 border-gray-800 text-gray-600 cursor-not-allowed decoration-slice line-through":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:we},we))}),O&&q.ringStock[O]>0&&t.jsxs("p",{className:`text-xs mt-2 flex items-center gap-1 ${q.ringStock[O]<=5?"text-orange-400 font-bold":"text-green-400"}`,children:[t.jsx(dt,{size:12}),q.ringStock[O]<=5?`Only ${q.ringStock[O]} left in stock!`:"In Stock"]}),O&&q.ringStock[O]===0&&t.jsx("p",{className:"text-xs text-red-500 mt-2 font-bold",children:"Out of stock for this size."})]}),(q.type==="Stud"||q.type==="Dangle")&&q.showEarringOptions&&q.earringMaterials&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Material"}),t.jsx("div",{className:"grid gap-3",children:q.earringMaterials.map(we=>t.jsxs("div",{onClick:()=>se(we),className:`relative p-4 rounded-xl border cursor-pointer transition-all ${(A==null?void 0:A.name)===we.name?"bg-pink-900/10 border-pink-500 shadow-[0_0_10px_rgba(236,72,153,0.2)]":"bg-zinc-900 border-gray-800 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`font-medium text-sm ${(A==null?void 0:A.name)===we.name?"text-white":"text-gray-300"}`,children:we.name}),t.jsx("span",{className:"text-xs font-bold text-pink-400",children:we.modifier>0?`+${ks()}${ts(we.modifier).toFixed(0)}`:""})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:we.description}),(A==null?void 0:A.name)===we.name&&t.jsx("div",{className:"absolute top-3 right-3 w-4 h-4 bg-pink-500 rounded-full flex items-center justify-center",children:t.jsx(dt,{size:10,className:"text-white"})})]},we.name))})]}),(q.type==="Pendant"||q.type==="Necklace")&&q.chainStyles&&q.chainStyles.length>0&&t.jsxs("div",{className:"space-y-6",children:[q.chainStyles.length>1&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Chain Style"}),t.jsx("div",{className:"flex gap-4",children:q.chainStyles.map(we=>t.jsx("button",{onClick:()=>Se(we),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all ${fe===we?"bg-pink-600 border-pink-600 text-white":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:we},we))})]}),fe==="Metal Chain"&&q.pendantChainLengths&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Length"}),t.jsx("div",{className:"grid gap-2",children:Object.keys(q.pendantChainLengths).filter(we=>q.pendantChainLengths[we]).map(we=>t.jsxs("button",{onClick:()=>le(we),className:`text-left p-3 rounded-lg border transition-all ${Ie===we?"bg-cyan-900/20 border-cyan-500":"bg-zinc-900 border-gray-800 hover:bg-zinc-800"}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:`text-sm font-medium ${Ie===we?"text-cyan-400":"text-gray-200"}`,children:we}),Ie===we&&t.jsx(dt,{size:14,className:"text-cyan-400"})]}),t.jsx("p",{className:"text-xs text-gray-500",children:OR[we]||""})]},we))})]}),fe==="Leather Cord"&&t.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded-lg border border-gray-700 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gray-700 rounded-full",children:t.jsx(dt,{size:14,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-white",children:"Fixed Length: 45cm"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Standard leather cord length."})]})]})]})]}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsxs("button",{onClick:Mn,disabled:Ne||Qe,className:"flex-1 bg-pink-600 text-white py-4 rounded-xl font-semibold hover:bg-pink-500 transition-all flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(236,72,153,0.4)] text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(dl,{size:20})," ",yt]}),t.jsx("button",{onClick:()=>r(q.id),className:`p-4 rounded-xl border transition-colors ${Ut?"border-pink-500 bg-pink-500/10 text-pink-500":"border-gray-700 hover:bg-zinc-800 text-gray-400 hover:text-white"}`,children:t.jsx(Lm,{size:24,fill:Ut?"currentColor":"none"})})]}),t.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/20 to-purple-900/20 border border-cyan-500/30 rounded-xl p-5 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 pointer-events-none",children:t.jsx(il,{size:60})}),t.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-2",children:[t.jsx(ds,{size:18,className:"text-pink-500"})," Share & Earn"]}),t.jsxs("p",{className:"text-xs text-gray-300 mb-4 max-w-sm",children:["Share this treasure with friends and earn ",t.jsx("strong",{className:"text-green-400",children:"50 Loyalty Points"})," instantly!"]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>Os("whatsapp"),className:"flex-1 py-2 bg-[#25D366] hover:bg-[#1ebc57] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(37,211,102,0.4)]",children:[t.jsx(rl,{size:16})," WhatsApp"]}),t.jsxs("button",{onClick:()=>Os("facebook"),className:"flex-1 py-2 bg-[#1877F2] hover:bg-[#166fe5] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(24,119,242,0.4)]",children:[t.jsx(rc,{size:16})," Facebook"]}),navigator.share&&t.jsxs("button",{onClick:()=>Os("native"),className:"flex-1 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all",children:[t.jsx(il,{size:16})," More"]})]}),_&&t.jsxs("div",{className:"mt-3 text-xs text-green-400 font-bold flex items-center gap-1 justify-center animate-in fade-in zoom-in",children:[t.jsx(dt,{size:12})," 50 Points Awarded!"]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4 pt-8 border-t border-gray-800",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Fr,{className:"text-cyan-400 mt-1",size:20}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-sm text-gray-200",children:"Free Delivery"}),t.jsx("p",{className:"text-xs text-gray-500",children:"On orders over R500 (PUDO/PAXI only)"})]})]})})]})]}),t.jsxs("div",{className:"pt-12 border-t border-gray-800 animate-in fade-in slide-in-from-bottom-10 duration-700",children:[q.isUniquePendant&&t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl mb-8 flex gap-3 items-start",children:[t.jsx(eh,{className:"text-purple-400 shrink-0 mt-1",size:20}),t.jsxs("p",{className:"text-sm text-gray-300",children:[t.jsx("strong",{children:"Please note:"})," As this is a one-of-a-kind treasure, these reviews reflect experiences from customers who have purchased similar unique pendants from our collection."]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"font-cherry text-[26px] font-bold text-white flex items-center gap-3",children:["Customer Reviews",t.jsx("span",{className:"text-sm font-sans font-normal text-gray-500 bg-zinc-900 px-3 py-1 rounded-full",children:tt})]}),t.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[t.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-green-900/20 border border-green-500/30 text-green-400 px-2 py-1 rounded text-xs font-bold w-fit",children:[t.jsx(lp,{size:14,fill:"currentColor",className:"text-green-500"})," Verified Purchases Only"]}),t.jsx("p",{className:"text-xs text-gray-500 max-w-md",children:"To ensure authenticity, only customers who have purchased this item can leave a review."})]})]}),t.jsx("button",{onClick:()=>k(!0),className:"px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg border border-gray-700 hover:border-gray-600 transition-all flex items-center gap-2 text-sm font-semibold shadow-lg",children:"Write a review"})]}),tt>0?t.jsxs("div",{className:"space-y-8",children:[$e.map((we,Je)=>{var Ct;return t.jsxs("div",{className:"flex flex-col md:flex-row gap-6 border-b border-gray-800 pb-8 last:border-0",children:[t.jsxs("div",{className:"md:w-48 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-white font-bold text-xs",children:(we.userName||we.name||"Verified Buyer").charAt(0)}),t.jsx("span",{className:"font-bold text-gray-200 text-sm",children:we.userName||we.name||"Verified Buyer"})]}),t.jsxs("div",{className:"flex items-center gap-1 ml-10 mb-1",children:[t.jsx(lp,{size:12,className:"text-green-500"}),t.jsx("span",{className:"text--[10px] text-green-500 font-medium",children:"Verified Buyer"})]}),t.jsx("p",{className:"text-xs text-gray-500 ml-10 mb-2",children:we.location||"Unknown"}),t.jsxs("div",{className:"flex items-center gap-1 ml-10",children:[t.jsx("div",{className:"flex text-yellow-400",children:[1,2,3,4,5].map(Et=>t.jsx(Rn,{size:12,fill:Et<=Math.round(we.rating||5)?"currentColor":"none",className:Et<=Math.round(we.rating||5)?"text-yellow-400":"text-gray-700"},Et))}),t.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["(",we.rating||5,")"]})]})]}),t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl rounded-tl-none border border-gray-800/50",children:[t.jsxs("p",{className:"text-gray-300 text-sm italic mb-3 leading-relaxed",children:['"',we.content||we.comment||we.text,'"']}),t.jsx("p",{className:"text-xs text-gray-500 font-medium text-right",children:we.date||((Ct=we.createdAt)!=null&&Ct.toDate?we.createdAt.toDate().toLocaleDateString():"Recent")})]})})]},we.id||`legacy-${Je}`)}),$e.length<tt&&$e.length<de&&t.jsx("div",{className:"text-center pt-4",children:t.jsx("button",{onClick:()=>xe(we=>Math.min(we+Y,de)),className:"w-full py-2 text-gold text-sm underline hover:text-white transition-colors",children:"Load More Customer Reviews"})})]}):t.jsx("div",{className:"bg-zinc-900/30 border border-dashed border-gray-800 rounded-xl p-8 text-center",children:t.jsx("p",{className:"text-gray-500 text-sm",children:"No reviews yet. Be the first to own and review this treasure!"})})]}),Ae.length>0&&t.jsxs("div",{className:"pt-12 border-t border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-end mb-6",children:[t.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white flex items-center gap-2",children:[t.jsx(js,{size:20,className:"text-pink-500"})," More from ",q.category]}),t.jsxs(Ve,{to:`/collections/${encodeURIComponent(q.category)}`,className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View Collection ",t.jsx(Qs,{size:14})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Ae.map(we=>t.jsx(Vc,{product:we},we.id))})]})]})},tu={IS_SANDBOX:!1,MERCHANT_ID:"113371222",MERCHANT_KEY:"cbhnt80ljkt7g",getProcessUrl:()=>"https://www.payfast.co.za/eng/process",getUrls:()=>{const n=window.location.origin;return{return_url:`${n}/#/profile`,cancel_url:`${n}/#/cart`,notify_url:`${n}/api/notify`}}},Fm=S.forwardRef(({amount:n,itemName:e,email:s,returnUrl:r,cancelUrl:i,notifyUrl:o,customStr1:c,customStr2:u,customStr3:f,customInt1:h,isSubscription:y=!1,frequency:v=3,cycles:N=0},T)=>{const k=S.useRef(null);S.useImperativeHandle(T,()=>({submit:()=>{k.current&&k.current.submit()}}));const _=tu.getUrls(),P=tu.MERCHANT_ID,L=tu.MERCHANT_KEY,z=new Date;z.setDate(z.getDate()+1);const F=z.toISOString().split("T")[0];return t.jsxs("form",{ref:k,action:tu.getProcessUrl(),method:"POST",className:"hidden",children:[t.jsx("input",{type:"hidden",name:"merchant_id",value:P}),t.jsx("input",{type:"hidden",name:"merchant_key",value:L}),t.jsx("input",{type:"hidden",name:"return_url",value:r||_.return_url}),t.jsx("input",{type:"hidden",name:"cancel_url",value:i||_.cancel_url}),t.jsx("input",{type:"hidden",name:"notify_url",value:o||_.notify_url}),t.jsx("input",{type:"hidden",name:"amount",value:n.toFixed(2)}),t.jsx("input",{type:"hidden",name:"item_name",value:e}),t.jsx("input",{type:"hidden",name:"email_address",value:s||""}),c&&t.jsx("input",{type:"hidden",name:"custom_str1",value:c}),u&&t.jsx("input",{type:"hidden",name:"custom_str2",value:u}),f&&t.jsx("input",{type:"hidden",name:"custom_str3",value:f}),h&&t.jsx("input",{type:"hidden",name:"custom_int1",value:h}),y&&t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"hidden",name:"subscription_type",value:"1"}),t.jsx("input",{type:"hidden",name:"billing_date",value:F}),t.jsx("input",{type:"hidden",name:"recurring_amount",value:n.toFixed(2)}),t.jsx("input",{type:"hidden",name:"frequency",value:v}),t.jsx("input",{type:"hidden",name:"cycles",value:N})]})]})}),su={"Eastern Cape":{"Gqeberha (Port Elizabeth)":["PEP Pier 14 (Ground Floor, 444 Govan Mbeki Ave)","PEP Home Walmer Park (Shop 87A, Walmer Park Shopping Centre)","PEP Greenacres","PEP Newton Park","PEP Summerstrand"],"East London":["PEP EL CBD (32 Oxford St)","PEP Hemingways Mall (Shop UG54, Hemingways Mall)","PEP Vincent Park","PEP Beacon Bay","PEP Gonubie"],Mthatha:["PEP Mthatha BT Ngebs City (Shop 89, BT Ngebs City)","PEP Mthatha Circus Triangle (Shop 7, Circus Triangle)","PEP Mthatha Plaza"],"Makhanda (Grahamstown)":["PEP Grahamstown High Street (48 High St)","PEP Market Square"],"Queenstown (Komani)":["PEP Queenstown Lukhanji Mall (Shop 45, Lukhanji Mall)"],Uitenhage:["PEP Uitenhage Mall","PEP Corkwood Square"],"Jeffreys Bay":["PEP Fountains Mall","PEP Jeffrey's Bay CBD"],"King William's Town":["PEP King William's Town CBD","PEP Metlife Mall"]},"Free State":{Bloemfontein:["PEP BFN St Andrew St (45 St Andrew St)","PEP Home Mimosa Mall (Mimosa Mall, 131 Kellner St)","PEP Loch Logan","PEP Fleurdal","PEP Northridge Mall"],Welkom:["PEP Welkom Bok Street (Shop 22A, Bok Street)","PEP Welkom Goldfields Mall (Shop U5, Goldfields Mall)","PEP Boitumelo Junction"],Bethlehem:["PEP Bethlehem Dihlabeng Mall (Shop 52, Dihlabeng Mall)","PEP Bethlehem CBD"],Sasolburg:["PEP Sasolburg (Shop 9 Sake Complex, Wandellaan Street)","PEP Sasolburg Mall"],Parys:["PEP Parys (Cnr Kort Street & Middle Street)"],Kroonstad:["PEP Kroonstad Reitz Street (21 Reitz St)","PEP Maokeng Mall"]},Gauteng:{Johannesburg:["PEP JHB Carlton Centre (C/O Commissioner St & Kruis Sts)","PEP Home Jabulani Mall (Shop 84, Jabulani Mall, Soweto)","PEP Sandton City (Shop U12, Sandton City, Rivonia Rd)","PEP Jozi CBD","PEP Braamfontein","PEP Rosebank Mall","PEP Mellville","PEP Cresta","PEP Clearwater Mall"],Pretoria:["PEP PTA Central (Cnr Paul Kruger & Pretorius St)","PEP Home Menlyn Park (Menlyn Park, Garsfontein Road)","PEP Centurion Mall (Shop 15, Centurion Mall, Heuwel Ave)","PEP Sunnyside","PEP Brooklyn","PEP Kolonnade","PEP Wonderpark"],Soweto:["PEP Maponya Mall","PEP Jabulani Mall","PEP Bara Mall","PEP Dobsonville"],Centurion:["PEP Centurion Mall","PEP Lyttelton","PEP Mall @ Reds","PEP Forest Hill"],Midrand:["PEP Mall of Africa","PEP Boulders","PEP Midrand CBD"],Benoni:["PEP Benoni Lakeside Mall (Shop L20, Lakeside Mall, Tom Jones St)","PEP Northmead Square"],Boksburg:["PEP East Rand Mall","PEP Sunward Park"],Krugersdorp:["PEP Krugersdorp Cnr Ockerse (Cnr Ockerse & Human Street)","PEP Krugersdorp Westgate (Shop 30, Westgate Shopping Centre)"],Alberton:["PEP Alberton City (SHOP L106, Alberton City, Voortrekker Street)"],Vereeniging:["PEP Vereeniging Arcon Park (Arcon Park Shopping Centre)","PEP Vereeniging CBD (12 Joubert Street)"]},"KwaZulu-Natal":{Durban:["PEP Durban Dr Pixley Kaseme St (442 Dr Pixley Kaseme Street)","PEP Bluff Towers (Shop 94 Bluff Twrs, 15 Tara Rd)","PEP Home Pavilion (Shop L94, The Pavilion Shopping Centre)","PEP Durban Workshop","PEP Musgrave","PEP Berea","PEP South Beach","PEP Ushaka"],Umhlanga:["PEP Gateway","PEP Crescent","PEP Cornubia"],Pietermaritzburg:["PEP PMB Liberty Mall (Shop 15, Liberty Midlands Mall)","PEP PMB CBD (335 Church Street)","PEP Greater Edendale"],"Richards Bay":["PEP Cell Richards Bay Boardwalk (Shop U004, Boardwalk Inkwazi)","PEP Richards Bay Checkers (Shop 17A, Checkers Centre)"],Ballito:["PEP Ballito Junction","PEP Lifestyle Centre"],Newcastle:["PEP Newcastle Mall","PEP Amajuba Mall"],"Port Shepstone":["PEP Port Shepstone (Cnr Escombe & Wooley St)","PEP South Coast Mall"],Ladysmith:["PEP Ladysmith Murchison Mall (Shop LG11, Murchison Mall)"],Kokstad:["PEP Kokstad Main Street (Shop 1 Spargs Building, 40 Main Street)"]},Limpopo:{Hoedspruit:["PEP Hoedspruit (Wildlife Shop 12)","PEP Hoedspruit Centre"],Ohrigstad:["PEP Ohrigstad (Potgieter St)"],Metz:["PEP Metz Mahlakung Shopping Centre (Shop 7)","PEP Cell Metz (Shop 11)"],Phalaborwa:["PEP Home Ba-phalaborwa Eden Square (Shop 13)","PEP Phalaborwa Shoprite Centre (Shop 8)","PEP Phalaborwa Mall (Shop 5)","PEP Cell Ba-phalaborwa (Shop 7C)","PEP Ba-phalaborwa Checkers (Shop 9)","PEP Phalaborwa Standard Bank Centre (Shop B1)","PEP Ba-phalaborwa Namakwale Crossing (Shop 7)","PEP Cell Phalaborwa Namakgale Crossing (Shop 26)","PEP Lulekani Spar Centre (Shop A3)"],Burgersfort:["PEP Home Burgersfort Tubatse (Shop L50)","PEP Cell Burgersfort Morone Centre (Shop 23A)","PEP Burgersfort Morone Shopping Centre (Shop 5 & 6)","PEP Burgersfort Twin City Mall (Shop 17)","PEP Cell Burgersfort Twin City (Shop 5)","PEP Cell Burgersfort Twin City Shop 41","PEP Burgersfort Platinum Place (Shop 1-3)","PEP Cell Burgersfort Castle Square (Shop 10)","PEP Burgersfort Castle Square (Shop 8)","PEP Burgersfort Burgersfort Mall (Shop 18)","PEP Cell Burgersfort Mall (Shop 28)","PEP Burgersfort Tubatse Mall (Shop L87)","PEP Cell Burgersfort Tubatse Crossing (Shop L57)"],Steelpoort:["PEP Home Steelpoort (Steelpoort Centre)","PEP Steelpoort (Shop 5)","PEP Cell Steelpoort Shopping Centre (Shop 19)"],Polokwane:["PEP Polokwane CBD (Cnr Grobler & Thabo Mbeki St)","PEP Mall of the North (Shop 10, Mall of the North)","PEP Savanna Mall","PEP Limpopo Mall"],Tzaneen:["PEP Tzaneen Tzaneng Mall (Shop B5, Tzaneng Mall, Danie Joubert St)","PEP Tzaneen CBD","PEP Tzaneen Crossing"],Thohoyandou:["PEP Thohoyandou Venda Plaza (Shop B1, Venda Plaza)","PEP Home Thohoyandou (Next to Shoprite, Thohoyandou)","PEP Thavhani Mall","PEP Mvyu"],Mokopane:["PEP Mokopane Mall","PEP Crossing"],"Makhado (Louis Trichardt)":["PEP Louis Trichardt Burger Str (Cnr Burger St & Songozwi Rd)"]},Mpumalanga:{Acornhoek:["PEP Home Acornhoek Mall (Shop 27)","PEP Acornhoek Plaza Extension (Shop 75)","PEP Cell Acornhoek Plaza (Shop 71)","PEP Cell Acornhoek Mall (Shop 3)","PEP Acornhoek Mall (Shop 10)","PEP Cell Acornhoek Mall (Shop 33B)","PEP Acornhoek Shopping Centre (Station Centre)","PEP Cell Acornhoek Shopping Centre"],Thulamahashe:["PEP Cell Thulamahashe (Thula Mall)","PEP Thulamahashe Thula Mall (Shop 17)","PEP Cell Thulamahashe Plaza (Shop 103)","PEP Thulamahashe (Plaza Shop 7)","PEP Cell Thulamahashe Plaza (Shop 14)"],Dwarsloop:["PEP Home Dwarsloop Mall (Shop 208)","PEP Dwarsloop Mall (Shop 66)","PEP Cell Dwarsloop Mall (Shop 48)"],Bushbuckridge:["PEP Bushbuckridge Twin City Mall (Shop 9)","PEP Cell Bushbuckridge Twin City Mall (Shop 2A)","PEP Cell Bushbuckridge Shopping Centre (Shop 1B)","PEP Bushbuckridge Shopping Centre (Shop 6)"],Graskop:["PEP Graskop (Spar Centre)"],Mkhuhlu:["PEP Cell Mkhuhlu (Plaza Shop 12)","PEP Mkhuhlu (Plaza Shop 7)"],Hazyview:["PEP Home Hazyview Junction (Shop 5A)","PEP Home Numbi Gate Dayizenza (Shop 7)","PEP Hazyview Junction (Shop 14B)","PEP Cell Lowveld Mall PNP (Shop 168)","PEP Cell Lowveld Mall Spar (Shop 12)","PEP Hazyview Blue Haze (Shop 304)","PEP Hazyview Lowveld Mall (Shop 232)","PEP Hazyview Lowveld Mall (Shop 155)","PEP Numbigate Dayizenza Plaza (Shop 38A)","PEP Cell Numbigate Dayizenza Plaza (Shop 12)"],Sabie:["PEP Sabie (Shopping Centre)"],"White River":["PEP Home White River Square (Shop 20)","PEP White River (Square Shop 17)","PEP Whiteriver Square 1 (Shop 17)","PEP White River Crossing (Shop 15)","PEP White River Kabokweni (Plaza Shop 10)","PEP Cell White River Kabokweni Plaza (Shop 205A)"],"Lydenburg (Mashishing)":["PEP Home Lydenburg Lt Centre (Shop 5)","PEP Lydenburg Highland Centre (Shop 6A)","PEP Lydenburg (Tamarisk Building)","PEP Cell Mashishing Shoprite Centre"],"Mbombela (Nelspruit)":["PEP Home Riverside Mall Nelspruit (Shop G241)","PEP Home Nelspruit Promenade (Shop 41 & 42)","PEP Home Nelspruit Ilanga Mall (Shop LG36)","PEP Home Nelspruit The Square (Shop 7)","PEP Nelspruit The Grove (Shop 18)","PEP Cell Nelspruit Plaza (Shop 28)","PEP Nelspruit Plaza (Shop 17-20)","PEP Cell Nelspruit Ekukhanyeni (Shop 5)","PEP Nelspruit Brown & Henshall Street","PEP Cell Nelspruit Promenade (Shop 49)","PEP Nelspruit Brown Street (Prorom Building)","PEP Nelspruit (Bester Brown Building)","PEP Nelspruit The Square (Shop 10)","PEP Nelspruit CBD","PEP Riverside Mall (Shop U40)"],Kanyamazane:["PEP Kanyamazane (Shopping Centre Shop 11)"],Emoyeni:["PEP Emoyeni Mall (Shop 22)","PEP Cell Emoyeni Mall (Shop 8)"],"eMalahleni (Witbank)":["PEP Witbank Taxi Rank (Shop 1, 3 Escombe St)","PEP Highveld Mall (Shop U03, Highveld Mall)","PEP Witbank CBD","PEP Saveways Crescent"],Middelburg:["PEP Home Middelburg Mall (Shop 97, Middelburg Mall)","PEP Middelburg CBD (28 Cowen Ntuli Street)","PEP Midwater"],Secunda:["PEP Secunda Mall (Shop 160, Secunda Mall)","PEP Secunda CBD"]},"North West":{Rustenburg:["PEP Rustenburg Mall (Shop 73 Rustenburg Mall)","PEP Waterfall Mall (Shop 12, Waterfall Mall)","PEP Rustenburg CBD","PEP Rustenburg Plaza","PEP Platinum Square"],Potchefstroom:["PEP Potch Walter Sisulu Lane (149 Walter Sisulu Lane)","PEP Home Mooirivier Mall (Shop 16, Mooirivier Mall)","PEP Potch CBD"],"Mahikeng (Mafikeng)":["PEP Mafikeng City Mall (Shop G10, Mafikeng City Mall)","PEP Mmabatho Crossing (Shop 25, Mmabatho Crossing)","PEP Mahikeng CBD","PEP Mega City"],Klerksdorp:["PEP Klerksdorp Terminus (Shop 19, The Terminus Centre)","PEP Klerksdorp CBD","PEP Matlosana Mall","PEP City Mall"],Brits:["PEP Brits Town Centre (Shop G2, Brits Town Centre)","PEP Brits Mall"]},"Northern Cape":{Kimberley:["PEP North Cape Mall (Shop 60, North Cape Mall)","PEP Home Diamond Pavilion Mall (Shop 93, Diamond Pavilion Mall)","PEP Kimberley CBD","PEP New Park"],Upington:["PEP Upington Mall (Shop 12, Upington Mall)","PEP Upington CBD (20 Schroder Street)","PEP Kalahari Mall"],Kuruman:["PEP Kuruman Beare Street (Shop 28B, Beare Street)","PEP Kuruman Mall","PEP The Eye"],"De Aar":["PEP De Aar Main Road (35 Main Road, De Aar)"],Springbok:["PEP Springbok (62 Main Street, Springbok)"]},"Western Cape":{"Cape Town":["PEP CPT Station (Cape Town Station Concourse)","PEP Golden Acre (Shop 10, Golden Acre Mall)","PEP Home Parow Centre (Shop G6, Parow Centre, Voortrekker Rd)","PEP Gardens","PEP V&A Waterfront","PEP Canal Walk","PEP Blue Route"],Stellenbosch:["PEP Eikestad Mall (Shop E4, Eikestad Mall, 43 Andringa Rd)","PEP Kayamandi (Shop 11, Kayamandi Shopping Centre)","PEP Stellenbosch Central"],George:["PEP George Garden Route Mall (Shop 2, Garden Route Mall)","PEP George CBD (82 Hibernia Street)","PEP York Street"],Paarl:["PEP Paarl Mall (Shop 12, Paarl Mall, Cnr Newvlei & Jones St)","PEP Lady Grey","PEP Rembrandt Mall"],Hermanus:["PEP Hermanus Whale Coast Mall (Shop 15, Whale Coast Mall)"],Knysna:["PEP Knysna Long Street (13 Long Street, Knysna)","PEP Knysna Mall","PEP Woodmill Lane"],"Somerset West":["PEP Somerset Mall","PEP Main Road","PEP Waterstone"],"Mossel Bay":["PEP Mossel Bay Mall","PEP Langeberg Mall"],Worcester:["PEP Mountain Mill","PEP Worcester CBD"]}},UR=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm  8cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],zR={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:0}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:0}]},FR=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],$R=({cartItemCount:n,onShippingChange:e,subtotal:s})=>{var le,be,ve,Y,de;const{user:r,currency:i}=vt(),[o,c]=S.useState("pudo"),[u,f]=S.useState(""),[h,y]=S.useState(""),[v,N]=S.useState(""),[T,k]=S.useState(""),[_,P]=S.useState(""),[L,z]=S.useState(""),[F,K]=S.useState(""),[ee,W]=S.useState("economy"),[D,C]=S.useState({street:((le=r.shippingAddress)==null?void 0:le.street)||"",suburb:((be=r.shippingAddress)==null?void 0:be.suburb)||"",city:((ve=r.shippingAddress)==null?void 0:ve.city)||"",province:((Y=r.shippingAddress)==null?void 0:Y.province)||"",postalCode:((de=r.shippingAddress)==null?void 0:de.postalCode)||""}),[I,$]=S.useState({street:"",suburb:"",city:"",province:"",postalCode:"",country:"",email:""}),[O,V]=S.useState(UR),[A,se]=S.useState(zR),[fe,Se]=S.useState(FR),Ie=s>=500;return S.useEffect(()=>{Ie&&o==="door"&&c("pudo")},[Ie,o]),S.useEffect(()=>{i==="USD"?c("international"):o==="international"&&c("pudo")},[i]),S.useEffect(()=>{try{const te=localStorage.getItem("spv_pudo_costs");te&&V(JSON.parse(te));const xe=localStorage.getItem("spv_paxi_costs");xe&&se(JSON.parse(xe));const q=localStorage.getItem("spv_door_to_door_costs");q&&Se(JSON.parse(q))}catch(te){console.error("Failed to load shipping costs from storage",te)}},[]),S.useEffect(()=>{let te=0,xe="";if(o==="pudo"){const q=n<=20?"Extra-Small (XS)":"Small (S)",Ae=O.find($e=>$e.name===q);let Pe="locker";Ae?Ae.lockerToLockerCost!==null?te=Ae.boxCost+Ae.lockerToLockerCost+Ae.lockerHandleFee:Ae.doorToLockerCost!==null?(te=Ae.boxCost+Ae.doorToLockerCost+Ae.doorHandleFee,Pe="door"):te=Ae.boxCost:te=60,_&&L&&F&&(xe=`${_} | ${L} | ${F} | ${Pe}`)}else if(o==="paxi"){let q="7-9 Days Service";s>1e3&&(q="3-5 Days Service");const Ae=A[q],Pe=n<=20?"Small":"Large",$e=Ae.find(ht=>ht.bag.includes(Pe));$e?te=(Pe==="Small"?6:15)+$e.serviceCost+$e.handleFee:te=60,u&&h&&v&&T&&(xe=`${u} | ${h} | ${v} | ${T} | ${q}`)}else if(o==="door"){const q=ee==="overnight"?"Overnight":"Economy",Ae=fe.find(Pe=>Pe.service.includes(q));Ae?te=Ae.boxFee+Ae.initialCharge+(Ae.ratePerKg!==null?Ae.ratePerKg:0)+Ae.handleFee:te=120,D.street&&D.city&&D.postalCode&&(xe=JSON.stringify({...D,service:ee}))}else o==="international"&&(te=60,I.street&&I.city&&I.postalCode?xe=`International Shipping | ${I.street}, ${I.suburb?I.suburb+", ":""}${I.city}, ${I.province?I.province+", ":""}${I.postalCode}${I.country?", "+I.country:""}${I.email?" | Email: "+I.email:""}`:xe="International Shipping");e({method:o,cost:te,details:xe})},[o,n,O,A,fe,ee,_,L,F,u,h,v,T,D,I,e]),S.useEffect(()=>{z("")},[_]),S.useEffect(()=>{y(""),N(""),k("")},[u]),S.useEffect(()=>{N(""),k("")},[h]),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[t.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(Fr,{size:18,className:"text-cyan-400"})," Shipping Method"]}),t.jsx("div",{className:"space-y-3",children:i==="USD"?t.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="international"?"bg-green-900/20 border-green-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="international"?"border-green-500 bg-green-500":"border-gray-500"}`,children:o==="international"&&t.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),t.jsx("span",{className:"text-sm text-gray-300",children:"International Shipping $60"})]}),t.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="international",onChange:()=>c("international")})]}):t.jsxs(t.Fragment,{children:[t.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="pudo"?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="pudo"?"border-cyan-500 bg-cyan-500":"border-gray-500"}`,children:o==="pudo"&&t.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),t.jsx("span",{className:"text-sm text-gray-300",children:"PUDO Locker to Locker"})]}),t.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="pudo",onChange:()=>c("pudo")})]}),t.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="paxi"?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="paxi"?"border-yellow-500 bg-yellow-500":"border-gray-500"}`,children:o==="paxi"&&t.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),t.jsx("span",{className:"text-sm text-gray-300",children:"PAXI (PEP Store - 7-9 Days)"})]}),t.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="paxi",onChange:()=>c("paxi")})]}),t.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${o==="door"?"bg-purple-900/20 border-purple-500 cursor-pointer":Ie?"bg-zinc-900 border-gray-800 opacity-50 cursor-not-allowed":"bg-black border-gray-700 hover:border-gray-600 cursor-pointer"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="door"?"border-purple-500 bg-purple-500":Ie?"border-gray-700":"border-gray-500"}`,children:o==="door"&&t.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),t.jsxs("div",{children:[t.jsx("span",{className:`text-sm ${Ie?"text-gray-500":"text-gray-300"}`,children:"PUDO Door to Door"}),Ie&&t.jsx("span",{className:"text-xs text-gray-500 block",children:"Not available for free shipping"})]})]}),t.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="door",onChange:()=>c("door"),disabled:Ie})]})]})}),o==="pudo"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-cyan-500/20",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("label",{className:"text-[10px] text-cyan-400 uppercase font-bold",children:"Select PUDO Locker Location"}),t.jsxs("a",{href:"https://thecourierguy.co.za/locations/",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[t.jsx(kc,{size:10})," Find PUDO Locker Location Click Here"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:_,onChange:te=>P(te.target.value),children:[t.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(su).sort().map(te=>t.jsx("option",{value:te,children:te},te))]}),t.jsx(eu,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),_&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:L,onChange:te=>z(te.target.value),children:[t.jsx("option",{value:"",children:"-- Select Town --"}),Object.keys(su[_]||{}).sort().map(te=>t.jsx("option",{value:te,children:te},te))]}),t.jsx(eu,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),L&&t.jsx("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Locker Name / Address"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none",placeholder:"e.g. PUDO Locker @ Sandton City",value:F,onChange:te=>K(te.target.value)})]})})]}),o==="paxi"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-yellow-500/20",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("label",{className:"text-[10px] text-yellow-400 uppercase font-bold",children:"Select PEP Store"}),t.jsxs("a",{href:"https://www.paxi.co.za/paxi-points",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[t.jsx(kc,{size:10})," Find PAXI Point"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:u,onChange:te=>f(te.target.value),children:[t.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(su).sort().map(te=>t.jsx("option",{value:te,children:te},te))]}),t.jsx(eu,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),u&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:h,onChange:te=>y(te.target.value),children:[t.jsx("option",{value:"",children:"-- Select Town --"}),Object.keys(su[u]||{}).sort().map(te=>t.jsx("option",{value:te,children:te},te))]}),t.jsx(eu,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),h&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Store Name (or P-Code)"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. PEP Home Acornhoek Mall",value:v,onChange:te=>N(te.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Store Street Address"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. Shop 27, Acornhoek Mall, R40 Main Rd",value:T,onChange:te=>k(te.target.value)})]})]})]}),o==="door"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-purple-500/20",children:[t.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block",children:"Select Service"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${ee==="economy"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[t.jsx("input",{type:"radio",name:"doorService",value:"economy",checked:ee==="economy",onChange:()=>W("economy"),className:"hidden"}),"Economy Road"]}),t.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${ee==="overnight"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[t.jsx("input",{type:"radio",name:"doorService",value:"overnight",checked:ee==="overnight",onChange:()=>W("overnight"),className:"hidden"}),"Overnight Courier"]})]}),t.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block pt-2 border-t border-gray-700/50",children:"Delivery Address"}),t.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:D.street,onChange:te=>C({...D,street:te.target.value})}),t.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:D.suburb,onChange:te=>C({...D,suburb:te.target.value})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:D.city,onChange:te=>C({...D,city:te.target.value})}),t.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:D.postalCode,onChange:te=>C({...D,postalCode:te.target.value})})]}),t.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:D.province,onChange:te=>C({...D,province:te.target.value})})]}),o==="international"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-green-500/20",children:[t.jsx("label",{className:"text-[10px] text-green-400 uppercase font-bold block",children:"International Shipping Address"}),t.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.street,onChange:te=>$({...I,street:te.target.value})}),t.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.suburb,onChange:te=>$({...I,suburb:te.target.value})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.city,onChange:te=>$({...I,city:te.target.value})}),t.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.postalCode,onChange:te=>$({...I,postalCode:te.target.value})})]}),t.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.province,onChange:te=>$({...I,province:te.target.value})}),t.jsx("input",{type:"text",placeholder:"Country",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.country||"",onChange:te=>$({...I,country:te.target.value})}),t.jsx("input",{type:"email",placeholder:"Email",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.email||"",onChange:te=>$({...I,email:te.target.value})}),t.jsx("p",{className:"text-xs text-yellow-400 mt-2",children:"You are liable for any import taxes if any arises."})]})]})},VR=()=>{const{cart:n,removeFromCart:e,updateCartQuantity:s,getCartTotal:r,user:i,appliedVoucher:o,setAppliedVoucher:c,applyExternalVoucher:u,updateUserAddress:f,setIsStickyProgressBarVisible:h,checkout:y,clearCart:v,register:N,login:T,currency:k}=vt(),_=cn(),[P,L]=S.useState({method:"pudo",cost:60,details:""}),[z,F]=S.useState(""),[K,ee]=S.useState(""),[W,D]=S.useState(0),C=S.useRef(null),[I,$]=S.useState(null),[O,V]=S.useState(!1),[A,se]=S.useState("register"),[fe,Se]=S.useState(!1),[Ie,le]=S.useState(!1),[be,ve]=S.useState(""),[Y,de]=S.useState(""),[te,xe]=S.useState(""),[q,Ae]=S.useState(""),[Pe,$e]=S.useState(""),[tt,ht]=S.useState("");S.useEffect(()=>{h(!1)},[h]),S.useEffect(()=>{Ie&&i.email&&(J(),le(!1))},[Ie,i.email]),S.useEffect(()=>{I&&C.current&&(C.current.submit(),v())},[I,v]);const qt=()=>{h(!0),_("/")},Ne=r(),Qe=n.reduce((Me,fs)=>Me+fs.quantity,0),yt=Ne>=500&&(P.method==="pudo"||P.method==="paxi"),Ut=yt?0:P.cost;let oe=0;o&&(o.minSpend&&Ne<o.minSpend||(o.discountType==="percentage"?oe=Ne*o.value/100:oe=o.value)),oe>Ne&&(oe=Ne);let De=0;const Be=Ne-oe;i!=null&&i.storeCredit&&i.storeCredit>0&&i.creditCurrency===k&&(De=Math.min(Be,i.storeCredit));let ke=0;if(W>0){const Me=k==="ZAR"?1:.5;ke=W/100*Me}const We=Ne+Ut-oe-De-ke,Nt=()=>{if(ee(""),!z.trim())return;u(z.trim())?F(""):ee("Invalid or expired voucher code.")},ye=async()=>{if(!P.details){alert("Please complete all shipping details.");return}if(!i.email){V(!0);return}await J()},J=async()=>{P.method==="door"&&await f(JSON.parse(P.details));try{const Me=await y({items:n,total:We,shippingMethod:P.method,shippingDetails:P.details,shippingCost:Ut,pointsToRedeem:W});$(Me)}catch(Me){console.error("Order creation failed",Me),alert("Could not create your order. Please try again.")}},je=async Me=>{if(Me.preventDefault(),ve(""),Pe!==tt){ve("Passwords do not match!");return}await N({name:Y,email:te,birthday:q,password:Pe})?(V(!1),le(!0)):ve("Registration failed. Please try again.")},jt=async Me=>{Me.preventDefault(),ve(""),await T(te,Pe)?(V(!1),le(!0)):ve("Invalid credentials.")},ft=()=>k==="ZAR"?"R":"$",Wt=(Me,fs)=>k==="ZAR"?Me:k==="USD"?fs!==void 0?fs:0:Me,Ft=k==="ZAR"?"R1.00":"$0.50",Ss=k==="ZAR"?"R10":"$5",as=k==="ZAR"?"R100":"$50";return n.length===0?t.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[t.jsx("div",{className:"w-20 h-20 bg-zinc-900 rounded-full flex items-center justify-center text-gray-600",children:t.jsx(Nc,{size:40})}),t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Cart is Empty"}),t.jsx("p",{className:"text-gray-400",children:"Looks like you haven't added any treasures yet."}),t.jsx(Ve,{to:"/",className:"px-6 py-3 bg-pink-600 text-white font-bold rounded-full hover:bg-pink-500 transition-colors",children:"Start Shopping"})]}):t.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[t.jsx(qN,{subtotal:Ne,onContinueShopping:qt}),O&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>V(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-2xl font-bold text-white",children:A==="register"?"Create an Account":"Sign In"}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"An account is required to track your order history and status."})]}),A==="register"?t.jsxs("form",{onSubmit:je,className:"space-y-4",children:[t.jsx("input",{type:"text",required:!0,value:Y,onChange:Me=>de(Me.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Full Name"}),t.jsx("input",{type:"email",required:!0,value:te,onChange:Me=>xe(Me.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),t.jsx("input",{type:"date",required:!0,value:q,onChange:Me=>Ae(Me.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"}),t.jsx("input",{type:fe?"text":"password",required:!0,value:Pe,onChange:Me=>$e(Me.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Create Password"}),t.jsx("input",{type:fe?"text":"password",required:!0,value:tt,onChange:Me=>ht(Me.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Confirm Password"}),be&&t.jsx("p",{className:"text-xs text-red-400 text-center",children:be}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500",children:"Create Account & Continue"}),t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",t.jsx("button",{type:"button",onClick:()=>se("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):t.jsxs("form",{onSubmit:jt,className:"space-y-4",children:[t.jsx("input",{type:"email",required:!0,value:te,onChange:Me=>xe(Me.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),t.jsx("input",{type:fe?"text":"password",required:!0,value:Pe,onChange:Me=>$e(Me.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Password"}),be&&t.jsx("p",{className:"text-xs text-red-400 text-center",children:be}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500",children:"Sign In & Continue"}),t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",t.jsx("button",{type:"button",onClick:()=>se("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsx(Fm,{ref:C,amount:(I==null?void 0:I.total)??We,itemName:I?`Order ${I.orderNumber}`:"Spoil Me Vintage Order",email:i.email,customStr1:(I==null?void 0:I.id)??"",customStr2:P.method,customStr3:(o==null?void 0:o.code)||""}),t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs("h1",{className:"text-2xl font-bold text-white mb-4",children:["Shopping Cart (",Qe,")"]}),t.jsx("div",{className:"space-y-4",children:n.map((Me,fs)=>{let os=Me.stock;Me.type==="Ring"&&Me.selectedSize&&Me.ringStock&&(os=Me.ringStock[Me.selectedSize]||0);const Ws=Me.quantity>=os;return t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-4 rounded-xl flex gap-4 items-start",children:[t.jsx("div",{className:"w-20 h-20 bg-black rounded-lg overflow-hidden border border-gray-700 shrink-0",children:t.jsx("img",{src:Me.images[0],alt:Me.name,className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("h3",{className:"font-bold text-white text-sm line-clamp-2",children:Me.name}),t.jsx("button",{onClick:()=>e(Me.id,{selectedSize:Me.selectedSize,selectedMaterial:Me.selectedMaterial,selectedChainStyle:Me.selectedChainStyle,selectedChainLength:Me.selectedChainLength}),className:"text-gray-500 hover:text-red-400 p-1",children:t.jsx(Or,{size:16})})]}),t.jsxs("div",{className:"text-xs text-gray-400 mt-1 space-y-0.5",children:[Me.selectedSize&&t.jsxs("div",{children:["Size: ",t.jsx("span",{className:"text-gray-300",children:Me.selectedSize})]}),Me.selectedMaterial&&t.jsxs("div",{children:["Material: ",t.jsx("span",{className:"text-gray-300",children:Me.selectedMaterial})]}),Me.selectedChainStyle&&t.jsxs("div",{children:["Chain: ",t.jsxs("span",{className:"text-gray-300",children:[Me.selectedChainStyle," ",Me.selectedChainLength?`(${Me.selectedChainLength})`:""]})]})]}),t.jsxs("div",{className:"flex justify-between items-end mt-3",children:[t.jsxs("div",{className:"flex items-center gap-3 bg-black rounded-lg border border-gray-700 px-2 py-1",children:[t.jsx("button",{onClick:()=>s(Me.id,Me.quantity-1,Me),className:"text-gray-400 hover:text-white",children:t.jsx(FN,{size:14})}),t.jsx("span",{className:"text-sm font-bold text-white w-4 text-center",children:Me.quantity}),t.jsx("button",{onClick:()=>s(Me.id,Me.quantity+1,Me),className:"text-gray-400 hover:text-white disabled:text-gray-700 disabled:cursor-not-allowed",disabled:Ws,children:t.jsx(rn,{size:14})})]}),t.jsxs("div",{className:"font-bold text-white",children:[ft(),((Wt(Me.price,Me.priceUSD||Me.price)+(Me.selectedMaterialModifier||0))*Me.quantity).toFixed(2)]})]})]})]},`${Me.id}_${fs}`)})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx($R,{cartItemCount:Qe,onShippingChange:L,subtotal:Ne}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[t.jsx("h3",{className:"font-bold text-white mb-4",children:"Summary"}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-400 mb-4 pb-4 border-b border-gray-800",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Subtotal"}),t.jsxs("span",{className:"text-white",children:[ft(),Ne.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Shipping"}),t.jsx("span",{className:"text-white",children:yt?t.jsx("span",{className:"text-green-400",children:"FREE"}):`${ft()}${Ut.toFixed(2)}`})]}),oe>0&&t.jsxs("div",{className:"flex justify-between text-green-400",children:[t.jsx("span",{children:"Discount"}),t.jsxs("span",{children:["-",ft(),oe.toFixed(2)]})]}),De>0&&t.jsxs("div",{className:"flex justify-between text-green-400",children:[t.jsx("span",{children:"Store Credit"}),t.jsxs("span",{children:["-",ft(),De.toFixed(2)]})]}),ke>0&&t.jsxs("div",{className:"flex justify-between text-purple-400",children:[t.jsx("span",{children:"Loyalty Discount"}),t.jsxs("span",{children:["-",ft(),ke.toFixed(2)]})]})]}),t.jsxs("div",{className:"flex justify-between items-end mb-6",children:[t.jsx("span",{className:"text-gray-300 font-bold",children:"Total"}),t.jsxs("span",{className:"text-2xl font-bold text-white",children:[ft(),We.toFixed(2)]})]}),o?t.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 p-3 rounded-lg mb-4 flex justify-between items-center text-xs",children:[t.jsxs("span",{className:"text-green-400 font-bold flex items-center gap-1",children:[t.jsx(dt,{size:12})," Code ",o.code," Applied"]}),t.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:"Remove"})]}):t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsx("input",{type:"text",placeholder:"Promo Code",className:"flex-1 bg-black border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-pink-500 outline-none",value:z,onChange:Me=>F(Me.target.value)}),t.jsx("button",{onClick:Nt,className:"bg-zinc-800 hover:bg-zinc-700 text-white px-3 py-2 rounded-lg text-sm border border-gray-600",children:"Apply"})]}),K&&t.jsx("p",{className:"text-xs text-red-400 mb-4",children:K}),i.email&&i.loyaltyPoints>=1e3&&t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-lg mb-4",children:[t.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-2",children:"Redeem Loyalty Points"}),t.jsxs("p",{className:"text-xs text-gray-400 mb-3",children:["100 points = ",Ft," discount. Min 1000 points (",Ss,"). ",i.isMember?"":`Non-members: max ${as} per order.`]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",min:"0",max:Math.min(i.loyaltyPoints,i.isMember?i.loyaltyPoints:1e4),step:"100",value:W,onChange:Me=>D(Math.max(0,parseInt(Me.target.value)||0)),className:"flex-1 bg-black border border-gray-700 rounded px-3 py-2 text-white text-sm",placeholder:"Points to redeem"}),t.jsx("button",{onClick:()=>D(Math.min(i.loyaltyPoints,i.isMember?i.loyaltyPoints:1e4)),className:"bg-purple-600 hover:bg-purple-500 text-white px-3 py-2 rounded text-sm",children:"Max"})]}),W>0&&t.jsxs("p",{className:"text-xs text-purple-400 mt-2",children:["Discount: ",ft(),(W/100).toFixed(2)]})]}),t.jsxs("button",{onClick:ye,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:["Pay Now ",t.jsx(Qs,{size:20})]}),t.jsxs("div",{className:"text-center mt-3 text-xs text-gray-500 flex justify-center gap-2",children:[t.jsx(Bi,{size:14})," Secure Payment via PayFast"]})]})]})]})]})},BR=()=>{const{user:n,products:e,logout:s,currency:r,closeAccount:i}=vt(),o=cn(),[c,u]=S.useState(!1),[f,h]=S.useState(!1),[y,v]=S.useState(""),N=e.filter(F=>(n.wishlist||[]).includes(F.id));if(!n.email)return o("/login"),null;const T=r==="ZAR"?"R10":"$3",k=r==="ZAR"?"R1.00":"$0.50",_=r==="ZAR"?"R10":"$5",P=r==="ZAR"?"R100 (10,000 pts)":"$50 (10,000 pts)",L=r==="ZAR"?"R100":"$50",z=async()=>{try{await i(y),h(!1),alert("Sorry to see you go. Your account will be deleted within 24 hours."),s(),o("/")}catch(F){console.error("Error closing account:",F),alert("Failed to close account. Please try again.")}};return t.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[c&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>u(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[t.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(us,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:t.jsx(ir,{size:24})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),t.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsxs("span",{className:"text-green-400",children:["1 Point for every ",T]})," spent on products."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"100 Points"})," for every verified review."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing products on social media."]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",t.jsxs("span",{className:"text-white font-bold",children:[k," Discount"]}),"."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum redemption is 1000 Points (",_,")."]})]})]}),t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[t.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[t.jsx(ir,{size:14})," Membership Rule"]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",t.jsx("strong",{children:P})," per order. To redeem more than ",L," at once, you must be a ",t.jsx(Ve,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),t.jsx("button",{onClick:()=>u(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),f&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>h(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-red-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(239,68,68,0.3)] animate-in zoom-in-95 duration-200",children:[t.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(us,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-red-900/50 rounded-full border border-red-500 text-red-300",children:t.jsx(eb,{size:24})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"Close Account"})]}),t.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[t.jsx("p",{className:"text-red-400 font-semibold",children:"Are you sure you want to close your account?"}),t.jsx("p",{className:"text-gray-400",children:"This action cannot be undone. Your account and all associated data will be permanently deleted within 24 hours."}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Please tell us why you're leaving (optional)"}),t.jsx("textarea",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-red-500 outline-none resize-none",rows:3,placeholder:"Help us improve our service...",value:y,onChange:F=>v(F.target.value)})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white font-bold rounded-xl transition-colors",children:"Cancel"}),t.jsx("button",{onClick:z,className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-xl transition-colors",children:"Close Account"})]})]})]}),t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsx("div",{className:"flex-1"}),t.jsxs("div",{className:"text-center flex-1",children:[t.jsxs("h1",{className:"text-[28px] font-cherry text-white",children:["Welcome, ",n.name||n.firstName||"User"]}),t.jsx("p",{className:"text-[14px] font-architects text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-yellow-400 italic",children:"Your personal vault of timeless treasuresbecause ordinary is not your style."})]}),t.jsx("div",{className:"flex-1 flex justify-end",children:t.jsx("button",{onClick:()=>{s(),o("/")},className:"p-3 bg-zinc-800 hover:bg-zinc-700 border border-gray-700 rounded-full transition-colors text-gray-400 hover:text-red-400",title:"Logout",children:t.jsx(eb,{size:20})})})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 border border-purple-700 rounded-2xl p-6 text-white shadow-[0_0_20px_rgba(168,85,247,0.2)] relative overflow-hidden mb-8",children:[t.jsx("button",{onClick:()=>u(!0),className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors text-white/80 hover:text-white z-10",children:t.jsx(th,{size:18})}),t.jsxs("div",{className:"flex justify-between items-start mb-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Loyalty Balance"}),t.jsxs("p",{className:"text-xs text-white flex items-center gap-1 mt-1",children:[t.jsx(ul,{size:10})," 1 pt per ",T," spent"]}),t.jsxs("p",{className:"text-xs text-white flex items-center gap-1",children:[t.jsx(rl,{size:10})," 100 pts per review"]}),t.jsxs("p",{className:"text-xs text-white flex items-center gap-1",children:[t.jsx(il,{size:10})," 50 pts per share"]})]}),t.jsx(ir,{size:28,className:"text-pink-300 drop-shadow-[0_0_5px_rgba(236,72,153,0.8)] mr-8"})]}),t.jsxs("div",{className:"text-[22px] font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-white to-pink-200",children:[n.loyaltyPoints||0," ",t.jsx("span",{className:"text-lg font-normal opacity-80 text-white",children:"Points"})]}),t.jsx("div",{className:"mt-4 text-xs bg-black/30 p-3 rounded-lg border border-white/10",children:(n.loyaltyPoints||0)>=1e3?`You have ${r==="ZAR"?"R":"$"}${(Math.floor((n.loyaltyPoints||0)/1e3)*(r==="ZAR"?10:5)).toFixed(2)} off available for your next order!`:`${1e3-(n.loyaltyPoints||0)} more points needed for a ${r==="ZAR"?"R10":"$5"} voucher.`})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Partnership Program"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Earn 20% commission on referrals"})]}),t.jsx(ws,{size:28,className:"text-green-400 drop-shadow-[0_0_5px_rgba(74,222,128,0.6)]"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-black p-3 rounded-lg flex justify-between items-center border border-gray-700",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Your Referral Code"}),t.jsx("span",{className:"font-mono font-bold text-base text-cyan-400 tracking-wider",children:n.affiliateCode||"N/A"})]}),t.jsx("button",{className:"p-2 text-gray-500 hover:text-cyan-400 transition-colors",children:t.jsx(sh,{size:18})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-400 text-sm",children:"Total Earnings"}),t.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",(n.affiliateEarnings||0).toFixed(2)]})]}),t.jsx(Ve,{to:"/affiliate-program",className:"block w-full py-2 border border-cyan-500/50 text-cyan-400 rounded-lg font-semibold hover:bg-cyan-900/30 transition-colors text-sm text-center",children:"View Dashboard"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Account Management"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Manage your account settings"})]}),t.jsx($r,{size:28,className:"text-blue-400 drop-shadow-[0_0_5px_rgba(59,130,246,0.6)]"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-black p-3 rounded-lg border border-gray-700",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Account Status"}),t.jsx("span",{className:"font-medium text-green-400",children:"Active"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-xs text-gray-500 block",children:"Member Since"}),t.jsx("span",{className:"text-sm text-white",children:new Date(n.createdAt||Date.now()).toLocaleDateString()})]})]})}),t.jsx("button",{onClick:()=>h(!0),className:"w-full py-3 border border-red-500/50 text-red-400 rounded-lg font-semibold hover:bg-red-900/30 transition-colors text-sm",children:"Close Account"})]})]})]}),t.jsxs("div",{className:"pt-8 border-t border-gray-800",children:[t.jsxs("h2",{className:"text-[20px] font-bold text-white mb-6 flex items-center gap-2",children:[t.jsx(dl,{size:20,className:"text-pink-500"})," Wishlist (",N.length,")"]}),N.length>0?t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:N.map(F=>t.jsx(Vc,{product:F},F.id))}):t.jsx("p",{className:"text-gray-500 text-sm",children:"Your wishlist is empty."})]})]})},qR=()=>{const[n,e]=S.useState(""),[s,r]=S.useState(""),[i,o]=S.useState(""),[c,u]=S.useState(""),{login:f,authErrorMessage:h,clearAuthError:y}=vt(),v=cn(),N=async T=>{T.preventDefault(),o(""),y(),await f(n,s)?v(n==="spoilmevintagediy@gmail.com"?"/admin":"/"):o(h||"Invalid credentials. Please check your email and password.")};return S.useEffect(()=>{try{const T=localStorage.getItem("spv_admin_denied");T&&(u(T),localStorage.removeItem("spv_admin_denied"))}catch{}},[]),t.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:t.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-zinc-900 rounded-2xl border border-gray-800 shadow-xl",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-handwriting font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Welcome Back"}),t.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Sign in to access your account"})]}),t.jsxs("form",{className:"space-y-6",onSubmit:N,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Sc,{size:18,className:"text-gray-500"})}),t.jsx("input",{type:"email",name:"email",autoComplete:"email",required:!0,value:n,onChange:T=>{e(T.target.value),y(),o("")},className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:"name@example.com"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(ia,{size:18,className:"text-gray-500"})}),t.jsx("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,value:s,onChange:T=>{r(T.target.value),y(),o("")},className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:""})]})]})]}),i&&t.jsx("div",{className:"p-3 bg-red-900/20 border border-red-900/50 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-400 text-center",children:i})}),c&&t.jsx("div",{className:"p-3 bg-yellow-900/20 border border-yellow-800 rounded-lg mt-2",children:t.jsx("p",{className:"text-sm text-yellow-200 text-center",children:c})}),t.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-pink-600 hover:bg-pink-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition-all hover:shadow-[0_0_15px_rgba(236,72,153,0.4)]",children:["Sign In ",t.jsx(Qs,{size:16})]})]}),t.jsx("div",{className:"text-center pt-4 border-t border-gray-800",children:t.jsxs("p",{className:"text-xs text-gray-500",children:["Don't have an account? ",t.jsx("span",{className:"text-gray-400",children:"Registration is currently invite only."})]})})]})})};/*!
 * react-paypal-js v8.9.2 (2025-10-02T20:17:55.069Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn;(function(n){n.INITIAL="initial",n.PENDING="pending",n.REJECTED="rejected",n.RESOLVED="resolved"})(vn||(vn={}));var ta;(function(n){n.LOADING_STATUS="setLoadingStatus",n.RESET_OPTIONS="resetOptions",n.SET_BRAINTREE_INSTANCE="braintreeInstance"})(ta||(ta={}));var ub;(function(n){n.NUMBER="number",n.CVV="cvv",n.EXPIRATION_DATE="expirationDate",n.EXPIRATION_MONTH="expirationMonth",n.EXPIRATION_YEAR="expirationYear",n.POSTAL_CODE="postalCode"})(ub||(ub={}));var vs=function(){return vs=Object.assign||function(e){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},vs.apply(this,arguments)};function ZN(n,e){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(s[r[i]]=n[r[i]]);return s}function hb(n,e,s){if(s||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var Pc="data-react-paypal-script-id",Va={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},WR="Failed to load the PayPal JS SDK script.",XN="paypal",HR="usePayPalScriptReducer must be used within a PayPalScriptProvider";function GR(n){return n===void 0&&(n=XN),window[n]}function KR(n){for(var e="",s=0;s<n.length;s++){var r=n[s].charCodeAt(0)*s;n[s+1]&&(r+=n[s+1].charCodeAt(0)*(s-1)),e+=String.fromCharCode(97+Math.abs(r)%26)}return e}function JR(n){var e=n.reactComponentName,s=n.sdkComponentKey,r=n.sdkRequestedComponents,i=r===void 0?"":r,o=n.sdkDataNamespace,c=o===void 0?XN:o,u=s.charAt(0).toUpperCase().concat(s.substring(1)),f="Unable to render <".concat(e," /> because window.").concat(c,".").concat(u," is undefined."),h=typeof i=="string"?i:i.join(",");if(!h.includes(s)){var y=[h,s].filter(Boolean).join();f+=`
To fix the issue, add '`.concat(s,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(y,"'}}>`.")}return f}function QN(n){var e=n,s=Pc;e[s];var r=ZN(e,[s+""]);return"react-paypal-js-".concat(KR(JSON.stringify(r)))}function YR(n){var e=self.document.querySelector("script[".concat(Pc,'="').concat(n,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function ZR(n,e){var s,r;switch(e.type){case ta.LOADING_STATUS:return typeof e.value=="object"?vs(vs({},n),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):vs(vs({},n),{loadingStatus:e.value});case ta.RESET_OPTIONS:return YR(n.options[Pc]),vs(vs({},n),{loadingStatus:vn.PENDING,options:vs(vs((s={},s[Va.DATA_SDK_INTEGRATION_SOURCE]=Va.DATA_LIBRARY_VALUE,s),e.value),(r={},r[Pc]="".concat(QN(e.value)),r))});case ta.SET_BRAINTREE_INSTANCE:return vs(vs({},n),{braintreePayPalCheckoutInstance:e.value});default:return n}}var ej=S.createContext(null);function XR(n){if(typeof(n==null?void 0:n.dispatch)=="function"&&n.dispatch.length!==0)return n;throw new Error(HR)}function QR(){var n=XR(S.useContext(ej)),e=vs(vs({},n),{isInitial:n.loadingStatus===vn.INITIAL,isPending:n.loadingStatus===vn.PENDING,isResolved:n.loadingStatus===vn.RESOLVED,isRejected:n.loadingStatus===vn.REJECTED});return[e,n.dispatch]}S.createContext({});function e5(n){var e=S.useRef(new Proxy({},{get:function(s,r,i){return typeof s[r]=="function"?function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return s[r].apply(s,o)}:Reflect.get(s,r,i)}}));return e.current=Object.assign(e.current,n),e.current}var Ac=function(n){var e,s=n.className,r=s===void 0?"":s,i=n.disabled,o=i===void 0?!1:i,c=n.children,u=n.forceReRender,f=u===void 0?[]:u,h=ZN(n,["className","disabled","children","forceReRender"]),y=o?{opacity:.38}:{},v="".concat(r," ").concat(o?"paypal-buttons-disabled":"").trim(),N=S.useRef(null),T=S.useRef(null),k=e5(h),_=QR()[0],P=_.isResolved,L=_.options,z=S.useState(null),F=z[0],K=z[1],ee=S.useState(!0),W=ee[0],D=ee[1],C=S.useState(null),I=C[1];function $(){T.current!==null&&T.current.close().catch(function(){})}return!((e=T.current)===null||e===void 0)&&e.updateProps&&T.current.updateProps({message:h.message}),S.useEffect(function(){if(P===!1)return $;var O=GR(L.dataNamespace);if(O===void 0||O.Buttons===void 0)return I(function(){throw new Error(JR({reactComponentName:Ac.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:L.components,sdkDataNamespace:L[Va.DATA_NAMESPACE]}))}),$;var V=function(A,se){K(se),typeof h.onInit=="function"&&h.onInit(A,se)};try{T.current=O.Buttons(vs(vs({},k),{onInit:V}))}catch(A){return I(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(A))})}return T.current.isEligible()===!1?(D(!1),$):(N.current&&T.current.render(N.current).catch(function(A){N.current===null||N.current.children.length===0||I(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(A))})}),$)},hb(hb([P],f,!0),[h.fundingSource],!1)),S.useEffect(function(){F!==null&&(o===!0?F.disable().catch(function(){}):F.enable().catch(function(){}))},[o,F]),Ba.createElement(Ba.Fragment,null,W?Ba.createElement("div",{ref:N,style:y,className:v}):c)};Ac.displayName="PayPalButtons";function t5(n,e){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(s[r[i]]=n[r[i]]);return s}function s5(n,e){var s=document.querySelector('script[src="'.concat(n,'"]'));if(s===null)return null;var r=tj(n,e),i=s.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(r.dataset).length)return null;var o=!0;return Object.keys(i.dataset).forEach(function(c){i.dataset[c]!==r.dataset[c]&&(o=!1)}),o?s:null}function n5(n){var e=n.url,s=n.attributes,r=n.onSuccess,i=n.onError,o=tj(e,s);o.onerror=i,o.onload=r,document.head.insertBefore(o,document.head.firstElementChild)}function r5(n){var e=n.sdkBaseUrl,s=n.environment,r=t5(n,["sdkBaseUrl","environment"]),i=e||o5(s),o=r,c=Object.keys(o).filter(function(h){return typeof o[h]<"u"&&o[h]!==null&&o[h]!==""}).reduce(function(h,y){var v=o[y].toString();return y=i5(y),y.substring(0,4)==="data"||y==="crossorigin"?h.attributes[y]=v:h.queryParams[y]=v,h},{queryParams:{},attributes:{}}),u=c.queryParams,f=c.attributes;return u["merchant-id"]&&u["merchant-id"].indexOf(",")!==-1&&(f["data-merchant-id"]=u["merchant-id"],u["merchant-id"]="*"),{url:"".concat(i,"?").concat(a5(u)),attributes:f}}function i5(n){var e=function(s,r){return(r?"-":"")+s.toLowerCase()};return n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function a5(n){var e="";return Object.keys(n).forEach(function(s){e.length!==0&&(e+="&"),e+=s+"="+n[s]}),e}function o5(n){return n==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function tj(n,e){e===void 0&&(e={});var s=document.createElement("script");return s.src=n,Object.keys(e).forEach(function(r){s.setAttribute(r,e[r]),r==="data-csp-nonce"&&s.setAttribute("nonce",e["data-csp-nonce"])}),s}function l5(n,e){if(e===void 0&&(e=Promise),sj(n,e),typeof document>"u")return e.resolve(null);var s=r5(n),r=s.url,i=s.attributes,o=i["data-namespace"]||"paypal",c=fb(o);return i["data-js-sdk-library"]||(i["data-js-sdk-library"]="paypal-js"),s5(r,i)&&c?e.resolve(c):c5({url:r,attributes:i},e).then(function(){var u=fb(o);if(u)return u;throw new Error("The window.".concat(o," global variable is not available."))})}function c5(n,e){e===void 0&&(e=Promise),sj(n,e);var s=n.url,r=n.attributes;if(typeof s!="string"||s.length===0)throw new Error("Invalid url.");if(typeof r<"u"&&typeof r!="object")throw new Error("Expected attributes to be an object.");return new e(function(i,o){if(typeof document>"u")return i();n5({url:s,attributes:r,onSuccess:function(){return i()},onError:function(){var c=new Error('The script "'.concat(s,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return o(c)}})})}function fb(n){return window[n]}function sj(n,e){if(typeof n!="object"||n===null)throw new Error("Expected an options object.");var s=n.environment;if(s&&s!=="production"&&s!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var Bp=function(n){var e,s=n.options,r=s===void 0?{clientId:"test"}:s,i=n.children,o=n.deferLoading,c=o===void 0?!1:o,u=S.useReducer(ZR,{options:vs(vs({},r),(e={},e[Va.DATA_JS_SDK_LIBRARY]=Va.DATA_LIBRARY_VALUE,e[Va.DATA_SDK_INTEGRATION_SOURCE]=Va.DATA_LIBRARY_VALUE,e[Pc]="".concat(QN(r)),e)),loadingStatus:c?vn.INITIAL:vn.PENDING}),f=u[0],h=u[1];return S.useEffect(function(){if(c===!1&&f.loadingStatus===vn.INITIAL)return h({type:ta.LOADING_STATUS,value:vn.PENDING});if(f.loadingStatus===vn.PENDING){var y=!0;return l5(f.options).then(function(){y&&h({type:ta.LOADING_STATUS,value:vn.RESOLVED})}).catch(function(v){console.error("".concat(WR," ").concat(v)),y&&h({type:ta.LOADING_STATUS,value:{state:vn.REJECTED,message:String(v)}})}),function(){y=!1}}},[f.options,c,f.loadingStatus]),Ba.createElement(ej.Provider,{value:vs(vs({},f),{dispatch:h})},i)};function pb(){}S.createContext({cardFieldsForm:null,fields:{},registerField:pb,unregisterField:pb});const d5=({planId:n,userId:e,onApprove:s,onError:r})=>{const i="Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",o={clientId:i,"client-id":i,currency:"USD",intent:"subscription",vault:!0,components:"buttons"},c=u=>{const f=u.toLowerCase();return f.includes("insider")?"P-27V6575111695415KNE2N6OI":f.includes("gold")?"P-4KK8219436336790HNE2N7HQ":f.includes("deluxe")?"P-5D389612KP666993XNE2N7UY":(console.error("Plan ID not found for:",u),null)};return t.jsx(Bp,{options:o,children:t.jsx(Ac,{createSubscription:(u,f)=>{const h=c(n);if(!h||h.includes("YOUR_")||h.includes("P-INSIDER"))throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID in .env file");return f.subscription.create({plan_id:h})},onApprove:async(u,f)=>{console.log("PayPal subscription approved:",u),await Promise.resolve(s(u))},onError:u=>{console.error("PayPal subscription error:",u),r(u)},style:{shape:"pill",color:"silver",layout:"vertical",label:"subscribe"}})})},u5=({onSuccess:n})=>{const[e,s]=S.useState(!1),[r,i]=S.useState(!1),[o,c]=S.useState({email:"",password:""}),u=(h,y)=>{c(v=>({...v,[h]:y}))},f=async h=>{if(h.preventDefault(),!o.email||!o.password){alert("Please fill in all fields.");return}i(!0);try{await __(o.email,o.password),n()}catch(y){console.error("Login Error",y),alert(y.message||"Login failed. Please check your credentials.")}finally{i(!1)}};return t.jsxs("form",{onSubmit:f,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),t.jsx("input",{type:"email",value:o.email,onChange:h=>u("email",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your email",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:e?"text":"password",value:o.password,onChange:h=>u("password",h.target.value),className:"w-full px-3 py-2 pr-10 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your password",required:!0}),t.jsx("button",{type:"button",onClick:()=>s(!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-yellow-400",children:e?t.jsx(Ru,{size:20}):t.jsx(nl,{size:20})})]})]}),t.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 disabled:bg-gray-600 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:r?"Signing In...":"Sign In"})]})},h5=({onSuccess:n})=>{const[e,s]=S.useState(!1),[r,i]=S.useState(!1),[o,c]=S.useState({firstName:"",lastName:"",email:"",dob:"",gender:"",favoriteColor:"",country:"",password:""}),u=(h,y)=>{c(v=>({...v,[h]:y}))},f=async h=>{if(h.preventDefault(),!o.firstName||!o.lastName||!o.email||!o.password||!o.dob||!o.gender||!o.favoriteColor||!o.country){alert("Please fill in all fields.");return}if(o.password.length<6){alert("Password must be at least 6 characters long.");return}i(!0);try{await C_(o.email,o.password,{firstName:o.firstName,lastName:o.lastName,dob:o.dob,gender:o.gender,favoriteColor:o.favoriteColor,country:o.country,email:o.email,createdAt:new Date().toISOString(),membershipTier:"none",role:"user",wishlist:[]}),n()}catch(y){console.error("Registration Error",y),alert(y.message||"Registration failed. Please try again.")}finally{i(!1)}};return t.jsxs("form",{onSubmit:f,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"First Name"}),t.jsx("input",{type:"text",value:o.firstName,onChange:h=>u("firstName",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"First name",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Last Name"}),t.jsx("input",{type:"text",value:o.lastName,onChange:h=>u("lastName",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Last name",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),t.jsx("input",{type:"email",value:o.email,onChange:h=>u("email",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your email",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date of Birth"}),t.jsx("input",{type:"date",value:o.dob,onChange:h=>u("dob",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Gender"}),t.jsxs("select",{value:o.gender,onChange:h=>u("gender",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0,children:[t.jsx("option",{value:"",children:"Select gender"}),t.jsx("option",{value:"male",children:"Male"}),t.jsx("option",{value:"female",children:"Female"}),t.jsx("option",{value:"other",children:"Other"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Favorite Color"}),t.jsxs("select",{value:o.favoriteColor,onChange:h=>u("favoriteColor",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0,children:[t.jsx("option",{value:"",children:"Select favorite color"}),t.jsx("option",{value:"red",children:"Red"}),t.jsx("option",{value:"blue",children:"Blue"}),t.jsx("option",{value:"green",children:"Green"}),t.jsx("option",{value:"yellow",children:"Yellow"}),t.jsx("option",{value:"purple",children:"Purple"}),t.jsx("option",{value:"pink",children:"Pink"}),t.jsx("option",{value:"orange",children:"Orange"}),t.jsx("option",{value:"black",children:"Black"}),t.jsx("option",{value:"white",children:"White"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Country"}),t.jsx("input",{type:"text",value:o.country,onChange:h=>u("country",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your country",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:e?"text":"password",value:o.password,onChange:h=>u("password",h.target.value),className:"w-full px-3 py-2 pr-10 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Create a password",required:!0}),t.jsx("button",{type:"button",onClick:()=>s(!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-yellow-400",children:e?t.jsx(Ru,{size:20}):t.jsx(nl,{size:20})})]})]}),t.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 disabled:bg-gray-600 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:r?"Creating Account...":"Create Account"})]})},fp={insider:"P-27V6575111695415KNE2N6OI",gold:"P-4KK8219436336790HNE2N7HQ",deluxe:"P-5D389612KP666993XNE2N7UY"},mb=n=>{const e=n.toLowerCase();return e.includes("insider")?fp.insider:e.includes("gold")?fp.gold:e.includes("deluxe")?fp.deluxe:(console.error("Plan ID not found for:",n),null)},gb=async(n,e)=>{try{if(n){const r=await Mc("users",n),i={...r||{},acceptedPlans:{...r&&r.acceptedPlans||{},[e]:!0}};await di("users",n,i);return}}catch(r){console.warn("Supabase accept save failed, falling back to localStorage",r)}const s=`accepted_terms_${n||"guest"}_${e}`;localStorage.setItem(s,"1")},xb=({plan:n,isOpen:e,onClose:s,initialView:r})=>{const{currentUser:i}=vt(),[o,c]=S.useState(r==="auth"?"auth":"terms"),[u,f]=S.useState("register"),[h,y]=S.useState(!1),N=(P=>{const L=P.toLowerCase();return L.includes("insider")?"text-cyan-400":L.includes("gold")?"text-purple-400":L.includes("deluxe")?"text-lime-400":L.includes("spoiler")||L.includes("spoil me")?"text-cyan-400":L.includes("basic")?"text-purple-400":L.includes("premium")?"text-pink-400":"text-gold"})(n.name);S.useEffect(()=>{c(r==="auth"?"auth":"terms")},[r]),S.useEffect(()=>{c(i?"payment":"auth")},[i]),S.useEffect(()=>{i&&o==="auth"&&(console.log("User detected during auth - Auto-switching to Payment"),c("payment"))},[i,o]);const T=()=>{console.log("Auth Success Triggered - Switching to Payment"),c("payment")},k=S.useCallback(async()=>{await gb((i==null?void 0:i.id)||(i==null?void 0:i.uid)||null,n.id),y(!0),c("payment")},[i,n.id]),_=async(P,L)=>{await gb((i==null?void 0:i.uid)||null,n.id),s()};return e?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",children:t.jsxs("div",{className:"bg-zinc-900 border border-gold p-6 rounded-lg max-w-md w-full relative shadow-[0_0_20px_rgba(236,72,153,0.3)]",children:[t.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:""}),!i&&o==="auth"&&t.jsxs("div",{children:[t.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] mb-4 text-center",children:u==="login"?"Welcome Back":"Create Account"}),t.jsxs("p",{className:"text-gray-400 text-sm text-center mb-4",children:["You must be logged in to subscribe to the ",t.jsx("strong",{className:N,children:n.name}),"."]}),t.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[t.jsx("button",{onClick:()=>f("login"),className:`px-4 py-2 rounded-md font-bold transition-colors ${u==="login"?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Log In"}),t.jsx("button",{onClick:()=>f("register"),className:`px-4 py-2 rounded-md font-bold transition-colors ${u==="register"?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Create Account"})]}),u==="login"?t.jsx(u5,{onSuccess:T}):t.jsx(h5,{onSuccess:T})]}),o==="welcome"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl text-gold mb-4 text-center",children:"Welcome to the Club!"}),t.jsxs("p",{className:"text-gray-400 text-sm text-center mb-4",children:["Thank you for choosing to subscribe to the ",t.jsx("strong",{className:N,children:n.name})," plan."]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 mb-6",children:[t.jsxs("div",{className:"text-center mb-2",children:[t.jsxs("span",{className:"text-3xl font-bold text-white",children:[n.currency==="USD"?"$":"R",n.amount]}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Cancel anytime"})]}),t.jsx("div",{className:"mb-4",children:t.jsx(Bp,{options:{clientId:"Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",currency:"USD",intent:"subscription",vault:!0,components:"buttons"},children:t.jsx(Ac,{style:{shape:"pill",color:"gold",layout:"vertical"},fundingSource:"paypal",createSubscription:(P,L)=>{const z=mb(n.name);if(!z)throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID configuration");return L.subscription.create({plan_id:z})},onApprove:_,onCancel:()=>{},onError:P=>{console.error("PayPal error",P)}})})}),t.jsx("div",{className:"text-xs text-gray-400 text-center",children:"By completing payment you accept the Terms and Conditions."})]}),o==="terms"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl text-gold mb-2 text-center",children:"Confirm Subscription"}),i&&t.jsxs("div",{className:"text-center mb-4 text-green-400 text-sm",children:["Logged in as: ",i.email]}),t.jsxs("div",{className:"bg-black p-4 rounded border border-gray-800 h-48 overflow-y-auto mb-4 text-sm text-gray-300",children:[t.jsx("p",{children:"1. Membership fees are billed monthly..."}),t.jsx("p",{children:"2. You may cancel anytime..."})]}),t.jsx("div",{className:"flex flex-col gap-3",children:t.jsx("button",{onClick:k,className:"bg-gold text-black font-bold py-3 rounded hover:brightness-110",children:"I AGREE - PROCEED TO PAYMENT"})})]}),o==="payment"&&t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] mb-4 text-center",children:" Welcome to Spoil Me Vintage"}),t.jsx("p",{className:"text-gray-400 text-sm text-center mb-6",children:'"You deserve to be celebrated every single day."'}),t.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 mb-6 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[t.jsxs("p",{className:"text-gray-300 italic text-sm mb-2",children:["You are taking a beautiful step towards self-love. By joining the ",t.jsx("strong",{className:N,children:n.name}),", you aren't just buying jewelry; you are investing in your own happiness and confidence."]}),t.jsx("div",{className:"text-gold text-xs uppercase tracking-wider font-bold mt-2",children:" The Spoil Me Team"})]}),t.jsxs("div",{className:"mb-6 text-sm text-gray-400",children:[t.jsxs("p",{children:["You are subscribing to the ",t.jsx("strong",{className:N,children:n.name}),"."]}),t.jsxs("p",{children:["Price: ",t.jsxs("strong",{children:[n.currency==="USD"?"$":"R",n.amount," / month"]})]}),t.jsx("p",{className:"text-xs mt-1",children:"(Cancel at anytime. No hidden fees.)"})]}),t.jsx("div",{className:"w-full relative z-10",children:t.jsx(Bp,{options:{clientId:"Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",currency:"USD",intent:"subscription",vault:!0,components:"buttons"},children:t.jsx(Ac,{style:{shape:"pill",color:"gold",layout:"vertical",label:"subscribe"},fundingSource:"paypal",createSubscription:(P,L)=>{const z=mb(n.name);if(!z)throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID configuration");return L.subscription.create({plan_id:z})},onApprove:_})})})]})]})}):null},f5=()=>{const{addSystemNotification:n,user:e,memberCount:s,currency:r}=vt();cn();const i=S.useRef(null),[o,c]=S.useState(null),[u,f]=S.useState(!1),[h,y]=S.useState(!1),[v,N]=S.useState(""),[T,k]=S.useState(!1),[_,P]=S.useState(null),[L,z]=S.useState(null),[F,K]=S.useState(!1),[ee,W]=S.useState(412),[D,C]=S.useState(500),[I,$]=S.useState(485),[O,V]=S.useState(500),[A,se]=S.useState(498),[fe,Se]=S.useState(500),Ie=Ae=>Ae===500?750:Ae===750?1e3:Ae===1e3?1250:Ae+250;S.useEffect(()=>{ee>=D-5&&C(Ie(D))},[ee,D]),S.useEffect(()=>{I>=O-5&&V(Ie(O))},[I,O]),S.useEffect(()=>{A>=fe-5&&Se(Ie(fe))},[A,fe]);const le=(Ae,Pe)=>{const $e=Ae/Pe*100;let tt="bg-green-500",ht=" OPEN";return $e>=95?(tt="bg-red-500 animate-pulse",ht=" CRITICAL"):$e>=80&&(tt="bg-orange-500",ht=" HIGH DEMAND"),{percentage:$e,color:tt,status:ht}},be=le(ee,D),ve=le(I,O),Y=le(A,fe),de=new Date,te=de.getMonth(),xe=de.getFullYear();de.getDate(),new Date(xe,te+1,0).getDate();const q=(Ae,Pe)=>{z({id:Ae,name:Ae,amount:Pe,currency:r}),K(!0)};return t.jsxs("div",{className:"py-8 space-y-12",children:[o&&t.jsx(Fm,{ref:i,amount:o.amount,itemName:`${o.name} Membership`,email:e.email,isSubscription:!0,frequency:3,cycles:0,customStr1:e.id,customStr2:"MEMBERSHIP_SIGNUP"}),h&&v&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-8 rounded-xl max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Complete Your Subscription"}),t.jsx(d5,{planId:v,userId:e.id,onApprove:async Ae=>{console.log("PayPal subscription approved:",Ae),alert(` Subscription successful! Welcome to ${_==null?void 0:_.name}!`),window.location.reload()},onError:Ae=>{console.error("PayPal error:",Ae),alert("Payment failed. Please try again."),y(!1)}}),t.jsx("button",{onClick:()=>y(!1),className:"mt-4 w-full py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg",children:"Cancel"})]})}),T&&_&&t.jsx(xb,{isOpen:T,onClose:()=>k(!1),plan:_,initialView:e?"terms":"auth"}),"%       ",F&&L&&t.jsx(xb,{plan:L,isOpen:F,onClose:()=>K(!1),initialView:e?"terms":"auth"}),t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("h1",{className:"font-cherry text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Membership Perks"}),t.jsx("p",{className:"font-architects text-xl md:text-2xl text-gray-300 max-w-2xl mx-auto",children:"Join the Spoil Me Vintage family and unlock a world of exclusive benefits, discounts, and special gifts!"})]}),t.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 ${r==="ZAR"?"xl:grid-cols-4":"xl:grid-cols-3"} gap-8`,children:r==="ZAR"?t.jsxs(t.Fragment,{children:[t.jsxs(Ve,{to:"/weekly-winners",className:"block relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[t.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-cyan-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Popular"}),t.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"Spoil Me Package"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"R19"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[t.jsxs("span",{children:[ee," / ",D," Spots Taken"]}),t.jsxs("span",{className:`${be.percentage>=95?"text-red-500 animate-pulse":be.percentage>=80?"text-orange-500":"text-green-500"}`,children:[D-ee," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${be.color}`,style:{width:`${be.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Join now before the monthly International Draw!"})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Get ",t.jsx("strong",{className:"text-white",children:"R25 Store Credit"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"5% OFF"})," everything in store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dr,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Fun: Entry into ",t.jsx("strong",{className:"text-white",children:"Weekly Giveaway"})," (Win R500 Gift Card)."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:Ae=>{Ae.preventDefault(),Ae.stopPropagation(),q("Spoil Me",19)},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayFast Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[t.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"Basic Package"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"R49"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Receive a ",t.jsx("strong",{className:"text-white",children:"R50 Voucher"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," entire store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ds,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"R100 Birthday Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(js,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Bonus: ",t.jsx("strong",{className:"text-white",children:"2x Entries"})," into the Weekly Drop."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>q("Basic",49),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayFast Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-pink-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(236, 72, 153, 0.4)"},children:[t.jsx("h2",{className:"text-2xl font-bold text-pink-500 text-center mt-4 mb-2",children:"Premium Package"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"R99"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-pink-500 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Receive a ",t.jsx("strong",{className:"text-white",children:"R100 Voucher"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-pink-500 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," entire store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ds,{className:"text-pink-500 shrink-0",size:16}),t.jsx("span",{children:"Holidays: Free small gift added to orders (Valentine's Day, Mother's Day, Festive)."})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ds,{className:"text-pink-500 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"R150 Birthday Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-pink-500 shrink-0",size:16}),t.jsxs("span",{children:["Priority: ",t.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>q("Premium",99),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayFast Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[t.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[t.jsx(Ot,{size:14})," The Ultimate"]}),t.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:'The Deluxe "Boss" Package'}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"R199"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[t.jsxs("span",{children:[A," / ",fe," Spots Taken"]}),t.jsxs("span",{className:`${Y.percentage>=95?"text-red-500 animate-pulse":Y.percentage>=80?"text-orange-500":"text-green-500"}`,children:[fe-A," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)] ${Y.color}`,style:{width:`${Y.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Warning: We strictly limit Vault access to ensure stock availability. 2 spots remaining."})]}),t.jsxs("div",{className:"bg-lime-900/20 border border-lime-500/30 rounded-xl p-4 mb-6",children:[t.jsxs("h3",{className:"text-lime-400 font-bold text-sm uppercase tracking-wide mb-2 flex items-center gap-2",children:[t.jsx(Ot,{size:16}),' ACCESS TO "THE SECRET VAULT"']}),t.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:["Shop clearance, samples, and slight imperfections starting at ",t.jsx("strong",{className:"text-white",children:"R10"}),"."]}),t.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[t.jsx("p",{children:t.jsx("strong",{children:"The Loyalty Ladder:"})}),t.jsx("p",{children:"Month 1: Buy 5 Vault items."}),t.jsx("p",{children:"Month 2: Buy 7 Vault items."}),t.jsx("p",{children:"Month 3: Buy 10 Vault items."}),t.jsxs("p",{children:["Month 4+: ",t.jsx("strong",{className:"text-lime-400",children:"UNLIMITED ACCESS"}),"."]}),t.jsx("p",{className:"text-red-400 italic",children:"Subscription reset? Start back at Month 1."})]})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: ",t.jsx("strong",{className:"text-white",children:"R150 Store Credit"})," every month (Rolls over)."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," normal retail items."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ds,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"R300 Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Priority: ",t.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),t.jsx("p",{className:"text-xs text-yellow-400 mb-4 italic",children:"Secret Vault items may include factory rejects or slight imperfections. Sold as-is."}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>q("Deluxe Vault",199),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayFast Secure Subscription"]})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[t.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"The Insider Club"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"$5.00"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("p",{className:"text-[10px] text-cyan-300 text-center mb-6 font-semibold uppercase tracking-wide border border-cyan-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:[be.status," (Batch 3)"]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[t.jsxs("span",{children:[ee," / ",D," Spots Taken"]}),t.jsxs("span",{className:`${be.percentage>=95?"text-red-500 animate-pulse":be.percentage>=80?"text-orange-500":"text-green-500"}`,children:[D-ee," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${be.color}`,style:{width:`${be.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Join now before the monthly International Draw!"})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Get ",t.jsx("strong",{className:"text-white",children:"$5.00 Store Credit"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"5% OFF"})," everything in store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dr,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Fun: Entry into ",t.jsx("strong",{className:"text-white",children:"Weekly Giveaway"})," (Win $50 Gift Card)."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>q("Insider Club",5),className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayPal Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[t.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"The Gold Member"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"$12.00"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsx("p",{className:"text-[10px] text-purple-300 text-center mb-6 font-semibold uppercase tracking-wide border border-purple-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:ve.status}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-purple-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-purple-400 mb-1",children:[t.jsxs("span",{children:[I," / ",O," Spots Taken"]}),t.jsxs("span",{className:`${ve.percentage>=95?"text-red-500 animate-pulse":ve.percentage>=80?"text-orange-500":"text-green-500"}`,children:[O-I," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(168,85,247,0.8)] ${ve.color}`,style:{width:`${ve.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Only 15 spots left at this price."})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Get ",t.jsx("strong",{className:"text-white",children:"$12.00 Store Credit"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," everything in store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ds,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"$20 Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Priority: ",t.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>q("Gold Member",12),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayPal Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[t.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[t.jsx(Ot,{size:14})," Top Tier"]}),t.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:'Deluxe "Vault" Access'}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"$25.00"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[t.jsxs("span",{children:[A," / ",fe," Spots Taken"]}),t.jsxs("span",{className:`${Y.percentage>=95?"text-red-500 animate-pulse":Y.percentage>=80?"text-orange-500":"text-green-500"}`,children:[fe-A," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)] ${Y.color}`,style:{width:`${Y.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Warning: We strictly limit Vault access to ensure stock availability. 2 spots remaining."})]}),t.jsxs("div",{className:"bg-lime-900/20 border border-lime-500/30 rounded-xl p-4 mb-6",children:[t.jsxs("h3",{className:"text-lime-400 font-bold text-sm uppercase tracking-wide mb-2 flex items-center gap-2",children:[t.jsx(Ot,{size:16}),' ACCESS TO "THE SECRET VAULT"']}),t.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:["Shop clearance, samples, and slight imperfections starting at ",t.jsx("strong",{className:"text-white",children:"R10"}),"."]}),t.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[t.jsx("p",{children:t.jsx("strong",{children:"The Loyalty Ladder:"})}),t.jsx("p",{children:"Month 1: Buy 5 Vault items."}),t.jsx("p",{children:"Month 2: Buy 7 Vault items."}),t.jsx("p",{children:"Month 3: Buy 10 Vault items."}),t.jsxs("p",{children:["Month 4+: ",t.jsx("strong",{className:"text-lime-400",children:"UNLIMITED ACCESS"}),"."]}),t.jsx("p",{className:"text-red-400 italic",children:"Subscription reset? Start back at Month 1."})]})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: ",t.jsx("strong",{className:"text-white",children:"$15.00 Store Credit"})," every month (Rolls over)."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," normal retail items."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ds,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"$40 Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dt,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Priority: ",t.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),t.jsx("p",{className:"text-xs text-yellow-400 mb-4 italic",children:"Secret Vault items may include factory rejects or slight imperfections. Sold as-is."}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>q("Deluxe Vault",25),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayPal Secure Subscription"]})]})]})]})}),t.jsxs("div",{className:"mt-16 border-t border-gray-800 pt-12 text-center",children:[t.jsxs("h2",{className:"font-cherry text-3xl text-white flex items-center justify-center gap-3 mb-4",children:[t.jsx(ds,{className:"text-yellow-400",size:32})," Want to Earn Rewards for Free?"]}),t.jsx("p",{className:"text-gray-400 max-w-lg mx-auto mb-8",children:"You don't have to be a member to start earning. Join our social channels, leave reviews, and shop to earn points."}),t.jsxs(Ve,{to:"/earn-rewards",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105",children:["Go to Rewards Hub ",t.jsx(Qs,{size:20})]}),t.jsx("br",{}),t.jsxs(Ve,{to:"/vault",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105 mt-4",children:[t.jsx(Ot,{size:20})," Explore The Secret Vault"]}),t.jsx("div",{className:"mt-8 text-center",children:t.jsx(Ve,{to:"/terms",className:"text-gray-400 hover:text-white text-sm underline",children:"View Terms & Conditions"})})]})]})},p5=()=>{var y,v,N,T,k;const{user:n,claimSocialReward:e}=vt(),[s,r]=S.useState(!1),[i,o]=S.useState(null),[c,u]=S.useState(""),f=(_,P)=>{o({platform:_,name:P}),u("")},h=()=>{if(i){if(i.platform!=="whatsapp"&&!c.trim()){alert(`Please enter your ${i.name} username to verify.`);return}e(i.platform,c),o(null)}};return t.jsxs("div",{className:"max-w-5xl mx-auto py-8 space-y-12 relative",children:[i&&t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>o(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"One Last Step!"}),t.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"To prevent fraud and secure your points, please enter your username. This allows us to verify your follow."}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:["Your ",i.name," Username"]}),t.jsxs("div",{className:"relative",children:[t.jsx($r,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"text",value:c,onChange:_=>u(_.target.value),className:"w-full pl-10 p-3 bg-black border border-gray-700 rounded-xl text-white text-sm focus:border-pink-500 outline-none",placeholder:"@username"})]})]}),t.jsx("button",{onClick:h,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all",children:"Verify & Claim Points"})]}),t.jsx("button",{onClick:()=>o(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(us,{size:20})})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 border-b border-gray-800 pb-8",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h1",{className:"font-cherry text-4xl text-white",children:"Loyalty Rewards"}),t.jsx("button",{onClick:()=>r(!0),className:"text-gray-500 hover:text-cyan-400 transition-colors",title:"How it works",children:t.jsx(th,{size:24})})]}),t.jsx("p",{className:"text-gray-400 text-lg max-w-xl",children:"Complete simple tasks to earn points and unlock discounts on your next vintage treasure."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-purple-500/30 min-w-[250px] text-center shadow-[0_0_20px_rgba(168,85,247,0.15)] relative group",children:[t.jsx("div",{className:"absolute inset-0 bg-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"text-sm text-gray-400 uppercase tracking-wider mb-1 font-semibold",children:"Your Balance"}),t.jsx("div",{className:"text-5xl font-bold text-white mb-2 font-mono tracking-tight",children:n.loyaltyPoints}),t.jsx("div",{className:"text-xs text-purple-400 font-bold bg-purple-900/20 py-1 px-3 rounded-full w-fit mx-auto",children:"Points Available"})]})]})]}),s&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>r(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[t.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(us,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:t.jsx(ir,{size:24})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),t.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"1 Point for every R10"})," spent."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"100 Points"})," for verified reviews."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing."]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",t.jsx("span",{className:"text-white font-bold",children:"R1.00 Discount"}),"."]}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum redemption is 1000 Points (R10)."})]})]}),t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[t.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[t.jsx(ir,{size:14})," Membership Rule"]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",t.jsx("strong",{children:"R100 (10,000 pts)"})," per order. To redeem more, you must be a ",t.jsx(Ve,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),t.jsx("button",{onClick:()=>r(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[t.jsx(ds,{className:"text-yellow-400"})," Quick Earn: Social Media"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-pink-500 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-pink-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-pink-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(236,72,153,0.4)] relative z-10",children:t.jsx(Ga,{size:32,className:"text-pink-500"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"TikTok"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Get exclusive clips & flash sales."}),(y=n.socialRewards)!=null&&y.tiktok?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(dt,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>f("tiktok","TikTok"),className:"mt-auto w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Ua,{size:16})," Join & Earn 100"]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-blue-500 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-blue-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(59,130,246,0.4)] relative z-10",children:t.jsx(rc,{size:32,className:"text-blue-500"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Facebook"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Join our community group."}),(v=n.socialRewards)!=null&&v.facebook?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(dt,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>f("facebook","Facebook"),className:"mt-auto w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(59,130,246,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Ua,{size:16})," Join & Earn 100"]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-white/20 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:t.jsx(pu,{size:32,className:"text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Twitter"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"News and polls."}),(N=n.socialRewards)!=null&&N.twitter?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(dt,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>f("twitter","Twitter"),className:"mt-auto w-full py-3 bg-gray-700 hover:bg-gray-600 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(255,255,255,0.2)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Ua,{size:16})," Join & Earn 100"]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-green-500/30 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-green-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:t.jsx(rl,{size:32,className:"text-green-500"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"WhatsApp"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Instant drop notifications."}),(T=n.socialRewards)!=null&&T.whatsapp?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(dt,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>e("whatsapp"),className:"mt-auto w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(34,197,94,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Ua,{size:16})," Join & Earn 100"]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-red-500/30 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-red-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:t.jsx("svg",{width:32,height:32,className:"text-red-500",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,children:t.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.75.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.747-1.378 0 0-.599 2.282-.744 2.84-.282 1.084-1.064 2.456-1.549 3.235C9.584 23.815 10.77 24.001 12.017 24.001c6.624 0 11.99-5.367 11.99-11.987C24.007 5.367 18.641.001 12.017.001z"})})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Pinterest"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Visual inspiration board."}),(k=n.socialRewards)!=null&&k.pinterest?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(dt,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>f("pinterest","Pinterest"),className:"mt-auto w-full py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(239,68,68,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Ua,{size:16})," Join & Earn 100"]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-8 border-t border-gray-800",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[t.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:t.jsx(ul,{className:"text-cyan-400",size:24})}),t.jsx("h3",{className:"text-lg font-bold text-white",children:"Shop & Earn"}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 1 point for every R10 you spend on any purchase automatically."}),t.jsx(Ve,{to:"/",className:"text-cyan-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Start Shopping"})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-yellow-500/30 transition-colors",children:[t.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:t.jsx(Rn,{className:"text-yellow-400",size:24})}),t.jsx("h3",{className:"text-lg font-bold text-white",children:"Review Products"}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 100 points for every verified review you leave on items you've bought."}),t.jsx(Ve,{to:"/profile",className:"text-yellow-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Check Pending Reviews"})]})]})]})},m5=({isOpen:n,onClose:e})=>{const{user:s,updateUser:r}=vt(),[i,o]=S.useState(null),[c,u]=S.useState(!1),f=async()=>{if(i){u(!0);try{await r({affiliateCurrency:i,currencyLocked:!0}),e()}catch(h){console.error("Error saving currency:",h)}finally{u(!1)}}};return n?t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/95 backdrop-blur-xl",children:t.jsxs("div",{className:"bg-zinc-900 border border-pink-500/50 rounded-2xl p-8 max-w-md w-full shadow-[0_0_50px_rgba(236,72,153,0.3)] animate-in zoom-in-95 duration-300",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"w-16 h-16 bg-pink-900/20 border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(ws,{size:32,className:"text-pink-400"})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Choose Your Earning Currency"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"This choice determines how you receive commissions and cannot be changed later."})]}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsx("button",{onClick:()=>o("ZAR"),className:`w-full p-4 rounded-xl border transition-all ${i==="ZAR"?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-green-900/20 rounded-full flex items-center justify-center",children:t.jsx(kc,{size:16,className:"text-green-400"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:" South African Rand (ZAR)"}),t.jsx("div",{className:"text-xs text-gray-400",children:"EFT Bank Transfer Payouts"})]}),i==="ZAR"&&t.jsx(Xa,{size:20,className:"text-green-400 ml-auto"})]})}),t.jsx("button",{onClick:()=>o("USD"),className:`w-full p-4 rounded-xl border transition-all ${i==="USD"?"bg-blue-900/20 border-blue-500 text-blue-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-900/20 rounded-full flex items-center justify-center",children:t.jsx(kc,{size:16,className:"text-blue-400"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:" US Dollar (USD)"}),t.jsx("div",{className:"text-xs text-gray-400",children:"PayPal Payouts"})]}),i==="USD"&&t.jsx(Xa,{size:20,className:"text-blue-400 ml-auto"})]})})]}),t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-4 rounded-lg mb-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(mi,{size:20,className:"text-yellow-500 shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-yellow-400 font-bold text-sm mb-1",children:"Permanent Choice"}),t.jsx("p",{className:"text-yellow-300 text-xs",children:"Once selected, your currency cannot be changed. Choose based on your payout preferences."})]})]})}),t.jsx("button",{onClick:f,disabled:!i||c,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all shadow-lg",children:c?"Saving...":"Confirm Currency Choice"})]})}):null},g5=()=>{const{user:n,affiliateLeaderboard:e,applyForAffiliate:s,buyAffiliateContent:r,joinAffiliateElite:i,register:o,login:c,getAllUsers:u,currency:f}=vt(),[h,y]=S.useState(!1),[v,N]=S.useState(1),[T,k]=S.useState(!1),[_,P]=S.useState(!1),[L,z]=S.useState({name:n&&n.name&&n.name!=="Guest"?n.name.split(" ")[0]:"",surname:n&&n.name&&n.name!=="Guest"?n.name.split(" ").slice(1).join(" "):"",email:(n==null?void 0:n.email)||"",dob:(n==null?void 0:n.birthday)||"",gender:"",reason:"",socials:"",password:""}),[F,K]=S.useState(!1),[ee,W]=S.useState(!1),[D,C]=S.useState(!1),[I,$]=S.useState(!1),[O,V]=S.useState(""),[A,se]=S.useState(""),[fe,Se]=S.useState({}),[Ie,le]=S.useState(!1),[be,ve]=S.useState([]),[Y,de]=S.useState(!1);S.useEffect(()=>{var ke,We,Nt;((ke=n.affiliateStats)==null?void 0:ke.status)==="pending"&&P(!0),((We=n.affiliateStats)==null?void 0:We.status)==="approved"&&u().then(ye=>{const J=ye.filter(je=>{var jt;return((jt=je.affiliateStats)==null?void 0:jt.parentId)===n.id});ve(J)}),((Nt=n.affiliateStats)==null?void 0:Nt.status)==="approved"&&!n.currencyLocked&&de(!0)},[n.affiliateStats,n.id,n.currencyLocked,u]);const te=S.useMemo(()=>[{title:"1. Introduction",content:'These Terms and Conditions ("Agreement") govern your participation in the Spoil Me Vintage Partnership Program ("Program"). By enrolling in the Program, you agree to be bound by these terms.'},{title:"2. Definitions",content:'"Partner", "You", and "Your" refer to the individual or entity applying for or participating in the Program. "We", "Us", and "Our" refer to Spoil Me Vintage. "Commission" refers to the amount paid for a successful referral. "Net Sales" refers to the final sale price of a product EXCLUDING shipping costs, customs duties, taxes (VAT), and any refunds.'},{title:"3. Enrollment",content:"To begin the enrollment process, you must submit a complete Partnership Application. We will evaluate your application and notify you of your acceptance or rejection. We reserve the right to reject applications from sites or profiles that do not meet our brand standards."},{title:"4. Affiliate Links",content:"You will be issued a unique Affiliate URL or code. Sales must be tracked via these links to generate commission. We use a 30-day cookie window. It is your responsibility to ensure that these links are correctly formatted and used on your site."},{title:"5. Commissions & Earnings",content:'You will earn commissions based on the specific product category sold: 5.1. Standard Jewelry: Earn 10% to 20% on Net Sales based on your monthly performance tier. 5.2. "Secret Vault" Items: Due to the clearance pricing of Vault items, these sales earn a flat 1% Commission regardless of your tier. 5.3. Memberships: Earn a fixed monthly recurring commission (ZAR R2-R15 or USD $1-$3) for active, paid subscriptions. 5.4. Override: Earn a 1% bonus on Net Sales generated by partners you directly recruit.'},{title:"6. Payment Terms & Currency",content:"Commissions are paid once a month. 6.1. South African Partners: Paid via EFT to a valid SA Bank Account. International earnings (USD) are converted to ZAR at the bank rate. Minimum payout: R200. 6.2. International Partners: Paid via PayPal in USD. South African earnings (ZAR) are converted to USD at the bank rate. Minimum payout: $50."},{title:'7. "Secret Vault" Items',content:'This section strictly governs the purchase of discounted items from the "Secret Vault." 7.1. Nature of Goods ("Sold As-Is"): Items listed in "The Secret Vault" (priced from R10 / $1) may include: Factory overstock, Sample items, Items with minor cosmetic imperfections ("Rejects" or "Seconds"). ALL SALES FROM THE SECRET VAULT ARE FINAL. NO RETURNS, REFUNDS, OR EXCHANGES ARE PERMITTED ON THESE ITEMS. 7.2. The "Loyalty Ladder" & Purchase Limits: To prevent resale abuse, purchase limits apply to The Secret Vault based on consecutive months of membership: Month 1: Maximum 5 items, Month 2: Maximum 7 items, Month 3: Maximum 10 items, Month 4+: Unlimited. 7.3. The "Reset Rule" (Strict Enforcement): Membership continuity is required to maintain your "Loyalty Ladder" status. If you cancel your subscription or if your payment fails and is not rectified within 48 hours, your Loyalty Ladder status RESETS TO MONTH 1.'},{title:"8. Competitions & Weekly Drops",content:'8.1. Promotional Competition: The "Spoil Me" package (R19) includes entry into giveaways. This is a promotional competition under the South African Consumer Protection Act (CPA), not a lottery. You are paying for the Membership Services (Sales alerts, Vouchers), and the entry is a complimentary benefit. 8.2. International Winners: If a winner is selected from outside South Africa: Physical prizes may be converted to Store Credit of equivalent value to avoid shipping fees. If the winner requests the physical item, the winner is responsible for all international shipping costs and customs duties.'},{title:"9. International Orders & Shipping",content:"9.1. Customs, Duties, and Taxes: DDU (Delivered Duty Unpaid): For all international orders (outside South Africa), Spoil Me Vintage is NOT responsible for any customs fees, import duties, or local taxes. These fees are the sole responsibility of the customer. If you refuse to pay customs fees and the package is returned to us, we will deduct the return shipping costs from any potential refund. 9.2. Shipping Times: International shipping times are estimates (typically 10-25 business days). We are not liable for delays caused by customs departments or global logistics strikes."},{title:"10. Returns and Refunds",content:"10.1. Standard Products (Non-Vault): South Africa: You may return unused, undamaged standard jewelry within 7 days of receipt for a store credit or exchange, in accordance with the CPA. International: Due to high shipping costs, international returns are generally not accepted unless the item arrived damaged. Evidence (photos) must be provided within 24 hours of delivery. 10.2. Non-Returnable Items: The following items are final sale and cannot be returned: Earrings (for hygiene reasons), Secret Vault Items, Customized or personalized jewelry."},{title:"11. Limitation of Liability",content:"To the fullest extent permitted by law, Spoil Me Vintage shall not be liable for: Allergic Reactions: Our jewelry materials are listed on the product page. It is the customer's responsibility to verify they are not allergic to metals (e.g., nickel, copper, alloys) before wearing. We are not liable for skin reactions. Indirect Damages: Any indirect, incidental, or consequential damages arising from the use of our products or website. Maximum Liability: In no event shall our total liability to you exceed the amount you paid to us in the 3 months preceding the claim."},{title:"12. Payment Terms",content:"Payments are processed securely via third-party providers (e.g., PayFast, Stripe, Yoco). Spoil Me Vintage does not store your full credit card details. By subscribing, you authorize us to charge your payment method automatically every month until you cancel."},{title:"13. Governing Law and Dispute Resolution",content:"These Terms are governed by the laws of the Republic of South Africa. Any disputes arising from these Terms shall be subject to the exclusive jurisdiction of the Magistrate's Court in Worcester, Western Cape. For International customers, you agree to waive any right to class action lawsuits and agree to resolve disputes through binding arbitration in South Africa, or via amicable email resolution."},{title:"14. Commission Rates & Exceptions",content:'14.1. Standard Products: Commission rates (10% - 20%) apply to all full-priced, standard retail jewelry items based on your monthly performance tier. 14.2. "Secret Vault" Items: Items purchased from "The Secret Vault" (Clearance/Sample stock) are sold at near-cost prices. Therefore, all Vault items earn a flat 1% commission, regardless of your current Tier status. 14.3. Shipping & Taxes: Commissions are calculated on the Net Product Price only. Shipping fees, taxes, and duties are excluded from all calculations. 14.4. Payouts: South Africa: Paid via EFT (ZAR). International earnings converted to ZAR. International: Paid via PayPal (USD). South African earnings converted to USD.'},{title:"15. CONTACT US",content:"For questions regarding these Terms, please contact us at: Email: spoilmevintagediy@gmail.com WhatsApp: +27 71858 9370"}],[]),xe=te.length>0&&te.every((ke,We)=>fe[We]),q=async ke=>{var Nt;if(ke.preventDefault(),se(""),await c(L.email,O)){$(!1),N(2);const J=(await u()).find(je=>je.email.toLowerCase()===L.email.toLowerCase());((Nt=J==null?void 0:J.affiliateStats)==null?void 0:Nt.status)==="approved"&&(y(!1),setTimeout(()=>{var je;return(je=document.getElementById("affiliate-dashboard"))==null?void 0:je.scrollIntoView({behavior:"smooth"})},500))}else se("Invalid password. Please try again.")},Ae=async ke=>{if(ke.preventDefault(),!L.reason.trim()||!F)return;const We={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},Nt={status:"pending",gender:L.gender,joinReason:`${L.reason} | Socials: ${L.socials}`,totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1};if(n.email)await s(L),C(!0);else{if(!L.email||!L.password){alert("Please provide email and password to create your account.");return}if((await u()).find(jt=>jt.email.toLowerCase()===L.email.toLowerCase())){$(!0),se("This email address is already associated with an account. Please Log In to continue your application.");return}if(!await o({name:`${L.name} ${L.surname}`,email:L.email,password:L.password,birthday:L.dob,notifications:[We],affiliateStats:Nt})){alert("Failed to create account. Please try again.");return}C(!0)}},Pe=()=>{y(!1),C(!1),N(1),W(!1),K(!1),Se({}),$(!1),V(""),se("")},$e=async()=>{window.confirm("Purchase the Partner Content Pack for R250?")&&(await r(),alert("Content Unlocked!"))},tt=async()=>{window.confirm("Upgrade to Elite Partner Status? A fee applies.")&&(await i(),alert("Welcome to the Elite Squad!"))},ht=()=>{K(!0),k(!1)},qt=ke=>{Se(We=>({...We,[ke]:!We[ke]}))},Ne=()=>{const ke=`${window.location.origin}/#/?ref=${n.affiliateCode}`;navigator.clipboard.writeText(ke),le(!0),setTimeout(()=>le(!1),2e3)},Qe=n.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,isElite:!1},yt=Qe.status==="approved",Ut=[{name:"Bronze",rate:10,min:0,max:f==="ZAR"?2e3:200},{name:"Silver",rate:11,min:f==="ZAR"?2001:201,max:f==="ZAR"?5e3:500},{name:"Gold",rate:15,min:f==="ZAR"?5001:501,max:f==="ZAR"?1e4:1e3},{name:"Platinum",rate:20,min:f==="ZAR"?10001:1001,max:f==="ZAR"?25e3:2500}],oe=Ut.find(ke=>Qe.totalSalesValue>=ke.min&&Qe.totalSalesValue<=ke.max)||Ut[0],De=Ut.indexOf(oe);let Be=null;return De<Ut.length-1&&(Be=Ut[De+1],Be.min-oe.min,Qe.totalSalesValue-oe.min),t.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-16",children:[t.jsx("style",{children:`
            @keyframes marquee {
                0% { transform: translateX(100%); }
                100% { transform: translateX(-100%); }
            }
            .animate-marquee {
                animation: marquee 20s linear infinite;
            }
        `}),t.jsxs("div",{className:"relative rounded-3xl overflow-hidden bg-zinc-900 border border-pink-500/30 min-h-[400px] flex items-center",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-zinc-900/90 to-transparent z-10"}),t.jsx("div",{className:"absolute right-0 top-0 h-full w-1/2 bg-[url('https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80')] bg-cover bg-center opacity-40 grayscale mix-blend-luminosity"}),t.jsxs("div",{className:"relative z-20 p-8 md:p-16 max-w-2xl space-y-6",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-1.5 rounded-full text-sm font-bold uppercase tracking-wider",children:[t.jsx(Ec,{size:16})," Join the Team"]}),t.jsx("h1",{className:"font-cherry text-5xl md:text-7xl text-white leading-none drop-shadow-[0_0_15px_rgba(236,72,153,0.6)]",children:"Turn Passion into Profit"}),t.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:f==="ZAR"?"Join the Spoil Me Team. Earn up to 20% Commission + Monthly Recurring Rands.":"Join the Spoil Me Team. Earn up to 20% Commission + Monthly Recurring Cash."}),!yt&&Qe.status!=="pending"&&t.jsxs("button",{onClick:()=>y(!0),className:"px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.4)] flex items-center gap-2",children:[f==="ZAR"?"JOIN THE TEAM (ZA)":"JOIN THE TEAM (GLOBAL)"," ",t.jsx(Qs,{size:20})]}),Qe.status==="pending"&&t.jsxs("button",{onClick:()=>P(!0),className:"inline-flex items-center gap-2 bg-yellow-900/20 border border-yellow-500/30 text-yellow-400 px-6 py-3 rounded-lg font-bold hover:bg-yellow-900/40 transition-colors",children:[t.jsx(cr,{size:18})," Check Application Status"]}),yt&&t.jsxs("button",{onClick:()=>{var ke;return(ke=document.getElementById("affiliate-dashboard"))==null?void 0:ke.scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 bg-green-600 text-white font-bold rounded-full hover:bg-green-500 transition-all shadow-[0_0_20px_rgba(34,197,94,0.4)] flex items-center gap-2",children:["Go to Dashboard ",t.jsx(Qs,{size:20})]})]})]}),t.jsxs("div",{className:`overflow-hidden bg-zinc-900/50 border border-gray-800 rounded-2xl p-4 ${f==="ZAR"?"view-zar":"view-usd"}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(dr,{className:"text-yellow-500",size:20}),t.jsx("span",{className:"text-sm font-bold text-white",children:"Recent Partner Success"})]}),t.jsx("div",{className:"overflow-hidden",children:t.jsx("div",{className:"animate-marquee whitespace-nowrap",children:f==="ZAR"?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Sarah J. (Pretoria) earned R450..."}),t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Thandi M. (JHB) hit Gold Tier..."}),t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Lerato K. (Durban) earned R2,000..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Emily R. (Texas) earned $50..."}),t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Mike T. (London) hit Gold Tier..."}),t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Jessica L. (NY) earned $120..."})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[t.jsx("div",{className:"w-16 h-16 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto mb-4 text-green-500 font-bold text-xl shadow-[0_0_15px_rgba(34,197,94,0.3)]",children:"1"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sign Up & Share"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Apply to become a partner. Once approved, share your unique code to start earning."})]}),t.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[t.jsx("div",{className:"w-16 h-16 bg-black border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 text-pink-500 font-bold text-xl shadow-[0_0_15px_rgba(236,72,153,0.3)]",children:"2"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Recruit & Earn"}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Invite others to join your team. You earn a ",t.jsx("strong",{children:"1% commission"})," on their sales forever!"]})]}),t.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[t.jsx("div",{className:"w-16 h-16 bg-black border-2 border-purple-500 rounded-full flex items-center justify-center mx-auto mb-4 text-purple-500 font-bold text-xl shadow-[0_0_15px_rgba(168,85,247,0.3)]",children:"3"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Get Paid"}),t.jsx("p",{className:"text-gray-400 text-sm",children:f==="ZAR"?"We payout commissions monthly via EFT to your South African bank account.":"We pay you monthly in USD via PayPal. Fast and secure."})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Earning Potential"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"See what successful partners are earning with our tiered commission structure."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:t.jsx(ws,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Passive Income"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Recruit 10 Deluxe Members"})]})]}),t.jsx("div",{className:"text-2xl font-bold text-green-400 mb-2",children:f==="ZAR"?"R150/month":"$30/month"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Earn recurring commissions on their monthly subscriptions forever."})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-yellow-900/20 rounded-lg text-yellow-400",children:t.jsx(dr,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Weekly Bonus"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Hit the milestone"})]})]}),t.jsx("div",{className:"text-2xl font-bold text-yellow-400 mb-2",children:f==="ZAR"?"R200 Cash":"$15 Cash"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Weekly cash bonuses for reaching sales targets."})]})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Partner Success Stories"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Real partners sharing their experiences with the Spoil Me program."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-pink-900/20 rounded-full flex items-center justify-center text-pink-400 font-bold",children:"L"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Lerato, Johannesburg"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Started 6 months ago"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:'"I shared my link on WhatsApp status. My first month I made R2,000 extra cash. The EFT was on time and easy to receive."'})]}),t.jsxs("div",{className:`bg-zinc-900 p-6 rounded-2xl border border-gray-800 ${f==="USD"?"block":"hidden"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-cyan-900/20 rounded-full flex items-center justify-center text-cyan-400 font-bold",children:"J"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Jessica, Texas"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Active partner"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:'"The recurring commission covers my own jewelry addiction! I love getting paid in USD via PayPal."'})]})]})]}),yt&&t.jsxs("div",{id:"affiliate-dashboard",className:"space-y-8 animate-in slide-in-from-bottom-10 duration-700 pt-8 border-t border-gray-800",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Your Partnership Dashboard"}),t.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",n&&n.name?n.name.split(" ")[0]:"Partner","! Manage your links and earnings."]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(Ve,{to:"/affiliate/store-builder",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white rounded-lg text-sm font-bold flex items-center gap-2",children:[t.jsx(Ec,{size:16})," Build Store"]}),t.jsxs("button",{onClick:$e,className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg text-sm border border-gray-700 flex items-center gap-2",children:[t.jsx(MN,{size:16})," Content Assets"]}),!Qe.isElite&&t.jsxs("button",{onClick:tt,className:"px-4 py-2 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:brightness-110",children:[t.jsx(Ot,{size:16})," Go Elite"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:t.jsx(ws,{size:24})}),t.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Total Earnings"})]}),t.jsxs("div",{className:"text-3xl font-bold text-white",children:["R",Qe.balance.toFixed(2)]}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Next payout date: 1st of month"})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:t.jsx(qs,{size:24})}),t.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Direct Sales"})]}),t.jsx("div",{className:"text-3xl font-bold text-white",children:Qe.totalSalesCount}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Value: R",Qe.totalSalesValue.toFixed(0)]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:t.jsx(Rn,{size:24})}),t.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Current Rate"})]}),t.jsxs("div",{className:"text-3xl font-bold text-white",children:[Qe.commissionRate,"%"]}),t.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:["Tier: ",oe.name]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(il,{size:20,className:"text-pink-500"})," Your Referral Link"]}),t.jsx("div",{className:"bg-black p-4 rounded-xl border border-gray-700 flex flex-col gap-3",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[t.jsxs("code",{className:"flex-1 text-cyan-400 text-sm break-all font-mono bg-zinc-900/50 p-3 rounded border border-gray-800 w-full",children:[window.location.origin,"/#/?ref=",n.affiliateCode]}),t.jsxs("button",{onClick:Ne,className:"w-full md:w-auto px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg transition-colors flex items-center justify-center gap-2 border border-gray-600",children:[Ie?t.jsx(dt,{size:14}):t.jsx(sh,{size:14}),Ie?"Copied!":"Copy Link"]})]})}),t.jsx("div",{className:"mt-4 bg-pink-900/20 p-3 rounded-lg border border-pink-500/20",children:t.jsxs("p",{className:"text-xs text-pink-300",children:[t.jsx("strong",{children:"Tip:"})," Customers get ",t.jsx("strong",{children:"5% OFF"})," when using your code ",t.jsx("code",{children:n.affiliateCode})," at checkout!"]})})]}),t.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-cyan-500/30 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:t.jsx($N,{size:80,className:"text-cyan-500"})}),t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 relative z-10",children:[t.jsx(qs,{size:20,className:"text-cyan-400"})," Recruitment Center"]}),t.jsx("div",{className:"bg-cyan-900/20 border border-cyan-500/30 p-4 rounded-xl mb-6 relative z-10",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-full text-cyan-400 shrink-0",children:t.jsx(ws,{size:16})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-bold text-white",children:"Earn 1% Override Commission"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Recruit new affiliates and earn 1% of their sales volume forever. No impact on their earnings!"})]})]})}),t.jsxs("div",{className:"space-y-3 relative z-10",children:[t.jsxs("h4",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:["My Recruits (",be.length,")"]}),be.length>0?t.jsx("div",{className:"max-h-[150px] overflow-y-auto pr-2 space-y-2 custom-scrollbar",children:be.map(ke=>{var We;return t.jsxs("div",{className:"flex justify-between items-center p-2 bg-black/40 rounded border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-6 h-6 bg-zinc-800 rounded-full flex items-center justify-center text-[10px] text-gray-400 border border-gray-700",children:ke.name?ke.name.charAt(0):"?"}),t.jsx("span",{className:"text-xs text-gray-300",children:ke.name})]}),t.jsxs("span",{className:"text-xs text-green-400 font-mono",children:["Sales: R",(We=ke.affiliateStats)==null?void 0:We.totalSalesValue.toFixed(0)]})]},ke.id)})}):t.jsx("div",{className:"text-center py-4 border border-dashed border-gray-800 rounded-lg",children:t.jsx("p",{className:"text-xs text-gray-500",children:"No recruits yet. Start building your team!"})})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 relative z-10",children:[t.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"Share your recruitment link:"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("code",{className:"flex-1 bg-black p-2 rounded text-[10px] text-gray-400 truncate border border-gray-800",children:[window.location.origin,"/#/?ref=",n.affiliateCode]}),t.jsx("button",{onClick:Ne,className:"text-xs text-cyan-400 hover:text-cyan-300 font-bold",children:"Copy"})]})]})]})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Commission Tiers"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Your commission rate increases based on your all-time sales performance."})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Ut.map((ke,We)=>t.jsx("div",{className:`p-6 rounded-2xl border transition-all ${oe.name===ke.name?"bg-gradient-to-br from-yellow-900/20 to-orange-900/20 border-yellow-500/50 shadow-[0_0_20px_rgba(234,179,8,0.2)]":"bg-zinc-900 border-gray-800"}`,children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full mb-3 ${oe.name===ke.name?"bg-yellow-500 text-black":"bg-zinc-800 text-gray-400"}`,children:t.jsx(ir,{size:20})}),t.jsx("h3",{className:`text-lg font-bold mb-1 ${oe.name===ke.name?"text-yellow-400":"text-white"}`,children:ke.name}),t.jsxs("div",{className:`text-2xl font-bold mb-2 ${oe.name===ke.name?"text-yellow-400":"text-gray-300"}`,children:[ke.rate,"%"]}),t.jsx("p",{className:"text-xs text-gray-500",children:f==="ZAR"?`R${ke.min.toLocaleString()} - ${ke.max===1/0?"":"R"+ke.max.toLocaleString()}`:`$${ke.min.toLocaleString()} - ${ke.max===1/0?"":"$"+ke.max.toLocaleString()}`})]})},ke.name))})]}),T&&t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-xl",onClick:()=>!xe&&k(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-3xl w-full relative z-20 shadow-2xl h-[90vh] flex flex-col animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-800",children:[t.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(Xy,{size:20,className:"text-pink-500"})," Terms & Conditions"]}),t.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-white",children:t.jsx(us,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-8 pr-4",children:[t.jsx("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-4 rounded-lg mb-6 text-yellow-200 text-sm",children:"Please read each section carefully. You must acknowledge each section to proceed."}),te.map((ke,We)=>t.jsxs("div",{className:"bg-black/30 rounded-xl p-5 border border-gray-800 hover:border-gray-700 transition-colors",children:[t.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:ke.title}),t.jsx("div",{className:"text-sm text-gray-400 leading-relaxed whitespace-pre-wrap font-sans mb-4 pl-2 border-l-2 border-gray-700",children:ke.content}),t.jsxs("label",{className:`flex items-center gap-3 cursor-pointer p-3 rounded-lg transition-all ${fe[We]?"bg-green-900/20 border border-green-500/30":"bg-zinc-800/50 border border-gray-700 hover:bg-zinc-800"}`,children:[t.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${fe[We]?"bg-green-500 border-green-500 text-black":"bg-black border-gray-600 text-transparent"}`,children:t.jsx(dt,{size:14,strokeWidth:4})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:!!fe[We],onChange:()=>qt(We)}),t.jsxs("span",{className:`text-sm font-bold ${fe[We]?"text-green-400":"text-gray-400"}`,children:["I have read and agree to the ",ke.title]})]})]},We))]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 flex justify-between items-center",children:[t.jsxs("div",{className:"text-xs text-gray-500",children:[Object.values(fe).filter(Boolean).length," of ",te.length," sections agreed"]}),t.jsxs("button",{onClick:ht,disabled:!xe,className:"px-8 py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg",children:[xe?t.jsx(dt,{size:18}):t.jsx(ia,{size:18}),xe?"Confirm Agreement":"Agree to All Sections to Continue"]})]})]})]}),_&&t.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>P(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-yellow-500/50 rounded-2xl p-8 max-w-md w-full relative z-20 shadow-[0_0_50px_rgba(234,179,8,0.2)] animate-in zoom-in-95 duration-200 text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-yellow-900/20 border-2 border-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:t.jsx(cr,{size:40,className:"text-yellow-500"})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Under Review"}),t.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed mb-6",children:["Thank you for applying to the Spoil Me Vintage Partnership Program. ",t.jsx("br",{}),t.jsx("br",{}),"Our team is currently reviewing your application details. This process typically takes ",t.jsx("strong",{children:"24-48 hours"}),"."]}),t.jsx("button",{onClick:()=>P(!1),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded-xl transition-colors",children:"Understood"})]})]}),h&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:Pe}),t.jsx("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-xl w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200 max-h-[95vh] overflow-y-auto",children:D?t.jsx("div",{className:"text-center py-8 px-4",children:t.jsxs("div",{className:"bg-zinc-800 border border-green-500/30 rounded-2xl p-8 shadow-[0_0_40px_rgba(34,197,94,0.1)] relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-cyan-500"}),t.jsx("div",{className:"w-20 h-20 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto shadow-[0_0_20px_rgba(34,197,94,0.4)] mb-6",children:t.jsx(dt,{size:40,className:"text-green-500"})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Received!"}),t.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["Thank you, ",t.jsx("strong",{children:L.name}),". Your application has been sent to our admin team for review."]}),t.jsx("button",{onClick:Pe,className:"mt-8 w-full py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg",children:"Done"})]})}):I?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center border-b border-gray-800 pb-4",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Welcome Back"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Please log in to continue your application."})]}),A&&t.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/50 rounded-lg flex gap-2 items-center text-red-400 text-sm",children:[t.jsx(eh,{size:16})," ",A]}),t.jsxs("form",{onSubmit:q,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Email Address"}),t.jsx("input",{type:"email",value:L.email,readOnly:!0,className:"w-full bg-zinc-800 border border-gray-700 rounded-lg p-3 text-gray-400 text-sm cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Password"}),t.jsx("input",{type:"password",value:O,onChange:ke=>V(ke.target.value),required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:""})]}),t.jsxs("button",{type:"submit",className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:[t.jsx(zN,{size:18})," Login & Continue Application"]})]}),t.jsx("div",{className:"text-center",children:t.jsx("button",{onClick:()=>$(!1),className:"text-xs text-gray-500 hover:text-white underline",children:"Go Back"})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Apply to Partner"}),t.jsx("button",{onClick:Pe,className:"text-gray-500 hover:text-white",children:t.jsx(us,{size:24})})]}),v===1&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl",children:[t.jsxs("h3",{className:"text-purple-400 font-bold mb-2 flex items-center gap-2",children:[t.jsx(ia,{size:18})," Reality Check"]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"This is a business partnership. Inactive accounts (0 sales in 3 months) may be deactivated."})]}),t.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[t.jsx("div",{className:`mt-1 w-5 h-5 rounded border flex items-center justify-center ${ee?"bg-pink-500 border-pink-500":"border-gray-600"}`,children:ee&&t.jsx(dt,{size:14,className:"text-white"})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:ee,onChange:ke=>W(ke.target.checked)}),t.jsx("span",{className:"text-sm text-gray-400 group-hover:text-white transition-colors",children:"I understand that this program requires active participation."})]}),t.jsx("button",{disabled:!ee,onClick:()=>N(2),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all",children:"Continue"})]}),v===2&&t.jsxs("form",{onSubmit:Ae,className:"space-y-4",children:[!n.email&&t.jsxs("div",{className:"p-3 bg-zinc-800 rounded-lg border border-gray-700 mb-4",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Create your account to get started:"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[t.jsx("input",{type:"text",placeholder:"First Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.name,onChange:ke=>z({...L,name:ke.target.value})}),t.jsx("input",{type:"text",placeholder:"Surname",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.surname,onChange:ke=>z({...L,surname:ke.target.value})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"email",placeholder:"Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.email,onChange:ke=>z({...L,email:ke.target.value})}),t.jsx("input",{type:"password",placeholder:"Create Password",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.password,onChange:ke=>z({...L,password:ke.target.value})}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("input",{type:"date",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.dob,onChange:ke=>z({...L,dob:ke.target.value})}),t.jsxs("select",{className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",required:!0,value:L.gender,onChange:ke=>z({...L,gender:ke.target.value}),children:[t.jsx("option",{value:"",children:"Gender"}),t.jsx("option",{value:"Male",children:"Male"}),t.jsx("option",{value:"Female",children:"Female"}),t.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Why do you want to join?"}),t.jsx("textarea",{required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none h-24",placeholder:"Tell us about your audience or marketing plan...",value:L.reason,onChange:ke=>z({...L,reason:ke.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Social Media Links"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Instagram, TikTok, Blog URL...",value:L.socials,onChange:ke=>z({...L,socials:ke.target.value})})]}),f==="ZAR"?t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"text-sm font-bold text-white",children:"Banking Details (EFT Payments)"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("input",{type:"text",placeholder:"Bank Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm"}),t.jsx("input",{type:"text",placeholder:"Account Number",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}),t.jsx("input",{type:"text",placeholder:"Branch Code",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"text-sm font-bold text-white",children:"PayPal Details (USD Payments)"}),t.jsx("input",{type:"email",placeholder:"PayPal Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}),t.jsxs("div",{className:"pt-2",children:[t.jsxs("button",{type:"button",onClick:()=>k(!0),className:`w-full flex items-center justify-between p-4 rounded-xl border transition-all ${F?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:[t.jsxs("span",{className:"text-sm font-bold flex items-center gap-2",children:[t.jsx(Xy,{size:16})," ",F?"Terms Accepted":"Read Terms & Conditions"]}),F?t.jsx(Xa,{size:18}):t.jsx(Qs,{size:16})]}),!F&&t.jsx("p",{className:"text-xs text-red-400 mt-1 text-center",children:"You must accept terms to proceed."})]}),t.jsx("button",{type:"submit",disabled:!F,className:"w-full py-4 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all mt-4",children:"Submit Application"})]})]})})]}),t.jsx(m5,{isOpen:Y,onClose:()=>de(!1)})]})},x5=()=>{const{user:n,register:e,login:s,processGiftVoucherPurchase:r}=vt();cn();const[i,o]=S.useState(250),[c,u]=S.useState(""),[f,h]=S.useState(""),[y,v]=S.useState(""),[N,T]=S.useState(""),[k,_]=S.useState("self"),[P,L]=S.useState(0),[z,F]=S.useState(!1),[K,ee]=S.useState("register"),[W,D]=S.useState(!1),[C,I]=S.useState(""),[$,O]=S.useState(""),[V,A]=S.useState(""),[se,fe]=S.useState(""),[Se,Ie]=S.useState(""),le=S.useRef(null);S.useEffect(()=>{i>=250&&i<=500?L(100):L(0)},[i]);const be=i+P,ve=async()=>{await r(be,{recipientName:c,senderName:f,message:y,whatsappNumber:N,deliveryMethod:k}),le.current&&le.current.submit()},Y=()=>{if(!c||!f){alert("Please fill in the 'To' and 'From' fields.");return}n.email?ve():F(!0)},de=async xe=>{if(xe.preventDefault(),se!==Se){alert("Passwords do not match!");return}await e({name:C,email:$,birthday:V})&&(F(!1),setTimeout(()=>{ve()},500))},te=async xe=>{xe.preventDefault(),await s($,se)?(F(!1),setTimeout(()=>{ve()},500)):alert("Invalid Credentials")};return t.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 space-y-12 relative",children:[t.jsx(Fm,{ref:le,amount:i,itemName:`Gift Voucher for ${c}`,email:n.email||$,customStr1:c,customStr2:f,customStr3:y,returnUrl:`${window.location.origin}/#/profile`,cancelUrl:`${window.location.origin}/#/gift-cards`}),z&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>F(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-2xl font-bold text-white",children:K==="register"?"Create Account to Pay":"Sign In to Pay"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["To secure your voucher and ensure delivery, please ",K==="register"?"create a profile":"sign in","."]})]}),K==="register"?t.jsxs("form",{onSubmit:de,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Full Name"}),t.jsxs("div",{className:"relative",children:[t.jsx($r,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"text",required:!0,value:C,onChange:xe=>I(xe.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Jane Doe"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(Sc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"email",required:!0,value:$,onChange:xe=>O(xe.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Birthday (For Birthday Vouchers)"}),t.jsxs("div",{className:"relative",children:[t.jsx(La,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"date",required:!0,value:V,onChange:xe=>A(xe.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(ia,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:W?"text":"password",required:!0,value:se,onChange:xe=>fe(xe.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Confirm"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:W?"text":"password",required:!0,value:Se,onChange:xe=>Ie(xe.target.value),className:"w-full p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),t.jsx("button",{type:"button",onClick:()=>D(!W),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:W?t.jsx(Ru,{size:16}):t.jsx(nl,{size:16})})]})]})]}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500 transition-colors",children:"Create Account & Pay"}),t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",t.jsx("button",{type:"button",onClick:()=>ee("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):t.jsxs("form",{onSubmit:te,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(Sc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"email",required:!0,value:$,onChange:xe=>O(xe.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(ia,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:W?"text":"password",required:!0,value:se,onChange:xe=>fe(xe.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),t.jsx("button",{type:"button",onClick:()=>D(!W),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:W?t.jsx(Ru,{size:16}):t.jsx(nl,{size:16})})]})]}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500 transition-colors",children:"Sign In & Pay"}),t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",t.jsx("button",{type:"button",onClick:()=>ee("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-white drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Give the Gift of Vintage"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Create a personalized digital wish card."})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl shadow-xl space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-800",children:[t.jsx("div",{className:"p-2 bg-pink-900/30 text-pink-500 rounded-lg",children:t.jsx(ds,{size:24})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:"Customize Voucher"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Enter details below"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Amount (R)"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"R"}),t.jsx("input",{type:"number",value:i,onChange:xe=>o(parseFloat(xe.target.value)),className:"w-full bg-black border border-gray-700 rounded-xl py-4 pl-10 pr-4 text-white text-xl font-bold focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none transition-all",placeholder:"250",min:"50"})]}),i>=250&&i<=500?t.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-xs font-bold bg-green-900/20 p-2 rounded border border-green-500/30 animate-in fade-in slide-in-from-top-2",children:[t.jsx(js,{size:14}),"Bonus R100 added to voucher value automatically!"]}):t.jsxs("p",{className:"text-xs text-gray-500",children:["Tip: Spend between ",t.jsx("strong",{children:"R250 - R500"})," to get a ",t.jsx("span",{className:"text-pink-500 font-bold",children:"FREE R100"})," bonus!"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"To (Recipient Name)"}),t.jsx("input",{type:"text",value:c,onChange:xe=>u(xe.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. Sarah"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-300 flex items-center gap-2",children:[t.jsx(Fp,{size:14})," From (Your Name)"]}),t.jsx("input",{type:"text",value:f,onChange:xe=>h(xe.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. John"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Personal Message"}),t.jsx("textarea",{rows:4,value:y,onChange:xe=>v(xe.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none resize-none",placeholder:"Write a sweet note...",maxLength:150}),t.jsxs("div",{className:"text-right text-[10px] text-gray-600",children:[y.length,"/150"]})]}),t.jsxs("div",{className:"space-y-4 pt-2 border-t border-gray-800",children:[t.jsx("label",{className:"block text-sm font-bold text-gray-300",children:"How should we deliver this?"}),t.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[t.jsxs("div",{onClick:()=>_("self"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${k==="self"?"bg-purple-900/20 border-purple-500 ring-1 ring-purple-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[t.jsx("div",{className:`mt-1 p-1 rounded-full ${k==="self"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400"}`,children:t.jsx($r,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:`text-sm font-bold ${k==="self"?"text-purple-400":"text-gray-300"}`,children:"Send to Me (Higher Success Rate)"}),t.jsx("div",{className:"flex items-center gap-2 mt-1",children:t.jsxs("span",{className:"text-[10px] bg-green-900/40 text-green-400 border border-green-500/30 px-1.5 py-0.5 rounded font-bold flex items-center gap-1",children:[t.jsx(dt,{size:10})," Best Option"]})}),t.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We send the voucher code and link to YOU via notification. You can then forward it via WhatsApp personally."}),k==="self"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:xe=>xe.stopPropagation(),children:[t.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[t.jsx(Ga,{size:12})," Your WhatsApp Number"]}),t.jsx("input",{type:"text",value:N,onChange:xe=>T(xe.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]}),t.jsxs("div",{onClick:()=>_("recipient"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${k==="recipient"?"bg-pink-900/20 border-pink-500 ring-1 ring-pink-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[t.jsx("div",{className:`mt-1 p-1 rounded-full ${k==="recipient"?"bg-pink-500 text-white":"bg-gray-800 text-gray-400"}`,children:t.jsx(nh,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:`text-sm font-bold ${k==="recipient"?"text-pink-400":"text-gray-300"}`,children:"Send directly to Recipient"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We will email or WhatsApp the recipient directly on your behalf."}),k==="recipient"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:xe=>xe.stopPropagation(),children:[t.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[t.jsx(rl,{size:12})," Recipient WhatsApp (Optional)"]}),t.jsx("input",{type:"text",value:N,onChange:xe=>T(xe.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]})]})]}),t.jsxs("button",{onClick:Y,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 text-lg",children:[t.jsx(Nc,{size:20})," Buy Now & Pay - R",i.toFixed(2)]}),t.jsxs("p",{className:"text-center text-xs text-gray-500 mt-2 flex items-center justify-center gap-1",children:[t.jsx(dt,{size:12,className:"text-green-500"})," Secure Payment via PayFast"]})]}),t.jsxs("div",{className:"sticky top-24",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[t.jsx(Nc,{size:16})," Example"]}),t.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),t.jsx("div",{className:"absolute top-0 left-0 p-4 opacity-10 pointer-events-none",children:t.jsx("span",{className:"font-cherry text-8xl text-white leading-none",children:"SV"})}),t.jsxs("div",{className:"relative h-full p-6 md:p-8 flex flex-col justify-between z-20",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-cherry text-xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.3)]",children:"Spoil Me Vintage"}),t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx(js,{size:10,className:"text-cyan-400"}),t.jsx("p",{className:"text-[10px] text-gray-300 tracking-[0.2em] uppercase",children:"Exclusive Voucher"})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("div",{className:"text-2xl md:text-5xl font-bold text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.5)] font-architects",children:["R",be]})})]}),t.jsxs("div",{className:"flex-1 flex flex-col justify-center py-2 md:py-4 relative",children:[t.jsxs("p",{className:"font-architects text-lg md:text-2xl text-gray-200 leading-relaxed text-center break-words relative drop-shadow-sm line-clamp-3",children:['"',y||"Treat yourself to something timeless...",'"']}),t.jsx("div",{className:"mx-auto mt-4 md:mt-6 cursor-pointer group w-full md:w-auto flex justify-center",children:t.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-full px-6 py-3 md:px-6 md:py-2 flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(34,211,238,0.2)] hover:bg-cyan-900/30 hover:border-cyan-400 transition-all w-full md:w-auto",children:[t.jsx("span",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs md:text-xs font-bold text-white uppercase tracking-widest group-hover:text-cyan-300 transition-colors",children:"Redeem Now"}),t.jsx(Qs,{size:12,className:"text-cyan-400 group-hover:translate-x-1 transition-transform"})]})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-800 pt-3 md:pt-4",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"To"}),t.jsx("p",{className:"text-sm font-bold text-white truncate",children:c||"Recipient Name"})]}),t.jsxs("div",{className:"space-y-1 text-right",children:[t.jsxs("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center justify-end gap-1",children:["From ",t.jsx(Fp,{size:10})]}),t.jsx("p",{className:"text-lg font-architects text-cyan-400 truncate",children:f||"Your Name"})]})]})]})]}),t.jsxs("div",{className:"mt-6 bg-zinc-900/50 border border-gray-800 rounded-xl p-5 shadow-lg",children:[t.jsxs("h4",{className:"font-bold text-white text-sm mb-3 flex items-center gap-2 border-b border-gray-800 pb-2",children:[t.jsx(dt,{size:14,className:"text-green-400"})," Verified Voucher Features"]}),t.jsxs("ul",{className:"text-xs text-gray-400 space-y-2.5",children:[t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(js,{size:12,className:"text-purple-400 mt-0.5"})," Valid for 3 years from date of purchase."]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(Ga,{size:12,className:"text-cyan-400 mt-0.5"})," ",t.jsx("span",{className:"text-white font-bold",children:"Smart Link:"}),' Recipient taps "Redeem Now" to auto-apply discount in App.']}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(rl,{size:12,className:"text-green-400 mt-0.5"})," ",t.jsx("span",{className:"text-white font-bold",children:"Instant Delivery"})," via Notification & WhatsApp."]})]})]})]})]})]})},y5=()=>{const{categoryName:n}=Rc(),{products:e,categories:s}=vt(),r=decodeURIComponent(n||""),i=s.find(c=>c.name===r),o=e.filter(c=>c.category===r);return S.useEffect(()=>{window.scrollTo(0,0)},[n]),i?t.jsxs("div",{className:"space-y-8 pb-12",children:[t.jsxs("div",{className:"relative h-64 md:h-80 rounded-2xl overflow-hidden bg-zinc-900 border border-gray-800 shadow-2xl group",children:[t.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"}),t.jsxs("div",{className:"absolute bottom-0 left-0 p-8 w-full",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsxs(Ve,{to:"/",className:"text-xs text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[t.jsx(ra,{size:12})," Home"]}),t.jsx("span",{className:"text-gray-600",children:"/"}),t.jsx("span",{className:"text-xs text-pink-500 font-bold tracking-wider uppercase",children:"Collection"})]}),t.jsx("h1",{className:"font-cherry text-4xl md:text-6xl text-white drop-shadow-lg mb-2",children:i.name}),i.description&&t.jsx("p",{className:"text-gray-300 max-w-2xl text-sm md:text-base font-light border-l-4 border-pink-500 pl-4",children:i.description})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(js,{size:20,className:"text-cyan-400"}),"Available Treasures (",o.length,")"]})}),o.length>0?t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map(c=>t.jsx(Vc,{product:c},c.id))}):t.jsxs("div",{className:"py-20 text-center border border-dashed border-gray-800 rounded-2xl",children:[t.jsx("p",{className:"text-gray-500",children:"No products found in this collection yet."}),t.jsx(Ve,{to:"/",className:"text-pink-500 text-sm mt-4 inline-block hover:underline",children:"Browse other collections"})]})]})]}):t.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Collection Not Found"}),t.jsxs(Ve,{to:"/",className:"text-pink-500 hover:text-pink-400 flex items-center gap-2",children:[t.jsx(ra,{size:20})," Back to Home"]})]})},b5=()=>{const{type:n}=Rc(),{products:e,categories:s}=vt(),[r,i]=S.useState("newest"),[o,c]=S.useState(!1),[u,f]=S.useState(""),[h,y]=S.useState(""),[v,N]=S.useState(!1),[T,k]=S.useState(1),_=20;S.useEffect(()=>{window.scrollTo(0,0),c(!1),f(""),y(""),i("newest"),k(1)},[n]);const{title:P,baseProducts:L}=S.useMemo(()=>{let W="",D=[];switch(n){case"stud":W="Stud Earrings",D=e.filter(C=>C.type==="Stud"||C.isFeaturedStud);break;case"dangle":W="Dangle Earrings",D=e.filter(C=>C.type==="Dangle"||C.isFeaturedDangle);break;case"ring":W="Rings",D=e.filter(C=>C.type==="Ring");break;case"unique":W="Unique Pendants",D=e.filter(C=>C.isUniquePendant);break;case"bracelet":W="Bracelets",D=e.filter(C=>C.type==="Bracelet"||C.isFeaturedBracelet);break;case"watch":W="Watches",D=e.filter(C=>C.isFeaturedWatch);break;case"best":W="Best Sellers",D=e.filter(C=>C.isBestSeller);break;case"sets":W="Jewelry Sets",D=e.filter(C=>C.isJewelrySet);break;default:W="Catalog",D=e}return{title:W,baseProducts:D}},[n,e]),z=S.useMemo(()=>{const W=new Set;return L.forEach(D=>{var C;(C=D.colors)==null||C.forEach(I=>W.add(I))}),Array.from(W).sort()},[L]),F=S.useMemo(()=>{let W=[...L];if(o){const D=new Date;W=W.filter(C=>{const I=C.promoStartsAt?new Date(C.promoStartsAt):null,$=C.promoExpiresAt?new Date(C.promoExpiresAt):null;return(C.promoPrice||0)>0&&(!I||I<=D)&&(!$||$>D)})}return u&&(W=W.filter(D=>{var C;return(C=D.colors)==null?void 0:C.includes(u)})),h&&(W=W.filter(D=>D.category===h)),W.sort((D,C)=>r==="price_asc"?D.price-C.price:r==="price_desc"?C.price-D.price:new Date(C.createdAt).getTime()-new Date(D.createdAt).getTime()),W},[L,o,u,h,r]),K=S.useMemo(()=>{const W=(T-1)*_,D=W+_;return F.slice(W,D)},[F,T,_]),ee=Math.ceil(F.length/_);return t.jsxs("div",{className:"space-y-8 pb-12 min-h-screen",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 pt-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs text-gray-500",children:[t.jsxs(Ve,{to:"/",className:"hover:text-white flex items-center gap-1",children:[t.jsx(ra,{size:12})," Home"]}),t.jsx("span",{children:"/"}),t.jsx("span",{className:"text-pink-500 font-bold",children:P})]}),t.jsx("h1",{className:"font-cherry text-3xl md:text-4xl text-white",children:P}),t.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[F.length," Items Found"]})]}),t.jsxs("button",{className:"md:hidden flex items-center gap-2 bg-zinc-800 px-4 py-2 rounded text-white text-sm w-fit",onClick:()=>N(!v),children:[t.jsx(CI,{size:16})," Filters & Sort"]}),t.jsxs("div",{className:`flex-col md:flex-row gap-4 items-start md:items-center bg-zinc-900/80 p-4 rounded-xl border border-gray-800 ${v?"flex":"hidden md:flex"}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Sort:"}),t.jsxs("select",{value:r,onChange:W=>i(W.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none",children:[t.jsx("option",{value:"newest",children:"Newest"}),t.jsx("option",{value:"price_asc",children:"Price Low-High"}),t.jsx("option",{value:"price_desc",children:"Price High-Low"})]})]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none bg-black border border-gray-700 px-3 py-1 rounded hover:border-pink-500 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:W=>c(W.target.checked),className:"hidden"}),t.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${o?"bg-pink-600 border-pink-600":"border-gray-500"}`,children:o&&t.jsx(dt,{size:10,className:"text-white"})}),t.jsx("span",{className:`text-sm ${o?"text-pink-400 font-bold":"text-gray-300"}`,children:"Promotions"})]}),t.jsxs("select",{value:h,onChange:W=>y(W.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[t.jsx("option",{value:"",children:"All Collections"}),s.map(W=>t.jsx("option",{value:W.name,children:W.name},W.id))]}),z.length>0&&t.jsxs("select",{value:u,onChange:W=>f(W.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[t.jsx("option",{value:"",children:"All Colors"}),z.map(W=>t.jsx("option",{value:W,children:W},W))]}),(o||u||h)&&t.jsx("button",{onClick:()=>{c(!1),f(""),y("")},className:"text-xs text-red-400 hover:text-red-300 underline",children:"Clear"})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:K.map(W=>t.jsx(Vc,{product:W},W.id))}),F.length===0&&t.jsxs("div",{className:"py-20 text-center bg-zinc-900/30 rounded-xl border border-dashed border-gray-800",children:[t.jsx("p",{className:"text-gray-400",children:"No products found matching your filters."}),t.jsx("button",{onClick:()=>{c(!1),f(""),y("")},className:"mt-4 text-pink-500 font-bold hover:underline",children:"Clear Filters"})]}),ee>1&&t.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between text-sm text-gray-400 mt-8",children:[t.jsxs("div",{children:["Page ",T," of ",ee]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>k(W=>Math.max(W-1,1)),className:"bg-black border border-gray-700 rounded px-3 py-1 hover:bg-gray-800 transition-colors disabled:opacity-50",disabled:T===1,children:"Previous"}),t.jsx("button",{onClick:()=>k(W=>Math.min(W+1,ee)),className:"bg-black border border-gray-700 rounded px-3 py-1 hover:bg-gray-800 transition-colors disabled:opacity-50",disabled:T===ee,children:"Next"})]})]})]})},v5=()=>{const{isDemoMode:n,resetStore:e,seedTestUsers:s,user:r}=vt(),[i,o]=S.useState(!1);if(!r||!r.isAdmin)return t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-zinc-900 text-white",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),t.jsx("p",{className:"text-gray-400",children:"You do not have permission to access the admin panel."})]})});const c=[{path:"/admin",label:"Dashboard"},{path:"/admin/orders",label:"Orders"},{path:"/admin/products",label:"Products"},{path:"/admin/categories",label:"Categories"},{path:"/admin/artists",label:"Artists"},{path:"/admin/members",label:"Membership"}],u=async()=>{o(!0);const f=`admin-test-${Date.now()}`;try{const h={id:f,name:"Admin Test Write",slug:`admin-test-write-${Date.now()}`,price:0,priceUSD:0,category:"System",type:"Other",status:"draft",images:[],createdAt:new Date().toISOString(),tags:[]};await Rr("products",h);const y=await Mc("products",f);alert(y?"Supabase write succeeded (test record created and verified). It will be removed now.":"Test write completed but verification read-back failed. Check DB permissions.")}catch(h){console.error("Admin test write failed:",h),alert("Supabase test write failed: "+((h==null?void 0:h.message)||h))}finally{try{await cm("products",f)}catch{}o(!1)}};return t.jsxs("div",{className:"space-y-8 p-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Dashboard Overview"}),t.jsxs("div",{className:"flex gap-2",children:[!n&&t.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-3 py-2 rounded hover:bg-purple-900/50 transition-colors",children:[t.jsx(RI,{size:14})," Seed Test Users"]}),n&&t.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-3 py-2 rounded hover:bg-red-900/50 transition-colors",children:[t.jsx(Cc,{size:14})," Reset Demo Data"]}),t.jsxs("button",{onClick:u,disabled:i,className:"flex items-center gap-2 text-xs bg-yellow-900/20 text-yellow-300 border border-yellow-500/30 px-3 py-2 rounded hover:bg-yellow-900/30 transition-colors",children:[t.jsx(PI,{size:14})," ",i?"Testing...":"Test write to Supabase"]})]})]}),t.jsx("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-4",children:t.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:c.map(f=>t.jsx(Ve,{to:f.path,className:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white bg-zinc-800/50 hover:bg-zinc-700 rounded-lg transition-colors",children:f.label},f.path))})}),t.jsx("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-3 rounded-lg mb-4",children:t.jsxs("p",{className:"text-yellow-400 text-sm font-medium flex items-center gap-2",children:[t.jsx(mi,{size:16}),"Reviews take up to 72 hours. Artists will be notified via email and in-app notification once their application is processed."]})}),t.jsx("div",{className:"flex flex-wrap gap-3",children:t.jsxs(Ve,{to:"/admin/artists",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(VN,{size:16})," Review Applications"]})})]})})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let w5,N5;function j5(){return{geminiUrl:w5,vertexUrl:N5}}function S5(n,e,s){var r,i,o;if(!(!((r=n.httpOptions)===null||r===void 0)&&r.baseUrl)){const c=j5();return n.vertexai?(i=c.vertexUrl)!==null&&i!==void 0?i:e:(o=c.geminiUrl)!==null&&o!==void 0?o:s}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bc{}function pt(n,e){const s=/\{([^}]+)\}/g;return n.replace(s,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function x(n,e,s){for(let o=0;o<e.length-1;o++){const c=e[o];if(c.endsWith("[]")){const u=c.slice(0,-2);if(!(u in n))if(Array.isArray(s))n[u]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[u])){const f=n[u];if(Array.isArray(s))for(let h=0;h<f.length;h++){const y=f[h];x(y,e.slice(o+1),s[h])}else for(const h of f)x(h,e.slice(o+1),s)}return}else if(c.endsWith("[0]")){const u=c.slice(0,-3);u in n||(n[u]=[{}]);const f=n[u];x(f[0],e.slice(o+1),s);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===i)return;if(typeof i=="object"&&typeof s=="object"&&i!==null&&s!==null)Object.assign(i,s);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else n[r]=s}function g(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return;const r=e[s];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in n){const o=n[i];return Array.isArray(o)?o.map(c=>g(c,e.slice(s+1))):void 0}else return}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return;throw s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hs(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const s=e.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function nj(n,e){const s=hs(n,e);return s?s.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${s}`:s.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${s}`:s:""}function rj(n,e){return Array.isArray(e)?e.map(s=>Lu(n,s)):[Lu(n,e)]}function Lu(n,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function k5(n,e){const s=Lu(n,e);if(s.mimeType&&s.mimeType.startsWith("image/"))return s;throw new Error(`Unsupported mime type: ${s.mimeType}`)}function _5(n,e){const s=Lu(n,e);if(s.mimeType&&s.mimeType.startsWith("audio/"))return s;throw new Error(`Unsupported mime type: ${s.mimeType}`)}function yb(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function ij(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(s=>yb(n,s)):[yb(n,e)]}function qp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function bb(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function vb(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function wn(n,e){if(e==null)throw new Error("ContentUnion is required");return qp(e)?e:{role:"user",parts:ij(n,e)}}function aj(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(s=>{const r=wn(n,s);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const s=wn(n,e);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(e)?e.map(s=>wn(n,s)):[wn(n,e)]}function da(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(bb(e)||vb(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wn(n,e)]}const s=[],r=[],i=qp(e[0]);for(const o of e){const c=qp(o);if(c!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)s.push(o);else{if(bb(o)||vb(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(o)}}return i||s.push({role:"user",parts:ij(n,r)}),s}function oj(n,e){return e}function lj(n,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function rh(n,e){return e}function ih(n,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function C5(n,e,s,r=1){const i=!e.startsWith(`${s}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${s}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${s}/${e}`:e:i?`${s}/${e}`:e}function ua(n,e){if(typeof e!="string")throw new Error("name must be a string");return C5(n,e,"cachedContents")}function cj(n,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function ha(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function dj(n,e){if(typeof e!="string")throw new Error("fromName must be a string");return e.startsWith("files/")?e.split("files/")[1]:e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E5(n,e){const s={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&x(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&x(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&x(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&x(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&x(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&x(s,["inlineData"],h);const y=g(e,["text"]);return y!=null&&x(s,["text"],y),s}function wb(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>E5(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function T5(){return{}}function P5(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(s,["dynamicThreshold"],i),s}function A5(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(s,["dynamicRetrievalConfig"],P5(n,r)),s}function I5(n,e){const s={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(s,["googleSearch"],T5());const i=g(e,["googleSearchRetrieval"]);i!=null&&x(s,["googleSearchRetrieval"],A5(n,i));const o=g(e,["codeExecution"]);o!=null&&x(s,["codeExecution"],o);const c=g(e,["functionDeclarations"]);return c!=null&&x(s,["functionDeclarations"],c),s}function R5(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(s,["allowedFunctionNames"],i),s}function D5(n,e){const s={},r=g(e,["functionCallingConfig"]);return r!=null&&x(s,["functionCallingConfig"],R5(n,r)),s}function M5(n,e,s){const r={},i=g(e,["ttl"]);s!==void 0&&i!=null&&x(s,["ttl"],i);const o=g(e,["expireTime"]);s!==void 0&&o!=null&&x(s,["expireTime"],o);const c=g(e,["displayName"]);s!==void 0&&c!=null&&x(s,["displayName"],c);const u=g(e,["contents"]);if(s!==void 0&&u!=null){let v=da(n,u);Array.isArray(v)&&(v=v.map(N=>wb(n,N))),x(s,["contents"],v)}const f=g(e,["systemInstruction"]);s!==void 0&&f!=null&&x(s,["systemInstruction"],wb(n,wn(n,f)));const h=g(e,["tools"]);if(s!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(N=>I5(n,N))),x(s,["tools"],v)}const y=g(e,["toolConfig"]);return s!==void 0&&y!=null&&x(s,["toolConfig"],D5(n,y)),r}function O5(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["model"],nj(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],M5(n,i,s)),s}function L5(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],ua(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function U5(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],ua(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function z5(n,e,s){const r={},i=g(e,["ttl"]);s!==void 0&&i!=null&&x(s,["ttl"],i);const o=g(e,["expireTime"]);return s!==void 0&&o!=null&&x(s,["expireTime"],o),r}function F5(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],ua(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],z5(n,i,s)),s}function $5(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&x(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);return s!==void 0&&o!=null&&x(s,["_query","pageToken"],o),r}function V5(n,e){const s={},r=g(e,["config"]);return r!=null&&x(s,["config"],$5(n,r,s)),s}function B5(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&x(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&x(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&x(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&x(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&x(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&x(s,["functionResponse"],h);const y=g(e,["inlineData"]);y!=null&&x(s,["inlineData"],y);const v=g(e,["text"]);return v!=null&&x(s,["text"],v),s}function Nb(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>B5(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function q5(){return{}}function W5(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(s,["dynamicThreshold"],i),s}function H5(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(s,["dynamicRetrievalConfig"],W5(n,r)),s}function G5(n,e){const s={},r=g(e,["retrieval"]);r!=null&&x(s,["retrieval"],r),g(e,["googleSearch"])!=null&&x(s,["googleSearch"],q5());const o=g(e,["googleSearchRetrieval"]);o!=null&&x(s,["googleSearchRetrieval"],H5(n,o));const c=g(e,["codeExecution"]);c!=null&&x(s,["codeExecution"],c);const u=g(e,["functionDeclarations"]);return u!=null&&x(s,["functionDeclarations"],u),s}function K5(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(s,["allowedFunctionNames"],i),s}function J5(n,e){const s={},r=g(e,["functionCallingConfig"]);return r!=null&&x(s,["functionCallingConfig"],K5(n,r)),s}function Y5(n,e,s){const r={},i=g(e,["ttl"]);s!==void 0&&i!=null&&x(s,["ttl"],i);const o=g(e,["expireTime"]);s!==void 0&&o!=null&&x(s,["expireTime"],o);const c=g(e,["displayName"]);s!==void 0&&c!=null&&x(s,["displayName"],c);const u=g(e,["contents"]);if(s!==void 0&&u!=null){let v=da(n,u);Array.isArray(v)&&(v=v.map(N=>Nb(n,N))),x(s,["contents"],v)}const f=g(e,["systemInstruction"]);s!==void 0&&f!=null&&x(s,["systemInstruction"],Nb(n,wn(n,f)));const h=g(e,["tools"]);if(s!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(N=>G5(n,N))),x(s,["tools"],v)}const y=g(e,["toolConfig"]);return s!==void 0&&y!=null&&x(s,["toolConfig"],J5(n,y)),r}function Z5(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["model"],nj(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],Y5(n,i,s)),s}function X5(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],ua(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function Q5(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],ua(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function e3(n,e,s){const r={},i=g(e,["ttl"]);s!==void 0&&i!=null&&x(s,["ttl"],i);const o=g(e,["expireTime"]);return s!==void 0&&o!=null&&x(s,["expireTime"],o),r}function t3(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],ua(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],e3(n,i,s)),s}function s3(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&x(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);return s!==void 0&&o!=null&&x(s,["_query","pageToken"],o),r}function n3(n,e){const s={},r=g(e,["config"]);return r!=null&&x(s,["config"],s3(n,r,s)),s}function mu(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["displayName"]);i!=null&&x(s,["displayName"],i);const o=g(e,["model"]);o!=null&&x(s,["model"],o);const c=g(e,["createTime"]);c!=null&&x(s,["createTime"],c);const u=g(e,["updateTime"]);u!=null&&x(s,["updateTime"],u);const f=g(e,["expireTime"]);f!=null&&x(s,["expireTime"],f);const h=g(e,["usageMetadata"]);return h!=null&&x(s,["usageMetadata"],h),s}function r3(){return{}}function i3(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>mu(n,c))),x(s,["cachedContents"],o)}return s}function gu(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["displayName"]);i!=null&&x(s,["displayName"],i);const o=g(e,["model"]);o!=null&&x(s,["model"],o);const c=g(e,["createTime"]);c!=null&&x(s,["createTime"],c);const u=g(e,["updateTime"]);u!=null&&x(s,["updateTime"],u);const f=g(e,["expireTime"]);f!=null&&x(s,["expireTime"],f);const h=g(e,["usageMetadata"]);return h!=null&&x(s,["usageMetadata"],h),s}function a3(){return{}}function o3(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>gu(n,c))),x(s,["cachedContents"],o)}return s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ic;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ic||(Ic={}));class $m{constructor(e,s,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(e,r,i)}init(e,s,r){var i,o;this.nameInternal=e,this.pageInternal=s[this.nameInternal]||[],this.idxInternal=0;let c={config:{}};r?typeof r=="object"?c=Object.assign({},r):c=r:c={config:{}},c.config&&(c.config.pageToken=s.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(o=(i=c.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jb;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(jb||(jb={}));var Sb;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Sb||(Sb={}));var kb;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(kb||(kb={}));var _b;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(_b||(_b={}));var Cb;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Cb||(Cb={}));var Eb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Eb||(Eb={}));var Tb;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(Tb||(Tb={}));var Pb;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Pb||(Pb={}));var Ab;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Ab||(Ab={}));var Ib;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ib||(Ib={}));var Rb;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Rb||(Rb={}));var Db;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Db||(Db={}));var Uu;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Uu||(Uu={}));var Mb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Mb||(Mb={}));var Wp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Wp||(Wp={}));var Ob;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ob||(Ob={}));var Lb;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Lb||(Lb={}));var Ub;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Ub||(Ub={}));var zb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(zb||(zb={}));var Fb;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Fb||(Fb={}));var $b;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})($b||($b={}));var Vb;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(Vb||(Vb={}));var Bb;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Bb||(Bb={}));var qb;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(qb||(qb={}));var Wb;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Wb||(Wb={}));var Hb;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Hb||(Hb={}));var Gb;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Gb||(Gb={}));var Kb;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Kb||(Kb={}));var Jb;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Jb||(Jb={}));var Yb;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Yb||(Yb={}));var Zb;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Zb||(Zb={}));var Xb;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Xb||(Xb={}));class nu{get text(){var e,s,r,i,o,c,u,f;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const v=[];for(const N of(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[T,k]of Object.entries(N))T!=="text"&&T!=="thought"&&(k!==null||k!==void 0)&&v.push(T);if(typeof N.text=="string"){if(typeof N.thought=="boolean"&&N.thought)continue;y=!0,h+=N.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,s,r,i,o,c,u,f;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const v of(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[N,T]of Object.entries(v))N!=="inlineData"&&(T!==null||T!==void 0)&&y.push(N);v.inlineData&&typeof v.inlineData.data=="string"&&(h+=atob(v.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,s,r,i,o,c,u,f;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,s,r,i,o,c,u,f,h;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,s,r,i,o,c,u,f,h;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class Qb{}class ev{}class tv{}class sv{}class l3{}class nv{}class rv{}class iv{}class c3{}class Hp{constructor(e){const s={};for(const r of e.headers.entries())s[r[0]]=r[1];this.headers=s,this.responseInternal=e}json(){return this.responseInternal.json()}}class d3{}class u3{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h3 extends Bc{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new $m(Ic.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(s),s)}async create(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=Z5(this.apiClient,e);return u=pt("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>gu(this.apiClient,y))}else{const h=O5(this.apiClient,e);return u=pt("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>mu(this.apiClient,y))}}async get(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=X5(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>gu(this.apiClient,y))}else{const h=L5(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>mu(this.apiClient,y))}}async delete(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=Q5(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(()=>{const y=a3(),v=new rv;return Object.assign(v,y),v})}else{const h=U5(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(()=>{const y=r3(),v=new rv;return Object.assign(v,y),v})}}async update(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=t3(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>gu(this.apiClient,y))}else{const h=F5(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>mu(this.apiClient,y))}}async listInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=n3(this.apiClient,e);return u=pt("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const v=o3(this.apiClient,y),N=new iv;return Object.assign(N,v),N})}else{const h=V5(this.apiClient,e);return u=pt("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const v=i3(this.apiClient,y),N=new iv;return Object.assign(N,v),N})}}}function av(n){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&n[e],r=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zs(n){return this instanceof Zs?(this.v=n,this):new Zs(n)}function zu(n,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=s.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(T){return function(k){return Promise.resolve(k).then(T,v)}}function u(T,k){r[T]&&(i[T]=function(_){return new Promise(function(P,L){o.push([T,_,P,L])>1||f(T,_)})},k&&(i[T]=k(i[T])))}function f(T,k){try{h(r[T](k))}catch(_){N(o[0][3],_)}}function h(T){T.value instanceof Zs?Promise.resolve(T.value.v).then(y,v):N(o[0][2],T)}function y(T){f("next",T)}function v(T){f("throw",T)}function N(T,k){T(k),o.shift(),o.length&&f(o[0][0],o[0][1])}}function Gp(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],s;return e?e.call(n):(n=typeof av=="function"?av(n):n[Symbol.iterator](),s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s);function r(o){s[o]=n[o]&&function(c){return new Promise(function(u,f){c=n[o](c),i(u,f,c.done,c.value)})}}function i(o,c,u,f){Promise.resolve(f).then(function(h){o({value:h,done:u})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f3(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const s=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return s===void 0?!1:uj(s)}function uj(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function p3(n){if(n.length!==0){if(n[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function m3(n){if(n===void 0||n.length===0)return[];const e=[],s=n.length;let r=0,i=n[0];for(;r<s;)if(n[r].role==="user")i=n[r],r++;else{const o=[];let c=!0;for(;r<s&&n[r].role==="model";)o.push(n[r]),c&&!uj(n[r])&&(c=!1),r++;c&&(e.push(i),e.push(...o))}return e}class g3{constructor(e,s){this.modelsModule=e,this.apiClient=s}create(e){return new x3(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class x3{constructor(e,s,r,i={},o=[]){this.apiClient=e,this.modelsModule=s,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),p3(o)}async sendMessage(e){var s;await this.sendPromise;const r=wn(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(s=e.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var o,c;const f=(c=(o=(await i).candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content,h=f?[f]:[];this.recordHistory(r,h)})(),await this.sendPromise,i}async sendMessageStream(e){var s;await this.sendPromise;const r=wn(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(s=e.config)!==null&&s!==void 0?s:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){return e?m3(this.history):this.history}processStreamResponse(e,s){var r,i;return zu(this,arguments,function*(){var c,u,f,h;const y=[];try{for(var v=!0,N=Gp(e),T;T=yield Zs(N.next()),c=T.done,!c;v=!0){h=T.value,v=!1;const k=h;if(f3(k)){const _=(i=(r=k.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;_!==void 0&&y.push(_)}yield yield Zs(k)}}catch(k){u={error:k}}finally{try{!v&&!c&&(f=N.return)&&(yield Zs(f.call(N)))}finally{if(u)throw u.error}}this.recordHistory(s,y)})}recordHistory(e,s){let r=[];s.length>0&&s.every(i=>i.role==="model")?r=s:r.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y3(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&x(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);return s!==void 0&&o!=null&&x(s,["_query","pageToken"],o),r}function b3(n,e){const s={},r=g(e,["config"]);return r!=null&&x(s,["config"],y3(n,r,s)),s}function v3(n,e){const s={},r=g(e,["details"]);r!=null&&x(s,["details"],r);const i=g(e,["message"]);i!=null&&x(s,["message"],i);const o=g(e,["code"]);return o!=null&&x(s,["code"],o),s}function w3(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["displayName"]);i!=null&&x(s,["displayName"],i);const o=g(e,["mimeType"]);o!=null&&x(s,["mimeType"],o);const c=g(e,["sizeBytes"]);c!=null&&x(s,["sizeBytes"],c);const u=g(e,["createTime"]);u!=null&&x(s,["createTime"],u);const f=g(e,["expirationTime"]);f!=null&&x(s,["expirationTime"],f);const h=g(e,["updateTime"]);h!=null&&x(s,["updateTime"],h);const y=g(e,["sha256Hash"]);y!=null&&x(s,["sha256Hash"],y);const v=g(e,["uri"]);v!=null&&x(s,["uri"],v);const N=g(e,["downloadUri"]);N!=null&&x(s,["downloadUri"],N);const T=g(e,["state"]);T!=null&&x(s,["state"],T);const k=g(e,["source"]);k!=null&&x(s,["source"],k);const _=g(e,["videoMetadata"]);_!=null&&x(s,["videoMetadata"],_);const P=g(e,["error"]);return P!=null&&x(s,["error"],v3(n,P)),s}function N3(n,e){const s={},r=g(e,["file"]);r!=null&&x(s,["file"],w3(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function j3(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","file"],dj(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function S3(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","file"],dj(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function k3(n,e){const s={},r=g(e,["details"]);r!=null&&x(s,["details"],r);const i=g(e,["message"]);i!=null&&x(s,["message"],i);const o=g(e,["code"]);return o!=null&&x(s,["code"],o),s}function Kp(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["displayName"]);i!=null&&x(s,["displayName"],i);const o=g(e,["mimeType"]);o!=null&&x(s,["mimeType"],o);const c=g(e,["sizeBytes"]);c!=null&&x(s,["sizeBytes"],c);const u=g(e,["createTime"]);u!=null&&x(s,["createTime"],u);const f=g(e,["expirationTime"]);f!=null&&x(s,["expirationTime"],f);const h=g(e,["updateTime"]);h!=null&&x(s,["updateTime"],h);const y=g(e,["sha256Hash"]);y!=null&&x(s,["sha256Hash"],y);const v=g(e,["uri"]);v!=null&&x(s,["uri"],v);const N=g(e,["downloadUri"]);N!=null&&x(s,["downloadUri"],N);const T=g(e,["state"]);T!=null&&x(s,["state"],T);const k=g(e,["source"]);k!=null&&x(s,["source"],k);const _=g(e,["videoMetadata"]);_!=null&&x(s,["videoMetadata"],_);const P=g(e,["error"]);return P!=null&&x(s,["error"],k3(n,P)),s}function _3(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const i=g(e,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Kp(n,c))),x(s,["files"],o)}return s}function C3(){return{}}function E3(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T3 extends Bc{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new $m(Ic.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(s),s)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(s=>Kp(this.apiClient,s))}async listInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=b3(this.apiClient,e);return o=pt("files",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const h=_3(this.apiClient,f),y=new c3;return Object.assign(y,h),y})}}async createInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=N3(this.apiClient,e);return o=pt("upload/v1beta/files",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(()=>{const f=C3(),h=new d3;return Object.assign(h,f),h})}}async get(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=j3(this.apiClient,e);return o=pt("files/{file}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>Kp(this.apiClient,f))}}async delete(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=S3(this.apiClient,e);return o=pt("files/{file}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(()=>{const f=E3(),h=new u3;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P3(n,e){const s={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&x(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&x(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&x(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&x(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&x(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&x(s,["inlineData"],h);const y=g(e,["text"]);return y!=null&&x(s,["text"],y),s}function A3(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&x(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&x(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&x(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&x(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&x(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&x(s,["functionResponse"],h);const y=g(e,["inlineData"]);y!=null&&x(s,["inlineData"],y);const v=g(e,["text"]);return v!=null&&x(s,["text"],v),s}function I3(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>P3(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function R3(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>A3(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function D3(){return{}}function M3(){return{}}function O3(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(s,["dynamicThreshold"],i),s}function L3(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(s,["dynamicThreshold"],i),s}function U3(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(s,["dynamicRetrievalConfig"],O3(n,r)),s}function z3(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(s,["dynamicRetrievalConfig"],L3(n,r)),s}function F3(n,e){const s={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(s,["googleSearch"],D3());const i=g(e,["googleSearchRetrieval"]);i!=null&&x(s,["googleSearchRetrieval"],U3(n,i));const o=g(e,["codeExecution"]);o!=null&&x(s,["codeExecution"],o);const c=g(e,["functionDeclarations"]);return c!=null&&x(s,["functionDeclarations"],c),s}function $3(n,e){const s={},r=g(e,["retrieval"]);r!=null&&x(s,["retrieval"],r),g(e,["googleSearch"])!=null&&x(s,["googleSearch"],M3());const o=g(e,["googleSearchRetrieval"]);o!=null&&x(s,["googleSearchRetrieval"],z3(n,o));const c=g(e,["codeExecution"]);c!=null&&x(s,["codeExecution"],c);const u=g(e,["functionDeclarations"]);return u!=null&&x(s,["functionDeclarations"],u),s}function V3(n,e){const s={},r=g(e,["handle"]);if(r!=null&&x(s,["handle"],r),g(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return s}function B3(n,e){const s={},r=g(e,["handle"]);r!=null&&x(s,["handle"],r);const i=g(e,["transparent"]);return i!=null&&x(s,["transparent"],i),s}function q3(){return{}}function ov(){return{}}function W3(n,e){const s={},r=g(e,["disabled"]);r!=null&&x(s,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&x(s,["startOfSpeechSensitivity"],i);const o=g(e,["endOfSpeechSensitivity"]);o!=null&&x(s,["endOfSpeechSensitivity"],o);const c=g(e,["prefixPaddingMs"]);c!=null&&x(s,["prefixPaddingMs"],c);const u=g(e,["silenceDurationMs"]);return u!=null&&x(s,["silenceDurationMs"],u),s}function H3(n,e){const s={},r=g(e,["disabled"]);r!=null&&x(s,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&x(s,["startOfSpeechSensitivity"],i);const o=g(e,["endOfSpeechSensitivity"]);o!=null&&x(s,["endOfSpeechSensitivity"],o);const c=g(e,["prefixPaddingMs"]);c!=null&&x(s,["prefixPaddingMs"],c);const u=g(e,["silenceDurationMs"]);return u!=null&&x(s,["silenceDurationMs"],u),s}function G3(n,e){const s={},r=g(e,["automaticActivityDetection"]);r!=null&&x(s,["automaticActivityDetection"],W3(n,r));const i=g(e,["activityHandling"]);i!=null&&x(s,["activityHandling"],i);const o=g(e,["turnCoverage"]);return o!=null&&x(s,["turnCoverage"],o),s}function K3(n,e){const s={},r=g(e,["automaticActivityDetection"]);r!=null&&x(s,["automaticActivityDetection"],H3(n,r));const i=g(e,["activityHandling"]);i!=null&&x(s,["activityHandling"],i);const o=g(e,["turnCoverage"]);return o!=null&&x(s,["turnCoverage"],o),s}function J3(n,e){const s={},r=g(e,["targetTokens"]);return r!=null&&x(s,["targetTokens"],r),s}function Y3(n,e){const s={},r=g(e,["targetTokens"]);return r!=null&&x(s,["targetTokens"],r),s}function Z3(n,e){const s={},r=g(e,["triggerTokens"]);r!=null&&x(s,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&x(s,["slidingWindow"],J3(n,i)),s}function X3(n,e){const s={},r=g(e,["triggerTokens"]);r!=null&&x(s,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&x(s,["slidingWindow"],Y3(n,i)),s}function Q3(n,e,s){const r={},i=g(e,["generationConfig"]);s!==void 0&&i!=null&&x(s,["setup","generationConfig"],i);const o=g(e,["responseModalities"]);s!==void 0&&o!=null&&x(s,["setup","generationConfig","responseModalities"],o);const c=g(e,["temperature"]);s!==void 0&&c!=null&&x(s,["setup","generationConfig","temperature"],c);const u=g(e,["topP"]);s!==void 0&&u!=null&&x(s,["setup","generationConfig","topP"],u);const f=g(e,["topK"]);s!==void 0&&f!=null&&x(s,["setup","generationConfig","topK"],f);const h=g(e,["maxOutputTokens"]);s!==void 0&&h!=null&&x(s,["setup","generationConfig","maxOutputTokens"],h);const y=g(e,["mediaResolution"]);s!==void 0&&y!=null&&x(s,["setup","generationConfig","mediaResolution"],y);const v=g(e,["seed"]);s!==void 0&&v!=null&&x(s,["setup","generationConfig","seed"],v);const N=g(e,["speechConfig"]);s!==void 0&&N!=null&&x(s,["setup","generationConfig","speechConfig"],N);const T=g(e,["systemInstruction"]);s!==void 0&&T!=null&&x(s,["setup","systemInstruction"],I3(n,wn(n,T)));const k=g(e,["tools"]);if(s!==void 0&&k!=null){let F=ih(n,k);Array.isArray(F)&&(F=F.map(K=>F3(n,rh(n,K)))),x(s,["setup","tools"],F)}const _=g(e,["sessionResumption"]);if(s!==void 0&&_!=null&&x(s,["setup","sessionResumption"],V3(n,_)),g(e,["inputAudioTranscription"])!==void 0)throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");const P=g(e,["outputAudioTranscription"]);s!==void 0&&P!=null&&x(s,["setup","outputAudioTranscription"],q3());const L=g(e,["realtimeInputConfig"]);s!==void 0&&L!=null&&x(s,["setup","realtimeInputConfig"],G3(n,L));const z=g(e,["contextWindowCompression"]);return s!==void 0&&z!=null&&x(s,["setup","contextWindowCompression"],Z3(n,z)),r}function eD(n,e,s){const r={},i=g(e,["generationConfig"]);s!==void 0&&i!=null&&x(s,["setup","generationConfig"],i);const o=g(e,["responseModalities"]);s!==void 0&&o!=null&&x(s,["setup","generationConfig","responseModalities"],o);const c=g(e,["temperature"]);s!==void 0&&c!=null&&x(s,["setup","generationConfig","temperature"],c);const u=g(e,["topP"]);s!==void 0&&u!=null&&x(s,["setup","generationConfig","topP"],u);const f=g(e,["topK"]);s!==void 0&&f!=null&&x(s,["setup","generationConfig","topK"],f);const h=g(e,["maxOutputTokens"]);s!==void 0&&h!=null&&x(s,["setup","generationConfig","maxOutputTokens"],h);const y=g(e,["mediaResolution"]);s!==void 0&&y!=null&&x(s,["setup","generationConfig","mediaResolution"],y);const v=g(e,["seed"]);s!==void 0&&v!=null&&x(s,["setup","generationConfig","seed"],v);const N=g(e,["speechConfig"]);s!==void 0&&N!=null&&x(s,["setup","generationConfig","speechConfig"],N);const T=g(e,["systemInstruction"]);s!==void 0&&T!=null&&x(s,["setup","systemInstruction"],R3(n,wn(n,T)));const k=g(e,["tools"]);if(s!==void 0&&k!=null){let K=ih(n,k);Array.isArray(K)&&(K=K.map(ee=>$3(n,rh(n,ee)))),x(s,["setup","tools"],K)}const _=g(e,["sessionResumption"]);s!==void 0&&_!=null&&x(s,["setup","sessionResumption"],B3(n,_));const P=g(e,["inputAudioTranscription"]);s!==void 0&&P!=null&&x(s,["setup","inputAudioTranscription"],ov());const L=g(e,["outputAudioTranscription"]);s!==void 0&&L!=null&&x(s,["setup","outputAudioTranscription"],ov());const z=g(e,["realtimeInputConfig"]);s!==void 0&&z!=null&&x(s,["setup","realtimeInputConfig"],K3(n,z));const F=g(e,["contextWindowCompression"]);return s!==void 0&&F!=null&&x(s,["setup","contextWindowCompression"],X3(n,F)),r}function tD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["setup","model"],hs(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],Q3(n,i,s)),s}function sD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["setup","model"],hs(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],eD(n,i,s)),s}function nD(){return{}}function rD(){return{}}function iD(){return{}}function aD(){return{}}function oD(n,e){const s={},r=g(e,["media"]);r!=null&&x(s,["mediaChunks"],rj(n,r));const i=g(e,["audio"]);i!=null&&x(s,["audio"],_5(n,i));const o=g(e,["audioStreamEnd"]);o!=null&&x(s,["audioStreamEnd"],o);const c=g(e,["video"]);c!=null&&x(s,["video"],k5(n,c));const u=g(e,["text"]);return u!=null&&x(s,["text"],u),g(e,["activityStart"])!=null&&x(s,["activityStart"],nD()),g(e,["activityEnd"])!=null&&x(s,["activityEnd"],iD()),s}function lD(n,e){const s={},r=g(e,["media"]);if(r!=null&&x(s,["mediaChunks"],rj(n,r)),g(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=g(e,["audioStreamEnd"]);if(i!=null&&x(s,["audioStreamEnd"],i),g(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(g(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return g(e,["activityStart"])!=null&&x(s,["activityStart"],rD()),g(e,["activityEnd"])!=null&&x(s,["activityEnd"],aD()),s}function cD(){return{}}function dD(){return{}}function uD(n,e){const s={},r=g(e,["thought"]);r!=null&&x(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&x(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&x(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&x(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&x(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&x(s,["inlineData"],h);const y=g(e,["text"]);return y!=null&&x(s,["text"],y),s}function hD(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&x(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&x(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&x(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&x(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&x(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&x(s,["functionResponse"],h);const y=g(e,["inlineData"]);y!=null&&x(s,["inlineData"],y);const v=g(e,["text"]);return v!=null&&x(s,["text"],v),s}function fD(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>uD(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function pD(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>hD(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function lv(n,e){const s={},r=g(e,["text"]);r!=null&&x(s,["text"],r);const i=g(e,["finished"]);return i!=null&&x(s,["finished"],i),s}function cv(n,e){const s={},r=g(e,["text"]);r!=null&&x(s,["text"],r);const i=g(e,["finished"]);return i!=null&&x(s,["finished"],i),s}function mD(n,e){const s={},r=g(e,["modelTurn"]);r!=null&&x(s,["modelTurn"],fD(n,r));const i=g(e,["turnComplete"]);i!=null&&x(s,["turnComplete"],i);const o=g(e,["interrupted"]);o!=null&&x(s,["interrupted"],o);const c=g(e,["groundingMetadata"]);c!=null&&x(s,["groundingMetadata"],c);const u=g(e,["generationComplete"]);u!=null&&x(s,["generationComplete"],u);const f=g(e,["inputTranscription"]);f!=null&&x(s,["inputTranscription"],lv(n,f));const h=g(e,["outputTranscription"]);return h!=null&&x(s,["outputTranscription"],lv(n,h)),s}function gD(n,e){const s={},r=g(e,["modelTurn"]);r!=null&&x(s,["modelTurn"],pD(n,r));const i=g(e,["turnComplete"]);i!=null&&x(s,["turnComplete"],i);const o=g(e,["interrupted"]);o!=null&&x(s,["interrupted"],o);const c=g(e,["groundingMetadata"]);c!=null&&x(s,["groundingMetadata"],c);const u=g(e,["generationComplete"]);u!=null&&x(s,["generationComplete"],u);const f=g(e,["inputTranscription"]);f!=null&&x(s,["inputTranscription"],cv(n,f));const h=g(e,["outputTranscription"]);return h!=null&&x(s,["outputTranscription"],cv(n,h)),s}function xD(n,e){const s={},r=g(e,["id"]);r!=null&&x(s,["id"],r);const i=g(e,["args"]);i!=null&&x(s,["args"],i);const o=g(e,["name"]);return o!=null&&x(s,["name"],o),s}function yD(n,e){const s={},r=g(e,["args"]);r!=null&&x(s,["args"],r);const i=g(e,["name"]);return i!=null&&x(s,["name"],i),s}function bD(n,e){const s={},r=g(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>xD(n,o))),x(s,["functionCalls"],i)}return s}function vD(n,e){const s={},r=g(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>yD(n,o))),x(s,["functionCalls"],i)}return s}function wD(n,e){const s={},r=g(e,["ids"]);return r!=null&&x(s,["ids"],r),s}function ND(n,e){const s={},r=g(e,["ids"]);return r!=null&&x(s,["ids"],r),s}function ru(n,e){const s={},r=g(e,["modality"]);r!=null&&x(s,["modality"],r);const i=g(e,["tokenCount"]);return i!=null&&x(s,["tokenCount"],i),s}function iu(n,e){const s={},r=g(e,["modality"]);r!=null&&x(s,["modality"],r);const i=g(e,["tokenCount"]);return i!=null&&x(s,["tokenCount"],i),s}function jD(n,e){const s={},r=g(e,["promptTokenCount"]);r!=null&&x(s,["promptTokenCount"],r);const i=g(e,["cachedContentTokenCount"]);i!=null&&x(s,["cachedContentTokenCount"],i);const o=g(e,["responseTokenCount"]);o!=null&&x(s,["responseTokenCount"],o);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&x(s,["toolUsePromptTokenCount"],c);const u=g(e,["thoughtsTokenCount"]);u!=null&&x(s,["thoughtsTokenCount"],u);const f=g(e,["totalTokenCount"]);f!=null&&x(s,["totalTokenCount"],f);const h=g(e,["promptTokensDetails"]);if(h!=null){let T=h;Array.isArray(T)&&(T=T.map(k=>ru(n,k))),x(s,["promptTokensDetails"],T)}const y=g(e,["cacheTokensDetails"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(k=>ru(n,k))),x(s,["cacheTokensDetails"],T)}const v=g(e,["responseTokensDetails"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(k=>ru(n,k))),x(s,["responseTokensDetails"],T)}const N=g(e,["toolUsePromptTokensDetails"]);if(N!=null){let T=N;Array.isArray(T)&&(T=T.map(k=>ru(n,k))),x(s,["toolUsePromptTokensDetails"],T)}return s}function SD(n,e){const s={},r=g(e,["promptTokenCount"]);r!=null&&x(s,["promptTokenCount"],r);const i=g(e,["cachedContentTokenCount"]);i!=null&&x(s,["cachedContentTokenCount"],i);const o=g(e,["candidatesTokenCount"]);o!=null&&x(s,["responseTokenCount"],o);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&x(s,["toolUsePromptTokenCount"],c);const u=g(e,["thoughtsTokenCount"]);u!=null&&x(s,["thoughtsTokenCount"],u);const f=g(e,["totalTokenCount"]);f!=null&&x(s,["totalTokenCount"],f);const h=g(e,["promptTokensDetails"]);if(h!=null){let k=h;Array.isArray(k)&&(k=k.map(_=>iu(n,_))),x(s,["promptTokensDetails"],k)}const y=g(e,["cacheTokensDetails"]);if(y!=null){let k=y;Array.isArray(k)&&(k=k.map(_=>iu(n,_))),x(s,["cacheTokensDetails"],k)}const v=g(e,["candidatesTokensDetails"]);if(v!=null){let k=v;Array.isArray(k)&&(k=k.map(_=>iu(n,_))),x(s,["responseTokensDetails"],k)}const N=g(e,["toolUsePromptTokensDetails"]);if(N!=null){let k=N;Array.isArray(k)&&(k=k.map(_=>iu(n,_))),x(s,["toolUsePromptTokensDetails"],k)}const T=g(e,["trafficType"]);return T!=null&&x(s,["trafficType"],T),s}function kD(n,e){const s={},r=g(e,["timeLeft"]);return r!=null&&x(s,["timeLeft"],r),s}function _D(n,e){const s={},r=g(e,["timeLeft"]);return r!=null&&x(s,["timeLeft"],r),s}function CD(n,e){const s={},r=g(e,["newHandle"]);r!=null&&x(s,["newHandle"],r);const i=g(e,["resumable"]);i!=null&&x(s,["resumable"],i);const o=g(e,["lastConsumedClientMessageIndex"]);return o!=null&&x(s,["lastConsumedClientMessageIndex"],o),s}function ED(n,e){const s={},r=g(e,["newHandle"]);r!=null&&x(s,["newHandle"],r);const i=g(e,["resumable"]);i!=null&&x(s,["resumable"],i);const o=g(e,["lastConsumedClientMessageIndex"]);return o!=null&&x(s,["lastConsumedClientMessageIndex"],o),s}function TD(n,e){const s={};g(e,["setupComplete"])!=null&&x(s,["setupComplete"],cD());const i=g(e,["serverContent"]);i!=null&&x(s,["serverContent"],mD(n,i));const o=g(e,["toolCall"]);o!=null&&x(s,["toolCall"],bD(n,o));const c=g(e,["toolCallCancellation"]);c!=null&&x(s,["toolCallCancellation"],wD(n,c));const u=g(e,["usageMetadata"]);u!=null&&x(s,["usageMetadata"],jD(n,u));const f=g(e,["goAway"]);f!=null&&x(s,["goAway"],kD(n,f));const h=g(e,["sessionResumptionUpdate"]);return h!=null&&x(s,["sessionResumptionUpdate"],CD(n,h)),s}function PD(n,e){const s={};g(e,["setupComplete"])!=null&&x(s,["setupComplete"],dD());const i=g(e,["serverContent"]);i!=null&&x(s,["serverContent"],gD(n,i));const o=g(e,["toolCall"]);o!=null&&x(s,["toolCall"],vD(n,o));const c=g(e,["toolCallCancellation"]);c!=null&&x(s,["toolCallCancellation"],ND(n,c));const u=g(e,["usageMetadata"]);u!=null&&x(s,["usageMetadata"],SD(n,u));const f=g(e,["goAway"]);f!=null&&x(s,["goAway"],_D(n,f));const h=g(e,["sessionResumptionUpdate"]);return h!=null&&x(s,["sessionResumptionUpdate"],ED(n,h)),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AD(n,e){const s={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&x(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&x(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&x(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&x(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&x(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&x(s,["inlineData"],h);const y=g(e,["text"]);return y!=null&&x(s,["text"],y),s}function ah(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>AD(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function ID(n,e){const s={};if(g(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=g(e,["category"]);r!=null&&x(s,["category"],r);const i=g(e,["threshold"]);return i!=null&&x(s,["threshold"],i),s}function RD(){return{}}function DD(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(s,["dynamicThreshold"],i),s}function MD(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(s,["dynamicRetrievalConfig"],DD(n,r)),s}function OD(n,e){const s={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(s,["googleSearch"],RD());const i=g(e,["googleSearchRetrieval"]);i!=null&&x(s,["googleSearchRetrieval"],MD(n,i));const o=g(e,["codeExecution"]);o!=null&&x(s,["codeExecution"],o);const c=g(e,["functionDeclarations"]);return c!=null&&x(s,["functionDeclarations"],c),s}function LD(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(s,["allowedFunctionNames"],i),s}function UD(n,e){const s={},r=g(e,["functionCallingConfig"]);return r!=null&&x(s,["functionCallingConfig"],LD(n,r)),s}function zD(n,e){const s={},r=g(e,["voiceName"]);return r!=null&&x(s,["voiceName"],r),s}function FD(n,e){const s={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&x(s,["prebuiltVoiceConfig"],zD(n,r)),s}function $D(n,e){const s={},r=g(e,["voiceConfig"]);r!=null&&x(s,["voiceConfig"],FD(n,r));const i=g(e,["languageCode"]);return i!=null&&x(s,["languageCode"],i),s}function VD(n,e){const s={},r=g(e,["includeThoughts"]);r!=null&&x(s,["includeThoughts"],r);const i=g(e,["thinkingBudget"]);return i!=null&&x(s,["thinkingBudget"],i),s}function BD(n,e,s){const r={},i=g(e,["systemInstruction"]);s!==void 0&&i!=null&&x(s,["systemInstruction"],ah(n,wn(n,i)));const o=g(e,["temperature"]);o!=null&&x(r,["temperature"],o);const c=g(e,["topP"]);c!=null&&x(r,["topP"],c);const u=g(e,["topK"]);u!=null&&x(r,["topK"],u);const f=g(e,["candidateCount"]);f!=null&&x(r,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&x(r,["maxOutputTokens"],h);const y=g(e,["stopSequences"]);y!=null&&x(r,["stopSequences"],y);const v=g(e,["responseLogprobs"]);v!=null&&x(r,["responseLogprobs"],v);const N=g(e,["logprobs"]);N!=null&&x(r,["logprobs"],N);const T=g(e,["presencePenalty"]);T!=null&&x(r,["presencePenalty"],T);const k=g(e,["frequencyPenalty"]);k!=null&&x(r,["frequencyPenalty"],k);const _=g(e,["seed"]);_!=null&&x(r,["seed"],_);const P=g(e,["responseMimeType"]);P!=null&&x(r,["responseMimeType"],P);const L=g(e,["responseSchema"]);if(L!=null&&x(r,["responseSchema"],oj(n,L)),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=g(e,["safetySettings"]);if(s!==void 0&&z!=null){let $=z;Array.isArray($)&&($=$.map(O=>ID(n,O))),x(s,["safetySettings"],$)}const F=g(e,["tools"]);if(s!==void 0&&F!=null){let $=ih(n,F);Array.isArray($)&&($=$.map(O=>OD(n,rh(n,O)))),x(s,["tools"],$)}const K=g(e,["toolConfig"]);if(s!==void 0&&K!=null&&x(s,["toolConfig"],UD(n,K)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ee=g(e,["cachedContent"]);s!==void 0&&ee!=null&&x(s,["cachedContent"],ua(n,ee));const W=g(e,["responseModalities"]);W!=null&&x(r,["responseModalities"],W);const D=g(e,["mediaResolution"]);D!=null&&x(r,["mediaResolution"],D);const C=g(e,["speechConfig"]);if(C!=null&&x(r,["speechConfig"],$D(n,lj(n,C))),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=g(e,["thinkingConfig"]);return I!=null&&x(r,["thinkingConfig"],VD(n,I)),r}function dv(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);if(i!=null){let c=da(n,i);Array.isArray(c)&&(c=c.map(u=>ah(n,u))),x(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&x(s,["generationConfig"],BD(n,o,s)),s}function qD(n,e,s){const r={},i=g(e,["taskType"]);s!==void 0&&i!=null&&x(s,["requests[]","taskType"],i);const o=g(e,["title"]);s!==void 0&&o!=null&&x(s,["requests[]","title"],o);const c=g(e,["outputDimensionality"]);if(s!==void 0&&c!=null&&x(s,["requests[]","outputDimensionality"],c),g(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function WD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);i!=null&&x(s,["requests[]","content"],aj(n,i));const o=g(e,["config"]);o!=null&&x(s,["config"],qD(n,o,s));const c=g(e,["model"]);return c!==void 0&&x(s,["requests[]","model"],hs(n,c)),s}function HD(n,e,s){const r={};if(g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=g(e,["numberOfImages"]);s!==void 0&&i!=null&&x(s,["parameters","sampleCount"],i);const o=g(e,["aspectRatio"]);s!==void 0&&o!=null&&x(s,["parameters","aspectRatio"],o);const c=g(e,["guidanceScale"]);if(s!==void 0&&c!=null&&x(s,["parameters","guidanceScale"],c),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=g(e,["safetyFilterLevel"]);s!==void 0&&u!=null&&x(s,["parameters","safetySetting"],u);const f=g(e,["personGeneration"]);s!==void 0&&f!=null&&x(s,["parameters","personGeneration"],f);const h=g(e,["includeSafetyAttributes"]);s!==void 0&&h!=null&&x(s,["parameters","includeSafetyAttributes"],h);const y=g(e,["includeRaiReason"]);s!==void 0&&y!=null&&x(s,["parameters","includeRaiReason"],y);const v=g(e,["language"]);s!==void 0&&v!=null&&x(s,["parameters","language"],v);const N=g(e,["outputMimeType"]);s!==void 0&&N!=null&&x(s,["parameters","outputOptions","mimeType"],N);const T=g(e,["outputCompressionQuality"]);if(s!==void 0&&T!=null&&x(s,["parameters","outputOptions","compressionQuality"],T),g(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function GD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],hs(n,r));const i=g(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const o=g(e,["config"]);return o!=null&&x(s,["config"],HD(n,o,s)),s}function KD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","name"],hs(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function JD(n,e,s){const r={},i=g(e,["displayName"]);s!==void 0&&i!=null&&x(s,["displayName"],i);const o=g(e,["description"]);return s!==void 0&&o!=null&&x(s,["description"],o),r}function YD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","name"],hs(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],JD(n,i,s)),s}function ZD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","name"],hs(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function XD(n,e){const s={};if(g(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return s}function QD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);if(i!=null){let c=da(n,i);Array.isArray(c)&&(c=c.map(u=>ah(n,u))),x(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&x(s,["config"],XD(n,o)),s}function eM(n,e){const s={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(e,["imageBytes"]);r!=null&&x(s,["bytesBase64Encoded"],ha(n,r));const i=g(e,["mimeType"]);return i!=null&&x(s,["mimeType"],i),s}function tM(n,e,s){const r={},i=g(e,["numberOfVideos"]);if(s!==void 0&&i!=null&&x(s,["parameters","sampleCount"],i),g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=g(e,["durationSeconds"]);if(s!==void 0&&o!=null&&x(s,["parameters","durationSeconds"],o),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=g(e,["aspectRatio"]);if(s!==void 0&&c!=null&&x(s,["parameters","aspectRatio"],c),g(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=g(e,["personGeneration"]);if(s!==void 0&&u!=null&&x(s,["parameters","personGeneration"],u),g(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=g(e,["negativePrompt"]);if(s!==void 0&&f!=null&&x(s,["parameters","negativePrompt"],f),g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function sM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],hs(n,r));const i=g(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const o=g(e,["image"]);o!=null&&x(s,["instances[0]","image"],eM(n,o));const c=g(e,["config"]);return c!=null&&x(s,["config"],tM(n,c,s)),s}function nM(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&x(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&x(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&x(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&x(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&x(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&x(s,["functionResponse"],h);const y=g(e,["inlineData"]);y!=null&&x(s,["inlineData"],y);const v=g(e,["text"]);return v!=null&&x(s,["text"],v),s}function pl(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>nM(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function rM(n,e){const s={},r=g(e,["featureSelectionPreference"]);return r!=null&&x(s,["featureSelectionPreference"],r),s}function iM(n,e){const s={},r=g(e,["method"]);r!=null&&x(s,["method"],r);const i=g(e,["category"]);i!=null&&x(s,["category"],i);const o=g(e,["threshold"]);return o!=null&&x(s,["threshold"],o),s}function aM(){return{}}function oM(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(s,["dynamicThreshold"],i),s}function lM(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(s,["dynamicRetrievalConfig"],oM(n,r)),s}function hj(n,e){const s={},r=g(e,["retrieval"]);r!=null&&x(s,["retrieval"],r),g(e,["googleSearch"])!=null&&x(s,["googleSearch"],aM());const o=g(e,["googleSearchRetrieval"]);o!=null&&x(s,["googleSearchRetrieval"],lM(n,o));const c=g(e,["codeExecution"]);c!=null&&x(s,["codeExecution"],c);const u=g(e,["functionDeclarations"]);return u!=null&&x(s,["functionDeclarations"],u),s}function cM(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(s,["allowedFunctionNames"],i),s}function dM(n,e){const s={},r=g(e,["functionCallingConfig"]);return r!=null&&x(s,["functionCallingConfig"],cM(n,r)),s}function uM(n,e){const s={},r=g(e,["voiceName"]);return r!=null&&x(s,["voiceName"],r),s}function hM(n,e){const s={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&x(s,["prebuiltVoiceConfig"],uM(n,r)),s}function fM(n,e){const s={},r=g(e,["voiceConfig"]);r!=null&&x(s,["voiceConfig"],hM(n,r));const i=g(e,["languageCode"]);return i!=null&&x(s,["languageCode"],i),s}function pM(n,e){const s={},r=g(e,["includeThoughts"]);r!=null&&x(s,["includeThoughts"],r);const i=g(e,["thinkingBudget"]);return i!=null&&x(s,["thinkingBudget"],i),s}function mM(n,e,s){const r={},i=g(e,["systemInstruction"]);s!==void 0&&i!=null&&x(s,["systemInstruction"],pl(n,wn(n,i)));const o=g(e,["temperature"]);o!=null&&x(r,["temperature"],o);const c=g(e,["topP"]);c!=null&&x(r,["topP"],c);const u=g(e,["topK"]);u!=null&&x(r,["topK"],u);const f=g(e,["candidateCount"]);f!=null&&x(r,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&x(r,["maxOutputTokens"],h);const y=g(e,["stopSequences"]);y!=null&&x(r,["stopSequences"],y);const v=g(e,["responseLogprobs"]);v!=null&&x(r,["responseLogprobs"],v);const N=g(e,["logprobs"]);N!=null&&x(r,["logprobs"],N);const T=g(e,["presencePenalty"]);T!=null&&x(r,["presencePenalty"],T);const k=g(e,["frequencyPenalty"]);k!=null&&x(r,["frequencyPenalty"],k);const _=g(e,["seed"]);_!=null&&x(r,["seed"],_);const P=g(e,["responseMimeType"]);P!=null&&x(r,["responseMimeType"],P);const L=g(e,["responseSchema"]);L!=null&&x(r,["responseSchema"],oj(n,L));const z=g(e,["routingConfig"]);z!=null&&x(r,["routingConfig"],z);const F=g(e,["modelSelectionConfig"]);F!=null&&x(r,["modelConfig"],rM(n,F));const K=g(e,["safetySettings"]);if(s!==void 0&&K!=null){let se=K;Array.isArray(se)&&(se=se.map(fe=>iM(n,fe))),x(s,["safetySettings"],se)}const ee=g(e,["tools"]);if(s!==void 0&&ee!=null){let se=ih(n,ee);Array.isArray(se)&&(se=se.map(fe=>hj(n,rh(n,fe)))),x(s,["tools"],se)}const W=g(e,["toolConfig"]);s!==void 0&&W!=null&&x(s,["toolConfig"],dM(n,W));const D=g(e,["labels"]);s!==void 0&&D!=null&&x(s,["labels"],D);const C=g(e,["cachedContent"]);s!==void 0&&C!=null&&x(s,["cachedContent"],ua(n,C));const I=g(e,["responseModalities"]);I!=null&&x(r,["responseModalities"],I);const $=g(e,["mediaResolution"]);$!=null&&x(r,["mediaResolution"],$);const O=g(e,["speechConfig"]);O!=null&&x(r,["speechConfig"],fM(n,lj(n,O)));const V=g(e,["audioTimestamp"]);V!=null&&x(r,["audioTimestamp"],V);const A=g(e,["thinkingConfig"]);return A!=null&&x(r,["thinkingConfig"],pM(n,A)),r}function uv(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);if(i!=null){let c=da(n,i);Array.isArray(c)&&(c=c.map(u=>pl(n,u))),x(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&x(s,["generationConfig"],mM(n,o,s)),s}function gM(n,e,s){const r={},i=g(e,["taskType"]);s!==void 0&&i!=null&&x(s,["instances[]","task_type"],i);const o=g(e,["title"]);s!==void 0&&o!=null&&x(s,["instances[]","title"],o);const c=g(e,["outputDimensionality"]);s!==void 0&&c!=null&&x(s,["parameters","outputDimensionality"],c);const u=g(e,["mimeType"]);s!==void 0&&u!=null&&x(s,["instances[]","mimeType"],u);const f=g(e,["autoTruncate"]);return s!==void 0&&f!=null&&x(s,["parameters","autoTruncate"],f),r}function xM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);i!=null&&x(s,["instances[]","content"],aj(n,i));const o=g(e,["config"]);return o!=null&&x(s,["config"],gM(n,o,s)),s}function yM(n,e,s){const r={},i=g(e,["outputGcsUri"]);s!==void 0&&i!=null&&x(s,["parameters","storageUri"],i);const o=g(e,["negativePrompt"]);s!==void 0&&o!=null&&x(s,["parameters","negativePrompt"],o);const c=g(e,["numberOfImages"]);s!==void 0&&c!=null&&x(s,["parameters","sampleCount"],c);const u=g(e,["aspectRatio"]);s!==void 0&&u!=null&&x(s,["parameters","aspectRatio"],u);const f=g(e,["guidanceScale"]);s!==void 0&&f!=null&&x(s,["parameters","guidanceScale"],f);const h=g(e,["seed"]);s!==void 0&&h!=null&&x(s,["parameters","seed"],h);const y=g(e,["safetyFilterLevel"]);s!==void 0&&y!=null&&x(s,["parameters","safetySetting"],y);const v=g(e,["personGeneration"]);s!==void 0&&v!=null&&x(s,["parameters","personGeneration"],v);const N=g(e,["includeSafetyAttributes"]);s!==void 0&&N!=null&&x(s,["parameters","includeSafetyAttributes"],N);const T=g(e,["includeRaiReason"]);s!==void 0&&T!=null&&x(s,["parameters","includeRaiReason"],T);const k=g(e,["language"]);s!==void 0&&k!=null&&x(s,["parameters","language"],k);const _=g(e,["outputMimeType"]);s!==void 0&&_!=null&&x(s,["parameters","outputOptions","mimeType"],_);const P=g(e,["outputCompressionQuality"]);s!==void 0&&P!=null&&x(s,["parameters","outputOptions","compressionQuality"],P);const L=g(e,["addWatermark"]);s!==void 0&&L!=null&&x(s,["parameters","addWatermark"],L);const z=g(e,["enhancePrompt"]);return s!==void 0&&z!=null&&x(s,["parameters","enhancePrompt"],z),r}function bM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],hs(n,r));const i=g(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const o=g(e,["config"]);return o!=null&&x(s,["config"],yM(n,o,s)),s}function vM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","name"],hs(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function wM(n,e,s){const r={},i=g(e,["displayName"]);s!==void 0&&i!=null&&x(s,["displayName"],i);const o=g(e,["description"]);return s!==void 0&&o!=null&&x(s,["description"],o),r}function NM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],hs(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],wM(n,i,s)),s}function jM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","name"],hs(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function SM(n,e,s){const r={},i=g(e,["systemInstruction"]);s!==void 0&&i!=null&&x(s,["systemInstruction"],pl(n,wn(n,i)));const o=g(e,["tools"]);if(s!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>hj(n,f))),x(s,["tools"],u)}const c=g(e,["generationConfig"]);return s!==void 0&&c!=null&&x(s,["generationConfig"],c),r}function kM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);if(i!=null){let c=da(n,i);Array.isArray(c)&&(c=c.map(u=>pl(n,u))),x(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&x(s,["config"],SM(n,o,s)),s}function _M(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);if(i!=null){let c=da(n,i);Array.isArray(c)&&(c=c.map(u=>pl(n,u))),x(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&x(s,["config"],o),s}function CM(n,e){const s={},r=g(e,["gcsUri"]);r!=null&&x(s,["gcsUri"],r);const i=g(e,["imageBytes"]);i!=null&&x(s,["bytesBase64Encoded"],ha(n,i));const o=g(e,["mimeType"]);return o!=null&&x(s,["mimeType"],o),s}function EM(n,e,s){const r={},i=g(e,["numberOfVideos"]);s!==void 0&&i!=null&&x(s,["parameters","sampleCount"],i);const o=g(e,["outputGcsUri"]);s!==void 0&&o!=null&&x(s,["parameters","storageUri"],o);const c=g(e,["fps"]);s!==void 0&&c!=null&&x(s,["parameters","fps"],c);const u=g(e,["durationSeconds"]);s!==void 0&&u!=null&&x(s,["parameters","durationSeconds"],u);const f=g(e,["seed"]);s!==void 0&&f!=null&&x(s,["parameters","seed"],f);const h=g(e,["aspectRatio"]);s!==void 0&&h!=null&&x(s,["parameters","aspectRatio"],h);const y=g(e,["resolution"]);s!==void 0&&y!=null&&x(s,["parameters","resolution"],y);const v=g(e,["personGeneration"]);s!==void 0&&v!=null&&x(s,["parameters","personGeneration"],v);const N=g(e,["pubsubTopic"]);s!==void 0&&N!=null&&x(s,["parameters","pubsubTopic"],N);const T=g(e,["negativePrompt"]);s!==void 0&&T!=null&&x(s,["parameters","negativePrompt"],T);const k=g(e,["enhancePrompt"]);return s!==void 0&&k!=null&&x(s,["parameters","enhancePrompt"],k),r}function TM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],hs(n,r));const i=g(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const o=g(e,["image"]);o!=null&&x(s,["instances[0]","image"],CM(n,o));const c=g(e,["config"]);return c!=null&&x(s,["config"],EM(n,c,s)),s}function PM(n,e){const s={},r=g(e,["thought"]);r!=null&&x(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&x(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&x(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&x(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&x(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&x(s,["inlineData"],h);const y=g(e,["text"]);return y!=null&&x(s,["text"],y),s}function AM(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>PM(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function IM(n,e){const s={},r=g(e,["citationSources"]);return r!=null&&x(s,["citations"],r),s}function RM(n,e){const s={},r=g(e,["content"]);r!=null&&x(s,["content"],AM(n,r));const i=g(e,["citationMetadata"]);i!=null&&x(s,["citationMetadata"],IM(n,i));const o=g(e,["tokenCount"]);o!=null&&x(s,["tokenCount"],o);const c=g(e,["finishReason"]);c!=null&&x(s,["finishReason"],c);const u=g(e,["avgLogprobs"]);u!=null&&x(s,["avgLogprobs"],u);const f=g(e,["groundingMetadata"]);f!=null&&x(s,["groundingMetadata"],f);const h=g(e,["index"]);h!=null&&x(s,["index"],h);const y=g(e,["logprobsResult"]);y!=null&&x(s,["logprobsResult"],y);const v=g(e,["safetyRatings"]);return v!=null&&x(s,["safetyRatings"],v),s}function hv(n,e){const s={},r=g(e,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>RM(n,f))),x(s,["candidates"],u)}const i=g(e,["modelVersion"]);i!=null&&x(s,["modelVersion"],i);const o=g(e,["promptFeedback"]);o!=null&&x(s,["promptFeedback"],o);const c=g(e,["usageMetadata"]);return c!=null&&x(s,["usageMetadata"],c),s}function DM(n,e){const s={},r=g(e,["values"]);return r!=null&&x(s,["values"],r),s}function MM(){return{}}function OM(n,e){const s={},r=g(e,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>DM(n,c))),x(s,["embeddings"],o)}return g(e,["metadata"])!=null&&x(s,["metadata"],MM()),s}function LM(n,e){const s={},r=g(e,["bytesBase64Encoded"]);r!=null&&x(s,["imageBytes"],ha(n,r));const i=g(e,["mimeType"]);return i!=null&&x(s,["mimeType"],i),s}function fj(n,e){const s={},r=g(e,["safetyAttributes","categories"]);r!=null&&x(s,["categories"],r);const i=g(e,["safetyAttributes","scores"]);i!=null&&x(s,["scores"],i);const o=g(e,["contentType"]);return o!=null&&x(s,["contentType"],o),s}function UM(n,e){const s={},r=g(e,["_self"]);r!=null&&x(s,["image"],LM(n,r));const i=g(e,["raiFilteredReason"]);i!=null&&x(s,["raiFilteredReason"],i);const o=g(e,["_self"]);return o!=null&&x(s,["safetyAttributes"],fj(n,o)),s}function zM(n,e){const s={},r=g(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>UM(n,c))),x(s,["generatedImages"],o)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&x(s,["positivePromptSafetyAttributes"],fj(n,i)),s}function FM(n,e){const s={},r=g(e,["baseModel"]);r!=null&&x(s,["baseModel"],r);const i=g(e,["createTime"]);i!=null&&x(s,["createTime"],i);const o=g(e,["updateTime"]);return o!=null&&x(s,["updateTime"],o),s}function fv(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["displayName"]);i!=null&&x(s,["displayName"],i);const o=g(e,["description"]);o!=null&&x(s,["description"],o);const c=g(e,["version"]);c!=null&&x(s,["version"],c);const u=g(e,["_self"]);u!=null&&x(s,["tunedModelInfo"],FM(n,u));const f=g(e,["inputTokenLimit"]);f!=null&&x(s,["inputTokenLimit"],f);const h=g(e,["outputTokenLimit"]);h!=null&&x(s,["outputTokenLimit"],h);const y=g(e,["supportedGenerationMethods"]);return y!=null&&x(s,["supportedActions"],y),s}function $M(){return{}}function VM(n,e){const s={},r=g(e,["totalTokens"]);r!=null&&x(s,["totalTokens"],r);const i=g(e,["cachedContentTokenCount"]);return i!=null&&x(s,["cachedContentTokenCount"],i),s}function BM(n,e){const s={},r=g(e,["video","uri"]);r!=null&&x(s,["uri"],r);const i=g(e,["video","encodedVideo"]);i!=null&&x(s,["videoBytes"],ha(n,i));const o=g(e,["encoding"]);return o!=null&&x(s,["mimeType"],o),s}function qM(n,e){const s={},r=g(e,["_self"]);return r!=null&&x(s,["video"],BM(n,r)),s}function WM(n,e){const s={},r=g(e,["generatedSamples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>qM(n,u))),x(s,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(s,["raiMediaFilteredCount"],i);const o=g(e,["raiMediaFilteredReasons"]);return o!=null&&x(s,["raiMediaFilteredReasons"],o),s}function HM(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["metadata"]);i!=null&&x(s,["metadata"],i);const o=g(e,["done"]);o!=null&&x(s,["done"],o);const c=g(e,["error"]);c!=null&&x(s,["error"],c);const u=g(e,["response","generateVideoResponse"]);return u!=null&&x(s,["response"],WM(n,u)),s}function GM(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&x(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&x(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&x(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&x(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&x(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&x(s,["functionResponse"],h);const y=g(e,["inlineData"]);y!=null&&x(s,["inlineData"],y);const v=g(e,["text"]);return v!=null&&x(s,["text"],v),s}function KM(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>GM(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function JM(n,e){const s={},r=g(e,["citations"]);return r!=null&&x(s,["citations"],r),s}function YM(n,e){const s={},r=g(e,["content"]);r!=null&&x(s,["content"],KM(n,r));const i=g(e,["citationMetadata"]);i!=null&&x(s,["citationMetadata"],JM(n,i));const o=g(e,["finishMessage"]);o!=null&&x(s,["finishMessage"],o);const c=g(e,["finishReason"]);c!=null&&x(s,["finishReason"],c);const u=g(e,["avgLogprobs"]);u!=null&&x(s,["avgLogprobs"],u);const f=g(e,["groundingMetadata"]);f!=null&&x(s,["groundingMetadata"],f);const h=g(e,["index"]);h!=null&&x(s,["index"],h);const y=g(e,["logprobsResult"]);y!=null&&x(s,["logprobsResult"],y);const v=g(e,["safetyRatings"]);return v!=null&&x(s,["safetyRatings"],v),s}function pv(n,e){const s={},r=g(e,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(y=>YM(n,y))),x(s,["candidates"],h)}const i=g(e,["createTime"]);i!=null&&x(s,["createTime"],i);const o=g(e,["responseId"]);o!=null&&x(s,["responseId"],o);const c=g(e,["modelVersion"]);c!=null&&x(s,["modelVersion"],c);const u=g(e,["promptFeedback"]);u!=null&&x(s,["promptFeedback"],u);const f=g(e,["usageMetadata"]);return f!=null&&x(s,["usageMetadata"],f),s}function ZM(n,e){const s={},r=g(e,["truncated"]);r!=null&&x(s,["truncated"],r);const i=g(e,["token_count"]);return i!=null&&x(s,["tokenCount"],i),s}function XM(n,e){const s={},r=g(e,["values"]);r!=null&&x(s,["values"],r);const i=g(e,["statistics"]);return i!=null&&x(s,["statistics"],ZM(n,i)),s}function QM(n,e){const s={},r=g(e,["billableCharacterCount"]);return r!=null&&x(s,["billableCharacterCount"],r),s}function e6(n,e){const s={},r=g(e,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>XM(n,c))),x(s,["embeddings"],o)}const i=g(e,["metadata"]);return i!=null&&x(s,["metadata"],QM(n,i)),s}function t6(n,e){const s={},r=g(e,["gcsUri"]);r!=null&&x(s,["gcsUri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&x(s,["imageBytes"],ha(n,i));const o=g(e,["mimeType"]);return o!=null&&x(s,["mimeType"],o),s}function pj(n,e){const s={},r=g(e,["safetyAttributes","categories"]);r!=null&&x(s,["categories"],r);const i=g(e,["safetyAttributes","scores"]);i!=null&&x(s,["scores"],i);const o=g(e,["contentType"]);return o!=null&&x(s,["contentType"],o),s}function s6(n,e){const s={},r=g(e,["_self"]);r!=null&&x(s,["image"],t6(n,r));const i=g(e,["raiFilteredReason"]);i!=null&&x(s,["raiFilteredReason"],i);const o=g(e,["_self"]);o!=null&&x(s,["safetyAttributes"],pj(n,o));const c=g(e,["prompt"]);return c!=null&&x(s,["enhancedPrompt"],c),s}function n6(n,e){const s={},r=g(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>s6(n,c))),x(s,["generatedImages"],o)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&x(s,["positivePromptSafetyAttributes"],pj(n,i)),s}function r6(n,e){const s={},r=g(e,["endpoint"]);r!=null&&x(s,["name"],r);const i=g(e,["deployedModelId"]);return i!=null&&x(s,["deployedModelId"],i),s}function i6(n,e){const s={},r=g(e,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&x(s,["baseModel"],r);const i=g(e,["createTime"]);i!=null&&x(s,["createTime"],i);const o=g(e,["updateTime"]);return o!=null&&x(s,["updateTime"],o),s}function mv(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["displayName"]);i!=null&&x(s,["displayName"],i);const o=g(e,["description"]);o!=null&&x(s,["description"],o);const c=g(e,["versionId"]);c!=null&&x(s,["version"],c);const u=g(e,["deployedModels"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(v=>r6(n,v))),x(s,["endpoints"],y)}const f=g(e,["labels"]);f!=null&&x(s,["labels"],f);const h=g(e,["_self"]);return h!=null&&x(s,["tunedModelInfo"],i6(n,h)),s}function a6(){return{}}function o6(n,e){const s={},r=g(e,["totalTokens"]);return r!=null&&x(s,["totalTokens"],r),s}function l6(n,e){const s={},r=g(e,["tokensInfo"]);return r!=null&&x(s,["tokensInfo"],r),s}function c6(n,e){const s={},r=g(e,["gcsUri"]);r!=null&&x(s,["uri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&x(s,["videoBytes"],ha(n,i));const o=g(e,["mimeType"]);return o!=null&&x(s,["mimeType"],o),s}function d6(n,e){const s={},r=g(e,["_self"]);return r!=null&&x(s,["video"],c6(n,r)),s}function u6(n,e){const s={},r=g(e,["videos"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>d6(n,u))),x(s,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(s,["raiMediaFilteredCount"],i);const o=g(e,["raiMediaFilteredReasons"]);return o!=null&&x(s,["raiMediaFilteredReasons"],o),s}function h6(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["metadata"]);i!=null&&x(s,["metadata"],i);const o=g(e,["done"]);o!=null&&x(s,["done"],o);const c=g(e,["error"]);c!=null&&x(s,["error"],c);const u=g(e,["response"]);return u!=null&&x(s,["response"],u6(n,u)),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f6="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function p6(n,e,s){let r,i;s.data instanceof Blob?i=JSON.parse(await s.data.text()):i=JSON.parse(s.data),n.isVertexAI()?r=PD(n,i):r=TD(n,i),e(r)}class m6{constructor(e,s,r){this.apiClient=e,this.auth=s,this.webSocketFactory=r}async connect(e){var s,r,i,o;const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let f;const h=b6(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h);else{const K=this.apiClient.getApiKey();f=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateContent?key=${K}`}let y=()=>{};const v=new Promise(K=>{y=K}),N=e.callbacks,T=function(){var K;(K=N==null?void 0:N.onopen)===null||K===void 0||K.call(N),y({})},k=this.apiClient,_={onopen:T,onmessage:K=>{p6(k,N.onmessage,K)},onerror:(s=N==null?void 0:N.onerror)!==null&&s!==void 0?s:function(K){},onclose:(r=N==null?void 0:N.onclose)!==null&&r!==void 0?r:function(K){}},P=this.webSocketFactory.create(f,y6(h),_);P.connect(),await v;let L=hs(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const K=this.apiClient.getProject(),ee=this.apiClient.getLocation();L=`projects/${K}/locations/${ee}/`+L}let z={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Uu.AUDIO]}:e.config.responseModalities=[Uu.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F={model:L,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=sD(this.apiClient,F):z=tD(this.apiClient,F),delete z.config,P.send(JSON.stringify(z)),new x6(P,this.apiClient)}}const g6={turnComplete:!0};class x6{constructor(e,s){this.conn=e,this.apiClient=s}tLiveClientContent(e,s){if(s.turns!==null&&s.turns!==void 0){let r=[];try{r=da(e,s.turns),e.isVertexAI()?r=r.map(i=>pl(e,i)):r=r.map(i=>ah(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:r,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(e,s){let r=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?r=s.functionResponses:r=[s.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(f6)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},g6),e);const s=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(s))}sendRealtimeInput(e){let s={};this.apiClient.isVertexAI()?s={realtimeInput:lD(this.apiClient,e)}:s={realtimeInput:oD(this.apiClient,e)},this.conn.send(JSON.stringify(s))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function y6(n){const e={};return n.forEach((s,r)=>{e[r]=s}),e}function b6(n){const e=new Headers;for(const[s,r]of Object.entries(n))e.append(s,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v6 extends Bc{constructor(e){super(),this.apiClient=e,this.generateContent=async s=>await this.generateContentInternal(s),this.generateContentStream=async s=>await this.generateContentStreamInternal(s),this.generateImages=async s=>await this.generateImagesInternal(s).then(r=>{var i;let o;const c=[];if(r!=null&&r.generatedImages)for(const f of r.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((i=f==null?void 0:f.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=f==null?void 0:f.safetyAttributes:c.push(f);let u;return o?u={generatedImages:c,positivePromptSafetyAttributes:o}:u={generatedImages:c},u})}async generateContentInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=uv(this.apiClient,e);return u=pt("{model}:generateContent",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const v=pv(this.apiClient,y),N=new nu;return Object.assign(N,v),N})}else{const h=dv(this.apiClient,e);return u=pt("{model}:generateContent",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const v=hv(this.apiClient,y),N=new nu;return Object.assign(N,v),N})}}async generateContentStreamInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=uv(this.apiClient,e);u=pt("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h.config,delete h._url,delete h._query;const y=this.apiClient;return c=y.requestStream({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),c.then(function(v){return zu(this,arguments,function*(){var N,T,k,_;try{for(var P=!0,L=Gp(v),z;z=yield Zs(L.next()),N=z.done,!N;P=!0){_=z.value,P=!1;const K=pv(y,yield Zs(_.json())),ee=new nu;Object.assign(ee,K),yield yield Zs(ee)}}catch(F){T={error:F}}finally{try{!P&&!N&&(k=L.return)&&(yield Zs(k.call(L)))}finally{if(T)throw T.error}}})})}else{const h=dv(this.apiClient,e);u=pt("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h.config,delete h._url,delete h._query;const y=this.apiClient;return c=y.requestStream({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(v){return zu(this,arguments,function*(){var N,T,k,_;try{for(var P=!0,L=Gp(v),z;z=yield Zs(L.next()),N=z.done,!N;P=!0){_=z.value,P=!1;const K=hv(y,yield Zs(_.json())),ee=new nu;Object.assign(ee,K),yield yield Zs(ee)}}catch(F){T={error:F}}finally{try{!P&&!N&&(k=L.return)&&(yield Zs(k.call(L)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=xM(this.apiClient,e);return u=pt("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const v=e6(this.apiClient,y),N=new Qb;return Object.assign(N,v),N})}else{const h=WD(this.apiClient,e);return u=pt("{model}:batchEmbedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const v=OM(this.apiClient,y),N=new Qb;return Object.assign(N,v),N})}}async generateImagesInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=bM(this.apiClient,e);return u=pt("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const v=n6(this.apiClient,y),N=new ev;return Object.assign(N,v),N})}else{const h=GD(this.apiClient,e);return u=pt("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const v=zM(this.apiClient,y),N=new ev;return Object.assign(N,v),N})}}async get(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=vM(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>mv(this.apiClient,y))}else{const h=KD(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>fv(this.apiClient,y))}}async update(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=NM(this.apiClient,e);return u=pt("{model}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>mv(this.apiClient,y))}else{const h=YD(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>fv(this.apiClient,y))}}async delete(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=jM(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(()=>{const y=a6(),v=new tv;return Object.assign(v,y),v})}else{const h=ZD(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(()=>{const y=$M(),v=new tv;return Object.assign(v,y),v})}}async countTokens(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=kM(this.apiClient,e);return u=pt("{model}:countTokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const v=o6(this.apiClient,y),N=new sv;return Object.assign(N,v),N})}else{const h=QD(this.apiClient,e);return u=pt("{model}:countTokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const v=VM(this.apiClient,y),N=new sv;return Object.assign(N,v),N})}}async computeTokens(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=_M(this.apiClient,e);return o=pt("{model}:computeTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const h=l6(this.apiClient,f),y=new l3;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=TM(this.apiClient,e);return u=pt("{model}:predictLongRunning",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>h6(this.apiClient,y))}else{const h=sM(this.apiClient,e);return u=pt("{model}:predictLongRunning",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>HM(this.apiClient,y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w6(n,e){const s={},r=g(e,["operationName"]);r!=null&&x(s,["_url","operationName"],r);const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function N6(n,e){const s={},r=g(e,["operationName"]);r!=null&&x(s,["_url","operationName"],r);const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function j6(n,e){const s={},r=g(e,["operationName"]);r!=null&&x(s,["operationName"],r);const i=g(e,["resourceName"]);i!=null&&x(s,["_url","resourceName"],i);const o=g(e,["config"]);return o!=null&&x(s,["config"],o),s}function S6(n,e){const s={},r=g(e,["video","uri"]);r!=null&&x(s,["uri"],r);const i=g(e,["video","encodedVideo"]);i!=null&&x(s,["videoBytes"],ha(n,i));const o=g(e,["encoding"]);return o!=null&&x(s,["mimeType"],o),s}function k6(n,e){const s={},r=g(e,["_self"]);return r!=null&&x(s,["video"],S6(n,r)),s}function _6(n,e){const s={},r=g(e,["generatedSamples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>k6(n,u))),x(s,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(s,["raiMediaFilteredCount"],i);const o=g(e,["raiMediaFilteredReasons"]);return o!=null&&x(s,["raiMediaFilteredReasons"],o),s}function C6(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["metadata"]);i!=null&&x(s,["metadata"],i);const o=g(e,["done"]);o!=null&&x(s,["done"],o);const c=g(e,["error"]);c!=null&&x(s,["error"],c);const u=g(e,["response","generateVideoResponse"]);return u!=null&&x(s,["response"],_6(n,u)),s}function E6(n,e){const s={},r=g(e,["gcsUri"]);r!=null&&x(s,["uri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&x(s,["videoBytes"],ha(n,i));const o=g(e,["mimeType"]);return o!=null&&x(s,["mimeType"],o),s}function T6(n,e){const s={},r=g(e,["_self"]);return r!=null&&x(s,["video"],E6(n,r)),s}function P6(n,e){const s={},r=g(e,["videos"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>T6(n,u))),x(s,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(s,["raiMediaFilteredCount"],i);const o=g(e,["raiMediaFilteredReasons"]);return o!=null&&x(s,["raiMediaFilteredReasons"],o),s}function gv(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["metadata"]);i!=null&&x(s,["metadata"],i);const o=g(e,["done"]);o!=null&&x(s,["done"],o);const c=g(e,["error"]);c!=null&&x(s,["error"],c);const u=g(e,["response"]);return u!=null&&x(s,["response"],P6(n,u)),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A6 extends Bc{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const s=e.operation,r=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=s.name.split("/operations/")[0];let o;return r&&"httpOptions"in r&&(o=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:i,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:s.name,config:r})}async getVideosOperationInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=N6(this.apiClient,e);return u=pt("{operationName}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>gv(this.apiClient,y))}else{const h=w6(this.apiClient,e);return u=pt("{operationName}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>C6(this.apiClient,y))}}async fetchPredictVideosOperationInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=j6(this.apiClient,e);return o=pt("{resourceName}:fetchPredictOperation",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>gv(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I6="Content-Type",R6="X-Server-Timeout",D6="User-Agent",M6="x-goog-api-client",O6="0.12.0",L6=`google-genai-sdk/${O6}`,U6="v1beta1",z6="v1beta",xv=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class mj extends Error{constructor(e,s){s?super(e,{cause:s}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class Jp extends Error{constructor(e,s){s?super(e,{cause:s}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class F6{constructor(e){var s,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:U6,this.getProject()||this.getLocation()?(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(i.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:z6,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),s=new URL(e);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,s,r){const i=[this.getRequestUrlInternal(s)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,s,r);if(e.queryParams)for(const[c,u]of Object.entries(e.queryParams))i.searchParams.append(c,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,s,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,s){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(s))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,s,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,s,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,s,r){if(s&&s.timeout||r){const i=new AbortController,o=i.signal;s.timeout&&(s==null?void 0:s.timeout)>0&&setTimeout(()=>i.abort(),s.timeout),r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return e.headers=await this.getHeadersInternal(s),e}async unaryApiCall(e,s,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:r})).then(async i=>(await yv(i),new Hp(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,s,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:r})).then(async i=>(await yv(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var s;return zu(this,arguments,function*(){const i=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let c="";for(;;){const{done:u,value:f}=yield Zs(i.read());if(u){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=o.decode(f);try{const v=JSON.parse(h);if("error"in v){const N=JSON.parse(JSON.stringify(v.error)),T=N.status,k=N.code,_=`got status: ${T}. ${JSON.stringify(v)}`;if(k>=400&&k<500)throw new mj(_);if(k>=500&&k<600)throw new Jp(_)}}catch(v){const N=v;if(N.name==="ClientError"||N.name==="ServerError")throw v}c+=h;let y=c.match(xv);for(;y;){const v=y[1];try{const N=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Zs(new Hp(N)),c=c.slice(y[0].length),y=c.match(xv)}catch(N){throw new Error(`exception parsing stream chunk ${v}. ${N}`)}}}}finally{i.releaseLock()}})}async apiCall(e,s){return fetch(e,s).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},s=L6+" "+this.clientOptions.userAgentExtra;return e[D6]=s,e[M6]=s,e[I6]="application/json",e}async getHeadersInternal(e){const s=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))s.append(r,i);e.timeout&&e.timeout>0&&s.append(R6,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s),s}async uploadFile(e,s){var r;const i={};s!=null&&(i.mimeType=s.mimeType,i.name=s.name,i.displayName=s.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,c=await o.stat(e);i.sizeBytes=String(c.size);const u=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const f=await this.fetchUploadUrl(i,s);return o.upload(e,f,this)}async fetchUploadUrl(e,s){var r;let i={};s!=null&&s.httpOptions?i=s.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},c=await this.request({path:pt("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(r=c==null?void 0:c.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function yv(n){var e;if(n===void 0)throw new Jp("response is undefined");if(!n.ok){const s=n.status,r=n.statusText;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=`got status: ${s} ${r}. ${JSON.stringify(i)}`;throw s>=400&&s<500?new mj(o):s>=500&&s<600?new Jp(o):new Error(o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $6(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],r);const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function V6(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&x(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);s!==void 0&&o!=null&&x(s,["_query","pageToken"],o);const c=g(e,["filter"]);return s!==void 0&&c!=null&&x(s,["_query","filter"],c),r}function B6(n,e){const s={},r=g(e,["config"]);return r!=null&&x(s,["config"],V6(n,r,s)),s}function q6(n,e){const s={},r=g(e,["textInput"]);r!=null&&x(s,["textInput"],r);const i=g(e,["output"]);return i!=null&&x(s,["output"],i),s}function W6(n,e){const s={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(e,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>q6(n,o))),x(s,["examples","examples"],i)}return s}function H6(n,e,s){const r={};if(g(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=g(e,["tunedModelDisplayName"]);if(s!==void 0&&i!=null&&x(s,["displayName"],i),g(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=g(e,["epochCount"]);s!==void 0&&o!=null&&x(s,["tuningTask","hyperparameters","epochCount"],o);const c=g(e,["learningRateMultiplier"]);if(c!=null&&x(r,["tuningTask","hyperparameters","learningRateMultiplier"],c),g(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=g(e,["batchSize"]);s!==void 0&&u!=null&&x(s,["tuningTask","hyperparameters","batchSize"],u);const f=g(e,["learningRate"]);return s!==void 0&&f!=null&&x(s,["tuningTask","hyperparameters","learningRate"],f),r}function G6(n,e){const s={},r=g(e,["baseModel"]);r!=null&&x(s,["baseModel"],r);const i=g(e,["trainingDataset"]);i!=null&&x(s,["tuningTask","trainingData"],W6(n,i));const o=g(e,["config"]);return o!=null&&x(s,["config"],H6(n,o,s)),s}function K6(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],r);const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function J6(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&x(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);s!==void 0&&o!=null&&x(s,["_query","pageToken"],o);const c=g(e,["filter"]);return s!==void 0&&c!=null&&x(s,["_query","filter"],c),r}function Y6(n,e){const s={},r=g(e,["config"]);return r!=null&&x(s,["config"],J6(n,r,s)),s}function Z6(n,e,s){const r={},i=g(e,["gcsUri"]);if(s!==void 0&&i!=null&&x(s,["supervisedTuningSpec","trainingDatasetUri"],i),g(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function X6(n,e){const s={},r=g(e,["gcsUri"]);return r!=null&&x(s,["validationDatasetUri"],r),s}function Q6(n,e,s){const r={},i=g(e,["validationDataset"]);s!==void 0&&i!=null&&x(s,["supervisedTuningSpec"],X6(n,i));const o=g(e,["tunedModelDisplayName"]);s!==void 0&&o!=null&&x(s,["tunedModelDisplayName"],o);const c=g(e,["description"]);s!==void 0&&c!=null&&x(s,["description"],c);const u=g(e,["epochCount"]);s!==void 0&&u!=null&&x(s,["supervisedTuningSpec","hyperParameters","epochCount"],u);const f=g(e,["learningRateMultiplier"]);s!==void 0&&f!=null&&x(s,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const h=g(e,["adapterSize"]);if(s!==void 0&&h!=null&&x(s,["supervisedTuningSpec","hyperParameters","adapterSize"],h),g(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function eO(n,e){const s={},r=g(e,["baseModel"]);r!=null&&x(s,["baseModel"],r);const i=g(e,["trainingDataset"]);i!=null&&x(s,["supervisedTuningSpec","trainingDatasetUri"],Z6(n,i,s));const o=g(e,["config"]);return o!=null&&x(s,["config"],Q6(n,o,s)),s}function tO(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["model"],r);const i=g(e,["name"]);return i!=null&&x(s,["endpoint"],i),s}function gj(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["state"]);i!=null&&x(s,["state"],cj(n,i));const o=g(e,["createTime"]);o!=null&&x(s,["createTime"],o);const c=g(e,["tuningTask","startTime"]);c!=null&&x(s,["startTime"],c);const u=g(e,["tuningTask","completeTime"]);u!=null&&x(s,["endTime"],u);const f=g(e,["updateTime"]);f!=null&&x(s,["updateTime"],f);const h=g(e,["description"]);h!=null&&x(s,["description"],h);const y=g(e,["baseModel"]);y!=null&&x(s,["baseModel"],y);const v=g(e,["_self"]);v!=null&&x(s,["tunedModel"],tO(n,v));const N=g(e,["distillationSpec"]);N!=null&&x(s,["distillationSpec"],N);const T=g(e,["experiment"]);T!=null&&x(s,["experiment"],T);const k=g(e,["labels"]);k!=null&&x(s,["labels"],k);const _=g(e,["pipelineJob"]);_!=null&&x(s,["pipelineJob"],_);const P=g(e,["tunedModelDisplayName"]);return P!=null&&x(s,["tunedModelDisplayName"],P),s}function sO(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const i=g(e,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>gj(n,c))),x(s,["tuningJobs"],o)}return s}function nO(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["metadata"]);i!=null&&x(s,["metadata"],i);const o=g(e,["done"]);o!=null&&x(s,["done"],o);const c=g(e,["error"]);return c!=null&&x(s,["error"],c),s}function rO(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["model"],r);const i=g(e,["endpoint"]);return i!=null&&x(s,["endpoint"],i),s}function Yp(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["state"]);i!=null&&x(s,["state"],cj(n,i));const o=g(e,["createTime"]);o!=null&&x(s,["createTime"],o);const c=g(e,["startTime"]);c!=null&&x(s,["startTime"],c);const u=g(e,["endTime"]);u!=null&&x(s,["endTime"],u);const f=g(e,["updateTime"]);f!=null&&x(s,["updateTime"],f);const h=g(e,["error"]);h!=null&&x(s,["error"],h);const y=g(e,["description"]);y!=null&&x(s,["description"],y);const v=g(e,["baseModel"]);v!=null&&x(s,["baseModel"],v);const N=g(e,["tunedModel"]);N!=null&&x(s,["tunedModel"],rO(n,N));const T=g(e,["supervisedTuningSpec"]);T!=null&&x(s,["supervisedTuningSpec"],T);const k=g(e,["tuningDataStats"]);k!=null&&x(s,["tuningDataStats"],k);const _=g(e,["encryptionSpec"]);_!=null&&x(s,["encryptionSpec"],_);const P=g(e,["partnerModelTuningSpec"]);P!=null&&x(s,["partnerModelTuningSpec"],P);const L=g(e,["distillationSpec"]);L!=null&&x(s,["distillationSpec"],L);const z=g(e,["experiment"]);z!=null&&x(s,["experiment"],z);const F=g(e,["labels"]);F!=null&&x(s,["labels"],F);const K=g(e,["pipelineJob"]);K!=null&&x(s,["pipelineJob"],K);const ee=g(e,["tunedModelDisplayName"]);return ee!=null&&x(s,["tunedModelDisplayName"],ee),s}function iO(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const i=g(e,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Yp(n,c))),x(s,["tuningJobs"],o)}return s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aO extends Bc{constructor(e){super(),this.apiClient=e,this.get=async s=>await this.getInternal(s),this.list=async(s={})=>new $m(Ic.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(s),s),this.tune=async s=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(s);{const r=await this.tuneMldevInternal(s);let i="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?i=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(i=r.name.split("/operations/")[0]),{name:i,state:Wp.JOB_STATE_QUEUED}}}}async getInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=K6(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>Yp(this.apiClient,y))}else{const h=$6(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>gj(this.apiClient,y))}}async listInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=Y6(this.apiClient,e);return u=pt("tuningJobs",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const v=iO(this.apiClient,y),N=new nv;return Object.assign(N,v),N})}else{const h=B6(this.apiClient,e);return u=pt("tunedModels",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const v=sO(this.apiClient,y),N=new nv;return Object.assign(N,v),N})}}async tuneInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=eO(this.apiClient,e);return o=pt("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>Yp(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=G6(this.apiClient,e);return o=pt("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>nO(this.apiClient,f))}}}const oO=1024*1024*8;async function lO(n,e,s){var r,i;let o=0,c=0,u=new Hp(new Response),f="upload";for(o=n.size;c<o;){const y=Math.min(oO,o-c),v=n.slice(c,c+y);if(c+y>=o&&(f+=", finalize"),u=await s.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(c),"Content-Length":String(y)}}}),c+=y,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r["x-goog-upload-status"])!=="active")break;if(o<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(u==null?void 0:u.json());if(((i=u==null?void 0:u.headers)===null||i===void 0?void 0:i["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function cO(n){return{size:n.size,type:n.type}}class dO{async upload(e,s,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lO(e,s,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uO{create(e,s,r){return new hO(e,s,r)}}class hO{constructor(e,s,r){this.url=e,this.headers=s,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bv="x-goog-api-key";class fO{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(bv)===null&&e.append(bv,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pO="gl-node/";class mO{constructor(e){var s;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=e.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=e.apiKey;const r=S5(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new fO(this.apiKey);this.apiClient=new F6({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:pO+"web",uploader:new dO}),this.models=new v6(this.apiClient),this.live=new m6(this.apiClient,i,new uO),this.chats=new g3(this.models,this.apiClient),this.caches=new h3(this.apiClient),this.files=new T3(this.apiClient),this.operations=new A6(this.apiClient),this.tunings=new aO(this.apiClient)}}const gO={};var xO={};const yO=typeof import.meta<"u"&&gO?"AIzaSyDhB9FyniBmMSJJAP_t_mNq1uILG5rZcQI":void 0,bO=typeof process<"u"?xO.VITE_GEMINI_API_KEY:void 0,Zp=yO||bO||"";typeof window<"u"&&Zp&&console.warn("Warning: Gemini API key is present in the frontend build (VITE_GEMINI_API_KEY). This exposes the key to users. Consider proxying requests through a server or using a server-side function to keep keys secret.");const qc=()=>Zp?new mO({apiKey:Zp}):(console.warn("API Key is missing. AI features will not work."),null),vO=["Timeless","Elegant","Vintage","Handmade","Artisan","Luxe","Delicate","Statement","Classic","Boho"],wO=["Gold","Silver","Sterling Silver","Resin","Bronze","Copper","Glass","Crystal","Gemstone"],NO=["Art Deco","Vintage","Boho","Minimalist","Retro","Contemporary","Minimal"],Fu=n=>n[Math.floor(Math.random()*n.length)],Xp=(n,e)=>{const s=Fu(vO),r=Fu(NO),i=n?n.replace(/[^a-zA-Z0-9 ]/g,""):"Piece";return`${s} ${r} ${i}`.trim()},vv=n=>{const e=(n||"").toLowerCase(),s=[];return e.includes("ring")&&s.push("Ring"),(e.includes("neck")||e.includes("pendant")||e.includes("choker"))&&s.push("Pendant"),e.includes("ear")&&s.push("Stud"),e.includes("bracelet")&&s.push("Bracelet"),s.length===0&&s.push(Fu(["Pendant","Ring","Stud","Dangle"])),s.push(Fu(wO)),Array.from(new Set(s)).slice(0,5)},lc=(n,e,s)=>{const r=s?`Features: ${s}. `:"";return`${n} is a ${e.toLowerCase()} crafted with care. ${r}Perfect for elevating everyday looks or adding a special touch for events. Hand-finished details and quality materials make it a timeless addition to any collection.`},wv=(n,e)=>{const s=n.split(" ").slice(0,4).map(r=>r.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()).filter(Boolean);return Array.from(new Set([...s,...e.map(r=>r.toLowerCase())])).slice(0,6)},jO=async(n,e,s)=>{const r=qc();if(!r)return lc(n||Xp(e||""),e||"Jewelry",s);try{return(await r.models.generateContent({model:"gemini-2.5-flash",contents:`Write a compelling, SEO-friendly product description for an e-commerce product.
      
      Product Name: ${n}
      Category: ${e}
      Keywords/Features: ${s}
      
      Tone: Professional, persuasive, and enthusiastic. 
      Keep it under 150 words.`})).text||lc(n,e,s)||"Could not generate description."}catch(i){return console.error("Gemini API Error:",i),lc(n,e,s)}},SO=async(n,e)=>{const s=qc();if(!s)try{const i=Xp(e),o=vv(e),c=lc(i,e||"Jewelry","Handmade, Unique"),u=wv(i,o);return{name:i,description:c,whenAndHowToWear:"Perfect for both everyday wear and special occasions. Layer with other pieces for a curated look.",tags:o,seoKeywords:u,colors:[]}}catch(i){return console.error("Local fallback for product metadata failed:",i),null}const r=n.replace(/^data:image\/\w+;base64,/,"");try{const o=(await s.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:r}},{text:`You are a fashion merchandising expert for a specialized jewelry store. Analyze this image of a ${e||"jewelry product"}.
            
            Generate the following JSON object:
            {
              "name": "A short, catchy, premium product name",
              "description": "A short, powerful, attractive description (max 3 sentences) that sells the product emotionally.",
              "whenAndHowToWear": "Short, powerful advice on when and how to wear this item (max 2 sentences).",
              "tags": ["Array", "of", "5", "jewelry-specific", "tags"],
              "seoKeywords": ["Array", "of", "5", "strong", "SEO", "keywords"],
              "colors": ["List", "of", "dominant", "product", "colors"]
            }
            
            CRITICAL INSTRUCTIONS:
            1. **Tags**: STRICTLY JEWELRY ONLY. Allowed: Materials (Gold, Resin, Silver, Gemstone), Types (Ring, Stud, Choker, Pendant), Styles (Art Deco, Vintage, Boho, Minimalist), Techniques (Filigree, Wire Wrap). 
               FORBIDDEN: "Fashion", "Style", "Woman", "Girl", "Cute", "Gift", "Love", "Trend", "Beautiful", "Accessory".
            2. **Colors**: STRICTLY PRODUCT ONLY. Ignore background, skin, or prop colors. If the ring is silver and the stone is red, output ["Silver", "Red"]. Do not output "White" if the background is white.
            
            Return ONLY raw JSON.`}]},config:{responseMimeType:"application/json"}})).text;return o?JSON.parse(o):null}catch(i){console.error("Gemini Image Analysis Error:",i);try{const o=Xp(e),c=vv(e),u=lc(o,e||"Jewelry","Handmade, Unique"),f=wv(o,c);return{name:o,description:u,whenAndHowToWear:"Perfect for both everyday wear and special occasions. Layer with other pieces for a curated look.",tags:c,seoKeywords:f,colors:[]}}catch(o){return console.error("Local fallback for product metadata failed:",o),null}}},kO=async(n,e)=>{const s=qc();if(!s)return[];try{const i=(await s.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${e} unique South African product reviews for a jewelry item named "${n}".
      
      CRITICAL INSTRUCTIONS:
      1. **Persona**: Use ONLY Female names.
      2. **Diversity**: Mix names from Zulu, Xhosa, Afrikaans, English, and Coloured backgrounds.
      3. **Locations**: Use specific South African towns (e.g., Paarl, Benoni, Mthatha, Umlazi, George, Soweto, Ballito, Bloemfontein), NOT just "Cape Town" or "JHB".
      4. **Language Mixing**: 
         - Some reviews must mix English with Afrikaans (e.g., "Baie nice", "Lekker", "Te oulik").
         - Some reviews must mix English with Xhosa/Zulu slang (e.g., "Yho", "Shame", "Stunning shem", "Haikona").
         - Keep it natural.
      5. **Realism**: Include occasional spelling mistakes (e.g., "realy", "awsome") and casual grammar.
      6. **Rating**: Randomly between 3.5 and 5.0 stars.
      7. **Content**: Short, punchy comments about quality, delivery, or how it looks.
         - **Price Mentions**: When mentioning price, ALWAYS portray it as cheap and good quality (e.g., "So affordable for such good quality", "Worth every cent").
         - **Delivery/Waiting**: If any negative sentiment about waiting time, turn it positive (e.g., "Waited a bit but worth the wait", "Delivery took time but totally worth it").
      8. **Dates**: Random dates strictly between January 1st, 2025 and today (Format: YYYY-MM-DD). Do NOT generate 2024 dates.

      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return i?JSON.parse(i).map(c=>({...c,id:`rev_ai_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(r){return console.error("Gemini Review Generation Error:",r),[]}},_O=async n=>{const e=qc();if(!e)return[];try{const r=(await e.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${n} unique South African reviews specifically for "One of a Kind" handmade wire-wrapped pendants.
      
      CRITICAL INSTRUCTIONS:
      1. **Context**: These are unique, single items. The reviews should NOT mention specific colors or stones (like "love the blue stone") because every piece is different.
      2. **Focus**: Focus on the "surprise" element, the uniqueness, the wire-wrapping craftsmanship, the packaging, and the fact that nobody else has this exact piece.
      3. **Persona**: Female names, South African diversity (Zulu, Xhosa, Afrikaans, English).
      4. **Locations**: Specific SA towns.
      5. **Language**: Mix in SA slang (Lekker, Mooi, Pragtig, Yho, Stunning).
      6. **Rating**: 4.0 to 5.0 stars.
      7. **Content**: Short, punchy comments about quality, delivery, or how it looks.
         - **Price Mentions**: When mentioning price, ALWAYS portray it as cheap and good quality (e.g., "So affordable for such good quality", "Worth every cent").
         - **Delivery/Waiting**: If any negative sentiment about waiting time, turn it positive (e.g., "Waited a bit but worth the wait", "Delivery took time but totally worth it").
      8. **Dates**: Random dates between Jan 2025 and now.

      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return r?JSON.parse(r).map(o=>({...o,id:`rev_unique_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(s){return console.error("Gemini Unique Review Generation Error:",s),[]}},CO=async(n,e,s)=>{const r=qc();if(!r)return`Check out this amazing product: ${n} for R${s}! #SpoilMeVintage #vintage #jewelry`;try{let i=`Write a single social media post for a jewelry product named "${n}". Price: R${s}.`;return e==="Instagram"||e==="TikTok"?i+=' Style: High energy, visually descriptive, lots of emojis, include 10 relevant hashtags. Focus on "Unique", "Handmade", "South Africa". Keep it under 200 characters + hashtags.':e==="Facebook"?i+=' Style: Friendly, community-focused, engaging question at the end. Mention "Spoil Me Vintage". Include link placeholder [Link].':e==="Twitter"||e==="X"?i+=" Style: Short, punchy, urgent. Max 280 characters. Include 3 hashtags.":i+=" Style: Professional yet inviting.",(await r.models.generateContent({model:"gemini-2.5-flash",contents:i})).text||""}catch(i){return console.error("Gemini Social Post Error:",i),`New arrival: ${n} for only R${s}! Get it before it's gone. #SpoilMeVintage`}},EO={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},TO=[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Black",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Silver",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Hypo-Allergic Plastic",modifier:0,description:"Plastic state bends easily"}],Nv=["Epoxy Resin","Copper","Aluminium","Sterling Silver","Glass Beads","Beads","Wood","Oxidized"],jv="spv_base_materials",PO=()=>{var ot,ue,me,Le,St,lt,mt,Jt,kt;const{products:n,addProduct:e,updateProduct:s,deleteProduct:r,categories:i,packagingPresets:o,materialPresets:c,savePackagingPreset:u,saveMaterialPreset:f,deleteMaterialPreset:h,dbConnectionError:y,login:v,manualWinner:N,setManualWinner:T,isLoading:k}=vt(),[_,P]=S.useState(!1),[L,z]=S.useState(!1),[F,K]=S.useState(!1),[ee,W]=S.useState(!1),[D,C]=S.useState(!1),[I,$]=S.useState("general"),[O,V]=S.useState(()=>{try{const R=localStorage.getItem(jv),ne=R?JSON.parse(R):null,ze=Array.isArray(ne)?ne.map(_e=>String(_e)).filter(Boolean):[];return Array.from(new Set([...Nv,...ze]))}catch{return Nv}}),[A,se]=S.useState("");S.useEffect(()=>{try{localStorage.setItem(jv,JSON.stringify(O))}catch{}},[O]);const fe=R=>R?R.split(/[,|;]/).map(ne=>ne.trim()).filter(Boolean):[],Se=()=>Array.from(new Set(fe(J.material))),Ie=R=>{const ne=Array.from(new Set(R.map(ze=>ze.trim()).filter(Boolean)));je(ze=>({...ze,material:ne.join(", ")}))},le=R=>{const ne=R.trim();if(!ne)return;const ze=Se(),Fe=ze.some(He=>He.toLowerCase()===ne.toLowerCase())?ze.filter(He=>He.toLowerCase()!==ne.toLowerCase()):[...ze,ne];Ie(Fe)},be=()=>{const R=A.trim();R&&(V(ne=>ne.some(_e=>_e.toLowerCase()===R.toLowerCase())?ne:[...ne,R]),se(""),le(R))},[ve,Y]=S.useState(null),[de,te]=S.useState(null),[xe,q]=S.useState(""),[Ae,Pe]=S.useState(""),[$e,tt]=S.useState(""),[ht,qt]=S.useState(""),[Ne,Qe]=S.useState(!1),[yt,Ut]=S.useState(""),oe=S.useRef(null),De=S.useRef(null),Be=S.useRef(null),ke=R=>({Ring:"Rings",Rings:"Rings",Stud:"Stud Earrings","Stud Earrings":"Stud Earrings",Dangle:"Dangle Earrings","Dangle Earrings":"Dangle Earrings",Pendant:"Pendants",Pendants:"Pendants",Bracelet:"Bracelets",Bracelets:"Bracelets",Watch:"Watches",Watches:"Watches","Jewelry Box":"Jewelry Boxes","Jewelry Boxes":"Jewelry Boxes","Perfume Holder":"Perfume Holders","Perfume Holders":"Perfume Holders",Other:"Other"})[R]||R,We=R=>{const ne=((R==null?void 0:R.type)??"").toString().trim();if(ne)return ne;const ze=((R==null?void 0:R.productType)??"").toString().trim();if(ze)return ze;const _e=((R==null?void 0:R.name)??"").toString().toLowerCase();return _e?_e.includes("perfume")?"Perfume Holder":_e.includes("jewelry box")||_e.includes("jewellery box")?"Jewelry Box":_e.includes("watch")?"Watch":_e.includes("bracelet")?"Bracelet":_e.includes("pendant")?"Pendant":_e.includes("necklace")?"Necklace":_e.includes("ring")?"Ring":_e.includes("dangle")?"Dangle":_e.includes("stud")?"Stud":"Other":"Other"},Nt=R=>({general:"General",pricing:"Pricing",media:"Media",inventory:"Inventory",marketing:"Marketing",reviews:"Reviews",promotions:"Promotions",gifts:"Gifts"})[R]||R,ye={id:"",code:"",name:"",slug:"",description:"",whenAndHowToWear:"",price:0,priceUSD:0,compareAtPrice:0,compareAtPriceUSD:0,memberPrice:0,memberPriceUSD:0,costPrice:0,shippingCost:0,packaging:[],backOfficeLink:"",madeBy:"Spoil Me Vintage",category:((ot=i[0])==null?void 0:ot.name)||"",type:"Stud",status:"draft",images:[""],stock:0,soldCount:0,tags:[],seoKeywords:[],colors:[],isNewArrival:!1,isBestSeller:!1,isFeaturedRing:!1,isFeaturedBracelet:!1,isFeaturedWatch:!1,isUniquePendant:!1,isFeaturedStud:!1,isFeaturedDangle:!1,isFeaturedJewelryBox:!1,isFeaturedPerfumeHolder:!1,isJewelrySet:!1,createdAt:new Date().toISOString(),ringStock:{5:0,6:0,7:0,8:0,9:0,10:0,11:0},earringMaterials:[],showEarringOptions:!1,pendantChainLengths:{},pendantWireWrapped:!1,chainStyles:[],material:"",reviews:[],giftProductId:"",giftValue:0,promoPrice:0,promoStartsAt:"",promoExpiresAt:"",promoBasicMemberPrice:0,promoPremiumMemberPrice:0,promoDeluxeMemberPrice:0,isSoldOut:!1},[J,je]=S.useState(ye),[jt,ft]=S.useState(""),[Wt,Ft]=S.useState(""),[Ss,as]=S.useState(""),[Me,fs]=S.useState(0),[os,Ws]=S.useState(""),[ur,Ds]=S.useState(""),[Ms,Mn]=S.useState(5),On=[...TO,...c];Ba.useEffect(()=>{je(R=>({...R,memberPrice:parseFloat((R.price*.8).toFixed(2)),memberPriceUSD:parseFloat((R.priceUSD*.8).toFixed(2))}))},[J.price,J.priceUSD]);const ps=()=>{var R;je({...ye,id:`SPV-${Date.now()}`,createdAt:new Date().toISOString(),category:((R=i[0])==null?void 0:R.name)||""}),P(!0),$("general"),Ds("")},Os=R=>{const ne={...ye,...R,compareAtPrice:R.compareAtPrice||0,compareAtPriceUSD:R.compareAtPriceUSD||0,priceUSD:R.priceUSD||0,memberPrice:R.price?parseFloat((R.price*.8).toFixed(2)):R.memberPrice||0,memberPriceUSD:R.priceUSD?parseFloat((R.priceUSD*.8).toFixed(2)):R.memberPriceUSD||0,costPrice:R.costPrice||0,shippingCost:R.shippingCost||0,soldCount:R.soldCount||0,packaging:R.packaging||[],ringStock:R.ringStock||ye.ringStock,pendantChainLengths:R.pendantChainLengths||{},showEarringOptions:R.showEarringOptions??!1,chainStyles:R.chainStyles||[],reviews:R.reviews||[],giftProductId:R.giftProductId||"",giftValue:R.giftValue||0,promoPrice:R.promoPrice||0,promoStartsAt:R.promoStartsAt||"",promoExpiresAt:R.promoExpiresAt||"",promoBasicMemberPrice:R.promoBasicMemberPrice||0,promoPremiumMemberPrice:R.promoPremiumMemberPrice||0,promoDeluxeMemberPrice:R.promoDeluxeMemberPrice||0,tags:R.tags||[],seoKeywords:R.seoKeywords||[],colors:R.colors||[],isFeaturedJewelryBox:R.isFeaturedJewelryBox||!1,isFeaturedPerfumeHolder:R.isFeaturedPerfumeHolder||!1};je(ne),P(!0),$("general"),Ds("")},$t=async()=>{if(!J.name||!J.price){alert("Name and Price are required");return}z(!0);try{let R=[];const ne=J.images.map(async(Fe,He)=>{var gt;if(typeof Fe=="string"&&Fe.startsWith("data:"))try{const Yt=await(await fetch(Fe)).blob(),pr=((gt=Yt.type.split("/"))==null?void 0:gt[1])||"jpg",Jr=`products/${J.id}/img_${Date.now()}_${He}.${pr}`;try{return await dm("products",Jr,Yt)||""}catch(Ni){return console.warn("Supabase upload failed, falling back to base64:",Ni),Fe}}catch(Yt){return console.error("Failed to process base64 image:",Yt),""}return Fe});R=(await Promise.all(ne)).filter(Fe=>Fe&&Fe.trim()!=="");const _e={...J,images:R,price:Number(J.price),priceUSD:Number(J.priceUSD),stock:Number(J.stock),soldCount:Number(J.soldCount),compareAtPrice:Number(J.compareAtPrice||0),memberPrice:Number(J.memberPrice||0),memberPriceUSD:Number(J.memberPriceUSD||0),costPrice:Number(J.costPrice||0),shippingCost:Number(J.shippingCost||0),giftValue:Number(J.giftValue||0),promoPrice:Number(J.promoPrice||0),promoBasicMemberPrice:Number(J.promoBasicMemberPrice||0),promoPremiumMemberPrice:Number(J.promoPremiumMemberPrice||0),promoDeluxeMemberPrice:Number(J.promoDeluxeMemberPrice||0)};_e.type==="Ring"&&_e.ringStock&&(_e.stock=Object.values(_e.ringStock).reduce((Fe,He)=>Fe+He,0)),n.some(Fe=>Fe.id===_e.id)?await s(_e):await e(_e);try{Es&&(await Mc("products",_e.id)||alert("Warning: Product saved locally but failed to persist to Supabase. Check DB connection or permissions."))}catch(Fe){console.warn("Post-save verification failed:",Fe)}P(!1)}catch(R){console.error("Failed to save product:",R),alert("Failed to save product. Please check console.")}finally{z(!1)}},ks=async R=>{if(window.confirm("Are you sure?"))try{await r(R)}catch{alert("Failed to delete product.")}},ts=async()=>{if(!J.name||!J.category){alert("Please enter a name and category first.");return}K(!0);const R=await jO(J.name,J.category,"Handmade, Unique, Vintage");je(ne=>({...ne,description:R})),K(!1)},we=async R=>{var _e;const ne=(_e=R.target.files)==null?void 0:_e[0];if(!ne)return;W(!0);const ze=new FileReader;ze.onloadend=async()=>{const Fe=ze.result,He=[Fe,...J.images.filter(Yt=>Yt!=="")];je(Yt=>({...Yt,images:He})),console.log("AdminProducts: Added base64 image for analysis (preview length):",Fe.slice(0,80));const gt=await SO(Fe,J.category);gt&&je(Yt=>({...Yt,name:gt.name,description:gt.description,whenAndHowToWear:gt.whenAndHowToWear,tags:[...new Set([...Yt.tags,...gt.tags])],seoKeywords:[...new Set([...Yt.seoKeywords||[],...gt.seoKeywords])],colors:[...new Set([...Yt.colors||[],...gt.colors])],slug:gt.name.toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-")})),W(!1)},ze.readAsDataURL(ne)},Je=async R=>{const ne=R.target.files;if(!ne||ne.length===0)return;const ze=Array.from(ne).map(Fe=>new Promise(He=>{const gt=new FileReader;gt.onloadend=()=>He(gt.result),gt.readAsDataURL(Fe)})),_e=await Promise.all(ze);je(Fe=>({...Fe,images:[...Fe.images.filter(He=>He.trim()!==""),..._e]})),R.target.value=""},Ct=async()=>{if(!J.name){alert("Please enter a product name first.");return}C(!0);const R=await kO(J.name,Ms);R.length>0&&je(ne=>({...ne,reviews:[...ne.reviews||[],...R]})),C(!1)},Et=async()=>{C(!0);const R=await _O(25);R.length>0&&je(ne=>({...ne,reviews:[...ne.reviews||[],...R]})),C(!1)},It=()=>{const R=Math.floor(1e5+Math.random()*9e5);je(ne=>({...ne,code:`SPV-${R}`}))},Dt=()=>{if(!J.name)return;const R=J.name.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");je(ne=>({...ne,slug:R}))},Lt=R=>{je(ne=>{var ze;return{...ne,reviews:(ze=ne.reviews)==null?void 0:ze.filter(_e=>_e.id!==R)}})},Vt=(R,ne,ze)=>{if(!ne.trim())return;const _e=ne.split(",").map(Fe=>Fe.trim()).filter(Fe=>Fe.length>0);je(Fe=>({...Fe,[R]:Array.from(new Set([...Fe[R]||[],..._e]))})),ze("")},Gn=(R,ne)=>{je(ze=>{var _e;return{...ze,[R]:(_e=ze[R])==null?void 0:_e.filter((Fe,He)=>He!==ne)}})},un=R=>{const ne=J.images.filter((ze,_e)=>_e!==R);ne.length===0&&ne.push(""),je({...J,images:ne})},hn=R=>{Y(R.id),te({userName:R.userName,location:R.location,content:R.content,rating:R.rating,date:R.date||new Date().toLocaleDateString()})},hr=()=>{!ve||!de||(je(R=>{var ne;return{...R,reviews:(ne=R.reviews)==null?void 0:ne.map(ze=>ze.id===ve?{...ze,...de}:ze)}}),Y(null),te(null))},Ls=(R,ne,ze)=>{var _e;(_e=J.earringMaterials)!=null&&_e.some(Fe=>Fe.name===R)||je(Fe=>({...Fe,earringMaterials:[...Fe.earringMaterials||[],{name:R,modifier:ne,description:ze}]}))},vi=R=>{const ne=[...J.earringMaterials||[]];ne.splice(R,1),je({...J,earringMaterials:ne})},Wr=R=>{Ss&&(Ls(Ss,Me,os),R&&(f({name:Ss,modifier:Me,description:os}),alert("Material saved to presets!")),as(""),fs(0),Ws(""))},Hr=(R,ne)=>{R.stopPropagation(),window.confirm(`Remove "${ne}" from presets?`)&&h(ne)},en=()=>{(J.packaging||[]).length>=3||je({...J,packaging:[...J.packaging||[],{id:`pack_${Date.now()}`,name:"",bulkCost:0,bulkQuantity:1,unitCost:0}]})},Gr=R=>{if(!R)return;const ne=o.find(ze=>ze.name===R);ne&&(J.packaging||[]).length<3&&je({...J,packaging:[...J.packaging||[],{...ne,id:`pack_${Date.now()}`}]})},wi=R=>{var ze;const ne=(ze=J.packaging)==null?void 0:ze[R];ne&&ne.name&&(u(ne),alert(`Saved "${ne.name}" to packaging presets!`))},fr=(R,ne,ze)=>{const _e=[...J.packaging||[]],Fe={..._e[R],[ne]:ze};if(ne==="bulkCost"||ne==="bulkQuantity"){const He=ne==="bulkCost"?parseFloat(ze):Fe.bulkCost,gt=ne==="bulkQuantity"?parseFloat(ze):Fe.bulkQuantity;Fe.unitCost=gt>0?He/gt:0}_e[R]=Fe,je({...J,packaging:_e})},Kr=R=>{const ne=[...J.packaging||[]];ne.splice(R,1),je({...J,packaging:ne})},Ln=((ue=J.packaging)==null?void 0:ue.reduce((R,ne)=>R+ne.unitCost,0))||0,H=(J.costPrice||0)+(J.shippingCost||0)+Ln,G=J.price-H,Z=(J.memberPrice||0)-H,re=Array.from(new Set(n.map(R=>R.category).filter(Boolean))),ge=Array.from(new Set(n.map(R=>We(R)).filter(Boolean))),Ke=n.filter(R=>{var ze;const ne=xe.toLowerCase();return(R.name.toLowerCase().includes(ne)||R.code.toLowerCase().includes(ne))&&(Ae?We(R)===Ae:!0)&&($e?R.category===$e:!0)&&(ht?(ze=R.colors)==null?void 0:ze.includes(ht):!0)&&(Ne?R.promoPrice&&R.promoPrice>0:!0)&&(yt?R.status===yt:!0)});return console.log("AdminProducts Debug:",{isLoading:k,productsCount:n.length,filteredProductsCount:Ke.length,dbConnectionError:y,firstProduct:n[0]?{id:n[0].id,name:n[0].name,images:n[0].images}:null}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Product Management"}),!_&&t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("button",{onClick:ps,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 shadow-lg transition-colors text-sm",children:[t.jsx(rn,{size:18})," Add Product"]})})]}),y&&t.jsxs("div",{className:"bg-yellow-900/20 border-l-4 border-yellow-500 text-yellow-300 p-3 rounded mb-4",children:[t.jsx("div",{className:"font-bold",children:"Supabase Warning"}),t.jsx("div",{className:"text-xs mt-1",children:y}),t.jsx("div",{className:"text-xs mt-1",children:"Changes may be saved locally only. Fix Supabase auth/permissions to persist remotely."})]}),!_&&t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[t.jsx(ca,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsx("input",{type:"text",placeholder:"Search by Name or SKU...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:xe,onChange:R=>q(R.target.value)})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ic,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:Ae,onChange:R=>Pe(R.target.value),children:[t.jsx("option",{value:"",children:"All Types"}),ge.map(R=>t.jsx("option",{value:R,children:ke(R)},R))]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(vI,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:$e,onChange:R=>tt(R.target.value),children:[t.jsx("option",{value:"",children:"All Collections"}),re.map(R=>t.jsx("option",{value:R,children:R},R))]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ic,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:ht,onChange:R=>qt(R.target.value),children:[t.jsx("option",{value:"",children:"All Colors"}),Array.from(new Set(n.flatMap(R=>R.colors||[]))).map(R=>t.jsx("option",{value:R,children:R},R))]})]}),t.jsxs("button",{onClick:()=>Qe(!Ne),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all flex items-center gap-2 ${Ne?"bg-green-900/30 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-400 hover:bg-zinc-800"}`,children:[t.jsx(oc,{size:16})," ",Ne?"Promotions Active":"Show Promotions"]}),t.jsxs("div",{className:"relative",children:[t.jsx(ic,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:yt,onChange:R=>Ut(R.target.value),children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"draft",children:"Draft"}),t.jsx("option",{value:"published",children:"Published"})]})]}),(xe||Ae||$e||ht||Ne||yt)&&t.jsx("button",{onClick:()=>{q(""),Pe(""),tt(""),qt(""),Qe(!1),Ut("")},className:"px-3 py-2 text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Reset Filters"})]}),_?t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:[t.jsx("div",{className:"flex border-b border-gray-800 bg-zinc-950/50 overflow-x-auto no-scrollbar",children:["general","pricing","media","inventory","marketing","reviews","promotions","gifts"].map(R=>t.jsx("button",{onClick:()=>$(R),className:`px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${I===R?"text-pink-500 border-b-2 border-pink-500 bg-pink-500/5":"text-gray-400 hover:text-white"}`,children:Nt(R)},R))}),t.jsxs("div",{className:"p-6",children:[I==="general"&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Name *"}),t.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm focus:border-pink-500",value:J.name,onChange:R=>je({...J,name:R.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"URL Slug"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.slug,onChange:R=>je({...J,slug:R.target.value}),placeholder:"product-name-url"}),t.jsx("button",{onClick:Dt,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:t.jsx(Cc,{size:16})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"SKU / Code"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.code,onChange:R=>je({...J,code:R.target.value}),placeholder:"SPV-001"}),t.jsx("button",{onClick:It,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:t.jsx(Cc,{size:16})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Status"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.status,onChange:R=>je({...J,status:R.target.value}),children:[t.jsx("option",{value:"draft",children:"Draft"}),t.jsx("option",{value:"published",children:"Published"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.category,onChange:R=>je({...J,category:R.target.value}),children:[t.jsx("option",{value:"",children:"Select Category"}),i.map(R=>t.jsx("option",{value:R.name,children:R.name},R.id))]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Type"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.type,onChange:R=>je({...J,type:R.target.value}),children:[t.jsx("option",{value:"Ring",children:"Rings"}),t.jsx("option",{value:"Stud",children:"Stud Earrings"}),t.jsx("option",{value:"Dangle",children:"Dangle Earrings"}),t.jsx("option",{value:"Pendant",children:"Pendants"}),t.jsx("option",{value:"Necklace",children:"Necklaces"}),t.jsx("option",{value:"Bracelet",children:"Bracelets"}),t.jsx("option",{value:"Watch",children:"Watches"}),t.jsx("option",{value:"Jewelry Box",children:"Jewelry Boxes"}),t.jsx("option",{value:"Perfume Holder",children:"Perfume Holders"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Made By"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.madeBy,onChange:R=>je({...J,madeBy:R.target.value}),children:[t.jsx("option",{value:"Spoil Me Vintage",children:"Spoil Me Vintage (Handmade)"}),t.jsx("option",{value:"Outsourced",children:"Outsourced"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Base Material"}),t.jsxs("div",{className:"bg-black/40 border border-gray-800 rounded-lg p-3",children:[t.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(R=>{const ne=Se().some(ze=>ze.toLowerCase()===R.toLowerCase());return t.jsx("button",{type:"button",onClick:()=>le(R),className:ne?"px-3 py-1.5 rounded-full text-xs font-bold border bg-cyan-600/20 border-cyan-500 text-cyan-200":"px-3 py-1.5 rounded-full text-xs font-medium border bg-zinc-900 border-gray-700 text-gray-300 hover:text-white hover:border-gray-500",title:ne?"Remove":"Add",children:t.jsxs("span",{className:"inline-flex items-center gap-1",children:[ne&&t.jsx(dt,{size:14}),R]})},R)})}),t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:A,onChange:R=>se(R.target.value),placeholder:"Add new material (saved)",onKeyDown:R=>{R.key==="Enter"&&(R.preventDefault(),be())}}),t.jsx("button",{type:"button",onClick:be,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-200 hover:text-white hover:bg-zinc-700 transition-colors",children:"Save"})]}),t.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Selected: ",Se().length?Se().join(", "):"None"]})]})]})]})]}),I==="pricing"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[t.jsx(ws,{size:18,className:"text-green-400"})," South African Rand (ZAR)"]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (R) *"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-green-400",value:J.price,onChange:R=>je({...J,price:parseFloat(R.target.value)||0})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>je({...J,priceUSD:parseFloat((J.price/29).toFixed(2))}),className:"flex-1 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded-lg",children:"Convert to USD"}),t.jsx("button",{onClick:()=>je({...J,priceUSD:0}),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold rounded-lg",children:"Reset USD"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Member Price (R)"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-purple-400",value:J.memberPrice||"",readOnly:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (R)"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.compareAtPrice||"",onChange:R=>je({...J,compareAtPrice:parseFloat(R.target.value)||0})})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[t.jsx(ws,{size:18,className:"text-yellow-400"})," United States Dollar (USD)"]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (USD) *"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-yellow-400",value:J.priceUSD,onChange:R=>je({...J,priceUSD:parseFloat(R.target.value)||0})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>je({...J,price:parseFloat((J.priceUSD*29).toFixed(2))}),className:"flex-1 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded-lg",children:"Convert to R"}),t.jsx("button",{onClick:()=>je({...J,price:0}),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold rounded-lg",children:"Reset R"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Member Price (USD)"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-purple-400",value:J.memberPriceUSD||"",readOnly:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (USD)"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.compareAtPriceUSD||"",onChange:R=>je({...J,compareAtPriceUSD:parseFloat(R.target.value)||0})})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 shadow-lg",children:[t.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 mb-4",children:[t.jsx(uI,{size:18,className:"text-cyan-400"})," Profit & Margins"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[t.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-red-900/30",children:[t.jsx("span",{className:"text-gray-400 block mb-1",children:"Total Unit Cost"}),t.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["R",H.toFixed(2)]}),t.jsxs("div",{className:"text-xs text-gray-500 mt-2 space-y-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Product:"})," ",t.jsxs("span",{children:["R",(J.costPrice||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Shipping:"})," ",t.jsxs("span",{children:["R",(J.shippingCost||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Packaging:"})," ",t.jsxs("span",{children:["R",Ln.toFixed(2)]})]})]})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-green-900/30",children:[t.jsx("span",{className:"text-gray-400 block mb-1",children:"Retail Profit"}),t.jsxs("div",{className:`text-2xl font-bold ${G>0?"text-green-400":"text-red-500"}`,children:["R",G.toFixed(2)]})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-purple-900/30",children:[t.jsx("span",{className:"text-gray-400 block mb-1",children:"Member Profit"}),t.jsxs("div",{className:`text-2xl font-bold ${Z>0?"text-purple-400":"text-red-500"}`,children:["R",Z.toFixed(2)]})]})]})]}),t.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[t.jsx(_c,{size:16,className:"text-pink-500"})," Packaging Breakdown"]}),t.jsxs("select",{className:"bg-zinc-800 text-xs text-gray-300 border border-gray-700 rounded px-2 py-1",onChange:R=>Gr(R.target.value),value:"",children:[t.jsx("option",{value:"",children:"Load Preset..."}),o.map((R,ne)=>t.jsxs("option",{value:R.name,children:[R.name," (R",R.unitCost.toFixed(2),")"]},ne))]})]}),(((me=J.packaging)==null?void 0:me.length)||0)<3&&t.jsxs("button",{onClick:en,className:"text-xs flex items-center gap-1 text-cyan-400 hover:text-cyan-300",children:[t.jsx(rn,{size:12})," Add Item"]})]}),t.jsx("div",{className:"space-y-3",children:(Le=J.packaging)==null?void 0:Le.map((R,ne)=>t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end bg-zinc-900 p-3 rounded border border-gray-800",children:[t.jsxs("div",{className:"md:col-span-3",children:[t.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Item Name"}),t.jsx("input",{type:"text",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:R.name,onChange:ze=>fr(ne,"name",ze.target.value)})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Cost (R)"}),t.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:R.bulkCost,onChange:ze=>fr(ne,"bulkCost",parseFloat(ze.target.value)||0)})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Qty"}),t.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:R.bulkQuantity,onChange:ze=>fr(ne,"bulkQuantity",parseFloat(ze.target.value)||0)})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Unit Cost"}),t.jsxs("div",{className:"w-full p-1.5 bg-zinc-800 border border-gray-700 rounded text-xs text-red-300 font-mono",children:["R",R.unitCost.toFixed(2)]})]}),t.jsxs("div",{className:"md:col-span-3 flex justify-end pb-1 gap-2",children:[t.jsx("button",{onClick:()=>wi(ne),className:"text-blue-400 hover:text-blue-300 bg-blue-900/20 p-1 rounded hover:bg-blue-900/40 transition-colors",title:"Save as Preset",children:t.jsx(ac,{size:16})}),t.jsx("button",{onClick:()=>Kr(ne),className:"text-gray-600 hover:text-red-400 p-1",children:t.jsx(Or,{size:16})})]})]},ne))})]})]}),I==="inventory"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Current Stock"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.stock,onChange:R=>je({...J,stock:parseInt(R.target.value)||0})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sold Count"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.soldCount,onChange:R=>je({...J,soldCount:parseInt(R.target.value)||0})})]}),t.jsxs("div",{className:"col-span-3",children:[t.jsxs("label",{className:"inline-flex items-center gap-2 mt-2",children:[t.jsx("input",{type:"checkbox",checked:!!J.isSoldOut,onChange:R=>{const ne=R.target.checked;je(ze=>({...ze,isSoldOut:ne,stock:ne?0:ze.stock}))},className:"form-checkbox h-4 w-4 text-red-600 bg-black border-gray-600"}),t.jsx("span",{className:"text-sm text-white font-bold",children:'Mark as "Sorry Just SOLD out!" (Persistent)'})]}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'When checked, this product will display a "Sorry Just SOLD out!" badge to customers regardless of stock. Only uncheck to make it available again.'})]})]}),J.type==="Ring"&&t.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[t.jsx("h3",{className:"text-sm font-bold text-white mb-3",children:"Ring Sizes"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.keys(ye.ringStock||{}).map(R=>{var ne;return t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:["Size ",R]}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded text-white text-sm",value:((ne=J.ringStock)==null?void 0:ne[R])||0,onChange:ze=>je({...J,ringStock:{...J.ringStock,[R]:parseInt(ze.target.value)||0}})})]},R)})})]}),(J.type==="Stud"||J.type==="Dangle")&&t.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("input",{type:"checkbox",id:"showEarringOptions",checked:J.showEarringOptions,onChange:R=>je({...J,showEarringOptions:R.target.checked}),className:"rounded bg-black border-gray-600 text-pink-600 focus:ring-pink-500"}),t.jsx("label",{htmlFor:"showEarringOptions",className:"text-sm font-bold text-white",children:"Enable Material Customization"})]}),J.showEarringOptions&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex gap-2 flex-wrap",children:On.map(R=>t.jsxs("div",{className:"group relative inline-flex",children:[t.jsxs("button",{onClick:()=>Ls(R.name,R.modifier,R.description),className:"text-xs bg-gray-800 hover:bg-gray-700 text-gray-300 px-2 py-1 rounded border border-gray-600",children:["+ ",R.name]}),c.some(ne=>ne.name===R.name)&&t.jsx("button",{onClick:ne=>Hr(ne,R.name),className:"absolute -top-1.5 -right-1.5 bg-red-600 text-white rounded-full p-0.5 w-3 h-3 flex items-center justify-center text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:"X"})]},R.name))}),t.jsx("div",{className:"space-y-2",children:(St=J.earringMaterials)==null?void 0:St.map((R,ne)=>t.jsxs("div",{className:"flex items-center gap-2 bg-black p-2 rounded border border-gray-800",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-white",children:R.name}),t.jsxs("span",{className:"text-xs text-pink-400",children:["+R",R.modifier]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:R.description})]}),t.jsx("button",{onClick:()=>vi(ne),className:"text-gray-600 hover:text-red-400",children:t.jsx(Or,{size:14})})]},ne))}),t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end pt-2 border-t border-gray-700",children:[t.jsx("div",{className:"col-span-3",children:t.jsx("input",{type:"text",placeholder:"Custom Material",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Ss,onChange:R=>as(R.target.value)})}),t.jsx("div",{className:"col-span-2",children:t.jsx("input",{type:"number",placeholder:"Price Mod",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Me,onChange:R=>fs(parseFloat(R.target.value)||0)})}),t.jsx("div",{className:"col-span-4",children:t.jsx("input",{type:"text",placeholder:"Description",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:os,onChange:R=>Ws(R.target.value)})}),t.jsxs("div",{className:"col-span-3 flex gap-1",children:[t.jsx("button",{onClick:()=>Wr(!1),className:"flex-1 p-1.5 bg-pink-600 text-white rounded text-xs flex items-center justify-center",title:"Add to Product",children:t.jsx(rn,{size:14})}),t.jsx("button",{onClick:()=>Wr(!0),className:"flex-1 p-1.5 bg-cyan-600 text-white rounded text-xs flex items-center justify-center",title:"Add & Save Preset",children:t.jsx(ac,{size:14})})]})]})]})]}),(J.type==="Pendant"||J.type==="Necklace")&&t.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Chain Styles"}),t.jsx("div",{className:"flex gap-2",children:["Metal Chain","Leather Cord","Ribbon"].map(R=>{var ne;return t.jsx("button",{onClick:()=>{var Fe,He;const _e=((Fe=J.chainStyles)==null?void 0:Fe.includes(R))?(He=J.chainStyles)==null?void 0:He.filter(gt=>gt!==R):[...J.chainStyles||[],R];je({...J,chainStyles:_e})},className:`px-3 py-1 rounded text-xs border ${(ne=J.chainStyles)!=null&&ne.includes(R)?"bg-cyan-900/50 border-cyan-500 text-cyan-400":"bg-black border-gray-700 text-gray-400"}`,children:R},R)})})]}),((lt=J.chainStyles)==null?void 0:lt.includes("Metal Chain"))&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Available Lengths"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(EO).map(R=>{var ne,ze;return t.jsxs("div",{onClick:()=>{const _e=J.pendantChainLengths||{};je({...J,pendantChainLengths:{..._e,[R]:!_e[R]}})},className:`p-2 rounded border cursor-pointer text-xs flex items-center justify-between ${(ne=J.pendantChainLengths)!=null&&ne[R]?"bg-green-900/20 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-500"}`,children:[t.jsx("span",{children:R}),((ze=J.pendantChainLengths)==null?void 0:ze[R])&&t.jsx(dt,{size:12})]},R)})})]})]})]}),I==="marketing"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[t.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[t.jsx(oc,{size:18,className:"text-cyan-400"})," Product Visibility & Features"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${J.isNewArrival?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[t.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${J.isNewArrival?"bg-cyan-500 border-cyan-500":"border-gray-600"}`,children:J.isNewArrival&&t.jsx(dt,{size:14,className:"text-black"})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:J.isNewArrival,onChange:R=>je({...J,isNewArrival:R.target.checked})}),t.jsx("span",{className:"text-sm font-bold text-white",children:"New Arrival"})]}),t.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${J.isBestSeller?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[t.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${J.isBestSeller?"bg-yellow-500 border-yellow-500":"border-gray-600"}`,children:J.isBestSeller&&t.jsx(dt,{size:14,className:"text-black"})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:J.isBestSeller,onChange:R=>je({...J,isBestSeller:R.target.checked})}),t.jsx("span",{className:"text-sm font-bold text-white",children:"Best Seller"})]}),t.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${J.isJewelrySet?"bg-purple-900/20 border-purple-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[t.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${J.isJewelrySet?"bg-purple-500 border-purple-500":"border-gray-600"}`,children:J.isJewelrySet&&t.jsx(dt,{size:14,className:"text-white"})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:J.isJewelrySet,onChange:R=>je({...J,isJewelrySet:R.target.checked})}),t.jsx("span",{className:"text-sm font-bold text-white",children:"Jewelry Set"})]})]}),t.jsx("h4",{className:"text-sm text-gray-400 font-bold mt-6 mb-3 uppercase tracking-wider",children:"Category Features"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedRing,onChange:R=>je({...J,isFeaturedRing:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Ring"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedBracelet,onChange:R=>je({...J,isFeaturedBracelet:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Bracelet"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isUniquePendant,onChange:R=>je({...J,isUniquePendant:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Unique Pendant"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedStud,onChange:R=>je({...J,isFeaturedStud:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Studs"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedDangle,onChange:R=>je({...J,isFeaturedDangle:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Dangles"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedWatch,onChange:R=>je({...J,isFeaturedWatch:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Watch"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedJewelryBox,onChange:R=>je({...J,isFeaturedJewelryBox:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Jewelry Box"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedPerfumeHolder,onChange:R=>je({...J,isFeaturedPerfumeHolder:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Perfume Holder"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Tags & SEO"}),t.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:J.tags.map((R,ne)=>t.jsxs("span",{className:"bg-gray-800 text-gray-300 text-xs px-2 py-1 rounded flex items-center gap-1",children:[R,t.jsx(us,{size:12,className:"cursor-pointer",onClick:()=>Gn("tags",ne)})]},ne))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:jt,onChange:R=>ft(R.target.value),onKeyDown:R=>R.key==="Enter"&&Vt("tags",jt,ft),placeholder:"Add tag..."}),t.jsx("button",{onClick:()=>Vt("tags",jt,ft),className:"bg-gray-800 p-2 rounded text-white",children:t.jsx(rn,{size:18})})]})]})]}),I==="reviews"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsxs("div",{className:"flex gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex-1 bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-500/30 p-5 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3 text-cyan-400 font-bold text-lg",children:[t.jsx(Qy,{size:24}),t.jsx("h3",{children:"AI South African Reviewer"})]}),t.jsxs("button",{onClick:Ct,disabled:D,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[D?t.jsx(Dr,{className:"animate-spin",size:18}):t.jsx(js,{size:18})," Generate Standard Reviews"]})]}),(J.isUniquePendant||J.type==="Pendant"||J.type==="Necklace")&&t.jsxs("div",{className:"flex-1 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/30 p-5 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3 text-purple-400 font-bold text-lg",children:[t.jsx(xI,{size:24}),t.jsx("h3",{children:"Unique Piece Reviewer"})]}),t.jsxs("button",{onClick:Et,disabled:D,className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[D?t.jsx(Dr,{className:"animate-spin",size:18}):t.jsx(js,{size:18})," Generate Unique Reviews"]})]})]}),t.jsx("div",{className:"space-y-3",children:(mt=J.reviews)==null?void 0:mt.map(R=>t.jsx("div",{className:"bg-black p-3 rounded border border-gray-800",children:ve===R.id&&de?t.jsxs("div",{className:"space-y-3 animate-in fade-in",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:de.userName,onChange:ne=>te({...de,userName:ne.target.value}),placeholder:"Name"}),t.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:de.location,onChange:ne=>te({...de,location:ne.target.value}),placeholder:"Location"}),t.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white col-span-2",value:de.date,onChange:ne=>te({...de,date:ne.target.value}),placeholder:"Date (YYYY-MM-DD or Text)"})]}),t.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(ne=>t.jsx(Rn,{size:16,className:"cursor-pointer",fill:ne<=de.rating?"orange":"none",stroke:ne<=de.rating?"orange":"gray",onClick:()=>te({...de,rating:ne})},ne))}),t.jsx("textarea",{className:"w-full bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",rows:3,value:de.content,onChange:ne=>te({...de,content:ne.target.value})}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>Y(null),className:"px-3 py-1 bg-zinc-800 text-white text-xs rounded hover:bg-zinc-700",children:"Cancel"}),t.jsx("button",{onClick:hr,className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-500",children:"Save"})]})]}):t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-300",children:[R.userName," ",t.jsxs("span",{className:"text-gray-600 font-normal",children:["from ",R.location]}),t.jsx("span",{className:"text-gray-500 font-normal ml-2",children:R.date})]}),t.jsx("div",{className:"flex text-yellow-400 gap-0.5 my-1",children:[1,2,3,4,5].map(ne=>t.jsx(Rn,{size:10,fill:ne<=R.rating?"currentColor":"none"},ne))}),t.jsxs("p",{className:"text-xs text-gray-400 italic",children:['"',R.content,'"']})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>hn(R),className:"p-2 text-gray-400 hover:text-cyan-400",children:t.jsx($p,{size:16})}),t.jsx("button",{onClick:()=>Lt(R.id),className:"p-2 text-gray-400 hover:text-red-400",children:t.jsx(Or,{size:16})})]})]})},R.id))})]}),I==="promotions"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[t.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Fr,{className:"text-green-400"}),t.jsx("div",{children:t.jsx("h3",{className:"text-lg font-bold text-white",children:"Retail Base Price"})})]}),t.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["R",J.price.toFixed(2)]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.jsx("div",{className:"space-y-8",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-4",children:[t.jsx(oc,{size:18,className:"text-cyan-400"})," Non-Member Promo"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Promotional Price (R)"}),t.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:J.promoPrice||"",onChange:R=>je({...J,promoPrice:parseFloat(R.target.value)||0})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Discount (%)"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white",value:((J.price-(J.promoPrice||0))/J.price*100).toFixed(0),readOnly:!0}),t.jsx(BN,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[t.jsx(cr,{size:12})," Start"]}),t.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((Jt=J.promoStartsAt)==null?void 0:Jt.slice(0,16))||"",onChange:R=>je({...J,promoStartsAt:R.target.value})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[t.jsx(cr,{size:12})," End"]}),t.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((kt=J.promoExpiresAt)==null?void 0:kt.slice(0,16))||"",onChange:R=>je({...J,promoExpiresAt:R.target.value})})]})]})]})})})]}),I==="gifts"&&t.jsx("div",{className:"space-y-6 animate-in fade-in",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(ds,{size:18,className:"text-pink-500"})," Promotional Gift"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Select Gift Product"}),t.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm",value:J.giftProductId||"",onChange:R=>je({...J,giftProductId:R.target.value}),children:[t.jsx("option",{value:"",children:"-- No Gift --"}),n.filter(R=>R.id!==J.id).map(R=>t.jsx("option",{value:R.id,children:R.name},R.id))]})]}),J.giftProductId&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Gift Value (R)"}),t.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:J.giftValue||"",onChange:R=>je({...J,giftValue:parseFloat(R.target.value)||0})})]})]})]})}),I==="media"&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 border border-pink-500/30 p-5 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3 text-pink-400 font-bold text-lg",children:[t.jsx(js,{size:20}),t.jsx("h3",{children:"AI Product Analyst"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("input",{type:"file",accept:"image/*",ref:oe,className:"hidden",onChange:we}),t.jsxs("button",{onClick:()=>{var R;return(R=oe.current)==null?void 0:R.click()},disabled:ee,className:"flex-1 py-3 bg-zinc-800 hover:bg-pink-600 text-white rounded-lg border border-gray-600 hover:border-pink-400 transition-all flex items-center justify-center gap-2 text-sm font-semibold disabled:opacity-50 shadow-lg",children:[ee?t.jsx(Dr,{className:"animate-spin",size:18}):t.jsx(pI,{size:18}),ee?"Analyzing Image...":"Upload & Analyze with AI"]})]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Description"}),t.jsxs("button",{onClick:ts,disabled:F,className:"text-xs text-cyan-400 flex items-center gap-1 hover:text-cyan-300",children:[t.jsx(Qy,{size:12})," ",F?"Writing...":"Generate from Text"]})]}),t.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-32 text-white text-sm",value:J.description,onChange:R=>je({...J,description:R.target.value})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"When & How to Wear"}),t.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-24 text-white text-sm",value:J.whenAndHowToWear,onChange:R=>je({...J,whenAndHowToWear:R.target.value}),placeholder:"Styling advice..."})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Images"}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-2",children:[J.images.filter(R=>R!=="").map((R,ne)=>t.jsxs("div",{className:"relative group aspect-square rounded-lg overflow-hidden border border-gray-800 bg-black",children:[t.jsx("img",{src:R,alt:"",className:"w-full h-full object-cover",onError:Qa}),t.jsx("button",{onClick:()=>un(ne),className:"absolute top-1 right-1 bg-black/60 hover:bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-all",children:t.jsx(us,{size:12})})]},ne)),t.jsxs("div",{onClick:()=>{var R;return(R=De.current)==null?void 0:R.click()},className:"aspect-square rounded-lg border border-dashed border-gray-700 bg-zinc-900/30 flex flex-col items-center justify-center text-gray-500 cursor-pointer hover:bg-zinc-800 hover:border-gray-500 transition-all",children:[t.jsx(rn,{size:24}),t.jsx("span",{className:"text-[10px] mt-1",children:"Add Image"})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:De,className:"hidden",onChange:Je}),t.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:Be,className:"hidden",onChange:Je}),t.jsxs("button",{onClick:()=>{var R;return(R=De.current)==null?void 0:R.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[t.jsx(yI,{size:16,className:"text-cyan-400"})," Upload"]}),t.jsxs("button",{onClick:()=>{var R;return(R=Be.current)==null?void 0:R.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[t.jsx(Ga,{size:16,className:"text-pink-500"})," Camera"]})]})]})]})]}),t.jsxs("div",{className:"p-4 border-t border-gray-800 bg-zinc-950 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Cancel"}),t.jsxs("button",{onClick:$t,disabled:L,className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2 shadow transition-colors text-sm font-semibold disabled:opacity-50",children:[L?t.jsx(Dr,{className:"animate-spin",size:18}):t.jsx(ac,{size:18})," ",L?"Saving...":"Save Product"]})]})]}):k?t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm p-8 text-center",children:[t.jsx(Dr,{className:"animate-spin mx-auto mb-4",size:32}),t.jsx("p",{className:"text-gray-400",children:"Loading products..."})]}):Ke.length===0?t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm p-8 text-center",children:[t.jsx(_c,{className:"mx-auto mb-4 text-gray-500",size:48}),t.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No products found"}),t.jsx("p",{className:"text-gray-500 mb-4",children:n.length===0?"No products have been loaded from the database yet.":"No products match your current filters."}),n.length===0&&t.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Check the browser console for any Supabase connection errors."}),t.jsxs("button",{onClick:ps,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 shadow-lg transition-colors mx-auto",children:[t.jsx(rn,{size:18})," Add First Product"]})]}):t.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:t.jsxs("table",{className:"w-full text-left text-sm",children:[t.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:"Product"}),t.jsx("th",{className:"p-4",children:"Type"}),t.jsx("th",{className:"p-4",children:"SKU"}),t.jsx("th",{className:"p-4",children:"Price (R)"}),t.jsx("th",{className:"p-4",children:"Price (USD)"}),t.jsx("th",{className:"p-4",children:"Stock"}),t.jsx("th",{className:"p-4",children:"Status"}),t.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:Ke.map(R=>t.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[t.jsxs("td",{className:"p-4 flex items-center gap-3",children:[t.jsx("img",{src:R.images[0]||"https://via.placeholder.com/40",className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:"",onError:Qa}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-200 block",children:R.name}),t.jsx("span",{className:"text-xs text-gray-500",children:R.category})]})]}),t.jsx("td",{className:"p-4 text-gray-400",children:ke(We(R))}),t.jsx("td",{className:"p-4 text-gray-500 font-mono text-xs",children:R.code}),t.jsxs("td",{className:"p-4 font-medium text-green-400",children:["R",R.price?R.price.toFixed(2):"0.00"]}),t.jsxs("td",{className:"p-4 font-medium text-yellow-400",children:["$ ",R.priceUSD?R.priceUSD.toFixed(2):"0.00"]}),t.jsx("td",{className:"p-4 text-gray-300",children:R.stock}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${R.status==="published"?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:R.status})}),t.jsx("td",{className:"p-4 text-right",children:t.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx("button",{onClick:()=>Os(R),className:"p-2 text-gray-400 hover:text-cyan-400",children:t.jsx($p,{size:16})}),t.jsx("button",{onClick:()=>ks(R.id),className:"p-2 text-gray-400 hover:text-red-400",children:t.jsx(Or,{size:16})})]})})]},R.id))})]})}),!_&&t.jsx("div",{className:"fixed right-6 bottom-6 z-50",children:t.jsx("button",{onClick:ps,title:"Add Product",className:"w-14 h-14 flex items-center justify-center rounded-full bg-pink-600 hover:bg-pink-500 text-white shadow-lg",children:t.jsx(rn,{size:20})})}),t.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/20 to-orange-900/20 border border-yellow-500/30 p-6 rounded-xl mt-6",children:[t.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[t.jsx(Ot,{size:18,className:"text-yellow-400"})," Manual Winner Override"]}),t.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Override the current week's winner for social proof notifications. Leave empty to use auto-generated winners."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Winner Name"}),t.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(N==null?void 0:N.name)||"",onChange:R=>T(N?{...N,name:R.target.value}:{name:R.target.value,prize:500,currency:"ZAR",rank:1}),placeholder:"e.g. John Doe"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prize Amount"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(N==null?void 0:N.prize)||"",onChange:R=>T(N?{...N,prize:parseFloat(R.target.value)||0}:{name:"",prize:parseFloat(R.target.value)||0,currency:"ZAR",rank:1}),placeholder:"500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Currency"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(N==null?void 0:N.currency)||"ZAR",onChange:R=>T(N?{...N,currency:R.target.value}:{name:"",prize:500,currency:R.target.value,rank:1}),children:[t.jsx("option",{value:"ZAR",children:"ZAR (R)"}),t.jsx("option",{value:"USD",children:"USD ($)"})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[t.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Clear Override"}),t.jsx("button",{onClick:()=>alert("Manual winner set!"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-500 transition-colors text-sm",children:"Set Winner"})]})]})]})},AO=()=>{const{categories:n,addCategory:e,updateCategory:s,deleteCategory:r,replaceCategories:i}=vt(),o=S.useRef({}),[c,u]=S.useState(null),f=(v,N)=>{const T=[...n],k=N==="up"?v-1:v+1;k>=0&&k<T.length&&([T[v],T[k]]=[T[k],T[v]],i(T))},h=async(v,N)=>{if(!N)return;try{u(v);const k=Date.now(),_=`categories/${v}/${k}_${N.name}`,P=await dm("categories",_,N),L=n.find(z=>z.id===v);L&&s({...L,image:P}),u(null);return}catch(k){console.warn("Supabase upload failed, falling back to base64:",k)}const T=new FileReader;T.onloadend=()=>{const k=n.find(_=>_.id===v);k&&typeof T.result=="string"&&s({...k,image:T.result}),u(null)},T.readAsDataURL(N)},y=()=>{e({id:`cat_${Date.now()}`,name:"New Collection",image:"https://picsum.photos/400/400?grayscale",description:""})};return t.jsxs("div",{className:"space-y-6 max-w-4xl",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Category Management"}),t.jsxs("button",{onClick:y,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 transition-colors text-sm",children:[t.jsx(rn,{size:18})," Add Category"]})]}),t.jsxs("div",{className:"space-y-4",children:[n.map((v,N)=>t.jsxs("div",{className:"flex items-center gap-4 bg-zinc-900 p-4 rounded-xl border border-gray-800 shadow-sm animate-in fade-in",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("button",{onClick:()=>f(N,"up"),disabled:N===0,className:`p-1 rounded hover:bg-gray-800 ${N===0?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:t.jsx(dI,{size:18})}),t.jsx("button",{onClick:()=>f(N,"down"),disabled:N===n.length-1,className:`p-1 rounded hover:bg-gray-800 ${N===n.length-1?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:t.jsx(cI,{size:18})})]}),t.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Collection Name"}),t.jsx("input",{type:"text",value:v.name,onChange:T=>s({...v,name:T.target.value}),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm focus:border-cyan-400 focus:outline-none"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative w-12 h-12",children:[t.jsx("img",{src:v.image,alt:v.name,className:`w-12 h-12 rounded object-cover bg-zinc-800 border border-gray-700 ${c===v.id?"opacity-50":""}`}),c===v.id&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(Dr,{size:16,className:"animate-spin text-pink-500"})})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Cover Image"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>{var T;return(T=o.current[v.id])==null?void 0:T.click()},disabled:c===v.id,className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-gray-200 text-xs rounded border border-gray-600 transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:c===v.id?"Uploading...":"Change Image"}),t.jsx("input",{type:"file",ref:T=>{o.current[v.id]=T},className:"hidden",accept:"image/*",onChange:T=>T.target.files&&h(v.id,T.target.files[0])})]})]})]})]}),t.jsx("div",{className:"ml-2",children:t.jsx("button",{onClick:()=>{window.confirm("Delete this category?")&&r(v.id)},className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-900/20 rounded-full transition-all",children:t.jsx(us,{size:20})})})]},v.id)),n.length===0&&t.jsx("div",{className:"text-center py-12 text-gray-500",children:'No categories found. Click "Add Category" to start.'})]})]})},IO=()=>{const{vouchers:n,addVoucher:e,deleteVoucher:s,cart:r,currency:i}=vt(),[o,c]=S.useState(10),[u,f]=S.useState(""),[h,y]=S.useState(""),[v,N]=S.useState(""),[T,k]=S.useState(""),[_,P]=S.useState(null),[L,z]=S.useState(!1),F=r.filter(D=>D.code==="GV-DIGITAL"),K=()=>{const D="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let C="";for(let I=0;I<12;I++)I>0&&I%4===0&&(C+="-"),C+=D.charAt(Math.floor(Math.random()*D.length));k(C)},ee=async()=>{if(!o||!T)return;z(!0);const D=o*29,C={code:T,discountType:"fixed",value:D,minSpend:D,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};if(e(C),h)try{const I=await Bs("users",{filters:{email:h},limit:1});if(I&&I.length>0){const $=I[0],O={id:`gift_recv_${Date.now()}`,type:"gift_received",title:"You received a Gift Voucher!",message:`Spoil Me Vintage sent you a voucher worth ${i==="ZAR"?"R":"$"}${i==="ZAR"?D:o}.`,date:new Date().toISOString(),isRead:!1,voucherData:{code:T,amount:D,meta:{recipientName:u||$.name||"Valued Customer",senderName:"Spoil Me Vintage Team",message:v||"Enjoy a little something special from us!",deliveryMethod:"recipient"}}};await Rr("notifications",{user_id:$.id||$.uid,...O}),alert(`Voucher created AND sent to ${h}!`)}else alert(`Voucher created, but user with email ${h} was not found. Please send the code manually.`)}catch(I){console.error("Error sending voucher:",I),alert("Voucher created, but failed to send to user due to an error.")}k(""),f(""),y(""),N(""),z(!1)},W=D=>{navigator.clipboard.writeText(D),P(D),setTimeout(()=>P(null),2e3)};return t.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Gift Card Management"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Generate valid codes and manage active vouchers."})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[F.length>0&&t.jsxs("div",{className:"bg-pink-900/10 border border-pink-500/30 p-4 rounded-xl mb-6",children:[t.jsxs("h3",{className:"text-pink-400 font-bold flex items-center gap-2 mb-3",children:[t.jsx(dl,{size:18})," Pending Requests (",F.length,")"]}),t.jsx("div",{className:"space-y-2",children:F.map((D,C)=>t.jsxs("div",{className:"bg-zinc-900 p-3 rounded-lg border border-pink-500/20 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-white text-sm font-medium",children:D.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Value: ",i==="ZAR"?"R":"$",i==="ZAR"?D.price:(D.price/29).toFixed(0)]})]}),t.jsx("button",{onClick:()=>{c(i==="ZAR"?D.price:D.price/29),f("Customer"),K()},className:"px-3 py-1.5 bg-pink-600 text-white text-xs rounded hover:bg-pink-500",children:"Process"})]},C))})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl shadow-sm",children:[t.jsxs("h2",{className:"font-bold text-white mb-6 flex items-center gap-2",children:[t.jsx(rn,{size:20,className:"text-cyan-400"})," Issue New Voucher"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Voucher Value (USD)"}),t.jsx("input",{type:"number",min:"10",max:"100",value:o,onChange:D=>c(parseFloat(D.target.value)),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white font-bold focus:border-cyan-400 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Recipient Name"}),t.jsx("input",{type:"text",value:u,onChange:D=>f(D.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white focus:border-cyan-400 outline-none",placeholder:"e.g. Sarah"})]})]}),t.jsxs("div",{className:"bg-black/30 border border-gray-700 rounded-xl p-4 mb-6",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(nh,{size:14})," Send Directly to User (Optional)"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"User Email Address"}),t.jsx("input",{type:"email",value:h,onChange:D=>y(D.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"user@example.com (Must be registered)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Custom Message"}),t.jsx("textarea",{rows:2,value:v,onChange:D=>N(D.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Enjoy your gift!"})]})]})]}),t.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 mb-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 w-full",children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Unique Voucher Code"}),t.jsx("div",{className:"font-mono text-2xl text-cyan-400 tracking-widest break-all",children:T||"XXXX-XXXX-XXXX"})]}),t.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors whitespace-nowrap",children:[t.jsx(Cc,{size:16})," Generate Number"]})]}),t.jsx("button",{onClick:ee,disabled:!T||L,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center justify-center gap-2",children:L?"Processing...":h?"Create & Send to User":"Activate Voucher Only"})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[t.jsx("h2",{className:"font-bold text-white mb-4",children:"Active Vouchers"}),n.length===0?t.jsx("p",{className:"text-gray-500 text-sm",children:"No active vouchers."}):t.jsx("div",{className:"space-y-3",children:n.map((D,C)=>t.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-gray-600 transition-colors",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-mono text-cyan-400 font-bold",children:D.code}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Value: ",i==="ZAR"?"R":"$",i==="ZAR"?D.value:(D.value/29).toFixed(0),"  Expires: ",new Date(D.expiresAt).toLocaleDateString()]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>W(D.code),className:"p-2 text-gray-500 hover:text-white",children:_===D.code?t.jsx(dt,{size:16,className:"text-green-400"}):t.jsx(sh,{size:16})}),t.jsx("button",{onClick:()=>s(D.code),className:"p-2 text-gray-500 hover:text-red-400",children:t.jsx(Or,{size:16})})]})]},C))})]})]}),t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"sticky top-6",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[t.jsx(Nc,{size:16})," Card Preview"]}),t.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),t.jsxs("div",{className:"relative h-full p-6 flex flex-col justify-between z-10",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("div",{className:"font-cherry text-xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400",children:"Spoil Me Vintage"}),t.jsxs("div",{className:"text-3xl font-bold text-white font-architects",children:[i==="ZAR"?"R":"$",i==="ZAR"?(o*29).toFixed(0):o]})]}),t.jsxs("div",{className:"text-center my-auto",children:[t.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-[0.3em] mb-2",children:"VOUCHER CODE"}),t.jsx("div",{className:"bg-white/5 border border-white/10 rounded px-4 py-2 inline-block backdrop-blur-sm",children:t.jsx("span",{className:"font-mono text-xl md:text-2xl font-bold text-cyan-400 tracking-wider",children:T||"--"})})]}),t.jsxs("div",{className:"flex justify-between items-end text-[10px] text-gray-500 uppercase tracking-wider",children:[t.jsxs("div",{children:["To: ",u||"Valued Customer",t.jsx("div",{className:"font-handwriting text-lg text-gray-300 normal-case mt-1",children:"Admin Team"})]}),t.jsxs("div",{className:"text-right",children:["Valid for 3 Years",t.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date().toLocaleDateString()})]})]})]})]}),t.jsxs("div",{className:"mt-6 bg-zinc-900/50 p-4 rounded-xl border border-gray-800 text-sm text-gray-400",children:[t.jsx("p",{className:"mb-2 font-bold text-white",children:"Sending Instructions:"}),t.jsxs("ul",{className:"list-disc pl-4 space-y-2 text-xs",children:[t.jsx("li",{children:"Set the Value and generate a unique code."}),t.jsxs("li",{children:[t.jsx("strong",{children:"Option A (Manual):"}),' Click "Activate Voucher Only", then send the code via WhatsApp/Email manually.']}),t.jsxs("li",{children:[t.jsx("strong",{children:"Option B (Direct):"}),` Enter the user's Registered Email. The voucher will appear in their App Profile under "My Gifts".`]})]})]})]})})]})]})},RO=[{id:"fb",name:"Facebook",icon:"facebook",isConnected:!1,accountName:"",urlTemplate:"https://www.facebook.com/sharer/sharer.php?u={url}&quote={text}"},{id:"ig",name:"Instagram",icon:"instagram",isConnected:!1,accountName:"",urlTemplate:""},{id:"tk",name:"TikTok",icon:"video",isConnected:!1,accountName:"",urlTemplate:""},{id:"x",name:"X (Twitter)",icon:"twitter",isConnected:!1,accountName:"",urlTemplate:"https://twitter.com/intent/tweet?text={text}&url={url}"}],DO={fb:["Log in to your Facebook Brand Page in your browser or app.","Enter your Page Name below for the AI context.","When you click 'Post Now', we will open the Facebook Sharer tool.","Paste the caption we generate for you."],ig:["Ensure the Instagram App is installed on this device.","Enter your Instagram Handle (@name) below.","When you click 'Post Now', we will copy the caption to your clipboard.","We will then open Instagram. Create a new post and select the downloaded photo.","Long press in the caption box and select 'Paste'."],tk:["Ensure the TikTok App is installed.","Enter your Handle below.","We will copy the text and hashtags to your clipboard.","When TikTok opens, upload the video/photo and paste the caption."],x:["Log in to X (Twitter).","Enter your handle below.","We will automatically open a 'Compose Tweet' window with your text and link pre-filled."]},MO=()=>{var $;const{products:n}=vt(),[e,s]=S.useState(RO),[r,i]=S.useState(!1),[o,c]=S.useState(null),[u,f]=S.useState(""),[h,y]=S.useState(null),[v,N]=S.useState({}),[T,k]=S.useState(null),[_,P]=S.useState(!1),[L,z]=S.useState([]),[F,K]=S.useState({posts:0,errors:0});S.useEffect(()=>{const O=localStorage.getItem("spv_social_config");O&&s(JSON.parse(O))},[]),S.useEffect(()=>{let O;return _&&(O=setInterval(()=>{if(n.length===0)return;const V=n[Math.floor(Math.random()*n.length)],A=e.filter(Se=>Se.isConnected),se=A.length>0?A[Math.floor(Math.random()*A.length)]:e[Math.floor(Math.random()*e.length)],fe=new Date().toLocaleTimeString();z(Se=>[{time:fe,msg:`AI Worker: Analyzing "${V.name}" trends & hashtags...`,type:"process"},...Se].slice(0,6)),setTimeout(()=>{const Se=new Date().toLocaleTimeString();z(Ie=>[{time:Se,msg:`Server: Successfully scheduled post to ${se.name} (Simulated)`,type:"success"},...Ie].slice(0,6)),K(Ie=>({...Ie,posts:Ie.posts+1}))},2e3)},5e3)),()=>clearInterval(O)},[_,n,e]);const ee=O=>{c(O),f(O.accountName||"")},W=()=>{if(!o)return;const O=e.map(V=>V.id===o.id?{...V,isConnected:!0,accountName:u}:V);s(O),localStorage.setItem("spv_social_config",JSON.stringify(O)),c(null)},D=O=>{const V=e.map(A=>A.id===O?{...A,isConnected:!1,accountName:""}:A);s(V),localStorage.setItem("spv_social_config",JSON.stringify(V))},C=async()=>{if(n.length===0)return;i(!0);const O=n[Math.floor(Math.random()*n.length)];y(O);const V={},A=e.filter(se=>se.isConnected);if(A.length===0){alert("Please connect at least one platform first."),i(!1);return}for(const se of A){const fe=se.accountName?`(Account: @${se.accountName})`:"";V[se.id]=await CO(O.name,`${se.name} ${fe}`,O.price)}N(V),i(!1)},I=O=>{const V=v[O.id];if(!V||!h)return;const A=`${window.location.origin}/#/product/${h.id}`;if(navigator.clipboard.writeText(`${V} ${A}`).then(()=>{k(O.id),setTimeout(()=>k(null),2e3)}),O.id==="fb"||O.id==="x"){const se=O.urlTemplate.replace("{url}",encodeURIComponent(A)).replace("{text}",encodeURIComponent(V));window.open(se,"_blank","width=600,height=400")}else alert("Caption copied! Opening platform..."),O.id==="ig"&&window.open("https://instagram.com","_blank"),O.id==="tk"&&window.open("https://tiktok.com","_blank")};return t.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[o&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>c(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[t.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.id==="fb"&&t.jsx(rc,{size:24,className:"text-blue-500"}),o.id==="ig"&&t.jsx(cp,{size:24,className:"text-pink-500"}),o.id==="x"&&t.jsx(pu,{size:24,className:"text-white"}),o.id==="tk"&&t.jsx(Ga,{size:24,className:"text-cyan-400"}),"Connect ",o.name]}),t.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:t.jsx(us,{size:20})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 uppercase mb-1",children:"Account Handle / Name"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"@"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 pl-8 text-white focus:border-pink-500 outline-none",value:u,onChange:O=>f(O.target.value),placeholder:"spoilmevintage"})]})]}),t.jsxs("div",{className:"bg-black/30 p-4 rounded-lg border border-gray-800",children:[t.jsxs("h4",{className:"text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[t.jsx(UN,{size:14})," How to connect:"]}),t.jsx("ul",{className:"space-y-2",children:($=DO[o.id])==null?void 0:$.map((O,V)=>t.jsxs("li",{className:"text-xs text-gray-400 flex gap-2",children:[t.jsx("span",{className:"bg-gray-800 w-4 h-4 rounded-full flex items-center justify-center text-[10px] shrink-0 mt-0.5",children:V+1}),O]},V))})]}),t.jsxs("button",{onClick:W,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl flex items-center justify-center gap-2 transition-colors",children:[t.jsx(ac,{size:18})," Save & Connect"]})]})]})]}),t.jsx("div",{className:"flex justify-between items-start",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Social Media Studio"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage accounts and automate daily content sharing."})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:e.map(O=>t.jsxs("div",{className:`p-4 rounded-xl border transition-all relative group ${O.isConnected?"bg-zinc-900 border-green-500/50 shadow-[0_0_10px_rgba(34,197,94,0.1)]":"bg-black border-gray-800 opacity-75"}`,children:[t.jsx("button",{onClick:()=>ee(O),className:"absolute top-2 right-2 p-2 text-gray-500 hover:text-white hover:bg-gray-800 rounded-full transition-colors",children:t.jsx(Vp,{size:16})}),t.jsxs("div",{className:"flex flex-col items-center text-center pt-4 pb-2 cursor-pointer",onClick:()=>ee(O),children:[t.jsxs("div",{className:`p-3 rounded-full mb-3 transition-colors ${O.isConnected?"bg-white text-black":"bg-gray-800 text-gray-500"}`,children:[O.id==="fb"&&t.jsx(rc,{size:24}),O.id==="ig"&&t.jsx(cp,{size:24}),O.id==="x"&&t.jsx(pu,{size:24}),O.id==="tk"&&t.jsx(Ga,{size:24})]}),t.jsx("h3",{className:"font-bold text-white text-sm",children:O.name}),O.isConnected?t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t.jsxs("p",{className:"text-xs text-green-400 font-medium",children:["@",O.accountName]})]}):t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Not Connected"})]}),O.isConnected&&t.jsx("button",{onClick:V=>{V.stopPropagation(),D(O.id)},className:"w-full mt-3 py-1 text-[10px] text-red-400 hover:text-red-300 border border-red-900/30 hover:bg-red-900/20 rounded",children:"Disconnect"}),!O.isConnected&&t.jsx("button",{onClick:()=>ee(O),className:"w-full mt-3 py-1 text-[10px] text-cyan-400 hover:text-cyan-300 border border-cyan-900/30 hover:bg-cyan-900/20 rounded",children:"Configure"})]},O.id))}),t.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-500/30 rounded-2xl p-6 md:p-8 shadow-xl relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:t.jsx(DI,{size:120,className:"text-purple-500"})}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 relative z-10",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:`p-2 rounded-lg ${_?"bg-green-500/20 text-green-400":"bg-gray-800 text-gray-500"}`,children:t.jsx(kI,{size:24})}),t.jsx("h2",{className:"text-xl font-bold text-white",children:"Background Auto-Pilot (Demo)"})]}),t.jsx("p",{className:"text-sm text-gray-400 max-w-lg",children:"Enable this to simulate the server-side process that automatically picks products, writes captions, and schedules them to your connected accounts while you sleep."}),_&&t.jsxs("div",{className:"flex items-center gap-2 mt-4 text-xs text-green-400 font-mono bg-green-900/20 border border-green-500/30 px-3 py-1.5 rounded-lg w-fit animate-pulse",children:[t.jsx(oI,{size:14})," Service Running..."]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right hidden md:block",children:[t.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:F.posts}),t.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Posts Queued"})]}),t.jsxs("button",{onClick:()=>P(!_),className:`px-6 py-4 rounded-xl font-bold flex items-center gap-2 transition-all shadow-lg ${_?"bg-red-600 hover:bg-red-500 text-white shadow-red-900/20":"bg-purple-600 hover:bg-purple-500 text-white shadow-purple-900/20"}`,children:[_?t.jsx(jI,{size:20,fill:"currentColor"}):t.jsx(SI,{size:20,fill:"currentColor"}),_?"Stop Simulation":"Start Auto-Pilot"]})]})]}),t.jsxs("div",{className:"mt-8 bg-black rounded-xl border border-gray-800 font-mono text-xs p-4 h-48 overflow-y-auto shadow-inner relative",children:[t.jsxs("div",{className:"absolute top-2 right-2 text-gray-700 flex items-center gap-1 pointer-events-none",children:[t.jsx(TI,{size:14})," Console"]}),L.length===0?t.jsx("div",{className:"h-full flex items-center justify-center text-gray-600 italic",children:"System Idle. Press Start to begin simulation."}):t.jsx("div",{className:"space-y-2",children:L.map((O,V)=>t.jsxs("div",{className:"flex gap-3 animate-in slide-in-from-left-2 fade-in duration-300",children:[t.jsxs("span",{className:"text-gray-600 shrink-0",children:["[",O.time,"]"]}),t.jsxs("span",{className:`break-all ${O.type==="success"?"text-green-400":O.type==="process"?"text-yellow-400":"text-gray-300"}`,children:[O.type==="success"&&t.jsx(dt,{size:12,className:"inline mr-1"}),O.type==="process"&&t.jsx(Dr,{size:12,className:"inline mr-1 animate-spin"}),O.msg]})]},V))})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 md:p-8 shadow-xl",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 mb-8",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(js,{className:"text-pink-500"})," Manual Content Generator"]}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"One click to pick a product and write tailored captions for all your active platforms."})]}),t.jsxs("button",{onClick:C,disabled:r,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg flex items-center gap-2 disabled:opacity-50 transition-all",children:[r?t.jsx(Dr,{className:"animate-spin"}):t.jsx(Cc,{}),r?"Creating Strategy...":"Generate Today's Posts"]})]}),h&&t.jsxs("div",{className:"animate-in slide-in-from-bottom-4 fade-in",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6 bg-black p-4 rounded-xl border border-gray-800",children:[t.jsx("img",{src:h.images[0],alt:"",className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-pink-500 uppercase font-bold",children:"Today's Pick"}),t.jsx("h3",{className:"text-white font-bold",children:h.name}),t.jsxs("p",{className:"text-gray-400 text-xs",children:["R",h.price]})]}),t.jsx("div",{className:"ml-auto hidden md:block",children:t.jsxs("a",{href:h.images[0],download:!0,target:"_blank",rel:"noreferrer",className:"text-xs text-cyan-400 flex items-center gap-1 hover:underline",children:[t.jsx(bI,{size:14})," Download High-Res"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.filter(O=>O.isConnected).map(O=>t.jsxs("div",{className:"bg-black border border-gray-800 p-4 rounded-xl space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800 pb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-300",children:[O.id==="fb"&&t.jsx(rc,{size:16,className:"text-blue-500"}),O.id==="ig"&&t.jsx(cp,{size:16,className:"text-pink-500"}),O.id==="x"&&t.jsx(pu,{size:16,className:"text-white"}),O.id==="tk"&&t.jsx(Ga,{size:16,className:"text-cyan-400"}),O.name," Draft"]}),t.jsxs("button",{onClick:()=>I(O),className:"text-xs bg-zinc-800 hover:bg-pink-600 text-white px-3 py-1.5 rounded-full transition-colors flex items-center gap-1",children:[T===O.id?t.jsx(dt,{size:12}):t.jsx(il,{size:12}),T===O.id?"Copied!":"Post Now"]})]}),t.jsx("textarea",{className:"w-full h-32 bg-transparent text-sm text-gray-300 resize-none focus:outline-none",value:v[O.id]||"Generating...",readOnly:!0})]},O.id))})]}),!h&&!r&&t.jsx("div",{className:"text-center py-12 border border-dashed border-gray-800 rounded-xl",children:t.jsx("p",{className:"text-gray-500",children:'Click "Generate" to start your daily social media workflow.'})})]}),t.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-xl p-6",children:[t.jsxs("h3",{className:"text-blue-400 font-bold flex items-center gap-2 mb-3",children:[t.jsx(eh,{size:20})," System Capabilities Explained"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-gray-300",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white mb-2",children:"What this system CAN do:"}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[t.jsx("li",{children:"Use AI to generate unique, platform-specific captions for your products instantly."}),t.jsx("li",{children:"Organize your daily posting workflow into a single dashboard."}),t.jsx("li",{children:'Use "Web Intents" to open your social apps with text pre-filled (semi-automated).'}),t.jsxs("li",{children:[t.jsx("strong",{children:"Demo Simulation:"})," As seen above, we can simulate how a server-side bot would process your queue."]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white mb-2",children:"What requires Server Upgrades:"}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Fully Automated Background Posting:"}),' To enable the "Auto-Pilot" feature for real (posting while you sleep), a dedicated backend server (e.g., Firebase Cloud Functions) is required to run timers (Cron jobs).']}),t.jsxs("li",{children:[t.jsx("strong",{children:"Direct API Integration:"})," Posting directly without opening the app requires expensive API approvals and secure server-side token storage which cannot run safely in a browser-only admin panel."]})]})]})]})]})]})},OO=()=>{var Qe,yt,Ut;const{getAllUsers:n,approveAffiliate:e,rejectAffiliate:s,updateAffiliateTier:r,assignAffiliateParent:i}=vt(),[o,c]=S.useState([]),[u,f]=S.useState(!0),[h,y]=S.useState("applicants"),[v,N]=S.useState("overview"),[T,k]=S.useState("domestic"),[_,P]=S.useState(18.2),[L,z]=S.useState(.055),[F,K]=S.useState(""),[ee,W]=S.useState("all"),[D,C]=S.useState({bronze:10,silver:11,gold:15,platinum:20,vault:1}),[I,$]=S.useState({zar:{spoilMe:2,basic:5,premium:10,deluxe:15},usd:{insider:1,gold:2,deluxe:3}}),[O,V]=S.useState({sprinter:{zar:50,usd:5},bigSpender:{zar:200,usd:15}}),[A,se]=S.useState(null),[fe,Se]=S.useState(10),[Ie,le]=S.useState(""),[be,ve]=S.useState(null),[Y,de]=S.useState("");S.useEffect(()=>{te()},[]);const te=async()=>{f(!0);const oe=await n();c(oe),f(!1)};o.filter(oe=>{var De;return((De=oe.affiliateStats)==null?void 0:De.status)==="pending"});const xe=o.filter(oe=>{var De;return((De=oe.affiliateStats)==null?void 0:De.status)==="approved"}),q=async()=>{be&&(be.action==="approve"?await e(be.userId,Y):await s(be.userId,Y),ve(null),de(""),te())},Ae=oe=>{var De;se(oe),Se(((De=oe.affiliateStats)==null?void 0:De.commissionRate)||10),le("")},Pe=async()=>{if(!A)return;await r(A.id,fe);const oe={...A,affiliateStats:{...A.affiliateStats,commissionRate:fe}};se(oe),c(De=>De.map(Be=>Be.id===A.id?oe:Be)),alert("Commission Tier Updated!")},$e=async()=>{if(!A||!Ie)return;await i(Ie,A.id),alert("Recruit Added! This affiliate will now earn 1% commission from their sales.");const oe=await n();c(oe);const De=oe.find(Be=>Be.id===A.id);De&&se(De),le("")},tt=A?o.filter(oe=>{var De;return((De=oe.affiliateStats)==null?void 0:De.parentId)===A.id}):[],ht=(Qe=A==null?void 0:A.affiliateStats)!=null&&Qe.parentId?o.find(oe=>{var De;return oe.id===((De=A.affiliateStats)==null?void 0:De.parentId)}):null,Ne=tt.reduce((oe,De)=>{var Be;return oe+(((Be=De.affiliateStats)==null?void 0:Be.totalSalesValue)||0)},0)*.01;return t.jsxs("div",{className:"space-y-8 relative",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Affiliate Manager"}),t.jsxs("button",{onClick:te,className:"text-xs text-gray-400 hover:text-white flex items-center gap-1",children:[t.jsx(ca,{size:14})," Refresh Data"]})]}),t.jsx("div",{className:"flex gap-2 border-b border-gray-800 pb-2 overflow-x-auto",children:[{key:"overview",label:"Dashboard Overview",icon:Tc},{key:"payouts",label:"Payout Manager",icon:ws},{key:"partners",label:"Partner List",icon:qs},{key:"settings",label:"Settings & Variables",icon:Vp},{key:"validator",label:"Commission Validator",icon:mi}].map(({key:oe,label:De,icon:Be})=>t.jsxs("button",{onClick:()=>N(oe),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors whitespace-nowrap flex items-center gap-2 ${v===oe?"border-yellow-500 text-yellow-500":"border-transparent text-gray-400 hover:text-white"}`,children:[t.jsx(Be,{size:16})," ",De]},oe))}),v==="overview"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:t.jsx(ws,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Pending Payouts (ZAR)"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Ready for EFT"})]})]}),t.jsxs("p",{className:"text-3xl font-bold text-green-400",children:["R",xe.filter(oe=>{var De;return(((De=oe.affiliateStats)==null?void 0:De.balance)||0)>200}).reduce((oe,De)=>{var Be;return oe+(((Be=De.affiliateStats)==null?void 0:Be.balance)||0)},0).toFixed(0)]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:t.jsx(ws,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Pending Payouts (USD)"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Ready for PayPal"})]})]}),t.jsxs("p",{className:"text-3xl font-bold text-blue-400",children:["$",xe.filter(oe=>{var De;return(((De=oe.affiliateStats)==null?void 0:De.balance)||0)>50}).reduce((oe,De)=>{var Be;return oe+(((Be=De.affiliateStats)==null?void 0:Be.balance)||0)},0).toFixed(0)]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:t.jsx(Rn,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Top Vault Movers"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Most vault sales"})]})]}),t.jsx("p",{className:"text-3xl font-bold text-purple-400",children:xe.reduce((oe,De)=>{var Be;return Math.max(oe,((Be=De.affiliateStats)==null?void 0:Be.totalSalesCount)||0)},0)}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Items sold"})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-cyan-900/20 rounded-lg text-cyan-400",children:t.jsx(qs,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Total Partners"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Active affiliates"})]})]}),t.jsx("p",{className:"text-3xl font-bold text-cyan-400",children:xe.length})]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("button",{onClick:()=>N("payouts"),className:"p-4 bg-green-900/20 border border-green-500/30 rounded-lg hover:bg-green-900/30 transition-colors text-left",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(ws,{size:20,className:"text-green-400"}),t.jsx("span",{className:"text-green-400 font-bold",children:"Process Payouts"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:"Manage EFT and PayPal payments"})]}),t.jsxs("button",{onClick:()=>N("partners"),className:"p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg hover:bg-blue-900/30 transition-colors text-left",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(qs,{size:20,className:"text-blue-400"}),t.jsx("span",{className:"text-blue-400 font-bold",children:"Manage Partners"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:"Review applications and tiers"})]}),t.jsxs("button",{onClick:()=>N("validator"),className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg hover:bg-red-900/30 transition-colors text-left",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(mi,{size:20,className:"text-red-400"}),t.jsx("span",{className:"text-red-400 font-bold",children:"Validate Commissions"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:"Check for errors and anomalies"})]})]})]})]}),v==="payouts"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex gap-4 border-b border-gray-800 pb-2",children:[t.jsxs("button",{onClick:()=>k("domestic"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${T==="domestic"?"border-green-500 text-green-500":"border-transparent text-gray-400 hover:text-white"}`,children:[t.jsx(MN,{size:16})," Domestic EFT (ZAR)"]}),t.jsxs("button",{onClick:()=>k("international"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${T==="international"?"border-blue-500 text-blue-500":"border-transparent text-gray-400 hover:text-white"}`,children:[t.jsx(ws,{size:16})," International PayPal (USD)"]})]}),T==="domestic"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Exchange Rate Settings"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("label",{className:"text-sm text-gray-400",children:"USD to ZAR Rate:"}),t.jsx("input",{type:"number",step:"0.01",value:_,onChange:oe=>P(parseFloat(oe.target.value)),className:"bg-black border border-gray-600 rounded p-2 text-white text-sm w-24"}),t.jsx("span",{className:"text-gray-500",children:"(Today's rate for conversion)"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Domestic Payout Queue"}),t.jsx("p",{className:"text-sm text-gray-400",children:"South African affiliates with balances > R200"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-black/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Bank"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"ZAR Earned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"USD Earned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Final Payout (ZAR)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Action"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:xe.filter(oe=>{var De;return(((De=oe.affiliateStats)==null?void 0:De.balance)||0)>200}).map(oe=>{var We;const De=((We=oe.affiliateStats)==null?void 0:We.balance)||0,Be=0,ke=De+Be*_;return t.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold",children:oe.name}),t.jsx("p",{className:"text-gray-400 text-sm",children:oe.email})]})}),t.jsx("td",{className:"px-6 py-4 text-gray-300",children:"FNB"}),t.jsxs("td",{className:"px-6 py-4 text-green-400 font-bold",children:["R",De.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 text-blue-400",children:["$",Be.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 text-yellow-400 font-bold",children:["R",ke.toFixed(2)]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("button",{className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-500",children:"Mark Paid"})})]},oe.id)})})]})}),t.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-between items-center",children:[t.jsxs("div",{className:"text-sm text-gray-400",children:[xe.filter(oe=>{var De;return(((De=oe.affiliateStats)==null?void 0:De.balance)||0)>200}).length," partners ready for payout"]}),t.jsxs("button",{className:"px-6 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-500 flex items-center gap-2",children:[t.jsx(jc,{size:18})," Download FNB/STD Bank Batch File"]})]})]})]}),T==="international"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Exchange Rate Settings"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("label",{className:"text-sm text-gray-400",children:"ZAR to USD Rate:"}),t.jsx("input",{type:"number",step:"0.0001",value:L,onChange:oe=>z(parseFloat(oe.target.value)),className:"bg-black border border-gray-600 rounded p-2 text-white text-sm w-24"}),t.jsx("span",{className:"text-gray-500",children:"(Today's rate for conversion)"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"International Payout Queue"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Non-SA affiliates with balances > $50"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-black/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"PayPal Email"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"USD Earned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"ZAR Earned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Final Payout (USD)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Action"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:xe.filter(oe=>{var De;return(((De=oe.affiliateStats)==null?void 0:De.balance)||0)>50}).map(oe=>{var We;const De=((We=oe.affiliateStats)==null?void 0:We.balance)||0,Be=0,ke=De+Be*L;return t.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold",children:oe.name}),t.jsx("p",{className:"text-gray-400 text-sm",children:oe.email})]})}),t.jsx("td",{className:"px-6 py-4 text-gray-300",children:oe.email}),t.jsxs("td",{className:"px-6 py-4 text-blue-400 font-bold",children:["$",De.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 text-green-400",children:["R",Be.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 text-yellow-400 font-bold",children:["$",ke.toFixed(2)]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-500",children:"Mark Paid"})})]},oe.id)})})]})}),t.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-between items-center",children:[t.jsxs("div",{className:"text-sm text-gray-400",children:[xe.filter(oe=>{var De;return(((De=oe.affiliateStats)==null?void 0:De.balance)||0)>50}).length," partners ready for payout"]}),t.jsxs("button",{className:"px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-500 flex items-center gap-2",children:[t.jsx(jc,{size:18})," Export PayPal Mass Pay CSV"]})]})]})]})]}),v==="partners"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Search Partners"}),t.jsx("input",{type:"text",placeholder:"Name, email, or code...",value:F,onChange:oe=>K(oe.target.value),className:"w-full bg-black border border-gray-600 rounded p-3 text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Filter by Tier"}),t.jsxs("select",{value:ee,onChange:oe=>W(oe.target.value),className:"bg-black border border-gray-600 rounded p-3 text-white min-w-[150px]",children:[t.jsx("option",{value:"all",children:"All Tiers"}),t.jsx("option",{value:"bronze",children:"Bronze (10%)"}),t.jsx("option",{value:"silver",children:"Silver (11%)"}),t.jsx("option",{value:"gold",children:"Gold (15%)"}),t.jsx("option",{value:"platinum",children:"Platinum (20%)"})]})]})]})}),t.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-black/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Current Tier"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Sales (This Month)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Vault Sales"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:xe.filter(oe=>{var De,Be,ke,We;return(F===""||oe.name.toLowerCase().includes(F.toLowerCase())||oe.email.toLowerCase().includes(F.toLowerCase())||oe.affiliateCode.toLowerCase().includes(F.toLowerCase()))&&(ee==="all"||ee==="bronze"&&((De=oe.affiliateStats)==null?void 0:De.commissionRate)===10||ee==="silver"&&((Be=oe.affiliateStats)==null?void 0:Be.commissionRate)===11||ee==="gold"&&((ke=oe.affiliateStats)==null?void 0:ke.commissionRate)===15||ee==="platinum"&&((We=oe.affiliateStats)==null?void 0:We.commissionRate)===20)}).map(oe=>{var De,Be,ke,We,Nt,ye,J,je;return t.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center text-cyan-400 font-bold",children:oe.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold",children:oe.name}),t.jsx("p",{className:"text-gray-400 text-sm",children:oe.email})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${((De=oe.affiliateStats)==null?void 0:De.commissionRate)===20?"bg-yellow-900/30 text-yellow-400 border border-yellow-500/30":((Be=oe.affiliateStats)==null?void 0:Be.commissionRate)===15?"bg-purple-900/30 text-purple-400 border border-purple-500/30":((ke=oe.affiliateStats)==null?void 0:ke.commissionRate)===11?"bg-gray-900/30 text-gray-400 border border-gray-500/30":"bg-orange-900/30 text-orange-400 border border-orange-500/30"}`,children:[((We=oe.affiliateStats)==null?void 0:We.commissionRate)===20?" Gold":((Nt=oe.affiliateStats)==null?void 0:Nt.commissionRate)===15?" Silver":((ye=oe.affiliateStats)==null?void 0:ye.commissionRate)===11?" Bronze":"Starter"," - ",(J=oe.affiliateStats)==null?void 0:J.commissionRate,"%"]})}),t.jsxs("td",{className:"px-6 py-4 text-white font-bold",children:["R",(je=oe.affiliateStats)==null?void 0:je.totalSalesValue.toFixed(0)]}),t.jsxs("td",{className:"px-6 py-4 text-purple-400",children:[Math.floor(Math.random()*50)," items"]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"px-2 py-1 bg-green-900/30 text-green-400 rounded text-xs border border-green-500/30",children:"Active"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Ae(oe),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-500",children:"Edit"}),t.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-500",children:"History"})]})})]},oe.id)})})]})})})]}),v==="settings"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(Vp,{size:18,className:"text-yellow-400"})," Commission Rates"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Standard Products"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"text-center p-2 bg-orange-900/20 border border-orange-500/30 rounded",children:[t.jsx("p",{className:"text-xs text-orange-400",children:"Bronze"}),t.jsxs("p",{className:"text-lg font-bold text-white",children:[D.bronze,"%"]})]}),t.jsxs("div",{className:"text-center p-2 bg-gray-900/20 border border-gray-500/30 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Silver"}),t.jsxs("p",{className:"text-lg font-bold text-white",children:[D.silver,"%"]})]}),t.jsxs("div",{className:"text-center p-2 bg-purple-900/20 border border-purple-500/30 rounded",children:[t.jsx("p",{className:"text-xs text-purple-400",children:"Gold"}),t.jsxs("p",{className:"text-lg font-bold text-white",children:[D.gold,"%"]})]}),t.jsxs("div",{className:"text-center p-2 bg-yellow-900/20 border border-yellow-500/30 rounded",children:[t.jsx("p",{className:"text-xs text-yellow-400",children:"Platinum"}),t.jsxs("p",{className:"text-lg font-bold text-white",children:[D.platinum,"%"]})]})]})]}),t.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(ia,{size:16,className:"text-red-400"}),t.jsx("label",{className:"text-sm text-gray-400",children:"Secret Vault Items"})]}),t.jsxs("div",{className:"text-center p-3 bg-red-900/20 border border-red-500/30 rounded",children:[t.jsxs("p",{className:"text-lg font-bold text-red-400",children:[D.vault,"%"]}),t.jsx("p",{className:"text-xs text-red-300",children:"LOCKED AT 1%"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This ensures we do not lose money on clearance stock."})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(ws,{size:18,className:"text-green-400"})," Membership Fees"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"South African (ZAR)"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Spoil Me"}),t.jsxs("span",{className:"text-green-400 font-bold",children:["R",I.zar.spoilMe]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Basic"}),t.jsxs("span",{className:"text-green-400 font-bold",children:["R",I.zar.basic]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Premium"}),t.jsxs("span",{className:"text-green-400 font-bold",children:["R",I.zar.premium]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Deluxe"}),t.jsxs("span",{className:"text-green-400 font-bold",children:["R",I.zar.deluxe]})]})]})]}),t.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"International (USD)"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Insider"}),t.jsxs("span",{className:"text-blue-400 font-bold",children:["$",I.usd.insider]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Gold"}),t.jsxs("span",{className:"text-blue-400 font-bold",children:["$",I.usd.gold]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Deluxe"}),t.jsxs("span",{className:"text-blue-400 font-bold",children:["$",I.usd.deluxe]})]})]})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(dr,{size:18,className:"text-orange-400"})," Gamification Bonuses"]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Weekly Achievements"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"p-3 bg-black/50 rounded border border-gray-700",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Sprinter Bonus"}),t.jsxs("span",{className:"text-orange-400 font-bold",children:["R",O.sprinter.zar," / $",O.sprinter.usd]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"5 memberships in a week"})]}),t.jsxs("div",{className:"p-3 bg-black/50 rounded border border-gray-700",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Big Spender Bonus"}),t.jsxs("span",{className:"text-orange-400 font-bold",children:["R",O.bigSpender.zar," / $",O.bigSpender.usd]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"R5,000 / $300 sales volume"})]})]})]})})]})]})}),v==="validator"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(mi,{size:18,className:"text-red-400"})," Commission Validator"]}),t.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Monitor recent commissions for errors and anomalies. Green = Standard, Yellow = Vault, Red = Error."}),t.jsx("div",{className:"space-y-2",children:[{id:1,type:"standard",partner:"Sarah J.",amount:450,product:"Gold Hoops",status:"approved"},{id:2,type:"vault",partner:"Mike T.",amount:10,product:"Clearance Studs",status:"approved"},{id:3,type:"standard",partner:"Lerato K.",amount:1200,product:"Necklace Set",status:"approved"},{id:4,type:"error",partner:"Jessica L.",amount:5e3,product:"Diamond Ring",status:"flagged"}].map(oe=>t.jsx("div",{className:`p-4 rounded-lg border ${oe.type==="standard"?"bg-green-900/10 border-green-500/30":oe.type==="vault"?"bg-yellow-900/10 border-yellow-500/30":"bg-red-900/10 border-red-500/30"}`,children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-white font-bold",children:[oe.partner," - ",oe.product]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Commission: R",oe.amount]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${oe.type==="standard"?"bg-green-900/50 text-green-400":oe.type==="vault"?"bg-yellow-900/50 text-yellow-400":"bg-red-900/50 text-red-400"}`,children:oe.type==="standard"?"Standard":oe.type==="vault"?"Vault (1%)":"ERROR"}),oe.status==="flagged"&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-500",children:"Void"}),t.jsx("button",{className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-500",children:"Approve"})]})]})]})},oe.id))})]})}),be&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>ve(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-6 max-w-sm w-full relative z-10 shadow-2xl",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-2 capitalize",children:[be.action," Application"]}),t.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["For ",be.name]}),t.jsx("textarea",{className:"w-full bg-black border border-gray-700 rounded p-3 text-white text-sm mb-4",placeholder:"Add a note (optional)...",rows:3,value:Y,onChange:oe=>de(oe.target.value)}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>ve(null),className:"flex-1 py-2 bg-zinc-800 text-gray-300 rounded hover:bg-zinc-700",children:"Cancel"}),t.jsx("button",{onClick:q,className:`flex-1 py-2 text-white font-bold rounded ${be.action==="approve"?"bg-green-600 hover:bg-green-500":"bg-red-600 hover:bg-red-500"}`,children:"Confirm"})]})]})]}),A&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>se(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-4xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg border-2 border-white/10",children:A.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:A.name}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("span",{className:"text-gray-400",children:A.email}),t.jsx("span",{className:"text-gray-600",children:""}),t.jsx("span",{className:"font-mono text-cyan-400 bg-cyan-900/20 px-2 py-0.5 rounded text-xs border border-cyan-500/30",children:A.affiliateCode})]})]})]}),t.jsx("button",{onClick:()=>se(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white transition-colors",children:t.jsx(us,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(ws,{size:16,className:"text-green-500"}),t.jsx("span",{className:"text-xs uppercase",children:"Direct Sales"})]}),t.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",(yt=A.affiliateStats)==null?void 0:yt.totalSalesValue.toFixed(2)]})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(Tc,{size:16,className:"text-purple-500"}),t.jsx("span",{className:"text-xs uppercase",children:"Total Earned"})]}),t.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["R",(Ut=A.affiliateStats)==null?void 0:Ut.balance.toFixed(2)]})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(qs,{size:16,className:"text-cyan-500"}),t.jsx("span",{className:"text-xs uppercase",children:"Network"})]}),t.jsxs("p",{className:"text-2xl font-bold text-white",children:[tt.length," ",t.jsx("span",{className:"text-sm font-normal text-gray-500",children:"Recruits"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(_I,{size:18,className:"text-yellow-400"})," Commission Settings"]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Direct Commission Tier (%)"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx("input",{type:"number",value:fe,onChange:oe=>Se(parseFloat(oe.target.value)),className:"w-full bg-black border border-gray-600 rounded-lg p-3 text-white text-sm font-bold focus:border-pink-500 outline-none"}),t.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),t.jsx("button",{onClick:Pe,className:"bg-pink-600 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 shadow-lg",children:"Update"})]}),t.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:["Standard Tiers: ",t.jsx("span",{className:"text-gray-300",children:"10%, 11%, 15%, 20%"}),". This setting overrides automatic tier progression."]})]})})]}),ht&&t.jsxs("div",{className:"bg-blue-900/10 p-4 rounded-xl border border-blue-500/30 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-500/20 rounded-full text-blue-400",children:t.jsx(UN,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-blue-300 uppercase font-bold mb-1",children:"Recruited By (Upline)"}),t.jsx("p",{className:"text-white font-bold text-sm",children:ht.name}),t.jsx("p",{className:"text-[10px] text-gray-400",children:ht.affiliateCode})]})]})]}),t.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700 h-full flex flex-col",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx($N,{size:18,className:"text-cyan-400"})," Network & Downline"]}),t.jsxs("div",{className:"mb-4 p-4 bg-black/40 rounded-xl border border-gray-700",children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Add Recruit to Downline"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{className:"flex-1 bg-zinc-900 border border-gray-600 rounded-lg p-2 text-xs text-white focus:border-cyan-500 outline-none",value:Ie,onChange:oe=>le(oe.target.value),children:[t.jsx("option",{value:"",children:"Select User to Link..."}),o.filter(oe=>{var De,Be;return oe.id!==A.id&&((De=oe.affiliateStats)==null?void 0:De.parentId)!==A.id&&((Be=oe.affiliateStats)==null?void 0:Be.status)==="approved"}).sort((oe,De)=>oe.name.localeCompare(De.name)).map(oe=>t.jsxs("option",{value:oe.id,children:[oe.name," (",oe.affiliateCode,")"]},oe.id))]}),t.jsxs("button",{onClick:$e,disabled:!Ie,className:"bg-cyan-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center gap-1",children:[t.jsx(rn,{size:14})," Add"]})]}),t.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:[A.name," will earn ",t.jsx("strong",{children:"1%"})," from sales made by users added here."]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 max-h-[300px] custom-scrollbar",children:tt.length===0?t.jsx("div",{className:"text-center py-8 border border-dashed border-gray-800 rounded-xl",children:t.jsx("p",{className:"text-gray-500 text-xs",children:"No recruits in downline yet."})}):tt.map(oe=>{var De,Be;return t.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-zinc-900 rounded-full flex items-center justify-center text-xs font-bold text-gray-400 border border-gray-700",children:oe.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-white font-bold",children:oe.name}),t.jsx("p",{className:"text-[10px] text-gray-500",children:oe.affiliateCode})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-[10px] text-gray-500",children:["Sales: R",(De=oe.affiliateStats)==null?void 0:De.totalSalesValue.toFixed(0)]}),t.jsxs("p",{className:"text-xs text-green-400 font-bold",children:["+R",(((Be=oe.affiliateStats)==null?void 0:Be.totalSalesValue)||0*.01).toFixed(2)]})]})]},oe.id)})}),tt.length>0&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold",children:"Passive Income Generated"}),t.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",Ne.toFixed(2)]})]})]})]})]})]})]})]})},LO=()=>/iP(ad|hone|od)/.test(navigator.userAgent)&&!("standalone"in navigator&&navigator.standalone);function UO(){const[n,e]=S.useState(null),[s,r]=S.useState(!1),[i,o]=S.useState(!1),[c,u]=S.useState(()=>!!localStorage.getItem("spv_install_dismissed"));if(S.useEffect(()=>{(()=>{const T=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;if(r(!!T),T)try{const k=window.__SPV_USER_ID;k&&Up({userId:k})}catch{}})(),window.addEventListener("appinstalled",()=>r(!0));const N=T=>{T.preventDefault(),e(T)};return window.addEventListener("beforeinstallprompt",N),()=>{window.removeEventListener("beforeinstallprompt",N),window.removeEventListener("appinstalled",()=>r(!0))}},[]),s||c)return null;const f=async()=>{if(n){n.prompt();const v=await n.userChoice;v&&v.outcome==="accepted"&&e(null)}else o(!0)},h=()=>{try{localStorage.setItem("spv_install_dismissed","1"),u(!0),o(!1)}catch{u(!0)}},y=async()=>{try{const v=window.__SPV_USER_ID;v?await Up({userId:v}):Notification.requestPermission()}catch(v){console.warn("request notification permission failed",v)}};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:t.jsxs("div",{className:"bg-white text-black rounded-lg max-w-md w-full p-6",children:[t.jsx("h2",{className:"text-lg font-bold mb-4",children:"Install Spoil Me"}),t.jsx("p",{className:"mb-4",children:"For the best experience please install the app to your device."}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"btn btn-primary flex-1",onClick:f,children:"Download App"}),t.jsx("button",{className:"btn",onClick:()=>{o(!0)},children:"How to install"}),t.jsx("button",{className:"btn-ghost",onClick:h,children:"Dismiss"})]}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{className:"text-sm text-gray-600",onClick:y,children:"Enable Notifications"})}),i&&t.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded",children:LO()?t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"iOS Install Instructions"}),t.jsxs("ol",{className:"list-decimal list-inside mt-2",children:[t.jsxs("li",{children:["Tap the ",t.jsx("strong",{children:"Share"})," button (the square with an arrow)."]}),t.jsxs("li",{children:["Select ",t.jsx("strong",{children:"Add to Home Screen"}),"."]})]})]}):t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Install"}),t.jsxs("p",{className:"mt-2",children:["If the system install card is available, press ",t.jsx("strong",{children:"Download App"})," above."]})]})})]})})}const zO=()=>{const{weeklyWinners:n}=vt(),[e,s]=S.useState(new Date),[r,i]=S.useState("");return S.useEffect(()=>{const o=()=>{const u=new Date,f=new Date(u);f.setUTCDate(u.getUTCDate()+(7-u.getUTCDay())),f.setUTCHours(8,0,0,0),f<u&&f.setUTCDate(f.getUTCDate()+7),s(f)};o();const c=setInterval(o,6e4);return()=>clearInterval(c)},[]),S.useEffect(()=>{const o=setInterval(()=>{const c=new Date,u=e.getTime()-c.getTime();if(u>0){const f=Math.floor(u/864e5),h=Math.floor(u/(1e3*60*60)%24),y=Math.floor(u/1e3/60%60);i(`${f}d ${h}h ${y}m`)}else i("Drawing new winners...")},1e3);return()=>clearInterval(o)},[e]),t.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-12",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"inline-block bg-gradient-to-br from-yellow-500 to-orange-500 p-5 rounded-full shadow-[0_0_30px_rgba(250,204,21,0.5)]",children:t.jsx(dr,{size:48,className:"text-white"})}),t.jsx("h1",{className:"font-cherry text-5xl text-white",children:"This Week's Winners!"}),t.jsx("p",{className:"text-gray-300 text-lg",children:"Congratulations to the lucky members of our R19 Spoil Me Package!"})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"text-center md:text-left",children:[t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:[t.jsx(cr,{size:20,className:"text-cyan-400"}),"Next Draw"]}),t.jsx("p",{className:"text-gray-400 text-sm",children:"A new set of winners is drawn every Sunday at 08:00 AM."})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:r}),t.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Time Remaining"})]})]}),t.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/20 p-5 rounded-xl flex items-start gap-4",children:[t.jsx(ds,{size:24,className:"text-purple-400 shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-purple-300",children:"How to Claim Your Prize"}),t.jsx("p",{className:"text-sm text-gray-300/80 mt-1",children:"If you're a winner, a notification has been sent to your profile's inbox containing your unique voucher code. Simply apply it at checkout to claim your winnings!"})]})]}),t.jsx("div",{className:"bg-zinc-900 rounded-2xl border border-gray-800 overflow-hidden",children:t.jsx("div",{className:"divide-y divide-gray-800",children:n.map(o=>t.jsxs("div",{className:`p-4 flex items-center justify-between gap-4 transition-colors ${o.rank<=3?"bg-yellow-900/10":""}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm border-2 ${o.rank===1?"bg-yellow-500 border-yellow-300 text-black shadow-[0_0_10px_rgba(250,204,21,0.5)]":o.rank===2?"bg-gray-400 border-gray-200 text-black":o.rank===3?"bg-orange-600 border-orange-400 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:["#",o.rank]}),t.jsx("span",{className:"font-medium text-white",children:o.name})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("span",{className:"font-bold text-lg text-green-400",children:["R",o.prize.toFixed(2)]}),t.jsx("span",{className:"text-xs text-gray-500 block",children:"Voucher"})]})]},o.rank))})}),t.jsxs("div",{className:"mt-12 bg-gradient-to-r from-pink-600 to-purple-600 p-8 rounded-2xl text-center shadow-2xl",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Want to be on this list?"}),t.jsx("p",{className:"text-pink-100 mb-6 max-w-lg mx-auto",children:"Join the Spoil Me Package for just R19/month for your chance to win weekly vouchers and get exclusive member perks!"}),t.jsxs(Ve,{to:"/membership",className:"inline-flex items-center gap-2 px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-lg text-lg",children:["Join Now ",t.jsx(Qs,{size:20})]})]})]})},FO=()=>{const{weeklyWinners:n}=vt();return t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[t.jsx(dr,{size:24,className:"text-yellow-400"}),' Weekly "Spoil Me" Winners']}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Review and manage the simulated weekly prize draw."})]})}),t.jsxs("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-5 rounded-xl flex items-start gap-4",children:[t.jsx(mi,{size:24,className:"text-yellow-500 shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-yellow-400",children:"Simulation Mode Active"}),t.jsxs("p",{className:"text-sm text-yellow-200/80 mt-1",children:["This panel displays a ",t.jsx("strong",{className:"text-white",children:"simulated list of winners"})," for demonstration. In a live production environment, this page would be connected to your database to:"]}),t.jsxs("ul",{className:"list-disc pl-5 mt-3 text-xs text-yellow-200/70 space-y-1",children:[t.jsx("li",{children:'Show a list of all users subscribed to the "Spoil Me Package".'}),t.jsxs("li",{children:["Allow you to run the draw, which would randomly select ",t.jsx("strong",{children:"real users"})," from that list."]}),t.jsx("li",{children:"Automatically generate unique voucher codes and assign them to the winning user accounts."}),t.jsx("li",{children:"Send a notification to the winners' in-app inbox."})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg bg-cyan-900/30 text-cyan-400 border border-cyan-500/20",children:t.jsx(qs,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Winners This Week"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:n.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg bg-green-900/30 text-green-400 border border-green-500/20",children:t.jsx(hI,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Prize Value"}),t.jsxs("p",{className:"text-[22px] font-bold text-white mt-1",children:["R",n.reduce((e,s)=>e+s.prize,0).toFixed(2)]})]})]}),t.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:t.jsxs("table",{className:"w-full text-left text-sm",children:[t.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4 w-20",children:"Rank"}),t.jsx("th",{className:"p-4",children:"Winner Name"}),t.jsx("th",{className:"p-4 text-right",children:"Prize Value"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:n.map(e=>t.jsxs("tr",{className:`group transition-colors ${e.rank<=3?"bg-yellow-900/10":"hover:bg-zinc-800/50"}`,children:[t.jsx("td",{className:"p-4",children:t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold border ${e.rank===1?"bg-yellow-500 border-yellow-400 text-black":e.rank===2?"bg-gray-400 border-gray-300 text-black":e.rank===3?"bg-orange-600 border-orange-500 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:e.rank})}),t.jsx("td",{className:"p-4 font-medium text-gray-200",children:e.name}),t.jsxs("td",{className:"p-4 text-right font-bold text-lg text-green-400",children:["R",e.prize.toFixed(2)]})]},e.rank))})]})})]})},xj=()=>{const[n,e]=S.useState([]),[s,r]=S.useState({enabled:!0,priceZAR:199,priceUSD:12,reachCount:7540}),[i,o]=S.useState(!0);S.useEffect(()=>{c()},[]);const c=async()=>{try{const y=await Mc("settings","ad_config");y&&(e(y.packages||[]),r(y.socialAddon||s))}catch(y){console.error("Error loading ad config:",y)}finally{o(!1)}},u=async()=>{try{try{await di("settings","ad_config",{packages:n,socialAddon:s})}catch{await Rr("settings",{id:"ad_config",packages:n,socialAddon:s})}alert("Configuration saved successfully!")}catch(y){console.error("Error saving ad config:",y),alert("Failed to save configuration.")}},f=(y,v,N)=>{const T=[...n];T[y]={...T[y],[v]:N},e(T)},h=(y,v)=>{r({...s,[y]:v})};return i?t.jsx("div",{className:"p-6",children:"Loading..."}):t.jsxs("div",{className:"p-6 bg-gray-900 text-white min-h-screen",children:[t.jsx("h1",{className:"text-3xl font-bold mb-8 text-yellow-400",children:"Marketing Settings"}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ad Packages"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full bg-gray-800 rounded-lg",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("th",{className:"p-4 text-left",children:"Name"}),t.jsx("th",{className:"p-4 text-left",children:"Duration (Days)"}),t.jsx("th",{className:"p-4 text-left",children:"Price (ZAR)"}),t.jsx("th",{className:"p-4 text-left",children:"Price (USD)"}),t.jsx("th",{className:"p-4 text-left",children:"Benefit"}),t.jsx("th",{className:"p-4 text-left",children:"Active"})]})}),t.jsx("tbody",{children:n.map((y,v)=>t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"text",value:y.name,onChange:N=>f(v,"name",N.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"number",value:y.durationDays,onChange:N=>f(v,"durationDays",parseInt(N.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"number",step:"0.01",value:y.priceZAR,onChange:N=>f(v,"priceZAR",parseFloat(N.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"number",step:"0.01",value:y.priceUSD,onChange:N=>f(v,"priceUSD",parseFloat(N.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"text",value:y.benefit,onChange:N=>f(v,"benefit",N.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"checkbox",checked:y.active,onChange:N=>f(v,"active",N.target.checked),className:"w-4 h-4"})})]},y.id))})]})})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Social Media Add-on"}),t.jsx("div",{className:"bg-gray-800 p-4 rounded-lg",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Enabled"}),t.jsx("input",{type:"checkbox",checked:s.enabled,onChange:y=>h("enabled",y.target.checked),className:"w-4 h-4"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (ZAR)"}),t.jsx("input",{type:"number",step:"0.01",value:s.priceZAR,onChange:y=>h("priceZAR",parseFloat(y.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (USD)"}),t.jsx("input",{type:"number",step:"0.01",value:s.priceUSD,onChange:y=>h("priceUSD",parseFloat(y.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Network Reach"}),t.jsx("input",{type:"number",value:s.reachCount,onChange:y=>h("reachCount",parseInt(y.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]})]})})]}),t.jsx("button",{onClick:u,className:"bg-yellow-400 text-black font-bold py-2 px-6 rounded-lg hover:bg-yellow-500 transition-colors",children:"Save Changes"})]})},$O=()=>{const n={totalRevenue:5400,topSpenders:[{artist:"Artist A",amount:1200},{artist:"Artist B",amount:950},{artist:"Artist C",amount:700}],slotUtilization:{homepageSlots:8,totalHomepageSlots:10,categorySlots:45}};return t.jsxs("div",{className:"p-4 md:p-6 bg-zinc-900 rounded-lg border border-gray-800",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Ad Revenue & Performance"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-black/30 p-6 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"Total Ad Revenue"}),t.jsxs("p",{className:"text-4xl font-bold text-white",children:["R",n.totalRevenue.toLocaleString()]}),t.jsx("p",{className:"text-gray-400",children:"this month"})]}),t.jsxs("div",{className:"bg-black/30 p-6 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Homepage Slot Utilization"}),t.jsxs("p",{className:"text-4xl font-bold text-white",children:[n.slotUtilization.homepageSlots," / ",n.slotUtilization.totalHomepageSlots]}),t.jsx("p",{className:"text-gray-400",children:"slots filled"})]}),t.jsxs("div",{className:"bg-black/30 p-6 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"Active Category Ads"}),t.jsx("p",{className:"text-4xl font-bold text-white",children:n.slotUtilization.categorySlots}),t.jsx("p",{className:"text-gray-400",children:"promotions running"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-yellow-400 mb-4",children:"Top Spenders"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-300",children:[t.jsx("thead",{className:"bg-zinc-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Artist"}),t.jsx("th",{className:"px-4 py-2",children:"Total Spent"})]})}),t.jsx("tbody",{children:n.topSpenders.map((e,s)=>t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-medium text-white",children:e.artist}),t.jsxs("td",{className:"px-4 py-2 text-green-400",children:["R",e.amount.toLocaleString()]})]},s))})]})})]})]})},VO=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],BO={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:10},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:10}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:10},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:10}]},qO=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],WO=()=>{const[n,e]=S.useState("shipping"),[s,r]=S.useState(()=>{const k=localStorage.getItem("spv_pudo_costs");return k?JSON.parse(k):VO}),[i,o]=S.useState(()=>{const k=localStorage.getItem("spv_paxi_costs");return k?JSON.parse(k):BO}),[c,u]=S.useState(()=>{const k=localStorage.getItem("spv_door_to_door_costs");return k?JSON.parse(k):qO}),[f,h]=S.useState({}),y=k=>{h(_=>({..._,[k]:"Saved!"})),setTimeout(()=>{h(_=>({..._,[k]:""}))},2e3)};S.useEffect(()=>{},[]),S.useEffect(()=>{try{localStorage.setItem("spv_paxi_costs",JSON.stringify(i))}catch(k){console.error("Failed to save PAXI costs to storage",k)}},[i]),S.useEffect(()=>{},[]),S.useEffect(()=>{try{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(c))}catch(k){console.error("Failed to save Door to Door costs to storage",k)}},[c]);const v=(k,_,P)=>{const L=[...s],z=parseFloat(P)||0;L[k][_]=z,r(L)},N=(k,_,P,L)=>{const z={...i},F=parseFloat(L)||0;z[k][_][P]=F,o(z)},T=(k,_,P)=>{u(L=>L.map((F,K)=>{if(K!==k)return F;let ee={...F};if(_==="initialCharge"||_==="ratePerKg"||_==="handleFee"||_==="boxFee"){const W=parseFloat(P);_==="ratePerKg"&&(isNaN(W)||P==="")?ee[_]=null:ee[_]=isNaN(W)?0:W}else ee[_]=P;return ee}))};return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[t.jsx(ws,{size:24,className:"text-green-400"})," Shipping Expenses & Supplies"]}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Reference for PUDO & PAXI costs and supplies."})]}),t.jsxs("div",{className:"rounded-xl border border-gray-700 bg-zinc-900",children:[t.jsxs("div",{className:"grid w-full grid-cols-3",children:[t.jsx("button",{onClick:()=>e("shipping"),className:`py-3 px-4 text-sm font-medium transition-colors ${n==="shipping"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Shipping Costs"}),t.jsx("button",{onClick:()=>e("ads"),className:`py-3 px-4 text-sm font-medium transition-colors ${n==="ads"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Ad Revenue"}),t.jsx("button",{onClick:()=>e("marketing"),className:`py-3 px-4 text-sm font-medium transition-colors ${n==="marketing"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Marketing Settings"})]}),t.jsxs("div",{className:"p-6",children:[n==="shipping"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg mb-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[t.jsx(fI,{size:20,className:"text-cyan-400"})," PUDO Box & Service Pricing"]}),t.jsxs("a",{href:"https://stationery.thecourierguy.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Order Stationery ",t.jsx(Ua,{size:16})]})]}),t.jsx("div",{className:"space-y-4 md:hidden",children:s.map((k,_)=>{const P=k.boxCost+(k.lockerToLockerCost||0)+k.lockerHandleFee;return k.boxCost+(k.doorToLockerCost||0)+k.doorHandleFee,t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-800",children:[t.jsx("h4",{className:"font-bold text-white mb-2",children:k.name}),t.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[t.jsxs("p",{children:["Dimensions: ",k.dimensions]}),t.jsxs("p",{children:["Max Weight: ",k.maxWeight]}),t.jsxs("p",{children:["Box Cost: R",k.boxCost]}),k.lockerToLockerCost&&t.jsxs("p",{children:["Locker to Locker: R",k.lockerToLockerCost]}),k.doorToLockerCost&&t.jsxs("p",{children:["Door to Locker: R",k.doorToLockerCost]}),t.jsxs("p",{className:"font-bold text-cyan-400",children:["Total: R",P.toFixed(2)]})]})]},_)})}),t.jsxs("div",{className:"hidden md:block mt-8",children:[t.jsx("h4",{className:"font-bold text-cyan-400 mb-2 mt-6",children:"Locker to Locker"}),t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[t.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Box"}),t.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),t.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),t.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),t.jsx("th",{className:"px-4 py-2",children:"Locker to Locker"}),t.jsx("th",{className:"px-4 py-2",children:"Locker Handle Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Total"}),t.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),t.jsx("tbody",{children:s.map((k,_)=>{if(k.lockerToLockerCost===null)return null;const P=k.boxCost+(k.lockerToLockerCost||0)+k.lockerHandleFee;return t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-bold text-white",children:k.name}),t.jsx("td",{className:"px-4 py-2",children:k.dimensions}),t.jsx("td",{className:"px-4 py-2",children:k.maxWeight}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.boxCost,onChange:L=>v(_,"boxCost",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.lockerToLockerCost||0,onChange:L=>v(_,"lockerToLockerCost",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.lockerHandleFee,onChange:L=>v(_,"lockerHandleFee",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsxs("td",{className:"px-4 py-2 font-bold text-cyan-400",children:["R",P.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2",children:[t.jsx("button",{className:"px-2 py-1 bg-cyan-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(s)),y(`pudo-lockerToLockerCost-${_}`)},children:""}),t.jsx("span",{className:"text-green-400 text-xs",children:f[`pudo-lockerToLockerCost-${_}`]})]})]},_)})})]}),t.jsx("h4",{className:"font-bold text-purple-400 mb-2 mt-6",children:"Door to Locker"}),t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400",children:[t.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Box"}),t.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),t.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),t.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),t.jsx("th",{className:"px-4 py-2",children:"Door to Locker"}),t.jsx("th",{className:"px-4 py-2",children:"Door Handle Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Total"}),t.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),t.jsx("tbody",{children:s.map((k,_)=>{if(k.doorToLockerCost===null)return null;const P=k.boxCost+(k.doorToLockerCost||0)+k.doorHandleFee;return t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-bold text-white",children:k.name}),t.jsx("td",{className:"px-4 py-2",children:k.dimensions}),t.jsx("td",{className:"px-4 py-2",children:k.maxWeight}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.boxCost,onChange:L=>v(_,"boxCost",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.doorToLockerCost||0,onChange:L=>v(_,"doorToLockerCost",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.doorHandleFee,onChange:L=>v(_,"doorHandleFee",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsxs("td",{className:"px-4 py-2 font-bold text-purple-400",children:["R",P.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2",children:[t.jsx("button",{className:"px-2 py-1 bg-purple-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(s)),y(`pudo-doorToLockerCost-${_}`)},children:""}),t.jsx("span",{className:"text-green-400 text-xs",children:f[`pudo-doorToLockerCost-${_}`]})]})]},_)})})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg mb-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[t.jsx(_c,{size:20,className:"text-pink-400"})," PAXI Bag & Service Pricing"]}),t.jsxs("a",{href:"https://www.paxi.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["PAXI Website ",t.jsx(Ua,{size:16})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:Object.entries(i).map(([k,_])=>t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-pink-400 mb-2",children:k}),t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[t.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Bag"}),t.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Service Cost"}),t.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Total"}),t.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),t.jsx("tbody",{children:_.map((P,L)=>{let z=P.bag.includes("Small")?6:15;const F=z+P.serviceCost+P.handleFee;return t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-bold text-white",children:P.bag}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:z,onChange:K=>{},className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right",disabled:!0})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:P.serviceCost,onChange:K=>N(k,L,"serviceCost",K.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:P.handleFee,onChange:K=>N(k,L,"handleFee",K.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsxs("td",{className:"px-4 py-2 font-bold text-pink-400",children:["R",F.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2",children:[t.jsx("button",{className:"px-2 py-1 bg-pink-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_paxi_costs",JSON.stringify(i)),y(`paxi-${k}-${L}`)},children:""}),t.jsx("span",{className:"text-green-400 text-xs",children:f[`paxi-${k}-${L}`]})]})]},L)})})]})]},k))})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[t.jsx(Fr,{size:20,className:"text-yellow-400"})," Door-to-Door Courier Pricing"]})}),t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[t.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Service"}),t.jsx("th",{className:"px-4 py-2",children:"Initial Weight"}),t.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Initial Charge"}),t.jsx("th",{className:"px-4 py-2",children:"Rate per Kg"}),t.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Total"}),t.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),t.jsx("tbody",{children:c.map((k,_)=>{const P=k.boxFee+k.initialCharge+(k.ratePerKg!==null?k.ratePerKg:0)+k.handleFee;return t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-bold text-white",children:k.service}),t.jsx("td",{className:"px-4 py-2",children:k.initialWeight}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.boxFee,onChange:L=>T(_,"boxFee",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.initialCharge,onChange:L=>T(_,"initialCharge",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:k.ratePerKg!==null?t.jsx("input",{type:"number",value:k.ratePerKg,onChange:L=>T(_,"ratePerKg",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"}):"-"}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.handleFee,onChange:L=>T(_,"handleFee",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsxs("td",{className:"px-4 py-2 font-bold text-yellow-400",children:["R",P.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2",children:[t.jsx("button",{className:"px-2 py-1 bg-yellow-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(c)),y(`doorToDoor-${_}`)},children:""}),t.jsx("span",{className:"text-green-400 text-xs",children:f[`doorToDoor-${_}`]})]})]},_)})})]})]})]}),n==="ads"&&t.jsx($O,{}),n==="marketing"&&t.jsx(xj,{})]})]})]})},Sv=n=>{switch(n){case"Pending":return"bg-yellow-900/30 text-yellow-400 border-yellow-500/30";case"Processing":return"bg-blue-900/30 text-blue-400 border-blue-500/30";case"Shipped":return"bg-cyan-900/30 text-cyan-400 border-cyan-500/30";case"Delivered":return"bg-green-900/30 text-green-400 border-green-500/30";case"Cancelled":return"bg-red-900/30 text-red-400 border-red-500/30";default:return"bg-gray-800 text-gray-400"}},HO=()=>{const{orders:n,updateOrder:e,deleteOrder:s}=vt(),[r,i]=S.useState(""),[o,c]=S.useState(""),[u,f]=S.useState(null),[h,y]=S.useState(""),v=S.useMemo(()=>n.filter(_=>{const P=r.toLowerCase();return _.orderNumber.toLowerCase().includes(P)||_.customerName.toLowerCase().includes(P)||_.customerEmail.toLowerCase().includes(P)}).filter(_=>o?_.status===o:!0),[n,r,o]),N=_=>{f(_),y(_.status)},T=async()=>{u&&h&&(await e({...u,status:h}),f(null),y(""))},k=async _=>{window.confirm("Are you sure you want to delete this order? This action cannot be undone.")&&(await s(_),f(null))};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Order Management"}),t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[t.jsx(ca,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsx("input",{type:"text",placeholder:"Search by Order #, Name, or Email...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:r,onChange:_=>i(_.target.value)})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ic,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none appearance-none",value:o,onChange:_=>c(_.target.value),children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"Processing",children:"Processing"}),t.jsx("option",{value:"Shipped",children:"Shipped"}),t.jsx("option",{value:"Delivered",children:"Delivered"}),t.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),t.jsxs("div",{className:"hidden md:block bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[t.jsxs("table",{className:"w-full text-left text-sm",children:[t.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:"Order #"}),t.jsx("th",{className:"p-4",children:"Date"}),t.jsx("th",{className:"p-4",children:"Customer"}),t.jsx("th",{className:"p-4 text-right",children:"Total"}),t.jsx("th",{className:"p-4",children:"Status"}),t.jsx("th",{className:"p-4"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:v.map(_=>t.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[t.jsx("td",{className:"p-4 font-mono text-cyan-400",children:_.orderNumber}),t.jsx("td",{className:"p-4 text-gray-400",children:new Date(_.date).toLocaleDateString()}),t.jsxs("td",{className:"p-4",children:[t.jsx("div",{className:"font-medium text-gray-200",children:_.customerName}),t.jsx("div",{className:"text-xs text-gray-500",children:_.customerEmail})]}),t.jsxs("td",{className:"p-4 text-right font-bold text-green-400",children:["R",_.total.toFixed(2)]}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${Sv(_.status)}`,children:_.status})}),t.jsx("td",{className:"p-4 text-right",children:t.jsx("button",{onClick:()=>N(_),className:"text-xs text-gray-400 hover:text-white underline opacity-0 group-hover:opacity-100 transition-opacity",children:"View Details"})})]},_.id))})]}),v.length===0&&t.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),t.jsxs("div",{className:"md:hidden space-y-4",children:[v.map(_=>t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-mono text-cyan-400 text-sm",children:_.orderNumber}),t.jsx("div",{className:"text-xs text-gray-500",children:new Date(_.date).toLocaleString()})]}),t.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${Sv(_.status)}`,children:_.status})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-200 text-sm",children:_.customerName}),t.jsx("div",{className:"text-xs text-gray-500",children:_.customerEmail})]}),t.jsxs("div",{className:"flex justify-between items-end pt-2 border-t border-gray-800",children:[t.jsx("button",{onClick:()=>N(_),className:"text-xs text-gray-400 hover:text-white underline",children:"View Details"}),t.jsxs("div",{className:"font-bold text-green-400 text-lg",children:["R",_.total.toFixed(2)]})]})]},_.id)),v.length===0&&t.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),u&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>f(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-2xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:"Order Details"}),t.jsx("p",{className:"font-mono text-cyan-400",children:u.orderNumber})]}),t.jsx("button",{onClick:()=>f(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white",children:t.jsx(us,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[t.jsx($r,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-gray-300",children:u.customerName})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[t.jsx(Sc,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-gray-300",children:u.customerEmail})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[t.jsx(La,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-gray-300",children:new Date(u.date).toLocaleString()})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[t.jsx(Fr,{size:18,className:"text-cyan-400"}),"Shipping Information"]}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("p",{children:[t.jsx("strong",{className:"text-gray-400",children:"Method:"})," ",t.jsx("span",{className:"text-gray-200",children:u.shippingMethod})]}),t.jsxs("p",{children:[t.jsx("strong",{className:"text-gray-400",children:"Details:"})," ",t.jsx("span",{className:"text-gray-200",children:u.shippingDetails})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[t.jsx(dl,{size:18,className:"text-pink-400"}),"Items (",u.items.reduce((_,P)=>_+P.quantity,0),")"]}),u.items.map((_,P)=>t.jsxs("div",{className:"flex items-center gap-4 bg-black/40 p-3 rounded-lg border border-gray-800",children:[t.jsx("img",{src:_.images[0],alt:_.name,className:"w-12 h-12 rounded object-cover border border-gray-700"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-bold text-white",children:_.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[_.selectedSize&&`Size: ${_.selectedSize}`,_.selectedMaterial&&`Material: ${_.selectedMaterial}`]})]}),t.jsxs("div",{className:"text-sm text-gray-400",children:["x",_.quantity]}),t.jsxs("div",{className:"text-sm font-bold text-white",children:["R",(_.price*_.quantity).toFixed(2)]})]},P))]}),t.jsxs("div",{className:"pt-4 border-t border-gray-800 text-sm text-right space-y-2",children:[t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("span",{className:"text-gray-400",children:"Subtotal:"})," ",t.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",(u.total-u.shippingCost).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("span",{className:"text-gray-400",children:"Shipping:"})," ",t.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",u.shippingCost.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-end gap-4 font-bold text-lg",children:[t.jsx("span",{className:"text-white",children:"Total:"})," ",t.jsxs("span",{className:"text-green-400 w-24 text-left",children:["R",u.total.toFixed(2)]})]})]})]}),t.jsxs("div",{className:"p-6 border-t border-gray-800 bg-zinc-950/50 flex flex-col md:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.jsx("label",{className:"text-sm font-bold text-white",children:"Status:"}),t.jsxs("select",{value:h,onChange:_=>y(_.target.value),className:"flex-1 bg-black border border-gray-700 rounded-lg p-2 text-white text-sm focus:border-pink-500 outline-none",children:[t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"Processing",children:"Processing"}),t.jsx("option",{value:"Shipped",children:"Shipped"}),t.jsx("option",{value:"Delivered",children:"Delivered"}),t.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),t.jsx("button",{onClick:T,className:"px-4 py-2 bg-pink-600 text-white font-bold rounded-lg text-sm hover:bg-pink-500",children:"Save"})]}),t.jsxs("button",{onClick:()=>k(u.id),className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 text-red-400 text-sm font-bold hover:bg-red-900/20 rounded-lg border border-red-900/0 hover:border-red-900/30 transition-colors",children:[t.jsx(Or,{size:16})," Delete Order"]})]})]})]})]})},GO=()=>t.jsx("div",{className:"bg-gray-900 text-white min-h-screen p-8",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("h1",{className:"text-4xl font-bold mb-6 text-cyan-400",children:"Terms and Conditions"}),t.jsxs("div",{className:"space-y-6 text-gray-300",children:[t.jsx("p",{children:"Welcome to Spoil Me. These terms and conditions outline the rules and regulations for the use of Spoil Me's Website, located at spoilme.com."}),t.jsx("p",{children:"By accessing this website we assume you accept these terms and conditions. Do not continue to use Spoil Me if you do not agree to take all of the terms and conditions stated on this page."}),t.jsx("h2",{className:"text-2xl font-semibold text-cyan-400 mt-4",children:"Cookies"}),t.jsx("p",{children:"We employ the use of cookies. By accessing Spoil Me, you agreed to use cookies in agreement with the Spoil Me's Privacy Policy."}),t.jsx("h2",{className:"text-2xl font-semibold text-cyan-400 mt-4",children:"License"}),t.jsx("p",{children:"Unless otherwise stated, Spoil Me and/or its licensors own the intellectual property rights for all material on Spoil Me. All intellectual property rights are reserved. You may access this from Spoil Me for your own personal use subjected to restrictions set in these terms and conditions."})]})]})}),KO="modulepreload",JO=function(n){return"/"+n},kv={},Vm=function(e,s,r){let i=Promise.resolve();if(s&&s.length>0){let c=function(h){return Promise.all(h.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=c(s.map(h=>{if(h=JO(h),h in kv)return;kv[h]=!0;const y=h.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const N=document.createElement("link");if(N.rel=y?"stylesheet":KO,y||(N.as="script"),N.crossOrigin="",N.href=h,f&&N.setAttribute("nonce",f),document.head.appendChild(N),y)return new Promise((T,k)=>{N.addEventListener("load",T),N.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},YO=hl("App",{web:()=>Vm(()=>import("./web-CLDcPunh.js"),[]).then(n=>new n.AppWeb)});function ZO(n){n.CapacitorUtils.Synapse=new Proxy({},{get(e,s){return new Proxy({},{get(r,i){return(o,c,u)=>{const f=n.Capacitor.Plugins[s];if(f===void 0){u(new Error(`Capacitor plugin ${s} not found`));return}if(typeof f[i]!="function"){u(new Error(`Method ${i} not found in Capacitor plugin ${s}`));return}(async()=>{try{const h=await f[i](o);c(h)}catch(h){u(h)}})()}}})}})}function XO(n){n.CapacitorUtils.Synapse=new Proxy({},{get(e,s){return n.cordova.plugins[s]}})}function QO(n=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!n?ZO(window):window.cordova!==void 0&&XO(window))}var $u;(function(n){n.Documents="DOCUMENTS",n.Data="DATA",n.Library="LIBRARY",n.Cache="CACHE",n.External="EXTERNAL",n.ExternalStorage="EXTERNAL_STORAGE",n.ExternalCache="EXTERNAL_CACHE",n.LibraryNoCloud="LIBRARY_NO_CLOUD",n.Temporary="TEMPORARY"})($u||($u={}));var _v;(function(n){n.UTF8="utf8",n.ASCII="ascii",n.UTF16="utf16"})(_v||(_v={}));const Cv=hl("Filesystem",{web:()=>Vm(()=>import("./web-CVodJiNo.js"),[]).then(n=>new n.FilesystemWeb)});QO();const eL=hl("FileOpener"),tL=()=>{const[n,e]=S.useState(null),[s,r]=S.useState(!1),i=S.useCallback(async()=>{if(Du.isNativePlatform())try{const c=await fetch("https://spoilme-edee0.web.app/version.json",{cache:"no-store"});if(!c.ok)throw new Error("Failed to fetch version.json");const u=await c.json(),h=(await YO.getInfo()).version;u.version&&u.version!==h&&e(u)}catch(c){console.error("Error checking for app update:",c)}},[]),o=S.useCallback(async()=>{if(n){r(!0);try{if(n.apkUrl===""){alert("Update downloaded. Please restart the app.");return}const c=`Spoil-Me-Vintage-${n.version}.apk`,u=await fetch(n.apkUrl);if(!u.ok)throw new Error("Failed to download APK");const f=await u.arrayBuffer(),h=await new Promise((v,N)=>{const T=new FileReader;T.onload=()=>v(T.result.split(",")[1]),T.onerror=N,T.readAsDataURL(new Blob([f]))});await Cv.writeFile({path:c,data:h,directory:$u.External});const y=await Cv.getUri({directory:$u.External,path:c});await eL.open({filePath:y.uri,contentType:"application/vnd.android.package-archive"})}catch(c){console.error("Error performing app update:",c)}finally{r(!1),e(null)}}},[n]);return S.useEffect(()=>{i()},[i]),{updateAvailable:n,isDownloading:s,performUpdate:o,dismissUpdate:()=>e(null)}},sL=({version:n,isDownloading:e,onUpdate:s,onDismiss:r})=>t.jsx("div",{className:"fixed bottom-4 right-4 z-[100] w-full max-w-sm",children:t.jsx("div",{className:"bg-zinc-800 border-2 border-pink-500 rounded-2xl p-6 shadow-[0_0_40px_rgba(236,72,153,0.3)] animate-in slide-in-from-bottom-10 duration-500",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx(jc,{size:24,className:"text-white"})})}),t.jsxs("div",{className:"ml-4 flex-1",children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"New Update Available!"}),t.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Version ",n," is ready to be installed."]}),t.jsxs("div",{className:"mt-4 flex space-x-3",children:[t.jsx("button",{onClick:s,disabled:e,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-white text-black font-bold rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e?t.jsxs(t.Fragment,{children:[t.jsx(wI,{size:18,className:"animate-spin mr-2"}),"Downloading..."]}):t.jsxs(t.Fragment,{children:[t.jsx(jc,{size:18,className:"mr-2"}),"Update Now"]})}),t.jsx("button",{onClick:r,disabled:e,className:"px-3 py-2 text-gray-400 hover:text-white transition-colors",children:"Later"})]})]}),t.jsx("div",{className:"ml-3 flex-shrink-0",children:t.jsx("button",{onClick:r,disabled:e,className:"text-gray-500 hover:text-gray-300",children:t.jsx(us,{size:20})})})]})})});function nL(n={}){const{immediate:e=!1,onNeedRefresh:s,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:c}=n;let u,f;const h=async(v=!0)=>{await f};async function y(){if("serviceWorker"in navigator){if(u=await Vm(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/service-worker.js",{scope:"/",type:"classic"})).catch(v=>{c==null||c(v)}),!u)return;u.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),u.addEventListener("installed",v=>{v.isUpdate||r==null||r()}),u.register({immediate:e}).then(v=>{o?o("/service-worker.js",v):i==null||i(v)}).catch(v=>{c==null||c(v)})}}return f=y(),h}function rL(n={}){const{immediate:e=!0,onNeedRefresh:s,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:c}=n,[u,f]=S.useState(!1),[h,y]=S.useState(!1),[v]=S.useState(()=>nL({immediate:e,onOfflineReady(){y(!0),r==null||r()},onNeedRefresh(){f(!0),s==null||s()},onRegistered:i,onRegisteredSW:o,onRegisterError:c}));return{needRefresh:[u,f],offlineReady:[h,y],updateServiceWorker:v}}const iL=()=>{const{needRefresh:n,updateServiceWorker:e,offlineReady:s}=rL(),[r,i]=S.useState(!1);return S.useEffect(()=>{if(s){console.debug("[UpdatePrompt] Service worker offlineReady (fresh install)"),i(!1);return}n&&i(!0)},[n,s]),r?t.jsx("div",{style:{bottom:"env(safe-area-inset-bottom, 16px)"},className:"fixed left-4 right-4 md:left-auto md:right-6 md:bottom-6 z-60 flex justify-center",children:t.jsxs("div",{className:"max-w-xl w-full bg-zinc-900 border border-pink-500 text-white rounded-xl p-3 flex items-center justify-between gap-4 shadow-lg",children:[t.jsx("div",{className:"text-sm",children:"New version available!"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"bg-pink-600 hover:bg-pink-500 text-white px-3 py-2 rounded-md text-sm font-semibold",onClick:async()=>{try{await e(!0)}catch(o){console.warn("[UpdatePrompt] updateServiceWorker failed",o)}i(!1)},children:"Refresh"}),t.jsx("button",{className:"bg-transparent border border-white/10 text-white px-3 py-2 rounded-md text-sm",onClick:()=>i(!1),children:"Later"})]})]})}):null},aL=()=>/iP(ad|hone|od)/.test(navigator.userAgent)&&!("standalone"in navigator&&navigator.standalone),oL=()=>{const[n,e]=S.useState(!1);if(S.useEffect(()=>{try{const r=!!localStorage.getItem("spv_install_dismissed"),i=!!localStorage.getItem("spv_install_banner_dismissed"),o=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;aL()&&r&&!i&&!o&&e(!0)}catch{}},[]),!n)return null;const s=()=>{try{localStorage.setItem("spv_install_banner_dismissed","1")}catch{}e(!1)};return t.jsxs("div",{className:"fixed left-4 right-4 bottom-4 z-50 flex items-center justify-between bg-white/10 backdrop-blur-sm border border-white/10 rounded-xl p-3 gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-white/8 rounded flex items-center justify-center",children:""}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold",children:"Install app for the best experience"}),t.jsx("div",{className:"text-xs text-gray-300",children:"Tap Share  Add to Home Screen"})]})]}),t.jsx("div",{children:t.jsx("button",{onClick:s,className:"text-sm text-gray-200 px-2 py-1 rounded",children:"X"})})]})},lL=()=>{const{products:n}=vt(),[e,s]=S.useState(""),[r,i]=S.useState(null),[o,c]=S.useState(""),[u,f]=S.useState(""),[h,y]=S.useState(""),[v,N]=S.useState(""),[T,k]=S.useState([]);S.useEffect(()=>{const F=localStorage.getItem("vaultItems");F&&k(JSON.parse(F))},[]);const _=n.filter(F=>F.name.toLowerCase().includes(e.toLowerCase())),P=()=>{if(!r||!o||!u||!h)return;const F={id:Date.now().toString(),productId:r.id,productName:r.name,productImage:r.images[0],vaultPriceZAR:parseFloat(o),vaultPriceUSD:parseFloat(u),vaultStock:parseInt(h),goLiveDate:v||new Date().toISOString().split("T")[0],isActive:!1},K=[...T,F];k(K),localStorage.setItem("vaultItems",JSON.stringify(K)),i(null),c(""),f(""),y(""),N("")},L=F=>{const K=T.map(ee=>ee.id===F?{...ee,isActive:!ee.isActive}:ee);k(K),localStorage.setItem("vaultItems",JSON.stringify(K))},z=F=>{const K=T.filter(ee=>ee.id!==F);k(K),localStorage.setItem("vaultItems",JSON.stringify(K))};return t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-3",children:[t.jsx(Ot,{className:"text-yellow-400",size:28}),"Vault Management"]})}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-6 flex items-center gap-3",children:[t.jsx(rn,{size:20,className:"text-green-400"}),"Add Product to Vault"]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Search & Select Product"}),t.jsxs("div",{className:"relative",children:[t.jsx(ca,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 pl-10 text-white",value:e,onChange:F=>s(F.target.value)})]})]}),t.jsx("div",{className:"max-h-64 overflow-y-auto bg-zinc-800 rounded border border-gray-600",children:_.map(F=>t.jsx("div",{className:`p-3 border-b border-gray-700 cursor-pointer hover:bg-zinc-700 ${(r==null?void 0:r.id)===F.id?"bg-cyan-900/30 border-cyan-500":""}`,onClick:()=>i(F),children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:F.images[0],className:"w-12 h-12 rounded object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-medium",children:F.name}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Stock: ",F.stock]})]})]})},F.id))})]}),t.jsxs("div",{className:"space-y-4",children:[r&&t.jsxs("div",{className:"bg-zinc-800 p-4 rounded border border-cyan-500/30",children:[t.jsx("h4",{className:"text-white font-medium mb-2",children:"Selected Product"}),t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("img",{src:r.images[0],className:"w-16 h-16 rounded object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white",children:r.name}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Stock: ",r.stock]})]})]}),t.jsxs("div",{className:"bg-zinc-700 p-3 rounded border border-gray-600",children:[t.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Current Product Price"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("p",{className:"text-green-400 font-bold",children:["R",r.price]}),t.jsxs("p",{className:"text-blue-400 font-bold",children:["$",r.priceUSD]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Price (ZAR)"}),t.jsx("input",{type:"number",placeholder:"e.g., 10",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:o,onChange:F=>c(F.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Price (USD)"}),t.jsx("input",{type:"number",placeholder:"e.g., 1",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:u,onChange:F=>f(F.target.value)})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Stock Quantity"}),t.jsx("input",{type:"number",placeholder:"e.g., 50",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:h,onChange:F=>y(F.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Go Live Date"}),t.jsx("input",{type:"date",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:v,onChange:F=>N(F.target.value)})]}),t.jsxs("button",{onClick:P,disabled:!r||!o||!u||!h,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-gray-600 text-white font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:[t.jsx(rn,{size:16}),"Add to Vault Batch"]})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-6 flex items-center gap-3",children:[t.jsx(_c,{size:20,className:"text-purple-400"}),"Vault Items (",T.length,")"]}),t.jsxs("div",{className:"space-y-4",children:[T.map(F=>t.jsx("div",{className:"bg-zinc-800 p-4 rounded border border-gray-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:F.productImage,className:"w-16 h-16 rounded object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-medium",children:F.productName}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Vault: R",F.vaultPriceZAR," / $",F.vaultPriceUSD," | Stock: ",F.vaultStock]}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Go Live: ",F.goLiveDate]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${F.isActive?"bg-green-900/30 text-green-400":"bg-gray-700 text-gray-400"}`,children:F.isActive?"ACTIVE":"INACTIVE"})}),t.jsx("button",{onClick:()=>L(F.id),className:`px-3 py-1 rounded text-xs font-bold transition-colors ${F.isActive?"bg-red-600 hover:bg-red-500 text-white":"bg-green-600 hover:bg-green-500 text-white"}`,children:F.isActive?"Deactivate":"Activate"}),t.jsx("button",{onClick:()=>z(F.id),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors",children:"Remove"})]})]})},F.id)),T.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-400",children:[t.jsx(Ot,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No items in the vault yet. Add some products above!"})]})]})]})]})},cL=()=>{const{user:n,currency:e,addToCart:s,products:r}=vt(),i=cn(),[o,c]=S.useState([]),[u,f]=S.useState([]),[h,y]=S.useState(""),[v,N]=S.useState(""),[T,k]=S.useState("newest"),[_,P]=S.useState(!1),[L,z]=S.useState(!1),[F,K]=S.useState(null);S.useEffect(()=>{const C=localStorage.getItem("vaultItems");if(C){const I=JSON.parse(C).filter($=>$.isActive);c(I),f(I)}},[]),S.useEffect(()=>{let C=o;h&&(C=C.filter(I=>I.productName.toLowerCase().includes(h.toLowerCase()))),v&&(C=C.filter(I=>I.productName.toLowerCase().includes(v.toLowerCase()))),C.sort((I,$)=>{switch(T){case"price-low":return(e==="ZAR"?I.vaultPriceZAR:I.vaultPriceUSD)-(e==="ZAR"?$.vaultPriceZAR:$.vaultPriceUSD);case"price-high":return(e==="ZAR"?$.vaultPriceZAR:$.vaultPriceUSD)-(e==="ZAR"?I.vaultPriceZAR:I.vaultPriceUSD);case"newest":default:return new Date($.goLiveDate).getTime()-new Date(I.goLiveDate).getTime()}}),f(C)},[o,h,v,T,e]);const ee=n.membershipTier==="deluxe"||n.membershipTier==="Deluxe Boss"||n.membershipTier==="Deluxe Vault",W=C=>{if(!ee){K(C),z(!0);return}const I=n.membershipMonths||0;let $=5;I>=3?$=10:I>=2&&($=7);const O=JSON.parse(localStorage.getItem(`vaultPurchases_${n.id}_${new Date().getMonth()}`)||"[]");if(O.length>=$){const V=I>=3?"You have reached your monthly limit of 10 Vault items. Keep your subscription active for unlimited access!":`You have reached your limit of ${$} Vault items this month. Keep your subscription to unlock ${I>=2?"unlimited":"7"} items next month!`;alert(V);return}s({id:C.id,code:`VAULT-${C.id}`,name:C.productName,slug:`vault-${C.id}`,description:C.productName,price:e==="ZAR"?C.vaultPriceZAR:C.vaultPriceUSD,priceUSD:e==="USD"?C.vaultPriceUSD:C.vaultPriceZAR/18,costPrice:e==="ZAR"?C.vaultPriceZAR:C.vaultPriceUSD,category:"Vault",type:"Other",status:"published",stock:1,images:[C.productImage],tags:["vault"],createdAt:new Date().toISOString()},{quantity:1}),O.push(C.id),localStorage.setItem(`vaultPurchases_${n.id}_${new Date().getMonth()}`,JSON.stringify(O)),alert("Added to cart!")},D=C=>{z(!1),C==="subscribe"?i("/membership"):alert("Redirecting to regular product page...")};return t.jsxs("div",{className:"py-8 space-y-8",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-center gap-3",children:[t.jsx(Ot,{className:"text-yellow-400",size:40}),t.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"THE SECRET VAULT"}),t.jsx("button",{onClick:()=>P(!_),className:"text-gray-400 hover:text-white transition-colors",children:t.jsx(fu,{size:20})})]}),t.jsx("p",{className:"font-architects text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"Exclusive Clearance & Samples for Deluxe Members."}),_&&t.jsxs("div",{className:"bg-zinc-900 border border-cyan-500/30 p-4 rounded-lg max-w-md mx-auto text-left",children:[t.jsx("h4",{className:"text-cyan-400 font-bold mb-2",children:"How The Vault Works:"}),t.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[t.jsxs("li",{children:[" ",t.jsx("strong",{className:"text-white",children:"Exclusive Access:"})," Only Deluxe Members can purchase."]}),t.jsxs("li",{children:[" ",t.jsx("strong",{className:"text-white",children:"Loyalty Limits:"})," Month 1 members can buy 5 items. Limits increase every month."]}),t.jsxs("li",{children:[" ",t.jsx("strong",{className:"text-white",children:"First Come, First Serve:"})," Stock is limited. Once it's gone, it's gone."]}),t.jsxs("li",{children:[" ",t.jsx("strong",{className:"text-white",children:"As-Is:"})," Items may be samples or have minor imperfections."]})]})]})]}),t.jsx("div",{className:"bg-zinc-900 border border-gray-700 p-4 rounded-xl sticky top-4 z-10",children:t.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Type"}),t.jsxs("select",{value:h,onChange:C=>y(C.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[t.jsx("option",{value:"",children:"All Types"}),t.jsx("option",{value:"earring",children:"Earrings"}),t.jsx("option",{value:"ring",children:"Rings"}),t.jsx("option",{value:"necklace",children:"Necklaces"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Color"}),t.jsxs("select",{value:v,onChange:C=>N(C.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[t.jsx("option",{value:"",children:"All Colors"}),t.jsx("option",{value:"silver",children:"Silver"}),t.jsx("option",{value:"gold",children:"Gold"}),t.jsx("option",{value:"rose",children:"Rose Gold"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Sort By"}),t.jsxs("select",{value:T,onChange:C=>k(C.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[t.jsx("option",{value:"newest",children:"Newest Added"}),t.jsx("option",{value:"price-low",children:"Price: Low to High"}),t.jsx("option",{value:"price-high",children:"Price: High to Low"})]})]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:u.map(C=>t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-4 hover:border-cyan-500/50 transition-colors",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:C.productImage,className:"w-full h-48 object-cover rounded-lg mb-4",alt:""}),C.vaultStock<5&&t.jsx("div",{className:"absolute top-2 right-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded",children:"Almost Gone!"})]}),t.jsx("h3",{className:"text-white font-medium mb-2",children:C.productName}),t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("span",{className:"text-2xl font-bold text-green-400",children:e==="ZAR"?`R${C.vaultPriceZAR}`:`$${C.vaultPriceUSD}`}),t.jsx("span",{className:"text-gray-500 line-through text-sm",children:(()=>{const I=r.find($=>$.id===C.productId);return I?e==="ZAR"?`R${I.price}`:`$${I.priceUSD}`:e==="ZAR"?`R${C.vaultPriceZAR*10}`:`$${C.vaultPriceUSD*10}`})()})]}),t.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:["Stock: ",C.vaultStock," left"]}),t.jsx("button",{onClick:()=>W(C),className:`w-full py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2 ${ee?"bg-cyan-600 hover:bg-cyan-500 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:ee?t.jsxs(t.Fragment,{children:[t.jsx(ul,{size:16}),"ADD TO CART"]}):t.jsxs(t.Fragment,{children:[t.jsx(ia,{size:16})," UNLOCK PRICE"]})})]},C.id))}),u.length===0&&t.jsxs("div",{className:"text-center py-16",children:[t.jsx(Ot,{size:64,className:"mx-auto mb-4 text-gray-600"}),t.jsx("h3",{className:"text-xl font-bold text-gray-400 mb-2",children:"The Vault is Empty"}),t.jsx("p",{className:"text-gray-500",children:"Check back later for exclusive deals!"})]}),L&&F&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>z(!1)}),t.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-md w-full shadow-[0_0_50px_rgba(236,72,153,0.4)]",children:[t.jsx("button",{onClick:()=>z(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:""}),t.jsxs("div",{className:"text-center mb-6",children:[t.jsx(ia,{size:48,className:"mx-auto mb-4 text-yellow-400"}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Access Denied"}),t.jsx("p",{className:"text-gray-300",children:"You have found The Secret Vault, but you don't have the key!"})]}),t.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg mb-6",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[t.jsx("img",{src:F.productImage,className:"w-16 h-16 rounded object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-medium",children:F.productName}),t.jsxs("p",{className:"text-green-400 font-bold",children:["Vault Price: ",e==="ZAR"?`R${F.vaultPriceZAR}`:`$${F.vaultPriceUSD}`]})]})]}),t.jsxs("p",{className:"text-sm text-gray-300",children:["This ",t.jsx("strong",{children:e==="ZAR"?`R${F.vaultPriceZAR}`:`$${F.vaultPriceUSD}`})," deal is reserved exclusively for Deluxe Members."]})]}),t.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"Want this item? Subscribe to the Deluxe Package today and get instant access to the Vault, plus R150 monthly store credit."}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>D("subscribe"),className:"w-full py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-lg transition-colors",children:"BECOME A DELUXE MEMBER - R199 / $25"}),t.jsx("button",{onClick:()=>D("payfull"),className:"w-full py-2 text-gray-400 hover:text-white text-sm underline",children:"No thanks, I'll pay full price"})]})]})]})]})},dL=()=>{const{user:n}=vt(),[e,s]=S.useState(""),[r,i]=S.useState([]),[o,c]=S.useState(null),[u,f]=S.useState(!1),[h,y]=S.useState(!1),[v,N]=S.useState(""),[T,k]=S.useState(7),[_,P]=S.useState(""),[L,z]=S.useState(!1),[F,K]=S.useState(0),[ee,W]=S.useState([]),[D,C]=S.useState(null),[I,$]=S.useState(!1),[O,V]=S.useState(!0),[A,se]=S.useState([]),fe=S.useRef(null),[Se,Ie]=S.useState(20),[le,be]=S.useState("all"),[ve,Y]=S.useState("all"),de=["Spoil Me","Basic","Premium","Deluxe Boss","Insider Club","Gold Member","Deluxe Vault"],te=async()=>{if(!o&&!_||!v||!T||!functions)return;let Ne=o==null?void 0:o.id;if(!Ne&&_)try{const Qe=await Bs("users",{filters:{email:_},limit:1});if(!Qe||Qe.length===0){alert("User not found with that email.");return}Ne=Qe[0].id}catch(Qe){console.error("Error finding user:",Qe),alert("Error finding user.");return}try{await Xi("grantTrial",{userId:Ne,plan:v,days:T}),alert("Trial granted successfully!"),y(!1),c(null),N(""),k(7),P("")}catch(Qe){console.error("Error granting trial:",Qe),alert("Failed to grant trial")}},xe=async()=>{if(!(!o||!functions))try{await Xi("adjustStoreCredit",{userId:o.id,amount:F}),alert("Store credit adjusted successfully!"),z(!1),c(null),K(0)}catch(Ne){console.error("Error adjusting credit:",Ne),alert("Failed to adjust credit")}},q=Ne=>{switch(Ne){case"active":return"text-green-400";case"trial":return"text-blue-400";case"expired":return"text-red-400";case"cancelled":return"text-gray-400";default:return"text-gray-400"}},Ae=Ne=>{switch(Ne){case"active":return t.jsx(Xa,{className:"w-4 h-4"});case"trial":return t.jsx(cr,{className:"w-4 h-4"});case"expired":return t.jsx(zp,{className:"w-4 h-4"});default:return t.jsx(zp,{className:"w-4 h-4"})}},Pe=async()=>{$(!0);try{const Ne=await Bs("users",{orderBy:{column:"created_at",ascending:!1},limit:20});W(Ne||[]),V(((Ne==null?void 0:Ne.length)||0)===20)}catch(Ne){console.error("Error loading users:",Ne)}finally{$(!1)}},$e=async()=>{if(!(!D||I)){$(!0);try{const Ne=ee.length,Qe=await Bs("users",{orderBy:{column:"created_at",ascending:!1},limit:20,offset:Ne});W(yt=>[...yt,...Qe||[]]),V(((Qe==null?void 0:Qe.length)||0)===20)}catch(Ne){console.error("Error loading more:",Ne)}finally{$(!1)}}},tt=async Ne=>{if(s(Ne),!Ne){Pe();return}const Qe=await Bs("users",{filters:{email:Ne},limit:20});W(Qe||[]),V(!1)},ht=Ne=>{if(s(Ne),!Ne.trim()){se([]);return}fe.current&&clearTimeout(fe.current),fe.current=setTimeout(()=>{(async()=>{try{const Ut=(await Bs("users",{orderBy:{column:"created_at",ascending:!1},limit:50})||[]).map(oe=>oe.email).filter(oe=>oe&&oe.toLowerCase().includes(Ne.toLowerCase())).slice(0,10);se(Ut)}catch(yt){console.error("Failed to fetch suggestions:",yt),se([])}})()},300)},qt=async()=>{$(!0),se([]);try{if(e){const Qe=(await Bs("users",{filters:{email:e},limit:Se})||[]).filter(yt=>!(le==="ZA"&&(yt.country||"").toLowerCase()!=="south africa"||le==="other"&&(yt.country||"").toLowerCase()==="south africa"||ve==="buyers"&&(yt.ordersCount||0)<=0));W(Qe),V(!1),Qe.length===0&&alert("No users found matching these filters.")}else{const Ne=await Bs("users",{orderBy:{column:"created_at",ascending:!1},limit:Se}),Qe=(Ne||[]).filter(yt=>!(le==="ZA"&&(yt.country||"").toLowerCase()!=="south africa"||le==="other"&&(yt.country||"").toLowerCase()==="south africa"||ve==="buyers"&&(yt.ordersCount||0)<=0));W(Qe),V(((Ne==null?void 0:Ne.length)||0)===Se),Qe.length===0&&alert("No users found matching these filters.")}}catch(Ne){console.error("Error applying filters:",Ne),Ne.message.includes("requires an index")?alert("System Warning: This specific filter combination requires a new Database Index. Open Console (F12) and click the Firebase link."):alert("Failed to fetch. "+Ne.message)}finally{$(!1)}};return S.useEffect(()=>{Pe()},[]),t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Member Management"}),t.jsx("p",{className:"text-gray-400",children:"Search users and manage their membership benefits"})]}),t.jsx("div",{className:"bg-zinc-900 p-6 rounded-lg border border-zinc-800 mb-8",children:t.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Search Email"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Start typing email...",value:e,onChange:Ne=>ht(Ne.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white outline-none focus:border-gold"}),A.length>0&&t.jsx("div",{className:"absolute top-full left-0 w-full bg-zinc-800 border border-zinc-700 rounded-b shadow-xl z-50 max-h-40 overflow-y-auto",children:A.map(Ne=>t.jsx("div",{onClick:()=>{s(Ne),se([]),tt(Ne)},className:"p-2 hover:bg-zinc-700 cursor-pointer text-sm text-gray-300 border-b border-zinc-700/50",children:Ne},Ne))})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Region"}),t.jsxs("select",{value:le,onChange:Ne=>be(Ne.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white",children:[t.jsx("option",{value:"all",children:" All Regions"}),t.jsx("option",{value:"ZA",children:" South Africa"}),t.jsx("option",{value:"other",children:" International"})]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Activity"}),t.jsxs("select",{value:ve,onChange:Ne=>Y(Ne.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white",children:[t.jsx("option",{value:"all",children:"Everyone"}),t.jsx("option",{value:"buyers",children:" Buyers Only"})]})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:qt,disabled:I,className:"w-full bg-gold hover:bg-yellow-600 text-black font-bold p-3 rounded flex items-center justify-center gap-2 transition-all",children:I?"Processing...":t.jsxs(t.Fragment,{children:[t.jsx(ca,{size:18})," RUN SEARCH"]})})})]})}),r.length>0&&t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Search Results"}),t.jsx("div",{className:"space-y-3",children:r.map(Ne=>t.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors cursor-pointer",onClick:()=>c(Ne),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx($r,{className:"w-5 h-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-medium",children:Ne.email}),t.jsx("p",{className:"text-gray-400 text-sm",children:Ne.displayName||"No display name"})]})]}),t.jsxs("div",{className:`flex items-center gap-2 ${q(Ne.membershipStatus||"none")}`,children:[Ae(Ne.membershipStatus||"none"),t.jsx("span",{className:"text-sm capitalize",children:Ne.membershipStatus||"None"})]})]}),Ne.membershipTier&&t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsx(Ot,{className:"w-4 h-4 text-yellow-400"}),t.jsx("span",{className:"text-gray-300 text-sm",children:Ne.membershipTier})]})]},Ne.id))})]}),o&&t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"bg-zinc-800 border border-cyan-500 rounded-lg p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"User Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"User Information"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Email:"})," ",o.email]}),t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Name:"})," ",o.displayName||"N/A"]}),t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Status:"}),t.jsx("span",{className:`ml-2 ${q(o.membershipStatus||"none")}`,children:o.membershipStatus||"None"})]}),t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Plan:"})," ",o.membershipTier||"None"]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Store Credit"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Balance:"}),o.creditCurrency==="USD"?"$":"R",o.storeCredit||0]}),t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Currency:"})," ",o.creditCurrency||"ZAR"]})]})]})]}),t.jsxs("div",{className:"flex gap-4 mt-6",children:[t.jsx("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),t.jsx("button",{onClick:()=>z(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Adjust Credit"})]})]})}),h&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Grant Trial Membership"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-300 mb-2",children:"Select Plan"}),t.jsxs("select",{value:v,onChange:Ne=>N(Ne.target.value),className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"",children:"Choose a plan..."}),de.map(Ne=>t.jsx("option",{value:Ne,children:Ne},Ne))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-300 mb-2",children:"Trial Duration (Days)"}),t.jsx("input",{type:"number",value:T,onChange:Ne=>k(parseInt(Ne.target.value)),min:"1",max:"365",className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-300 mb-2",children:"User Email"}),t.jsx("input",{type:"email",value:_,onChange:Ne=>P(Ne.target.value),className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",placeholder:"Enter user email"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:te,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),t.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),L&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Adjust Store Credit"}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-300 mb-2",children:"Amount (use negative for deduction)"}),t.jsx("input",{type:"number",value:F,onChange:Ne=>K(parseFloat(Ne.target.value)),step:"0.01",className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500"})]})}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:xe,className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Adjust Credit"}),t.jsx("button",{onClick:()=>z(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[t.jsx(Ot,{size:20,className:"text-purple-400"}),"Membership Tiers & Benefits"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Spoil Me Package"}),t.jsx("span",{className:"text-xs bg-pink-900/30 text-pink-400 border border-pink-500/30 px-2 py-1 rounded",children:"Popular"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Ultimate luxury experience with exclusive perks"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"R19"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"R25/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"5% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Giveaway:"}),t.jsx("span",{className:"text-white",children:"Win R500"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"412/500 (88 left)"})]})]}),t.jsx("button",{onClick:()=>{N("Spoil Me"),y(!0)},className:"w-full py-2 bg-pink-600 hover:bg-pink-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Basic Package"}),t.jsx("span",{className:"text-xs bg-blue-900/30 text-blue-400 border border-blue-500/30 px-2 py-1 rounded",children:"Standard"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Essential benefits for regular shoppers"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"R49"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"R50/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"R100"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Drop:"}),t.jsx("span",{className:"text-white",children:"2x Entries"})]})]}),t.jsx("button",{onClick:()=>{N("Basic"),y(!0)},className:"w-full py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Premium Package"}),t.jsx("span",{className:"text-xs bg-green-900/30 text-green-400 border border-green-500/30 px-2 py-1 rounded",children:"Popular"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Enhanced shopping experience"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"R99"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"R100/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Holiday Gifts:"}),t.jsx("span",{className:"text-white",children:"Free small gift"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"R150"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),t.jsx("span",{className:"text-white",children:"Yes"})]})]}),t.jsx("button",{onClick:()=>{N("Premium"),y(!0)},className:"w-full py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:'Deluxe "Boss" Package'}),t.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-400 border border-yellow-500/30 px-2 py-1 rounded",children:"Elite"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"VIP treatment with maximum benefits"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"R199"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"R150/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"R300"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),t.jsx("span",{className:"text-white",children:"Yes"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Vault Access:"}),t.jsx("span",{className:"text-white",children:"Limited"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"498/750 (252 left)"})]})]}),t.jsx("button",{onClick:()=>{N("Deluxe Boss"),y(!0)},className:"w-full py-2 bg-yellow-600 hover:bg-yellow-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Insider Club"}),t.jsx("span",{className:"text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-2 py-1 rounded",children:"High Demand"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Early access to new products and promotions"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"$5.00"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"$5.00/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"5% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Giveaway:"}),t.jsx("span",{className:"text-white",children:"Win $50"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"412/500 (88 left)"})]})]}),t.jsx("button",{onClick:()=>{N("Insider Club"),y(!0)},className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Gold Member"}),t.jsx("span",{className:"text-xs bg-orange-900/30 text-orange-400 border border-orange-500/30 px-2 py-1 rounded",children:"Critical"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Gold standard benefits and rewards"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"$12.00"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"$12.00/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"$20"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),t.jsx("span",{className:"text-white",children:"Yes"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"485/500 (15 left)"})]})]}),t.jsx("button",{onClick:()=>{N("Gold Member"),y(!0)},className:"w-full py-2 bg-orange-600 hover:bg-orange-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700 col-span-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:'Deluxe "Vault" Access'}),t.jsx("span",{className:"text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-2 py-1 rounded",children:"Ultimate"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Access to exclusive vault items with maximum benefits"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3",children:[t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"$25.00"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"$15.00/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"$40"})]})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),t.jsx("span",{className:"text-white",children:"Yes"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Vault Access:"}),t.jsx("span",{className:"text-white",children:"24hrs Early"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly Giveaways:"}),t.jsx("span",{className:"text-white",children:"Entry"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Winners:"}),t.jsx("span",{className:"text-white",children:"Eligible"})]})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Loyalty Ladder:"}),t.jsx("span",{className:"text-white",children:"Month 1: 5 items"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400"}),t.jsx("span",{className:"text-white",children:"Month 2: 7 items"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400"}),t.jsx("span",{className:"text-white",children:"Month 3: 10 items"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400"}),t.jsx("span",{className:"text-white",children:"Month 4+: Unlimited"})]})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"498/750 (252 left)"})]}),t.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Shop clearance, samples, and slight imperfections starting at R10. Sold as-is."})]})]}),t.jsx("button",{onClick:()=>{N("Deluxe Vault"),y(!0)},className:"w-full py-2 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]})]})]}),t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:["All Members (",ee.length,")"]}),t.jsx("div",{className:"space-y-3",children:ee.map(Ne=>t.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors cursor-pointer",onClick:()=>c(Ne),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx($r,{className:"w-5 h-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-medium",children:Ne.email}),t.jsx("p",{className:"text-gray-400 text-sm",children:Ne.displayName||Ne.name||"No display name"})]})]}),t.jsxs("div",{className:`flex items-center gap-2 ${q(Ne.membershipStatus||"none")}`,children:[Ae(Ne.membershipStatus||"none"),t.jsx("span",{className:"text-sm capitalize",children:Ne.membershipStatus||"None"})]})]}),Ne.membershipTier&&t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsx(Ot,{className:"w-4 h-4 text-yellow-400"}),t.jsx("span",{className:"text-gray-300 text-sm",children:Ne.membershipTier})]})]},Ne.id))}),t.jsx("div",{className:"mt-6 flex justify-center",children:I?t.jsx("div",{className:"text-gold animate-pulse",children:"Loading members..."}):O&&!e&&t.jsx("button",{onClick:$e,className:"px-6 py-2 bg-zinc-800 border border-zinc-700 hover:border-gold text-white rounded-full text-sm transition-all",children:"Load More Members"})})]})]})},Tn=({checked:n,onChange:e,className:s,children:r})=>t.jsx("button",{type:"button",onClick:e,className:`${s} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:r}),uL=()=>{const{user:n}=vt(),[e,s]=S.useState([]),[r,i]=S.useState([]),[o,c]=S.useState(!0),[u,f]=S.useState(""),[h,y]=S.useState([]),v=S.useRef(null),[N,T]=S.useState(null),[k,_]=S.useState(!1),[P,L]=S.useState(null),[z,F]=S.useState({dashboard:!0,products:!1,orders:!1,categories:!1,members:!1,users:!1,giftCards:!1,social:!1,affiliates:!1,winners:!1,expenses:!1,vault:!1,artists:!1}),[K,ee]=S.useState("all"),[W,D]=S.useState("all"),[C,I]=S.useState(""),[$,O]=S.useState(!1),[V,A]=S.useState(null),[se,fe]=S.useState("basic"),[Se,Ie]=S.useState(7),[le,be]=S.useState(1),[ve,Y]=S.useState(1),de=10,[te,xe]=S.useState(!1),[q,Ae]=S.useState(null),[Pe,$e]=S.useState("none"),[tt,ht]=S.useState(!1),[qt,Ne]=S.useState(null),[Qe,yt]=S.useState("basic");S.useEffect(()=>{(async()=>{c(!0);try{try{const J=await fetch("/api/users");if(J.ok){const je=await J.json(),jt=je.users||je;s(jt),i(jt)}else{const je=await queryDocuments("users",{orderBy:{column:"created_at",ascending:!1},limit:500});s(je||[]),i(je||[])}}catch(J){console.warn("Failed to fetch users via API, falling back to supabase users table:",J);const je=await queryDocuments("users",{orderBy:{column:"created_at",ascending:!1},limit:500});s(je||[]),i(je||[])}}catch(J){console.error("Error loading users:",J)}finally{c(!1)}})()},[]),S.useEffect(()=>{let ye=e;u.trim()&&(ye=ye.filter(ft=>{var Wt,Ft,Ss,as;return((Wt=ft.email)==null?void 0:Wt.toLowerCase().includes(u.toLowerCase()))||((Ft=ft.displayName)==null?void 0:Ft.toLowerCase().includes(u.toLowerCase()))||((Ss=ft.firstName)==null?void 0:Ss.toLowerCase().includes(u.toLowerCase()))||((as=ft.lastName)==null?void 0:as.toLowerCase().includes(u.toLowerCase()))})),K==="ZA"?ye=ye.filter(ft=>ft.country==="South Africa"):K==="other"&&(ye=ye.filter(ft=>ft.country!=="South Africa")),W==="buyers"&&(ye=ye.filter(ft=>(ft.totalOrders||0)>0)),C&&(ye=ye.filter(ft=>ft.membershipStatus===C)),ye.sort((ft,Wt)=>{var as,Me;if(ft.isActive===!1&&Wt.isActive!==!1)return-1;if(Wt.isActive===!1&&ft.isActive!==!1)return 1;const Ft=((as=ft.createdAt)==null?void 0:as.seconds)||0;return(((Me=Wt.createdAt)==null?void 0:Me.seconds)||0)-Ft});const J=(le-1)*de,je=J+de,jt=ye.slice(J,je);i(jt),Y(Math.ceil(ye.length/de))},[u,K,W,C,e,le]);const Ut=async ye=>{try{await Xi("deleteUser",{userId:ye,should_soft_delete:!1});const J=e.filter(je=>je.id!==ye);s(J),i(J.filter(je=>{var jt,ft,Wt,Ft;return!u.trim()||((jt=je.email)==null?void 0:jt.toLowerCase().includes(u.toLowerCase()))||((ft=je.displayName)==null?void 0:ft.toLowerCase().includes(u.toLowerCase()))||((Wt=je.firstName)==null?void 0:Wt.toLowerCase().includes(u.toLowerCase()))||((Ft=je.lastName)==null?void 0:Ft.toLowerCase().includes(u.toLowerCase()))})),alert("User permanently deleted successfully!"),T(null)}catch(J){console.error("Error deleting user:",J),alert("Failed to delete user. Please try again.")}},oe=ye=>{switch(ye){case"active":return"text-green-400";case"trial":return"text-blue-400";case"expired":return"text-red-400";case"cancelled":return"text-gray-400";default:return"text-gray-400"}},De=ye=>{switch(ye){case"active":return"";case"trial":return"";case"expired":return"";case"cancelled":return"";default:return""}},Be=ye=>{F(J=>({...J,[ye]:!J[ye]}))},ke=ye=>{L(ye);const J=ye.adminPermissions||{dashboard:!0,products:!1,orders:!1,categories:!1,members:!1,users:!1,giftCards:!1,social:!1,affiliates:!1,winners:!1,expenses:!1,vault:!1,artists:!1};F(J),_(!0)},We=async()=>{if(P)try{await di("users",P.id,{adminPermissions:z}),alert("Admin permissions updated successfully!"),_(!1),L(null)}catch(ye){console.error("Error updating admin permissions:",ye),alert("Failed to update permissions. Please try again.")}},Nt=ye=>{f(ye),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{be(1)},300)};return t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Users Management"}),t.jsx("p",{className:"text-gray-400",children:"Manage all registered users and their accounts"}),(n==null?void 0:n.email)==="spoilmevintagediy@gmail.com"&&t.jsxs("button",{onClick:()=>window.location.href="/#/artist-partnership",className:"mt-4 px-6 py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[t.jsx(Ko,{size:16}),"Apply as Artist (Test Flow)"]})]}),t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{className:"md:col-span-2 relative",children:[t.jsx(ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search by name or email...",value:u,onChange:ye=>Nt(ye.target.value),className:"w-full pl-10 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ON,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsxs("select",{value:K,onChange:ye=>ee(ye.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"all",children:"All Regions"}),t.jsx("option",{value:"ZA",children:"South Africa"}),t.jsx("option",{value:"other",children:"Other Regions"})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ic,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsxs("select",{value:W,onChange:ye=>D(ye.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"all",children:"All Users"}),t.jsx("option",{value:"buyers",children:"Buyers"})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(La,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsxs("select",{value:C,onChange:ye=>I(ye.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"trial",children:"Trial"}),t.jsx("option",{value:"expired",children:"Expired"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(u||K!=="all"||W!=="all"||C)&&t.jsx("div",{className:"mt-2 text-center",children:t.jsx("button",{onClick:()=>{f(""),ee("all"),D("all"),I("")},className:"text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Clear all filters"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg border bg-blue-900/30 text-blue-400 border-blue-500/20",children:t.jsx(qs,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Users"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg border bg-green-900/30 text-green-400 border-green-500/20",children:t.jsx(Ot,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Active Members"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.filter(ye=>ye.membershipStatus==="active").length})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg border bg-blue-900/30 text-blue-400 border-blue-500/20",children:t.jsx(La,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Trial Users"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.filter(ye=>ye.membershipStatus==="trial").length})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg border bg-gray-900/30 text-gray-400 border-gray-500/20",children:t.jsx($r,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Free Users"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.filter(ye=>!ye.membershipTier).length})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[t.jsx(qs,{size:20,className:"text-blue-400"}),"All Users (",r.length,")"]}),o?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"}),t.jsx("p",{className:"text-gray-400 mt-2",children:"Loading users..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.map(ye=>t.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:ye.firstName&&ye.lastName?`${ye.firstName.charAt(0)}${ye.lastName.charAt(0)}`.toUpperCase():ye.displayName?ye.displayName.charAt(0).toUpperCase():ye.email.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium text-white flex items-center gap-2",children:[ye.firstName&&ye.lastName?`${ye.firstName} ${ye.lastName}`:ye.displayName||"No Name",ye.isActive===!1&&t.jsx(mi,{size:16,className:"text-red-500"}),ye.membershipTier&&t.jsx("span",{className:"text-xs px-2 py-1 rounded bg-yellow-900/30 text-yellow-400",children:ye.membershipTier}),ye.email==="spoilmevintagediy@gmail.com"&&t.jsx("span",{className:"text-xs px-2 py-1 rounded bg-red-900/30 text-red-400 font-bold",children:"OWNER"})]}),t.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-1",children:[t.jsx(Sc,{size:12}),ye.email]}),t.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[ye.country&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[t.jsx(kc,{size:10}),ye.country]}),t.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[t.jsx("span",{children:De(ye.membershipStatus||"none")}),t.jsx("span",{className:oe(ye.membershipStatus||"none"),children:ye.membershipStatus||"Free User"})]}),ye.createdAt&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[t.jsx(La,{size:10}),new Date(ye.createdAt.seconds*1e3).toLocaleDateString()]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[ye.email==="spoilmevintagediy@gmail.com"&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>{Ae(ye),$e(ye.artistStatus||"none"),xe(!0)},className:"px-3 py-1 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(Ko,{size:12}),"Artist"]}),t.jsxs("button",{onClick:()=>{Ne(ye),yt(ye.membershipTier||"basic"),ht(!0)},className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(Ot,{size:12}),"Membership"]})]}),t.jsxs("button",{onClick:()=>{A(ye),fe("basic"),Ie(7),O(!0)},className:"px-3 py-1 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(La,{size:12}),"Grant Trial"]}),t.jsxs("button",{onClick:()=>ke(ye),className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(Ot,{size:12}),"Admin"]}),t.jsxs("button",{onClick:()=>T(ye.id),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(Or,{size:12}),"Delete"]})]})]}),t.jsxs("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[t.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[t.jsx("div",{className:"text-gray-400",children:"Store Credit"}),t.jsxs("div",{className:"text-white font-bold",children:[ye.creditCurrency==="USD"?"$":"R",ye.storeCredit||0]})]}),t.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[t.jsx("div",{className:"text-gray-400",children:"Loyalty Points"}),t.jsx("div",{className:"text-white font-bold",children:ye.loyaltyPoints||0})]}),t.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[t.jsx("div",{className:"text-gray-400",children:"Orders"}),t.jsx("div",{className:"text-white font-bold",children:ye.totalOrders||0})]}),t.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[t.jsx("div",{className:"text-gray-400",children:"Gender"}),t.jsx("div",{className:"text-white font-bold",children:ye.gender||"Not set"})]})]})]},ye.id))}),r.length===0&&!o&&t.jsx("div",{className:"text-center py-8 text-gray-400",children:u?"No users found matching your search.":"No users found in the system."})]})]}),t.jsxs("div",{className:"flex justify-center mt-4",children:[t.jsx("button",{onClick:()=>be(ye=>Math.max(ye-1,1)),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-l-lg",disabled:le===1,children:"Previous"}),t.jsxs("span",{className:"px-4 py-2 bg-gray-800 text-white",children:["Page ",le," of ",ve]}),t.jsx("button",{onClick:()=>be(ye=>Math.min(ye+1,ve)),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-r-lg",disabled:le===ve,children:"Next"})]}),N&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-red-900/50 text-red-500 rounded-lg",children:t.jsx(mi,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Delete User"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"This action cannot be undone."})]})]}),t.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to delete this user? This will permanently remove their account and all associated data."}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>Ut(N),className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white font-medium rounded-lg transition-colors",children:"Delete User"}),t.jsx("button",{onClick:()=>T(null),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),k&&P&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-blue-900/50 text-blue-500 rounded-lg",children:t.jsx(Ot,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Admin Permissions"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage user permissions"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Dashboard Access"}),t.jsxs(Tn,{checked:z.dashboard,onChange:()=>Be("dashboard"),className:`${z.dashboard?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable dashboard access"}),t.jsx("span",{className:`${z.dashboard?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Products Management"}),t.jsxs(Tn,{checked:z.products,onChange:()=>Be("products"),className:`${z.products?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable products management"}),t.jsx("span",{className:`${z.products?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Orders Management"}),t.jsxs(Tn,{checked:z.orders,onChange:()=>Be("orders"),className:`${z.orders?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable orders management"}),t.jsx("span",{className:`${z.orders?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Categories Management"}),t.jsxs(Tn,{checked:z.categories,onChange:()=>Be("categories"),className:`${z.categories?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable categories management"}),t.jsx("span",{className:`${z.categories?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Members Management"}),t.jsxs(Tn,{checked:z.members,onChange:()=>Be("members"),className:`${z.members?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable members management"}),t.jsx("span",{className:`${z.members?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Users Management"}),t.jsxs(Tn,{checked:z.users,onChange:()=>Be("users"),className:`${z.users?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable users management"}),t.jsx("span",{className:`${z.users?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Gift Cards Management"}),t.jsxs(Tn,{checked:z.giftCards,onChange:()=>Be("giftCards"),className:`${z.giftCards?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable gift cards management"}),t.jsx("span",{className:`${z.giftCards?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Social Media Management"}),t.jsxs(Tn,{checked:z.social,onChange:()=>Be("social"),className:`${z.social?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable social media management"}),t.jsx("span",{className:`${z.social?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Affiliates Management"}),t.jsxs(Tn,{checked:z.affiliates,onChange:()=>Be("affiliates"),className:`${z.affiliates?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable affiliates management"}),t.jsx("span",{className:`${z.affiliates?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Winners Management"}),t.jsxs(Tn,{checked:z.winners,onChange:()=>Be("winners"),className:`${z.winners?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable winners management"}),t.jsx("span",{className:`${z.winners?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Expenses Management"}),t.jsxs(Tn,{checked:z.expenses,onChange:()=>Be("expenses"),className:`${z.expenses?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable expenses management"}),t.jsx("span",{className:`${z.expenses?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Vault Access"}),t.jsxs(Tn,{checked:z.vault,onChange:()=>Be("vault"),className:`${z.vault?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable vault access"}),t.jsx("span",{className:`${z.vault?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Artists Management"}),t.jsxs(Tn,{checked:z.artists,onChange:()=>Be("artists"),className:`${z.artists?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable artists management"}),t.jsx("span",{className:`${z.artists?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]})]}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:We,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Permissions"}),t.jsx("button",{onClick:()=>_(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),$&&V&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-green-900/50 text-green-500 rounded-lg",children:t.jsx(La,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Trial User Settings"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage trial user details"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Trial Plan"}),t.jsxs("select",{value:se,onChange:ye=>fe(ye.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"basic",children:"Basic Plan"}),t.jsx("option",{value:"premium",children:"Premium Plan"}),t.jsx("option",{value:"deluxe",children:"Deluxe Plan"}),t.jsx("option",{value:"insider",children:"Insider Club"}),t.jsx("option",{value:"gold",children:"Gold Member"}),t.jsx("option",{value:"spoilme",children:"Spoil Me"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Trial Duration (days)"}),t.jsx("input",{type:"number",min:"1",value:Se,onChange:ye=>Ie(Number(ye.target.value)),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500"})]})]}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:async()=>{try{await Xi("grantTrial",{userId:V.id,plan:se,days:Se}),alert("Trial granted successfully!"),O(!1),A(null),window.location.reload()}catch(ye){console.error("Error granting trial:",ye),alert("Failed to grant trial. Please try again.")}},className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),t.jsx("button",{onClick:()=>O(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),te&&q&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-purple-900/50 text-purple-500 rounded-lg",children:t.jsx(Ko,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Artist Status"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage artist approval status"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Current Status"}),t.jsx("span",{className:`text-sm font-medium ${Pe==="approved"?"text-green-400":Pe==="rejected"?"text-red-400":"text-yellow-400"}`,children:Pe.charAt(0).toUpperCase()+Pe.slice(1)})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:()=>$e("approved"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${Pe==="approved"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[t.jsx(Ko,{size:16}),"Approve Artist"]}),t.jsxs("button",{onClick:()=>$e("rejected"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${Pe==="rejected"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[t.jsx(Or,{size:16}),"Reject Artist"]})]})]}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:async()=>{try{await Xi("updateArtistStatus",{userId:q.id,status:Pe}),alert("Artist status updated successfully!"),xe(!1),Ae(null),window.location.reload()}catch(ye){console.error("Error updating artist status:",ye),alert("Failed to update artist status. Please try again.")}},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Changes"}),t.jsx("button",{onClick:()=>xe(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),tt&&qt&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-yellow-900/50 text-yellow-500 rounded-lg",children:t.jsx(Ot,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Membership Tier"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage user membership tier"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Current Tier"}),t.jsx("span",{className:"text-sm font-medium text-yellow-400",children:Qe.charAt(0).toUpperCase()+Qe.slice(1)})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Change to"}),t.jsxs("select",{value:Qe,onChange:ye=>yt(ye.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"basic",children:"Basic"}),t.jsx("option",{value:"premium",children:"Premium"}),t.jsx("option",{value:"deluxe",children:"Deluxe"})]})]})]}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:async()=>{try{await Xi("updateMembershipTier",{userId:qt.id,tier:Qe}),alert("Membership tier updated successfully!"),ht(!1),Ne(null),window.location.reload()}catch(ye){console.error("Error updating membership tier:",ye),alert("Failed to update membership tier. Please try again.")}},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Changes"}),t.jsx("button",{onClick:()=>ht(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})})]})},hL=()=>{const{affiliateCode:n}=Rc(),{products:e,currency:s,addToCart:r,toggleWishlist:i}=vt(),[o,c]=S.useState(null),[u,f]=S.useState([]),[h,y]=S.useState(!0);S.useEffect(()=>{n&&(async()=>{try{const _={code:n,name:"Sarah Johnson",currency:"ZAR",storeConfig:{products:["product1","product2","product3","product4","product5"],strategy:{discount:10,commission:15},currency:"ZAR"}};c(_);const P=e.filter(z=>_.storeConfig.products.includes(z.id));f(P);const L={code:_.code,discountPercent:_.storeConfig.strategy.discount,commissionPercent:_.storeConfig.strategy.commission,currency:_.currency,expires:Date.now()+720*60*60*1e3};localStorage.setItem("spoilme_referral",JSON.stringify(L))}catch(_){console.error("Error loading affiliate store:",_)}finally{y(!1)}})()},[n,e]);const v=k=>{var P;if(!((P=o==null?void 0:o.storeConfig)!=null&&P.strategy))return k.price;const _=k.price*(o.storeConfig.strategy.discount/100);return k.price-_},N=k=>{var P;if(!((P=o==null?void 0:o.storeConfig)!=null&&P.strategy))return k.priceUSD;const _=k.priceUSD*(o.storeConfig.strategy.discount/100);return k.priceUSD-_},T=k=>{r(k,{quantity:1,price:v(k),priceUSD:N(k)})};return h?t.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-pink-500 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-400",children:"Loading VIP store..."})]})}):!o||u.length===0?t.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"VIP Store Not Found"}),t.jsx("p",{className:"text-gray-400 mb-6",children:"This affiliate store is not available or has been deactivated."}),t.jsx(Ve,{to:"/",className:"px-6 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg",children:"Shop Regular Store"})]})}):t.jsxs("div",{className:"min-h-screen bg-zinc-950",children:[t.jsx("div",{className:"bg-gradient-to-r from-pink-900/20 to-purple-900/20 border-b border-gray-800",children:t.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-2 rounded-full text-sm font-bold mb-4",children:[t.jsx(Ec,{size:16})," VIP ACCESS"]}),t.jsxs("h1",{className:"text-4xl md:text-6xl font-cherry text-white mb-4",children:["Welcome to ",o.name,"'s VIP Collection"]}),t.jsxs("p",{className:"text-xl text-gray-300 mb-6",children:["Exclusive ",o.storeConfig.strategy.discount,"% OFF everything in this curated collection"]}),t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-xl p-4 inline-block",children:t.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[t.jsx(BN,{size:20}),t.jsxs("span",{className:"font-bold",children:[o.storeConfig.strategy.discount,"% Discount Applied Automatically"]})]})})]})})}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(k=>t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl overflow-hidden hover:border-pink-500/50 transition-all group",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Ve,{to:`/product/${k.slug}`,children:t.jsx("img",{src:k.images[0],alt:k.name,className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300"})}),t.jsx("div",{className:"absolute top-4 left-4",children:t.jsxs("div",{className:"bg-pink-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:[o.storeConfig.strategy.discount,"% OFF"]})}),t.jsx("button",{onClick:()=>i(k.id),className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(Lm,{size:20})})]}),t.jsxs("div",{className:"p-6",children:[t.jsx(Ve,{to:`/product/${k.slug}`,children:t.jsx("h3",{className:"text-lg font-bold text-white mb-2 hover:text-pink-400 transition-colors",children:k.name})}),t.jsx("p",{className:"text-sm text-gray-400 mb-4",children:k.category}),t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((_,P)=>t.jsx(Rn,{size:14,fill:"currentColor"},P))}),t.jsx("span",{className:"text-sm text-gray-400",children:"(4.8)"})]}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("span",{className:"text-lg font-bold text-green-400",children:s==="ZAR"?`R${v(k)}`:`$${N(k)}`}),t.jsx("span",{className:"text-sm text-gray-500 line-through",children:s==="ZAR"?`R${k.price}`:`$${k.priceUSD}`})]}),t.jsxs("button",{onClick:()=>T(k),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2",children:[t.jsx(ul,{size:18}),"Add to Cart"]})]})]},k.id))}),t.jsx("div",{className:"mt-16 text-center",children:t.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-2xl p-8 max-w-2xl mx-auto",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Didn't find what you love?"}),t.jsxs("p",{className:"text-gray-400 mb-6",children:["Browse our full collection and enjoy ",o.storeConfig.strategy.discount,"% OFF on everything!"]}),t.jsxs(Ve,{to:"/",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl transition-all shadow-lg",children:["Browse Full Catalog ",t.jsx(Qs,{size:20})]})]})})]})]})},fL={bronze:{max:15,options:[{d:5,c:10},{d:10,c:5}]},silver:{max:20,options:[{d:10,c:10},{d:15,c:5}]},gold:{max:25,options:[{d:10,c:15},{d:15,c:10},{d:20,c:5}]},platinum:{max:30,options:[{d:10,c:20},{d:15,c:15},{d:20,c:10},{d:25,c:5}]}},pL=n=>n>=10001?"platinum":n>=5001?"gold":n>=2001?"silver":"bronze",mL=()=>{var K,ee;const{user:n,products:e,currency:s,updateUser:r}=vt(),[i,o]=S.useState([]),[c,u]=S.useState(""),[f,h]=S.useState(null),[y,v]=S.useState(!1),N=pL(((K=n.affiliateStats)==null?void 0:K.totalSalesValue)||0),T=fL[N],k=e.filter(W=>W.name.toLowerCase().includes(c.toLowerCase())||W.category.toLowerCase().includes(c.toLowerCase())),_=W=>{i.length<5&&!i.find(D=>D.id===W.id)&&o([...i,W])},P=W=>{o(i.filter(D=>D.id!==W))},L=async()=>{if(!(i.length!==5||!f)){v(!0);try{const W={products:i.map(D=>D.id),strategy:f,currency:n.affiliateCurrency,lastUpdated:new Date().toISOString()};await r({affiliateStoreConfig:W}),alert("Store configuration saved successfully!")}catch(W){console.error("Error saving store config:",W),alert("Failed to save store configuration.")}finally{v(!1)}}},z=W=>{if(!f)return W.price;const D=W.price*(f.d/100);return W.price-D},F=W=>{if(!f)return W.priceUSD;const D=W.priceUSD*(f.d/100);return W.priceUSD-D};return((ee=n.affiliateStats)==null?void 0:ee.status)!=="approved"?t.jsxs("div",{className:"max-w-4xl mx-auto py-8 text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Access Denied"}),t.jsx("p",{className:"text-gray-400",children:"You need to be an approved affiliate to access this page."}),t.jsx(Ve,{to:"/affiliate",className:"inline-block mt-4 px-6 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg",children:"Go to Affiliate Program"})]}):t.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-8",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Ve,{to:"/affiliate",className:"p-2 bg-zinc-800 hover:bg-zinc-700 rounded-lg",children:t.jsx(ra,{size:20,className:"text-gray-400"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white",children:"VIP Store Builder"}),t.jsx("p",{className:"text-gray-400",children:"Create your personalized affiliate storefront with 5 curated products."})]})]}),t.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-yellow-900/20 rounded-lg text-yellow-400",children:t.jsx(Ec,{size:24})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-bold text-white",children:["Your Current Tier: ",N.toUpperCase()]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Max Commission: ",T.max,"% | Available Strategies: ",T.options.length]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:T.options.map((W,D)=>t.jsx("button",{onClick:()=>h(W),className:`p-4 rounded-lg border transition-all ${(f==null?void 0:f.d)===W.d&&(f==null?void 0:f.c)===W.c?"bg-pink-900/20 border-pink-500 text-pink-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-2xl font-bold mb-1",children:[W.d,"% OFF / ",W.c,"% Commission"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Give customers ",W.d,"% discount, earn ",W.c,"% commission"]})]})},D))})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["Select 5 Products (",i.length,"/5)"]}),t.jsxs("div",{className:"relative",children:[t.jsx(ca,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search products...",value:c,onChange:W=>u(W.target.value),className:"w-full bg-zinc-900 border border-gray-700 rounded-lg pl-10 pr-4 py-3 text-white focus:border-pink-500 outline-none"})]})]}),t.jsx("div",{className:"max-h-[600px] overflow-y-auto space-y-3 custom-scrollbar",children:k.slice(0,20).map(W=>{const D=i.find(C=>C.id===W.id);return t.jsx("div",{className:`p-4 rounded-lg border transition-all ${D?"bg-pink-900/10 border-pink-500":"bg-zinc-900 border-gray-800"}`,children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:W.images[0],alt:W.name,className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-white text-sm",children:W.name}),t.jsx("p",{className:"text-xs text-gray-400",children:W.category}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:"text-sm font-bold text-green-400",children:s==="ZAR"?`R${W.price}`:`$${W.priceUSD}`}),f&&t.jsxs("span",{className:"text-xs text-pink-400",children:[" ",s==="ZAR"?`R${z(W)}`:`$${F(W)}`]})]})]}),t.jsx("button",{onClick:()=>D?P(W.id):_(W),className:`p-2 rounded-lg transition-all ${D?"bg-red-600 hover:bg-red-500 text-white":i.length>=5?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-pink-600 hover:bg-pink-500 text-white"}`,disabled:!D&&i.length>=5,children:D?t.jsx(FN,{size:16}):t.jsx(rn,{size:16})})]})},W.id)})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Your VIP Store Preview"}),t.jsx("p",{className:"text-sm text-gray-400",children:"This is how your storefront will appear to customers visiting your affiliate link."})]}),i.length===0?t.jsxs("div",{className:"bg-zinc-900/50 border border-dashed border-gray-700 rounded-xl p-8 text-center",children:[t.jsx(Ec,{size:48,className:"text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:"No Products Selected"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Choose 5 products from the left to build your VIP store."})]}):t.jsxs("div",{className:"space-y-4",children:[i.map(W=>t.jsx("div",{className:"bg-zinc-900 border border-gray-800 rounded-xl p-4",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:W.images[0],alt:W.name,className:"w-20 h-20 rounded-lg object-cover border border-gray-700"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-white",children:W.name}),t.jsx("p",{className:"text-sm text-gray-400 mb-2",children:W.category}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 line-through",children:s==="ZAR"?`R${W.price}`:`$${W.priceUSD}`}),t.jsx("span",{className:"text-green-400 font-bold ml-2",children:s==="ZAR"?`R${z(W)}`:`$${F(W)}`})]}),f&&t.jsxs("div",{className:"text-xs bg-pink-900/20 text-pink-400 px-2 py-1 rounded",children:[f.d,"% OFF"]})]})]})]})},W.id)),i.length===5&&f&&t.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-green-500/20 rounded-full",children:t.jsx(nl,{size:20,className:"text-green-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-green-400",children:"Store Ready!"}),t.jsxs("p",{className:"text-sm text-green-300",children:["Your VIP store is configured. Customers will see ",f.d,"% off these products and you'll earn ",f.c,"% commission."]})]})]}),t.jsx("button",{onClick:L,disabled:y,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:opacity-50 text-white font-bold rounded-lg transition-all",children:y?"Saving...":"Save Store Configuration"})]})]})]})]})]})},gL=()=>{const{user:n,products:e,logout:s,submitReview:r,currency:i}=vt(),o=cn(),[c,u]=S.useState(null),[f,h]=S.useState(5),[y,v]=S.useState(""),N=(n.notifications||[]).filter(C=>C.type==="review_request"&&!C.isRead),T=(n.notifications||[]).filter(C=>C.type==="gift_ready"),k=(n.notifications||[]).filter(C=>C.type==="gift_received"),_=(n.notifications||[]).filter(C=>(C.type==="system"||C.type==="affiliate_msg")&&!C.isRead),P=(n.notifications||[]).filter(C=>C.type==="credit_received"||C.type==="credit_adjusted"),L=(n.notifications||[]).filter(C=>C.type==="trial_ended"),z=[...N,...T,...k,..._,...P,...L].sort((C,I)=>new Date(I.date).getTime()-new Date(C.date).getTime()),F=async()=>{!c||!c.productId||(await r(c.productId,f,y,c.id),v(""),h(5),u(null),alert("Review submitted! You earned 100 Loyalty Points."))},K=C=>{if(!C.voucherData)return;const{code:I,amount:$,meta:O}=C.voucherData,V=`${window.location.origin}/#/?voucher=${I}`,A=`Hey ${O.recipientName}! 

${O.senderName} sent you a Spoil Me Vintage Gift Voucher worth R${$}!

"${O.message}"

Redeem it here:
${V}`,se=O.whatsappNumber?O.whatsappNumber.replace(/[^0-9]/g,""):"",fe=se?`https://wa.me/${se}?text=${encodeURIComponent(A)}`:`https://wa.me/?text=${encodeURIComponent(A)}`;window.open(fe,"_blank")},ee=C=>{window.location.href=`/#/?voucher=${C}`};if(!n.email)return o("/login"),null;const W=C=>{switch(C){case"review_request":return t.jsx(Rn,{className:"text-yellow-500",size:20});case"gift_ready":return t.jsx(ds,{className:"text-pink-500",size:20});case"gift_received":return t.jsx(ds,{className:"text-green-500",size:20});case"system":return t.jsx(Yi,{className:"text-blue-500",size:20});case"affiliate_msg":return t.jsx(rl,{className:"text-purple-500",size:20});case"credit_received":return t.jsx(ws,{className:"text-green-500",size:20});case"credit_adjusted":return t.jsx(ws,{className:"text-cyan-500",size:20});case"trial_ended":return t.jsx(eh,{className:"text-red-500",size:20});default:return t.jsx(Yi,{className:"text-gray-500",size:20})}},D=C=>{switch(C){case"review_request":return"border-yellow-500/30 bg-yellow-900/20";case"gift_ready":return"border-pink-500/30 bg-pink-900/20";case"gift_received":return"border-green-500/30 bg-green-900/20";case"system":return"border-blue-500/30 bg-blue-900/20";case"affiliate_msg":return"border-purple-500/30 bg-purple-900/20";case"credit_received":return"border-green-500/30 bg-green-900/20";case"credit_adjusted":return"border-cyan-500/30 bg-cyan-900/20";case"trial_ended":return"border-red-500/30 bg-red-900/20";default:return"border-gray-500/30 bg-gray-900/20"}};return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsxs("h1",{className:"text-[28px] font-cherry text-white",children:["Welcome, ",n.name||n.firstName||"Valued Customer"]}),t.jsx("p",{className:"text-[14px] font-architects text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-yellow-400 italic mb-8",children:"This is where we communicate with you, deliver your gift vouchers, and share all important notifications and updates."})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[t.jsx(Yi,{size:32,className:"text-blue-500"}),"Your Notifications Center"]}),t.jsx("p",{className:"text-gray-400 mt-2",children:"Stay updated with your account activity, rewards, and exclusive offers"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-bold text-white",children:z.length}),t.jsx("div",{className:"text-sm text-gray-400",children:"Total Notifications"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Rn,{className:"text-yellow-500",size:16}),t.jsx("span",{className:"text-sm text-gray-400",children:"Pending Reviews"})]}),t.jsx("div",{className:"text-xl font-bold text-white",children:N.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(ds,{className:"text-pink-500",size:16}),t.jsx("span",{className:"text-sm text-gray-400",children:"Gifts"})]}),t.jsx("div",{className:"text-xl font-bold text-white",children:T.length+k.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(ws,{className:"text-green-500",size:16}),t.jsx("span",{className:"text-sm text-gray-400",children:"Credits"})]}),t.jsx("div",{className:"text-xl font-bold text-white",children:P.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Yi,{className:"text-blue-500",size:16}),t.jsx("span",{className:"text-sm text-gray-400",children:"System"})]}),t.jsx("div",{className:"text-xl font-bold text-white",children:_.length})]})]}),t.jsx("div",{className:"space-y-4",children:z.length===0?t.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-8 text-center",children:[t.jsx(Yi,{size:48,className:"text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No notifications yet"}),t.jsx("p",{className:"text-gray-400",children:"When you have activity on your account, you'll see it here."})]}):z.map((C,I)=>t.jsx("div",{className:`p-6 rounded-xl border ${D(C.type)}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"shrink-0 mt-1",children:W(C.type)}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-bold text-white text-lg mb-1",children:C.title}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-3",children:C.message}),C.type==="review_request"&&C.productId&&t.jsxs("button",{onClick:()=>u(C),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(Fp,{size:16})," Write Review"]}),C.type==="gift_ready"&&C.voucherData&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>K(C),className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(nh,{size:16})," Send via WhatsApp"]}),t.jsxs("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/#/?voucher=${C.voucherData.code}`),className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(sh,{size:16})," Copy Link"]})]}),C.type==="gift_received"&&C.voucherData&&t.jsxs("button",{onClick:()=>ee(C.voucherData.code),className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(ds,{size:16})," Redeem Gift"]}),C.type==="trial_ended"&&t.jsxs(Ve,{to:"/membership",className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(Qs,{size:16})," Renew Membership"]})]}),t.jsx("div",{className:"text-right text-xs text-gray-500 shrink-0",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(cr,{size:12}),new Date(C.date).toLocaleDateString()]})})]})})]})},C.id||I))}),c&&c.type==="review_request"&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>u(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-yellow-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(234,179,8,0.3)] animate-in zoom-in-95 duration-200",children:[t.jsx("button",{onClick:()=>u(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(us,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-yellow-900/50 rounded-full border border-yellow-500 text-yellow-300",children:t.jsx(Rn,{size:24})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"Write a Review"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Rating"}),t.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(C=>t.jsx("button",{onClick:()=>h(C),className:`text-2xl ${C<=f?"text-yellow-500":"text-gray-600"}`,children:""},C))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Your Review"}),t.jsx("textarea",{value:y,onChange:C=>v(C.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-yellow-500 outline-none h-24",placeholder:"Share your thoughts about this product..."})]}),t.jsx("button",{onClick:F,disabled:!y.trim(),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold rounded-xl transition-all shadow-lg",children:"Submit Review (+100 Points)"})]})]})]})]})},xL=()=>{const[n,e]=S.useState(!1),[s,r]=S.useState("all"),[i,o]=S.useState(""),[c,u]=S.useState({title:"",body:"",imageUrl:"",link:"/#/vault"}),f=async h=>{var y,v,N;if(h.preventDefault(),!!confirm("Are you sure you want to send this notification?")){e(!0);try{const T=await Xi("send-push",{title:c.title,body:c.body,targetGroup:s,targetId:s==="individual"?i:null,image:c.imageUrl||null,url:c.link||"/"});if(T!=null&&T.success||(y=T==null?void 0:T.data)!=null&&y.success){const k=T.sentCount||((v=T.data)==null?void 0:v.sentCount)||0;alert(` Success! Sent to ${k} devices.`),u({...c,title:"",body:""})}else{const k=(T==null?void 0:T.message)||((N=T==null?void 0:T.data)==null?void 0:N.message)||"Unknown error";alert(` ${k}`)}}catch(T){console.error(T),alert(`Error: ${T.message}`)}finally{e(!1)}}};return t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg border border-zinc-800 max-w-2xl mx-auto mt-10",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-zinc-800 pb-4",children:[t.jsx(Yi,{className:"text-yellow-500",size:24}),t.jsx("h2",{className:"text-xl font-bold text-white",children:"Push Notification Center"})]}),t.jsxs("form",{onSubmit:f,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Target Group"}),t.jsx("div",{className:"mt-2 grid grid-cols-2 gap-3",children:[{key:"all",label:"Everyone",icon:t.jsx(ON,{size:18})},{key:"south_africa",label:"South Africa",icon:t.jsx(qs,{size:18})},{key:"international",label:"International",icon:t.jsx(qs,{size:18})},{key:"non_members",label:"Non-Members",icon:t.jsx(qs,{size:18})},{key:"affiliates",label:"Affiliates",icon:t.jsx(qs,{size:18})},{key:"artists",label:"Artists",icon:t.jsx(qs,{size:18})},{key:"individual",label:"Individual",icon:t.jsx($r,{size:18})}].map(h=>t.jsxs("button",{type:"button",onClick:()=>r(h.key),className:`p-3 rounded border flex items-center gap-2 ${s===h.key?"border-yellow-500 bg-yellow-900/20 text-white":"border-zinc-700 text-gray-400"}`,children:[h.icon,t.jsx("span",{className:"text-sm font-bold",children:h.label})]},h.key))})]}),s==="individual"&&t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"User ID (UID)"}),t.jsx("input",{type:"text",placeholder:"Paste User UID here...",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:i,onChange:h=>o(h.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Notification Title"}),t.jsx("input",{type:"text",placeholder:"e.g.  The Vault is Open!",required:!0,className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1 font-bold",value:c.title,onChange:h=>u({...c,title:h.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Message Body"}),t.jsx("textarea",{placeholder:"e.g. New vintage stock just added. Tap to shop now.",required:!0,rows:3,className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:c.body,onChange:h=>u({...c,body:h.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Deep Link (Optional)"}),t.jsx("input",{type:"text",placeholder:"e.g. /#/vault or /#/membership",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:c.link,onChange:h=>u({...c,link:h.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Image URL (Optional)"}),t.jsx("input",{type:"text",placeholder:"https://...",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:c.imageUrl,onChange:h=>u({...c,imageUrl:h.target.value})})]})]}),t.jsx("button",{type:"submit",disabled:n,className:"w-full bg-yellow-600 hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold py-4 rounded flex items-center justify-center gap-2 transition-colors",children:n?"Sending...":t.jsxs(t.Fragment,{children:[t.jsx(nh,{size:20})," SEND NOTIFICATION"]})})]})]})},yL=()=>{const n=cn(),[e,s]=S.useState([]),[r,i]=S.useState(!0);S.useEffect(()=>{o()},[]);const o=async()=>{try{const c=await Bs("custom_templates",{orderBy:{column:"created_at",ascending:!1}});s((c||[]).filter(u=>u.isActive!==!1))}catch(c){console.error("Error fetching templates:",c)}finally{i(!1)}};return r?t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-gold text-xl",children:"Loading custom pendants..."})}):t.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[t.jsx("button",{onClick:()=>n("/"),className:"p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700",children:t.jsx(ra,{size:24})}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gold flex items-center gap-2",children:[t.jsx(js,{size:32}),"Customized Wire Wrapped Pendants"]}),t.jsx("p",{className:"text-gray-400",children:"Design your own unique wire-wrapped pendant"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6 mb-8",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create Your Perfect Pendant"}),t.jsx("p",{className:"text-gray-300 mb-4",children:"Choose from our selection of premium wire-wrapped pendant templates. Customize with your choice of stones, wire styles, and chain lengths to create a truly unique piece of jewelry."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ot,{size:16,className:"text-gold"}),t.jsx("span",{children:"Premium Materials"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(js,{size:16,className:"text-gold"}),t.jsx("span",{children:"Custom Design"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ot,{size:16,className:"text-gold"}),t.jsx("span",{children:"Handcrafted Quality"})]})]})]}),e.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(js,{size:48,className:"text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No Custom Templates Available"}),t.jsx("p",{className:"text-gray-500",children:"Check back soon for new designs!"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(c=>t.jsxs("div",{className:"bg-zinc-900 rounded-lg overflow-hidden hover:bg-zinc-800 transition-colors cursor-pointer group",onClick:()=>n(`/customized-wire-wrapped-pendants/${c.id}`),children:[t.jsx("div",{className:"aspect-square bg-zinc-800 overflow-hidden",children:t.jsx("img",{src:c.mainImage,alt:c.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gold mb-2",children:c.name}),t.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:c.description}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-lg font-semibold text-white",children:["From R",c.basePrice]}),t.jsx("button",{className:"px-4 py-2 bg-gold text-black font-bold rounded-lg hover:bg-yellow-500 transition-colors",children:"Customize"})]})]})]},c.id))})]})})},bL=()=>{var O,V,A;const{user:n}=vt(),[e,s]=S.useState([]),[r,i]=S.useState(!0),[o,c]=S.useState(!1),[u,f]=S.useState(!1),[h,y]=S.useState({name:"",basePrice:0,description:"",mainImage:"",stones:[],wireStyles:[],chainOptions:[],isActive:!0});S.useEffect(()=>{v()},[]);const v=async()=>{try{const se=await Bs("custom_templates",{orderBy:{column:"created_at",ascending:!1}});s(se||[])}catch(se){console.error("Error loading templates:",se)}finally{i(!1)}},N=async()=>{if(!(!h.name||!h.description)){f(!0);try{const se={...h,stones:h.stones||[],wireStyles:h.wireStyles||[],chainOptions:h.chainOptions||[]};h.id?await di("custom_templates",h.id,se):await Rr("custom_templates",se),await v(),c(!1),y({name:"",basePrice:0,description:"",mainImage:"",stones:[],wireStyles:[],chainOptions:[],isActive:!0})}catch(se){console.error("Error saving template:",se)}finally{f(!1)}}},T=async se=>{if(confirm("Are you sure you want to delete this template?"))try{await cm("custom_templates",se),await v()}catch(fe){console.error("Error deleting template:",fe)}},k=async se=>{const fe=`custom-templates/${Date.now()}-${se.name}`;return await dm("custom-templates",fe,se)},_=async se=>{var Se;const fe=(Se=se.target.files)==null?void 0:Se[0];if(fe)try{const Ie=await k(fe);y(le=>({...le,mainImage:Ie}))}catch(Ie){console.error("Error uploading image:",Ie)}},P=()=>{y(se=>({...se,stones:[...se.stones||[],{id:Date.now().toString(),name:"",image:"",priceModifier:0}]}))},L=(se,fe,Se)=>{y(Ie=>{var le;return{...Ie,stones:(le=Ie.stones)==null?void 0:le.map((be,ve)=>ve===se?{...be,[fe]:Se}:be)}})},z=se=>{y(fe=>{var Se;return{...fe,stones:(Se=fe.stones)==null?void 0:Se.filter((Ie,le)=>le!==se)}})},F=async(se,fe)=>{var Ie;const Se=(Ie=fe.target.files)==null?void 0:Ie[0];if(Se)try{const le=await k(Se);L(se,"image",le)}catch(le){console.error("Error uploading stone image:",le)}},K=()=>{y(se=>({...se,wireStyles:[...se.wireStyles||[],{id:Date.now().toString(),name:"",imageFrameOnly:"",imageWithExample:"",priceModifier:0}]}))},ee=(se,fe,Se)=>{y(Ie=>{var le;return{...Ie,wireStyles:(le=Ie.wireStyles)==null?void 0:le.map((be,ve)=>ve===se?{...be,[fe]:Se}:be)}})},W=se=>{y(fe=>{var Se;return{...fe,wireStyles:(Se=fe.wireStyles)==null?void 0:Se.filter((Ie,le)=>le!==se)}})},D=async(se,fe,Se)=>{var le;const Ie=(le=Se.target.files)==null?void 0:le[0];if(Ie)try{const be=await k(Ie);ee(se,fe==="frame"?"imageFrameOnly":"imageWithExample",be)}catch(be){console.error("Error uploading wire image:",be)}},C=()=>{y(se=>({...se,chainOptions:[...se.chainOptions||[],""]}))},I=(se,fe)=>{y(Se=>{var Ie;return{...Se,chainOptions:(Ie=Se.chainOptions)==null?void 0:Ie.map((le,be)=>be===se?fe:le)}})},$=se=>{y(fe=>{var Se;return{...fe,chainOptions:(Se=fe.chainOptions)==null?void 0:Se.filter((Ie,le)=>le!==se)}})};return n!=null&&n.isAdmin?r?t.jsx("div",{className:"p-6 text-center",children:t.jsx(Dr,{className:"animate-spin mx-auto",size:24})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Custom Pendant Templates"}),t.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2",children:[t.jsx(rn,{size:20})," New Template"]})]}),t.jsx("div",{className:"grid gap-4",children:e.map(se=>t.jsx("div",{className:"bg-zinc-800 p-4 rounded-lg",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold",children:se.name}),t.jsx("p",{className:"text-gray-400",children:se.description}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Base Price: R",se.basePrice]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{y(se),c(!0)},className:"p-2 text-blue-400 hover:text-blue-300",children:t.jsx($p,{size:20})}),t.jsx("button",{onClick:()=>T(se.id),className:"p-2 text-red-400 hover:text-red-300",children:t.jsx(Or,{size:20})})]})]})},se.id))}),o&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-xl font-bold",children:h.id?"Edit Template":"New Template"}),t.jsx("button",{onClick:()=>c(!1),className:"p-2",children:t.jsx(us,{size:24})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Template Name",value:h.name||"",onChange:se=>y(fe=>({...fe,name:se.target.value})),className:"p-2 bg-zinc-800 rounded"}),t.jsx("input",{type:"number",placeholder:"Base Price",value:h.basePrice||0,onChange:se=>y(fe=>({...fe,basePrice:parseFloat(se.target.value)})),className:"p-2 bg-zinc-800 rounded"})]}),t.jsx("textarea",{placeholder:"Description",value:h.description||"",onChange:se=>y(fe=>({...fe,description:se.target.value})),className:"w-full p-2 bg-zinc-800 rounded h-20"}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",children:"Main Image"}),t.jsx("input",{type:"file",accept:"image/*",onChange:_}),h.mainImage&&t.jsx("img",{src:h.mainImage,alt:"Main",className:"w-32 h-32 object-cover mt-2 rounded"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Stones"}),t.jsx("button",{onClick:P,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Stone"})]}),t.jsx("div",{className:"space-y-4",children:(O=h.stones)==null?void 0:O.map((se,fe)=>t.jsxs("div",{className:"bg-zinc-800 p-4 rounded flex gap-4 items-center",children:[t.jsx("input",{type:"text",placeholder:"Stone Name",value:se.name,onChange:Se=>L(fe,"name",Se.target.value),className:"flex-1 p-2 bg-zinc-700 rounded"}),t.jsx("input",{type:"number",placeholder:"Price Modifier",value:se.priceModifier,onChange:Se=>L(fe,"priceModifier",parseFloat(Se.target.value)),className:"w-24 p-2 bg-zinc-700 rounded"}),t.jsx("input",{type:"file",accept:"image/*",onChange:Se=>F(fe,Se)}),se.image&&t.jsx("img",{src:se.image,alt:se.name,className:"w-16 h-16 object-cover rounded"}),t.jsx("button",{onClick:()=>z(fe),className:"p-2 text-red-400",children:t.jsx(us,{size:20})})]},se.id))})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Wire Styles"}),t.jsx("button",{onClick:K,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Wire Style"})]}),t.jsx("div",{className:"space-y-4",children:(V=h.wireStyles)==null?void 0:V.map((se,fe)=>t.jsxs("div",{className:"bg-zinc-800 p-4 rounded space-y-4",children:[t.jsx("input",{type:"text",placeholder:"Wire Style Name",value:se.name,onChange:Se=>ee(fe,"name",Se.target.value),className:"w-full p-2 bg-zinc-700 rounded"}),t.jsx("input",{type:"number",placeholder:"Price Modifier",value:se.priceModifier,onChange:Se=>ee(fe,"priceModifier",parseFloat(Se.target.value)),className:"w-24 p-2 bg-zinc-700 rounded"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",children:"Frame Only Image"}),t.jsx("input",{type:"file",accept:"image/*",onChange:Se=>D(fe,"frame",Se)}),se.imageFrameOnly&&t.jsx("img",{src:se.imageFrameOnly,alt:"Frame",className:"w-16 h-16 object-cover mt-2 rounded"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",children:"With Example Image"}),t.jsx("input",{type:"file",accept:"image/*",onChange:Se=>D(fe,"example",Se)}),se.imageWithExample&&t.jsx("img",{src:se.imageWithExample,alt:"Example",className:"w-16 h-16 object-cover mt-2 rounded"})]})]}),t.jsx("button",{onClick:()=>W(fe),className:"p-2 text-red-400",children:t.jsx(us,{size:20})})]},se.id))})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Chain Options"}),t.jsx("button",{onClick:C,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Chain"})]}),t.jsx("div",{className:"space-y-2",children:(A=h.chainOptions)==null?void 0:A.map((se,fe)=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",placeholder:"Chain Length",value:se,onChange:Se=>I(fe,Se.target.value),className:"flex-1 p-2 bg-zinc-700 rounded"}),t.jsx("button",{onClick:()=>$(fe),className:"p-2 text-red-400",children:t.jsx(us,{size:20})})]},fe))})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-600 text-white rounded",children:"Cancel"}),t.jsxs("button",{onClick:N,disabled:u,className:"px-4 py-2 bg-pink-600 text-white rounded disabled:opacity-50 flex items-center gap-2",children:[u?t.jsx(Dr,{className:"animate-spin",size:16}):t.jsx(ac,{size:16}),"Save"]})]})]})]})})]}):t.jsx("div",{className:"p-6 text-center",children:"Access denied. Admin only."})},vL=()=>{const{id:n}=Rc(),e=cn(),{user:s,addToCart:r}=vt(),[i,o]=S.useState(null),[c,u]=S.useState(!0),[f,h]=S.useState({stone:"",wireStyle:"",chainLength:""}),[y,v]=S.useState(!1);S.useEffect(()=>{n&&N()},[n]);const N=async()=>{try{const _=await Mc("custom_templates",n);_?o(_):e("/customized-wire-wrapped-pendants")}catch(_){console.error("Error fetching template:",_),e("/customized-wire-wrapped-pendants")}finally{u(!1)}},T=()=>{if(!i)return 0;let _=i.basePrice;if(f.stone){const P=i.stones.find(L=>L.id===f.stone);P&&(_+=P.priceModifier)}if(f.wireStyle){const P=i.wireStyles.find(L=>L.id===f.wireStyle);P&&(_+=P.priceModifier)}return _},k=async()=>{if(!(!s||!i)){if(!f.stone||!f.wireStyle||!f.chainLength){alert("Please select all options before adding to cart.");return}v(!0);try{const _=i.stones.find(z=>z.id===f.stone),P=i.wireStyles.find(z=>z.id===f.wireStyle),L={id:`custom-${Date.now()}`,code:`CUSTOM-${Date.now()}`,name:`${i.name} - Custom`,slug:`custom-pendant-${Date.now()}`,description:`Custom pendant with ${_==null?void 0:_.name} stone, ${P==null?void 0:P.name} wire style, ${f.chainLength} chain`,price:T(),priceUSD:T()/18,costPrice:i.basePrice+((_==null?void 0:_.priceModifier)||0)+((P==null?void 0:P.priceModifier)||0),category:"Custom Pendants",type:"Pendant",status:"published",stock:1,images:[i.mainImage],tags:["custom","pendant","wire-wrapped"],createdAt:new Date().toISOString(),quantity:1,customOptions:{templateId:i.id,stone:_,wireStyle:P,chainLength:f.chainLength},isCustom:!0};await Rr("cart_items",{user_id:s.uid,product_id:L.id,...L,added_at:new Date().toISOString()}),r(L),alert("Custom pendant added to cart!"),e("/cart")}catch(_){console.error("Error adding to cart:",_),alert("Failed to add to cart. Please try again.")}finally{v(!1)}}};return c?t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-gold text-xl",children:"Loading custom builder..."})}):i?t.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[t.jsx("button",{onClick:()=>e("/customized-wire-wrapped-pendants"),className:"p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700",children:t.jsx(ra,{size:24})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gold",children:i.name}),t.jsx("p",{className:"text-gray-400",children:i.description})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"aspect-square bg-zinc-900 rounded-2xl overflow-hidden",children:t.jsx("img",{src:i.mainImage,alt:i.name,className:"w-full h-full object-cover"})}),f.wireStyle&&t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Wire Style Preview"}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:(()=>{const _=i.wireStyles.find(P=>P.id===f.wireStyle);return _?t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Frame Only"}),t.jsx("img",{src:_.imageFrameOnly,alt:"Frame",className:"w-full aspect-square object-cover rounded"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"With Example"}),t.jsx("img",{src:_.imageWithExample,alt:"Example",className:"w-full aspect-square object-cover rounded"})]})]}):null})()})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(js,{size:20,className:"text-gold"}),"Choose Your Stone"]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.stones.map(_=>t.jsxs("button",{onClick:()=>h(P=>({...P,stone:_.id})),className:`p-4 rounded-lg border-2 transition-colors ${f.stone===_.id?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:[t.jsx("img",{src:_.image,alt:_.name,className:"w-full aspect-square object-cover rounded mb-2"}),t.jsx("h4",{className:"font-semibold",children:_.name}),t.jsx("p",{className:"text-sm text-gray-400",children:_.priceModifier>0?`+R${_.priceModifier}`:"No extra cost"})]},_.id))})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(Ot,{size:20,className:"text-gold"}),"Choose Wire Style"]}),t.jsx("div",{className:"space-y-4",children:i.wireStyles.map(_=>t.jsx("button",{onClick:()=>h(P=>({...P,wireStyle:_.id})),className:`w-full p-4 rounded-lg border-2 transition-colors ${f.wireStyle===_.id?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-left",children:_.name}),t.jsx("p",{className:"text-sm text-gray-400",children:_.priceModifier>0?`+R${_.priceModifier}`:"No extra cost"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("img",{src:_.imageFrameOnly,alt:"Frame",className:"w-16 h-16 object-cover rounded"}),t.jsx("img",{src:_.imageWithExample,alt:"Example",className:"w-16 h-16 object-cover rounded"})]})]})},_.id))})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Chain Length"}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.chainOptions.map((_,P)=>t.jsx("button",{onClick:()=>h(L=>({...L,chainLength:_})),className:`p-4 rounded-lg border-2 transition-colors ${f.chainLength===_?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:t.jsx("span",{className:"font-semibold",children:_})},P))})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("span",{className:"text-lg",children:"Total Price:"}),t.jsxs("span",{className:"text-2xl font-bold text-gold",children:["R",T()]})]}),t.jsxs("button",{onClick:k,disabled:y||!f.stone||!f.wireStyle||!f.chainLength,className:"w-full bg-gold text-black font-bold py-4 rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[t.jsx(ul,{size:20}),y?"Adding to Cart...":"Add to Cart"]}),(!f.stone||!f.wireStyle||!f.chainLength)&&t.jsx("p",{className:"text-sm text-gray-400 mt-2 text-center",children:"Please select all options to continue"})]})]})]})]})}):t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-white text-xl",children:"Template not found"})})},wL=()=>{const[n,e]=S.useState("applications"),[s,r]=S.useState([]),[i,o]=S.useState([]),[c,u]=S.useState([]),[f,h]=S.useState(!0);S.useEffect(()=>{let P=null,L=null,z=null;return(async()=>{const K=await Bs("artist_applications",{orderBy:{column:"submitted_at",ascending:!1}});r((K||[]).map(D=>({id:D.id,...D,submittedAt:D.submitted_at?new Date(D.submitted_at):new Date})));const ee=await Bs("artists");o(ee||[]),h(!1);const W=await Bs("artist_products");u((W||[]).map(D=>({id:D.id,...D,createdAt:D.created_at?new Date(D.created_at):new Date,receivedAtHub:D.received_at_hub?new Date(D.received_at_hub):null,approvedAt:D.approved_at?new Date(D.approved_at):null})))})(),P=Wf("artist_applications",async()=>{const K=await Bs("artist_applications",{orderBy:{column:"submitted_at",ascending:!1}});r((K||[]).map(ee=>({id:ee.id,...ee,submittedAt:ee.submitted_at?new Date(ee.submitted_at):new Date})))}),L=Wf("artists",async()=>{const K=await Bs("artists");o(K||[])}),z=Wf("artist_products",async()=>{const K=await Bs("artist_products");u((K||[]).map(ee=>({id:ee.id,...ee,createdAt:ee.created_at?new Date(ee.created_at):new Date,receivedAtHub:ee.received_at_hub?new Date(ee.received_at_hub):null,approvedAt:ee.approved_at?new Date(ee.approved_at):null})))}),()=>{P&&P(),L&&L(),z&&z()}},[]);const y=async P=>{try{const L={uid:P.uid,shopName:P.artistTradeName||`${P.name} ${P.surname}`,slotLimit:5,slotsUsed:0,wallet:{pending:0,available:0,currency:"ZAR"},status:"active",isFirstTime:!0};await Rr("artists",L),await di("artist_applications",P.id,{status:"approved"}),await Rr("notifications",{userId:P.uid,type:"system",title:"Artist Application Approved!",message:"Welcome to Spoil Me Vintage Artist Program! As a first-time artist, you can upload 1 product initially. Please ship it to our Worcester Hub for approval.",date:new Date().toISOString(),isRead:!1}),alert("Application approved successfully!")}catch(L){console.error("Error approving application:",L),alert("Failed to approve application.")}},v=async P=>{try{await di("artist_applications",P.id,{status:"rejected"}),await Rr("notifications",{userId:P.uid,type:"system",title:"Artist Application Update",message:"We regret to inform you that your artist application has been declined.",date:new Date().toISOString(),isRead:!1}),alert("Application rejected.")}catch(L){console.error("Error rejecting application:",L),alert("Failed to reject application.")}},N=async P=>{try{await di("artist_products",P.id,{status:"approved",approved_at:new Date().toISOString()});const L=i.find(z=>z.uid===P.artistId);L&&await Rr("notifications",{userId:L.uid,type:"system",title:"Product Approved",message:`Your product "${P.name}" has been approved and is now live.`,date:new Date().toISOString(),isRead:!1}),alert("Product approved successfully!")}catch(L){console.error("Error approving product:",L),alert("Failed to approve product.")}},T=async P=>{try{await di("artist_products",P.id,{status:"rejected"});const L=i.find(z=>z.uid===P.artistId);L&&await Rr("notifications",{userId:L.uid,type:"system",title:"Product Rejected",message:`Your product "${P.name}" has been rejected. Please check the quality standards and re-submit.`,date:new Date().toISOString(),isRead:!1}),alert("Product rejected.")}catch(L){console.error("Error rejecting product:",L),alert("Failed to reject product.")}},k=async P=>{try{await di("artist_products",P.id,{stock_level:(P.stockLevel||0)+1,status:"live",received_at_hub:new Date().toISOString()}),alert("Stock received and product updated.")}catch(L){console.error("Error updating stock:",L),alert("Failed to update stock.")}},_=async P=>{if(window.confirm("Are you sure you want to delete this product?"))try{await cm("artist_products",P),alert("Product deleted successfully.")}catch(L){console.error("Error deleting product:",L),alert("Failed to delete product.")}};return f?t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"text-white",children:"Loading artist data..."})}):t.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Artist Hub"}),t.jsxs("div",{className:"flex space-x-1 mb-6 bg-zinc-900 p-1 rounded-lg",children:[t.jsxs("button",{onClick:()=>e("applications"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="applications"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:["Applications (",s.filter(P=>P.status==="pending").length,")"]}),t.jsx("button",{onClick:()=>e("pricing"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="pricing"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Pricing Room"}),t.jsx("button",{onClick:()=>e("quality"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="quality"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Quality Control"}),t.jsx("button",{onClick:()=>e("stock"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="stock"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Stock Management"})]}),n==="applications"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold text-yellow-400",children:"Pending Applications"}),t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-3 rounded-lg",children:t.jsxs("p",{className:"text-yellow-400 text-sm font-medium flex items-center gap-2",children:[t.jsx(mi,{size:16}),"Reviews take up to 72 hours. Artists will be notified via email and in-app notification once their application is processed."]})}),s.filter(P=>P.status==="pending").length===0?t.jsx("div",{className:"text-gray-400",children:"No pending applications."}):s.filter(P=>P.status==="pending").map(P=>t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-bold text-white",children:[P.name," ",P.surname,P.artistTradeName&&t.jsxs("span",{className:"text-yellow-400",children:[" (",P.artistTradeName,")"]})]}),t.jsxs("p",{className:"text-gray-300",children:[P.email," | ",P.contactNumber]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Applied: ",P.submittedAt.toLocaleDateString()]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>y(P),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[t.jsx(Xa,{size:16})," Approve"]}),t.jsxs("button",{onClick:()=>v(P),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[t.jsx(zp,{size:16})," Reject"]})]})]}),t.jsx("div",{className:"grid grid-cols-5 gap-2",children:P.productImages.slice(0,5).map((L,z)=>t.jsx("img",{src:L,alt:`Product ${z+1}`,className:"w-full h-20 object-cover rounded border border-zinc-700"},z))})]},P.id)),t.jsx("h2",{className:"text-xl font-bold text-yellow-400 mt-8",children:"All Applications"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(P=>t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h3",{className:"font-bold text-white",children:[P.name," ",P.surname]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${P.status==="approved"?"bg-green-600":P.status==="rejected"?"bg-red-600":"bg-yellow-600"}`,children:P.status})]}),t.jsx("p",{className:"text-sm text-gray-400",children:P.email}),t.jsx("p",{className:"text-xs text-gray-500",children:P.submittedAt.toLocaleDateString()})]},P.id))})]}),n==="pricing"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-yellow-400 mb-4",children:"Pricing Room"}),t.jsx("div",{className:"text-gray-400",children:"Product pricing interface will be implemented here. Artists upload products, admin sets selling prices and RRP."})]}),n==="quality"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-yellow-400 mb-4",children:"Quality Control Hub"}),t.jsx("div",{className:"text-gray-400",children:"Quality inspection interface will be implemented here. Scan order IDs, pass/fail inspections."})]}),n==="stock"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold text-yellow-400",children:"Artist Stock Management"}),c.length===0?t.jsx("div",{className:"text-gray-400",children:"No products found. Encourage artists to upload products."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(P=>{var L;return t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-bold text-white",children:P.name}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${P.status==="approved"?"bg-green-600":P.status==="rejected"?"bg-red-600":"bg-yellow-600"}`,children:P.status})]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Artist: ",(L=i.find(z=>z.uid===P.artistId))==null?void 0:L.shopName]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Stock Level: ",P.stockLevel]}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[t.jsx("button",{onClick:()=>N(P),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex-1",children:"Approve Product"}),t.jsx("button",{onClick:()=>T(P),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex-1",children:"Reject Product"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("h4",{className:"text-white text-sm font-semibold mb-2",children:"Product Images"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:P.images.map((z,F)=>t.jsx("img",{src:z,alt:`Product Image ${F+1}`,className:"w-full h-20 object-cover rounded border border-zinc-700"},F))})]}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsxs("button",{onClick:()=>k(P),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex-1",children:[t.jsx(Fr,{className:"w-5 h-5 mr-2"})," Receive Stock"]}),t.jsxs("button",{onClick:()=>_(P.id),className:"bg-red-800 text-white px-4 py-2 rounded-lg hover:bg-red-900 transition-colors flex-1",children:[t.jsx(II,{className:"w-5 h-5 mr-2"})," Delete Product"]})]})]},P.id)})})]})]})},NL=()=>{const{currency:n,applyForArtist:e}=vt(),[s,r]=S.useState(!1),[i,o]=S.useState({name:"",surname:"",artistTradeName:"",contactNumber:"",email:"",productImages:[]}),[c,u]=S.useState(!1),f=[{name:"Tester",slots:5,priceZAR:19,priceUSD:1.5,features:["5 Product Slots","Basic Support"]},{name:"Hobbyist",slots:20,priceZAR:49,priceUSD:4,features:["20 Product Slots","Email Support"]},{name:"Creator",slots:50,priceZAR:99,priceUSD:8,features:["50 Product Slots","Priority Support","Access to Analytics"]},{name:"Boutique",slots:100,priceZAR:189,priceUSD:15,features:["100 Product Slots","Dedicated Support","Advanced Analytics"]},{name:"Gallery",slots:250,priceZAR:399,priceUSD:32,features:["250 Product Slots","24/7 Support","Full Analytics Suite"]}];return t.jsx("div",{className:"bg-black text-white min-h-screen p-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("header",{className:"text-center mb-12",children:[t.jsx("h1",{className:"text-5xl font-bold text-yellow-400",children:"Your Art. Global Stage. 1% Fees."}),t.jsx("p",{className:"text-xl mt-4 text-zinc-300",children:"Join a curated marketplace for elite jewelry artists and reach over 7,000 collectors worldwide."}),t.jsx("button",{onClick:()=>r(!0),className:"mt-8 bg-yellow-400 text-black font-bold py-3 px-8 rounded-lg text-lg hover:bg-yellow-500 transition-colors",children:n==="ZAR"?"START YOUR SHOP - R19 / Month":"START YOUR SHOP - $1.50 / Month"})]}),t.jsxs("section",{className:"mb-16",children:[t.jsx("h2",{className:"text-3xl font-bold text-center text-yellow-400 mb-8",children:"The Trust Timeline: Secure Escrow Payments"}),t.jsxs("div",{className:"flex justify-between items-center text-center",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-4xl mb-2",children:""}),t.jsx("h3",{className:"font-bold text-lg",children:"Sold"}),t.jsx("p",{className:"text-zinc-400",children:"Funds are held securely in escrow."})]}),t.jsx("div",{className:"flex-1 text-zinc-500",children:"--->"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-4xl mb-2",children:""}),t.jsx("h3",{className:"font-bold text-lg",children:"Hub Check"}),t.jsx("p",{className:"text-zinc-400",children:"Your piece is inspected at our Worcester hub."})]}),t.jsx("div",{className:"flex-1 text-zinc-500",children:"--->"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-4xl mb-2",children:""}),t.jsx("h3",{className:"font-bold text-lg",children:"Delivered"}),t.jsx("p",{className:"text-zinc-400",children:"The collector receives your art."})]}),t.jsx("div",{className:"flex-1 text-zinc-500",children:"--->"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-4xl mb-2",children:""}),t.jsx("h3",{className:"font-bold text-lg",children:"Day 30"}),t.jsx("p",{className:"text-zinc-400",children:"Funds are released to your wallet."})]})]})]}),t.jsxs("section",{className:"mb-16",children:[t.jsx("h2",{className:"text-3xl font-bold text-center text-yellow-400 mb-8",children:"Choose Your Plan"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-8",children:f.map(h=>t.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg p-6 text-center hover:border-yellow-400 transition-all",children:[t.jsx("h3",{className:"text-2xl font-bold text-yellow-400",children:h.name}),t.jsxs("p",{className:"text-4xl font-bold my-4",children:[n==="ZAR"?`R${h.priceZAR}`:`$${h.priceUSD}`,t.jsx("span",{className:"text-lg font-normal text-zinc-400",children:"/month"})]}),t.jsxs("p",{className:"text-zinc-400 mb-4",children:[h.slots," Product Slots"]}),t.jsx("button",{className:"w-full bg-yellow-400 text-black font-bold py-2 px-4 rounded-lg hover:bg-yellow-500 transition-colors",children:"Select Plan"})]},h.name))})]}),t.jsxs("section",{children:[t.jsx("h2",{className:"text-3xl font-bold text-center text-yellow-400 mb-8",children:"How It Works"}),t.jsxs("div",{className:"max-w-3xl mx-auto text-lg text-zinc-300 space-y-4",children:[t.jsx("p",{children:"1. Apply to become a partner. We review applications to maintain a high-quality, curated collection of handmade jewelry."}),t.jsx("p",{children:"2. Once approved, choose a subscription plan that fits your needs. You can upload professional photos of your products. No need to send us stock upfront!"}),t.jsx("p",{children:"3. When an item sells, you ship it to our hub in Worcester, South Africa for inspection. You are responsible for this initial shipping cost."}),t.jsx("p",{children:"4. We handle the final quality check and ship the item to the customer. If an item fails inspection, it will be returned to you at your cost, or you can opt to have it sold in our 'Vault' at a reduced price."}),t.jsx("p",{children:"5. Your funds are held in escrow and released to your artist wallet 30 days after the customer receives the item. Our commission is a flat 1% of the sale price."})]})]})]})})},jL=({onClose:n})=>t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:n}),t.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-sm w-full shadow-[0_0_50px_rgba(236,72,153,0.4)] animate-in zoom-in-95 duration-300 text-center",children:[t.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:t.jsx(us,{size:20})}),t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600 to-purple-600 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg transform rotate-3",children:t.jsx(AI,{size:32,className:"text-white"})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Voucher Redeemed!"}),t.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"To ensure your discount applies correctly and for the best shopping experience, please use our App."}),t.jsxs("button",{className:"w-full py-3 bg-white text-black font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors mb-3 shadow-lg",onClick:()=>alert("Please use the Install button at the bottom of the screen."),children:[t.jsx(jc,{size:20})," Install App"]}),t.jsx("button",{onClick:n,className:"text-xs text-gray-500 hover:text-gray-300 underline",children:"Continue in Browser"})]})]}),SL=()=>{const n=oa(),e=cn(),{applyExternalVoucher:s}=vt(),[r,i]=S.useState(!1);return S.useEffect(()=>{const c=new URLSearchParams(n.search).get("voucher");c&&s(c)&&(i(!0),e("/cart",{replace:!0}))},[n,s,e]),r?t.jsx(jL,{onClose:()=>i(!1)}):null},kL=()=>t.jsx(rI,{children:t.jsx(_L,{})}),_L=()=>{const{isLoading:n,user:e}=vt(),{updateAvailable:s,isDownloading:r,performUpdate:i,dismissUpdate:o}=tL();return S.useEffect(()=>{e!=null&&e.id&&RN(e.id)},[e==null?void 0:e.id]),n?t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):t.jsxs(z1,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[t.jsx(SL,{}),t.jsx(UO,{}),t.jsx(oL,{}),t.jsx(iL,{}),s&&t.jsx(sL,{version:s.version,isDownloading:r,onUpdate:i,onDismiss:o}),t.jsxs(I1,{children:[t.jsxs(bt,{path:"/",element:t.jsx(YI,{}),children:[t.jsx(bt,{index:!0,element:t.jsx(eR,{})}),t.jsx(bt,{path:"collections/:categoryName",element:t.jsx(y5,{})}),t.jsx(bt,{path:"catalog/:type",element:t.jsx(b5,{})}),t.jsx(bt,{path:"product/:id",element:t.jsx(LR,{})}),t.jsx(bt,{path:"cart",element:t.jsx(VR,{})}),t.jsx(bt,{path:"profile",element:t.jsx(BR,{})}),t.jsx(bt,{path:"membership",element:t.jsx(f5,{})}),t.jsx(bt,{path:"earn-rewards",element:t.jsx(p5,{})}),t.jsx(bt,{path:"affiliate-program",element:t.jsx(g5,{})}),t.jsx(bt,{path:"gift-cards",element:t.jsx(x5,{})}),t.jsx(bt,{path:"weekly-winners",element:t.jsx(zO,{})})," ",t.jsx(bt,{path:"login",element:t.jsx(qR,{})}),t.jsx(bt,{path:"terms",element:t.jsx(GO,{})})," ",t.jsx(bt,{path:"vault",element:t.jsx(cL,{})})," ",t.jsx(bt,{path:"vip/:affiliateCode",element:t.jsx(hL,{})}),t.jsx(bt,{path:"notifications",element:t.jsx(gL,{})})," ",t.jsx(bt,{path:"customized-wire-wrapped-pendants",element:t.jsx(yL,{})}),t.jsx(bt,{path:"customized-wire-wrapped-pendants/:id",element:t.jsx(vL,{})})," ",t.jsx(bt,{path:"artist-partnership",element:t.jsx(NL,{})})," "]}),t.jsxs(bt,{path:"/admin",element:t.jsx(ZI,{}),children:[t.jsx(bt,{index:!0,element:t.jsx(v5,{})}),t.jsx(bt,{path:"products",element:t.jsx(PO,{})}),t.jsx(bt,{path:"orders",element:t.jsx(HO,{})}),t.jsx(bt,{path:"categories",element:t.jsx(AO,{})}),t.jsx(bt,{path:"gift-cards",element:t.jsx(IO,{})}),t.jsx(bt,{path:"social",element:t.jsx(MO,{})}),t.jsx(bt,{path:"affiliates",element:t.jsx(OO,{})}),t.jsx(bt,{path:"winners",element:t.jsx(FO,{})}),t.jsx(bt,{path:"expenses",element:t.jsx(WO,{})})," ",t.jsx(bt,{path:"vault",element:t.jsx(lL,{})})," ",t.jsx(bt,{path:"members",element:t.jsx(dL,{})})," ",t.jsx(bt,{path:"users",element:t.jsx(uL,{})})," ",t.jsx(bt,{path:"affiliate/store-builder",element:t.jsx(mL,{})}),t.jsx(bt,{path:"notifications",element:t.jsx(xL,{})})," ",t.jsx(bt,{path:"custom-pendant-manager",element:t.jsx(bL,{})})," ",t.jsx(bt,{path:"artists",element:t.jsx(wL,{})}),t.jsx(bt,{path:"ad-pricing",element:t.jsx(xj,{})})]}),t.jsx(bt,{path:"*",element:t.jsx(P1,{to:"/"})})]})]})};var Ev={},CL="@vercel/speed-insights",EL="1.3.1",TL=()=>{window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)})};function PL(){return typeof window<"u"}function AL(){try{const n="production"}catch{}return"production"}function yj(){return AL()==="development"}function IL(n){return n.scriptSrc?n.scriptSrc:yj()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":n.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":n.basePath?`${n.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function RL(n={}){var e;if(!PL()||n.route===null)return null;TL();const s=IL(n);if(document.head.querySelector(`script[src*="${s}"]`))return null;n.beforeSend&&((e=window.si)==null||e.call(window,"beforeSend",n.beforeSend));const r=document.createElement("script");return r.src=s,r.defer=!0,r.dataset.sdkn=CL+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=EL,n.sampleRate&&(r.dataset.sampleRate=n.sampleRate.toString()),n.route&&(r.dataset.route=n.route),n.endpoint?r.dataset.endpoint=n.endpoint:n.basePath&&(r.dataset.endpoint=`${n.basePath}/speed-insights/vitals`),n.dsn&&(r.dataset.dsn=n.dsn),yj()&&n.debug===!1&&(r.dataset.debug="false"),r.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${s}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(r),{setRoute:i=>{r.dataset.route=i??void 0}}}function DL(){if(!(typeof process>"u"||typeof Ev>"u"))return Ev.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function ML(n){S.useEffect(()=>{var s;n.beforeSend&&((s=window.si)==null||s.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]);const e=S.useRef(null);return S.useEffect(()=>{if(e.current)n.route&&e.current(n.route);else{const s=RL({framework:n.framework??"react",basePath:n.basePath??DL(),...n});s&&(e.current=s.setRoute)}},[n.route]),null}"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").catch(n=>{console.warn("Service worker registration failed:",n)});const bj=document.getElementById("root");if(!bj)throw new Error("Could not find root element to mount to");const OL=LS.createRoot(bj);OL.render(t.jsxs(Ba.StrictMode,{children:[t.jsx(kL,{}),t.jsx(ML,{})]}));export{_v as E,WN as W,qI as b};
