function CS(n,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();function Tv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Af={exports:{}},Yl={},If={exports:{}},St={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function ES(){if(Z0)return St;Z0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.iterator;function N(X){return X===null||typeof X!="object"?null:(X=v&&X[v]||X["@@iterator"],typeof X=="function"?X:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,C={};function R(X,ue,se){this.props=X,this.context=ue,this.refs=C,this.updater=se||T}R.prototype.isReactComponent={},R.prototype.setState=function(X,ue){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ue,"setState")},R.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function z(){}z.prototype=R.prototype;function $(X,ue,se){this.props=X,this.context=ue,this.refs=C,this.updater=se||T}var U=$.prototype=new z;U.constructor=$,_(U,R.prototype),U.isPureReactComponent=!0;var Z=Array.isArray,q=Object.prototype.hasOwnProperty,V={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function k(X,ue,se){var xe,H={},Pe=null,Te=null;if(ue!=null)for(xe in ue.ref!==void 0&&(Te=ue.ref),ue.key!==void 0&&(Pe=""+ue.key),ue)q.call(ue,xe)&&!I.hasOwnProperty(xe)&&(H[xe]=ue[xe]);var Ue=arguments.length-2;if(Ue===1)H.children=se;else if(1<Ue){for(var Xe=Array(Ue),rt=0;rt<Ue;rt++)Xe[rt]=arguments[rt+2];H.children=Xe}if(X&&X.defaultProps)for(xe in Ue=X.defaultProps,Ue)H[xe]===void 0&&(H[xe]=Ue[xe]);return{$$typeof:n,type:X,key:Pe,ref:Te,props:H,_owner:V.current}}function E(X,ue){return{$$typeof:n,type:X.type,key:ue,ref:X.ref,props:X.props,_owner:X._owner}}function L(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function O(X){var ue={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(se){return ue[se]})}var B=/\/+/g;function A(X,ue){return typeof X=="object"&&X!==null&&X.key!=null?O(""+X.key):ue.toString(36)}function ne(X,ue,se,xe,H){var Pe=typeof X;(Pe==="undefined"||Pe==="boolean")&&(X=null);var Te=!1;if(X===null)Te=!0;else switch(Pe){case"string":case"number":Te=!0;break;case"object":switch(X.$$typeof){case n:case e:Te=!0}}if(Te)return Te=X,H=H(Te),X=xe===""?"."+A(Te,0):xe,Z(H)?(se="",X!=null&&(se=X.replace(B,"$&/")+"/"),ne(H,ue,se,"",function(rt){return rt})):H!=null&&(L(H)&&(H=E(H,se+(!H.key||Te&&Te.key===H.key?"":(""+H.key).replace(B,"$&/")+"/")+X)),ue.push(H)),1;if(Te=0,xe=xe===""?".":xe+":",Z(X))for(var Ue=0;Ue<X.length;Ue++){Pe=X[Ue];var Xe=xe+A(Pe,Ue);Te+=ne(Pe,ue,se,Xe,H)}else if(Xe=N(X),typeof Xe=="function")for(X=Xe.call(X),Ue=0;!(Pe=X.next()).done;)Pe=Pe.value,Xe=xe+A(Pe,Ue++),Te+=ne(Pe,ue,se,Xe,H);else if(Pe==="object")throw ue=String(X),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.");return Te}function fe(X,ue,se){if(X==null)return X;var xe=[],H=0;return ne(X,xe,"","",function(Pe){return ue.call(se,Pe,H++)}),xe}function ke(X){if(X._status===-1){var ue=X._result;ue=ue(),ue.then(function(se){(X._status===0||X._status===-1)&&(X._status=1,X._result=se)},function(se){(X._status===0||X._status===-1)&&(X._status=2,X._result=se)}),X._status===-1&&(X._status=0,X._result=ue)}if(X._status===1)return X._result.default;throw X._result}var De={current:null},oe={transition:null},be={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:oe,ReactCurrentOwner:V};function ve(){throw Error("act(...) is not supported in production builds of React.")}return St.Children={map:fe,forEach:function(X,ue,se){fe(X,function(){ue.apply(this,arguments)},se)},count:function(X){var ue=0;return fe(X,function(){ue++}),ue},toArray:function(X){return fe(X,function(ue){return ue})||[]},only:function(X){if(!L(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},St.Component=R,St.Fragment=s,St.Profiler=i,St.PureComponent=$,St.StrictMode=r,St.Suspense=f,St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=be,St.act=ve,St.cloneElement=function(X,ue,se){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var xe=_({},X.props),H=X.key,Pe=X.ref,Te=X._owner;if(ue!=null){if(ue.ref!==void 0&&(Pe=ue.ref,Te=V.current),ue.key!==void 0&&(H=""+ue.key),X.type&&X.type.defaultProps)var Ue=X.type.defaultProps;for(Xe in ue)q.call(ue,Xe)&&!I.hasOwnProperty(Xe)&&(xe[Xe]=ue[Xe]===void 0&&Ue!==void 0?Ue[Xe]:ue[Xe])}var Xe=arguments.length-2;if(Xe===1)xe.children=se;else if(1<Xe){Ue=Array(Xe);for(var rt=0;rt<Xe;rt++)Ue[rt]=arguments[rt+2];xe.children=Ue}return{$$typeof:n,type:X.type,key:H,ref:Pe,props:xe,_owner:Te}},St.createContext=function(X){return X={$$typeof:c,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:o,_context:X},X.Consumer=X},St.createElement=k,St.createFactory=function(X){var ue=k.bind(null,X);return ue.type=X,ue},St.createRef=function(){return{current:null}},St.forwardRef=function(X){return{$$typeof:u,render:X}},St.isValidElement=L,St.lazy=function(X){return{$$typeof:x,_payload:{_status:-1,_result:X},_init:ke}},St.memo=function(X,ue){return{$$typeof:h,type:X,compare:ue===void 0?null:ue}},St.startTransition=function(X){var ue=oe.transition;oe.transition={};try{X()}finally{oe.transition=ue}},St.unstable_act=ve,St.useCallback=function(X,ue){return De.current.useCallback(X,ue)},St.useContext=function(X){return De.current.useContext(X)},St.useDebugValue=function(){},St.useDeferredValue=function(X){return De.current.useDeferredValue(X)},St.useEffect=function(X,ue){return De.current.useEffect(X,ue)},St.useId=function(){return De.current.useId()},St.useImperativeHandle=function(X,ue,se){return De.current.useImperativeHandle(X,ue,se)},St.useInsertionEffect=function(X,ue){return De.current.useInsertionEffect(X,ue)},St.useLayoutEffect=function(X,ue){return De.current.useLayoutEffect(X,ue)},St.useMemo=function(X,ue){return De.current.useMemo(X,ue)},St.useReducer=function(X,ue,se){return De.current.useReducer(X,ue,se)},St.useRef=function(X){return De.current.useRef(X)},St.useState=function(X){return De.current.useState(X)},St.useSyncExternalStore=function(X,ue,se){return De.current.useSyncExternalStore(X,ue,se)},St.useTransition=function(){return De.current.useTransition()},St.version="18.3.1",St}var X0;function ep(){return X0||(X0=1,If.exports=ES()),If.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q0;function TS(){if(Q0)return Yl;Q0=1;var n=ep(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(u,f,h){var x,v={},N=null,T=null;h!==void 0&&(N=""+h),f.key!==void 0&&(N=""+f.key),f.ref!==void 0&&(T=f.ref);for(x in f)r.call(f,x)&&!o.hasOwnProperty(x)&&(v[x]=f[x]);if(u&&u.defaultProps)for(x in f=u.defaultProps,f)v[x]===void 0&&(v[x]=f[x]);return{$$typeof:e,type:u,key:N,ref:T,props:v,_owner:i.current}}return Yl.Fragment=s,Yl.jsx=c,Yl.jsxs=c,Yl}var ex;function PS(){return ex||(ex=1,Af.exports=TS()),Af.exports}var t=PS(),S=ep();const qa=Tv(S),AS=CS({__proto__:null,default:qa},[S]);var Hd={},Rf={exports:{}},bn={},Df={exports:{}},Mf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function IS(){return tx||(tx=1,(function(n){function e(oe,be){var ve=oe.length;oe.push(be);e:for(;0<ve;){var X=ve-1>>>1,ue=oe[X];if(0<i(ue,be))oe[X]=be,oe[ve]=ue,ve=X;else break e}}function s(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var be=oe[0],ve=oe.pop();if(ve!==be){oe[0]=ve;e:for(var X=0,ue=oe.length,se=ue>>>1;X<se;){var xe=2*(X+1)-1,H=oe[xe],Pe=xe+1,Te=oe[Pe];if(0>i(H,ve))Pe<ue&&0>i(Te,H)?(oe[X]=Te,oe[Pe]=ve,X=Pe):(oe[X]=H,oe[xe]=ve,X=xe);else if(Pe<ue&&0>i(Te,ve))oe[X]=Te,oe[Pe]=ve,X=Pe;else break e}}return be}function i(oe,be){var ve=oe.sortIndex-be.sortIndex;return ve!==0?ve:oe.id-be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var f=[],h=[],x=1,v=null,N=3,T=!1,_=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(oe){for(var be=s(h);be!==null;){if(be.callback===null)r(h);else if(be.startTime<=oe)r(h),be.sortIndex=be.expirationTime,e(f,be);else break;be=s(h)}}function Z(oe){if(C=!1,U(oe),!_)if(s(f)!==null)_=!0,ke(q);else{var be=s(h);be!==null&&De(Z,be.startTime-oe)}}function q(oe,be){_=!1,C&&(C=!1,z(k),k=-1),T=!0;var ve=N;try{for(U(be),v=s(f);v!==null&&(!(v.expirationTime>be)||oe&&!O());){var X=v.callback;if(typeof X=="function"){v.callback=null,N=v.priorityLevel;var ue=X(v.expirationTime<=be);be=n.unstable_now(),typeof ue=="function"?v.callback=ue:v===s(f)&&r(f),U(be)}else r(f);v=s(f)}if(v!==null)var se=!0;else{var xe=s(h);xe!==null&&De(Z,xe.startTime-be),se=!1}return se}finally{v=null,N=ve,T=!1}}var V=!1,I=null,k=-1,E=5,L=-1;function O(){return!(n.unstable_now()-L<E)}function B(){if(I!==null){var oe=n.unstable_now();L=oe;var be=!0;try{be=I(!0,oe)}finally{be?A():(V=!1,I=null)}}else V=!1}var A;if(typeof $=="function")A=function(){$(B)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,fe=ne.port2;ne.port1.onmessage=B,A=function(){fe.postMessage(null)}}else A=function(){R(B,0)};function ke(oe){I=oe,V||(V=!0,A())}function De(oe,be){k=R(function(){oe(n.unstable_now())},be)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){_||T||(_=!0,ke(q))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_getFirstCallbackNode=function(){return s(f)},n.unstable_next=function(oe){switch(N){case 1:case 2:case 3:var be=3;break;default:be=N}var ve=N;N=be;try{return oe()}finally{N=ve}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,be){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ve=N;N=oe;try{return be()}finally{N=ve}},n.unstable_scheduleCallback=function(oe,be,ve){var X=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?X+ve:X):ve=X,oe){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ve+ue,oe={id:x++,callback:be,priorityLevel:oe,startTime:ve,expirationTime:ue,sortIndex:-1},ve>X?(oe.sortIndex=ve,e(h,oe),s(f)===null&&oe===s(h)&&(C?(z(k),k=-1):C=!0,De(Z,ve-X))):(oe.sortIndex=ue,e(f,oe),_||T||(_=!0,ke(q))),oe},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(oe){var be=N;return function(){var ve=N;N=be;try{return oe.apply(this,arguments)}finally{N=ve}}}})(Mf)),Mf}var sx;function RS(){return sx||(sx=1,Df.exports=IS()),Df.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nx;function DS(){if(nx)return bn;nx=1;var n=ep(),e=RS();function s(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,l){c(a,l),c(a+"Capture",l)}function c(a,l){for(i[a]=l,a=0;a<l.length;a++)r.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},v={};function N(a){return f.call(v,a)?!0:f.call(x,a)?!1:h.test(a)?v[a]=!0:(x[a]=!0,!1)}function T(a,l,d,p){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:d!==null?!d.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function _(a,l,d,p){if(l===null||typeof l>"u"||T(a,l,d,p))return!0;if(p)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(a,l,d,p,b,w,M){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=b,this.mustUseProperty=d,this.propertyName=a,this.type=l,this.sanitizeURL=w,this.removeEmptyString=M}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){R[a]=new C(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];R[l]=new C(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){R[a]=new C(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){R[a]=new C(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){R[a]=new C(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){R[a]=new C(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){R[a]=new C(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){R[a]=new C(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){R[a]=new C(a,5,!1,a.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function $(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(z,$);R[l]=new C(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(z,$);R[l]=new C(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(z,$);R[l]=new C(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){R[a]=new C(a,1,!1,a.toLowerCase(),null,!1,!1)}),R.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){R[a]=new C(a,1,!1,a.toLowerCase(),null,!0,!0)});function U(a,l,d,p){var b=R.hasOwnProperty(l)?R[l]:null;(b!==null?b.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(_(l,d,b,p)&&(d=null),p||b===null?N(l)&&(d===null?a.removeAttribute(l):a.setAttribute(l,""+d)):b.mustUseProperty?a[b.propertyName]=d===null?b.type===3?!1:"":d:(l=b.attributeName,p=b.attributeNamespace,d===null?a.removeAttribute(l):(b=b.type,d=b===3||b===4&&d===!0?"":""+d,p?a.setAttributeNS(p,l,d):a.setAttribute(l,d))))}var Z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),V=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),O=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),oe=Symbol.iterator;function be(a){return a===null||typeof a!="object"?null:(a=oe&&a[oe]||a["@@iterator"],typeof a=="function"?a:null)}var ve=Object.assign,X;function ue(a){if(X===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);X=l&&l[1]||""}return`
`+X+a}var se=!1;function xe(a,l){if(!a||se)return"";se=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(me){var p=me}Reflect.construct(a,[],l)}else{try{l.call()}catch(me){p=me}a.call(l.prototype)}else{try{throw Error()}catch(me){p=me}a()}}catch(me){if(me&&p&&typeof me.stack=="string"){for(var b=me.stack.split(`
`),w=p.stack.split(`
`),M=b.length-1,W=w.length-1;1<=M&&0<=W&&b[M]!==w[W];)W--;for(;1<=M&&0<=W;M--,W--)if(b[M]!==w[W]){if(M!==1||W!==1)do if(M--,W--,0>W||b[M]!==w[W]){var Q=`
`+b[M].replace(" at new "," at ");return a.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",a.displayName)),Q}while(1<=M&&0<=W);break}}}finally{se=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?ue(a):""}function H(a){switch(a.tag){case 5:return ue(a.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 2:case 15:return a=xe(a.type,!1),a;case 11:return a=xe(a.type.render,!1),a;case 1:return a=xe(a.type,!0),a;default:return""}}function Pe(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case I:return"Fragment";case V:return"Portal";case E:return"Profiler";case k:return"StrictMode";case A:return"Suspense";case ne:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case O:return(a.displayName||"Context")+".Consumer";case L:return(a._context.displayName||"Context")+".Provider";case B:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case fe:return l=a.displayName||null,l!==null?l:Pe(a.type)||"Memo";case ke:l=a._payload,a=a._init;try{return Pe(a(l))}catch{}}return null}function Te(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(l);case 8:return l===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ue(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Xe(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function rt(a){var l=Xe(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),p=""+a[l];if(!a.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,w=d.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return b.call(this)},set:function(M){p=""+M,w.call(this,M)}}),Object.defineProperty(a,l,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(M){p=""+M},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function zt(a){a._valueTracker||(a._valueTracker=rt(a))}function we(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),p="";return a&&(p=Xe(a)?a.checked?"true":"false":a.value),a=p,a!==d?(l.setValue(a),!0):!1}function Ce(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Qe(a,l){var d=l.checked;return ve({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??a._wrapperState.initialChecked})}function ut(a,l){var d=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;d=Ue(l.value!=null?l.value:d),a._wrapperState={initialChecked:p,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function ie(a,l){l=l.checked,l!=null&&U(a,"checked",l,!1)}function Se(a,l){ie(a,l);var d=Ue(l.value),p=l.type;if(d!=null)p==="number"?(d===0&&a.value===""||a.value!=d)&&(a.value=""+d):a.value!==""+d&&(a.value=""+d);else if(p==="submit"||p==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?Ne(a,l.type,d):l.hasOwnProperty("defaultValue")&&Ne(a,l.type,Ue(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function Be(a,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,d||l===a.value||(a.value=l),a.defaultValue=l}d=a.name,d!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,d!==""&&(a.name=d)}function Ne(a,l,d){(l!=="number"||Ce(a.ownerDocument)!==a)&&(d==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+d&&(a.defaultValue=""+d))}var We=Array.isArray;function jt(a,l,d,p){if(a=a.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<a.length;d++)b=l.hasOwnProperty("$"+a[d].value),a[d].selected!==b&&(a[d].selected=b),b&&p&&(a[d].defaultSelected=!0)}else{for(d=""+Ue(d),l=null,b=0;b<a.length;b++){if(a[b].value===d){a[b].selected=!0,p&&(a[b].defaultSelected=!0);return}l!==null||a[b].disabled||(l=a[b])}l!==null&&(l.selected=!0)}}function ye(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(s(91));return ve({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function J(a,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(s(92));if(We(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),d=l}a._wrapperState={initialValue:Ue(d)}}function _e(a,l){var d=Ue(l.value),p=Ue(l.defaultValue);d!=null&&(d=""+d,d!==a.value&&(a.value=d),l.defaultValue==null&&a.defaultValue!==d&&(a.defaultValue=d)),p!=null&&(a.defaultValue=""+p)}function kt(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function xt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wt(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?xt(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var $t,Ss=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,p,b){MSApp.execUnsafeLocalFunction(function(){return a(l,d,p,b)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for($t=$t||document.createElement("div"),$t.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=$t.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function os(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var Le={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fs=["Webkit","ms","Moz","O"];Object.keys(Le).forEach(function(a){fs.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Le[l]=Le[a]})});function ls(a,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||Le.hasOwnProperty(a)&&Le[a]?(""+l).trim():l+"px"}function Ws(a,l){a=a.style;for(var d in l)if(l.hasOwnProperty(d)){var p=d.indexOf("--")===0,b=ls(d,l[d],p);d==="float"&&(d="cssFloat"),p?a.setProperty(d,b):a[d]=b}}var ur=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ms(a,l){if(l){if(ur[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(s(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(s(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(s(61))}if(l.style!=null&&typeof l.style!="object")throw Error(s(62))}}function Os(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mn=null;function On(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ms=null,Ls=null,Vt=null;function ks(a){if(a=Ml(a)){if(typeof ms!="function")throw Error(s(280));var l=a.stateNode;l&&(l=od(l),ms(a.stateNode,a.type,l))}}function ts(a){Ls?Vt?Vt.push(a):Vt=[a]:Ls=a}function je(){if(Ls){var a=Ls,l=Vt;if(Vt=Ls=null,ks(a),l)for(a=0;a<l.length;a++)ks(l[a])}}function Ye(a,l){return a(l)}function Et(){}var Tt=!1;function Rt(a,l,d){if(Tt)return a(l,d);Tt=!0;try{return Ye(a,l,d)}finally{Tt=!1,(Ls!==null||Vt!==null)&&(Et(),je())}}function Mt(a,l){var d=a.stateNode;if(d===null)return null;var p=od(d);if(p===null)return null;d=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(s(231,l,typeof d));return d}var Ut=!1;if(u)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch{Ut=!1}function Gn(a,l,d,p,b,w,M,W,Q){var me=Array.prototype.slice.call(arguments,3);try{l.apply(d,me)}catch(Ie){this.onError(Ie)}}var un=!1,hn=null,hr=!1,zs=null,yi={onError:function(a){un=!0,hn=a}};function qr(a,l,d,p,b,w,M,W,Q){un=!1,hn=null,Gn.apply(yi,arguments)}function Wr(a,l,d,p,b,w,M,W,Q){if(qr.apply(this,arguments),un){if(un){var me=hn;un=!1,hn=null}else throw Error(s(198));hr||(hr=!0,zs=me)}}function tn(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function Hr(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function bi(a){if(tn(a)!==a)throw Error(s(188))}function fr(a){var l=a.alternate;if(!l){if(l=tn(a),l===null)throw Error(s(188));return l!==a?null:a}for(var d=a,p=l;;){var b=d.return;if(b===null)break;var w=b.alternate;if(w===null){if(p=b.return,p!==null){d=p;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===d)return bi(b),a;if(w===p)return bi(b),l;w=w.sibling}throw Error(s(188))}if(d.return!==p.return)d=b,p=w;else{for(var M=!1,W=b.child;W;){if(W===d){M=!0,d=b,p=w;break}if(W===p){M=!0,p=b,d=w;break}W=W.sibling}if(!M){for(W=w.child;W;){if(W===d){M=!0,d=w,p=b;break}if(W===p){M=!0,p=w,d=b;break}W=W.sibling}if(!M)throw Error(s(189))}}if(d.alternate!==p)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?a:l}function Gr(a){return a=fr(a),a!==null?Ln(a):null}function Ln(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Ln(a);if(l!==null)return l;a=a.sibling}return null}var G=e.unstable_scheduleCallback,K=e.unstable_cancelCallback,Y=e.unstable_shouldYield,ae=e.unstable_requestPaint,pe=e.unstable_now,Ge=e.unstable_getCurrentPriorityLevel,lt=e.unstable_ImmediatePriority,te=e.unstable_UserBlockingPriority,le=e.unstable_NormalPriority,Oe=e.unstable_LowPriority,ht=e.unstable_IdlePriority,it=null,gt=null;function Ht(a){if(gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(it,a,void 0,(a.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:$e,D=Math.log,re=Math.LN2;function $e(a){return a>>>=0,a===0?32:31-(D(a)/re|0)|0}var Ee=64,Ve=4194304;function Je(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function bt(a,l){var d=a.pendingLanes;if(d===0)return 0;var p=0,b=a.suspendedLanes,w=a.pingedLanes,M=d&268435455;if(M!==0){var W=M&~b;W!==0?p=Je(W):(w&=M,w!==0&&(p=Je(w)))}else M=d&~b,M!==0?p=Je(M):w!==0&&(p=Je(w));if(p===0)return 0;if(l!==0&&l!==p&&(l&b)===0&&(b=p&-p,w=l&-l,b>=w||b===16&&(w&4194240)!==0))return l;if((p&4)!==0&&(p|=d&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=p;0<l;)d=31-_t(l),b=1<<d,p|=a[d],l&=~b;return p}function Yt(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mr(a,l){for(var d=a.suspendedLanes,p=a.pingedLanes,b=a.expirationTimes,w=a.pendingLanes;0<w;){var M=31-_t(w),W=1<<M,Q=b[M];Q===-1?((W&d)===0||(W&p)!==0)&&(b[M]=Yt(W,l)):Q<=l&&(a.expiredLanes|=W),w&=~W}}function Kr(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function vi(){var a=Ee;return Ee<<=1,(Ee&4194240)===0&&(Ee=64),a}function gl(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function ma(a,l,d){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-_t(l),a[l]=d}function lh(a,l){var d=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var p=a.eventTimes;for(a=a.expirationTimes;0<d;){var b=31-_t(d),w=1<<b;l[b]=0,p[b]=-1,a[b]=-1,d&=~w}}function xl(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var p=31-_t(d),b=1<<p;b&l|a[p]&l&&(a[p]|=l),d&=~b}}var Ct=0;function pr(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var yl,ro,bl,vl,wl,gr=!1,io=[],xr=null,yr=null,Us=null,pa=new Map,Jr=new Map,jn=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wi(a,l){switch(a){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":pa.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jr.delete(l.pointerId)}}function Kn(a,l,d,p,b,w){return a===null||a.nativeEvent!==w?(a={blockedOn:l,domEventName:d,eventSystemFlags:p,nativeEvent:w,targetContainers:[b]},l!==null&&(l=Ml(l),l!==null&&ro(l)),a):(a.eventSystemFlags|=p,l=a.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),a)}function Gc(a,l,d,p,b){switch(l){case"focusin":return xr=Kn(xr,a,l,d,p,b),!0;case"dragenter":return yr=Kn(yr,a,l,d,p,b),!0;case"mouseover":return Us=Kn(Us,a,l,d,p,b),!0;case"pointerover":var w=b.pointerId;return pa.set(w,Kn(pa.get(w)||null,a,l,d,p,b)),!0;case"gotpointercapture":return w=b.pointerId,Jr.set(w,Kn(Jr.get(w)||null,a,l,d,p,b)),!0}return!1}function ao(a){var l=ba(a.target);if(l!==null){var d=tn(l);if(d!==null){if(l=d.tag,l===13){if(l=Hr(d),l!==null){a.blockedOn=l,wl(a.priority,function(){bl(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Gt(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=oo(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(d===null){d=a.nativeEvent;var p=new d.constructor(d.type,d);Mn=p,d.target.dispatchEvent(p),Mn=null}else return l=Ml(d),l!==null&&ro(l),a.blockedOn=d,!1;l.shift()}return!0}function Kc(a,l,d){Gt(a)&&d.delete(l)}function ch(){gr=!1,xr!==null&&Gt(xr)&&(xr=null),yr!==null&&Gt(yr)&&(yr=null),Us!==null&&Gt(Us)&&(Us=null),pa.forEach(Kc),Jr.forEach(Kc)}function Ni(a,l){a.blockedOn===l&&(a.blockedOn=null,gr||(gr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ch)))}function ji(a){function l(b){return Ni(b,a)}if(0<io.length){Ni(io[0],a);for(var d=1;d<io.length;d++){var p=io[d];p.blockedOn===a&&(p.blockedOn=null)}}for(xr!==null&&Ni(xr,a),yr!==null&&Ni(yr,a),Us!==null&&Ni(Us,a),pa.forEach(l),Jr.forEach(l),d=0;d<jn.length;d++)p=jn[d],p.blockedOn===a&&(p.blockedOn=null);for(;0<jn.length&&(d=jn[0],d.blockedOn===null);)ao(d),d.blockedOn===null&&jn.shift()}var Yr=Z.ReactCurrentBatchConfig,Zr=!0;function br(a,l,d,p){var b=Ct,w=Yr.transition;Yr.transition=null;try{Ct=1,Nl(a,l,d,p)}finally{Ct=b,Yr.transition=w}}function Jc(a,l,d,p){var b=Ct,w=Yr.transition;Yr.transition=null;try{Ct=4,Nl(a,l,d,p)}finally{Ct=b,Yr.transition=w}}function Nl(a,l,d,p){if(Zr){var b=oo(a,l,d,p);if(b===null)vh(a,l,p,vr,d),wi(a,p);else if(Gc(b,a,l,d,p))p.stopPropagation();else if(wi(a,p),l&4&&-1<Hc.indexOf(a)){for(;b!==null;){var w=Ml(b);if(w!==null&&yl(w),w=oo(a,l,d,p),w===null&&vh(a,l,p,vr,d),w===b)break;b=w}b!==null&&p.stopPropagation()}else vh(a,l,p,null,d)}}var vr=null;function oo(a,l,d,p){if(vr=null,a=On(p),a=ba(a),a!==null)if(l=tn(a),l===null)a=null;else if(d=l.tag,d===13){if(a=Hr(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return vr=a,null}function lo(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ge()){case lt:return 1;case te:return 4;case le:case Oe:return 16;case ht:return 536870912;default:return 16}default:return 16}}var Sn=null,co=null,Xr=null;function Yc(){if(Xr)return Xr;var a,l=co,d=l.length,p,b="value"in Sn?Sn.value:Sn.textContent,w=b.length;for(a=0;a<d&&l[a]===b[a];a++);var M=d-a;for(p=1;p<=M&&l[d-p]===b[w-p];p++);return Xr=b.slice(a,1<p?1-p:void 0)}function ga(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function wr(){return!0}function jl(){return!1}function Hs(a){function l(d,p,b,w,M){this._reactName=d,this._targetInst=b,this.type=p,this.nativeEvent=w,this.target=M,this.currentTarget=null;for(var W in a)a.hasOwnProperty(W)&&(d=a[W],this[W]=d?d(w):w[W]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?wr:jl,this.isPropagationStopped=jl,this}return ve(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=wr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=wr)},persist:function(){},isPersistent:wr}),l}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=Hs(Nr),Si=ve({},Nr,{view:0,detail:0}),uo=Hs(Si),ho,fo,kn,ya=ve({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ss,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==kn&&(kn&&a.type==="mousemove"?(ho=a.screenX-kn.screenX,fo=a.screenY-kn.screenY):fo=ho=0,kn=a),ho)},movementY:function(a){return"movementY"in a?a.movementY:fo}}),Sl=Hs(ya),Zc=ve({},ya,{dataTransfer:0}),Xc=Hs(Zc),fn=ve({},Si,{relatedTarget:0}),mo=Hs(fn),Qc=ve({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),ki=Hs(Qc),m=ve({},Nr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),j=Hs(m),P=ve({},Nr,{data:0}),F=Hs(P),de={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vt(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Fe[a])?!!l[a]:!1}function ss(){return vt}var qt=ve({},Si,{key:function(a){if(a.key){var l=de[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=ga(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ge[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ss,charCode:function(a){return a.type==="keypress"?ga(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ga(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),xs=Hs(qt),zn=ve({},ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jr=Hs(zn),Sr=ve({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ss}),kr=Hs(Sr),po=ve({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),kl=Hs(po),vj=ve({},ya,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),wj=Hs(vj),Nj=[9,13,27,32],dh=u&&"CompositionEvent"in window,_l=null;u&&"documentMode"in document&&(_l=document.documentMode);var jj=u&&"TextEvent"in window&&!_l,Bp=u&&(!dh||_l&&8<_l&&11>=_l),qp=" ",Wp=!1;function Hp(a,l){switch(a){case"keyup":return Nj.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gp(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var go=!1;function Sj(a,l){switch(a){case"compositionend":return Gp(l);case"keypress":return l.which!==32?null:(Wp=!0,qp);case"textInput":return a=l.data,a===qp&&Wp?null:a;default:return null}}function kj(a,l){if(go)return a==="compositionend"||!dh&&Hp(a,l)?(a=Yc(),Xr=co=Sn=null,go=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Bp&&l.locale!=="ko"?null:l.data;default:return null}}var _j={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kp(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!_j[a.type]:l==="textarea"}function Jp(a,l,d,p){ts(p),l=rd(l,"onChange"),0<l.length&&(d=new xa("onChange","change",null,d,p),a.push({event:d,listeners:l}))}var Cl=null,El=null;function Cj(a){fg(a,0)}function ed(a){var l=wo(a);if(we(l))return a}function Ej(a,l){if(a==="change")return l}var Yp=!1;if(u){var uh;if(u){var hh="oninput"in document;if(!hh){var Zp=document.createElement("div");Zp.setAttribute("oninput","return;"),hh=typeof Zp.oninput=="function"}uh=hh}else uh=!1;Yp=uh&&(!document.documentMode||9<document.documentMode)}function Xp(){Cl&&(Cl.detachEvent("onpropertychange",Qp),El=Cl=null)}function Qp(a){if(a.propertyName==="value"&&ed(El)){var l=[];Jp(l,El,a,On(a)),Rt(Cj,l)}}function Tj(a,l,d){a==="focusin"?(Xp(),Cl=l,El=d,Cl.attachEvent("onpropertychange",Qp)):a==="focusout"&&Xp()}function Pj(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ed(El)}function Aj(a,l){if(a==="click")return ed(l)}function Ij(a,l){if(a==="input"||a==="change")return ed(l)}function Rj(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Jn=typeof Object.is=="function"?Object.is:Rj;function Tl(a,l){if(Jn(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),p=Object.keys(l);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var b=d[p];if(!f.call(l,b)||!Jn(a[b],l[b]))return!1}return!0}function eg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function tg(a,l){var d=eg(a);a=0;for(var p;d;){if(d.nodeType===3){if(p=a+d.textContent.length,a<=l&&p>=l)return{node:d,offset:l-a};a=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=eg(d)}}function sg(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?sg(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function ng(){for(var a=window,l=Ce();l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=Ce(a.document)}return l}function fh(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function Dj(a){var l=ng(),d=a.focusedElem,p=a.selectionRange;if(l!==d&&d&&d.ownerDocument&&sg(d.ownerDocument.documentElement,d)){if(p!==null&&fh(d)){if(l=p.start,a=p.end,a===void 0&&(a=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(a,d.value.length);else if(a=(l=d.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var b=d.textContent.length,w=Math.min(p.start,b);p=p.end===void 0?w:Math.min(p.end,b),!a.extend&&w>p&&(b=p,p=w,w=b),b=tg(d,w);var M=tg(d,p);b&&M&&(a.rangeCount!==1||a.anchorNode!==b.node||a.anchorOffset!==b.offset||a.focusNode!==M.node||a.focusOffset!==M.offset)&&(l=l.createRange(),l.setStart(b.node,b.offset),a.removeAllRanges(),w>p?(a.addRange(l),a.extend(M.node,M.offset)):(l.setEnd(M.node,M.offset),a.addRange(l)))}}for(l=[],a=d;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)a=l[d],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Mj=u&&"documentMode"in document&&11>=document.documentMode,xo=null,mh=null,Pl=null,ph=!1;function rg(a,l,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ph||xo==null||xo!==Ce(p)||(p=xo,"selectionStart"in p&&fh(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Pl&&Tl(Pl,p)||(Pl=p,p=rd(mh,"onSelect"),0<p.length&&(l=new xa("onSelect","select",null,l,d),a.push({event:l,listeners:p}),l.target=xo)))}function td(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var yo={animationend:td("Animation","AnimationEnd"),animationiteration:td("Animation","AnimationIteration"),animationstart:td("Animation","AnimationStart"),transitionend:td("Transition","TransitionEnd")},gh={},ig={};u&&(ig=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function sd(a){if(gh[a])return gh[a];if(!yo[a])return a;var l=yo[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in ig)return gh[a]=l[d];return a}var ag=sd("animationend"),og=sd("animationiteration"),lg=sd("animationstart"),cg=sd("transitionend"),dg=new Map,ug="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(a,l){dg.set(a,l),o(l,[a])}for(var xh=0;xh<ug.length;xh++){var yh=ug[xh],Oj=yh.toLowerCase(),Lj=yh[0].toUpperCase()+yh.slice(1);_i(Oj,"on"+Lj)}_i(ag,"onAnimationEnd"),_i(og,"onAnimationIteration"),_i(lg,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(cg,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Al));function hg(a,l,d){var p=a.type||"unknown-event";a.currentTarget=d,Wr(p,l,void 0,a),a.currentTarget=null}function fg(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var p=a[d],b=p.event;p=p.listeners;e:{var w=void 0;if(l)for(var M=p.length-1;0<=M;M--){var W=p[M],Q=W.instance,me=W.currentTarget;if(W=W.listener,Q!==w&&b.isPropagationStopped())break e;hg(b,W,me),w=Q}else for(M=0;M<p.length;M++){if(W=p[M],Q=W.instance,me=W.currentTarget,W=W.listener,Q!==w&&b.isPropagationStopped())break e;hg(b,W,me),w=Q}}}if(hr)throw a=zs,hr=!1,zs=null,a}function Zt(a,l){var d=l[_h];d===void 0&&(d=l[_h]=new Set);var p=a+"__bubble";d.has(p)||(mg(l,a,2,!1),d.add(p))}function bh(a,l,d){var p=0;l&&(p|=4),mg(d,a,p,l)}var nd="_reactListening"+Math.random().toString(36).slice(2);function Il(a){if(!a[nd]){a[nd]=!0,r.forEach(function(d){d!=="selectionchange"&&(zj.has(d)||bh(d,!1,a),bh(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[nd]||(l[nd]=!0,bh("selectionchange",!1,l))}}function mg(a,l,d,p){switch(lo(l)){case 1:var b=br;break;case 4:b=Jc;break;default:b=Nl}d=b.bind(null,l,d,a),b=void 0,!Ut||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),p?b!==void 0?a.addEventListener(l,d,{capture:!0,passive:b}):a.addEventListener(l,d,!0):b!==void 0?a.addEventListener(l,d,{passive:b}):a.addEventListener(l,d,!1)}function vh(a,l,d,p,b){var w=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var M=p.tag;if(M===3||M===4){var W=p.stateNode.containerInfo;if(W===b||W.nodeType===8&&W.parentNode===b)break;if(M===4)for(M=p.return;M!==null;){var Q=M.tag;if((Q===3||Q===4)&&(Q=M.stateNode.containerInfo,Q===b||Q.nodeType===8&&Q.parentNode===b))return;M=M.return}for(;W!==null;){if(M=ba(W),M===null)return;if(Q=M.tag,Q===5||Q===6){p=w=M;continue e}W=W.parentNode}}p=p.return}Rt(function(){var me=w,Ie=On(d),Me=[];e:{var Ae=dg.get(a);if(Ae!==void 0){var Ke=xa,et=a;switch(a){case"keypress":if(ga(d)===0)break e;case"keydown":case"keyup":Ke=xs;break;case"focusin":et="focus",Ke=mo;break;case"focusout":et="blur",Ke=mo;break;case"beforeblur":case"afterblur":Ke=mo;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=Sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=Xc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=kr;break;case ag:case og:case lg:Ke=ki;break;case cg:Ke=kl;break;case"scroll":Ke=uo;break;case"wheel":Ke=wj;break;case"copy":case"cut":case"paste":Ke=j;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=jr}var tt=(l&4)!==0,ps=!tt&&a==="scroll",ce=tt?Ae!==null?Ae+"Capture":null:Ae;tt=[];for(var ee=me,he;ee!==null;){he=ee;var ze=he.stateNode;if(he.tag===5&&ze!==null&&(he=ze,ce!==null&&(ze=Mt(ee,ce),ze!=null&&tt.push(Rl(ee,ze,he)))),ps)break;ee=ee.return}0<tt.length&&(Ae=new Ke(Ae,et,null,d,Ie),Me.push({event:Ae,listeners:tt}))}}if((l&7)===0){e:{if(Ae=a==="mouseover"||a==="pointerover",Ke=a==="mouseout"||a==="pointerout",Ae&&d!==Mn&&(et=d.relatedTarget||d.fromElement)&&(ba(et)||et[Qr]))break e;if((Ke||Ae)&&(Ae=Ie.window===Ie?Ie:(Ae=Ie.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Ke?(et=d.relatedTarget||d.toElement,Ke=me,et=et?ba(et):null,et!==null&&(ps=tn(et),et!==ps||et.tag!==5&&et.tag!==6)&&(et=null)):(Ke=null,et=me),Ke!==et)){if(tt=Sl,ze="onMouseLeave",ce="onMouseEnter",ee="mouse",(a==="pointerout"||a==="pointerover")&&(tt=jr,ze="onPointerLeave",ce="onPointerEnter",ee="pointer"),ps=Ke==null?Ae:wo(Ke),he=et==null?Ae:wo(et),Ae=new tt(ze,ee+"leave",Ke,d,Ie),Ae.target=ps,Ae.relatedTarget=he,ze=null,ba(Ie)===me&&(tt=new tt(ce,ee+"enter",et,d,Ie),tt.target=he,tt.relatedTarget=ps,ze=tt),ps=ze,Ke&&et)t:{for(tt=Ke,ce=et,ee=0,he=tt;he;he=bo(he))ee++;for(he=0,ze=ce;ze;ze=bo(ze))he++;for(;0<ee-he;)tt=bo(tt),ee--;for(;0<he-ee;)ce=bo(ce),he--;for(;ee--;){if(tt===ce||ce!==null&&tt===ce.alternate)break t;tt=bo(tt),ce=bo(ce)}tt=null}else tt=null;Ke!==null&&pg(Me,Ae,Ke,tt,!1),et!==null&&ps!==null&&pg(Me,ps,et,tt,!0)}}e:{if(Ae=me?wo(me):window,Ke=Ae.nodeName&&Ae.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&Ae.type==="file")var st=Ej;else if(Kp(Ae))if(Yp)st=Ij;else{st=Pj;var at=Tj}else(Ke=Ae.nodeName)&&Ke.toLowerCase()==="input"&&(Ae.type==="checkbox"||Ae.type==="radio")&&(st=Aj);if(st&&(st=st(a,me))){Jp(Me,st,d,Ie);break e}at&&at(a,Ae,me),a==="focusout"&&(at=Ae._wrapperState)&&at.controlled&&Ae.type==="number"&&Ne(Ae,"number",Ae.value)}switch(at=me?wo(me):window,a){case"focusin":(Kp(at)||at.contentEditable==="true")&&(xo=at,mh=me,Pl=null);break;case"focusout":Pl=mh=xo=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,rg(Me,d,Ie);break;case"selectionchange":if(Mj)break;case"keydown":case"keyup":rg(Me,d,Ie)}var ot;if(dh)e:{switch(a){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else go?Hp(a,d)&&(ft="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(ft="onCompositionStart");ft&&(Bp&&d.locale!=="ko"&&(go||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&go&&(ot=Yc()):(Sn=Ie,co="value"in Sn?Sn.value:Sn.textContent,go=!0)),at=rd(me,ft),0<at.length&&(ft=new F(ft,a,null,d,Ie),Me.push({event:ft,listeners:at}),ot?ft.data=ot:(ot=Gp(d),ot!==null&&(ft.data=ot)))),(ot=jj?Sj(a,d):kj(a,d))&&(me=rd(me,"onBeforeInput"),0<me.length&&(Ie=new F("onBeforeInput","beforeinput",null,d,Ie),Me.push({event:Ie,listeners:me}),Ie.data=ot))}fg(Me,l)})}function Rl(a,l,d){return{instance:a,listener:l,currentTarget:d}}function rd(a,l){for(var d=l+"Capture",p=[];a!==null;){var b=a,w=b.stateNode;b.tag===5&&w!==null&&(b=w,w=Mt(a,d),w!=null&&p.unshift(Rl(a,w,b)),w=Mt(a,l),w!=null&&p.push(Rl(a,w,b))),a=a.return}return p}function bo(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function pg(a,l,d,p,b){for(var w=l._reactName,M=[];d!==null&&d!==p;){var W=d,Q=W.alternate,me=W.stateNode;if(Q!==null&&Q===p)break;W.tag===5&&me!==null&&(W=me,b?(Q=Mt(d,w),Q!=null&&M.unshift(Rl(d,Q,W))):b||(Q=Mt(d,w),Q!=null&&M.push(Rl(d,Q,W)))),d=d.return}M.length!==0&&a.push({event:l,listeners:M})}var Uj=/\r\n?/g,Fj=/\u0000|\uFFFD/g;function gg(a){return(typeof a=="string"?a:""+a).replace(Uj,`
`).replace(Fj,"")}function id(a,l,d){if(l=gg(l),gg(a)!==l&&d)throw Error(s(425))}function ad(){}var wh=null,Nh=null;function jh(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Sh=typeof setTimeout=="function"?setTimeout:void 0,$j=typeof clearTimeout=="function"?clearTimeout:void 0,xg=typeof Promise=="function"?Promise:void 0,Vj=typeof queueMicrotask=="function"?queueMicrotask:typeof xg<"u"?function(a){return xg.resolve(null).then(a).catch(Bj)}:Sh;function Bj(a){setTimeout(function(){throw a})}function kh(a,l){var d=l,p=0;do{var b=d.nextSibling;if(a.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(p===0){a.removeChild(b),ji(l);return}p--}else d!=="$"&&d!=="$?"&&d!=="$!"||p++;d=b}while(d);ji(l)}function Ci(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function yg(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}var vo=Math.random().toString(36).slice(2),_r="__reactFiber$"+vo,Dl="__reactProps$"+vo,Qr="__reactContainer$"+vo,_h="__reactEvents$"+vo,qj="__reactListeners$"+vo,Wj="__reactHandles$"+vo;function ba(a){var l=a[_r];if(l)return l;for(var d=a.parentNode;d;){if(l=d[Qr]||d[_r]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=yg(a);a!==null;){if(d=a[_r])return d;a=yg(a)}return l}a=d,d=a.parentNode}return null}function Ml(a){return a=a[_r]||a[Qr],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function wo(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(s(33))}function od(a){return a[Dl]||null}var Ch=[],No=-1;function Ei(a){return{current:a}}function Xt(a){0>No||(a.current=Ch[No],Ch[No]=null,No--)}function Kt(a,l){No++,Ch[No]=a.current,a.current=l}var Ti={},Gs=Ei(Ti),mn=Ei(!1),va=Ti;function jo(a,l){var d=a.type.contextTypes;if(!d)return Ti;var p=a.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var b={},w;for(w in d)b[w]=l[w];return p&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=b),b}function pn(a){return a=a.childContextTypes,a!=null}function ld(){Xt(mn),Xt(Gs)}function bg(a,l,d){if(Gs.current!==Ti)throw Error(s(168));Kt(Gs,l),Kt(mn,d)}function vg(a,l,d){var p=a.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return d;p=p.getChildContext();for(var b in p)if(!(b in l))throw Error(s(108,Te(a)||"Unknown",b));return ve({},d,p)}function cd(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ti,va=Gs.current,Kt(Gs,a),Kt(mn,mn.current),!0}function wg(a,l,d){var p=a.stateNode;if(!p)throw Error(s(169));d?(a=vg(a,l,va),p.__reactInternalMemoizedMergedChildContext=a,Xt(mn),Xt(Gs),Kt(Gs,a)):Xt(mn),Kt(mn,d)}var ei=null,dd=!1,Eh=!1;function Ng(a){ei===null?ei=[a]:ei.push(a)}function Hj(a){dd=!0,Ng(a)}function Pi(){if(!Eh&&ei!==null){Eh=!0;var a=0,l=Ct;try{var d=ei;for(Ct=1;a<d.length;a++){var p=d[a];do p=p(!0);while(p!==null)}ei=null,dd=!1}catch(b){throw ei!==null&&(ei=ei.slice(a+1)),G(lt,Pi),b}finally{Ct=l,Eh=!1}}return null}var So=[],ko=0,ud=null,hd=0,Un=[],Fn=0,wa=null,ti=1,si="";function Na(a,l){So[ko++]=hd,So[ko++]=ud,ud=a,hd=l}function jg(a,l,d){Un[Fn++]=ti,Un[Fn++]=si,Un[Fn++]=wa,wa=a;var p=ti;a=si;var b=32-_t(p)-1;p&=~(1<<b),d+=1;var w=32-_t(l)+b;if(30<w){var M=b-b%5;w=(p&(1<<M)-1).toString(32),p>>=M,b-=M,ti=1<<32-_t(l)+b|d<<b|p,si=w+a}else ti=1<<w|d<<b|p,si=a}function Th(a){a.return!==null&&(Na(a,1),jg(a,1,0))}function Ph(a){for(;a===ud;)ud=So[--ko],So[ko]=null,hd=So[--ko],So[ko]=null;for(;a===wa;)wa=Un[--Fn],Un[Fn]=null,si=Un[--Fn],Un[Fn]=null,ti=Un[--Fn],Un[Fn]=null}var _n=null,Cn=null,es=!1,Yn=null;function Sg(a,l){var d=qn(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=a,l=a.deletions,l===null?(a.deletions=[d],a.flags|=16):l.push(d)}function kg(a,l){switch(a.tag){case 5:var d=a.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,_n=a,Cn=Ci(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,_n=a,Cn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=wa!==null?{id:ti,overflow:si}:null,a.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=qn(18,null,null,0),d.stateNode=l,d.return=a,a.child=d,_n=a,Cn=null,!0):!1;default:return!1}}function Ah(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Ih(a){if(es){var l=Cn;if(l){var d=l;if(!kg(a,l)){if(Ah(a))throw Error(s(418));l=Ci(d.nextSibling);var p=_n;l&&kg(a,l)?Sg(p,d):(a.flags=a.flags&-4097|2,es=!1,_n=a)}}else{if(Ah(a))throw Error(s(418));a.flags=a.flags&-4097|2,es=!1,_n=a}}}function _g(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;_n=a}function fd(a){if(a!==_n)return!1;if(!es)return _g(a),es=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!jh(a.type,a.memoizedProps)),l&&(l=Cn)){if(Ah(a))throw Cg(),Error(s(418));for(;l;)Sg(a,l),l=Ci(l.nextSibling)}if(_g(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"){if(l===0){Cn=Ci(a.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}a=a.nextSibling}Cn=null}}else Cn=_n?Ci(a.stateNode.nextSibling):null;return!0}function Cg(){for(var a=Cn;a;)a=Ci(a.nextSibling)}function _o(){Cn=_n=null,es=!1}function Rh(a){Yn===null?Yn=[a]:Yn.push(a)}var Gj=Z.ReactCurrentBatchConfig;function Ol(a,l,d){if(a=d.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(s(309));var p=d.stateNode}if(!p)throw Error(s(147,a));var b=p,w=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===w?l.ref:(l=function(M){var W=b.refs;M===null?delete W[w]:W[w]=M},l._stringRef=w,l)}if(typeof a!="string")throw Error(s(284));if(!d._owner)throw Error(s(290,a))}return a}function md(a,l){throw a=Object.prototype.toString.call(l),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function Eg(a){var l=a._init;return l(a._payload)}function Tg(a){function l(ce,ee){if(a){var he=ce.deletions;he===null?(ce.deletions=[ee],ce.flags|=16):he.push(ee)}}function d(ce,ee){if(!a)return null;for(;ee!==null;)l(ce,ee),ee=ee.sibling;return null}function p(ce,ee){for(ce=new Map;ee!==null;)ee.key!==null?ce.set(ee.key,ee):ce.set(ee.index,ee),ee=ee.sibling;return ce}function b(ce,ee){return ce=zi(ce,ee),ce.index=0,ce.sibling=null,ce}function w(ce,ee,he){return ce.index=he,a?(he=ce.alternate,he!==null?(he=he.index,he<ee?(ce.flags|=2,ee):he):(ce.flags|=2,ee)):(ce.flags|=1048576,ee)}function M(ce){return a&&ce.alternate===null&&(ce.flags|=2),ce}function W(ce,ee,he,ze){return ee===null||ee.tag!==6?(ee=kf(he,ce.mode,ze),ee.return=ce,ee):(ee=b(ee,he),ee.return=ce,ee)}function Q(ce,ee,he,ze){var st=he.type;return st===I?Ie(ce,ee,he.props.children,ze,he.key):ee!==null&&(ee.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===ke&&Eg(st)===ee.type)?(ze=b(ee,he.props),ze.ref=Ol(ce,ee,he),ze.return=ce,ze):(ze=zd(he.type,he.key,he.props,null,ce.mode,ze),ze.ref=Ol(ce,ee,he),ze.return=ce,ze)}function me(ce,ee,he,ze){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==he.containerInfo||ee.stateNode.implementation!==he.implementation?(ee=_f(he,ce.mode,ze),ee.return=ce,ee):(ee=b(ee,he.children||[]),ee.return=ce,ee)}function Ie(ce,ee,he,ze,st){return ee===null||ee.tag!==7?(ee=Pa(he,ce.mode,ze,st),ee.return=ce,ee):(ee=b(ee,he),ee.return=ce,ee)}function Me(ce,ee,he){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=kf(""+ee,ce.mode,he),ee.return=ce,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case q:return he=zd(ee.type,ee.key,ee.props,null,ce.mode,he),he.ref=Ol(ce,null,ee),he.return=ce,he;case V:return ee=_f(ee,ce.mode,he),ee.return=ce,ee;case ke:var ze=ee._init;return Me(ce,ze(ee._payload),he)}if(We(ee)||be(ee))return ee=Pa(ee,ce.mode,he,null),ee.return=ce,ee;md(ce,ee)}return null}function Ae(ce,ee,he,ze){var st=ee!==null?ee.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return st!==null?null:W(ce,ee,""+he,ze);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case q:return he.key===st?Q(ce,ee,he,ze):null;case V:return he.key===st?me(ce,ee,he,ze):null;case ke:return st=he._init,Ae(ce,ee,st(he._payload),ze)}if(We(he)||be(he))return st!==null?null:Ie(ce,ee,he,ze,null);md(ce,he)}return null}function Ke(ce,ee,he,ze,st){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ce=ce.get(he)||null,W(ee,ce,""+ze,st);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case q:return ce=ce.get(ze.key===null?he:ze.key)||null,Q(ee,ce,ze,st);case V:return ce=ce.get(ze.key===null?he:ze.key)||null,me(ee,ce,ze,st);case ke:var at=ze._init;return Ke(ce,ee,he,at(ze._payload),st)}if(We(ze)||be(ze))return ce=ce.get(he)||null,Ie(ee,ce,ze,st,null);md(ee,ze)}return null}function et(ce,ee,he,ze){for(var st=null,at=null,ot=ee,ft=ee=0,Rs=null;ot!==null&&ft<he.length;ft++){ot.index>ft?(Rs=ot,ot=null):Rs=ot.sibling;var Ot=Ae(ce,ot,he[ft],ze);if(Ot===null){ot===null&&(ot=Rs);break}a&&ot&&Ot.alternate===null&&l(ce,ot),ee=w(Ot,ee,ft),at===null?st=Ot:at.sibling=Ot,at=Ot,ot=Rs}if(ft===he.length)return d(ce,ot),es&&Na(ce,ft),st;if(ot===null){for(;ft<he.length;ft++)ot=Me(ce,he[ft],ze),ot!==null&&(ee=w(ot,ee,ft),at===null?st=ot:at.sibling=ot,at=ot);return es&&Na(ce,ft),st}for(ot=p(ce,ot);ft<he.length;ft++)Rs=Ke(ot,ce,ft,he[ft],ze),Rs!==null&&(a&&Rs.alternate!==null&&ot.delete(Rs.key===null?ft:Rs.key),ee=w(Rs,ee,ft),at===null?st=Rs:at.sibling=Rs,at=Rs);return a&&ot.forEach(function(Ui){return l(ce,Ui)}),es&&Na(ce,ft),st}function tt(ce,ee,he,ze){var st=be(he);if(typeof st!="function")throw Error(s(150));if(he=st.call(he),he==null)throw Error(s(151));for(var at=st=null,ot=ee,ft=ee=0,Rs=null,Ot=he.next();ot!==null&&!Ot.done;ft++,Ot=he.next()){ot.index>ft?(Rs=ot,ot=null):Rs=ot.sibling;var Ui=Ae(ce,ot,Ot.value,ze);if(Ui===null){ot===null&&(ot=Rs);break}a&&ot&&Ui.alternate===null&&l(ce,ot),ee=w(Ui,ee,ft),at===null?st=Ui:at.sibling=Ui,at=Ui,ot=Rs}if(Ot.done)return d(ce,ot),es&&Na(ce,ft),st;if(ot===null){for(;!Ot.done;ft++,Ot=he.next())Ot=Me(ce,Ot.value,ze),Ot!==null&&(ee=w(Ot,ee,ft),at===null?st=Ot:at.sibling=Ot,at=Ot);return es&&Na(ce,ft),st}for(ot=p(ce,ot);!Ot.done;ft++,Ot=he.next())Ot=Ke(ot,ce,ft,Ot.value,ze),Ot!==null&&(a&&Ot.alternate!==null&&ot.delete(Ot.key===null?ft:Ot.key),ee=w(Ot,ee,ft),at===null?st=Ot:at.sibling=Ot,at=Ot);return a&&ot.forEach(function(_S){return l(ce,_S)}),es&&Na(ce,ft),st}function ps(ce,ee,he,ze){if(typeof he=="object"&&he!==null&&he.type===I&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case q:e:{for(var st=he.key,at=ee;at!==null;){if(at.key===st){if(st=he.type,st===I){if(at.tag===7){d(ce,at.sibling),ee=b(at,he.props.children),ee.return=ce,ce=ee;break e}}else if(at.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===ke&&Eg(st)===at.type){d(ce,at.sibling),ee=b(at,he.props),ee.ref=Ol(ce,at,he),ee.return=ce,ce=ee;break e}d(ce,at);break}else l(ce,at);at=at.sibling}he.type===I?(ee=Pa(he.props.children,ce.mode,ze,he.key),ee.return=ce,ce=ee):(ze=zd(he.type,he.key,he.props,null,ce.mode,ze),ze.ref=Ol(ce,ee,he),ze.return=ce,ce=ze)}return M(ce);case V:e:{for(at=he.key;ee!==null;){if(ee.key===at)if(ee.tag===4&&ee.stateNode.containerInfo===he.containerInfo&&ee.stateNode.implementation===he.implementation){d(ce,ee.sibling),ee=b(ee,he.children||[]),ee.return=ce,ce=ee;break e}else{d(ce,ee);break}else l(ce,ee);ee=ee.sibling}ee=_f(he,ce.mode,ze),ee.return=ce,ce=ee}return M(ce);case ke:return at=he._init,ps(ce,ee,at(he._payload),ze)}if(We(he))return et(ce,ee,he,ze);if(be(he))return tt(ce,ee,he,ze);md(ce,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,ee!==null&&ee.tag===6?(d(ce,ee.sibling),ee=b(ee,he),ee.return=ce,ce=ee):(d(ce,ee),ee=kf(he,ce.mode,ze),ee.return=ce,ce=ee),M(ce)):d(ce,ee)}return ps}var Co=Tg(!0),Pg=Tg(!1),pd=Ei(null),gd=null,Eo=null,Dh=null;function Mh(){Dh=Eo=gd=null}function Oh(a){var l=pd.current;Xt(pd),a._currentValue=l}function Lh(a,l,d){for(;a!==null;){var p=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),a===d)break;a=a.return}}function To(a,l){gd=a,Dh=Eo=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(gn=!0),a.firstContext=null)}function $n(a){var l=a._currentValue;if(Dh!==a)if(a={context:a,memoizedValue:l,next:null},Eo===null){if(gd===null)throw Error(s(308));Eo=a,gd.dependencies={lanes:0,firstContext:a}}else Eo=Eo.next=a;return l}var ja=null;function zh(a){ja===null?ja=[a]:ja.push(a)}function Ag(a,l,d,p){var b=l.interleaved;return b===null?(d.next=d,zh(l)):(d.next=b.next,b.next=d),l.interleaved=d,ni(a,p)}function ni(a,l){a.lanes|=l;var d=a.alternate;for(d!==null&&(d.lanes|=l),d=a,a=a.return;a!==null;)a.childLanes|=l,d=a.alternate,d!==null&&(d.childLanes|=l),d=a,a=a.return;return d.tag===3?d.stateNode:null}var Ai=!1;function Uh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ig(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ri(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Ii(a,l,d){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(Dt&2)!==0){var b=p.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),p.pending=l,ni(a,d)}return b=p.interleaved,b===null?(l.next=l,zh(p)):(l.next=b.next,b.next=l),p.interleaved=l,ni(a,d)}function xd(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var p=l.lanes;p&=a.pendingLanes,d|=p,l.lanes=d,xl(a,d)}}function Rg(a,l){var d=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var b=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var M={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};w===null?b=w=M:w=w.next=M,d=d.next}while(d!==null);w===null?b=w=l:w=w.next=l}else b=w=l;d={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:p.shared,effects:p.effects},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}function yd(a,l,d,p){var b=a.updateQueue;Ai=!1;var w=b.firstBaseUpdate,M=b.lastBaseUpdate,W=b.shared.pending;if(W!==null){b.shared.pending=null;var Q=W,me=Q.next;Q.next=null,M===null?w=me:M.next=me,M=Q;var Ie=a.alternate;Ie!==null&&(Ie=Ie.updateQueue,W=Ie.lastBaseUpdate,W!==M&&(W===null?Ie.firstBaseUpdate=me:W.next=me,Ie.lastBaseUpdate=Q))}if(w!==null){var Me=b.baseState;M=0,Ie=me=Q=null,W=w;do{var Ae=W.lane,Ke=W.eventTime;if((p&Ae)===Ae){Ie!==null&&(Ie=Ie.next={eventTime:Ke,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var et=a,tt=W;switch(Ae=l,Ke=d,tt.tag){case 1:if(et=tt.payload,typeof et=="function"){Me=et.call(Ke,Me,Ae);break e}Me=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=tt.payload,Ae=typeof et=="function"?et.call(Ke,Me,Ae):et,Ae==null)break e;Me=ve({},Me,Ae);break e;case 2:Ai=!0}}W.callback!==null&&W.lane!==0&&(a.flags|=64,Ae=b.effects,Ae===null?b.effects=[W]:Ae.push(W))}else Ke={eventTime:Ke,lane:Ae,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Ie===null?(me=Ie=Ke,Q=Me):Ie=Ie.next=Ke,M|=Ae;if(W=W.next,W===null){if(W=b.shared.pending,W===null)break;Ae=W,W=Ae.next,Ae.next=null,b.lastBaseUpdate=Ae,b.shared.pending=null}}while(!0);if(Ie===null&&(Q=Me),b.baseState=Q,b.firstBaseUpdate=me,b.lastBaseUpdate=Ie,l=b.shared.interleaved,l!==null){b=l;do M|=b.lane,b=b.next;while(b!==l)}else w===null&&(b.shared.lanes=0);_a|=M,a.lanes=M,a.memoizedState=Me}}function Dg(a,l,d){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var p=a[l],b=p.callback;if(b!==null){if(p.callback=null,p=d,typeof b!="function")throw Error(s(191,b));b.call(p)}}}var Ll={},Cr=Ei(Ll),zl=Ei(Ll),Ul=Ei(Ll);function Sa(a){if(a===Ll)throw Error(s(174));return a}function Fh(a,l){switch(Kt(Ul,l),Kt(zl,a),Kt(Cr,Ll),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Wt(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=Wt(l,a)}Xt(Cr),Kt(Cr,l)}function Po(){Xt(Cr),Xt(zl),Xt(Ul)}function Mg(a){Sa(Ul.current);var l=Sa(Cr.current),d=Wt(l,a.type);l!==d&&(Kt(zl,a),Kt(Cr,d))}function $h(a){zl.current===a&&(Xt(Cr),Xt(zl))}var ns=Ei(0);function bd(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Vh=[];function Bh(){for(var a=0;a<Vh.length;a++)Vh[a]._workInProgressVersionPrimary=null;Vh.length=0}var vd=Z.ReactCurrentDispatcher,qh=Z.ReactCurrentBatchConfig,ka=0,rs=null,_s=null,As=null,wd=!1,Fl=!1,$l=0,Kj=0;function Ks(){throw Error(s(321))}function Wh(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!Jn(a[d],l[d]))return!1;return!0}function Hh(a,l,d,p,b,w){if(ka=w,rs=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,vd.current=a===null||a.memoizedState===null?Xj:Qj,a=d(p,b),Fl){w=0;do{if(Fl=!1,$l=0,25<=w)throw Error(s(301));w+=1,As=_s=null,l.updateQueue=null,vd.current=eS,a=d(p,b)}while(Fl)}if(vd.current=Sd,l=_s!==null&&_s.next!==null,ka=0,As=_s=rs=null,wd=!1,l)throw Error(s(300));return a}function Gh(){var a=$l!==0;return $l=0,a}function Er(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return As===null?rs.memoizedState=As=a:As=As.next=a,As}function Vn(){if(_s===null){var a=rs.alternate;a=a!==null?a.memoizedState:null}else a=_s.next;var l=As===null?rs.memoizedState:As.next;if(l!==null)As=l,_s=a;else{if(a===null)throw Error(s(310));_s=a,a={memoizedState:_s.memoizedState,baseState:_s.baseState,baseQueue:_s.baseQueue,queue:_s.queue,next:null},As===null?rs.memoizedState=As=a:As=As.next=a}return As}function Vl(a,l){return typeof l=="function"?l(a):l}function Kh(a){var l=Vn(),d=l.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var p=_s,b=p.baseQueue,w=d.pending;if(w!==null){if(b!==null){var M=b.next;b.next=w.next,w.next=M}p.baseQueue=b=w,d.pending=null}if(b!==null){w=b.next,p=p.baseState;var W=M=null,Q=null,me=w;do{var Ie=me.lane;if((ka&Ie)===Ie)Q!==null&&(Q=Q.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),p=me.hasEagerState?me.eagerState:a(p,me.action);else{var Me={lane:Ie,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};Q===null?(W=Q=Me,M=p):Q=Q.next=Me,rs.lanes|=Ie,_a|=Ie}me=me.next}while(me!==null&&me!==w);Q===null?M=p:Q.next=W,Jn(p,l.memoizedState)||(gn=!0),l.memoizedState=p,l.baseState=M,l.baseQueue=Q,d.lastRenderedState=p}if(a=d.interleaved,a!==null){b=a;do w=b.lane,rs.lanes|=w,_a|=w,b=b.next;while(b!==a)}else b===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Jh(a){var l=Vn(),d=l.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var p=d.dispatch,b=d.pending,w=l.memoizedState;if(b!==null){d.pending=null;var M=b=b.next;do w=a(w,M.action),M=M.next;while(M!==b);Jn(w,l.memoizedState)||(gn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,p]}function Og(){}function Lg(a,l){var d=rs,p=Vn(),b=l(),w=!Jn(p.memoizedState,b);if(w&&(p.memoizedState=b,gn=!0),p=p.queue,Yh(Fg.bind(null,d,p,a),[a]),p.getSnapshot!==l||w||As!==null&&As.memoizedState.tag&1){if(d.flags|=2048,Bl(9,Ug.bind(null,d,p,b,l),void 0,null),Is===null)throw Error(s(349));(ka&30)!==0||zg(d,l,b)}return b}function zg(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=rs.updateQueue,l===null?(l={lastEffect:null,stores:null},rs.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function Ug(a,l,d,p){l.value=d,l.getSnapshot=p,$g(l)&&Vg(a)}function Fg(a,l,d){return d(function(){$g(l)&&Vg(a)})}function $g(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!Jn(a,d)}catch{return!0}}function Vg(a){var l=ni(a,1);l!==null&&er(l,a,1,-1)}function Bg(a){var l=Er();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:a},l.queue=a,a=a.dispatch=Zj.bind(null,rs,a),[l.memoizedState,a]}function Bl(a,l,d,p){return a={tag:a,create:l,destroy:d,deps:p,next:null},l=rs.updateQueue,l===null?(l={lastEffect:null,stores:null},rs.updateQueue=l,l.lastEffect=a.next=a):(d=l.lastEffect,d===null?l.lastEffect=a.next=a:(p=d.next,d.next=a,a.next=p,l.lastEffect=a)),a}function qg(){return Vn().memoizedState}function Nd(a,l,d,p){var b=Er();rs.flags|=a,b.memoizedState=Bl(1|l,d,void 0,p===void 0?null:p)}function jd(a,l,d,p){var b=Vn();p=p===void 0?null:p;var w=void 0;if(_s!==null){var M=_s.memoizedState;if(w=M.destroy,p!==null&&Wh(p,M.deps)){b.memoizedState=Bl(l,d,w,p);return}}rs.flags|=a,b.memoizedState=Bl(1|l,d,w,p)}function Wg(a,l){return Nd(8390656,8,a,l)}function Yh(a,l){return jd(2048,8,a,l)}function Hg(a,l){return jd(4,2,a,l)}function Gg(a,l){return jd(4,4,a,l)}function Kg(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Jg(a,l,d){return d=d!=null?d.concat([a]):null,jd(4,4,Kg.bind(null,l,a),d)}function Zh(){}function Yg(a,l){var d=Vn();l=l===void 0?null:l;var p=d.memoizedState;return p!==null&&l!==null&&Wh(l,p[1])?p[0]:(d.memoizedState=[a,l],a)}function Zg(a,l){var d=Vn();l=l===void 0?null:l;var p=d.memoizedState;return p!==null&&l!==null&&Wh(l,p[1])?p[0]:(a=a(),d.memoizedState=[a,l],a)}function Xg(a,l,d){return(ka&21)===0?(a.baseState&&(a.baseState=!1,gn=!0),a.memoizedState=d):(Jn(d,l)||(d=vi(),rs.lanes|=d,_a|=d,a.baseState=!0),l)}function Jj(a,l){var d=Ct;Ct=d!==0&&4>d?d:4,a(!0);var p=qh.transition;qh.transition={};try{a(!1),l()}finally{Ct=d,qh.transition=p}}function Qg(){return Vn().memoizedState}function Yj(a,l,d){var p=Oi(a);if(d={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null},e0(a))t0(l,d);else if(d=Ag(a,l,d,p),d!==null){var b=nn();er(d,a,p,b),s0(d,l,p)}}function Zj(a,l,d){var p=Oi(a),b={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null};if(e0(a))t0(l,b);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var M=l.lastRenderedState,W=w(M,d);if(b.hasEagerState=!0,b.eagerState=W,Jn(W,M)){var Q=l.interleaved;Q===null?(b.next=b,zh(l)):(b.next=Q.next,Q.next=b),l.interleaved=b;return}}catch{}finally{}d=Ag(a,l,b,p),d!==null&&(b=nn(),er(d,a,p,b),s0(d,l,p))}}function e0(a){var l=a.alternate;return a===rs||l!==null&&l===rs}function t0(a,l){Fl=wd=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function s0(a,l,d){if((d&4194240)!==0){var p=l.lanes;p&=a.pendingLanes,d|=p,l.lanes=d,xl(a,d)}}var Sd={readContext:$n,useCallback:Ks,useContext:Ks,useEffect:Ks,useImperativeHandle:Ks,useInsertionEffect:Ks,useLayoutEffect:Ks,useMemo:Ks,useReducer:Ks,useRef:Ks,useState:Ks,useDebugValue:Ks,useDeferredValue:Ks,useTransition:Ks,useMutableSource:Ks,useSyncExternalStore:Ks,useId:Ks,unstable_isNewReconciler:!1},Xj={readContext:$n,useCallback:function(a,l){return Er().memoizedState=[a,l===void 0?null:l],a},useContext:$n,useEffect:Wg,useImperativeHandle:function(a,l,d){return d=d!=null?d.concat([a]):null,Nd(4194308,4,Kg.bind(null,l,a),d)},useLayoutEffect:function(a,l){return Nd(4194308,4,a,l)},useInsertionEffect:function(a,l){return Nd(4,2,a,l)},useMemo:function(a,l){var d=Er();return l=l===void 0?null:l,a=a(),d.memoizedState=[a,l],a},useReducer:function(a,l,d){var p=Er();return l=d!==void 0?d(l):l,p.memoizedState=p.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},p.queue=a,a=a.dispatch=Yj.bind(null,rs,a),[p.memoizedState,a]},useRef:function(a){var l=Er();return a={current:a},l.memoizedState=a},useState:Bg,useDebugValue:Zh,useDeferredValue:function(a){return Er().memoizedState=a},useTransition:function(){var a=Bg(!1),l=a[0];return a=Jj.bind(null,a[1]),Er().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,d){var p=rs,b=Er();if(es){if(d===void 0)throw Error(s(407));d=d()}else{if(d=l(),Is===null)throw Error(s(349));(ka&30)!==0||zg(p,l,d)}b.memoizedState=d;var w={value:d,getSnapshot:l};return b.queue=w,Wg(Fg.bind(null,p,w,a),[a]),p.flags|=2048,Bl(9,Ug.bind(null,p,w,d,l),void 0,null),d},useId:function(){var a=Er(),l=Is.identifierPrefix;if(es){var d=si,p=ti;d=(p&~(1<<32-_t(p)-1)).toString(32)+d,l=":"+l+"R"+d,d=$l++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=Kj++,l=":"+l+"r"+d.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},Qj={readContext:$n,useCallback:Yg,useContext:$n,useEffect:Yh,useImperativeHandle:Jg,useInsertionEffect:Hg,useLayoutEffect:Gg,useMemo:Zg,useReducer:Kh,useRef:qg,useState:function(){return Kh(Vl)},useDebugValue:Zh,useDeferredValue:function(a){var l=Vn();return Xg(l,_s.memoizedState,a)},useTransition:function(){var a=Kh(Vl)[0],l=Vn().memoizedState;return[a,l]},useMutableSource:Og,useSyncExternalStore:Lg,useId:Qg,unstable_isNewReconciler:!1},eS={readContext:$n,useCallback:Yg,useContext:$n,useEffect:Yh,useImperativeHandle:Jg,useInsertionEffect:Hg,useLayoutEffect:Gg,useMemo:Zg,useReducer:Jh,useRef:qg,useState:function(){return Jh(Vl)},useDebugValue:Zh,useDeferredValue:function(a){var l=Vn();return _s===null?l.memoizedState=a:Xg(l,_s.memoizedState,a)},useTransition:function(){var a=Jh(Vl)[0],l=Vn().memoizedState;return[a,l]},useMutableSource:Og,useSyncExternalStore:Lg,useId:Qg,unstable_isNewReconciler:!1};function Zn(a,l){if(a&&a.defaultProps){l=ve({},l),a=a.defaultProps;for(var d in a)l[d]===void 0&&(l[d]=a[d]);return l}return l}function Xh(a,l,d,p){l=a.memoizedState,d=d(p,l),d=d==null?l:ve({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var kd={isMounted:function(a){return(a=a._reactInternals)?tn(a)===a:!1},enqueueSetState:function(a,l,d){a=a._reactInternals;var p=nn(),b=Oi(a),w=ri(p,b);w.payload=l,d!=null&&(w.callback=d),l=Ii(a,w,b),l!==null&&(er(l,a,b,p),xd(l,a,b))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var p=nn(),b=Oi(a),w=ri(p,b);w.tag=1,w.payload=l,d!=null&&(w.callback=d),l=Ii(a,w,b),l!==null&&(er(l,a,b,p),xd(l,a,b))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=nn(),p=Oi(a),b=ri(d,p);b.tag=2,l!=null&&(b.callback=l),l=Ii(a,b,p),l!==null&&(er(l,a,p,d),xd(l,a,p))}};function n0(a,l,d,p,b,w,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,w,M):l.prototype&&l.prototype.isPureReactComponent?!Tl(d,p)||!Tl(b,w):!0}function r0(a,l,d){var p=!1,b=Ti,w=l.contextType;return typeof w=="object"&&w!==null?w=$n(w):(b=pn(l)?va:Gs.current,p=l.contextTypes,w=(p=p!=null)?jo(a,b):Ti),l=new l(d,w),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=kd,a.stateNode=l,l._reactInternals=a,p&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=w),l}function i0(a,l,d,p){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,p),l.state!==a&&kd.enqueueReplaceState(l,l.state,null)}function Qh(a,l,d,p){var b=a.stateNode;b.props=d,b.state=a.memoizedState,b.refs={},Uh(a);var w=l.contextType;typeof w=="object"&&w!==null?b.context=$n(w):(w=pn(l)?va:Gs.current,b.context=jo(a,w)),b.state=a.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Xh(a,l,w,d),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(l=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),l!==b.state&&kd.enqueueReplaceState(b,b.state,null),yd(a,d,b,p),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308)}function Ao(a,l){try{var d="",p=l;do d+=H(p),p=p.return;while(p);var b=d}catch(w){b=`
Error generating stack: `+w.message+`
`+w.stack}return{value:a,source:l,stack:b,digest:null}}function ef(a,l,d){return{value:a,source:null,stack:d??null,digest:l??null}}function tf(a,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var tS=typeof WeakMap=="function"?WeakMap:Map;function a0(a,l,d){d=ri(-1,d),d.tag=3,d.payload={element:null};var p=l.value;return d.callback=function(){Id||(Id=!0,xf=p),tf(a,l)},d}function o0(a,l,d){d=ri(-1,d),d.tag=3;var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var b=l.value;d.payload=function(){return p(b)},d.callback=function(){tf(a,l)}}var w=a.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(d.callback=function(){tf(a,l),typeof p!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var M=l.stack;this.componentDidCatch(l.value,{componentStack:M!==null?M:""})}),d}function l0(a,l,d){var p=a.pingCache;if(p===null){p=a.pingCache=new tS;var b=new Set;p.set(l,b)}else b=p.get(l),b===void 0&&(b=new Set,p.set(l,b));b.has(d)||(b.add(d),a=pS.bind(null,a,l,d),l.then(a,a))}function c0(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function d0(a,l,d,p,b){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=ri(-1,1),l.tag=2,Ii(d,l,1))),d.lanes|=1),a):(a.flags|=65536,a.lanes=b,a)}var sS=Z.ReactCurrentOwner,gn=!1;function sn(a,l,d,p){l.child=a===null?Pg(l,null,d,p):Co(l,a.child,d,p)}function u0(a,l,d,p,b){d=d.render;var w=l.ref;return To(l,b),p=Hh(a,l,d,p,w,b),d=Gh(),a!==null&&!gn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~b,ii(a,l,b)):(es&&d&&Th(l),l.flags|=1,sn(a,l,p,b),l.child)}function h0(a,l,d,p,b){if(a===null){var w=d.type;return typeof w=="function"&&!Sf(w)&&w.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=w,f0(a,l,w,p,b)):(a=zd(d.type,null,p,l,l.mode,b),a.ref=l.ref,a.return=l,l.child=a)}if(w=a.child,(a.lanes&b)===0){var M=w.memoizedProps;if(d=d.compare,d=d!==null?d:Tl,d(M,p)&&a.ref===l.ref)return ii(a,l,b)}return l.flags|=1,a=zi(w,p),a.ref=l.ref,a.return=l,l.child=a}function f0(a,l,d,p,b){if(a!==null){var w=a.memoizedProps;if(Tl(w,p)&&a.ref===l.ref)if(gn=!1,l.pendingProps=p=w,(a.lanes&b)!==0)(a.flags&131072)!==0&&(gn=!0);else return l.lanes=a.lanes,ii(a,l,b)}return sf(a,l,d,p,b)}function m0(a,l,d){var p=l.pendingProps,b=p.children,w=a!==null?a.memoizedState:null;if(p.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(Ro,En),En|=d;else{if((d&1073741824)===0)return a=w!==null?w.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Kt(Ro,En),En|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:d,Kt(Ro,En),En|=p}else w!==null?(p=w.baseLanes|d,l.memoizedState=null):p=d,Kt(Ro,En),En|=p;return sn(a,l,b,d),l.child}function p0(a,l){var d=l.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function sf(a,l,d,p,b){var w=pn(d)?va:Gs.current;return w=jo(l,w),To(l,b),d=Hh(a,l,d,p,w,b),p=Gh(),a!==null&&!gn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~b,ii(a,l,b)):(es&&p&&Th(l),l.flags|=1,sn(a,l,d,b),l.child)}function g0(a,l,d,p,b){if(pn(d)){var w=!0;cd(l)}else w=!1;if(To(l,b),l.stateNode===null)Cd(a,l),r0(l,d,p),Qh(l,d,p,b),p=!0;else if(a===null){var M=l.stateNode,W=l.memoizedProps;M.props=W;var Q=M.context,me=d.contextType;typeof me=="object"&&me!==null?me=$n(me):(me=pn(d)?va:Gs.current,me=jo(l,me));var Ie=d.getDerivedStateFromProps,Me=typeof Ie=="function"||typeof M.getSnapshotBeforeUpdate=="function";Me||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(W!==p||Q!==me)&&i0(l,M,p,me),Ai=!1;var Ae=l.memoizedState;M.state=Ae,yd(l,p,M,b),Q=l.memoizedState,W!==p||Ae!==Q||mn.current||Ai?(typeof Ie=="function"&&(Xh(l,d,Ie,p),Q=l.memoizedState),(W=Ai||n0(l,d,W,p,Ae,Q,me))?(Me||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(l.flags|=4194308)):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=Q),M.props=p,M.state=Q,M.context=me,p=W):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{M=l.stateNode,Ig(a,l),W=l.memoizedProps,me=l.type===l.elementType?W:Zn(l.type,W),M.props=me,Me=l.pendingProps,Ae=M.context,Q=d.contextType,typeof Q=="object"&&Q!==null?Q=$n(Q):(Q=pn(d)?va:Gs.current,Q=jo(l,Q));var Ke=d.getDerivedStateFromProps;(Ie=typeof Ke=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(W!==Me||Ae!==Q)&&i0(l,M,p,Q),Ai=!1,Ae=l.memoizedState,M.state=Ae,yd(l,p,M,b);var et=l.memoizedState;W!==Me||Ae!==et||mn.current||Ai?(typeof Ke=="function"&&(Xh(l,d,Ke,p),et=l.memoizedState),(me=Ai||n0(l,d,me,p,Ae,et,Q)||!1)?(Ie||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(p,et,Q),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(p,et,Q)),typeof M.componentDidUpdate=="function"&&(l.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof M.componentDidUpdate!="function"||W===a.memoizedProps&&Ae===a.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||W===a.memoizedProps&&Ae===a.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=et),M.props=p,M.state=et,M.context=Q,p=me):(typeof M.componentDidUpdate!="function"||W===a.memoizedProps&&Ae===a.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||W===a.memoizedProps&&Ae===a.memoizedState||(l.flags|=1024),p=!1)}return nf(a,l,d,p,w,b)}function nf(a,l,d,p,b,w){p0(a,l);var M=(l.flags&128)!==0;if(!p&&!M)return b&&wg(l,d,!1),ii(a,l,w);p=l.stateNode,sS.current=l;var W=M&&typeof d.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,a!==null&&M?(l.child=Co(l,a.child,null,w),l.child=Co(l,null,W,w)):sn(a,l,W,w),l.memoizedState=p.state,b&&wg(l,d,!0),l.child}function x0(a){var l=a.stateNode;l.pendingContext?bg(a,l.pendingContext,l.pendingContext!==l.context):l.context&&bg(a,l.context,!1),Fh(a,l.containerInfo)}function y0(a,l,d,p,b){return _o(),Rh(b),l.flags|=256,sn(a,l,d,p),l.child}var rf={dehydrated:null,treeContext:null,retryLane:0};function af(a){return{baseLanes:a,cachePool:null,transitions:null}}function b0(a,l,d){var p=l.pendingProps,b=ns.current,w=!1,M=(l.flags&128)!==0,W;if((W=M)||(W=a!==null&&a.memoizedState===null?!1:(b&2)!==0),W?(w=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(b|=1),Kt(ns,b&1),a===null)return Ih(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(M=p.children,a=p.fallback,w?(p=l.mode,w=l.child,M={mode:"hidden",children:M},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=M):w=Ud(M,p,0,null),a=Pa(a,p,d,null),w.return=l,a.return=l,w.sibling=a,l.child=w,l.child.memoizedState=af(d),l.memoizedState=rf,a):of(l,M));if(b=a.memoizedState,b!==null&&(W=b.dehydrated,W!==null))return nS(a,l,M,p,W,b,d);if(w){w=p.fallback,M=l.mode,b=a.child,W=b.sibling;var Q={mode:"hidden",children:p.children};return(M&1)===0&&l.child!==b?(p=l.child,p.childLanes=0,p.pendingProps=Q,l.deletions=null):(p=zi(b,Q),p.subtreeFlags=b.subtreeFlags&14680064),W!==null?w=zi(W,w):(w=Pa(w,M,d,null),w.flags|=2),w.return=l,p.return=l,p.sibling=w,l.child=p,p=w,w=l.child,M=a.child.memoizedState,M=M===null?af(d):{baseLanes:M.baseLanes|d,cachePool:null,transitions:M.transitions},w.memoizedState=M,w.childLanes=a.childLanes&~d,l.memoizedState=rf,p}return w=a.child,a=w.sibling,p=zi(w,{mode:"visible",children:p.children}),(l.mode&1)===0&&(p.lanes=d),p.return=l,p.sibling=null,a!==null&&(d=l.deletions,d===null?(l.deletions=[a],l.flags|=16):d.push(a)),l.child=p,l.memoizedState=null,p}function of(a,l){return l=Ud({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function _d(a,l,d,p){return p!==null&&Rh(p),Co(l,a.child,null,d),a=of(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function nS(a,l,d,p,b,w,M){if(d)return l.flags&256?(l.flags&=-257,p=ef(Error(s(422))),_d(a,l,M,p)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(w=p.fallback,b=l.mode,p=Ud({mode:"visible",children:p.children},b,0,null),w=Pa(w,b,M,null),w.flags|=2,p.return=l,w.return=l,p.sibling=w,l.child=p,(l.mode&1)!==0&&Co(l,a.child,null,M),l.child.memoizedState=af(M),l.memoizedState=rf,w);if((l.mode&1)===0)return _d(a,l,M,null);if(b.data==="$!"){if(p=b.nextSibling&&b.nextSibling.dataset,p)var W=p.dgst;return p=W,w=Error(s(419)),p=ef(w,p,void 0),_d(a,l,M,p)}if(W=(M&a.childLanes)!==0,gn||W){if(p=Is,p!==null){switch(M&-M){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(p.suspendedLanes|M))!==0?0:b,b!==0&&b!==w.retryLane&&(w.retryLane=b,ni(a,b),er(p,a,b,-1))}return jf(),p=ef(Error(s(421))),_d(a,l,M,p)}return b.data==="$?"?(l.flags|=128,l.child=a.child,l=gS.bind(null,a),b._reactRetry=l,null):(a=w.treeContext,Cn=Ci(b.nextSibling),_n=l,es=!0,Yn=null,a!==null&&(Un[Fn++]=ti,Un[Fn++]=si,Un[Fn++]=wa,ti=a.id,si=a.overflow,wa=l),l=of(l,p.children),l.flags|=4096,l)}function v0(a,l,d){a.lanes|=l;var p=a.alternate;p!==null&&(p.lanes|=l),Lh(a.return,l,d)}function lf(a,l,d,p,b){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:b}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=d,w.tailMode=b)}function w0(a,l,d){var p=l.pendingProps,b=p.revealOrder,w=p.tail;if(sn(a,l,p.children,d),p=ns.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&v0(a,d,l);else if(a.tag===19)v0(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}p&=1}if(Kt(ns,p),(l.mode&1)===0)l.memoizedState=null;else switch(b){case"forwards":for(d=l.child,b=null;d!==null;)a=d.alternate,a!==null&&bd(a)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),lf(l,!1,b,d,w);break;case"backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(a=b.alternate,a!==null&&bd(a)===null){l.child=b;break}a=b.sibling,b.sibling=d,d=b,b=a}lf(l,!0,d,null,w);break;case"together":lf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Cd(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function ii(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),_a|=l.lanes,(d&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(s(153));if(l.child!==null){for(a=l.child,d=zi(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=zi(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function rS(a,l,d){switch(l.tag){case 3:x0(l),_o();break;case 5:Mg(l);break;case 1:pn(l.type)&&cd(l);break;case 4:Fh(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,b=l.memoizedProps.value;Kt(pd,p._currentValue),p._currentValue=b;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(Kt(ns,ns.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?b0(a,l,d):(Kt(ns,ns.current&1),a=ii(a,l,d),a!==null?a.sibling:null);Kt(ns,ns.current&1);break;case 19:if(p=(d&l.childLanes)!==0,(a.flags&128)!==0){if(p)return w0(a,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Kt(ns,ns.current),p)break;return null;case 22:case 23:return l.lanes=0,m0(a,l,d)}return ii(a,l,d)}var N0,cf,j0,S0;N0=function(a,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)a.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},cf=function(){},j0=function(a,l,d,p){var b=a.memoizedProps;if(b!==p){a=l.stateNode,Sa(Cr.current);var w=null;switch(d){case"input":b=Qe(a,b),p=Qe(a,p),w=[];break;case"select":b=ve({},b,{value:void 0}),p=ve({},p,{value:void 0}),w=[];break;case"textarea":b=ye(a,b),p=ye(a,p),w=[];break;default:typeof b.onClick!="function"&&typeof p.onClick=="function"&&(a.onclick=ad)}Ms(d,p);var M;d=null;for(me in b)if(!p.hasOwnProperty(me)&&b.hasOwnProperty(me)&&b[me]!=null)if(me==="style"){var W=b[me];for(M in W)W.hasOwnProperty(M)&&(d||(d={}),d[M]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(i.hasOwnProperty(me)?w||(w=[]):(w=w||[]).push(me,null));for(me in p){var Q=p[me];if(W=b!=null?b[me]:void 0,p.hasOwnProperty(me)&&Q!==W&&(Q!=null||W!=null))if(me==="style")if(W){for(M in W)!W.hasOwnProperty(M)||Q&&Q.hasOwnProperty(M)||(d||(d={}),d[M]="");for(M in Q)Q.hasOwnProperty(M)&&W[M]!==Q[M]&&(d||(d={}),d[M]=Q[M])}else d||(w||(w=[]),w.push(me,d)),d=Q;else me==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,W=W?W.__html:void 0,Q!=null&&W!==Q&&(w=w||[]).push(me,Q)):me==="children"?typeof Q!="string"&&typeof Q!="number"||(w=w||[]).push(me,""+Q):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(i.hasOwnProperty(me)?(Q!=null&&me==="onScroll"&&Zt("scroll",a),w||W===Q||(w=[])):(w=w||[]).push(me,Q))}d&&(w=w||[]).push("style",d);var me=w;(l.updateQueue=me)&&(l.flags|=4)}},S0=function(a,l,d,p){d!==p&&(l.flags|=4)};function ql(a,l){if(!es)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function Js(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,p=0;if(l)for(var b=a.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags&14680064,p|=b.flags&14680064,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=p,a.childLanes=d,l}function iS(a,l,d){var p=l.pendingProps;switch(Ph(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Js(l),null;case 1:return pn(l.type)&&ld(),Js(l),null;case 3:return p=l.stateNode,Po(),Xt(mn),Xt(Gs),Bh(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(a===null||a.child===null)&&(fd(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Yn!==null&&(vf(Yn),Yn=null))),cf(a,l),Js(l),null;case 5:$h(l);var b=Sa(Ul.current);if(d=l.type,a!==null&&l.stateNode!=null)j0(a,l,d,p,b),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(s(166));return Js(l),null}if(a=Sa(Cr.current),fd(l)){p=l.stateNode,d=l.type;var w=l.memoizedProps;switch(p[_r]=l,p[Dl]=w,a=(l.mode&1)!==0,d){case"dialog":Zt("cancel",p),Zt("close",p);break;case"iframe":case"object":case"embed":Zt("load",p);break;case"video":case"audio":for(b=0;b<Al.length;b++)Zt(Al[b],p);break;case"source":Zt("error",p);break;case"img":case"image":case"link":Zt("error",p),Zt("load",p);break;case"details":Zt("toggle",p);break;case"input":ut(p,w),Zt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},Zt("invalid",p);break;case"textarea":J(p,w),Zt("invalid",p)}Ms(d,w),b=null;for(var M in w)if(w.hasOwnProperty(M)){var W=w[M];M==="children"?typeof W=="string"?p.textContent!==W&&(w.suppressHydrationWarning!==!0&&id(p.textContent,W,a),b=["children",W]):typeof W=="number"&&p.textContent!==""+W&&(w.suppressHydrationWarning!==!0&&id(p.textContent,W,a),b=["children",""+W]):i.hasOwnProperty(M)&&W!=null&&M==="onScroll"&&Zt("scroll",p)}switch(d){case"input":zt(p),Be(p,w,!0);break;case"textarea":zt(p),kt(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=ad)}p=b,l.updateQueue=p,p!==null&&(l.flags|=4)}else{M=b.nodeType===9?b:b.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=xt(d)),a==="http://www.w3.org/1999/xhtml"?d==="script"?(a=M.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof p.is=="string"?a=M.createElement(d,{is:p.is}):(a=M.createElement(d),d==="select"&&(M=a,p.multiple?M.multiple=!0:p.size&&(M.size=p.size))):a=M.createElementNS(a,d),a[_r]=l,a[Dl]=p,N0(a,l,!1,!1),l.stateNode=a;e:{switch(M=Os(d,p),d){case"dialog":Zt("cancel",a),Zt("close",a),b=p;break;case"iframe":case"object":case"embed":Zt("load",a),b=p;break;case"video":case"audio":for(b=0;b<Al.length;b++)Zt(Al[b],a);b=p;break;case"source":Zt("error",a),b=p;break;case"img":case"image":case"link":Zt("error",a),Zt("load",a),b=p;break;case"details":Zt("toggle",a),b=p;break;case"input":ut(a,p),b=Qe(a,p),Zt("invalid",a);break;case"option":b=p;break;case"select":a._wrapperState={wasMultiple:!!p.multiple},b=ve({},p,{value:void 0}),Zt("invalid",a);break;case"textarea":J(a,p),b=ye(a,p),Zt("invalid",a);break;default:b=p}Ms(d,b),W=b;for(w in W)if(W.hasOwnProperty(w)){var Q=W[w];w==="style"?Ws(a,Q):w==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&Ss(a,Q)):w==="children"?typeof Q=="string"?(d!=="textarea"||Q!=="")&&os(a,Q):typeof Q=="number"&&os(a,""+Q):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?Q!=null&&w==="onScroll"&&Zt("scroll",a):Q!=null&&U(a,w,Q,M))}switch(d){case"input":zt(a),Be(a,p,!1);break;case"textarea":zt(a),kt(a);break;case"option":p.value!=null&&a.setAttribute("value",""+Ue(p.value));break;case"select":a.multiple=!!p.multiple,w=p.value,w!=null?jt(a,!!p.multiple,w,!1):p.defaultValue!=null&&jt(a,!!p.multiple,p.defaultValue,!0);break;default:typeof b.onClick=="function"&&(a.onclick=ad)}switch(d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Js(l),null;case 6:if(a&&l.stateNode!=null)S0(a,l,a.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(s(166));if(d=Sa(Ul.current),Sa(Cr.current),fd(l)){if(p=l.stateNode,d=l.memoizedProps,p[_r]=l,(w=p.nodeValue!==d)&&(a=_n,a!==null))switch(a.tag){case 3:id(p.nodeValue,d,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&id(p.nodeValue,d,(a.mode&1)!==0)}w&&(l.flags|=4)}else p=(d.nodeType===9?d:d.ownerDocument).createTextNode(p),p[_r]=l,l.stateNode=p}return Js(l),null;case 13:if(Xt(ns),p=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(es&&Cn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Cg(),_o(),l.flags|=98560,w=!1;else if(w=fd(l),p!==null&&p.dehydrated!==null){if(a===null){if(!w)throw Error(s(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(s(317));w[_r]=l}else _o(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Js(l),w=!1}else Yn!==null&&(vf(Yn),Yn=null),w=!0;if(!w)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(p=p!==null,p!==(a!==null&&a.memoizedState!==null)&&p&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(ns.current&1)!==0?Cs===0&&(Cs=3):jf())),l.updateQueue!==null&&(l.flags|=4),Js(l),null);case 4:return Po(),cf(a,l),a===null&&Il(l.stateNode.containerInfo),Js(l),null;case 10:return Oh(l.type._context),Js(l),null;case 17:return pn(l.type)&&ld(),Js(l),null;case 19:if(Xt(ns),w=l.memoizedState,w===null)return Js(l),null;if(p=(l.flags&128)!==0,M=w.rendering,M===null)if(p)ql(w,!1);else{if(Cs!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(M=bd(a),M!==null){for(l.flags|=128,ql(w,!1),p=M.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=d,d=l.child;d!==null;)w=d,a=p,w.flags&=14680066,M=w.alternate,M===null?(w.childLanes=0,w.lanes=a,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=M.childLanes,w.lanes=M.lanes,w.child=M.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=M.memoizedProps,w.memoizedState=M.memoizedState,w.updateQueue=M.updateQueue,w.type=M.type,a=M.dependencies,w.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),d=d.sibling;return Kt(ns,ns.current&1|2),l.child}a=a.sibling}w.tail!==null&&pe()>Do&&(l.flags|=128,p=!0,ql(w,!1),l.lanes=4194304)}else{if(!p)if(a=bd(M),a!==null){if(l.flags|=128,p=!0,d=a.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),ql(w,!0),w.tail===null&&w.tailMode==="hidden"&&!M.alternate&&!es)return Js(l),null}else 2*pe()-w.renderingStartTime>Do&&d!==1073741824&&(l.flags|=128,p=!0,ql(w,!1),l.lanes=4194304);w.isBackwards?(M.sibling=l.child,l.child=M):(d=w.last,d!==null?d.sibling=M:l.child=M,w.last=M)}return w.tail!==null?(l=w.tail,w.rendering=l,w.tail=l.sibling,w.renderingStartTime=pe(),l.sibling=null,d=ns.current,Kt(ns,p?d&1|2:d&1),l):(Js(l),null);case 22:case 23:return Nf(),p=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==p&&(l.flags|=8192),p&&(l.mode&1)!==0?(En&1073741824)!==0&&(Js(l),l.subtreeFlags&6&&(l.flags|=8192)):Js(l),null;case 24:return null;case 25:return null}throw Error(s(156,l.tag))}function aS(a,l){switch(Ph(l),l.tag){case 1:return pn(l.type)&&ld(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Po(),Xt(mn),Xt(Gs),Bh(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return $h(l),null;case 13:if(Xt(ns),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(s(340));_o()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Xt(ns),null;case 4:return Po(),null;case 10:return Oh(l.type._context),null;case 22:case 23:return Nf(),null;case 24:return null;default:return null}}var Ed=!1,Ys=!1,oS=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Io(a,l){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(p){cs(a,l,p)}else d.current=null}function df(a,l,d){try{d()}catch(p){cs(a,l,p)}}var k0=!1;function lS(a,l){if(wh=Zr,a=ng(),fh(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var b=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var M=0,W=-1,Q=-1,me=0,Ie=0,Me=a,Ae=null;t:for(;;){for(var Ke;Me!==d||b!==0&&Me.nodeType!==3||(W=M+b),Me!==w||p!==0&&Me.nodeType!==3||(Q=M+p),Me.nodeType===3&&(M+=Me.nodeValue.length),(Ke=Me.firstChild)!==null;)Ae=Me,Me=Ke;for(;;){if(Me===a)break t;if(Ae===d&&++me===b&&(W=M),Ae===w&&++Ie===p&&(Q=M),(Ke=Me.nextSibling)!==null)break;Me=Ae,Ae=Me.parentNode}Me=Ke}d=W===-1||Q===-1?null:{start:W,end:Q}}else d=null}d=d||{start:0,end:0}}else d=null;for(Nh={focusedElem:a,selectionRange:d},Zr=!1,Ze=l;Ze!==null;)if(l=Ze,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Ze=a;else for(;Ze!==null;){l=Ze;try{var et=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var tt=et.memoizedProps,ps=et.memoizedState,ce=l.stateNode,ee=ce.getSnapshotBeforeUpdate(l.elementType===l.type?tt:Zn(l.type,tt),ps);ce.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var he=l.stateNode.containerInfo;he.nodeType===1?he.textContent="":he.nodeType===9&&he.documentElement&&he.removeChild(he.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(ze){cs(l,l.return,ze)}if(a=l.sibling,a!==null){a.return=l.return,Ze=a;break}Ze=l.return}return et=k0,k0=!1,et}function Wl(a,l,d){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&a)===a){var w=b.destroy;b.destroy=void 0,w!==void 0&&df(l,d,w)}b=b.next}while(b!==p)}}function Td(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&a)===a){var p=d.create;d.destroy=p()}d=d.next}while(d!==l)}}function uf(a){var l=a.ref;if(l!==null){var d=a.stateNode;switch(a.tag){case 5:a=d;break;default:a=d}typeof l=="function"?l(a):l.current=a}}function _0(a){var l=a.alternate;l!==null&&(a.alternate=null,_0(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[_r],delete l[Dl],delete l[_h],delete l[qj],delete l[Wj])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function C0(a){return a.tag===5||a.tag===3||a.tag===4}function E0(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||C0(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function hf(a,l,d){var p=a.tag;if(p===5||p===6)a=a.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(a,l):d.insertBefore(a,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(a,d)):(l=d,l.appendChild(a)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=ad));else if(p!==4&&(a=a.child,a!==null))for(hf(a,l,d),a=a.sibling;a!==null;)hf(a,l,d),a=a.sibling}function ff(a,l,d){var p=a.tag;if(p===5||p===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(p!==4&&(a=a.child,a!==null))for(ff(a,l,d),a=a.sibling;a!==null;)ff(a,l,d),a=a.sibling}var Fs=null,Xn=!1;function Ri(a,l,d){for(d=d.child;d!==null;)T0(a,l,d),d=d.sibling}function T0(a,l,d){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(it,d)}catch{}switch(d.tag){case 5:Ys||Io(d,l);case 6:var p=Fs,b=Xn;Fs=null,Ri(a,l,d),Fs=p,Xn=b,Fs!==null&&(Xn?(a=Fs,d=d.stateNode,a.nodeType===8?a.parentNode.removeChild(d):a.removeChild(d)):Fs.removeChild(d.stateNode));break;case 18:Fs!==null&&(Xn?(a=Fs,d=d.stateNode,a.nodeType===8?kh(a.parentNode,d):a.nodeType===1&&kh(a,d),ji(a)):kh(Fs,d.stateNode));break;case 4:p=Fs,b=Xn,Fs=d.stateNode.containerInfo,Xn=!0,Ri(a,l,d),Fs=p,Xn=b;break;case 0:case 11:case 14:case 15:if(!Ys&&(p=d.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){b=p=p.next;do{var w=b,M=w.destroy;w=w.tag,M!==void 0&&((w&2)!==0||(w&4)!==0)&&df(d,l,M),b=b.next}while(b!==p)}Ri(a,l,d);break;case 1:if(!Ys&&(Io(d,l),p=d.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=d.memoizedProps,p.state=d.memoizedState,p.componentWillUnmount()}catch(W){cs(d,l,W)}Ri(a,l,d);break;case 21:Ri(a,l,d);break;case 22:d.mode&1?(Ys=(p=Ys)||d.memoizedState!==null,Ri(a,l,d),Ys=p):Ri(a,l,d);break;default:Ri(a,l,d)}}function P0(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new oS),l.forEach(function(p){var b=xS.bind(null,a,p);d.has(p)||(d.add(p),p.then(b,b))})}}function Qn(a,l){var d=l.deletions;if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];try{var w=a,M=l,W=M;e:for(;W!==null;){switch(W.tag){case 5:Fs=W.stateNode,Xn=!1;break e;case 3:Fs=W.stateNode.containerInfo,Xn=!0;break e;case 4:Fs=W.stateNode.containerInfo,Xn=!0;break e}W=W.return}if(Fs===null)throw Error(s(160));T0(w,M,b),Fs=null,Xn=!1;var Q=b.alternate;Q!==null&&(Q.return=null),b.return=null}catch(me){cs(b,l,me)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)A0(l,a),l=l.sibling}function A0(a,l){var d=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Qn(l,a),Tr(a),p&4){try{Wl(3,a,a.return),Td(3,a)}catch(tt){cs(a,a.return,tt)}try{Wl(5,a,a.return)}catch(tt){cs(a,a.return,tt)}}break;case 1:Qn(l,a),Tr(a),p&512&&d!==null&&Io(d,d.return);break;case 5:if(Qn(l,a),Tr(a),p&512&&d!==null&&Io(d,d.return),a.flags&32){var b=a.stateNode;try{os(b,"")}catch(tt){cs(a,a.return,tt)}}if(p&4&&(b=a.stateNode,b!=null)){var w=a.memoizedProps,M=d!==null?d.memoizedProps:w,W=a.type,Q=a.updateQueue;if(a.updateQueue=null,Q!==null)try{W==="input"&&w.type==="radio"&&w.name!=null&&ie(b,w),Os(W,M);var me=Os(W,w);for(M=0;M<Q.length;M+=2){var Ie=Q[M],Me=Q[M+1];Ie==="style"?Ws(b,Me):Ie==="dangerouslySetInnerHTML"?Ss(b,Me):Ie==="children"?os(b,Me):U(b,Ie,Me,me)}switch(W){case"input":Se(b,w);break;case"textarea":_e(b,w);break;case"select":var Ae=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!w.multiple;var Ke=w.value;Ke!=null?jt(b,!!w.multiple,Ke,!1):Ae!==!!w.multiple&&(w.defaultValue!=null?jt(b,!!w.multiple,w.defaultValue,!0):jt(b,!!w.multiple,w.multiple?[]:"",!1))}b[Dl]=w}catch(tt){cs(a,a.return,tt)}}break;case 6:if(Qn(l,a),Tr(a),p&4){if(a.stateNode===null)throw Error(s(162));b=a.stateNode,w=a.memoizedProps;try{b.nodeValue=w}catch(tt){cs(a,a.return,tt)}}break;case 3:if(Qn(l,a),Tr(a),p&4&&d!==null&&d.memoizedState.isDehydrated)try{ji(l.containerInfo)}catch(tt){cs(a,a.return,tt)}break;case 4:Qn(l,a),Tr(a);break;case 13:Qn(l,a),Tr(a),b=a.child,b.flags&8192&&(w=b.memoizedState!==null,b.stateNode.isHidden=w,!w||b.alternate!==null&&b.alternate.memoizedState!==null||(gf=pe())),p&4&&P0(a);break;case 22:if(Ie=d!==null&&d.memoizedState!==null,a.mode&1?(Ys=(me=Ys)||Ie,Qn(l,a),Ys=me):Qn(l,a),Tr(a),p&8192){if(me=a.memoizedState!==null,(a.stateNode.isHidden=me)&&!Ie&&(a.mode&1)!==0)for(Ze=a,Ie=a.child;Ie!==null;){for(Me=Ze=Ie;Ze!==null;){switch(Ae=Ze,Ke=Ae.child,Ae.tag){case 0:case 11:case 14:case 15:Wl(4,Ae,Ae.return);break;case 1:Io(Ae,Ae.return);var et=Ae.stateNode;if(typeof et.componentWillUnmount=="function"){p=Ae,d=Ae.return;try{l=p,et.props=l.memoizedProps,et.state=l.memoizedState,et.componentWillUnmount()}catch(tt){cs(p,d,tt)}}break;case 5:Io(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){D0(Me);continue}}Ke!==null?(Ke.return=Ae,Ze=Ke):D0(Me)}Ie=Ie.sibling}e:for(Ie=null,Me=a;;){if(Me.tag===5){if(Ie===null){Ie=Me;try{b=Me.stateNode,me?(w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(W=Me.stateNode,Q=Me.memoizedProps.style,M=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,W.style.display=ls("display",M))}catch(tt){cs(a,a.return,tt)}}}else if(Me.tag===6){if(Ie===null)try{Me.stateNode.nodeValue=me?"":Me.memoizedProps}catch(tt){cs(a,a.return,tt)}}else if((Me.tag!==22&&Me.tag!==23||Me.memoizedState===null||Me===a)&&Me.child!==null){Me.child.return=Me,Me=Me.child;continue}if(Me===a)break e;for(;Me.sibling===null;){if(Me.return===null||Me.return===a)break e;Ie===Me&&(Ie=null),Me=Me.return}Ie===Me&&(Ie=null),Me.sibling.return=Me.return,Me=Me.sibling}}break;case 19:Qn(l,a),Tr(a),p&4&&P0(a);break;case 21:break;default:Qn(l,a),Tr(a)}}function Tr(a){var l=a.flags;if(l&2){try{e:{for(var d=a.return;d!==null;){if(C0(d)){var p=d;break e}d=d.return}throw Error(s(160))}switch(p.tag){case 5:var b=p.stateNode;p.flags&32&&(os(b,""),p.flags&=-33);var w=E0(a);ff(a,w,b);break;case 3:case 4:var M=p.stateNode.containerInfo,W=E0(a);hf(a,W,M);break;default:throw Error(s(161))}}catch(Q){cs(a,a.return,Q)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function cS(a,l,d){Ze=a,I0(a)}function I0(a,l,d){for(var p=(a.mode&1)!==0;Ze!==null;){var b=Ze,w=b.child;if(b.tag===22&&p){var M=b.memoizedState!==null||Ed;if(!M){var W=b.alternate,Q=W!==null&&W.memoizedState!==null||Ys;W=Ed;var me=Ys;if(Ed=M,(Ys=Q)&&!me)for(Ze=b;Ze!==null;)M=Ze,Q=M.child,M.tag===22&&M.memoizedState!==null?M0(b):Q!==null?(Q.return=M,Ze=Q):M0(b);for(;w!==null;)Ze=w,I0(w),w=w.sibling;Ze=b,Ed=W,Ys=me}R0(a)}else(b.subtreeFlags&8772)!==0&&w!==null?(w.return=b,Ze=w):R0(a)}}function R0(a){for(;Ze!==null;){var l=Ze;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Ys||Td(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!Ys)if(d===null)p.componentDidMount();else{var b=l.elementType===l.type?d.memoizedProps:Zn(l.type,d.memoizedProps);p.componentDidUpdate(b,d.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=l.updateQueue;w!==null&&Dg(l,w,p);break;case 3:var M=l.updateQueue;if(M!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}Dg(l,M,d)}break;case 5:var W=l.stateNode;if(d===null&&l.flags&4){d=W;var Q=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&d.focus();break;case"img":Q.src&&(d.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var me=l.alternate;if(me!==null){var Ie=me.memoizedState;if(Ie!==null){var Me=Ie.dehydrated;Me!==null&&ji(Me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Ys||l.flags&512&&uf(l)}catch(Ae){cs(l,l.return,Ae)}}if(l===a){Ze=null;break}if(d=l.sibling,d!==null){d.return=l.return,Ze=d;break}Ze=l.return}}function D0(a){for(;Ze!==null;){var l=Ze;if(l===a){Ze=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Ze=d;break}Ze=l.return}}function M0(a){for(;Ze!==null;){var l=Ze;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{Td(4,l)}catch(Q){cs(l,d,Q)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var b=l.return;try{p.componentDidMount()}catch(Q){cs(l,b,Q)}}var w=l.return;try{uf(l)}catch(Q){cs(l,w,Q)}break;case 5:var M=l.return;try{uf(l)}catch(Q){cs(l,M,Q)}}}catch(Q){cs(l,l.return,Q)}if(l===a){Ze=null;break}var W=l.sibling;if(W!==null){W.return=l.return,Ze=W;break}Ze=l.return}}var dS=Math.ceil,Pd=Z.ReactCurrentDispatcher,mf=Z.ReactCurrentOwner,Bn=Z.ReactCurrentBatchConfig,Dt=0,Is=null,ys=null,$s=0,En=0,Ro=Ei(0),Cs=0,Hl=null,_a=0,Ad=0,pf=0,Gl=null,xn=null,gf=0,Do=1/0,ai=null,Id=!1,xf=null,Di=null,Rd=!1,Mi=null,Dd=0,Kl=0,yf=null,Md=-1,Od=0;function nn(){return(Dt&6)!==0?pe():Md!==-1?Md:Md=pe()}function Oi(a){return(a.mode&1)===0?1:(Dt&2)!==0&&$s!==0?$s&-$s:Gj.transition!==null?(Od===0&&(Od=vi()),Od):(a=Ct,a!==0||(a=window.event,a=a===void 0?16:lo(a.type)),a)}function er(a,l,d,p){if(50<Kl)throw Kl=0,yf=null,Error(s(185));ma(a,d,p),((Dt&2)===0||a!==Is)&&(a===Is&&((Dt&2)===0&&(Ad|=d),Cs===4&&Li(a,$s)),yn(a,p),d===1&&Dt===0&&(l.mode&1)===0&&(Do=pe()+500,dd&&Pi()))}function yn(a,l){var d=a.callbackNode;mr(a,l);var p=bt(a,a===Is?$s:0);if(p===0)d!==null&&K(d),a.callbackNode=null,a.callbackPriority=0;else if(l=p&-p,a.callbackPriority!==l){if(d!=null&&K(d),l===1)a.tag===0?Hj(L0.bind(null,a)):Ng(L0.bind(null,a)),Vj(function(){(Dt&6)===0&&Pi()}),d=null;else{switch(pr(p)){case 1:d=lt;break;case 4:d=te;break;case 16:d=le;break;case 536870912:d=ht;break;default:d=le}d=W0(d,O0.bind(null,a))}a.callbackPriority=l,a.callbackNode=d}}function O0(a,l){if(Md=-1,Od=0,(Dt&6)!==0)throw Error(s(327));var d=a.callbackNode;if(Mo()&&a.callbackNode!==d)return null;var p=bt(a,a===Is?$s:0);if(p===0)return null;if((p&30)!==0||(p&a.expiredLanes)!==0||l)l=Ld(a,p);else{l=p;var b=Dt;Dt|=2;var w=U0();(Is!==a||$s!==l)&&(ai=null,Do=pe()+500,Ea(a,l));do try{fS();break}catch(W){z0(a,W)}while(!0);Mh(),Pd.current=w,Dt=b,ys!==null?l=0:(Is=null,$s=0,l=Cs)}if(l!==0){if(l===2&&(b=Kr(a),b!==0&&(p=b,l=bf(a,b))),l===1)throw d=Hl,Ea(a,0),Li(a,p),yn(a,pe()),d;if(l===6)Li(a,p);else{if(b=a.current.alternate,(p&30)===0&&!uS(b)&&(l=Ld(a,p),l===2&&(w=Kr(a),w!==0&&(p=w,l=bf(a,w))),l===1))throw d=Hl,Ea(a,0),Li(a,p),yn(a,pe()),d;switch(a.finishedWork=b,a.finishedLanes=p,l){case 0:case 1:throw Error(s(345));case 2:Ta(a,xn,ai);break;case 3:if(Li(a,p),(p&130023424)===p&&(l=gf+500-pe(),10<l)){if(bt(a,0)!==0)break;if(b=a.suspendedLanes,(b&p)!==p){nn(),a.pingedLanes|=a.suspendedLanes&b;break}a.timeoutHandle=Sh(Ta.bind(null,a,xn,ai),l);break}Ta(a,xn,ai);break;case 4:if(Li(a,p),(p&4194240)===p)break;for(l=a.eventTimes,b=-1;0<p;){var M=31-_t(p);w=1<<M,M=l[M],M>b&&(b=M),p&=~w}if(p=b,p=pe()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*dS(p/1960))-p,10<p){a.timeoutHandle=Sh(Ta.bind(null,a,xn,ai),p);break}Ta(a,xn,ai);break;case 5:Ta(a,xn,ai);break;default:throw Error(s(329))}}}return yn(a,pe()),a.callbackNode===d?O0.bind(null,a):null}function bf(a,l){var d=Gl;return a.current.memoizedState.isDehydrated&&(Ea(a,l).flags|=256),a=Ld(a,l),a!==2&&(l=xn,xn=d,l!==null&&vf(l)),a}function vf(a){xn===null?xn=a:xn.push.apply(xn,a)}function uS(a){for(var l=a;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var p=0;p<d.length;p++){var b=d[p],w=b.getSnapshot;b=b.value;try{if(!Jn(w(),b))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Li(a,l){for(l&=~pf,l&=~Ad,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var d=31-_t(l),p=1<<d;a[d]=-1,l&=~p}}function L0(a){if((Dt&6)!==0)throw Error(s(327));Mo();var l=bt(a,0);if((l&1)===0)return yn(a,pe()),null;var d=Ld(a,l);if(a.tag!==0&&d===2){var p=Kr(a);p!==0&&(l=p,d=bf(a,p))}if(d===1)throw d=Hl,Ea(a,0),Li(a,l),yn(a,pe()),d;if(d===6)throw Error(s(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,Ta(a,xn,ai),yn(a,pe()),null}function wf(a,l){var d=Dt;Dt|=1;try{return a(l)}finally{Dt=d,Dt===0&&(Do=pe()+500,dd&&Pi())}}function Ca(a){Mi!==null&&Mi.tag===0&&(Dt&6)===0&&Mo();var l=Dt;Dt|=1;var d=Bn.transition,p=Ct;try{if(Bn.transition=null,Ct=1,a)return a()}finally{Ct=p,Bn.transition=d,Dt=l,(Dt&6)===0&&Pi()}}function Nf(){En=Ro.current,Xt(Ro)}function Ea(a,l){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==-1&&(a.timeoutHandle=-1,$j(d)),ys!==null)for(d=ys.return;d!==null;){var p=d;switch(Ph(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&ld();break;case 3:Po(),Xt(mn),Xt(Gs),Bh();break;case 5:$h(p);break;case 4:Po();break;case 13:Xt(ns);break;case 19:Xt(ns);break;case 10:Oh(p.type._context);break;case 22:case 23:Nf()}d=d.return}if(Is=a,ys=a=zi(a.current,null),$s=En=l,Cs=0,Hl=null,pf=Ad=_a=0,xn=Gl=null,ja!==null){for(l=0;l<ja.length;l++)if(d=ja[l],p=d.interleaved,p!==null){d.interleaved=null;var b=p.next,w=d.pending;if(w!==null){var M=w.next;w.next=b,p.next=M}d.pending=p}ja=null}return a}function z0(a,l){do{var d=ys;try{if(Mh(),vd.current=Sd,wd){for(var p=rs.memoizedState;p!==null;){var b=p.queue;b!==null&&(b.pending=null),p=p.next}wd=!1}if(ka=0,As=_s=rs=null,Fl=!1,$l=0,mf.current=null,d===null||d.return===null){Cs=1,Hl=l,ys=null;break}e:{var w=a,M=d.return,W=d,Q=l;if(l=$s,W.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var me=Q,Ie=W,Me=Ie.tag;if((Ie.mode&1)===0&&(Me===0||Me===11||Me===15)){var Ae=Ie.alternate;Ae?(Ie.updateQueue=Ae.updateQueue,Ie.memoizedState=Ae.memoizedState,Ie.lanes=Ae.lanes):(Ie.updateQueue=null,Ie.memoizedState=null)}var Ke=c0(M);if(Ke!==null){Ke.flags&=-257,d0(Ke,M,W,w,l),Ke.mode&1&&l0(w,me,l),l=Ke,Q=me;var et=l.updateQueue;if(et===null){var tt=new Set;tt.add(Q),l.updateQueue=tt}else et.add(Q);break e}else{if((l&1)===0){l0(w,me,l),jf();break e}Q=Error(s(426))}}else if(es&&W.mode&1){var ps=c0(M);if(ps!==null){(ps.flags&65536)===0&&(ps.flags|=256),d0(ps,M,W,w,l),Rh(Ao(Q,W));break e}}w=Q=Ao(Q,W),Cs!==4&&(Cs=2),Gl===null?Gl=[w]:Gl.push(w),w=M;do{switch(w.tag){case 3:w.flags|=65536,l&=-l,w.lanes|=l;var ce=a0(w,Q,l);Rg(w,ce);break e;case 1:W=Q;var ee=w.type,he=w.stateNode;if((w.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(Di===null||!Di.has(he)))){w.flags|=65536,l&=-l,w.lanes|=l;var ze=o0(w,W,l);Rg(w,ze);break e}}w=w.return}while(w!==null)}$0(d)}catch(st){l=st,ys===d&&d!==null&&(ys=d=d.return);continue}break}while(!0)}function U0(){var a=Pd.current;return Pd.current=Sd,a===null?Sd:a}function jf(){(Cs===0||Cs===3||Cs===2)&&(Cs=4),Is===null||(_a&268435455)===0&&(Ad&268435455)===0||Li(Is,$s)}function Ld(a,l){var d=Dt;Dt|=2;var p=U0();(Is!==a||$s!==l)&&(ai=null,Ea(a,l));do try{hS();break}catch(b){z0(a,b)}while(!0);if(Mh(),Dt=d,Pd.current=p,ys!==null)throw Error(s(261));return Is=null,$s=0,Cs}function hS(){for(;ys!==null;)F0(ys)}function fS(){for(;ys!==null&&!Y();)F0(ys)}function F0(a){var l=q0(a.alternate,a,En);a.memoizedProps=a.pendingProps,l===null?$0(a):ys=l,mf.current=null}function $0(a){var l=a;do{var d=l.alternate;if(a=l.return,(l.flags&32768)===0){if(d=iS(d,l,En),d!==null){ys=d;return}}else{if(d=aS(d,l),d!==null){d.flags&=32767,ys=d;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Cs=6,ys=null;return}}if(l=l.sibling,l!==null){ys=l;return}ys=l=a}while(l!==null);Cs===0&&(Cs=5)}function Ta(a,l,d){var p=Ct,b=Bn.transition;try{Bn.transition=null,Ct=1,mS(a,l,d,p)}finally{Bn.transition=b,Ct=p}return null}function mS(a,l,d,p){do Mo();while(Mi!==null);if((Dt&6)!==0)throw Error(s(327));d=a.finishedWork;var b=a.finishedLanes;if(d===null)return null;if(a.finishedWork=null,a.finishedLanes=0,d===a.current)throw Error(s(177));a.callbackNode=null,a.callbackPriority=0;var w=d.lanes|d.childLanes;if(lh(a,w),a===Is&&(ys=Is=null,$s=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Rd||(Rd=!0,W0(le,function(){return Mo(),null})),w=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||w){w=Bn.transition,Bn.transition=null;var M=Ct;Ct=1;var W=Dt;Dt|=4,mf.current=null,lS(a,d),A0(d,a),Dj(Nh),Zr=!!wh,Nh=wh=null,a.current=d,cS(d),ae(),Dt=W,Ct=M,Bn.transition=w}else a.current=d;if(Rd&&(Rd=!1,Mi=a,Dd=b),w=a.pendingLanes,w===0&&(Di=null),Ht(d.stateNode),yn(a,pe()),l!==null)for(p=a.onRecoverableError,d=0;d<l.length;d++)b=l[d],p(b.value,{componentStack:b.stack,digest:b.digest});if(Id)throw Id=!1,a=xf,xf=null,a;return(Dd&1)!==0&&a.tag!==0&&Mo(),w=a.pendingLanes,(w&1)!==0?a===yf?Kl++:(Kl=0,yf=a):Kl=0,Pi(),null}function Mo(){if(Mi!==null){var a=pr(Dd),l=Bn.transition,d=Ct;try{if(Bn.transition=null,Ct=16>a?16:a,Mi===null)var p=!1;else{if(a=Mi,Mi=null,Dd=0,(Dt&6)!==0)throw Error(s(331));var b=Dt;for(Dt|=4,Ze=a.current;Ze!==null;){var w=Ze,M=w.child;if((Ze.flags&16)!==0){var W=w.deletions;if(W!==null){for(var Q=0;Q<W.length;Q++){var me=W[Q];for(Ze=me;Ze!==null;){var Ie=Ze;switch(Ie.tag){case 0:case 11:case 15:Wl(8,Ie,w)}var Me=Ie.child;if(Me!==null)Me.return=Ie,Ze=Me;else for(;Ze!==null;){Ie=Ze;var Ae=Ie.sibling,Ke=Ie.return;if(_0(Ie),Ie===me){Ze=null;break}if(Ae!==null){Ae.return=Ke,Ze=Ae;break}Ze=Ke}}}var et=w.alternate;if(et!==null){var tt=et.child;if(tt!==null){et.child=null;do{var ps=tt.sibling;tt.sibling=null,tt=ps}while(tt!==null)}}Ze=w}}if((w.subtreeFlags&2064)!==0&&M!==null)M.return=w,Ze=M;else e:for(;Ze!==null;){if(w=Ze,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Wl(9,w,w.return)}var ce=w.sibling;if(ce!==null){ce.return=w.return,Ze=ce;break e}Ze=w.return}}var ee=a.current;for(Ze=ee;Ze!==null;){M=Ze;var he=M.child;if((M.subtreeFlags&2064)!==0&&he!==null)he.return=M,Ze=he;else e:for(M=ee;Ze!==null;){if(W=Ze,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:Td(9,W)}}catch(st){cs(W,W.return,st)}if(W===M){Ze=null;break e}var ze=W.sibling;if(ze!==null){ze.return=W.return,Ze=ze;break e}Ze=W.return}}if(Dt=b,Pi(),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(it,a)}catch{}p=!0}return p}finally{Ct=d,Bn.transition=l}}return!1}function V0(a,l,d){l=Ao(d,l),l=a0(a,l,1),a=Ii(a,l,1),l=nn(),a!==null&&(ma(a,1,l),yn(a,l))}function cs(a,l,d){if(a.tag===3)V0(a,a,d);else for(;l!==null;){if(l.tag===3){V0(l,a,d);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Di===null||!Di.has(p))){a=Ao(d,a),a=o0(l,a,1),l=Ii(l,a,1),a=nn(),l!==null&&(ma(l,1,a),yn(l,a));break}}l=l.return}}function pS(a,l,d){var p=a.pingCache;p!==null&&p.delete(l),l=nn(),a.pingedLanes|=a.suspendedLanes&d,Is===a&&($s&d)===d&&(Cs===4||Cs===3&&($s&130023424)===$s&&500>pe()-gf?Ea(a,0):pf|=d),yn(a,l)}function B0(a,l){l===0&&((a.mode&1)===0?l=1:(l=Ve,Ve<<=1,(Ve&130023424)===0&&(Ve=4194304)));var d=nn();a=ni(a,l),a!==null&&(ma(a,l,d),yn(a,d))}function gS(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),B0(a,d)}function xS(a,l){var d=0;switch(a.tag){case 13:var p=a.stateNode,b=a.memoizedState;b!==null&&(d=b.retryLane);break;case 19:p=a.stateNode;break;default:throw Error(s(314))}p!==null&&p.delete(l),B0(a,d)}var q0;q0=function(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps||mn.current)gn=!0;else{if((a.lanes&d)===0&&(l.flags&128)===0)return gn=!1,rS(a,l,d);gn=(a.flags&131072)!==0}else gn=!1,es&&(l.flags&1048576)!==0&&jg(l,hd,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;Cd(a,l),a=l.pendingProps;var b=jo(l,Gs.current);To(l,d),b=Hh(null,l,p,a,b,d);var w=Gh();return l.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,pn(p)?(w=!0,cd(l)):w=!1,l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Uh(l),b.updater=kd,l.stateNode=b,b._reactInternals=l,Qh(l,p,a,d),l=nf(null,l,p,!0,w,d)):(l.tag=0,es&&w&&Th(l),sn(null,l,b,d),l=l.child),l;case 16:p=l.elementType;e:{switch(Cd(a,l),a=l.pendingProps,b=p._init,p=b(p._payload),l.type=p,b=l.tag=bS(p),a=Zn(p,a),b){case 0:l=sf(null,l,p,a,d);break e;case 1:l=g0(null,l,p,a,d);break e;case 11:l=u0(null,l,p,a,d);break e;case 14:l=h0(null,l,p,Zn(p.type,a),d);break e}throw Error(s(306,p,""))}return l;case 0:return p=l.type,b=l.pendingProps,b=l.elementType===p?b:Zn(p,b),sf(a,l,p,b,d);case 1:return p=l.type,b=l.pendingProps,b=l.elementType===p?b:Zn(p,b),g0(a,l,p,b,d);case 3:e:{if(x0(l),a===null)throw Error(s(387));p=l.pendingProps,w=l.memoizedState,b=w.element,Ig(a,l),yd(l,p,null,d);var M=l.memoizedState;if(p=M.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){b=Ao(Error(s(423)),l),l=y0(a,l,p,d,b);break e}else if(p!==b){b=Ao(Error(s(424)),l),l=y0(a,l,p,d,b);break e}else for(Cn=Ci(l.stateNode.containerInfo.firstChild),_n=l,es=!0,Yn=null,d=Pg(l,null,p,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(_o(),p===b){l=ii(a,l,d);break e}sn(a,l,p,d)}l=l.child}return l;case 5:return Mg(l),a===null&&Ih(l),p=l.type,b=l.pendingProps,w=a!==null?a.memoizedProps:null,M=b.children,jh(p,b)?M=null:w!==null&&jh(p,w)&&(l.flags|=32),p0(a,l),sn(a,l,M,d),l.child;case 6:return a===null&&Ih(l),null;case 13:return b0(a,l,d);case 4:return Fh(l,l.stateNode.containerInfo),p=l.pendingProps,a===null?l.child=Co(l,null,p,d):sn(a,l,p,d),l.child;case 11:return p=l.type,b=l.pendingProps,b=l.elementType===p?b:Zn(p,b),u0(a,l,p,b,d);case 7:return sn(a,l,l.pendingProps,d),l.child;case 8:return sn(a,l,l.pendingProps.children,d),l.child;case 12:return sn(a,l,l.pendingProps.children,d),l.child;case 10:e:{if(p=l.type._context,b=l.pendingProps,w=l.memoizedProps,M=b.value,Kt(pd,p._currentValue),p._currentValue=M,w!==null)if(Jn(w.value,M)){if(w.children===b.children&&!mn.current){l=ii(a,l,d);break e}}else for(w=l.child,w!==null&&(w.return=l);w!==null;){var W=w.dependencies;if(W!==null){M=w.child;for(var Q=W.firstContext;Q!==null;){if(Q.context===p){if(w.tag===1){Q=ri(-1,d&-d),Q.tag=2;var me=w.updateQueue;if(me!==null){me=me.shared;var Ie=me.pending;Ie===null?Q.next=Q:(Q.next=Ie.next,Ie.next=Q),me.pending=Q}}w.lanes|=d,Q=w.alternate,Q!==null&&(Q.lanes|=d),Lh(w.return,d,l),W.lanes|=d;break}Q=Q.next}}else if(w.tag===10)M=w.type===l.type?null:w.child;else if(w.tag===18){if(M=w.return,M===null)throw Error(s(341));M.lanes|=d,W=M.alternate,W!==null&&(W.lanes|=d),Lh(M,d,l),M=w.sibling}else M=w.child;if(M!==null)M.return=w;else for(M=w;M!==null;){if(M===l){M=null;break}if(w=M.sibling,w!==null){w.return=M.return,M=w;break}M=M.return}w=M}sn(a,l,b.children,d),l=l.child}return l;case 9:return b=l.type,p=l.pendingProps.children,To(l,d),b=$n(b),p=p(b),l.flags|=1,sn(a,l,p,d),l.child;case 14:return p=l.type,b=Zn(p,l.pendingProps),b=Zn(p.type,b),h0(a,l,p,b,d);case 15:return f0(a,l,l.type,l.pendingProps,d);case 17:return p=l.type,b=l.pendingProps,b=l.elementType===p?b:Zn(p,b),Cd(a,l),l.tag=1,pn(p)?(a=!0,cd(l)):a=!1,To(l,d),r0(l,p,b),Qh(l,p,b,d),nf(null,l,p,!0,a,d);case 19:return w0(a,l,d);case 22:return m0(a,l,d)}throw Error(s(156,l.tag))};function W0(a,l){return G(a,l)}function yS(a,l,d,p){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(a,l,d,p){return new yS(a,l,d,p)}function Sf(a){return a=a.prototype,!(!a||!a.isReactComponent)}function bS(a){if(typeof a=="function")return Sf(a)?1:0;if(a!=null){if(a=a.$$typeof,a===B)return 11;if(a===fe)return 14}return 2}function zi(a,l){var d=a.alternate;return d===null?(d=qn(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&14680064,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function zd(a,l,d,p,b,w){var M=2;if(p=a,typeof a=="function")Sf(a)&&(M=1);else if(typeof a=="string")M=5;else e:switch(a){case I:return Pa(d.children,b,w,l);case k:M=8,b|=8;break;case E:return a=qn(12,d,l,b|2),a.elementType=E,a.lanes=w,a;case A:return a=qn(13,d,l,b),a.elementType=A,a.lanes=w,a;case ne:return a=qn(19,d,l,b),a.elementType=ne,a.lanes=w,a;case De:return Ud(d,b,w,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case L:M=10;break e;case O:M=9;break e;case B:M=11;break e;case fe:M=14;break e;case ke:M=16,p=null;break e}throw Error(s(130,a==null?a:typeof a,""))}return l=qn(M,d,l,b),l.elementType=a,l.type=p,l.lanes=w,l}function Pa(a,l,d,p){return a=qn(7,a,p,l),a.lanes=d,a}function Ud(a,l,d,p){return a=qn(22,a,p,l),a.elementType=De,a.lanes=d,a.stateNode={isHidden:!1},a}function kf(a,l,d){return a=qn(6,a,null,l),a.lanes=d,a}function _f(a,l,d){return l=qn(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function vS(a,l,d,p,b){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gl(0),this.expirationTimes=gl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gl(0),this.identifierPrefix=p,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Cf(a,l,d,p,b,w,M,W,Q){return a=new vS(a,l,d,W,Q),l===1?(l=1,w===!0&&(l|=8)):l=0,w=qn(3,null,null,l),a.current=w,w.stateNode=a,w.memoizedState={element:p,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uh(w),a}function wS(a,l,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:p==null?null:""+p,children:a,containerInfo:l,implementation:d}}function H0(a){if(!a)return Ti;a=a._reactInternals;e:{if(tn(a)!==a||a.tag!==1)throw Error(s(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(pn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(s(171))}if(a.tag===1){var d=a.type;if(pn(d))return vg(a,d,l)}return l}function G0(a,l,d,p,b,w,M,W,Q){return a=Cf(d,p,!0,a,b,w,M,W,Q),a.context=H0(null),d=a.current,p=nn(),b=Oi(d),w=ri(p,b),w.callback=l??null,Ii(d,w,b),a.current.lanes=b,ma(a,b,p),yn(a,p),a}function Fd(a,l,d,p){var b=l.current,w=nn(),M=Oi(b);return d=H0(d),l.context===null?l.context=d:l.pendingContext=d,l=ri(w,M),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=Ii(b,l,M),a!==null&&(er(a,b,M,w),xd(a,b,M)),M}function $d(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function K0(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function Ef(a,l){K0(a,l),(a=a.alternate)&&K0(a,l)}function NS(){return null}var J0=typeof reportError=="function"?reportError:function(a){console.error(a)};function Tf(a){this._internalRoot=a}Vd.prototype.render=Tf.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(s(409));Fd(a,l,null,null)},Vd.prototype.unmount=Tf.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Ca(function(){Fd(null,a,null,null)}),l[Qr]=null}};function Vd(a){this._internalRoot=a}Vd.prototype.unstable_scheduleHydration=function(a){if(a){var l=vl();a={blockedOn:null,target:a,priority:l};for(var d=0;d<jn.length&&l!==0&&l<jn[d].priority;d++);jn.splice(d,0,a),d===0&&ao(a)}};function Pf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Bd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Y0(){}function jS(a,l,d,p,b){if(b){if(typeof p=="function"){var w=p;p=function(){var me=$d(M);w.call(me)}}var M=G0(l,p,a,0,null,!1,!1,"",Y0);return a._reactRootContainer=M,a[Qr]=M.current,Il(a.nodeType===8?a.parentNode:a),Ca(),M}for(;b=a.lastChild;)a.removeChild(b);if(typeof p=="function"){var W=p;p=function(){var me=$d(Q);W.call(me)}}var Q=Cf(a,0,!1,null,null,!1,!1,"",Y0);return a._reactRootContainer=Q,a[Qr]=Q.current,Il(a.nodeType===8?a.parentNode:a),Ca(function(){Fd(l,Q,d,p)}),Q}function qd(a,l,d,p,b){var w=d._reactRootContainer;if(w){var M=w;if(typeof b=="function"){var W=b;b=function(){var Q=$d(M);W.call(Q)}}Fd(l,M,a,b)}else M=jS(d,l,a,b,p);return $d(M)}yl=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var d=Je(l.pendingLanes);d!==0&&(xl(l,d|1),yn(l,pe()),(Dt&6)===0&&(Do=pe()+500,Pi()))}break;case 13:Ca(function(){var p=ni(a,1);if(p!==null){var b=nn();er(p,a,1,b)}}),Ef(a,1)}},ro=function(a){if(a.tag===13){var l=ni(a,134217728);if(l!==null){var d=nn();er(l,a,134217728,d)}Ef(a,134217728)}},bl=function(a){if(a.tag===13){var l=Oi(a),d=ni(a,l);if(d!==null){var p=nn();er(d,a,l,p)}Ef(a,l)}},vl=function(){return Ct},wl=function(a,l){var d=Ct;try{return Ct=a,l()}finally{Ct=d}},ms=function(a,l,d){switch(l){case"input":if(Se(a,d),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var p=d[l];if(p!==a&&p.form===a.form){var b=od(p);if(!b)throw Error(s(90));we(p),Se(p,b)}}}break;case"textarea":_e(a,d);break;case"select":l=d.value,l!=null&&jt(a,!!d.multiple,l,!1)}},Ye=wf,Et=Ca;var SS={usingClientEntryPoint:!1,Events:[Ml,wo,od,ts,je,wf]},Jl={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kS={bundleType:Jl.bundleType,version:Jl.version,rendererPackageName:Jl.rendererPackageName,rendererConfig:Jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Gr(a),a===null?null:a.stateNode},findFiberByHostInstance:Jl.findFiberByHostInstance||NS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{it=Wd.inject(kS),gt=Wd}catch{}}return bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SS,bn.createPortal=function(a,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pf(l))throw Error(s(200));return wS(a,l,null,d)},bn.createRoot=function(a,l){if(!Pf(a))throw Error(s(299));var d=!1,p="",b=J0;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),l=Cf(a,1,!1,null,null,d,!1,p,b),a[Qr]=l.current,Il(a.nodeType===8?a.parentNode:a),new Tf(l)},bn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=Gr(l),a=a===null?null:a.stateNode,a},bn.flushSync=function(a){return Ca(a)},bn.hydrate=function(a,l,d){if(!Bd(l))throw Error(s(200));return qd(null,a,l,!0,d)},bn.hydrateRoot=function(a,l,d){if(!Pf(a))throw Error(s(405));var p=d!=null&&d.hydratedSources||null,b=!1,w="",M=J0;if(d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onRecoverableError!==void 0&&(M=d.onRecoverableError)),l=G0(l,null,a,1,d??null,b,!1,w,M),a[Qr]=l.current,Il(a),p)for(a=0;a<p.length;a++)d=p[a],b=d._getVersion,b=b(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,b]:l.mutableSourceEagerHydrationData.push(d,b);return new Vd(l)},bn.render=function(a,l,d){if(!Bd(l))throw Error(s(200));return qd(null,a,l,!1,d)},bn.unmountComponentAtNode=function(a){if(!Bd(a))throw Error(s(40));return a._reactRootContainer?(Ca(function(){qd(null,null,a,!1,function(){a._reactRootContainer=null,a[Qr]=null})}),!0):!1},bn.unstable_batchedUpdates=wf,bn.unstable_renderSubtreeIntoContainer=function(a,l,d,p){if(!Bd(d))throw Error(s(200));if(a==null||a._reactInternals===void 0)throw Error(s(38));return qd(a,l,d,!1,p)},bn.version="18.3.1-next-f1338f8080-20240426",bn}var rx;function Pv(){if(rx)return Rf.exports;rx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rf.exports=DS(),Rf.exports}var ix;function MS(){if(ix)return Hd;ix=1;var n=Pv();return Hd.createRoot=n.createRoot,Hd.hydrateRoot=n.hydrateRoot,Hd}var OS=MS();const LS=Tv(OS);Pv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dc(){return dc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},dc.apply(this,arguments)}var Ji;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ji||(Ji={}));const ax="popstate";function zS(n){n===void 0&&(n={});function e(i,o){let{pathname:c="/",search:u="",hash:f=""}=to(i.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),pm("",{pathname:c,search:u,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(i,o){let c=i.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let f=i.location.href,h=f.indexOf("#");u=h===-1?f:f.slice(0,h)}return u+"#"+(typeof o=="string"?o:yu(o))}function r(i,o){Bu(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return FS(e,s,r,n)}function gs(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Bu(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function US(){return Math.random().toString(36).substr(2,8)}function ox(n,e){return{usr:n.state,key:n.key,idx:e}}function pm(n,e,s,r){return s===void 0&&(s=null),dc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?to(e):e,{state:s,key:e&&e.key||r||US()})}function yu(n){let{pathname:e="/",search:s="",hash:r=""}=n;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function to(n){let e={};if(n){let s=n.indexOf("#");s>=0&&(e.hash=n.substr(s),n=n.substr(0,s));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function FS(n,e,s,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,u=Ji.Pop,f=null,h=x();h==null&&(h=0,c.replaceState(dc({},c.state,{idx:h}),""));function x(){return(c.state||{idx:null}).idx}function v(){u=Ji.Pop;let R=x(),z=R==null?null:R-h;h=R,f&&f({action:u,location:C.location,delta:z})}function N(R,z){u=Ji.Push;let $=pm(C.location,R,z);s&&s($,R),h=x()+1;let U=ox($,h),Z=C.createHref($);try{c.pushState(U,"",Z)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(Z)}o&&f&&f({action:u,location:C.location,delta:1})}function T(R,z){u=Ji.Replace;let $=pm(C.location,R,z);s&&s($,R),h=x();let U=ox($,h),Z=C.createHref($);c.replaceState(U,"",Z),o&&f&&f({action:u,location:C.location,delta:0})}function _(R){let z=i.location.origin!=="null"?i.location.origin:i.location.href,$=typeof R=="string"?R:yu(R);return $=$.replace(/ $/,"%20"),gs(z,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,z)}let C={get action(){return u},get location(){return n(i,c)},listen(R){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(ax,v),f=R,()=>{i.removeEventListener(ax,v),f=null}},createHref(R){return e(i,R)},createURL:_,encodeLocation(R){let z=_(R);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:N,replace:T,go(R){return c.go(R)}};return C}var lx;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(lx||(lx={}));function $S(n,e,s){return s===void 0&&(s="/"),VS(n,e,s)}function VS(n,e,s,r){let i=typeof e=="string"?to(e):e,o=tp(i.pathname||"/",s);if(o==null)return null;let c=Av(n);BS(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let h=t1(o);u=XS(c[f],h)}return u}function Av(n,e,s,r){e===void 0&&(e=[]),s===void 0&&(s=[]),r===void 0&&(r="");let i=(o,c,u)=>{let f={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};f.relativePath.startsWith("/")&&(gs(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let h=Qi([r,f.relativePath]),x=s.concat(f);o.children&&o.children.length>0&&(gs(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Av(o.children,e,x,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:YS(h,o.index),routesMeta:x})};return n.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let f of Iv(o.path))i(o,c,f)}),e}function Iv(n){let e=n.split("/");if(e.length===0)return[];let[s,...r]=e,i=s.endsWith("?"),o=s.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=Iv(r.join("/")),u=[];return u.push(...c.map(f=>f===""?o:[o,f].join("/"))),i&&u.push(...c),u.map(f=>n.startsWith("/")&&f===""?"/":f)}function BS(n){n.sort((e,s)=>e.score!==s.score?s.score-e.score:ZS(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const qS=/^:[\w-]+$/,WS=3,HS=2,GS=1,KS=10,JS=-2,cx=n=>n==="*";function YS(n,e){let s=n.split("/"),r=s.length;return s.some(cx)&&(r+=JS),e&&(r+=HS),s.filter(i=>!cx(i)).reduce((i,o)=>i+(qS.test(o)?WS:o===""?GS:KS),r)}function ZS(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function XS(n,e,s){let{routesMeta:r}=n,i={},o="/",c=[];for(let u=0;u<r.length;++u){let f=r[u],h=u===r.length-1,x=o==="/"?e:e.slice(o.length)||"/",v=QS({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},x),N=f.route;if(!v)return null;Object.assign(i,v.params),c.push({params:i,pathname:Qi([o,v.pathname]),pathnameBase:a1(Qi([o,v.pathnameBase])),route:N}),v.pathnameBase!=="/"&&(o=Qi([o,v.pathnameBase]))}return c}function QS(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[s,r]=e1(n.path,n.caseSensitive,n.end),i=e.match(s);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,x,v)=>{let{paramName:N,isOptional:T}=x;if(N==="*"){let C=u[v]||"";c=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const _=u[v];return T&&!_?h[N]=void 0:h[N]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:c,pattern:n}}function e1(n,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Bu(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function t1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bu(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function tp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=n.charAt(s);return r&&r!=="/"?null:n.slice(s)||"/"}const s1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,n1=n=>s1.test(n);function r1(n,e){e===void 0&&(e="/");let{pathname:s,search:r="",hash:i=""}=typeof n=="string"?to(n):n,o;if(s)if(n1(s))o=s;else{if(s.includes("//")){let c=s;s=s.replace(/\/\/+/g,"/"),Bu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+s))}s.startsWith("/")?o=dx(s.substring(1),"/"):o=dx(s,e)}else o=e;return{pathname:o,search:o1(r),hash:l1(i)}}function dx(n,e){let s=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Of(n,e,s,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function i1(n){return n.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function sp(n,e){let s=i1(n);return e?s.map((r,i)=>i===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function np(n,e,s,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=to(n):(i=dc({},n),gs(!i.pathname||!i.pathname.includes("?"),Of("?","pathname","search",i)),gs(!i.pathname||!i.pathname.includes("#"),Of("#","pathname","hash",i)),gs(!i.search||!i.search.includes("#"),Of("#","search","hash",i)));let o=n===""||i.pathname==="",c=o?"/":i.pathname,u;if(c==null)u=s;else{let v=e.length-1;if(!r&&c.startsWith("..")){let N=c.split("/");for(;N[0]==="..";)N.shift(),v-=1;i.pathname=N.join("/")}u=v>=0?e[v]:"/"}let f=r1(i,u),h=c&&c!=="/"&&c.endsWith("/"),x=(o||c===".")&&s.endsWith("/");return!f.pathname.endsWith("/")&&(h||x)&&(f.pathname+="/"),f}const Qi=n=>n.join("/").replace(/\/\/+/g,"/"),a1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),o1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,l1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function c1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Rv=["post","put","patch","delete"];new Set(Rv);const d1=["get",...Rv];new Set(d1);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uc(){return uc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},uc.apply(this,arguments)}const rp=S.createContext(null),u1=S.createContext(null),oa=S.createContext(null),qu=S.createContext(null),$r=S.createContext({outlet:null,matches:[],isDataRoute:!1}),Dv=S.createContext(null);function h1(n,e){let{relative:s}=e===void 0?{}:e;ll()||gs(!1);let{basename:r,navigator:i}=S.useContext(oa),{hash:o,pathname:c,search:u}=Ov(n,{relative:s}),f=c;return r!=="/"&&(f=c==="/"?r:Qi([r,c])),i.createHref({pathname:f,search:u,hash:o})}function ll(){return S.useContext(qu)!=null}function la(){return ll()||gs(!1),S.useContext(qu).location}function Mv(n){S.useContext(oa).static||S.useLayoutEffect(n)}function en(){let{isDataRoute:n}=S.useContext($r);return n?C1():f1()}function f1(){ll()||gs(!1);let n=S.useContext(rp),{basename:e,future:s,navigator:r}=S.useContext(oa),{matches:i}=S.useContext($r),{pathname:o}=la(),c=JSON.stringify(sp(i,s.v7_relativeSplatPath)),u=S.useRef(!1);return Mv(()=>{u.current=!0}),S.useCallback(function(h,x){if(x===void 0&&(x={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let v=np(h,JSON.parse(c),o,x.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Qi([e,v.pathname])),(x.replace?r.replace:r.push)(v,x.state,x)},[e,r,c,o,n])}const m1=S.createContext(null);function p1(n){let e=S.useContext($r).outlet;return e&&S.createElement(m1.Provider,{value:n},e)}function Dc(){let{matches:n}=S.useContext($r),e=n[n.length-1];return e?e.params:{}}function Ov(n,e){let{relative:s}=e===void 0?{}:e,{future:r}=S.useContext(oa),{matches:i}=S.useContext($r),{pathname:o}=la(),c=JSON.stringify(sp(i,r.v7_relativeSplatPath));return S.useMemo(()=>np(n,JSON.parse(c),o,s==="path"),[n,c,o,s])}function g1(n,e){return x1(n,e)}function x1(n,e,s,r){ll()||gs(!1);let{navigator:i}=S.useContext(oa),{matches:o}=S.useContext($r),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let h=la(),x;if(e){var v;let R=typeof e=="string"?to(e):e;f==="/"||(v=R.pathname)!=null&&v.startsWith(f)||gs(!1),x=R}else x=h;let N=x.pathname||"/",T=N;if(f!=="/"){let R=f.replace(/^\//,"").split("/");T="/"+N.replace(/^\//,"").split("/").slice(R.length).join("/")}let _=$S(n,{pathname:T}),C=N1(_&&_.map(R=>Object.assign({},R,{params:Object.assign({},u,R.params),pathname:Qi([f,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:Qi([f,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),o,s,r);return e&&C?S.createElement(qu.Provider,{value:{location:uc({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Ji.Pop}},C):C}function y1(){let n=_1(),e=c1(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),s=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),s?S.createElement("pre",{style:i},s):null,null)}const b1=S.createElement(y1,null);class v1 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?S.createElement($r.Provider,{value:this.props.routeContext},S.createElement(Dv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function w1(n){let{routeContext:e,match:s,children:r}=n,i=S.useContext(rp);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),S.createElement($r.Provider,{value:e},r)}function N1(n,e,s,r){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),r===void 0&&(r=null),n==null){var o;if(!s)return null;if(s.errors)n=s.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)n=s.matches;else return null}let c=n,u=(i=s)==null?void 0:i.errors;if(u!=null){let x=c.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);x>=0||gs(!1),c=c.slice(0,Math.min(c.length,x+1))}let f=!1,h=-1;if(s&&r&&r.v7_partialHydration)for(let x=0;x<c.length;x++){let v=c[x];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(h=x),v.route.id){let{loaderData:N,errors:T}=s,_=v.route.loader&&N[v.route.id]===void 0&&(!T||T[v.route.id]===void 0);if(v.route.lazy||_){f=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((x,v,N)=>{let T,_=!1,C=null,R=null;s&&(T=u&&v.route.id?u[v.route.id]:void 0,C=v.route.errorElement||b1,f&&(h<0&&N===0?(E1("route-fallback"),_=!0,R=null):h===N&&(_=!0,R=v.route.hydrateFallbackElement||null)));let z=e.concat(c.slice(0,N+1)),$=()=>{let U;return T?U=C:_?U=R:v.route.Component?U=S.createElement(v.route.Component,null):v.route.element?U=v.route.element:U=x,S.createElement(w1,{match:v,routeContext:{outlet:x,matches:z,isDataRoute:s!=null},children:U})};return s&&(v.route.ErrorBoundary||v.route.errorElement||N===0)?S.createElement(v1,{location:s.location,revalidation:s.revalidation,component:C,error:T,children:$(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):$()},null)}var Lv=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Lv||{}),zv=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(zv||{});function j1(n){let e=S.useContext(rp);return e||gs(!1),e}function S1(n){let e=S.useContext(u1);return e||gs(!1),e}function k1(n){let e=S.useContext($r);return e||gs(!1),e}function Uv(n){let e=k1(),s=e.matches[e.matches.length-1];return s.route.id||gs(!1),s.route.id}function _1(){var n;let e=S.useContext(Dv),s=S1(),r=Uv();return e!==void 0?e:(n=s.errors)==null?void 0:n[r]}function C1(){let{router:n}=j1(Lv.UseNavigateStable),e=Uv(zv.UseNavigateStable),s=S.useRef(!1);return Mv(()=>{s.current=!0}),S.useCallback(function(i,o){o===void 0&&(o={}),s.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,uc({fromRouteId:e},o)))},[n,e])}const ux={};function E1(n,e,s){ux[n]||(ux[n]=!0)}function T1(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function P1(n){let{to:e,replace:s,state:r,relative:i}=n;ll()||gs(!1);let{future:o,static:c}=S.useContext(oa),{matches:u}=S.useContext($r),{pathname:f}=la(),h=en(),x=np(e,sp(u,o.v7_relativeSplatPath),f,i==="path"),v=JSON.stringify(x);return S.useEffect(()=>h(JSON.parse(v),{replace:s,state:r,relative:i}),[h,v,i,s,r]),null}function Fv(n){return p1(n.context)}function Nt(n){gs(!1)}function A1(n){let{basename:e="/",children:s=null,location:r,navigationType:i=Ji.Pop,navigator:o,static:c=!1,future:u}=n;ll()&&gs(!1);let f=e.replace(/^\/*/,"/"),h=S.useMemo(()=>({basename:f,navigator:o,static:c,future:uc({v7_relativeSplatPath:!1},u)}),[f,u,o,c]);typeof r=="string"&&(r=to(r));let{pathname:x="/",search:v="",hash:N="",state:T=null,key:_="default"}=r,C=S.useMemo(()=>{let R=tp(x,f);return R==null?null:{location:{pathname:R,search:v,hash:N,state:T,key:_},navigationType:i}},[f,x,v,N,T,_,i]);return C==null?null:S.createElement(oa.Provider,{value:h},S.createElement(qu.Provider,{children:s,value:C}))}function I1(n){let{children:e,location:s}=n;return g1(gm(e),s)}new Promise(()=>{});function gm(n,e){e===void 0&&(e=[]);let s=[];return S.Children.forEach(n,(r,i)=>{if(!S.isValidElement(r))return;let o=[...e,i];if(r.type===S.Fragment){s.push.apply(s,gm(r.props.children,o));return}r.type!==Nt&&gs(!1),!r.props.index||!r.props.children||gs(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=gm(r.props.children,o)),s.push(c)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xm(){return xm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},xm.apply(this,arguments)}function R1(n,e){if(n==null)return{};var s={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(s[i]=n[i]);return s}function D1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function M1(n,e){return n.button===0&&(!e||e==="_self")&&!D1(n)}const O1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],L1="6";try{window.__reactRouterVersion=L1}catch{}const z1="startTransition",hx=AS[z1];function U1(n){let{basename:e,children:s,future:r,window:i}=n,o=S.useRef();o.current==null&&(o.current=zS({window:i,v5Compat:!0}));let c=o.current,[u,f]=S.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},x=S.useCallback(v=>{h&&hx?hx(()=>f(v)):f(v)},[f,h]);return S.useLayoutEffect(()=>c.listen(x),[c,x]),S.useEffect(()=>T1(r),[r]),S.createElement(A1,{basename:e,children:s,location:u.location,navigationType:u.action,navigator:c,future:r})}const F1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,He=S.forwardRef(function(e,s){let{onClick:r,relative:i,reloadDocument:o,replace:c,state:u,target:f,to:h,preventScrollReset:x,viewTransition:v}=e,N=R1(e,O1),{basename:T}=S.useContext(oa),_,C=!1;if(typeof h=="string"&&$1.test(h)&&(_=h,F1))try{let U=new URL(window.location.href),Z=h.startsWith("//")?new URL(U.protocol+h):new URL(h),q=tp(Z.pathname,T);Z.origin===U.origin&&q!=null?h=q+Z.search+Z.hash:C=!0}catch{}let R=h1(h,{relative:i}),z=V1(h,{replace:c,state:u,target:f,preventScrollReset:x,relative:i,viewTransition:v});function $(U){r&&r(U),U.defaultPrevented||z(U)}return S.createElement("a",xm({},N,{href:_||R,onClick:C||o?r:$,ref:s,target:f}))});var fx;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(fx||(fx={}));var mx;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(mx||(mx={}));function V1(n,e){let{target:s,replace:r,state:i,preventScrollReset:o,relative:c,viewTransition:u}=e===void 0?{}:e,f=en(),h=la(),x=Ov(n,{relative:c});return S.useCallback(v=>{if(M1(v,s)){v.preventDefault();let N=r!==void 0?r:yu(h)===yu(x);f(n,{replace:N,state:i,preventScrollReset:o,relative:c,viewTransition:u})}},[h,f,x,r,i,s,n,o,c,u])}const px=[{id:"bc0ef8b5-e4b9-4bc8-aedd-d677391d74c0",name:"Red Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763528572144%2F1763528976141_red%20model.png?alt=media&token=1deef60f-3c4f-4e3e-beae-763d1b39621e",description:"Passion & Energy"},{id:"23bcfca6-5735-4481-ab25-9d61ac83bc3f",name:"Pink Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763716235698%2F1763716259515_pink%20model.png?alt=media&token=c41510b1-9946-49d0-8b19-f679f24d392b",description:"Love & Softness"},{id:"3427e08d-f82c-47c7-b5e7-2b8567733f38",name:"Silver Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732069765%2F1763732089246_silver%20model.png?alt=media&token=eb30db54-99d1-4c3f-ba97-0f2b34934d79",description:"Sleek & Modern"},{id:"3efca09b-07d8-40f2-8b6e-104049593cb3",name:"Colorfull",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763849326772%2F1763849625346_colorfull.jpg?alt=media&token=41d78666-4aa1-47a0-935f-c5361b4538ac",description:"Vibrant & Fun"},{id:"530b80f1-ac27-4ab4-ac10-f093d9d48dde",name:"Green Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732028982%2F1763732064239_download%20(1).png?alt=media&token=1b184b78-799f-4d79-9e55-8d122c2c07eb",description:"Nature & Harmony"},{id:"5fa9457f-3d9b-421c-9746-6bffbee4d4da",name:"Yellow Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732120801%2F1763732142964_download.png?alt=media&token=49c0be99-48b2-47ba-9cb4-38628d2876fe",description:"Joy & Sunshine"},{id:"6e673b67-9dd3-44b8-8797-51cc7e4ddf07",name:"Orange Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732327301%2F1763732349258_orange%20model.png?alt=media&token=78d402fc-e0f7-4b73-b0d3-a7502f7bc6d3",description:"Warmth & Creativity"},{id:"80da52b5-5130-462c-8f27-bdf7ff1c6564",name:"Black Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732028102%2F1763732058240_1.jpg?alt=media&token=6458bde4-9255-4c11-9015-ec738b79a8cb",description:"Bold & Mysterious"},{id:"8e8e275a-98fb-42b9-8551-ffeff03fb92a",name:"Purple Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763529047916%2F1763529076550_purple%20model.png?alt=media&token=10fa0811-7c4c-4c41-9165-262addea89f3",description:"Royalty & Spirit"},{id:"9667b780-6f85-48ad-a19e-da0951efc590",name:"Bronze and Brown Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732005647%2F1763732023012_copper%20model.png?alt=media&token=72619e26-b086-4913-a97f-ed8bea238d23",description:"Earthy & Ancient"},{id:"9d24210c-eb1c-4273-8f6d-beebe2016fc4",name:"Blue Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763529024900%2F1763529043293_2.jpg?alt=media&token=29dcba53-1264-45a2-9b68-a661a277cc91",description:"Calm & Ocean"},{id:"9d9fff97-3b25-409e-9e39-4a3b6412bb57",name:"Girls",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1764232246395%2F1764232265823_girls%20color%20background.jpg?alt=media&token=13860e81-a2e7-48fc-a6b3-42d0763c8d41",description:"Fun & Playful"},{id:"b40795f0-5b04-4e95-8e84-40ca3c9561d1",name:"White & Pearl Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763731966302%2F1763731995895_white%20model.png?alt=media&token=56bdfed9-00c4-4442-ac6a-358d1223e04c",description:"Elegance & Purity"},{id:"1ef06240-10e5-4bdf-9286-84d355991e95",name:"Gold Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732095040%2F1763732116711_gold%20model.png?alt=media&token=25b5331b-6bf1-4ecc-94c8-1ceb31ccdcc7",description:"Luxury & Wealth"}],B1=[{id:"1761729812469",code:"SPV-003",name:"Sweetheart Red Resin Stud Earrings",slug:"sweetheart-red-resin-studs",description:"Embrace a touch of whimsy with these adorable sweetheart stud earrings, meticulously crafted from vibrant epoxy resin. Each glossy red heart reflects light beautifully.",whenAndHowToWear:"Perfect for date nights or adding a pop of color to a monochrome outfit.",price:29,priceUSD:2,compareAtPrice:45,memberPrice:14.5,costPrice:5,category:"Red Collection",type:"Stud",status:"published",images:[],stock:58,tags:["Red heart earrings","stud earrings","resin jewelry","handmade"],seoKeywords:["heart earrings","red studs"],earringMaterials:[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal"},{name:"Stainless Steel",modifier:0,description:"Hypo-allergenic"}],isNewArrival:!1,isBestSeller:!0,reviews:[{id:"rev1",userName:"Amelia Thompson",location:"London, UK",content:"The sparkle of these earrings is absolutely mesmerizing, perfect for adding elegance to any outfit.",rating:5,date:"2024-11-15T10:30:00Z"},{id:"rev2",userName:"Carlos Ramirez",location:"Mexico City, Mexico",content:"Good quality, but the durability could be better for everyday wear.",rating:4,date:"2024-12-20T14:45:00Z"},{id:"rev3",userName:"Yuki Tanaka",location:"Tokyo, Japan",content:"These arrived faster than expected and the craftsmanship is impeccable. Highly recommend for special occasions.",rating:5,date:"2025-01-22T09:15:00Z"},{id:"rev4",userName:"Fatima Al-Zahra",location:"Dubai, UAE",content:"Beautiful design, though the price feels a bit high for the materials used.",rating:4,date:"2025-02-25T16:20:00Z"},{id:"rev5",userName:"Liam O'Sullivan",location:"Dublin, Ireland",content:"The color is vibrant and the design is unique. Perfect for everyday wear.",rating:4,date:"2025-03-28T11:00:00Z"},{id:"rev6",userName:"Priya Sharma",location:"Mumbai, India",content:"Nice piece, but I wish it sparkled more under different lights.",rating:3,date:"2025-04-01T13:30:00Z"},{id:"rev7",userName:"Hans Mueller",location:"Berlin, Germany",content:"Exceeded my expectations in terms of quality and style. The opal shines beautifully under light.",rating:5,date:"2025-05-03T08:45:00Z"},{id:"rev8",userName:"Isabella Rossi",location:"Rome, Italy",content:"Elegant design, but the durability is questionable after a few wears.",rating:3,date:"2025-06-05T17:10:00Z"},{id:"rev9",userName:"Ahmed Hassan",location:"Cairo, Egypt",content:"The ring fits perfectly and the stone has amazing play of colors. Worth every penny.",rating:5,date:"2025-07-07T12:25:00Z"},{id:"rev10",userName:"Sophie Dubois",location:"Paris, France",content:"Charming, and the price is reasonable for the sparkle it provides.",rating:4,date:"2025-08-09T15:50:00Z"},{id:"rev11",userName:"Raj Patel",location:"Sydney, Australia",content:"Fast shipping and the product is as described. Very satisfied with the purchase.",rating:5,date:"2025-09-11T10:05:00Z"},{id:"rev12",userName:"Elena Petrova",location:"Moscow, Russia",content:"Unique style, but the durability leaves much to be desired.",rating:3,date:"2025-10-13T14:30:00Z"},{id:"rev13",userName:"Miguel Santos",location:"So Paulo, Brazil",content:"The earrings are lightweight and comfortable to wear all day. Love the red color.",rating:4,date:"2025-11-15T09:20:00Z"}],createdAt:new Date().toISOString()},{id:"1762477248818",code:"SPV-052",name:"Ethereal Aurora Oval Opal Ring",slug:"ethereal-aurora-oval-opal-ring",description:"Experience the captivating play of color in this unique oval opal ring, meticulously set in gleaming sterling silver.",price:129,priceUSD:7,costPrice:50,memberPrice:60,backOfficeLink:"https://www.temu.com/example-ring-link",madeBy:"Outsourced",category:"White or Pearl Collection",type:"Ring",status:"published",images:[],stock:7,ringStock:{5:1,6:1,7:1,8:1,9:1,10:1,11:1},tags:["Opal ring","sterling silver","statement ring"],isNewArrival:!0,isFeaturedRing:!0,reviews:[{id:"rev14",userName:"Aisha Khan",location:"Karachi, Pakistan",content:"Gorgeous sparkle, but the price is a bit steep for what you get.",rating:4,date:"2024-11-17T16:45:00Z"},{id:"rev15",userName:"Oliver Jensen",location:"Copenhagen, Denmark",content:"High-quality materials and excellent customer service. The ring is a standout piece.",rating:5,date:"2024-12-19T11:15:00Z"},{id:"rev16",userName:"Nina Kowalski",location:"Warsaw, Poland",content:"Decent value, though durability could be improved.",rating:3,date:"2025-01-21T13:40:00Z"},{id:"rev17",userName:"Diego Fernandez",location:"Buenos Aires, Argentina",content:"The opal's iridescence is mesmerizing. Arrived well-packaged and on time.",rating:5,date:"2025-02-23T08:55:00Z"},{id:"rev18",userName:"Layla Al-Farsi",location:"Riyadh, Saudi Arabia",content:"Stylish accessory with great sparkle, worth the investment.",rating:5,date:"2025-03-25T17:25:00Z"},{id:"rev19",userName:"Finn Larsen",location:"Oslo, Norway",content:"Great attention to detail in the craftsmanship. Perfect for gifting.",rating:4,date:"2025-04-27T12:10:00Z"},{id:"rev20",userName:"Zara Ahmed",location:"Lagos, Nigeria",content:"Impressive quality, but the durability is not as expected.",rating:3,date:"2025-05-29T15:35:00Z"},{id:"rev21",userName:"Luca Bianchi",location:"Milan, Italy",content:"The earrings sparkle just right and the resin is smooth. Very happy with this buy.",rating:5,date:"2025-06-31T10:50:00Z"},{id:"rev22",userName:"Anika Gupta",location:"Delhi, India",content:"Solid choice, and the price matches the sparkle and quality.",rating:4,date:"2025-07-02T14:15:00Z"},{id:"rev23",userName:"Victor Nguyen",location:"Ho Chi Minh City, Vietnam",content:"Beautiful design and the silver setting enhances the opal perfectly. Highly recommended.",rating:5,date:"2025-08-04T09:30:00Z"},{id:"rev24",userName:"Maya Cohen",location:"Tel Aviv, Israel",content:"Lovely item with excellent durability for daily use.",rating:4,date:"2025-09-06T16:55:00Z"},{id:"rev25",userName:"Johan Svensson",location:"Stockholm, Sweden",content:"The product exceeded my expectations. The color and fit are spot on.",rating:5,date:"2025-10-08T11:40:00Z"}],createdAt:new Date().toISOString()}],Pr={id:"guest",name:"Guest",email:"",isMember:!1,membershipTier:"none",loyaltyPoints:0,affiliateCode:"",affiliateEarnings:0,wishlist:[],notifications:[],isAdmin:!1,socialRewards:{},shippingAddress:{street:"",suburb:"",city:"",province:"",postalCode:""}},q1=[{id:"s1",title:"Summer Tech Sale",products:["1761729812469"],discountPercentage:15,endsAt:new Date(Date.now()+864e5*2).toISOString(),image:"https://picsum.photos/800/400?random=20"}];function Wu(n,e){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(s[r[i]]=n[r[i]]);return s}function W1(n,e,s,r){function i(o){return o instanceof s?o:new s(function(c){c(o)})}return new(s||(s=Promise))(function(o,c){function u(x){try{h(r.next(x))}catch(v){c(v)}}function f(x){try{h(r.throw(x))}catch(v){c(v)}}function h(x){x.done?o(x.value):i(x.value).then(u,f)}h((r=r.apply(n,e||[])).next())})}const H1=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class ip extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class G1 extends ip{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gx extends ip{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class xx extends ip{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ym;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(ym||(ym={}));class K1{constructor(e,{headers:s={},customFetch:r,region:i=ym.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=H1(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return W1(this,arguments,void 0,function*(s,r={}){var i;let o,c;try{const{headers:u,method:f,body:h,signal:x,timeout:v}=r;let N={},{region:T}=r;T||(T=this.region);const _=new URL(`${this.url}/${s}`);T&&T!=="any"&&(N["x-region"]=T,_.searchParams.set("forceFunctionRegion",T));let C;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(N["Content-Type"]="application/octet-stream",C=h):typeof h=="string"?(N["Content-Type"]="text/plain",C=h):typeof FormData<"u"&&h instanceof FormData?C=h:(N["Content-Type"]="application/json",C=JSON.stringify(h)):C=h;let R=x;v&&(c=new AbortController,o=setTimeout(()=>c.abort(),v),x?(R=c.signal,x.addEventListener("abort",()=>c.abort())):R=c.signal);const z=yield this.fetch(_.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},N),this.headers),u),body:C,signal:R}).catch(q=>{throw new G1(q)}),$=z.headers.get("x-relay-error");if($&&$==="true")throw new gx(z);if(!z.ok)throw new xx(z);let U=((i=z.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),Z;return U==="application/json"?Z=yield z.json():U==="application/octet-stream"||U==="application/pdf"?Z=yield z.blob():U==="text/event-stream"?Z=z:U==="multipart/form-data"?Z=yield z.formData():Z=yield z.text(),{data:Z,error:null,response:z}}catch(u){return{data:null,error:u,response:u instanceof xx||u instanceof gx?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var J1=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},Y1=class{constructor(n){var e,s;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(s=n.isMaybeSingle)!==null&&s!==void 0?s:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let c=null,u=null,f=null,h=o.status,x=o.statusText;if(o.ok){var v,N;if(s.method!=="HEAD"){var T;const z=await o.text();z===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((T=s.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?u=z:u=JSON.parse(z))}const C=(v=s.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),R=(N=o.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");C&&R&&R.length>1&&(f=parseInt(R[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,x="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var _;const C=await o.text();try{c=JSON.parse(C),Array.isArray(c)&&o.status===404&&(u=[],c=null,h=200,x="OK")}catch{o.status===404&&C===""?(h=204,x="No Content"):c={message:C}}if(c&&s.isMaybeSingle&&(!(c==null||(_=c.details)===null||_===void 0)&&_.includes("0 rows"))&&(c=null,h=200,x="OK"),c&&s.shouldThrowOnError)throw new J1(c)}return{error:c,data:u,count:f,status:h,statusText:x}});return this.shouldThrowOnError||(i=i.catch(o=>{var c;let u="";const f=o==null?void 0:o.cause;if(f){var h,x,v,N;const _=(h=f==null?void 0:f.message)!==null&&h!==void 0?h:"",C=(x=f==null?void 0:f.code)!==null&&x!==void 0?x:"";u=`${(v=o==null?void 0:o.name)!==null&&v!==void 0?v:"FetchError"}: ${o==null?void 0:o.message}`,u+=`

Caused by: ${(N=f==null?void 0:f.name)!==null&&N!==void 0?N:"Error"}: ${_}`,C&&(u+=` (${C})`),f!=null&&f.stack&&(u+=`
${f.stack}`)}else{var T;u=(T=o==null?void 0:o.stack)!==null&&T!==void 0?T:""}return{error:{message:`${(c=o==null?void 0:o.name)!==null&&c!==void 0?c:"FetchError"}: ${o==null?void 0:o.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(n,e)}returns(){return this}overrideTypes(){return this}},Z1=class extends Y1{select(n){let e=!1;const s=(n??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${n}.${e?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:s=e}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${n}`),this}range(n,e,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${n}`),this.url.searchParams.set(o,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var c;const u=[n?"analyze":null,e?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${f}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const yx=new RegExp("[,()]");var qo=class extends Z1{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const s=Array.from(new Set(e)).map(r=>typeof r=="string"&&yx.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`in.(${s})`),this}notIn(n,e){const s=Array.from(new Set(e)).map(r=>typeof r=="string"&&yx.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`not.in.(${s})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:s,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(n,`${i}fts${o}.${e}`),this}match(n){return Object.entries(n).forEach(([e,s])=>{this.url.searchParams.append(e,`eq.${s}`)}),this}not(n,e,s){return this.url.searchParams.append(n,`not.${e}.${s}`),this}or(n,{foreignTable:e,referencedTable:s=e}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${n})`),this}filter(n,e,s){return this.url.searchParams.append(n,`${e}.${s}`),this}},X1=class{constructor(n,{headers:e={},schema:s,fetch:r}){this.url=n,this.headers=new Headers(e),this.schema=s,this.fetch=r}select(n,e){const{head:s=!1,count:r}=e??{},i=s?"HEAD":"GET";let o=!1;const c=(n??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",c),r&&this.headers.append("Prefer",`count=${r}`),new qo({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:e,defaultToNull:s=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const o=n.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new qo({method:i,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(n,{onConflict:e,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){var o;const c="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const u=n.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(u.length>0){const f=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new qo({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(n,{count:e}={}){var s;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new qo({method:r,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:n}={}){var e;const s="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new qo({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Q1=class $v{constructor(e,{headers:s={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(s),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new X1(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $v(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:i=!1,count:o}={}){var c;let u;const f=new URL(`${this.url}/rpc/${e}`);let h;r||i?(u=r?"HEAD":"GET",Object.entries(s).filter(([v,N])=>N!==void 0).map(([v,N])=>[v,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([v,N])=>{f.searchParams.append(v,N)})):(u="POST",h=s);const x=new Headers(this.headers);return o&&x.set("Prefer",`count=${o}`),new qo({method:u,url:f,headers:x,schema:this.schemaName,body:h,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class e2{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const r=s.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const r=this.getWebSocketConstructor();return new r(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const t2="2.89.0",s2=`realtime-js/${t2}`,Vv="1.0.0",n2="2.0.0",bx=Vv,bm=1e4,r2=1e3,i2=100;var Vi;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Vi||(Vi={}));var Ts;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ts||(Ts={}));var nr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(nr||(nr={}));var vm;(function(n){n.websocket="websocket"})(vm||(vm={}));var Ma;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ma||(Ma={}));class a2{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,s){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return s(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var s;return this._isArrayBuffer((s=e.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var s,r;const i=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var s,r;const i=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,s,r){var i,o;const c=e.topic,u=(i=e.ref)!==null&&i!==void 0?i:"",f=(o=e.join_ref)!==null&&o!==void 0?o:"",h=e.payload.event,x=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},v=Object.keys(x).length===0?"":JSON.stringify(x);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const N=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+u.length+c.length+h.length+v.length,T=new ArrayBuffer(this.HEADER_LENGTH+N);let _=new DataView(T),C=0;_.setUint8(C++,this.KINDS.userBroadcastPush),_.setUint8(C++,f.length),_.setUint8(C++,u.length),_.setUint8(C++,c.length),_.setUint8(C++,h.length),_.setUint8(C++,v.length),_.setUint8(C++,s),Array.from(f,z=>_.setUint8(C++,z.charCodeAt(0))),Array.from(u,z=>_.setUint8(C++,z.charCodeAt(0))),Array.from(c,z=>_.setUint8(C++,z.charCodeAt(0))),Array.from(h,z=>_.setUint8(C++,z.charCodeAt(0))),Array.from(v,z=>_.setUint8(C++,z.charCodeAt(0)));var R=new Uint8Array(T.byteLength+r.byteLength);return R.set(new Uint8Array(T),0),R.set(new Uint8Array(r),T.byteLength),R.buffer}decode(e,s){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return s(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,c,u,f]=r;return s({join_ref:i,ref:o,topic:c,event:u,payload:f})}return s({})}_binaryDecode(e){const s=new DataView(e),r=s.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,s,i)}}_decodeUserBroadcast(e,s,r){const i=s.getUint8(1),o=s.getUint8(2),c=s.getUint8(3),u=s.getUint8(4);let f=this.HEADER_LENGTH+4;const h=r.decode(e.slice(f,f+i));f=f+i;const x=r.decode(e.slice(f,f+o));f=f+o;const v=r.decode(e.slice(f,f+c));f=f+c;const N=e.slice(f,e.byteLength),T=u===this.JSON_ENCODING?JSON.parse(r.decode(N)):N,_={type:this.BROADCAST_EVENT,event:x,payload:T};return c>0&&(_.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(e){var s;return e instanceof ArrayBuffer||((s=e==null?void 0:e.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(e,s){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>s.includes(r)))}}class Bv{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Jt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Jt||(Jt={}));const vx=(n,e,s={})=>{var r;const i=(r=s.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=o2(c,n,e,i),o),{}):{}},o2=(n,e,s,r)=>{const i=e.find(u=>u.name===n),o=i==null?void 0:i.type,c=s[n];return o&&!r.includes(o)?qv(o,c):wm(c)},qv=(n,e)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return u2(e,s)}switch(n){case Jt.bool:return l2(e);case Jt.float4:case Jt.float8:case Jt.int2:case Jt.int4:case Jt.int8:case Jt.numeric:case Jt.oid:return c2(e);case Jt.json:case Jt.jsonb:return d2(e);case Jt.timestamp:return h2(e);case Jt.abstime:case Jt.date:case Jt.daterange:case Jt.int4range:case Jt.int8range:case Jt.money:case Jt.reltime:case Jt.text:case Jt.time:case Jt.timestamptz:case Jt.timetz:case Jt.tsrange:case Jt.tstzrange:return wm(e);default:return wm(e)}},wm=n=>n,l2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},c2=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},d2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},u2=(n,e)=>{if(typeof n!="string")return n;const s=n.length-1,r=n[s];if(n[0]==="{"&&r==="}"){let o;const c=n.slice(1,s);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(u=>qv(e,u))}return n},h2=n=>typeof n=="string"?n.replace(" ","T"):n,Wv=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Lf{constructor(e,s,r={},i=bm){this.channel=e,this.event=s,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wx;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(wx||(wx={}));class Xl{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:c,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xl.syncState(this.state,i,o,c),this.pendingDiffs.forEach(f=>{this.state=Xl.syncDiff(this.state,f,o,c)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:c,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Xl.syncDiff(this.state,i,o,c),u())}),this.onJoin((i,o,c)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:c})}),this.onLeave((i,o,c)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,i){const o=this.cloneDeep(e),c=this.transformState(s),u={},f={};return this.map(o,(h,x)=>{c[h]||(f[h]=x)}),this.map(c,(h,x)=>{const v=o[h];if(v){const N=x.map(R=>R.presence_ref),T=v.map(R=>R.presence_ref),_=x.filter(R=>T.indexOf(R.presence_ref)<0),C=v.filter(R=>N.indexOf(R.presence_ref)<0);_.length>0&&(u[h]=_),C.length>0&&(f[h]=C)}else u[h]=x}),this.syncDiff(o,{joins:u,leaves:f},r,i)}static syncDiff(e,s,r,i){const{joins:o,leaves:c}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,f)=>{var h;const x=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(f),x.length>0){const v=e[u].map(T=>T.presence_ref),N=x.filter(T=>v.indexOf(T.presence_ref)<0);e[u].unshift(...N)}r(u,x,f)}),this.map(c,(u,f)=>{let h=e[u];if(!h)return;const x=f.map(v=>v.presence_ref);h=h.filter(v=>x.indexOf(v.presence_ref)<0),e[u]=h,i(u,h,f),h.length===0&&delete e[u]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const i=e[r];return"metas"in i?s[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[r]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nx;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Nx||(Nx={}));var Ql;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Ql||(Ql={}));var oi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(oi||(oi={}));class Go{constructor(e,s={config:{}},r){var i,o;if(this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Ts.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Lf(this,nr.join,this.params,this.timeout),this.rejoinTimer=new Bv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ts.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ts.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nr.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new Xl(this),this.broadcastEndpointURL=Wv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ts.closed){const{config:{broadcast:c,presence:u,private:f}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(T=>T.filter))!==null&&i!==void 0?i:[],x=!!this.bindings[Ql.PRESENCE]&&this.bindings[Ql.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,v={},N={broadcast:c,presence:Object.assign(Object.assign({},u),{enabled:x}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(oi.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(oi.CLOSED)),this.updateJoinPayload(Object.assign({config:N},v)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:T})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){e==null||e(oi.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,R=(_=C==null?void 0:C.length)!==null&&_!==void 0?_:0,z=[];for(let $=0;$<R;$++){const U=C[$],{filter:{event:Z,schema:q,table:V,filter:I}}=U,k=T&&T[$];if(k&&k.event===Z&&Go.isFilterValueEqual(k.schema,q)&&Go.isFilterValueEqual(k.table,V)&&Go.isFilterValueEqual(k.filter,I))z.push(Object.assign(Object.assign({},U),{id:k.id}));else{this.unsubscribe(),this.state=Ts.errored,e==null||e(oi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=z,e&&e(oi.SUBSCRIBED);return}}).receive("error",T=>{this.state=Ts.errored,e==null||e(oi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(oi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this.state===Ts.joined&&e===Ql.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,s,r)}async httpSend(e,s,r={}){var i;if(s==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let f=u.statusText;try{const h=await u.json();f=h.error||h.message||f}catch{}return Promise.reject(new Error(f))}async send(e,s={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,u,f;const h=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(c=this.params)===null||c===void 0?void 0:c.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ts.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Lf(this,nr.leave,{},e),r.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ts.closed,this.bindings={}}async _fetchWithTimeout(e,s,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(o),c}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Lf(this,e,s,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>i2){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var i,o;const c=e.toLocaleLowerCase(),{close:u,error:f,leave:h,join:x}=nr;if(r&&[u,f,h,x].indexOf(c)>=0&&r!==this._joinRef())return;let N=this._onMessage(c,s,r);if(s&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(T=>{var _,C,R;return((_=T.filter)===null||_===void 0?void 0:_.event)==="*"||((R=(C=T.filter)===null||C===void 0?void 0:C.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===c}).map(T=>T.callback(N,r)):(o=this.bindings[c])===null||o===void 0||o.filter(T=>{var _,C,R,z,$,U;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in T){const Z=T.id,q=(_=T.filter)===null||_===void 0?void 0:_.event;return Z&&((C=s.ids)===null||C===void 0?void 0:C.includes(Z))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((R=s.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const Z=($=(z=T==null?void 0:T.filter)===null||z===void 0?void 0:z.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return Z==="*"||Z===((U=s==null?void 0:s.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===c}).map(T=>{if(typeof N=="object"&&"ids"in N){const _=N.data,{schema:C,table:R,commit_timestamp:z,type:$,errors:U}=_;N=Object.assign(Object.assign({},{schema:C,table:R,commit_timestamp:z,eventType:$,new:{},old:{},errors:U}),this._getPayloadRecords(_))}T.callback(N,r)})}_isClosed(){return this.state===Ts.closed}_isJoined(){return this.state===Ts.joined}_isJoining(){return this.state===Ts.joining}_isLeaving(){return this.state===Ts.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const i=e.toLocaleLowerCase(),o={type:i,filter:s,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Go.isEqual(i.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}static isFilterValueEqual(e,s){return(e??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(nr.close,{},e)}_onError(e){this._on(nr.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ts.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=vx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=vx(e.columns,e.old_record)),s}}const zf=()=>{},Gd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},f2=[1e3,2e3,5e3,1e4],m2=1e4,p2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class g2{constructor(e,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bm,this.transport=null,this.heartbeatIntervalMs=Gd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zf,this.ref=0,this.reconnectTimer=null,this.vsn=bx,this.logger=zf,this.conn=null,this.sendBuffer=[],this.serializer=new a2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=s==null?void 0:s.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${vm.websocket}`,this.httpEndpoint=Wv(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=e2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vi.connecting:return Ma.Connecting;case Vi.open:return Ma.Open;case Vi.closing:return Ma.Closing;default:return Ma.Closed}}isConnected(){return this.connectionState()===Ma.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Go(`realtime:${e}`,s,this);return this.channels.push(o),o}}push(e){const{topic:s,event:r,payload:i,ref:o}=e,c=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${s} ${r} (${o})`,i),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(r2,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Gd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:c}=s,u=c?`(${c})`:"",f=o.status||"";this.log("receive",`${f} ${r} ${i} ${u}`.trim(),o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,o,c)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Vi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Vi.open||this.conn.readyState===Vi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(nr.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${r}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([p2],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s,r=!1;if(e)s=e,r=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),s=this.accessTokenValue}else s=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(i=>{const o={access_token:s,version:s2};s&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(nr.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(s)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Bv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,r,i,o,c,u,f,h,x,v,N,T;switch(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:bm,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Gd.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:zf,this.vsn=(f=e==null?void 0:e.vsn)!==null&&f!==void 0?f:bx,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(_=>f2[_-1]||m2),this.vsn){case Vv:this.encode=(x=e==null?void 0:e.encode)!==null&&x!==void 0?x:((_,C)=>C(JSON.stringify(_))),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:((_,C)=>C(JSON.parse(_)));break;case n2:this.encode=(N=e==null?void 0:e.encode)!==null&&N!==void 0?N:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var hc=class extends Error{constructor(n,e){var s;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((s=e.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function x2(n,e,s){const r=new URL(e,n);if(s)for(const[i,o]of Object.entries(s))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function y2(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function b2(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:s,path:r,query:i,body:o,headers:c}){const u=x2(n.baseUrl,r,i),f=await y2(n.auth),h=await e(u,{method:s,headers:{...o?{"Content-Type":"application/json"}:{},...f,...c},body:o?JSON.stringify(o):void 0}),x=await h.text(),v=(h.headers.get("content-type")||"").includes("application/json"),N=v&&x?JSON.parse(x):x;if(!h.ok){const T=v?N:void 0,_=T==null?void 0:T.error;throw new hc((_==null?void 0:_.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:_==null?void 0:_.type,icebergCode:_==null?void 0:_.code,details:T})}return{status:h.status,headers:h.headers,data:N}}}}function Kd(n){return n.join("")}var v2=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:Kd(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const s={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Kd(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Kd(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Kd(n.namespace)}`}),!0}catch(e){if(e instanceof hc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(s){if(s instanceof hc&&s.status===409)return;throw s}}};function Oo(n){return n.join("")}var w2=class{constructor(n,e="",s){this.client=n,this.prefix=e,this.accessDelegation=s}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Oo(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Oo(n.namespace)}/tables`,body:e,headers:s})).data.metadata}async updateTable(n,e){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Oo(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Oo(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Oo(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Oo(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(s){if(s instanceof hc&&s.status===404)return!1;throw s}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(s){if(s instanceof hc&&s.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw s}}},N2=class{constructor(n){var r;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const s=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=b2({baseUrl:s,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new v2(this.client,e),this.tableOps=new w2(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},Hu=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function is(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var j2=class extends Hu{constructor(n,e,s){super(n),this.name="StorageApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Nm=class extends Hu{constructor(n,e){super(n),this.name="StorageUnknownError",this.originalError=e}};const ap=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),S2=()=>Response,jm=n=>{if(Array.isArray(n))return n.map(s=>jm(s));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([s,r])=>{const i=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=jm(r)}),e},k2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},_2=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function fc(n){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fc(n)}function C2(n,e){if(fc(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var r=s.call(n,e);if(fc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function E2(n){var e=C2(n,"string");return fc(e)=="symbol"?e:e+""}function T2(n,e,s){return(e=E2(e))in n?Object.defineProperty(n,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[e]=s,n}function jx(n,e){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),s.push.apply(s,r)}return s}function dt(n){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?jx(Object(s),!0).forEach(function(r){T2(n,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):jx(Object(s)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(s,r))})}return n}const Uf=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},P2=async(n,e,s)=>{n instanceof await S2()&&!(s!=null&&s.noResolveJson)?n.json().then(r=>{const i=n.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new j2(Uf(r),i,o))}).catch(r=>{e(new Nm(Uf(r),r))}):e(new Nm(Uf(n),n))},A2=(n,e,s,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(k2(r)?(i.headers=dt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),dt(dt({},i),s))};async function Mc(n,e,s,r,i,o){return new Promise((c,u)=>{n(s,A2(e,r,i,o)).then(f=>{if(!f.ok)throw f;return r!=null&&r.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>P2(f,u,r))})}async function mc(n,e,s,r){return Mc(n,"GET",e,s,r)}async function sr(n,e,s,r,i){return Mc(n,"POST",e,r,i,s)}async function Sm(n,e,s,r,i){return Mc(n,"PUT",e,r,i,s)}async function I2(n,e,s,r){return Mc(n,"HEAD",e,dt(dt({},s),{},{noResolveJson:!0}),r)}async function op(n,e,s,r,i){return Mc(n,"DELETE",e,r,i,s)}var R2=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(is(e))return{data:null,error:e};throw e}}};let Hv;Hv=Symbol.toStringTag;var D2=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[Hv]="BlobDownloadBuilder",this.promise=null}asStream(){return new R2(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(is(e))return{data:null,error:e};throw e}}};const M2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var O2=class{constructor(n,e={},s,r){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.bucketId=s,this.fetch=ap(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,e,s,r){var i=this;try{let o;const c=dt(dt({},Sx),r);let u=dt(dt({},i.headers),n==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",i.encodeMetadata(f)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),f&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(f))):(o=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType,f&&(u["x-metadata"]=i.toBase64(i.encodeMetadata(f))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),r!=null&&r.headers&&(u=dt(dt({},u),r.headers));const h=i._removeEmptyFolders(e),x=i._getFinalPath(h),v=await(n=="PUT"?Sm:sr)(i.fetch,`${i.url}/object/${x}`,o,dt({headers:u},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:h,id:v.Id,fullPath:v.Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(is(o))return{data:null,error:o};throw o}}async upload(n,e,s){return this.uploadOrUpdate("POST",n,e,s)}async uploadToSignedUrl(n,e,s,r){var i=this;const o=i._removeEmptyFolders(n),c=i._getFinalPath(o),u=new URL(i.url+`/object/upload/sign/${c}`);u.searchParams.set("token",e);try{let f;const h=dt({upsert:Sx.upsert},r),x=dt(dt({},i.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",h.cacheControl)):(f=s,x["cache-control"]=`max-age=${h.cacheControl}`,x["content-type"]=h.contentType),{data:{path:o,fullPath:(await Sm(i.fetch,u.toString(),f,{headers:x})).Key},error:null}}catch(f){if(i.shouldThrowOnError)throw f;if(is(f))return{data:null,error:f};throw f}}async createSignedUploadUrl(n,e){var s=this;try{let r=s._getFinalPath(n);const i=dt({},s.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const o=await sr(s.fetch,`${s.url}/object/upload/sign/${r}`,{},{headers:i}),c=new URL(s.url+o.url),u=c.searchParams.get("token");if(!u)throw new Hu("No token returned by API");return{data:{signedUrl:c.toString(),path:n,token:u},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(is(r))return{data:null,error:r};throw r}}async update(n,e,s){return this.uploadOrUpdate("PUT",n,e,s)}async move(n,e,s){var r=this;try{return{data:await sr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:s==null?void 0:s.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(is(i))return{data:null,error:i};throw i}}async copy(n,e,s){var r=this;try{return{data:{path:(await sr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:s==null?void 0:s.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(is(i))return{data:null,error:i};throw i}}async createSignedUrl(n,e,s){var r=this;try{let i=r._getFinalPath(n),o=await sr(r.fetch,`${r.url}/object/sign/${i}`,dt({expiresIn:e},s!=null&&s.transform?{transform:s.transform}:{}),{headers:r.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(is(i))return{data:null,error:i};throw i}}async createSignedUrls(n,e,s){var r=this;try{const i=await sr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:n},{headers:r.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(c=>dt(dt({},c),{},{signedUrl:c.signedURL?encodeURI(`${r.url}${c.signedURL}${o}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(is(i))return{data:null,error:i};throw i}}download(n,e){const s=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",o=this._getFinalPath(n),c=()=>mc(this.fetch,`${this.url}/${s}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new D2(c,this.shouldThrowOnError)}async info(n){var e=this;const s=e._getFinalPath(n);try{return{data:jm(await mc(e.fetch,`${e.url}/object/info/${s}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(is(r))return{data:null,error:r};throw r}}async exists(n){var e=this;const s=e._getFinalPath(n);try{return await I2(e.fetch,`${e.url}/object/${s}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(is(r)&&r instanceof Nm){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(n,e){const s=this._getFinalPath(n),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${u}`)}}}async remove(n){var e=this;try{return{data:await op(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}async list(n,e,s){var r=this;try{const i=dt(dt(dt({},M2),e),{},{prefix:n||""});return{data:await sr(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},s),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(is(i))return{data:null,error:i};throw i}}async listV2(n,e){var s=this;try{const r=dt({},n);return{data:await sr(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,r,{headers:s.headers},e),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(is(r))return{data:null,error:r};throw r}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const Gv="2.89.0",Kv={"X-Client-Info":`storage-js/${Gv}`};var L2=class{constructor(n,e={},s,r){this.shouldThrowOnError=!1;const i=new URL(n);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=dt(dt({},Kv),e),this.fetch=ap(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var e=this;try{const s=e.listBucketOptionsToQueryString(n);return{data:await mc(e.fetch,`${e.url}/bucket${s}`,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}async getBucket(n){var e=this;try{return{data:await mc(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}async createBucket(n,e={public:!1}){var s=this;try{return{data:await sr(s.fetch,`${s.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(is(r))return{data:null,error:r};throw r}}async updateBucket(n,e){var s=this;try{return{data:await Sm(s.fetch,`${s.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(is(r))return{data:null,error:r};throw r}}async emptyBucket(n){var e=this;try{return{data:await sr(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}async deleteBucket(n){var e=this;try{return{data:await op(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},z2=class{constructor(n,e={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=dt(dt({},Kv),e),this.fetch=ap(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await sr(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}async listBuckets(n){var e=this;try{const s=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&s.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&s.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&s.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&s.set("sortOrder",n.sortOrder),n!=null&&n.search&&s.set("search",n.search);const r=s.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await mc(e.fetch,i,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}async deleteBucket(n){var e=this;try{return{data:await op(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(is(s))return{data:null,error:s};throw s}}from(n){var e=this;if(!_2(n))throw new Hu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new N2({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(s,{get(i,o){const c=i[o];return typeof c!="function"?c:async(...u)=>{try{return{data:await c.apply(i,u),error:null}}catch(f){if(r)throw f;return{data:null,error:f}}}}})}};const lp={"X-Client-Info":`storage-js/${Gv}`,"Content-Type":"application/json"};var Jv=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function An(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var Ff=class extends Jv{constructor(n,e,s){super(n),this.name="StorageVectorsApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},U2=class extends Jv{constructor(n,e){super(n),this.name="StorageVectorsUnknownError",this.originalError=e}};const cp=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),F2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},kx=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),$2=async(n,e,s)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(s!=null&&s.noResolveJson)){const r=n.status||500,i=n;if(typeof i.json=="function")i.json().then(o=>{const c=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||r+"";e(new Ff(kx(o),r,c))}).catch(()=>{const o=r+"";e(new Ff(i.statusText||`HTTP ${r} error`,r,o))});else{const o=r+"";e(new Ff(i.statusText||`HTTP ${r} error`,r,o))}}else e(new U2(kx(n),n))},V2=(n,e,s,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(F2(r)?(i.headers=dt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,dt(dt({},i),s)):i};async function B2(n,e,s,r,i,o){return new Promise((c,u)=>{n(s,V2(e,r,i,o)).then(f=>{if(!f.ok)throw f;if(r!=null&&r.noResolveJson)return f;const h=f.headers.get("content-type");return!h||!h.includes("application/json")?{}:f.json()}).then(f=>c(f)).catch(f=>$2(f,u,r))})}async function In(n,e,s,r,i){return B2(n,"POST",e,r,i,s)}var q2=class{constructor(n,e={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=dt(dt({},lp),e),this.fetch=cp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async getIndex(n,e){var s=this;try{return{data:await In(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}}async listIndexes(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async deleteIndex(n,e){var s=this;try{return{data:await In(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:s.headers})||{},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}}},W2=class{constructor(n,e={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=dt(dt({},lp),e),this.fetch=cp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var e=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await In(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async getVectors(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async listVectors(n){var e=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await In(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async queryVectors(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async deleteVectors(n){var e=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await In(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}},H2=class{constructor(n,e={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=dt(dt({},lp),e),this.fetch=cp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async getBucket(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async listBuckets(n={}){var e=this;try{return{data:await In(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async deleteBucket(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}},G2=class extends H2{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new K2(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,s=this;return e().call(s,n)}async getBucket(n){var e=()=>super.getBucket,s=this;return e().call(s,n)}async listBuckets(n={}){var e=()=>super.listBuckets,s=this;return e().call(s,n)}async deleteBucket(n){var e=()=>super.deleteBucket,s=this;return e().call(s,n)}},K2=class extends q2{constructor(n,e,s,r){super(n,e,r),this.vectorBucketName=s}async createIndex(n){var e=()=>super.createIndex,s=this;return e().call(s,dt(dt({},n),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,s=this;return e().call(s,dt(dt({},n),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,s=this;return e().call(s,s.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,s=this;return e().call(s,s.vectorBucketName,n)}index(n){return new J2(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},J2=class extends W2{constructor(n,e,s,r,i){super(n,e,i),this.vectorBucketName=s,this.indexName=r}async putVectors(n){var e=()=>super.putVectors,s=this;return e().call(s,dt(dt({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(n){var e=()=>super.getVectors,s=this;return e().call(s,dt(dt({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,s=this;return e().call(s,dt(dt({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,s=this;return e().call(s,dt(dt({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,s=this;return e().call(s,dt(dt({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},Y2=class extends L2{constructor(n,e={},s,r){super(n,e,s,r)}from(n){return new O2(this.url,this.headers,n,this.fetch)}get vectors(){return new G2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new z2(this.url+"/iceberg",this.headers,this.fetch)}};const Yv="2.89.0",Wo=30*1e3,km=3,$f=km*Wo,Z2="http://localhost:9999",X2="supabase.auth.token",Q2={"X-Client-Info":`gotrue-js/${Yv}`},_m="X-Supabase-Api-Version",Zv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ek=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tk=600*1e3;class pc extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function nt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class sk extends pc{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function nk(n){return nt(n)&&n.name==="AuthApiError"}class Oa extends pc{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class xi extends pc{constructor(e,s,r,i){super(e,r,i),this.name=s,this.status=r}}class Pn extends xi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rk(n){return nt(n)&&n.name==="AuthSessionMissingError"}class Lo extends xi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jd extends xi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Yd extends xi{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ik(n){return nt(n)&&n.name==="AuthImplicitGrantRedirectError"}class _x extends xi{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ak extends xi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Cm extends xi{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Vf(n){return nt(n)&&n.name==="AuthRetryableFetchError"}class Cx extends xi{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class Em extends xi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const bu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ex=` 	
\r=`.split(""),ok=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Ex.length;e+=1)n[Ex[e].charCodeAt(0)]=-2;for(let e=0;e<bu.length;e+=1)n[bu[e].charCodeAt(0)]=e;return n})();function Tx(n,e,s){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(bu[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(bu[r]),e.queuedBits-=6}}function Xv(n,e,s){const r=ok[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Px(n){const e=[],s=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=c=>{dk(c,r,s)};for(let c=0;c<n.length;c+=1)Xv(n.charCodeAt(c),i,o);return e.join("")}function lk(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function ck(n,e){for(let s=0;s<n.length;s+=1){let r=n.charCodeAt(s);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}lk(r,e)}}function dk(n,e,s){if(e.utf8seq===0){if(n<=127){s(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Yo(n){const e=[],s={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)Xv(n.charCodeAt(i),s,r);return new Uint8Array(e)}function uk(n){const e=[];return ck(n,s=>e.push(s)),new Uint8Array(e)}function Fa(n){const e=[],s={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>Tx(i,s,r)),Tx(null,s,r),e.join("")}function hk(n){return Math.round(Date.now()/1e3)+n}function fk(){return Symbol("auth-callback")}const Bs=()=>typeof window<"u"&&typeof document<"u",Aa={tested:!1,writable:!1},Qv=()=>{if(!Bs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Aa.tested)return Aa.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Aa.tested=!0,Aa.writable=!0}catch{Aa.tested=!0,Aa.writable=!1}return Aa.writable};function mk(n){const e={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return s.searchParams.forEach((r,i)=>{e[i]=r}),e}const ew=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),pk=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ho=async(n,e,s)=>{await n.setItem(e,JSON.stringify(s))},Ia=async(n,e)=>{const s=await n.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Vs=async(n,e)=>{await n.removeItem(e)};let tw=class sw{constructor(){this.promise=new sw.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}};tw.promiseConstructor=Promise;function Bf(n){const e=n.split(".");if(e.length!==3)throw new Em("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ek.test(e[r]))throw new Em("JWT not in base64url format");return{header:JSON.parse(Px(e[0])),payload:JSON.parse(Px(e[1])),signature:Yo(e[2]),raw:{header:e[0],payload:e[1]}}}async function gk(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function xk(n,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await n(o);if(!e(o,null,c)){r(c);return}}catch(c){if(!e(o,c)){i(c);return}}})()})}function yk(n){return("0"+n.toString(16)).substr(-2)}function bk(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let i="";for(let o=0;o<56;o++)i+=s.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,yk).join("")}async function vk(n){const s=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function wk(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=await vk(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zo(n,e,s=!1){const r=bk();let i=r;s&&(i+="/PASSWORD_RECOVERY"),await Ho(n,`${e}-code-verifier`,i);const o=await wk(r);return[o,r===o?"plain":"s256"]}const Nk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jk(n){const e=n.headers.get(_m);if(!e||!e.match(Nk))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Sk(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function kk(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _k=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Uo(n){if(!_k.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qf(){const n={};return new Proxy(n,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ck(n,e){return new Proxy(n,{get:(s,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(s,r,i)}})}function Ax(n){return JSON.parse(JSON.stringify(n))}const Ra=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Ek=[502,503,504];async function Ix(n){var e;if(!pk(n))throw new Cm(Ra(n),0);if(Ek.includes(n.status))throw new Cm(Ra(n),n.status);let s;try{s=await n.json()}catch(o){throw new Oa(Ra(o),o)}let r;const i=jk(n);if(i&&i.getTime()>=Zv["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Cx(Ra(s),n.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Pn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new Cx(Ra(s),n.status,s.weak_password.reasons);throw new sk(Ra(s),n.status||500,r)}const Tk=(n,e,s,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),s))};async function ct(n,e,s,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[_m]||(o[_m]=Zv["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const c=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await Pk(n,e,s+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function Pk(n,e,s,r,i,o){const c=Tk(e,r,i,o);let u;try{u=await n(s,Object.assign({},c))}catch(f){throw console.error(f),new Cm(Ra(f),0)}if(u.ok||await Ix(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(f){await Ix(f)}}function tr(n){var e;let s=null;Rk(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=hk(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:s,user:r},error:null}}function Rx(n){const e=tr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Bi(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Ak(n){return{data:n,error:null}}function Ik(n){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:o}=n,c=Wu(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:o},f=Object.assign({},c);return{data:{properties:u,user:f},error:null}}function Dx(n){return n}function Rk(n){return n.access_token&&n.refresh_token&&n.expires_in}const Wf=["global","local","others"];class Dk{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=ew(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=Wf[0]){if(Wf.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wf.join(", ")}`);try{return await ct(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await ct(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Bi})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=Wu(e,["options"]),i=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ct(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Ik,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(nt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await ct(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Bi})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,i,o,c,u,f;try{const h={nextPage:null,lastPage:0,total:0},x=await ct(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Dx});if(x.error)throw x.error;const v=await x.json(),N=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(f=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return T.length>0&&(T.forEach(_=>{const C=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(_.split(";")[1].split("=")[1]);h[`${R}Page`]=C}),h.total=parseInt(N)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(nt(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Uo(e);try{return await ct(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Bi})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Uo(e);try{return await ct(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Bi})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){Uo(e);try{return await ct(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Bi})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Uo(e.userId);try{const{data:s,error:r}=await ct(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:r}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Uo(e.userId),Uo(e.id);try{return{data:await ct(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,r,i,o,c,u,f;try{const h={nextPage:null,lastPage:0,total:0},x=await ct(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Dx});if(x.error)throw x.error;const v=await x.json(),N=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(f=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return T.length>0&&(T.forEach(_=>{const C=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(_.split(";")[1].split("=")[1]);h[`${R}Page`]=C}),h.total=parseInt(N)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(nt(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await ct(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await ct(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _updateOAuthClient(e,s){try{return await ct(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ct(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await ct(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(nt(s))return{data:null,error:s};throw s}}}function Mx(n={}){return{getItem:e=>n[e]||null,setItem:(e,s)=>{n[e]=s},removeItem:e=>{delete n[e]}}}const Fo={debug:!!(globalThis&&Qv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Mk extends nw{}async function Ok(n,e,s){Fo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Fo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Fo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await s()}finally{Fo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Fo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Mk(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Fo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Lk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function rw(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function zk(n){return parseInt(n,16)}function Uk(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Fk(n){var e;const{chainId:s,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:c,notBefore:u,requestId:f,resources:h,scheme:x,uri:v,version:N}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(N!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${N}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const T=rw(n.address),_=x?`${x}://${r}`:r,C=n.statement?`${n.statement}
`:"",R=`${_} wants you to sign in with your Ethereum account:
${T}

${C}`;let z=`URI: ${v}
Version: ${N}
Chain ID: ${s}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(i&&(z+=`
Expiration Time: ${i.toISOString()}`),u&&(z+=`
Not Before: ${u.toISOString()}`),f&&(z+=`
Request ID: ${f}`),h){let $=`
Resources:`;for(const U of h){if(!U||typeof U!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${U}`);$+=`
- ${U}`}z+=$}return`${R}
${z}`}class bs extends Error{constructor({message:e,code:s,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=s}}class vu extends bs{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function $k({error:n,options:e}){var s,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new bs({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new bs({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new bs({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new bs({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new bs({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new bs({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new bs({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new bs({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(iw(c)){if(o.rp.id!==c)return new bs({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new bs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new bs({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new bs({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new bs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Vk({error:n,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new bs({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new bs({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(iw(r)){if(s.rpId!==r)return new bs({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new bs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new bs({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new bs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Bk{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const qk=new Bk;function Wk(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:s,excludeCredentials:r}=n,i=Wu(n,["challenge","user","excludeCredentials"]),o=Yo(e).buffer,c=Object.assign(Object.assign({},s),{id:Yo(s.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:c});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const h=r[f];u.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:Yo(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function Hk(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:s}=n,r=Wu(n,["challenge","allowCredentials"]),i=Yo(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(s&&s.length>0){o.allowCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const u=s[c];o.allowCredentials[c]=Object.assign(Object.assign({},u),{id:Yo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function Gk(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:Fa(new Uint8Array(n.response.attestationObject)),clientDataJSON:Fa(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Kk(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Fa(new Uint8Array(i.authenticatorData)),clientDataJSON:Fa(new Uint8Array(i.clientDataJSON)),signature:Fa(new Uint8Array(i.signature)),userHandle:i.userHandle?Fa(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function iw(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Ox(){var n,e;return!!(Bs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Jk(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vu("Browser returned unexpected credential type",e)}:{data:null,error:new vu("Empty credential response",e)}}catch(e){return{data:null,error:$k({error:e,options:n})}}}async function Yk(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vu("Browser returned unexpected credential type",e)}:{data:null,error:new vu("Empty credential response",e)}}catch(e){return{data:null,error:Vk({error:e,options:n})}}}const Zk={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Xk={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wu(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),s=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const o in i){const c=i[o];if(c!==void 0)if(Array.isArray(c))r[o]=c;else if(s(c))r[o]=c;else if(e(c)){const u=r[o];e(u)?r[o]=wu(u,c):r[o]=wu(c)}else r[o]=c}return r}function Qk(n,e){return wu(Zk,n,e||{})}function e_(n,e){return wu(Xk,n,e||{})}class t_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:r,signal:i},o){try{const{data:c,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!c)return{data:null,error:u};const f=i??qk.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=Qk(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:x,error:v}=await Jk({publicKey:h,signal:f});return x?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:x}},error:null}:{data:null,error:v}}case"request":{const h=e_(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:x,error:v}=await Yk(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:f}));return x?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:x}},error:null}:{data:null,error:v}}}}catch(c){return nt(c)?{data:null,error:c}:{data:null,error:new Oa("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:s,webauthn:r}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!s)return{data:null,error:new pc("rpId is required for WebAuthn authentication")};try{if(!Ox())return{data:null,error:new Oa("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:r},signal:i},{request:o});if(!c)return{data:null,error:u};const{webauthn:f}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:f.type,rpId:s,rpOrigins:r,credential_response:f.credential_response}})}catch(c){return nt(c)?{data:null,error:c}:{data:null,error:new Oa("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!s)return{data:null,error:new pc("rpId is required for WebAuthn registration")};try{if(!Ox())return{data:null,error:new Oa("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(x=>{var v;return(v=x.data)===null||v===void 0?void 0:v.all.find(N=>N.factor_type==="webauthn"&&N.friendly_name===e&&N.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:u};const{data:f,error:h}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:s,rpOrigins:r},signal:i},{create:o});return f?this._verify({factorId:c.id,challengeId:f.challengeId,webauthn:{rpId:s,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(c){return nt(c)?{data:null,error:c}:{data:null,error:new Oa("Unexpected error in register",c)}}}}Lk();const s_={url:Z2,storageKey:X2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Q2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Lx(n,e,s){return await s()}const $o={};class gc{get jwks(){var e,s;return(s=(e=$o[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){$o[this.storageKey]=Object.assign(Object.assign({},$o[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=$o[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){$o[this.storageKey]=Object.assign(Object.assign({},$o[this.storageKey]),{cachedAt:e})}constructor(e){var s,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},s_),e);if(this.storageKey=o.storageKey,this.instanceID=(s=gc.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,gc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Bs()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Dk({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=ew(o.fetch),this.lock=o.lock||Lx,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Bs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Ok:this.lock=Lx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new t_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Qv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mx(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Mx(this.memoryStorage)),Bs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Yv}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let s={},r="none";if(Bs()&&(s=mk(window.location.href),this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce")),Bs()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(s,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),ik(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",c,"redirect type",u),await this._saveSession(c),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return nt(s)?this._returnResult({error:s}):this._returnResult({error:new Oa("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,i;try{const o=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:tr}),{data:c,error:u}=o;if(u||!c)return this._returnResult({data:{user:null,session:null},error:u});const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(o){if(nt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var s,r,i;try{let o;if("email"in e){const{email:x,password:v,options:N}=e;let T=null,_=null;this.flowType==="pkce"&&([T,_]=await zo(this.storage,this.storageKey)),o=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:x,password:v,data:(s=N==null?void 0:N.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:T,code_challenge_method:_},xform:tr})}else if("phone"in e){const{phone:x,password:v,options:N}=e;o=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:v,data:(r=N==null?void 0:N.data)!==null&&r!==void 0?r:{},channel:(i=N==null?void 0:N.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:tr})}else throw new Jd("You must provide either an email or phone number and a password");const{data:c,error:u}=o;if(u||!c)return await Vs(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(o){if(await Vs(this.storage,`${this.storageKey}-code-verifier`),nt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let s;if("email"in e){const{email:o,password:c,options:u}=e;s=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Rx})}else if("phone"in e){const{phone:o,password:c,options:u}=e;s=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Rx})}else throw new Jd("You must provide either an email or phone number and a password");const{data:r,error:i}=s;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new Lo;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(s){if(nt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(e){var s,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,r,i,o,c,u,f,h,x,v,N;let T,_;if("message"in e)T=e.message,_=e.signature;else{const{chain:C,wallet:R,statement:z,options:$}=e;let U;if(Bs())if(typeof R=="object")U=R;else{const E=window;if("ethereum"in E&&typeof E.ethereum=="object"&&"request"in E.ethereum&&typeof E.ethereum.request=="function")U=E.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!($!=null&&$.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=R}const Z=new URL((s=$==null?void 0:$.url)!==null&&s!==void 0?s:window.location.href),q=await U.request({method:"eth_requestAccounts"}).then(E=>E).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const V=rw(q[0]);let I=(r=$==null?void 0:$.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const E=await U.request({method:"eth_chainId"});I=zk(E)}const k={domain:Z.host,address:V,statement:z,uri:Z.href,version:"1",chainId:I,nonce:(i=$==null?void 0:$.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(c=(o=$==null?void 0:$.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(u=$==null?void 0:$.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=$==null?void 0:$.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=$==null?void 0:$.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(x=$==null?void 0:$.signInWithEthereum)===null||x===void 0?void 0:x.resources};T=Fk(k),_=await U.request({method:"personal_sign",params:[Uk(T),V]})}try{const{data:C,error:R}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:_},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(N=e.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:tr});if(R)throw R;if(!C||!C.session||!C.user){const z=new Lo;return this._returnResult({data:{user:null,session:null},error:z})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:R})}catch(C){if(nt(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(e){var s,r,i,o,c,u,f,h,x,v,N,T;let _,C;if("message"in e)_=e.message,C=e.signature;else{const{chain:R,wallet:z,statement:$,options:U}=e;let Z;if(Bs())if(typeof z=="object")Z=z;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))Z=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof z!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Z=z}const q=new URL((s=U==null?void 0:U.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in Z&&Z.signIn){const V=await Z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U==null?void 0:U.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),$?{statement:$}:null));let I;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")I=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)I=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)_=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),C=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Z)||typeof Z.signMessage!="function"||!("publicKey"in Z)||typeof Z!="object"||!Z.publicKey||!("toBase58"in Z.publicKey)||typeof Z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${q.host} wants you to sign in with your Solana account:`,Z.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(i=(r=U==null?void 0:U.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=U==null?void 0:U.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((c=U==null?void 0:U.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((u=U==null?void 0:U.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((f=U==null?void 0:U.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((h=U==null?void 0:U.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((v=(x=U==null?void 0:U.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||v===void 0)&&v.length?["Resources",...U.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const V=await Z.signMessage(new TextEncoder().encode(_),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=V}}try{const{data:R,error:z}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Fa(C)},!((N=e.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:tr});if(z)throw z;if(!R||!R.session||!R.user){const $=new Lo;return this._returnResult({data:{user:null,session:null},error:$})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:z})}catch(R){if(nt(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(e){const s=await Ia(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(s??"").split("/");try{if(!r&&this.flowType==="pkce")throw new ak;const{data:o,error:c}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:tr});if(await Vs(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const u=new Lo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:c})}catch(o){if(await Vs(this.storage,`${this.storageKey}-code-verifier`),nt(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:s,provider:r,token:i,access_token:o,nonce:c}=e,u=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:tr}),{data:f,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f||!f.session||!f.user){const x=new Lo;return this._returnResult({data:{user:null,session:null},error:x})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:h})}catch(s){if(nt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(e){var s,r,i,o,c;try{if("email"in e){const{email:u,options:f}=e;let h=null,x=null;this.flowType==="pkce"&&([h,x]=await zo(this.storage,this.storageKey));const{error:v}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:x},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:u,options:f}=e,{data:h,error:x}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},create_user:(o=f==null?void 0:f.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(c=f==null?void 0:f.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:x})}throw new Jd("You must provide either an email or phone number.")}catch(u){if(await Vs(this.storage,`${this.storageKey}-code-verifier`),nt(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var s,r;try{let i,o;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:u}=await ct(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:tr});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,h=c.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(i){if(nt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var s,r,i,o,c;try{let u=null,f=null;this.flowType==="pkce"&&([u,f]=await zo(this.storage,this.storageKey));const h=await ct(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:Ak});return!((o=h.data)===null||o===void 0)&&o.url&&Bs()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await Vs(this.storage,`${this.storageKey}-code-verifier`),nt(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Pn;const{error:i}=await ct(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(nt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:c}=await ct(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:c,error:u}=await ct(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new Jd("You must provide either an email or phone number and a type")}catch(s){if(nt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Ia(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<$f:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await Ia(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=qf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=Ck(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const s=await this._acquireLock(-1,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(e){try{return e?await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Bi}):await this._useSession(async s=>{var r,i,o;const{data:c,error:u}=s;if(u)throw u;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pn}:await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Bi})})}catch(s){if(nt(s))return rk(s)&&(await this._removeSession(),await Vs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Pn;const c=i.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await zo(this.storage,this.storageKey));const{data:h,error:x}=await ct(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:c.access_token,xform:Bi});if(x)throw x;return c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(await Vs(this.storage,`${this.storageKey}-code-verifier`),nt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pn;const s=Date.now()/1e3;let r=s,i=!0,o=null;const{payload:c}=Bf(e.access_token);if(c.exp&&(r=c.exp,i=r<=s),i){const{data:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(s){if(nt(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:c,error:u}=s;if(u)throw u;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Pn;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(nt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(e,s){try{if(!Bs())throw new Yd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Yd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new _x("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yd("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _x("No code detected.");const{data:$,error:U}=await this._exchangeCodeForSession(e.code);if(U)throw U;const Z=new URL(window.location.href);return Z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Z.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:c,expires_in:u,expires_at:f,token_type:h}=e;if(!o||!u||!c||!h)throw new Yd("No session defined in URL");const x=Math.round(Date.now()/1e3),v=parseInt(u);let N=x+v;f&&(N=parseInt(f));const T=N-x;T*1e3<=Wo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${v}s`);const _=N-v;x-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,N,x):x-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,N,x);const{data:C,error:R}=await this._getUser(o);if(R)throw R;const z={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:v,expires_at:N,refresh_token:c,token_type:h,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:z,redirectType:e.type},error:null})}catch(r){if(nt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Ia(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:i,error:o}=s;if(o)return this._returnResult({error:o});const c=(r=i.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:u}=await this.admin.signOut(c,e);if(u&&!(nk(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Vs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const s=fk(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,i;try{const{data:{session:o},error:c}=s;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,s={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await zo(this.storage,this.storageKey,!0));try{return await ct(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(await Vs(this.storage,`${this.storageKey}-code-verifier`),nt(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(s){if(nt(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:r,error:i}=await this._useSession(async o=>{var c,u,f,h,x;const{data:v,error:N}=o;if(N)throw N;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ct(this.fetch,"GET",T,{headers:this.headers,jwt:(x=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&x!==void 0?x:void 0})});if(i)throw i;return Bs()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(nt(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var r;try{const{error:i,data:{session:o}}=s;if(i)throw i;const{options:c,provider:u,token:f,access_token:h,nonce:x}=e,v=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:f,access_token:h,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:tr}),{data:N,error:T}=v;return T?this._returnResult({data:{user:null,session:null},error:T}):!N||!N.session||!N.user?this._returnResult({data:{user:null,session:null},error:new Lo}):(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("USER_UPDATED",N.session)),this._returnResult({data:N,error:T}))}catch(i){if(await Vs(this.storage,`${this.storageKey}-code-verifier`),nt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,i;const{data:o,error:c}=s;if(c)throw c;return await ct(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(nt(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await xk(async i=>(i>0&&await gk(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await ct(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tr})),(i,o)=>{const c=200*Math.pow(2,i);return o&&Vf(o)&&Date.now()+c-r<Wo})}catch(r){if(this._debug(s,"error",r),nt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Bs()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ia(this.storage,this.storageKey);if(i&&this.userStorage){let c=await Ia(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:i.user},await Ho(this.userStorage,this.storageKey+"-user",c)),i.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:qf()}else if(i&&!i.user&&!i.user){const c=await Ia(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(i.user=c.user,await Vs(this.storage,this.storageKey+"-user"),await Ho(this.storage,this.storageKey,i)):i.user=qf()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<$f;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${$f}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:c}=await this._callRefreshToken(i.refresh_token);c&&(console.error(c),Vf(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:u}=await this._getUser(i.access_token);!u&&(c!=null&&c.user)?(i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new tw;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new Pn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),nt(o)){const c={data:null,error:o};return Vf(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,s)}catch(f){o.push(f)}});if(await Promise.all(c),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Vs(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await Ho(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const o=Ax(i);await Ho(this.storage,this.storageKey,o)}else{const i=Ax(s);await Ho(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Vs(this.storage,this.storageKey),await Vs(this.storage,this.storageKey+"-code-verifier"),await Vs(this.storage,this.storageKey+"-user"),this.userStorage&&await Vs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Bs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Wo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Wo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Wo}ms, refresh threshold is ${km} ticks`),i<=km&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof nw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const i=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,c]=await zo(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;return o?this._returnResult({data:null,error:o}):await ct(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(nt(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,i;const{data:o,error:c}=s;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:h}=await ct(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&f.type==="totp"&&(!((i=f==null?void 0:f.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(s){if(nt(s))return this._returnResult({data:null,error:s});throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Gk(e.webauthn.credential_response):Kk(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:f}=await ct(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:f}))})}catch(s){if(nt(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const c=await ct(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:u}=c;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Wk(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Hk(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(nt(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=s==null?void 0:s.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,s;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Bf(r.access_token);let c=null;o.aal&&(c=o.aal);let u=c;((s=(e=r.user.factors)===null||e===void 0?void 0:e.filter(x=>x.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(u="aal2");const h=o.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;return i?this._returnResult({data:null,error:i}):r?await ct(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Pn})})}catch(s){if(nt(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Pn});const c=await ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return c.data&&c.data.redirect_url&&Bs()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Pn});const c=await ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return c.data&&c.data.redirect_url&&Bs()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;return r?this._returnResult({data:null,error:r}):s?await ct(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Pn})})}catch(e){if(nt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;return i?this._returnResult({data:null,error:i}):r?(await ct(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Pn})})}catch(s){if(nt(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+tk>i)return r;const{data:o,error:c}=await ct(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:T,error:_}=await this.getSession();if(_||!T.session)return this._returnResult({data:null,error:_});r=T.session.access_token}const{header:i,payload:o,signature:c,raw:{header:u,payload:f}}=Bf(r);s!=null&&s.allowExpired||Sk(o.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!h){const{error:T}=await this.getUser(r);if(T)throw T;return{data:{claims:o,header:i,signature:c},error:null}}const x=kk(i.alg),v=await crypto.subtle.importKey("jwk",h,x,!0,["verify"]);if(!await crypto.subtle.verify(x,v,c,uk(`${u}.${f}`)))throw new Em("Invalid JWT signature");return{data:{claims:o,header:i,signature:c},error:null}}catch(r){if(nt(r))return this._returnResult({data:null,error:r});throw r}}}gc.nextInstanceID={};const n_=gc,r_="2.89.0";let Zl="";typeof Deno<"u"?Zl="deno":typeof document<"u"?Zl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zl="react-native":Zl="node";const i_={"X-Client-Info":`supabase-js-${Zl}/${r_}`},a_={headers:i_},o_={schema:"public"},l_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},c_={};function xc(n){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xc(n)}function d_(n,e){if(xc(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var r=s.call(n,e);if(xc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function u_(n){var e=d_(n,"string");return xc(e)=="symbol"?e:e+""}function h_(n,e,s){return(e=u_(e))in n?Object.defineProperty(n,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[e]=s,n}function zx(n,e){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),s.push.apply(s,r)}return s}function ds(n){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?zx(Object(s),!0).forEach(function(r){h_(n,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):zx(Object(s)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(s,r))})}return n}const f_=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),m_=()=>Headers,p_=(n,e,s)=>{const r=f_(s),i=m_();return async(o,c)=>{var u;const f=(u=await e())!==null&&u!==void 0?u:n;let h=new i(c==null?void 0:c.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),r(o,ds(ds({},c),{},{headers:h}))}};function g_(n){return n.endsWith("/")?n:n+"/"}function x_(n,e){var s,r;const{db:i,auth:o,realtime:c,global:u}=n,{db:f,auth:h,realtime:x,global:v}=e,N={db:ds(ds({},f),i),auth:ds(ds({},h),o),realtime:ds(ds({},x),c),storage:{},global:ds(ds(ds({},v),u),{},{headers:ds(ds({},(s=v==null?void 0:v.headers)!==null&&s!==void 0?s:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?N.accessToken=n.accessToken:delete N.accessToken,N}function y_(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(g_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var b_=class extends n_{constructor(n){super(n)}},v_=class{constructor(n,e,s){var r,i;this.supabaseUrl=n,this.supabaseKey=e;const o=y_(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:o_,realtime:c_,auth:ds(ds({},l_),{},{storageKey:c}),global:a_},f=x_(s??{},u);if(this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(x,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=f.auth)!==null&&h!==void 0?h:{},this.headers,f.global.fetch)}this.fetch=p_(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(ds({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new Q1(new URL("rest/v1",o).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Y2(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new K1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,s)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,s;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return(e=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:s,storage:r,userStorage:i,storageKey:o,flowType:c,lock:u,debug:f,throwOnError:h},x,v){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new b_({url:this.authUrl.href,headers:ds(ds({},N),x),storageKey:o,autoRefreshToken:n,persistSession:e,detectSessionInUrl:s,storage:r,userStorage:i,flowType:c,lock:u,debug:f,throwOnError:h,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new g2(this.realtimeUrl.href,ds(ds({},n),{},{params:ds(ds({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(n,e,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const w_=(n,e,s)=>new v_(n,e,s);function N_(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}N_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const j_="https://xqcnqtrzamgzsrgbmxuk.supabase.co",S_="sb_publishable_KwSUm9DTjeHvxqOSfECRFQ_4dkpCxAW",k_=!0;console.log(" Supabase Client initialized successfully");const qe=w_(j_,S_),Es=k_;async function __(n,e){return qe.auth.signInWithPassword({email:n,password:e})}async function C_(n,e,s){var i,o,c;const r=await qe.auth.signUp({email:n,password:e});if(r.error)throw r.error;try{const u=((o=(i=r==null?void 0:r.data)==null?void 0:i.user)==null?void 0:o.id)||((c=r==null?void 0:r.user)==null?void 0:c.id);u&&s&&await qe.from("users").upsert([{id:u,email:n,...s}])}catch(u){console.warn("Failed to write signup metadata to users table:",u)}return r}async function Ps(n,e={}){try{let s=qe.from(n).select(e.select||"*");if(e.filters)for(const i of Object.keys(e.filters))s=s.eq(i,e.filters[i]);e.orderBy&&(s=s.order(e.orderBy.column,{ascending:!!e.orderBy.ascending})),typeof e.limit=="number"&&(s=s.limit(e.limit)),typeof e.offset=="number"&&(s=s.range(e.offset,(e.offset||0)+(e.limit||0)-1));const r=await s;if(r.error)throw r.error;return r.data}catch(s){return console.warn("queryDocuments failed:",s),null}}async function Oc(n,e){try{const{data:s,error:r}=await qe.from(n).select("*").eq("id",e).maybeSingle();if(r)throw r;return s}catch(s){return console.warn("getDocument failed:",s),null}}async function ea(n,e){const{data:s,error:r}=await qe.from(n).insert([e]);if(r)throw r;return s}async function Yi(n,e,s){const{data:r,error:i}=await qe.from(n).update(s).eq("id",e);if(i)throw i;return r}async function dp(n,e){const{data:s,error:r}=await qe.from(n).delete().eq("id",e);if(r)throw r;return s}function Hf(n,e){try{const s=qe.channel(`${n}_realtime`).on("postgres_changes",{event:"*",schema:"public",table:n},r=>e(r)).subscribe();return()=>{try{s.unsubscribe()}catch(r){console.warn("unsubscribe failed:",r)}}}catch(s){return console.warn("subscribeToTable failed:",s),()=>{}}}async function Gu(n,e,s){try{const{error:r}=await qe.storage.from(n).upload(e,s,{upsert:!0});if(r)throw r;const{data:i}=qe.storage.from(n).getPublicUrl(e);return(i==null?void 0:i.publicUrl)||null}catch(r){throw console.error("uploadFile failed:",r),r}}async function Zi(n,e){var s;try{let r=null;try{const{data:o}=await qe.auth.getSession();r=((s=o==null?void 0:o.session)==null?void 0:s.access_token)||null}catch{r=null}const i=await fetch(`/api/functions/${n}`,{method:"POST",headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{}},body:JSON.stringify(e||{})});if(!i.ok){const o=await i.text();throw new Error(o||`Function ${n} failed with status ${i.status}`)}return await i.json()}catch(r){throw console.warn("callServerFunction failed:",n,r),r}}const E_=()=>{};var Ux={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=function(n){const e=[];let s=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},T_=function(n){const e=[];let s=0,r=0;for(;s<n.length;){const i=n[s++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[s++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[s++],c=n[s++],u=n[s++],f=((i&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=n[s++],c=n[s++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},ow={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],c=i+1<n.length,u=c?n[i+1]:0,f=i+2<n.length,h=f?n[i+2]:0,x=o>>2,v=(o&3)<<4|u>>4;let N=(u&15)<<2|h>>6,T=h&63;f||(T=64,c||(N=64)),r.push(s[x],s[v],s[N],s[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):T_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=s[n.charAt(i++)],u=i<n.length?s[n.charAt(i)]:0;++i;const h=i<n.length?s[n.charAt(i)]:64;++i;const v=i<n.length?s[n.charAt(i)]:64;if(++i,o==null||u==null||h==null||v==null)throw new P_;const N=o<<2|u>>4;if(r.push(N),h!==64){const T=u<<4&240|h>>2;if(r.push(T),v!==64){const _=h<<6&192|v;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class P_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const A_=function(n){const e=aw(n);return ow.encodeByteArray(e,!0)},Nu=function(n){return A_(n).replace(/\./g,"")},lw=function(n){try{return ow.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=()=>I_().__FIREBASE_DEFAULTS__,D_=()=>{if(typeof process>"u"||typeof Ux>"u")return;const n=Ux.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},M_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&lw(n[1]);return e&&JSON.parse(e)},up=()=>{try{return E_()||R_()||D_()||M_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cw=n=>{var e,s;return(s=(e=up())==null?void 0:e.emulatorHosts)==null?void 0:s[n]},hp=n=>{const e=cw(n);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},dw=()=>{var n;return(n=up())==null?void 0:n.config},uw=n=>{var e;return(e=up())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ku(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Nu(JSON.stringify(s)),Nu(JSON.stringify(c)),""].join(".")}const ec={};function L_(){const n={prod:[],emulator:[]};for(const e of Object.keys(ec))ec[e]?n.emulator.push(e):n.prod.push(e);return n}function z_(n){let e=document.getElementById(n),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),s=!0),{created:s,element:e}}let Fx=!1;function Ju(n,e){if(typeof window>"u"||typeof document>"u"||!so(window.location.host)||ec[n]===e||ec[n]||Fx)return;ec[n]=e;function s(N){return`__firebase__banner__${N}`}const r="__firebase__banner",o=L_().prod.length>0;function c(){const N=document.getElementById(r);N&&N.remove()}function u(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function f(N,T){N.setAttribute("width","24"),N.setAttribute("id",T),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function h(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Fx=!0,c()},N}function x(N,T){N.setAttribute("id",T),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function v(){const N=z_(r),T=s("text"),_=document.getElementById(T)||document.createElement("span"),C=s("learnmore"),R=document.getElementById(C)||document.createElement("a"),z=s("preprendIcon"),$=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const U=N.element;u(U),x(R,C);const Z=h();f($,z),U.append($,_,R,Z),document.body.appendChild(U)}o?(_.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function F_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function V_(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fp(){try{return typeof indexedDB=="object"}catch{return!1}}function mp(){return new Promise((n,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(s){e(s)}})}function mw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="FirebaseError";class Hn extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=B_,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ca.prototype.create)}}class ca{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?q_(o,r):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new Hn(i,u,r)}}function q_(n,e){return n.replace(W_,(s,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const W_=/\{\$([^}]+)}/g;function H_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function na(n,e){if(n===e)return!0;const s=Object.keys(n),r=Object.keys(e);for(const i of s){if(!r.includes(i))return!1;const o=n[i],c=e[i];if($x(o)&&$x(c)){if(!na(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!s.includes(i))return!1;return!0}function $x(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(n){const e=[];for(const[s,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function G_(n,e){const s=new K_(n,e);return s.subscribe.bind(s)}class K_{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let i;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");J_(e,["next","error","complete"])?i=e:i={next:e,error:s,complete:r},i.next===void 0&&(i.next=Gf),i.error===void 0&&(i.error=Gf),i.complete===void 0&&(i.complete=Gf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J_(n,e){if(typeof n!="object"||n===null)return!1;for(const s of e)if(s in n&&typeof n[s]=="function")return!0;return!1}function Gf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=1e3,Z_=2,X_=14400*1e3,Q_=.5;function Vx(n,e=Y_,s=Z_){const r=e*Math.pow(s,n),i=Math.round(Q_*r*(Math.random()-.5)*2);return Math.min(X_,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(n){return n&&n._delegate?n._delegate:n}class cn{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new O_;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sC(e))try{this.getOrInitializeService({instanceIdentifier:Da})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Da){return this.instances.has(e)}getOptions(e=Da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&c.resolve(i)}return i}onInit(e,s){const r=this.normalizeInstanceIdentifier(s),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const i of r)try{i(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tC(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Da){return this.component?this.component.multipleInstances?e:Da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tC(n){return n===Da?void 0:n}function sC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new eC(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ft||(Ft={}));const rC={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},iC=Ft.INFO,aC={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},oC=(n,e,...s)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=aC[e];if(i)console[i](`[${r}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yu{constructor(e){this.name=e,this._logLevel=iC,this._logHandler=oC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const lC=(n,e)=>e.some(s=>n instanceof s);let Bx,qx;function cC(){return Bx||(Bx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dC(){return qx||(qx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pw=new WeakMap,Tm=new WeakMap,gw=new WeakMap,Kf=new WeakMap,pp=new WeakMap;function uC(n){const e=new Promise((s,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{s(hi(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(s=>{s instanceof IDBCursor&&pw.set(s,n)}).catch(()=>{}),pp.set(e,n),e}function hC(n){if(Tm.has(n))return;const e=new Promise((s,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{s(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Tm.set(n,e)}let Pm={get(n,e,s){if(n instanceof IDBTransaction){if(e==="done")return Tm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gw.get(n);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return hi(n[e])},set(n,e,s){return n[e]=s,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function fC(n){Pm=n(Pm)}function mC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=n.call(Jf(this),e,...s);return gw.set(r,e.sort?e.sort():[e]),hi(r)}:dC().includes(n)?function(...e){return n.apply(Jf(this),e),hi(pw.get(this))}:function(...e){return hi(n.apply(Jf(this),e))}}function pC(n){return typeof n=="function"?mC(n):(n instanceof IDBTransaction&&hC(n),lC(n,cC())?new Proxy(n,Pm):n)}function hi(n){if(n instanceof IDBRequest)return uC(n);if(Kf.has(n))return Kf.get(n);const e=pC(n);return e!==n&&(Kf.set(n,e),pp.set(e,n)),e}const Jf=n=>pp.get(n);function Zu(n,e,{blocked:s,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(n,e),u=hi(c);return r&&c.addEventListener("upgradeneeded",f=>{r(hi(c.result),f.oldVersion,f.newVersion,hi(c.transaction),f)}),s&&c.addEventListener("blocked",f=>s(f.oldVersion,f.newVersion,f)),u.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}function Yf(n,{blocked:e}={}){const s=indexedDB.deleteDatabase(n);return e&&s.addEventListener("blocked",r=>e(r.oldVersion,r)),hi(s).then(()=>{})}const gC=["get","getKey","getAll","getAllKeys","count"],xC=["put","add","delete","clear"],Zf=new Map;function Wx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zf.get(e))return Zf.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,i=xC.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gC.includes(s)))return;const o=async function(c,...u){const f=this.transaction(c,i?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[s](...u),i&&f.done]))[0]};return Zf.set(e,o),o}fC(n=>({...n,get:(e,s,r)=>Wx(e,s)||n.get(e,s,r),has:(e,s)=>!!Wx(e,s)||n.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(bC(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function bC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Am="@firebase/app",Hx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new Yu("@firebase/app"),vC="@firebase/app-compat",wC="@firebase/analytics-compat",NC="@firebase/analytics",jC="@firebase/app-check-compat",SC="@firebase/app-check",kC="@firebase/auth",_C="@firebase/auth-compat",CC="@firebase/database",EC="@firebase/data-connect",TC="@firebase/database-compat",PC="@firebase/functions",AC="@firebase/functions-compat",IC="@firebase/installations",RC="@firebase/installations-compat",DC="@firebase/messaging",MC="@firebase/messaging-compat",OC="@firebase/performance",LC="@firebase/performance-compat",zC="@firebase/remote-config",UC="@firebase/remote-config-compat",FC="@firebase/storage",$C="@firebase/storage-compat",VC="@firebase/firestore",BC="@firebase/ai",qC="@firebase/firestore-compat",WC="firebase",HC="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]",GC={[Am]:"fire-core",[vC]:"fire-core-compat",[NC]:"fire-analytics",[wC]:"fire-analytics-compat",[SC]:"fire-app-check",[jC]:"fire-app-check-compat",[kC]:"fire-auth",[_C]:"fire-auth-compat",[CC]:"fire-rtdb",[EC]:"fire-data-connect",[TC]:"fire-rtdb-compat",[PC]:"fire-fn",[AC]:"fire-fn-compat",[IC]:"fire-iid",[RC]:"fire-iid-compat",[DC]:"fire-fcm",[MC]:"fire-fcm-compat",[OC]:"fire-perf",[LC]:"fire-perf-compat",[zC]:"fire-rc",[UC]:"fire-rc-compat",[FC]:"fire-gcs",[$C]:"fire-gcs-compat",[VC]:"fire-fst",[qC]:"fire-fst-compat",[BC]:"fire-vertex","fire-js":"fire-js",[WC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new Map,KC=new Map,Rm=new Map;function Gx(n,e){try{n.container.addComponent(e)}catch(s){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,s)}}function Nn(n){const e=n.name;if(Rm.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;Rm.set(e,n);for(const s of ju.values())Gx(s,n);for(const s of KC.values())Gx(s,n);return!0}function Vr(n,e){const s=n.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),n.container.getProvider(e)}function Wn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ta=new ca("app","Firebase",JC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,s,r){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ta.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=HC;function xw(n,e={}){let s=n;typeof e!="object"&&(e={name:e});const r={name:Im,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ta.create("bad-app-name",{appName:String(i)});if(s||(s=dw()),!s)throw ta.create("no-options");const o=ju.get(i);if(o){if(na(s,o.options)&&na(r,o.config))return o;throw ta.create("duplicate-app",{appName:i})}const c=new nC(i);for(const f of Rm.values())c.addComponent(f);const u=new YC(s,r,c);return ju.set(i,u),u}function cl(n=Im){const e=ju.get(n);if(!e&&n===Im&&dw())return xw();if(!e)throw ta.create("no-app",{appName:n});return e}function Ds(n,e,s){let r=GC[n]??n;s&&(r+=`-${s}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(c.join(" "));return}Nn(new cn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="firebase-heartbeat-database",XC=1,yc="firebase-heartbeat-store";let Xf=null;function yw(){return Xf||(Xf=Zu(ZC,XC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yc)}catch(s){console.warn(s)}}}}).catch(n=>{throw ta.create("idb-open",{originalErrorMessage:n.message})})),Xf}async function QC(n){try{const s=(await yw()).transaction(yc),r=await s.objectStore(yc).get(bw(n));return await s.done,r}catch(e){if(e instanceof Hn)mi.warn(e.message);else{const s=ta.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mi.warn(s.message)}}}async function Kx(n,e){try{const r=(await yw()).transaction(yc,"readwrite");await r.objectStore(yc).put(e,bw(n)),await r.done}catch(s){if(s instanceof Hn)mi.warn(s.message);else{const r=ta.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});mi.warn(r.message)}}}function bw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=1024,tE=30;class sE{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new rE(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Jx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>tE){const c=iE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=Jx(),{heartbeatsToSend:r,unsentEntries:i}=nE(this._heartbeatsCache.heartbeats),o=Nu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(s){return mi.warn(s),""}}}function Jx(){return new Date().toISOString().substring(0,10)}function nE(n,e=eE){const s=[];let r=n.slice();for(const i of n){const o=s.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),Yx(s)>e){o.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),Yx(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class rE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fp()?mp().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await QC(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Kx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Kx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Yx(n){return Nu(JSON.stringify({version:2,heartbeats:n})).length}function iE(n){if(n.length===0)return-1;let e=0,s=n[0].date;for(let r=1;r<n.length;r++)n[r].date<s&&(s=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(n){Nn(new cn("platform-logger",e=>new yC(e),"PRIVATE")),Nn(new cn("heartbeat",e=>new sE(e),"PRIVATE")),Ds(Am,Hx,n),Ds(Am,Hx,"esm2020"),Ds("fire-js","")}aE("");var oE="firebase",lE="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ds(oE,lE,"app");var Zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gp;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,k){function E(){}E.prototype=k.prototype,I.F=k.prototype,I.prototype=new E,I.prototype.constructor=I,I.D=function(L,O,B){for(var A=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)A[ne-2]=arguments[ne];return k.prototype[O].apply(L,A)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,k,E){E||(E=0);const L=Array(16);if(typeof k=="string")for(var O=0;O<16;++O)L[O]=k.charCodeAt(E++)|k.charCodeAt(E++)<<8|k.charCodeAt(E++)<<16|k.charCodeAt(E++)<<24;else for(O=0;O<16;++O)L[O]=k[E++]|k[E++]<<8|k[E++]<<16|k[E++]<<24;k=I.g[0],E=I.g[1],O=I.g[2];let B=I.g[3],A;A=k+(B^E&(O^B))+L[0]+3614090360&4294967295,k=E+(A<<7&4294967295|A>>>25),A=B+(O^k&(E^O))+L[1]+3905402710&4294967295,B=k+(A<<12&4294967295|A>>>20),A=O+(E^B&(k^E))+L[2]+606105819&4294967295,O=B+(A<<17&4294967295|A>>>15),A=E+(k^O&(B^k))+L[3]+3250441966&4294967295,E=O+(A<<22&4294967295|A>>>10),A=k+(B^E&(O^B))+L[4]+4118548399&4294967295,k=E+(A<<7&4294967295|A>>>25),A=B+(O^k&(E^O))+L[5]+1200080426&4294967295,B=k+(A<<12&4294967295|A>>>20),A=O+(E^B&(k^E))+L[6]+2821735955&4294967295,O=B+(A<<17&4294967295|A>>>15),A=E+(k^O&(B^k))+L[7]+4249261313&4294967295,E=O+(A<<22&4294967295|A>>>10),A=k+(B^E&(O^B))+L[8]+1770035416&4294967295,k=E+(A<<7&4294967295|A>>>25),A=B+(O^k&(E^O))+L[9]+2336552879&4294967295,B=k+(A<<12&4294967295|A>>>20),A=O+(E^B&(k^E))+L[10]+4294925233&4294967295,O=B+(A<<17&4294967295|A>>>15),A=E+(k^O&(B^k))+L[11]+2304563134&4294967295,E=O+(A<<22&4294967295|A>>>10),A=k+(B^E&(O^B))+L[12]+1804603682&4294967295,k=E+(A<<7&4294967295|A>>>25),A=B+(O^k&(E^O))+L[13]+4254626195&4294967295,B=k+(A<<12&4294967295|A>>>20),A=O+(E^B&(k^E))+L[14]+2792965006&4294967295,O=B+(A<<17&4294967295|A>>>15),A=E+(k^O&(B^k))+L[15]+1236535329&4294967295,E=O+(A<<22&4294967295|A>>>10),A=k+(O^B&(E^O))+L[1]+4129170786&4294967295,k=E+(A<<5&4294967295|A>>>27),A=B+(E^O&(k^E))+L[6]+3225465664&4294967295,B=k+(A<<9&4294967295|A>>>23),A=O+(k^E&(B^k))+L[11]+643717713&4294967295,O=B+(A<<14&4294967295|A>>>18),A=E+(B^k&(O^B))+L[0]+3921069994&4294967295,E=O+(A<<20&4294967295|A>>>12),A=k+(O^B&(E^O))+L[5]+3593408605&4294967295,k=E+(A<<5&4294967295|A>>>27),A=B+(E^O&(k^E))+L[10]+38016083&4294967295,B=k+(A<<9&4294967295|A>>>23),A=O+(k^E&(B^k))+L[15]+3634488961&4294967295,O=B+(A<<14&4294967295|A>>>18),A=E+(B^k&(O^B))+L[4]+3889429448&4294967295,E=O+(A<<20&4294967295|A>>>12),A=k+(O^B&(E^O))+L[9]+568446438&4294967295,k=E+(A<<5&4294967295|A>>>27),A=B+(E^O&(k^E))+L[14]+3275163606&4294967295,B=k+(A<<9&4294967295|A>>>23),A=O+(k^E&(B^k))+L[3]+4107603335&4294967295,O=B+(A<<14&4294967295|A>>>18),A=E+(B^k&(O^B))+L[8]+1163531501&4294967295,E=O+(A<<20&4294967295|A>>>12),A=k+(O^B&(E^O))+L[13]+2850285829&4294967295,k=E+(A<<5&4294967295|A>>>27),A=B+(E^O&(k^E))+L[2]+4243563512&4294967295,B=k+(A<<9&4294967295|A>>>23),A=O+(k^E&(B^k))+L[7]+1735328473&4294967295,O=B+(A<<14&4294967295|A>>>18),A=E+(B^k&(O^B))+L[12]+2368359562&4294967295,E=O+(A<<20&4294967295|A>>>12),A=k+(E^O^B)+L[5]+4294588738&4294967295,k=E+(A<<4&4294967295|A>>>28),A=B+(k^E^O)+L[8]+2272392833&4294967295,B=k+(A<<11&4294967295|A>>>21),A=O+(B^k^E)+L[11]+1839030562&4294967295,O=B+(A<<16&4294967295|A>>>16),A=E+(O^B^k)+L[14]+4259657740&4294967295,E=O+(A<<23&4294967295|A>>>9),A=k+(E^O^B)+L[1]+2763975236&4294967295,k=E+(A<<4&4294967295|A>>>28),A=B+(k^E^O)+L[4]+1272893353&4294967295,B=k+(A<<11&4294967295|A>>>21),A=O+(B^k^E)+L[7]+4139469664&4294967295,O=B+(A<<16&4294967295|A>>>16),A=E+(O^B^k)+L[10]+3200236656&4294967295,E=O+(A<<23&4294967295|A>>>9),A=k+(E^O^B)+L[13]+681279174&4294967295,k=E+(A<<4&4294967295|A>>>28),A=B+(k^E^O)+L[0]+3936430074&4294967295,B=k+(A<<11&4294967295|A>>>21),A=O+(B^k^E)+L[3]+3572445317&4294967295,O=B+(A<<16&4294967295|A>>>16),A=E+(O^B^k)+L[6]+76029189&4294967295,E=O+(A<<23&4294967295|A>>>9),A=k+(E^O^B)+L[9]+3654602809&4294967295,k=E+(A<<4&4294967295|A>>>28),A=B+(k^E^O)+L[12]+3873151461&4294967295,B=k+(A<<11&4294967295|A>>>21),A=O+(B^k^E)+L[15]+530742520&4294967295,O=B+(A<<16&4294967295|A>>>16),A=E+(O^B^k)+L[2]+3299628645&4294967295,E=O+(A<<23&4294967295|A>>>9),A=k+(O^(E|~B))+L[0]+4096336452&4294967295,k=E+(A<<6&4294967295|A>>>26),A=B+(E^(k|~O))+L[7]+1126891415&4294967295,B=k+(A<<10&4294967295|A>>>22),A=O+(k^(B|~E))+L[14]+2878612391&4294967295,O=B+(A<<15&4294967295|A>>>17),A=E+(B^(O|~k))+L[5]+4237533241&4294967295,E=O+(A<<21&4294967295|A>>>11),A=k+(O^(E|~B))+L[12]+1700485571&4294967295,k=E+(A<<6&4294967295|A>>>26),A=B+(E^(k|~O))+L[3]+2399980690&4294967295,B=k+(A<<10&4294967295|A>>>22),A=O+(k^(B|~E))+L[10]+4293915773&4294967295,O=B+(A<<15&4294967295|A>>>17),A=E+(B^(O|~k))+L[1]+2240044497&4294967295,E=O+(A<<21&4294967295|A>>>11),A=k+(O^(E|~B))+L[8]+1873313359&4294967295,k=E+(A<<6&4294967295|A>>>26),A=B+(E^(k|~O))+L[15]+4264355552&4294967295,B=k+(A<<10&4294967295|A>>>22),A=O+(k^(B|~E))+L[6]+2734768916&4294967295,O=B+(A<<15&4294967295|A>>>17),A=E+(B^(O|~k))+L[13]+1309151649&4294967295,E=O+(A<<21&4294967295|A>>>11),A=k+(O^(E|~B))+L[4]+4149444226&4294967295,k=E+(A<<6&4294967295|A>>>26),A=B+(E^(k|~O))+L[11]+3174756917&4294967295,B=k+(A<<10&4294967295|A>>>22),A=O+(k^(B|~E))+L[2]+718787259&4294967295,O=B+(A<<15&4294967295|A>>>17),A=E+(B^(O|~k))+L[9]+3951481745&4294967295,I.g[0]=I.g[0]+k&4294967295,I.g[1]=I.g[1]+(O+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+O&4294967295,I.g[3]=I.g[3]+B&4294967295}r.prototype.v=function(I,k){k===void 0&&(k=I.length);const E=k-this.blockSize,L=this.C;let O=this.h,B=0;for(;B<k;){if(O==0)for(;B<=E;)i(this,I,B),B+=this.blockSize;if(typeof I=="string"){for(;B<k;)if(L[O++]=I.charCodeAt(B++),O==this.blockSize){i(this,L),O=0;break}}else for(;B<k;)if(L[O++]=I[B++],O==this.blockSize){i(this,L),O=0;break}}this.h=O,this.o+=k},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var k=1;k<I.length-8;++k)I[k]=0;k=this.o*8;for(var E=I.length-8;E<I.length;++E)I[E]=k&255,k/=256;for(this.v(I),I=Array(16),k=0,E=0;E<4;++E)for(let L=0;L<32;L+=8)I[k++]=this.g[E]>>>L&255;return I};function o(I,k){var E=u;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=k(I)}function c(I,k){this.h=k;const E=[];let L=!0;for(let O=I.length-1;O>=0;O--){const B=I[O]|0;L&&B==k||(E[O]=B,L=!1)}this.g=E}var u={};function f(I){return-128<=I&&I<128?o(I,function(k){return new c([k|0],k<0?-1:0)}):new c([I|0],I<0?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return v;if(I<0)return R(h(-I));const k=[];let E=1;for(let L=0;I>=E;L++)k[L]=I/E|0,E*=4294967296;return new c(k,0)}function x(I,k){if(I.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(I.charAt(0)=="-")return R(x(I.substring(1),k));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=h(Math.pow(k,8));let L=v;for(let B=0;B<I.length;B+=8){var O=Math.min(8,I.length-B);const A=parseInt(I.substring(B,B+O),k);O<8?(O=h(Math.pow(k,O)),L=L.j(O).add(h(A))):(L=L.j(E),L=L.add(h(A)))}return L}var v=f(0),N=f(1),T=f(16777216);n=c.prototype,n.m=function(){if(C(this))return-R(this).m();let I=0,k=1;for(let E=0;E<this.g.length;E++){const L=this.i(E);I+=(L>=0?L:4294967296+L)*k,k*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(C(this))return"-"+R(this).toString(I);const k=h(Math.pow(I,6));var E=this;let L="";for(;;){const O=Z(E,k).g;E=z(E,O.j(k));let B=((E.g.length>0?E.g[0]:E.h)>>>0).toString(I);if(E=O,_(E))return B+L;for(;B.length<6;)B="0"+B;L=B+L}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(let k=0;k<I.g.length;k++)if(I.g[k]!=0)return!1;return!0}function C(I){return I.h==-1}n.l=function(I){return I=z(this,I),C(I)?-1:_(I)?0:1};function R(I){const k=I.g.length,E=[];for(let L=0;L<k;L++)E[L]=~I.g[L];return new c(E,~I.h).add(N)}n.abs=function(){return C(this)?R(this):this},n.add=function(I){const k=Math.max(this.g.length,I.g.length),E=[];let L=0;for(let O=0;O<=k;O++){let B=L+(this.i(O)&65535)+(I.i(O)&65535),A=(B>>>16)+(this.i(O)>>>16)+(I.i(O)>>>16);L=A>>>16,B&=65535,A&=65535,E[O]=A<<16|B}return new c(E,E[E.length-1]&-2147483648?-1:0)};function z(I,k){return I.add(R(k))}n.j=function(I){if(_(this)||_(I))return v;if(C(this))return C(I)?R(this).j(R(I)):R(R(this).j(I));if(C(I))return R(this.j(R(I)));if(this.l(T)<0&&I.l(T)<0)return h(this.m()*I.m());const k=this.g.length+I.g.length,E=[];for(var L=0;L<2*k;L++)E[L]=0;for(L=0;L<this.g.length;L++)for(let O=0;O<I.g.length;O++){const B=this.i(L)>>>16,A=this.i(L)&65535,ne=I.i(O)>>>16,fe=I.i(O)&65535;E[2*L+2*O]+=A*fe,$(E,2*L+2*O),E[2*L+2*O+1]+=B*fe,$(E,2*L+2*O+1),E[2*L+2*O+1]+=A*ne,$(E,2*L+2*O+1),E[2*L+2*O+2]+=B*ne,$(E,2*L+2*O+2)}for(I=0;I<k;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=k;I<2*k;I++)E[I]=0;return new c(E,0)};function $(I,k){for(;(I[k]&65535)!=I[k];)I[k+1]+=I[k]>>>16,I[k]&=65535,k++}function U(I,k){this.g=I,this.h=k}function Z(I,k){if(_(k))throw Error("division by zero");if(_(I))return new U(v,v);if(C(I))return k=Z(R(I),k),new U(R(k.g),R(k.h));if(C(k))return k=Z(I,R(k)),new U(R(k.g),k.h);if(I.g.length>30){if(C(I)||C(k))throw Error("slowDivide_ only works with positive integers.");for(var E=N,L=k;L.l(I)<=0;)E=q(E),L=q(L);var O=V(E,1),B=V(L,1);for(L=V(L,2),E=V(E,2);!_(L);){var A=B.add(L);A.l(I)<=0&&(O=O.add(E),B=A),L=V(L,1),E=V(E,1)}return k=z(I,O.j(k)),new U(O,k)}for(O=v;I.l(k)>=0;){for(E=Math.max(1,Math.floor(I.m()/k.m())),L=Math.ceil(Math.log(E)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),B=h(E),A=B.j(k);C(A)||A.l(I)>0;)E-=L,B=h(E),A=B.j(k);_(B)&&(B=N),O=O.add(B),I=z(I,A)}return new U(O,I)}n.B=function(I){return Z(this,I).h},n.and=function(I){const k=Math.max(this.g.length,I.g.length),E=[];for(let L=0;L<k;L++)E[L]=this.i(L)&I.i(L);return new c(E,this.h&I.h)},n.or=function(I){const k=Math.max(this.g.length,I.g.length),E=[];for(let L=0;L<k;L++)E[L]=this.i(L)|I.i(L);return new c(E,this.h|I.h)},n.xor=function(I){const k=Math.max(this.g.length,I.g.length),E=[];for(let L=0;L<k;L++)E[L]=this.i(L)^I.i(L);return new c(E,this.h^I.h)};function q(I){const k=I.g.length+1,E=[];for(let L=0;L<k;L++)E[L]=I.i(L)<<1|I.i(L-1)>>>31;return new c(E,I.h)}function V(I,k){const E=k>>5;k%=32;const L=I.g.length-E,O=[];for(let B=0;B<L;B++)O[B]=k>0?I.i(B+E)>>>k|I.i(B+E+1)<<32-k:I.i(B+E);return new c(O,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=x,gp=c}).apply(typeof Zx<"u"?Zx:typeof self<"u"?self:typeof window<"u"?window:{});var Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var n,e=Object.defineProperty;function s(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zd=="object"&&Zd];for(var j=0;j<m.length;++j){var P=m[j];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=s(this);function i(m,j){if(j)e:{var P=r;m=m.split(".");for(var F=0;F<m.length-1;F++){var de=m[F];if(!(de in P))break e;P=P[de]}m=m[m.length-1],F=P[m],j=j(F),j!=F&&j!=null&&e(P,m,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(j){var P=[],F;for(F in j)Object.prototype.hasOwnProperty.call(j,F)&&P.push([F,j[F]]);return P}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(m){var j=typeof m;return j=="object"&&m!=null||j=="function"}function f(m,j,P){return m.call.apply(m.bind,arguments)}function h(m,j,P){return h=f,h.apply(null,arguments)}function x(m,j){var P=Array.prototype.slice.call(arguments,1);return function(){var F=P.slice();return F.push.apply(F,arguments),m.apply(this,F)}}function v(m,j){function P(){}P.prototype=j.prototype,m.Z=j.prototype,m.prototype=new P,m.prototype.constructor=m,m.Ob=function(F,de,ge){for(var Fe=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)Fe[vt-2]=arguments[vt];return j.prototype[de].apply(F,Fe)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function T(m){const j=m.length;if(j>0){const P=Array(j);for(let F=0;F<j;F++)P[F]=m[F];return P}return[]}function _(m,j){for(let F=1;F<arguments.length;F++){const de=arguments[F];var P=typeof de;if(P=P!="object"?P:de?Array.isArray(de)?"array":P:"null",P=="array"||P=="object"&&typeof de.length=="number"){P=m.length||0;const ge=de.length||0;m.length=P+ge;for(let Fe=0;Fe<ge;Fe++)m[P+Fe]=de[Fe]}else m.push(de)}}class C{constructor(j,P){this.i=j,this.j=P,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function R(m){c.setTimeout(()=>{throw m},0)}function z(){var m=I;let j=null;return m.g&&(j=m.g,m.g=m.g.next,m.g||(m.h=null),j.next=null),j}class ${constructor(){this.h=this.g=null}add(j,P){const F=U.get();F.set(j,P),this.h?this.h.next=F:this.g=F,this.h=F}}var U=new C(()=>new Z,m=>m.reset());class Z{constructor(){this.next=this.g=this.h=null}set(j,P){this.h=j,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let q,V=!1,I=new $,k=()=>{const m=Promise.resolve(void 0);q=()=>{m.then(E)}};function E(){for(var m;m=z();){try{m.h.call(m.g)}catch(P){R(P)}var j=U;j.j(m),j.h<100&&(j.h++,m.next=j.g,j.g=m)}V=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(m,j){this.type=m,this.g=this.target=j,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,j=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const P=()=>{};c.addEventListener("test",P,j),c.removeEventListener("test",P,j)}catch{}return m})();function A(m){return/^[\s\xa0]*$/.test(m)}function ne(m,j){O.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,j)}v(ne,O),ne.prototype.init=function(m,j){const P=this.type=m.type,F=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=j,j=m.relatedTarget,j||(P=="mouseover"?j=m.fromElement:P=="mouseout"&&(j=m.toElement)),this.relatedTarget=j,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),ke=0;function De(m,j,P,F,de){this.listener=m,this.proxy=null,this.src=j,this.type=P,this.capture=!!F,this.ha=de,this.key=++ke,this.da=this.fa=!1}function oe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function be(m,j,P){for(const F in m)j.call(P,m[F],F,m)}function ve(m,j){for(const P in m)j.call(void 0,m[P],P,m)}function X(m){const j={};for(const P in m)j[P]=m[P];return j}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(m,j){let P,F;for(let de=1;de<arguments.length;de++){F=arguments[de];for(P in F)m[P]=F[P];for(let ge=0;ge<ue.length;ge++)P=ue[ge],Object.prototype.hasOwnProperty.call(F,P)&&(m[P]=F[P])}}function xe(m){this.src=m,this.g={},this.h=0}xe.prototype.add=function(m,j,P,F,de){const ge=m.toString();m=this.g[ge],m||(m=this.g[ge]=[],this.h++);const Fe=Pe(m,j,F,de);return Fe>-1?(j=m[Fe],P||(j.fa=!1)):(j=new De(j,this.src,ge,!!F,de),j.fa=P,m.push(j)),j};function H(m,j){const P=j.type;if(P in m.g){var F=m.g[P],de=Array.prototype.indexOf.call(F,j,void 0),ge;(ge=de>=0)&&Array.prototype.splice.call(F,de,1),ge&&(oe(j),m.g[P].length==0&&(delete m.g[P],m.h--))}}function Pe(m,j,P,F){for(let de=0;de<m.length;++de){const ge=m[de];if(!ge.da&&ge.listener==j&&ge.capture==!!P&&ge.ha==F)return de}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),Ue={};function Xe(m,j,P,F,de){if(Array.isArray(j)){for(let ge=0;ge<j.length;ge++)Xe(m,j[ge],P,F,de);return null}return P=Be(P),m&&m[fe]?m.J(j,P,u(F)?!!F.capture:!1,de):rt(m,j,P,!1,F,de)}function rt(m,j,P,F,de,ge){if(!j)throw Error("Invalid event type");const Fe=u(de)?!!de.capture:!!de;let vt=ie(m);if(vt||(m[Te]=vt=new xe(m)),P=vt.add(j,P,F,Fe,ge),P.proxy)return P;if(F=zt(),P.proxy=F,F.src=m,F.listener=P,m.addEventListener)B||(de=Fe),de===void 0&&(de=!1),m.addEventListener(j.toString(),F,de);else if(m.attachEvent)m.attachEvent(Qe(j.toString()),F);else if(m.addListener&&m.removeListener)m.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return P}function zt(){function m(P){return j.call(m.src,m.listener,P)}const j=ut;return m}function we(m,j,P,F,de){if(Array.isArray(j))for(var ge=0;ge<j.length;ge++)we(m,j[ge],P,F,de);else F=u(F)?!!F.capture:!!F,P=Be(P),m&&m[fe]?(m=m.i,ge=String(j).toString(),ge in m.g&&(j=m.g[ge],P=Pe(j,P,F,de),P>-1&&(oe(j[P]),Array.prototype.splice.call(j,P,1),j.length==0&&(delete m.g[ge],m.h--)))):m&&(m=ie(m))&&(j=m.g[j.toString()],m=-1,j&&(m=Pe(j,P,F,de)),(P=m>-1?j[m]:null)&&Ce(P))}function Ce(m){if(typeof m!="number"&&m&&!m.da){var j=m.src;if(j&&j[fe])H(j.i,m);else{var P=m.type,F=m.proxy;j.removeEventListener?j.removeEventListener(P,F,m.capture):j.detachEvent?j.detachEvent(Qe(P),F):j.addListener&&j.removeListener&&j.removeListener(F),(P=ie(j))?(H(P,m),P.h==0&&(P.src=null,j[Te]=null)):oe(m)}}}function Qe(m){return m in Ue?Ue[m]:Ue[m]="on"+m}function ut(m,j){if(m.da)m=!0;else{j=new ne(j,this);const P=m.listener,F=m.ha||m.src;m.fa&&Ce(m),m=P.call(F,j)}return m}function ie(m){return m=m[Te],m instanceof xe?m:null}var Se="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(m){return typeof m=="function"?m:(m[Se]||(m[Se]=function(j){return m.handleEvent(j)}),m[Se])}function Ne(){L.call(this),this.i=new xe(this),this.M=this,this.G=null}v(Ne,L),Ne.prototype[fe]=!0,Ne.prototype.removeEventListener=function(m,j,P,F){we(this,m,j,P,F)};function We(m,j){var P,F=m.G;if(F)for(P=[];F;F=F.G)P.push(F);if(m=m.M,F=j.type||j,typeof j=="string")j=new O(j,m);else if(j instanceof O)j.target=j.target||m;else{var de=j;j=new O(F,m),se(j,de)}de=!0;let ge,Fe;if(P)for(Fe=P.length-1;Fe>=0;Fe--)ge=j.g=P[Fe],de=jt(ge,F,!0,j)&&de;if(ge=j.g=m,de=jt(ge,F,!0,j)&&de,de=jt(ge,F,!1,j)&&de,P)for(Fe=0;Fe<P.length;Fe++)ge=j.g=P[Fe],de=jt(ge,F,!1,j)&&de}Ne.prototype.N=function(){if(Ne.Z.N.call(this),this.i){var m=this.i;for(const j in m.g){const P=m.g[j];for(let F=0;F<P.length;F++)oe(P[F]);delete m.g[j],m.h--}}this.G=null},Ne.prototype.J=function(m,j,P,F){return this.i.add(String(m),j,!1,P,F)},Ne.prototype.K=function(m,j,P,F){return this.i.add(String(m),j,!0,P,F)};function jt(m,j,P,F){if(j=m.i.g[String(j)],!j)return!0;j=j.concat();let de=!0;for(let ge=0;ge<j.length;++ge){const Fe=j[ge];if(Fe&&!Fe.da&&Fe.capture==P){const vt=Fe.listener,ss=Fe.ha||Fe.src;Fe.fa&&H(m.i,Fe),de=vt.call(ss,F)!==!1&&de}}return de&&!F.defaultPrevented}function ye(m,j){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:c.setTimeout(m,j||0)}function J(m){m.g=ye(()=>{m.g=null,m.i&&(m.i=!1,J(m))},m.l);const j=m.h;m.h=null,m.m.apply(null,j)}class _e extends L{constructor(j,P){super(),this.m=j,this.l=P,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kt(m){L.call(this),this.h=m,this.g={}}v(kt,L);var xt=[];function Wt(m){be(m.g,function(j,P){this.g.hasOwnProperty(P)&&Ce(j)},m),m.g={}}kt.prototype.N=function(){kt.Z.N.call(this),Wt(this)},kt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=c.JSON.stringify,Ss=c.JSON.parse,os=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Le(){}function fs(){}var ls={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ws(){O.call(this,"d")}v(Ws,O);function ur(){O.call(this,"c")}v(ur,O);var Ms={},Os=null;function Mn(){return Os=Os||new Ne}Ms.Ia="serverreachability";function On(m){O.call(this,Ms.Ia,m)}v(On,O);function ms(m){const j=Mn();We(j,new On(j))}Ms.STAT_EVENT="statevent";function Ls(m,j){O.call(this,Ms.STAT_EVENT,m),this.stat=j}v(Ls,O);function Vt(m){const j=Mn();We(j,new Ls(j,m))}Ms.Ja="timingevent";function ks(m,j){O.call(this,Ms.Ja,m),this.size=j}v(ks,O);function ts(m,j){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},j)}function je(){this.g=!0}je.prototype.ua=function(){this.g=!1};function Ye(m,j,P,F,de,ge){m.info(function(){if(m.g)if(ge){var Fe="",vt=ge.split("&");for(let qt=0;qt<vt.length;qt++){var ss=vt[qt].split("=");if(ss.length>1){const xs=ss[0];ss=ss[1];const zn=xs.split("_");Fe=zn.length>=2&&zn[1]=="type"?Fe+(xs+"="+ss+"&"):Fe+(xs+"=redacted&")}}}else Fe=null;else Fe=ge;return"XMLHTTP REQ ("+F+") [attempt "+de+"]: "+j+`
`+P+`
`+Fe})}function Et(m,j,P,F,de,ge,Fe){m.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+de+"]: "+j+`
`+P+`
`+ge+" "+Fe})}function Tt(m,j,P,F){m.info(function(){return"XMLHTTP TEXT ("+j+"): "+Mt(m,P)+(F?" "+F:"")})}function Rt(m,j){m.info(function(){return"TIMEOUT: "+j})}je.prototype.info=function(){};function Mt(m,j){if(!m.g)return j;if(!j)return null;try{const ge=JSON.parse(j);if(ge){for(m=0;m<ge.length;m++)if(Array.isArray(ge[m])){var P=ge[m];if(!(P.length<2)){var F=P[1];if(Array.isArray(F)&&!(F.length<1)){var de=F[0];if(de!="noop"&&de!="stop"&&de!="close")for(let Fe=1;Fe<F.length;Fe++)F[Fe]=""}}}}return $t(ge)}catch{return j}}var Ut={NO_ERROR:0,TIMEOUT:8},Bt={},Gn;function un(){}v(un,Le),un.prototype.g=function(){return new XMLHttpRequest},Gn=new un;function hn(m){return encodeURIComponent(String(m))}function hr(m){var j=1;m=m.split(":");const P=[];for(;j>0&&m.length;)P.push(m.shift()),j--;return m.length&&P.push(m.join(":")),P}function zs(m,j,P,F){this.j=m,this.i=j,this.l=P,this.S=F||1,this.V=new kt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yi}function yi(){this.i=null,this.g="",this.h=!1}var qr={},Wr={};function tn(m,j,P){m.M=1,m.A=bt(re(j)),m.u=P,m.R=!0,Hr(m,null)}function Hr(m,j){m.F=Date.now(),Ln(m),m.B=re(m.A);var P=m.B,F=m.S;Array.isArray(F)||(F=[String(F)]),vl(P.i,"t",F),m.C=0,P=m.j.L,m.h=new yi,m.g=Zc(m.j,P?j:null,!m.u),m.P>0&&(m.O=new _e(h(m.Y,m,m.g),m.P)),j=m.V,P=m.g,F=m.ba;var de="readystatechange";Array.isArray(de)||(de&&(xt[0]=de.toString()),de=xt);for(let ge=0;ge<de.length;ge++){const Fe=Xe(P,de[ge],F||j.handleEvent,!1,j.h||j);if(!Fe)break;j.g[Fe.key]=Fe}j=m.J?X(m.J):{},m.u?(m.v||(m.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,j)):(m.v="GET",m.g.ea(m.B,m.v,null,j)),ms(),Ye(m.i,m.v,m.B,m.l,m.S,m.u)}zs.prototype.ba=function(m){m=m.target;const j=this.O;j&&br(m)==3?j.j():this.Y(m)},zs.prototype.Y=function(m){try{if(m==this.g)e:{const vt=br(this.g),ss=this.g.ya(),qt=this.g.ca();if(!(vt<3)&&(vt!=3||this.g&&(this.h.h||this.g.la()||Jc(this.g)))){this.K||vt!=4||ss==7||(ss==8||qt<=0?ms(3):ms(2)),K(this);var j=this.g.ca();this.X=j;var P=bi(this);if(this.o=j==200,Et(this.i,this.v,this.B,this.l,this.S,vt,j),this.o){if(this.U&&!this.L){t:{if(this.g){var F,de=this.g;if((F=de.g?de.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(F)){var ge=F;break t}}ge=null}if(m=ge)Tt(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pe(this,m);else{this.o=!1,this.m=3,Vt(12),ae(this),Y(this);break e}}if(this.R){m=!0;let xs;for(;!this.K&&this.C<P.length;)if(xs=Gr(this,P),xs==Wr){vt==4&&(this.m=4,Vt(14),m=!1),Tt(this.i,this.l,null,"[Incomplete Response]");break}else if(xs==qr){this.m=4,Vt(15),Tt(this.i,this.l,P,"[Invalid Chunk]"),m=!1;break}else Tt(this.i,this.l,xs,null),pe(this,xs);if(fr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||P.length!=0||this.h.h||(this.m=1,Vt(16),m=!1),this.o=this.o&&m,!m)Tt(this.i,this.l,P,"[Invalid Chunked Response]"),ae(this),Y(this);else if(P.length>0&&!this.W){this.W=!0;var Fe=this.j;Fe.g==this&&Fe.aa&&!Fe.P&&(Fe.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),xa(Fe),Fe.P=!0,Vt(11))}}else Tt(this.i,this.l,P,null),pe(this,P);vt==4&&ae(this),this.o&&!this.K&&(vt==4?ho(this.j,this):(this.o=!1,Ln(this)))}else Nl(this.g),j==400&&P.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),ae(this),Y(this)}}}catch{}finally{}};function bi(m){if(!fr(m))return m.g.la();const j=Jc(m.g);if(j==="")return"";let P="";const F=j.length,de=br(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return ae(m),Y(m),"";m.h.i=new c.TextDecoder}for(let ge=0;ge<F;ge++)m.h.h=!0,P+=m.h.i.decode(j[ge],{stream:!(de&&ge==F-1)});return j.length=0,m.h.g+=P,m.C=0,m.h.g}function fr(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Gr(m,j){var P=m.C,F=j.indexOf(`
`,P);return F==-1?Wr:(P=Number(j.substring(P,F)),isNaN(P)?qr:(F+=1,F+P>j.length?Wr:(j=j.slice(F,F+P),m.C=F+P,j)))}zs.prototype.cancel=function(){this.K=!0,ae(this)};function Ln(m){m.T=Date.now()+m.H,G(m,m.H)}function G(m,j){if(m.D!=null)throw Error("WatchDog timer not null");m.D=ts(h(m.aa,m),j)}function K(m){m.D&&(c.clearTimeout(m.D),m.D=null)}zs.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Rt(this.i,this.B),this.M!=2&&(ms(),Vt(17)),ae(this),this.m=2,Y(this)):G(this,this.T-m)};function Y(m){m.j.I==0||m.K||ho(m.j,m)}function ae(m){K(m);var j=m.O;j&&typeof j.dispose=="function"&&j.dispose(),m.O=null,Wt(m.V),m.g&&(j=m.g,m.g=null,j.abort(),j.dispose())}function pe(m,j){try{var P=m.j;if(P.I!=0&&(P.g==m||Oe(P.h,m))){if(!m.L&&Oe(P.h,m)&&P.I==3){try{var F=P.Ba.g.parse(j)}catch{F=null}if(Array.isArray(F)&&F.length==3){var de=F;if(de[0]==0){e:if(!P.v){if(P.g)if(P.g.F+3e3<m.F)uo(P),Sn(P);else break e;Nr(P),Vt(18)}}else P.xa=de[1],0<P.xa-P.K&&de[2]<37500&&P.F&&P.A==0&&!P.C&&(P.C=ts(h(P.Va,P),6e3));le(P.h)<=1&&P.ta&&(P.ta=void 0)}else kn(P,11)}else if((m.L||P.g==m)&&uo(P),!A(j))for(de=P.Ba.g.parse(j),j=0;j<de.length;j++){let qt=de[j];const xs=qt[0];if(!(xs<=P.K))if(P.K=xs,qt=qt[1],P.I==2)if(qt[0]=="c"){P.M=qt[1],P.ba=qt[2];const zn=qt[3];zn!=null&&(P.ka=zn,P.j.info("VER="+P.ka));const jr=qt[4];jr!=null&&(P.za=jr,P.j.info("SVER="+P.za));const Sr=qt[5];Sr!=null&&typeof Sr=="number"&&Sr>0&&(F=1.5*Sr,P.O=F,P.j.info("backChannelRequestTimeoutMs_="+F)),F=P;const kr=m.g;if(kr){const po=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(po){var ge=F.h;ge.g||po.indexOf("spdy")==-1&&po.indexOf("quic")==-1&&po.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(ht(ge,ge.h),ge.h=null))}if(F.G){const kl=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;kl&&(F.wa=kl,Je(F.J,F.G,kl))}}P.I=3,P.l&&P.l.ra(),P.aa&&(P.T=Date.now()-m.F,P.j.info("Handshake RTT: "+P.T+"ms")),F=P;var Fe=m;if(F.na=Sl(F,F.L?F.ba:null,F.W),Fe.L){it(F.h,Fe);var vt=Fe,ss=F.O;ss&&(vt.H=ss),vt.D&&(K(vt),Ln(vt)),F.g=Fe}else Hs(F);P.i.length>0&&Xr(P)}else qt[0]!="stop"&&qt[0]!="close"||kn(P,7);else P.I==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?kn(P,7):lo(P):qt[0]!="noop"&&P.l&&P.l.qa(qt),P.A=0)}}ms(4)}catch{}}var Ge=class{constructor(m,j){this.g=m,this.map=j}};function lt(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function te(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function le(m){return m.h?1:m.g?m.g.size:0}function Oe(m,j){return m.h?m.h==j:m.g?m.g.has(j):!1}function ht(m,j){m.g?m.g.add(j):m.h=j}function it(m,j){m.h&&m.h==j?m.h=null:m.g&&m.g.has(j)&&m.g.delete(j)}lt.prototype.cancel=function(){if(this.i=gt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function gt(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let j=m.i;for(const P of m.g.values())j=j.concat(P.G);return j}return T(m.i)}var Ht=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _t(m,j){if(m){m=m.split("&");for(let P=0;P<m.length;P++){const F=m[P].indexOf("=");let de,ge=null;F>=0?(de=m[P].substring(0,F),ge=m[P].substring(F+1)):de=m[P],j(de,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function D(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;m instanceof D?(this.l=m.l,$e(this,m.j),this.o=m.o,this.g=m.g,Ee(this,m.u),this.h=m.h,Ve(this,wl(m.i)),this.m=m.m):m&&(j=String(m).match(Ht))?(this.l=!1,$e(this,j[1]||"",!0),this.o=Yt(j[2]||""),this.g=Yt(j[3]||"",!0),Ee(this,j[4]),this.h=Yt(j[5]||"",!0),Ve(this,j[6]||"",!0),this.m=Yt(j[7]||"")):(this.l=!1,this.i=new Ct(null,this.l))}D.prototype.toString=function(){const m=[];var j=this.j;j&&m.push(mr(j,vi,!0),":");var P=this.g;return(P||j=="file")&&(m.push("//"),(j=this.o)&&m.push(mr(j,vi,!0),"@"),m.push(hn(P).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.u,P!=null&&m.push(":",String(P))),(P=this.h)&&(this.g&&P.charAt(0)!="/"&&m.push("/"),m.push(mr(P,P.charAt(0)=="/"?ma:gl,!0))),(P=this.i.toString())&&m.push("?",P),(P=this.m)&&m.push("#",mr(P,xl)),m.join("")},D.prototype.resolve=function(m){const j=re(this);let P=!!m.j;P?$e(j,m.j):P=!!m.o,P?j.o=m.o:P=!!m.g,P?j.g=m.g:P=m.u!=null;var F=m.h;if(P)Ee(j,m.u);else if(P=!!m.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var de=j.h.lastIndexOf("/");de!=-1&&(F=j.h.slice(0,de+1)+F)}if(de=F,de==".."||de==".")F="";else if(de.indexOf("./")!=-1||de.indexOf("/.")!=-1){F=de.lastIndexOf("/",0)==0,de=de.split("/");const ge=[];for(let Fe=0;Fe<de.length;){const vt=de[Fe++];vt=="."?F&&Fe==de.length&&ge.push(""):vt==".."?((ge.length>1||ge.length==1&&ge[0]!="")&&ge.pop(),F&&Fe==de.length&&ge.push("")):(ge.push(vt),F=!0)}F=ge.join("/")}else F=de}return P?j.h=F:P=m.i.toString()!=="",P?Ve(j,wl(m.i)):P=!!m.m,P&&(j.m=m.m),j};function re(m){return new D(m)}function $e(m,j,P){m.j=P?Yt(j,!0):j,m.j&&(m.j=m.j.replace(/:$/,""))}function Ee(m,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);m.u=j}else m.u=null}function Ve(m,j,P){j instanceof Ct?(m.i=j,io(m.i,m.l)):(P||(j=mr(j,lh)),m.i=new Ct(j,m.l))}function Je(m,j,P){m.i.set(j,P)}function bt(m){return Je(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Yt(m,j){return m?j?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function mr(m,j,P){return typeof m=="string"?(m=encodeURI(m).replace(j,Kr),P&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Kr(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var vi=/[#\/\?@]/g,gl=/[#\?:]/g,ma=/[#\?]/g,lh=/[#\?@]/g,xl=/#/g;function Ct(m,j){this.h=this.g=null,this.i=m||null,this.j=!!j}function pr(m){m.g||(m.g=new Map,m.h=0,m.i&&_t(m.i,function(j,P){m.add(decodeURIComponent(j.replace(/\+/g," ")),P)}))}n=Ct.prototype,n.add=function(m,j){pr(this),this.i=null,m=gr(this,m);let P=this.g.get(m);return P||this.g.set(m,P=[]),P.push(j),this.h+=1,this};function yl(m,j){pr(m),j=gr(m,j),m.g.has(j)&&(m.i=null,m.h-=m.g.get(j).length,m.g.delete(j))}function ro(m,j){return pr(m),j=gr(m,j),m.g.has(j)}n.forEach=function(m,j){pr(this),this.g.forEach(function(P,F){P.forEach(function(de){m.call(j,de,F,this)},this)},this)};function bl(m,j){pr(m);let P=[];if(typeof j=="string")ro(m,j)&&(P=P.concat(m.g.get(gr(m,j))));else for(m=Array.from(m.g.values()),j=0;j<m.length;j++)P=P.concat(m[j]);return P}n.set=function(m,j){return pr(this),this.i=null,m=gr(this,m),ro(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[j]),this.h+=1,this},n.get=function(m,j){return m?(m=bl(this,m),m.length>0?String(m[0]):j):j};function vl(m,j,P){yl(m,j),P.length>0&&(m.i=null,m.g.set(gr(m,j),T(P)),m.h+=P.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],j=Array.from(this.g.keys());for(let F=0;F<j.length;F++){var P=j[F];const de=hn(P);P=bl(this,P);for(let ge=0;ge<P.length;ge++){let Fe=de;P[ge]!==""&&(Fe+="="+hn(P[ge])),m.push(Fe)}}return this.i=m.join("&")};function wl(m){const j=new Ct;return j.i=m.i,m.g&&(j.g=new Map(m.g),j.h=m.h),j}function gr(m,j){return j=String(j),m.j&&(j=j.toLowerCase()),j}function io(m,j){j&&!m.j&&(pr(m),m.i=null,m.g.forEach(function(P,F){const de=F.toLowerCase();F!=de&&(yl(this,F),vl(this,de,P))},m)),m.j=j}function xr(m,j){const P=new je;if(c.Image){const F=new Image;F.onload=x(Us,P,"TestLoadImage: loaded",!0,j,F),F.onerror=x(Us,P,"TestLoadImage: error",!1,j,F),F.onabort=x(Us,P,"TestLoadImage: abort",!1,j,F),F.ontimeout=x(Us,P,"TestLoadImage: timeout",!1,j,F),c.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=m}else j(!1)}function yr(m,j){const P=new je,F=new AbortController,de=setTimeout(()=>{F.abort(),Us(P,"TestPingServer: timeout",!1,j)},1e4);fetch(m,{signal:F.signal}).then(ge=>{clearTimeout(de),ge.ok?Us(P,"TestPingServer: ok",!0,j):Us(P,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(de),Us(P,"TestPingServer: error",!1,j)})}function Us(m,j,P,F,de){try{de&&(de.onload=null,de.onerror=null,de.onabort=null,de.ontimeout=null),F(P)}catch{}}function pa(){this.g=new os}function Jr(m){this.i=m.Sb||null,this.h=m.ab||!1}v(Jr,Le),Jr.prototype.g=function(){return new jn(this.i,this.h)};function jn(m,j){Ne.call(this),this.H=m,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(jn,Ne),n=jn.prototype,n.open=function(m,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=j,this.readyState=1,Kn(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(j.body=m),(this.H||c).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Kn(this)),this.g&&(this.readyState=3,Kn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hc(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hc(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var j=m.value?m.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!m.done}))&&(this.response=this.responseText+=j)}m.done?wi(this):Kn(this),this.readyState==3&&Hc(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,wi(this))},n.Na=function(m){this.g&&(this.response=m,wi(this))},n.ga=function(){this.g&&wi(this)};function wi(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Kn(m)}n.setRequestHeader=function(m,j){this.A.append(m,j)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],j=this.h.entries();for(var P=j.next();!P.done;)P=P.value,m.push(P[0]+": "+P[1]),P=j.next();return m.join(`\r
`)};function Kn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Gc(m){let j="";return be(m,function(P,F){j+=F,j+=":",j+=P,j+=`\r
`}),j}function ao(m,j,P){e:{for(F in P){var F=!1;break e}F=!0}F||(P=Gc(P),typeof m=="string"?P!=null&&hn(P):Je(m,j,P))}function Gt(m){Ne.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Gt,Ne);var Kc=/^https?$/i,ch=["POST","PUT"];n=Gt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,j,P,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);j=j?j.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gn.g(),this.g.onreadystatechange=N(h(this.Ca,this));try{this.B=!0,this.g.open(j,String(m),!0),this.B=!1}catch(ge){Ni(this,ge);return}if(m=P||"",P=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var de in F)P.set(de,F[de]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ge of F.keys())P.set(ge,F.get(ge));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(P.keys()).find(ge=>ge.toLowerCase()=="content-type"),de=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(ch,j,void 0)>=0)||F||de||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,Fe]of P)this.g.setRequestHeader(ge,Fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ge){Ni(this,ge)}};function Ni(m,j){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=j,m.o=5,ji(m),Zr(m)}function ji(m){m.A||(m.A=!0,We(m,"complete"),We(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,We(this,"complete"),We(this,"abort"),Zr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zr(this,!0)),Gt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Yr(this):this.Xa())},n.Xa=function(){Yr(this)};function Yr(m){if(m.h&&typeof o<"u"){if(m.v&&br(m)==4)setTimeout(m.Ca.bind(m),0);else if(We(m,"readystatechange"),br(m)==4){m.h=!1;try{const ge=m.ca();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var P;if(!(P=j)){var F;if(F=ge===0){let Fe=String(m.D).match(Ht)[1]||null;!Fe&&c.self&&c.self.location&&(Fe=c.self.location.protocol.slice(0,-1)),F=!Kc.test(Fe?Fe.toLowerCase():"")}P=F}if(P)We(m,"complete"),We(m,"success");else{m.o=6;try{var de=br(m)>2?m.g.statusText:""}catch{de=""}m.l=de+" ["+m.ca()+"]",ji(m)}}finally{Zr(m)}}}}function Zr(m,j){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const P=m.g;m.g=null,j||We(m,"ready");try{P.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function br(m){return m.g?m.g.readyState:0}n.ca=function(){try{return br(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var j=this.g.responseText;return m&&j.indexOf(m)==0&&(j=j.substring(m.length)),Ss(j)}};function Jc(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Nl(m){const j={};m=(m.g&&br(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<m.length;F++){if(A(m[F]))continue;var P=hr(m[F]);const de=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const ge=j[de]||[];j[de]=ge,ge.push(P)}ve(j,function(F){return F.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vr(m,j,P){return P&&P.internalChannelParams&&P.internalChannelParams[m]||j}function oo(m){this.za=0,this.i=[],this.j=new je,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vr("baseRetryDelayMs",5e3,m),this.Za=vr("retryDelaySeedMs",1e4,m),this.Ta=vr("forwardChannelMaxRetries",2,m),this.va=vr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new lt(m&&m.concurrentRequestLimit),this.Ba=new pa,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=oo.prototype,n.ka=8,n.I=1,n.connect=function(m,j,P,F){Vt(0),this.W=m,this.H=j||{},P&&F!==void 0&&(this.H.OSID=P,this.H.OAID=F),this.F=this.X,this.J=Sl(this,null,this.W),Xr(this)};function lo(m){if(co(m),m.I==3){var j=m.V++,P=re(m.J);if(Je(P,"SID",m.M),Je(P,"RID",j),Je(P,"TYPE","terminate"),wr(m,P),j=new zs(m,m.j,j),j.M=2,j.A=bt(re(P)),P=!1,c.navigator&&c.navigator.sendBeacon)try{P=c.navigator.sendBeacon(j.A.toString(),"")}catch{}!P&&c.Image&&(new Image().src=j.A,P=!0),P||(j.g=Zc(j.j,null),j.g.ea(j.A)),j.F=Date.now(),Ln(j)}ya(m)}function Sn(m){m.g&&(xa(m),m.g.cancel(),m.g=null)}function co(m){Sn(m),m.v&&(c.clearTimeout(m.v),m.v=null),uo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Xr(m){if(!te(m.h)&&!m.m){m.m=!0;var j=m.Ea;q||k(),V||(q(),V=!0),I.add(j,m),m.D=0}}function Yc(m,j){return le(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=j.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=ts(h(m.Ea,m,j),fo(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const de=new zs(this,this.j,m);let ge=this.o;if(this.U&&(ge?(ge=X(ge),se(ge,this.U)):ge=this.U),this.u!==null||this.R||(de.J=ge,ge=null),this.S)e:{for(var j=0,P=0;P<this.i.length;P++){t:{var F=this.i[P];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(j+=F,j>4096){j=P;break e}if(j===4096||P===this.i.length-1){j=P+1;break e}}j=1e3}else j=1e3;j=jl(this,de,j),P=re(this.J),Je(P,"RID",m),Je(P,"CVER",22),this.G&&Je(P,"X-HTTP-Session-Id",this.G),wr(this,P),ge&&(this.R?j="headers="+hn(Gc(ge))+"&"+j:this.u&&ao(P,this.u,ge)),ht(this.h,de),this.Ra&&Je(P,"TYPE","init"),this.S?(Je(P,"$req",j),Je(P,"SID","null"),de.U=!0,tn(de,P,null)):tn(de,P,j),this.I=2}}else this.I==3&&(m?ga(this,m):this.i.length==0||te(this.h)||ga(this))};function ga(m,j){var P;j?P=j.l:P=m.V++;const F=re(m.J);Je(F,"SID",m.M),Je(F,"RID",P),Je(F,"AID",m.K),wr(m,F),m.u&&m.o&&ao(F,m.u,m.o),P=new zs(m,m.j,P,m.D+1),m.u===null&&(P.J=m.o),j&&(m.i=j.G.concat(m.i)),j=jl(m,P,1e3),P.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),ht(m.h,P),tn(P,F,j)}function wr(m,j){m.H&&be(m.H,function(P,F){Je(j,F,P)}),m.l&&be({},function(P,F){Je(j,F,P)})}function jl(m,j,P){P=Math.min(m.i.length,P);const F=m.l?h(m.l.Ka,m.l,m):null;e:{var de=m.i;let vt=-1;for(;;){const ss=["count="+P];vt==-1?P>0?(vt=de[0].g,ss.push("ofs="+vt)):vt=0:ss.push("ofs="+vt);let qt=!0;for(let xs=0;xs<P;xs++){var ge=de[xs].g;const zn=de[xs].map;if(ge-=vt,ge<0)vt=Math.max(0,de[xs].g-100),qt=!1;else try{ge="req"+ge+"_"||"";try{var Fe=zn instanceof Map?zn:Object.entries(zn);for(const[jr,Sr]of Fe){let kr=Sr;u(Sr)&&(kr=$t(Sr)),ss.push(ge+jr+"="+encodeURIComponent(kr))}}catch(jr){throw ss.push(ge+"type="+encodeURIComponent("_badmap")),jr}}catch{F&&F(zn)}}if(qt){Fe=ss.join("&");break e}}Fe=void 0}return m=m.i.splice(0,P),j.G=m,Fe}function Hs(m){if(!m.g&&!m.v){m.Y=1;var j=m.Da;q||k(),V||(q(),V=!0),I.add(j,m),m.A=0}}function Nr(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=ts(h(m.Da,m),fo(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Si(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=ts(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),Sn(this),Si(this))};function xa(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Si(m){m.g=new zs(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var j=re(m.na);Je(j,"RID","rpc"),Je(j,"SID",m.M),Je(j,"AID",m.K),Je(j,"CI",m.F?"0":"1"),!m.F&&m.ia&&Je(j,"TO",m.ia),Je(j,"TYPE","xmlhttp"),wr(m,j),m.u&&m.o&&ao(j,m.u,m.o),m.O&&(m.g.H=m.O);var P=m.g;m=m.ba,P.M=1,P.A=bt(re(j)),P.u=null,P.R=!0,Hr(P,m)}n.Va=function(){this.C!=null&&(this.C=null,Sn(this),Nr(this),Vt(19))};function uo(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function ho(m,j){var P=null;if(m.g==j){uo(m),xa(m),m.g=null;var F=2}else if(Oe(m.h,j))P=j.G,it(m.h,j),F=1;else return;if(m.I!=0){if(j.o)if(F==1){P=j.u?j.u.length:0,j=Date.now()-j.F;var de=m.D;F=Mn(),We(F,new ks(F,P)),Xr(m)}else Hs(m);else if(de=j.m,de==3||de==0&&j.X>0||!(F==1&&Yc(m,j)||F==2&&Nr(m)))switch(P&&P.length>0&&(j=m.h,j.i=j.i.concat(P)),de){case 1:kn(m,5);break;case 4:kn(m,10);break;case 3:kn(m,6);break;default:kn(m,2)}}}function fo(m,j){let P=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(P*=2),P*j}function kn(m,j){if(m.j.info("Error code "+j),j==2){var P=h(m.bb,m),F=m.Ua;const de=!F;F=new D(F||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||$e(F,"https"),bt(F),de?xr(F.toString(),P):yr(F.toString(),P)}else Vt(2);m.I=0,m.l&&m.l.pa(j),ya(m),co(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function ya(m){if(m.I=0,m.ja=[],m.l){const j=gt(m.h);(j.length!=0||m.i.length!=0)&&(_(m.ja,j),_(m.ja,m.i),m.h.i.length=0,T(m.i),m.i.length=0),m.l.oa()}}function Sl(m,j,P){var F=P instanceof D?re(P):new D(P);if(F.g!="")j&&(F.g=j+"."+F.g),Ee(F,F.u);else{var de=c.location;F=de.protocol,j=j?j+"."+de.hostname:de.hostname,de=+de.port;const ge=new D(null);F&&$e(ge,F),j&&(ge.g=j),de&&Ee(ge,de),P&&(ge.h=P),F=ge}return P=m.G,j=m.wa,P&&j&&Je(F,P,j),Je(F,"VER",m.ka),wr(m,F),F}function Zc(m,j,P){if(j&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=m.Aa&&!m.ma?new Gt(new Jr({ab:P})):new Gt(m.ma),j.Fa(m.L),j}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xc(){}n=Xc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function fn(m,j){Ne.call(this),this.g=new oo(j),this.l=m,this.h=j&&j.messageUrlParams||null,m=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(m?m["X-WebChannel-Content-Type"]=j.messageContentType:m={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(m?m["X-WebChannel-Client-Profile"]=j.sa:m={"X-WebChannel-Client-Profile":j.sa}),this.g.U=m,(m=j&&j.Qb)&&!A(m)&&(this.g.u=m),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!A(j)&&(this.g.G=j,m=this.h,m!==null&&j in m&&(m=this.h,j in m&&delete m[j])),this.j=new ki(this)}v(fn,Ne),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){lo(this.g)},fn.prototype.o=function(m){var j=this.g;if(typeof m=="string"){var P={};P.__data__=m,m=P}else this.v&&(P={},P.__data__=$t(m),m=P);j.i.push(new Ge(j.Ya++,m)),j.I==3&&Xr(j)},fn.prototype.N=function(){this.g.l=null,delete this.j,lo(this.g),delete this.g,fn.Z.N.call(this)};function mo(m){Ws.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var j=m.__sm__;if(j){e:{for(const P in j){m=P;break e}m=void 0}(this.i=m)&&(m=this.i,j=j!==null&&m in j?j[m]:void 0),this.data=j}else this.data=m}v(mo,Ws);function Qc(){ur.call(this),this.status=1}v(Qc,ur);function ki(m){this.g=m}v(ki,Xc),ki.prototype.ra=function(){We(this.g,"a")},ki.prototype.qa=function(m){We(this.g,new mo(m))},ki.prototype.pa=function(m){We(this.g,new Qc)},ki.prototype.oa=function(){We(this.g,"b")},fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Ut.NO_ERROR=0,Ut.TIMEOUT=8,Ut.HTTP_ERROR=6,Bt.COMPLETE="complete",fs.EventType=ls,ls.OPEN="a",ls.CLOSE="b",ls.ERROR="c",ls.MESSAGE="d",Ne.prototype.listen=Ne.prototype.J,Gt.prototype.listenOnce=Gt.prototype.K,Gt.prototype.getLastError=Gt.prototype.Ha,Gt.prototype.getLastErrorCode=Gt.prototype.ya,Gt.prototype.getStatus=Gt.prototype.ca,Gt.prototype.getResponseJson=Gt.prototype.La,Gt.prototype.getResponseText=Gt.prototype.la,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Fa}).apply(typeof Zd<"u"?Zd:typeof self<"u"?self:typeof window<"u"?window:{});const Xx="@firebase/firestore",Qx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Yu("@firebase/firestore");function ar(n,...e){if(sl.logLevel<=Ft.DEBUG){const s=e.map(xp);sl.debug(`Firestore (${zc}): ${n}`,...s)}}function vw(n,...e){if(sl.logLevel<=Ft.ERROR){const s=e.map(xp);sl.error(`Firestore (${zc}): ${n}`,...s)}}function cE(n,...e){if(sl.logLevel<=Ft.WARN){const s=e.map(xp);sl.warn(`Firestore (${zc}): ${n}`,...s)}}function xp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(n,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,ww(n,r,s)}function ww(n,e,s){let r=`FIRESTORE (${zc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw vw(r),new Error(r)}function tc(n,e,s,r){let i="Unexpected state";typeof s=="string"?i=s:r=s,n||ww(e,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class It extends Hn{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(rn.UNAUTHENTICATED)))}shutdown(){}}class uE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class hE{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){tc(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,s(f)):Promise.resolve();let o=new sc;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new sc,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},u=f=>{ar("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(ar("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new sc)}}),0),c()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(ar("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tc(typeof r.accessToken=="string",31837,{l:r}),new Nw(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tc(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class fE{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mE{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new fE(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ey{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pE{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){tc(this.o===void 0,3512);const r=o=>{o.error!=null&&ar("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ar("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?s(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{ar("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ar("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ey(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(tc(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new ey(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<n;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=gE(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<s&&(r+=e.charAt(i[o]%62))}return r}}function ra(n,e){return n<e?-1:n>e?1:0}function yE(n,e){const s=Math.min(n.length,e.length);for(let r=0;r<s;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return Qf(i)===Qf(o)?ra(i,o):Qf(i)?1:-1}return ra(n.length,e.length)}const bE=55296,vE=57343;function Qf(n){const e=n.charCodeAt(0);return e>=bE&&e<=vE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="__name__";class Ar{constructor(e,s,r){s===void 0?s=0:s>e.length&&bc(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&bc(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return Ar.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Ar?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let i=0;i<r;i++){const o=Ar.compareSegments(e.get(i),s.get(i));if(o!==0)return o}return ra(e.length,s.length)}static compareSegments(e,s){const r=Ar.isNumericId(e),i=Ar.isNumericId(s);return r&&!i?-1:!r&&i?1:r&&i?Ar.extractNumericId(e).compare(Ar.extractNumericId(s)):yE(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gp.fromString(e.substring(4,e.length-2))}}class rr extends Ar{construct(e,s,r){return new rr(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new It(At.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((i=>i.length>0)))}return new rr(s)}static emptyPath(){return new rr([])}}const wE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class La extends Ar{construct(e,s,r){return new La(e,s,r)}static isValidIdentifier(e){return wE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),La.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ty}static keyField(){return new La([ty])}static fromServerFormat(e){const s=[];let r="",i=0;const o=()=>{if(r.length===0)throw new It(At.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new It(At.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new It(At.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(r+=u,i++):(o(),i++)}if(o(),c)throw new It(At.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new La(s)}static emptyPath(){return new La([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.path=e}static fromPath(e){return new $a(rr.fromString(e))}static fromName(e){return new $a(rr.fromString(e).popFirst(5))}static empty(){return new $a(rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return rr.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $a(new rr(e.slice()))}}function NE(n,e,s,r){if(e===!0&&r===!0)throw new It(At.INVALID_ARGUMENT,`${n} and ${s} cannot be used together.`)}function jE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function SE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":bc(12329,{type:typeof n})}function kE(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new It(At.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=SE(n);throw new It(At.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(n,e){const s={typeString:n};return e&&(s.value=e),s}function Uc(n,e){if(!jE(n))throw new It(At.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){s=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){s=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){s=`Expected '${r}' field to equal '${o.value}'`;break}}if(s)throw new It(At.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=-62135596800,ny=1e6;class Ir{static now(){return Ir.fromMillis(Date.now())}static fromDate(e){return Ir.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*ny);return new Ir(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new It(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new It(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<sy)throw new It(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ny}_compareTo(e){return this.seconds===e.seconds?ra(this.nanoseconds,e.nanoseconds):ra(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ir._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Uc(e,Ir._jsonSchema))return new Ir(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-sy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ir._jsonSchemaVersion="firestore/timestamp/1.0",Ir._jsonSchema={type:Ns("string",Ir._jsonSchemaVersion),seconds:Ns("number"),nanoseconds:Ns("number")};function _E(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new CE("Invalid base64 string: "+o):o}})(e);return new Ja(s)}static fromUint8Array(e){const s=(function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o})(e);return new Ja(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let i=0;i<s.length;i++)r[i]=s.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ra(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ja.EMPTY_BYTE_STRING=new Ja("");const ry="(default)";class Su{constructor(e,s){this.projectId=e,this.database=s||ry}static empty(){return new Su("","")}get isDefaultDatabase(){return this.database===ry}isEqual(e){return e instanceof Su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,s=null,r=[],i=[],o=null,c="F",u=null,f=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TE(n){return new EE(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iy,Pt;(Pt=iy||(iy={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new gp([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=1048576;function em(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,s,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=s,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,s-r);i>0&&ar("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,s,r,i,o){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new sc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,i,o){const c=Date.now()+r,u=new yp(e,s,c,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new It(At.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var ay,oy;(oy=ay||(ay={})).Ma="default",oy.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="firestore.googleapis.com",cy=!0;class dy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new It(At.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jw,this.ssl=cy}else this.host=e.host,this.ssl=e.ssl??cy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AE)throw new It(At.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new It(At.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new It(At.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new It(At.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sw{constructor(e,s,r,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new It(At.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new It(At.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dE;switch(r.type){case"firstParty":return new mE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new It(At.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=ly.get(s);r&&(ar("ComponentProvider","Removing Datastore"),ly.delete(s),r.terminate())})(this),Promise.resolve()}}function DE(n,e,s,r={}){var h;n=kE(n,Sw);const i=so(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${s}`;i&&(Ku(`https://${u}`),Ju("Firestore",!0)),o.host!==jw&&o.host!==u&&cE("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:u,ssl:i,emulatorOptions:r};if(!na(f,c)&&(n._setSettings(f),r.mockUserToken)){let x,v;if(typeof r.mockUserToken=="string")x=r.mockUserToken,v=rn.MOCK_USER;else{x=hw(r.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const N=r.mockUserToken.sub||r.mockUserToken.user_id;if(!N)throw new It(At.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new rn(N)}n._authCredentials=new uE(new Nw(x,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bp(this.firestore,e,this._query)}}class Dr{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dr(this.firestore,e,this._key)}toJSON(){return{type:Dr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,r){if(Uc(s,Dr._jsonSchema))return new Dr(e,r||null,new $a(rr.fromString(s.referencePath)))}}Dr._jsonSchemaVersion="firestore/documentReference/1.0",Dr._jsonSchema={type:Ns("string",Dr._jsonSchemaVersion),referencePath:Ns("string")};class vp extends bp{constructor(e,s,r){super(e,s,TE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dr(this.firestore,null,new $a(e))}withConverter(e){return new vp(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="AsyncQueue";class hy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new IE(this,"async_queue_retry"),this._c=()=>{const r=em();r&&ar(uy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const s=em();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=em();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new sc;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_E(e))throw e;ar(uy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,vw("INTERNAL UNHANDLED ERROR: ",fy(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(e,s,r){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const i=yp.createAndSchedule(this,e,s,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&bc(47125,{Pc:fy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function fy(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ME extends Sw{constructor(e,s,r,i){super(e,s,r,i),this.type="firestore",this._queue=new hy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hy(e),this._firestoreClient=void 0,await e}}}function OE(n,e){const s=typeof n=="object"?n:cl(),r=typeof n=="string"?n:e,i=Vr(s,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=hp("firestore");o&&DE(i,...o)}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ci(Ja.fromBase64String(e))}catch(s){throw new It(At.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new ci(Ja.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ci._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Uc(e,ci._jsonSchema))return ci.fromBase64String(e.bytes)}}ci._jsonSchemaVersion="firestore/bytes/1.0",ci._jsonSchema={type:Ns("string",ci._jsonSchemaVersion),bytes:Ns("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new It(At.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new La(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new It(At.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new It(At.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ra(this._lat,e._lat)||ra(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wa._jsonSchemaVersion}}static fromJSON(e){if(Uc(e,Wa._jsonSchema))return new Wa(e.latitude,e.longitude)}}Wa._jsonSchemaVersion="firestore/geoPoint/1.0",Wa._jsonSchema={type:Ns("string",Wa._jsonSchemaVersion),latitude:Ns("number"),longitude:Ns("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ha._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Uc(e,Ha._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new Ha(e.vectorValues);throw new It(At.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ha._jsonSchemaVersion="firestore/vectorValue/1.0",Ha._jsonSchema={type:Ns("string",Ha._jsonSchemaVersion),vectorValues:Ns("object")};const LE=new RegExp("[~\\*/\\[\\]]");function zE(n,e,s){if(e.search(LE)>=0)throw my(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new kw(...e.split("."))._internalPath}catch{throw my(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function my(n,e,s,r,i){let o=`Function ${e}() called with invalid data`;o+=". ";let c="";return new It(At.INVALID_ARGUMENT,o+n+c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,s,r,i,o){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Cw("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class UE extends _w{data(){return super.data()}}function Cw(n,e){return typeof e=="string"?zE(n,e):e instanceof kw?e._internalPath:e._delegate._internalPath}class Xd{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zo extends _w{constructor(e,s,r,i,o,c){super(e,s,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(Cw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new It(At.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=Zo._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}Zo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zo._jsonSchema={type:Ns("string",Zo._jsonSchemaVersion),bundleSource:Ns("string","DocumentSnapshot"),bundleName:Ns("string"),bundle:Ns("string")};class ou extends Zo{data(e={}){return super.data(e)}}class nc{constructor(e,s,r,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new Xd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new ou(this._firestore,this._userDataWriter,r.key,r,new Xd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new It(At.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((u=>{const f=new ou(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Xd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const f=new ou(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Xd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,x=-1;return u.type!==0&&(h=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),x=c.indexOf(u.doc.key)),{type:FE(u.type),doc:f,oldIndex:h,newIndex:x}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new It(At.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=nc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(s.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function FE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bc(61501,{type:n})}}nc._jsonSchemaVersion="firestore/querySnapshot/1.0",nc._jsonSchema={type:Ns("string",nc._jsonSchemaVersion),bundleSource:Ns("string","QuerySnapshot"),bundleName:Ns("string"),bundle:Ns("string")};(function(e,s=!0){(function(i){zc=i})(no),Nn(new cn("firestore",((r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),u=new ME(new hE(r.getProvider("auth-internal")),new pE(c,r.getProvider("app-check-internal")),(function(h,x){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new It(At.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Su(h.options.projectId,x)})(c,i),c);return o={useFetchStreams:s,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Ds(Xx,Qx,e),Ds(Xx,Qx,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="firebasestorage.googleapis.com",$E="storageBucket",VE=120*1e3,BE=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Hn{constructor(e,s,r=0){super(tm(e),`Firebase Storage: ${s} (${tm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Br.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zr||(zr={}));function tm(n){return"storage/"+n}function qE(){const n="An unknown error occurred, please check the error payload for server response.";return new Br(zr.UNKNOWN,n)}function WE(){return new Br(zr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HE(){return new Br(zr.CANCELED,"User canceled the upload/download.")}function GE(n){return new Br(zr.INVALID_URL,"Invalid URL '"+n+"'.")}function KE(n){return new Br(zr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function py(n){return new Br(zr.INVALID_ARGUMENT,n)}function Tw(){return new Br(zr.APP_DELETED,"The Firebase app was deleted.")}function JE(n){return new Br(zr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let r;try{r=or.makeFromUrl(e,s)}catch{return new or(e,"")}if(r.path==="")return r;throw KE(e)}static makeFromUrl(e,s){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+i+c,"i"),f={bucket:1,path:3};function h(Z){Z.path_=decodeURIComponent(Z.path)}const x="v[A-Za-z0-9_]+",v=s.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",T=new RegExp(`^https?://${v}/${x}/b/${i}/o${N}`,"i"),_={bucket:1,path:3},C=s===Ew?"(?:storage.googleapis.com|storage.cloud.google.com)":s,R="([^?#]*)",z=new RegExp(`^https?://${C}/${i}/${R}`,"i"),U=[{regex:u,indices:f,postModify:o},{regex:T,indices:_,postModify:h},{regex:z,indices:{bucket:1,path:2},postModify:h}];for(let Z=0;Z<U.length;Z++){const q=U[Z],V=q.regex.exec(e);if(V){const I=V[q.indices.bucket];let k=V[q.indices.path];k||(k=""),r=new or(I,k),q.postModify(r);break}}if(r==null)throw GE(e);return r}}class YE{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n,e,s){let r=1,i=null,o=null,c=!1,u=0;function f(){return u===2}let h=!1;function x(...R){h||(h=!0,e.apply(null,R))}function v(R){i=setTimeout(()=>{i=null,n(T,f())},R)}function N(){o&&clearTimeout(o)}function T(R,...z){if(h){N();return}if(R){N(),x.call(null,R,...z);return}if(f()||c){N(),x.call(null,R,...z);return}r<64&&(r*=2);let U;u===1?(u=2,U=0):U=(r+Math.random())*1e3,v(U)}let _=!1;function C(R){_||(_=!0,N(),!h&&(i!==null?(R||(u=2),clearTimeout(i),v(0)):R||(u=1)))}return v(0),o=setTimeout(()=>{c=!0,C(!0)},s),C}function XE(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n){return n!==void 0}function gy(n,e,s,r){if(r<e)throw py(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>s)throw py(`Invalid value for '${n}'. Expected ${s} or less.`)}function e4(n){const e=encodeURIComponent;let s="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);s=s+i+"&"}return s=s.slice(0,-1),s}var ku;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ku||(ku={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(n,e){const s=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return s||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,s,r,i,o,c,u,f,h,x,v,N=!0,T=!1){this.url_=e,this.method_=s,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=x,this.connectionFactory_=v,this.retry=N,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,C)=>{this.resolve_=_,this.reject_=C,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Qd(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const f=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===ku.NO_ERROR,f=o.getStatus();if(!u||t4(f,this.additionalRetryCodes_)&&this.retry){const x=o.getErrorCode()===ku.ABORT;r(!1,new Qd(!1,null,x));return}const h=this.successCodes_.indexOf(f)!==-1;r(!0,new Qd(h,o))})},s=(r,i)=>{const o=this.resolve_,c=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(u,u.getResponse());QE(f)?o(f):o()}catch(f){c(f)}else if(u!==null){const f=qE();f.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,f)):c(f)}else if(i.canceled){const f=this.appDelete_?Tw():HE();c(f)}else{const f=WE();c(f)}};this.canceled_?s(!1,new Qd(!1,null,!0)):this.backoffId_=ZE(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XE(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qd{constructor(e,s,r){this.wasSuccessCode=e,this.connection=s,this.canceled=!!r}}function n4(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function r4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function i4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function a4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function o4(n,e,s,r,i,o,c=!0,u=!1){const f=e4(n.urlParams),h=n.url+f,x=Object.assign({},n.headers);return i4(x,e),n4(x,s),r4(x,o),a4(x,r),new s4(h,n.method,x,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function c4(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,s){this._service=e,s instanceof or?this._location=s:this._location=or.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new _u(e,s)}get root(){const e=new or(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return c4(this._location.path)}get storage(){return this._service}get parent(){const e=l4(this._location.path);if(e===null)return null;const s=new or(this._location.bucket,e);return new _u(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw JE(e)}}function xy(n,e){const s=e==null?void 0:e[$E];return s==null?null:or.makeFromBucketSpec(s,n)}function d4(n,e,s,r={}){n.host=`${e}:${s}`;const i=so(e);i&&(Ku(`https://${n.host}/b`),Ju("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:hw(o,n.app.options.projectId))}class u4{constructor(e,s,r,i,o,c=!1){this.app=e,this._authProvider=s,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=Ew,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VE,this._maxUploadRetryTime=BE,this._requests=new Set,i!=null?this._bucket=or.makeFromBucketSpec(i,this._host):this._bucket=xy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=or.makeFromBucketSpec(this._url,e):this._bucket=xy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=await e.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _u(this,e)}_makeRequest(e,s,r,i,o=!0){if(this._deleted)return new YE(Tw());{const c=o4(e,this._appId,r,i,s,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,s){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,r,i).getPromise()}}const yy="@firebase/storage",by="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="storage";function h4(n=cl(),e){n=dn(n);const r=Vr(n,Pw).getImmediate({identifier:e}),i=hp("storage");return i&&f4(r,...i),r}function f4(n,e,s,r={}){d4(n,e,s,r)}function m4(n,{instanceIdentifier:e}){const s=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new u4(s,r,i,e,no)}function p4(){Nn(new cn(Pw,m4,"PUBLIC").setMultipleInstances(!0)),Ds(yy,by,""),Ds(yy,by,"esm2020")}p4();function Aw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g4=Aw,Iw=new ca("auth","Firebase",Aw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=new Yu("@firebase/auth");function x4(n,...e){Cu.logLevel<=Ft.WARN&&Cu.warn(`Auth (${no}): ${n}`,...e)}function lu(n,...e){Cu.logLevel<=Ft.ERROR&&Cu.error(`Auth (${no}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(n,...e){throw wp(n,...e)}function Or(n,...e){return wp(n,...e)}function Rw(n,e,s){const r={...g4(),[e]:s};return new ca("auth","Firebase",r).create(e,{appName:n.name})}function Ga(n){return Rw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wp(n,...e){if(typeof n!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(s,...r)}return Iw.create(n,...e)}function pt(n,e,...s){if(!n)throw wp(e,...s)}function di(n){const e="INTERNAL ASSERTION FAILED: "+n;throw lu(e),new Error(e)}function gi(n,e){n||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function y4(){return vy()==="http:"||vy()==="https:"}function vy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y4()||fw()||"connection"in navigator)?navigator.onLine:!0}function v4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,s){this.shortDelay=e,this.longDelay=s,gi(s>e,"Short delay should be less than long delay!"),this.isMobile=U_()||$_()}get(){return b4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(n,e){gi(n.emulator,"Emulator should always be set here");const{url:s}=n.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],j4=new Fc(3e4,6e4);function jp(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function dl(n,e,s,r,i={}){return Mw(n,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const u=Lc({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:f,...o};return F_()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&so(n.emulatorConfig.host)&&(h.credentials="include"),Dw.fetch()(await Ow(n,n.config.apiHost,s,u),h)})}async function Mw(n,e,s){n._canInitEmulator=!1;const r={...w4,...e};try{const i=new k4(n),o=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw eu(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[f,h]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw eu(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw eu(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw eu(n,"user-disabled",c);const x=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Rw(n,x,h);pi(n,x)}}catch(i){if(i instanceof Hn)throw i;pi(n,"network-request-failed",{message:String(i)})}}async function S4(n,e,s,r,i={}){const o=await dl(n,e,s,r,i);return"mfaPendingCredential"in o&&pi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function Ow(n,e,s,r){const i=`${e}${s}?${r}`,o=n,c=o.config.emulator?Np(n.config,i):`${n.config.apiScheme}://${i}`;return N4.includes(s)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}class k4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(Or(this.auth,"network-request-failed")),j4.get())})}}function eu(n,e,s){const r={appName:n.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const i=Or(n,e,r);return i.customData._tokenResponse=s,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(n,e){return dl(n,"POST","/v1/accounts:delete",e)}async function Eu(n,e){return dl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function C4(n,e=!1){const s=dn(n),r=await s.getIdToken(e),i=Sp(r);pt(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:rc(sm(i.auth_time)),issuedAtTime:rc(sm(i.iat)),expirationTime:rc(sm(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function sm(n){return Number(n)*1e3}function Sp(n){const[e,s,r]=n.split(".");if(e===void 0||s===void 0||r===void 0)return lu("JWT malformed, contained fewer than 3 sections"),null;try{const i=lw(s);return i?JSON.parse(i):(lu("Failed to decode base64 JWT payload"),null)}catch(i){return lu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function wy(n){const e=Sp(n);return pt(e,"internal-error"),pt(typeof e.exp<"u","internal-error"),pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(n,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Hn&&E4(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function E4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=rc(this.lastLoginAt),this.creationTime=rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(n){var v;const e=n.auth,s=await n.getIdToken(),r=await vc(n,Eu(e,{idToken:s}));pt(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=(v=i.providerUserInfo)!=null&&v.length?Lw(i.providerUserInfo):[],c=A4(n.providerData,o),u=n.isAnonymous,f=!(n.email&&i.passwordHash)&&!(c!=null&&c.length),h=u?f:!1,x={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Mm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,x)}async function P4(n){const e=dn(n);await Tu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function A4(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Lw(n){return n.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(n,e){const s=await Mw(n,{},async()=>{const r=Lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=await Ow(n,i,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:r};return n.emulatorConfig&&so(n.emulatorConfig.host)&&(f.credentials="include"),Dw.fetch()(c,f)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function R4(n,e){return dl(n,"POST","/v2/accounts:revokeToken",jp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pt(e.idToken,"internal-error"),pt(typeof e.idToken<"u","internal-error"),pt(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){pt(e.length!==0,"internal-error");const s=wy(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:i,expiresIn:o}=await I4(e,s);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:i,expirationTime:o}=s,c=new Xo;return r&&(pt(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(pt(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(pt(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xo,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(n,e){pt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class lr{constructor({uid:e,auth:s,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new T4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Mm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const s=await vc(this,this.stsTokenManager.getToken(this.auth,e));return pt(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return C4(this,e)}reload(){return P4(this)}_assign(e){this!==e&&(pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new lr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await Tu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(Ga(this.auth));const e=await this.getIdToken();return await vc(this,_4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const r=s.displayName??void 0,i=s.email??void 0,o=s.phoneNumber??void 0,c=s.photoURL??void 0,u=s.tenantId??void 0,f=s._redirectEventId??void 0,h=s.createdAt??void 0,x=s.lastLoginAt??void 0,{uid:v,emailVerified:N,isAnonymous:T,providerData:_,stsTokenManager:C}=s;pt(v&&C,e,"internal-error");const R=Xo.fromJSON(this.name,C);pt(typeof v=="string",e,"internal-error"),Fi(r,e.name),Fi(i,e.name),pt(typeof N=="boolean",e,"internal-error"),pt(typeof T=="boolean",e,"internal-error"),Fi(o,e.name),Fi(c,e.name),Fi(u,e.name),Fi(f,e.name),Fi(h,e.name),Fi(x,e.name);const z=new lr({uid:v,auth:e,email:i,emailVerified:N,displayName:r,isAnonymous:T,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:R,createdAt:h,lastLoginAt:x});return _&&Array.isArray(_)&&(z.providerData=_.map($=>({...$}))),f&&(z._redirectEventId=f),z}static async _fromIdTokenResponse(e,s,r=!1){const i=new Xo;i.updateFromServerResponse(s);const o=new lr({uid:s.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Tu(o),o}static async _fromGetAccountInfoResponse(e,s,r){const i=s.users[0];pt(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Lw(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Xo;u.updateFromIdToken(r);const f=new lr({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:c}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Mm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=new Map;function ui(n){gi(n instanceof Function,"Expected a class definition");let e=Ny.get(n);return e?(gi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ny.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}zw.type="NONE";const jy=zw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n,e,s){return`firebase:${n}:${e}:${s}`}class Qo{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=cu(this.userKey,i.apiKey,o),this.fullPersistenceKey=cu("persistence",i.apiKey,o),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await Eu(this.auth,{idToken:e}).catch(()=>{});return s?lr._fromGetAccountInfoResponse(this.auth,s,e):null}return lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new Qo(ui(jy),e,r);const i=(await Promise.all(s.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=i[0]||ui(jy);const c=cu(r,e.config.apiKey,e.name);let u=null;for(const h of s)try{const x=await h._get(c);if(x){let v;if(typeof x=="string"){const N=await Eu(e,{idToken:x}).catch(()=>{});if(!N)break;v=await lr._fromGetAccountInfoResponse(e,N,x)}else v=lr._fromJSON(e,x);h!==o&&(u=v),o=h;break}}catch{}const f=i.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Qo(o,e,r):(o=f[0],u&&await o._set(c,u.toJSON()),await Promise.all(s.map(async h=>{if(h!==o)try{await h._remove(c)}catch{}})),new Qo(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Uw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qw(e))return"Blackberry";if(Ww(e))return"Webos";if(Fw(e))return"Safari";if((e.includes("chrome/")||$w(e))&&!e.includes("edge/"))return"Chrome";if(Bw(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Uw(n=ln()){return/firefox\//i.test(n)}function Fw(n=ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $w(n=ln()){return/crios\//i.test(n)}function Vw(n=ln()){return/iemobile/i.test(n)}function Bw(n=ln()){return/android/i.test(n)}function qw(n=ln()){return/blackberry/i.test(n)}function Ww(n=ln()){return/webos/i.test(n)}function kp(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function D4(n=ln()){var e;return kp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function M4(){return V_()&&document.documentMode===10}function Hw(n=ln()){return kp(n)||Bw(n)||Ww(n)||qw(n)||/windows phone/i.test(n)||Vw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(n,e=[]){let s;switch(n){case"Browser":s=Sy(ln());break;case"Worker":s=`${Sy(ln())}-${n}`;break;default:s=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${no}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=o=>new Promise((c,u)=>{try{const f=e(o);c(f)}catch(f){u(f)}});r.onAbort=s,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const i of s)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L4(n,e={}){return dl(n,"GET","/v2/passwordPolicy",jp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=6;class U4{constructor(e){var r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??z4,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),i&&(s.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,s,r,i){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ky(this),this.idTokenSubscription=new ky(this),this.beforeStateQueue=new O4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Iw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=ui(s)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await Eu(this,{idToken:e}),r=await lr._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Wn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===u)&&(f!=null&&f.user)&&(r=f.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await Tu(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=v4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(Ga(this));const s=e?dn(e):null;return s&&pt(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(Ga(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(Ga(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await L4(this),s=new U4(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ca("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await R4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&ui(e)||this._popupRedirectResolver;pt(s,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[ui(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)==null?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((s=this.currentUser)==null?void 0:s.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,i){if(this._deleted)return()=>{};const o=typeof s=="function"?s:s.next.bind(s);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof s=="function"){const f=e.addObserver(s,r,i);return()=>{c=!0,f()}}else{const f=e.addObserver(s);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());s&&(e["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var s;if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((s=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getToken());return e!=null&&e.error&&x4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function _p(n){return dn(n)}class ky{constructor(e){this.auth=e,this.observer=null,this.addObserver=G_(s=>this.observer=s)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $4(n){Cp=n}function V4(n){return Cp.loadJS(n)}function B4(){return Cp.gapiScript}function q4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(n,e){const s=Vr(n,"auth");if(s.isInitialized()){const i=s.getImmediate(),o=s.getOptions();if(na(o,e??{}))return i;pi(i,"already-initialized")}return s.initialize({options:e})}function H4(n,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(ui);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function G4(n,e,s){const r=_p(n);pt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=Kw(e),{host:c,port:u}=K4(e),f=u===null?"":`:${u}`,h={url:`${o}//${c}${f}/`},x=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){pt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pt(na(h,r.config.emulator)&&na(x,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=x,r.settings.appVerificationDisabledForTesting=!0,so(c)?(Ku(`${o}//${c}${f}`),Ju("Auth",!0)):J4()}function Kw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function K4(n){const e=Kw(n),s=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:_y(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:_y(c)}}}function _y(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function J4(){function n(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,s){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(n,e){return S4(n,"POST","/v1/accounts:signInWithIdp",jp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="http://localhost";class Ya extends Jw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new Ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):pi("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=s;if(!r||!i)return null;const c=new Ya(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const s=this.buildRequest();return el(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,el(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,el(e,s)}buildRequest(){const e={requestUri:Y4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Lc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Yw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends $c{constructor(){super("facebook.com")}static credential(e){return Ya._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends $c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return Ya._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return Wi.credential(s,r)}catch{return null}}}Wi.GOOGLE_SIGN_IN_METHOD="google.com";Wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends $c{constructor(){super("github.com")}static credential(e){return Ya._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.GITHUB_SIGN_IN_METHOD="github.com";Hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends $c{constructor(){super("twitter.com")}static credential(e,s){return Ya._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return Gi.credential(s,r)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,i=!1){const o=await lr._fromIdTokenResponse(e,r,i),c=Cy(r);return new nl({user:o,providerId:c,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const i=Cy(r);return new nl({user:e,providerId:i,_tokenResponse:r,operationType:s})}}function Cy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends Hn{constructor(e,s,r,i){super(s.code,s.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Pu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,i){return new Pu(e,s,r,i)}}function Zw(n,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(n):s._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Pu._fromErrorAndOperation(n,o,e,r):o})}async function Z4(n,e,s=!1){const r=await vc(n,e._linkToIdToken(n.auth,await n.getIdToken()),s);return nl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X4(n,e,s=!1){const{auth:r}=n;if(Wn(r.app))return Promise.reject(Ga(r));const i="reauthenticate";try{const o=await vc(n,Zw(r,i,e,n),s);pt(o.idToken,r,"internal-error");const c=Sp(o.idToken);pt(c,r,"internal-error");const{sub:u}=c;return pt(n.uid===u,r,"user-mismatch"),nl._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&pi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q4(n,e,s=!1){if(Wn(n.app))return Promise.reject(Ga(n));const r="signIn",i=await Zw(n,r,e),o=await nl._fromIdTokenResponse(n,r,i);return s||await n._updateCurrentUser(o.user),o}function eT(n,e,s,r){return dn(n).onIdTokenChanged(e,s,r)}function tT(n,e,s){return dn(n).beforeAuthStateChanged(e,s)}const Au="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Au,"1"),this.storage.removeItem(Au),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=1e3,nT=10;class Qw extends Xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),i=this.localCache[s];r!==i&&e(s,i,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const r=e.key;s?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!s&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);M4()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,nT):i()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},sT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qw.type="LOCAL";const rT=Qw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN extends Xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}eN.type="SESSION";const tN=eN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(i=>i.isListeningto(e));if(s)return s;const r=new Xu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:i,data:o}=s.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(c).map(async h=>h(s.origin,o)),f=await iT(u);s.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(n="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return n+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((u,f)=>{const h=Ep("",20);i.port1.start();const x=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(v){const N=v;if(N.data.eventId===h)switch(N.data.status){case"ack":clearTimeout(x),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(N.data.response);break;default:clearTimeout(x),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:s},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function oT(n){Lr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function lT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cT(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function dT(){return sN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="firebaseLocalStorageDb",uT=1,Iu="firebaseLocalStorage",rN="fbase_key";class Vc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Qu(n,e){return n.transaction([Iu],e?"readwrite":"readonly").objectStore(Iu)}function hT(){const n=indexedDB.deleteDatabase(nN);return new Vc(n).toPromise()}function Om(){const n=indexedDB.open(nN,uT);return new Promise((e,s)=>{n.addEventListener("error",()=>{s(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Iu,{keyPath:rN})}catch(i){s(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Iu)?e(r):(r.close(),await hT(),e(await Om()))})})}async function Ey(n,e,s){const r=Qu(n,!0).put({[rN]:e,value:s});return new Vc(r).toPromise()}async function fT(n,e){const s=Qu(n,!1).get(e),r=await new Vc(s).toPromise();return r===void 0?null:r.value}function Ty(n,e){const s=Qu(n,!0).delete(e);return new Vc(s).toPromise()}const mT=800,pT=3;class iN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Om(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>pT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xu._getInstance(dT()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var s,r;if(this.activeServiceWorker=await lT(),!this.activeServiceWorker)return;this.sender=new aT(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(s=e[0])!=null&&s.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Om();return await Ey(e,Au,"1"),await Ty(e,Au),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ey(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>fT(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ty(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Qu(i,!1).getAll();return new Vc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iN.type="LOCAL";const gT=iN;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(n,e){return e?ui(e):(pt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp extends Jw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,s){return el(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function yT(n){return Q4(n.auth,new Tp(n),n.bypassAuthState)}function bT(n){const{auth:e,user:s}=n;return pt(s,e,"internal-error"),X4(s,new Tp(n),n.bypassAuthState)}async function vT(n){const{auth:e,user:s}=n;return pt(s,e,"internal-error"),Z4(s,new Tp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,s,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:i,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:s,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yT;case"linkViaPopup":case"linkViaRedirect":return vT;case"reauthViaPopup":case"reauthViaRedirect":return bT;default:pi(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=new Fc(2e3,1e4);class Ko extends aN{constructor(e,s,r,i,o){super(e,s,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pt(e,this.auth,"internal-error"),e}async onExecution(){gi(this.filter.length===1,"Popup operations only handle one event");const e=Ep();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if((r=(s=this.authWindow)==null?void 0:s.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wT.get())};e()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="pendingRedirect",du=new Map;class jT extends aN{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=du.get(this.auth._key());if(!e){try{const r=await ST(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}du.set(this.auth._key(),e)}return this.bypassAuthState||du.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ST(n,e){const s=CT(e),r=_T(n);if(!await r._isAvailable())return!1;const i=await r._get(s)==="true";return await r._remove(s),i}function kT(n,e){du.set(n._key(),e)}function _T(n){return ui(n._redirectPersistence)}function CT(n){return cu(NT,n.config.apiKey,n.name)}async function ET(n,e,s=!1){if(Wn(n.app))return Promise.reject(Ga(n));const r=_p(n),i=xT(r,e),c=await new jT(r,i,s).execute();return c&&!s&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=600*1e3;class PT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AT(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!oN(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";s.onError(Or(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TT&&this.cachedEventUids.clear(),this.cachedEventUids.has(Py(e))}saveEventToCache(e){this.cachedEventUids.add(Py(e)),this.lastProcessedEventTime=Date.now()}}function Py(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function oN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AT(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IT(n,e={}){return dl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DT=/^https?/;async function MT(n){if(n.config.emulator)return;const{authorizedDomains:e}=await IT(n);for(const s of e)try{if(OT(s))return}catch{}pi(n,"unauthorized-domain")}function OT(n){const e=Dm(),{protocol:s,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?s==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&c.hostname===r}if(!DT.test(s))return!1;if(RT.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=new Fc(3e4,6e4);function Ay(){const n=Lr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let s=0;s<n.CP.length;s++)n.CP[s]=null}}function zT(n){return new Promise((e,s)=>{var i,o,c;function r(){Ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ay(),s(Or(n,"network-request-failed"))},timeout:LT.get()})}if((o=(i=Lr().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=Lr().gapi)!=null&&c.load)r();else{const u=q4("iframefcb");return Lr()[u]=()=>{gapi.load?r():s(Or(n,"network-request-failed"))},V4(`${B4()}?onload=${u}`).catch(f=>s(f))}}).catch(e=>{throw uu=null,e})}let uu=null;function UT(n){return uu=uu||zT(n),uu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=new Fc(5e3,15e3),$T="__/auth/iframe",VT="emulator/auth/iframe",BT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WT(n){const e=n.config;pt(e.authDomain,n,"auth-domain-config-required");const s=e.emulator?Np(e,VT):`https://${n.config.authDomain}/${$T}`,r={apiKey:e.apiKey,appName:n.name,v:no},i=qT.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${s}?${Lc(r).slice(1)}`}async function HT(n){const e=await UT(n),s=Lr().gapi;return pt(s,n,"internal-error"),e.open({where:document.body,url:WT(n),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BT,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=Or(n,"network-request-failed"),u=Lr().setTimeout(()=>{o(c)},FT.get());function f(){Lr().clearTimeout(u),i(r)}r.ping(f).then(f,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KT=500,JT=600,YT="_blank",ZT="http://localhost";class Iy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XT(n,e,s,r=KT,i=JT){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const f={...GT,width:r.toString(),height:i.toString(),top:o,left:c},h=ln().toLowerCase();s&&(u=$w(h)?YT:s),Uw(h)&&(e=e||ZT,f.scrollbars="yes");const x=Object.entries(f).reduce((N,[T,_])=>`${N}${T}=${_},`,"");if(D4(h)&&u!=="_self")return QT(e||"",u),new Iy(null);const v=window.open(e||"",u,x);pt(v,n,"popup-blocked");try{v.focus()}catch{}return new Iy(v)}function QT(n,e){const s=document.createElement("a");s.href=n,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP="__/auth/handler",tP="emulator/auth/handler",sP=encodeURIComponent("fac");async function Ry(n,e,s,r,i,o){pt(n.config.authDomain,n,"auth-domain-config-required"),pt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:s,redirectUrl:r,v:no,eventId:i};if(e instanceof Yw){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",H_(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,v]of Object.entries({}))c[x]=v}if(e instanceof $c){const x=e.getScopes().filter(v=>v!=="");x.length>0&&(c.scopes=x.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const x of Object.keys(u))u[x]===void 0&&delete u[x];const f=await n._getAppCheckToken(),h=f?`#${sP}=${encodeURIComponent(f)}`:"";return`${nP(n)}?${Lc(u).slice(1)}${h}`}function nP({config:n}){return n.emulator?Np(n,tP):`https://${n.authDomain}/${eP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="webStorageSupport";class rP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tN,this._completeRedirectFn=ET,this._overrideRedirectResult=kT}async _openPopup(e,s,r,i){var c;gi((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await Ry(e,s,r,Dm(),i);return XT(e,o,Ep())}async _openRedirect(e,s,r,i){await this._originValidation(e);const o=await Ry(e,s,r,Dm(),i);return oT(o),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:i,promise:o}=this.eventManagers[s];return i?Promise.resolve(i):(gi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await HT(e),r=new PT(e);return s.register("authEvent",i=>(pt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(nm,{type:nm},i=>{var c;const o=(c=i==null?void 0:i[0])==null?void 0:c[nm];o!==void 0&&s(!!o),pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=MT(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Hw()||Fw()||kp()}}const iP=rP;var Dy="@firebase/auth",My="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lP(n){Nn(new cn("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;pt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gw(n)},h=new F4(r,i,o,f);return H4(h,s),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),Nn(new cn("auth-internal",e=>{const s=_p(e.getProvider("auth").getImmediate());return(r=>new aP(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(Dy,My,oP(n)),Ds(Dy,My,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=300,dP=uw("authIdTokenMaxAge")||cP;let Oy=null;const uP=n=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>dP)return;const i=s==null?void 0:s.token;Oy!==i&&(Oy=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hP(n=cl()){const e=Vr(n,"auth");if(e.isInitialized())return e.getImmediate();const s=W4(n,{popupRedirectResolver:iP,persistence:[gT,rT,tN]}),r=uw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=uP(o.toString());tT(s,c,()=>c(s.currentUser)),eT(s,u=>c(u))}}const i=cw("auth");return i&&G4(s,`http://${i}`),s}function fP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}$4({loadJS(n){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Or("internal-error");o.customData=i,s(o)},r.type="text/javascript",r.charset="UTF-8",fP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lP("Browser");const lN="@firebase/installations",Pp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=1e4,dN=`w:${Pp}`,uN="FIS_v2",mP="https://firebaseinstallations.googleapis.com/v1",pP=3600*1e3,gP="installations",xP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Za=new ca(gP,xP,yP);function hN(n){return n instanceof Hn&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN({projectId:n}){return`${mP}/projects/${n}/installations`}function mN(n){return{token:n.token,requestStatus:2,expiresIn:vP(n.expiresIn),creationTime:Date.now()}}async function pN(n,e){const r=(await e.json()).error;return Za.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function gN({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function bP(n,{refreshToken:e}){const s=gN(n);return s.append("Authorization",wP(e)),s}async function xN(n){const e=await n();return e.status>=500&&e.status<600?n():e}function vP(n){return Number(n.replace("s","000"))}function wP(n){return`${uN} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP({appConfig:n,heartbeatServiceProvider:e},{fid:s}){const r=fN(n),i=gN(n),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const c={fid:s,authVersion:uN,appId:n.appId,sdkVersion:dN},u={method:"POST",headers:i,body:JSON.stringify(c)},f=await xN(()=>fetch(r,u));if(f.ok){const h=await f.json();return{fid:h.fid||s,registrationStatus:2,refreshToken:h.refreshToken,authToken:mN(h.authToken)}}else throw await pN("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=/^[cdef][\w-]{21}$/,Lm="";function kP(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const s=_P(n);return SP.test(s)?s:Lm}catch{return Lm}}function _P(n){return jP(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=new Map;function vN(n,e){const s=eh(n);wN(s,e),CP(s,e)}function wN(n,e){const s=bN.get(n);if(s)for(const r of s)r(e)}function CP(n,e){const s=EP();s&&s.postMessage({key:n,fid:e}),TP()}let Va=null;function EP(){return!Va&&"BroadcastChannel"in self&&(Va=new BroadcastChannel("[Firebase] FID Change"),Va.onmessage=n=>{wN(n.data.key,n.data.fid)}),Va}function TP(){bN.size===0&&Va&&(Va.close(),Va=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="firebase-installations-database",AP=1,Xa="firebase-installations-store";let rm=null;function Ap(){return rm||(rm=Zu(PP,AP,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Xa)}}})),rm}async function Ru(n,e){const s=eh(n),i=(await Ap()).transaction(Xa,"readwrite"),o=i.objectStore(Xa),c=await o.get(s);return await o.put(e,s),await i.done,(!c||c.fid!==e.fid)&&vN(n,e.fid),e}async function NN(n){const e=eh(n),r=(await Ap()).transaction(Xa,"readwrite");await r.objectStore(Xa).delete(e),await r.done}async function th(n,e){const s=eh(n),i=(await Ap()).transaction(Xa,"readwrite"),o=i.objectStore(Xa),c=await o.get(s),u=e(c);return u===void 0?await o.delete(s):await o.put(u,s),await i.done,u&&(!c||c.fid!==u.fid)&&vN(n,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ip(n){let e;const s=await th(n.appConfig,r=>{const i=IP(r),o=RP(n,i);return e=o.registrationPromise,o.installationEntry});return s.fid===Lm?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function IP(n){const e=n||{fid:kP(),registrationStatus:0};return jN(e)}function RP(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Za.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=DP(n,s);return{installationEntry:s,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:MP(n)}:{installationEntry:e}}async function DP(n,e){try{const s=await NP(n,e);return Ru(n.appConfig,s)}catch(s){throw hN(s)&&s.customData.serverCode===409?await NN(n.appConfig):await Ru(n.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function MP(n){let e=await Ly(n.appConfig);for(;e.registrationStatus===1;)await yN(100),e=await Ly(n.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:r}=await Ip(n);return r||s}return e}function Ly(n){return th(n,e=>{if(!e)throw Za.create("installation-not-found");return jN(e)})}function jN(n){return OP(n)?{fid:n.fid,registrationStatus:0}:n}function OP(n){return n.registrationStatus===1&&n.registrationTime+cN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP({appConfig:n,heartbeatServiceProvider:e},s){const r=zP(n,s),i=bP(n,s),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const c={installation:{sdkVersion:dN,appId:n.appId}},u={method:"POST",headers:i,body:JSON.stringify(c)},f=await xN(()=>fetch(r,u));if(f.ok){const h=await f.json();return mN(h)}else throw await pN("Generate Auth Token",f)}function zP(n,{fid:e}){return`${fN(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rp(n,e=!1){let s;const r=await th(n.appConfig,o=>{if(!SN(o))throw Za.create("not-registered");const c=o.authToken;if(!e&&$P(c))return o;if(c.requestStatus===1)return s=UP(n,e),o;{if(!navigator.onLine)throw Za.create("app-offline");const u=BP(o);return s=FP(n,u),u}});return s?await s:r.authToken}async function UP(n,e){let s=await zy(n.appConfig);for(;s.authToken.requestStatus===1;)await yN(100),s=await zy(n.appConfig);const r=s.authToken;return r.requestStatus===0?Rp(n,e):r}function zy(n){return th(n,e=>{if(!SN(e))throw Za.create("not-registered");const s=e.authToken;return qP(s)?{...e,authToken:{requestStatus:0}}:e})}async function FP(n,e){try{const s=await LP(n,e),r={...e,authToken:s};return await Ru(n.appConfig,r),s}catch(s){if(hN(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await NN(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Ru(n.appConfig,r)}throw s}}function SN(n){return n!==void 0&&n.registrationStatus===2}function $P(n){return n.requestStatus===2&&!VP(n)}function VP(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+pP}function BP(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function qP(n){return n.requestStatus===1&&n.requestTime+cN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(n){const e=n,{installationEntry:s,registrationPromise:r}=await Ip(e);return r?r.catch(console.error):Rp(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(n,e=!1){const s=n;return await GP(s),(await Rp(s,e)).token}async function GP(n){const{registrationPromise:e}=await Ip(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(n){if(!n||!n.options)throw im("App Configuration");if(!n.name)throw im("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!n.options[s])throw im(s);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function im(n){return Za.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="installations",JP="installations-internal",YP=n=>{const e=n.getProvider("app").getImmediate(),s=KP(e),r=Vr(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},ZP=n=>{const e=n.getProvider("app").getImmediate(),s=Vr(e,kN).getImmediate();return{getId:()=>WP(s),getToken:i=>HP(s,i)}};function XP(){Nn(new cn(kN,YP,"PUBLIC")),Nn(new cn(JP,ZP,"PRIVATE"))}XP();Ds(lN,Pp);Ds(lN,Pp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="/firebase-messaging-sw.js",eA="/firebase-cloud-messaging-push-scope",_N="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",tA="https://fcmregistrations.googleapis.com/v1",CN="google.c.a.c_id",sA="google.c.a.c_l",nA="google.c.a.ts",rA="google.c.a.e",Uy=1e4;var Fy;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Fy||(Fy={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var wc;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(wc||(wc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function iA(n){const e="=".repeat((4-n.length%4)%4),s=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(s),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="fcm_token_details_db",aA=5,$y="fcm_token_object_Store";async function oA(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(am))return null;let e=null;return(await Zu(am,aA,{upgrade:async(r,i,o,c)=>{if(i<2||!r.objectStoreNames.contains($y))return;const u=c.objectStore($y),f=await u.index("fcmSenderId").get(n);if(await u.clear(),!!f){if(i===2){const h=f;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:h.createTime??Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:li(h.vapidKey)}}}else if(i===3){const h=f;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:li(h.auth),p256dh:li(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:li(h.vapidKey)}}}else if(i===4){const h=f;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:li(h.auth),p256dh:li(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:li(h.vapidKey)}}}}}})).close(),await Yf(am),await Yf("fcm_vapid_details_db"),await Yf("undefined"),lA(e)?e:null}function lA(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="firebase-messaging-database",dA=1,Nc="firebase-messaging-store";let om=null;function EN(){return om||(om=Zu(cA,dA,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Nc)}}})),om}async function uA(n){const e=TN(n),r=await(await EN()).transaction(Nc).objectStore(Nc).get(e);if(r)return r;{const i=await oA(n.appConfig.senderId);if(i)return await Dp(n,i),i}}async function Dp(n,e){const s=TN(n),i=(await EN()).transaction(Nc,"readwrite");return await i.objectStore(Nc).put(e,s),await i.done,e}function TN({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Xs=new ca("messaging","Messaging",hA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(n,e){const s=await Op(n),r=PN(e),i={method:"POST",headers:s,body:JSON.stringify(r)};let o;try{o=await(await fetch(Mp(n.appConfig),i)).json()}catch(c){throw Xs.create("token-subscribe-failed",{errorInfo:c==null?void 0:c.toString()})}if(o.error){const c=o.error.message;throw Xs.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw Xs.create("token-subscribe-no-token");return o.token}async function mA(n,e){const s=await Op(n),r=PN(e.subscriptionOptions),i={method:"PATCH",headers:s,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${Mp(n.appConfig)}/${e.token}`,i)).json()}catch(c){throw Xs.create("token-update-failed",{errorInfo:c==null?void 0:c.toString()})}if(o.error){const c=o.error.message;throw Xs.create("token-update-failed",{errorInfo:c})}if(!o.token)throw Xs.create("token-update-no-token");return o.token}async function pA(n,e){const r={method:"DELETE",headers:await Op(n)};try{const o=await(await fetch(`${Mp(n.appConfig)}/${e}`,r)).json();if(o.error){const c=o.error.message;throw Xs.create("token-unsubscribe-failed",{errorInfo:c})}}catch(i){throw Xs.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Mp({projectId:n}){return`${tA}/projects/${n}/registrations`}async function Op({appConfig:n,installations:e}){const s=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${s}`})}function PN({p256dh:n,auth:e,endpoint:s,vapidKey:r}){const i={web:{endpoint:s,auth:e,p256dh:n}};return r!==_N&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=10080*60*1e3;async function xA(n){const e=await bA(n.swRegistration,n.vapidKey),s={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:li(e.getKey("auth")),p256dh:li(e.getKey("p256dh"))},r=await uA(n.firebaseDependencies);if(r){if(vA(r.subscriptionOptions,s))return Date.now()>=r.createTime+gA?yA(n,{token:r.token,createTime:Date.now(),subscriptionOptions:s}):r.token;try{await pA(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Vy(n.firebaseDependencies,s)}else return Vy(n.firebaseDependencies,s)}async function yA(n,e){try{const s=await mA(n.firebaseDependencies,e),r={...e,token:s,createTime:Date.now()};return await Dp(n.firebaseDependencies,r),s}catch(s){throw s}}async function Vy(n,e){const r={token:await fA(n,e),createTime:Date.now(),subscriptionOptions:e};return await Dp(n,r),r.token}async function bA(n,e){const s=await n.pushManager.getSubscription();return s||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:iA(e)})}function vA(n,e){const s=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,o=e.p256dh===n.p256dh;return s&&r&&i&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return wA(e,n),NA(e,n),jA(e,n),e}function wA(n,e){if(!e.notification)return;n.notification={};const s=e.notification.title;s&&(n.notification.title=s);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const o=e.notification.icon;o&&(n.notification.icon=o)}function NA(n,e){e.data&&(n.data=e.data)}function jA(n,e){var i,o,c,u;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;n.fcmOptions={};const s=((o=e.fcmOptions)==null?void 0:o.link)??((c=e.notification)==null?void 0:c.click_action);s&&(n.fcmOptions.link=s);const r=(u=e.fcmOptions)==null?void 0:u.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n){return typeof n=="object"&&!!n&&CN in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(n){if(!n||!n.options)throw lm("App Configuration Object");if(!n.name)throw lm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:s}=n;for(const r of e)if(!s[r])throw lm(r);return{appName:n.name,projectId:s.projectId,apiKey:s.apiKey,appId:s.appId,senderId:s.messagingSenderId}}function lm(n){return Xs.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,s,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=kA(e);this.firebaseDependencies={app:e,appConfig:i,installations:s,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(n){try{n.swRegistration=await navigator.serviceWorker.register(QP,{scope:eA}),n.swRegistration.update().catch(()=>{}),await EA(n.swRegistration)}catch(e){throw Xs.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function EA(n){return new Promise((e,s)=>{const r=setTimeout(()=>s(new Error(`Service worker not registered after ${Uy} ms`)),Uy),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var c;((c=o.target)==null?void 0:c.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),s(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(n,e){if(!e&&!n.swRegistration&&await CA(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Xs.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=_N)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(n,e){if(!navigator)throw Xs.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Xs.create("permission-blocked");return await PA(n,e==null?void 0:e.vapidKey),await TA(n,e==null?void 0:e.serviceWorkerRegistration),xA(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(n,e,s){const r=IA(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:s[CN],message_name:s[sA],message_time:s[nA],message_device_time:Math.floor(Date.now()/1e3)})}function IA(n){switch(n){case wc.NOTIFICATION_CLICKED:return"notification_open";case wc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(n,e){const s=e.data;if(!s.isFirebaseMessaging)return;n.onMessageHandler&&s.messageType===wc.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(By(s)):n.onMessageHandler.next(By(s)));const r=s.data;SA(r)&&r[rA]==="1"&&await AA(n,s.messageType,r)}const qy="@firebase/messaging",Wy="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=n=>{const e=new _A(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",s=>RA(e,s)),e},MA=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>AN(e,r)}};function OA(){Nn(new cn("messaging",DA,"PUBLIC")),Nn(new cn("messaging-internal",MA,"PRIVATE")),Ds(qy,Wy),Ds(qy,Wy,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(){try{await mp()}catch{return!1}return typeof window<"u"&&fp()&&mw()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(n,e){if(!navigator)throw Xs.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(n=cl()){return LA().then(e=>{if(!e)throw Xs.create("unsupported-browser")},e=>{throw Xs.create("indexed-db-unsupported")}),Vr(dn(n),"messaging").getImmediate()}async function FA(n,e){return n=dn(n),AN(n,e)}function $A(n,e){return n=dn(n),zA(n,e)}OA();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,s,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Wn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=s.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||s.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i==null||i.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const s=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return s.error?null:s.token}return null}async getContext(e){const s=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:s,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="us-central1";class BA{constructor(e,s,r,i,o=zm,c=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new VA(e,s,r,i),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(o);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=zm}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const s=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${s}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${s}.cloudfunctions.net/${e}`}}function qA(n,e,s){const r=so(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${s}`,r&&(Ku(n.emulatorOrigin+"/backends"),Ju("Functions",!0))}const Hy="@firebase/functions",Gy="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="auth-internal",HA="app-check-internal",GA="messaging-internal";function KA(n){const e=(s,{instanceIdentifier:r})=>{const i=s.getProvider("app").getImmediate(),o=s.getProvider(WA),c=s.getProvider(GA),u=s.getProvider(HA);return new BA(i,o,c,u,r)};Nn(new cn(IN,e,"PUBLIC").setMultipleInstances(!0)),Ds(Hy,Gy,n),Ds(Hy,Gy,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(n=cl(),e=zm){const r=Vr(dn(n),IN).getImmediate({identifier:e}),i=hp("functions");return i&&YA(r,...i),r}function YA(n,e,s){qA(dn(n),e,s)}KA();const hu={apiKey:"AIzaSyCFi4LIpQBzs9QGnn4QQdNJtCvMOi_-VF8",authDomain:"spoilme-edee0.firebaseapp.com",projectId:"spoilme-edee0",storageBucket:"spoilme-edee0.appspot.com",messagingSenderId:"744288044885",appId:"1:744288044885:web:24614b67ffe485446151dc",measurementId:"G-H9VG45QVZR"},ZA=hu.apiKey&&hu.projectId&&hu.projectId!=="your-app-id";let XA=null,QA=null,eI=null,fu=null,tI=null,Vo=null;if(ZA)try{Vo=xw(hu),XA=OE(Vo,"spoilme");try{QA=h4(Vo),console.log("Firebase Storage initialized")}catch(n){console.error("Firebase Storage init failed:",n)}try{eI=hP(Vo),console.log("Firebase Auth initialized")}catch(n){console.error("Firebase Auth init failed:",n)}try{fu=UA(Vo),console.log("Firebase Messaging initialized")}catch(n){console.error("Firebase Messaging init failed:",n)}try{tI=JA(Vo),console.log("Firebase Functions initialized")}catch(n){console.error("Firebase Functions init failed:",n)}console.log("Firebase initialized successfully")}catch(n){console.error("Firebase initialization error:",n)}else console.warn("Firebase keys missing or invalid. Application running in Demo Mode (Local Storage).");const Ky="spv_fcm_token";async function Um(n){var e,s,r,i,o,c,u,f;try{if(typeof window>"u")return{ok:!1,reason:"not_in_browser"};if(!(n!=null&&n.userId))return{ok:!1,reason:"missing_userId"};if(!("Notification"in window))return{ok:!1,reason:"notifications_unsupported"};if(!("serviceWorker"in navigator))return{ok:!1,reason:"sw_unsupported"};if(!fu)return{ok:!1,reason:"firebase_messaging_not_configured"};const h=((s=(e=import.meta)==null?void 0:e.env)==null?void 0:s.VITE_FIREBASE_VAPID_KEY)||((i=(r=import.meta)==null?void 0:r.env)==null?void 0:i.VITE_FCM_VAPID_KEY)||((c=(o=import.meta)==null?void 0:o.env)==null?void 0:c.VITE_VAPID_KEY)||"";if(!h)return{ok:!1,reason:"missing_vapid_key"};if(await Notification.requestPermission()!=="granted")return{ok:!1,reason:"permission_not_granted"};const v=await navigator.serviceWorker.register("/firebase-messaging-sw.js");try{const _=n.userName||"valued customer";navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"USER_DATA",name:_}):(f=(u=(await navigator.serviceWorker.ready).active)==null?void 0:u.postMessage)==null||f.call(u,{type:"USER_DATA",name:_})}catch{}const N=await FA(fu,{vapidKey:h,serviceWorkerRegistration:v});if(!N)return{ok:!1,reason:"no_token"};localStorage.getItem(Ky)!==N&&(localStorage.setItem(Ky,N),await qe.from("users").update({fcm_token:N}).eq("id",n.userId));try{$A(fu,_=>{var z,$;const C=(z=_==null?void 0:_.notification)==null?void 0:z.title,R=($=_==null?void 0:_.notification)==null?void 0:$.body;C&&R&&Notification.permission==="granted"&&new Notification(C,{body:R})})}catch{}return{ok:!0,token:N}}catch(h){return console.warn("ensureFcmTokenRegistered failed:",h),{ok:!1,reason:(h==null?void 0:h.message)||String(h)}}}const RN=async(n,e)=>{n&&await Um({userId:n,userName:e})};var sI={};const DN=S.createContext(void 0),Qt=(n,e=new WeakSet)=>{if(n==null)return null;if(typeof n!="object")return n;if(e.has(n))return null;if(e.add(n),n instanceof Date)return n.toISOString();if(typeof n.toDate=="function")try{return n.toDate().toISOString()}catch{return null}if(n.path&&typeof n.path=="string"&&(n.firestore||n._key))return n.path;if(Array.isArray(n))return n.map(r=>Qt(r,e));if(n.seconds!==void 0&&n.nanoseconds!==void 0&&Object.keys(n).length<=4)return new Date(n.seconds*1e3+n.nanoseconds/1e6).toISOString();const s={};for(const r in n)if(!(r.startsWith("_")||r==="auth"||r==="firestore"||r==="proactiveRefresh"||r==="providerData")&&Object.prototype.hasOwnProperty.call(n,r)){const i=Qt(n[r],e);i!=null&&(s[r]=i)}return s},Jy=n=>{if(!n)return null;const e={...n};return e.is_admin!==void 0&&(e.isAdmin=!!e.is_admin),e.isAdmin===void 0&&(e.isAdmin=!1),e.created_at&&!e.createdAt&&(e.createdAt=typeof e.created_at=="string"?e.created_at:e.created_at.toISOString?e.created_at.toISOString():String(e.created_at)),e},nI=()=>{const n=["Thandiwe Zulu","Jessica Nel","Precious Khumalo","Sarah Van Der Merwe","Amahle Dlamini","Chloe Naidoo","Nicole Botha","Zanele Mthembu","Ashley Smith","Bianca Fourie"],e=new Date,s=e.getFullYear()*100+e.getMonth(),r=c=>{let u=c+=1831565813;return u=Math.imul(u^u>>>15,u|1),u^=u+Math.imul(u^u>>>7,u|61),((u^u>>>14)>>>0)/4294967296},i=n.map((c,u)=>({id:`aff_${u}`,name:c,sales:0,rank:0,change:"same"}));i[0].sales=28561.68;let o=28561.68;for(let c=1;c<i.length;c++){const f=1500+r(s+c)*3500,h=Math.floor(r(s+c+50)*99)/100;o=Math.max(1e3,o-f);const x=Math.floor(o)+h;i[c].sales=parseFloat(x.toFixed(2))}return i.forEach((c,u)=>{c.rank=u+1;const f=r(s+u+200);c.change=f>.6?"up":f<.3?"down":"same",u===0&&(c.change="same")}),i},Yy=n=>{const e=new Date,s=new Date(e.getFullYear(),0,1),r=Math.ceil(((e.getTime()-s.getTime())/864e5+s.getDay()+1)/7);if(n){const o=[];for(let c=3;c>=1;c--){const u=(r-1-c+52)%52;o.push(Zy[u])}return[n,...o.map((c,u)=>({rank:u+2,name:c.name,prize:c.currency==="ZAR"?500:30,currency:c.currency}))]}const i=[];for(let o=3;o>=0;o--){const c=(r-1-o+52)%52;i.push(Zy[c])}return i.map((o,c)=>({rank:c+1,name:o.name,prize:o.currency==="ZAR"?500:30,currency:o.currency}))},Zy=[{name:"Anja P.",location:"Pretoria, SA",currency:"ZAR"},{name:"Sarah Jenkins",location:"Texas, USA",currency:"USD"},{name:"Thandi M.",location:"Sandton, SA",currency:"ZAR"},{name:"Sophie Clarke",location:"London, UK",currency:"USD"},{name:"Johan V.",location:"Bloemfontein, SA",currency:"ZAR"},{name:"Emily R.",location:"New York, USA",currency:"USD"},{name:"Priya N.",location:"Durban, SA",currency:"ZAR"},{name:"Isabella G.",location:"Toronto, Canada",currency:"USD"},{name:"Bianca S.",location:"Cape Town, SA",currency:"ZAR"},{name:"Madison L.",location:"Chicago, USA",currency:"USD"},{name:"Lerato K.",location:"Soweto, SA",currency:"ZAR"},{name:"Charlotte B.",location:"Manchester, UK",currency:"USD"},{name:"David W.",location:"Port Elizabeth, SA",currency:"ZAR"},{name:"Jessica H.",location:"Florida, USA",currency:"USD"},{name:"Zanele T.",location:"Polokwane, SA",currency:"ZAR"},{name:"Olivia M.",location:"Dublin, Ireland",currency:"USD"},{name:"Riaan O.",location:"Paarl, SA",currency:"ZAR"},{name:"Ashley T.",location:"California, USA",currency:"USD"},{name:"Fatima A.",location:"Lenasia, SA",currency:"ZAR"},{name:"Emma W.",location:"Sydney, Australia",currency:"USD"},{name:"Michelle D.",location:"George, SA",currency:"ZAR"},{name:"Grace P.",location:"Ohio, USA",currency:"USD"},{name:"Nandi Z.",location:"East London, SA",currency:"ZAR"},{name:"Mia S.",location:"Berlin, Germany",currency:"USD"},{name:"Chantelle V.",location:"Boksburg, SA",currency:"ZAR"},{name:"Harper C.",location:"Arizona, USA",currency:"USD"},{name:"Sipho M.",location:"Johannesburg, SA",currency:"ZAR"},{name:"Chloe F.",location:"Bristol, UK",currency:"USD"},{name:"Elize B.",location:"Stellenbosch, SA",currency:"ZAR"},{name:"Samantha K.",location:"Nevada, USA",currency:"USD"},{name:"Yusuf E.",location:"Cape Town, SA",currency:"ZAR"},{name:"Lily J.",location:"Auckland, NZ",currency:"USD"},{name:"Monique L.",location:"Centurion, SA",currency:"ZAR"},{name:"Ava R.",location:"Washington, USA",currency:"USD"},{name:"Karabo P.",location:"Rustenburg, SA",currency:"ZAR"},{name:"Zoe T.",location:"Liverpool, UK",currency:"USD"},{name:"Andre F.",location:"Nelspruit, SA",currency:"ZAR"},{name:"Elizabeth N.",location:"Virginia, USA",currency:"USD"},{name:"Ts hepo G.",location:"Midrand, SA",currency:"ZAR"},{name:"Amelia H.",location:"Edinburgh, Scotland",currency:"USD"},{name:"Marlize J.",location:"Upington, SA",currency:"ZAR"},{name:"Victoria B.",location:"Georgia, USA",currency:"USD"},{name:"Keshav R.",location:"Chatsworth, SA",currency:"ZAR"},{name:"Hannah D.",location:"Leeds, UK",currency:"USD"},{name:"Angelique S.",location:"Krugersdorp, SA",currency:"ZAR"},{name:"Natalie M.",location:"Oregon, USA",currency:"USD"},{name:"Vusi K.",location:"Pietermaritzburg, SA",currency:"ZAR"},{name:"Layla O.",location:"Dubai, UAE",currency:"USD"},{name:"Sunette W.",location:"Mossel Bay, SA",currency:"ZAR"},{name:"Ella F.",location:"Colorado, USA",currency:"USD"},{name:"Bongani N.",location:"Soweto, SA",currency:"ZAR"},{name:"Scarlet V.",location:"Melbourne, Australia",currency:"USD"}],rI=({children:n})=>{const[e,s]=S.useState([]),[r,i]=S.useState([]),[o,c]=S.useState([]),[u,f]=S.useState(()=>{try{const G=localStorage.getItem("spv_cart");return G?JSON.parse(G):[]}catch(G){return console.error("Failed to load cart",G),[]}}),[h,x]=S.useState(Pr),[v,N]=S.useState(q1),[T,_]=S.useState([]),[C,R]=S.useState(!0),[z,$]=S.useState(null),[U,Z]=S.useState(null),[q,V]=S.useState([]),[I,k]=S.useState(0),[E,L]=S.useState([]),[O,B]=S.useState("local"),[A,ne]=S.useState(!Es),[fe,ke]=S.useState(null),[De,oe]=S.useState(!1),[be,ve]=S.useState([]),[X,ue]=S.useState([]),[se,xe]=S.useState("ZAR"),[H,Pe]=S.useState(null);S.useEffect(()=>{const G=localStorage.getItem("spv_active_user");if(G)try{const pe=JSON.parse(G);x(pe)}catch(pe){console.error("Error parsing stored user",pe),x(Pr)}V(nI()),L(Yy(H));const K=new Date,Y=K.getFullYear()*100+K.getMonth();k(780+Math.floor((pe=>{let Ge=pe+=1831565813;return Ge=Math.imul(Ge^Ge>>>15,Ge|1),Ge^=Ge+Math.imul(Ge^Ge>>>7,Ge|61),(Ge>>>0)/4294967296})(Y)*15));try{const pe=localStorage.getItem("spv_packaging_presets");pe&&ve(JSON.parse(pe));const Ge=localStorage.getItem("spv_material_presets");Ge&&ue(JSON.parse(Ge))}catch(pe){console.error("Error loading presets",pe)}},[]),S.useEffect(()=>{localStorage.setItem("spv_cart",JSON.stringify(u))},[u]),S.useEffect(()=>{A&&localStorage.setItem("spv_orders",JSON.stringify(o))},[o,A]);const Te=G=>{try{const K=Qt(G);localStorage.setItem("spv_active_user",JSON.stringify(K))}catch(K){console.error("Error saving user to localStorage",K)}},Ue=async(G,K)=>{if(!A)try{await qe.from("users").update(Qt(K)).eq("id",G)}catch(Y){console.error("Failed to update user fields in Supabase:",Y)}},Xe=async(G,K,Y,ae="/#/notifications")=>{if(!(A||!Es))try{await Zi("send-push",{title:K,body:Y,targetGroup:"individual",targetId:G,url:ae})}catch(pe){console.warn("pushToIndividual failed:",pe)}},rt=async(G,K)=>{if(!A)try{const{data:Y}=await qe.from("users").select("notifications").eq("id",G).maybeSingle(),ae=Y&&Y.notifications||[],pe=[K,...ae];await qe.from("users").update({notifications:pe}).eq("id",G)}catch(Y){console.error("Failed to append notification to user:",Y)}},zt=async G=>{const K={...h,...G};x(K),Te(K),!A&&h.id&&h.id!=="guest"&&await Ue(h.id,Qt(K))},we=async()=>{try{if(typeof window>"u")return{ok:!1,message:"Not in browser"};const G=localStorage.getItem("spv_dev_admin");if(!G)return{ok:!1,message:"No local dev admin found"};const K=JSON.parse(G),Y={...Pr,...K,id:K.id||"admin_local",email:K.email};return x(Y),Te(Y),console.log("signInWithLocalDevAdmin: signed in as local dev admin",Y.email),{ok:!0,message:"Signed in as local dev admin"}}catch(G){return console.warn("signInWithLocalDevAdmin failed:",G),{ok:!1,message:(G==null?void 0:G.message)||String(G)}}},Ce=()=>ke(null);S.useEffect(()=>{if(A||!h.id||h.id==="guest"||!Es)return;let G=!1;(async()=>{try{const{data:Y,error:ae}=await qe.from("users").select("*").eq("id",h.id).maybeSingle();if(!G&&!ae&&Y){const pe={...h,...Y};x(pe),Te(pe)}}catch(Y){console.warn("Failed to fetch user from Supabase:",Y)}})();const K=qe.channel(`users:${h.id}`).on("postgres_changes",{event:"*",schema:"public",table:"users",filter:`id=eq.${h.id}`},Y=>{const ae=Y.new;if(ae){const pe={...h,...ae};x(pe),Te(pe)}}).subscribe();return()=>{G=!0;try{K.unsubscribe()}catch{}}},[h.id,A]),S.useEffect(()=>{A||!Es||!(h!=null&&h.id)||h.id==="guest"||RN(h.id,h.name||(h.firstName?`${h.firstName} ${h.lastName||""}`.trim():void 0))},[h.id,A]);const Qe=G=>{ve(K=>{const ae=K.find(pe=>pe.name===G.name)?K.map(pe=>pe.name===G.name?G:pe):[...K,G];return localStorage.setItem("spv_packaging_presets",JSON.stringify(ae)),ae})},ut=G=>{ve(K=>{const Y=K.filter(ae=>ae.name!==G);return localStorage.setItem("spv_packaging_presets",JSON.stringify(Y)),Y})},ie=G=>{ue(K=>{const ae=K.find(pe=>pe.name===G.name)?K.map(pe=>pe.name===G.name?G:pe):[...K,G];return localStorage.setItem("spv_material_presets",JSON.stringify(ae)),ae})},Se=G=>{ue(K=>{const Y=K.filter(ae=>ae.name!==G);return localStorage.setItem("spv_material_presets",JSON.stringify(Y)),Y})},Be=async(G,K)=>{var ae;const Y=G.trim().toLowerCase();ke(null);try{const{data:pe,error:Ge}=await qe.auth.signInWithPassword({email:Y,password:K});if(Ge)return console.warn("Supabase signInWithPassword failed:",Ge.message),ke(Ge.message||"Sign-in failed."),!1;if(!(pe!=null&&pe.user))return ke("Authentication failed - no user data returned."),!1;const lt=pe.user.id,{data:te,error:le}=await qe.from("users").select("*").eq("id",lt).single();if(le){console.warn("Failed to fetch user profile:",le);const ht={...Pr,id:lt,email:Y,name:((ae=pe.user.user_metadata)==null?void 0:ae.full_name)||""};try{await qe.from("users").upsert([Qt(ht)])}catch(gt){console.warn("Failed to create basic user profile:",gt)}let it=Jy(ht);return Y==="spoilmevintagediy@gmail.com"&&(it.isAdmin=!0),it.isActive===!1?(ke("Account is deactivated."),!1):(x(it),Te(it),Gr(it),!0)}let Oe=Jy({...te,id:lt});return Y==="spoilmevintagediy@gmail.com"&&(Oe.isAdmin=!0),Oe.isActive===!1?(ke("Account is deactivated."),!1):(x(Oe),Te(Oe),Gr(Oe),!0)}catch(pe){return console.warn("Login error:",pe),ke((pe==null?void 0:pe.message)||String(pe)),!1}},Ne=async G=>{const K={...Pr,...G,id:`user_${Date.now()}`,affiliateCode:`Spoilme-${Date.now().toString().slice(-6)}`,affiliateStats:G.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1}};try{if(G.password&&G.email)try{const{data:Y,error:ae}=await qe.auth.signUp({email:G.email,password:G.password});if(ae)console.warn("Supabase signUp failed (falling back to local user):",ae.message);else if(Y!=null&&Y.user){K.id=Y.user.id;try{const pe=await qe.auth.signInWithPassword({email:G.email,password:G.password});pe.error?console.warn("Immediate signIn after signUp failed:",pe.error.message):console.log("Signed in after registration, session ready")}catch(pe){console.warn("Error signing in after signUp:",pe)}}}catch(Y){console.warn("Supabase signup attempt failed (continuing with local user):",Y)}try{const{error:Y}=await qe.from("users").upsert([Qt(K)]);Y&&console.warn("Upsert to users table failed (continuing locally):",Y)}catch(Y){console.warn("Upsert to users table threw (continuing locally):",Y)}return x(K),Te(K),!0}catch(Y){return console.error("Registration Failed (unexpected)",Y),x(K),Te(K),!0}},We=()=>{x(Pr),localStorage.removeItem("spv_active_user");try{qe.auth.signOut()}catch{}},jt=async G=>{const K={...h,shippingAddress:G};if(x(K),Te(K),!A&&h.id!=="guest")try{await qe.from("users").update({shippingAddress:G}).eq("id",h.id)}catch(Y){console.error("Error saving address to DB",Y)}},ye=async()=>{if(A){alert("Cannot seed users in Demo Mode.");return}const G=[{...Pr,id:"u1",name:"Elize Test 1",email:"eliz@gmail.com",password:"test",isMember:!1,membershipTier:"none",affiliateCode:"Spoilme-ELIZ01",affiliateStats:{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...Pr,id:"u2",name:"Anna Test 2",email:"anna@gmail.com",password:"test",isMember:!0,membershipTier:"basic",loyaltyPoints:100,affiliateCode:"Spoilme-ANNA02",affiliateStats:{status:"pending",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...Pr,id:"u3",name:"Fay Test 3",email:"fay@gmail.com",password:"test",isMember:!0,membershipTier:"premium",loyaltyPoints:500,affiliateCode:"Spoilme-FAY003",affiliateStats:{status:"approved",totalSalesCount:45,totalSalesValue:4500,commissionRate:10,balance:450,recurringBalance:50}},{...Pr,id:"u4",name:"Debs Test 4",email:"debs@gmail.com",password:"test",isMember:!0,membershipTier:"deluxe",loyaltyPoints:1e3,affiliateCode:"Spoilme-DEBS04",affiliateStats:{status:"approved",totalSalesCount:150,totalSalesValue:15e3,commissionRate:15,balance:2250,recurringBalance:300}}];try{for(const K of G)try{const{error:Y}=await qe.from("users").upsert([Qt(K)]);if(Y)throw Y}catch(Y){console.error("Failed to upsert test user into Supabase:",Y)}alert("Test Users Created!")}catch(K){console.error("Error seeding users:",K)}};S.useEffect(()=>{if(console.log("Loading products, isDemoMode:",A,"isSupabaseConfigured:",Es),console.log("Loading products, isDemoMode:",A,"isSupabaseConfigured:",Es),A||!Es){B(A?"demo":"local");const K=localStorage.getItem("spv_products"),ae=(K?JSON.parse(K):B1).filter(te=>te.status==="published");s(ae);const pe=localStorage.getItem("spv_categories");i(pe?JSON.parse(pe):px);const Ge=localStorage.getItem("spv_vouchers");Ge&&_(JSON.parse(Ge));const lt=localStorage.getItem("spv_orders");c(lt?JSON.parse(lt):[]),R(!1);return}const G=setTimeout(()=>{C&&($("Connection timed out"),R(!1))},5e3);try{const K=new Map,Y=async te=>{if(!te)return null;if(typeof te=="string"){if(te.startsWith("http")||te.startsWith("data:")||te.startsWith("blob:")||te.startsWith("/"))return te;if(te.startsWith("gs://"))try{const le=te.match(/^gs:\/\/([^/]+)\/(.+)$/);if(le){const Oe=le[1],ht=le[2],it=`https://firebasestorage.googleapis.com/v0/b/${Oe}/o/${encodeURIComponent(ht)}?alt=media`;return K.set(te,it),it}}catch(le){return console.error("Failed to convert gs:// URL to a public URL",te,le),null}if(!te.startsWith("http"))try{if(K.has(te))return K.get(te);const le=["public","products","images","spoilme"];for(const Oe of le)try{const{data:ht}=qe.storage.from(Oe).getPublicUrl(te);if(ht&&ht.publicUrl)return K.set(te,ht.publicUrl),ht.publicUrl}catch{}}catch{}return te}else if(typeof te=="object"&&(te.fullPath||te.path))try{const le=te.fullPath||te.path,Oe=le+"::path";if(K.has(Oe))return K.get(Oe);const ht=["public","products","images","spoilme"];for(const it of ht)try{const{data:gt}=qe.storage.from(it).getPublicUrl(le);if(gt&&gt.publicUrl)return K.set(Oe,gt.publicUrl),gt.publicUrl}catch{}}catch(le){return console.error("Failed to convert storage object path to public URL",te,le),null}return null},ae=te=>{if(typeof te!="string")return te;const le=te.trim();if(!le||!(le.startsWith("{")&&le.endsWith("}")||le.startsWith("[")&&le.endsWith("]")))return te;try{return JSON.parse(le)}catch{return te}},pe=(...te)=>{for(const le of te)if(le!=null&&(typeof le!="string"||le.trim()!==""))return le},Ge=async te=>{var Ee,Ve;const le={};Object.entries(te||{}).forEach(([Je,bt])=>{const Yt=Je.replace(/_([a-z])/g,(mr,Kr)=>Kr.toUpperCase());le[Yt]=bt}),le.options=ae(le.options);const Oe=le.options&&typeof le.options=="object"&&!Array.isArray(le.options)?le.options:{};le.id=pe(le.id,te==null?void 0:te.id),le.code=pe(le.code,le.sku,te==null?void 0:te.sku,te==null?void 0:te.code,Oe==null?void 0:Oe.sku,Oe==null?void 0:Oe.code);const ht=pe(le.priceUSD,le.priceUsd,te==null?void 0:te.price_usd,te==null?void 0:te.priceUSD,Oe==null?void 0:Oe.priceUSD,Oe==null?void 0:Oe.priceUsd);ht!==void 0&&(le.priceUSD=typeof ht=="number"?ht:parseFloat(String(ht))||0);const it=pe(le.compareAtPriceUSD,le.compareAtPriceUsd,te==null?void 0:te.compare_at_price_usd,te==null?void 0:te.compareAtPriceUSD,Oe==null?void 0:Oe.compareAtPriceUSD,Oe==null?void 0:Oe.compareAtPriceUsd);it!==void 0&&(le.compareAtPriceUSD=typeof it=="number"?it:parseFloat(String(it))||0);const gt=pe(le.memberPriceUSD,le.memberPriceUsd,te==null?void 0:te.member_price_usd,te==null?void 0:te.memberPriceUSD,Oe==null?void 0:Oe.memberPriceUSD,Oe==null?void 0:Oe.memberPriceUsd);if(gt!==void 0&&(le.memberPriceUSD=typeof gt=="number"?gt:parseFloat(String(gt))||0),!le.type&&(Oe!=null&&Oe.type)&&(le.type=Oe.type),(!le.colors||Array.isArray(le.colors)&&le.colors.length===0)&&(Oe!=null&&Oe.colors)&&(le.colors=Oe.colors),(!le.tags||Array.isArray(le.tags)&&le.tags.length===0)&&(Oe!=null&&Oe.tags)&&(le.tags=Oe.tags),!le.material&&(Oe!=null&&Oe.material)&&(le.material=Oe.material),!le.description&&(Oe!=null&&Oe.description)&&(le.description=Oe.description),!le.name&&(Oe!=null&&Oe.name)&&(le.name=Oe.name),!le.createdAt&&(te!=null&&te.created_at))try{le.createdAt=typeof te.created_at=="string"?te.created_at:(Ee=te.created_at)!=null&&Ee.toISOString?te.created_at.toISOString():String(te.created_at)}catch{le.createdAt=String(te.created_at)}if(!le.updatedAt&&(te!=null&&te.updated_at))try{le.updatedAt=typeof te.updated_at=="string"?te.updated_at:(Ve=te.updated_at)!=null&&Ve.toISOString?te.updated_at.toISOString():String(te.updated_at)}catch{le.updatedAt=String(te.updated_at)}const Ht=ae(le.images);le.images=Array.isArray(Ht)?Ht:Ht?[Ht]:[];const _t=ae(le.tags);le.tags=Array.isArray(_t)?_t:_t?[_t]:[];const D=ae(le.colors);le.colors=Array.isArray(D)?D:D?[D]:[];const re=ae(le.seoKeywords);le.seoKeywords=Array.isArray(re)?re:re?[re]:[];const $e=ae(le.reviews);le.reviews=Array.isArray($e)?$e:$e?[$e]:[];try{if(le.images&&Array.isArray(le.images)){const Je=await Promise.all(le.images.map(async bt=>await Y(bt)));le.images=Je.filter(Boolean)}}catch(Je){console.error("Failed resolving product images for",le.id||(te==null?void 0:te.id),Je)}return le},lt=async()=>{try{const{data:te,error:le}=await qe.from("products").select("*").eq("status","published").order("created_at",{ascending:!1});if(console.log(" SUPABASE ERROR:",le),console.log(" SUPABASE DATA:",te),!le&&te){const it=await Promise.all(te.map(async gt=>await Ge(gt)));if(console.log("Loaded products from Supabase:",it.length),B("supabase"),it.length===0)try{const{data:gt}=await qe.from("products").select("*").limit(5);console.warn("No published products found  sample rows from products table:",gt)}catch(gt){console.warn("Failed to fetch sample products for debug:",gt)}s(it)}else if(le&&String((le==null?void 0:le.message)||(le==null?void 0:le.code)||"").toLowerCase().includes("permission"))try{const gt=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?`http://${window.location.hostname}:3001/api`:sI.REACT_APP_API_URL||"/api",Ht=await fetch(`${gt}/products?limit=100`);if(Ht.ok){const _t=await Ht.json(),D=Array.isArray(_t.products)?_t.products:[],re=await Promise.all(D.map(async $e=>await Ge($e)));console.log("Loaded products from server endpoint:",re.length),B("supabase"),s(re)}}catch(it){console.warn("Fallback to /api/products failed:",it)}const{data:Oe,error:ht}=await qe.from("categories").select("*").order("created_at",{ascending:!1});if(!ht&&Oe&&Oe.length>0){const it=await Promise.all(Oe.map(async gt=>{const Ht={};Object.entries(gt).forEach(([_t,D])=>{const re=_t.replace(/_([a-z])/g,($e,Ee)=>Ee.toUpperCase());Ht[re]=D});try{if(Ht.image){const _t=await Y(Ht.image);_t&&(Ht.image=_t)}}catch{}return Ht}));i(it)}else i(px);if(h!=null&&h.isAdmin){const{data:it}=await qe.from("orders").select("*").order("created_at",{ascending:!1});it&&c(it)}else if(h!=null&&h.email){const{data:it}=await qe.from("orders").select("*").eq("customer_email",h.email).order("created_at",{ascending:!1});it&&c(it)}clearTimeout(G),R(!1)}catch(te){console.warn("Supabase fetch failed, falling back to Firestore where available:",te)}};if(Es){lt();const te=qe.channel("public:products").on("postgres_changes",{event:"*",schema:"public",table:"products"},()=>lt()).subscribe(),le=qe.channel("public:categories").on("postgres_changes",{event:"*",schema:"public",table:"categories"},()=>lt()).subscribe(),Oe=qe.channel("public:orders").on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>lt()).subscribe();return()=>{clearTimeout(G);try{te.unsubscribe()}catch{}try{le.unsubscribe()}catch{}try{Oe.unsubscribe()}catch{}}}}catch(K){console.log("Try-catch error in products useEffect:",K),clearTimeout(G),R(!1)}},[A,h.isAdmin,h.email]);const J=(G,K={})=>{f(Y=>{const ae=Y.findIndex(te=>te.id===G.id&&te.selectedSize===K.selectedSize&&te.selectedMaterial===K.selectedMaterial&&te.selectedChainStyle===K.selectedChainStyle&&te.selectedChainLength===K.selectedChainLength),pe=ae>-1?Y[ae]:null,Ge=pe?pe.quantity:0;let lt=G.stock;if(G.type==="Ring"&&K.selectedSize&&G.ringStock&&(lt=G.ringStock[K.selectedSize]||0),Ge>=lt)return alert(`Sorry, you can't add more of this item. We only have ${lt} in stock.`),Y;if(ae>-1){const te=[...Y];return te[ae]={...te[ae],quantity:te[ae].quantity+1},te}return[...Y,{...G,quantity:1,...K}]})},_e=(G,K={})=>{f(Y=>Y.filter(ae=>!(ae.id===G&&ae.selectedSize===K.selectedSize&&ae.selectedMaterial===K.selectedMaterial&&ae.selectedChainStyle===K.selectedChainStyle&&ae.selectedChainLength===K.selectedChainLength)))},kt=(G,K,Y={})=>{if(K<=0){_e(G,Y);return}const ae=e.find(lt=>lt.id===G);if(!ae)return;let pe=ae.stock;ae.type==="Ring"&&Y.selectedSize&&ae.ringStock&&(pe=ae.ringStock[Y.selectedSize]||0);const Ge=Math.min(K,pe);K>pe&&alert(`Sorry, we only have ${pe} of this item in stock. Quantity has been adjusted.`),f(lt=>lt.map(te=>te.id===G&&te.selectedSize===Y.selectedSize&&te.selectedMaterial===Y.selectedMaterial&&te.selectedChainStyle===Y.selectedChainStyle&&te.selectedChainLength===Y.selectedChainLength?{...te,quantity:Ge}:te))},xt=()=>{f([]),Z(null)},Wt=G=>{x(K=>{const ae=K.wishlist.includes(G)?K.wishlist.filter(Ge=>Ge!==G):[...K.wishlist,G],pe={...K,wishlist:ae};return Te(pe),pe})},$t=async G=>{if(!h.id||h.id==="guest"){console.error("Cannot apply for affiliate as guest user directly.");return}const K={userId:h.id,status:"pending",appliedAt:new Date().toISOString(),autoApproveAt:new Date(Date.now()+3600*1e3),userEmail:h.email,userName:`${G.name} ${G.surname}`,gender:G.gender,reason:G.reason,socials:G.socials};if(!A)try{await qe.from("affiliate_applications").insert([K])}catch(pe){throw console.error("Error submitting affiliate application to Supabase:",pe),pe}const Y={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},ae={...h,name:`${G.name} ${G.surname}`,birthday:G.dob,notifications:[Y,...h.notifications],affiliateStats:{...h.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1},status:"pending",gender:G.gender,joinReason:`${G.reason} | Socials: ${G.socials}`}};x(ae),Te(ae),!A&&h.id!=="guest"&&await Ue(h.id,Qt(ae))},Ss=async(G,K)=>{if(A)return;const Y={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Welcome to the Partnership Program!",message:`Welcome to Spoil Me Vintage Partnership Program! We are thrilled to have you on the team.${K?` Note from admin: ${K}`:""}`,date:new Date().toISOString(),isRead:!1};try{const{data:ae}=await qe.from("users").select("notifications").eq("id",G).maybeSingle(),pe=ae&&ae.notifications||[];await qe.from("users").update({affiliateStats:{status:"approved",commissionRate:10,adminNote:K||""},notifications:[Y,...pe]}).eq("id",G),await Xe(G,Y.title,Y.message,"/#/affiliate-program")}catch(ae){console.error("approveAffiliate failed:",ae)}},os=async(G,K)=>{if(A)return;const Y={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Partnership Application Update",message:`We regret to inform you that your application has been declined.${K?` Note: ${K}`:""}`,date:new Date().toISOString(),isRead:!1};try{const{data:ae}=await qe.from("users").select("notifications").eq("id",G).maybeSingle(),pe=ae&&ae.notifications||[];await qe.from("users").update({affiliateStats:{status:"rejected",adminNote:K||""},notifications:[Y,...pe]}).eq("id",G),await Xe(G,Y.title,Y.message,"/#/notifications")}catch(ae){console.error("rejectAffiliate failed:",ae)}},Le=async(G,K)=>{if(A)return;const Y={id:`aff_msg_${Date.now()}`,type:"affiliate_msg",title:"Partnership Update",message:K,date:new Date().toISOString(),isRead:!1};await rt(G,Y),await Xe(G,Y.title,Y.message,"/#/notifications")},fs=async(G,K)=>{A||await Ue(G,{affiliateStats:{...h.affiliateStats||{},commissionRate:K}})},ls=async(G,K)=>{A||await Ue(G,{affiliateStats:{...h.affiliateStats||{},parentId:K}})},Ws=async()=>{const G={...h,affiliateStats:{...h.affiliateStats,hasContentAccess:!0}};x(G),Te(G),!A&&h.id!=="guest"&&await Ue(h.id,Qt(G))},ur=async()=>{const G={...h,affiliateStats:{...h.affiliateStats,isElite:!0}};x(G),Te(G),!A&&h.id!=="guest"&&await Ue(h.id,Qt(G))},Ms=async(G,K)=>{var lt;if(!A&&!qe)return{success:!1,message:"Database not ready"};let Y=null;if(A)if(h.affiliateCode===G)Y=h;else return{success:!1,message:"In Demo Mode, only your own code works."};else{const{data:te,error:le}=await qe.from("users").select("*").eq("affiliateCode",G).limit(1).maybeSingle();te&&!le&&(Y=te)}if(!Y)return{success:!1,message:"Affiliate code not found."};if(((lt=Y.affiliateStats)==null?void 0:lt.status)!=="approved"&&!A)return{success:!1,message:"Affiliate not approved."};const ae=Y.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0},pe=K*ae.commissionRate/100,Ge={...ae,totalSalesCount:ae.totalSalesCount+1,totalSalesValue:ae.totalSalesValue+K,balance:ae.balance+pe};if(Ge.totalSalesCount>=500?Ge.commissionRate=20:Ge.totalSalesCount>=100?Ge.commissionRate=15:Ge.totalSalesCount>=50&&(Ge.commissionRate=11),A)x({...Y,affiliateStats:Ge});else{const te={id:`sale_${Date.now()}`,type:"system",title:"New Partnership Sale!",message:`You earned R${pe.toFixed(2)} commission!`,date:new Date().toISOString(),isRead:!1};try{await qe.from("users").update({affiliateStats:Ge,notifications:[te,...Y.notifications||[]]}).eq("id",Y.id)}catch(le){console.error("Failed to update affiliate user after sale:",le)}}return{success:!0,message:`Sale simulated! Added R${pe.toFixed(2)}.`}},Os=async(G,K)=>{if(A){if(h.id===G){const Y={...h,loyaltyPoints:h.loyaltyPoints+K};x(Y),Te(Y)}return}if(h.id===G){const Y={...h,loyaltyPoints:h.loyaltyPoints+K};x(Y),Te(Y),await qe.from("users").update({loyaltyPoints:Y.loyaltyPoints}).eq("id",G)}else try{const{data:Y}=await qe.from("users").select("loyaltyPoints").eq("id",G).maybeSingle(),ae=(Y&&Y.loyaltyPoints||0)+K;await qe.from("users").update({loyaltyPoints:ae}).eq("id",G)}catch(Y){console.error("adminAdjustPoints failed:",Y)}},Mn=async()=>{if(A)return[];try{const{data:G,error:K}=await qe.from("users").select("*");if(K)throw K;return(G||[]).map(Y=>Qt(Y))}catch(G){return console.error("getAllUsers failed:",G),[]}},On=async G=>{const K=Qt(G),Y=[K,...e];if(s(Y),!A&&Es)try{console.log("DEBUG: Final Product Data to Firestore (Add):",JSON.stringify(K,null,2));try{const{error:ae}=await qe.from("products").upsert([K]);if(ae)throw ae;$(null)}catch(ae){console.warn("Supabase addProduct failed, saving to local storage instead:",ae);try{const pe=JSON.parse(localStorage.getItem("spv_products")||"[]");localStorage.setItem("spv_products",JSON.stringify([K,...pe]))}catch{}}$(null)}catch(ae){console.error("CRITICAL FIRESTORE ERROR (addProduct):",ae,"Product:",K);try{localStorage.setItem("spv_products",JSON.stringify(Y)),$(`Failed to add product: ${ae.code||"Unknown Error"}. Changes saved locally.`),console.warn("Firestore write failed  product saved to localStorage instead.")}catch(pe){throw console.error("Fallback localStorage save also failed:",pe),new Error(`Critical Save Failure. Firestore and LocalStorage failed. (Details: ${pe.message})`)}throw new Error(ae.message||"Failed to add product.")}else try{localStorage.setItem("spv_products",JSON.stringify(Y))}catch(ae){throw console.error("Failed to save products to localStorage on addProduct:",ae),new Error("Failed to add product in Demo Mode: LocalStorage error.")}},ms=async G=>{const K=Qt(G),Y=e.map(ae=>ae.id===K.id?K:ae);if(s(Y),!A&&Es)try{console.log("DEBUG: Final Product Data to Firestore (Update):",JSON.stringify(K,null,2));try{const{error:ae}=await qe.from("products").update(K).eq("id",K.id);if(ae)throw ae;$(null)}catch(ae){console.warn("Supabase updateProduct failed, saving to local storage instead:",ae);try{const Ge=JSON.parse(localStorage.getItem("spv_products")||"[]").map(lt=>lt.id===K.id?K:lt);localStorage.setItem("spv_products",JSON.stringify(Ge))}catch{}}}catch(ae){console.error("CRITICAL FIRESTORE ERROR (updateProduct):",ae,"Product:",K);try{localStorage.setItem("spv_products",JSON.stringify(Y)),$(`Failed to update product: ${ae.code||"Unknown Error"}. Changes saved locally.`),console.warn("Firestore write failed  update saved to localStorage instead.")}catch(pe){throw console.error("Fallback localStorage save also failed:",pe),new Error(`Critical Save Failure. Firestore and LocalStorage failed. (Details: ${pe.message})`)}throw new Error(ae.message||"Failed to update product.")}else try{localStorage.setItem("spv_products",JSON.stringify(Y))}catch(ae){throw console.error("Failed to save products to localStorage on updateProduct:",ae),new Error("Failed to update product in Demo Mode: LocalStorage error.")}},Ls=async G=>{const K=e.filter(Y=>Y.id!==G);if(s(K),!A&&Es)try{console.log("DEBUG: Final Product Delete to Supabase/Firestore:",G);try{const{error:Y}=await qe.from("products").delete().eq("id",G);if(Y)throw Y}catch(Y){console.warn("Supabase deleteProduct failed, removing from local storage instead:",Y);try{const ae=JSON.parse(localStorage.getItem("spv_products")||"[]");localStorage.setItem("spv_products",JSON.stringify(ae.filter(pe=>pe.id!==G)))}catch{}}$(null)}catch(Y){console.error("CRITICAL FIRESTORE ERROR (deleteProduct):",Y,"productId:",G);try{localStorage.setItem("spv_products",JSON.stringify(K)),$(`Failed to delete product: ${Y.code||"Unknown Error"}. Change saved locally.`),console.warn("Firestore delete failed  delete reflected locally.")}catch(ae){throw console.error("Fallback localStorage save also failed:",ae),new Error(`Critical Delete Failure. Firestore and LocalStorage failed. (Details: ${ae.message})`)}throw new Error(Y.message||"Failed to delete product.")}else try{localStorage.setItem("spv_products",JSON.stringify(K))}catch(Y){console.error("Failed to save products to localStorage on deleteProduct:",Y)}},Vt=async G=>{const K=Qt(G);if(c(Y=>[K,...Y]),!A&&Es)try{const{error:Y}=await qe.from("orders").upsert([K]);if(Y)throw Y}catch(Y){console.error("Failed to addOrder to Supabase, saving to local storage instead:",Y);try{const ae=JSON.parse(localStorage.getItem("spv_orders")||"[]");localStorage.setItem("spv_orders",JSON.stringify([K,...ae]))}catch{}}},ks=async G=>{const K=Qt(G);if(c(Y=>Y.map(ae=>ae.id===K.id?K:ae)),!A&&Es)try{const{error:Y}=await qe.from("orders").update(K).eq("id",K.id);if(Y)throw Y}catch(Y){console.error("Failed to updateOrder in Supabase, saving to local storage instead:",Y);try{const pe=JSON.parse(localStorage.getItem("spv_orders")||"[]").map(Ge=>Ge.id===K.id?K:Ge);localStorage.setItem("spv_orders",JSON.stringify(pe))}catch{}}},ts=async G=>{if(c(K=>K.filter(Y=>Y.id!==G)),!A&&Es)try{const{error:K}=await qe.from("orders").delete().eq("id",G);if(K)throw K}catch(K){console.error("Failed to deleteOrder in Supabase, removing from local storage instead:",K);try{const Y=JSON.parse(localStorage.getItem("spv_orders")||"[]");localStorage.setItem("spv_orders",JSON.stringify(Y.filter(ae=>ae.id!==G)))}catch{}}},je=async G=>{const K=Qt(G);if(i(Y=>[...Y,K]),!A&&Es)try{const{error:Y}=await qe.from("categories").upsert([K]);if(Y)throw Y}catch(Y){console.error("Supabase addCategory error, saving to local storage instead:",Y);try{const ae=JSON.parse(localStorage.getItem("spv_categories")||"[]");localStorage.setItem("spv_categories",JSON.stringify([K,...ae]))}catch{}}else localStorage.setItem("spv_categories",JSON.stringify([...r,K]))},Ye=async G=>{const K=Qt(G);if(i(Y=>Y.map(ae=>ae.id===K.id?K:ae)),!A&&Es)try{const{error:Y}=await qe.from("categories").update(K).eq("id",K.id);if(Y)throw Y}catch(Y){console.error("Supabase updateCategory error, saving to local storage instead:",Y);try{const pe=JSON.parse(localStorage.getItem("spv_categories")||"[]").map(Ge=>Ge.id===K.id?K:Ge);localStorage.setItem("spv_categories",JSON.stringify(pe))}catch{}}else{const Y=r.map(ae=>ae.id===K.id?K:ae);localStorage.setItem("spv_categories",JSON.stringify(Y))}},Et=async G=>{if(i(K=>K.filter(Y=>Y.id!==G)),!A&&Es)try{const{error:K}=await qe.from("categories").delete().eq("id",G);if(K)throw K}catch(K){console.error("Supabase deleteCategory error, removing from local storage instead:",K);try{const Y=JSON.parse(localStorage.getItem("spv_categories")||"[]");localStorage.setItem("spv_categories",JSON.stringify(Y.filter(ae=>ae.id!==G)))}catch{}}else{const K=r.filter(Y=>Y.id!==G);localStorage.setItem("spv_categories",JSON.stringify(K))}},Tt=async G=>{const K=Qt(G);i(K),A&&localStorage.setItem("spv_categories",JSON.stringify(K))},Rt=G=>N(K=>[...K,G]),Mt=G=>{const K=Qt(G);_(ae=>[...ae,K]);const Y=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify([...Y,K]))},Ut=G=>{_(Y=>Y.filter(ae=>ae.code!==G));const K=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify(K.filter(Y=>Y.code!==G)))},Bt=G=>{const K=T.find(Y=>Y.code===G);return K?(Z(K),!0):!1},Gn=()=>{localStorage.clear(),window.location.reload()},un=()=>u.reduce((G,K)=>G+(K.price+(K.selectedMaterialModifier||0))*K.quantity,0),hn=async G=>{var te;if(!h.email)throw new Error("User must be logged in to checkout.");const K={...G,id:`ord_${Date.now()}`,orderNumber:`#SMV-${Date.now().toString().slice(-6)}`,date:new Date().toISOString(),customerName:h.name,customerEmail:h.email,status:"Pending"};await Vt(K),h.affiliateCode&&h.affiliateCode!=="none"&&await bi(u,K.id,h.affiliateCode);const Y=[];for(const le of u)(te=le.tags)!=null&&te.includes("Voucher")||Y.push({id:`notif_${Date.now()}_${le.id}`,type:"review_request",title:"How was your purchase?",message:`Review ${le.name} to earn 100 Points!`,productId:le.id,productName:le.name,date:new Date().toISOString(),isRead:!1});let ae=0;const pe=un();h!=null&&h.storeCredit&&h.storeCredit>0&&h.creditCurrency===se&&(ae=Math.min(pe,h.storeCredit));const Ge=Math.floor(se==="ZAR"?G.total/10:G.total/3),lt={...h,loyaltyPoints:Math.max(0,h.loyaltyPoints+Ge-(G.pointsToRedeem||0)),storeCredit:Math.max(0,(h.storeCredit||0)-ae),notifications:[...Y,...h.notifications]};return x(lt),Te(lt),!A&&h.id!=="guest"&&await Ue(h.id,Qt(lt)),K},hr=async(G,K)=>{const Y="GV-"+Math.random().toString(36).substr(2,9).toUpperCase(),ae={code:Y,discountType:"fixed",value:G,minSpend:G,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};Mt(ae);const pe={id:`gift_${Date.now()}`,type:"gift_ready",title:"Gift Ready",message:"Your voucher is ready.",date:new Date().toISOString(),isRead:!1,voucherData:{code:Y,amount:G,meta:K}},Ge={...h,notifications:[pe,...h.notifications]};x(Ge),Te(Ge),!A&&h.id!=="guest"&&await Ue(h.id,Qt(Ge))},zs=async(G,K,Y,ae)=>{if(h.id==="guest")return;const pe=e.find(lt=>lt.id===G);if(pe){const lt={id:`rev_${Date.now()}`,userName:h.name,location:"Verified Buyer",content:Y,rating:K,date:new Date().toLocaleDateString()};await ms({...pe,reviews:[lt,...pe.reviews||[]]})}const Ge={...h,loyaltyPoints:h.loyaltyPoints+100,notifications:h.notifications.filter(lt=>lt.id!==ae)};x(Ge),Te(Ge),!A&&h.id!=="guest"&&await Ue(h.id,Qt(Ge))},yi=async G=>{const K={...h,loyaltyPoints:h.loyaltyPoints+50};x(K),Te(K),!A&&h.id!=="guest"&&await Ue(h.id,{loyaltyPoints:K.loyaltyPoints})},qr=async(G,K)=>{if(h.id==="guest")return;const Y=h.socialRewards||{};if(Y[G])return;const ae={...h,loyaltyPoints:h.loyaltyPoints+100,socialRewards:{...Y,[G]:!0},socialHandles:{...h.socialHandles,[G]:K}};x(ae),Te(ae),!A&&h.id!=="guest"&&await Ue(h.id,Qt(ae))},Wr=(G,K,Y="system")=>{const ae={id:`sys_${Date.now()}`,type:Y,title:G,message:K,date:new Date().toISOString(),isRead:!1},pe={...h,notifications:[ae,...h.notifications]};x(pe),Te(pe)},tn=()=>{try{const G=JSON.stringify(e);return G.length>0?{status:"success",details:`Serialization OK. Size: ${(G.length/1024).toFixed(2)} KB`}:{status:"warning",details:"Empty products."}}catch(G){return{status:"error",details:`Error: ${G.message}`}}},Hr=()=>{xe(G=>G==="ZAR"?"USD":"ZAR")};S.useEffect(()=>{L(Yy(H))},[H]);const bi=async(G,K,Y)=>{var ae,pe,Ge,lt;if(A){if(h.affiliateCode===Y){const te=h.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,weeklyMilestones:{membershipsSold:0,salesValue:0,vaultItemsSold:0,weekStart:""}},le=G.reduce((ht,it)=>ht+(se==="ZAR"?it.price:it.priceUSD)*it.quantity,0),Oe={...te,totalSalesCount:te.totalSalesCount+G.length,totalSalesValue:te.totalSalesValue+le,balance:te.balance+le*(te.commissionRate/100)};x({...h,affiliateStats:Oe}),Te({...h,affiliateStats:Oe})}return}try{const{data:te}=await qe.from("users").select("*").eq("affiliateCode",Y).limit(1).maybeSingle();if(!te||((ae=te.affiliateStats)==null?void 0:ae.status)!=="approved")return;const le=te.affiliateStats,Oe=G.filter(Ee=>!Ee.vaultItem),ht=G.filter(Ee=>Ee.vaultItem);let it=0,gt=0,Ht=0;const _t=[];for(const Ee of Oe){const Ve=se==="ZAR"?Ee.price:Ee.priceUSD,Je=le.commissionRate/100,bt=Ve*Ee.quantity*Je;it+=bt,_t.push({id:`comm_${Date.now()}_${Ee.id}`,affiliateId:te.id,orderId:K,itemId:Ee.id,itemName:Ee.name,itemType:"standard",basePrice:Ve,commissionRate:le.commissionRate,commissionAmount:bt,currency:se,date:new Date().toISOString()})}for(const Ee of ht){const Ve=se==="ZAR"?Ee.price:Ee.priceUSD,Je=Ve*Ee.quantity*.01;gt+=Je,Ht+=Ee.quantity,_t.push({id:`comm_${Date.now()}_${Ee.id}`,affiliateId:te.id,orderId:K,itemId:Ee.id,itemName:Ee.name,itemType:"vault",basePrice:Ve,commissionRate:1,commissionAmount:Je,currency:se,date:new Date().toISOString()})}const D=it+gt,re={...le,totalSalesCount:le.totalSalesCount+G.length,totalSalesValue:le.totalSalesValue+G.reduce((Ee,Ve)=>Ee+(se==="ZAR"?Ve.price:Ve.priceUSD)*Ve.quantity,0),balance:(le.balance||0)+D,vaultPurchasesThisMonth:(le.vaultPurchasesThisMonth||0)+Ht,weeklyMilestones:{...le.weeklyMilestones,salesValue:(((pe=le.weeklyMilestones)==null?void 0:pe.salesValue)||0)+G.reduce((Ee,Ve)=>Ee+(se==="ZAR"?Ve.price:Ve.priceUSD)*Ve.quantity,0),vaultItemsSold:(((Ge=le.weeklyMilestones)==null?void 0:Ge.vaultItemsSold)||0)+Ht}};re.totalSalesValue>=5e4?re.commissionRate=20:re.totalSalesValue>=15e3?re.commissionRate=15:re.totalSalesValue>=5e3&&(re.commissionRate=11);const $e={id:`commission_${Date.now()}`,type:"system",title:"New Commission Earned!",message:`You earned ${se==="ZAR"?"R":"$"}${D.toFixed(2)} from this sale!`,date:new Date().toISOString(),isRead:!1};if(await qe.from("users").update({affiliateStats:re,notifications:[$e,...te.notifications||[]]}).eq("id",te.id),le.parentId)try{const{data:Ee}=await qe.from("users").select("*").eq("id",le.parentId).maybeSingle();if(Ee&&((lt=Ee.affiliateStats)==null?void 0:lt.status)==="approved"){const Ve=Ee.affiliateStats,Je=D*.01,bt={...Ve,balance:(Ve.balance||0)+Je},Yt={id:`team_bonus_${Date.now()}`,type:"system",title:"Team Leader Bonus",message:`You earned ${se==="ZAR"?"R":"$"}${Je.toFixed(2)} from a recruit's sale!`,date:new Date().toISOString(),isRead:!1};await qe.from("users").update({affiliateStats:bt,notifications:[Yt,...Ee.notifications||[]]}).eq("id",Ee.id)}}catch(Ee){console.error("Failed to process parent commission",Ee)}try{_t.length>0&&await qe.from("commission_records").insert(_t)}catch(Ee){console.error("Failed to persist commission_records to Supabase:",Ee);const Ve=JSON.parse(localStorage.getItem("commission_records")||"[]");localStorage.setItem("commission_records",JSON.stringify([...Ve,..._t]))}try{const Ee=[],Ve=new Date().toISOString().split("T")[0];if(re.weeklyMilestones.membershipsSold>=5&&!localStorage.getItem(`milestone_${te.id}_sprinter_${Ve}`)){const bt=se==="ZAR"?50:5;re.balance+=bt,Ee.push({id:`milestone_${Date.now()}`,affiliateId:te.id,type:"sprinter",achievedAt:new Date().toISOString(),bonusAmount:bt,currency:se,weekStart:Ve}),localStorage.setItem(`milestone_${te.id}_sprinter_${Ve}`,"true")}if(Ee.length>0){const Je=JSON.parse(localStorage.getItem("affiliate_milestones")||"[]");localStorage.setItem("affiliate_milestones",JSON.stringify([...Je,...Ee]))}}catch(Ee){console.warn("Failed processing affiliate milestones locally",Ee)}}catch(te){console.error("Failed to process affiliate commissions",te)}},fr=async G=>{if(!(A||h.id==="guest"))try{const K={id:`acct_close_admin_${Date.now()}`,type:"system",title:"Account Closure Request",message:`${h.name} (${h.email}) has requested account closure. Reason: ${G}`,date:new Date().toISOString(),isRead:!1};await qe.from("users").update({isActive:!1,closureReason:G,closureRequestedAt:new Date().toISOString(),scheduledDeletionAt:new Date(Date.now()+1440*60*1e3).toISOString()}).eq("id",h.id);const{data:Y}=await qe.from("users").select("notifications").eq("email","spoilmevintagediy@gmail.com").limit(1).maybeSingle();if(Y){const pe=Y.notifications||[];await qe.from("users").update({notifications:[K,...pe]}).eq("email","spoilmevintagediy@gmail.com")}const ae={id:`acct_close_user_${Date.now()}`,type:"system",title:"Account Closure Requested",message:"Your account closure has been requested. Your account and all data will be permanently deleted within 24 hours.",date:new Date().toISOString(),isRead:!1};await rt(h.id,ae),await Xe(h.id,ae.title,ae.message,"/#/profile")}catch(K){throw console.error("Error closing account:",K),K}},Gr=G=>{"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"USER_DATA",name:G.name||G.firstName+" "+G.lastName||"valued customer"})},Ln=async G=>{var Ge,lt;if((!h.id||h.id==="guest")&&!A){console.error("Cannot apply for artist as guest user.");return}let K=h&&h.id?String(h.id):null;if(K&&/^user_/.test(K)&&typeof qe<"u"&&qe)try{const te=await qe.auth.getUser(),le=(lt=(Ge=te==null?void 0:te.data)==null?void 0:Ge.user)==null?void 0:lt.id;le&&(K=le)}catch(te){console.warn("applyForArtist: could not resolve real auth user id, proceeding with existing id",te)}try{const{data:te,error:le}=await qe.from("artist_applications").select("id,status").eq("user_id",K).in("status",["pending","approved"]);if(le)console.warn("applyForArtist duplicate check could not complete (Supabase error), continuing:",le);else if(te&&te.length>0)throw new Error("You already have an active application.")}catch(te){console.warn("applyForArtist duplicate check encountered an unexpected error, continuing as best-effort:",te)}const Y={uid:K||h.id,user_id:K||h.id,name:G.name,surname:G.surname,artistTradeName:G.artistTradeName,contactNumber:G.contactNumber,email:G.email,productImages:G.productImages,product_images:JSON.stringify(G.productImages||[]),plan:G.plan||null,termsAgreed:!!G.termsAgreed,terms_agreed:!!G.termsAgreed,status:"pending",submitted_at:new Date().toISOString(),submittedAt:new Date().toISOString()};if(A)try{const te=await qe.from("artist_applications").insert([Y]).select().maybeSingle();if(te!=null&&te.error)throw te.error;const le=(te==null?void 0:te.data)||te,Oe={...h,artistApplicationStatus:"pending",artistApplicationId:(le==null?void 0:le.id)||null};x(Oe),Te(Oe);try{await Ue(h.id,{artistApplicationStatus:"pending",artistApplicationId:(le==null?void 0:le.id)||null})}catch{}const ht={id:`artist_app_sub_${Date.now()}`,type:"system",title:"Artist Application Received",message:"Thank you for applying to the Spoil Me Vintage Artist Program. We will review your application and respond within 72 hours.",date:new Date().toISOString(),isRead:!1};try{await rt(h.id,ht),await Xe(h.id,ht.title,ht.message)}catch{}}catch(te){console.warn("Supabase insert failed in demo mode; falling back to local persistence",te);try{const le=localStorage.getItem("spv_artist_applications"),Oe=le?JSON.parse(le):[],ht=`demo_${Date.now()}`,it={...Y,id:ht,uid:(h==null?void 0:h.id)||"demo_user"};Oe.unshift(it),localStorage.setItem("spv_artist_applications",JSON.stringify(Oe));const gt={...h,artistApplicationStatus:"pending",artistApplicationId:ht};x(gt),Te(gt);const Ht={id:`artist_app_sub_${Date.now()}`,type:"system",title:"Artist Application Received",message:"Thank you for applying to the Spoil Me Vintage Artist Program (demo). We will review your application and respond within 72 hours.",date:new Date().toISOString(),isRead:!1};await rt((h==null?void 0:h.id)||"demo_user",Ht)}catch(le){throw console.error("Failed to persist demo application locally",le),le}}else try{const te=await qe.from("artist_applications").insert([Y]).select().maybeSingle();console.log("artist_applications.insert response",te);const le=(te==null?void 0:te.data)||te;if(te!=null&&te.error)throw console.error("Insert into artist_applications returned error object:",te),te.error||te;const Oe={...h,artistApplicationStatus:"pending",artistApplicationId:(le==null?void 0:le.id)||null};x(Oe),Te(Oe),await Ue(h.id,{artistApplicationStatus:"pending",artistApplicationId:(le==null?void 0:le.id)||null});const ht={id:`artist_app_sub_${Date.now()}`,type:"system",title:"Artist Application Received",message:"Thank you for applying to the Spoil Me Vintage Artist Program. We will review your application and respond within 72 hours. If approved, you will receive instructions on next steps.",date:new Date().toISOString(),isRead:!1};await rt(h.id,ht),await Xe(h.id,ht.title,ht.message)}catch(te){throw console.error("Error submitting artist application:",te),te}const ae={id:`artist_app_${Date.now()}`,type:"system",title:"Artist Partnership Application Received",message:"Your application to become an artist partner is pending review. We will contact you soon!",date:new Date().toISOString(),isRead:!1},pe={...h,notifications:[ae,...h.notifications]};x(pe),Te(pe),!A&&h.id!=="guest"&&await Ue(h.id,Qt(pe))};return t.jsx(DN.Provider,{value:{products:e,categories:r,cart:u,user:h,currentUser:h,specials:v,vouchers:T,appliedVoucher:U,affiliateLeaderboard:q,memberCount:I,weeklyWinners:E,isDemoMode:A,isLoading:C,dbConnectionError:z,db:qe,orders:o,isStickyProgressBarVisible:De,setIsStickyProgressBarVisible:oe,currency:se,setCurrency:xe,toggleCurrency:Hr,packagingPresets:be,materialPresets:X,savePackagingPreset:Qe,deletePackagingPreset:ut,saveMaterialPreset:ie,deleteMaterialPreset:Se,login:Be,logout:We,register:Ne,addToCart:J,removeFromCart:_e,updateCartQuantity:kt,clearCart:xt,toggleWishlist:Wt,checkout:hn,submitReview:zs,addSystemNotification:Wr,processGiftVoucherPurchase:hr,applyForAffiliate:$t,approveAffiliate:Ss,rejectAffiliate:os,sendAffiliateMessage:Le,buyAffiliateContent:Ws,joinAffiliateElite:ur,simulateAffiliateSale:Ms,updateAffiliateTier:fs,assignAffiliateParent:ls,applyForArtist:Ln,addProduct:On,updateProduct:ms,deleteProduct:Ls,addOrder:Vt,updateOrder:ks,deleteOrder:ts,addCategory:je,updateCategory:Ye,deleteCategory:Et,replaceCategories:Tt,addSpecial:Rt,resetStore:Gn,seedTestUsers:ye,getAllUsers:Mn,runDataDiagnostics:tn,adminAdjustPoints:Os,getCartTotal:un,addVoucher:Mt,deleteVoucher:Ut,applyExternalVoucher:Bt,setAppliedVoucher:Z,shareProduct:yi,claimSocialReward:qr,updateUserAddress:jt,updateUser:zt,manualWinner:H,setManualWinner:Pe,auth:qe.auth,authErrorMessage:fe,clearAuthError:Ce,signInWithLocalDevAdmin:we,isSupabaseConfigured:Es,dataSource:O,closeAccount:fr},children:n})},wt=()=>{const n=S.useContext(DN);if(!n)throw new Error("useStore must be used within StoreProvider");return n};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(n,e)=>{const s=S.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:f,...h},x)=>S.createElement("svg",{ref:x,...iI,width:i,height:i,stroke:r,strokeWidth:c?Number(o)*24/Number(i):o,className:["lucide",`lucide-${aI(n)}`,u].join(" "),...h},[...e.map(([v,N])=>S.createElement(v,N)),...Array.isArray(f)?f:[f]]));return s.displayName=`${n}`,s};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=Re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=Re("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=Re("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=Re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=Re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=Re("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Re("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=Re("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=Re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=Re("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=Re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=Re("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=Re("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=Re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=Re("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=Re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=Re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=Re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=Re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Re("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=Re("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=Re("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=Re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=Re("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=Re("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=Re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=Re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=Re("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=Re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=Re("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=Re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=Re("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Re("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=Re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=Re("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=Re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=Re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=Re("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=Re("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Re("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=Re("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=Re("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Re("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=Re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=Re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=Re("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=Re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=Re("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=Re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Re("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Re("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=Re("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=Re("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=Re("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Re("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Re("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=Re("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=Re("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=Re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=Re("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=Re("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=Re("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Re("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=Re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=Re("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=Re("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=Re("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Re("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Re("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=Re("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=Re("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=Re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=Re("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=Re("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=Re("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=Re("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=Re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=Re("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Re("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=Re("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=Re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=Re("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),sb=["Lerato in Sandton just unlocked The Secret Vault.","Thandi in Durban just unlocked The Secret Vault.","Johan in Cape Town just unlocked The Secret Vault.","Bianca in Pretoria just unlocked The Secret Vault.","Jessica in New York just unlocked The Secret Vault.","Emily in Texas just unlocked The Secret Vault.","Ashley in California just unlocked The Secret Vault.","Sarah in Florida just unlocked The Secret Vault.","Sophie in London just unlocked The Secret Vault.","Emma in Manchester just unlocked The Secret Vault."],MI=()=>{const{weeklyWinners:n,currency:e}=wt(),[s,r]=S.useState(!1),[i,o]=S.useState(""),[c,u]=S.useState("winner");return S.useEffect(()=>{let f;const h=()=>{if(Math.random()<.6&&n.length>0){const T=n[Math.floor(Math.random()*n.length)],_=T.currency==="ZAR"?`R${T.prize}`:`$${T.prize}`,C=`${T.name} just won ${_} in the Weekly Draw!`;o(C),u("winner")}else{const T=sb[Math.floor(Math.random()*sb.length)];o(T),u("vault")}r(!0),setTimeout(()=>{r(!1)},6e3);const N=Math.floor(Math.random()*20001+2e4);f=setTimeout(h,N)};return f=setTimeout(h,5e3),()=>clearTimeout(f)},[n,e]),i?t.jsx("div",{className:`fixed bottom-4 left-4 z-50 max-w-xs w-full transition-all duration-700 transform ${s?"translate-y-0 opacity-100":"translate-y-20 opacity-0 pointer-events-none"}`,children:t.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md border border-gray-800 p-3 rounded-xl shadow-2xl flex items-center gap-3 relative overflow-hidden group",children:[t.jsx("button",{onClick:()=>r(!1),className:"absolute top-1 right-1 text-gray-500 hover:text-white p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(as,{size:12})}),t.jsx("div",{className:`w-8 h-8 shrink-0 rounded-full border flex items-center justify-center ${c==="winner"?"border-yellow-500/30 bg-yellow-900/20":"border-purple-500/30 bg-purple-900/20"}`,children:c==="winner"?t.jsx(dr,{size:16,className:"text-yellow-400"}):t.jsx(Lt,{size:16,className:"text-purple-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-xs text-gray-200 leading-tight",children:i}),t.jsx("div",{className:"text-[9px] text-gray-500 mt-1",children:"Just now"})]})]})}):null},OI=500,qN=({subtotal:n,isSticky:e=!1,onContinueShopping:s,onClose:r})=>{const{currency:i}=wt();if(i==="USD")return null;const o=()=>i==="ZAR"?"R":"$",c=(N,T)=>i==="ZAR"?N:i==="USD"?0:N,u=c(OI),f=u-n,h=Math.min(n/u*100,100),x=n>=u,v=x?"Congratulations! You've unlocked FREE shipping!":`You're ${o()}${c(f).toFixed(2)} away from free shipping!`;return e?t.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[t.jsx("div",{className:"p-2 bg-pink-900/20 text-pink-500 rounded-full border border-pink-500/30",children:t.jsx(Ur,{size:20})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:`text-sm font-bold ${x?"text-green-400":"text-white"}`,children:v}),t.jsx("div",{className:"w-full bg-black/50 rounded-full h-2 mt-1 overflow-hidden border border-gray-700",children:t.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${x?"bg-green-500":"bg-pink-500"}`,style:{width:`${h}%`}})})]}),t.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-white",children:t.jsx(as,{size:18})})]})}):t.jsx("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-pink-500/30 rounded-2xl p-6 shadow-lg mb-8",children:t.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[t.jsx("div",{className:"p-3 bg-pink-900/30 text-pink-400 rounded-full border border-pink-500/30",children:t.jsx(Ur,{size:28})}),t.jsxs("div",{className:"flex-1 text-center md:text-left",children:[t.jsx("h3",{className:`text-lg font-bold ${x?"text-green-400":"text-white"}`,children:v}),t.jsx("div",{className:"w-full bg-black rounded-full h-2.5 mt-2 overflow-hidden border border-gray-700 shadow-inner",children:t.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${x?"bg-green-500":"bg-pink-500"} shadow-[inset_0_1px_1px_rgba(255,255,255,0.2)]`,style:{width:`${h}%`}})})]}),!x&&t.jsxs("button",{onClick:s,className:"w-full md:w-auto mt-2 md:mt-0 px-6 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:["Continue Shopping ",t.jsx(Qs,{size:18})]})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var ol;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(ol||(ol={}));class um extends Error{constructor(e,s,r){super(e),this.message=e,this.code=s,this.data=r}}const LI=n=>{var e,s;return n!=null&&n.androidBridge?"android":!((s=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||s===void 0)&&s.bridge?"ios":"web"},zI=n=>{const e=n.CapacitorCustomPlatform||null,s=n.Capacitor||{},r=s.Plugins=s.Plugins||{},i=()=>e!==null?e.name:LI(n),o=()=>i()!=="web",c=v=>{const N=h.get(v);return!!(N!=null&&N.platforms.has(i())||u(v))},u=v=>{var N;return(N=s.PluginHeaders)===null||N===void 0?void 0:N.find(T=>T.name===v)},f=v=>n.console.error(v),h=new Map,x=(v,N={})=>{const T=h.get(v);if(T)return console.warn(`Capacitor plugin "${v}" already registered. Cannot register plugins twice.`),T.proxy;const _=i(),C=u(v);let R;const z=async()=>(!R&&_ in N?R=typeof N[_]=="function"?R=await N[_]():R=N[_]:e!==null&&!R&&"web"in N&&(R=typeof N.web=="function"?R=await N.web():R=N.web),R),$=(k,E)=>{var L,O;if(C){const B=C==null?void 0:C.methods.find(A=>E===A.name);if(B)return B.rtype==="promise"?A=>s.nativePromise(v,E.toString(),A):(A,ne)=>s.nativeCallback(v,E.toString(),A,ne);if(k)return(L=k[E])===null||L===void 0?void 0:L.bind(k)}else{if(k)return(O=k[E])===null||O===void 0?void 0:O.bind(k);throw new um(`"${v}" plugin is not implemented on ${_}`,ol.Unimplemented)}},U=k=>{let E;const L=(...O)=>{const B=z().then(A=>{const ne=$(A,k);if(ne){const fe=ne(...O);return E=fe==null?void 0:fe.remove,fe}else throw new um(`"${v}.${k}()" is not implemented on ${_}`,ol.Unimplemented)});return k==="addListener"&&(B.remove=async()=>E()),B};return L.toString=()=>`${k.toString()}() { [capacitor code] }`,Object.defineProperty(L,"name",{value:k,writable:!1,configurable:!1}),L},Z=U("addListener"),q=U("removeListener"),V=(k,E)=>{const L=Z({eventName:k},E),O=async()=>{const A=await L;q({eventName:k,callbackId:A},E)},B=new Promise(A=>L.then(()=>A({remove:O})));return B.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await O()},B},I=new Proxy({},{get(k,E){switch(E){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?V:Z;case"removeListener":return q;default:return U(E)}}});return r[v]=I,h.set(v,{name:v,proxy:I,platforms:new Set([...Object.keys(N),...C?[_]:[]])}),I};return s.convertFileSrc||(s.convertFileSrc=v=>v),s.getPlatform=i,s.handleError=f,s.isNativePlatform=o,s.isPluginAvailable=c,s.registerPlugin=x,s.Exception=um,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},UI=n=>n.Capacitor=zI(n),Mu=UI(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),fl=Mu.registerPlugin;class WN{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,s){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(s);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,s);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,s,r){const i=this.listeners[e];if(!i){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(s),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(s))}hasListeners(e){var s;return!!(!((s=this.listeners[e])===null||s===void 0)&&s.length)}registerWindowListener(e,s){this.windowListeners[s]={registered:!1,windowEventName:e,pluginEventName:s,handler:r=>{this.notifyListeners(s,r)}}}unimplemented(e="not implemented"){return new Mu.Exception(e,ol.Unimplemented)}unavailable(e="not available"){return new Mu.Exception(e,ol.Unavailable)}async removeListener(e,s){const r=this.listeners[e];if(!r)return;const i=r.indexOf(s);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const s=this.retainedEventArguments[e];s&&(delete this.retainedEventArguments[e],s.forEach(r=>{this.notifyListeners(e,r)}))}}const nb=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),rb=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class FI extends WN{async getCookies(){const e=document.cookie,s={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=rb(i).trim(),o=rb(o).trim(),s[i]=o}),s}async setCookie(e){try{const s=nb(e.key),r=nb(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${s}=${r||""}${i}; path=${o}; ${c};`}catch(s){return Promise.reject(s)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(s){return Promise.reject(s)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const s of e)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}fl("CapacitorCookies",{web:()=>new FI});const $I=async n=>new Promise((e,s)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>s(i),r.readAsDataURL(n)}),VI=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,o,c)=>(i[o]=n[e[c]],i),{})},BI=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[o,c]=i;let u,f;return Array.isArray(c)?(f="",c.forEach(h=>{u=e?encodeURIComponent(h):h,f+=`${o}=${u}&`}),f.slice(0,-1)):(u=e?encodeURIComponent(c):c,f=`${o}=${u}`),`${r}&${f}`},"").substr(1):null,qI=(n,e={})=>{const s=Object.assign({method:n.method||"GET",headers:n.headers},e),i=VI(n.headers)["content-type"]||"";if(typeof n.data=="string")s.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[c,u]of Object.entries(n.data||{}))o.set(c,u);s.body=o.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const o=new FormData;if(n.data instanceof FormData)n.data.forEach((u,f)=>{o.append(f,u)});else for(const u of Object.keys(n.data))o.append(u,n.data[u]);s.body=o;const c=new Headers(s.headers);c.delete("content-type"),s.headers=c}else(i.includes("application/json")||typeof n.data=="object")&&(s.body=JSON.stringify(n.data));return s};class WI extends WN{async request(e){const s=qI(e,e.webFetchExtra),r=BI(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,s),c=o.headers.get("content-type")||"";let{responseType:u="text"}=o.ok?e:{};c.includes("application/json")&&(u="json");let f,h;switch(u){case"arraybuffer":case"blob":h=await o.blob(),f=await $I(h);break;case"json":f=await o.json();break;case"document":case"text":default:f=await o.text()}const x={};return o.headers.forEach((v,N)=>{x[N]=v}),{data:f,headers:x,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}fl("CapacitorHttp",{web:()=>new WI});async function HI(n){try{const e=globalThis.Capacitor||window.Capacitor,s=e&&e.Plugins&&e.Plugins.UpdaterPlugin;if(s&&typeof s.downloadAndInstall=="function"){try{await s.downloadAndInstall({url:n})}catch{await s.downloadAndInstall()}return}const r=e&&e.Plugins&&e.Plugins.CapacitorUpdater;if(r){if(typeof r.downloadUpdate=="function"){try{await r.downloadUpdate({url:n})}catch{try{await r.downloadUpdate()}catch(o){throw o}}typeof r.setUpdate=="function"&&await r.setUpdate();return}if(typeof r.downloadAndInstall=="function"){try{await r.downloadAndInstall({url:n})}catch{await r.downloadAndInstall()}return}}}catch{}try{if(typeof window<"u"&&n){window.open(n,"_blank");return}}catch{}throw new Error("Updater plugin not available and could not open APK URL")}fl("UpdaterPlugin",{web:()=>({openUrl:async()=>{console.warn("UpdaterPlugin not available on web")}})});const GI="https://spoilme-edee0.web.app/version.json",KI=()=>{if(typeof navigator>"u")return!1;const n=navigator.userAgent||navigator.vendor||"";return/Android|iPhone|iPad|iPod/i.test(n)};function JI({apkUrl:n="",playStoreUrl:e}){const[s,r]=S.useState(!1),[i,o]=S.useState(!1),[c,u]=S.useState(n),[f,h]=S.useState("");if(S.useEffect(()=>{var _,C;if(!KI())return;const N=(C=(_=window.Capacitor)==null?void 0:_.isNativePlatform)==null?void 0:C.call(_);o(N),(async()=>{try{console.log("Checking for update...");const z=await(await fetch(GI)).json();console.log("Fetched data:",z);const $=z.version,U=localStorage.getItem("appVersion")||"0.1";console.log("Latest version:",$,"Stored version:",U),$!==U?(N?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))!==$?(console.log("New version detected, showing update banner for this version"),u(z.apkUrl),h(z.version),r(!0)):(console.log("User already dismissed this version, not showing banner"),r(!1)):(console.log("No new version"),(N?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))||r(!0))}catch(R){console.error("Failed to check for update:",R),(N?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))||r(!0)}})()},[]),!s)return null;const x=()=>{const N=i?"updatePromptDismissed":"installPromptDismissed";try{f?localStorage.setItem(N,f):localStorage.setItem(N,String(Date.now()))}catch{}r(!1)},v=async()=>{try{window.Capacitor&&window.Capacitor.isNativePlatform&&window.Capacitor.isNativePlatform()?await HI(c):window.open(c,"_blank")}catch(N){console.error("Updater error",N),window.open(c,"_blank")}try{f?localStorage.setItem(i?"updatePromptDismissed":"installPromptDismissed",f):localStorage.setItem(i?"updatePromptDismissed":"installPromptDismissed",String(Date.now()))}catch{}try{f&&localStorage.setItem("appVersion",f)}catch{}r(!1)};return t.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[t.jsx("div",{className:"p-2 bg-cyan-900/20 text-cyan-500 rounded-full border border-cyan-500/30",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z",clipRule:"evenodd"})})}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-sm font-bold text-white",children:"Update available - Get the latest features!"})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:v,className:"px-4 py-2 bg-green-500 text-black rounded font-semibold text-sm",children:"Install Update"}),t.jsx("button",{onClick:x,className:"px-4 py-2 ring-1 ring-gray-700 rounded text-gray-300 text-sm",children:"Later"})]})]})})}const YI=()=>{const[n,e]=S.useState(!1),[s,r]=S.useState("https://spoilme-edee0.web.app/Spoil-Me-Vintage-0.4.apk"),[i,o]=S.useState("0.4"),{cart:c,user:u,isStickyProgressBarVisible:f,setIsStickyProgressBarVisible:h,getCartTotal:x,currency:v,toggleCurrency:N}=wt(),T=la();S.useEffect(()=>{window.scrollTo(0,0)},[T.pathname]),S.useEffect(()=>{(async()=>{try{const U=await(await fetch("https://spoilme-edee0.web.app/version.json")).json();r(U.apkUrl),o(U.version)}catch($){console.error("Failed to fetch latest APK URL:",$)}})()},[]);const _=c.reduce((z,$)=>z+$.quantity,0),C=x();u.wishlist&&u.wishlist.length;const R=u.notifications?u.notifications.filter(z=>!z.isRead).length:0;return t.jsxs("div",{className:"min-h-screen flex flex-col safe-area text-gray-100",children:[t.jsx("style",{children:`
        @keyframes marquee {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
        .animate-marquee {
          animation: marquee 10s linear infinite;
        }
        .animate-marquee:hover {
          animation-play-state: paused;
        }
      `}),t.jsx("div",{className:"w-full bg-zinc-900 border-b border-white/5 overflow-hidden py-2 relative z-[60]",children:t.jsxs("div",{className:"flex animate-marquee whitespace-nowrap",children:[t.jsxs("div",{className:"flex items-center gap-8 px-4",children:[t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(qs,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(js,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(Ur,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[t.jsx(us,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[t.jsx(lc,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[t.jsx(ir,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(Qa,{size:14,className:"text-green-500"})," And lots more!"]})]}),t.jsxs("div",{className:"flex items-center gap-8 px-4",children:[t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(qs,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(js,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(Ur,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[t.jsx(us,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[t.jsx(lc,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[t.jsx(ir,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(Qa,{size:14,className:"text-green-500"})," And lots more!"]})]})]})}),t.jsxs("header",{className:"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800 transition-all",children:[t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"relative flex flex-col lg:flex-row items-center justify-center lg:justify-between h-auto lg:h-20 py-4 lg:py-0 gap-3",children:[t.jsx("button",{className:"absolute top-1/2 -translate-y-1/2 left-4 lg:hidden p-2 rounded-md text-gray-400 hover:text-white",onClick:()=>e(!n),children:n?t.jsx(as,{size:24}):t.jsx(NI,{size:24})}),t.jsxs(He,{to:"/",className:"flex-shrink-0 group flex flex-col items-center leading-none",children:[t.jsx("span",{className:"font-cherry text-[24px] font-bold text-pink-500 group-hover:text-pink-400 transition-colors drop-shadow-[0_0_5px_rgba(236,72,153,0.5)]",children:"Spoil Me"}),t.jsx("span",{className:"font-cherry text-[24px] font-bold text-cyan-400 group-hover:text-cyan-300 transition-colors drop-shadow-[0_0_5px_rgba(34,211,238,0.5)] ml-7 -mt-1",children:"Vintage"})]}),t.jsxs("nav",{className:"hidden lg:flex absolute left-1/2 -translate-x-1/2 space-x-8",children:[t.jsx(He,{to:"/",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${T.pathname==="/"?"text-cyan-400":"text-gray-300"}`,children:"Home"}),t.jsx(He,{to:"/#catalog",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Catalog"}),t.jsx(He,{to:"/customized-wire-wrapped-pendants",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${T.pathname==="/customized-wire-wrapped-pendants"?"text-cyan-400":"text-gray-300"}`,children:"Custom Pendants"}),t.jsxs(He,{to:"/membership",className:`text-sm font-medium flex items-center gap-1 hover:text-purple-400 transition-colors ${T.pathname==="/membership"?"text-purple-400 font-bold":"text-gray-300"}`,children:[t.jsx(Lt,{size:14})," Membership"]}),t.jsx(He,{to:"/#specials",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Specials"})]}),t.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-3 w-full lg:w-auto justify-center lg:justify-end",children:[t.jsx("button",{onClick:N,className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors text-xs font-bold",title:`Switch to ${v==="ZAR"?"USD":"ZAR"}`,children:v}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors",children:t.jsx(da,{size:20})}),u.email?t.jsx(He,{to:"/earn-rewards",className:"group flex items-center justify-center p-2 relative",title:"Your Loyalty Rewards",children:t.jsxs("div",{className:"flex items-center gap-1.5 hover:bg-purple-900/50 px-2 py-1 rounded-full transition-colors border border-transparent hover:border-purple-500/30",children:[t.jsx(ir,{size:20,className:"text-purple-400 group-hover:text-pink-400"}),t.jsx("span",{className:"hidden md:inline-block text-xs font-bold text-purple-200 group-hover:text-white",children:u.loyaltyPoints})]})}):t.jsx(He,{to:"/earn-rewards",className:"p-2 text-gray-400 hover:text-purple-400 transition-colors relative",title:"Earn Rewards",children:t.jsx(ir,{size:20})}),u.email&&t.jsxs(He,{to:"/notifications",className:"p-2 text-gray-400 hover:text-yellow-400 transition-colors relative group",children:[t.jsx(Ki,{size:20}),R>0&&t.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-yellow-400 rounded-full shadow-[0_0_5px_rgba(250,204,21,0.8)]",children:R})]}),u.email?t.jsx(He,{to:"/profile",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative",children:t.jsx(Fr,{size:20})}):t.jsx(He,{to:"/login",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative flex items-center gap-1",children:t.jsx(UN,{size:20})}),t.jsxs(He,{to:"/cart",className:"p-2 text-gray-400 hover:text-pink-500 transition-colors relative group",children:[t.jsx(hl,{size:20}),_>0&&t.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-green-400 rounded-full shadow-[0_0_5px_rgba(74,222,128,0.8)]",children:_})]})]})]})}),n&&t.jsx("div",{className:"lg:hidden absolute top-full left-0 w-full bg-zinc-900 border-b border-gray-800 shadow-lg animate-in slide-in-from-top-5 duration-200 z-40",children:t.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[t.jsx(He,{to:"/",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Home"}),t.jsxs(He,{to:"/customized-wire-wrapped-pendants",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[t.jsx(js,{size:16,className:"text-gold"})," Custom Pendants"]}),t.jsxs(He,{to:"/membership",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-purple-400 hover:bg-zinc-800 hover:text-purple-300 flex items-center gap-2",children:[t.jsx(Lt,{size:16})," Membership Perks"]}),t.jsxs(He,{to:"/earn-rewards",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[t.jsx(ir,{size:16,className:"text-purple-400"}),u.email?"My Rewards":"Earn Rewards",u.email&&t.jsxs("span",{className:"bg-purple-900/50 text-purple-200 text-[10px] px-2 py-0.5 rounded-full font-bold ml-auto",children:[u.loyaltyPoints," Pts"]})]}),t.jsxs(He,{to:"/affiliate-program",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-green-400 flex items-center gap-2",children:[t.jsx(Pc,{size:16,className:"text-green-500"})," Partnership Program"]}),t.jsxs(He,{to:"/artist-partnership",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-yellow-400 flex items-center gap-2",children:[t.jsx(js,{size:16,className:"text-yellow-400"})," Artist Partnership"]}),u.email?t.jsxs(He,{to:"/profile",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center justify-between",children:["My Profile",R>0&&t.jsxs("span",{className:"bg-yellow-400 text-black text-xs px-2 py-0.5 rounded-full font-bold",children:[R," New"]})]}):t.jsx(He,{to:"/login",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Login / Register"})]})})]}),t.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsx(Fv,{})}),t.jsx(MI,{}),f&&C>0&&t.jsx(qN,{subtotal:C,isSticky:!0,onClose:()=>h(!1)}),t.jsx(JI,{}),t.jsx("footer",{className:"bg-zinc-950 border-t border-gray-800 py-12",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"About"}),t.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[t.jsx("li",{children:t.jsx(He,{to:"/",className:"hover:text-white",children:"Our Story"})}),t.jsx("li",{children:t.jsx(He,{to:"/",className:"hover:text-white",children:"Careers"})}),t.jsx("li",{children:t.jsx(He,{to:"/",className:"hover:text-white",children:"Press"})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"Support"}),t.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[t.jsx("li",{children:t.jsx(He,{to:"/terms",className:"hover:text-white",children:"Contact Us"})}),t.jsx("li",{children:t.jsx(He,{to:"/terms",className:"hover:text-white",children:"Shipping"})}),t.jsx("li",{children:t.jsx(He,{to:"/terms",className:"hover:text-white",children:"Returns"})}),t.jsx("li",{children:t.jsx(He,{to:"/artist-partnership",className:"hover:text-white",children:"Artist Partnership"})})]})]})]}),u.isAdmin&&t.jsx("div",{className:"mt-12 pt-8 border-t border-gray-900 flex justify-center",children:t.jsxs(He,{to:"/admin",className:"flex items-center gap-2 text-xs text-red-400 hover:text-red-300 uppercase tracking-widest font-bold transition-colors bg-red-900/10 px-4 py-2 rounded border border-red-900/30",children:[t.jsx(LN,{size:14})," Admin Dashboard"]})})]})})]})},ZI=()=>{const n=la(),e=en(),{user:s}=wt();S.useEffect(()=>{if(!s){e("/login");return}if(!s.isAdmin){try{localStorage.setItem("spv_admin_denied",'Your account does not have admin rights. If this is a local dev machine use "Ensure Admin (dev)" on the Login page, or set is_admin=true for your user in the database.')}catch{}e("/login")}},[s,e]);const i=[{path:"/admin",icon:LN,label:"Dashboard",permission:"dashboard"},{path:"/admin/orders",icon:ul,label:"Orders",permission:"orders"},{path:"/admin/products",icon:Cc,label:"Products",permission:"products"},{path:"/admin/categories",icon:EI,label:"Categories",permission:"categories"},{path:"/admin/artists",icon:VN,label:"Artists",permission:"artists"},{path:"/admin/gift-cards",icon:us,label:"Gift Cards",permission:"giftCards"},{path:"/admin/social",icon:al,label:"Social Studio",permission:"social"},{path:"/admin/affiliates",icon:qs,label:"Affiliates",permission:"affiliates"},{path:"/admin/affiliate-requests",icon:Jo,label:"Requests",permission:"affiliates"},{path:"/admin/notifications",icon:Ki,label:"Push Notify",permission:"notifications"},{path:"/admin/winners",icon:dr,label:"Weekly Winners",permission:"winners"},{path:"/admin/expenses",icon:ws,label:"Expenses",permission:"expenses"},{path:"/admin/members",icon:Jo,label:"Membership",permission:"members"},{path:"/admin/vault",icon:lI,label:"Vault",permission:"vault"},{path:"/admin/custom-pendant-manager",icon:js,label:"Custom Pendants",permission:"products"},{path:"/admin/ad-pricing",icon:ws,label:"Ad Pricing",permission:"admin"}].filter(o=>{var c;return(s==null?void 0:s.email)==="spoilmevintagediy@gmail.com"?!0:((c=s==null?void 0:s.adminPermissions)==null?void 0:c[o.permission])===!0});return s!=null&&s.isAdmin?t.jsxs("div",{className:"min-h-screen bg-black flex text-gray-100",children:[t.jsxs("aside",{className:"w-64 bg-zinc-900 border-r border-gray-800 hidden md:flex flex-col fixed h-full",children:[t.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-gray-800",children:[t.jsx("span",{className:"text-xl font-bold text-pink-500",children:"Spoil Me Vintage"}),t.jsx("span",{className:"ml-2 text-xs bg-purple-900/50 border border-purple-500/50 text-purple-300 px-2 py-0.5 rounded",children:"ADMIN"})]}),t.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[t.jsxs(He,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-gray-400 hover:bg-zinc-800 hover:text-white rounded-lg mb-4 transition-colors",children:[t.jsx(ia,{size:18})," Back to Store"]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-2",children:"Management"}),i.slice(0,5).map(o=>t.jsx(hm,{item:o,location:n},o.path)),t.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Marketing"}),i.slice(5,10).map(o=>t.jsx(hm,{item:o,location:n},o.path)),t.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Operations"}),i.slice(10).map(o=>t.jsx(hm,{item:o,location:n},o.path))]})]}),t.jsx("main",{className:"flex-1 md:ml-64 p-8 overflow-y-auto bg-black h-screen",children:t.jsx("div",{className:"max-w-6xl mx-auto pb-20 md:pb-0",children:t.jsx(Fv,{})})}),t.jsx("div",{className:"md:hidden fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 flex justify-between px-4 py-3 z-50 overflow-x-auto gap-4",children:i.map(o=>t.jsx(He,{to:o.path,className:`p-2 rounded-lg ${n.pathname===o.path?"text-pink-400 bg-pink-900/20":"text-gray-400 hover:text-white"}`,children:t.jsx(o.icon,{size:24})},o.path))})]}):null},hm=({item:n,location:e})=>{const s=e.pathname===n.path;return t.jsxs(He,{to:n.path,className:`flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-colors ${s?"bg-pink-900/20 text-pink-400 border border-pink-500/20":"text-gray-400 hover:bg-zinc-800 hover:text-white"}`,children:[t.jsx(n.icon,{size:18})," ",n.label]})},Ou=({src:n,fallback:e,alt:s,className:r,onError:i,...o})=>{const c=HN(n||void 0,e);return t.jsx("img",{src:c||e||ml(),alt:s,className:r,onError:u=>{try{eo(u)}catch{}i&&i(u)},...o})};function eo(n){const e=n==null?void 0:n.target;e&&(e.src=ml())}function ml(n=600,e=600,s){const i=`<?xml version="1.0" encoding="UTF-8"?><svg xmlns='http://www.w3.org/2000/svg' width='${n}' height='${e}' viewBox='0 0 ${n} ${e}'><rect width='100%' height='100%' fill='%23222' /><text x='50%' y='50%' font-family='Arial, Helvetica, sans-serif' font-size='20' fill='%23ccc' dominant-baseline='middle' text-anchor='middle'>${XI(s||"Image")}</text></svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(i)}`}function XI(n){return String(n).replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}function HN(n,e){const[s,r]=S.useState(null);return S.useEffect(()=>{if(!n){r(e||ml());return}r(n)},[n,e]),s}const Bc=({product:n})=>{var X,ue;const{addToCart:e,toggleWishlist:s,user:r,cart:i,currency:o}=wt(),[c,u]=S.useState(!1),f=((X=r.wishlist)==null?void 0:X.includes(n.id))||!1,h=en(),x=new Date,v=n.promoStartsAt?new Date(n.promoStartsAt):null,N=n.promoExpiresAt?new Date(n.promoExpiresAt):null,T=v&&!isNaN(v.getTime()),_=N&&!isNaN(N.getTime()),C=(n.promoPrice||0)>0&&(!T||v<=x)&&(!_||N>x),R=o==="ZAR"?n.price:n.priceUSD||n.price,z=o==="ZAR"?n.memberPrice||R*.8:n.memberPriceUSD||R*.8;let $=R,U=!1,Z="none";r.isMember?(U=!0,C?r.membershipTier==="deluxe"&&n.promoDeluxeMemberPrice&&n.promoDeluxeMemberPrice>0?($=n.promoDeluxeMemberPrice,Z="deluxe"):r.membershipTier==="premium"&&n.promoPremiumMemberPrice&&n.promoPremiumMemberPrice>0?($=n.promoPremiumMemberPrice,Z="premium"):r.membershipTier==="basic"&&n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0?($=n.promoBasicMemberPrice,Z="basic"):$=Math.min(z,n.promoPrice||1/0):$=z):C&&($=n.promoPrice);const q=C&&n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0?n.promoBasicMemberPrice:z,I=n.reviews&&n.reviews.length>0?(n.reviews.reduce((se,xe)=>se+xe.rating,0)/n.reviews.length).toFixed(1):"5.0",k=n.reviews?n.reviews.length:0,E=n.soldCount||0,O=C?(()=>{if(!_||!N)return null;const se=N.getTime()-x.getTime();if(se<=0)return null;const xe=Math.floor(se/(1e3*60*60*24)),H=Math.floor(se%(1e3*60*60*24)/(1e3*60*60)),Pe=Math.floor(se%(1e3*60*60)/(1e3*60));return xe>0?`${xe}d ${H}h`:`${H}h ${Pe}m`})():null,B=n.type==="Ring"||n.showEarringOptions&&n.earringMaterials&&n.earringMaterials.length>1||(n.type==="Pendant"||n.type==="Necklace")&&n.chainStyles&&n.chainStyles.length>1,A=!!n.isSoldOut||n.stock<=0,ne=i.filter(se=>se.id===n.id).reduce((se,xe)=>se+xe.quantity,0),fe=!B&&ne>=n.stock,ke=()=>{A||fe||(B?h(`/product/${n.id}`):e({...n,price:$}))},De=C&&(n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0||n.promoDeluxeMemberPrice&&n.promoDeluxeMemberPrice>0),oe=()=>o==="ZAR"?"R":"$",be=(se,xe)=>o==="ZAR"?se:o==="USD"?xe!==void 0?xe:0:se,ve=o==="ZAR"?n.compareAtPrice:n.compareAtPriceUSD||n.compareAtPrice;return o==="ZAR"?n.memberPrice||n.price*.8:n.memberPriceUSD||(n.priceUSD||n.price)*.8,t.jsxs("div",{className:"group relative bg-zinc-900 rounded-lg shadow-[0_0_30px_rgba(255,255,255,0.15)] hover:shadow-pink-500/20 transition-all duration-300 border border-gray-800 hover:border-pink-500/50 z-0 flex flex-col h-full",children:[t.jsxs(He,{to:`/product/${n.id}`,className:"block relative overflow-hidden aspect-square rounded-t-lg",children:[t.jsx(Ou,{src:n.image_url||n.imageUrl||((ue=n.images)==null?void 0:ue[0]),alt:n.name,className:`w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500 ${n.stock<=0?"opacity-50 grayscale":"opacity-90 group-hover:opacity-100"}`,fallback:ml(600),onError:eo}),t.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1 z-10",children:[U&&t.jsxs("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-purple-400/30 flex items-center gap-1",children:[t.jsx(Lt,{size:10,fill:"currentColor"}),Z!=="none"?`${Z.toUpperCase()} PRICE`:"MEMBER"]}),!U&&C&&t.jsx("span",{className:"bg-green-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-green-500/30",children:"PROMO"}),n.isNewArrival&&t.jsx("span",{className:"bg-cyan-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-cyan-500/30",children:"NEW"})]}),C&&O&&!A&&t.jsxs("div",{className:"absolute bottom-0 left-0 w-full bg-black/80 backdrop-blur-md py-1 px-2 flex items-center justify-center gap-1.5 text-[10px] text-green-400 font-bold border-t border-green-500/30",children:[t.jsx(cr,{size:10})," Ends in: ",O]})]}),t.jsx("button",{onClick:se=>{se.preventDefault(),s(n.id)},className:`absolute top-2 right-2 p-2 rounded-full bg-black/50 backdrop-blur-md shadow-md transition-colors border border-transparent hover:border-pink-500 z-20 ${f?"text-pink-500":"text-gray-300 hover:text-white"}`,children:t.jsx(Lp,{size:18,fill:f?"currentColor":"none"})}),t.jsxs("div",{className:"p-4 rounded-b-lg flex flex-col flex-1 space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("p",{className:"text-xs text-cyan-400 font-medium uppercase tracking-wider truncate pr-2",children:n.category}),t.jsx("button",{onClick:ke,disabled:A||fe,className:`p-1.5 rounded-full transition-all flex-shrink-0 -mt-1 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed ${r.isMember?"bg-purple-600/20 text-purple-400 hover:bg-purple-600 hover:text-white border border-purple-500/30":"bg-zinc-800 text-gray-300 hover:bg-cyan-500 hover:text-black border border-gray-700"}`,title:B?"View Options":A?"Sold Out":fe?"Stock limit in cart":"Add to Cart",children:B?t.jsx(rl,{size:16}):t.jsx(ul,{size:16})})]}),t.jsx(He,{to:`/product/${n.id}`,children:t.jsx("h3",{className:"text-sm font-bold text-gray-100 leading-tight group-hover:text-pink-500 transition-colors line-clamp-2 h-10",children:n.name})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[t.jsx(Rn,{size:12,fill:"currentColor"}),t.jsx("span",{className:"text-xs font-bold text-gray-300",children:I}),t.jsxs("span",{className:"text-[10px] text-gray-500",children:["(",k,")"]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[E>0&&t.jsxs("div",{className:"text-gray-500 font-medium flex items-center gap-1",children:[E," sold"]}),n.stock>0&&n.stock<=5&&t.jsx("div",{className:"text-orange-400 font-medium flex items-center gap-1",children:"Low Stock"})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 min-h-[20px]",children:[ve&&t.jsxs("div",{className:"flex items-center gap-1 relative",children:[t.jsxs("span",{className:"text-[10px] text-gray-500 line-through",children:["RRP ",oe(),ve.toFixed(2)]}),t.jsx("button",{onClick:se=>{se.preventDefault(),u(!c)},className:"text-gray-600 hover:text-gray-400 focus:outline-none",children:t.jsx(Xi,{size:10})}),c&&t.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 p-2 bg-zinc-950 border border-gray-700 rounded shadow-xl text-[10px] text-gray-300 z-50",children:"Recommended retail price."})]}),t.jsxs("span",{className:"text-sm font-bold text-green-400",children:["Retail ",oe(),R.toFixed(2)]})]}),t.jsx("div",{className:"mt-auto pt-2 border-t border-gray-800/50",children:r.isMember?t.jsx("div",{className:"flex items-end justify-between",children:t.jsxs("div",{className:"flex flex-col w-full",children:[t.jsxs("span",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-wide flex items-center gap-1",children:[t.jsx(Lt,{size:10})," ",Z!=="none"?Z:"Member"," Price"]}),t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsxs("span",{className:"text-2xl font-bold text-white drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",children:[oe(),be($).toFixed(2)]}),$<n.price&&t.jsxs("span",{className:"text-xs text-gray-500 line-through",children:[oe(),be(n.price).toFixed(2)]})]})]})}):t.jsx("div",{className:"flex items-end justify-between",children:t.jsxs("div",{className:"flex flex-col w-full",children:[C?t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsxs("span",{className:"text-2xl font-bold text-green-400",children:[oe(),be($).toFixed(2)]}),t.jsxs("span",{className:"text-xs text-gray-400 line-through",children:[oe(),be(n.price).toFixed(2)]})]}):null,De?t.jsxs("div",{className:"flex flex-col gap-0.5 mt-1",children:[t.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[t.jsx("span",{children:"Basic & Premium:"}),t.jsxs("span",{className:"text-purple-400 font-bold",children:[oe(),be(n.promoBasicMemberPrice||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[t.jsx("span",{children:"Deluxe:"}),t.jsxs("span",{className:"text-purple-400 font-bold",children:[oe(),be(n.promoDeluxeMemberPrice||0).toFixed(2)]})]})]}):t.jsxs("div",{className:"text-[10px] text-gray-400 flex items-center gap-1 mt-0.5",children:["Members: ",t.jsxs("span",{className:"text-purple-400 font-bold",children:[oe(),be(q).toFixed(2)]})]})]})})})]})]})},QI=()=>{const[n,e]=S.useState(0),s=[" THIS WEEK'S WINNER: Anja P. from Pretoria just won a R500 Voucher!"," LAST WEEK'S WINNER: Sarah Jenkins from Texas just won a $30 Gift Box!"," PREVIOUS WINNER: Thandi M. from Joburg just won a R500 Voucher!"];return S.useEffect(()=>{const r=setInterval(()=>{e(i=>(i+1)%s.length)},3e3);return()=>clearInterval(r)},[]),t.jsx("div",{className:"flex items-center justify-center bg-yellow-400 p-2 rounded",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(dr,{size:16,className:"text-amber-700 mr-3 shrink-0"}),t.jsx("span",{className:"text-sm text-black font-bold tracking-wide",children:s[n]})]})})},eR=()=>{const{products:n,categories:e,user:s,currency:r}=wt(),i=S.useRef(null),o=S.useRef(null),c=S.useRef(null),u=S.useRef(null),f=S.useRef(null),h=S.useRef(null),[x,v]=S.useState(!1);S.useEffect(()=>{const A=setInterval(()=>v(ne=>!ne),5e3);return()=>clearInterval(A)},[]);const N=new Date,_=23+(N.getMonth()+N.getFullYear()*12)%3,C=N.getDate(),R=new Date(N.getFullYear(),N.getMonth()+1,0).getDate(),z=(C-1)/(R-1),$=Math.max(2,Math.floor(_-z*(_-2))),U=(A,ne)=>{const fe=`${A.category||""} ${A.name||""} ${A.tags?A.tags.join(" "):""}`.toLowerCase();return ne.some(ke=>fe.includes(ke.toLowerCase()))},Z=n.filter(A=>U(A,["best seller","featured"])),q=(Z.length>0?Z:n).slice(0,16),V=n.filter(A=>U(A,["stud","studs"])).slice(0,11),I=n.filter(A=>U(A,["dangle","drop","hook"])).slice(0,2),k=n.filter(A=>A.type==="Pendant"&&U(A,["pendant","unique"])).slice(0,23),E=n.filter(A=>U(A,["bracelet","bangle"])).slice(0,6),L=n.filter(A=>U(A,["set","combo","suite"])).slice(0,2),O=(A,ne)=>{if(A.current){const fe=A.current.clientWidth*.8;A.current.scrollBy({left:ne==="right"?fe:-fe,behavior:"smooth"})}},B=({title:A,items:ne,reference:fe,linkTo:ke,icon:De,variant:oe="standard"})=>{if(!ne||ne.length===0)return null;const be=oe==="single"?"min-w-[90vw] md:min-w-[90vw] snap-center px-2":"min-w-[40vw] md:min-w-[200px] snap-start px-2";return t.jsxs("section",{className:"py-4",children:[t.jsxs("div",{className:"flex justify-between items-end mb-4 px-4",children:[t.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-white/20 pb-1 inline-block flex items-center gap-2",children:[De&&t.jsx(De,{size:20,className:"text-pink-400"})," ",A]}),t.jsxs(He,{to:ke,className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors bg-white/5 px-3 py-1 rounded-full border border-white/10",children:["View All ",t.jsx(Qs,{size:14})]})]}),t.jsxs("div",{className:"relative group/slider",children:[t.jsx("button",{onClick:()=>O(fe,"left"),className:"block absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg hover:bg-pink-600 transition-colors",children:t.jsx(pI,{size:20})}),t.jsx("button",{onClick:()=>O(fe,"right"),className:"block absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg hover:bg-pink-600 transition-colors",children:t.jsx(gI,{size:20})}),t.jsxs("div",{ref:fe,className:"flex overflow-x-auto snap-x snap-mandatory pb-6 px-2 no-scrollbar scroll-smooth",children:[ne.map(ve=>t.jsx("div",{className:be,children:t.jsx(Bc,{product:ve})},ve.id)),t.jsxs("div",{className:`${oe==="single"?"min-w-[90vw]":"min-w-[40vw]"} snap-center flex flex-col items-center justify-center p-4`,children:[t.jsx(He,{to:ke,className:"w-16 h-16 rounded-full bg-zinc-800 border border-gray-600 flex items-center justify-center text-white mb-2 shadow-lg",children:t.jsx(Qs,{})}),t.jsx("span",{className:"text-gray-400 text-xs",children:"View All"})]})]})]})]})};return t.jsxs("div",{className:"space-y-8 pb-20",children:[t.jsx("div",{className:"px-4 mt-4",children:t.jsxs("section",{className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-pink-900 via-purple-900 to-indigo-900 border border-pink-500/30 shadow-lg",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-full bg-white/5 skew-x-12 translate-x-10"}),t.jsxs("div",{className:"flex flex-col p-6 relative z-10 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-white/10 backdrop-blur-md rounded-full border border-white/20",children:t.jsx(jc,{size:24,className:"text-pink-300"})}),t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center gap-2 mb-1",children:t.jsx("span",{className:"bg-green-500 text-white text-[10px] font-bold px-2 py-0.5 rounded shadow animate-pulse",children:"LIMITED OFFER"})}),t.jsx("h2",{className:"text-xl font-bold text-white leading-tight",children:"Buy a Gift Voucher"})]})]}),t.jsxs("p",{className:"text-sm text-gray-200",children:["Buy ",t.jsx("strong",{className:"text-white",children:"R250-R500"}),", get ",t.jsx("span",{className:"text-yellow-300 font-bold",children:"R100 EXTRA"}),"!"]}),t.jsxs(He,{to:"/gift-cards",className:"w-full text-center py-3 bg-white text-purple-900 font-bold rounded-full shadow-lg flex items-center justify-center gap-2",children:["Create Voucher ",t.jsx(Qs,{size:16})]})]})]})}),t.jsx("div",{className:"px-4",children:t.jsxs("div",{className:"relative rounded-2xl overflow-hidden border-4 border-cyan-500 shadow-[0_0_15px_rgba(34,211,238,0.3)]",children:[t.jsxs("section",{className:"relative bg-zinc-900 text-white p-6",children:[t.jsxs("div",{className:`absolute top-3 right-3 text-[10px] font-bold px-2 py-1 rounded-full bg-red-600 text-white border border-red-400 z-20 ${x?"animate-pulse":""}`,children:[$," spots left"]}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-900/20 via-black to-zinc-900"}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center space-y-4",children:[t.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-cyan-400 drop-shadow-lg",children:" The Spoil Me Club"}),t.jsxs("p",{className:"text-sm text-gray-300",children:["Join for just ",r==="ZAR"?"R19":"$2"," / month."]}),t.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[t.jsxs("p",{children:[" Get a ",r==="ZAR"?"R25":"$3"," Voucher instantly."]}),t.jsx("p",{children:" Auto-entry into Weekly R500 Drop."})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full pt-2",children:[t.jsx(He,{to:"/membership",className:"py-2.5 bg-pink-600 hover:bg-pink-500 text-white rounded-lg font-bold text-xs flex items-center justify-center",children:"JOIN CLUB"}),t.jsxs(He,{to:"/weekly-winners",className:"py-2.5 border border-gray-600 text-gray-300 rounded-lg font-bold text-xs flex items-center justify-center gap-1",children:["WINNERS ",t.jsx(dr,{size:12})]})]})]})]}),t.jsx(QI,{})]})}),t.jsx(B,{title:"Best Sellers",items:q,reference:i,linkTo:"/catalog",icon:Pc}),t.jsxs("section",{className:"px-4",children:[t.jsx("div",{className:"flex justify-between items-end mb-4",children:t.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-purple-500 pb-1",children:"Shop Categories"})}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.map(A=>t.jsxs(He,{to:`/collections/${encodeURIComponent(A.name)}`,className:"relative aspect-square rounded-lg overflow-hidden border border-gray-800 bg-zinc-900 group",children:[t.jsx(Ou,{src:A.image,alt:A.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",fallback:ml(400),onError:eo}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent flex flex-col justify-end p-2",children:t.jsx("span",{className:"font-handwriting text-xs md:text-sm font-bold text-white leading-none truncate",children:A.name})})]},A.id))})]}),t.jsx("section",{className:"px-4",children:t.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-900 via-pink-900 to-purple-900 rounded-2xl p-6 border-2 border-yellow-400 shadow-lg text-center",children:[t.jsx(Lt,{className:"absolute top-2 left-2 text-yellow-400/20 w-24 h-24 rotate-[-15deg]"}),t.jsxs("div",{className:"relative z-10 space-y-3",children:[t.jsx("h2",{className:"font-cherry text-3xl text-yellow-400 drop-shadow-md",children:"THE SECRET VAULT"}),t.jsx("p",{className:"font-architects text-sm text-gray-200 leading-relaxed",children:"Clearance & Samples. Massive discounts for Deluxe Members!"}),t.jsx(He,{to:"/vault",className:"inline-block w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-black font-bold rounded-full shadow-lg",children:"Enter The Vault"})]})]})}),t.jsx(B,{title:"Stud Earrings",items:V,reference:o,linkTo:"/catalog/stud"}),t.jsx(B,{title:"Dangle Earrings",items:I,reference:c,linkTo:"/catalog/dangle"}),t.jsx("section",{className:"px-4",children:t.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur rounded-xl border border-white/10 p-4 space-y-4 divide-y divide-white/10",children:[t.jsxs(He,{to:"/earn-rewards",className:"flex items-center gap-4 pt-1",children:[t.jsx("div",{className:"p-2 bg-pink-900/30 rounded-full text-pink-400",children:t.jsx(us,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:s.email?`Points: ${s.loyaltyPoints}`:"Loyalty Rewards"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Redeem points for discounts."})]})]}),t.jsxs(He,{to:"/affiliate-program",className:"flex items-center gap-4 pt-4",children:[t.jsx("div",{className:"p-2 bg-green-900/30 rounded-full text-green-400",children:t.jsx(Pc,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Partnership Program"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Earn 20% commission."})]})]}),t.jsxs("div",{className:"flex items-center gap-4 pt-4",children:[t.jsx("div",{className:"p-2 bg-cyan-900/30 rounded-full text-cyan-400",children:t.jsx(cr,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Flash Sales"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Daily limited-time offers."})]})]})]})}),t.jsx(B,{title:"Unique Pendants",items:k,reference:u,linkTo:"/catalog/unique",variant:"single"}),t.jsx(B,{title:"Bracelets",items:E,reference:f,linkTo:"/catalog/bracelet"}),t.jsx("section",{className:"px-4",children:t.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-900 to-pink-900 p-6 text-center border border-purple-500/30",children:[t.jsx(js,{className:"absolute top-2 left-2 text-white/20 w-16 h-16 animate-pulse"}),t.jsxs("div",{className:"relative z-10 space-y-3",children:[t.jsx("h2",{className:"font-cherry text-2xl text-white",children:"Unlock VIP Pricing"}),t.jsxs("p",{className:"text-xs text-gray-200",children:["Save up to ",t.jsx("span",{className:"text-yellow-300 font-bold",children:"50% OFF"})," retail & get monthly free gifts."]}),t.jsx(He,{to:"/membership",className:"inline-block w-full py-3 bg-white text-purple-900 font-bold rounded-full shadow-lg mt-2",children:"View Perks"})]})]})}),t.jsx(B,{title:"Jewelry Sets",items:L,reference:h,linkTo:"/catalog/sets"}),t.jsx("section",{className:"px-4 mb-8",children:t.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border-2 border-yellow-600/50 text-center relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-yellow-900/10"}),t.jsxs("div",{className:"relative z-10 space-y-3",children:[t.jsx("h2",{className:"font-cherry text-2xl text-yellow-500",children:"JOIN OUR ARTIST NETWORK"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Jewelry artist? Showcase to 7,000+ collectors. Only 1% commission!"}),t.jsx(He,{to:"/artist-partnership",className:"inline-block w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-white font-bold rounded-full shadow-lg",children:"Start Your Shop"}),t.jsxs("p",{className:"text-[10px] text-gray-500",children:["From ",r==="ZAR"?"R19":"$1.50"," / month"]})]})]})})]})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="analytics",tR="firebase_id",sR="origin",nR=60*1e3,rR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on=new Yu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Dn=new ca("analytics","Analytics",iR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(n){if(!n.startsWith(zp)){const e=Dn.create("invalid-gtag-resource",{gtagURL:n});return on.warn(e.message),""}return n}function GN(n){return Promise.all(n.map(e=>e.catch(s=>s)))}function oR(n,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(n,e)),s}function lR(n,e){const s=oR("firebase-js-sdk-policy",{createScriptURL:aR}),r=document.createElement("script"),i=`${zp}?l=${n}&id=${e}`;r.src=s?s==null?void 0:s.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function cR(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function dR(n,e,s,r,i,o){const c=r[i];try{if(c)await e[c];else{const f=(await GN(s)).find(h=>h.measurementId===i);f&&await e[f.appId]}}catch(u){on.error(u)}n("config",i,o)}async function uR(n,e,s,r,i){try{let o=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const u=await GN(s);for(const f of c){const h=u.find(v=>v.measurementId===f),x=h&&e[h.appId];if(x)o.push(x);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,i||{})}catch(o){on.error(o)}}function hR(n,e,s,r){async function i(o,...c){try{if(o==="event"){const[u,f]=c;await uR(n,e,s,u,f)}else if(o==="config"){const[u,f]=c;await dR(n,e,s,r,u,f)}else if(o==="consent"){const[u,f]=c;n("consent",u,f)}else if(o==="get"){const[u,f,h]=c;n("get",u,f,h)}else if(o==="set"){const[u]=c;n("set",u)}else n(o,...c)}catch(u){on.error(u)}}return i}function fR(n,e,s,r,i){let o=function(...c){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=hR(o,n,e,s),{gtagCore:o,wrappedGtag:window[i]}}function mR(n){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(zp)&&s.src.includes(n))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=30,gR=1e3;class xR{constructor(e={},s=gR){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const KN=new xR;function yR(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function bR(n){var c;const{appId:e,apiKey:s}=n,r={method:"GET",headers:yR(s)},i=rR.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let u="";try{const f=await o.json();(c=f.error)!=null&&c.message&&(u=f.error.message)}catch{}throw Dn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:u})}return o.json()}async function vR(n,e=KN,s){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw Dn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Dn.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new jR;return setTimeout(async()=>{u.abort()},nR),JN({appId:r,apiKey:i,measurementId:o},c,u,e)}async function JN(n,{throttleEndTimeMillis:e,backoffCount:s},r,i=KN){var u;const{appId:o,measurementId:c}=n;try{await wR(r,e)}catch(f){if(c)return on.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:o,measurementId:c};throw f}try{const f=await bR(n);return i.deleteThrottleMetadata(o),f}catch(f){const h=f;if(!NR(h)){if(i.deleteThrottleMetadata(o),c)return on.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:c};throw f}const x=Number((u=h==null?void 0:h.customData)==null?void 0:u.httpStatus)===503?Vx(s,i.intervalMillis,pR):Vx(s,i.intervalMillis),v={throttleEndTimeMillis:Date.now()+x,backoffCount:s+1};return i.setThrottleMetadata(o,v),on.debug(`Calling attemptFetch again in ${x} millis`),JN(n,v,r,i)}}function wR(n,e){return new Promise((s,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(s,i);n.addEventListener(()=>{clearTimeout(o),r(Dn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function NR(n){if(!(n instanceof Hn)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class jR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function SR(n,e,s,r,i){if(i&&i.global){n("event",s,r);return}else{const o=await e,c={...r,send_to:o};n("event",s,c)}}async function kR(n,e,s,r){if(r&&r.global){const i={};for(const o of Object.keys(s))i[`user_properties.${o}`]=s[o];return n("set",i),Promise.resolve()}else{const i=await e;n("config",i,{update:!0,user_properties:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(){if(fp())try{await mp()}catch(n){return on.warn(Dn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return on.warn(Dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function CR(n,e,s,r,i,o,c){const u=vR(n);u.then(N=>{s[N.measurementId]=N.appId,n.options.measurementId&&N.measurementId!==n.options.measurementId&&on.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>on.error(N)),e.push(u);const f=_R().then(N=>{if(N)return r.getId()}),[h,x]=await Promise.all([u,f]);mR(o)||lR(o,h.measurementId),i("js",new Date);const v=(c==null?void 0:c.config)??{};return v[sR]="firebase",v.update=!0,x!=null&&(v[tR]=x),i("config",h.measurementId,v),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.app=e}_delete(){return delete tl[this.app.options.appId],Promise.resolve()}}let tl={},ib=[];const ab={};let fm="dataLayer",TR="gtag",ob,Up,lb=!1;function PR(){const n=[];if(fw()&&n.push("This is a browser extension environment."),mw()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),s=Dn.create("invalid-analytics-context",{errorInfo:e});on.warn(s.message)}}function AR(n,e,s){PR();const r=n.options.appId;if(!r)throw Dn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)on.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Dn.create("no-api-key");if(tl[r]!=null)throw Dn.create("already-exists",{id:r});if(!lb){cR(fm);const{wrappedGtag:o,gtagCore:c}=fR(tl,ib,ab,fm,TR);Up=o,ob=c,lb=!0}return tl[r]=CR(n,ib,ab,e,ob,fm,s),new ER(n)}function IR(n=cl()){n=dn(n);const e=Vr(n,Lu);return e.isInitialized()?e.getImmediate():RR(n)}function RR(n,e={}){const s=Vr(n,Lu);if(s.isInitialized()){const i=s.getImmediate();if(na(e,s.getOptions()))return i;throw Dn.create("already-initialized")}return s.initialize({options:e})}function DR(n,e,s){n=dn(n),kR(Up,tl[n.app.options.appId],e,s).catch(r=>on.error(r))}function YN(n,e,s,r){n=dn(n),SR(Up,tl[n.app.options.appId],e,s,r).catch(i=>on.error(i))}const cb="@firebase/analytics",db="0.10.19";function MR(){Nn(new cn(Lu,(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return AR(r,i,s)},"PUBLIC")),Nn(new cn("analytics-internal",n,"PRIVATE")),Ds(cb,db),Ds(cb,db,"esm2020");function n(e){try{const s=e.getProvider(Lu).getImmediate();return{logEvent:(r,i,o)=>YN(s,r,i,o),setUserProperties:(r,i)=>DR(s,r,i)}}catch(s){throw Dn.create("interop-component-reg-failed",{reason:s})}}}MR();const OR={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},Bo=[{size:5,mm:49.3},{size:6,mm:51.9},{size:7,mm:54.4},{size:8,mm:57},{size:9,mm:59.5},{size:10,mm:62.1},{size:11,mm:64.6},{size:12,mm:67.2},{size:13,mm:69.7}],LR=()=>{const{id:n}=Dc(),{products:e,addToCart:s,toggleWishlist:r,user:i,shareProduct:o,cart:c,currency:u}=wt(),f=en(),[h,x]=S.useState(0),[v,N]=S.useState(!1),[T,_]=S.useState(!1),[C,R]=S.useState(!1),[z,$]=S.useState(!1),[U,Z]=S.useState(1),[q,V]=S.useState(""),[I,k]=S.useState("Ring Finger"),[E,L]=S.useState(null),[O,B]=S.useState(""),[A,ne]=S.useState(null),[fe,ke]=S.useState(""),[De,oe]=S.useState(""),[be,ve]=S.useState([]),X=5,ue=10,[se,xe]=S.useState(X),H=e.find(je=>je.id===n),Pe=H?e.filter(je=>je.category===H.category&&je.id!==H.id).slice(0,4):[];S.useEffect(()=>{window.scrollTo(0,0),R(!1)},[n]),S.useEffect(()=>{if(H){const je=ts(Wt),Ye=IR();YN(Ye,"view_item",{currency:u,value:je,items:[{item_id:H.id,item_name:H.name,price:je}]})}},[H,u]),S.useEffect(()=>{(async()=>{if(H)try{const Ye=await Ps("reviews",{filters:{productId:H.id},orderBy:{column:"created_at",ascending:!1},limit:Math.min(se,ue)});ve(Ye.map(Et=>({id:Et.id,...Et})))}catch(Ye){console.error("Review fetch error:",Ye)}})()},[H,se]);const Te=H!=null&&H.reviews&&Array.isArray(H.reviews)?H.reviews:[],Ue=S.useMemo(()=>{const je=[...Te,...be],Ye=new Set,Et=[];for(const Ut of je){const Bt=((Ut==null?void 0:Ut.id)??"").toString();if(Bt){if(Ye.has(Bt))continue;Ye.add(Bt)}Et.push(Ut)}const Tt=Ut=>{const Bt=(Ut==null?void 0:Ut.created_at)??(Ut==null?void 0:Ut.createdAt)??(Ut==null?void 0:Ut.date);if(!Bt)return 0;if(typeof Bt=="string"){const Gn=Date.parse(Bt);return Number.isFinite(Gn)?Gn:0}if(Bt!=null&&Bt.toDate&&typeof Bt.toDate=="function")try{return Bt.toDate().getTime()}catch{return 0}return Bt instanceof Date?Bt.getTime():0},Mt=Et.sort((Ut,Bt)=>Tt(Bt)-Tt(Ut)).slice(0,ue);return Mt.slice(0,Math.min(se,Mt.length))},[Te,be,se]),Xe=S.useMemo(()=>{const je=[...Te,...be],Ye=Rt=>{const Mt=(Rt==null?void 0:Rt.created_at)??(Rt==null?void 0:Rt.createdAt)??(Rt==null?void 0:Rt.date);if(!Mt)return 0;if(typeof Mt=="string"){const Ut=Date.parse(Mt);return Number.isFinite(Ut)?Ut:0}if(Mt!=null&&Mt.toDate&&typeof Mt.toDate=="function")try{return Mt.toDate().getTime()}catch{return 0}return Mt instanceof Date?Mt.getTime():0},Et=new Set,Tt=[];for(const Rt of je){const Mt=((Rt==null?void 0:Rt.id)??"").toString();if(Mt){if(Et.has(Mt))continue;Et.add(Mt)}Tt.push(Rt)}return Tt.sort((Rt,Mt)=>Ye(Mt)-Ye(Rt)).slice(0,ue).length},[Te,be]);S.useEffect(()=>{if(H){if(H.type==="Ring"&&H.ringStock){const je=Object.entries(H.ringStock).filter(([Ye,Et])=>Et>0).map(([Ye])=>Ye);je.length>0&&B(je[0])}(H.type==="Stud"||H.type==="Dangle")&&H.showEarringOptions&&H.earringMaterials&&H.earringMaterials.length>0&&ne(H.earringMaterials[0]),(H.type==="Pendant"||H.type==="Necklace")&&H.chainStyles&&H.chainStyles.length>0&&(H.chainStyles.includes("Metal Chain")?ke("Metal Chain"):ke(H.chainStyles[0]))}},[H]),S.useEffect(()=>{if(fe==="Leather Cord")oe("45cm");else if(fe==="Metal Chain"&&(H!=null&&H.pendantChainLengths)){const je=Object.keys(H.pendantChainLengths).find(Ye=>H.pendantChainLengths[Ye]);je&&oe(je)}},[fe,H]);const rt=S.useMemo(()=>{var je;return((je=c.find(Ye=>Ye.id===(H==null?void 0:H.id)&&Ye.selectedSize===O&&Ye.selectedMaterial===(A==null?void 0:A.name)&&Ye.selectedChainStyle===fe&&Ye.selectedChainLength===De))==null?void 0:je.quantity)||0},[c,H==null?void 0:H.id,O,A,fe,De]),{availableStock:zt,isOutOfStock:we,isStockLimitInCart:Ce,buttonText:Qe}=S.useMemo(()=>{var Rt;if(!H)return{availableStock:0,isOutOfStock:!0,isStockLimitInCart:!0,buttonText:"Product not found"};let je=H.stock,Ye=je<=0,Et="Add to Cart";H.type==="Ring"&&(O?(je=((Rt=H.ringStock)==null?void 0:Rt[O])||0,je<=0&&(Ye=!0,Et="Out of Stock")):(Ye=!0,Et="Select a Size")),H.isSoldOut&&(Ye=!0);const Tt=je>0&&rt>=je;return!Ye&&Tt&&(Et="Stock limit in cart"),{availableStock:je,isOutOfStock:Ye,isStockLimitInCart:Tt,buttonText:Et}},[H,O,rt]);if(!H)return t.jsx("div",{className:"text-center py-20 text-gray-400",children:"Product not found"});const ut=i.wishlist.includes(H.id),ie=new Date,Se=H.promoStartsAt?new Date(H.promoStartsAt):null,Be=H.promoExpiresAt?new Date(H.promoExpiresAt):null,Ne=Se&&!isNaN(Se.getTime()),We=Be&&!isNaN(Be.getTime()),jt=(H.promoPrice||0)>0&&(!Ne||Se<=ie)&&(!We||Be>ie),ye=u==="ZAR"?H.price:H.priceUSD!==void 0?H.priceUSD:0,J=u==="ZAR"?H.memberPrice||ye*.8:H.memberPriceUSD!==void 0?H.memberPriceUSD:ye*.8;let _e=ye,kt="none";i.isMember?(_e=J,jt&&(i.membershipTier==="deluxe"&&H.promoDeluxeMemberPrice&&H.promoDeluxeMemberPrice>0?(_e=H.promoDeluxeMemberPrice,kt="deluxe"):i.membershipTier==="premium"&&H.promoPremiumMemberPrice&&H.promoPremiumMemberPrice>0?(_e=H.promoPremiumMemberPrice,kt="premium"):i.membershipTier==="basic"&&H.promoBasicMemberPrice&&H.promoBasicMemberPrice>0?(_e=H.promoBasicMemberPrice,kt="basic"):(H.promoPrice||1/0)<J&&(_e=H.promoPrice))):jt&&(_e=H.promoPrice);const xt=jt&&H.promoBasicMemberPrice&&H.promoBasicMemberPrice>0?H.promoBasicMemberPrice:J;let Wt=_e;A&&(Wt+=A.modifier);const $t=ye+((A==null?void 0:A.modifier)||0),Ss=$t-xt,os=Math.round(Ss/$t*100),Le=jt&&(H.promoBasicMemberPrice&&H.promoBasicMemberPrice>0||H.promoDeluxeMemberPrice&&H.promoDeluxeMemberPrice>0),fs=je=>Math.round(($t-je)/$t*100),ls=S.useMemo(()=>[...Te,...be].filter(Ye=>typeof(Ye==null?void 0:Ye.rating)=="number"&&!Number.isNaN(Ye.rating)),[Te,be]),Ws=ls.length>0,ur=Ws?(ls.reduce((je,Ye)=>je+Ye.rating,0)/ls.length).toFixed(1):"4.9",Ms=Ws?ls.length:128,Os=H.giftProductId?e.find(je=>je.id===H.giftProductId):null,Mn=()=>{we||Ce||(s({...H,price:ye},{selectedSize:O,selectedMaterial:A==null?void 0:A.name,selectedMaterialModifier:A==null?void 0:A.modifier,selectedChainStyle:fe,selectedChainLength:De}),Os&&s(Os,{}))},On=()=>{const je=parseFloat(q);if(!je||isNaN(je))return;let Ye=Bo[0],Et=Math.abs(je-Ye.mm);for(let Tt=1;Tt<Bo.length;Tt++){const Rt=Math.abs(je-Bo[Tt].mm);Rt<Et&&(Et=Rt,Ye=Bo[Tt])}je>Bo[Bo.length-1].mm+1.5?L(13):L(Ye.size),Z(4)},ms=()=>{$(!1),Z(1),V(""),L(null)},Ls=async je=>{const Ye=window.location.href,Et="Look at this I just bought or saw this isn't it beautiful!",Tt=`${Et} ${Ye}`;if(i.id&&!C?(o(H.id),R(!0),alert("You earned 50 Loyalty Points for sharing!")):i.id,je==="native"&&navigator.share)try{await navigator.share({title:H.name,text:Et,url:Ye})}catch{console.log("Native share cancelled")}else je==="whatsapp"?window.open(`https://wa.me/?text=${encodeURIComponent(Tt)}`,"_blank"):je==="facebook"&&window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(Ye)}&quote=${encodeURIComponent(Et)}`,"_blank")},Vt=HN(H.images[h]||H.images[0]||"",ml(800,800,"Spoil Me Vintage")),ks=()=>u==="ZAR"?"R":"$",ts=(je,Ye)=>u==="ZAR"?je:u==="USD"?Ye!==void 0?Ye:0:je;return t.jsxs("div",{className:"space-y-16 pt-4 pb-16 relative",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-4",children:[t.jsx(He,{to:"/",className:"hover:text-white",children:"Home"}),t.jsx("span",{children:"/"}),t.jsx(He,{to:`/collections/${encodeURIComponent(H.category)}`,className:"hover:text-white",children:H.category}),t.jsx("span",{children:"/"}),t.jsx("span",{className:"text-gray-300 truncate max-w-[200px]",children:H.name})]}),T&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>_(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-400",children:[t.jsx(cm,{size:32}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"Verified Purchases Only"})]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-4",children:"To maintain the integrity of our reviews, we only accept feedback from verified customers who have purchased this specific item."}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800 mb-6",children:[t.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"How it works:"}),t.jsxs("ul",{className:"text-xs text-gray-400 space-y-3",children:[t.jsxs("li",{className:"flex gap-2 items-start",children:[t.jsx(cr,{size:14,className:"text-cyan-400 shrink-0 mt-0.5"})," ",t.jsxs("span",{children:["A secure review link will be sent to you ",t.jsx("strong",{children:"25 days after purchase"}),"."]})]}),t.jsxs("li",{className:"flex gap-2 items-start",children:[t.jsx(Rn,{size:14,className:"text-yellow-400 shrink-0 mt-0.5"})," ",t.jsxs("span",{children:["Review honestly and earn ",t.jsx("strong",{children:"100 Loyalty Points"}),"!"]})]}),t.jsxs("li",{className:"flex gap-2 items-start",children:[t.jsx(us,{size:14,className:"text-pink-500 shrink-0 mt-0.5"})," ",t.jsx("span",{children:"Use points (1000 pts = R10) for discounts on your next order."})]})]})]}),t.jsx("button",{onClick:()=>_(!1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-xl font-semibold transition-colors",children:"Understood"})]})]}),z&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:ms}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[t.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[t.jsx(tb,{className:"text-pink-500",size:20})," Find Your Ring Size"]}),t.jsx("button",{onClick:ms,className:"text-gray-500 hover:text-white",children:t.jsx(mu,{size:16})})]}),t.jsxs("div",{className:"min-h-[250px] flex flex-col",children:[U===1&&t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsxs("div",{className:"bg-pink-900/20 p-4 rounded-xl border border-pink-500/20 text-center",children:[t.jsx("span",{className:"text-3xl block mb-2",children:""}),t.jsx("p",{className:"text-sm text-pink-200 font-semibold",children:"Step 1"})]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Take a flexible measuring tape or a piece of string and wrap it around the base of the finger you want to wear the ring on."}),t.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/20 rounded-lg",children:[t.jsxs("p",{className:"text-xs text-yellow-400 font-bold flex items-center gap-2",children:[t.jsx(mu,{size:14})," Important:"]}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Please read your measurement in Millimeters (MM), not CM."})]})]}),U===2&&t.jsxs("div",{className:"flex-1 space-y-6 text-center flex flex-col justify-center",children:[t.jsx("p",{className:"text-white font-semibold",children:"Did you measure your finger with a tape or string?"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>Z(3),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-xl font-bold transition-all",children:"Yes, I measured my finger"}),t.jsx("button",{onClick:()=>Z(1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-gray-300 rounded-xl font-medium transition-all",children:"Back to Instructions"})]})]}),U===3&&t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Which finger?"}),t.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-sm",value:I,onChange:je=>k(je.target.value),children:[t.jsx("option",{children:"Thumb"}),t.jsx("option",{children:"Index Finger"}),t.jsx("option",{children:"Middle Finger"}),t.jsx("option",{children:"Ring Finger"}),t.jsx("option",{children:"Pinky Finger"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Measured Length (MM)"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",placeholder:"e.g. 54.5",className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-lg font-bold focus:border-pink-500 focus:outline-none",value:q,onChange:je=>V(je.target.value)}),t.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-bold",children:"mm"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please enter the exact circumference."})]})]}),U===4&&t.jsxs("div",{className:"flex-1 text-center flex flex-col justify-center space-y-6",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Based on your ",I," measurement:"]}),t.jsxs("div",{className:"inline-block p-6 bg-zinc-800 rounded-full border-4 border-pink-500 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[t.jsx("span",{className:"block text-xs text-gray-400 uppercase tracking-wide",children:"US Size"}),t.jsx("span",{className:"text-4xl font-black text-white",children:E})]})]}),H.ringStock&&H.ringStock[(E==null?void 0:E.toString())||""]>0?t.jsxs("button",{onClick:()=>{B((E==null?void 0:E.toString())||""),ms()},className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold transition-all flex items-center justify-center gap-2",children:[t.jsx(mt,{size:18})," Select Size ",E]}):t.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/20 rounded-lg text-red-300 text-sm",children:["Sorry, Size ",E," is currently out of stock."]})]})]}),t.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-800",children:[U>1&&U<4?t.jsxs("button",{onClick:()=>Z(je=>je-1),className:"text-gray-400 hover:text-white text-sm flex items-center gap-1",children:[t.jsx(ia,{size:14})," Back"]}):t.jsx("div",{}),U===1&&t.jsxs("button",{onClick:()=>Z(2),className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500",children:["Next Step ",t.jsx(Qs,{size:14,className:"inline"})]}),U===3&&t.jsx("button",{onClick:On,disabled:!q,className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Get My Size"}),U===4&&t.jsx("button",{onClick:ms,className:"text-gray-400 hover:text-white text-sm",children:"Close"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden bg-zinc-900 shadow-lg border border-gray-800 relative group",children:[t.jsx(Ou,{src:Vt,alt:H.name,className:"w-full h-full object-cover opacity-95",onError:eo}),t.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[H.isNewArrival&&t.jsx("span",{className:"bg-cyan-600/90 text-white text-xs font-bold px-3 py-1 rounded-full w-fit",children:"NEW"}),i.isMember&&t.jsxs("span",{className:"bg-purple-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-purple-400 flex items-center gap-1 w-fit",children:[t.jsx(Lt,{size:12,fill:"currentColor"}),kt!=="none"?`${kt.toUpperCase()} PRICE`:"MEMBER DEAL"]})]}),jt&&!i.isMember&&t.jsx("span",{className:"absolute top-4 right-4 bg-green-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-[0_0_10px_rgba(74,222,128,0.5)]",children:"PROMO"})]}),t.jsx("div",{className:"grid grid-cols-4 gap-4",children:H.images.map((je,Ye)=>t.jsx("button",{onClick:()=>x(Ye),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${h===Ye?"border-pink-500 opacity-100 shadow-[0_0_10px_rgba(236,72,153,0.4)]":"border-gray-800 opacity-60 hover:opacity-100"}`,children:t.jsx(Ou,{src:je,alt:`View ${Ye}`,className:"w-full h-full object-cover",onError:eo})},Ye))})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[t.jsx("span",{className:"uppercase tracking-wider font-semibold text-cyan-400",children:H.category}),t.jsx("span",{children:""}),t.jsxs("div",{className:"flex items-center text-yellow-400 gap-1",children:[t.jsx(Rn,{size:14,fill:"currentColor"})," ",ur," (",Ms," reviews)"]})]}),t.jsx("h1",{className:"text-[26px] font-bold text-white mb-4",children:H.name}),t.jsxs("div",{className:"flex flex-col gap-1",children:[H.compareAtPrice&&H.compareAtPrice>Wt&&t.jsxs("div",{className:"flex items-center gap-2 relative",children:[t.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["RRP ",ks(),ts(H.compareAtPrice,H.compareAtPriceUSD).toFixed(2)]}),t.jsx("button",{onClick:()=>N(!v),className:"text-gray-500 hover:text-cyan-400",children:t.jsx(Xi,{size:14})}),v&&t.jsx("div",{className:"absolute top-6 left-0 z-10 bg-zinc-950 border border-gray-700 p-3 rounded-lg shadow-xl w-64 text-xs text-gray-300 leading-relaxed",children:"Recommended retail price (RRP) set by the manufacturer and used for price comparison purposes."})]}),t.jsxs("div",{className:"flex items-baseline gap-3",children:[t.jsxs("span",{className:`text-[32px] font-bold drop-shadow-sm ${i.isMember?"text-purple-400":"text-green-400"}`,children:[ks(),ts(Wt).toFixed(2)]}),$t>Wt+.01&&t.jsxs("span",{className:"text-lg text-gray-600 line-through",children:[ks(),ts($t).toFixed(2)]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[jt&&t.jsxs("div",{className:"flex items-center gap-2 text-xs bg-green-900/30 border border-green-500/30 text-green-400 px-2 py-1 rounded w-fit",children:[t.jsx(cr,{size:12})," Ends: ",new Date(H.promoExpiresAt).toLocaleDateString()]}),i.isMember&&t.jsxs("div",{className:"flex items-center gap-2 text-xs bg-purple-900/30 border border-purple-500/30 text-purple-400 px-2 py-1 rounded w-fit font-bold",children:[t.jsx(Lt,{size:12})," ",kt!=="none"?kt:"Member"," Pricing Applied"]})]}),t.jsx("div",{className:"mt-3 flex items-center gap-2 text-sm",children:we?t.jsx("span",{className:"bg-red-600 text-white font-black px-3 py-1 rounded-lg shadow-[0_0_10px_rgba(220,38,38,0.8)] border-2 border-red-400 animate-pulse",children:"Just SOLD"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${zt>0?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.8)]":"bg-red-500"}`}),t.jsx("span",{className:`${zt>0?zt<=5?"text-orange-400":"text-green-400":"text-red-400"} font-bold`,children:zt>0?zt<=5?`Only ${zt} left!`:"In Stock":"Out of Stock"})]})})]})]}),!i.isMember&&t.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-900/50 rounded-xl p-5 relative overflow-hidden group",children:[t.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:t.jsx(Lt,{size:80,className:"text-purple-500 transform rotate-12"})}),t.jsxs("h3",{className:"text-purple-400 font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2",children:[t.jsx(Lt,{size:16,fill:"currentColor"})," Unlock Membership Savings"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-zinc-800/50 border border-zinc-700/50",children:[t.jsx("span",{className:"text-gray-400",children:"Retail Price"}),t.jsxs("span",{className:"text-gray-300 font-medium",children:[ks(),ts($t).toFixed(2)]})]}),Le?t.jsxs("div",{className:"space-y-2",children:[H.promoBasicMemberPrice&&H.promoBasicMemberPrice>0&&t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Basic Member"}),t.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[fs(H.promoBasicMemberPrice),"% Off"]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[ks(),ts(H.promoBasicMemberPrice).toFixed(0)]})})]}),H.promoPremiumMemberPrice&&H.promoPremiumMemberPrice>0&&H.promoPremiumMemberPrice!==H.promoBasicMemberPrice&&t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Premium Member"}),t.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[fs(H.promoPremiumMemberPrice),"% Off"]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[ks(),ts(H.promoPremiumMemberPrice).toFixed(0)]})})]}),H.promoDeluxeMemberPrice&&H.promoDeluxeMemberPrice>0&&t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-lime-900/20 border border-lime-500/40",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-lime-200 font-bold text-xs",children:"Deluxe Member"}),t.jsxs("span",{className:"text-xs text-lime-300 uppercase font-bold",children:[fs(H.promoDeluxeMemberPrice),"% Off"]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("span",{className:"block text-lime-400 font-bold text-lg",children:[ks(),ts(H.promoDeluxeMemberPrice).toFixed(0)]})})]})]}):t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[t.jsx("span",{className:"text-purple-200 font-bold",children:"Member Price"}),t.jsxs("div",{className:"text-right",children:[t.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[ks(),ts(xt).toFixed(2)]}),t.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:["Save ",os,"%"]})]})]})]}),t.jsxs("div",{className:"mt-4 text-center",children:[t.jsx("button",{onClick:()=>f("/membership"),className:"w-full py-3 text-sm font-bold uppercase tracking-widest text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded hover:shadow-[0_0_15px_rgba(168,85,247,0.4)] transition-all",children:"Join Now"}),t.jsx("p",{className:"text-[10px] text-red-400 font-bold mt-2 uppercase tracking-wide animate-pulse",children:"LIMITED places Available"})]})]}),t.jsxs("div",{className:"space-y-6 mt-6 border-t border-gray-800 pt-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-cherry text-2xl text-pink-500 mb-2 tracking-wide",children:"Description"}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:H.description})]}),H.whenAndHowToWear&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-cherry text-2xl text-cyan-400 mb-2 tracking-wide",children:"Stylish Suggestions"}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:H.whenAndHowToWear})]}),H.material&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-cherry text-2xl text-purple-400 mb-2 tracking-wide",children:"Materials"}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:H.material})]}),H.isUniquePendant&&t.jsxs("div",{className:"bg-orange-900/10 border border-orange-500/20 rounded-xl p-5 mt-4",children:[t.jsxs("h3",{className:"font-cherry text-xl text-orange-400 mb-3 tracking-wide flex items-center gap-2",children:[t.jsx(mu,{size:20})," Oxidized Jewelry Care"]}),t.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"This unique pendant features a deliberate oxidized finish (darkened patina) to enhance the vintage detail."}),t.jsxs("ul",{className:"text-xs text-gray-400 space-y-2 list-disc pl-4",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Do NOT use liquid silver cleaner or dips:"})," These will strip the antique finish instantly."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Avoid polishing cloths:"})," Aggressive rubbing can remove the darkened details."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Keep it dry:"})," Remove before swimming or showering to preserve the wire wrapping."]}),t.jsx("li",{children:"To clean, simply wipe gently with a soft, dry cotton cloth."})]})]})]}),Os&&t.jsxs("div",{className:"bg-gradient-to-r from-purple-900/40 to-pink-900/40 border border-purple-500/30 rounded-xl p-4 flex items-center gap-4 shadow-[0_0_15px_rgba(168,85,247,0.1)]",children:[t.jsx("div",{className:"p-3 bg-black/50 rounded-full text-pink-400 border border-pink-500/30",children:t.jsx(us,{size:24})}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-pink-400 uppercase tracking-wider mb-1",children:"Free Gift Included"}),t.jsx("h4",{className:"font-bold text-white",children:Os.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:["Value: R",H.giftValue||Os.price]})]}),t.jsx("div",{className:"ml-auto",children:t.jsx("img",{src:Os.images[0],alt:"Gift",className:"w-12 h-12 rounded object-cover border border-gray-700"})})]}),t.jsxs("div",{className:"space-y-6 py-4 border-t border-gray-800",children:[H.type==="Ring"&&H.ringStock&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Size"}),t.jsxs("button",{onClick:()=>{$(!0),Z(1)},className:"text-xs text-pink-400 hover:text-pink-300 flex items-center gap-1 underline decoration-dotted underline-offset-4",children:[t.jsx(tb,{size:14})," Find My Ring Size"]})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(H.ringStock).map(([je,Ye])=>t.jsx("button",{disabled:Ye===0,onClick:()=>B(je),className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium border transition-all ${O===je?"bg-pink-600 border-pink-600 text-white shadow-[0_0_10px_rgba(236,72,153,0.5)]":Ye===0?"bg-zinc-900 border-gray-800 text-gray-600 cursor-not-allowed decoration-slice line-through":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:je},je))}),O&&H.ringStock[O]>0&&t.jsxs("p",{className:`text-xs mt-2 flex items-center gap-1 ${H.ringStock[O]<=5?"text-orange-400 font-bold":"text-green-400"}`,children:[t.jsx(mt,{size:12}),H.ringStock[O]<=5?`Only ${H.ringStock[O]} left in stock!`:"In Stock"]}),O&&H.ringStock[O]===0&&t.jsx("p",{className:"text-xs text-red-500 mt-2 font-bold",children:"Out of stock for this size."})]}),(H.type==="Stud"||H.type==="Dangle")&&H.showEarringOptions&&H.earringMaterials&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Material"}),t.jsx("div",{className:"grid gap-3",children:H.earringMaterials.map(je=>t.jsxs("div",{onClick:()=>ne(je),className:`relative p-4 rounded-xl border cursor-pointer transition-all ${(A==null?void 0:A.name)===je.name?"bg-pink-900/10 border-pink-500 shadow-[0_0_10px_rgba(236,72,153,0.2)]":"bg-zinc-900 border-gray-800 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`font-medium text-sm ${(A==null?void 0:A.name)===je.name?"text-white":"text-gray-300"}`,children:je.name}),t.jsx("span",{className:"text-xs font-bold text-pink-400",children:je.modifier>0?`+${ks()}${ts(je.modifier).toFixed(0)}`:""})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:je.description}),(A==null?void 0:A.name)===je.name&&t.jsx("div",{className:"absolute top-3 right-3 w-4 h-4 bg-pink-500 rounded-full flex items-center justify-center",children:t.jsx(mt,{size:10,className:"text-white"})})]},je.name))})]}),(H.type==="Pendant"||H.type==="Necklace")&&H.chainStyles&&H.chainStyles.length>0&&t.jsxs("div",{className:"space-y-6",children:[H.chainStyles.length>1&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Chain Style"}),t.jsx("div",{className:"flex gap-4",children:H.chainStyles.map(je=>t.jsx("button",{onClick:()=>ke(je),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all ${fe===je?"bg-pink-600 border-pink-600 text-white":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:je},je))})]}),fe==="Metal Chain"&&H.pendantChainLengths&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Length"}),t.jsx("div",{className:"grid gap-2",children:Object.keys(H.pendantChainLengths).filter(je=>H.pendantChainLengths[je]).map(je=>t.jsxs("button",{onClick:()=>oe(je),className:`text-left p-3 rounded-lg border transition-all ${De===je?"bg-cyan-900/20 border-cyan-500":"bg-zinc-900 border-gray-800 hover:bg-zinc-800"}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:`text-sm font-medium ${De===je?"text-cyan-400":"text-gray-200"}`,children:je}),De===je&&t.jsx(mt,{size:14,className:"text-cyan-400"})]}),t.jsx("p",{className:"text-xs text-gray-500",children:OR[je]||""})]},je))})]}),fe==="Leather Cord"&&t.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded-lg border border-gray-700 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gray-700 rounded-full",children:t.jsx(mt,{size:14,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-white",children:"Fixed Length: 45cm"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Standard leather cord length."})]})]})]})]}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsxs("button",{onClick:Mn,disabled:we||Ce,className:"flex-1 bg-pink-600 text-white py-4 rounded-xl font-semibold hover:bg-pink-500 transition-all flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(236,72,153,0.4)] text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(ul,{size:20})," ",Qe]}),t.jsx("button",{onClick:()=>r(H.id),className:`p-4 rounded-xl border transition-colors ${ut?"border-pink-500 bg-pink-500/10 text-pink-500":"border-gray-700 hover:bg-zinc-800 text-gray-400 hover:text-white"}`,children:t.jsx(Lp,{size:24,fill:ut?"currentColor":"none"})})]}),t.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/20 to-purple-900/20 border border-cyan-500/30 rounded-xl p-5 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 pointer-events-none",children:t.jsx(al,{size:60})}),t.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-2",children:[t.jsx(us,{size:18,className:"text-pink-500"})," Share & Earn"]}),t.jsxs("p",{className:"text-xs text-gray-300 mb-4 max-w-sm",children:["Share this treasure with friends and earn ",t.jsx("strong",{className:"text-green-400",children:"50 Loyalty Points"})," instantly!"]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>Ls("whatsapp"),className:"flex-1 py-2 bg-[#25D366] hover:bg-[#1ebc57] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(37,211,102,0.4)]",children:[t.jsx(il,{size:16})," WhatsApp"]}),t.jsxs("button",{onClick:()=>Ls("facebook"),className:"flex-1 py-2 bg-[#1877F2] hover:bg-[#166fe5] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(24,119,242,0.4)]",children:[t.jsx(ic,{size:16})," Facebook"]}),navigator.share&&t.jsxs("button",{onClick:()=>Ls("native"),className:"flex-1 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all",children:[t.jsx(al,{size:16})," More"]})]}),C&&t.jsxs("div",{className:"mt-3 text-xs text-green-400 font-bold flex items-center gap-1 justify-center animate-in fade-in zoom-in",children:[t.jsx(mt,{size:12})," 50 Points Awarded!"]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4 pt-8 border-t border-gray-800",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Ur,{className:"text-cyan-400 mt-1",size:20}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-sm text-gray-200",children:"Free Delivery"}),t.jsx("p",{className:"text-xs text-gray-500",children:"On orders over R500 (PUDO/PAXI only)"})]})]})})]})]}),t.jsxs("div",{className:"pt-12 border-t border-gray-800 animate-in fade-in slide-in-from-bottom-10 duration-700",children:[H.isUniquePendant&&t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl mb-8 flex gap-3 items-start",children:[t.jsx(sh,{className:"text-purple-400 shrink-0 mt-1",size:20}),t.jsxs("p",{className:"text-sm text-gray-300",children:[t.jsx("strong",{children:"Please note:"})," As this is a one-of-a-kind treasure, these reviews reflect experiences from customers who have purchased similar unique pendants from our collection."]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"font-cherry text-[26px] font-bold text-white flex items-center gap-3",children:["Customer Reviews",t.jsx("span",{className:"text-sm font-sans font-normal text-gray-500 bg-zinc-900 px-3 py-1 rounded-full",children:Xe})]}),t.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[t.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-green-900/20 border border-green-500/30 text-green-400 px-2 py-1 rounded text-xs font-bold w-fit",children:[t.jsx(cm,{size:14,fill:"currentColor",className:"text-green-500"})," Verified Purchases Only"]}),t.jsx("p",{className:"text-xs text-gray-500 max-w-md",children:"To ensure authenticity, only customers who have purchased this item can leave a review."})]})]}),t.jsx("button",{onClick:()=>_(!0),className:"px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg border border-gray-700 hover:border-gray-600 transition-all flex items-center gap-2 text-sm font-semibold shadow-lg",children:"Write a review"})]}),Xe>0?t.jsxs("div",{className:"space-y-8",children:[Ue.map((je,Ye)=>{var Et;return t.jsxs("div",{className:"flex flex-col md:flex-row gap-6 border-b border-gray-800 pb-8 last:border-0",children:[t.jsxs("div",{className:"md:w-48 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-white font-bold text-xs",children:(je.userName||je.name||"Verified Buyer").charAt(0)}),t.jsx("span",{className:"font-bold text-gray-200 text-sm",children:je.userName||je.name||"Verified Buyer"})]}),t.jsxs("div",{className:"flex items-center gap-1 ml-10 mb-1",children:[t.jsx(cm,{size:12,className:"text-green-500"}),t.jsx("span",{className:"text--[10px] text-green-500 font-medium",children:"Verified Buyer"})]}),t.jsx("p",{className:"text-xs text-gray-500 ml-10 mb-2",children:je.location||"Unknown"}),t.jsxs("div",{className:"flex items-center gap-1 ml-10",children:[t.jsx("div",{className:"flex text-yellow-400",children:[1,2,3,4,5].map(Tt=>t.jsx(Rn,{size:12,fill:Tt<=Math.round(je.rating||5)?"currentColor":"none",className:Tt<=Math.round(je.rating||5)?"text-yellow-400":"text-gray-700"},Tt))}),t.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["(",je.rating||5,")"]})]})]}),t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl rounded-tl-none border border-gray-800/50",children:[t.jsxs("p",{className:"text-gray-300 text-sm italic mb-3 leading-relaxed",children:['"',je.content||je.comment||je.text,'"']}),t.jsx("p",{className:"text-xs text-gray-500 font-medium text-right",children:je.date||((Et=je.createdAt)!=null&&Et.toDate?je.createdAt.toDate().toLocaleDateString():"Recent")})]})})]},je.id||`legacy-${Ye}`)}),Ue.length<Xe&&Ue.length<ue&&t.jsx("div",{className:"text-center pt-4",children:t.jsx("button",{onClick:()=>xe(je=>Math.min(je+X,ue)),className:"w-full py-2 text-gold text-sm underline hover:text-white transition-colors",children:"Load More Customer Reviews"})})]}):t.jsx("div",{className:"bg-zinc-900/30 border border-dashed border-gray-800 rounded-xl p-8 text-center",children:t.jsx("p",{className:"text-gray-500 text-sm",children:"No reviews yet. Be the first to own and review this treasure!"})})]}),Pe.length>0&&t.jsxs("div",{className:"pt-12 border-t border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-end mb-6",children:[t.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white flex items-center gap-2",children:[t.jsx(js,{size:20,className:"text-pink-500"})," More from ",H.category]}),t.jsxs(He,{to:`/collections/${encodeURIComponent(H.category)}`,className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View Collection ",t.jsx(Qs,{size:14})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Pe.map(je=>t.jsx(Bc,{product:je},je.id))})]})]})},su={IS_SANDBOX:!1,MERCHANT_ID:"113371222",MERCHANT_KEY:"cbhnt80ljkt7g",getProcessUrl:()=>"https://www.payfast.co.za/eng/process",getUrls:()=>{const n=window.location.origin;return{return_url:`${n}/#/profile`,cancel_url:`${n}/#/cart`,notify_url:`${n}/api/notify`}}},Fp=S.forwardRef(({amount:n,itemName:e,email:s,returnUrl:r,cancelUrl:i,notifyUrl:o,customStr1:c,customStr2:u,customStr3:f,customInt1:h,isSubscription:x=!1,frequency:v=3,cycles:N=0},T)=>{const _=S.useRef(null);S.useImperativeHandle(T,()=>({submit:()=>{_.current&&_.current.submit()}}));const C=su.getUrls(),R=su.MERCHANT_ID,z=su.MERCHANT_KEY,$=new Date;$.setDate($.getDate()+1);const U=$.toISOString().split("T")[0];return t.jsxs("form",{ref:_,action:su.getProcessUrl(),method:"POST",className:"hidden",children:[t.jsx("input",{type:"hidden",name:"merchant_id",value:R}),t.jsx("input",{type:"hidden",name:"merchant_key",value:z}),t.jsx("input",{type:"hidden",name:"return_url",value:r||C.return_url}),t.jsx("input",{type:"hidden",name:"cancel_url",value:i||C.cancel_url}),t.jsx("input",{type:"hidden",name:"notify_url",value:o||C.notify_url}),t.jsx("input",{type:"hidden",name:"amount",value:n.toFixed(2)}),t.jsx("input",{type:"hidden",name:"item_name",value:e}),t.jsx("input",{type:"hidden",name:"email_address",value:s||""}),c&&t.jsx("input",{type:"hidden",name:"custom_str1",value:c}),u&&t.jsx("input",{type:"hidden",name:"custom_str2",value:u}),f&&t.jsx("input",{type:"hidden",name:"custom_str3",value:f}),h&&t.jsx("input",{type:"hidden",name:"custom_int1",value:h}),x&&t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"hidden",name:"subscription_type",value:"1"}),t.jsx("input",{type:"hidden",name:"billing_date",value:U}),t.jsx("input",{type:"hidden",name:"recurring_amount",value:n.toFixed(2)}),t.jsx("input",{type:"hidden",name:"frequency",value:v}),t.jsx("input",{type:"hidden",name:"cycles",value:N})]})]})}),nu={"Eastern Cape":{"Gqeberha (Port Elizabeth)":["PEP Pier 14 (Ground Floor, 444 Govan Mbeki Ave)","PEP Home Walmer Park (Shop 87A, Walmer Park Shopping Centre)","PEP Greenacres","PEP Newton Park","PEP Summerstrand"],"East London":["PEP EL CBD (32 Oxford St)","PEP Hemingways Mall (Shop UG54, Hemingways Mall)","PEP Vincent Park","PEP Beacon Bay","PEP Gonubie"],Mthatha:["PEP Mthatha BT Ngebs City (Shop 89, BT Ngebs City)","PEP Mthatha Circus Triangle (Shop 7, Circus Triangle)","PEP Mthatha Plaza"],"Makhanda (Grahamstown)":["PEP Grahamstown High Street (48 High St)","PEP Market Square"],"Queenstown (Komani)":["PEP Queenstown Lukhanji Mall (Shop 45, Lukhanji Mall)"],Uitenhage:["PEP Uitenhage Mall","PEP Corkwood Square"],"Jeffreys Bay":["PEP Fountains Mall","PEP Jeffrey's Bay CBD"],"King William's Town":["PEP King William's Town CBD","PEP Metlife Mall"]},"Free State":{Bloemfontein:["PEP BFN St Andrew St (45 St Andrew St)","PEP Home Mimosa Mall (Mimosa Mall, 131 Kellner St)","PEP Loch Logan","PEP Fleurdal","PEP Northridge Mall"],Welkom:["PEP Welkom Bok Street (Shop 22A, Bok Street)","PEP Welkom Goldfields Mall (Shop U5, Goldfields Mall)","PEP Boitumelo Junction"],Bethlehem:["PEP Bethlehem Dihlabeng Mall (Shop 52, Dihlabeng Mall)","PEP Bethlehem CBD"],Sasolburg:["PEP Sasolburg (Shop 9 Sake Complex, Wandellaan Street)","PEP Sasolburg Mall"],Parys:["PEP Parys (Cnr Kort Street & Middle Street)"],Kroonstad:["PEP Kroonstad Reitz Street (21 Reitz St)","PEP Maokeng Mall"]},Gauteng:{Johannesburg:["PEP JHB Carlton Centre (C/O Commissioner St & Kruis Sts)","PEP Home Jabulani Mall (Shop 84, Jabulani Mall, Soweto)","PEP Sandton City (Shop U12, Sandton City, Rivonia Rd)","PEP Jozi CBD","PEP Braamfontein","PEP Rosebank Mall","PEP Mellville","PEP Cresta","PEP Clearwater Mall"],Pretoria:["PEP PTA Central (Cnr Paul Kruger & Pretorius St)","PEP Home Menlyn Park (Menlyn Park, Garsfontein Road)","PEP Centurion Mall (Shop 15, Centurion Mall, Heuwel Ave)","PEP Sunnyside","PEP Brooklyn","PEP Kolonnade","PEP Wonderpark"],Soweto:["PEP Maponya Mall","PEP Jabulani Mall","PEP Bara Mall","PEP Dobsonville"],Centurion:["PEP Centurion Mall","PEP Lyttelton","PEP Mall @ Reds","PEP Forest Hill"],Midrand:["PEP Mall of Africa","PEP Boulders","PEP Midrand CBD"],Benoni:["PEP Benoni Lakeside Mall (Shop L20, Lakeside Mall, Tom Jones St)","PEP Northmead Square"],Boksburg:["PEP East Rand Mall","PEP Sunward Park"],Krugersdorp:["PEP Krugersdorp Cnr Ockerse (Cnr Ockerse & Human Street)","PEP Krugersdorp Westgate (Shop 30, Westgate Shopping Centre)"],Alberton:["PEP Alberton City (SHOP L106, Alberton City, Voortrekker Street)"],Vereeniging:["PEP Vereeniging Arcon Park (Arcon Park Shopping Centre)","PEP Vereeniging CBD (12 Joubert Street)"]},"KwaZulu-Natal":{Durban:["PEP Durban Dr Pixley Kaseme St (442 Dr Pixley Kaseme Street)","PEP Bluff Towers (Shop 94 Bluff Twrs, 15 Tara Rd)","PEP Home Pavilion (Shop L94, The Pavilion Shopping Centre)","PEP Durban Workshop","PEP Musgrave","PEP Berea","PEP South Beach","PEP Ushaka"],Umhlanga:["PEP Gateway","PEP Crescent","PEP Cornubia"],Pietermaritzburg:["PEP PMB Liberty Mall (Shop 15, Liberty Midlands Mall)","PEP PMB CBD (335 Church Street)","PEP Greater Edendale"],"Richards Bay":["PEP Cell Richards Bay Boardwalk (Shop U004, Boardwalk Inkwazi)","PEP Richards Bay Checkers (Shop 17A, Checkers Centre)"],Ballito:["PEP Ballito Junction","PEP Lifestyle Centre"],Newcastle:["PEP Newcastle Mall","PEP Amajuba Mall"],"Port Shepstone":["PEP Port Shepstone (Cnr Escombe & Wooley St)","PEP South Coast Mall"],Ladysmith:["PEP Ladysmith Murchison Mall (Shop LG11, Murchison Mall)"],Kokstad:["PEP Kokstad Main Street (Shop 1 Spargs Building, 40 Main Street)"]},Limpopo:{Hoedspruit:["PEP Hoedspruit (Wildlife Shop 12)","PEP Hoedspruit Centre"],Ohrigstad:["PEP Ohrigstad (Potgieter St)"],Metz:["PEP Metz Mahlakung Shopping Centre (Shop 7)","PEP Cell Metz (Shop 11)"],Phalaborwa:["PEP Home Ba-phalaborwa Eden Square (Shop 13)","PEP Phalaborwa Shoprite Centre (Shop 8)","PEP Phalaborwa Mall (Shop 5)","PEP Cell Ba-phalaborwa (Shop 7C)","PEP Ba-phalaborwa Checkers (Shop 9)","PEP Phalaborwa Standard Bank Centre (Shop B1)","PEP Ba-phalaborwa Namakwale Crossing (Shop 7)","PEP Cell Phalaborwa Namakgale Crossing (Shop 26)","PEP Lulekani Spar Centre (Shop A3)"],Burgersfort:["PEP Home Burgersfort Tubatse (Shop L50)","PEP Cell Burgersfort Morone Centre (Shop 23A)","PEP Burgersfort Morone Shopping Centre (Shop 5 & 6)","PEP Burgersfort Twin City Mall (Shop 17)","PEP Cell Burgersfort Twin City (Shop 5)","PEP Cell Burgersfort Twin City Shop 41","PEP Burgersfort Platinum Place (Shop 1-3)","PEP Cell Burgersfort Castle Square (Shop 10)","PEP Burgersfort Castle Square (Shop 8)","PEP Burgersfort Burgersfort Mall (Shop 18)","PEP Cell Burgersfort Mall (Shop 28)","PEP Burgersfort Tubatse Mall (Shop L87)","PEP Cell Burgersfort Tubatse Crossing (Shop L57)"],Steelpoort:["PEP Home Steelpoort (Steelpoort Centre)","PEP Steelpoort (Shop 5)","PEP Cell Steelpoort Shopping Centre (Shop 19)"],Polokwane:["PEP Polokwane CBD (Cnr Grobler & Thabo Mbeki St)","PEP Mall of the North (Shop 10, Mall of the North)","PEP Savanna Mall","PEP Limpopo Mall"],Tzaneen:["PEP Tzaneen Tzaneng Mall (Shop B5, Tzaneng Mall, Danie Joubert St)","PEP Tzaneen CBD","PEP Tzaneen Crossing"],Thohoyandou:["PEP Thohoyandou Venda Plaza (Shop B1, Venda Plaza)","PEP Home Thohoyandou (Next to Shoprite, Thohoyandou)","PEP Thavhani Mall","PEP Mvyu"],Mokopane:["PEP Mokopane Mall","PEP Crossing"],"Makhado (Louis Trichardt)":["PEP Louis Trichardt Burger Str (Cnr Burger St & Songozwi Rd)"]},Mpumalanga:{Acornhoek:["PEP Home Acornhoek Mall (Shop 27)","PEP Acornhoek Plaza Extension (Shop 75)","PEP Cell Acornhoek Plaza (Shop 71)","PEP Cell Acornhoek Mall (Shop 3)","PEP Acornhoek Mall (Shop 10)","PEP Cell Acornhoek Mall (Shop 33B)","PEP Acornhoek Shopping Centre (Station Centre)","PEP Cell Acornhoek Shopping Centre"],Thulamahashe:["PEP Cell Thulamahashe (Thula Mall)","PEP Thulamahashe Thula Mall (Shop 17)","PEP Cell Thulamahashe Plaza (Shop 103)","PEP Thulamahashe (Plaza Shop 7)","PEP Cell Thulamahashe Plaza (Shop 14)"],Dwarsloop:["PEP Home Dwarsloop Mall (Shop 208)","PEP Dwarsloop Mall (Shop 66)","PEP Cell Dwarsloop Mall (Shop 48)"],Bushbuckridge:["PEP Bushbuckridge Twin City Mall (Shop 9)","PEP Cell Bushbuckridge Twin City Mall (Shop 2A)","PEP Cell Bushbuckridge Shopping Centre (Shop 1B)","PEP Bushbuckridge Shopping Centre (Shop 6)"],Graskop:["PEP Graskop (Spar Centre)"],Mkhuhlu:["PEP Cell Mkhuhlu (Plaza Shop 12)","PEP Mkhuhlu (Plaza Shop 7)"],Hazyview:["PEP Home Hazyview Junction (Shop 5A)","PEP Home Numbi Gate Dayizenza (Shop 7)","PEP Hazyview Junction (Shop 14B)","PEP Cell Lowveld Mall PNP (Shop 168)","PEP Cell Lowveld Mall Spar (Shop 12)","PEP Hazyview Blue Haze (Shop 304)","PEP Hazyview Lowveld Mall (Shop 232)","PEP Hazyview Lowveld Mall (Shop 155)","PEP Numbigate Dayizenza Plaza (Shop 38A)","PEP Cell Numbigate Dayizenza Plaza (Shop 12)"],Sabie:["PEP Sabie (Shopping Centre)"],"White River":["PEP Home White River Square (Shop 20)","PEP White River (Square Shop 17)","PEP Whiteriver Square 1 (Shop 17)","PEP White River Crossing (Shop 15)","PEP White River Kabokweni (Plaza Shop 10)","PEP Cell White River Kabokweni Plaza (Shop 205A)"],"Lydenburg (Mashishing)":["PEP Home Lydenburg Lt Centre (Shop 5)","PEP Lydenburg Highland Centre (Shop 6A)","PEP Lydenburg (Tamarisk Building)","PEP Cell Mashishing Shoprite Centre"],"Mbombela (Nelspruit)":["PEP Home Riverside Mall Nelspruit (Shop G241)","PEP Home Nelspruit Promenade (Shop 41 & 42)","PEP Home Nelspruit Ilanga Mall (Shop LG36)","PEP Home Nelspruit The Square (Shop 7)","PEP Nelspruit The Grove (Shop 18)","PEP Cell Nelspruit Plaza (Shop 28)","PEP Nelspruit Plaza (Shop 17-20)","PEP Cell Nelspruit Ekukhanyeni (Shop 5)","PEP Nelspruit Brown & Henshall Street","PEP Cell Nelspruit Promenade (Shop 49)","PEP Nelspruit Brown Street (Prorom Building)","PEP Nelspruit (Bester Brown Building)","PEP Nelspruit The Square (Shop 10)","PEP Nelspruit CBD","PEP Riverside Mall (Shop U40)"],Kanyamazane:["PEP Kanyamazane (Shopping Centre Shop 11)"],Emoyeni:["PEP Emoyeni Mall (Shop 22)","PEP Cell Emoyeni Mall (Shop 8)"],"eMalahleni (Witbank)":["PEP Witbank Taxi Rank (Shop 1, 3 Escombe St)","PEP Highveld Mall (Shop U03, Highveld Mall)","PEP Witbank CBD","PEP Saveways Crescent"],Middelburg:["PEP Home Middelburg Mall (Shop 97, Middelburg Mall)","PEP Middelburg CBD (28 Cowen Ntuli Street)","PEP Midwater"],Secunda:["PEP Secunda Mall (Shop 160, Secunda Mall)","PEP Secunda CBD"]},"North West":{Rustenburg:["PEP Rustenburg Mall (Shop 73 Rustenburg Mall)","PEP Waterfall Mall (Shop 12, Waterfall Mall)","PEP Rustenburg CBD","PEP Rustenburg Plaza","PEP Platinum Square"],Potchefstroom:["PEP Potch Walter Sisulu Lane (149 Walter Sisulu Lane)","PEP Home Mooirivier Mall (Shop 16, Mooirivier Mall)","PEP Potch CBD"],"Mahikeng (Mafikeng)":["PEP Mafikeng City Mall (Shop G10, Mafikeng City Mall)","PEP Mmabatho Crossing (Shop 25, Mmabatho Crossing)","PEP Mahikeng CBD","PEP Mega City"],Klerksdorp:["PEP Klerksdorp Terminus (Shop 19, The Terminus Centre)","PEP Klerksdorp CBD","PEP Matlosana Mall","PEP City Mall"],Brits:["PEP Brits Town Centre (Shop G2, Brits Town Centre)","PEP Brits Mall"]},"Northern Cape":{Kimberley:["PEP North Cape Mall (Shop 60, North Cape Mall)","PEP Home Diamond Pavilion Mall (Shop 93, Diamond Pavilion Mall)","PEP Kimberley CBD","PEP New Park"],Upington:["PEP Upington Mall (Shop 12, Upington Mall)","PEP Upington CBD (20 Schroder Street)","PEP Kalahari Mall"],Kuruman:["PEP Kuruman Beare Street (Shop 28B, Beare Street)","PEP Kuruman Mall","PEP The Eye"],"De Aar":["PEP De Aar Main Road (35 Main Road, De Aar)"],Springbok:["PEP Springbok (62 Main Street, Springbok)"]},"Western Cape":{"Cape Town":["PEP CPT Station (Cape Town Station Concourse)","PEP Golden Acre (Shop 10, Golden Acre Mall)","PEP Home Parow Centre (Shop G6, Parow Centre, Voortrekker Rd)","PEP Gardens","PEP V&A Waterfront","PEP Canal Walk","PEP Blue Route"],Stellenbosch:["PEP Eikestad Mall (Shop E4, Eikestad Mall, 43 Andringa Rd)","PEP Kayamandi (Shop 11, Kayamandi Shopping Centre)","PEP Stellenbosch Central"],George:["PEP George Garden Route Mall (Shop 2, Garden Route Mall)","PEP George CBD (82 Hibernia Street)","PEP York Street"],Paarl:["PEP Paarl Mall (Shop 12, Paarl Mall, Cnr Newvlei & Jones St)","PEP Lady Grey","PEP Rembrandt Mall"],Hermanus:["PEP Hermanus Whale Coast Mall (Shop 15, Whale Coast Mall)"],Knysna:["PEP Knysna Long Street (13 Long Street, Knysna)","PEP Knysna Mall","PEP Woodmill Lane"],"Somerset West":["PEP Somerset Mall","PEP Main Road","PEP Waterstone"],"Mossel Bay":["PEP Mossel Bay Mall","PEP Langeberg Mall"],Worcester:["PEP Mountain Mill","PEP Worcester CBD"]}},zR=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm  8cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],UR={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:0}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:0}]},FR=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],$R=({cartItemCount:n,onShippingChange:e,subtotal:s})=>{var oe,be,ve,X,ue;const{user:r,currency:i}=wt(),[o,c]=S.useState("pudo"),[u,f]=S.useState(""),[h,x]=S.useState(""),[v,N]=S.useState(""),[T,_]=S.useState(""),[C,R]=S.useState(""),[z,$]=S.useState(""),[U,Z]=S.useState(""),[q,V]=S.useState("economy"),[I,k]=S.useState({street:((oe=r.shippingAddress)==null?void 0:oe.street)||"",suburb:((be=r.shippingAddress)==null?void 0:be.suburb)||"",city:((ve=r.shippingAddress)==null?void 0:ve.city)||"",province:((X=r.shippingAddress)==null?void 0:X.province)||"",postalCode:((ue=r.shippingAddress)==null?void 0:ue.postalCode)||""}),[E,L]=S.useState({street:"",suburb:"",city:"",province:"",postalCode:"",country:"",email:""}),[O,B]=S.useState(zR),[A,ne]=S.useState(UR),[fe,ke]=S.useState(FR),De=s>=500;return S.useEffect(()=>{De&&o==="door"&&c("pudo")},[De,o]),S.useEffect(()=>{i==="USD"?c("international"):o==="international"&&c("pudo")},[i]),S.useEffect(()=>{try{const se=localStorage.getItem("spv_pudo_costs");se&&B(JSON.parse(se));const xe=localStorage.getItem("spv_paxi_costs");xe&&ne(JSON.parse(xe));const H=localStorage.getItem("spv_door_to_door_costs");H&&ke(JSON.parse(H))}catch(se){console.error("Failed to load shipping costs from storage",se)}},[]),S.useEffect(()=>{let se=0,xe="";if(o==="pudo"){const H=n<=20?"Extra-Small (XS)":"Small (S)",Pe=O.find(Ue=>Ue.name===H);let Te="locker";Pe?Pe.lockerToLockerCost!==null?se=Pe.boxCost+Pe.lockerToLockerCost+Pe.lockerHandleFee:Pe.doorToLockerCost!==null?(se=Pe.boxCost+Pe.doorToLockerCost+Pe.doorHandleFee,Te="door"):se=Pe.boxCost:se=60,C&&z&&U&&(xe=`${C} | ${z} | ${U} | ${Te}`)}else if(o==="paxi"){let H="7-9 Days Service";s>1e3&&(H="3-5 Days Service");const Pe=A[H],Te=n<=20?"Small":"Large",Ue=Pe.find(rt=>rt.bag.includes(Te));Ue?se=(Te==="Small"?6:15)+Ue.serviceCost+Ue.handleFee:se=60,u&&h&&v&&T&&(xe=`${u} | ${h} | ${v} | ${T} | ${H}`)}else if(o==="door"){const H=q==="overnight"?"Overnight":"Economy",Pe=fe.find(Te=>Te.service.includes(H));Pe?se=Pe.boxFee+Pe.initialCharge+(Pe.ratePerKg!==null?Pe.ratePerKg:0)+Pe.handleFee:se=120,I.street&&I.city&&I.postalCode&&(xe=JSON.stringify({...I,service:q}))}else o==="international"&&(se=60,E.street&&E.city&&E.postalCode?xe=`International Shipping | ${E.street}, ${E.suburb?E.suburb+", ":""}${E.city}, ${E.province?E.province+", ":""}${E.postalCode}${E.country?", "+E.country:""}${E.email?" | Email: "+E.email:""}`:xe="International Shipping");e({method:o,cost:se,details:xe})},[o,n,O,A,fe,q,C,z,U,u,h,v,T,I,E,e]),S.useEffect(()=>{$("")},[C]),S.useEffect(()=>{x(""),N(""),_("")},[u]),S.useEffect(()=>{N(""),_("")},[h]),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[t.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(Ur,{size:18,className:"text-cyan-400"})," Shipping Method"]}),t.jsx("div",{className:"space-y-3",children:i==="USD"?t.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="international"?"bg-green-900/20 border-green-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="international"?"border-green-500 bg-green-500":"border-gray-500"}`,children:o==="international"&&t.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),t.jsx("span",{className:"text-sm text-gray-300",children:"International Shipping $60"})]}),t.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="international",onChange:()=>c("international")})]}):t.jsxs(t.Fragment,{children:[t.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="pudo"?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="pudo"?"border-cyan-500 bg-cyan-500":"border-gray-500"}`,children:o==="pudo"&&t.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),t.jsx("span",{className:"text-sm text-gray-300",children:"PUDO Locker to Locker"})]}),t.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="pudo",onChange:()=>c("pudo")})]}),t.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="paxi"?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="paxi"?"border-yellow-500 bg-yellow-500":"border-gray-500"}`,children:o==="paxi"&&t.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),t.jsx("span",{className:"text-sm text-gray-300",children:"PAXI (PEP Store - 7-9 Days)"})]}),t.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="paxi",onChange:()=>c("paxi")})]}),t.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${o==="door"?"bg-purple-900/20 border-purple-500 cursor-pointer":De?"bg-zinc-900 border-gray-800 opacity-50 cursor-not-allowed":"bg-black border-gray-700 hover:border-gray-600 cursor-pointer"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="door"?"border-purple-500 bg-purple-500":De?"border-gray-700":"border-gray-500"}`,children:o==="door"&&t.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),t.jsxs("div",{children:[t.jsx("span",{className:`text-sm ${De?"text-gray-500":"text-gray-300"}`,children:"PUDO Door to Door"}),De&&t.jsx("span",{className:"text-xs text-gray-500 block",children:"Not available for free shipping"})]})]}),t.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="door",onChange:()=>c("door"),disabled:De})]})]})}),o==="pudo"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-cyan-500/20",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("label",{className:"text-[10px] text-cyan-400 uppercase font-bold",children:"Select PUDO Locker Location"}),t.jsxs("a",{href:"https://thecourierguy.co.za/locations/",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[t.jsx(_c,{size:10})," Find PUDO Locker Location Click Here"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:C,onChange:se=>R(se.target.value),children:[t.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(nu).sort().map(se=>t.jsx("option",{value:se,children:se},se))]}),t.jsx(tu,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),C&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:z,onChange:se=>$(se.target.value),children:[t.jsx("option",{value:"",children:"-- Select Town --"}),Object.keys(nu[C]||{}).sort().map(se=>t.jsx("option",{value:se,children:se},se))]}),t.jsx(tu,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),z&&t.jsx("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Locker Name / Address"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none",placeholder:"e.g. PUDO Locker @ Sandton City",value:U,onChange:se=>Z(se.target.value)})]})})]}),o==="paxi"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-yellow-500/20",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("label",{className:"text-[10px] text-yellow-400 uppercase font-bold",children:"Select PEP Store"}),t.jsxs("a",{href:"https://www.paxi.co.za/paxi-points",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[t.jsx(_c,{size:10})," Find PAXI Point"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:u,onChange:se=>f(se.target.value),children:[t.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(nu).sort().map(se=>t.jsx("option",{value:se,children:se},se))]}),t.jsx(tu,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),u&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:h,onChange:se=>x(se.target.value),children:[t.jsx("option",{value:"",children:"-- Select Town --"}),Object.keys(nu[u]||{}).sort().map(se=>t.jsx("option",{value:se,children:se},se))]}),t.jsx(tu,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),h&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Store Name (or P-Code)"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. PEP Home Acornhoek Mall",value:v,onChange:se=>N(se.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Store Street Address"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. Shop 27, Acornhoek Mall, R40 Main Rd",value:T,onChange:se=>_(se.target.value)})]})]})]}),o==="door"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-purple-500/20",children:[t.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block",children:"Select Service"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${q==="economy"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[t.jsx("input",{type:"radio",name:"doorService",value:"economy",checked:q==="economy",onChange:()=>V("economy"),className:"hidden"}),"Economy Road"]}),t.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${q==="overnight"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[t.jsx("input",{type:"radio",name:"doorService",value:"overnight",checked:q==="overnight",onChange:()=>V("overnight"),className:"hidden"}),"Overnight Courier"]})]}),t.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block pt-2 border-t border-gray-700/50",children:"Delivery Address"}),t.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.street,onChange:se=>k({...I,street:se.target.value})}),t.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.suburb,onChange:se=>k({...I,suburb:se.target.value})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.city,onChange:se=>k({...I,city:se.target.value})}),t.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.postalCode,onChange:se=>k({...I,postalCode:se.target.value})})]}),t.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.province,onChange:se=>k({...I,province:se.target.value})})]}),o==="international"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-green-500/20",children:[t.jsx("label",{className:"text-[10px] text-green-400 uppercase font-bold block",children:"International Shipping Address"}),t.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:E.street,onChange:se=>L({...E,street:se.target.value})}),t.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:E.suburb,onChange:se=>L({...E,suburb:se.target.value})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:E.city,onChange:se=>L({...E,city:se.target.value})}),t.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:E.postalCode,onChange:se=>L({...E,postalCode:se.target.value})})]}),t.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:E.province,onChange:se=>L({...E,province:se.target.value})}),t.jsx("input",{type:"text",placeholder:"Country",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:E.country||"",onChange:se=>L({...E,country:se.target.value})}),t.jsx("input",{type:"email",placeholder:"Email",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:E.email||"",onChange:se=>L({...E,email:se.target.value})}),t.jsx("p",{className:"text-xs text-yellow-400 mt-2",children:"You are liable for any import taxes if any arises."})]})]})},VR=()=>{const{cart:n,removeFromCart:e,updateCartQuantity:s,getCartTotal:r,user:i,appliedVoucher:o,setAppliedVoucher:c,applyExternalVoucher:u,updateUserAddress:f,setIsStickyProgressBarVisible:h,checkout:x,clearCart:v,register:N,login:T,currency:_}=wt(),C=en(),[R,z]=S.useState({method:"pudo",cost:60,details:""}),[$,U]=S.useState(""),[Z,q]=S.useState(""),[V,I]=S.useState(0),k=S.useRef(null),[E,L]=S.useState(null),[O,B]=S.useState(!1),[A,ne]=S.useState("register"),[fe,ke]=S.useState(!1),[De,oe]=S.useState(!1),[be,ve]=S.useState(""),[X,ue]=S.useState(""),[se,xe]=S.useState(""),[H,Pe]=S.useState(""),[Te,Ue]=S.useState(""),[Xe,rt]=S.useState("");S.useEffect(()=>{h(!1)},[h]),S.useEffect(()=>{De&&i.email&&(J(),oe(!1))},[De,i.email]),S.useEffect(()=>{E&&k.current&&(k.current.submit(),v())},[E,v]);const zt=()=>{h(!0),C("/")},we=r(),Ce=n.reduce((Le,fs)=>Le+fs.quantity,0),Qe=we>=500&&(R.method==="pudo"||R.method==="paxi"),ut=Qe?0:R.cost;let ie=0;o&&(o.minSpend&&we<o.minSpend||(o.discountType==="percentage"?ie=we*o.value/100:ie=o.value)),ie>we&&(ie=we);let Se=0;const Be=we-ie;i!=null&&i.storeCredit&&i.storeCredit>0&&i.creditCurrency===_&&(Se=Math.min(Be,i.storeCredit));let Ne=0;if(V>0){const Le=_==="ZAR"?1:.5;Ne=V/100*Le}const We=we+ut-ie-Se-Ne,jt=()=>{if(q(""),!$.trim())return;u($.trim())?U(""):q("Invalid or expired voucher code.")},ye=async()=>{if(!R.details){alert("Please complete all shipping details.");return}if(!i.email){B(!0);return}await J()},J=async()=>{R.method==="door"&&await f(JSON.parse(R.details));try{const Le=await x({items:n,total:We,shippingMethod:R.method,shippingDetails:R.details,shippingCost:ut,pointsToRedeem:V});L(Le)}catch(Le){console.error("Order creation failed",Le),alert("Could not create your order. Please try again.")}},_e=async Le=>{if(Le.preventDefault(),ve(""),Te!==Xe){ve("Passwords do not match!");return}await N({name:X,email:se,birthday:H,password:Te})?(B(!1),oe(!0)):ve("Registration failed. Please try again.")},kt=async Le=>{Le.preventDefault(),ve(""),await T(se,Te)?(B(!1),oe(!0)):ve("Invalid credentials.")},xt=()=>_==="ZAR"?"R":"$",Wt=(Le,fs)=>_==="ZAR"?Le:_==="USD"?fs!==void 0?fs:0:Le,$t=_==="ZAR"?"R1.00":"$0.50",Ss=_==="ZAR"?"R10":"$5",os=_==="ZAR"?"R100":"$50";return n.length===0?t.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[t.jsx("div",{className:"w-20 h-20 bg-zinc-900 rounded-full flex items-center justify-center text-gray-600",children:t.jsx(jc,{size:40})}),t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Cart is Empty"}),t.jsx("p",{className:"text-gray-400",children:"Looks like you haven't added any treasures yet."}),t.jsx(He,{to:"/",className:"px-6 py-3 bg-pink-600 text-white font-bold rounded-full hover:bg-pink-500 transition-colors",children:"Start Shopping"})]}):t.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[t.jsx(qN,{subtotal:we,onContinueShopping:zt}),O&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>B(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-2xl font-bold text-white",children:A==="register"?"Create an Account":"Sign In"}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"An account is required to track your order history and status."})]}),A==="register"?t.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[t.jsx("input",{type:"text",required:!0,value:X,onChange:Le=>ue(Le.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Full Name"}),t.jsx("input",{type:"email",required:!0,value:se,onChange:Le=>xe(Le.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),t.jsx("input",{type:"date",required:!0,value:H,onChange:Le=>Pe(Le.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"}),t.jsx("input",{type:fe?"text":"password",required:!0,value:Te,onChange:Le=>Ue(Le.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Create Password"}),t.jsx("input",{type:fe?"text":"password",required:!0,value:Xe,onChange:Le=>rt(Le.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Confirm Password"}),be&&t.jsx("p",{className:"text-xs text-red-400 text-center",children:be}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500",children:"Create Account & Continue"}),t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",t.jsx("button",{type:"button",onClick:()=>ne("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):t.jsxs("form",{onSubmit:kt,className:"space-y-4",children:[t.jsx("input",{type:"email",required:!0,value:se,onChange:Le=>xe(Le.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),t.jsx("input",{type:fe?"text":"password",required:!0,value:Te,onChange:Le=>Ue(Le.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Password"}),be&&t.jsx("p",{className:"text-xs text-red-400 text-center",children:be}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500",children:"Sign In & Continue"}),t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",t.jsx("button",{type:"button",onClick:()=>ne("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsx(Fp,{ref:k,amount:(E==null?void 0:E.total)??We,itemName:E?`Order ${E.orderNumber}`:"Spoil Me Vintage Order",email:i.email,customStr1:(E==null?void 0:E.id)??"",customStr2:R.method,customStr3:(o==null?void 0:o.code)||""}),t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs("h1",{className:"text-2xl font-bold text-white mb-4",children:["Shopping Cart (",Ce,")"]}),t.jsx("div",{className:"space-y-4",children:n.map((Le,fs)=>{let ls=Le.stock;Le.type==="Ring"&&Le.selectedSize&&Le.ringStock&&(ls=Le.ringStock[Le.selectedSize]||0);const Ws=Le.quantity>=ls;return t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-4 rounded-xl flex gap-4 items-start",children:[t.jsx("div",{className:"w-20 h-20 bg-black rounded-lg overflow-hidden border border-gray-700 shrink-0",children:t.jsx("img",{src:Le.images[0],alt:Le.name,className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("h3",{className:"font-bold text-white text-sm line-clamp-2",children:Le.name}),t.jsx("button",{onClick:()=>e(Le.id,{selectedSize:Le.selectedSize,selectedMaterial:Le.selectedMaterial,selectedChainStyle:Le.selectedChainStyle,selectedChainLength:Le.selectedChainLength}),className:"text-gray-500 hover:text-red-400 p-1",children:t.jsx(Mr,{size:16})})]}),t.jsxs("div",{className:"text-xs text-gray-400 mt-1 space-y-0.5",children:[Le.selectedSize&&t.jsxs("div",{children:["Size: ",t.jsx("span",{className:"text-gray-300",children:Le.selectedSize})]}),Le.selectedMaterial&&t.jsxs("div",{children:["Material: ",t.jsx("span",{className:"text-gray-300",children:Le.selectedMaterial})]}),Le.selectedChainStyle&&t.jsxs("div",{children:["Chain: ",t.jsxs("span",{className:"text-gray-300",children:[Le.selectedChainStyle," ",Le.selectedChainLength?`(${Le.selectedChainLength})`:""]})]})]}),t.jsxs("div",{className:"flex justify-between items-end mt-3",children:[t.jsxs("div",{className:"flex items-center gap-3 bg-black rounded-lg border border-gray-700 px-2 py-1",children:[t.jsx("button",{onClick:()=>s(Le.id,Le.quantity-1,Le),className:"text-gray-400 hover:text-white",children:t.jsx(FN,{size:14})}),t.jsx("span",{className:"text-sm font-bold text-white w-4 text-center",children:Le.quantity}),t.jsx("button",{onClick:()=>s(Le.id,Le.quantity+1,Le),className:"text-gray-400 hover:text-white disabled:text-gray-700 disabled:cursor-not-allowed",disabled:Ws,children:t.jsx(an,{size:14})})]}),t.jsxs("div",{className:"font-bold text-white",children:[xt(),((Wt(Le.price,Le.priceUSD||Le.price)+(Le.selectedMaterialModifier||0))*Le.quantity).toFixed(2)]})]})]})]},`${Le.id}_${fs}`)})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx($R,{cartItemCount:Ce,onShippingChange:z,subtotal:we}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[t.jsx("h3",{className:"font-bold text-white mb-4",children:"Summary"}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-400 mb-4 pb-4 border-b border-gray-800",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Subtotal"}),t.jsxs("span",{className:"text-white",children:[xt(),we.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Shipping"}),t.jsx("span",{className:"text-white",children:Qe?t.jsx("span",{className:"text-green-400",children:"FREE"}):`${xt()}${ut.toFixed(2)}`})]}),ie>0&&t.jsxs("div",{className:"flex justify-between text-green-400",children:[t.jsx("span",{children:"Discount"}),t.jsxs("span",{children:["-",xt(),ie.toFixed(2)]})]}),Se>0&&t.jsxs("div",{className:"flex justify-between text-green-400",children:[t.jsx("span",{children:"Store Credit"}),t.jsxs("span",{children:["-",xt(),Se.toFixed(2)]})]}),Ne>0&&t.jsxs("div",{className:"flex justify-between text-purple-400",children:[t.jsx("span",{children:"Loyalty Discount"}),t.jsxs("span",{children:["-",xt(),Ne.toFixed(2)]})]})]}),t.jsxs("div",{className:"flex justify-between items-end mb-6",children:[t.jsx("span",{className:"text-gray-300 font-bold",children:"Total"}),t.jsxs("span",{className:"text-2xl font-bold text-white",children:[xt(),We.toFixed(2)]})]}),o?t.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 p-3 rounded-lg mb-4 flex justify-between items-center text-xs",children:[t.jsxs("span",{className:"text-green-400 font-bold flex items-center gap-1",children:[t.jsx(mt,{size:12})," Code ",o.code," Applied"]}),t.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:"Remove"})]}):t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsx("input",{type:"text",placeholder:"Promo Code",className:"flex-1 bg-black border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-pink-500 outline-none",value:$,onChange:Le=>U(Le.target.value)}),t.jsx("button",{onClick:jt,className:"bg-zinc-800 hover:bg-zinc-700 text-white px-3 py-2 rounded-lg text-sm border border-gray-600",children:"Apply"})]}),Z&&t.jsx("p",{className:"text-xs text-red-400 mb-4",children:Z}),i.email&&i.loyaltyPoints>=1e3&&t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-lg mb-4",children:[t.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-2",children:"Redeem Loyalty Points"}),t.jsxs("p",{className:"text-xs text-gray-400 mb-3",children:["100 points = ",$t," discount. Min 1000 points (",Ss,"). ",i.isMember?"":`Non-members: max ${os} per order.`]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",min:"0",max:Math.min(i.loyaltyPoints,i.isMember?i.loyaltyPoints:1e4),step:"100",value:V,onChange:Le=>I(Math.max(0,parseInt(Le.target.value)||0)),className:"flex-1 bg-black border border-gray-700 rounded px-3 py-2 text-white text-sm",placeholder:"Points to redeem"}),t.jsx("button",{onClick:()=>I(Math.min(i.loyaltyPoints,i.isMember?i.loyaltyPoints:1e4)),className:"bg-purple-600 hover:bg-purple-500 text-white px-3 py-2 rounded text-sm",children:"Max"})]}),V>0&&t.jsxs("p",{className:"text-xs text-purple-400 mt-2",children:["Discount: ",xt(),(V/100).toFixed(2)]})]}),t.jsxs("button",{onClick:ye,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:["Pay Now ",t.jsx(Qs,{size:20})]}),t.jsxs("div",{className:"text-center mt-3 text-xs text-gray-500 flex justify-center gap-2",children:[t.jsx($i,{size:14})," Secure Payment via PayFast"]})]})]})]})]})},BR=()=>{const{user:n,products:e,logout:s,currency:r,closeAccount:i}=wt(),o=en(),[c,u]=S.useState(!1),[f,h]=S.useState(!1),[x,v]=S.useState(""),N=e.filter(U=>(n.wishlist||[]).includes(U.id));if(!n.email)return o("/login"),null;const T=r==="ZAR"?"R10":"$3",_=r==="ZAR"?"R1.00":"$0.50",C=r==="ZAR"?"R10":"$5",R=r==="ZAR"?"R100 (10,000 pts)":"$50 (10,000 pts)",z=r==="ZAR"?"R100":"$50",$=async()=>{try{await i(x),h(!1),alert("Sorry to see you go. Your account will be deleted within 24 hours."),s(),o("/")}catch(U){console.error("Error closing account:",U),alert("Failed to close account. Please try again.")}};return t.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[c&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>u(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[t.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(as,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:t.jsx(ir,{size:24})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),t.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsxs("span",{className:"text-green-400",children:["1 Point for every ",T]})," spent on products."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"100 Points"})," for every verified review."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing products on social media."]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",t.jsxs("span",{className:"text-white font-bold",children:[_," Discount"]}),"."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum redemption is 1000 Points (",C,")."]})]})]}),t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[t.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[t.jsx(ir,{size:14})," Membership Rule"]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",t.jsx("strong",{children:R})," per order. To redeem more than ",z," at once, you must be a ",t.jsx(He,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),t.jsx("button",{onClick:()=>u(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),f&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>h(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-red-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(239,68,68,0.3)] animate-in zoom-in-95 duration-200",children:[t.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(as,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-red-900/50 rounded-full border border-red-500 text-red-300",children:t.jsx(eb,{size:24})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"Close Account"})]}),t.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[t.jsx("p",{className:"text-red-400 font-semibold",children:"Are you sure you want to close your account?"}),t.jsx("p",{className:"text-gray-400",children:"This action cannot be undone. Your account and all associated data will be permanently deleted within 24 hours."}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Please tell us why you're leaving (optional)"}),t.jsx("textarea",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-red-500 outline-none resize-none",rows:3,placeholder:"Help us improve our service...",value:x,onChange:U=>v(U.target.value)})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white font-bold rounded-xl transition-colors",children:"Cancel"}),t.jsx("button",{onClick:$,className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-xl transition-colors",children:"Close Account"})]})]})]}),t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsx("div",{className:"flex-1"}),t.jsxs("div",{className:"text-center flex-1",children:[t.jsxs("h1",{className:"text-[28px] font-cherry text-white",children:["Welcome, ",n.name||n.firstName||"User"]}),t.jsx("p",{className:"text-[14px] font-architects text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-yellow-400 italic",children:"Your personal vault of timeless treasuresbecause ordinary is not your style."})]}),t.jsx("div",{className:"flex-1 flex justify-end",children:t.jsx("button",{onClick:()=>{s(),o("/")},className:"p-3 bg-zinc-800 hover:bg-zinc-700 border border-gray-700 rounded-full transition-colors text-gray-400 hover:text-red-400",title:"Logout",children:t.jsx(eb,{size:20})})})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 border border-purple-700 rounded-2xl p-6 text-white shadow-[0_0_20px_rgba(168,85,247,0.2)] relative overflow-hidden mb-8",children:[t.jsx("button",{onClick:()=>u(!0),className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors text-white/80 hover:text-white z-10",children:t.jsx(Xi,{size:18})}),t.jsxs("div",{className:"flex justify-between items-start mb-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Loyalty Balance"}),t.jsxs("p",{className:"text-xs text-white flex items-center gap-1 mt-1",children:[t.jsx(hl,{size:10})," 1 pt per ",T," spent"]}),t.jsxs("p",{className:"text-xs text-white flex items-center gap-1",children:[t.jsx(il,{size:10})," 100 pts per review"]}),t.jsxs("p",{className:"text-xs text-white flex items-center gap-1",children:[t.jsx(al,{size:10})," 50 pts per share"]})]}),t.jsx(ir,{size:28,className:"text-pink-300 drop-shadow-[0_0_5px_rgba(236,72,153,0.8)] mr-8"})]}),t.jsxs("div",{className:"text-[22px] font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-white to-pink-200",children:[n.loyaltyPoints||0," ",t.jsx("span",{className:"text-lg font-normal opacity-80 text-white",children:"Points"})]}),t.jsx("div",{className:"mt-4 text-xs bg-black/30 p-3 rounded-lg border border-white/10",children:(n.loyaltyPoints||0)>=1e3?`You have ${r==="ZAR"?"R":"$"}${(Math.floor((n.loyaltyPoints||0)/1e3)*(r==="ZAR"?10:5)).toFixed(2)} off available for your next order!`:`${1e3-(n.loyaltyPoints||0)} more points needed for a ${r==="ZAR"?"R10":"$5"} voucher.`})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Partnership Program"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Earn 20% commission on referrals"})]}),t.jsx(ws,{size:28,className:"text-green-400 drop-shadow-[0_0_5px_rgba(74,222,128,0.6)]"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-black p-3 rounded-lg flex justify-between items-center border border-gray-700",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Your Referral Code"}),t.jsx("span",{className:"font-mono font-bold text-base text-cyan-400 tracking-wider",children:n.affiliateCode||"N/A"})]}),t.jsx("button",{className:"p-2 text-gray-500 hover:text-cyan-400 transition-colors",children:t.jsx(nh,{size:18})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-400 text-sm",children:"Total Earnings"}),t.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",(n.affiliateEarnings||0).toFixed(2)]})]}),t.jsx(He,{to:"/affiliate-program",className:"block w-full py-2 border border-cyan-500/50 text-cyan-400 rounded-lg font-semibold hover:bg-cyan-900/30 transition-colors text-sm text-center",children:"View Dashboard"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Account Management"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Manage your account settings"})]}),t.jsx(Fr,{size:28,className:"text-blue-400 drop-shadow-[0_0_5px_rgba(59,130,246,0.6)]"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-black p-3 rounded-lg border border-gray-700",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Account Status"}),t.jsx("span",{className:"font-medium text-green-400",children:"Active"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-xs text-gray-500 block",children:"Member Since"}),t.jsx("span",{className:"text-sm text-white",children:new Date(n.createdAt||Date.now()).toLocaleDateString()})]})]})}),t.jsx("button",{onClick:()=>h(!0),className:"w-full py-3 border border-red-500/50 text-red-400 rounded-lg font-semibold hover:bg-red-900/30 transition-colors text-sm",children:"Close Account"})]})]})]}),t.jsxs("div",{className:"pt-8 border-t border-gray-800",children:[t.jsxs("h2",{className:"text-[20px] font-bold text-white mb-6 flex items-center gap-2",children:[t.jsx(ul,{size:20,className:"text-pink-500"})," Wishlist (",N.length,")"]}),N.length>0?t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:N.map(U=>t.jsx(Bc,{product:U},U.id))}):t.jsx("p",{className:"text-gray-500 text-sm",children:"Your wishlist is empty."})]})]})},qR=()=>{const[n,e]=S.useState(""),[s,r]=S.useState(""),[i,o]=S.useState(""),[c,u]=S.useState(""),{login:f,authErrorMessage:h,clearAuthError:x}=wt(),v=en(),N=async T=>{T.preventDefault(),o(""),x(),await f(n,s)?v(n==="spoilmevintagediy@gmail.com"?"/admin":"/"):o(h||"Invalid credentials. Please check your email and password.")};return S.useEffect(()=>{try{const T=localStorage.getItem("spv_admin_denied");T&&(u(T),localStorage.removeItem("spv_admin_denied"))}catch{}},[]),t.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:t.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-zinc-900 rounded-2xl border border-gray-800 shadow-xl",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-handwriting font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Welcome Back"}),t.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Sign in to access your account"})]}),t.jsxs("form",{className:"space-y-6",onSubmit:N,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(kc,{size:18,className:"text-gray-500"})}),t.jsx("input",{type:"email",name:"email",autoComplete:"email",required:!0,value:n,onChange:T=>{e(T.target.value),x(),o("")},className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:"name@example.com"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(aa,{size:18,className:"text-gray-500"})}),t.jsx("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,value:s,onChange:T=>{r(T.target.value),x(),o("")},className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:""})]})]})]}),i&&t.jsx("div",{className:"p-3 bg-red-900/20 border border-red-900/50 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-400 text-center",children:i})}),c&&t.jsx("div",{className:"p-3 bg-yellow-900/20 border border-yellow-800 rounded-lg mt-2",children:t.jsx("p",{className:"text-sm text-yellow-200 text-center",children:c})}),t.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-pink-600 hover:bg-pink-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition-all hover:shadow-[0_0_15px_rgba(236,72,153,0.4)]",children:["Sign In ",t.jsx(Qs,{size:16})]})]}),t.jsx("div",{className:"text-center pt-4 border-t border-gray-800",children:t.jsxs("p",{className:"text-xs text-gray-500",children:["Don't have an account? ",t.jsx("span",{className:"text-gray-400",children:"Registration is currently invite only."})]})})]})})};/*!
 * react-paypal-js v8.9.2 (2025-10-02T20:17:55.069Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn;(function(n){n.INITIAL="initial",n.PENDING="pending",n.REJECTED="rejected",n.RESOLVED="resolved"})(vn||(vn={}));var sa;(function(n){n.LOADING_STATUS="setLoadingStatus",n.RESET_OPTIONS="resetOptions",n.SET_BRAINTREE_INSTANCE="braintreeInstance"})(sa||(sa={}));var ub;(function(n){n.NUMBER="number",n.CVV="cvv",n.EXPIRATION_DATE="expirationDate",n.EXPIRATION_MONTH="expirationMonth",n.EXPIRATION_YEAR="expirationYear",n.POSTAL_CODE="postalCode"})(ub||(ub={}));var vs=function(){return vs=Object.assign||function(e){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},vs.apply(this,arguments)};function ZN(n,e){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(s[r[i]]=n[r[i]]);return s}function hb(n,e,s){if(s||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var Ac="data-react-paypal-script-id",Ba={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},WR="Failed to load the PayPal JS SDK script.",XN="paypal",HR="usePayPalScriptReducer must be used within a PayPalScriptProvider";function GR(n){return n===void 0&&(n=XN),window[n]}function KR(n){for(var e="",s=0;s<n.length;s++){var r=n[s].charCodeAt(0)*s;n[s+1]&&(r+=n[s+1].charCodeAt(0)*(s-1)),e+=String.fromCharCode(97+Math.abs(r)%26)}return e}function JR(n){var e=n.reactComponentName,s=n.sdkComponentKey,r=n.sdkRequestedComponents,i=r===void 0?"":r,o=n.sdkDataNamespace,c=o===void 0?XN:o,u=s.charAt(0).toUpperCase().concat(s.substring(1)),f="Unable to render <".concat(e," /> because window.").concat(c,".").concat(u," is undefined."),h=typeof i=="string"?i:i.join(",");if(!h.includes(s)){var x=[h,s].filter(Boolean).join();f+=`
To fix the issue, add '`.concat(s,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(x,"'}}>`.")}return f}function QN(n){var e=n,s=Ac;e[s];var r=ZN(e,[s+""]);return"react-paypal-js-".concat(KR(JSON.stringify(r)))}function YR(n){var e=self.document.querySelector("script[".concat(Ac,'="').concat(n,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function ZR(n,e){var s,r;switch(e.type){case sa.LOADING_STATUS:return typeof e.value=="object"?vs(vs({},n),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):vs(vs({},n),{loadingStatus:e.value});case sa.RESET_OPTIONS:return YR(n.options[Ac]),vs(vs({},n),{loadingStatus:vn.PENDING,options:vs(vs((s={},s[Ba.DATA_SDK_INTEGRATION_SOURCE]=Ba.DATA_LIBRARY_VALUE,s),e.value),(r={},r[Ac]="".concat(QN(e.value)),r))});case sa.SET_BRAINTREE_INSTANCE:return vs(vs({},n),{braintreePayPalCheckoutInstance:e.value});default:return n}}var ej=S.createContext(null);function XR(n){if(typeof(n==null?void 0:n.dispatch)=="function"&&n.dispatch.length!==0)return n;throw new Error(HR)}function QR(){var n=XR(S.useContext(ej)),e=vs(vs({},n),{isInitial:n.loadingStatus===vn.INITIAL,isPending:n.loadingStatus===vn.PENDING,isResolved:n.loadingStatus===vn.RESOLVED,isRejected:n.loadingStatus===vn.REJECTED});return[e,n.dispatch]}S.createContext({});function e5(n){var e=S.useRef(new Proxy({},{get:function(s,r,i){return typeof s[r]=="function"?function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return s[r].apply(s,o)}:Reflect.get(s,r,i)}}));return e.current=Object.assign(e.current,n),e.current}var Ic=function(n){var e,s=n.className,r=s===void 0?"":s,i=n.disabled,o=i===void 0?!1:i,c=n.children,u=n.forceReRender,f=u===void 0?[]:u,h=ZN(n,["className","disabled","children","forceReRender"]),x=o?{opacity:.38}:{},v="".concat(r," ").concat(o?"paypal-buttons-disabled":"").trim(),N=S.useRef(null),T=S.useRef(null),_=e5(h),C=QR()[0],R=C.isResolved,z=C.options,$=S.useState(null),U=$[0],Z=$[1],q=S.useState(!0),V=q[0],I=q[1],k=S.useState(null),E=k[1];function L(){T.current!==null&&T.current.close().catch(function(){})}return!((e=T.current)===null||e===void 0)&&e.updateProps&&T.current.updateProps({message:h.message}),S.useEffect(function(){if(R===!1)return L;var O=GR(z.dataNamespace);if(O===void 0||O.Buttons===void 0)return E(function(){throw new Error(JR({reactComponentName:Ic.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:z.components,sdkDataNamespace:z[Ba.DATA_NAMESPACE]}))}),L;var B=function(A,ne){Z(ne),typeof h.onInit=="function"&&h.onInit(A,ne)};try{T.current=O.Buttons(vs(vs({},_),{onInit:B}))}catch(A){return E(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(A))})}return T.current.isEligible()===!1?(I(!1),L):(N.current&&T.current.render(N.current).catch(function(A){N.current===null||N.current.children.length===0||E(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(A))})}),L)},hb(hb([R],f,!0),[h.fundingSource],!1)),S.useEffect(function(){U!==null&&(o===!0?U.disable().catch(function(){}):U.enable().catch(function(){}))},[o,U]),qa.createElement(qa.Fragment,null,V?qa.createElement("div",{ref:N,style:x,className:v}):c)};Ic.displayName="PayPalButtons";function t5(n,e){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(s[r[i]]=n[r[i]]);return s}function s5(n,e){var s=document.querySelector('script[src="'.concat(n,'"]'));if(s===null)return null;var r=tj(n,e),i=s.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(r.dataset).length)return null;var o=!0;return Object.keys(i.dataset).forEach(function(c){i.dataset[c]!==r.dataset[c]&&(o=!1)}),o?s:null}function n5(n){var e=n.url,s=n.attributes,r=n.onSuccess,i=n.onError,o=tj(e,s);o.onerror=i,o.onload=r,document.head.insertBefore(o,document.head.firstElementChild)}function r5(n){var e=n.sdkBaseUrl,s=n.environment,r=t5(n,["sdkBaseUrl","environment"]),i=e||o5(s),o=r,c=Object.keys(o).filter(function(h){return typeof o[h]<"u"&&o[h]!==null&&o[h]!==""}).reduce(function(h,x){var v=o[x].toString();return x=i5(x),x.substring(0,4)==="data"||x==="crossorigin"?h.attributes[x]=v:h.queryParams[x]=v,h},{queryParams:{},attributes:{}}),u=c.queryParams,f=c.attributes;return u["merchant-id"]&&u["merchant-id"].indexOf(",")!==-1&&(f["data-merchant-id"]=u["merchant-id"],u["merchant-id"]="*"),{url:"".concat(i,"?").concat(a5(u)),attributes:f}}function i5(n){var e=function(s,r){return(r?"-":"")+s.toLowerCase()};return n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function a5(n){var e="";return Object.keys(n).forEach(function(s){e.length!==0&&(e+="&"),e+=s+"="+n[s]}),e}function o5(n){return n==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function tj(n,e){e===void 0&&(e={});var s=document.createElement("script");return s.src=n,Object.keys(e).forEach(function(r){s.setAttribute(r,e[r]),r==="data-csp-nonce"&&s.setAttribute("nonce",e["data-csp-nonce"])}),s}function l5(n,e){if(e===void 0&&(e=Promise),sj(n,e),typeof document>"u")return e.resolve(null);var s=r5(n),r=s.url,i=s.attributes,o=i["data-namespace"]||"paypal",c=fb(o);return i["data-js-sdk-library"]||(i["data-js-sdk-library"]="paypal-js"),s5(r,i)&&c?e.resolve(c):c5({url:r,attributes:i},e).then(function(){var u=fb(o);if(u)return u;throw new Error("The window.".concat(o," global variable is not available."))})}function c5(n,e){e===void 0&&(e=Promise),sj(n,e);var s=n.url,r=n.attributes;if(typeof s!="string"||s.length===0)throw new Error("Invalid url.");if(typeof r<"u"&&typeof r!="object")throw new Error("Expected attributes to be an object.");return new e(function(i,o){if(typeof document>"u")return i();n5({url:s,attributes:r,onSuccess:function(){return i()},onError:function(){var c=new Error('The script "'.concat(s,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return o(c)}})})}function fb(n){return window[n]}function sj(n,e){if(typeof n!="object"||n===null)throw new Error("Expected an options object.");var s=n.environment;if(s&&s!=="production"&&s!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var qm=function(n){var e,s=n.options,r=s===void 0?{clientId:"test"}:s,i=n.children,o=n.deferLoading,c=o===void 0?!1:o,u=S.useReducer(ZR,{options:vs(vs({},r),(e={},e[Ba.DATA_JS_SDK_LIBRARY]=Ba.DATA_LIBRARY_VALUE,e[Ba.DATA_SDK_INTEGRATION_SOURCE]=Ba.DATA_LIBRARY_VALUE,e[Ac]="".concat(QN(r)),e)),loadingStatus:c?vn.INITIAL:vn.PENDING}),f=u[0],h=u[1];return S.useEffect(function(){if(c===!1&&f.loadingStatus===vn.INITIAL)return h({type:sa.LOADING_STATUS,value:vn.PENDING});if(f.loadingStatus===vn.PENDING){var x=!0;return l5(f.options).then(function(){x&&h({type:sa.LOADING_STATUS,value:vn.RESOLVED})}).catch(function(v){console.error("".concat(WR," ").concat(v)),x&&h({type:sa.LOADING_STATUS,value:{state:vn.REJECTED,message:String(v)}})}),function(){x=!1}}},[f.options,c,f.loadingStatus]),qa.createElement(ej.Provider,{value:vs(vs({},f),{dispatch:h})},i)};function mb(){}S.createContext({cardFieldsForm:null,fields:{},registerField:mb,unregisterField:mb});const d5=({planId:n,userId:e,onApprove:s,onError:r})=>{const i="Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",o={clientId:i,"client-id":i,currency:"USD",intent:"subscription",vault:!0,components:"buttons"},c=u=>{const f=u.toLowerCase();return f.includes("insider")?"P-27V6575111695415KNE2N6OI":f.includes("gold")?"P-4KK8219436336790HNE2N7HQ":f.includes("deluxe")?"P-5D389612KP666993XNE2N7UY":(console.error("Plan ID not found for:",u),null)};return t.jsx(qm,{options:o,children:t.jsx(Ic,{createSubscription:(u,f)=>{const h=c(n);if(!h||h.includes("YOUR_")||h.includes("P-INSIDER"))throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID in .env file");return f.subscription.create({plan_id:h})},onApprove:async(u,f)=>{console.log("PayPal subscription approved:",u),await Promise.resolve(s(u))},onError:u=>{console.error("PayPal subscription error:",u),r(u)},style:{shape:"pill",color:"silver",layout:"vertical",label:"subscribe"}})})},u5=({onSuccess:n})=>{const[e,s]=S.useState(!1),[r,i]=S.useState(!1),[o,c]=S.useState({email:"",password:""}),u=(h,x)=>{c(v=>({...v,[h]:x}))},f=async h=>{if(h.preventDefault(),!o.email||!o.password){alert("Please fill in all fields.");return}i(!0);try{await __(o.email,o.password),n()}catch(x){console.error("Login Error",x),alert(x.message||"Login failed. Please check your credentials.")}finally{i(!1)}};return t.jsxs("form",{onSubmit:f,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),t.jsx("input",{type:"email",value:o.email,onChange:h=>u("email",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your email",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:e?"text":"password",value:o.password,onChange:h=>u("password",h.target.value),className:"w-full px-3 py-2 pr-10 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your password",required:!0}),t.jsx("button",{type:"button",onClick:()=>s(!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-yellow-400",children:e?t.jsx(Du,{size:20}):t.jsx(rl,{size:20})})]})]}),t.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 disabled:bg-gray-600 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:r?"Signing In...":"Sign In"})]})},h5=({onSuccess:n})=>{const[e,s]=S.useState(!1),[r,i]=S.useState(!1),[o,c]=S.useState({firstName:"",lastName:"",email:"",dob:"",gender:"",favoriteColor:"",country:"",password:""}),u=(h,x)=>{c(v=>({...v,[h]:x}))},f=async h=>{if(h.preventDefault(),!o.firstName||!o.lastName||!o.email||!o.password||!o.dob||!o.gender||!o.favoriteColor||!o.country){alert("Please fill in all fields.");return}if(o.password.length<6){alert("Password must be at least 6 characters long.");return}i(!0);try{await C_(o.email,o.password,{firstName:o.firstName,lastName:o.lastName,dob:o.dob,gender:o.gender,favoriteColor:o.favoriteColor,country:o.country,email:o.email,createdAt:new Date().toISOString(),membershipTier:"none",role:"user",wishlist:[]}),n()}catch(x){console.error("Registration Error",x),alert(x.message||"Registration failed. Please try again.")}finally{i(!1)}};return t.jsxs("form",{onSubmit:f,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"First Name"}),t.jsx("input",{type:"text",value:o.firstName,onChange:h=>u("firstName",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"First name",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Last Name"}),t.jsx("input",{type:"text",value:o.lastName,onChange:h=>u("lastName",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Last name",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),t.jsx("input",{type:"email",value:o.email,onChange:h=>u("email",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your email",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date of Birth"}),t.jsx("input",{type:"date",value:o.dob,onChange:h=>u("dob",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Gender"}),t.jsxs("select",{value:o.gender,onChange:h=>u("gender",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0,children:[t.jsx("option",{value:"",children:"Select gender"}),t.jsx("option",{value:"male",children:"Male"}),t.jsx("option",{value:"female",children:"Female"}),t.jsx("option",{value:"other",children:"Other"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Favorite Color"}),t.jsxs("select",{value:o.favoriteColor,onChange:h=>u("favoriteColor",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0,children:[t.jsx("option",{value:"",children:"Select favorite color"}),t.jsx("option",{value:"red",children:"Red"}),t.jsx("option",{value:"blue",children:"Blue"}),t.jsx("option",{value:"green",children:"Green"}),t.jsx("option",{value:"yellow",children:"Yellow"}),t.jsx("option",{value:"purple",children:"Purple"}),t.jsx("option",{value:"pink",children:"Pink"}),t.jsx("option",{value:"orange",children:"Orange"}),t.jsx("option",{value:"black",children:"Black"}),t.jsx("option",{value:"white",children:"White"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Country"}),t.jsx("input",{type:"text",value:o.country,onChange:h=>u("country",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your country",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:e?"text":"password",value:o.password,onChange:h=>u("password",h.target.value),className:"w-full px-3 py-2 pr-10 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Create a password",required:!0}),t.jsx("button",{type:"button",onClick:()=>s(!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-yellow-400",children:e?t.jsx(Du,{size:20}):t.jsx(rl,{size:20})})]})]}),t.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 disabled:bg-gray-600 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:r?"Creating Account...":"Create Account"})]})},mm={insider:"P-27V6575111695415KNE2N6OI",gold:"P-4KK8219436336790HNE2N7HQ",deluxe:"P-5D389612KP666993XNE2N7UY"},pb=n=>{const e=n.toLowerCase();return e.includes("insider")?mm.insider:e.includes("gold")?mm.gold:e.includes("deluxe")?mm.deluxe:(console.error("Plan ID not found for:",n),null)},gb=async(n,e)=>{try{if(n){const r=await Oc("users",n),i={...r||{},acceptedPlans:{...r&&r.acceptedPlans||{},[e]:!0}};await Yi("users",n,i);return}}catch(r){console.warn("Supabase accept save failed, falling back to localStorage",r)}const s=`accepted_terms_${n||"guest"}_${e}`;localStorage.setItem(s,"1")},xb=({plan:n,isOpen:e,onClose:s,initialView:r})=>{const{currentUser:i}=wt(),[o,c]=S.useState(r==="auth"?"auth":"terms"),[u,f]=S.useState("register"),[h,x]=S.useState(!1),N=(R=>{const z=R.toLowerCase();return z.includes("insider")?"text-cyan-400":z.includes("gold")?"text-purple-400":z.includes("deluxe")?"text-lime-400":z.includes("spoiler")||z.includes("spoil me")?"text-cyan-400":z.includes("basic")?"text-purple-400":z.includes("premium")?"text-pink-400":"text-gold"})(n.name);S.useEffect(()=>{c(r==="auth"?"auth":"terms")},[r]),S.useEffect(()=>{c(i?"payment":"auth")},[i]),S.useEffect(()=>{i&&o==="auth"&&(console.log("User detected during auth - Auto-switching to Payment"),c("payment"))},[i,o]);const T=()=>{console.log("Auth Success Triggered - Switching to Payment"),c("payment")},_=S.useCallback(async()=>{await gb((i==null?void 0:i.id)||(i==null?void 0:i.uid)||null,n.id),x(!0),c("payment")},[i,n.id]),C=async(R,z)=>{await gb((i==null?void 0:i.uid)||null,n.id),s()};return e?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",children:t.jsxs("div",{className:"bg-zinc-900 border border-gold p-6 rounded-lg max-w-md w-full relative shadow-[0_0_20px_rgba(236,72,153,0.3)]",children:[t.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:""}),!i&&o==="auth"&&t.jsxs("div",{children:[t.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] mb-4 text-center",children:u==="login"?"Welcome Back":"Create Account"}),t.jsxs("p",{className:"text-gray-400 text-sm text-center mb-4",children:["You must be logged in to subscribe to the ",t.jsx("strong",{className:N,children:n.name}),"."]}),t.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[t.jsx("button",{onClick:()=>f("login"),className:`px-4 py-2 rounded-md font-bold transition-colors ${u==="login"?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Log In"}),t.jsx("button",{onClick:()=>f("register"),className:`px-4 py-2 rounded-md font-bold transition-colors ${u==="register"?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Create Account"})]}),u==="login"?t.jsx(u5,{onSuccess:T}):t.jsx(h5,{onSuccess:T})]}),o==="welcome"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl text-gold mb-4 text-center",children:"Welcome to the Club!"}),t.jsxs("p",{className:"text-gray-400 text-sm text-center mb-4",children:["Thank you for choosing to subscribe to the ",t.jsx("strong",{className:N,children:n.name})," plan."]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 mb-6",children:[t.jsxs("div",{className:"text-center mb-2",children:[t.jsxs("span",{className:"text-3xl font-bold text-white",children:[n.currency==="USD"?"$":"R",n.amount]}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Cancel anytime"})]}),t.jsx("div",{className:"mb-4",children:t.jsx(qm,{options:{clientId:"Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",currency:"USD",intent:"subscription",vault:!0,components:"buttons"},children:t.jsx(Ic,{style:{shape:"pill",color:"gold",layout:"vertical"},fundingSource:"paypal",createSubscription:(R,z)=>{const $=pb(n.name);if(!$)throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID configuration");return z.subscription.create({plan_id:$})},onApprove:C,onCancel:()=>{},onError:R=>{console.error("PayPal error",R)}})})}),t.jsx("div",{className:"text-xs text-gray-400 text-center",children:"By completing payment you accept the Terms and Conditions."})]}),o==="terms"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl text-gold mb-2 text-center",children:"Confirm Subscription"}),i&&t.jsxs("div",{className:"text-center mb-4 text-green-400 text-sm",children:["Logged in as: ",i.email]}),t.jsxs("div",{className:"bg-black p-4 rounded border border-gray-800 h-48 overflow-y-auto mb-4 text-sm text-gray-300",children:[t.jsx("p",{children:"1. Membership fees are billed monthly..."}),t.jsx("p",{children:"2. You may cancel anytime..."})]}),t.jsx("div",{className:"flex flex-col gap-3",children:t.jsx("button",{onClick:_,className:"bg-gold text-black font-bold py-3 rounded hover:brightness-110",children:"I AGREE - PROCEED TO PAYMENT"})})]}),o==="payment"&&t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] mb-4 text-center",children:" Welcome to Spoil Me Vintage"}),t.jsx("p",{className:"text-gray-400 text-sm text-center mb-6",children:'"You deserve to be celebrated every single day."'}),t.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 mb-6 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[t.jsxs("p",{className:"text-gray-300 italic text-sm mb-2",children:["You are taking a beautiful step towards self-love. By joining the ",t.jsx("strong",{className:N,children:n.name}),", you aren't just buying jewelry; you are investing in your own happiness and confidence."]}),t.jsx("div",{className:"text-gold text-xs uppercase tracking-wider font-bold mt-2",children:" The Spoil Me Team"})]}),t.jsxs("div",{className:"mb-6 text-sm text-gray-400",children:[t.jsxs("p",{children:["You are subscribing to the ",t.jsx("strong",{className:N,children:n.name}),"."]}),t.jsxs("p",{children:["Price: ",t.jsxs("strong",{children:[n.currency==="USD"?"$":"R",n.amount," / month"]})]}),t.jsx("p",{className:"text-xs mt-1",children:"(Cancel at anytime. No hidden fees.)"})]}),t.jsx("div",{className:"w-full relative z-10",children:t.jsx(qm,{options:{clientId:"Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",currency:"USD",intent:"subscription",vault:!0,components:"buttons"},children:t.jsx(Ic,{style:{shape:"pill",color:"gold",layout:"vertical",label:"subscribe"},fundingSource:"paypal",createSubscription:(R,z)=>{const $=pb(n.name);if(!$)throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID configuration");return z.subscription.create({plan_id:$})},onApprove:C})})})]})]})}):null},f5=()=>{const{addSystemNotification:n,user:e,memberCount:s,currency:r}=wt();en();const i=S.useRef(null),[o,c]=S.useState(null),[u,f]=S.useState(!1),[h,x]=S.useState(!1),[v,N]=S.useState(""),[T,_]=S.useState(!1),[C,R]=S.useState(null),[z,$]=S.useState(null),[U,Z]=S.useState(!1),[q,V]=S.useState(412),[I,k]=S.useState(500),[E,L]=S.useState(485),[O,B]=S.useState(500),[A,ne]=S.useState(498),[fe,ke]=S.useState(500),De=Pe=>Pe===500?750:Pe===750?1e3:Pe===1e3?1250:Pe+250;S.useEffect(()=>{q>=I-5&&k(De(I))},[q,I]),S.useEffect(()=>{E>=O-5&&B(De(O))},[E,O]),S.useEffect(()=>{A>=fe-5&&ke(De(fe))},[A,fe]);const oe=(Pe,Te)=>{const Ue=Pe/Te*100;let Xe="bg-green-500",rt=" OPEN";return Ue>=95?(Xe="bg-red-500 animate-pulse",rt=" CRITICAL"):Ue>=80&&(Xe="bg-orange-500",rt=" HIGH DEMAND"),{percentage:Ue,color:Xe,status:rt}},be=oe(q,I),ve=oe(E,O),X=oe(A,fe),ue=new Date,se=ue.getMonth(),xe=ue.getFullYear();ue.getDate(),new Date(xe,se+1,0).getDate();const H=(Pe,Te)=>{$({id:Pe,name:Pe,amount:Te,currency:r}),Z(!0)};return t.jsxs("div",{className:"py-8 space-y-12",children:[o&&t.jsx(Fp,{ref:i,amount:o.amount,itemName:`${o.name} Membership`,email:e.email,isSubscription:!0,frequency:3,cycles:0,customStr1:e.id,customStr2:"MEMBERSHIP_SIGNUP"}),h&&v&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-8 rounded-xl max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Complete Your Subscription"}),t.jsx(d5,{planId:v,userId:e.id,onApprove:async Pe=>{console.log("PayPal subscription approved:",Pe),alert(` Subscription successful! Welcome to ${C==null?void 0:C.name}!`),window.location.reload()},onError:Pe=>{console.error("PayPal error:",Pe),alert("Payment failed. Please try again."),x(!1)}}),t.jsx("button",{onClick:()=>x(!1),className:"mt-4 w-full py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg",children:"Cancel"})]})}),T&&C&&t.jsx(xb,{isOpen:T,onClose:()=>_(!1),plan:C,initialView:e?"terms":"auth"}),"%       ",U&&z&&t.jsx(xb,{plan:z,isOpen:U,onClose:()=>Z(!1),initialView:e?"terms":"auth"}),t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("h1",{className:"font-cherry text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Membership Perks"}),t.jsx("p",{className:"font-architects text-xl md:text-2xl text-gray-300 max-w-2xl mx-auto",children:"Join the Spoil Me Vintage family and unlock a world of exclusive benefits, discounts, and special gifts!"})]}),t.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 ${r==="ZAR"?"xl:grid-cols-4":"xl:grid-cols-3"} gap-8`,children:r==="ZAR"?t.jsxs(t.Fragment,{children:[t.jsxs(He,{to:"/weekly-winners",className:"block relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[t.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-cyan-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Popular"}),t.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"Spoil Me Package"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"R19"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[t.jsxs("span",{children:[q," / ",I," Spots Taken"]}),t.jsxs("span",{className:`${be.percentage>=95?"text-red-500 animate-pulse":be.percentage>=80?"text-orange-500":"text-green-500"}`,children:[I-q," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${be.color}`,style:{width:`${be.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Join now before the monthly International Draw!"})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Get ",t.jsx("strong",{className:"text-white",children:"R25 Store Credit"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"5% OFF"})," everything in store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dr,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Fun: Entry into ",t.jsx("strong",{className:"text-white",children:"Weekly Giveaway"})," (Win R500 Gift Card)."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),H("Spoil Me",19)},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx($i,{size:12})," PayFast Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[t.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"Basic Package"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"R49"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Receive a ",t.jsx("strong",{className:"text-white",children:"R50 Voucher"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," entire store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(us,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"R100 Birthday Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(js,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Bonus: ",t.jsx("strong",{className:"text-white",children:"2x Entries"})," into the Weekly Drop."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>H("Basic",49),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx($i,{size:12})," PayFast Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-pink-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(236, 72, 153, 0.4)"},children:[t.jsx("h2",{className:"text-2xl font-bold text-pink-500 text-center mt-4 mb-2",children:"Premium Package"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"R99"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-pink-500 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Receive a ",t.jsx("strong",{className:"text-white",children:"R100 Voucher"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-pink-500 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," entire store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(us,{className:"text-pink-500 shrink-0",size:16}),t.jsx("span",{children:"Holidays: Free small gift added to orders (Valentine's Day, Mother's Day, Festive)."})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(us,{className:"text-pink-500 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"R150 Birthday Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-pink-500 shrink-0",size:16}),t.jsxs("span",{children:["Priority: ",t.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>H("Premium",99),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx($i,{size:12})," PayFast Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[t.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[t.jsx(Lt,{size:14})," The Ultimate"]}),t.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:'The Deluxe "Boss" Package'}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"R199"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[t.jsxs("span",{children:[A," / ",fe," Spots Taken"]}),t.jsxs("span",{className:`${X.percentage>=95?"text-red-500 animate-pulse":X.percentage>=80?"text-orange-500":"text-green-500"}`,children:[fe-A," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)] ${X.color}`,style:{width:`${X.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Warning: We strictly limit Vault access to ensure stock availability. 2 spots remaining."})]}),t.jsxs("div",{className:"bg-lime-900/20 border border-lime-500/30 rounded-xl p-4 mb-6",children:[t.jsxs("h3",{className:"text-lime-400 font-bold text-sm uppercase tracking-wide mb-2 flex items-center gap-2",children:[t.jsx(Lt,{size:16}),' ACCESS TO "THE SECRET VAULT"']}),t.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:["Shop clearance, samples, and slight imperfections starting at ",t.jsx("strong",{className:"text-white",children:"R10"}),"."]}),t.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[t.jsx("p",{children:t.jsx("strong",{children:"The Loyalty Ladder:"})}),t.jsx("p",{children:"Month 1: Buy 5 Vault items."}),t.jsx("p",{children:"Month 2: Buy 7 Vault items."}),t.jsx("p",{children:"Month 3: Buy 10 Vault items."}),t.jsxs("p",{children:["Month 4+: ",t.jsx("strong",{className:"text-lime-400",children:"UNLIMITED ACCESS"}),"."]}),t.jsx("p",{className:"text-red-400 italic",children:"Subscription reset? Start back at Month 1."})]})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: ",t.jsx("strong",{className:"text-white",children:"R150 Store Credit"})," every month (Rolls over)."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," normal retail items."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(us,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"R300 Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Priority: ",t.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),t.jsx("p",{className:"text-xs text-yellow-400 mb-4 italic",children:"Secret Vault items may include factory rejects or slight imperfections. Sold as-is."}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>H("Deluxe Vault",199),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx($i,{size:12})," PayFast Secure Subscription"]})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[t.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"The Insider Club"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"$5.00"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("p",{className:"text-[10px] text-cyan-300 text-center mb-6 font-semibold uppercase tracking-wide border border-cyan-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:[be.status," (Batch 3)"]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[t.jsxs("span",{children:[q," / ",I," Spots Taken"]}),t.jsxs("span",{className:`${be.percentage>=95?"text-red-500 animate-pulse":be.percentage>=80?"text-orange-500":"text-green-500"}`,children:[I-q," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${be.color}`,style:{width:`${be.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Join now before the monthly International Draw!"})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Get ",t.jsx("strong",{className:"text-white",children:"$5.00 Store Credit"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"5% OFF"})," everything in store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(dr,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Fun: Entry into ",t.jsx("strong",{className:"text-white",children:"Weekly Giveaway"})," (Win $50 Gift Card)."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>H("Insider Club",5),className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx($i,{size:12})," PayPal Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[t.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"The Gold Member"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"$12.00"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsx("p",{className:"text-[10px] text-purple-300 text-center mb-6 font-semibold uppercase tracking-wide border border-purple-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:ve.status}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-purple-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-purple-400 mb-1",children:[t.jsxs("span",{children:[E," / ",O," Spots Taken"]}),t.jsxs("span",{className:`${ve.percentage>=95?"text-red-500 animate-pulse":ve.percentage>=80?"text-orange-500":"text-green-500"}`,children:[O-E," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(168,85,247,0.8)] ${ve.color}`,style:{width:`${ve.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Only 15 spots left at this price."})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Get ",t.jsx("strong",{className:"text-white",children:"$12.00 Store Credit"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," everything in store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(us,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"$20 Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Priority: ",t.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>H("Gold Member",12),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx($i,{size:12})," PayPal Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[t.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[t.jsx(Lt,{size:14})," Top Tier"]}),t.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:'Deluxe "Vault" Access'}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"$25.00"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[t.jsxs("span",{children:[A," / ",fe," Spots Taken"]}),t.jsxs("span",{className:`${X.percentage>=95?"text-red-500 animate-pulse":X.percentage>=80?"text-orange-500":"text-green-500"}`,children:[fe-A," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)] ${X.color}`,style:{width:`${X.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Warning: We strictly limit Vault access to ensure stock availability. 2 spots remaining."})]}),t.jsxs("div",{className:"bg-lime-900/20 border border-lime-500/30 rounded-xl p-4 mb-6",children:[t.jsxs("h3",{className:"text-lime-400 font-bold text-sm uppercase tracking-wide mb-2 flex items-center gap-2",children:[t.jsx(Lt,{size:16}),' ACCESS TO "THE SECRET VAULT"']}),t.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:["Shop clearance, samples, and slight imperfections starting at ",t.jsx("strong",{className:"text-white",children:"R10"}),"."]}),t.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[t.jsx("p",{children:t.jsx("strong",{children:"The Loyalty Ladder:"})}),t.jsx("p",{children:"Month 1: Buy 5 Vault items."}),t.jsx("p",{children:"Month 2: Buy 7 Vault items."}),t.jsx("p",{children:"Month 3: Buy 10 Vault items."}),t.jsxs("p",{children:["Month 4+: ",t.jsx("strong",{className:"text-lime-400",children:"UNLIMITED ACCESS"}),"."]}),t.jsx("p",{className:"text-red-400 italic",children:"Subscription reset? Start back at Month 1."})]})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: ",t.jsx("strong",{className:"text-white",children:"$15.00 Store Credit"})," every month (Rolls over)."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," normal retail items."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(us,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"$40 Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(mt,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Priority: ",t.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),t.jsx("p",{className:"text-xs text-yellow-400 mb-4 italic",children:"Secret Vault items may include factory rejects or slight imperfections. Sold as-is."}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>H("Deluxe Vault",25),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx($i,{size:12})," PayPal Secure Subscription"]})]})]})]})}),t.jsxs("div",{className:"mt-16 border-t border-gray-800 pt-12 text-center",children:[t.jsxs("h2",{className:"font-cherry text-3xl text-white flex items-center justify-center gap-3 mb-4",children:[t.jsx(us,{className:"text-yellow-400",size:32})," Want to Earn Rewards for Free?"]}),t.jsx("p",{className:"text-gray-400 max-w-lg mx-auto mb-8",children:"You don't have to be a member to start earning. Join our social channels, leave reviews, and shop to earn points."}),t.jsxs(He,{to:"/earn-rewards",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105",children:["Go to Rewards Hub ",t.jsx(Qs,{size:20})]}),t.jsx("br",{}),t.jsxs(He,{to:"/vault",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105 mt-4",children:[t.jsx(Lt,{size:20})," Explore The Secret Vault"]}),t.jsx("div",{className:"mt-8 text-center",children:t.jsx(He,{to:"/terms",className:"text-gray-400 hover:text-white text-sm underline",children:"View Terms & Conditions"})})]})]})},m5=()=>{var x,v,N,T,_;const{user:n,claimSocialReward:e}=wt(),[s,r]=S.useState(!1),[i,o]=S.useState(null),[c,u]=S.useState(""),f=(C,R)=>{o({platform:C,name:R}),u("")},h=()=>{if(i){if(i.platform!=="whatsapp"&&!c.trim()){alert(`Please enter your ${i.name} username to verify.`);return}e(i.platform,c),o(null)}};return t.jsxs("div",{className:"max-w-5xl mx-auto py-8 space-y-12 relative",children:[i&&t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>o(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"One Last Step!"}),t.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"To prevent fraud and secure your points, please enter your username. This allows us to verify your follow."}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:["Your ",i.name," Username"]}),t.jsxs("div",{className:"relative",children:[t.jsx(Fr,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"text",value:c,onChange:C=>u(C.target.value),className:"w-full pl-10 p-3 bg-black border border-gray-700 rounded-xl text-white text-sm focus:border-pink-500 outline-none",placeholder:"@username"})]})]}),t.jsx("button",{onClick:h,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all",children:"Verify & Claim Points"})]}),t.jsx("button",{onClick:()=>o(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(as,{size:20})})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 border-b border-gray-800 pb-8",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h1",{className:"font-cherry text-4xl text-white",children:"Loyalty Rewards"}),t.jsx("button",{onClick:()=>r(!0),className:"text-gray-500 hover:text-cyan-400 transition-colors",title:"How it works",children:t.jsx(Xi,{size:24})})]}),t.jsx("p",{className:"text-gray-400 text-lg max-w-xl",children:"Complete simple tasks to earn points and unlock discounts on your next vintage treasure."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-purple-500/30 min-w-[250px] text-center shadow-[0_0_20px_rgba(168,85,247,0.15)] relative group",children:[t.jsx("div",{className:"absolute inset-0 bg-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"text-sm text-gray-400 uppercase tracking-wider mb-1 font-semibold",children:"Your Balance"}),t.jsx("div",{className:"text-5xl font-bold text-white mb-2 font-mono tracking-tight",children:n.loyaltyPoints}),t.jsx("div",{className:"text-xs text-purple-400 font-bold bg-purple-900/20 py-1 px-3 rounded-full w-fit mx-auto",children:"Points Available"})]})]})]}),s&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>r(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[t.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(as,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:t.jsx(ir,{size:24})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),t.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"1 Point for every R10"})," spent."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"100 Points"})," for verified reviews."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing."]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",t.jsx("span",{className:"text-white font-bold",children:"R1.00 Discount"}),"."]}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum redemption is 1000 Points (R10)."})]})]}),t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[t.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[t.jsx(ir,{size:14})," Membership Rule"]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",t.jsx("strong",{children:"R100 (10,000 pts)"})," per order. To redeem more, you must be a ",t.jsx(He,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),t.jsx("button",{onClick:()=>r(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[t.jsx(us,{className:"text-yellow-400"})," Quick Earn: Social Media"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-pink-500 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-pink-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-pink-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(236,72,153,0.4)] relative z-10",children:t.jsx(Ka,{size:32,className:"text-pink-500"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"TikTok"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Get exclusive clips & flash sales."}),(x=n.socialRewards)!=null&&x.tiktok?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(mt,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>f("tiktok","TikTok"),className:"mt-auto w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Ua,{size:16})," Join & Earn 100"]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-blue-500 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-blue-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(59,130,246,0.4)] relative z-10",children:t.jsx(ic,{size:32,className:"text-blue-500"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Facebook"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Join our community group."}),(v=n.socialRewards)!=null&&v.facebook?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(mt,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>f("facebook","Facebook"),className:"mt-auto w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(59,130,246,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Ua,{size:16})," Join & Earn 100"]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-white/20 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:t.jsx(pu,{size:32,className:"text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Twitter"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"News and polls."}),(N=n.socialRewards)!=null&&N.twitter?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(mt,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>f("twitter","Twitter"),className:"mt-auto w-full py-3 bg-gray-700 hover:bg-gray-600 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(255,255,255,0.2)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Ua,{size:16})," Join & Earn 100"]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-green-500/30 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-green-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:t.jsx(il,{size:32,className:"text-green-500"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"WhatsApp"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Instant drop notifications."}),(T=n.socialRewards)!=null&&T.whatsapp?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(mt,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>e("whatsapp"),className:"mt-auto w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(34,197,94,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Ua,{size:16})," Join & Earn 100"]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-red-500/30 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-red-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:t.jsx("svg",{width:32,height:32,className:"text-red-500",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,children:t.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.75.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.747-1.378 0 0-.599 2.282-.744 2.84-.282 1.084-1.064 2.456-1.549 3.235C9.584 23.815 10.77 24.001 12.017 24.001c6.624 0 11.99-5.367 11.99-11.987C24.007 5.367 18.641.001 12.017.001z"})})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Pinterest"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Visual inspiration board."}),(_=n.socialRewards)!=null&&_.pinterest?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(mt,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>f("pinterest","Pinterest"),className:"mt-auto w-full py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(239,68,68,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Ua,{size:16})," Join & Earn 100"]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-8 border-t border-gray-800",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[t.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:t.jsx(hl,{className:"text-cyan-400",size:24})}),t.jsx("h3",{className:"text-lg font-bold text-white",children:"Shop & Earn"}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 1 point for every R10 you spend on any purchase automatically."}),t.jsx(He,{to:"/",className:"text-cyan-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Start Shopping"})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-yellow-500/30 transition-colors",children:[t.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:t.jsx(Rn,{className:"text-yellow-400",size:24})}),t.jsx("h3",{className:"text-lg font-bold text-white",children:"Review Products"}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 100 points for every verified review you leave on items you've bought."}),t.jsx(He,{to:"/profile",className:"text-yellow-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Check Pending Reviews"})]})]})]})},p5=({isOpen:n,onClose:e})=>{const{user:s,updateUser:r}=wt(),[i,o]=S.useState(null),[c,u]=S.useState(!1),f=async()=>{if(i){u(!0);try{await r({affiliateCurrency:i,currencyLocked:!0}),e()}catch(h){console.error("Error saving currency:",h)}finally{u(!1)}}};return n?t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/95 backdrop-blur-xl",children:t.jsxs("div",{className:"bg-zinc-900 border border-pink-500/50 rounded-2xl p-8 max-w-md w-full shadow-[0_0_50px_rgba(236,72,153,0.3)] animate-in zoom-in-95 duration-300",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"w-16 h-16 bg-pink-900/20 border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(ws,{size:32,className:"text-pink-400"})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Choose Your Earning Currency"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"This choice determines how you receive commissions and cannot be changed later."})]}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsx("button",{onClick:()=>o("ZAR"),className:`w-full p-4 rounded-xl border transition-all ${i==="ZAR"?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-green-900/20 rounded-full flex items-center justify-center",children:t.jsx(_c,{size:16,className:"text-green-400"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:" South African Rand (ZAR)"}),t.jsx("div",{className:"text-xs text-gray-400",children:"EFT Bank Transfer Payouts"})]}),i==="ZAR"&&t.jsx(Qa,{size:20,className:"text-green-400 ml-auto"})]})}),t.jsx("button",{onClick:()=>o("USD"),className:`w-full p-4 rounded-xl border transition-all ${i==="USD"?"bg-blue-900/20 border-blue-500 text-blue-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-900/20 rounded-full flex items-center justify-center",children:t.jsx(_c,{size:16,className:"text-blue-400"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:" US Dollar (USD)"}),t.jsx("div",{className:"text-xs text-gray-400",children:"PayPal Payouts"})]}),i==="USD"&&t.jsx(Qa,{size:20,className:"text-blue-400 ml-auto"})]})})]}),t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-4 rounded-lg mb-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(fi,{size:20,className:"text-yellow-500 shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-yellow-400 font-bold text-sm mb-1",children:"Permanent Choice"}),t.jsx("p",{className:"text-yellow-300 text-xs",children:"Once selected, your currency cannot be changed. Choose based on your payout preferences."})]})]})}),t.jsx("button",{onClick:f,disabled:!i||c,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all shadow-lg",children:c?"Saving...":"Confirm Currency Choice"})]})}):null},g5=()=>{const{user:n,affiliateLeaderboard:e,applyForAffiliate:s,buyAffiliateContent:r,joinAffiliateElite:i,register:o,login:c,getAllUsers:u,currency:f}=wt(),[h,x]=S.useState(!1),[v,N]=S.useState(1),[T,_]=S.useState(!1),[C,R]=S.useState(!1),[z,$]=S.useState({name:n&&n.name&&n.name!=="Guest"?n.name.split(" ")[0]:"",surname:n&&n.name&&n.name!=="Guest"?n.name.split(" ").slice(1).join(" "):"",email:(n==null?void 0:n.email)||"",dob:(n==null?void 0:n.birthday)||"",gender:"",reason:"",socials:"",password:""}),[U,Z]=S.useState(!1),[q,V]=S.useState(!1),[I,k]=S.useState(!1),[E,L]=S.useState(!1),[O,B]=S.useState(""),[A,ne]=S.useState(""),[fe,ke]=S.useState({}),[De,oe]=S.useState(!1),[be,ve]=S.useState([]),[X,ue]=S.useState(!1);S.useEffect(()=>{var Ne,We,jt;((Ne=n.affiliateStats)==null?void 0:Ne.status)==="pending"&&R(!0),((We=n.affiliateStats)==null?void 0:We.status)==="approved"&&u().then(ye=>{const J=ye.filter(_e=>{var kt;return((kt=_e.affiliateStats)==null?void 0:kt.parentId)===n.id});ve(J)}),((jt=n.affiliateStats)==null?void 0:jt.status)==="approved"&&!n.currencyLocked&&ue(!0)},[n.affiliateStats,n.id,n.currencyLocked,u]);const se=S.useMemo(()=>[{title:"1. Introduction",content:'These Terms and Conditions ("Agreement") govern your participation in the Spoil Me Vintage Partnership Program ("Program"). By enrolling in the Program, you agree to be bound by these terms.'},{title:"2. Definitions",content:'"Partner", "You", and "Your" refer to the individual or entity applying for or participating in the Program. "We", "Us", and "Our" refer to Spoil Me Vintage. "Commission" refers to the amount paid for a successful referral. "Net Sales" refers to the final sale price of a product EXCLUDING shipping costs, customs duties, taxes (VAT), and any refunds.'},{title:"3. Enrollment",content:"To begin the enrollment process, you must submit a complete Partnership Application. We will evaluate your application and notify you of your acceptance or rejection. We reserve the right to reject applications from sites or profiles that do not meet our brand standards."},{title:"4. Affiliate Links",content:"You will be issued a unique Affiliate URL or code. Sales must be tracked via these links to generate commission. We use a 30-day cookie window. It is your responsibility to ensure that these links are correctly formatted and used on your site."},{title:"5. Commissions & Earnings",content:'You will earn commissions based on the specific product category sold: 5.1. Standard Jewelry: Earn 10% to 20% on Net Sales based on your monthly performance tier. 5.2. "Secret Vault" Items: Due to the clearance pricing of Vault items, these sales earn a flat 1% Commission regardless of your tier. 5.3. Memberships: Earn a fixed monthly recurring commission (ZAR R2-R15 or USD $1-$3) for active, paid subscriptions. 5.4. Override: Earn a 1% bonus on Net Sales generated by partners you directly recruit.'},{title:"6. Payment Terms & Currency",content:"Commissions are paid once a month. 6.1. South African Partners: Paid via EFT to a valid SA Bank Account. International earnings (USD) are converted to ZAR at the bank rate. Minimum payout: R200. 6.2. International Partners: Paid via PayPal in USD. South African earnings (ZAR) are converted to USD at the bank rate. Minimum payout: $50."},{title:'7. "Secret Vault" Items',content:'This section strictly governs the purchase of discounted items from the "Secret Vault." 7.1. Nature of Goods ("Sold As-Is"): Items listed in "The Secret Vault" (priced from R10 / $1) may include: Factory overstock, Sample items, Items with minor cosmetic imperfections ("Rejects" or "Seconds"). ALL SALES FROM THE SECRET VAULT ARE FINAL. NO RETURNS, REFUNDS, OR EXCHANGES ARE PERMITTED ON THESE ITEMS. 7.2. The "Loyalty Ladder" & Purchase Limits: To prevent resale abuse, purchase limits apply to The Secret Vault based on consecutive months of membership: Month 1: Maximum 5 items, Month 2: Maximum 7 items, Month 3: Maximum 10 items, Month 4+: Unlimited. 7.3. The "Reset Rule" (Strict Enforcement): Membership continuity is required to maintain your "Loyalty Ladder" status. If you cancel your subscription or if your payment fails and is not rectified within 48 hours, your Loyalty Ladder status RESETS TO MONTH 1.'},{title:"8. Competitions & Weekly Drops",content:'8.1. Promotional Competition: The "Spoil Me" package (R19) includes entry into giveaways. This is a promotional competition under the South African Consumer Protection Act (CPA), not a lottery. You are paying for the Membership Services (Sales alerts, Vouchers), and the entry is a complimentary benefit. 8.2. International Winners: If a winner is selected from outside South Africa: Physical prizes may be converted to Store Credit of equivalent value to avoid shipping fees. If the winner requests the physical item, the winner is responsible for all international shipping costs and customs duties.'},{title:"9. International Orders & Shipping",content:"9.1. Customs, Duties, and Taxes: DDU (Delivered Duty Unpaid): For all international orders (outside South Africa), Spoil Me Vintage is NOT responsible for any customs fees, import duties, or local taxes. These fees are the sole responsibility of the customer. If you refuse to pay customs fees and the package is returned to us, we will deduct the return shipping costs from any potential refund. 9.2. Shipping Times: International shipping times are estimates (typically 10-25 business days). We are not liable for delays caused by customs departments or global logistics strikes."},{title:"10. Returns and Refunds",content:"10.1. Standard Products (Non-Vault): South Africa: You may return unused, undamaged standard jewelry within 7 days of receipt for a store credit or exchange, in accordance with the CPA. International: Due to high shipping costs, international returns are generally not accepted unless the item arrived damaged. Evidence (photos) must be provided within 24 hours of delivery. 10.2. Non-Returnable Items: The following items are final sale and cannot be returned: Earrings (for hygiene reasons), Secret Vault Items, Customized or personalized jewelry."},{title:"11. Limitation of Liability",content:"To the fullest extent permitted by law, Spoil Me Vintage shall not be liable for: Allergic Reactions: Our jewelry materials are listed on the product page. It is the customer's responsibility to verify they are not allergic to metals (e.g., nickel, copper, alloys) before wearing. We are not liable for skin reactions. Indirect Damages: Any indirect, incidental, or consequential damages arising from the use of our products or website. Maximum Liability: In no event shall our total liability to you exceed the amount you paid to us in the 3 months preceding the claim."},{title:"12. Payment Terms",content:"Payments are processed securely via third-party providers (e.g., PayFast, Stripe, Yoco). Spoil Me Vintage does not store your full credit card details. By subscribing, you authorize us to charge your payment method automatically every month until you cancel."},{title:"13. Governing Law and Dispute Resolution",content:"These Terms are governed by the laws of the Republic of South Africa. Any disputes arising from these Terms shall be subject to the exclusive jurisdiction of the Magistrate's Court in Worcester, Western Cape. For International customers, you agree to waive any right to class action lawsuits and agree to resolve disputes through binding arbitration in South Africa, or via amicable email resolution."},{title:"14. Commission Rates & Exceptions",content:'14.1. Standard Products: Commission rates (10% - 20%) apply to all full-priced, standard retail jewelry items based on your monthly performance tier. 14.2. "Secret Vault" Items: Items purchased from "The Secret Vault" (Clearance/Sample stock) are sold at near-cost prices. Therefore, all Vault items earn a flat 1% commission, regardless of your current Tier status. 14.3. Shipping & Taxes: Commissions are calculated on the Net Product Price only. Shipping fees, taxes, and duties are excluded from all calculations. 14.4. Payouts: South Africa: Paid via EFT (ZAR). International earnings converted to ZAR. International: Paid via PayPal (USD). South African earnings converted to USD.'},{title:"15. CONTACT US",content:"For questions regarding these Terms, please contact us at: Email: spoilmevintagediy@gmail.com WhatsApp: +27 71858 9370"}],[]),xe=se.length>0&&se.every((Ne,We)=>fe[We]),H=async Ne=>{var jt;if(Ne.preventDefault(),ne(""),await c(z.email,O)){L(!1),N(2);const J=(await u()).find(_e=>_e.email.toLowerCase()===z.email.toLowerCase());((jt=J==null?void 0:J.affiliateStats)==null?void 0:jt.status)==="approved"&&(x(!1),setTimeout(()=>{var _e;return(_e=document.getElementById("affiliate-dashboard"))==null?void 0:_e.scrollIntoView({behavior:"smooth"})},500))}else ne("Invalid password. Please try again.")},Pe=async Ne=>{if(Ne.preventDefault(),!z.reason.trim()||!U)return;const We={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},jt={status:"pending",gender:z.gender,joinReason:`${z.reason} | Socials: ${z.socials}`,totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1};if(n.email)await s(z),k(!0);else{if(!z.email||!z.password){alert("Please provide email and password to create your account.");return}if((await u()).find(kt=>kt.email.toLowerCase()===z.email.toLowerCase())){L(!0),ne("This email address is already associated with an account. Please Log In to continue your application.");return}if(!await o({name:`${z.name} ${z.surname}`,email:z.email,password:z.password,birthday:z.dob,notifications:[We],affiliateStats:jt})){alert("Failed to create account. Please try again.");return}k(!0)}},Te=()=>{x(!1),k(!1),N(1),V(!1),Z(!1),ke({}),L(!1),B(""),ne("")},Ue=async()=>{window.confirm("Purchase the Partner Content Pack for R250?")&&(await r(),alert("Content Unlocked!"))},Xe=async()=>{window.confirm("Upgrade to Elite Partner Status? A fee applies.")&&(await i(),alert("Welcome to the Elite Squad!"))},rt=()=>{Z(!0),_(!1)},zt=Ne=>{ke(We=>({...We,[Ne]:!We[Ne]}))},we=()=>{const Ne=`${window.location.origin}/#/?ref=${n.affiliateCode}`;navigator.clipboard.writeText(Ne),oe(!0),setTimeout(()=>oe(!1),2e3)},Ce=n.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,isElite:!1},Qe=Ce.status==="approved",ut=[{name:"Bronze",rate:10,min:0,max:f==="ZAR"?2e3:200},{name:"Silver",rate:11,min:f==="ZAR"?2001:201,max:f==="ZAR"?5e3:500},{name:"Gold",rate:15,min:f==="ZAR"?5001:501,max:f==="ZAR"?1e4:1e3},{name:"Platinum",rate:20,min:f==="ZAR"?10001:1001,max:f==="ZAR"?25e3:2500}],ie=ut.find(Ne=>Ce.totalSalesValue>=Ne.min&&Ce.totalSalesValue<=Ne.max)||ut[0],Se=ut.indexOf(ie);let Be=null;return Se<ut.length-1&&(Be=ut[Se+1],Be.min-ie.min,Ce.totalSalesValue-ie.min),t.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-16",children:[t.jsx("style",{children:`
            @keyframes marquee {
                0% { transform: translateX(100%); }
                100% { transform: translateX(-100%); }
            }
            .animate-marquee {
                animation: marquee 20s linear infinite;
            }
        `}),t.jsxs("div",{className:"relative rounded-3xl overflow-hidden bg-zinc-900 border border-pink-500/30 min-h-[400px] flex items-center",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-zinc-900/90 to-transparent z-10"}),t.jsx("div",{className:"absolute right-0 top-0 h-full w-1/2 bg-[url('https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80')] bg-cover bg-center opacity-40 grayscale mix-blend-luminosity"}),t.jsxs("div",{className:"relative z-20 p-8 md:p-16 max-w-2xl space-y-6",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-1.5 rounded-full text-sm font-bold uppercase tracking-wider",children:[t.jsx(Tc,{size:16})," Join the Team"]}),t.jsx("h1",{className:"font-cherry text-5xl md:text-7xl text-white leading-none drop-shadow-[0_0_15px_rgba(236,72,153,0.6)]",children:"Turn Passion into Profit"}),t.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:f==="ZAR"?"Join the Spoil Me Team. Earn up to 20% Commission + Monthly Recurring Rands.":"Join the Spoil Me Team. Earn up to 20% Commission + Monthly Recurring Cash."}),!Qe&&Ce.status!=="pending"&&t.jsxs("button",{onClick:()=>x(!0),className:"px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.4)] flex items-center gap-2",children:[f==="ZAR"?"JOIN THE TEAM (ZA)":"JOIN THE TEAM (GLOBAL)"," ",t.jsx(Qs,{size:20})]}),Ce.status==="pending"&&t.jsxs("button",{onClick:()=>R(!0),className:"inline-flex items-center gap-2 bg-yellow-900/20 border border-yellow-500/30 text-yellow-400 px-6 py-3 rounded-lg font-bold hover:bg-yellow-900/40 transition-colors",children:[t.jsx(cr,{size:18})," Check Application Status"]}),Qe&&t.jsxs("button",{onClick:()=>{var Ne;return(Ne=document.getElementById("affiliate-dashboard"))==null?void 0:Ne.scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 bg-green-600 text-white font-bold rounded-full hover:bg-green-500 transition-all shadow-[0_0_20px_rgba(34,197,94,0.4)] flex items-center gap-2",children:["Go to Dashboard ",t.jsx(Qs,{size:20})]})]})]}),t.jsxs("div",{className:`overflow-hidden bg-zinc-900/50 border border-gray-800 rounded-2xl p-4 ${f==="ZAR"?"view-zar":"view-usd"}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(dr,{className:"text-yellow-500",size:20}),t.jsx("span",{className:"text-sm font-bold text-white",children:"Recent Partner Success"})]}),t.jsx("div",{className:"overflow-hidden",children:t.jsx("div",{className:"animate-marquee whitespace-nowrap",children:f==="ZAR"?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Sarah J. (Pretoria) earned R450..."}),t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Thandi M. (JHB) hit Gold Tier..."}),t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Lerato K. (Durban) earned R2,000..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Emily R. (Texas) earned $50..."}),t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Mike T. (London) hit Gold Tier..."}),t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Jessica L. (NY) earned $120..."})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[t.jsx("div",{className:"w-16 h-16 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto mb-4 text-green-500 font-bold text-xl shadow-[0_0_15px_rgba(34,197,94,0.3)]",children:"1"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sign Up & Share"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Apply to become a partner. Once approved, share your unique code to start earning."})]}),t.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[t.jsx("div",{className:"w-16 h-16 bg-black border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 text-pink-500 font-bold text-xl shadow-[0_0_15px_rgba(236,72,153,0.3)]",children:"2"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Recruit & Earn"}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Invite others to join your team. You earn a ",t.jsx("strong",{children:"1% commission"})," on their sales forever!"]})]}),t.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[t.jsx("div",{className:"w-16 h-16 bg-black border-2 border-purple-500 rounded-full flex items-center justify-center mx-auto mb-4 text-purple-500 font-bold text-xl shadow-[0_0_15px_rgba(168,85,247,0.3)]",children:"3"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Get Paid"}),t.jsx("p",{className:"text-gray-400 text-sm",children:f==="ZAR"?"We payout commissions monthly via EFT to your South African bank account.":"We pay you monthly in USD via PayPal. Fast and secure."})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Earning Potential"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"See what successful partners are earning with our tiered commission structure."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:t.jsx(ws,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Passive Income"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Recruit 10 Deluxe Members"})]})]}),t.jsx("div",{className:"text-2xl font-bold text-green-400 mb-2",children:f==="ZAR"?"R150/month":"$30/month"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Earn recurring commissions on their monthly subscriptions forever."})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-yellow-900/20 rounded-lg text-yellow-400",children:t.jsx(dr,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Weekly Bonus"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Hit the milestone"})]})]}),t.jsx("div",{className:"text-2xl font-bold text-yellow-400 mb-2",children:f==="ZAR"?"R200 Cash":"$15 Cash"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Weekly cash bonuses for reaching sales targets."})]})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Partner Success Stories"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Real partners sharing their experiences with the Spoil Me program."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-pink-900/20 rounded-full flex items-center justify-center text-pink-400 font-bold",children:"L"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Lerato, Johannesburg"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Started 6 months ago"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:'"I shared my link on WhatsApp status. My first month I made R2,000 extra cash. The EFT was on time and easy to receive."'})]}),t.jsxs("div",{className:`bg-zinc-900 p-6 rounded-2xl border border-gray-800 ${f==="USD"?"block":"hidden"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-cyan-900/20 rounded-full flex items-center justify-center text-cyan-400 font-bold",children:"J"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Jessica, Texas"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Active partner"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:'"The recurring commission covers my own jewelry addiction! I love getting paid in USD via PayPal."'})]})]})]}),Qe&&t.jsxs("div",{id:"affiliate-dashboard",className:"space-y-8 animate-in slide-in-from-bottom-10 duration-700 pt-8 border-t border-gray-800",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Your Partnership Dashboard"}),t.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",n&&n.name?n.name.split(" ")[0]:"Partner","! Manage your links and earnings."]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(He,{to:"/affiliate/store-builder",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white rounded-lg text-sm font-bold flex items-center gap-2",children:[t.jsx(Tc,{size:16})," Build Store"]}),t.jsxs("button",{onClick:Ue,className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg text-sm border border-gray-700 flex items-center gap-2",children:[t.jsx(MN,{size:16})," Content Assets"]}),!Ce.isElite&&t.jsxs("button",{onClick:Xe,className:"px-4 py-2 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:brightness-110",children:[t.jsx(Lt,{size:16})," Go Elite"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:t.jsx(ws,{size:24})}),t.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Total Earnings"})]}),t.jsxs("div",{className:"text-3xl font-bold text-white",children:["R",Ce.balance.toFixed(2)]}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Next payout date: 1st of month"})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:t.jsx(qs,{size:24})}),t.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Direct Sales"})]}),t.jsx("div",{className:"text-3xl font-bold text-white",children:Ce.totalSalesCount}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Value: R",Ce.totalSalesValue.toFixed(0)]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:t.jsx(Rn,{size:24})}),t.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Current Rate"})]}),t.jsxs("div",{className:"text-3xl font-bold text-white",children:[Ce.commissionRate,"%"]}),t.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:["Tier: ",ie.name]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(al,{size:20,className:"text-pink-500"})," Your Referral Link"]}),t.jsx("div",{className:"bg-black p-4 rounded-xl border border-gray-700 flex flex-col gap-3",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[t.jsxs("code",{className:"flex-1 text-cyan-400 text-sm break-all font-mono bg-zinc-900/50 p-3 rounded border border-gray-800 w-full",children:[window.location.origin,"/#/?ref=",n.affiliateCode]}),t.jsxs("button",{onClick:we,className:"w-full md:w-auto px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg transition-colors flex items-center justify-center gap-2 border border-gray-600",children:[De?t.jsx(mt,{size:14}):t.jsx(nh,{size:14}),De?"Copied!":"Copy Link"]})]})}),t.jsx("div",{className:"mt-4 bg-pink-900/20 p-3 rounded-lg border border-pink-500/20",children:t.jsxs("p",{className:"text-xs text-pink-300",children:[t.jsx("strong",{children:"Tip:"})," Customers get ",t.jsx("strong",{children:"5% OFF"})," when using your code ",t.jsx("code",{children:n.affiliateCode})," at checkout!"]})})]}),t.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-cyan-500/30 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:t.jsx($N,{size:80,className:"text-cyan-500"})}),t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 relative z-10",children:[t.jsx(qs,{size:20,className:"text-cyan-400"})," Recruitment Center"]}),t.jsx("div",{className:"bg-cyan-900/20 border border-cyan-500/30 p-4 rounded-xl mb-6 relative z-10",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-full text-cyan-400 shrink-0",children:t.jsx(ws,{size:16})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-bold text-white",children:"Earn 1% Override Commission"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Recruit new affiliates and earn 1% of their sales volume forever. No impact on their earnings!"})]})]})}),t.jsxs("div",{className:"space-y-3 relative z-10",children:[t.jsxs("h4",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:["My Recruits (",be.length,")"]}),be.length>0?t.jsx("div",{className:"max-h-[150px] overflow-y-auto pr-2 space-y-2 custom-scrollbar",children:be.map(Ne=>{var We;return t.jsxs("div",{className:"flex justify-between items-center p-2 bg-black/40 rounded border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-6 h-6 bg-zinc-800 rounded-full flex items-center justify-center text-[10px] text-gray-400 border border-gray-700",children:Ne.name?Ne.name.charAt(0):"?"}),t.jsx("span",{className:"text-xs text-gray-300",children:Ne.name})]}),t.jsxs("span",{className:"text-xs text-green-400 font-mono",children:["Sales: R",(We=Ne.affiliateStats)==null?void 0:We.totalSalesValue.toFixed(0)]})]},Ne.id)})}):t.jsx("div",{className:"text-center py-4 border border-dashed border-gray-800 rounded-lg",children:t.jsx("p",{className:"text-xs text-gray-500",children:"No recruits yet. Start building your team!"})})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 relative z-10",children:[t.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"Share your recruitment link:"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("code",{className:"flex-1 bg-black p-2 rounded text-[10px] text-gray-400 truncate border border-gray-800",children:[window.location.origin,"/#/?ref=",n.affiliateCode]}),t.jsx("button",{onClick:we,className:"text-xs text-cyan-400 hover:text-cyan-300 font-bold",children:"Copy"})]})]})]})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Commission Tiers"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Your commission rate increases based on your all-time sales performance."})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:ut.map((Ne,We)=>t.jsx("div",{className:`p-6 rounded-2xl border transition-all ${ie.name===Ne.name?"bg-gradient-to-br from-yellow-900/20 to-orange-900/20 border-yellow-500/50 shadow-[0_0_20px_rgba(234,179,8,0.2)]":"bg-zinc-900 border-gray-800"}`,children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full mb-3 ${ie.name===Ne.name?"bg-yellow-500 text-black":"bg-zinc-800 text-gray-400"}`,children:t.jsx(ir,{size:20})}),t.jsx("h3",{className:`text-lg font-bold mb-1 ${ie.name===Ne.name?"text-yellow-400":"text-white"}`,children:Ne.name}),t.jsxs("div",{className:`text-2xl font-bold mb-2 ${ie.name===Ne.name?"text-yellow-400":"text-gray-300"}`,children:[Ne.rate,"%"]}),t.jsx("p",{className:"text-xs text-gray-500",children:f==="ZAR"?`R${Ne.min.toLocaleString()} - ${Ne.max===1/0?"":"R"+Ne.max.toLocaleString()}`:`$${Ne.min.toLocaleString()} - ${Ne.max===1/0?"":"$"+Ne.max.toLocaleString()}`})]})},Ne.name))})]}),T&&t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-xl",onClick:()=>!xe&&_(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-3xl w-full relative z-20 shadow-2xl h-[90vh] flex flex-col animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-800",children:[t.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(Xy,{size:20,className:"text-pink-500"})," Terms & Conditions"]}),t.jsx("button",{onClick:()=>_(!1),className:"text-gray-500 hover:text-white",children:t.jsx(as,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-8 pr-4",children:[t.jsx("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-4 rounded-lg mb-6 text-yellow-200 text-sm",children:"Please read each section carefully. You must acknowledge each section to proceed."}),se.map((Ne,We)=>t.jsxs("div",{className:"bg-black/30 rounded-xl p-5 border border-gray-800 hover:border-gray-700 transition-colors",children:[t.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:Ne.title}),t.jsx("div",{className:"text-sm text-gray-400 leading-relaxed whitespace-pre-wrap font-sans mb-4 pl-2 border-l-2 border-gray-700",children:Ne.content}),t.jsxs("label",{className:`flex items-center gap-3 cursor-pointer p-3 rounded-lg transition-all ${fe[We]?"bg-green-900/20 border border-green-500/30":"bg-zinc-800/50 border border-gray-700 hover:bg-zinc-800"}`,children:[t.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${fe[We]?"bg-green-500 border-green-500 text-black":"bg-black border-gray-600 text-transparent"}`,children:t.jsx(mt,{size:14,strokeWidth:4})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:!!fe[We],onChange:()=>zt(We)}),t.jsxs("span",{className:`text-sm font-bold ${fe[We]?"text-green-400":"text-gray-400"}`,children:["I have read and agree to the ",Ne.title]})]})]},We))]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 flex justify-between items-center",children:[t.jsxs("div",{className:"text-xs text-gray-500",children:[Object.values(fe).filter(Boolean).length," of ",se.length," sections agreed"]}),t.jsxs("button",{onClick:rt,disabled:!xe,className:"px-8 py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg",children:[xe?t.jsx(mt,{size:18}):t.jsx(aa,{size:18}),xe?"Confirm Agreement":"Agree to All Sections to Continue"]})]})]})]}),C&&t.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>R(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-yellow-500/50 rounded-2xl p-8 max-w-md w-full relative z-20 shadow-[0_0_50px_rgba(234,179,8,0.2)] animate-in zoom-in-95 duration-200 text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-yellow-900/20 border-2 border-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:t.jsx(cr,{size:40,className:"text-yellow-500"})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Under Review"}),t.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed mb-6",children:["Thank you for applying to the Spoil Me Vintage Partnership Program. ",t.jsx("br",{}),t.jsx("br",{}),"Our team is currently reviewing your application details. This process typically takes ",t.jsx("strong",{children:"24-48 hours"}),"."]}),t.jsx("button",{onClick:()=>R(!1),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded-xl transition-colors",children:"Understood"})]})]}),h&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:Te}),t.jsx("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-xl w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200 max-h-[95vh] overflow-y-auto",children:I?t.jsx("div",{className:"text-center py-8 px-4",children:t.jsxs("div",{className:"bg-zinc-800 border border-green-500/30 rounded-2xl p-8 shadow-[0_0_40px_rgba(34,197,94,0.1)] relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-cyan-500"}),t.jsx("div",{className:"w-20 h-20 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto shadow-[0_0_20px_rgba(34,197,94,0.4)] mb-6",children:t.jsx(mt,{size:40,className:"text-green-500"})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Received!"}),t.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["Thank you, ",t.jsx("strong",{children:z.name}),". Your application has been sent to our admin team for review."]}),t.jsx("button",{onClick:Te,className:"mt-8 w-full py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg",children:"Done"})]})}):E?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center border-b border-gray-800 pb-4",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Welcome Back"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Please log in to continue your application."})]}),A&&t.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/50 rounded-lg flex gap-2 items-center text-red-400 text-sm",children:[t.jsx(sh,{size:16})," ",A]}),t.jsxs("form",{onSubmit:H,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Email Address"}),t.jsx("input",{type:"email",value:z.email,readOnly:!0,className:"w-full bg-zinc-800 border border-gray-700 rounded-lg p-3 text-gray-400 text-sm cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Password"}),t.jsx("input",{type:"password",value:O,onChange:Ne=>B(Ne.target.value),required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:""})]}),t.jsxs("button",{type:"submit",className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:[t.jsx(UN,{size:18})," Login & Continue Application"]})]}),t.jsx("div",{className:"text-center",children:t.jsx("button",{onClick:()=>L(!1),className:"text-xs text-gray-500 hover:text-white underline",children:"Go Back"})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Apply to Partner"}),t.jsx("button",{onClick:Te,className:"text-gray-500 hover:text-white",children:t.jsx(as,{size:24})})]}),v===1&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl",children:[t.jsxs("h3",{className:"text-purple-400 font-bold mb-2 flex items-center gap-2",children:[t.jsx(aa,{size:18})," Reality Check"]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"This is a business partnership. Inactive accounts (0 sales in 3 months) may be deactivated."})]}),t.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[t.jsx("div",{className:`mt-1 w-5 h-5 rounded border flex items-center justify-center ${q?"bg-pink-500 border-pink-500":"border-gray-600"}`,children:q&&t.jsx(mt,{size:14,className:"text-white"})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:q,onChange:Ne=>V(Ne.target.checked)}),t.jsx("span",{className:"text-sm text-gray-400 group-hover:text-white transition-colors",children:"I understand that this program requires active participation."})]}),t.jsx("button",{disabled:!q,onClick:()=>N(2),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all",children:"Continue"})]}),v===2&&t.jsxs("form",{onSubmit:Pe,className:"space-y-4",children:[!n.email&&t.jsxs("div",{className:"p-3 bg-zinc-800 rounded-lg border border-gray-700 mb-4",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Create your account to get started:"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[t.jsx("input",{type:"text",placeholder:"First Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:z.name,onChange:Ne=>$({...z,name:Ne.target.value})}),t.jsx("input",{type:"text",placeholder:"Surname",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:z.surname,onChange:Ne=>$({...z,surname:Ne.target.value})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"email",placeholder:"Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:z.email,onChange:Ne=>$({...z,email:Ne.target.value})}),t.jsx("input",{type:"password",placeholder:"Create Password",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:z.password,onChange:Ne=>$({...z,password:Ne.target.value})}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("input",{type:"date",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:z.dob,onChange:Ne=>$({...z,dob:Ne.target.value})}),t.jsxs("select",{className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",required:!0,value:z.gender,onChange:Ne=>$({...z,gender:Ne.target.value}),children:[t.jsx("option",{value:"",children:"Gender"}),t.jsx("option",{value:"Male",children:"Male"}),t.jsx("option",{value:"Female",children:"Female"}),t.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Why do you want to join?"}),t.jsx("textarea",{required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none h-24",placeholder:"Tell us about your audience or marketing plan...",value:z.reason,onChange:Ne=>$({...z,reason:Ne.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Social Media Links"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Instagram, TikTok, Blog URL...",value:z.socials,onChange:Ne=>$({...z,socials:Ne.target.value})})]}),f==="ZAR"?t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"text-sm font-bold text-white",children:"Banking Details (EFT Payments)"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("input",{type:"text",placeholder:"Bank Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm"}),t.jsx("input",{type:"text",placeholder:"Account Number",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}),t.jsx("input",{type:"text",placeholder:"Branch Code",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"text-sm font-bold text-white",children:"PayPal Details (USD Payments)"}),t.jsx("input",{type:"email",placeholder:"PayPal Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}),t.jsxs("div",{className:"pt-2",children:[t.jsxs("button",{type:"button",onClick:()=>_(!0),className:`w-full flex items-center justify-between p-4 rounded-xl border transition-all ${U?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:[t.jsxs("span",{className:"text-sm font-bold flex items-center gap-2",children:[t.jsx(Xy,{size:16})," ",U?"Terms Accepted":"Read Terms & Conditions"]}),U?t.jsx(Qa,{size:18}):t.jsx(Qs,{size:16})]}),!U&&t.jsx("p",{className:"text-xs text-red-400 mt-1 text-center",children:"You must accept terms to proceed."})]}),t.jsx("button",{type:"submit",disabled:!U,className:"w-full py-4 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all mt-4",children:"Submit Application"})]})]})})]}),t.jsx(p5,{isOpen:X,onClose:()=>ue(!1)})]})},x5=()=>{const{user:n,register:e,login:s,processGiftVoucherPurchase:r}=wt();en();const[i,o]=S.useState(250),[c,u]=S.useState(""),[f,h]=S.useState(""),[x,v]=S.useState(""),[N,T]=S.useState(""),[_,C]=S.useState("self"),[R,z]=S.useState(0),[$,U]=S.useState(!1),[Z,q]=S.useState("register"),[V,I]=S.useState(!1),[k,E]=S.useState(""),[L,O]=S.useState(""),[B,A]=S.useState(""),[ne,fe]=S.useState(""),[ke,De]=S.useState(""),oe=S.useRef(null);S.useEffect(()=>{i>=250&&i<=500?z(100):z(0)},[i]);const be=i+R,ve=async()=>{await r(be,{recipientName:c,senderName:f,message:x,whatsappNumber:N,deliveryMethod:_}),oe.current&&oe.current.submit()},X=()=>{if(!c||!f){alert("Please fill in the 'To' and 'From' fields.");return}n.email?ve():U(!0)},ue=async xe=>{if(xe.preventDefault(),ne!==ke){alert("Passwords do not match!");return}await e({name:k,email:L,birthday:B})&&(U(!1),setTimeout(()=>{ve()},500))},se=async xe=>{xe.preventDefault(),await s(L,ne)?(U(!1),setTimeout(()=>{ve()},500)):alert("Invalid Credentials")};return t.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 space-y-12 relative",children:[t.jsx(Fp,{ref:oe,amount:i,itemName:`Gift Voucher for ${c}`,email:n.email||L,customStr1:c,customStr2:f,customStr3:x,returnUrl:`${window.location.origin}/#/profile`,cancelUrl:`${window.location.origin}/#/gift-cards`}),$&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>U(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-2xl font-bold text-white",children:Z==="register"?"Create Account to Pay":"Sign In to Pay"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["To secure your voucher and ensure delivery, please ",Z==="register"?"create a profile":"sign in","."]})]}),Z==="register"?t.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Full Name"}),t.jsxs("div",{className:"relative",children:[t.jsx(Fr,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"text",required:!0,value:k,onChange:xe=>E(xe.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Jane Doe"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(kc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"email",required:!0,value:L,onChange:xe=>O(xe.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Birthday (For Birthday Vouchers)"}),t.jsxs("div",{className:"relative",children:[t.jsx(za,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"date",required:!0,value:B,onChange:xe=>A(xe.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(aa,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:V?"text":"password",required:!0,value:ne,onChange:xe=>fe(xe.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Confirm"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:V?"text":"password",required:!0,value:ke,onChange:xe=>De(xe.target.value),className:"w-full p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),t.jsx("button",{type:"button",onClick:()=>I(!V),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:V?t.jsx(Du,{size:16}):t.jsx(rl,{size:16})})]})]})]}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500 transition-colors",children:"Create Account & Pay"}),t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",t.jsx("button",{type:"button",onClick:()=>q("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):t.jsxs("form",{onSubmit:se,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(kc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"email",required:!0,value:L,onChange:xe=>O(xe.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(aa,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:V?"text":"password",required:!0,value:ne,onChange:xe=>fe(xe.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),t.jsx("button",{type:"button",onClick:()=>I(!V),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:V?t.jsx(Du,{size:16}):t.jsx(rl,{size:16})})]})]}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500 transition-colors",children:"Sign In & Pay"}),t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",t.jsx("button",{type:"button",onClick:()=>q("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-white drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Give the Gift of Vintage"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Create a personalized digital wish card."})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl shadow-xl space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-800",children:[t.jsx("div",{className:"p-2 bg-pink-900/30 text-pink-500 rounded-lg",children:t.jsx(us,{size:24})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:"Customize Voucher"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Enter details below"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Amount (R)"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"R"}),t.jsx("input",{type:"number",value:i,onChange:xe=>o(parseFloat(xe.target.value)),className:"w-full bg-black border border-gray-700 rounded-xl py-4 pl-10 pr-4 text-white text-xl font-bold focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none transition-all",placeholder:"250",min:"50"})]}),i>=250&&i<=500?t.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-xs font-bold bg-green-900/20 p-2 rounded border border-green-500/30 animate-in fade-in slide-in-from-top-2",children:[t.jsx(js,{size:14}),"Bonus R100 added to voucher value automatically!"]}):t.jsxs("p",{className:"text-xs text-gray-500",children:["Tip: Spend between ",t.jsx("strong",{children:"R250 - R500"})," to get a ",t.jsx("span",{className:"text-pink-500 font-bold",children:"FREE R100"})," bonus!"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"To (Recipient Name)"}),t.jsx("input",{type:"text",value:c,onChange:xe=>u(xe.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. Sarah"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-300 flex items-center gap-2",children:[t.jsx($m,{size:14})," From (Your Name)"]}),t.jsx("input",{type:"text",value:f,onChange:xe=>h(xe.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. John"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Personal Message"}),t.jsx("textarea",{rows:4,value:x,onChange:xe=>v(xe.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none resize-none",placeholder:"Write a sweet note...",maxLength:150}),t.jsxs("div",{className:"text-right text-[10px] text-gray-600",children:[x.length,"/150"]})]}),t.jsxs("div",{className:"space-y-4 pt-2 border-t border-gray-800",children:[t.jsx("label",{className:"block text-sm font-bold text-gray-300",children:"How should we deliver this?"}),t.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[t.jsxs("div",{onClick:()=>C("self"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${_==="self"?"bg-purple-900/20 border-purple-500 ring-1 ring-purple-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[t.jsx("div",{className:`mt-1 p-1 rounded-full ${_==="self"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400"}`,children:t.jsx(Fr,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:`text-sm font-bold ${_==="self"?"text-purple-400":"text-gray-300"}`,children:"Send to Me (Higher Success Rate)"}),t.jsx("div",{className:"flex items-center gap-2 mt-1",children:t.jsxs("span",{className:"text-[10px] bg-green-900/40 text-green-400 border border-green-500/30 px-1.5 py-0.5 rounded font-bold flex items-center gap-1",children:[t.jsx(mt,{size:10})," Best Option"]})}),t.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We send the voucher code and link to YOU via notification. You can then forward it via WhatsApp personally."}),_==="self"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:xe=>xe.stopPropagation(),children:[t.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[t.jsx(Ka,{size:12})," Your WhatsApp Number"]}),t.jsx("input",{type:"text",value:N,onChange:xe=>T(xe.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]}),t.jsxs("div",{onClick:()=>C("recipient"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${_==="recipient"?"bg-pink-900/20 border-pink-500 ring-1 ring-pink-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[t.jsx("div",{className:`mt-1 p-1 rounded-full ${_==="recipient"?"bg-pink-500 text-white":"bg-gray-800 text-gray-400"}`,children:t.jsx(rh,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:`text-sm font-bold ${_==="recipient"?"text-pink-400":"text-gray-300"}`,children:"Send directly to Recipient"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We will email or WhatsApp the recipient directly on your behalf."}),_==="recipient"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:xe=>xe.stopPropagation(),children:[t.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[t.jsx(il,{size:12})," Recipient WhatsApp (Optional)"]}),t.jsx("input",{type:"text",value:N,onChange:xe=>T(xe.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]})]})]}),t.jsxs("button",{onClick:X,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 text-lg",children:[t.jsx(jc,{size:20})," Buy Now & Pay - R",i.toFixed(2)]}),t.jsxs("p",{className:"text-center text-xs text-gray-500 mt-2 flex items-center justify-center gap-1",children:[t.jsx(mt,{size:12,className:"text-green-500"})," Secure Payment via PayFast"]})]}),t.jsxs("div",{className:"sticky top-24",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[t.jsx(jc,{size:16})," Example"]}),t.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),t.jsx("div",{className:"absolute top-0 left-0 p-4 opacity-10 pointer-events-none",children:t.jsx("span",{className:"font-cherry text-8xl text-white leading-none",children:"SV"})}),t.jsxs("div",{className:"relative h-full p-6 md:p-8 flex flex-col justify-between z-20",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-cherry text-xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.3)]",children:"Spoil Me Vintage"}),t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx(js,{size:10,className:"text-cyan-400"}),t.jsx("p",{className:"text-[10px] text-gray-300 tracking-[0.2em] uppercase",children:"Exclusive Voucher"})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("div",{className:"text-2xl md:text-5xl font-bold text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.5)] font-architects",children:["R",be]})})]}),t.jsxs("div",{className:"flex-1 flex flex-col justify-center py-2 md:py-4 relative",children:[t.jsxs("p",{className:"font-architects text-lg md:text-2xl text-gray-200 leading-relaxed text-center break-words relative drop-shadow-sm line-clamp-3",children:['"',x||"Treat yourself to something timeless...",'"']}),t.jsx("div",{className:"mx-auto mt-4 md:mt-6 cursor-pointer group w-full md:w-auto flex justify-center",children:t.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-full px-6 py-3 md:px-6 md:py-2 flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(34,211,238,0.2)] hover:bg-cyan-900/30 hover:border-cyan-400 transition-all w-full md:w-auto",children:[t.jsx("span",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs md:text-xs font-bold text-white uppercase tracking-widest group-hover:text-cyan-300 transition-colors",children:"Redeem Now"}),t.jsx(Qs,{size:12,className:"text-cyan-400 group-hover:translate-x-1 transition-transform"})]})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-800 pt-3 md:pt-4",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"To"}),t.jsx("p",{className:"text-sm font-bold text-white truncate",children:c||"Recipient Name"})]}),t.jsxs("div",{className:"space-y-1 text-right",children:[t.jsxs("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center justify-end gap-1",children:["From ",t.jsx($m,{size:10})]}),t.jsx("p",{className:"text-lg font-architects text-cyan-400 truncate",children:f||"Your Name"})]})]})]})]}),t.jsxs("div",{className:"mt-6 bg-zinc-900/50 border border-gray-800 rounded-xl p-5 shadow-lg",children:[t.jsxs("h4",{className:"font-bold text-white text-sm mb-3 flex items-center gap-2 border-b border-gray-800 pb-2",children:[t.jsx(mt,{size:14,className:"text-green-400"})," Verified Voucher Features"]}),t.jsxs("ul",{className:"text-xs text-gray-400 space-y-2.5",children:[t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(js,{size:12,className:"text-purple-400 mt-0.5"})," Valid for 3 years from date of purchase."]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(Ka,{size:12,className:"text-cyan-400 mt-0.5"})," ",t.jsx("span",{className:"text-white font-bold",children:"Smart Link:"}),' Recipient taps "Redeem Now" to auto-apply discount in App.']}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(il,{size:12,className:"text-green-400 mt-0.5"})," ",t.jsx("span",{className:"text-white font-bold",children:"Instant Delivery"})," via Notification & WhatsApp."]})]})]})]})]})]})},y5=()=>{const{categoryName:n}=Dc(),{products:e,categories:s}=wt(),r=decodeURIComponent(n||""),i=s.find(c=>c.name===r),o=e.filter(c=>c.category===r);return S.useEffect(()=>{window.scrollTo(0,0)},[n]),i?t.jsxs("div",{className:"space-y-8 pb-12",children:[t.jsxs("div",{className:"relative h-64 md:h-80 rounded-2xl overflow-hidden bg-zinc-900 border border-gray-800 shadow-2xl group",children:[t.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"}),t.jsxs("div",{className:"absolute bottom-0 left-0 p-8 w-full",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsxs(He,{to:"/",className:"text-xs text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[t.jsx(ia,{size:12})," Home"]}),t.jsx("span",{className:"text-gray-600",children:"/"}),t.jsx("span",{className:"text-xs text-pink-500 font-bold tracking-wider uppercase",children:"Collection"})]}),t.jsx("h1",{className:"font-cherry text-4xl md:text-6xl text-white drop-shadow-lg mb-2",children:i.name}),i.description&&t.jsx("p",{className:"text-gray-300 max-w-2xl text-sm md:text-base font-light border-l-4 border-pink-500 pl-4",children:i.description})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(js,{size:20,className:"text-cyan-400"}),"Available Treasures (",o.length,")"]})}),o.length>0?t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map(c=>t.jsx(Bc,{product:c},c.id))}):t.jsxs("div",{className:"py-20 text-center border border-dashed border-gray-800 rounded-2xl",children:[t.jsx("p",{className:"text-gray-500",children:"No products found in this collection yet."}),t.jsx(He,{to:"/",className:"text-pink-500 text-sm mt-4 inline-block hover:underline",children:"Browse other collections"})]})]})]}):t.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Collection Not Found"}),t.jsxs(He,{to:"/",className:"text-pink-500 hover:text-pink-400 flex items-center gap-2",children:[t.jsx(ia,{size:20})," Back to Home"]})]})},b5=()=>{const{type:n}=Dc(),{products:e,categories:s}=wt(),[r,i]=S.useState("newest"),[o,c]=S.useState(!1),[u,f]=S.useState(""),[h,x]=S.useState(""),[v,N]=S.useState(!1),[T,_]=S.useState(1),C=20;S.useEffect(()=>{window.scrollTo(0,0),c(!1),f(""),x(""),i("newest"),_(1)},[n]);const{title:R,baseProducts:z}=S.useMemo(()=>{let V="",I=[];switch(n){case"stud":V="Stud Earrings",I=e.filter(k=>k.type==="Stud"||k.isFeaturedStud);break;case"dangle":V="Dangle Earrings",I=e.filter(k=>k.type==="Dangle"||k.isFeaturedDangle);break;case"ring":V="Rings",I=e.filter(k=>k.type==="Ring");break;case"unique":V="Unique Pendants",I=e.filter(k=>k.isUniquePendant);break;case"bracelet":V="Bracelets",I=e.filter(k=>k.type==="Bracelet"||k.isFeaturedBracelet);break;case"watch":V="Watches",I=e.filter(k=>k.isFeaturedWatch);break;case"best":V="Best Sellers",I=e.filter(k=>k.isBestSeller);break;case"sets":V="Jewelry Sets",I=e.filter(k=>k.isJewelrySet);break;default:V="Catalog",I=e}return{title:V,baseProducts:I}},[n,e]),$=S.useMemo(()=>{const V=new Set;return z.forEach(I=>{var k;(k=I.colors)==null||k.forEach(E=>V.add(E))}),Array.from(V).sort()},[z]),U=S.useMemo(()=>{let V=[...z];if(o){const I=new Date;V=V.filter(k=>{const E=k.promoStartsAt?new Date(k.promoStartsAt):null,L=k.promoExpiresAt?new Date(k.promoExpiresAt):null;return(k.promoPrice||0)>0&&(!E||E<=I)&&(!L||L>I)})}return u&&(V=V.filter(I=>{var k;return(k=I.colors)==null?void 0:k.includes(u)})),h&&(V=V.filter(I=>I.category===h)),V.sort((I,k)=>r==="price_asc"?I.price-k.price:r==="price_desc"?k.price-I.price:new Date(k.createdAt).getTime()-new Date(I.createdAt).getTime()),V},[z,o,u,h,r]),Z=S.useMemo(()=>{const V=(T-1)*C,I=V+C;return U.slice(V,I)},[U,T,C]),q=Math.ceil(U.length/C);return t.jsxs("div",{className:"space-y-8 pb-12 min-h-screen",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 pt-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs text-gray-500",children:[t.jsxs(He,{to:"/",className:"hover:text-white flex items-center gap-1",children:[t.jsx(ia,{size:12})," Home"]}),t.jsx("span",{children:"/"}),t.jsx("span",{className:"text-pink-500 font-bold",children:R})]}),t.jsx("h1",{className:"font-cherry text-3xl md:text-4xl text-white",children:R}),t.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[U.length," Items Found"]})]}),t.jsxs("button",{className:"md:hidden flex items-center gap-2 bg-zinc-800 px-4 py-2 rounded text-white text-sm w-fit",onClick:()=>N(!v),children:[t.jsx(CI,{size:16})," Filters & Sort"]}),t.jsxs("div",{className:`flex-col md:flex-row gap-4 items-start md:items-center bg-zinc-900/80 p-4 rounded-xl border border-gray-800 ${v?"flex":"hidden md:flex"}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Sort:"}),t.jsxs("select",{value:r,onChange:V=>i(V.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none",children:[t.jsx("option",{value:"newest",children:"Newest"}),t.jsx("option",{value:"price_asc",children:"Price Low-High"}),t.jsx("option",{value:"price_desc",children:"Price High-Low"})]})]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none bg-black border border-gray-700 px-3 py-1 rounded hover:border-pink-500 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:V=>c(V.target.checked),className:"hidden"}),t.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${o?"bg-pink-600 border-pink-600":"border-gray-500"}`,children:o&&t.jsx(mt,{size:10,className:"text-white"})}),t.jsx("span",{className:`text-sm ${o?"text-pink-400 font-bold":"text-gray-300"}`,children:"Promotions"})]}),t.jsxs("select",{value:h,onChange:V=>x(V.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[t.jsx("option",{value:"",children:"All Collections"}),s.map(V=>t.jsx("option",{value:V.name,children:V.name},V.id))]}),$.length>0&&t.jsxs("select",{value:u,onChange:V=>f(V.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[t.jsx("option",{value:"",children:"All Colors"}),$.map(V=>t.jsx("option",{value:V,children:V},V))]}),(o||u||h)&&t.jsx("button",{onClick:()=>{c(!1),f(""),x("")},className:"text-xs text-red-400 hover:text-red-300 underline",children:"Clear"})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:Z.map(V=>t.jsx(Bc,{product:V},V.id))}),U.length===0&&t.jsxs("div",{className:"py-20 text-center bg-zinc-900/30 rounded-xl border border-dashed border-gray-800",children:[t.jsx("p",{className:"text-gray-400",children:"No products found matching your filters."}),t.jsx("button",{onClick:()=>{c(!1),f(""),x("")},className:"mt-4 text-pink-500 font-bold hover:underline",children:"Clear Filters"})]}),q>1&&t.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between text-sm text-gray-400 mt-8",children:[t.jsxs("div",{children:["Page ",T," of ",q]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>_(V=>Math.max(V-1,1)),className:"bg-black border border-gray-700 rounded px-3 py-1 hover:bg-gray-800 transition-colors disabled:opacity-50",disabled:T===1,children:"Previous"}),t.jsx("button",{onClick:()=>_(V=>Math.min(V+1,q)),className:"bg-black border border-gray-700 rounded px-3 py-1 hover:bg-gray-800 transition-colors disabled:opacity-50",disabled:T===q,children:"Next"})]})]})]})},v5=()=>{const{isDemoMode:n,resetStore:e,seedTestUsers:s,user:r}=wt(),[i,o]=S.useState(!1);if(!r||!r.isAdmin)return t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-zinc-900 text-white",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),t.jsx("p",{className:"text-gray-400",children:"You do not have permission to access the admin panel."})]})});const c=[{path:"/admin",label:"Dashboard"},{path:"/admin/orders",label:"Orders"},{path:"/admin/products",label:"Products"},{path:"/admin/categories",label:"Categories"},{path:"/admin/artists",label:"Artists"},{path:"/admin/members",label:"Membership"}],u=async()=>{o(!0);const f=`admin-test-${Date.now()}`;try{const h={id:f,name:"Admin Test Write",slug:`admin-test-write-${Date.now()}`,price:0,priceUSD:0,category:"System",type:"Other",status:"draft",images:[],createdAt:new Date().toISOString(),tags:[]};await ea("products",h);const x=await Oc("products",f);alert(x?"Supabase write succeeded (test record created and verified). It will be removed now.":"Test write completed but verification read-back failed. Check DB permissions.")}catch(h){console.error("Admin test write failed:",h),alert("Supabase test write failed: "+((h==null?void 0:h.message)||h))}finally{try{await dp("products",f)}catch{}o(!1)}};return t.jsxs("div",{className:"space-y-8 p-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Dashboard Overview"}),t.jsxs("div",{className:"flex gap-2",children:[!n&&t.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-3 py-2 rounded hover:bg-purple-900/50 transition-colors",children:[t.jsx(RI,{size:14})," Seed Test Users"]}),n&&t.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-3 py-2 rounded hover:bg-red-900/50 transition-colors",children:[t.jsx(Ec,{size:14})," Reset Demo Data"]}),t.jsxs("button",{onClick:u,disabled:i,className:"flex items-center gap-2 text-xs bg-yellow-900/20 text-yellow-300 border border-yellow-500/30 px-3 py-2 rounded hover:bg-yellow-900/30 transition-colors",children:[t.jsx(PI,{size:14})," ",i?"Testing...":"Test write to Supabase"]})]})]}),t.jsx("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-4",children:t.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:c.map(f=>t.jsx(He,{to:f.path,className:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white bg-zinc-800/50 hover:bg-zinc-700 rounded-lg transition-colors",children:f.label},f.path))})}),t.jsx("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-3 rounded-lg mb-4",children:t.jsxs("p",{className:"text-yellow-400 text-sm font-medium flex items-center gap-2",children:[t.jsx(fi,{size:16}),"Reviews take up to 72 hours. Artists will be notified via email and in-app notification once their application is processed."]})}),t.jsx("div",{className:"flex flex-wrap gap-3",children:t.jsxs(He,{to:"/admin/artists",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(VN,{size:16})," Review Applications"]})})]})})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let w5,N5;function j5(){return{geminiUrl:w5,vertexUrl:N5}}function S5(n,e,s){var r,i,o;if(!(!((r=n.httpOptions)===null||r===void 0)&&r.baseUrl)){const c=j5();return n.vertexai?(i=c.vertexUrl)!==null&&i!==void 0?i:e:(o=c.geminiUrl)!==null&&o!==void 0?o:s}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qc{}function yt(n,e){const s=/\{([^}]+)\}/g;return n.replace(s,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function y(n,e,s){for(let o=0;o<e.length-1;o++){const c=e[o];if(c.endsWith("[]")){const u=c.slice(0,-2);if(!(u in n))if(Array.isArray(s))n[u]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[u])){const f=n[u];if(Array.isArray(s))for(let h=0;h<f.length;h++){const x=f[h];y(x,e.slice(o+1),s[h])}else for(const h of f)y(h,e.slice(o+1),s)}return}else if(c.endsWith("[0]")){const u=c.slice(0,-3);u in n||(n[u]=[{}]);const f=n[u];y(f[0],e.slice(o+1),s);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===i)return;if(typeof i=="object"&&typeof s=="object"&&i!==null&&s!==null)Object.assign(i,s);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else n[r]=s}function g(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return;const r=e[s];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in n){const o=n[i];return Array.isArray(o)?o.map(c=>g(c,e.slice(s+1))):void 0}else return}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return;throw s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hs(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const s=e.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function nj(n,e){const s=hs(n,e);return s?s.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${s}`:s.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${s}`:s:""}function rj(n,e){return Array.isArray(e)?e.map(s=>zu(n,s)):[zu(n,e)]}function zu(n,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function k5(n,e){const s=zu(n,e);if(s.mimeType&&s.mimeType.startsWith("image/"))return s;throw new Error(`Unsupported mime type: ${s.mimeType}`)}function _5(n,e){const s=zu(n,e);if(s.mimeType&&s.mimeType.startsWith("audio/"))return s;throw new Error(`Unsupported mime type: ${s.mimeType}`)}function yb(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function ij(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(s=>yb(n,s)):[yb(n,e)]}function Wm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function bb(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function vb(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function wn(n,e){if(e==null)throw new Error("ContentUnion is required");return Wm(e)?e:{role:"user",parts:ij(n,e)}}function aj(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(s=>{const r=wn(n,s);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const s=wn(n,e);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(e)?e.map(s=>wn(n,s)):[wn(n,e)]}function ua(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(bb(e)||vb(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wn(n,e)]}const s=[],r=[],i=Wm(e[0]);for(const o of e){const c=Wm(o);if(c!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)s.push(o);else{if(bb(o)||vb(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(o)}}return i||s.push({role:"user",parts:ij(n,r)}),s}function oj(n,e){return e}function lj(n,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function ih(n,e){return e}function ah(n,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function C5(n,e,s,r=1){const i=!e.startsWith(`${s}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${s}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${s}/${e}`:e:i?`${s}/${e}`:e}function ha(n,e){if(typeof e!="string")throw new Error("name must be a string");return C5(n,e,"cachedContents")}function cj(n,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function fa(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function dj(n,e){if(typeof e!="string")throw new Error("fromName must be a string");return e.startsWith("files/")?e.split("files/")[1]:e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E5(n,e){const s={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&y(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&y(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&y(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&y(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&y(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&y(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&y(s,["inlineData"],h);const x=g(e,["text"]);return x!=null&&y(s,["text"],x),s}function wb(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>E5(n,c))),y(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&y(s,["role"],i),s}function T5(){return{}}function P5(n,e){const s={},r=g(e,["mode"]);r!=null&&y(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(s,["dynamicThreshold"],i),s}function A5(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(s,["dynamicRetrievalConfig"],P5(n,r)),s}function I5(n,e){const s={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&y(s,["googleSearch"],T5());const i=g(e,["googleSearchRetrieval"]);i!=null&&y(s,["googleSearchRetrieval"],A5(n,i));const o=g(e,["codeExecution"]);o!=null&&y(s,["codeExecution"],o);const c=g(e,["functionDeclarations"]);return c!=null&&y(s,["functionDeclarations"],c),s}function R5(n,e){const s={},r=g(e,["mode"]);r!=null&&y(s,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&y(s,["allowedFunctionNames"],i),s}function D5(n,e){const s={},r=g(e,["functionCallingConfig"]);return r!=null&&y(s,["functionCallingConfig"],R5(n,r)),s}function M5(n,e,s){const r={},i=g(e,["ttl"]);s!==void 0&&i!=null&&y(s,["ttl"],i);const o=g(e,["expireTime"]);s!==void 0&&o!=null&&y(s,["expireTime"],o);const c=g(e,["displayName"]);s!==void 0&&c!=null&&y(s,["displayName"],c);const u=g(e,["contents"]);if(s!==void 0&&u!=null){let v=ua(n,u);Array.isArray(v)&&(v=v.map(N=>wb(n,N))),y(s,["contents"],v)}const f=g(e,["systemInstruction"]);s!==void 0&&f!=null&&y(s,["systemInstruction"],wb(n,wn(n,f)));const h=g(e,["tools"]);if(s!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(N=>I5(n,N))),y(s,["tools"],v)}const x=g(e,["toolConfig"]);return s!==void 0&&x!=null&&y(s,["toolConfig"],D5(n,x)),r}function O5(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["model"],nj(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],M5(n,i,s)),s}function L5(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["_url","name"],ha(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function z5(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["_url","name"],ha(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function U5(n,e,s){const r={},i=g(e,["ttl"]);s!==void 0&&i!=null&&y(s,["ttl"],i);const o=g(e,["expireTime"]);return s!==void 0&&o!=null&&y(s,["expireTime"],o),r}function F5(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["_url","name"],ha(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],U5(n,i,s)),s}function $5(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&y(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);return s!==void 0&&o!=null&&y(s,["_query","pageToken"],o),r}function V5(n,e){const s={},r=g(e,["config"]);return r!=null&&y(s,["config"],$5(n,r,s)),s}function B5(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&y(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&y(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&y(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&y(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&y(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&y(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&y(s,["functionResponse"],h);const x=g(e,["inlineData"]);x!=null&&y(s,["inlineData"],x);const v=g(e,["text"]);return v!=null&&y(s,["text"],v),s}function Nb(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>B5(n,c))),y(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&y(s,["role"],i),s}function q5(){return{}}function W5(n,e){const s={},r=g(e,["mode"]);r!=null&&y(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(s,["dynamicThreshold"],i),s}function H5(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(s,["dynamicRetrievalConfig"],W5(n,r)),s}function G5(n,e){const s={},r=g(e,["retrieval"]);r!=null&&y(s,["retrieval"],r),g(e,["googleSearch"])!=null&&y(s,["googleSearch"],q5());const o=g(e,["googleSearchRetrieval"]);o!=null&&y(s,["googleSearchRetrieval"],H5(n,o));const c=g(e,["codeExecution"]);c!=null&&y(s,["codeExecution"],c);const u=g(e,["functionDeclarations"]);return u!=null&&y(s,["functionDeclarations"],u),s}function K5(n,e){const s={},r=g(e,["mode"]);r!=null&&y(s,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&y(s,["allowedFunctionNames"],i),s}function J5(n,e){const s={},r=g(e,["functionCallingConfig"]);return r!=null&&y(s,["functionCallingConfig"],K5(n,r)),s}function Y5(n,e,s){const r={},i=g(e,["ttl"]);s!==void 0&&i!=null&&y(s,["ttl"],i);const o=g(e,["expireTime"]);s!==void 0&&o!=null&&y(s,["expireTime"],o);const c=g(e,["displayName"]);s!==void 0&&c!=null&&y(s,["displayName"],c);const u=g(e,["contents"]);if(s!==void 0&&u!=null){let v=ua(n,u);Array.isArray(v)&&(v=v.map(N=>Nb(n,N))),y(s,["contents"],v)}const f=g(e,["systemInstruction"]);s!==void 0&&f!=null&&y(s,["systemInstruction"],Nb(n,wn(n,f)));const h=g(e,["tools"]);if(s!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(N=>G5(n,N))),y(s,["tools"],v)}const x=g(e,["toolConfig"]);return s!==void 0&&x!=null&&y(s,["toolConfig"],J5(n,x)),r}function Z5(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["model"],nj(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],Y5(n,i,s)),s}function X5(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["_url","name"],ha(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function Q5(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["_url","name"],ha(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function e3(n,e,s){const r={},i=g(e,["ttl"]);s!==void 0&&i!=null&&y(s,["ttl"],i);const o=g(e,["expireTime"]);return s!==void 0&&o!=null&&y(s,["expireTime"],o),r}function t3(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["_url","name"],ha(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],e3(n,i,s)),s}function s3(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&y(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);return s!==void 0&&o!=null&&y(s,["_query","pageToken"],o),r}function n3(n,e){const s={},r=g(e,["config"]);return r!=null&&y(s,["config"],s3(n,r,s)),s}function gu(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["displayName"]);i!=null&&y(s,["displayName"],i);const o=g(e,["model"]);o!=null&&y(s,["model"],o);const c=g(e,["createTime"]);c!=null&&y(s,["createTime"],c);const u=g(e,["updateTime"]);u!=null&&y(s,["updateTime"],u);const f=g(e,["expireTime"]);f!=null&&y(s,["expireTime"],f);const h=g(e,["usageMetadata"]);return h!=null&&y(s,["usageMetadata"],h),s}function r3(){return{}}function i3(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&y(s,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>gu(n,c))),y(s,["cachedContents"],o)}return s}function xu(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["displayName"]);i!=null&&y(s,["displayName"],i);const o=g(e,["model"]);o!=null&&y(s,["model"],o);const c=g(e,["createTime"]);c!=null&&y(s,["createTime"],c);const u=g(e,["updateTime"]);u!=null&&y(s,["updateTime"],u);const f=g(e,["expireTime"]);f!=null&&y(s,["expireTime"],f);const h=g(e,["usageMetadata"]);return h!=null&&y(s,["usageMetadata"],h),s}function a3(){return{}}function o3(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&y(s,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>xu(n,c))),y(s,["cachedContents"],o)}return s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Rc;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Rc||(Rc={}));class $p{constructor(e,s,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(e,r,i)}init(e,s,r){var i,o;this.nameInternal=e,this.pageInternal=s[this.nameInternal]||[],this.idxInternal=0;let c={config:{}};r?typeof r=="object"?c=Object.assign({},r):c=r:c={config:{}},c.config&&(c.config.pageToken=s.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(o=(i=c.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jb;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(jb||(jb={}));var Sb;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Sb||(Sb={}));var kb;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(kb||(kb={}));var _b;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(_b||(_b={}));var Cb;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Cb||(Cb={}));var Eb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Eb||(Eb={}));var Tb;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(Tb||(Tb={}));var Pb;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Pb||(Pb={}));var Ab;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Ab||(Ab={}));var Ib;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ib||(Ib={}));var Rb;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Rb||(Rb={}));var Db;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Db||(Db={}));var Uu;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Uu||(Uu={}));var Mb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Mb||(Mb={}));var Hm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Hm||(Hm={}));var Ob;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ob||(Ob={}));var Lb;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Lb||(Lb={}));var zb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(zb||(zb={}));var Ub;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Ub||(Ub={}));var Fb;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Fb||(Fb={}));var $b;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})($b||($b={}));var Vb;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(Vb||(Vb={}));var Bb;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Bb||(Bb={}));var qb;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(qb||(qb={}));var Wb;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Wb||(Wb={}));var Hb;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Hb||(Hb={}));var Gb;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Gb||(Gb={}));var Kb;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Kb||(Kb={}));var Jb;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Jb||(Jb={}));var Yb;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Yb||(Yb={}));var Zb;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Zb||(Zb={}));var Xb;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Xb||(Xb={}));class ru{get text(){var e,s,r,i,o,c,u,f;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",x=!1;const v=[];for(const N of(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[T,_]of Object.entries(N))T!=="text"&&T!=="thought"&&(_!==null||_!==void 0)&&v.push(T);if(typeof N.text=="string"){if(typeof N.thought=="boolean"&&N.thought)continue;x=!0,h+=N.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?h:void 0}get data(){var e,s,r,i,o,c,u,f;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const x=[];for(const v of(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[N,T]of Object.entries(v))N!=="inlineData"&&(T!==null||T!==void 0)&&x.push(N);v.inlineData&&typeof v.inlineData.data=="string"&&(h+=atob(v.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,s,r,i,o,c,u,f;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,s,r,i,o,c,u,f,h;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((x==null?void 0:x.length)!==0)return(h=x==null?void 0:x[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,s,r,i,o,c,u,f,h;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((x==null?void 0:x.length)!==0)return(h=x==null?void 0:x[0])===null||h===void 0?void 0:h.output}}class Qb{}class ev{}class tv{}class sv{}class l3{}class nv{}class rv{}class iv{}class c3{}class Gm{constructor(e){const s={};for(const r of e.headers.entries())s[r[0]]=r[1];this.headers=s,this.responseInternal=e}json(){return this.responseInternal.json()}}class d3{}class u3{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h3 extends qc{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new $p(Rc.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(s),s)}async create(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=Z5(this.apiClient,e);return u=yt("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>xu(this.apiClient,x))}else{const h=O5(this.apiClient,e);return u=yt("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>gu(this.apiClient,x))}}async get(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=X5(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>xu(this.apiClient,x))}else{const h=L5(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>gu(this.apiClient,x))}}async delete(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=Q5(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(()=>{const x=a3(),v=new rv;return Object.assign(v,x),v})}else{const h=z5(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(()=>{const x=r3(),v=new rv;return Object.assign(v,x),v})}}async update(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=t3(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>xu(this.apiClient,x))}else{const h=F5(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>gu(this.apiClient,x))}}async listInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=n3(this.apiClient,e);return u=yt("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>{const v=o3(this.apiClient,x),N=new iv;return Object.assign(N,v),N})}else{const h=V5(this.apiClient,e);return u=yt("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>{const v=i3(this.apiClient,x),N=new iv;return Object.assign(N,v),N})}}}function av(n){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&n[e],r=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zs(n){return this instanceof Zs?(this.v=n,this):new Zs(n)}function Fu(n,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=s.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(T){return function(_){return Promise.resolve(_).then(T,v)}}function u(T,_){r[T]&&(i[T]=function(C){return new Promise(function(R,z){o.push([T,C,R,z])>1||f(T,C)})},_&&(i[T]=_(i[T])))}function f(T,_){try{h(r[T](_))}catch(C){N(o[0][3],C)}}function h(T){T.value instanceof Zs?Promise.resolve(T.value.v).then(x,v):N(o[0][2],T)}function x(T){f("next",T)}function v(T){f("throw",T)}function N(T,_){T(_),o.shift(),o.length&&f(o[0][0],o[0][1])}}function Km(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],s;return e?e.call(n):(n=typeof av=="function"?av(n):n[Symbol.iterator](),s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s);function r(o){s[o]=n[o]&&function(c){return new Promise(function(u,f){c=n[o](c),i(u,f,c.done,c.value)})}}function i(o,c,u,f){Promise.resolve(f).then(function(h){o({value:h,done:u})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f3(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const s=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return s===void 0?!1:uj(s)}function uj(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function m3(n){if(n.length!==0){if(n[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function p3(n){if(n===void 0||n.length===0)return[];const e=[],s=n.length;let r=0,i=n[0];for(;r<s;)if(n[r].role==="user")i=n[r],r++;else{const o=[];let c=!0;for(;r<s&&n[r].role==="model";)o.push(n[r]),c&&!uj(n[r])&&(c=!1),r++;c&&(e.push(i),e.push(...o))}return e}class g3{constructor(e,s){this.modelsModule=e,this.apiClient=s}create(e){return new x3(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class x3{constructor(e,s,r,i={},o=[]){this.apiClient=e,this.modelsModule=s,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),m3(o)}async sendMessage(e){var s;await this.sendPromise;const r=wn(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(s=e.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var o,c;const f=(c=(o=(await i).candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content,h=f?[f]:[];this.recordHistory(r,h)})(),await this.sendPromise,i}async sendMessageStream(e){var s;await this.sendPromise;const r=wn(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(s=e.config)!==null&&s!==void 0?s:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){return e?p3(this.history):this.history}processStreamResponse(e,s){var r,i;return Fu(this,arguments,function*(){var c,u,f,h;const x=[];try{for(var v=!0,N=Km(e),T;T=yield Zs(N.next()),c=T.done,!c;v=!0){h=T.value,v=!1;const _=h;if(f3(_)){const C=(i=(r=_.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;C!==void 0&&x.push(C)}yield yield Zs(_)}}catch(_){u={error:_}}finally{try{!v&&!c&&(f=N.return)&&(yield Zs(f.call(N)))}finally{if(u)throw u.error}}this.recordHistory(s,x)})}recordHistory(e,s){let r=[];s.length>0&&s.every(i=>i.role==="model")?r=s:r.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y3(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&y(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);return s!==void 0&&o!=null&&y(s,["_query","pageToken"],o),r}function b3(n,e){const s={},r=g(e,["config"]);return r!=null&&y(s,["config"],y3(n,r,s)),s}function v3(n,e){const s={},r=g(e,["details"]);r!=null&&y(s,["details"],r);const i=g(e,["message"]);i!=null&&y(s,["message"],i);const o=g(e,["code"]);return o!=null&&y(s,["code"],o),s}function w3(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["displayName"]);i!=null&&y(s,["displayName"],i);const o=g(e,["mimeType"]);o!=null&&y(s,["mimeType"],o);const c=g(e,["sizeBytes"]);c!=null&&y(s,["sizeBytes"],c);const u=g(e,["createTime"]);u!=null&&y(s,["createTime"],u);const f=g(e,["expirationTime"]);f!=null&&y(s,["expirationTime"],f);const h=g(e,["updateTime"]);h!=null&&y(s,["updateTime"],h);const x=g(e,["sha256Hash"]);x!=null&&y(s,["sha256Hash"],x);const v=g(e,["uri"]);v!=null&&y(s,["uri"],v);const N=g(e,["downloadUri"]);N!=null&&y(s,["downloadUri"],N);const T=g(e,["state"]);T!=null&&y(s,["state"],T);const _=g(e,["source"]);_!=null&&y(s,["source"],_);const C=g(e,["videoMetadata"]);C!=null&&y(s,["videoMetadata"],C);const R=g(e,["error"]);return R!=null&&y(s,["error"],v3(n,R)),s}function N3(n,e){const s={},r=g(e,["file"]);r!=null&&y(s,["file"],w3(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function j3(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["_url","file"],dj(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function S3(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["_url","file"],dj(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function k3(n,e){const s={},r=g(e,["details"]);r!=null&&y(s,["details"],r);const i=g(e,["message"]);i!=null&&y(s,["message"],i);const o=g(e,["code"]);return o!=null&&y(s,["code"],o),s}function Jm(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["displayName"]);i!=null&&y(s,["displayName"],i);const o=g(e,["mimeType"]);o!=null&&y(s,["mimeType"],o);const c=g(e,["sizeBytes"]);c!=null&&y(s,["sizeBytes"],c);const u=g(e,["createTime"]);u!=null&&y(s,["createTime"],u);const f=g(e,["expirationTime"]);f!=null&&y(s,["expirationTime"],f);const h=g(e,["updateTime"]);h!=null&&y(s,["updateTime"],h);const x=g(e,["sha256Hash"]);x!=null&&y(s,["sha256Hash"],x);const v=g(e,["uri"]);v!=null&&y(s,["uri"],v);const N=g(e,["downloadUri"]);N!=null&&y(s,["downloadUri"],N);const T=g(e,["state"]);T!=null&&y(s,["state"],T);const _=g(e,["source"]);_!=null&&y(s,["source"],_);const C=g(e,["videoMetadata"]);C!=null&&y(s,["videoMetadata"],C);const R=g(e,["error"]);return R!=null&&y(s,["error"],k3(n,R)),s}function _3(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&y(s,["nextPageToken"],r);const i=g(e,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Jm(n,c))),y(s,["files"],o)}return s}function C3(){return{}}function E3(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T3 extends qc{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new $p(Rc.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(s),s)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(s=>Jm(this.apiClient,s))}async listInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=b3(this.apiClient,e);return o=yt("files",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const h=_3(this.apiClient,f),x=new c3;return Object.assign(x,h),x})}}async createInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=N3(this.apiClient,e);return o=yt("upload/v1beta/files",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(()=>{const f=C3(),h=new d3;return Object.assign(h,f),h})}}async get(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=j3(this.apiClient,e);return o=yt("files/{file}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>Jm(this.apiClient,f))}}async delete(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=S3(this.apiClient,e);return o=yt("files/{file}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(()=>{const f=E3(),h=new u3;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P3(n,e){const s={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&y(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&y(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&y(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&y(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&y(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&y(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&y(s,["inlineData"],h);const x=g(e,["text"]);return x!=null&&y(s,["text"],x),s}function A3(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&y(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&y(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&y(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&y(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&y(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&y(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&y(s,["functionResponse"],h);const x=g(e,["inlineData"]);x!=null&&y(s,["inlineData"],x);const v=g(e,["text"]);return v!=null&&y(s,["text"],v),s}function I3(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>P3(n,c))),y(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&y(s,["role"],i),s}function R3(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>A3(n,c))),y(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&y(s,["role"],i),s}function D3(){return{}}function M3(){return{}}function O3(n,e){const s={},r=g(e,["mode"]);r!=null&&y(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(s,["dynamicThreshold"],i),s}function L3(n,e){const s={},r=g(e,["mode"]);r!=null&&y(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(s,["dynamicThreshold"],i),s}function z3(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(s,["dynamicRetrievalConfig"],O3(n,r)),s}function U3(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(s,["dynamicRetrievalConfig"],L3(n,r)),s}function F3(n,e){const s={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&y(s,["googleSearch"],D3());const i=g(e,["googleSearchRetrieval"]);i!=null&&y(s,["googleSearchRetrieval"],z3(n,i));const o=g(e,["codeExecution"]);o!=null&&y(s,["codeExecution"],o);const c=g(e,["functionDeclarations"]);return c!=null&&y(s,["functionDeclarations"],c),s}function $3(n,e){const s={},r=g(e,["retrieval"]);r!=null&&y(s,["retrieval"],r),g(e,["googleSearch"])!=null&&y(s,["googleSearch"],M3());const o=g(e,["googleSearchRetrieval"]);o!=null&&y(s,["googleSearchRetrieval"],U3(n,o));const c=g(e,["codeExecution"]);c!=null&&y(s,["codeExecution"],c);const u=g(e,["functionDeclarations"]);return u!=null&&y(s,["functionDeclarations"],u),s}function V3(n,e){const s={},r=g(e,["handle"]);if(r!=null&&y(s,["handle"],r),g(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return s}function B3(n,e){const s={},r=g(e,["handle"]);r!=null&&y(s,["handle"],r);const i=g(e,["transparent"]);return i!=null&&y(s,["transparent"],i),s}function q3(){return{}}function ov(){return{}}function W3(n,e){const s={},r=g(e,["disabled"]);r!=null&&y(s,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&y(s,["startOfSpeechSensitivity"],i);const o=g(e,["endOfSpeechSensitivity"]);o!=null&&y(s,["endOfSpeechSensitivity"],o);const c=g(e,["prefixPaddingMs"]);c!=null&&y(s,["prefixPaddingMs"],c);const u=g(e,["silenceDurationMs"]);return u!=null&&y(s,["silenceDurationMs"],u),s}function H3(n,e){const s={},r=g(e,["disabled"]);r!=null&&y(s,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&y(s,["startOfSpeechSensitivity"],i);const o=g(e,["endOfSpeechSensitivity"]);o!=null&&y(s,["endOfSpeechSensitivity"],o);const c=g(e,["prefixPaddingMs"]);c!=null&&y(s,["prefixPaddingMs"],c);const u=g(e,["silenceDurationMs"]);return u!=null&&y(s,["silenceDurationMs"],u),s}function G3(n,e){const s={},r=g(e,["automaticActivityDetection"]);r!=null&&y(s,["automaticActivityDetection"],W3(n,r));const i=g(e,["activityHandling"]);i!=null&&y(s,["activityHandling"],i);const o=g(e,["turnCoverage"]);return o!=null&&y(s,["turnCoverage"],o),s}function K3(n,e){const s={},r=g(e,["automaticActivityDetection"]);r!=null&&y(s,["automaticActivityDetection"],H3(n,r));const i=g(e,["activityHandling"]);i!=null&&y(s,["activityHandling"],i);const o=g(e,["turnCoverage"]);return o!=null&&y(s,["turnCoverage"],o),s}function J3(n,e){const s={},r=g(e,["targetTokens"]);return r!=null&&y(s,["targetTokens"],r),s}function Y3(n,e){const s={},r=g(e,["targetTokens"]);return r!=null&&y(s,["targetTokens"],r),s}function Z3(n,e){const s={},r=g(e,["triggerTokens"]);r!=null&&y(s,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&y(s,["slidingWindow"],J3(n,i)),s}function X3(n,e){const s={},r=g(e,["triggerTokens"]);r!=null&&y(s,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&y(s,["slidingWindow"],Y3(n,i)),s}function Q3(n,e,s){const r={},i=g(e,["generationConfig"]);s!==void 0&&i!=null&&y(s,["setup","generationConfig"],i);const o=g(e,["responseModalities"]);s!==void 0&&o!=null&&y(s,["setup","generationConfig","responseModalities"],o);const c=g(e,["temperature"]);s!==void 0&&c!=null&&y(s,["setup","generationConfig","temperature"],c);const u=g(e,["topP"]);s!==void 0&&u!=null&&y(s,["setup","generationConfig","topP"],u);const f=g(e,["topK"]);s!==void 0&&f!=null&&y(s,["setup","generationConfig","topK"],f);const h=g(e,["maxOutputTokens"]);s!==void 0&&h!=null&&y(s,["setup","generationConfig","maxOutputTokens"],h);const x=g(e,["mediaResolution"]);s!==void 0&&x!=null&&y(s,["setup","generationConfig","mediaResolution"],x);const v=g(e,["seed"]);s!==void 0&&v!=null&&y(s,["setup","generationConfig","seed"],v);const N=g(e,["speechConfig"]);s!==void 0&&N!=null&&y(s,["setup","generationConfig","speechConfig"],N);const T=g(e,["systemInstruction"]);s!==void 0&&T!=null&&y(s,["setup","systemInstruction"],I3(n,wn(n,T)));const _=g(e,["tools"]);if(s!==void 0&&_!=null){let U=ah(n,_);Array.isArray(U)&&(U=U.map(Z=>F3(n,ih(n,Z)))),y(s,["setup","tools"],U)}const C=g(e,["sessionResumption"]);if(s!==void 0&&C!=null&&y(s,["setup","sessionResumption"],V3(n,C)),g(e,["inputAudioTranscription"])!==void 0)throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");const R=g(e,["outputAudioTranscription"]);s!==void 0&&R!=null&&y(s,["setup","outputAudioTranscription"],q3());const z=g(e,["realtimeInputConfig"]);s!==void 0&&z!=null&&y(s,["setup","realtimeInputConfig"],G3(n,z));const $=g(e,["contextWindowCompression"]);return s!==void 0&&$!=null&&y(s,["setup","contextWindowCompression"],Z3(n,$)),r}function eD(n,e,s){const r={},i=g(e,["generationConfig"]);s!==void 0&&i!=null&&y(s,["setup","generationConfig"],i);const o=g(e,["responseModalities"]);s!==void 0&&o!=null&&y(s,["setup","generationConfig","responseModalities"],o);const c=g(e,["temperature"]);s!==void 0&&c!=null&&y(s,["setup","generationConfig","temperature"],c);const u=g(e,["topP"]);s!==void 0&&u!=null&&y(s,["setup","generationConfig","topP"],u);const f=g(e,["topK"]);s!==void 0&&f!=null&&y(s,["setup","generationConfig","topK"],f);const h=g(e,["maxOutputTokens"]);s!==void 0&&h!=null&&y(s,["setup","generationConfig","maxOutputTokens"],h);const x=g(e,["mediaResolution"]);s!==void 0&&x!=null&&y(s,["setup","generationConfig","mediaResolution"],x);const v=g(e,["seed"]);s!==void 0&&v!=null&&y(s,["setup","generationConfig","seed"],v);const N=g(e,["speechConfig"]);s!==void 0&&N!=null&&y(s,["setup","generationConfig","speechConfig"],N);const T=g(e,["systemInstruction"]);s!==void 0&&T!=null&&y(s,["setup","systemInstruction"],R3(n,wn(n,T)));const _=g(e,["tools"]);if(s!==void 0&&_!=null){let Z=ah(n,_);Array.isArray(Z)&&(Z=Z.map(q=>$3(n,ih(n,q)))),y(s,["setup","tools"],Z)}const C=g(e,["sessionResumption"]);s!==void 0&&C!=null&&y(s,["setup","sessionResumption"],B3(n,C));const R=g(e,["inputAudioTranscription"]);s!==void 0&&R!=null&&y(s,["setup","inputAudioTranscription"],ov());const z=g(e,["outputAudioTranscription"]);s!==void 0&&z!=null&&y(s,["setup","outputAudioTranscription"],ov());const $=g(e,["realtimeInputConfig"]);s!==void 0&&$!=null&&y(s,["setup","realtimeInputConfig"],K3(n,$));const U=g(e,["contextWindowCompression"]);return s!==void 0&&U!=null&&y(s,["setup","contextWindowCompression"],X3(n,U)),r}function tD(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["setup","model"],hs(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],Q3(n,i,s)),s}function sD(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["setup","model"],hs(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],eD(n,i,s)),s}function nD(){return{}}function rD(){return{}}function iD(){return{}}function aD(){return{}}function oD(n,e){const s={},r=g(e,["media"]);r!=null&&y(s,["mediaChunks"],rj(n,r));const i=g(e,["audio"]);i!=null&&y(s,["audio"],_5(n,i));const o=g(e,["audioStreamEnd"]);o!=null&&y(s,["audioStreamEnd"],o);const c=g(e,["video"]);c!=null&&y(s,["video"],k5(n,c));const u=g(e,["text"]);return u!=null&&y(s,["text"],u),g(e,["activityStart"])!=null&&y(s,["activityStart"],nD()),g(e,["activityEnd"])!=null&&y(s,["activityEnd"],iD()),s}function lD(n,e){const s={},r=g(e,["media"]);if(r!=null&&y(s,["mediaChunks"],rj(n,r)),g(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=g(e,["audioStreamEnd"]);if(i!=null&&y(s,["audioStreamEnd"],i),g(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(g(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return g(e,["activityStart"])!=null&&y(s,["activityStart"],rD()),g(e,["activityEnd"])!=null&&y(s,["activityEnd"],aD()),s}function cD(){return{}}function dD(){return{}}function uD(n,e){const s={},r=g(e,["thought"]);r!=null&&y(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&y(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&y(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&y(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&y(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&y(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&y(s,["inlineData"],h);const x=g(e,["text"]);return x!=null&&y(s,["text"],x),s}function hD(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&y(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&y(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&y(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&y(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&y(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&y(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&y(s,["functionResponse"],h);const x=g(e,["inlineData"]);x!=null&&y(s,["inlineData"],x);const v=g(e,["text"]);return v!=null&&y(s,["text"],v),s}function fD(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>uD(n,c))),y(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&y(s,["role"],i),s}function mD(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>hD(n,c))),y(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&y(s,["role"],i),s}function lv(n,e){const s={},r=g(e,["text"]);r!=null&&y(s,["text"],r);const i=g(e,["finished"]);return i!=null&&y(s,["finished"],i),s}function cv(n,e){const s={},r=g(e,["text"]);r!=null&&y(s,["text"],r);const i=g(e,["finished"]);return i!=null&&y(s,["finished"],i),s}function pD(n,e){const s={},r=g(e,["modelTurn"]);r!=null&&y(s,["modelTurn"],fD(n,r));const i=g(e,["turnComplete"]);i!=null&&y(s,["turnComplete"],i);const o=g(e,["interrupted"]);o!=null&&y(s,["interrupted"],o);const c=g(e,["groundingMetadata"]);c!=null&&y(s,["groundingMetadata"],c);const u=g(e,["generationComplete"]);u!=null&&y(s,["generationComplete"],u);const f=g(e,["inputTranscription"]);f!=null&&y(s,["inputTranscription"],lv(n,f));const h=g(e,["outputTranscription"]);return h!=null&&y(s,["outputTranscription"],lv(n,h)),s}function gD(n,e){const s={},r=g(e,["modelTurn"]);r!=null&&y(s,["modelTurn"],mD(n,r));const i=g(e,["turnComplete"]);i!=null&&y(s,["turnComplete"],i);const o=g(e,["interrupted"]);o!=null&&y(s,["interrupted"],o);const c=g(e,["groundingMetadata"]);c!=null&&y(s,["groundingMetadata"],c);const u=g(e,["generationComplete"]);u!=null&&y(s,["generationComplete"],u);const f=g(e,["inputTranscription"]);f!=null&&y(s,["inputTranscription"],cv(n,f));const h=g(e,["outputTranscription"]);return h!=null&&y(s,["outputTranscription"],cv(n,h)),s}function xD(n,e){const s={},r=g(e,["id"]);r!=null&&y(s,["id"],r);const i=g(e,["args"]);i!=null&&y(s,["args"],i);const o=g(e,["name"]);return o!=null&&y(s,["name"],o),s}function yD(n,e){const s={},r=g(e,["args"]);r!=null&&y(s,["args"],r);const i=g(e,["name"]);return i!=null&&y(s,["name"],i),s}function bD(n,e){const s={},r=g(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>xD(n,o))),y(s,["functionCalls"],i)}return s}function vD(n,e){const s={},r=g(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>yD(n,o))),y(s,["functionCalls"],i)}return s}function wD(n,e){const s={},r=g(e,["ids"]);return r!=null&&y(s,["ids"],r),s}function ND(n,e){const s={},r=g(e,["ids"]);return r!=null&&y(s,["ids"],r),s}function iu(n,e){const s={},r=g(e,["modality"]);r!=null&&y(s,["modality"],r);const i=g(e,["tokenCount"]);return i!=null&&y(s,["tokenCount"],i),s}function au(n,e){const s={},r=g(e,["modality"]);r!=null&&y(s,["modality"],r);const i=g(e,["tokenCount"]);return i!=null&&y(s,["tokenCount"],i),s}function jD(n,e){const s={},r=g(e,["promptTokenCount"]);r!=null&&y(s,["promptTokenCount"],r);const i=g(e,["cachedContentTokenCount"]);i!=null&&y(s,["cachedContentTokenCount"],i);const o=g(e,["responseTokenCount"]);o!=null&&y(s,["responseTokenCount"],o);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&y(s,["toolUsePromptTokenCount"],c);const u=g(e,["thoughtsTokenCount"]);u!=null&&y(s,["thoughtsTokenCount"],u);const f=g(e,["totalTokenCount"]);f!=null&&y(s,["totalTokenCount"],f);const h=g(e,["promptTokensDetails"]);if(h!=null){let T=h;Array.isArray(T)&&(T=T.map(_=>iu(n,_))),y(s,["promptTokensDetails"],T)}const x=g(e,["cacheTokensDetails"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(_=>iu(n,_))),y(s,["cacheTokensDetails"],T)}const v=g(e,["responseTokensDetails"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(_=>iu(n,_))),y(s,["responseTokensDetails"],T)}const N=g(e,["toolUsePromptTokensDetails"]);if(N!=null){let T=N;Array.isArray(T)&&(T=T.map(_=>iu(n,_))),y(s,["toolUsePromptTokensDetails"],T)}return s}function SD(n,e){const s={},r=g(e,["promptTokenCount"]);r!=null&&y(s,["promptTokenCount"],r);const i=g(e,["cachedContentTokenCount"]);i!=null&&y(s,["cachedContentTokenCount"],i);const o=g(e,["candidatesTokenCount"]);o!=null&&y(s,["responseTokenCount"],o);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&y(s,["toolUsePromptTokenCount"],c);const u=g(e,["thoughtsTokenCount"]);u!=null&&y(s,["thoughtsTokenCount"],u);const f=g(e,["totalTokenCount"]);f!=null&&y(s,["totalTokenCount"],f);const h=g(e,["promptTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(C=>au(n,C))),y(s,["promptTokensDetails"],_)}const x=g(e,["cacheTokensDetails"]);if(x!=null){let _=x;Array.isArray(_)&&(_=_.map(C=>au(n,C))),y(s,["cacheTokensDetails"],_)}const v=g(e,["candidatesTokensDetails"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(C=>au(n,C))),y(s,["responseTokensDetails"],_)}const N=g(e,["toolUsePromptTokensDetails"]);if(N!=null){let _=N;Array.isArray(_)&&(_=_.map(C=>au(n,C))),y(s,["toolUsePromptTokensDetails"],_)}const T=g(e,["trafficType"]);return T!=null&&y(s,["trafficType"],T),s}function kD(n,e){const s={},r=g(e,["timeLeft"]);return r!=null&&y(s,["timeLeft"],r),s}function _D(n,e){const s={},r=g(e,["timeLeft"]);return r!=null&&y(s,["timeLeft"],r),s}function CD(n,e){const s={},r=g(e,["newHandle"]);r!=null&&y(s,["newHandle"],r);const i=g(e,["resumable"]);i!=null&&y(s,["resumable"],i);const o=g(e,["lastConsumedClientMessageIndex"]);return o!=null&&y(s,["lastConsumedClientMessageIndex"],o),s}function ED(n,e){const s={},r=g(e,["newHandle"]);r!=null&&y(s,["newHandle"],r);const i=g(e,["resumable"]);i!=null&&y(s,["resumable"],i);const o=g(e,["lastConsumedClientMessageIndex"]);return o!=null&&y(s,["lastConsumedClientMessageIndex"],o),s}function TD(n,e){const s={};g(e,["setupComplete"])!=null&&y(s,["setupComplete"],cD());const i=g(e,["serverContent"]);i!=null&&y(s,["serverContent"],pD(n,i));const o=g(e,["toolCall"]);o!=null&&y(s,["toolCall"],bD(n,o));const c=g(e,["toolCallCancellation"]);c!=null&&y(s,["toolCallCancellation"],wD(n,c));const u=g(e,["usageMetadata"]);u!=null&&y(s,["usageMetadata"],jD(n,u));const f=g(e,["goAway"]);f!=null&&y(s,["goAway"],kD(n,f));const h=g(e,["sessionResumptionUpdate"]);return h!=null&&y(s,["sessionResumptionUpdate"],CD(n,h)),s}function PD(n,e){const s={};g(e,["setupComplete"])!=null&&y(s,["setupComplete"],dD());const i=g(e,["serverContent"]);i!=null&&y(s,["serverContent"],gD(n,i));const o=g(e,["toolCall"]);o!=null&&y(s,["toolCall"],vD(n,o));const c=g(e,["toolCallCancellation"]);c!=null&&y(s,["toolCallCancellation"],ND(n,c));const u=g(e,["usageMetadata"]);u!=null&&y(s,["usageMetadata"],SD(n,u));const f=g(e,["goAway"]);f!=null&&y(s,["goAway"],_D(n,f));const h=g(e,["sessionResumptionUpdate"]);return h!=null&&y(s,["sessionResumptionUpdate"],ED(n,h)),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AD(n,e){const s={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&y(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&y(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&y(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&y(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&y(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&y(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&y(s,["inlineData"],h);const x=g(e,["text"]);return x!=null&&y(s,["text"],x),s}function oh(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>AD(n,c))),y(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&y(s,["role"],i),s}function ID(n,e){const s={};if(g(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=g(e,["category"]);r!=null&&y(s,["category"],r);const i=g(e,["threshold"]);return i!=null&&y(s,["threshold"],i),s}function RD(){return{}}function DD(n,e){const s={},r=g(e,["mode"]);r!=null&&y(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(s,["dynamicThreshold"],i),s}function MD(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(s,["dynamicRetrievalConfig"],DD(n,r)),s}function OD(n,e){const s={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&y(s,["googleSearch"],RD());const i=g(e,["googleSearchRetrieval"]);i!=null&&y(s,["googleSearchRetrieval"],MD(n,i));const o=g(e,["codeExecution"]);o!=null&&y(s,["codeExecution"],o);const c=g(e,["functionDeclarations"]);return c!=null&&y(s,["functionDeclarations"],c),s}function LD(n,e){const s={},r=g(e,["mode"]);r!=null&&y(s,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&y(s,["allowedFunctionNames"],i),s}function zD(n,e){const s={},r=g(e,["functionCallingConfig"]);return r!=null&&y(s,["functionCallingConfig"],LD(n,r)),s}function UD(n,e){const s={},r=g(e,["voiceName"]);return r!=null&&y(s,["voiceName"],r),s}function FD(n,e){const s={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&y(s,["prebuiltVoiceConfig"],UD(n,r)),s}function $D(n,e){const s={},r=g(e,["voiceConfig"]);r!=null&&y(s,["voiceConfig"],FD(n,r));const i=g(e,["languageCode"]);return i!=null&&y(s,["languageCode"],i),s}function VD(n,e){const s={},r=g(e,["includeThoughts"]);r!=null&&y(s,["includeThoughts"],r);const i=g(e,["thinkingBudget"]);return i!=null&&y(s,["thinkingBudget"],i),s}function BD(n,e,s){const r={},i=g(e,["systemInstruction"]);s!==void 0&&i!=null&&y(s,["systemInstruction"],oh(n,wn(n,i)));const o=g(e,["temperature"]);o!=null&&y(r,["temperature"],o);const c=g(e,["topP"]);c!=null&&y(r,["topP"],c);const u=g(e,["topK"]);u!=null&&y(r,["topK"],u);const f=g(e,["candidateCount"]);f!=null&&y(r,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&y(r,["maxOutputTokens"],h);const x=g(e,["stopSequences"]);x!=null&&y(r,["stopSequences"],x);const v=g(e,["responseLogprobs"]);v!=null&&y(r,["responseLogprobs"],v);const N=g(e,["logprobs"]);N!=null&&y(r,["logprobs"],N);const T=g(e,["presencePenalty"]);T!=null&&y(r,["presencePenalty"],T);const _=g(e,["frequencyPenalty"]);_!=null&&y(r,["frequencyPenalty"],_);const C=g(e,["seed"]);C!=null&&y(r,["seed"],C);const R=g(e,["responseMimeType"]);R!=null&&y(r,["responseMimeType"],R);const z=g(e,["responseSchema"]);if(z!=null&&y(r,["responseSchema"],oj(n,z)),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=g(e,["safetySettings"]);if(s!==void 0&&$!=null){let L=$;Array.isArray(L)&&(L=L.map(O=>ID(n,O))),y(s,["safetySettings"],L)}const U=g(e,["tools"]);if(s!==void 0&&U!=null){let L=ah(n,U);Array.isArray(L)&&(L=L.map(O=>OD(n,ih(n,O)))),y(s,["tools"],L)}const Z=g(e,["toolConfig"]);if(s!==void 0&&Z!=null&&y(s,["toolConfig"],zD(n,Z)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=g(e,["cachedContent"]);s!==void 0&&q!=null&&y(s,["cachedContent"],ha(n,q));const V=g(e,["responseModalities"]);V!=null&&y(r,["responseModalities"],V);const I=g(e,["mediaResolution"]);I!=null&&y(r,["mediaResolution"],I);const k=g(e,["speechConfig"]);if(k!=null&&y(r,["speechConfig"],$D(n,lj(n,k))),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const E=g(e,["thinkingConfig"]);return E!=null&&y(r,["thinkingConfig"],VD(n,E)),r}function dv(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);if(i!=null){let c=ua(n,i);Array.isArray(c)&&(c=c.map(u=>oh(n,u))),y(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&y(s,["generationConfig"],BD(n,o,s)),s}function qD(n,e,s){const r={},i=g(e,["taskType"]);s!==void 0&&i!=null&&y(s,["requests[]","taskType"],i);const o=g(e,["title"]);s!==void 0&&o!=null&&y(s,["requests[]","title"],o);const c=g(e,["outputDimensionality"]);if(s!==void 0&&c!=null&&y(s,["requests[]","outputDimensionality"],c),g(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function WD(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);i!=null&&y(s,["requests[]","content"],aj(n,i));const o=g(e,["config"]);o!=null&&y(s,["config"],qD(n,o,s));const c=g(e,["model"]);return c!==void 0&&y(s,["requests[]","model"],hs(n,c)),s}function HD(n,e,s){const r={};if(g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=g(e,["numberOfImages"]);s!==void 0&&i!=null&&y(s,["parameters","sampleCount"],i);const o=g(e,["aspectRatio"]);s!==void 0&&o!=null&&y(s,["parameters","aspectRatio"],o);const c=g(e,["guidanceScale"]);if(s!==void 0&&c!=null&&y(s,["parameters","guidanceScale"],c),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=g(e,["safetyFilterLevel"]);s!==void 0&&u!=null&&y(s,["parameters","safetySetting"],u);const f=g(e,["personGeneration"]);s!==void 0&&f!=null&&y(s,["parameters","personGeneration"],f);const h=g(e,["includeSafetyAttributes"]);s!==void 0&&h!=null&&y(s,["parameters","includeSafetyAttributes"],h);const x=g(e,["includeRaiReason"]);s!==void 0&&x!=null&&y(s,["parameters","includeRaiReason"],x);const v=g(e,["language"]);s!==void 0&&v!=null&&y(s,["parameters","language"],v);const N=g(e,["outputMimeType"]);s!==void 0&&N!=null&&y(s,["parameters","outputOptions","mimeType"],N);const T=g(e,["outputCompressionQuality"]);if(s!==void 0&&T!=null&&y(s,["parameters","outputOptions","compressionQuality"],T),g(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function GD(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","model"],hs(n,r));const i=g(e,["prompt"]);i!=null&&y(s,["instances[0]","prompt"],i);const o=g(e,["config"]);return o!=null&&y(s,["config"],HD(n,o,s)),s}function KD(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","name"],hs(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function JD(n,e,s){const r={},i=g(e,["displayName"]);s!==void 0&&i!=null&&y(s,["displayName"],i);const o=g(e,["description"]);return s!==void 0&&o!=null&&y(s,["description"],o),r}function YD(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","name"],hs(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],JD(n,i,s)),s}function ZD(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","name"],hs(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function XD(n,e){const s={};if(g(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return s}function QD(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);if(i!=null){let c=ua(n,i);Array.isArray(c)&&(c=c.map(u=>oh(n,u))),y(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&y(s,["config"],XD(n,o)),s}function eM(n,e){const s={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(e,["imageBytes"]);r!=null&&y(s,["bytesBase64Encoded"],fa(n,r));const i=g(e,["mimeType"]);return i!=null&&y(s,["mimeType"],i),s}function tM(n,e,s){const r={},i=g(e,["numberOfVideos"]);if(s!==void 0&&i!=null&&y(s,["parameters","sampleCount"],i),g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=g(e,["durationSeconds"]);if(s!==void 0&&o!=null&&y(s,["parameters","durationSeconds"],o),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=g(e,["aspectRatio"]);if(s!==void 0&&c!=null&&y(s,["parameters","aspectRatio"],c),g(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=g(e,["personGeneration"]);if(s!==void 0&&u!=null&&y(s,["parameters","personGeneration"],u),g(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=g(e,["negativePrompt"]);if(s!==void 0&&f!=null&&y(s,["parameters","negativePrompt"],f),g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function sM(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","model"],hs(n,r));const i=g(e,["prompt"]);i!=null&&y(s,["instances[0]","prompt"],i);const o=g(e,["image"]);o!=null&&y(s,["instances[0]","image"],eM(n,o));const c=g(e,["config"]);return c!=null&&y(s,["config"],tM(n,c,s)),s}function nM(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&y(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&y(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&y(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&y(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&y(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&y(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&y(s,["functionResponse"],h);const x=g(e,["inlineData"]);x!=null&&y(s,["inlineData"],x);const v=g(e,["text"]);return v!=null&&y(s,["text"],v),s}function pl(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>nM(n,c))),y(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&y(s,["role"],i),s}function rM(n,e){const s={},r=g(e,["featureSelectionPreference"]);return r!=null&&y(s,["featureSelectionPreference"],r),s}function iM(n,e){const s={},r=g(e,["method"]);r!=null&&y(s,["method"],r);const i=g(e,["category"]);i!=null&&y(s,["category"],i);const o=g(e,["threshold"]);return o!=null&&y(s,["threshold"],o),s}function aM(){return{}}function oM(n,e){const s={},r=g(e,["mode"]);r!=null&&y(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&y(s,["dynamicThreshold"],i),s}function lM(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&y(s,["dynamicRetrievalConfig"],oM(n,r)),s}function hj(n,e){const s={},r=g(e,["retrieval"]);r!=null&&y(s,["retrieval"],r),g(e,["googleSearch"])!=null&&y(s,["googleSearch"],aM());const o=g(e,["googleSearchRetrieval"]);o!=null&&y(s,["googleSearchRetrieval"],lM(n,o));const c=g(e,["codeExecution"]);c!=null&&y(s,["codeExecution"],c);const u=g(e,["functionDeclarations"]);return u!=null&&y(s,["functionDeclarations"],u),s}function cM(n,e){const s={},r=g(e,["mode"]);r!=null&&y(s,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&y(s,["allowedFunctionNames"],i),s}function dM(n,e){const s={},r=g(e,["functionCallingConfig"]);return r!=null&&y(s,["functionCallingConfig"],cM(n,r)),s}function uM(n,e){const s={},r=g(e,["voiceName"]);return r!=null&&y(s,["voiceName"],r),s}function hM(n,e){const s={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&y(s,["prebuiltVoiceConfig"],uM(n,r)),s}function fM(n,e){const s={},r=g(e,["voiceConfig"]);r!=null&&y(s,["voiceConfig"],hM(n,r));const i=g(e,["languageCode"]);return i!=null&&y(s,["languageCode"],i),s}function mM(n,e){const s={},r=g(e,["includeThoughts"]);r!=null&&y(s,["includeThoughts"],r);const i=g(e,["thinkingBudget"]);return i!=null&&y(s,["thinkingBudget"],i),s}function pM(n,e,s){const r={},i=g(e,["systemInstruction"]);s!==void 0&&i!=null&&y(s,["systemInstruction"],pl(n,wn(n,i)));const o=g(e,["temperature"]);o!=null&&y(r,["temperature"],o);const c=g(e,["topP"]);c!=null&&y(r,["topP"],c);const u=g(e,["topK"]);u!=null&&y(r,["topK"],u);const f=g(e,["candidateCount"]);f!=null&&y(r,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&y(r,["maxOutputTokens"],h);const x=g(e,["stopSequences"]);x!=null&&y(r,["stopSequences"],x);const v=g(e,["responseLogprobs"]);v!=null&&y(r,["responseLogprobs"],v);const N=g(e,["logprobs"]);N!=null&&y(r,["logprobs"],N);const T=g(e,["presencePenalty"]);T!=null&&y(r,["presencePenalty"],T);const _=g(e,["frequencyPenalty"]);_!=null&&y(r,["frequencyPenalty"],_);const C=g(e,["seed"]);C!=null&&y(r,["seed"],C);const R=g(e,["responseMimeType"]);R!=null&&y(r,["responseMimeType"],R);const z=g(e,["responseSchema"]);z!=null&&y(r,["responseSchema"],oj(n,z));const $=g(e,["routingConfig"]);$!=null&&y(r,["routingConfig"],$);const U=g(e,["modelSelectionConfig"]);U!=null&&y(r,["modelConfig"],rM(n,U));const Z=g(e,["safetySettings"]);if(s!==void 0&&Z!=null){let ne=Z;Array.isArray(ne)&&(ne=ne.map(fe=>iM(n,fe))),y(s,["safetySettings"],ne)}const q=g(e,["tools"]);if(s!==void 0&&q!=null){let ne=ah(n,q);Array.isArray(ne)&&(ne=ne.map(fe=>hj(n,ih(n,fe)))),y(s,["tools"],ne)}const V=g(e,["toolConfig"]);s!==void 0&&V!=null&&y(s,["toolConfig"],dM(n,V));const I=g(e,["labels"]);s!==void 0&&I!=null&&y(s,["labels"],I);const k=g(e,["cachedContent"]);s!==void 0&&k!=null&&y(s,["cachedContent"],ha(n,k));const E=g(e,["responseModalities"]);E!=null&&y(r,["responseModalities"],E);const L=g(e,["mediaResolution"]);L!=null&&y(r,["mediaResolution"],L);const O=g(e,["speechConfig"]);O!=null&&y(r,["speechConfig"],fM(n,lj(n,O)));const B=g(e,["audioTimestamp"]);B!=null&&y(r,["audioTimestamp"],B);const A=g(e,["thinkingConfig"]);return A!=null&&y(r,["thinkingConfig"],mM(n,A)),r}function uv(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);if(i!=null){let c=ua(n,i);Array.isArray(c)&&(c=c.map(u=>pl(n,u))),y(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&y(s,["generationConfig"],pM(n,o,s)),s}function gM(n,e,s){const r={},i=g(e,["taskType"]);s!==void 0&&i!=null&&y(s,["instances[]","task_type"],i);const o=g(e,["title"]);s!==void 0&&o!=null&&y(s,["instances[]","title"],o);const c=g(e,["outputDimensionality"]);s!==void 0&&c!=null&&y(s,["parameters","outputDimensionality"],c);const u=g(e,["mimeType"]);s!==void 0&&u!=null&&y(s,["instances[]","mimeType"],u);const f=g(e,["autoTruncate"]);return s!==void 0&&f!=null&&y(s,["parameters","autoTruncate"],f),r}function xM(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);i!=null&&y(s,["instances[]","content"],aj(n,i));const o=g(e,["config"]);return o!=null&&y(s,["config"],gM(n,o,s)),s}function yM(n,e,s){const r={},i=g(e,["outputGcsUri"]);s!==void 0&&i!=null&&y(s,["parameters","storageUri"],i);const o=g(e,["negativePrompt"]);s!==void 0&&o!=null&&y(s,["parameters","negativePrompt"],o);const c=g(e,["numberOfImages"]);s!==void 0&&c!=null&&y(s,["parameters","sampleCount"],c);const u=g(e,["aspectRatio"]);s!==void 0&&u!=null&&y(s,["parameters","aspectRatio"],u);const f=g(e,["guidanceScale"]);s!==void 0&&f!=null&&y(s,["parameters","guidanceScale"],f);const h=g(e,["seed"]);s!==void 0&&h!=null&&y(s,["parameters","seed"],h);const x=g(e,["safetyFilterLevel"]);s!==void 0&&x!=null&&y(s,["parameters","safetySetting"],x);const v=g(e,["personGeneration"]);s!==void 0&&v!=null&&y(s,["parameters","personGeneration"],v);const N=g(e,["includeSafetyAttributes"]);s!==void 0&&N!=null&&y(s,["parameters","includeSafetyAttributes"],N);const T=g(e,["includeRaiReason"]);s!==void 0&&T!=null&&y(s,["parameters","includeRaiReason"],T);const _=g(e,["language"]);s!==void 0&&_!=null&&y(s,["parameters","language"],_);const C=g(e,["outputMimeType"]);s!==void 0&&C!=null&&y(s,["parameters","outputOptions","mimeType"],C);const R=g(e,["outputCompressionQuality"]);s!==void 0&&R!=null&&y(s,["parameters","outputOptions","compressionQuality"],R);const z=g(e,["addWatermark"]);s!==void 0&&z!=null&&y(s,["parameters","addWatermark"],z);const $=g(e,["enhancePrompt"]);return s!==void 0&&$!=null&&y(s,["parameters","enhancePrompt"],$),r}function bM(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","model"],hs(n,r));const i=g(e,["prompt"]);i!=null&&y(s,["instances[0]","prompt"],i);const o=g(e,["config"]);return o!=null&&y(s,["config"],yM(n,o,s)),s}function vM(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","name"],hs(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function wM(n,e,s){const r={},i=g(e,["displayName"]);s!==void 0&&i!=null&&y(s,["displayName"],i);const o=g(e,["description"]);return s!==void 0&&o!=null&&y(s,["description"],o),r}function NM(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","model"],hs(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],wM(n,i,s)),s}function jM(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","name"],hs(n,r));const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function SM(n,e,s){const r={},i=g(e,["systemInstruction"]);s!==void 0&&i!=null&&y(s,["systemInstruction"],pl(n,wn(n,i)));const o=g(e,["tools"]);if(s!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>hj(n,f))),y(s,["tools"],u)}const c=g(e,["generationConfig"]);return s!==void 0&&c!=null&&y(s,["generationConfig"],c),r}function kM(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);if(i!=null){let c=ua(n,i);Array.isArray(c)&&(c=c.map(u=>pl(n,u))),y(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&y(s,["config"],SM(n,o,s)),s}function _M(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","model"],hs(n,r));const i=g(e,["contents"]);if(i!=null){let c=ua(n,i);Array.isArray(c)&&(c=c.map(u=>pl(n,u))),y(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&y(s,["config"],o),s}function CM(n,e){const s={},r=g(e,["gcsUri"]);r!=null&&y(s,["gcsUri"],r);const i=g(e,["imageBytes"]);i!=null&&y(s,["bytesBase64Encoded"],fa(n,i));const o=g(e,["mimeType"]);return o!=null&&y(s,["mimeType"],o),s}function EM(n,e,s){const r={},i=g(e,["numberOfVideos"]);s!==void 0&&i!=null&&y(s,["parameters","sampleCount"],i);const o=g(e,["outputGcsUri"]);s!==void 0&&o!=null&&y(s,["parameters","storageUri"],o);const c=g(e,["fps"]);s!==void 0&&c!=null&&y(s,["parameters","fps"],c);const u=g(e,["durationSeconds"]);s!==void 0&&u!=null&&y(s,["parameters","durationSeconds"],u);const f=g(e,["seed"]);s!==void 0&&f!=null&&y(s,["parameters","seed"],f);const h=g(e,["aspectRatio"]);s!==void 0&&h!=null&&y(s,["parameters","aspectRatio"],h);const x=g(e,["resolution"]);s!==void 0&&x!=null&&y(s,["parameters","resolution"],x);const v=g(e,["personGeneration"]);s!==void 0&&v!=null&&y(s,["parameters","personGeneration"],v);const N=g(e,["pubsubTopic"]);s!==void 0&&N!=null&&y(s,["parameters","pubsubTopic"],N);const T=g(e,["negativePrompt"]);s!==void 0&&T!=null&&y(s,["parameters","negativePrompt"],T);const _=g(e,["enhancePrompt"]);return s!==void 0&&_!=null&&y(s,["parameters","enhancePrompt"],_),r}function TM(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["_url","model"],hs(n,r));const i=g(e,["prompt"]);i!=null&&y(s,["instances[0]","prompt"],i);const o=g(e,["image"]);o!=null&&y(s,["instances[0]","image"],CM(n,o));const c=g(e,["config"]);return c!=null&&y(s,["config"],EM(n,c,s)),s}function PM(n,e){const s={},r=g(e,["thought"]);r!=null&&y(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&y(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&y(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&y(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&y(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&y(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&y(s,["inlineData"],h);const x=g(e,["text"]);return x!=null&&y(s,["text"],x),s}function AM(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>PM(n,c))),y(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&y(s,["role"],i),s}function IM(n,e){const s={},r=g(e,["citationSources"]);return r!=null&&y(s,["citations"],r),s}function RM(n,e){const s={},r=g(e,["content"]);r!=null&&y(s,["content"],AM(n,r));const i=g(e,["citationMetadata"]);i!=null&&y(s,["citationMetadata"],IM(n,i));const o=g(e,["tokenCount"]);o!=null&&y(s,["tokenCount"],o);const c=g(e,["finishReason"]);c!=null&&y(s,["finishReason"],c);const u=g(e,["avgLogprobs"]);u!=null&&y(s,["avgLogprobs"],u);const f=g(e,["groundingMetadata"]);f!=null&&y(s,["groundingMetadata"],f);const h=g(e,["index"]);h!=null&&y(s,["index"],h);const x=g(e,["logprobsResult"]);x!=null&&y(s,["logprobsResult"],x);const v=g(e,["safetyRatings"]);return v!=null&&y(s,["safetyRatings"],v),s}function hv(n,e){const s={},r=g(e,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>RM(n,f))),y(s,["candidates"],u)}const i=g(e,["modelVersion"]);i!=null&&y(s,["modelVersion"],i);const o=g(e,["promptFeedback"]);o!=null&&y(s,["promptFeedback"],o);const c=g(e,["usageMetadata"]);return c!=null&&y(s,["usageMetadata"],c),s}function DM(n,e){const s={},r=g(e,["values"]);return r!=null&&y(s,["values"],r),s}function MM(){return{}}function OM(n,e){const s={},r=g(e,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>DM(n,c))),y(s,["embeddings"],o)}return g(e,["metadata"])!=null&&y(s,["metadata"],MM()),s}function LM(n,e){const s={},r=g(e,["bytesBase64Encoded"]);r!=null&&y(s,["imageBytes"],fa(n,r));const i=g(e,["mimeType"]);return i!=null&&y(s,["mimeType"],i),s}function fj(n,e){const s={},r=g(e,["safetyAttributes","categories"]);r!=null&&y(s,["categories"],r);const i=g(e,["safetyAttributes","scores"]);i!=null&&y(s,["scores"],i);const o=g(e,["contentType"]);return o!=null&&y(s,["contentType"],o),s}function zM(n,e){const s={},r=g(e,["_self"]);r!=null&&y(s,["image"],LM(n,r));const i=g(e,["raiFilteredReason"]);i!=null&&y(s,["raiFilteredReason"],i);const o=g(e,["_self"]);return o!=null&&y(s,["safetyAttributes"],fj(n,o)),s}function UM(n,e){const s={},r=g(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>zM(n,c))),y(s,["generatedImages"],o)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&y(s,["positivePromptSafetyAttributes"],fj(n,i)),s}function FM(n,e){const s={},r=g(e,["baseModel"]);r!=null&&y(s,["baseModel"],r);const i=g(e,["createTime"]);i!=null&&y(s,["createTime"],i);const o=g(e,["updateTime"]);return o!=null&&y(s,["updateTime"],o),s}function fv(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["displayName"]);i!=null&&y(s,["displayName"],i);const o=g(e,["description"]);o!=null&&y(s,["description"],o);const c=g(e,["version"]);c!=null&&y(s,["version"],c);const u=g(e,["_self"]);u!=null&&y(s,["tunedModelInfo"],FM(n,u));const f=g(e,["inputTokenLimit"]);f!=null&&y(s,["inputTokenLimit"],f);const h=g(e,["outputTokenLimit"]);h!=null&&y(s,["outputTokenLimit"],h);const x=g(e,["supportedGenerationMethods"]);return x!=null&&y(s,["supportedActions"],x),s}function $M(){return{}}function VM(n,e){const s={},r=g(e,["totalTokens"]);r!=null&&y(s,["totalTokens"],r);const i=g(e,["cachedContentTokenCount"]);return i!=null&&y(s,["cachedContentTokenCount"],i),s}function BM(n,e){const s={},r=g(e,["video","uri"]);r!=null&&y(s,["uri"],r);const i=g(e,["video","encodedVideo"]);i!=null&&y(s,["videoBytes"],fa(n,i));const o=g(e,["encoding"]);return o!=null&&y(s,["mimeType"],o),s}function qM(n,e){const s={},r=g(e,["_self"]);return r!=null&&y(s,["video"],BM(n,r)),s}function WM(n,e){const s={},r=g(e,["generatedSamples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>qM(n,u))),y(s,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&y(s,["raiMediaFilteredCount"],i);const o=g(e,["raiMediaFilteredReasons"]);return o!=null&&y(s,["raiMediaFilteredReasons"],o),s}function HM(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["metadata"]);i!=null&&y(s,["metadata"],i);const o=g(e,["done"]);o!=null&&y(s,["done"],o);const c=g(e,["error"]);c!=null&&y(s,["error"],c);const u=g(e,["response","generateVideoResponse"]);return u!=null&&y(s,["response"],WM(n,u)),s}function GM(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&y(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&y(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&y(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&y(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&y(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&y(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&y(s,["functionResponse"],h);const x=g(e,["inlineData"]);x!=null&&y(s,["inlineData"],x);const v=g(e,["text"]);return v!=null&&y(s,["text"],v),s}function KM(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>GM(n,c))),y(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&y(s,["role"],i),s}function JM(n,e){const s={},r=g(e,["citations"]);return r!=null&&y(s,["citations"],r),s}function YM(n,e){const s={},r=g(e,["content"]);r!=null&&y(s,["content"],KM(n,r));const i=g(e,["citationMetadata"]);i!=null&&y(s,["citationMetadata"],JM(n,i));const o=g(e,["finishMessage"]);o!=null&&y(s,["finishMessage"],o);const c=g(e,["finishReason"]);c!=null&&y(s,["finishReason"],c);const u=g(e,["avgLogprobs"]);u!=null&&y(s,["avgLogprobs"],u);const f=g(e,["groundingMetadata"]);f!=null&&y(s,["groundingMetadata"],f);const h=g(e,["index"]);h!=null&&y(s,["index"],h);const x=g(e,["logprobsResult"]);x!=null&&y(s,["logprobsResult"],x);const v=g(e,["safetyRatings"]);return v!=null&&y(s,["safetyRatings"],v),s}function mv(n,e){const s={},r=g(e,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(x=>YM(n,x))),y(s,["candidates"],h)}const i=g(e,["createTime"]);i!=null&&y(s,["createTime"],i);const o=g(e,["responseId"]);o!=null&&y(s,["responseId"],o);const c=g(e,["modelVersion"]);c!=null&&y(s,["modelVersion"],c);const u=g(e,["promptFeedback"]);u!=null&&y(s,["promptFeedback"],u);const f=g(e,["usageMetadata"]);return f!=null&&y(s,["usageMetadata"],f),s}function ZM(n,e){const s={},r=g(e,["truncated"]);r!=null&&y(s,["truncated"],r);const i=g(e,["token_count"]);return i!=null&&y(s,["tokenCount"],i),s}function XM(n,e){const s={},r=g(e,["values"]);r!=null&&y(s,["values"],r);const i=g(e,["statistics"]);return i!=null&&y(s,["statistics"],ZM(n,i)),s}function QM(n,e){const s={},r=g(e,["billableCharacterCount"]);return r!=null&&y(s,["billableCharacterCount"],r),s}function e6(n,e){const s={},r=g(e,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>XM(n,c))),y(s,["embeddings"],o)}const i=g(e,["metadata"]);return i!=null&&y(s,["metadata"],QM(n,i)),s}function t6(n,e){const s={},r=g(e,["gcsUri"]);r!=null&&y(s,["gcsUri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&y(s,["imageBytes"],fa(n,i));const o=g(e,["mimeType"]);return o!=null&&y(s,["mimeType"],o),s}function mj(n,e){const s={},r=g(e,["safetyAttributes","categories"]);r!=null&&y(s,["categories"],r);const i=g(e,["safetyAttributes","scores"]);i!=null&&y(s,["scores"],i);const o=g(e,["contentType"]);return o!=null&&y(s,["contentType"],o),s}function s6(n,e){const s={},r=g(e,["_self"]);r!=null&&y(s,["image"],t6(n,r));const i=g(e,["raiFilteredReason"]);i!=null&&y(s,["raiFilteredReason"],i);const o=g(e,["_self"]);o!=null&&y(s,["safetyAttributes"],mj(n,o));const c=g(e,["prompt"]);return c!=null&&y(s,["enhancedPrompt"],c),s}function n6(n,e){const s={},r=g(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>s6(n,c))),y(s,["generatedImages"],o)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&y(s,["positivePromptSafetyAttributes"],mj(n,i)),s}function r6(n,e){const s={},r=g(e,["endpoint"]);r!=null&&y(s,["name"],r);const i=g(e,["deployedModelId"]);return i!=null&&y(s,["deployedModelId"],i),s}function i6(n,e){const s={},r=g(e,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&y(s,["baseModel"],r);const i=g(e,["createTime"]);i!=null&&y(s,["createTime"],i);const o=g(e,["updateTime"]);return o!=null&&y(s,["updateTime"],o),s}function pv(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["displayName"]);i!=null&&y(s,["displayName"],i);const o=g(e,["description"]);o!=null&&y(s,["description"],o);const c=g(e,["versionId"]);c!=null&&y(s,["version"],c);const u=g(e,["deployedModels"]);if(u!=null){let x=u;Array.isArray(x)&&(x=x.map(v=>r6(n,v))),y(s,["endpoints"],x)}const f=g(e,["labels"]);f!=null&&y(s,["labels"],f);const h=g(e,["_self"]);return h!=null&&y(s,["tunedModelInfo"],i6(n,h)),s}function a6(){return{}}function o6(n,e){const s={},r=g(e,["totalTokens"]);return r!=null&&y(s,["totalTokens"],r),s}function l6(n,e){const s={},r=g(e,["tokensInfo"]);return r!=null&&y(s,["tokensInfo"],r),s}function c6(n,e){const s={},r=g(e,["gcsUri"]);r!=null&&y(s,["uri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&y(s,["videoBytes"],fa(n,i));const o=g(e,["mimeType"]);return o!=null&&y(s,["mimeType"],o),s}function d6(n,e){const s={},r=g(e,["_self"]);return r!=null&&y(s,["video"],c6(n,r)),s}function u6(n,e){const s={},r=g(e,["videos"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>d6(n,u))),y(s,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&y(s,["raiMediaFilteredCount"],i);const o=g(e,["raiMediaFilteredReasons"]);return o!=null&&y(s,["raiMediaFilteredReasons"],o),s}function h6(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["metadata"]);i!=null&&y(s,["metadata"],i);const o=g(e,["done"]);o!=null&&y(s,["done"],o);const c=g(e,["error"]);c!=null&&y(s,["error"],c);const u=g(e,["response"]);return u!=null&&y(s,["response"],u6(n,u)),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f6="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function m6(n,e,s){let r,i;s.data instanceof Blob?i=JSON.parse(await s.data.text()):i=JSON.parse(s.data),n.isVertexAI()?r=PD(n,i):r=TD(n,i),e(r)}class p6{constructor(e,s,r){this.apiClient=e,this.auth=s,this.webSocketFactory=r}async connect(e){var s,r,i,o;const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let f;const h=b6(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h);else{const Z=this.apiClient.getApiKey();f=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateContent?key=${Z}`}let x=()=>{};const v=new Promise(Z=>{x=Z}),N=e.callbacks,T=function(){var Z;(Z=N==null?void 0:N.onopen)===null||Z===void 0||Z.call(N),x({})},_=this.apiClient,C={onopen:T,onmessage:Z=>{m6(_,N.onmessage,Z)},onerror:(s=N==null?void 0:N.onerror)!==null&&s!==void 0?s:function(Z){},onclose:(r=N==null?void 0:N.onclose)!==null&&r!==void 0?r:function(Z){}},R=this.webSocketFactory.create(f,y6(h),C);R.connect(),await v;let z=hs(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&z.startsWith("publishers/")){const Z=this.apiClient.getProject(),q=this.apiClient.getLocation();z=`projects/${Z}/locations/${q}/`+z}let $={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Uu.AUDIO]}:e.config.responseModalities=[Uu.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U={model:z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?$=sD(this.apiClient,U):$=tD(this.apiClient,U),delete $.config,R.send(JSON.stringify($)),new x6(R,this.apiClient)}}const g6={turnComplete:!0};class x6{constructor(e,s){this.conn=e,this.apiClient=s}tLiveClientContent(e,s){if(s.turns!==null&&s.turns!==void 0){let r=[];try{r=ua(e,s.turns),e.isVertexAI()?r=r.map(i=>pl(e,i)):r=r.map(i=>oh(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:r,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(e,s){let r=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?r=s.functionResponses:r=[s.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(f6)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},g6),e);const s=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(s))}sendRealtimeInput(e){let s={};this.apiClient.isVertexAI()?s={realtimeInput:lD(this.apiClient,e)}:s={realtimeInput:oD(this.apiClient,e)},this.conn.send(JSON.stringify(s))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function y6(n){const e={};return n.forEach((s,r)=>{e[r]=s}),e}function b6(n){const e=new Headers;for(const[s,r]of Object.entries(n))e.append(s,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v6 extends qc{constructor(e){super(),this.apiClient=e,this.generateContent=async s=>await this.generateContentInternal(s),this.generateContentStream=async s=>await this.generateContentStreamInternal(s),this.generateImages=async s=>await this.generateImagesInternal(s).then(r=>{var i;let o;const c=[];if(r!=null&&r.generatedImages)for(const f of r.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((i=f==null?void 0:f.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=f==null?void 0:f.safetyAttributes:c.push(f);let u;return o?u={generatedImages:c,positivePromptSafetyAttributes:o}:u={generatedImages:c},u})}async generateContentInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=uv(this.apiClient,e);return u=yt("{model}:generateContent",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>{const v=mv(this.apiClient,x),N=new ru;return Object.assign(N,v),N})}else{const h=dv(this.apiClient,e);return u=yt("{model}:generateContent",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>{const v=hv(this.apiClient,x),N=new ru;return Object.assign(N,v),N})}}async generateContentStreamInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=uv(this.apiClient,e);u=yt("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h.config,delete h._url,delete h._query;const x=this.apiClient;return c=x.requestStream({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),c.then(function(v){return Fu(this,arguments,function*(){var N,T,_,C;try{for(var R=!0,z=Km(v),$;$=yield Zs(z.next()),N=$.done,!N;R=!0){C=$.value,R=!1;const Z=mv(x,yield Zs(C.json())),q=new ru;Object.assign(q,Z),yield yield Zs(q)}}catch(U){T={error:U}}finally{try{!R&&!N&&(_=z.return)&&(yield Zs(_.call(z)))}finally{if(T)throw T.error}}})})}else{const h=dv(this.apiClient,e);u=yt("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h.config,delete h._url,delete h._query;const x=this.apiClient;return c=x.requestStream({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(v){return Fu(this,arguments,function*(){var N,T,_,C;try{for(var R=!0,z=Km(v),$;$=yield Zs(z.next()),N=$.done,!N;R=!0){C=$.value,R=!1;const Z=hv(x,yield Zs(C.json())),q=new ru;Object.assign(q,Z),yield yield Zs(q)}}catch(U){T={error:U}}finally{try{!R&&!N&&(_=z.return)&&(yield Zs(_.call(z)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=xM(this.apiClient,e);return u=yt("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>{const v=e6(this.apiClient,x),N=new Qb;return Object.assign(N,v),N})}else{const h=WD(this.apiClient,e);return u=yt("{model}:batchEmbedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>{const v=OM(this.apiClient,x),N=new Qb;return Object.assign(N,v),N})}}async generateImagesInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=bM(this.apiClient,e);return u=yt("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>{const v=n6(this.apiClient,x),N=new ev;return Object.assign(N,v),N})}else{const h=GD(this.apiClient,e);return u=yt("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>{const v=UM(this.apiClient,x),N=new ev;return Object.assign(N,v),N})}}async get(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=vM(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>pv(this.apiClient,x))}else{const h=KD(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>fv(this.apiClient,x))}}async update(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=NM(this.apiClient,e);return u=yt("{model}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>pv(this.apiClient,x))}else{const h=YD(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>fv(this.apiClient,x))}}async delete(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=jM(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(()=>{const x=a6(),v=new tv;return Object.assign(v,x),v})}else{const h=ZD(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(()=>{const x=$M(),v=new tv;return Object.assign(v,x),v})}}async countTokens(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=kM(this.apiClient,e);return u=yt("{model}:countTokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>{const v=o6(this.apiClient,x),N=new sv;return Object.assign(N,v),N})}else{const h=QD(this.apiClient,e);return u=yt("{model}:countTokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>{const v=VM(this.apiClient,x),N=new sv;return Object.assign(N,v),N})}}async computeTokens(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=_M(this.apiClient,e);return o=yt("{model}:computeTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const h=l6(this.apiClient,f),x=new l3;return Object.assign(x,h),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=TM(this.apiClient,e);return u=yt("{model}:predictLongRunning",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>h6(this.apiClient,x))}else{const h=sM(this.apiClient,e);return u=yt("{model}:predictLongRunning",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>HM(this.apiClient,x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w6(n,e){const s={},r=g(e,["operationName"]);r!=null&&y(s,["_url","operationName"],r);const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function N6(n,e){const s={},r=g(e,["operationName"]);r!=null&&y(s,["_url","operationName"],r);const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function j6(n,e){const s={},r=g(e,["operationName"]);r!=null&&y(s,["operationName"],r);const i=g(e,["resourceName"]);i!=null&&y(s,["_url","resourceName"],i);const o=g(e,["config"]);return o!=null&&y(s,["config"],o),s}function S6(n,e){const s={},r=g(e,["video","uri"]);r!=null&&y(s,["uri"],r);const i=g(e,["video","encodedVideo"]);i!=null&&y(s,["videoBytes"],fa(n,i));const o=g(e,["encoding"]);return o!=null&&y(s,["mimeType"],o),s}function k6(n,e){const s={},r=g(e,["_self"]);return r!=null&&y(s,["video"],S6(n,r)),s}function _6(n,e){const s={},r=g(e,["generatedSamples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>k6(n,u))),y(s,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&y(s,["raiMediaFilteredCount"],i);const o=g(e,["raiMediaFilteredReasons"]);return o!=null&&y(s,["raiMediaFilteredReasons"],o),s}function C6(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["metadata"]);i!=null&&y(s,["metadata"],i);const o=g(e,["done"]);o!=null&&y(s,["done"],o);const c=g(e,["error"]);c!=null&&y(s,["error"],c);const u=g(e,["response","generateVideoResponse"]);return u!=null&&y(s,["response"],_6(n,u)),s}function E6(n,e){const s={},r=g(e,["gcsUri"]);r!=null&&y(s,["uri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&y(s,["videoBytes"],fa(n,i));const o=g(e,["mimeType"]);return o!=null&&y(s,["mimeType"],o),s}function T6(n,e){const s={},r=g(e,["_self"]);return r!=null&&y(s,["video"],E6(n,r)),s}function P6(n,e){const s={},r=g(e,["videos"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>T6(n,u))),y(s,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&y(s,["raiMediaFilteredCount"],i);const o=g(e,["raiMediaFilteredReasons"]);return o!=null&&y(s,["raiMediaFilteredReasons"],o),s}function gv(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["metadata"]);i!=null&&y(s,["metadata"],i);const o=g(e,["done"]);o!=null&&y(s,["done"],o);const c=g(e,["error"]);c!=null&&y(s,["error"],c);const u=g(e,["response"]);return u!=null&&y(s,["response"],P6(n,u)),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A6 extends qc{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const s=e.operation,r=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=s.name.split("/operations/")[0];let o;return r&&"httpOptions"in r&&(o=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:i,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:s.name,config:r})}async getVideosOperationInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=N6(this.apiClient,e);return u=yt("{operationName}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>gv(this.apiClient,x))}else{const h=w6(this.apiClient,e);return u=yt("{operationName}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>C6(this.apiClient,x))}}async fetchPredictVideosOperationInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=j6(this.apiClient,e);return o=yt("{resourceName}:fetchPredictOperation",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>gv(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I6="Content-Type",R6="X-Server-Timeout",D6="User-Agent",M6="x-goog-api-client",O6="0.12.0",L6=`google-genai-sdk/${O6}`,z6="v1beta1",U6="v1beta",xv=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class pj extends Error{constructor(e,s){s?super(e,{cause:s}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class Ym extends Error{constructor(e,s){s?super(e,{cause:s}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class F6{constructor(e){var s,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:z6,this.getProject()||this.getLocation()?(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(i.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:U6,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),s=new URL(e);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,s,r){const i=[this.getRequestUrlInternal(s)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,s,r);if(e.queryParams)for(const[c,u]of Object.entries(e.queryParams))i.searchParams.append(c,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,s,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,s){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(s))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,s,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,s,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,s,r){if(s&&s.timeout||r){const i=new AbortController,o=i.signal;s.timeout&&(s==null?void 0:s.timeout)>0&&setTimeout(()=>i.abort(),s.timeout),r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return e.headers=await this.getHeadersInternal(s),e}async unaryApiCall(e,s,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:r})).then(async i=>(await yv(i),new Gm(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,s,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:r})).then(async i=>(await yv(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var s;return Fu(this,arguments,function*(){const i=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let c="";for(;;){const{done:u,value:f}=yield Zs(i.read());if(u){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=o.decode(f);try{const v=JSON.parse(h);if("error"in v){const N=JSON.parse(JSON.stringify(v.error)),T=N.status,_=N.code,C=`got status: ${T}. ${JSON.stringify(v)}`;if(_>=400&&_<500)throw new pj(C);if(_>=500&&_<600)throw new Ym(C)}}catch(v){const N=v;if(N.name==="ClientError"||N.name==="ServerError")throw v}c+=h;let x=c.match(xv);for(;x;){const v=x[1];try{const N=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Zs(new Gm(N)),c=c.slice(x[0].length),x=c.match(xv)}catch(N){throw new Error(`exception parsing stream chunk ${v}. ${N}`)}}}}finally{i.releaseLock()}})}async apiCall(e,s){return fetch(e,s).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},s=L6+" "+this.clientOptions.userAgentExtra;return e[D6]=s,e[M6]=s,e[I6]="application/json",e}async getHeadersInternal(e){const s=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))s.append(r,i);e.timeout&&e.timeout>0&&s.append(R6,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s),s}async uploadFile(e,s){var r;const i={};s!=null&&(i.mimeType=s.mimeType,i.name=s.name,i.displayName=s.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,c=await o.stat(e);i.sizeBytes=String(c.size);const u=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const f=await this.fetchUploadUrl(i,s);return o.upload(e,f,this)}async fetchUploadUrl(e,s){var r;let i={};s!=null&&s.httpOptions?i=s.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},c=await this.request({path:yt("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(r=c==null?void 0:c.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function yv(n){var e;if(n===void 0)throw new Ym("response is undefined");if(!n.ok){const s=n.status,r=n.statusText;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=`got status: ${s} ${r}. ${JSON.stringify(i)}`;throw s>=400&&s<500?new pj(o):s>=500&&s<600?new Ym(o):new Error(o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $6(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["_url","name"],r);const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function V6(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&y(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);s!==void 0&&o!=null&&y(s,["_query","pageToken"],o);const c=g(e,["filter"]);return s!==void 0&&c!=null&&y(s,["_query","filter"],c),r}function B6(n,e){const s={},r=g(e,["config"]);return r!=null&&y(s,["config"],V6(n,r,s)),s}function q6(n,e){const s={},r=g(e,["textInput"]);r!=null&&y(s,["textInput"],r);const i=g(e,["output"]);return i!=null&&y(s,["output"],i),s}function W6(n,e){const s={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(e,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>q6(n,o))),y(s,["examples","examples"],i)}return s}function H6(n,e,s){const r={};if(g(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=g(e,["tunedModelDisplayName"]);if(s!==void 0&&i!=null&&y(s,["displayName"],i),g(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=g(e,["epochCount"]);s!==void 0&&o!=null&&y(s,["tuningTask","hyperparameters","epochCount"],o);const c=g(e,["learningRateMultiplier"]);if(c!=null&&y(r,["tuningTask","hyperparameters","learningRateMultiplier"],c),g(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=g(e,["batchSize"]);s!==void 0&&u!=null&&y(s,["tuningTask","hyperparameters","batchSize"],u);const f=g(e,["learningRate"]);return s!==void 0&&f!=null&&y(s,["tuningTask","hyperparameters","learningRate"],f),r}function G6(n,e){const s={},r=g(e,["baseModel"]);r!=null&&y(s,["baseModel"],r);const i=g(e,["trainingDataset"]);i!=null&&y(s,["tuningTask","trainingData"],W6(n,i));const o=g(e,["config"]);return o!=null&&y(s,["config"],H6(n,o,s)),s}function K6(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["_url","name"],r);const i=g(e,["config"]);return i!=null&&y(s,["config"],i),s}function J6(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&y(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);s!==void 0&&o!=null&&y(s,["_query","pageToken"],o);const c=g(e,["filter"]);return s!==void 0&&c!=null&&y(s,["_query","filter"],c),r}function Y6(n,e){const s={},r=g(e,["config"]);return r!=null&&y(s,["config"],J6(n,r,s)),s}function Z6(n,e,s){const r={},i=g(e,["gcsUri"]);if(s!==void 0&&i!=null&&y(s,["supervisedTuningSpec","trainingDatasetUri"],i),g(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function X6(n,e){const s={},r=g(e,["gcsUri"]);return r!=null&&y(s,["validationDatasetUri"],r),s}function Q6(n,e,s){const r={},i=g(e,["validationDataset"]);s!==void 0&&i!=null&&y(s,["supervisedTuningSpec"],X6(n,i));const o=g(e,["tunedModelDisplayName"]);s!==void 0&&o!=null&&y(s,["tunedModelDisplayName"],o);const c=g(e,["description"]);s!==void 0&&c!=null&&y(s,["description"],c);const u=g(e,["epochCount"]);s!==void 0&&u!=null&&y(s,["supervisedTuningSpec","hyperParameters","epochCount"],u);const f=g(e,["learningRateMultiplier"]);s!==void 0&&f!=null&&y(s,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const h=g(e,["adapterSize"]);if(s!==void 0&&h!=null&&y(s,["supervisedTuningSpec","hyperParameters","adapterSize"],h),g(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function eO(n,e){const s={},r=g(e,["baseModel"]);r!=null&&y(s,["baseModel"],r);const i=g(e,["trainingDataset"]);i!=null&&y(s,["supervisedTuningSpec","trainingDatasetUri"],Z6(n,i,s));const o=g(e,["config"]);return o!=null&&y(s,["config"],Q6(n,o,s)),s}function tO(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["model"],r);const i=g(e,["name"]);return i!=null&&y(s,["endpoint"],i),s}function gj(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["state"]);i!=null&&y(s,["state"],cj(n,i));const o=g(e,["createTime"]);o!=null&&y(s,["createTime"],o);const c=g(e,["tuningTask","startTime"]);c!=null&&y(s,["startTime"],c);const u=g(e,["tuningTask","completeTime"]);u!=null&&y(s,["endTime"],u);const f=g(e,["updateTime"]);f!=null&&y(s,["updateTime"],f);const h=g(e,["description"]);h!=null&&y(s,["description"],h);const x=g(e,["baseModel"]);x!=null&&y(s,["baseModel"],x);const v=g(e,["_self"]);v!=null&&y(s,["tunedModel"],tO(n,v));const N=g(e,["distillationSpec"]);N!=null&&y(s,["distillationSpec"],N);const T=g(e,["experiment"]);T!=null&&y(s,["experiment"],T);const _=g(e,["labels"]);_!=null&&y(s,["labels"],_);const C=g(e,["pipelineJob"]);C!=null&&y(s,["pipelineJob"],C);const R=g(e,["tunedModelDisplayName"]);return R!=null&&y(s,["tunedModelDisplayName"],R),s}function sO(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&y(s,["nextPageToken"],r);const i=g(e,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>gj(n,c))),y(s,["tuningJobs"],o)}return s}function nO(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["metadata"]);i!=null&&y(s,["metadata"],i);const o=g(e,["done"]);o!=null&&y(s,["done"],o);const c=g(e,["error"]);return c!=null&&y(s,["error"],c),s}function rO(n,e){const s={},r=g(e,["model"]);r!=null&&y(s,["model"],r);const i=g(e,["endpoint"]);return i!=null&&y(s,["endpoint"],i),s}function Zm(n,e){const s={},r=g(e,["name"]);r!=null&&y(s,["name"],r);const i=g(e,["state"]);i!=null&&y(s,["state"],cj(n,i));const o=g(e,["createTime"]);o!=null&&y(s,["createTime"],o);const c=g(e,["startTime"]);c!=null&&y(s,["startTime"],c);const u=g(e,["endTime"]);u!=null&&y(s,["endTime"],u);const f=g(e,["updateTime"]);f!=null&&y(s,["updateTime"],f);const h=g(e,["error"]);h!=null&&y(s,["error"],h);const x=g(e,["description"]);x!=null&&y(s,["description"],x);const v=g(e,["baseModel"]);v!=null&&y(s,["baseModel"],v);const N=g(e,["tunedModel"]);N!=null&&y(s,["tunedModel"],rO(n,N));const T=g(e,["supervisedTuningSpec"]);T!=null&&y(s,["supervisedTuningSpec"],T);const _=g(e,["tuningDataStats"]);_!=null&&y(s,["tuningDataStats"],_);const C=g(e,["encryptionSpec"]);C!=null&&y(s,["encryptionSpec"],C);const R=g(e,["partnerModelTuningSpec"]);R!=null&&y(s,["partnerModelTuningSpec"],R);const z=g(e,["distillationSpec"]);z!=null&&y(s,["distillationSpec"],z);const $=g(e,["experiment"]);$!=null&&y(s,["experiment"],$);const U=g(e,["labels"]);U!=null&&y(s,["labels"],U);const Z=g(e,["pipelineJob"]);Z!=null&&y(s,["pipelineJob"],Z);const q=g(e,["tunedModelDisplayName"]);return q!=null&&y(s,["tunedModelDisplayName"],q),s}function iO(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&y(s,["nextPageToken"],r);const i=g(e,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Zm(n,c))),y(s,["tuningJobs"],o)}return s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aO extends qc{constructor(e){super(),this.apiClient=e,this.get=async s=>await this.getInternal(s),this.list=async(s={})=>new $p(Rc.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(s),s),this.tune=async s=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(s);{const r=await this.tuneMldevInternal(s);let i="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?i=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(i=r.name.split("/operations/")[0]),{name:i,state:Hm.JOB_STATE_QUEUED}}}}async getInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=K6(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>Zm(this.apiClient,x))}else{const h=$6(this.apiClient,e);return u=yt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>gj(this.apiClient,x))}}async listInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=Y6(this.apiClient,e);return u=yt("tuningJobs",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(x=>x.json()),c.then(x=>{const v=iO(this.apiClient,x),N=new nv;return Object.assign(N,v),N})}else{const h=B6(this.apiClient,e);return u=yt("tunedModels",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(x=>x.json()),c.then(x=>{const v=sO(this.apiClient,x),N=new nv;return Object.assign(N,v),N})}}async tuneInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=eO(this.apiClient,e);return o=yt("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>Zm(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=G6(this.apiClient,e);return o=yt("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>nO(this.apiClient,f))}}}const oO=1024*1024*8;async function lO(n,e,s){var r,i;let o=0,c=0,u=new Gm(new Response),f="upload";for(o=n.size;c<o;){const x=Math.min(oO,o-c),v=n.slice(c,c+x);if(c+x>=o&&(f+=", finalize"),u=await s.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(c),"Content-Length":String(x)}}}),c+=x,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r["x-goog-upload-status"])!=="active")break;if(o<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(u==null?void 0:u.json());if(((i=u==null?void 0:u.headers)===null||i===void 0?void 0:i["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function cO(n){return{size:n.size,type:n.type}}class dO{async upload(e,s,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lO(e,s,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uO{create(e,s,r){return new hO(e,s,r)}}class hO{constructor(e,s,r){this.url=e,this.headers=s,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bv="x-goog-api-key";class fO{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(bv)===null&&e.append(bv,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mO="gl-node/";class pO{constructor(e){var s;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=e.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=e.apiKey;const r=S5(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new fO(this.apiKey);this.apiClient=new F6({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:mO+"web",uploader:new dO}),this.models=new v6(this.apiClient),this.live=new p6(this.apiClient,i,new uO),this.chats=new g3(this.models,this.apiClient),this.caches=new h3(this.apiClient),this.files=new T3(this.apiClient),this.operations=new A6(this.apiClient),this.tunings=new aO(this.apiClient)}}const gO={};var xO={};const yO=typeof import.meta<"u"&&gO?"AIzaSyDhB9FyniBmMSJJAP_t_mNq1uILG5rZcQI":void 0,bO=typeof process<"u"?xO.VITE_GEMINI_API_KEY:void 0,Xm=yO||bO||"";typeof window<"u"&&Xm&&console.warn("Warning: Gemini API key is present in the frontend build (VITE_GEMINI_API_KEY). This exposes the key to users. Consider proxying requests through a server or using a server-side function to keep keys secret.");const Wc=()=>Xm?new pO({apiKey:Xm}):(console.warn("API Key is missing. AI features will not work."),null),vO=["Timeless","Elegant","Vintage","Handmade","Artisan","Luxe","Delicate","Statement","Classic","Boho"],wO=["Gold","Silver","Sterling Silver","Resin","Bronze","Copper","Glass","Crystal","Gemstone"],NO=["Art Deco","Vintage","Boho","Minimalist","Retro","Contemporary","Minimal"],$u=n=>n[Math.floor(Math.random()*n.length)],Qm=(n,e)=>{const s=$u(vO),r=$u(NO),i=n?n.replace(/[^a-zA-Z0-9 ]/g,""):"Piece";return`${s} ${r} ${i}`.trim()},vv=n=>{const e=(n||"").toLowerCase(),s=[];return e.includes("ring")&&s.push("Ring"),(e.includes("neck")||e.includes("pendant")||e.includes("choker"))&&s.push("Pendant"),e.includes("ear")&&s.push("Stud"),e.includes("bracelet")&&s.push("Bracelet"),s.length===0&&s.push($u(["Pendant","Ring","Stud","Dangle"])),s.push($u(wO)),Array.from(new Set(s)).slice(0,5)},cc=(n,e,s)=>{const r=s?`Features: ${s}. `:"";return`${n} is a ${e.toLowerCase()} crafted with care. ${r}Perfect for elevating everyday looks or adding a special touch for events. Hand-finished details and quality materials make it a timeless addition to any collection.`},wv=(n,e)=>{const s=n.split(" ").slice(0,4).map(r=>r.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()).filter(Boolean);return Array.from(new Set([...s,...e.map(r=>r.toLowerCase())])).slice(0,6)},jO=async(n,e,s)=>{const r=Wc();if(!r)return cc(n||Qm(e||""),e||"Jewelry",s);try{return(await r.models.generateContent({model:"gemini-2.5-flash",contents:`Write a compelling, SEO-friendly product description for an e-commerce product.
      
      Product Name: ${n}
      Category: ${e}
      Keywords/Features: ${s}
      
      Tone: Professional, persuasive, and enthusiastic. 
      Keep it under 150 words.`})).text||cc(n,e,s)||"Could not generate description."}catch(i){return console.error("Gemini API Error:",i),cc(n,e,s)}},SO=async(n,e)=>{const s=Wc();if(!s)try{const i=Qm(e),o=vv(e),c=cc(i,e||"Jewelry","Handmade, Unique"),u=wv(i,o);return{name:i,description:c,whenAndHowToWear:"Perfect for both everyday wear and special occasions. Layer with other pieces for a curated look.",tags:o,seoKeywords:u,colors:[]}}catch(i){return console.error("Local fallback for product metadata failed:",i),null}const r=n.replace(/^data:image\/\w+;base64,/,"");try{const o=(await s.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:r}},{text:`You are a fashion merchandising expert for a specialized jewelry store. Analyze this image of a ${e||"jewelry product"}.
            
            Generate the following JSON object:
            {
              "name": "A short, catchy, premium product name",
              "description": "A short, powerful, attractive description (max 3 sentences) that sells the product emotionally.",
              "whenAndHowToWear": "Short, powerful advice on when and how to wear this item (max 2 sentences).",
              "tags": ["Array", "of", "5", "jewelry-specific", "tags"],
              "seoKeywords": ["Array", "of", "5", "strong", "SEO", "keywords"],
              "colors": ["List", "of", "dominant", "product", "colors"]
            }
            
            CRITICAL INSTRUCTIONS:
            1. **Tags**: STRICTLY JEWELRY ONLY. Allowed: Materials (Gold, Resin, Silver, Gemstone), Types (Ring, Stud, Choker, Pendant), Styles (Art Deco, Vintage, Boho, Minimalist), Techniques (Filigree, Wire Wrap). 
               FORBIDDEN: "Fashion", "Style", "Woman", "Girl", "Cute", "Gift", "Love", "Trend", "Beautiful", "Accessory".
            2. **Colors**: STRICTLY PRODUCT ONLY. Ignore background, skin, or prop colors. If the ring is silver and the stone is red, output ["Silver", "Red"]. Do not output "White" if the background is white.
            
            Return ONLY raw JSON.`}]},config:{responseMimeType:"application/json"}})).text;return o?JSON.parse(o):null}catch(i){console.error("Gemini Image Analysis Error:",i);try{const o=Qm(e),c=vv(e),u=cc(o,e||"Jewelry","Handmade, Unique"),f=wv(o,c);return{name:o,description:u,whenAndHowToWear:"Perfect for both everyday wear and special occasions. Layer with other pieces for a curated look.",tags:c,seoKeywords:f,colors:[]}}catch(o){return console.error("Local fallback for product metadata failed:",o),null}}},kO=async(n,e)=>{const s=Wc();if(!s)return[];try{const i=(await s.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${e} unique South African product reviews for a jewelry item named "${n}".
      
      CRITICAL INSTRUCTIONS:
      1. **Persona**: Use ONLY Female names.
      2. **Diversity**: Mix names from Zulu, Xhosa, Afrikaans, English, and Coloured backgrounds.
      3. **Locations**: Use specific South African towns (e.g., Paarl, Benoni, Mthatha, Umlazi, George, Soweto, Ballito, Bloemfontein), NOT just "Cape Town" or "JHB".
      4. **Language Mixing**: 
         - Some reviews must mix English with Afrikaans (e.g., "Baie nice", "Lekker", "Te oulik").
         - Some reviews must mix English with Xhosa/Zulu slang (e.g., "Yho", "Shame", "Stunning shem", "Haikona").
         - Keep it natural.
      5. **Realism**: Include occasional spelling mistakes (e.g., "realy", "awsome") and casual grammar.
      6. **Rating**: Randomly between 3.5 and 5.0 stars.
      7. **Content**: Short, punchy comments about quality, delivery, or how it looks.
         - **Price Mentions**: When mentioning price, ALWAYS portray it as cheap and good quality (e.g., "So affordable for such good quality", "Worth every cent").
         - **Delivery/Waiting**: If any negative sentiment about waiting time, turn it positive (e.g., "Waited a bit but worth the wait", "Delivery took time but totally worth it").
      8. **Dates**: Random dates strictly between January 1st, 2025 and today (Format: YYYY-MM-DD). Do NOT generate 2024 dates.

      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return i?JSON.parse(i).map(c=>({...c,id:`rev_ai_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(r){return console.error("Gemini Review Generation Error:",r),[]}},_O=async n=>{const e=Wc();if(!e)return[];try{const r=(await e.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${n} unique South African reviews specifically for "One of a Kind" handmade wire-wrapped pendants.
      
      CRITICAL INSTRUCTIONS:
      1. **Context**: These are unique, single items. The reviews should NOT mention specific colors or stones (like "love the blue stone") because every piece is different.
      2. **Focus**: Focus on the "surprise" element, the uniqueness, the wire-wrapping craftsmanship, the packaging, and the fact that nobody else has this exact piece.
      3. **Persona**: Female names, South African diversity (Zulu, Xhosa, Afrikaans, English).
      4. **Locations**: Specific SA towns.
      5. **Language**: Mix in SA slang (Lekker, Mooi, Pragtig, Yho, Stunning).
      6. **Rating**: 4.0 to 5.0 stars.
      7. **Content**: Short, punchy comments about quality, delivery, or how it looks.
         - **Price Mentions**: When mentioning price, ALWAYS portray it as cheap and good quality (e.g., "So affordable for such good quality", "Worth every cent").
         - **Delivery/Waiting**: If any negative sentiment about waiting time, turn it positive (e.g., "Waited a bit but worth the wait", "Delivery took time but totally worth it").
      8. **Dates**: Random dates between Jan 2025 and now.

      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return r?JSON.parse(r).map(o=>({...o,id:`rev_unique_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(s){return console.error("Gemini Unique Review Generation Error:",s),[]}},CO=async(n,e,s)=>{const r=Wc();if(!r)return`Check out this amazing product: ${n} for R${s}! #SpoilMeVintage #vintage #jewelry`;try{let i=`Write a single social media post for a jewelry product named "${n}". Price: R${s}.`;return e==="Instagram"||e==="TikTok"?i+=' Style: High energy, visually descriptive, lots of emojis, include 10 relevant hashtags. Focus on "Unique", "Handmade", "South Africa". Keep it under 200 characters + hashtags.':e==="Facebook"?i+=' Style: Friendly, community-focused, engaging question at the end. Mention "Spoil Me Vintage". Include link placeholder [Link].':e==="Twitter"||e==="X"?i+=" Style: Short, punchy, urgent. Max 280 characters. Include 3 hashtags.":i+=" Style: Professional yet inviting.",(await r.models.generateContent({model:"gemini-2.5-flash",contents:i})).text||""}catch(i){return console.error("Gemini Social Post Error:",i),`New arrival: ${n} for only R${s}! Get it before it's gone. #SpoilMeVintage`}},EO={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},TO=[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Black",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Silver",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Hypo-Allergic Plastic",modifier:0,description:"Plastic state bends easily"}],Nv=["Epoxy Resin","Copper","Aluminium","Sterling Silver","Glass Beads","Beads","Wood","Oxidized"],jv="spv_base_materials",PO=()=>{var lt,te,le,Oe,ht,it,gt,Ht,_t;const{products:n,addProduct:e,updateProduct:s,deleteProduct:r,categories:i,packagingPresets:o,materialPresets:c,savePackagingPreset:u,saveMaterialPreset:f,deleteMaterialPreset:h,dbConnectionError:x,login:v,manualWinner:N,setManualWinner:T,isLoading:_}=wt(),[C,R]=S.useState(!1),[z,$]=S.useState(!1),[U,Z]=S.useState(!1),[q,V]=S.useState(!1),[I,k]=S.useState(!1),[E,L]=S.useState("general"),[O,B]=S.useState(()=>{try{const D=localStorage.getItem(jv),re=D?JSON.parse(D):null,$e=Array.isArray(re)?re.map(Ee=>String(Ee)).filter(Boolean):[];return Array.from(new Set([...Nv,...$e]))}catch{return Nv}}),[A,ne]=S.useState("");S.useEffect(()=>{try{localStorage.setItem(jv,JSON.stringify(O))}catch{}},[O]);const fe=D=>D?D.split(/[,|;]/).map(re=>re.trim()).filter(Boolean):[],ke=()=>Array.from(new Set(fe(J.material))),De=D=>{const re=Array.from(new Set(D.map($e=>$e.trim()).filter(Boolean)));_e($e=>({...$e,material:re.join(", ")}))},oe=D=>{const re=D.trim();if(!re)return;const $e=ke(),Ve=$e.some(Je=>Je.toLowerCase()===re.toLowerCase())?$e.filter(Je=>Je.toLowerCase()!==re.toLowerCase()):[...$e,re];De(Ve)},be=()=>{const D=A.trim();D&&(B(re=>re.some(Ee=>Ee.toLowerCase()===D.toLowerCase())?re:[...re,D]),ne(""),oe(D))},[ve,X]=S.useState(null),[ue,se]=S.useState(null),[xe,H]=S.useState(""),[Pe,Te]=S.useState(""),[Ue,Xe]=S.useState(""),[rt,zt]=S.useState(""),[we,Ce]=S.useState(!1),[Qe,ut]=S.useState(""),ie=S.useRef(null),Se=S.useRef(null),Be=S.useRef(null),Ne=D=>({Ring:"Rings",Rings:"Rings",Stud:"Stud Earrings","Stud Earrings":"Stud Earrings",Dangle:"Dangle Earrings","Dangle Earrings":"Dangle Earrings",Pendant:"Pendants",Pendants:"Pendants",Bracelet:"Bracelets",Bracelets:"Bracelets",Watch:"Watches",Watches:"Watches","Jewelry Box":"Jewelry Boxes","Jewelry Boxes":"Jewelry Boxes","Perfume Holder":"Perfume Holders","Perfume Holders":"Perfume Holders",Other:"Other"})[D]||D,We=D=>{const re=((D==null?void 0:D.type)??"").toString().trim();if(re)return re;const $e=((D==null?void 0:D.productType)??"").toString().trim();if($e)return $e;const Ee=((D==null?void 0:D.name)??"").toString().toLowerCase();return Ee?Ee.includes("perfume")?"Perfume Holder":Ee.includes("jewelry box")||Ee.includes("jewellery box")?"Jewelry Box":Ee.includes("watch")?"Watch":Ee.includes("bracelet")?"Bracelet":Ee.includes("pendant")?"Pendant":Ee.includes("necklace")?"Necklace":Ee.includes("ring")?"Ring":Ee.includes("dangle")?"Dangle":Ee.includes("stud")?"Stud":"Other":"Other"},jt=D=>({general:"General",pricing:"Pricing",media:"Media",inventory:"Inventory",marketing:"Marketing",reviews:"Reviews",promotions:"Promotions",gifts:"Gifts"})[D]||D,ye={id:"",code:"",name:"",slug:"",description:"",whenAndHowToWear:"",price:0,priceUSD:0,compareAtPrice:0,compareAtPriceUSD:0,memberPrice:0,memberPriceUSD:0,costPrice:0,shippingCost:0,packaging:[],backOfficeLink:"",madeBy:"Spoil Me Vintage",category:((lt=i[0])==null?void 0:lt.name)||"",type:"Stud",status:"draft",images:[""],stock:0,soldCount:0,tags:[],seoKeywords:[],colors:[],isNewArrival:!1,isBestSeller:!1,isFeaturedRing:!1,isFeaturedBracelet:!1,isFeaturedWatch:!1,isUniquePendant:!1,isFeaturedStud:!1,isFeaturedDangle:!1,isFeaturedJewelryBox:!1,isFeaturedPerfumeHolder:!1,isJewelrySet:!1,createdAt:new Date().toISOString(),ringStock:{5:0,6:0,7:0,8:0,9:0,10:0,11:0},earringMaterials:[],showEarringOptions:!1,pendantChainLengths:{},pendantWireWrapped:!1,chainStyles:[],material:"",reviews:[],giftProductId:"",giftValue:0,promoPrice:0,promoStartsAt:"",promoExpiresAt:"",promoBasicMemberPrice:0,promoPremiumMemberPrice:0,promoDeluxeMemberPrice:0,isSoldOut:!1},[J,_e]=S.useState(ye),[kt,xt]=S.useState(""),[Wt,$t]=S.useState(""),[Ss,os]=S.useState(""),[Le,fs]=S.useState(0),[ls,Ws]=S.useState(""),[ur,Ms]=S.useState(""),[Os,Mn]=S.useState(5),On=[...TO,...c];qa.useEffect(()=>{_e(D=>({...D,memberPrice:parseFloat((D.price*.8).toFixed(2)),memberPriceUSD:parseFloat((D.priceUSD*.8).toFixed(2))}))},[J.price,J.priceUSD]);const ms=()=>{var D;_e({...ye,id:`SPV-${Date.now()}`,createdAt:new Date().toISOString(),category:((D=i[0])==null?void 0:D.name)||""}),R(!0),L("general"),Ms("")},Ls=D=>{const re={...ye,...D,compareAtPrice:D.compareAtPrice||0,compareAtPriceUSD:D.compareAtPriceUSD||0,priceUSD:D.priceUSD||0,memberPrice:D.price?parseFloat((D.price*.8).toFixed(2)):D.memberPrice||0,memberPriceUSD:D.priceUSD?parseFloat((D.priceUSD*.8).toFixed(2)):D.memberPriceUSD||0,costPrice:D.costPrice||0,shippingCost:D.shippingCost||0,soldCount:D.soldCount||0,packaging:D.packaging||[],ringStock:D.ringStock||ye.ringStock,pendantChainLengths:D.pendantChainLengths||{},showEarringOptions:D.showEarringOptions??!1,chainStyles:D.chainStyles||[],reviews:D.reviews||[],giftProductId:D.giftProductId||"",giftValue:D.giftValue||0,promoPrice:D.promoPrice||0,promoStartsAt:D.promoStartsAt||"",promoExpiresAt:D.promoExpiresAt||"",promoBasicMemberPrice:D.promoBasicMemberPrice||0,promoPremiumMemberPrice:D.promoPremiumMemberPrice||0,promoDeluxeMemberPrice:D.promoDeluxeMemberPrice||0,tags:D.tags||[],seoKeywords:D.seoKeywords||[],colors:D.colors||[],isFeaturedJewelryBox:D.isFeaturedJewelryBox||!1,isFeaturedPerfumeHolder:D.isFeaturedPerfumeHolder||!1};_e(re),R(!0),L("general"),Ms("")},Vt=async()=>{if(!J.name||!J.price){alert("Name and Price are required");return}$(!0);try{let D=[];const re=J.images.map(async(Ve,Je)=>{var bt;if(typeof Ve=="string"&&Ve.startsWith("data:"))try{const Yt=await(await fetch(Ve)).blob(),mr=((bt=Yt.type.split("/"))==null?void 0:bt[1])||"jpg",Kr=`products/${J.id}/img_${Date.now()}_${Je}.${mr}`;try{return await Gu("products",Kr,Yt)||""}catch(vi){return console.warn("Supabase upload failed, falling back to base64:",vi),Ve}}catch(Yt){return console.error("Failed to process base64 image:",Yt),""}return Ve});D=(await Promise.all(re)).filter(Ve=>Ve&&Ve.trim()!=="");const Ee={...J,images:D,price:Number(J.price),priceUSD:Number(J.priceUSD),stock:Number(J.stock),soldCount:Number(J.soldCount),compareAtPrice:Number(J.compareAtPrice||0),memberPrice:Number(J.memberPrice||0),memberPriceUSD:Number(J.memberPriceUSD||0),costPrice:Number(J.costPrice||0),shippingCost:Number(J.shippingCost||0),giftValue:Number(J.giftValue||0),promoPrice:Number(J.promoPrice||0),promoBasicMemberPrice:Number(J.promoBasicMemberPrice||0),promoPremiumMemberPrice:Number(J.promoPremiumMemberPrice||0),promoDeluxeMemberPrice:Number(J.promoDeluxeMemberPrice||0)};Ee.type==="Ring"&&Ee.ringStock&&(Ee.stock=Object.values(Ee.ringStock).reduce((Ve,Je)=>Ve+Je,0)),n.some(Ve=>Ve.id===Ee.id)?await s(Ee):await e(Ee);try{Es&&(await Oc("products",Ee.id)||alert("Warning: Product saved locally but failed to persist to Supabase. Check DB connection or permissions."))}catch(Ve){console.warn("Post-save verification failed:",Ve)}R(!1)}catch(D){console.error("Failed to save product:",D),alert("Failed to save product. Please check console.")}finally{$(!1)}},ks=async D=>{if(window.confirm("Are you sure?"))try{await r(D)}catch{alert("Failed to delete product.")}},ts=async()=>{if(!J.name||!J.category){alert("Please enter a name and category first.");return}Z(!0);const D=await jO(J.name,J.category,"Handmade, Unique, Vintage");_e(re=>({...re,description:D})),Z(!1)},je=async D=>{var Ee;const re=(Ee=D.target.files)==null?void 0:Ee[0];if(!re)return;V(!0);const $e=new FileReader;$e.onloadend=async()=>{const Ve=$e.result,Je=[Ve,...J.images.filter(Yt=>Yt!=="")];_e(Yt=>({...Yt,images:Je})),console.log("AdminProducts: Added base64 image for analysis (preview length):",Ve.slice(0,80));const bt=await SO(Ve,J.category);bt&&_e(Yt=>({...Yt,name:bt.name,description:bt.description,whenAndHowToWear:bt.whenAndHowToWear,tags:[...new Set([...Yt.tags,...bt.tags])],seoKeywords:[...new Set([...Yt.seoKeywords||[],...bt.seoKeywords])],colors:[...new Set([...Yt.colors||[],...bt.colors])],slug:bt.name.toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-")})),V(!1)},$e.readAsDataURL(re)},Ye=async D=>{const re=D.target.files;if(!re||re.length===0)return;const $e=Array.from(re).map(Ve=>new Promise(Je=>{const bt=new FileReader;bt.onloadend=()=>Je(bt.result),bt.readAsDataURL(Ve)})),Ee=await Promise.all($e);_e(Ve=>({...Ve,images:[...Ve.images.filter(Je=>Je.trim()!==""),...Ee]})),D.target.value=""},Et=async()=>{if(!J.name){alert("Please enter a product name first.");return}k(!0);const D=await kO(J.name,Os);D.length>0&&_e(re=>({...re,reviews:[...re.reviews||[],...D]})),k(!1)},Tt=async()=>{k(!0);const D=await _O(25);D.length>0&&_e(re=>({...re,reviews:[...re.reviews||[],...D]})),k(!1)},Rt=()=>{const D=Math.floor(1e5+Math.random()*9e5);_e(re=>({...re,code:`SPV-${D}`}))},Mt=()=>{if(!J.name)return;const D=J.name.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");_e(re=>({...re,slug:D}))},Ut=D=>{_e(re=>{var $e;return{...re,reviews:($e=re.reviews)==null?void 0:$e.filter(Ee=>Ee.id!==D)}})},Bt=(D,re,$e)=>{if(!re.trim())return;const Ee=re.split(",").map(Ve=>Ve.trim()).filter(Ve=>Ve.length>0);_e(Ve=>({...Ve,[D]:Array.from(new Set([...Ve[D]||[],...Ee]))})),$e("")},Gn=(D,re)=>{_e($e=>{var Ee;return{...$e,[D]:(Ee=$e[D])==null?void 0:Ee.filter((Ve,Je)=>Je!==re)}})},un=D=>{const re=J.images.filter(($e,Ee)=>Ee!==D);re.length===0&&re.push(""),_e({...J,images:re})},hn=D=>{X(D.id),se({userName:D.userName,location:D.location,content:D.content,rating:D.rating,date:D.date||new Date().toLocaleDateString()})},hr=()=>{!ve||!ue||(_e(D=>{var re;return{...D,reviews:(re=D.reviews)==null?void 0:re.map($e=>$e.id===ve?{...$e,...ue}:$e)}}),X(null),se(null))},zs=(D,re,$e)=>{var Ee;(Ee=J.earringMaterials)!=null&&Ee.some(Ve=>Ve.name===D)||_e(Ve=>({...Ve,earringMaterials:[...Ve.earringMaterials||[],{name:D,modifier:re,description:$e}]}))},yi=D=>{const re=[...J.earringMaterials||[]];re.splice(D,1),_e({...J,earringMaterials:re})},qr=D=>{Ss&&(zs(Ss,Le,ls),D&&(f({name:Ss,modifier:Le,description:ls}),alert("Material saved to presets!")),os(""),fs(0),Ws(""))},Wr=(D,re)=>{D.stopPropagation(),window.confirm(`Remove "${re}" from presets?`)&&h(re)},tn=()=>{(J.packaging||[]).length>=3||_e({...J,packaging:[...J.packaging||[],{id:`pack_${Date.now()}`,name:"",bulkCost:0,bulkQuantity:1,unitCost:0}]})},Hr=D=>{if(!D)return;const re=o.find($e=>$e.name===D);re&&(J.packaging||[]).length<3&&_e({...J,packaging:[...J.packaging||[],{...re,id:`pack_${Date.now()}`}]})},bi=D=>{var $e;const re=($e=J.packaging)==null?void 0:$e[D];re&&re.name&&(u(re),alert(`Saved "${re.name}" to packaging presets!`))},fr=(D,re,$e)=>{const Ee=[...J.packaging||[]],Ve={...Ee[D],[re]:$e};if(re==="bulkCost"||re==="bulkQuantity"){const Je=re==="bulkCost"?parseFloat($e):Ve.bulkCost,bt=re==="bulkQuantity"?parseFloat($e):Ve.bulkQuantity;Ve.unitCost=bt>0?Je/bt:0}Ee[D]=Ve,_e({...J,packaging:Ee})},Gr=D=>{const re=[...J.packaging||[]];re.splice(D,1),_e({...J,packaging:re})},Ln=((te=J.packaging)==null?void 0:te.reduce((D,re)=>D+re.unitCost,0))||0,G=(J.costPrice||0)+(J.shippingCost||0)+Ln,K=J.price-G,Y=(J.memberPrice||0)-G,ae=Array.from(new Set(n.map(D=>D.category).filter(Boolean))),pe=Array.from(new Set(n.map(D=>We(D)).filter(Boolean))),Ge=n.filter(D=>{var $e;const re=xe.toLowerCase();return(D.name.toLowerCase().includes(re)||D.code.toLowerCase().includes(re))&&(Pe?We(D)===Pe:!0)&&(Ue?D.category===Ue:!0)&&(rt?($e=D.colors)==null?void 0:$e.includes(rt):!0)&&(we?D.promoPrice&&D.promoPrice>0:!0)&&(Qe?D.status===Qe:!0)});return console.log("AdminProducts Debug:",{isLoading:_,productsCount:n.length,filteredProductsCount:Ge.length,dbConnectionError:x,firstProduct:n[0]?{id:n[0].id,name:n[0].name,images:n[0].images}:null}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Product Management"}),!C&&t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("button",{onClick:ms,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 shadow-lg transition-colors text-sm",children:[t.jsx(an,{size:18})," Add Product"]})})]}),x&&t.jsxs("div",{className:"bg-yellow-900/20 border-l-4 border-yellow-500 text-yellow-300 p-3 rounded mb-4",children:[t.jsx("div",{className:"font-bold",children:"Supabase Warning"}),t.jsx("div",{className:"text-xs mt-1",children:x}),t.jsx("div",{className:"text-xs mt-1",children:"Changes may be saved locally only. Fix Supabase auth/permissions to persist remotely."})]}),!C&&t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[t.jsx(da,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsx("input",{type:"text",placeholder:"Search by Name or SKU...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:xe,onChange:D=>H(D.target.value)})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:Pe,onChange:D=>Te(D.target.value),children:[t.jsx("option",{value:"",children:"All Types"}),pe.map(D=>t.jsx("option",{value:D,children:Ne(D)},D))]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(vI,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:Ue,onChange:D=>Xe(D.target.value),children:[t.jsx("option",{value:"",children:"All Collections"}),ae.map(D=>t.jsx("option",{value:D,children:D},D))]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:rt,onChange:D=>zt(D.target.value),children:[t.jsx("option",{value:"",children:"All Colors"}),Array.from(new Set(n.flatMap(D=>D.colors||[]))).map(D=>t.jsx("option",{value:D,children:D},D))]})]}),t.jsxs("button",{onClick:()=>Ce(!we),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all flex items-center gap-2 ${we?"bg-green-900/30 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-400 hover:bg-zinc-800"}`,children:[t.jsx(lc,{size:16})," ",we?"Promotions Active":"Show Promotions"]}),t.jsxs("div",{className:"relative",children:[t.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:Qe,onChange:D=>ut(D.target.value),children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"draft",children:"Draft"}),t.jsx("option",{value:"published",children:"Published"})]})]}),(xe||Pe||Ue||rt||we||Qe)&&t.jsx("button",{onClick:()=>{H(""),Te(""),Xe(""),zt(""),Ce(!1),ut("")},className:"px-3 py-2 text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Reset Filters"})]}),C?t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:[t.jsx("div",{className:"flex border-b border-gray-800 bg-zinc-950/50 overflow-x-auto no-scrollbar",children:["general","pricing","media","inventory","marketing","reviews","promotions","gifts"].map(D=>t.jsx("button",{onClick:()=>L(D),className:`px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${E===D?"text-pink-500 border-b-2 border-pink-500 bg-pink-500/5":"text-gray-400 hover:text-white"}`,children:jt(D)},D))}),t.jsxs("div",{className:"p-6",children:[E==="general"&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Name *"}),t.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm focus:border-pink-500",value:J.name,onChange:D=>_e({...J,name:D.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"URL Slug"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.slug,onChange:D=>_e({...J,slug:D.target.value}),placeholder:"product-name-url"}),t.jsx("button",{onClick:Mt,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:t.jsx(Ec,{size:16})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"SKU / Code"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.code,onChange:D=>_e({...J,code:D.target.value}),placeholder:"SPV-001"}),t.jsx("button",{onClick:Rt,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:t.jsx(Ec,{size:16})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Status"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.status,onChange:D=>_e({...J,status:D.target.value}),children:[t.jsx("option",{value:"draft",children:"Draft"}),t.jsx("option",{value:"published",children:"Published"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.category,onChange:D=>_e({...J,category:D.target.value}),children:[t.jsx("option",{value:"",children:"Select Category"}),i.map(D=>t.jsx("option",{value:D.name,children:D.name},D.id))]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Type"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.type,onChange:D=>_e({...J,type:D.target.value}),children:[t.jsx("option",{value:"Ring",children:"Rings"}),t.jsx("option",{value:"Stud",children:"Stud Earrings"}),t.jsx("option",{value:"Dangle",children:"Dangle Earrings"}),t.jsx("option",{value:"Pendant",children:"Pendants"}),t.jsx("option",{value:"Necklace",children:"Necklaces"}),t.jsx("option",{value:"Bracelet",children:"Bracelets"}),t.jsx("option",{value:"Watch",children:"Watches"}),t.jsx("option",{value:"Jewelry Box",children:"Jewelry Boxes"}),t.jsx("option",{value:"Perfume Holder",children:"Perfume Holders"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Made By"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.madeBy,onChange:D=>_e({...J,madeBy:D.target.value}),children:[t.jsx("option",{value:"Spoil Me Vintage",children:"Spoil Me Vintage (Handmade)"}),t.jsx("option",{value:"Outsourced",children:"Outsourced"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Base Material"}),t.jsxs("div",{className:"bg-black/40 border border-gray-800 rounded-lg p-3",children:[t.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(D=>{const re=ke().some($e=>$e.toLowerCase()===D.toLowerCase());return t.jsx("button",{type:"button",onClick:()=>oe(D),className:re?"px-3 py-1.5 rounded-full text-xs font-bold border bg-cyan-600/20 border-cyan-500 text-cyan-200":"px-3 py-1.5 rounded-full text-xs font-medium border bg-zinc-900 border-gray-700 text-gray-300 hover:text-white hover:border-gray-500",title:re?"Remove":"Add",children:t.jsxs("span",{className:"inline-flex items-center gap-1",children:[re&&t.jsx(mt,{size:14}),D]})},D)})}),t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:A,onChange:D=>ne(D.target.value),placeholder:"Add new material (saved)",onKeyDown:D=>{D.key==="Enter"&&(D.preventDefault(),be())}}),t.jsx("button",{type:"button",onClick:be,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-200 hover:text-white hover:bg-zinc-700 transition-colors",children:"Save"})]}),t.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Selected: ",ke().length?ke().join(", "):"None"]})]})]})]})]}),E==="pricing"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[t.jsx(ws,{size:18,className:"text-green-400"})," South African Rand (ZAR)"]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (R) *"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-green-400",value:J.price,onChange:D=>_e({...J,price:parseFloat(D.target.value)||0})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>_e({...J,priceUSD:parseFloat((J.price/29).toFixed(2))}),className:"flex-1 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded-lg",children:"Convert to USD"}),t.jsx("button",{onClick:()=>_e({...J,priceUSD:0}),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold rounded-lg",children:"Reset USD"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Member Price (R)"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-purple-400",value:J.memberPrice||"",readOnly:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (R)"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.compareAtPrice||"",onChange:D=>_e({...J,compareAtPrice:parseFloat(D.target.value)||0})})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[t.jsx(ws,{size:18,className:"text-yellow-400"})," United States Dollar (USD)"]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (USD) *"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-yellow-400",value:J.priceUSD,onChange:D=>_e({...J,priceUSD:parseFloat(D.target.value)||0})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>_e({...J,price:parseFloat((J.priceUSD*29).toFixed(2))}),className:"flex-1 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded-lg",children:"Convert to R"}),t.jsx("button",{onClick:()=>_e({...J,price:0}),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold rounded-lg",children:"Reset R"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Member Price (USD)"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-purple-400",value:J.memberPriceUSD||"",readOnly:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (USD)"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.compareAtPriceUSD||"",onChange:D=>_e({...J,compareAtPriceUSD:parseFloat(D.target.value)||0})})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 shadow-lg",children:[t.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 mb-4",children:[t.jsx(uI,{size:18,className:"text-cyan-400"})," Profit & Margins"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[t.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-red-900/30",children:[t.jsx("span",{className:"text-gray-400 block mb-1",children:"Total Unit Cost"}),t.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["R",G.toFixed(2)]}),t.jsxs("div",{className:"text-xs text-gray-500 mt-2 space-y-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Product:"})," ",t.jsxs("span",{children:["R",(J.costPrice||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Shipping:"})," ",t.jsxs("span",{children:["R",(J.shippingCost||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Packaging:"})," ",t.jsxs("span",{children:["R",Ln.toFixed(2)]})]})]})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-green-900/30",children:[t.jsx("span",{className:"text-gray-400 block mb-1",children:"Retail Profit"}),t.jsxs("div",{className:`text-2xl font-bold ${K>0?"text-green-400":"text-red-500"}`,children:["R",K.toFixed(2)]})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-purple-900/30",children:[t.jsx("span",{className:"text-gray-400 block mb-1",children:"Member Profit"}),t.jsxs("div",{className:`text-2xl font-bold ${Y>0?"text-purple-400":"text-red-500"}`,children:["R",Y.toFixed(2)]})]})]})]}),t.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[t.jsx(Cc,{size:16,className:"text-pink-500"})," Packaging Breakdown"]}),t.jsxs("select",{className:"bg-zinc-800 text-xs text-gray-300 border border-gray-700 rounded px-2 py-1",onChange:D=>Hr(D.target.value),value:"",children:[t.jsx("option",{value:"",children:"Load Preset..."}),o.map((D,re)=>t.jsxs("option",{value:D.name,children:[D.name," (R",D.unitCost.toFixed(2),")"]},re))]})]}),(((le=J.packaging)==null?void 0:le.length)||0)<3&&t.jsxs("button",{onClick:tn,className:"text-xs flex items-center gap-1 text-cyan-400 hover:text-cyan-300",children:[t.jsx(an,{size:12})," Add Item"]})]}),t.jsx("div",{className:"space-y-3",children:(Oe=J.packaging)==null?void 0:Oe.map((D,re)=>t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end bg-zinc-900 p-3 rounded border border-gray-800",children:[t.jsxs("div",{className:"md:col-span-3",children:[t.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Item Name"}),t.jsx("input",{type:"text",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:D.name,onChange:$e=>fr(re,"name",$e.target.value)})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Cost (R)"}),t.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:D.bulkCost,onChange:$e=>fr(re,"bulkCost",parseFloat($e.target.value)||0)})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Qty"}),t.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:D.bulkQuantity,onChange:$e=>fr(re,"bulkQuantity",parseFloat($e.target.value)||0)})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Unit Cost"}),t.jsxs("div",{className:"w-full p-1.5 bg-zinc-800 border border-gray-700 rounded text-xs text-red-300 font-mono",children:["R",D.unitCost.toFixed(2)]})]}),t.jsxs("div",{className:"md:col-span-3 flex justify-end pb-1 gap-2",children:[t.jsx("button",{onClick:()=>bi(re),className:"text-blue-400 hover:text-blue-300 bg-blue-900/20 p-1 rounded hover:bg-blue-900/40 transition-colors",title:"Save as Preset",children:t.jsx(oc,{size:16})}),t.jsx("button",{onClick:()=>Gr(re),className:"text-gray-600 hover:text-red-400 p-1",children:t.jsx(Mr,{size:16})})]})]},re))})]})]}),E==="inventory"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Current Stock"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.stock,onChange:D=>_e({...J,stock:parseInt(D.target.value)||0})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sold Count"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:J.soldCount,onChange:D=>_e({...J,soldCount:parseInt(D.target.value)||0})})]}),t.jsxs("div",{className:"col-span-3",children:[t.jsxs("label",{className:"inline-flex items-center gap-2 mt-2",children:[t.jsx("input",{type:"checkbox",checked:!!J.isSoldOut,onChange:D=>{const re=D.target.checked;_e($e=>({...$e,isSoldOut:re,stock:re?0:$e.stock}))},className:"form-checkbox h-4 w-4 text-red-600 bg-black border-gray-600"}),t.jsx("span",{className:"text-sm text-white font-bold",children:'Mark as "Sorry Just SOLD out!" (Persistent)'})]}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'When checked, this product will display a "Sorry Just SOLD out!" badge to customers regardless of stock. Only uncheck to make it available again.'})]})]}),J.type==="Ring"&&t.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[t.jsx("h3",{className:"text-sm font-bold text-white mb-3",children:"Ring Sizes"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.keys(ye.ringStock||{}).map(D=>{var re;return t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:["Size ",D]}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded text-white text-sm",value:((re=J.ringStock)==null?void 0:re[D])||0,onChange:$e=>_e({...J,ringStock:{...J.ringStock,[D]:parseInt($e.target.value)||0}})})]},D)})})]}),(J.type==="Stud"||J.type==="Dangle")&&t.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("input",{type:"checkbox",id:"showEarringOptions",checked:J.showEarringOptions,onChange:D=>_e({...J,showEarringOptions:D.target.checked}),className:"rounded bg-black border-gray-600 text-pink-600 focus:ring-pink-500"}),t.jsx("label",{htmlFor:"showEarringOptions",className:"text-sm font-bold text-white",children:"Enable Material Customization"})]}),J.showEarringOptions&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex gap-2 flex-wrap",children:On.map(D=>t.jsxs("div",{className:"group relative inline-flex",children:[t.jsxs("button",{onClick:()=>zs(D.name,D.modifier,D.description),className:"text-xs bg-gray-800 hover:bg-gray-700 text-gray-300 px-2 py-1 rounded border border-gray-600",children:["+ ",D.name]}),c.some(re=>re.name===D.name)&&t.jsx("button",{onClick:re=>Wr(re,D.name),className:"absolute -top-1.5 -right-1.5 bg-red-600 text-white rounded-full p-0.5 w-3 h-3 flex items-center justify-center text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:"X"})]},D.name))}),t.jsx("div",{className:"space-y-2",children:(ht=J.earringMaterials)==null?void 0:ht.map((D,re)=>t.jsxs("div",{className:"flex items-center gap-2 bg-black p-2 rounded border border-gray-800",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-white",children:D.name}),t.jsxs("span",{className:"text-xs text-pink-400",children:["+R",D.modifier]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:D.description})]}),t.jsx("button",{onClick:()=>yi(re),className:"text-gray-600 hover:text-red-400",children:t.jsx(Mr,{size:14})})]},re))}),t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end pt-2 border-t border-gray-700",children:[t.jsx("div",{className:"col-span-3",children:t.jsx("input",{type:"text",placeholder:"Custom Material",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Ss,onChange:D=>os(D.target.value)})}),t.jsx("div",{className:"col-span-2",children:t.jsx("input",{type:"number",placeholder:"Price Mod",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Le,onChange:D=>fs(parseFloat(D.target.value)||0)})}),t.jsx("div",{className:"col-span-4",children:t.jsx("input",{type:"text",placeholder:"Description",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:ls,onChange:D=>Ws(D.target.value)})}),t.jsxs("div",{className:"col-span-3 flex gap-1",children:[t.jsx("button",{onClick:()=>qr(!1),className:"flex-1 p-1.5 bg-pink-600 text-white rounded text-xs flex items-center justify-center",title:"Add to Product",children:t.jsx(an,{size:14})}),t.jsx("button",{onClick:()=>qr(!0),className:"flex-1 p-1.5 bg-cyan-600 text-white rounded text-xs flex items-center justify-center",title:"Add & Save Preset",children:t.jsx(oc,{size:14})})]})]})]})]}),(J.type==="Pendant"||J.type==="Necklace")&&t.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Chain Styles"}),t.jsx("div",{className:"flex gap-2",children:["Metal Chain","Leather Cord","Ribbon"].map(D=>{var re;return t.jsx("button",{onClick:()=>{var Ve,Je;const Ee=((Ve=J.chainStyles)==null?void 0:Ve.includes(D))?(Je=J.chainStyles)==null?void 0:Je.filter(bt=>bt!==D):[...J.chainStyles||[],D];_e({...J,chainStyles:Ee})},className:`px-3 py-1 rounded text-xs border ${(re=J.chainStyles)!=null&&re.includes(D)?"bg-cyan-900/50 border-cyan-500 text-cyan-400":"bg-black border-gray-700 text-gray-400"}`,children:D},D)})})]}),((it=J.chainStyles)==null?void 0:it.includes("Metal Chain"))&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Available Lengths"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(EO).map(D=>{var re,$e;return t.jsxs("div",{onClick:()=>{const Ee=J.pendantChainLengths||{};_e({...J,pendantChainLengths:{...Ee,[D]:!Ee[D]}})},className:`p-2 rounded border cursor-pointer text-xs flex items-center justify-between ${(re=J.pendantChainLengths)!=null&&re[D]?"bg-green-900/20 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-500"}`,children:[t.jsx("span",{children:D}),(($e=J.pendantChainLengths)==null?void 0:$e[D])&&t.jsx(mt,{size:12})]},D)})})]})]})]}),E==="marketing"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[t.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[t.jsx(lc,{size:18,className:"text-cyan-400"})," Product Visibility & Features"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${J.isNewArrival?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[t.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${J.isNewArrival?"bg-cyan-500 border-cyan-500":"border-gray-600"}`,children:J.isNewArrival&&t.jsx(mt,{size:14,className:"text-black"})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:J.isNewArrival,onChange:D=>_e({...J,isNewArrival:D.target.checked})}),t.jsx("span",{className:"text-sm font-bold text-white",children:"New Arrival"})]}),t.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${J.isBestSeller?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[t.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${J.isBestSeller?"bg-yellow-500 border-yellow-500":"border-gray-600"}`,children:J.isBestSeller&&t.jsx(mt,{size:14,className:"text-black"})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:J.isBestSeller,onChange:D=>_e({...J,isBestSeller:D.target.checked})}),t.jsx("span",{className:"text-sm font-bold text-white",children:"Best Seller"})]}),t.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${J.isJewelrySet?"bg-purple-900/20 border-purple-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[t.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${J.isJewelrySet?"bg-purple-500 border-purple-500":"border-gray-600"}`,children:J.isJewelrySet&&t.jsx(mt,{size:14,className:"text-white"})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:J.isJewelrySet,onChange:D=>_e({...J,isJewelrySet:D.target.checked})}),t.jsx("span",{className:"text-sm font-bold text-white",children:"Jewelry Set"})]})]}),t.jsx("h4",{className:"text-sm text-gray-400 font-bold mt-6 mb-3 uppercase tracking-wider",children:"Category Features"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedRing,onChange:D=>_e({...J,isFeaturedRing:D.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Ring"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedBracelet,onChange:D=>_e({...J,isFeaturedBracelet:D.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Bracelet"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isUniquePendant,onChange:D=>_e({...J,isUniquePendant:D.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Unique Pendant"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedStud,onChange:D=>_e({...J,isFeaturedStud:D.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Studs"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedDangle,onChange:D=>_e({...J,isFeaturedDangle:D.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Dangles"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedWatch,onChange:D=>_e({...J,isFeaturedWatch:D.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Watch"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedJewelryBox,onChange:D=>_e({...J,isFeaturedJewelryBox:D.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Jewelry Box"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J.isFeaturedPerfumeHolder,onChange:D=>_e({...J,isFeaturedPerfumeHolder:D.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Perfume Holder"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Tags & SEO"}),t.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:J.tags.map((D,re)=>t.jsxs("span",{className:"bg-gray-800 text-gray-300 text-xs px-2 py-1 rounded flex items-center gap-1",children:[D,t.jsx(as,{size:12,className:"cursor-pointer",onClick:()=>Gn("tags",re)})]},re))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:kt,onChange:D=>xt(D.target.value),onKeyDown:D=>D.key==="Enter"&&Bt("tags",kt,xt),placeholder:"Add tag..."}),t.jsx("button",{onClick:()=>Bt("tags",kt,xt),className:"bg-gray-800 p-2 rounded text-white",children:t.jsx(an,{size:18})})]})]})]}),E==="reviews"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsxs("div",{className:"flex gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex-1 bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-500/30 p-5 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3 text-cyan-400 font-bold text-lg",children:[t.jsx(Qy,{size:24}),t.jsx("h3",{children:"AI South African Reviewer"})]}),t.jsxs("button",{onClick:Et,disabled:I,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[I?t.jsx(Rr,{className:"animate-spin",size:18}):t.jsx(js,{size:18})," Generate Standard Reviews"]})]}),(J.isUniquePendant||J.type==="Pendant"||J.type==="Necklace")&&t.jsxs("div",{className:"flex-1 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/30 p-5 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3 text-purple-400 font-bold text-lg",children:[t.jsx(xI,{size:24}),t.jsx("h3",{children:"Unique Piece Reviewer"})]}),t.jsxs("button",{onClick:Tt,disabled:I,className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[I?t.jsx(Rr,{className:"animate-spin",size:18}):t.jsx(js,{size:18})," Generate Unique Reviews"]})]})]}),t.jsx("div",{className:"space-y-3",children:(gt=J.reviews)==null?void 0:gt.map(D=>t.jsx("div",{className:"bg-black p-3 rounded border border-gray-800",children:ve===D.id&&ue?t.jsxs("div",{className:"space-y-3 animate-in fade-in",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:ue.userName,onChange:re=>se({...ue,userName:re.target.value}),placeholder:"Name"}),t.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:ue.location,onChange:re=>se({...ue,location:re.target.value}),placeholder:"Location"}),t.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white col-span-2",value:ue.date,onChange:re=>se({...ue,date:re.target.value}),placeholder:"Date (YYYY-MM-DD or Text)"})]}),t.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(re=>t.jsx(Rn,{size:16,className:"cursor-pointer",fill:re<=ue.rating?"orange":"none",stroke:re<=ue.rating?"orange":"gray",onClick:()=>se({...ue,rating:re})},re))}),t.jsx("textarea",{className:"w-full bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",rows:3,value:ue.content,onChange:re=>se({...ue,content:re.target.value})}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>X(null),className:"px-3 py-1 bg-zinc-800 text-white text-xs rounded hover:bg-zinc-700",children:"Cancel"}),t.jsx("button",{onClick:hr,className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-500",children:"Save"})]})]}):t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-300",children:[D.userName," ",t.jsxs("span",{className:"text-gray-600 font-normal",children:["from ",D.location]}),t.jsx("span",{className:"text-gray-500 font-normal ml-2",children:D.date})]}),t.jsx("div",{className:"flex text-yellow-400 gap-0.5 my-1",children:[1,2,3,4,5].map(re=>t.jsx(Rn,{size:10,fill:re<=D.rating?"currentColor":"none"},re))}),t.jsxs("p",{className:"text-xs text-gray-400 italic",children:['"',D.content,'"']})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>hn(D),className:"p-2 text-gray-400 hover:text-cyan-400",children:t.jsx(Vm,{size:16})}),t.jsx("button",{onClick:()=>Ut(D.id),className:"p-2 text-gray-400 hover:text-red-400",children:t.jsx(Mr,{size:16})})]})]})},D.id))})]}),E==="promotions"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[t.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ur,{className:"text-green-400"}),t.jsx("div",{children:t.jsx("h3",{className:"text-lg font-bold text-white",children:"Retail Base Price"})})]}),t.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["R",J.price.toFixed(2)]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.jsx("div",{className:"space-y-8",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-4",children:[t.jsx(lc,{size:18,className:"text-cyan-400"})," Non-Member Promo"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Promotional Price (R)"}),t.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:J.promoPrice||"",onChange:D=>_e({...J,promoPrice:parseFloat(D.target.value)||0})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Discount (%)"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white",value:((J.price-(J.promoPrice||0))/J.price*100).toFixed(0),readOnly:!0}),t.jsx(BN,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[t.jsx(cr,{size:12})," Start"]}),t.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((Ht=J.promoStartsAt)==null?void 0:Ht.slice(0,16))||"",onChange:D=>_e({...J,promoStartsAt:D.target.value})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[t.jsx(cr,{size:12})," End"]}),t.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((_t=J.promoExpiresAt)==null?void 0:_t.slice(0,16))||"",onChange:D=>_e({...J,promoExpiresAt:D.target.value})})]})]})]})})})]}),E==="gifts"&&t.jsx("div",{className:"space-y-6 animate-in fade-in",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(us,{size:18,className:"text-pink-500"})," Promotional Gift"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Select Gift Product"}),t.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm",value:J.giftProductId||"",onChange:D=>_e({...J,giftProductId:D.target.value}),children:[t.jsx("option",{value:"",children:"-- No Gift --"}),n.filter(D=>D.id!==J.id).map(D=>t.jsx("option",{value:D.id,children:D.name},D.id))]})]}),J.giftProductId&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Gift Value (R)"}),t.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:J.giftValue||"",onChange:D=>_e({...J,giftValue:parseFloat(D.target.value)||0})})]})]})]})}),E==="media"&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 border border-pink-500/30 p-5 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3 text-pink-400 font-bold text-lg",children:[t.jsx(js,{size:20}),t.jsx("h3",{children:"AI Product Analyst"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("input",{type:"file",accept:"image/*",ref:ie,className:"hidden",onChange:je}),t.jsxs("button",{onClick:()=>{var D;return(D=ie.current)==null?void 0:D.click()},disabled:q,className:"flex-1 py-3 bg-zinc-800 hover:bg-pink-600 text-white rounded-lg border border-gray-600 hover:border-pink-400 transition-all flex items-center justify-center gap-2 text-sm font-semibold disabled:opacity-50 shadow-lg",children:[q?t.jsx(Rr,{className:"animate-spin",size:18}):t.jsx(mI,{size:18}),q?"Analyzing Image...":"Upload & Analyze with AI"]})]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Description"}),t.jsxs("button",{onClick:ts,disabled:U,className:"text-xs text-cyan-400 flex items-center gap-1 hover:text-cyan-300",children:[t.jsx(Qy,{size:12})," ",U?"Writing...":"Generate from Text"]})]}),t.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-32 text-white text-sm",value:J.description,onChange:D=>_e({...J,description:D.target.value})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"When & How to Wear"}),t.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-24 text-white text-sm",value:J.whenAndHowToWear,onChange:D=>_e({...J,whenAndHowToWear:D.target.value}),placeholder:"Styling advice..."})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Images"}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-2",children:[J.images.filter(D=>D!=="").map((D,re)=>t.jsxs("div",{className:"relative group aspect-square rounded-lg overflow-hidden border border-gray-800 bg-black",children:[t.jsx("img",{src:D,alt:"",className:"w-full h-full object-cover",onError:eo}),t.jsx("button",{onClick:()=>un(re),className:"absolute top-1 right-1 bg-black/60 hover:bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-all",children:t.jsx(as,{size:12})})]},re)),t.jsxs("div",{onClick:()=>{var D;return(D=Se.current)==null?void 0:D.click()},className:"aspect-square rounded-lg border border-dashed border-gray-700 bg-zinc-900/30 flex flex-col items-center justify-center text-gray-500 cursor-pointer hover:bg-zinc-800 hover:border-gray-500 transition-all",children:[t.jsx(an,{size:24}),t.jsx("span",{className:"text-[10px] mt-1",children:"Add Image"})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:Se,className:"hidden",onChange:Ye}),t.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:Be,className:"hidden",onChange:Ye}),t.jsxs("button",{onClick:()=>{var D;return(D=Se.current)==null?void 0:D.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[t.jsx(yI,{size:16,className:"text-cyan-400"})," Upload"]}),t.jsxs("button",{onClick:()=>{var D;return(D=Be.current)==null?void 0:D.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[t.jsx(Ka,{size:16,className:"text-pink-500"})," Camera"]})]})]})]})]}),t.jsxs("div",{className:"p-4 border-t border-gray-800 bg-zinc-950 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Cancel"}),t.jsxs("button",{onClick:Vt,disabled:z,className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2 shadow transition-colors text-sm font-semibold disabled:opacity-50",children:[z?t.jsx(Rr,{className:"animate-spin",size:18}):t.jsx(oc,{size:18})," ",z?"Saving...":"Save Product"]})]})]}):_?t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm p-8 text-center",children:[t.jsx(Rr,{className:"animate-spin mx-auto mb-4",size:32}),t.jsx("p",{className:"text-gray-400",children:"Loading products..."})]}):Ge.length===0?t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm p-8 text-center",children:[t.jsx(Cc,{className:"mx-auto mb-4 text-gray-500",size:48}),t.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No products found"}),t.jsx("p",{className:"text-gray-500 mb-4",children:n.length===0?"No products have been loaded from the database yet.":"No products match your current filters."}),n.length===0&&t.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Check the browser console for any Supabase connection errors."}),t.jsxs("button",{onClick:ms,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 shadow-lg transition-colors mx-auto",children:[t.jsx(an,{size:18})," Add First Product"]})]}):t.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:t.jsxs("table",{className:"w-full text-left text-sm",children:[t.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:"Product"}),t.jsx("th",{className:"p-4",children:"Type"}),t.jsx("th",{className:"p-4",children:"SKU"}),t.jsx("th",{className:"p-4",children:"Price (R)"}),t.jsx("th",{className:"p-4",children:"Price (USD)"}),t.jsx("th",{className:"p-4",children:"Stock"}),t.jsx("th",{className:"p-4",children:"Status"}),t.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:Ge.map(D=>t.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[t.jsxs("td",{className:"p-4 flex items-center gap-3",children:[t.jsx("img",{src:D.images[0]||"https://via.placeholder.com/40",className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:"",onError:eo}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-200 block",children:D.name}),t.jsx("span",{className:"text-xs text-gray-500",children:D.category})]})]}),t.jsx("td",{className:"p-4 text-gray-400",children:Ne(We(D))}),t.jsx("td",{className:"p-4 text-gray-500 font-mono text-xs",children:D.code}),t.jsxs("td",{className:"p-4 font-medium text-green-400",children:["R",D.price?D.price.toFixed(2):"0.00"]}),t.jsxs("td",{className:"p-4 font-medium text-yellow-400",children:["$ ",D.priceUSD?D.priceUSD.toFixed(2):"0.00"]}),t.jsx("td",{className:"p-4 text-gray-300",children:D.stock}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${D.status==="published"?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:D.status})}),t.jsx("td",{className:"p-4 text-right",children:t.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx("button",{onClick:()=>Ls(D),className:"p-2 text-gray-400 hover:text-cyan-400",children:t.jsx(Vm,{size:16})}),t.jsx("button",{onClick:()=>ks(D.id),className:"p-2 text-gray-400 hover:text-red-400",children:t.jsx(Mr,{size:16})})]})})]},D.id))})]})}),!C&&t.jsx("div",{className:"fixed right-6 bottom-6 z-50",children:t.jsx("button",{onClick:ms,title:"Add Product",className:"w-14 h-14 flex items-center justify-center rounded-full bg-pink-600 hover:bg-pink-500 text-white shadow-lg",children:t.jsx(an,{size:20})})}),t.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/20 to-orange-900/20 border border-yellow-500/30 p-6 rounded-xl mt-6",children:[t.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[t.jsx(Lt,{size:18,className:"text-yellow-400"})," Manual Winner Override"]}),t.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Override the current week's winner for social proof notifications. Leave empty to use auto-generated winners."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Winner Name"}),t.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(N==null?void 0:N.name)||"",onChange:D=>T(N?{...N,name:D.target.value}:{name:D.target.value,prize:500,currency:"ZAR",rank:1}),placeholder:"e.g. John Doe"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prize Amount"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(N==null?void 0:N.prize)||"",onChange:D=>T(N?{...N,prize:parseFloat(D.target.value)||0}:{name:"",prize:parseFloat(D.target.value)||0,currency:"ZAR",rank:1}),placeholder:"500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Currency"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(N==null?void 0:N.currency)||"ZAR",onChange:D=>T(N?{...N,currency:D.target.value}:{name:"",prize:500,currency:D.target.value,rank:1}),children:[t.jsx("option",{value:"ZAR",children:"ZAR (R)"}),t.jsx("option",{value:"USD",children:"USD ($)"})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[t.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Clear Override"}),t.jsx("button",{onClick:()=>alert("Manual winner set!"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-500 transition-colors text-sm",children:"Set Winner"})]})]})]})},AO=()=>{const{categories:n,addCategory:e,updateCategory:s,deleteCategory:r,replaceCategories:i}=wt(),o=S.useRef({}),[c,u]=S.useState(null),f=(v,N)=>{const T=[...n],_=N==="up"?v-1:v+1;_>=0&&_<T.length&&([T[v],T[_]]=[T[_],T[v]],i(T))},h=async(v,N)=>{if(!N)return;try{u(v);const _=Date.now(),C=`categories/${v}/${_}_${N.name}`,R=await Gu("categories",C,N),z=n.find($=>$.id===v);z&&s({...z,image:R}),u(null);return}catch(_){console.warn("Supabase upload failed, falling back to base64:",_)}const T=new FileReader;T.onloadend=()=>{const _=n.find(C=>C.id===v);_&&typeof T.result=="string"&&s({..._,image:T.result}),u(null)},T.readAsDataURL(N)},x=()=>{e({id:`cat_${Date.now()}`,name:"New Collection",image:"https://picsum.photos/400/400?grayscale",description:""})};return t.jsxs("div",{className:"space-y-6 max-w-4xl",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Category Management"}),t.jsxs("button",{onClick:x,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 transition-colors text-sm",children:[t.jsx(an,{size:18})," Add Category"]})]}),t.jsxs("div",{className:"space-y-4",children:[n.map((v,N)=>t.jsxs("div",{className:"flex items-center gap-4 bg-zinc-900 p-4 rounded-xl border border-gray-800 shadow-sm animate-in fade-in",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("button",{onClick:()=>f(N,"up"),disabled:N===0,className:`p-1 rounded hover:bg-gray-800 ${N===0?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:t.jsx(dI,{size:18})}),t.jsx("button",{onClick:()=>f(N,"down"),disabled:N===n.length-1,className:`p-1 rounded hover:bg-gray-800 ${N===n.length-1?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:t.jsx(cI,{size:18})})]}),t.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Collection Name"}),t.jsx("input",{type:"text",value:v.name,onChange:T=>s({...v,name:T.target.value}),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm focus:border-cyan-400 focus:outline-none"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative w-12 h-12",children:[t.jsx("img",{src:v.image,alt:v.name,className:`w-12 h-12 rounded object-cover bg-zinc-800 border border-gray-700 ${c===v.id?"opacity-50":""}`}),c===v.id&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(Rr,{size:16,className:"animate-spin text-pink-500"})})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Cover Image"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>{var T;return(T=o.current[v.id])==null?void 0:T.click()},disabled:c===v.id,className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-gray-200 text-xs rounded border border-gray-600 transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:c===v.id?"Uploading...":"Change Image"}),t.jsx("input",{type:"file",ref:T=>{o.current[v.id]=T},className:"hidden",accept:"image/*",onChange:T=>T.target.files&&h(v.id,T.target.files[0])})]})]})]})]}),t.jsx("div",{className:"ml-2",children:t.jsx("button",{onClick:()=>{window.confirm("Delete this category?")&&r(v.id)},className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-900/20 rounded-full transition-all",children:t.jsx(as,{size:20})})})]},v.id)),n.length===0&&t.jsx("div",{className:"text-center py-12 text-gray-500",children:'No categories found. Click "Add Category" to start.'})]})]})},IO=()=>{const{vouchers:n,addVoucher:e,deleteVoucher:s,cart:r,currency:i}=wt(),[o,c]=S.useState(10),[u,f]=S.useState(""),[h,x]=S.useState(""),[v,N]=S.useState(""),[T,_]=S.useState(""),[C,R]=S.useState(null),[z,$]=S.useState(!1),U=r.filter(I=>I.code==="GV-DIGITAL"),Z=()=>{const I="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let k="";for(let E=0;E<12;E++)E>0&&E%4===0&&(k+="-"),k+=I.charAt(Math.floor(Math.random()*I.length));_(k)},q=async()=>{if(!o||!T)return;$(!0);const I=o*29,k={code:T,discountType:"fixed",value:I,minSpend:I,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};if(e(k),h)try{const E=await Ps("users",{filters:{email:h},limit:1});if(E&&E.length>0){const L=E[0],O={id:`gift_recv_${Date.now()}`,type:"gift_received",title:"You received a Gift Voucher!",message:`Spoil Me Vintage sent you a voucher worth ${i==="ZAR"?"R":"$"}${i==="ZAR"?I:o}.`,date:new Date().toISOString(),isRead:!1,voucherData:{code:T,amount:I,meta:{recipientName:u||L.name||"Valued Customer",senderName:"Spoil Me Vintage Team",message:v||"Enjoy a little something special from us!",deliveryMethod:"recipient"}}};await ea("notifications",{user_id:L.id||L.uid,...O}),alert(`Voucher created AND sent to ${h}!`)}else alert(`Voucher created, but user with email ${h} was not found. Please send the code manually.`)}catch(E){console.error("Error sending voucher:",E),alert("Voucher created, but failed to send to user due to an error.")}_(""),f(""),x(""),N(""),$(!1)},V=I=>{navigator.clipboard.writeText(I),R(I),setTimeout(()=>R(null),2e3)};return t.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Gift Card Management"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Generate valid codes and manage active vouchers."})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[U.length>0&&t.jsxs("div",{className:"bg-pink-900/10 border border-pink-500/30 p-4 rounded-xl mb-6",children:[t.jsxs("h3",{className:"text-pink-400 font-bold flex items-center gap-2 mb-3",children:[t.jsx(ul,{size:18})," Pending Requests (",U.length,")"]}),t.jsx("div",{className:"space-y-2",children:U.map((I,k)=>t.jsxs("div",{className:"bg-zinc-900 p-3 rounded-lg border border-pink-500/20 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-white text-sm font-medium",children:I.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Value: ",i==="ZAR"?"R":"$",i==="ZAR"?I.price:(I.price/29).toFixed(0)]})]}),t.jsx("button",{onClick:()=>{c(i==="ZAR"?I.price:I.price/29),f("Customer"),Z()},className:"px-3 py-1.5 bg-pink-600 text-white text-xs rounded hover:bg-pink-500",children:"Process"})]},k))})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl shadow-sm",children:[t.jsxs("h2",{className:"font-bold text-white mb-6 flex items-center gap-2",children:[t.jsx(an,{size:20,className:"text-cyan-400"})," Issue New Voucher"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Voucher Value (USD)"}),t.jsx("input",{type:"number",min:"10",max:"100",value:o,onChange:I=>c(parseFloat(I.target.value)),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white font-bold focus:border-cyan-400 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Recipient Name"}),t.jsx("input",{type:"text",value:u,onChange:I=>f(I.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white focus:border-cyan-400 outline-none",placeholder:"e.g. Sarah"})]})]}),t.jsxs("div",{className:"bg-black/30 border border-gray-700 rounded-xl p-4 mb-6",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(rh,{size:14})," Send Directly to User (Optional)"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"User Email Address"}),t.jsx("input",{type:"email",value:h,onChange:I=>x(I.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"user@example.com (Must be registered)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Custom Message"}),t.jsx("textarea",{rows:2,value:v,onChange:I=>N(I.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Enjoy your gift!"})]})]})]}),t.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 mb-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 w-full",children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Unique Voucher Code"}),t.jsx("div",{className:"font-mono text-2xl text-cyan-400 tracking-widest break-all",children:T||"XXXX-XXXX-XXXX"})]}),t.jsxs("button",{onClick:Z,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors whitespace-nowrap",children:[t.jsx(Ec,{size:16})," Generate Number"]})]}),t.jsx("button",{onClick:q,disabled:!T||z,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center justify-center gap-2",children:z?"Processing...":h?"Create & Send to User":"Activate Voucher Only"})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[t.jsx("h2",{className:"font-bold text-white mb-4",children:"Active Vouchers"}),n.length===0?t.jsx("p",{className:"text-gray-500 text-sm",children:"No active vouchers."}):t.jsx("div",{className:"space-y-3",children:n.map((I,k)=>t.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-gray-600 transition-colors",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-mono text-cyan-400 font-bold",children:I.code}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Value: ",i==="ZAR"?"R":"$",i==="ZAR"?I.value:(I.value/29).toFixed(0),"  Expires: ",new Date(I.expiresAt).toLocaleDateString()]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>V(I.code),className:"p-2 text-gray-500 hover:text-white",children:C===I.code?t.jsx(mt,{size:16,className:"text-green-400"}):t.jsx(nh,{size:16})}),t.jsx("button",{onClick:()=>s(I.code),className:"p-2 text-gray-500 hover:text-red-400",children:t.jsx(Mr,{size:16})})]})]},k))})]})]}),t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"sticky top-6",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[t.jsx(jc,{size:16})," Card Preview"]}),t.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),t.jsxs("div",{className:"relative h-full p-6 flex flex-col justify-between z-10",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("div",{className:"font-cherry text-xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400",children:"Spoil Me Vintage"}),t.jsxs("div",{className:"text-3xl font-bold text-white font-architects",children:[i==="ZAR"?"R":"$",i==="ZAR"?(o*29).toFixed(0):o]})]}),t.jsxs("div",{className:"text-center my-auto",children:[t.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-[0.3em] mb-2",children:"VOUCHER CODE"}),t.jsx("div",{className:"bg-white/5 border border-white/10 rounded px-4 py-2 inline-block backdrop-blur-sm",children:t.jsx("span",{className:"font-mono text-xl md:text-2xl font-bold text-cyan-400 tracking-wider",children:T||"--"})})]}),t.jsxs("div",{className:"flex justify-between items-end text-[10px] text-gray-500 uppercase tracking-wider",children:[t.jsxs("div",{children:["To: ",u||"Valued Customer",t.jsx("div",{className:"font-handwriting text-lg text-gray-300 normal-case mt-1",children:"Admin Team"})]}),t.jsxs("div",{className:"text-right",children:["Valid for 3 Years",t.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date().toLocaleDateString()})]})]})]})]}),t.jsxs("div",{className:"mt-6 bg-zinc-900/50 p-4 rounded-xl border border-gray-800 text-sm text-gray-400",children:[t.jsx("p",{className:"mb-2 font-bold text-white",children:"Sending Instructions:"}),t.jsxs("ul",{className:"list-disc pl-4 space-y-2 text-xs",children:[t.jsx("li",{children:"Set the Value and generate a unique code."}),t.jsxs("li",{children:[t.jsx("strong",{children:"Option A (Manual):"}),' Click "Activate Voucher Only", then send the code via WhatsApp/Email manually.']}),t.jsxs("li",{children:[t.jsx("strong",{children:"Option B (Direct):"}),` Enter the user's Registered Email. The voucher will appear in their App Profile under "My Gifts".`]})]})]})]})})]})]})},RO=[{id:"fb",name:"Facebook",icon:"facebook",isConnected:!1,accountName:"",urlTemplate:"https://www.facebook.com/sharer/sharer.php?u={url}&quote={text}"},{id:"ig",name:"Instagram",icon:"instagram",isConnected:!1,accountName:"",urlTemplate:""},{id:"tk",name:"TikTok",icon:"video",isConnected:!1,accountName:"",urlTemplate:""},{id:"x",name:"X (Twitter)",icon:"twitter",isConnected:!1,accountName:"",urlTemplate:"https://twitter.com/intent/tweet?text={text}&url={url}"}],DO={fb:["Log in to your Facebook Brand Page in your browser or app.","Enter your Page Name below for the AI context.","When you click 'Post Now', we will open the Facebook Sharer tool.","Paste the caption we generate for you."],ig:["Ensure the Instagram App is installed on this device.","Enter your Instagram Handle (@name) below.","When you click 'Post Now', we will copy the caption to your clipboard.","We will then open Instagram. Create a new post and select the downloaded photo.","Long press in the caption box and select 'Paste'."],tk:["Ensure the TikTok App is installed.","Enter your Handle below.","We will copy the text and hashtags to your clipboard.","When TikTok opens, upload the video/photo and paste the caption."],x:["Log in to X (Twitter).","Enter your handle below.","We will automatically open a 'Compose Tweet' window with your text and link pre-filled."]},MO=()=>{var L;const{products:n}=wt(),[e,s]=S.useState(RO),[r,i]=S.useState(!1),[o,c]=S.useState(null),[u,f]=S.useState(""),[h,x]=S.useState(null),[v,N]=S.useState({}),[T,_]=S.useState(null),[C,R]=S.useState(!1),[z,$]=S.useState([]),[U,Z]=S.useState({posts:0,errors:0});S.useEffect(()=>{const O=localStorage.getItem("spv_social_config");O&&s(JSON.parse(O))},[]),S.useEffect(()=>{let O;return C&&(O=setInterval(()=>{if(n.length===0)return;const B=n[Math.floor(Math.random()*n.length)],A=e.filter(ke=>ke.isConnected),ne=A.length>0?A[Math.floor(Math.random()*A.length)]:e[Math.floor(Math.random()*e.length)],fe=new Date().toLocaleTimeString();$(ke=>[{time:fe,msg:`AI Worker: Analyzing "${B.name}" trends & hashtags...`,type:"process"},...ke].slice(0,6)),setTimeout(()=>{const ke=new Date().toLocaleTimeString();$(De=>[{time:ke,msg:`Server: Successfully scheduled post to ${ne.name} (Simulated)`,type:"success"},...De].slice(0,6)),Z(De=>({...De,posts:De.posts+1}))},2e3)},5e3)),()=>clearInterval(O)},[C,n,e]);const q=O=>{c(O),f(O.accountName||"")},V=()=>{if(!o)return;const O=e.map(B=>B.id===o.id?{...B,isConnected:!0,accountName:u}:B);s(O),localStorage.setItem("spv_social_config",JSON.stringify(O)),c(null)},I=O=>{const B=e.map(A=>A.id===O?{...A,isConnected:!1,accountName:""}:A);s(B),localStorage.setItem("spv_social_config",JSON.stringify(B))},k=async()=>{if(n.length===0)return;i(!0);const O=n[Math.floor(Math.random()*n.length)];x(O);const B={},A=e.filter(ne=>ne.isConnected);if(A.length===0){alert("Please connect at least one platform first."),i(!1);return}for(const ne of A){const fe=ne.accountName?`(Account: @${ne.accountName})`:"";B[ne.id]=await CO(O.name,`${ne.name} ${fe}`,O.price)}N(B),i(!1)},E=O=>{const B=v[O.id];if(!B||!h)return;const A=`${window.location.origin}/#/product/${h.id}`;if(navigator.clipboard.writeText(`${B} ${A}`).then(()=>{_(O.id),setTimeout(()=>_(null),2e3)}),O.id==="fb"||O.id==="x"){const ne=O.urlTemplate.replace("{url}",encodeURIComponent(A)).replace("{text}",encodeURIComponent(B));window.open(ne,"_blank","width=600,height=400")}else alert("Caption copied! Opening platform..."),O.id==="ig"&&window.open("https://instagram.com","_blank"),O.id==="tk"&&window.open("https://tiktok.com","_blank")};return t.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[o&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>c(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[t.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.id==="fb"&&t.jsx(ic,{size:24,className:"text-blue-500"}),o.id==="ig"&&t.jsx(dm,{size:24,className:"text-pink-500"}),o.id==="x"&&t.jsx(pu,{size:24,className:"text-white"}),o.id==="tk"&&t.jsx(Ka,{size:24,className:"text-cyan-400"}),"Connect ",o.name]}),t.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:t.jsx(as,{size:20})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 uppercase mb-1",children:"Account Handle / Name"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"@"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 pl-8 text-white focus:border-pink-500 outline-none",value:u,onChange:O=>f(O.target.value),placeholder:"spoilmevintage"})]})]}),t.jsxs("div",{className:"bg-black/30 p-4 rounded-lg border border-gray-800",children:[t.jsxs("h4",{className:"text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[t.jsx(zN,{size:14})," How to connect:"]}),t.jsx("ul",{className:"space-y-2",children:(L=DO[o.id])==null?void 0:L.map((O,B)=>t.jsxs("li",{className:"text-xs text-gray-400 flex gap-2",children:[t.jsx("span",{className:"bg-gray-800 w-4 h-4 rounded-full flex items-center justify-center text-[10px] shrink-0 mt-0.5",children:B+1}),O]},B))})]}),t.jsxs("button",{onClick:V,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl flex items-center justify-center gap-2 transition-colors",children:[t.jsx(oc,{size:18})," Save & Connect"]})]})]})]}),t.jsx("div",{className:"flex justify-between items-start",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Social Media Studio"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage accounts and automate daily content sharing."})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:e.map(O=>t.jsxs("div",{className:`p-4 rounded-xl border transition-all relative group ${O.isConnected?"bg-zinc-900 border-green-500/50 shadow-[0_0_10px_rgba(34,197,94,0.1)]":"bg-black border-gray-800 opacity-75"}`,children:[t.jsx("button",{onClick:()=>q(O),className:"absolute top-2 right-2 p-2 text-gray-500 hover:text-white hover:bg-gray-800 rounded-full transition-colors",children:t.jsx(Bm,{size:16})}),t.jsxs("div",{className:"flex flex-col items-center text-center pt-4 pb-2 cursor-pointer",onClick:()=>q(O),children:[t.jsxs("div",{className:`p-3 rounded-full mb-3 transition-colors ${O.isConnected?"bg-white text-black":"bg-gray-800 text-gray-500"}`,children:[O.id==="fb"&&t.jsx(ic,{size:24}),O.id==="ig"&&t.jsx(dm,{size:24}),O.id==="x"&&t.jsx(pu,{size:24}),O.id==="tk"&&t.jsx(Ka,{size:24})]}),t.jsx("h3",{className:"font-bold text-white text-sm",children:O.name}),O.isConnected?t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t.jsxs("p",{className:"text-xs text-green-400 font-medium",children:["@",O.accountName]})]}):t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Not Connected"})]}),O.isConnected&&t.jsx("button",{onClick:B=>{B.stopPropagation(),I(O.id)},className:"w-full mt-3 py-1 text-[10px] text-red-400 hover:text-red-300 border border-red-900/30 hover:bg-red-900/20 rounded",children:"Disconnect"}),!O.isConnected&&t.jsx("button",{onClick:()=>q(O),className:"w-full mt-3 py-1 text-[10px] text-cyan-400 hover:text-cyan-300 border border-cyan-900/30 hover:bg-cyan-900/20 rounded",children:"Configure"})]},O.id))}),t.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-500/30 rounded-2xl p-6 md:p-8 shadow-xl relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:t.jsx(DI,{size:120,className:"text-purple-500"})}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 relative z-10",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:`p-2 rounded-lg ${C?"bg-green-500/20 text-green-400":"bg-gray-800 text-gray-500"}`,children:t.jsx(kI,{size:24})}),t.jsx("h2",{className:"text-xl font-bold text-white",children:"Background Auto-Pilot (Demo)"})]}),t.jsx("p",{className:"text-sm text-gray-400 max-w-lg",children:"Enable this to simulate the server-side process that automatically picks products, writes captions, and schedules them to your connected accounts while you sleep."}),C&&t.jsxs("div",{className:"flex items-center gap-2 mt-4 text-xs text-green-400 font-mono bg-green-900/20 border border-green-500/30 px-3 py-1.5 rounded-lg w-fit animate-pulse",children:[t.jsx(oI,{size:14})," Service Running..."]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right hidden md:block",children:[t.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:U.posts}),t.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Posts Queued"})]}),t.jsxs("button",{onClick:()=>R(!C),className:`px-6 py-4 rounded-xl font-bold flex items-center gap-2 transition-all shadow-lg ${C?"bg-red-600 hover:bg-red-500 text-white shadow-red-900/20":"bg-purple-600 hover:bg-purple-500 text-white shadow-purple-900/20"}`,children:[C?t.jsx(jI,{size:20,fill:"currentColor"}):t.jsx(SI,{size:20,fill:"currentColor"}),C?"Stop Simulation":"Start Auto-Pilot"]})]})]}),t.jsxs("div",{className:"mt-8 bg-black rounded-xl border border-gray-800 font-mono text-xs p-4 h-48 overflow-y-auto shadow-inner relative",children:[t.jsxs("div",{className:"absolute top-2 right-2 text-gray-700 flex items-center gap-1 pointer-events-none",children:[t.jsx(TI,{size:14})," Console"]}),z.length===0?t.jsx("div",{className:"h-full flex items-center justify-center text-gray-600 italic",children:"System Idle. Press Start to begin simulation."}):t.jsx("div",{className:"space-y-2",children:z.map((O,B)=>t.jsxs("div",{className:"flex gap-3 animate-in slide-in-from-left-2 fade-in duration-300",children:[t.jsxs("span",{className:"text-gray-600 shrink-0",children:["[",O.time,"]"]}),t.jsxs("span",{className:`break-all ${O.type==="success"?"text-green-400":O.type==="process"?"text-yellow-400":"text-gray-300"}`,children:[O.type==="success"&&t.jsx(mt,{size:12,className:"inline mr-1"}),O.type==="process"&&t.jsx(Rr,{size:12,className:"inline mr-1 animate-spin"}),O.msg]})]},B))})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 md:p-8 shadow-xl",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 mb-8",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(js,{className:"text-pink-500"})," Manual Content Generator"]}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"One click to pick a product and write tailored captions for all your active platforms."})]}),t.jsxs("button",{onClick:k,disabled:r,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg flex items-center gap-2 disabled:opacity-50 transition-all",children:[r?t.jsx(Rr,{className:"animate-spin"}):t.jsx(Ec,{}),r?"Creating Strategy...":"Generate Today's Posts"]})]}),h&&t.jsxs("div",{className:"animate-in slide-in-from-bottom-4 fade-in",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6 bg-black p-4 rounded-xl border border-gray-800",children:[t.jsx("img",{src:h.images[0],alt:"",className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-pink-500 uppercase font-bold",children:"Today's Pick"}),t.jsx("h3",{className:"text-white font-bold",children:h.name}),t.jsxs("p",{className:"text-gray-400 text-xs",children:["R",h.price]})]}),t.jsx("div",{className:"ml-auto hidden md:block",children:t.jsxs("a",{href:h.images[0],download:!0,target:"_blank",rel:"noreferrer",className:"text-xs text-cyan-400 flex items-center gap-1 hover:underline",children:[t.jsx(bI,{size:14})," Download High-Res"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.filter(O=>O.isConnected).map(O=>t.jsxs("div",{className:"bg-black border border-gray-800 p-4 rounded-xl space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800 pb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-300",children:[O.id==="fb"&&t.jsx(ic,{size:16,className:"text-blue-500"}),O.id==="ig"&&t.jsx(dm,{size:16,className:"text-pink-500"}),O.id==="x"&&t.jsx(pu,{size:16,className:"text-white"}),O.id==="tk"&&t.jsx(Ka,{size:16,className:"text-cyan-400"}),O.name," Draft"]}),t.jsxs("button",{onClick:()=>E(O),className:"text-xs bg-zinc-800 hover:bg-pink-600 text-white px-3 py-1.5 rounded-full transition-colors flex items-center gap-1",children:[T===O.id?t.jsx(mt,{size:12}):t.jsx(al,{size:12}),T===O.id?"Copied!":"Post Now"]})]}),t.jsx("textarea",{className:"w-full h-32 bg-transparent text-sm text-gray-300 resize-none focus:outline-none",value:v[O.id]||"Generating...",readOnly:!0})]},O.id))})]}),!h&&!r&&t.jsx("div",{className:"text-center py-12 border border-dashed border-gray-800 rounded-xl",children:t.jsx("p",{className:"text-gray-500",children:'Click "Generate" to start your daily social media workflow.'})})]}),t.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-xl p-6",children:[t.jsxs("h3",{className:"text-blue-400 font-bold flex items-center gap-2 mb-3",children:[t.jsx(sh,{size:20})," System Capabilities Explained"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-gray-300",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white mb-2",children:"What this system CAN do:"}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[t.jsx("li",{children:"Use AI to generate unique, platform-specific captions for your products instantly."}),t.jsx("li",{children:"Organize your daily posting workflow into a single dashboard."}),t.jsx("li",{children:'Use "Web Intents" to open your social apps with text pre-filled (semi-automated).'}),t.jsxs("li",{children:[t.jsx("strong",{children:"Demo Simulation:"})," As seen above, we can simulate how a server-side bot would process your queue."]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white mb-2",children:"What requires Server Upgrades:"}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Fully Automated Background Posting:"}),' To enable the "Auto-Pilot" feature for real (posting while you sleep), a dedicated backend server (e.g., Firebase Cloud Functions) is required to run timers (Cron jobs).']}),t.jsxs("li",{children:[t.jsx("strong",{children:"Direct API Integration:"})," Posting directly without opening the app requires expensive API approvals and secure server-side token storage which cannot run safely in a browser-only admin panel."]})]})]})]})]})]})},OO=()=>{var Ce,Qe,ut;const{getAllUsers:n,approveAffiliate:e,rejectAffiliate:s,updateAffiliateTier:r,assignAffiliateParent:i}=wt(),[o,c]=S.useState([]),[u,f]=S.useState(!0),[h,x]=S.useState("applicants"),[v,N]=S.useState("overview"),[T,_]=S.useState("domestic"),[C,R]=S.useState(18.2),[z,$]=S.useState(.055),[U,Z]=S.useState(""),[q,V]=S.useState("all"),[I,k]=S.useState({bronze:10,silver:11,gold:15,platinum:20,vault:1}),[E,L]=S.useState({zar:{spoilMe:2,basic:5,premium:10,deluxe:15},usd:{insider:1,gold:2,deluxe:3}}),[O,B]=S.useState({sprinter:{zar:50,usd:5},bigSpender:{zar:200,usd:15}}),[A,ne]=S.useState(null),[fe,ke]=S.useState(10),[De,oe]=S.useState(""),[be,ve]=S.useState(null),[X,ue]=S.useState("");S.useEffect(()=>{se()},[]);const se=async()=>{f(!0);const ie=await n();c(ie),f(!1)};o.filter(ie=>{var Se;return((Se=ie.affiliateStats)==null?void 0:Se.status)==="pending"});const xe=o.filter(ie=>{var Se;return((Se=ie.affiliateStats)==null?void 0:Se.status)==="approved"}),H=async()=>{be&&(be.action==="approve"?await e(be.userId,X):await s(be.userId,X),ve(null),ue(""),se())},Pe=ie=>{var Se;ne(ie),ke(((Se=ie.affiliateStats)==null?void 0:Se.commissionRate)||10),oe("")},Te=async()=>{if(!A)return;await r(A.id,fe);const ie={...A,affiliateStats:{...A.affiliateStats,commissionRate:fe}};ne(ie),c(Se=>Se.map(Be=>Be.id===A.id?ie:Be)),alert("Commission Tier Updated!")},Ue=async()=>{if(!A||!De)return;await i(De,A.id),alert("Recruit Added! This affiliate will now earn 1% commission from their sales.");const ie=await n();c(ie);const Se=ie.find(Be=>Be.id===A.id);Se&&ne(Se),oe("")},Xe=A?o.filter(ie=>{var Se;return((Se=ie.affiliateStats)==null?void 0:Se.parentId)===A.id}):[],rt=(Ce=A==null?void 0:A.affiliateStats)!=null&&Ce.parentId?o.find(ie=>{var Se;return ie.id===((Se=A.affiliateStats)==null?void 0:Se.parentId)}):null,we=Xe.reduce((ie,Se)=>{var Be;return ie+(((Be=Se.affiliateStats)==null?void 0:Be.totalSalesValue)||0)},0)*.01;return t.jsxs("div",{className:"space-y-8 relative",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Affiliate Manager"}),t.jsxs("button",{onClick:se,className:"text-xs text-gray-400 hover:text-white flex items-center gap-1",children:[t.jsx(da,{size:14})," Refresh Data"]})]}),t.jsx("div",{className:"flex gap-2 border-b border-gray-800 pb-2 overflow-x-auto",children:[{key:"overview",label:"Dashboard Overview",icon:Pc},{key:"payouts",label:"Payout Manager",icon:ws},{key:"partners",label:"Partner List",icon:qs},{key:"settings",label:"Settings & Variables",icon:Bm},{key:"validator",label:"Commission Validator",icon:fi}].map(({key:ie,label:Se,icon:Be})=>t.jsxs("button",{onClick:()=>N(ie),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors whitespace-nowrap flex items-center gap-2 ${v===ie?"border-yellow-500 text-yellow-500":"border-transparent text-gray-400 hover:text-white"}`,children:[t.jsx(Be,{size:16})," ",Se]},ie))}),v==="overview"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:t.jsx(ws,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Pending Payouts (ZAR)"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Ready for EFT"})]})]}),t.jsxs("p",{className:"text-3xl font-bold text-green-400",children:["R",xe.filter(ie=>{var Se;return(((Se=ie.affiliateStats)==null?void 0:Se.balance)||0)>200}).reduce((ie,Se)=>{var Be;return ie+(((Be=Se.affiliateStats)==null?void 0:Be.balance)||0)},0).toFixed(0)]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:t.jsx(ws,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Pending Payouts (USD)"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Ready for PayPal"})]})]}),t.jsxs("p",{className:"text-3xl font-bold text-blue-400",children:["$",xe.filter(ie=>{var Se;return(((Se=ie.affiliateStats)==null?void 0:Se.balance)||0)>50}).reduce((ie,Se)=>{var Be;return ie+(((Be=Se.affiliateStats)==null?void 0:Be.balance)||0)},0).toFixed(0)]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:t.jsx(Rn,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Top Vault Movers"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Most vault sales"})]})]}),t.jsx("p",{className:"text-3xl font-bold text-purple-400",children:xe.reduce((ie,Se)=>{var Be;return Math.max(ie,((Be=Se.affiliateStats)==null?void 0:Be.totalSalesCount)||0)},0)}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Items sold"})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-cyan-900/20 rounded-lg text-cyan-400",children:t.jsx(qs,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Total Partners"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Active affiliates"})]})]}),t.jsx("p",{className:"text-3xl font-bold text-cyan-400",children:xe.length})]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("button",{onClick:()=>N("payouts"),className:"p-4 bg-green-900/20 border border-green-500/30 rounded-lg hover:bg-green-900/30 transition-colors text-left",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(ws,{size:20,className:"text-green-400"}),t.jsx("span",{className:"text-green-400 font-bold",children:"Process Payouts"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:"Manage EFT and PayPal payments"})]}),t.jsxs("button",{onClick:()=>N("partners"),className:"p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg hover:bg-blue-900/30 transition-colors text-left",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(qs,{size:20,className:"text-blue-400"}),t.jsx("span",{className:"text-blue-400 font-bold",children:"Manage Partners"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:"Review applications and tiers"})]}),t.jsxs("button",{onClick:()=>N("validator"),className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg hover:bg-red-900/30 transition-colors text-left",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(fi,{size:20,className:"text-red-400"}),t.jsx("span",{className:"text-red-400 font-bold",children:"Validate Commissions"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:"Check for errors and anomalies"})]})]})]})]}),v==="payouts"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex gap-4 border-b border-gray-800 pb-2",children:[t.jsxs("button",{onClick:()=>_("domestic"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${T==="domestic"?"border-green-500 text-green-500":"border-transparent text-gray-400 hover:text-white"}`,children:[t.jsx(MN,{size:16})," Domestic EFT (ZAR)"]}),t.jsxs("button",{onClick:()=>_("international"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${T==="international"?"border-blue-500 text-blue-500":"border-transparent text-gray-400 hover:text-white"}`,children:[t.jsx(ws,{size:16})," International PayPal (USD)"]})]}),T==="domestic"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Exchange Rate Settings"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("label",{className:"text-sm text-gray-400",children:"USD to ZAR Rate:"}),t.jsx("input",{type:"number",step:"0.01",value:C,onChange:ie=>R(parseFloat(ie.target.value)),className:"bg-black border border-gray-600 rounded p-2 text-white text-sm w-24"}),t.jsx("span",{className:"text-gray-500",children:"(Today's rate for conversion)"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Domestic Payout Queue"}),t.jsx("p",{className:"text-sm text-gray-400",children:"South African affiliates with balances > R200"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-black/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Bank"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"ZAR Earned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"USD Earned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Final Payout (ZAR)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Action"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:xe.filter(ie=>{var Se;return(((Se=ie.affiliateStats)==null?void 0:Se.balance)||0)>200}).map(ie=>{var We;const Se=((We=ie.affiliateStats)==null?void 0:We.balance)||0,Be=0,Ne=Se+Be*C;return t.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold",children:ie.name}),t.jsx("p",{className:"text-gray-400 text-sm",children:ie.email})]})}),t.jsx("td",{className:"px-6 py-4 text-gray-300",children:"FNB"}),t.jsxs("td",{className:"px-6 py-4 text-green-400 font-bold",children:["R",Se.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 text-blue-400",children:["$",Be.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 text-yellow-400 font-bold",children:["R",Ne.toFixed(2)]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("button",{className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-500",children:"Mark Paid"})})]},ie.id)})})]})}),t.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-between items-center",children:[t.jsxs("div",{className:"text-sm text-gray-400",children:[xe.filter(ie=>{var Se;return(((Se=ie.affiliateStats)==null?void 0:Se.balance)||0)>200}).length," partners ready for payout"]}),t.jsxs("button",{className:"px-6 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-500 flex items-center gap-2",children:[t.jsx(Sc,{size:18})," Download FNB/STD Bank Batch File"]})]})]})]}),T==="international"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Exchange Rate Settings"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("label",{className:"text-sm text-gray-400",children:"ZAR to USD Rate:"}),t.jsx("input",{type:"number",step:"0.0001",value:z,onChange:ie=>$(parseFloat(ie.target.value)),className:"bg-black border border-gray-600 rounded p-2 text-white text-sm w-24"}),t.jsx("span",{className:"text-gray-500",children:"(Today's rate for conversion)"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"International Payout Queue"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Non-SA affiliates with balances > $50"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-black/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"PayPal Email"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"USD Earned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"ZAR Earned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Final Payout (USD)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Action"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:xe.filter(ie=>{var Se;return(((Se=ie.affiliateStats)==null?void 0:Se.balance)||0)>50}).map(ie=>{var We;const Se=((We=ie.affiliateStats)==null?void 0:We.balance)||0,Be=0,Ne=Se+Be*z;return t.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold",children:ie.name}),t.jsx("p",{className:"text-gray-400 text-sm",children:ie.email})]})}),t.jsx("td",{className:"px-6 py-4 text-gray-300",children:ie.email}),t.jsxs("td",{className:"px-6 py-4 text-blue-400 font-bold",children:["$",Se.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 text-green-400",children:["R",Be.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 text-yellow-400 font-bold",children:["$",Ne.toFixed(2)]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-500",children:"Mark Paid"})})]},ie.id)})})]})}),t.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-between items-center",children:[t.jsxs("div",{className:"text-sm text-gray-400",children:[xe.filter(ie=>{var Se;return(((Se=ie.affiliateStats)==null?void 0:Se.balance)||0)>50}).length," partners ready for payout"]}),t.jsxs("button",{className:"px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-500 flex items-center gap-2",children:[t.jsx(Sc,{size:18})," Export PayPal Mass Pay CSV"]})]})]})]})]}),v==="partners"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Search Partners"}),t.jsx("input",{type:"text",placeholder:"Name, email, or code...",value:U,onChange:ie=>Z(ie.target.value),className:"w-full bg-black border border-gray-600 rounded p-3 text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Filter by Tier"}),t.jsxs("select",{value:q,onChange:ie=>V(ie.target.value),className:"bg-black border border-gray-600 rounded p-3 text-white min-w-[150px]",children:[t.jsx("option",{value:"all",children:"All Tiers"}),t.jsx("option",{value:"bronze",children:"Bronze (10%)"}),t.jsx("option",{value:"silver",children:"Silver (11%)"}),t.jsx("option",{value:"gold",children:"Gold (15%)"}),t.jsx("option",{value:"platinum",children:"Platinum (20%)"})]})]})]})}),t.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-black/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Current Tier"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Sales (This Month)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Vault Sales"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:xe.filter(ie=>{var Se,Be,Ne,We;return(U===""||ie.name.toLowerCase().includes(U.toLowerCase())||ie.email.toLowerCase().includes(U.toLowerCase())||ie.affiliateCode.toLowerCase().includes(U.toLowerCase()))&&(q==="all"||q==="bronze"&&((Se=ie.affiliateStats)==null?void 0:Se.commissionRate)===10||q==="silver"&&((Be=ie.affiliateStats)==null?void 0:Be.commissionRate)===11||q==="gold"&&((Ne=ie.affiliateStats)==null?void 0:Ne.commissionRate)===15||q==="platinum"&&((We=ie.affiliateStats)==null?void 0:We.commissionRate)===20)}).map(ie=>{var Se,Be,Ne,We,jt,ye,J,_e;return t.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center text-cyan-400 font-bold",children:ie.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold",children:ie.name}),t.jsx("p",{className:"text-gray-400 text-sm",children:ie.email})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${((Se=ie.affiliateStats)==null?void 0:Se.commissionRate)===20?"bg-yellow-900/30 text-yellow-400 border border-yellow-500/30":((Be=ie.affiliateStats)==null?void 0:Be.commissionRate)===15?"bg-purple-900/30 text-purple-400 border border-purple-500/30":((Ne=ie.affiliateStats)==null?void 0:Ne.commissionRate)===11?"bg-gray-900/30 text-gray-400 border border-gray-500/30":"bg-orange-900/30 text-orange-400 border border-orange-500/30"}`,children:[((We=ie.affiliateStats)==null?void 0:We.commissionRate)===20?" Gold":((jt=ie.affiliateStats)==null?void 0:jt.commissionRate)===15?" Silver":((ye=ie.affiliateStats)==null?void 0:ye.commissionRate)===11?" Bronze":"Starter"," - ",(J=ie.affiliateStats)==null?void 0:J.commissionRate,"%"]})}),t.jsxs("td",{className:"px-6 py-4 text-white font-bold",children:["R",(_e=ie.affiliateStats)==null?void 0:_e.totalSalesValue.toFixed(0)]}),t.jsxs("td",{className:"px-6 py-4 text-purple-400",children:[Math.floor(Math.random()*50)," items"]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"px-2 py-1 bg-green-900/30 text-green-400 rounded text-xs border border-green-500/30",children:"Active"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Pe(ie),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-500",children:"Edit"}),t.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-500",children:"History"})]})})]},ie.id)})})]})})})]}),v==="settings"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(Bm,{size:18,className:"text-yellow-400"})," Commission Rates"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Standard Products"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"text-center p-2 bg-orange-900/20 border border-orange-500/30 rounded",children:[t.jsx("p",{className:"text-xs text-orange-400",children:"Bronze"}),t.jsxs("p",{className:"text-lg font-bold text-white",children:[I.bronze,"%"]})]}),t.jsxs("div",{className:"text-center p-2 bg-gray-900/20 border border-gray-500/30 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Silver"}),t.jsxs("p",{className:"text-lg font-bold text-white",children:[I.silver,"%"]})]}),t.jsxs("div",{className:"text-center p-2 bg-purple-900/20 border border-purple-500/30 rounded",children:[t.jsx("p",{className:"text-xs text-purple-400",children:"Gold"}),t.jsxs("p",{className:"text-lg font-bold text-white",children:[I.gold,"%"]})]}),t.jsxs("div",{className:"text-center p-2 bg-yellow-900/20 border border-yellow-500/30 rounded",children:[t.jsx("p",{className:"text-xs text-yellow-400",children:"Platinum"}),t.jsxs("p",{className:"text-lg font-bold text-white",children:[I.platinum,"%"]})]})]})]}),t.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(aa,{size:16,className:"text-red-400"}),t.jsx("label",{className:"text-sm text-gray-400",children:"Secret Vault Items"})]}),t.jsxs("div",{className:"text-center p-3 bg-red-900/20 border border-red-500/30 rounded",children:[t.jsxs("p",{className:"text-lg font-bold text-red-400",children:[I.vault,"%"]}),t.jsx("p",{className:"text-xs text-red-300",children:"LOCKED AT 1%"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This ensures we do not lose money on clearance stock."})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(ws,{size:18,className:"text-green-400"})," Membership Fees"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"South African (ZAR)"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Spoil Me"}),t.jsxs("span",{className:"text-green-400 font-bold",children:["R",E.zar.spoilMe]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Basic"}),t.jsxs("span",{className:"text-green-400 font-bold",children:["R",E.zar.basic]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Premium"}),t.jsxs("span",{className:"text-green-400 font-bold",children:["R",E.zar.premium]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Deluxe"}),t.jsxs("span",{className:"text-green-400 font-bold",children:["R",E.zar.deluxe]})]})]})]}),t.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"International (USD)"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Insider"}),t.jsxs("span",{className:"text-blue-400 font-bold",children:["$",E.usd.insider]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Gold"}),t.jsxs("span",{className:"text-blue-400 font-bold",children:["$",E.usd.gold]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Deluxe"}),t.jsxs("span",{className:"text-blue-400 font-bold",children:["$",E.usd.deluxe]})]})]})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(dr,{size:18,className:"text-orange-400"})," Gamification Bonuses"]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Weekly Achievements"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"p-3 bg-black/50 rounded border border-gray-700",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Sprinter Bonus"}),t.jsxs("span",{className:"text-orange-400 font-bold",children:["R",O.sprinter.zar," / $",O.sprinter.usd]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"5 memberships in a week"})]}),t.jsxs("div",{className:"p-3 bg-black/50 rounded border border-gray-700",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Big Spender Bonus"}),t.jsxs("span",{className:"text-orange-400 font-bold",children:["R",O.bigSpender.zar," / $",O.bigSpender.usd]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"R5,000 / $300 sales volume"})]})]})]})})]})]})}),v==="validator"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(fi,{size:18,className:"text-red-400"})," Commission Validator"]}),t.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Monitor recent commissions for errors and anomalies. Green = Standard, Yellow = Vault, Red = Error."}),t.jsx("div",{className:"space-y-2",children:[{id:1,type:"standard",partner:"Sarah J.",amount:450,product:"Gold Hoops",status:"approved"},{id:2,type:"vault",partner:"Mike T.",amount:10,product:"Clearance Studs",status:"approved"},{id:3,type:"standard",partner:"Lerato K.",amount:1200,product:"Necklace Set",status:"approved"},{id:4,type:"error",partner:"Jessica L.",amount:5e3,product:"Diamond Ring",status:"flagged"}].map(ie=>t.jsx("div",{className:`p-4 rounded-lg border ${ie.type==="standard"?"bg-green-900/10 border-green-500/30":ie.type==="vault"?"bg-yellow-900/10 border-yellow-500/30":"bg-red-900/10 border-red-500/30"}`,children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-white font-bold",children:[ie.partner," - ",ie.product]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Commission: R",ie.amount]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${ie.type==="standard"?"bg-green-900/50 text-green-400":ie.type==="vault"?"bg-yellow-900/50 text-yellow-400":"bg-red-900/50 text-red-400"}`,children:ie.type==="standard"?"Standard":ie.type==="vault"?"Vault (1%)":"ERROR"}),ie.status==="flagged"&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-500",children:"Void"}),t.jsx("button",{className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-500",children:"Approve"})]})]})]})},ie.id))})]})}),be&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>ve(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-6 max-w-sm w-full relative z-10 shadow-2xl",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-2 capitalize",children:[be.action," Application"]}),t.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["For ",be.name]}),t.jsx("textarea",{className:"w-full bg-black border border-gray-700 rounded p-3 text-white text-sm mb-4",placeholder:"Add a note (optional)...",rows:3,value:X,onChange:ie=>ue(ie.target.value)}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>ve(null),className:"flex-1 py-2 bg-zinc-800 text-gray-300 rounded hover:bg-zinc-700",children:"Cancel"}),t.jsx("button",{onClick:H,className:`flex-1 py-2 text-white font-bold rounded ${be.action==="approve"?"bg-green-600 hover:bg-green-500":"bg-red-600 hover:bg-red-500"}`,children:"Confirm"})]})]})]}),A&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>ne(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-4xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg border-2 border-white/10",children:A.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:A.name}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("span",{className:"text-gray-400",children:A.email}),t.jsx("span",{className:"text-gray-600",children:""}),t.jsx("span",{className:"font-mono text-cyan-400 bg-cyan-900/20 px-2 py-0.5 rounded text-xs border border-cyan-500/30",children:A.affiliateCode})]})]})]}),t.jsx("button",{onClick:()=>ne(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white transition-colors",children:t.jsx(as,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(ws,{size:16,className:"text-green-500"}),t.jsx("span",{className:"text-xs uppercase",children:"Direct Sales"})]}),t.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",(Qe=A.affiliateStats)==null?void 0:Qe.totalSalesValue.toFixed(2)]})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(Pc,{size:16,className:"text-purple-500"}),t.jsx("span",{className:"text-xs uppercase",children:"Total Earned"})]}),t.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["R",(ut=A.affiliateStats)==null?void 0:ut.balance.toFixed(2)]})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(qs,{size:16,className:"text-cyan-500"}),t.jsx("span",{className:"text-xs uppercase",children:"Network"})]}),t.jsxs("p",{className:"text-2xl font-bold text-white",children:[Xe.length," ",t.jsx("span",{className:"text-sm font-normal text-gray-500",children:"Recruits"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(_I,{size:18,className:"text-yellow-400"})," Commission Settings"]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Direct Commission Tier (%)"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx("input",{type:"number",value:fe,onChange:ie=>ke(parseFloat(ie.target.value)),className:"w-full bg-black border border-gray-600 rounded-lg p-3 text-white text-sm font-bold focus:border-pink-500 outline-none"}),t.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),t.jsx("button",{onClick:Te,className:"bg-pink-600 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 shadow-lg",children:"Update"})]}),t.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:["Standard Tiers: ",t.jsx("span",{className:"text-gray-300",children:"10%, 11%, 15%, 20%"}),". This setting overrides automatic tier progression."]})]})})]}),rt&&t.jsxs("div",{className:"bg-blue-900/10 p-4 rounded-xl border border-blue-500/30 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-500/20 rounded-full text-blue-400",children:t.jsx(zN,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-blue-300 uppercase font-bold mb-1",children:"Recruited By (Upline)"}),t.jsx("p",{className:"text-white font-bold text-sm",children:rt.name}),t.jsx("p",{className:"text-[10px] text-gray-400",children:rt.affiliateCode})]})]})]}),t.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700 h-full flex flex-col",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx($N,{size:18,className:"text-cyan-400"})," Network & Downline"]}),t.jsxs("div",{className:"mb-4 p-4 bg-black/40 rounded-xl border border-gray-700",children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Add Recruit to Downline"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{className:"flex-1 bg-zinc-900 border border-gray-600 rounded-lg p-2 text-xs text-white focus:border-cyan-500 outline-none",value:De,onChange:ie=>oe(ie.target.value),children:[t.jsx("option",{value:"",children:"Select User to Link..."}),o.filter(ie=>{var Se,Be;return ie.id!==A.id&&((Se=ie.affiliateStats)==null?void 0:Se.parentId)!==A.id&&((Be=ie.affiliateStats)==null?void 0:Be.status)==="approved"}).sort((ie,Se)=>ie.name.localeCompare(Se.name)).map(ie=>t.jsxs("option",{value:ie.id,children:[ie.name," (",ie.affiliateCode,")"]},ie.id))]}),t.jsxs("button",{onClick:Ue,disabled:!De,className:"bg-cyan-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center gap-1",children:[t.jsx(an,{size:14})," Add"]})]}),t.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:[A.name," will earn ",t.jsx("strong",{children:"1%"})," from sales made by users added here."]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 max-h-[300px] custom-scrollbar",children:Xe.length===0?t.jsx("div",{className:"text-center py-8 border border-dashed border-gray-800 rounded-xl",children:t.jsx("p",{className:"text-gray-500 text-xs",children:"No recruits in downline yet."})}):Xe.map(ie=>{var Se,Be;return t.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-zinc-900 rounded-full flex items-center justify-center text-xs font-bold text-gray-400 border border-gray-700",children:ie.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-white font-bold",children:ie.name}),t.jsx("p",{className:"text-[10px] text-gray-500",children:ie.affiliateCode})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-[10px] text-gray-500",children:["Sales: R",(Se=ie.affiliateStats)==null?void 0:Se.totalSalesValue.toFixed(0)]}),t.jsxs("p",{className:"text-xs text-green-400 font-bold",children:["+R",(((Be=ie.affiliateStats)==null?void 0:Be.totalSalesValue)||0*.01).toFixed(2)]})]})]},ie.id)})}),Xe.length>0&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold",children:"Passive Income Generated"}),t.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",we.toFixed(2)]})]})]})]})]})]})]})]})},LO=()=>/iP(ad|hone|od)/.test(navigator.userAgent)&&!("standalone"in navigator&&navigator.standalone);function zO(){const[n,e]=S.useState(null),[s,r]=S.useState(!1),[i,o]=S.useState(!1),[c,u]=S.useState(()=>!!localStorage.getItem("spv_install_dismissed"));if(S.useEffect(()=>{(()=>{const T=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;if(r(!!T),T)try{const _=window.__SPV_USER_ID;_&&Um({userId:_})}catch{}})(),window.addEventListener("appinstalled",()=>r(!0));const N=T=>{T.preventDefault(),e(T)};return window.addEventListener("beforeinstallprompt",N),()=>{window.removeEventListener("beforeinstallprompt",N),window.removeEventListener("appinstalled",()=>r(!0))}},[]),s||c)return null;const f=async()=>{if(n){n.prompt();const v=await n.userChoice;v&&v.outcome==="accepted"&&e(null)}else o(!0)},h=()=>{try{localStorage.setItem("spv_install_dismissed","1"),u(!0),o(!1)}catch{u(!0)}},x=async()=>{try{const v=window.__SPV_USER_ID;v?await Um({userId:v}):Notification.requestPermission()}catch(v){console.warn("request notification permission failed",v)}};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:t.jsxs("div",{className:"bg-white text-black rounded-lg max-w-md w-full p-6",children:[t.jsx("h2",{className:"text-lg font-bold mb-4",children:"Install Spoil Me"}),t.jsx("p",{className:"mb-4",children:"For the best experience please install the app to your device."}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"btn btn-primary flex-1",onClick:f,children:"Download App"}),t.jsx("button",{className:"btn",onClick:()=>{o(!0)},children:"How to install"}),t.jsx("button",{className:"btn-ghost",onClick:h,children:"Dismiss"})]}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{className:"text-sm text-gray-600",onClick:x,children:"Enable Notifications"})}),i&&t.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded",children:LO()?t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"iOS Install Instructions"}),t.jsxs("ol",{className:"list-decimal list-inside mt-2",children:[t.jsxs("li",{children:["Tap the ",t.jsx("strong",{children:"Share"})," button (the square with an arrow)."]}),t.jsxs("li",{children:["Select ",t.jsx("strong",{children:"Add to Home Screen"}),"."]})]})]}):t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Install"}),t.jsxs("p",{className:"mt-2",children:["If the system install card is available, press ",t.jsx("strong",{children:"Download App"})," above."]})]})})]})})}const UO=()=>{const{weeklyWinners:n}=wt(),[e,s]=S.useState(new Date),[r,i]=S.useState("");return S.useEffect(()=>{const o=()=>{const u=new Date,f=new Date(u);f.setUTCDate(u.getUTCDate()+(7-u.getUTCDay())),f.setUTCHours(8,0,0,0),f<u&&f.setUTCDate(f.getUTCDate()+7),s(f)};o();const c=setInterval(o,6e4);return()=>clearInterval(c)},[]),S.useEffect(()=>{const o=setInterval(()=>{const c=new Date,u=e.getTime()-c.getTime();if(u>0){const f=Math.floor(u/864e5),h=Math.floor(u/(1e3*60*60)%24),x=Math.floor(u/1e3/60%60);i(`${f}d ${h}h ${x}m`)}else i("Drawing new winners...")},1e3);return()=>clearInterval(o)},[e]),t.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-12",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"inline-block bg-gradient-to-br from-yellow-500 to-orange-500 p-5 rounded-full shadow-[0_0_30px_rgba(250,204,21,0.5)]",children:t.jsx(dr,{size:48,className:"text-white"})}),t.jsx("h1",{className:"font-cherry text-5xl text-white",children:"This Week's Winners!"}),t.jsx("p",{className:"text-gray-300 text-lg",children:"Congratulations to the lucky members of our R19 Spoil Me Package!"})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"text-center md:text-left",children:[t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:[t.jsx(cr,{size:20,className:"text-cyan-400"}),"Next Draw"]}),t.jsx("p",{className:"text-gray-400 text-sm",children:"A new set of winners is drawn every Sunday at 08:00 AM."})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:r}),t.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Time Remaining"})]})]}),t.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/20 p-5 rounded-xl flex items-start gap-4",children:[t.jsx(us,{size:24,className:"text-purple-400 shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-purple-300",children:"How to Claim Your Prize"}),t.jsx("p",{className:"text-sm text-gray-300/80 mt-1",children:"If you're a winner, a notification has been sent to your profile's inbox containing your unique voucher code. Simply apply it at checkout to claim your winnings!"})]})]}),t.jsx("div",{className:"bg-zinc-900 rounded-2xl border border-gray-800 overflow-hidden",children:t.jsx("div",{className:"divide-y divide-gray-800",children:n.map(o=>t.jsxs("div",{className:`p-4 flex items-center justify-between gap-4 transition-colors ${o.rank<=3?"bg-yellow-900/10":""}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm border-2 ${o.rank===1?"bg-yellow-500 border-yellow-300 text-black shadow-[0_0_10px_rgba(250,204,21,0.5)]":o.rank===2?"bg-gray-400 border-gray-200 text-black":o.rank===3?"bg-orange-600 border-orange-400 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:["#",o.rank]}),t.jsx("span",{className:"font-medium text-white",children:o.name})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("span",{className:"font-bold text-lg text-green-400",children:["R",o.prize.toFixed(2)]}),t.jsx("span",{className:"text-xs text-gray-500 block",children:"Voucher"})]})]},o.rank))})}),t.jsxs("div",{className:"mt-12 bg-gradient-to-r from-pink-600 to-purple-600 p-8 rounded-2xl text-center shadow-2xl",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Want to be on this list?"}),t.jsx("p",{className:"text-pink-100 mb-6 max-w-lg mx-auto",children:"Join the Spoil Me Package for just R19/month for your chance to win weekly vouchers and get exclusive member perks!"}),t.jsxs(He,{to:"/membership",className:"inline-flex items-center gap-2 px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-lg text-lg",children:["Join Now ",t.jsx(Qs,{size:20})]})]})]})},FO=()=>{const{weeklyWinners:n}=wt();return t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[t.jsx(dr,{size:24,className:"text-yellow-400"}),' Weekly "Spoil Me" Winners']}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Review and manage the simulated weekly prize draw."})]})}),t.jsxs("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-5 rounded-xl flex items-start gap-4",children:[t.jsx(fi,{size:24,className:"text-yellow-500 shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-yellow-400",children:"Simulation Mode Active"}),t.jsxs("p",{className:"text-sm text-yellow-200/80 mt-1",children:["This panel displays a ",t.jsx("strong",{className:"text-white",children:"simulated list of winners"})," for demonstration. In a live production environment, this page would be connected to your database to:"]}),t.jsxs("ul",{className:"list-disc pl-5 mt-3 text-xs text-yellow-200/70 space-y-1",children:[t.jsx("li",{children:'Show a list of all users subscribed to the "Spoil Me Package".'}),t.jsxs("li",{children:["Allow you to run the draw, which would randomly select ",t.jsx("strong",{children:"real users"})," from that list."]}),t.jsx("li",{children:"Automatically generate unique voucher codes and assign them to the winning user accounts."}),t.jsx("li",{children:"Send a notification to the winners' in-app inbox."})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg bg-cyan-900/30 text-cyan-400 border border-cyan-500/20",children:t.jsx(qs,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Winners This Week"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:n.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg bg-green-900/30 text-green-400 border border-green-500/20",children:t.jsx(hI,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Prize Value"}),t.jsxs("p",{className:"text-[22px] font-bold text-white mt-1",children:["R",n.reduce((e,s)=>e+s.prize,0).toFixed(2)]})]})]}),t.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:t.jsxs("table",{className:"w-full text-left text-sm",children:[t.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4 w-20",children:"Rank"}),t.jsx("th",{className:"p-4",children:"Winner Name"}),t.jsx("th",{className:"p-4 text-right",children:"Prize Value"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:n.map(e=>t.jsxs("tr",{className:`group transition-colors ${e.rank<=3?"bg-yellow-900/10":"hover:bg-zinc-800/50"}`,children:[t.jsx("td",{className:"p-4",children:t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold border ${e.rank===1?"bg-yellow-500 border-yellow-400 text-black":e.rank===2?"bg-gray-400 border-gray-300 text-black":e.rank===3?"bg-orange-600 border-orange-500 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:e.rank})}),t.jsx("td",{className:"p-4 font-medium text-gray-200",children:e.name}),t.jsxs("td",{className:"p-4 text-right font-bold text-lg text-green-400",children:["R",e.prize.toFixed(2)]})]},e.rank))})]})})]})},xj=()=>{const[n,e]=S.useState([]),[s,r]=S.useState({enabled:!0,priceZAR:199,priceUSD:12,reachCount:7540}),[i,o]=S.useState(!0);S.useEffect(()=>{c()},[]);const c=async()=>{try{const x=await Oc("settings","ad_config");x&&(e(x.packages||[]),r(x.socialAddon||s))}catch(x){console.error("Error loading ad config:",x)}finally{o(!1)}},u=async()=>{try{try{await Yi("settings","ad_config",{packages:n,socialAddon:s})}catch{await ea("settings",{id:"ad_config",packages:n,socialAddon:s})}alert("Configuration saved successfully!")}catch(x){console.error("Error saving ad config:",x),alert("Failed to save configuration.")}},f=(x,v,N)=>{const T=[...n];T[x]={...T[x],[v]:N},e(T)},h=(x,v)=>{r({...s,[x]:v})};return i?t.jsx("div",{className:"p-6",children:"Loading..."}):t.jsxs("div",{className:"p-6 bg-gray-900 text-white min-h-screen",children:[t.jsx("h1",{className:"text-3xl font-bold mb-8 text-yellow-400",children:"Marketing Settings"}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ad Packages"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full bg-gray-800 rounded-lg",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("th",{className:"p-4 text-left",children:"Name"}),t.jsx("th",{className:"p-4 text-left",children:"Duration (Days)"}),t.jsx("th",{className:"p-4 text-left",children:"Price (ZAR)"}),t.jsx("th",{className:"p-4 text-left",children:"Price (USD)"}),t.jsx("th",{className:"p-4 text-left",children:"Benefit"}),t.jsx("th",{className:"p-4 text-left",children:"Active"})]})}),t.jsx("tbody",{children:n.map((x,v)=>t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"text",value:x.name,onChange:N=>f(v,"name",N.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"number",value:x.durationDays,onChange:N=>f(v,"durationDays",parseInt(N.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"number",step:"0.01",value:x.priceZAR,onChange:N=>f(v,"priceZAR",parseFloat(N.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"number",step:"0.01",value:x.priceUSD,onChange:N=>f(v,"priceUSD",parseFloat(N.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"text",value:x.benefit,onChange:N=>f(v,"benefit",N.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"checkbox",checked:x.active,onChange:N=>f(v,"active",N.target.checked),className:"w-4 h-4"})})]},x.id))})]})})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Social Media Add-on"}),t.jsx("div",{className:"bg-gray-800 p-4 rounded-lg",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Enabled"}),t.jsx("input",{type:"checkbox",checked:s.enabled,onChange:x=>h("enabled",x.target.checked),className:"w-4 h-4"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (ZAR)"}),t.jsx("input",{type:"number",step:"0.01",value:s.priceZAR,onChange:x=>h("priceZAR",parseFloat(x.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (USD)"}),t.jsx("input",{type:"number",step:"0.01",value:s.priceUSD,onChange:x=>h("priceUSD",parseFloat(x.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Network Reach"}),t.jsx("input",{type:"number",value:s.reachCount,onChange:x=>h("reachCount",parseInt(x.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]})]})})]}),t.jsx("button",{onClick:u,className:"bg-yellow-400 text-black font-bold py-2 px-6 rounded-lg hover:bg-yellow-500 transition-colors",children:"Save Changes"})]})},$O=()=>{const n={totalRevenue:5400,topSpenders:[{artist:"Artist A",amount:1200},{artist:"Artist B",amount:950},{artist:"Artist C",amount:700}],slotUtilization:{homepageSlots:8,totalHomepageSlots:10,categorySlots:45}};return t.jsxs("div",{className:"p-4 md:p-6 bg-zinc-900 rounded-lg border border-gray-800",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Ad Revenue & Performance"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-black/30 p-6 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"Total Ad Revenue"}),t.jsxs("p",{className:"text-4xl font-bold text-white",children:["R",n.totalRevenue.toLocaleString()]}),t.jsx("p",{className:"text-gray-400",children:"this month"})]}),t.jsxs("div",{className:"bg-black/30 p-6 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Homepage Slot Utilization"}),t.jsxs("p",{className:"text-4xl font-bold text-white",children:[n.slotUtilization.homepageSlots," / ",n.slotUtilization.totalHomepageSlots]}),t.jsx("p",{className:"text-gray-400",children:"slots filled"})]}),t.jsxs("div",{className:"bg-black/30 p-6 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"Active Category Ads"}),t.jsx("p",{className:"text-4xl font-bold text-white",children:n.slotUtilization.categorySlots}),t.jsx("p",{className:"text-gray-400",children:"promotions running"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-yellow-400 mb-4",children:"Top Spenders"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-300",children:[t.jsx("thead",{className:"bg-zinc-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Artist"}),t.jsx("th",{className:"px-4 py-2",children:"Total Spent"})]})}),t.jsx("tbody",{children:n.topSpenders.map((e,s)=>t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-medium text-white",children:e.artist}),t.jsxs("td",{className:"px-4 py-2 text-green-400",children:["R",e.amount.toLocaleString()]})]},s))})]})})]})]})},VO=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],BO={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:10},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:10}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:10},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:10}]},qO=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],WO=()=>{const[n,e]=S.useState("shipping"),[s,r]=S.useState(()=>{const _=localStorage.getItem("spv_pudo_costs");return _?JSON.parse(_):VO}),[i,o]=S.useState(()=>{const _=localStorage.getItem("spv_paxi_costs");return _?JSON.parse(_):BO}),[c,u]=S.useState(()=>{const _=localStorage.getItem("spv_door_to_door_costs");return _?JSON.parse(_):qO}),[f,h]=S.useState({}),x=_=>{h(C=>({...C,[_]:"Saved!"})),setTimeout(()=>{h(C=>({...C,[_]:""}))},2e3)};S.useEffect(()=>{},[]),S.useEffect(()=>{try{localStorage.setItem("spv_paxi_costs",JSON.stringify(i))}catch(_){console.error("Failed to save PAXI costs to storage",_)}},[i]),S.useEffect(()=>{},[]),S.useEffect(()=>{try{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(c))}catch(_){console.error("Failed to save Door to Door costs to storage",_)}},[c]);const v=(_,C,R)=>{const z=[...s],$=parseFloat(R)||0;z[_][C]=$,r(z)},N=(_,C,R,z)=>{const $={...i},U=parseFloat(z)||0;$[_][C][R]=U,o($)},T=(_,C,R)=>{u(z=>z.map((U,Z)=>{if(Z!==_)return U;let q={...U};if(C==="initialCharge"||C==="ratePerKg"||C==="handleFee"||C==="boxFee"){const V=parseFloat(R);C==="ratePerKg"&&(isNaN(V)||R==="")?q[C]=null:q[C]=isNaN(V)?0:V}else q[C]=R;return q}))};return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[t.jsx(ws,{size:24,className:"text-green-400"})," Shipping Expenses & Supplies"]}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Reference for PUDO & PAXI costs and supplies."})]}),t.jsxs("div",{className:"rounded-xl border border-gray-700 bg-zinc-900",children:[t.jsxs("div",{className:"grid w-full grid-cols-3",children:[t.jsx("button",{onClick:()=>e("shipping"),className:`py-3 px-4 text-sm font-medium transition-colors ${n==="shipping"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Shipping Costs"}),t.jsx("button",{onClick:()=>e("ads"),className:`py-3 px-4 text-sm font-medium transition-colors ${n==="ads"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Ad Revenue"}),t.jsx("button",{onClick:()=>e("marketing"),className:`py-3 px-4 text-sm font-medium transition-colors ${n==="marketing"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Marketing Settings"})]}),t.jsxs("div",{className:"p-6",children:[n==="shipping"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg mb-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[t.jsx(fI,{size:20,className:"text-cyan-400"})," PUDO Box & Service Pricing"]}),t.jsxs("a",{href:"https://stationery.thecourierguy.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Order Stationery ",t.jsx(Ua,{size:16})]})]}),t.jsx("div",{className:"space-y-4 md:hidden",children:s.map((_,C)=>{const R=_.boxCost+(_.lockerToLockerCost||0)+_.lockerHandleFee;return _.boxCost+(_.doorToLockerCost||0)+_.doorHandleFee,t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-800",children:[t.jsx("h4",{className:"font-bold text-white mb-2",children:_.name}),t.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[t.jsxs("p",{children:["Dimensions: ",_.dimensions]}),t.jsxs("p",{children:["Max Weight: ",_.maxWeight]}),t.jsxs("p",{children:["Box Cost: R",_.boxCost]}),_.lockerToLockerCost&&t.jsxs("p",{children:["Locker to Locker: R",_.lockerToLockerCost]}),_.doorToLockerCost&&t.jsxs("p",{children:["Door to Locker: R",_.doorToLockerCost]}),t.jsxs("p",{className:"font-bold text-cyan-400",children:["Total: R",R.toFixed(2)]})]})]},C)})}),t.jsxs("div",{className:"hidden md:block mt-8",children:[t.jsx("h4",{className:"font-bold text-cyan-400 mb-2 mt-6",children:"Locker to Locker"}),t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[t.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Box"}),t.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),t.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),t.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),t.jsx("th",{className:"px-4 py-2",children:"Locker to Locker"}),t.jsx("th",{className:"px-4 py-2",children:"Locker Handle Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Total"}),t.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),t.jsx("tbody",{children:s.map((_,C)=>{if(_.lockerToLockerCost===null)return null;const R=_.boxCost+(_.lockerToLockerCost||0)+_.lockerHandleFee;return t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-bold text-white",children:_.name}),t.jsx("td",{className:"px-4 py-2",children:_.dimensions}),t.jsx("td",{className:"px-4 py-2",children:_.maxWeight}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:_.boxCost,onChange:z=>v(C,"boxCost",z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:_.lockerToLockerCost||0,onChange:z=>v(C,"lockerToLockerCost",z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:_.lockerHandleFee,onChange:z=>v(C,"lockerHandleFee",z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsxs("td",{className:"px-4 py-2 font-bold text-cyan-400",children:["R",R.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2",children:[t.jsx("button",{className:"px-2 py-1 bg-cyan-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(s)),x(`pudo-lockerToLockerCost-${C}`)},children:""}),t.jsx("span",{className:"text-green-400 text-xs",children:f[`pudo-lockerToLockerCost-${C}`]})]})]},C)})})]}),t.jsx("h4",{className:"font-bold text-purple-400 mb-2 mt-6",children:"Door to Locker"}),t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400",children:[t.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Box"}),t.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),t.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),t.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),t.jsx("th",{className:"px-4 py-2",children:"Door to Locker"}),t.jsx("th",{className:"px-4 py-2",children:"Door Handle Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Total"}),t.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),t.jsx("tbody",{children:s.map((_,C)=>{if(_.doorToLockerCost===null)return null;const R=_.boxCost+(_.doorToLockerCost||0)+_.doorHandleFee;return t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-bold text-white",children:_.name}),t.jsx("td",{className:"px-4 py-2",children:_.dimensions}),t.jsx("td",{className:"px-4 py-2",children:_.maxWeight}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:_.boxCost,onChange:z=>v(C,"boxCost",z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:_.doorToLockerCost||0,onChange:z=>v(C,"doorToLockerCost",z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:_.doorHandleFee,onChange:z=>v(C,"doorHandleFee",z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsxs("td",{className:"px-4 py-2 font-bold text-purple-400",children:["R",R.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2",children:[t.jsx("button",{className:"px-2 py-1 bg-purple-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(s)),x(`pudo-doorToLockerCost-${C}`)},children:""}),t.jsx("span",{className:"text-green-400 text-xs",children:f[`pudo-doorToLockerCost-${C}`]})]})]},C)})})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg mb-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[t.jsx(Cc,{size:20,className:"text-pink-400"})," PAXI Bag & Service Pricing"]}),t.jsxs("a",{href:"https://www.paxi.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["PAXI Website ",t.jsx(Ua,{size:16})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:Object.entries(i).map(([_,C])=>t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-pink-400 mb-2",children:_}),t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[t.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Bag"}),t.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Service Cost"}),t.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Total"}),t.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),t.jsx("tbody",{children:C.map((R,z)=>{let $=R.bag.includes("Small")?6:15;const U=$+R.serviceCost+R.handleFee;return t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-bold text-white",children:R.bag}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:$,onChange:Z=>{},className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right",disabled:!0})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:R.serviceCost,onChange:Z=>N(_,z,"serviceCost",Z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:R.handleFee,onChange:Z=>N(_,z,"handleFee",Z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsxs("td",{className:"px-4 py-2 font-bold text-pink-400",children:["R",U.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2",children:[t.jsx("button",{className:"px-2 py-1 bg-pink-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_paxi_costs",JSON.stringify(i)),x(`paxi-${_}-${z}`)},children:""}),t.jsx("span",{className:"text-green-400 text-xs",children:f[`paxi-${_}-${z}`]})]})]},z)})})]})]},_))})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[t.jsx(Ur,{size:20,className:"text-yellow-400"})," Door-to-Door Courier Pricing"]})}),t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[t.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Service"}),t.jsx("th",{className:"px-4 py-2",children:"Initial Weight"}),t.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Initial Charge"}),t.jsx("th",{className:"px-4 py-2",children:"Rate per Kg"}),t.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Total"}),t.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),t.jsx("tbody",{children:c.map((_,C)=>{const R=_.boxFee+_.initialCharge+(_.ratePerKg!==null?_.ratePerKg:0)+_.handleFee;return t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-bold text-white",children:_.service}),t.jsx("td",{className:"px-4 py-2",children:_.initialWeight}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:_.boxFee,onChange:z=>T(C,"boxFee",z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:_.initialCharge,onChange:z=>T(C,"initialCharge",z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:_.ratePerKg!==null?t.jsx("input",{type:"number",value:_.ratePerKg,onChange:z=>T(C,"ratePerKg",z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"}):"-"}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:_.handleFee,onChange:z=>T(C,"handleFee",z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsxs("td",{className:"px-4 py-2 font-bold text-yellow-400",children:["R",R.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2",children:[t.jsx("button",{className:"px-2 py-1 bg-yellow-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(c)),x(`doorToDoor-${C}`)},children:""}),t.jsx("span",{className:"text-green-400 text-xs",children:f[`doorToDoor-${C}`]})]})]},C)})})]})]})]}),n==="ads"&&t.jsx($O,{}),n==="marketing"&&t.jsx(xj,{})]})]})]})},Sv=n=>{switch(n){case"Pending":return"bg-yellow-900/30 text-yellow-400 border-yellow-500/30";case"Processing":return"bg-blue-900/30 text-blue-400 border-blue-500/30";case"Shipped":return"bg-cyan-900/30 text-cyan-400 border-cyan-500/30";case"Delivered":return"bg-green-900/30 text-green-400 border-green-500/30";case"Cancelled":return"bg-red-900/30 text-red-400 border-red-500/30";default:return"bg-gray-800 text-gray-400"}},HO=()=>{const{orders:n,updateOrder:e,deleteOrder:s}=wt(),[r,i]=S.useState(""),[o,c]=S.useState(""),[u,f]=S.useState(null),[h,x]=S.useState(""),v=S.useMemo(()=>n.filter(C=>{const R=r.toLowerCase();return C.orderNumber.toLowerCase().includes(R)||C.customerName.toLowerCase().includes(R)||C.customerEmail.toLowerCase().includes(R)}).filter(C=>o?C.status===o:!0),[n,r,o]),N=C=>{f(C),x(C.status)},T=async()=>{u&&h&&(await e({...u,status:h}),f(null),x(""))},_=async C=>{window.confirm("Are you sure you want to delete this order? This action cannot be undone.")&&(await s(C),f(null))};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Order Management"}),t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[t.jsx(da,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsx("input",{type:"text",placeholder:"Search by Order #, Name, or Email...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:r,onChange:C=>i(C.target.value)})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none appearance-none",value:o,onChange:C=>c(C.target.value),children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"Processing",children:"Processing"}),t.jsx("option",{value:"Shipped",children:"Shipped"}),t.jsx("option",{value:"Delivered",children:"Delivered"}),t.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),t.jsxs("div",{className:"hidden md:block bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[t.jsxs("table",{className:"w-full text-left text-sm",children:[t.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:"Order #"}),t.jsx("th",{className:"p-4",children:"Date"}),t.jsx("th",{className:"p-4",children:"Customer"}),t.jsx("th",{className:"p-4 text-right",children:"Total"}),t.jsx("th",{className:"p-4",children:"Status"}),t.jsx("th",{className:"p-4"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:v.map(C=>t.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[t.jsx("td",{className:"p-4 font-mono text-cyan-400",children:C.orderNumber}),t.jsx("td",{className:"p-4 text-gray-400",children:new Date(C.date).toLocaleDateString()}),t.jsxs("td",{className:"p-4",children:[t.jsx("div",{className:"font-medium text-gray-200",children:C.customerName}),t.jsx("div",{className:"text-xs text-gray-500",children:C.customerEmail})]}),t.jsxs("td",{className:"p-4 text-right font-bold text-green-400",children:["R",C.total.toFixed(2)]}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${Sv(C.status)}`,children:C.status})}),t.jsx("td",{className:"p-4 text-right",children:t.jsx("button",{onClick:()=>N(C),className:"text-xs text-gray-400 hover:text-white underline opacity-0 group-hover:opacity-100 transition-opacity",children:"View Details"})})]},C.id))})]}),v.length===0&&t.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),t.jsxs("div",{className:"md:hidden space-y-4",children:[v.map(C=>t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-mono text-cyan-400 text-sm",children:C.orderNumber}),t.jsx("div",{className:"text-xs text-gray-500",children:new Date(C.date).toLocaleString()})]}),t.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${Sv(C.status)}`,children:C.status})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-200 text-sm",children:C.customerName}),t.jsx("div",{className:"text-xs text-gray-500",children:C.customerEmail})]}),t.jsxs("div",{className:"flex justify-between items-end pt-2 border-t border-gray-800",children:[t.jsx("button",{onClick:()=>N(C),className:"text-xs text-gray-400 hover:text-white underline",children:"View Details"}),t.jsxs("div",{className:"font-bold text-green-400 text-lg",children:["R",C.total.toFixed(2)]})]})]},C.id)),v.length===0&&t.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),u&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>f(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-2xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:"Order Details"}),t.jsx("p",{className:"font-mono text-cyan-400",children:u.orderNumber})]}),t.jsx("button",{onClick:()=>f(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white",children:t.jsx(as,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[t.jsx(Fr,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-gray-300",children:u.customerName})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[t.jsx(kc,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-gray-300",children:u.customerEmail})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[t.jsx(za,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-gray-300",children:new Date(u.date).toLocaleString()})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[t.jsx(Ur,{size:18,className:"text-cyan-400"}),"Shipping Information"]}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("p",{children:[t.jsx("strong",{className:"text-gray-400",children:"Method:"})," ",t.jsx("span",{className:"text-gray-200",children:u.shippingMethod})]}),t.jsxs("p",{children:[t.jsx("strong",{className:"text-gray-400",children:"Details:"})," ",t.jsx("span",{className:"text-gray-200",children:u.shippingDetails})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[t.jsx(ul,{size:18,className:"text-pink-400"}),"Items (",u.items.reduce((C,R)=>C+R.quantity,0),")"]}),u.items.map((C,R)=>t.jsxs("div",{className:"flex items-center gap-4 bg-black/40 p-3 rounded-lg border border-gray-800",children:[t.jsx("img",{src:C.images[0],alt:C.name,className:"w-12 h-12 rounded object-cover border border-gray-700"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-bold text-white",children:C.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[C.selectedSize&&`Size: ${C.selectedSize}`,C.selectedMaterial&&`Material: ${C.selectedMaterial}`]})]}),t.jsxs("div",{className:"text-sm text-gray-400",children:["x",C.quantity]}),t.jsxs("div",{className:"text-sm font-bold text-white",children:["R",(C.price*C.quantity).toFixed(2)]})]},R))]}),t.jsxs("div",{className:"pt-4 border-t border-gray-800 text-sm text-right space-y-2",children:[t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("span",{className:"text-gray-400",children:"Subtotal:"})," ",t.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",(u.total-u.shippingCost).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("span",{className:"text-gray-400",children:"Shipping:"})," ",t.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",u.shippingCost.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-end gap-4 font-bold text-lg",children:[t.jsx("span",{className:"text-white",children:"Total:"})," ",t.jsxs("span",{className:"text-green-400 w-24 text-left",children:["R",u.total.toFixed(2)]})]})]})]}),t.jsxs("div",{className:"p-6 border-t border-gray-800 bg-zinc-950/50 flex flex-col md:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.jsx("label",{className:"text-sm font-bold text-white",children:"Status:"}),t.jsxs("select",{value:h,onChange:C=>x(C.target.value),className:"flex-1 bg-black border border-gray-700 rounded-lg p-2 text-white text-sm focus:border-pink-500 outline-none",children:[t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"Processing",children:"Processing"}),t.jsx("option",{value:"Shipped",children:"Shipped"}),t.jsx("option",{value:"Delivered",children:"Delivered"}),t.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),t.jsx("button",{onClick:T,className:"px-4 py-2 bg-pink-600 text-white font-bold rounded-lg text-sm hover:bg-pink-500",children:"Save"})]}),t.jsxs("button",{onClick:()=>_(u.id),className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 text-red-400 text-sm font-bold hover:bg-red-900/20 rounded-lg border border-red-900/0 hover:border-red-900/30 transition-colors",children:[t.jsx(Mr,{size:16})," Delete Order"]})]})]})]})]})},GO=()=>t.jsx("div",{className:"bg-gray-900 text-white min-h-screen p-8",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("h1",{className:"text-4xl font-bold mb-6 text-cyan-400",children:"Terms and Conditions"}),t.jsxs("div",{className:"space-y-6 text-gray-300",children:[t.jsx("p",{children:"Welcome to Spoil Me. These terms and conditions outline the rules and regulations for the use of Spoil Me's Website, located at spoilme.com."}),t.jsx("p",{children:"By accessing this website we assume you accept these terms and conditions. Do not continue to use Spoil Me if you do not agree to take all of the terms and conditions stated on this page."}),t.jsx("h2",{className:"text-2xl font-semibold text-cyan-400 mt-4",children:"Cookies"}),t.jsx("p",{children:"We employ the use of cookies. By accessing Spoil Me, you agreed to use cookies in agreement with the Spoil Me's Privacy Policy."}),t.jsx("h2",{className:"text-2xl font-semibold text-cyan-400 mt-4",children:"License"}),t.jsx("p",{children:"Unless otherwise stated, Spoil Me and/or its licensors own the intellectual property rights for all material on Spoil Me. All intellectual property rights are reserved. You may access this from Spoil Me for your own personal use subjected to restrictions set in these terms and conditions."})]})]})}),KO="modulepreload",JO=function(n){return"/"+n},kv={},Vp=function(e,s,r){let i=Promise.resolve();if(s&&s.length>0){let c=function(h){return Promise.all(h.map(x=>Promise.resolve(x).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=c(s.map(h=>{if(h=JO(h),h in kv)return;kv[h]=!0;const x=h.endsWith(".css"),v=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const N=document.createElement("link");if(N.rel=x?"stylesheet":KO,x||(N.as="script"),N.crossOrigin="",N.href=h,f&&N.setAttribute("nonce",f),document.head.appendChild(N),x)return new Promise((T,_)=>{N.addEventListener("load",T),N.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},YO=fl("App",{web:()=>Vp(()=>import("./web-CruZDOZw.js"),[]).then(n=>new n.AppWeb)});function ZO(n){n.CapacitorUtils.Synapse=new Proxy({},{get(e,s){return new Proxy({},{get(r,i){return(o,c,u)=>{const f=n.Capacitor.Plugins[s];if(f===void 0){u(new Error(`Capacitor plugin ${s} not found`));return}if(typeof f[i]!="function"){u(new Error(`Method ${i} not found in Capacitor plugin ${s}`));return}(async()=>{try{const h=await f[i](o);c(h)}catch(h){u(h)}})()}}})}})}function XO(n){n.CapacitorUtils.Synapse=new Proxy({},{get(e,s){return n.cordova.plugins[s]}})}function QO(n=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!n?ZO(window):window.cordova!==void 0&&XO(window))}var Vu;(function(n){n.Documents="DOCUMENTS",n.Data="DATA",n.Library="LIBRARY",n.Cache="CACHE",n.External="EXTERNAL",n.ExternalStorage="EXTERNAL_STORAGE",n.ExternalCache="EXTERNAL_CACHE",n.LibraryNoCloud="LIBRARY_NO_CLOUD",n.Temporary="TEMPORARY"})(Vu||(Vu={}));var _v;(function(n){n.UTF8="utf8",n.ASCII="ascii",n.UTF16="utf16"})(_v||(_v={}));const Cv=fl("Filesystem",{web:()=>Vp(()=>import("./web-DI_P3d6l.js"),[]).then(n=>new n.FilesystemWeb)});QO();const eL=fl("FileOpener"),tL=()=>{const[n,e]=S.useState(null),[s,r]=S.useState(!1),i=S.useCallback(async()=>{if(Mu.isNativePlatform())try{const c=await fetch("https://spoilme-edee0.web.app/version.json",{cache:"no-store"});if(!c.ok)throw new Error("Failed to fetch version.json");const u=await c.json(),h=(await YO.getInfo()).version;u.version&&u.version!==h&&e(u)}catch(c){console.error("Error checking for app update:",c)}},[]),o=S.useCallback(async()=>{if(n){r(!0);try{if(n.apkUrl===""){alert("Update downloaded. Please restart the app.");return}const c=`Spoil-Me-Vintage-${n.version}.apk`,u=await fetch(n.apkUrl);if(!u.ok)throw new Error("Failed to download APK");const f=await u.arrayBuffer(),h=await new Promise((v,N)=>{const T=new FileReader;T.onload=()=>v(T.result.split(",")[1]),T.onerror=N,T.readAsDataURL(new Blob([f]))});await Cv.writeFile({path:c,data:h,directory:Vu.External});const x=await Cv.getUri({directory:Vu.External,path:c});await eL.open({filePath:x.uri,contentType:"application/vnd.android.package-archive"})}catch(c){console.error("Error performing app update:",c)}finally{r(!1),e(null)}}},[n]);return S.useEffect(()=>{i()},[i]),{updateAvailable:n,isDownloading:s,performUpdate:o,dismissUpdate:()=>e(null)}},sL=({version:n,isDownloading:e,onUpdate:s,onDismiss:r})=>t.jsx("div",{className:"fixed bottom-4 right-4 z-[100] w-full max-w-sm",children:t.jsx("div",{className:"bg-zinc-800 border-2 border-pink-500 rounded-2xl p-6 shadow-[0_0_40px_rgba(236,72,153,0.3)] animate-in slide-in-from-bottom-10 duration-500",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx(Sc,{size:24,className:"text-white"})})}),t.jsxs("div",{className:"ml-4 flex-1",children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"New Update Available!"}),t.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Version ",n," is ready to be installed."]}),t.jsxs("div",{className:"mt-4 flex space-x-3",children:[t.jsx("button",{onClick:s,disabled:e,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-white text-black font-bold rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e?t.jsxs(t.Fragment,{children:[t.jsx(wI,{size:18,className:"animate-spin mr-2"}),"Downloading..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Sc,{size:18,className:"mr-2"}),"Update Now"]})}),t.jsx("button",{onClick:r,disabled:e,className:"px-3 py-2 text-gray-400 hover:text-white transition-colors",children:"Later"})]})]}),t.jsx("div",{className:"ml-3 flex-shrink-0",children:t.jsx("button",{onClick:r,disabled:e,className:"text-gray-500 hover:text-gray-300",children:t.jsx(as,{size:20})})})]})})});function nL(n={}){const{immediate:e=!1,onNeedRefresh:s,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:c}=n;let u,f;const h=async(v=!0)=>{await f};async function x(){if("serviceWorker"in navigator){if(u=await Vp(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/service-worker.js",{scope:"/",type:"classic"})).catch(v=>{c==null||c(v)}),!u)return;u.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),u.addEventListener("installed",v=>{v.isUpdate||r==null||r()}),u.register({immediate:e}).then(v=>{o?o("/service-worker.js",v):i==null||i(v)}).catch(v=>{c==null||c(v)})}}return f=x(),h}function rL(n={}){const{immediate:e=!0,onNeedRefresh:s,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:c}=n,[u,f]=S.useState(!1),[h,x]=S.useState(!1),[v]=S.useState(()=>nL({immediate:e,onOfflineReady(){x(!0),r==null||r()},onNeedRefresh(){f(!0),s==null||s()},onRegistered:i,onRegisteredSW:o,onRegisterError:c}));return{needRefresh:[u,f],offlineReady:[h,x],updateServiceWorker:v}}const iL=()=>{const{needRefresh:n,updateServiceWorker:e,offlineReady:s}=rL(),[r,i]=S.useState(!1);return S.useEffect(()=>{if(s){console.debug("[UpdatePrompt] Service worker offlineReady (fresh install)"),i(!1);return}n&&i(!0)},[n,s]),r?t.jsx("div",{style:{bottom:"env(safe-area-inset-bottom, 16px)"},className:"fixed left-4 right-4 md:left-auto md:right-6 md:bottom-6 z-60 flex justify-center",children:t.jsxs("div",{className:"max-w-xl w-full bg-zinc-900 border border-pink-500 text-white rounded-xl p-3 flex items-center justify-between gap-4 shadow-lg",children:[t.jsx("div",{className:"text-sm",children:"New version available!"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"bg-pink-600 hover:bg-pink-500 text-white px-3 py-2 rounded-md text-sm font-semibold",onClick:async()=>{try{await e(!0)}catch(o){console.warn("[UpdatePrompt] updateServiceWorker failed",o)}i(!1)},children:"Refresh"}),t.jsx("button",{className:"bg-transparent border border-white/10 text-white px-3 py-2 rounded-md text-sm",onClick:()=>i(!1),children:"Later"})]})]})}):null},aL=()=>/iP(ad|hone|od)/.test(navigator.userAgent)&&!("standalone"in navigator&&navigator.standalone),oL=()=>{const[n,e]=S.useState(!1);if(S.useEffect(()=>{try{const r=!!localStorage.getItem("spv_install_dismissed"),i=!!localStorage.getItem("spv_install_banner_dismissed"),o=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;aL()&&r&&!i&&!o&&e(!0)}catch{}},[]),!n)return null;const s=()=>{try{localStorage.setItem("spv_install_banner_dismissed","1")}catch{}e(!1)};return t.jsxs("div",{className:"fixed left-4 right-4 bottom-4 z-50 flex items-center justify-between bg-white/10 backdrop-blur-sm border border-white/10 rounded-xl p-3 gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-white/8 rounded flex items-center justify-center",children:""}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold",children:"Install app for the best experience"}),t.jsx("div",{className:"text-xs text-gray-300",children:"Tap Share  Add to Home Screen"})]})]}),t.jsx("div",{children:t.jsx("button",{onClick:s,className:"text-sm text-gray-200 px-2 py-1 rounded",children:"X"})})]})},lL=()=>{const{products:n}=wt(),[e,s]=S.useState(""),[r,i]=S.useState(null),[o,c]=S.useState(""),[u,f]=S.useState(""),[h,x]=S.useState(""),[v,N]=S.useState(""),[T,_]=S.useState([]);S.useEffect(()=>{const U=localStorage.getItem("vaultItems");U&&_(JSON.parse(U))},[]);const C=n.filter(U=>U.name.toLowerCase().includes(e.toLowerCase())),R=()=>{if(!r||!o||!u||!h)return;const U={id:Date.now().toString(),productId:r.id,productName:r.name,productImage:r.images[0],vaultPriceZAR:parseFloat(o),vaultPriceUSD:parseFloat(u),vaultStock:parseInt(h),goLiveDate:v||new Date().toISOString().split("T")[0],isActive:!1},Z=[...T,U];_(Z),localStorage.setItem("vaultItems",JSON.stringify(Z)),i(null),c(""),f(""),x(""),N("")},z=U=>{const Z=T.map(q=>q.id===U?{...q,isActive:!q.isActive}:q);_(Z),localStorage.setItem("vaultItems",JSON.stringify(Z))},$=U=>{const Z=T.filter(q=>q.id!==U);_(Z),localStorage.setItem("vaultItems",JSON.stringify(Z))};return t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-3",children:[t.jsx(Lt,{className:"text-yellow-400",size:28}),"Vault Management"]})}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-6 flex items-center gap-3",children:[t.jsx(an,{size:20,className:"text-green-400"}),"Add Product to Vault"]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Search & Select Product"}),t.jsxs("div",{className:"relative",children:[t.jsx(da,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 pl-10 text-white",value:e,onChange:U=>s(U.target.value)})]})]}),t.jsx("div",{className:"max-h-64 overflow-y-auto bg-zinc-800 rounded border border-gray-600",children:C.map(U=>t.jsx("div",{className:`p-3 border-b border-gray-700 cursor-pointer hover:bg-zinc-700 ${(r==null?void 0:r.id)===U.id?"bg-cyan-900/30 border-cyan-500":""}`,onClick:()=>i(U),children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:U.images[0],className:"w-12 h-12 rounded object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-medium",children:U.name}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Stock: ",U.stock]})]})]})},U.id))})]}),t.jsxs("div",{className:"space-y-4",children:[r&&t.jsxs("div",{className:"bg-zinc-800 p-4 rounded border border-cyan-500/30",children:[t.jsx("h4",{className:"text-white font-medium mb-2",children:"Selected Product"}),t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("img",{src:r.images[0],className:"w-16 h-16 rounded object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white",children:r.name}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Stock: ",r.stock]})]})]}),t.jsxs("div",{className:"bg-zinc-700 p-3 rounded border border-gray-600",children:[t.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Current Product Price"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("p",{className:"text-green-400 font-bold",children:["R",r.price]}),t.jsxs("p",{className:"text-blue-400 font-bold",children:["$",r.priceUSD]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Price (ZAR)"}),t.jsx("input",{type:"number",placeholder:"e.g., 10",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:o,onChange:U=>c(U.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Price (USD)"}),t.jsx("input",{type:"number",placeholder:"e.g., 1",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:u,onChange:U=>f(U.target.value)})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Stock Quantity"}),t.jsx("input",{type:"number",placeholder:"e.g., 50",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:h,onChange:U=>x(U.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Go Live Date"}),t.jsx("input",{type:"date",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:v,onChange:U=>N(U.target.value)})]}),t.jsxs("button",{onClick:R,disabled:!r||!o||!u||!h,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-gray-600 text-white font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:[t.jsx(an,{size:16}),"Add to Vault Batch"]})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-6 flex items-center gap-3",children:[t.jsx(Cc,{size:20,className:"text-purple-400"}),"Vault Items (",T.length,")"]}),t.jsxs("div",{className:"space-y-4",children:[T.map(U=>t.jsx("div",{className:"bg-zinc-800 p-4 rounded border border-gray-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:U.productImage,className:"w-16 h-16 rounded object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-medium",children:U.productName}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Vault: R",U.vaultPriceZAR," / $",U.vaultPriceUSD," | Stock: ",U.vaultStock]}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Go Live: ",U.goLiveDate]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${U.isActive?"bg-green-900/30 text-green-400":"bg-gray-700 text-gray-400"}`,children:U.isActive?"ACTIVE":"INACTIVE"})}),t.jsx("button",{onClick:()=>z(U.id),className:`px-3 py-1 rounded text-xs font-bold transition-colors ${U.isActive?"bg-red-600 hover:bg-red-500 text-white":"bg-green-600 hover:bg-green-500 text-white"}`,children:U.isActive?"Deactivate":"Activate"}),t.jsx("button",{onClick:()=>$(U.id),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors",children:"Remove"})]})]})},U.id)),T.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-400",children:[t.jsx(Lt,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No items in the vault yet. Add some products above!"})]})]})]})]})},cL=()=>{const{user:n,currency:e,addToCart:s,products:r}=wt(),i=en(),[o,c]=S.useState([]),[u,f]=S.useState([]),[h,x]=S.useState(""),[v,N]=S.useState(""),[T,_]=S.useState("newest"),[C,R]=S.useState(!1),[z,$]=S.useState(!1),[U,Z]=S.useState(null);S.useEffect(()=>{const k=localStorage.getItem("vaultItems");if(k){const E=JSON.parse(k).filter(L=>L.isActive);c(E),f(E)}},[]),S.useEffect(()=>{let k=o;h&&(k=k.filter(E=>E.productName.toLowerCase().includes(h.toLowerCase()))),v&&(k=k.filter(E=>E.productName.toLowerCase().includes(v.toLowerCase()))),k.sort((E,L)=>{switch(T){case"price-low":return(e==="ZAR"?E.vaultPriceZAR:E.vaultPriceUSD)-(e==="ZAR"?L.vaultPriceZAR:L.vaultPriceUSD);case"price-high":return(e==="ZAR"?L.vaultPriceZAR:L.vaultPriceUSD)-(e==="ZAR"?E.vaultPriceZAR:E.vaultPriceUSD);case"newest":default:return new Date(L.goLiveDate).getTime()-new Date(E.goLiveDate).getTime()}}),f(k)},[o,h,v,T,e]);const q=n.membershipTier==="deluxe"||n.membershipTier==="Deluxe Boss"||n.membershipTier==="Deluxe Vault",V=k=>{if(!q){Z(k),$(!0);return}const E=n.membershipMonths||0;let L=5;E>=3?L=10:E>=2&&(L=7);const O=JSON.parse(localStorage.getItem(`vaultPurchases_${n.id}_${new Date().getMonth()}`)||"[]");if(O.length>=L){const B=E>=3?"You have reached your monthly limit of 10 Vault items. Keep your subscription active for unlimited access!":`You have reached your limit of ${L} Vault items this month. Keep your subscription to unlock ${E>=2?"unlimited":"7"} items next month!`;alert(B);return}s({id:k.id,code:`VAULT-${k.id}`,name:k.productName,slug:`vault-${k.id}`,description:k.productName,price:e==="ZAR"?k.vaultPriceZAR:k.vaultPriceUSD,priceUSD:e==="USD"?k.vaultPriceUSD:k.vaultPriceZAR/18,costPrice:e==="ZAR"?k.vaultPriceZAR:k.vaultPriceUSD,category:"Vault",type:"Other",status:"published",stock:1,images:[k.productImage],tags:["vault"],createdAt:new Date().toISOString()},{quantity:1}),O.push(k.id),localStorage.setItem(`vaultPurchases_${n.id}_${new Date().getMonth()}`,JSON.stringify(O)),alert("Added to cart!")},I=k=>{$(!1),k==="subscribe"?i("/membership"):alert("Redirecting to regular product page...")};return t.jsxs("div",{className:"py-8 space-y-8",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-center gap-3",children:[t.jsx(Lt,{className:"text-yellow-400",size:40}),t.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"THE SECRET VAULT"}),t.jsx("button",{onClick:()=>R(!C),className:"text-gray-400 hover:text-white transition-colors",children:t.jsx(mu,{size:20})})]}),t.jsx("p",{className:"font-architects text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"Exclusive Clearance & Samples for Deluxe Members."}),C&&t.jsxs("div",{className:"bg-zinc-900 border border-cyan-500/30 p-4 rounded-lg max-w-md mx-auto text-left",children:[t.jsx("h4",{className:"text-cyan-400 font-bold mb-2",children:"How The Vault Works:"}),t.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[t.jsxs("li",{children:[" ",t.jsx("strong",{className:"text-white",children:"Exclusive Access:"})," Only Deluxe Members can purchase."]}),t.jsxs("li",{children:[" ",t.jsx("strong",{className:"text-white",children:"Loyalty Limits:"})," Month 1 members can buy 5 items. Limits increase every month."]}),t.jsxs("li",{children:[" ",t.jsx("strong",{className:"text-white",children:"First Come, First Serve:"})," Stock is limited. Once it's gone, it's gone."]}),t.jsxs("li",{children:[" ",t.jsx("strong",{className:"text-white",children:"As-Is:"})," Items may be samples or have minor imperfections."]})]})]})]}),t.jsx("div",{className:"bg-zinc-900 border border-gray-700 p-4 rounded-xl sticky top-4 z-10",children:t.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Type"}),t.jsxs("select",{value:h,onChange:k=>x(k.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[t.jsx("option",{value:"",children:"All Types"}),t.jsx("option",{value:"earring",children:"Earrings"}),t.jsx("option",{value:"ring",children:"Rings"}),t.jsx("option",{value:"necklace",children:"Necklaces"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Color"}),t.jsxs("select",{value:v,onChange:k=>N(k.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[t.jsx("option",{value:"",children:"All Colors"}),t.jsx("option",{value:"silver",children:"Silver"}),t.jsx("option",{value:"gold",children:"Gold"}),t.jsx("option",{value:"rose",children:"Rose Gold"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Sort By"}),t.jsxs("select",{value:T,onChange:k=>_(k.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[t.jsx("option",{value:"newest",children:"Newest Added"}),t.jsx("option",{value:"price-low",children:"Price: Low to High"}),t.jsx("option",{value:"price-high",children:"Price: High to Low"})]})]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:u.map(k=>t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-4 hover:border-cyan-500/50 transition-colors",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:k.productImage,className:"w-full h-48 object-cover rounded-lg mb-4",alt:""}),k.vaultStock<5&&t.jsx("div",{className:"absolute top-2 right-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded",children:"Almost Gone!"})]}),t.jsx("h3",{className:"text-white font-medium mb-2",children:k.productName}),t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("span",{className:"text-2xl font-bold text-green-400",children:e==="ZAR"?`R${k.vaultPriceZAR}`:`$${k.vaultPriceUSD}`}),t.jsx("span",{className:"text-gray-500 line-through text-sm",children:(()=>{const E=r.find(L=>L.id===k.productId);return E?e==="ZAR"?`R${E.price}`:`$${E.priceUSD}`:e==="ZAR"?`R${k.vaultPriceZAR*10}`:`$${k.vaultPriceUSD*10}`})()})]}),t.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:["Stock: ",k.vaultStock," left"]}),t.jsx("button",{onClick:()=>V(k),className:`w-full py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2 ${q?"bg-cyan-600 hover:bg-cyan-500 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:q?t.jsxs(t.Fragment,{children:[t.jsx(hl,{size:16}),"ADD TO CART"]}):t.jsxs(t.Fragment,{children:[t.jsx(aa,{size:16})," UNLOCK PRICE"]})})]},k.id))}),u.length===0&&t.jsxs("div",{className:"text-center py-16",children:[t.jsx(Lt,{size:64,className:"mx-auto mb-4 text-gray-600"}),t.jsx("h3",{className:"text-xl font-bold text-gray-400 mb-2",children:"The Vault is Empty"}),t.jsx("p",{className:"text-gray-500",children:"Check back later for exclusive deals!"})]}),z&&U&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>$(!1)}),t.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-md w-full shadow-[0_0_50px_rgba(236,72,153,0.4)]",children:[t.jsx("button",{onClick:()=>$(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:""}),t.jsxs("div",{className:"text-center mb-6",children:[t.jsx(aa,{size:48,className:"mx-auto mb-4 text-yellow-400"}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Access Denied"}),t.jsx("p",{className:"text-gray-300",children:"You have found The Secret Vault, but you don't have the key!"})]}),t.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg mb-6",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[t.jsx("img",{src:U.productImage,className:"w-16 h-16 rounded object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-medium",children:U.productName}),t.jsxs("p",{className:"text-green-400 font-bold",children:["Vault Price: ",e==="ZAR"?`R${U.vaultPriceZAR}`:`$${U.vaultPriceUSD}`]})]})]}),t.jsxs("p",{className:"text-sm text-gray-300",children:["This ",t.jsx("strong",{children:e==="ZAR"?`R${U.vaultPriceZAR}`:`$${U.vaultPriceUSD}`})," deal is reserved exclusively for Deluxe Members."]})]}),t.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"Want this item? Subscribe to the Deluxe Package today and get instant access to the Vault, plus R150 monthly store credit."}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>I("subscribe"),className:"w-full py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-lg transition-colors",children:"BECOME A DELUXE MEMBER - R199 / $25"}),t.jsx("button",{onClick:()=>I("payfull"),className:"w-full py-2 text-gray-400 hover:text-white text-sm underline",children:"No thanks, I'll pay full price"})]})]})]})]})},dL=()=>{const{user:n}=wt(),[e,s]=S.useState(""),[r,i]=S.useState([]),[o,c]=S.useState(null),[u,f]=S.useState(!1),[h,x]=S.useState(!1),[v,N]=S.useState(""),[T,_]=S.useState(7),[C,R]=S.useState(""),[z,$]=S.useState(!1),[U,Z]=S.useState(0),[q,V]=S.useState([]),[I,k]=S.useState(null),[E,L]=S.useState(!1),[O,B]=S.useState(!0),[A,ne]=S.useState([]),fe=S.useRef(null),[ke,De]=S.useState(20),[oe,be]=S.useState("all"),[ve,X]=S.useState("all"),ue=["Spoil Me","Basic","Premium","Deluxe Boss","Insider Club","Gold Member","Deluxe Vault"],se=async()=>{if(!o&&!C||!v||!T)return;let we=o==null?void 0:o.id;if(!we&&C)try{const Ce=await Ps("users",{filters:{email:C},limit:1});if(!Ce||Ce.length===0){alert("User not found with that email.");return}we=Ce[0].id}catch(Ce){console.error("Error finding user:",Ce),alert("Error finding user.");return}try{await Zi("grantTrial",{userId:we,plan:v,days:T}),alert("Trial granted successfully!"),x(!1),c(null),N(""),_(7),R("")}catch(Ce){console.error("Error granting trial:",Ce),alert("Failed to grant trial")}},xe=async()=>{if(o)try{await Zi("adjustStoreCredit",{userId:o.id,amount:U}),alert("Store credit adjusted successfully!"),$(!1),c(null),Z(0)}catch(we){console.error("Error adjusting credit:",we),alert("Failed to adjust credit")}},H=we=>{switch(we){case"active":return"text-green-400";case"trial":return"text-blue-400";case"expired":return"text-red-400";case"cancelled":return"text-gray-400";default:return"text-gray-400"}},Pe=we=>{switch(we){case"active":return t.jsx(Qa,{className:"w-4 h-4"});case"trial":return t.jsx(cr,{className:"w-4 h-4"});case"expired":return t.jsx(Fm,{className:"w-4 h-4"});default:return t.jsx(Fm,{className:"w-4 h-4"})}},Te=async()=>{L(!0);try{const we=await Ps("users",{orderBy:{column:"created_at",ascending:!1},limit:20});V(we||[]),B(((we==null?void 0:we.length)||0)===20)}catch(we){console.error("Error loading users:",we)}finally{L(!1)}},Ue=async()=>{if(!(!I||E)){L(!0);try{const we=q.length,Ce=await Ps("users",{orderBy:{column:"created_at",ascending:!1},limit:20,offset:we});V(Qe=>[...Qe,...Ce||[]]),B(((Ce==null?void 0:Ce.length)||0)===20)}catch(we){console.error("Error loading more:",we)}finally{L(!1)}}},Xe=async we=>{if(s(we),!we){Te();return}const Ce=await Ps("users",{filters:{email:we},limit:20});V(Ce||[]),B(!1)},rt=we=>{if(s(we),!we.trim()){ne([]);return}fe.current&&clearTimeout(fe.current),fe.current=setTimeout(()=>{(async()=>{try{const ut=(await Ps("users",{orderBy:{column:"created_at",ascending:!1},limit:50})||[]).map(ie=>ie.email).filter(ie=>ie&&ie.toLowerCase().includes(we.toLowerCase())).slice(0,10);ne(ut)}catch(Qe){console.error("Failed to fetch suggestions:",Qe),ne([])}})()},300)},zt=async()=>{L(!0),ne([]);try{if(e){const Ce=(await Ps("users",{filters:{email:e},limit:ke})||[]).filter(Qe=>!(oe==="ZA"&&(Qe.country||"").toLowerCase()!=="south africa"||oe==="other"&&(Qe.country||"").toLowerCase()==="south africa"||ve==="buyers"&&(Qe.ordersCount||0)<=0));V(Ce),B(!1),Ce.length===0&&alert("No users found matching these filters.")}else{const we=await Ps("users",{orderBy:{column:"created_at",ascending:!1},limit:ke}),Ce=(we||[]).filter(Qe=>!(oe==="ZA"&&(Qe.country||"").toLowerCase()!=="south africa"||oe==="other"&&(Qe.country||"").toLowerCase()==="south africa"||ve==="buyers"&&(Qe.ordersCount||0)<=0));V(Ce),B(((we==null?void 0:we.length)||0)===ke),Ce.length===0&&alert("No users found matching these filters.")}}catch(we){console.error("Error applying filters:",we),we.message.includes("requires an index")?alert("System Warning: This specific filter combination requires a new Database Index. Open Console (F12) and click the Firebase link."):alert("Failed to fetch. "+we.message)}finally{L(!1)}};return S.useEffect(()=>{Te()},[]),t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Member Management"}),t.jsx("p",{className:"text-gray-400",children:"Search users and manage their membership benefits"})]}),t.jsx("div",{className:"bg-zinc-900 p-6 rounded-lg border border-zinc-800 mb-8",children:t.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Search Email"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Start typing email...",value:e,onChange:we=>rt(we.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white outline-none focus:border-gold"}),A.length>0&&t.jsx("div",{className:"absolute top-full left-0 w-full bg-zinc-800 border border-zinc-700 rounded-b shadow-xl z-50 max-h-40 overflow-y-auto",children:A.map(we=>t.jsx("div",{onClick:()=>{s(we),ne([]),Xe(we)},className:"p-2 hover:bg-zinc-700 cursor-pointer text-sm text-gray-300 border-b border-zinc-700/50",children:we},we))})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Region"}),t.jsxs("select",{value:oe,onChange:we=>be(we.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white",children:[t.jsx("option",{value:"all",children:" All Regions"}),t.jsx("option",{value:"ZA",children:" South Africa"}),t.jsx("option",{value:"other",children:" International"})]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Activity"}),t.jsxs("select",{value:ve,onChange:we=>X(we.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white",children:[t.jsx("option",{value:"all",children:"Everyone"}),t.jsx("option",{value:"buyers",children:" Buyers Only"})]})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:zt,disabled:E,className:"w-full bg-gold hover:bg-yellow-600 text-black font-bold p-3 rounded flex items-center justify-center gap-2 transition-all",children:E?"Processing...":t.jsxs(t.Fragment,{children:[t.jsx(da,{size:18})," RUN SEARCH"]})})})]})}),r.length>0&&t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Search Results"}),t.jsx("div",{className:"space-y-3",children:r.map(we=>t.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors cursor-pointer",onClick:()=>c(we),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Fr,{className:"w-5 h-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-medium",children:we.email}),t.jsx("p",{className:"text-gray-400 text-sm",children:we.displayName||"No display name"})]})]}),t.jsxs("div",{className:`flex items-center gap-2 ${H(we.membershipStatus||"none")}`,children:[Pe(we.membershipStatus||"none"),t.jsx("span",{className:"text-sm capitalize",children:we.membershipStatus||"None"})]})]}),we.membershipTier&&t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsx(Lt,{className:"w-4 h-4 text-yellow-400"}),t.jsx("span",{className:"text-gray-300 text-sm",children:we.membershipTier})]})]},we.id))})]}),o&&t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"bg-zinc-800 border border-cyan-500 rounded-lg p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"User Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"User Information"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Email:"})," ",o.email]}),t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Name:"})," ",o.displayName||"N/A"]}),t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Status:"}),t.jsx("span",{className:`ml-2 ${H(o.membershipStatus||"none")}`,children:o.membershipStatus||"None"})]}),t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Plan:"})," ",o.membershipTier||"None"]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Store Credit"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Balance:"}),o.creditCurrency==="USD"?"$":"R",o.storeCredit||0]}),t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Currency:"})," ",o.creditCurrency||"ZAR"]})]})]})]}),t.jsxs("div",{className:"flex gap-4 mt-6",children:[t.jsx("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),t.jsx("button",{onClick:()=>$(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Adjust Credit"})]})]})}),h&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Grant Trial Membership"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-300 mb-2",children:"Select Plan"}),t.jsxs("select",{value:v,onChange:we=>N(we.target.value),className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"",children:"Choose a plan..."}),ue.map(we=>t.jsx("option",{value:we,children:we},we))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-300 mb-2",children:"Trial Duration (Days)"}),t.jsx("input",{type:"number",value:T,onChange:we=>_(parseInt(we.target.value)),min:"1",max:"365",className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-300 mb-2",children:"User Email"}),t.jsx("input",{type:"email",value:C,onChange:we=>R(we.target.value),className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",placeholder:"Enter user email"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:se,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),t.jsx("button",{onClick:()=>x(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),z&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Adjust Store Credit"}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-300 mb-2",children:"Amount (use negative for deduction)"}),t.jsx("input",{type:"number",value:U,onChange:we=>Z(parseFloat(we.target.value)),step:"0.01",className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500"})]})}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:xe,className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Adjust Credit"}),t.jsx("button",{onClick:()=>$(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[t.jsx(Lt,{size:20,className:"text-purple-400"}),"Membership Tiers & Benefits"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Spoil Me Package"}),t.jsx("span",{className:"text-xs bg-pink-900/30 text-pink-400 border border-pink-500/30 px-2 py-1 rounded",children:"Popular"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Ultimate luxury experience with exclusive perks"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"R19"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"R25/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"5% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Giveaway:"}),t.jsx("span",{className:"text-white",children:"Win R500"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"412/500 (88 left)"})]})]}),t.jsx("button",{onClick:()=>{N("Spoil Me"),x(!0)},className:"w-full py-2 bg-pink-600 hover:bg-pink-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Basic Package"}),t.jsx("span",{className:"text-xs bg-blue-900/30 text-blue-400 border border-blue-500/30 px-2 py-1 rounded",children:"Standard"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Essential benefits for regular shoppers"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"R49"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"R50/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"R100"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Drop:"}),t.jsx("span",{className:"text-white",children:"2x Entries"})]})]}),t.jsx("button",{onClick:()=>{N("Basic"),x(!0)},className:"w-full py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Premium Package"}),t.jsx("span",{className:"text-xs bg-green-900/30 text-green-400 border border-green-500/30 px-2 py-1 rounded",children:"Popular"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Enhanced shopping experience"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"R99"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"R100/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Holiday Gifts:"}),t.jsx("span",{className:"text-white",children:"Free small gift"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"R150"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),t.jsx("span",{className:"text-white",children:"Yes"})]})]}),t.jsx("button",{onClick:()=>{N("Premium"),x(!0)},className:"w-full py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:'Deluxe "Boss" Package'}),t.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-400 border border-yellow-500/30 px-2 py-1 rounded",children:"Elite"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"VIP treatment with maximum benefits"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"R199"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"R150/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"R300"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),t.jsx("span",{className:"text-white",children:"Yes"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Vault Access:"}),t.jsx("span",{className:"text-white",children:"Limited"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"498/750 (252 left)"})]})]}),t.jsx("button",{onClick:()=>{N("Deluxe Boss"),x(!0)},className:"w-full py-2 bg-yellow-600 hover:bg-yellow-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Insider Club"}),t.jsx("span",{className:"text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-2 py-1 rounded",children:"High Demand"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Early access to new products and promotions"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"$5.00"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"$5.00/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"5% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Giveaway:"}),t.jsx("span",{className:"text-white",children:"Win $50"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"412/500 (88 left)"})]})]}),t.jsx("button",{onClick:()=>{N("Insider Club"),x(!0)},className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Gold Member"}),t.jsx("span",{className:"text-xs bg-orange-900/30 text-orange-400 border border-orange-500/30 px-2 py-1 rounded",children:"Critical"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Gold standard benefits and rewards"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"$12.00"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"$12.00/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"$20"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),t.jsx("span",{className:"text-white",children:"Yes"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"485/500 (15 left)"})]})]}),t.jsx("button",{onClick:()=>{N("Gold Member"),x(!0)},className:"w-full py-2 bg-orange-600 hover:bg-orange-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700 col-span-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:'Deluxe "Vault" Access'}),t.jsx("span",{className:"text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-2 py-1 rounded",children:"Ultimate"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Access to exclusive vault items with maximum benefits"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3",children:[t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"$25.00"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"$15.00/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"$40"})]})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),t.jsx("span",{className:"text-white",children:"Yes"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Vault Access:"}),t.jsx("span",{className:"text-white",children:"24hrs Early"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly Giveaways:"}),t.jsx("span",{className:"text-white",children:"Entry"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Winners:"}),t.jsx("span",{className:"text-white",children:"Eligible"})]})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Loyalty Ladder:"}),t.jsx("span",{className:"text-white",children:"Month 1: 5 items"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400"}),t.jsx("span",{className:"text-white",children:"Month 2: 7 items"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400"}),t.jsx("span",{className:"text-white",children:"Month 3: 10 items"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400"}),t.jsx("span",{className:"text-white",children:"Month 4+: Unlimited"})]})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"498/750 (252 left)"})]}),t.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Shop clearance, samples, and slight imperfections starting at R10. Sold as-is."})]})]}),t.jsx("button",{onClick:()=>{N("Deluxe Vault"),x(!0)},className:"w-full py-2 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]})]})]}),t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:["All Members (",q.length,")"]}),t.jsx("div",{className:"space-y-3",children:q.map(we=>t.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors cursor-pointer",onClick:()=>c(we),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Fr,{className:"w-5 h-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-medium",children:we.email}),t.jsx("p",{className:"text-gray-400 text-sm",children:we.displayName||we.name||"No display name"})]})]}),t.jsxs("div",{className:`flex items-center gap-2 ${H(we.membershipStatus||"none")}`,children:[Pe(we.membershipStatus||"none"),t.jsx("span",{className:"text-sm capitalize",children:we.membershipStatus||"None"})]})]}),we.membershipTier&&t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsx(Lt,{className:"w-4 h-4 text-yellow-400"}),t.jsx("span",{className:"text-gray-300 text-sm",children:we.membershipTier})]})]},we.id))}),t.jsx("div",{className:"mt-6 flex justify-center",children:E?t.jsx("div",{className:"text-gold animate-pulse",children:"Loading members..."}):O&&!e&&t.jsx("button",{onClick:Ue,className:"px-6 py-2 bg-zinc-800 border border-zinc-700 hover:border-gold text-white rounded-full text-sm transition-all",children:"Load More Members"})})]})]})},Tn=({checked:n,onChange:e,className:s,children:r})=>t.jsx("button",{type:"button",onClick:e,className:`${s} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:r}),uL=()=>{const{user:n}=wt(),[e,s]=S.useState([]),[r,i]=S.useState([]),[o,c]=S.useState(!0),[u,f]=S.useState(""),[h,x]=S.useState([]),v=S.useRef(null),[N,T]=S.useState(null),[_,C]=S.useState(!1),[R,z]=S.useState(null),[$,U]=S.useState({dashboard:!0,products:!1,orders:!1,categories:!1,members:!1,users:!1,giftCards:!1,social:!1,affiliates:!1,winners:!1,expenses:!1,vault:!1,artists:!1}),[Z,q]=S.useState("all"),[V,I]=S.useState("all"),[k,E]=S.useState(""),[L,O]=S.useState(!1),[B,A]=S.useState(null),[ne,fe]=S.useState("basic"),[ke,De]=S.useState(7),[oe,be]=S.useState(1),[ve,X]=S.useState(1),ue=10,[se,xe]=S.useState(!1),[H,Pe]=S.useState(null),[Te,Ue]=S.useState("none"),[Xe,rt]=S.useState(!1),[zt,we]=S.useState(null),[Ce,Qe]=S.useState("basic");S.useEffect(()=>{(async()=>{c(!0);try{try{const J=await fetch("/api/users");if(J.ok){const _e=await J.json(),kt=_e.users||_e;s(kt),i(kt)}else{const _e=await Ps("users",{orderBy:{column:"created_at",ascending:!1},limit:500});s(_e||[]),i(_e||[])}}catch(J){console.warn("Failed to fetch users via API, falling back to supabase users table:",J);const _e=await Ps("users",{orderBy:{column:"created_at",ascending:!1},limit:500});s(_e||[]),i(_e||[])}}catch(J){console.error("Error loading users:",J)}finally{c(!1)}})()},[]),S.useEffect(()=>{let ye=e;u.trim()&&(ye=ye.filter(xt=>{var Wt,$t,Ss,os;return((Wt=xt.email)==null?void 0:Wt.toLowerCase().includes(u.toLowerCase()))||(($t=xt.displayName)==null?void 0:$t.toLowerCase().includes(u.toLowerCase()))||((Ss=xt.firstName)==null?void 0:Ss.toLowerCase().includes(u.toLowerCase()))||((os=xt.lastName)==null?void 0:os.toLowerCase().includes(u.toLowerCase()))})),Z==="ZA"?ye=ye.filter(xt=>xt.country==="South Africa"):Z==="other"&&(ye=ye.filter(xt=>xt.country!=="South Africa")),V==="buyers"&&(ye=ye.filter(xt=>(xt.totalOrders||0)>0)),k&&(ye=ye.filter(xt=>xt.membershipStatus===k)),ye.sort((xt,Wt)=>{var os,Le;if(xt.isActive===!1&&Wt.isActive!==!1)return-1;if(Wt.isActive===!1&&xt.isActive!==!1)return 1;const $t=((os=xt.createdAt)==null?void 0:os.seconds)||0;return(((Le=Wt.createdAt)==null?void 0:Le.seconds)||0)-$t});const J=(oe-1)*ue,_e=J+ue,kt=ye.slice(J,_e);i(kt),X(Math.ceil(ye.length/ue))},[u,Z,V,k,e,oe]);const ut=async ye=>{try{await Zi("deleteUser",{userId:ye,should_soft_delete:!1});const J=e.filter(_e=>_e.id!==ye);s(J),i(J.filter(_e=>{var kt,xt,Wt,$t;return!u.trim()||((kt=_e.email)==null?void 0:kt.toLowerCase().includes(u.toLowerCase()))||((xt=_e.displayName)==null?void 0:xt.toLowerCase().includes(u.toLowerCase()))||((Wt=_e.firstName)==null?void 0:Wt.toLowerCase().includes(u.toLowerCase()))||(($t=_e.lastName)==null?void 0:$t.toLowerCase().includes(u.toLowerCase()))})),alert("User permanently deleted successfully!"),T(null)}catch(J){console.error("Error deleting user:",J),alert("Failed to delete user. Please try again.")}},ie=ye=>{switch(ye){case"active":return"text-green-400";case"trial":return"text-blue-400";case"expired":return"text-red-400";case"cancelled":return"text-gray-400";default:return"text-gray-400"}},Se=ye=>{switch(ye){case"active":return"";case"trial":return"";case"expired":return"";case"cancelled":return"";default:return""}},Be=ye=>{U(J=>({...J,[ye]:!J[ye]}))},Ne=ye=>{z(ye);const J=ye.adminPermissions||{dashboard:!0,products:!1,orders:!1,categories:!1,members:!1,users:!1,giftCards:!1,social:!1,affiliates:!1,winners:!1,expenses:!1,vault:!1,artists:!1};U(J),C(!0)},We=async()=>{if(R)try{await Yi("users",R.id,{adminPermissions:$}),alert("Admin permissions updated successfully!"),C(!1),z(null)}catch(ye){console.error("Error updating admin permissions:",ye),alert("Failed to update permissions. Please try again.")}},jt=ye=>{f(ye),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{be(1)},300)};return t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Users Management"}),t.jsx("p",{className:"text-gray-400",children:"Manage all registered users and their accounts"}),(n==null?void 0:n.email)==="spoilmevintagediy@gmail.com"&&t.jsxs("button",{onClick:()=>window.location.href="/#/artist-partnership",className:"mt-4 px-6 py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[t.jsx(Jo,{size:16}),"Apply as Artist (Test Flow)"]})]}),t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{className:"md:col-span-2 relative",children:[t.jsx(da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search by name or email...",value:u,onChange:ye=>jt(ye.target.value),className:"w-full pl-10 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ON,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsxs("select",{value:Z,onChange:ye=>q(ye.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"all",children:"All Regions"}),t.jsx("option",{value:"ZA",children:"South Africa"}),t.jsx("option",{value:"other",children:"Other Regions"})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ac,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsxs("select",{value:V,onChange:ye=>I(ye.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"all",children:"All Users"}),t.jsx("option",{value:"buyers",children:"Buyers"})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(za,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsxs("select",{value:k,onChange:ye=>E(ye.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"trial",children:"Trial"}),t.jsx("option",{value:"expired",children:"Expired"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(u||Z!=="all"||V!=="all"||k)&&t.jsx("div",{className:"mt-2 text-center",children:t.jsx("button",{onClick:()=>{f(""),q("all"),I("all"),E("")},className:"text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Clear all filters"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg border bg-blue-900/30 text-blue-400 border-blue-500/20",children:t.jsx(qs,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Users"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg border bg-green-900/30 text-green-400 border-green-500/20",children:t.jsx(Lt,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Active Members"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.filter(ye=>ye.membershipStatus==="active").length})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg border bg-blue-900/30 text-blue-400 border-blue-500/20",children:t.jsx(za,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Trial Users"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.filter(ye=>ye.membershipStatus==="trial").length})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg border bg-gray-900/30 text-gray-400 border-gray-500/20",children:t.jsx(Fr,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Free Users"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.filter(ye=>!ye.membershipTier).length})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[t.jsx(qs,{size:20,className:"text-blue-400"}),"All Users (",r.length,")"]}),o?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"}),t.jsx("p",{className:"text-gray-400 mt-2",children:"Loading users..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.map(ye=>t.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:ye.firstName&&ye.lastName?`${ye.firstName.charAt(0)}${ye.lastName.charAt(0)}`.toUpperCase():ye.displayName?ye.displayName.charAt(0).toUpperCase():ye.email.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium text-white flex items-center gap-2",children:[ye.firstName&&ye.lastName?`${ye.firstName} ${ye.lastName}`:ye.displayName||"No Name",ye.isActive===!1&&t.jsx(fi,{size:16,className:"text-red-500"}),ye.membershipTier&&t.jsx("span",{className:"text-xs px-2 py-1 rounded bg-yellow-900/30 text-yellow-400",children:ye.membershipTier}),ye.email==="spoilmevintagediy@gmail.com"&&t.jsx("span",{className:"text-xs px-2 py-1 rounded bg-red-900/30 text-red-400 font-bold",children:"OWNER"})]}),t.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-1",children:[t.jsx(kc,{size:12}),ye.email]}),t.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[ye.country&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[t.jsx(_c,{size:10}),ye.country]}),t.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[t.jsx("span",{children:Se(ye.membershipStatus||"none")}),t.jsx("span",{className:ie(ye.membershipStatus||"none"),children:ye.membershipStatus||"Free User"})]}),ye.createdAt&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[t.jsx(za,{size:10}),new Date(ye.createdAt.seconds*1e3).toLocaleDateString()]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[ye.email==="spoilmevintagediy@gmail.com"&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>{Pe(ye),Ue(ye.artistStatus||"none"),xe(!0)},className:"px-3 py-1 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(Jo,{size:12}),"Artist"]}),t.jsxs("button",{onClick:()=>{we(ye),Qe(ye.membershipTier||"basic"),rt(!0)},className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(Lt,{size:12}),"Membership"]})]}),t.jsxs("button",{onClick:()=>{A(ye),fe("basic"),De(7),O(!0)},className:"px-3 py-1 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(za,{size:12}),"Grant Trial"]}),t.jsxs("button",{onClick:()=>Ne(ye),className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(Lt,{size:12}),"Admin"]}),t.jsxs("button",{onClick:()=>T(ye.id),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(Mr,{size:12}),"Delete"]})]})]}),t.jsxs("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[t.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[t.jsx("div",{className:"text-gray-400",children:"Store Credit"}),t.jsxs("div",{className:"text-white font-bold",children:[ye.creditCurrency==="USD"?"$":"R",ye.storeCredit||0]})]}),t.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[t.jsx("div",{className:"text-gray-400",children:"Loyalty Points"}),t.jsx("div",{className:"text-white font-bold",children:ye.loyaltyPoints||0})]}),t.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[t.jsx("div",{className:"text-gray-400",children:"Orders"}),t.jsx("div",{className:"text-white font-bold",children:ye.totalOrders||0})]}),t.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[t.jsx("div",{className:"text-gray-400",children:"Gender"}),t.jsx("div",{className:"text-white font-bold",children:ye.gender||"Not set"})]})]})]},ye.id))}),r.length===0&&!o&&t.jsx("div",{className:"text-center py-8 text-gray-400",children:u?"No users found matching your search.":"No users found in the system."})]})]}),t.jsxs("div",{className:"flex justify-center mt-4",children:[t.jsx("button",{onClick:()=>be(ye=>Math.max(ye-1,1)),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-l-lg",disabled:oe===1,children:"Previous"}),t.jsxs("span",{className:"px-4 py-2 bg-gray-800 text-white",children:["Page ",oe," of ",ve]}),t.jsx("button",{onClick:()=>be(ye=>Math.min(ye+1,ve)),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-r-lg",disabled:oe===ve,children:"Next"})]}),N&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-red-900/50 text-red-500 rounded-lg",children:t.jsx(fi,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Delete User"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"This action cannot be undone."})]})]}),t.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to delete this user? This will permanently remove their account and all associated data."}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>ut(N),className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white font-medium rounded-lg transition-colors",children:"Delete User"}),t.jsx("button",{onClick:()=>T(null),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),_&&R&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-blue-900/50 text-blue-500 rounded-lg",children:t.jsx(Lt,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Admin Permissions"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage user permissions"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Dashboard Access"}),t.jsxs(Tn,{checked:$.dashboard,onChange:()=>Be("dashboard"),className:`${$.dashboard?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable dashboard access"}),t.jsx("span",{className:`${$.dashboard?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Products Management"}),t.jsxs(Tn,{checked:$.products,onChange:()=>Be("products"),className:`${$.products?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable products management"}),t.jsx("span",{className:`${$.products?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Orders Management"}),t.jsxs(Tn,{checked:$.orders,onChange:()=>Be("orders"),className:`${$.orders?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable orders management"}),t.jsx("span",{className:`${$.orders?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Categories Management"}),t.jsxs(Tn,{checked:$.categories,onChange:()=>Be("categories"),className:`${$.categories?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable categories management"}),t.jsx("span",{className:`${$.categories?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Members Management"}),t.jsxs(Tn,{checked:$.members,onChange:()=>Be("members"),className:`${$.members?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable members management"}),t.jsx("span",{className:`${$.members?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Users Management"}),t.jsxs(Tn,{checked:$.users,onChange:()=>Be("users"),className:`${$.users?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable users management"}),t.jsx("span",{className:`${$.users?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Gift Cards Management"}),t.jsxs(Tn,{checked:$.giftCards,onChange:()=>Be("giftCards"),className:`${$.giftCards?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable gift cards management"}),t.jsx("span",{className:`${$.giftCards?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Social Media Management"}),t.jsxs(Tn,{checked:$.social,onChange:()=>Be("social"),className:`${$.social?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable social media management"}),t.jsx("span",{className:`${$.social?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Affiliates Management"}),t.jsxs(Tn,{checked:$.affiliates,onChange:()=>Be("affiliates"),className:`${$.affiliates?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable affiliates management"}),t.jsx("span",{className:`${$.affiliates?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Winners Management"}),t.jsxs(Tn,{checked:$.winners,onChange:()=>Be("winners"),className:`${$.winners?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable winners management"}),t.jsx("span",{className:`${$.winners?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Expenses Management"}),t.jsxs(Tn,{checked:$.expenses,onChange:()=>Be("expenses"),className:`${$.expenses?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable expenses management"}),t.jsx("span",{className:`${$.expenses?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Vault Access"}),t.jsxs(Tn,{checked:$.vault,onChange:()=>Be("vault"),className:`${$.vault?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable vault access"}),t.jsx("span",{className:`${$.vault?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Artists Management"}),t.jsxs(Tn,{checked:$.artists,onChange:()=>Be("artists"),className:`${$.artists?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable artists management"}),t.jsx("span",{className:`${$.artists?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]})]}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:We,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Permissions"}),t.jsx("button",{onClick:()=>C(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),L&&B&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-green-900/50 text-green-500 rounded-lg",children:t.jsx(za,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Trial User Settings"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage trial user details"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Trial Plan"}),t.jsxs("select",{value:ne,onChange:ye=>fe(ye.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"basic",children:"Basic Plan"}),t.jsx("option",{value:"premium",children:"Premium Plan"}),t.jsx("option",{value:"deluxe",children:"Deluxe Plan"}),t.jsx("option",{value:"insider",children:"Insider Club"}),t.jsx("option",{value:"gold",children:"Gold Member"}),t.jsx("option",{value:"spoilme",children:"Spoil Me"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Trial Duration (days)"}),t.jsx("input",{type:"number",min:"1",value:ke,onChange:ye=>De(Number(ye.target.value)),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500"})]})]}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:async()=>{try{await Zi("grantTrial",{userId:B.id,plan:ne,days:ke}),alert("Trial granted successfully!"),O(!1),A(null),window.location.reload()}catch(ye){console.error("Error granting trial:",ye),alert("Failed to grant trial. Please try again.")}},className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),t.jsx("button",{onClick:()=>O(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),se&&H&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-purple-900/50 text-purple-500 rounded-lg",children:t.jsx(Jo,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Artist Status"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage artist approval status"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Current Status"}),t.jsx("span",{className:`text-sm font-medium ${Te==="approved"?"text-green-400":Te==="rejected"?"text-red-400":"text-yellow-400"}`,children:Te.charAt(0).toUpperCase()+Te.slice(1)})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:()=>Ue("approved"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${Te==="approved"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[t.jsx(Jo,{size:16}),"Approve Artist"]}),t.jsxs("button",{onClick:()=>Ue("rejected"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${Te==="rejected"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[t.jsx(Mr,{size:16}),"Reject Artist"]})]})]}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:async()=>{try{await Zi("updateArtistStatus",{userId:H.id,status:Te}),alert("Artist status updated successfully!"),xe(!1),Pe(null),window.location.reload()}catch(ye){console.error("Error updating artist status:",ye),alert("Failed to update artist status. Please try again.")}},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Changes"}),t.jsx("button",{onClick:()=>xe(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),Xe&&zt&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-yellow-900/50 text-yellow-500 rounded-lg",children:t.jsx(Lt,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Membership Tier"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage user membership tier"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Current Tier"}),t.jsx("span",{className:"text-sm font-medium text-yellow-400",children:Ce.charAt(0).toUpperCase()+Ce.slice(1)})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Change to"}),t.jsxs("select",{value:Ce,onChange:ye=>Qe(ye.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"basic",children:"Basic"}),t.jsx("option",{value:"premium",children:"Premium"}),t.jsx("option",{value:"deluxe",children:"Deluxe"})]})]})]}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:async()=>{try{await Zi("updateMembershipTier",{userId:zt.id,tier:Ce}),alert("Membership tier updated successfully!"),rt(!1),we(null),window.location.reload()}catch(ye){console.error("Error updating membership tier:",ye),alert("Failed to update membership tier. Please try again.")}},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Changes"}),t.jsx("button",{onClick:()=>rt(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})})]})},hL=()=>{const{affiliateCode:n}=Dc(),{products:e,currency:s,addToCart:r,toggleWishlist:i}=wt(),[o,c]=S.useState(null),[u,f]=S.useState([]),[h,x]=S.useState(!0);S.useEffect(()=>{n&&(async()=>{try{const C={code:n,name:"Sarah Johnson",currency:"ZAR",storeConfig:{products:["product1","product2","product3","product4","product5"],strategy:{discount:10,commission:15},currency:"ZAR"}};c(C);const R=e.filter($=>C.storeConfig.products.includes($.id));f(R);const z={code:C.code,discountPercent:C.storeConfig.strategy.discount,commissionPercent:C.storeConfig.strategy.commission,currency:C.currency,expires:Date.now()+720*60*60*1e3};localStorage.setItem("spoilme_referral",JSON.stringify(z))}catch(C){console.error("Error loading affiliate store:",C)}finally{x(!1)}})()},[n,e]);const v=_=>{var R;if(!((R=o==null?void 0:o.storeConfig)!=null&&R.strategy))return _.price;const C=_.price*(o.storeConfig.strategy.discount/100);return _.price-C},N=_=>{var R;if(!((R=o==null?void 0:o.storeConfig)!=null&&R.strategy))return _.priceUSD;const C=_.priceUSD*(o.storeConfig.strategy.discount/100);return _.priceUSD-C},T=_=>{r(_,{quantity:1,price:v(_),priceUSD:N(_)})};return h?t.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-pink-500 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-400",children:"Loading VIP store..."})]})}):!o||u.length===0?t.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"VIP Store Not Found"}),t.jsx("p",{className:"text-gray-400 mb-6",children:"This affiliate store is not available or has been deactivated."}),t.jsx(He,{to:"/",className:"px-6 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg",children:"Shop Regular Store"})]})}):t.jsxs("div",{className:"min-h-screen bg-zinc-950",children:[t.jsx("div",{className:"bg-gradient-to-r from-pink-900/20 to-purple-900/20 border-b border-gray-800",children:t.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-2 rounded-full text-sm font-bold mb-4",children:[t.jsx(Tc,{size:16})," VIP ACCESS"]}),t.jsxs("h1",{className:"text-4xl md:text-6xl font-cherry text-white mb-4",children:["Welcome to ",o.name,"'s VIP Collection"]}),t.jsxs("p",{className:"text-xl text-gray-300 mb-6",children:["Exclusive ",o.storeConfig.strategy.discount,"% OFF everything in this curated collection"]}),t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-xl p-4 inline-block",children:t.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[t.jsx(BN,{size:20}),t.jsxs("span",{className:"font-bold",children:[o.storeConfig.strategy.discount,"% Discount Applied Automatically"]})]})})]})})}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(_=>t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl overflow-hidden hover:border-pink-500/50 transition-all group",children:[t.jsxs("div",{className:"relative",children:[t.jsx(He,{to:`/product/${_.slug}`,children:t.jsx("img",{src:_.images[0],alt:_.name,className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300"})}),t.jsx("div",{className:"absolute top-4 left-4",children:t.jsxs("div",{className:"bg-pink-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:[o.storeConfig.strategy.discount,"% OFF"]})}),t.jsx("button",{onClick:()=>i(_.id),className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(Lp,{size:20})})]}),t.jsxs("div",{className:"p-6",children:[t.jsx(He,{to:`/product/${_.slug}`,children:t.jsx("h3",{className:"text-lg font-bold text-white mb-2 hover:text-pink-400 transition-colors",children:_.name})}),t.jsx("p",{className:"text-sm text-gray-400 mb-4",children:_.category}),t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((C,R)=>t.jsx(Rn,{size:14,fill:"currentColor"},R))}),t.jsx("span",{className:"text-sm text-gray-400",children:"(4.8)"})]}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("span",{className:"text-lg font-bold text-green-400",children:s==="ZAR"?`R${v(_)}`:`$${N(_)}`}),t.jsx("span",{className:"text-sm text-gray-500 line-through",children:s==="ZAR"?`R${_.price}`:`$${_.priceUSD}`})]}),t.jsxs("button",{onClick:()=>T(_),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2",children:[t.jsx(hl,{size:18}),"Add to Cart"]})]})]},_.id))}),t.jsx("div",{className:"mt-16 text-center",children:t.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-2xl p-8 max-w-2xl mx-auto",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Didn't find what you love?"}),t.jsxs("p",{className:"text-gray-400 mb-6",children:["Browse our full collection and enjoy ",o.storeConfig.strategy.discount,"% OFF on everything!"]}),t.jsxs(He,{to:"/",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl transition-all shadow-lg",children:["Browse Full Catalog ",t.jsx(Qs,{size:20})]})]})})]})]})},fL={bronze:{max:15,options:[{d:5,c:10},{d:10,c:5}]},silver:{max:20,options:[{d:10,c:10},{d:15,c:5}]},gold:{max:25,options:[{d:10,c:15},{d:15,c:10},{d:20,c:5}]},platinum:{max:30,options:[{d:10,c:20},{d:15,c:15},{d:20,c:10},{d:25,c:5}]}},mL=n=>n>=10001?"platinum":n>=5001?"gold":n>=2001?"silver":"bronze",pL=()=>{var Z,q;const{user:n,products:e,currency:s,updateUser:r}=wt(),[i,o]=S.useState([]),[c,u]=S.useState(""),[f,h]=S.useState(null),[x,v]=S.useState(!1),N=mL(((Z=n.affiliateStats)==null?void 0:Z.totalSalesValue)||0),T=fL[N],_=e.filter(V=>V.name.toLowerCase().includes(c.toLowerCase())||V.category.toLowerCase().includes(c.toLowerCase())),C=V=>{i.length<5&&!i.find(I=>I.id===V.id)&&o([...i,V])},R=V=>{o(i.filter(I=>I.id!==V))},z=async()=>{if(!(i.length!==5||!f)){v(!0);try{const V={products:i.map(I=>I.id),strategy:f,currency:n.affiliateCurrency,lastUpdated:new Date().toISOString()};await r({affiliateStoreConfig:V}),alert("Store configuration saved successfully!")}catch(V){console.error("Error saving store config:",V),alert("Failed to save store configuration.")}finally{v(!1)}}},$=V=>{if(!f)return V.price;const I=V.price*(f.d/100);return V.price-I},U=V=>{if(!f)return V.priceUSD;const I=V.priceUSD*(f.d/100);return V.priceUSD-I};return((q=n.affiliateStats)==null?void 0:q.status)!=="approved"?t.jsxs("div",{className:"max-w-4xl mx-auto py-8 text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Access Denied"}),t.jsx("p",{className:"text-gray-400",children:"You need to be an approved affiliate to access this page."}),t.jsx(He,{to:"/affiliate",className:"inline-block mt-4 px-6 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg",children:"Go to Affiliate Program"})]}):t.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-8",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(He,{to:"/affiliate",className:"p-2 bg-zinc-800 hover:bg-zinc-700 rounded-lg",children:t.jsx(ia,{size:20,className:"text-gray-400"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white",children:"VIP Store Builder"}),t.jsx("p",{className:"text-gray-400",children:"Create your personalized affiliate storefront with 5 curated products."})]})]}),t.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-yellow-900/20 rounded-lg text-yellow-400",children:t.jsx(Tc,{size:24})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-bold text-white",children:["Your Current Tier: ",N.toUpperCase()]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Max Commission: ",T.max,"% | Available Strategies: ",T.options.length]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:T.options.map((V,I)=>t.jsx("button",{onClick:()=>h(V),className:`p-4 rounded-lg border transition-all ${(f==null?void 0:f.d)===V.d&&(f==null?void 0:f.c)===V.c?"bg-pink-900/20 border-pink-500 text-pink-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-2xl font-bold mb-1",children:[V.d,"% OFF / ",V.c,"% Commission"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Give customers ",V.d,"% discount, earn ",V.c,"% commission"]})]})},I))})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["Select 5 Products (",i.length,"/5)"]}),t.jsxs("div",{className:"relative",children:[t.jsx(da,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search products...",value:c,onChange:V=>u(V.target.value),className:"w-full bg-zinc-900 border border-gray-700 rounded-lg pl-10 pr-4 py-3 text-white focus:border-pink-500 outline-none"})]})]}),t.jsx("div",{className:"max-h-[600px] overflow-y-auto space-y-3 custom-scrollbar",children:_.slice(0,20).map(V=>{const I=i.find(k=>k.id===V.id);return t.jsx("div",{className:`p-4 rounded-lg border transition-all ${I?"bg-pink-900/10 border-pink-500":"bg-zinc-900 border-gray-800"}`,children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:V.images[0],alt:V.name,className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-white text-sm",children:V.name}),t.jsx("p",{className:"text-xs text-gray-400",children:V.category}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:"text-sm font-bold text-green-400",children:s==="ZAR"?`R${V.price}`:`$${V.priceUSD}`}),f&&t.jsxs("span",{className:"text-xs text-pink-400",children:[" ",s==="ZAR"?`R${$(V)}`:`$${U(V)}`]})]})]}),t.jsx("button",{onClick:()=>I?R(V.id):C(V),className:`p-2 rounded-lg transition-all ${I?"bg-red-600 hover:bg-red-500 text-white":i.length>=5?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-pink-600 hover:bg-pink-500 text-white"}`,disabled:!I&&i.length>=5,children:I?t.jsx(FN,{size:16}):t.jsx(an,{size:16})})]})},V.id)})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Your VIP Store Preview"}),t.jsx("p",{className:"text-sm text-gray-400",children:"This is how your storefront will appear to customers visiting your affiliate link."})]}),i.length===0?t.jsxs("div",{className:"bg-zinc-900/50 border border-dashed border-gray-700 rounded-xl p-8 text-center",children:[t.jsx(Tc,{size:48,className:"text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:"No Products Selected"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Choose 5 products from the left to build your VIP store."})]}):t.jsxs("div",{className:"space-y-4",children:[i.map(V=>t.jsx("div",{className:"bg-zinc-900 border border-gray-800 rounded-xl p-4",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:V.images[0],alt:V.name,className:"w-20 h-20 rounded-lg object-cover border border-gray-700"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-white",children:V.name}),t.jsx("p",{className:"text-sm text-gray-400 mb-2",children:V.category}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 line-through",children:s==="ZAR"?`R${V.price}`:`$${V.priceUSD}`}),t.jsx("span",{className:"text-green-400 font-bold ml-2",children:s==="ZAR"?`R${$(V)}`:`$${U(V)}`})]}),f&&t.jsxs("div",{className:"text-xs bg-pink-900/20 text-pink-400 px-2 py-1 rounded",children:[f.d,"% OFF"]})]})]})]})},V.id)),i.length===5&&f&&t.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-green-500/20 rounded-full",children:t.jsx(rl,{size:20,className:"text-green-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-green-400",children:"Store Ready!"}),t.jsxs("p",{className:"text-sm text-green-300",children:["Your VIP store is configured. Customers will see ",f.d,"% off these products and you'll earn ",f.c,"% commission."]})]})]}),t.jsx("button",{onClick:z,disabled:x,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:opacity-50 text-white font-bold rounded-lg transition-all",children:x?"Saving...":"Save Store Configuration"})]})]})]})]})]})},gL=()=>{const{user:n,products:e,logout:s,submitReview:r,currency:i}=wt(),o=en(),[c,u]=S.useState(null),[f,h]=S.useState(5),[x,v]=S.useState(""),N=(n.notifications||[]).filter(k=>k.type==="review_request"&&!k.isRead),T=(n.notifications||[]).filter(k=>k.type==="gift_ready"),_=(n.notifications||[]).filter(k=>k.type==="gift_received"),C=(n.notifications||[]).filter(k=>(k.type==="system"||k.type==="affiliate_msg")&&!k.isRead),R=(n.notifications||[]).filter(k=>k.type==="credit_received"||k.type==="credit_adjusted"),z=(n.notifications||[]).filter(k=>k.type==="trial_ended"),$=[...N,...T,..._,...C,...R,...z].sort((k,E)=>new Date(E.date).getTime()-new Date(k.date).getTime()),U=async()=>{!c||!c.productId||(await r(c.productId,f,x,c.id),v(""),h(5),u(null),alert("Review submitted! You earned 100 Loyalty Points."))},Z=k=>{if(!k.voucherData)return;const{code:E,amount:L,meta:O}=k.voucherData,B=`${window.location.origin}/#/?voucher=${E}`,A=`Hey ${O.recipientName}! 

${O.senderName} sent you a Spoil Me Vintage Gift Voucher worth R${L}!

"${O.message}"

Redeem it here:
${B}`,ne=O.whatsappNumber?O.whatsappNumber.replace(/[^0-9]/g,""):"",fe=ne?`https://wa.me/${ne}?text=${encodeURIComponent(A)}`:`https://wa.me/?text=${encodeURIComponent(A)}`;window.open(fe,"_blank")},q=k=>{window.location.href=`/#/?voucher=${k}`};if(!n.email)return o("/login"),null;const V=k=>{switch(k){case"review_request":return t.jsx(Rn,{className:"text-yellow-500",size:20});case"gift_ready":return t.jsx(us,{className:"text-pink-500",size:20});case"gift_received":return t.jsx(us,{className:"text-green-500",size:20});case"system":return t.jsx(Ki,{className:"text-blue-500",size:20});case"affiliate_msg":return t.jsx(il,{className:"text-purple-500",size:20});case"credit_received":return t.jsx(ws,{className:"text-green-500",size:20});case"credit_adjusted":return t.jsx(ws,{className:"text-cyan-500",size:20});case"trial_ended":return t.jsx(sh,{className:"text-red-500",size:20});default:return t.jsx(Ki,{className:"text-gray-500",size:20})}},I=k=>{switch(k){case"review_request":return"border-yellow-500/30 bg-yellow-900/20";case"gift_ready":return"border-pink-500/30 bg-pink-900/20";case"gift_received":return"border-green-500/30 bg-green-900/20";case"system":return"border-blue-500/30 bg-blue-900/20";case"affiliate_msg":return"border-purple-500/30 bg-purple-900/20";case"credit_received":return"border-green-500/30 bg-green-900/20";case"credit_adjusted":return"border-cyan-500/30 bg-cyan-900/20";case"trial_ended":return"border-red-500/30 bg-red-900/20";default:return"border-gray-500/30 bg-gray-900/20"}};return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsxs("h1",{className:"text-[28px] font-cherry text-white",children:["Welcome, ",n.name||n.firstName||"Valued Customer"]}),t.jsx("p",{className:"text-[14px] font-architects text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-yellow-400 italic mb-8",children:"This is where we communicate with you, deliver your gift vouchers, and share all important notifications and updates."})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[t.jsx(Ki,{size:32,className:"text-blue-500"}),"Your Notifications Center"]}),t.jsx("p",{className:"text-gray-400 mt-2",children:"Stay updated with your account activity, rewards, and exclusive offers"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-bold text-white",children:$.length}),t.jsx("div",{className:"text-sm text-gray-400",children:"Total Notifications"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Rn,{className:"text-yellow-500",size:16}),t.jsx("span",{className:"text-sm text-gray-400",children:"Pending Reviews"})]}),t.jsx("div",{className:"text-xl font-bold text-white",children:N.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(us,{className:"text-pink-500",size:16}),t.jsx("span",{className:"text-sm text-gray-400",children:"Gifts"})]}),t.jsx("div",{className:"text-xl font-bold text-white",children:T.length+_.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(ws,{className:"text-green-500",size:16}),t.jsx("span",{className:"text-sm text-gray-400",children:"Credits"})]}),t.jsx("div",{className:"text-xl font-bold text-white",children:R.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Ki,{className:"text-blue-500",size:16}),t.jsx("span",{className:"text-sm text-gray-400",children:"System"})]}),t.jsx("div",{className:"text-xl font-bold text-white",children:C.length})]})]}),t.jsx("div",{className:"space-y-4",children:$.length===0?t.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-8 text-center",children:[t.jsx(Ki,{size:48,className:"text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No notifications yet"}),t.jsx("p",{className:"text-gray-400",children:"When you have activity on your account, you'll see it here."})]}):$.map((k,E)=>t.jsx("div",{className:`p-6 rounded-xl border ${I(k.type)}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"shrink-0 mt-1",children:V(k.type)}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-bold text-white text-lg mb-1",children:k.title}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-3",children:k.message}),k.type==="review_request"&&k.productId&&t.jsxs("button",{onClick:()=>u(k),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx($m,{size:16})," Write Review"]}),k.type==="gift_ready"&&k.voucherData&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>Z(k),className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(rh,{size:16})," Send via WhatsApp"]}),t.jsxs("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/#/?voucher=${k.voucherData.code}`),className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(nh,{size:16})," Copy Link"]})]}),k.type==="gift_received"&&k.voucherData&&t.jsxs("button",{onClick:()=>q(k.voucherData.code),className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(us,{size:16})," Redeem Gift"]}),k.type==="trial_ended"&&t.jsxs(He,{to:"/membership",className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(Qs,{size:16})," Renew Membership"]})]}),t.jsx("div",{className:"text-right text-xs text-gray-500 shrink-0",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(cr,{size:12}),new Date(k.date).toLocaleDateString()]})})]})})]})},k.id||E))}),c&&c.type==="review_request"&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>u(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-yellow-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(234,179,8,0.3)] animate-in zoom-in-95 duration-200",children:[t.jsx("button",{onClick:()=>u(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(as,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-yellow-900/50 rounded-full border border-yellow-500 text-yellow-300",children:t.jsx(Rn,{size:24})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"Write a Review"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Rating"}),t.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(k=>t.jsx("button",{onClick:()=>h(k),className:`text-2xl ${k<=f?"text-yellow-500":"text-gray-600"}`,children:""},k))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Your Review"}),t.jsx("textarea",{value:x,onChange:k=>v(k.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-yellow-500 outline-none h-24",placeholder:"Share your thoughts about this product..."})]}),t.jsx("button",{onClick:U,disabled:!x.trim(),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold rounded-xl transition-all shadow-lg",children:"Submit Review (+100 Points)"})]})]})]})]})},xL=()=>{const[n,e]=S.useState(!1),[s,r]=S.useState("all"),[i,o]=S.useState(""),[c,u]=S.useState({title:"",body:"",imageUrl:"",link:"/#/vault"}),f=async h=>{var x,v,N;if(h.preventDefault(),!!confirm("Are you sure you want to send this notification?")){e(!0);try{const T=await Zi("send-push",{title:c.title,body:c.body,targetGroup:s,targetId:s==="individual"?i:null,image:c.imageUrl||null,url:c.link||"/"});if(T!=null&&T.success||(x=T==null?void 0:T.data)!=null&&x.success){const _=T.sentCount||((v=T.data)==null?void 0:v.sentCount)||0;alert(` Success! Sent to ${_} devices.`),u({...c,title:"",body:""})}else{const _=(T==null?void 0:T.message)||((N=T==null?void 0:T.data)==null?void 0:N.message)||"Unknown error";alert(` ${_}`)}}catch(T){console.error(T),alert(`Error: ${T.message}`)}finally{e(!1)}}};return t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg border border-zinc-800 max-w-2xl mx-auto mt-10",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-zinc-800 pb-4",children:[t.jsx(Ki,{className:"text-yellow-500",size:24}),t.jsx("h2",{className:"text-xl font-bold text-white",children:"Push Notification Center"})]}),t.jsxs("form",{onSubmit:f,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Target Group"}),t.jsx("div",{className:"mt-2 grid grid-cols-2 gap-3",children:[{key:"all",label:"Everyone",icon:t.jsx(ON,{size:18})},{key:"south_africa",label:"South Africa",icon:t.jsx(qs,{size:18})},{key:"international",label:"International",icon:t.jsx(qs,{size:18})},{key:"non_members",label:"Non-Members",icon:t.jsx(qs,{size:18})},{key:"affiliates",label:"Affiliates",icon:t.jsx(qs,{size:18})},{key:"artists",label:"Artists",icon:t.jsx(qs,{size:18})},{key:"individual",label:"Individual",icon:t.jsx(Fr,{size:18})}].map(h=>t.jsxs("button",{type:"button",onClick:()=>r(h.key),className:`p-3 rounded border flex items-center gap-2 ${s===h.key?"border-yellow-500 bg-yellow-900/20 text-white":"border-zinc-700 text-gray-400"}`,children:[h.icon,t.jsx("span",{className:"text-sm font-bold",children:h.label})]},h.key))})]}),s==="individual"&&t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"User ID (UID)"}),t.jsx("input",{type:"text",placeholder:"Paste User UID here...",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:i,onChange:h=>o(h.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Notification Title"}),t.jsx("input",{type:"text",placeholder:"e.g.  The Vault is Open!",required:!0,className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1 font-bold",value:c.title,onChange:h=>u({...c,title:h.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Message Body"}),t.jsx("textarea",{placeholder:"e.g. New vintage stock just added. Tap to shop now.",required:!0,rows:3,className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:c.body,onChange:h=>u({...c,body:h.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Deep Link (Optional)"}),t.jsx("input",{type:"text",placeholder:"e.g. /#/vault or /#/membership",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:c.link,onChange:h=>u({...c,link:h.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Image URL (Optional)"}),t.jsx("input",{type:"text",placeholder:"https://...",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:c.imageUrl,onChange:h=>u({...c,imageUrl:h.target.value})})]})]}),t.jsx("button",{type:"submit",disabled:n,className:"w-full bg-yellow-600 hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold py-4 rounded flex items-center justify-center gap-2 transition-colors",children:n?"Sending...":t.jsxs(t.Fragment,{children:[t.jsx(rh,{size:20})," SEND NOTIFICATION"]})})]})]})},yL=()=>{const n=en(),[e,s]=S.useState([]),[r,i]=S.useState(!0);S.useEffect(()=>{o()},[]);const o=async()=>{try{const c=await Ps("custom_templates",{orderBy:{column:"created_at",ascending:!1}});s((c||[]).filter(u=>u.isActive!==!1))}catch(c){console.error("Error fetching templates:",c)}finally{i(!1)}};return r?t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-gold text-xl",children:"Loading custom pendants..."})}):t.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[t.jsx("button",{onClick:()=>n("/"),className:"p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700",children:t.jsx(ia,{size:24})}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gold flex items-center gap-2",children:[t.jsx(js,{size:32}),"Customized Wire Wrapped Pendants"]}),t.jsx("p",{className:"text-gray-400",children:"Design your own unique wire-wrapped pendant"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6 mb-8",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create Your Perfect Pendant"}),t.jsx("p",{className:"text-gray-300 mb-4",children:"Choose from our selection of premium wire-wrapped pendant templates. Customize with your choice of stones, wire styles, and chain lengths to create a truly unique piece of jewelry."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Lt,{size:16,className:"text-gold"}),t.jsx("span",{children:"Premium Materials"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(js,{size:16,className:"text-gold"}),t.jsx("span",{children:"Custom Design"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Lt,{size:16,className:"text-gold"}),t.jsx("span",{children:"Handcrafted Quality"})]})]})]}),e.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(js,{size:48,className:"text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No Custom Templates Available"}),t.jsx("p",{className:"text-gray-500",children:"Check back soon for new designs!"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(c=>t.jsxs("div",{className:"bg-zinc-900 rounded-lg overflow-hidden hover:bg-zinc-800 transition-colors cursor-pointer group",onClick:()=>n(`/customized-wire-wrapped-pendants/${c.id}`),children:[t.jsx("div",{className:"aspect-square bg-zinc-800 overflow-hidden",children:t.jsx("img",{src:c.mainImage,alt:c.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gold mb-2",children:c.name}),t.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:c.description}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-lg font-semibold text-white",children:["From R",c.basePrice]}),t.jsx("button",{className:"px-4 py-2 bg-gold text-black font-bold rounded-lg hover:bg-yellow-500 transition-colors",children:"Customize"})]})]})]},c.id))})]})})},bL=()=>{var O,B,A;const{user:n}=wt(),[e,s]=S.useState([]),[r,i]=S.useState(!0),[o,c]=S.useState(!1),[u,f]=S.useState(!1),[h,x]=S.useState({name:"",basePrice:0,description:"",mainImage:"",stones:[],wireStyles:[],chainOptions:[],isActive:!0});S.useEffect(()=>{v()},[]);const v=async()=>{try{const ne=await Ps("custom_templates",{orderBy:{column:"created_at",ascending:!1}});s(ne||[])}catch(ne){console.error("Error loading templates:",ne)}finally{i(!1)}},N=async()=>{if(!(!h.name||!h.description)){f(!0);try{const ne={...h,stones:h.stones||[],wireStyles:h.wireStyles||[],chainOptions:h.chainOptions||[]};h.id?await Yi("custom_templates",h.id,ne):await ea("custom_templates",ne),await v(),c(!1),x({name:"",basePrice:0,description:"",mainImage:"",stones:[],wireStyles:[],chainOptions:[],isActive:!0})}catch(ne){console.error("Error saving template:",ne)}finally{f(!1)}}},T=async ne=>{if(confirm("Are you sure you want to delete this template?"))try{await dp("custom_templates",ne),await v()}catch(fe){console.error("Error deleting template:",fe)}},_=async ne=>{const fe=`custom-templates/${Date.now()}-${ne.name}`;return await Gu("custom-templates",fe,ne)},C=async ne=>{var ke;const fe=(ke=ne.target.files)==null?void 0:ke[0];if(fe)try{const De=await _(fe);x(oe=>({...oe,mainImage:De}))}catch(De){console.error("Error uploading image:",De)}},R=()=>{x(ne=>({...ne,stones:[...ne.stones||[],{id:Date.now().toString(),name:"",image:"",priceModifier:0}]}))},z=(ne,fe,ke)=>{x(De=>{var oe;return{...De,stones:(oe=De.stones)==null?void 0:oe.map((be,ve)=>ve===ne?{...be,[fe]:ke}:be)}})},$=ne=>{x(fe=>{var ke;return{...fe,stones:(ke=fe.stones)==null?void 0:ke.filter((De,oe)=>oe!==ne)}})},U=async(ne,fe)=>{var De;const ke=(De=fe.target.files)==null?void 0:De[0];if(ke)try{const oe=await _(ke);z(ne,"image",oe)}catch(oe){console.error("Error uploading stone image:",oe)}},Z=()=>{x(ne=>({...ne,wireStyles:[...ne.wireStyles||[],{id:Date.now().toString(),name:"",imageFrameOnly:"",imageWithExample:"",priceModifier:0}]}))},q=(ne,fe,ke)=>{x(De=>{var oe;return{...De,wireStyles:(oe=De.wireStyles)==null?void 0:oe.map((be,ve)=>ve===ne?{...be,[fe]:ke}:be)}})},V=ne=>{x(fe=>{var ke;return{...fe,wireStyles:(ke=fe.wireStyles)==null?void 0:ke.filter((De,oe)=>oe!==ne)}})},I=async(ne,fe,ke)=>{var oe;const De=(oe=ke.target.files)==null?void 0:oe[0];if(De)try{const be=await _(De);q(ne,fe==="frame"?"imageFrameOnly":"imageWithExample",be)}catch(be){console.error("Error uploading wire image:",be)}},k=()=>{x(ne=>({...ne,chainOptions:[...ne.chainOptions||[],""]}))},E=(ne,fe)=>{x(ke=>{var De;return{...ke,chainOptions:(De=ke.chainOptions)==null?void 0:De.map((oe,be)=>be===ne?fe:oe)}})},L=ne=>{x(fe=>{var ke;return{...fe,chainOptions:(ke=fe.chainOptions)==null?void 0:ke.filter((De,oe)=>oe!==ne)}})};return n!=null&&n.isAdmin?r?t.jsx("div",{className:"p-6 text-center",children:t.jsx(Rr,{className:"animate-spin mx-auto",size:24})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Custom Pendant Templates"}),t.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2",children:[t.jsx(an,{size:20})," New Template"]})]}),t.jsx("div",{className:"grid gap-4",children:e.map(ne=>t.jsx("div",{className:"bg-zinc-800 p-4 rounded-lg",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold",children:ne.name}),t.jsx("p",{className:"text-gray-400",children:ne.description}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Base Price: R",ne.basePrice]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{x(ne),c(!0)},className:"p-2 text-blue-400 hover:text-blue-300",children:t.jsx(Vm,{size:20})}),t.jsx("button",{onClick:()=>T(ne.id),className:"p-2 text-red-400 hover:text-red-300",children:t.jsx(Mr,{size:20})})]})]})},ne.id))}),o&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-xl font-bold",children:h.id?"Edit Template":"New Template"}),t.jsx("button",{onClick:()=>c(!1),className:"p-2",children:t.jsx(as,{size:24})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Template Name",value:h.name||"",onChange:ne=>x(fe=>({...fe,name:ne.target.value})),className:"p-2 bg-zinc-800 rounded"}),t.jsx("input",{type:"number",placeholder:"Base Price",value:h.basePrice||0,onChange:ne=>x(fe=>({...fe,basePrice:parseFloat(ne.target.value)})),className:"p-2 bg-zinc-800 rounded"})]}),t.jsx("textarea",{placeholder:"Description",value:h.description||"",onChange:ne=>x(fe=>({...fe,description:ne.target.value})),className:"w-full p-2 bg-zinc-800 rounded h-20"}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",children:"Main Image"}),t.jsx("input",{type:"file",accept:"image/*",onChange:C}),h.mainImage&&t.jsx("img",{src:h.mainImage,alt:"Main",className:"w-32 h-32 object-cover mt-2 rounded"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Stones"}),t.jsx("button",{onClick:R,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Stone"})]}),t.jsx("div",{className:"space-y-4",children:(O=h.stones)==null?void 0:O.map((ne,fe)=>t.jsxs("div",{className:"bg-zinc-800 p-4 rounded flex gap-4 items-center",children:[t.jsx("input",{type:"text",placeholder:"Stone Name",value:ne.name,onChange:ke=>z(fe,"name",ke.target.value),className:"flex-1 p-2 bg-zinc-700 rounded"}),t.jsx("input",{type:"number",placeholder:"Price Modifier",value:ne.priceModifier,onChange:ke=>z(fe,"priceModifier",parseFloat(ke.target.value)),className:"w-24 p-2 bg-zinc-700 rounded"}),t.jsx("input",{type:"file",accept:"image/*",onChange:ke=>U(fe,ke)}),ne.image&&t.jsx("img",{src:ne.image,alt:ne.name,className:"w-16 h-16 object-cover rounded"}),t.jsx("button",{onClick:()=>$(fe),className:"p-2 text-red-400",children:t.jsx(as,{size:20})})]},ne.id))})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Wire Styles"}),t.jsx("button",{onClick:Z,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Wire Style"})]}),t.jsx("div",{className:"space-y-4",children:(B=h.wireStyles)==null?void 0:B.map((ne,fe)=>t.jsxs("div",{className:"bg-zinc-800 p-4 rounded space-y-4",children:[t.jsx("input",{type:"text",placeholder:"Wire Style Name",value:ne.name,onChange:ke=>q(fe,"name",ke.target.value),className:"w-full p-2 bg-zinc-700 rounded"}),t.jsx("input",{type:"number",placeholder:"Price Modifier",value:ne.priceModifier,onChange:ke=>q(fe,"priceModifier",parseFloat(ke.target.value)),className:"w-24 p-2 bg-zinc-700 rounded"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",children:"Frame Only Image"}),t.jsx("input",{type:"file",accept:"image/*",onChange:ke=>I(fe,"frame",ke)}),ne.imageFrameOnly&&t.jsx("img",{src:ne.imageFrameOnly,alt:"Frame",className:"w-16 h-16 object-cover mt-2 rounded"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",children:"With Example Image"}),t.jsx("input",{type:"file",accept:"image/*",onChange:ke=>I(fe,"example",ke)}),ne.imageWithExample&&t.jsx("img",{src:ne.imageWithExample,alt:"Example",className:"w-16 h-16 object-cover mt-2 rounded"})]})]}),t.jsx("button",{onClick:()=>V(fe),className:"p-2 text-red-400",children:t.jsx(as,{size:20})})]},ne.id))})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Chain Options"}),t.jsx("button",{onClick:k,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Chain"})]}),t.jsx("div",{className:"space-y-2",children:(A=h.chainOptions)==null?void 0:A.map((ne,fe)=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",placeholder:"Chain Length",value:ne,onChange:ke=>E(fe,ke.target.value),className:"flex-1 p-2 bg-zinc-700 rounded"}),t.jsx("button",{onClick:()=>L(fe),className:"p-2 text-red-400",children:t.jsx(as,{size:20})})]},fe))})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-600 text-white rounded",children:"Cancel"}),t.jsxs("button",{onClick:N,disabled:u,className:"px-4 py-2 bg-pink-600 text-white rounded disabled:opacity-50 flex items-center gap-2",children:[u?t.jsx(Rr,{className:"animate-spin",size:16}):t.jsx(oc,{size:16}),"Save"]})]})]})]})})]}):t.jsx("div",{className:"p-6 text-center",children:"Access denied. Admin only."})},vL=()=>{const{id:n}=Dc(),e=en(),{user:s,addToCart:r}=wt(),[i,o]=S.useState(null),[c,u]=S.useState(!0),[f,h]=S.useState({stone:"",wireStyle:"",chainLength:""}),[x,v]=S.useState(!1);S.useEffect(()=>{n&&N()},[n]);const N=async()=>{try{const C=await Oc("custom_templates",n);C?o(C):e("/customized-wire-wrapped-pendants")}catch(C){console.error("Error fetching template:",C),e("/customized-wire-wrapped-pendants")}finally{u(!1)}},T=()=>{if(!i)return 0;let C=i.basePrice;if(f.stone){const R=i.stones.find(z=>z.id===f.stone);R&&(C+=R.priceModifier)}if(f.wireStyle){const R=i.wireStyles.find(z=>z.id===f.wireStyle);R&&(C+=R.priceModifier)}return C},_=async()=>{if(!(!s||!i)){if(!f.stone||!f.wireStyle||!f.chainLength){alert("Please select all options before adding to cart.");return}v(!0);try{const C=i.stones.find($=>$.id===f.stone),R=i.wireStyles.find($=>$.id===f.wireStyle),z={id:`custom-${Date.now()}`,code:`CUSTOM-${Date.now()}`,name:`${i.name} - Custom`,slug:`custom-pendant-${Date.now()}`,description:`Custom pendant with ${C==null?void 0:C.name} stone, ${R==null?void 0:R.name} wire style, ${f.chainLength} chain`,price:T(),priceUSD:T()/18,costPrice:i.basePrice+((C==null?void 0:C.priceModifier)||0)+((R==null?void 0:R.priceModifier)||0),category:"Custom Pendants",type:"Pendant",status:"published",stock:1,images:[i.mainImage],tags:["custom","pendant","wire-wrapped"],createdAt:new Date().toISOString(),quantity:1,customOptions:{templateId:i.id,stone:C,wireStyle:R,chainLength:f.chainLength},isCustom:!0};await ea("cart_items",{user_id:s.uid,product_id:z.id,...z,added_at:new Date().toISOString()}),r(z),alert("Custom pendant added to cart!"),e("/cart")}catch(C){console.error("Error adding to cart:",C),alert("Failed to add to cart. Please try again.")}finally{v(!1)}}};return c?t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-gold text-xl",children:"Loading custom builder..."})}):i?t.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[t.jsx("button",{onClick:()=>e("/customized-wire-wrapped-pendants"),className:"p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700",children:t.jsx(ia,{size:24})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gold",children:i.name}),t.jsx("p",{className:"text-gray-400",children:i.description})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"aspect-square bg-zinc-900 rounded-2xl overflow-hidden",children:t.jsx("img",{src:i.mainImage,alt:i.name,className:"w-full h-full object-cover"})}),f.wireStyle&&t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Wire Style Preview"}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:(()=>{const C=i.wireStyles.find(R=>R.id===f.wireStyle);return C?t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Frame Only"}),t.jsx("img",{src:C.imageFrameOnly,alt:"Frame",className:"w-full aspect-square object-cover rounded"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"With Example"}),t.jsx("img",{src:C.imageWithExample,alt:"Example",className:"w-full aspect-square object-cover rounded"})]})]}):null})()})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(js,{size:20,className:"text-gold"}),"Choose Your Stone"]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.stones.map(C=>t.jsxs("button",{onClick:()=>h(R=>({...R,stone:C.id})),className:`p-4 rounded-lg border-2 transition-colors ${f.stone===C.id?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:[t.jsx("img",{src:C.image,alt:C.name,className:"w-full aspect-square object-cover rounded mb-2"}),t.jsx("h4",{className:"font-semibold",children:C.name}),t.jsx("p",{className:"text-sm text-gray-400",children:C.priceModifier>0?`+R${C.priceModifier}`:"No extra cost"})]},C.id))})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(Lt,{size:20,className:"text-gold"}),"Choose Wire Style"]}),t.jsx("div",{className:"space-y-4",children:i.wireStyles.map(C=>t.jsx("button",{onClick:()=>h(R=>({...R,wireStyle:C.id})),className:`w-full p-4 rounded-lg border-2 transition-colors ${f.wireStyle===C.id?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-left",children:C.name}),t.jsx("p",{className:"text-sm text-gray-400",children:C.priceModifier>0?`+R${C.priceModifier}`:"No extra cost"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("img",{src:C.imageFrameOnly,alt:"Frame",className:"w-16 h-16 object-cover rounded"}),t.jsx("img",{src:C.imageWithExample,alt:"Example",className:"w-16 h-16 object-cover rounded"})]})]})},C.id))})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Chain Length"}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.chainOptions.map((C,R)=>t.jsx("button",{onClick:()=>h(z=>({...z,chainLength:C})),className:`p-4 rounded-lg border-2 transition-colors ${f.chainLength===C?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:t.jsx("span",{className:"font-semibold",children:C})},R))})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("span",{className:"text-lg",children:"Total Price:"}),t.jsxs("span",{className:"text-2xl font-bold text-gold",children:["R",T()]})]}),t.jsxs("button",{onClick:_,disabled:x||!f.stone||!f.wireStyle||!f.chainLength,className:"w-full bg-gold text-black font-bold py-4 rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[t.jsx(hl,{size:20}),x?"Adding to Cart...":"Add to Cart"]}),(!f.stone||!f.wireStyle||!f.chainLength)&&t.jsx("p",{className:"text-sm text-gray-400 mt-2 text-center",children:"Please select all options to continue"})]})]})]})]})}):t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-white text-xl",children:"Template not found"})})},wL=()=>{const[n,e]=S.useState("applications"),[s,r]=S.useState([]),[i,o]=S.useState({}),[c,u]=S.useState([]),[f,h]=S.useState([]),[x,v]=S.useState(!0),[N,T]=S.useState(null),_=async()=>{try{v(!0);const q=await Ps("artist_applications",{orderBy:{column:"created_at",ascending:!1}});if(q){const k=q.map(E=>{const L=E.status==="approved"||E.status==="rejected"?E.status:"pending",O=E.created_at?new Date(E.created_at):E.submitted_at?new Date(E.submitted_at):new Date;return{id:E.id,uid:E.uid,name:E.name||E.first_name||"",surname:E.surname||E.last_name||"",artistTradeName:E.artistTradeName||E.shop_name||E.artist_trade_name||null,contactNumber:E.contactNumber||E.contact_number||"",email:E.email||"",productImages:E.productImages||E.product_images||[],product_images:E.product_images||void 0,id_document_url:E.id_document_url||null,country:E.country||null,website:E.website||null,status:L,submittedAt:O}});r(k),T(null)}else{T("Could not load artist applications from Supabase (table missing or schema mismatch). Falling back to local demo applications.");const k=localStorage.getItem("spv_artist_applications"),E=k?JSON.parse(k):[];r(E.map(L=>({id:L.id,...L,submittedAt:L.submittedAt?new Date(L.submittedAt):new Date(L.submitted_at||L.submitted||L.createdAt||L.created_at)})))}const V=await Ps("artists");V?u(V||[]):T(k=>k||"Could not load `artists` table from Supabase.");const I=await Ps("artist_products");I?h((I||[]).map(k=>({id:k.id,...k,createdAt:k.created_at?new Date(k.created_at):new Date,receivedAtHub:k.received_at_hub?new Date(k.received_at_hub):null,approvedAt:k.approved_at?new Date(k.approved_at):null}))):T(k=>k||"Could not load `artist_products` table from Supabase.")}catch(q){console.error("loadInitial failed",q),T((q==null?void 0:q.message)||String(q));const V=localStorage.getItem("spv_artist_applications"),k=(V?JSON.parse(V):[]).map(E=>({id:E.id,uid:E.uid||null,name:E.name||E.first_name||"",surname:E.surname||E.last_name||"",artistTradeName:E.artistTradeName||E.shop_name||null,contactNumber:E.contactNumber||E.contact_number||"",email:E.email||"",productImages:E.productImages||E.product_images||[],product_images:E.product_images||void 0,id_document_url:E.id_document_url||null,country:E.country||null,website:E.website||null,status:E.status==="approved"||E.status==="rejected"?E.status:"pending",submittedAt:E.submittedAt?new Date(E.submittedAt):new Date(E.submitted_at||E.submitted||E.createdAt||E.created_at)}));r(k)}finally{v(!1)}};S.useEffect(()=>{let q=null,V=null,I=null;return _(),q=Hf("artist_applications",async()=>{const E=(await Ps("artist_applications",{orderBy:{column:"created_at",ascending:!1}})||[]).map(L=>{const O=L.status==="approved"||L.status==="rejected"?L.status:"pending",B=L.created_at?new Date(L.created_at):L.submitted_at?new Date(L.submitted_at):new Date;return{id:L.id,uid:L.uid,name:L.name||"",surname:L.surname||"",artistTradeName:L.artistTradeName||L.shop_name||null,contactNumber:L.contactNumber||"",email:L.email||"",productImages:L.productImages||L.product_images||[],product_images:L.product_images||void 0,id_document_url:L.id_document_url||null,country:L.country||null,website:L.website||null,status:O,submittedAt:B}});r(E)}),V=Hf("artists",async()=>{const k=await Ps("artists");u(k||[])}),I=Hf("artist_products",async()=>{const k=await Ps("artist_products");h((k||[]).map(E=>({id:E.id,...E,createdAt:E.created_at?new Date(E.created_at):new Date,receivedAtHub:E.received_at_hub?new Date(E.received_at_hub):null,approvedAt:E.approved_at?new Date(E.approved_at):null})))}),()=>{q&&q(),V&&V(),I&&I()}},[]),S.useEffect(()=>{let q=!0;const V=async()=>{try{const I={},k=s.filter(E=>E.id_document_url);await Promise.all(k.map(async E=>{try{const L=E.id_document_url,{data:O,error:B}=await qe.storage.from("artist-applications").createSignedUrl(L,600);!B&&(O!=null&&O.signedUrl)&&(I[E.id]=O.signedUrl)}catch(L){console.warn("Signed URL fetch failed for",E.id,L)}})),q&&o(I)}catch(I){console.warn("Failed to fetch signed URLs",I)}};return s.length>0&&V(),()=>{q=!1}},[s]);const C=async q=>{try{const V={name:q.name||null,surname:q.surname||null,shop_name:q.artistTradeName||null,user_id:q.uid||null,country:q.country||null,website:q.website||null},{data:I,error:k}=await qe.from("artists").insert([V]).select("*").single();k&&console.warn("Artist insert warning",k.message||k);const{error:E}=await qe.from("artist_applications").update({status:"approved"}).eq("id",q.id);E&&console.warn("Application status update warning",E.message||E);try{await fetch("/.netlify/functions/send-push",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Artist Approved",body:`${q.name||""} ${q.surname||""} was approved.`})})}catch(L){console.warn("Notification send failed",L)}r(L=>L.filter(O=>O.id!==q.id)),console.log("Application approved",I||null)}catch(V){console.error("Approve failed, falling back to local update",V);const I=s.map(k=>k.id===q.id?{...k,status:"approved"}:k);r(I),localStorage.setItem("demo_artist_applications",JSON.stringify(I))}},R=async q=>{try{await Yi("artist_applications",q.id,{status:"rejected"}),await ea("notifications",{userId:q.uid,type:"system",title:"Artist Application Update",message:"We regret to inform you that your artist application has been declined.",date:new Date().toISOString(),isRead:!1}),alert("Application rejected.")}catch(V){console.error("Error rejecting application:",V);try{const I=localStorage.getItem("spv_artist_applications");if(I){const k=JSON.parse(I).map(E=>E.id===q.id?{...E,status:"rejected",rejectedAt:new Date().toISOString()}:E);localStorage.setItem("spv_artist_applications",JSON.stringify(k)),r(k.map(E=>({...E,submittedAt:E.submittedAt?new Date(E.submittedAt):new Date(E.submitted_at||E.submitted||E.createdAt||E.created_at)}))),alert("Application rejected in local/demo storage (Supabase unavailable).");return}}catch(I){console.warn("Local fallback failed",I)}alert("Failed to reject application.")}},z=async q=>{try{await Yi("artist_products",q.id,{status:"approved",approved_at:new Date().toISOString()});const V=c.find(I=>I.uid===q.artistId);V&&await ea("notifications",{userId:V.uid,type:"system",title:"Product Approved",message:`Your product "${q.name}" has been approved and is now live.`,date:new Date().toISOString(),isRead:!1}),alert("Product approved successfully!")}catch(V){console.error("Error approving product:",V),alert("Failed to approve product.")}},$=async q=>{try{await Yi("artist_products",q.id,{status:"rejected"});const V=c.find(I=>I.uid===q.artistId);V&&await ea("notifications",{userId:V.uid,type:"system",title:"Product Rejected",message:`Your product "${q.name}" has been rejected. Please check the quality standards and re-submit.`,date:new Date().toISOString(),isRead:!1}),alert("Product rejected.")}catch(V){console.error("Error rejecting product:",V),alert("Failed to reject product.")}},U=async q=>{try{await Yi("artist_products",q.id,{stock_level:(q.stockLevel||0)+1,status:"live",received_at_hub:new Date().toISOString()}),alert("Stock received and product updated.")}catch(V){console.error("Error updating stock:",V),alert("Failed to update stock.")}},Z=async q=>{if(window.confirm("Are you sure you want to delete this product?"))try{await dp("artist_products",q),alert("Product deleted successfully.")}catch(V){console.error("Error deleting product:",V),alert("Failed to delete product.")}};return x?t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"text-white",children:"Loading artist data..."})}):t.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Artist Hub"}),t.jsxs("div",{className:"flex space-x-1 mb-6 bg-zinc-900 p-1 rounded-lg",children:[t.jsxs("button",{onClick:()=>e("applications"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="applications"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:["Applications (",s.filter(q=>q.status==="pending").length,")"]}),t.jsx("button",{onClick:()=>e("pricing"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="pricing"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Pricing Room"}),t.jsx("button",{onClick:()=>e("quality"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="quality"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Quality Control"}),t.jsx("button",{onClick:()=>e("stock"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="stock"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Stock Management"})]}),n==="applications"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold text-yellow-400",children:"Pending Applications"}),t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-3 rounded-lg",children:t.jsxs("p",{className:"text-yellow-400 text-sm font-medium flex items-center gap-2",children:[t.jsx(fi,{size:16}),"Reviews take up to 72 hours. Artists will be notified via email and in-app notification once their application is processed."]})}),s.filter(q=>q.status==="pending").length===0?t.jsx("div",{className:"text-gray-400",children:"No pending applications."}):s.filter(q=>q.status==="pending").map(q=>t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4 gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:q.artistTradeName||`${q.name||""} ${q.surname||""}`}),t.jsxs("p",{className:"text-gray-300",children:[q.email," ",q.contactNumber?`| ${q.contactNumber}`:""]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Applied: ",q.submittedAt?q.submittedAt.toLocaleString():""]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:async()=>{if(confirm("Approve this application? This will create an artist record."))try{await C(q)}catch(V){console.error("Approve action failed",V),alert("Failed to approve application.")}},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-500 transition-colors flex items-center gap-2",children:[t.jsx(Qa,{size:16})," Approve"]}),t.jsxs("button",{onClick:async()=>{if(confirm("Reject this application?"))try{await R(q)}catch(V){console.error("Reject action failed",V),alert("Failed to reject application.")}},className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-500 transition-colors flex items-center gap-2",children:[t.jsx(Fm,{size:16})," Reject"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2",children:[q.id_document_url?t.jsx("div",{className:"col-span-1",children:i[q.id]?t.jsx("img",{src:i[q.id],alt:"ID document",className:"w-full h-40 object-contain rounded border border-zinc-700"}):t.jsx("div",{className:"w-full h-40 flex items-center justify-center bg-zinc-800 rounded border border-zinc-700 text-sm text-zinc-400",children:"No preview available"})}):null,Array.isArray(q.product_images||q.productImages)&&(q.product_images||q.productImages).slice(0,4).map((V,I)=>t.jsx("img",{src:V,alt:`Product ${I+1}`,className:"w-full h-40 object-cover rounded border border-zinc-700"},I))]})]},q.id)),t.jsx("h2",{className:"text-xl font-bold text-yellow-400 mt-8",children:"All Applications"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(q=>t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h3",{className:"font-bold text-white",children:[q.name," ",q.surname]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${q.status==="approved"?"bg-green-600":q.status==="rejected"?"bg-red-600":"bg-yellow-600"}`,children:q.status})]}),t.jsx("p",{className:"text-sm text-gray-400",children:q.email}),t.jsx("p",{className:"text-xs text-gray-500",children:q.submittedAt.toLocaleDateString()})]},q.id))})]}),n==="pricing"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-yellow-400 mb-4",children:"Pricing Room"}),t.jsx("div",{className:"text-gray-400",children:"Product pricing interface will be implemented here. Artists upload products, admin sets selling prices and RRP."})]}),n==="quality"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-yellow-400 mb-4",children:"Quality Control Hub"}),t.jsx("div",{className:"text-gray-400",children:"Quality inspection interface will be implemented here. Scan order IDs, pass/fail inspections."})]}),n==="stock"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold text-yellow-400",children:"Artist Stock Management"}),f.length===0?t.jsx("div",{className:"text-gray-400",children:"No products found. Encourage artists to upload products."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(q=>{var V;return t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-bold text-white",children:q.name}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${q.status==="approved"?"bg-green-600":q.status==="rejected"?"bg-red-600":"bg-yellow-600"}`,children:q.status})]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Artist: ",(V=c.find(I=>I.uid===q.artistId))==null?void 0:V.shopName]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Stock Level: ",q.stockLevel]}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[t.jsx("button",{onClick:()=>z(q),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex-1",children:"Approve Product"}),t.jsx("button",{onClick:()=>$(q),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex-1",children:"Reject Product"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("h4",{className:"text-white text-sm font-semibold mb-2",children:"Product Images"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:q.images.map((I,k)=>t.jsx("img",{src:I,alt:`Product Image ${k+1}`,className:"w-full h-20 object-cover rounded border border-zinc-700"},k))})]}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsxs("button",{onClick:()=>U(q),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex-1",children:[t.jsx(Ur,{className:"w-5 h-5 mr-2"})," Receive Stock"]}),t.jsxs("button",{onClick:()=>Z(q.id),className:"bg-red-800 text-white px-4 py-2 rounded-lg hover:bg-red-900 transition-colors flex-1",children:[t.jsx(II,{className:"w-5 h-5 mr-2"})," Delete Product"]})]})]},q.id)})})]})]})},NL=()=>{const{currency:n,applyForArtist:e,user:s,isDemoMode:r,isSupabaseConfigured:i,register:o}=wt();en();const[c,u]=S.useState(!1),[f,h]=S.useState(!1),[x,v]=S.useState({name:"",surname:"",artistTradeName:"",contactNumber:"",email:"",productImages:[],plan:""}),[N,T]=S.useState(!1),[_,C]=S.useState([]),[R,z]=S.useState([]),[$,U]=S.useState(!1),[Z,q]=S.useState(!1),[V,I]=S.useState(""),[k,E]=S.useState(""),[L,O]=S.useState(!1),[B,A]=S.useState(!1),[ne,fe]=S.useState(!1),[ke,De]=S.useState(""),oe=Ce=>{const{name:Qe,value:ut}=Ce.target;v(ie=>({...ie,[Qe]:ut}))},be=Ce=>{const Qe=Ce.target.files;if(Qe){const ut=Array.from(Qe),ie=[..._,...ut];ie.length>5?De("Maximum 5 images allowed; extras were ignored"):De("");const Se=ie.slice(0,5);C(Se),R.forEach(Be=>URL.revokeObjectURL(Be)),z(Se.map(Be=>URL.createObjectURL(Be)))}},{updateUser:ve}=wt(),X=Ce=>{const Qe={name:s&&s.id&&s.name?s.name.split(" ")[0]||"":x.name,surname:s&&s.id&&s.name?s.name.split(" ").slice(1).join(" ")||"":x.surname,artistTradeName:(s==null?void 0:s.artistTradeName)||x.artistTradeName,contactNumber:(s==null?void 0:s.contactNumber)||x.contactNumber,email:(s==null?void 0:s.email)||x.email,birthday:(s==null?void 0:s.birthday)||x.birthday||"",gender:(s==null?void 0:s.gender)||x.gender||"",country:(s==null?void 0:s.country)||x.country||"",favoriteColor:(s==null?void 0:s.favoriteColor)||x.favoriteColor||""};v(ut=>({...ut,...Qe,plan:Ce||ut.plan})),u(!0)},se=["name","surname","contactNumber","email"].filter(Ce=>!(x[Ce]||"").toString().trim()),xe=async Ce=>{var Qe,ut;Ce.preventDefault(),T(!0);try{if(s&&s.id&&s.id!=="guest"){const Se={};if(["name","surname","birthday","gender","country","favoriteColor","contactNumber","artistTradeName","email"].forEach(Be=>{const Ne=x[Be];Ne&&(Se[Be]=Ne)}),Object.keys(Se).length>0)try{await ve(Se)}catch(Be){console.warn("Failed to update user profile before application",Be)}}if(!s||s.id==="guest")if(r){if(V){if(V.length<6)throw new Error("Password must be at least 6 characters.");if(V!==k)throw new Error("Passwords do not match.");try{await o({name:x.name,surname:x.surname,email:x.email,password:V,artistTradeName:x.artistTradeName,birthday:x.birthday||null,gender:x.gender||null,country:x.country||null,favoriteColor:x.favoriteColor||null})||console.warn("Registration during demo apply did not complete successfully. Proceeding with demo fallback.")}catch(Se){console.warn("Registration during demo apply failed (continuing demo):",Se)}}}else{if(!V)throw new Error("Please choose a password to create your account.");if(V.length<6)throw new Error("Password must be at least 6 characters.");if(V!==k)throw new Error("Passwords do not match.");if(!await o({name:x.name,surname:x.surname,email:x.email,password:V,artistTradeName:x.artistTradeName,birthday:x.birthday||null,gender:x.gender||null,country:x.country||null,favoriteColor:x.favoriteColor||null}))throw new Error("Failed to create account.")}let ie=[];try{if(!r&&i&&_&&_.length>0){let Se=s&&s.id?String(s.id):"anon";if(/^user_/.test(Se)&&typeof qe<"u"&&qe)try{const Ne=await qe.auth.getUser(),We=(ut=(Qe=Ne==null?void 0:Ne.data)==null?void 0:Qe.user)==null?void 0:ut.id;We&&(Se=We)}catch(Ne){console.warn("Could not resolve real auth user id; falling back to existing id for upload path",Ne)}for(let Ne=0;Ne<_.length;Ne++){const We=_[Ne],jt=encodeURIComponent(We.name.replace(/\s+/g,"_")),ye=`${Se}/${jt}`,J=await Gu("artist-applications",ye,We);J&&ie.push(J)}}else ie=R.slice()}catch(Se){console.error("uploadFile failed:",Se),ie=R.slice()}await e({...x,productImages:ie,plan:x.plan,termsAgreed:$}),alert("Application submitted successfully! We will review it and contact you soon."),u(!1),v({name:"",surname:"",artistTradeName:"",contactNumber:"",email:"",productImages:[],plan:""}),C([]),z([]),U(!1)}catch(ie){console.error("Error submitting application:",ie),alert("Failed to submit application. Please try again.")}finally{T(!1)}},[H,Pe]=S.useState(null),[Te,Ue]=S.useState(!1),[Xe,rt]=S.useState(!1);S.useEffect(()=>{Ue(!1),rt(!1)},[H]);const zt=Ce=>{switch(Ce){case"sold":return{title:"Sold  Funds in Escrow",body:t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"When an item sells, the customer's payment is held securely in escrow by our payment processor. Funds are reserved and protected until delivery and inspection are complete."}),t.jsx("p",{children:"Escrow protects both buyers and artists by allowing disputes or returns to be handled before the payout is released. This encourages confident purchasing and fewer chargebacks."})]})};case"hub":return{title:"Hub Check  Worcester Inspection",body:t.jsxs(t.Fragment,{children:[t.jsxs("p",{children:["Each sold item must have at least ",t.jsx("strong",{className:"text-amber-300",children:"one physical item"})," of the product stored at the Worcester hub and recorded in our hub inventory ",t.jsx("em",{children:"before the product goes live to be sold"}),". This inventory record ensures we can fulfill the sale, schedule inspections, and prevent delays or penalties."]}),t.jsx("div",{className:"mt-3",children:t.jsx("button",{type:"button",onClick:()=>Ue(Qe=>!Qe),"aria-expanded":Te,className:"text-amber-300 underline text-sm",children:"Read more on how this works?"})}),Te&&t.jsxs("div",{className:"mt-3 text-sm text-zinc-300 space-y-2",children:[t.jsxs("p",{children:["Storage is free for ",t.jsx("strong",{children:"one physical stock item"})," when the product is listed. If you want to store additional identical items, we charge a once-off fee per extra item. We do not keep more than ",t.jsx("strong",{children:"20"})," of the same item in our hub."]}),t.jsxs("p",{children:["Pricing: ",f?t.jsxs(t.Fragment,{children:[t.jsx("strong",{children:"$0.50"})," per additional item (USD)"]}):t.jsxs(t.Fragment,{children:[t.jsx("strong",{children:"R2"})," per additional item (ZAR)"]}),"  charged once when inventory is added."]}),t.jsx("p",{children:"This policy helps ensure timely delivery, maintain accurate inventory, and avoid penalties related to missing or unverified stock."})]}),t.jsxs("p",{className:"mt-3",children:["If an item fails inspection, we will contact the artist with options (return, rework, or ",t.jsx("button",{type:"button",onClick:()=>rt(Qe=>!Qe),"aria-expanded":Xe,className:"text-amber-300 underline font-semibold",children:"sell in Vault"}),"). This process helps ensure customer satisfaction and timely delivery while protecting artists from avoidable penalties."]}),Xe&&t.jsxs("div",{className:"mt-2 p-3 bg-amber-900/10 border border-amber-700/30 rounded-md text-sm text-amber-200",children:[t.jsx("strong",{className:"text-amber-300",children:"Sell in Vault:"}),t.jsxs("div",{className:"mt-2 text-amber-100",children:[t.jsx("div",{className:"font-semibold",children:"How The Vault Works:"}),t.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-amber-100",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Exclusive Access:"})," Only Deluxe Members can purchase."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Loyalty Limits:"})," Month 1 members can buy 5 items. Limits increase every month."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"First Come, First Serve:"})," Stock is limited. Once it's gone, it's gone."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"As-Is:"})," Items may be samples or have minor imperfections."]})]}),t.jsx("p",{className:"mt-2 text-amber-200",children:"These items sell at low prices; expected artist profit is typically 5% or less."})]})]})]})};case"delivered":return{title:"Delivered  Collector Receives the Item",body:t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"Once the hub ships the item to the collector and delivery is confirmed, the collector has a short window to report issues. Delivery confirmation marks the transfer of physical possession and starts the countdown to escrow release."}),t.jsx("p",{children:"Smooth deliveries speed up payouts and build trust on the platform  and help avoid penalties associated with late or failed deliveries."})]})};case"day30":return{title:"Day 30  Funds Released",body:t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"Provided no disputes or returns are logged within the 30-day protection window after delivery, the escrowed funds are released to your artist wallet on Day 30."}),t.jsx("p",{children:"This delay gives buyers time to report any issues while ensuring artists are paid fairly for legitimate sales. Our commission of 1% is deducted before the payout."})]})};default:return{title:"",body:""}}},we=[{name:"Tester",slots:5,priceZAR:19,priceUSD:1.5,features:["5 Product Slots","Basic Support"]},{name:"Hobbyist",slots:20,priceZAR:49,priceUSD:4,features:["20 Product Slots","Email Support"]},{name:"Creator",slots:50,priceZAR:99,priceUSD:8,features:["50 Product Slots","Priority Support","Access to Analytics"]},{name:"Boutique",slots:100,priceZAR:189,priceUSD:15,features:["100 Product Slots","Dedicated Support","Advanced Analytics"]},{name:"Gallery",slots:250,priceZAR:399,priceUSD:32,features:["250 Product Slots","24/7 Support","Full Analytics Suite"]}];return t.jsx("div",{className:"bg-gradient-to-b from-gray-900 to-black text-white min-h-screen p-4 sm:p-8 font-sans overflow-x-hidden",children:t.jsxs("div",{className:"max-w-5xl mx-auto",children:[t.jsxs("header",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl sm:text-5xl font-bold text-white font-cherry",children:"Your Art. Global Stage. 1% Fees."}),t.jsx("p",{className:"text-sm sm:text-lg mt-2 text-zinc-300",children:"Join a curated marketplace for elite jewelry artists and reach over 7,000 collectors worldwide."})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-xs text-zinc-400",children:"Currency"}),t.jsxs("div",{role:"button","aria-label":"Toggle currency",onClick:()=>h(Ce=>!Ce),className:`relative inline-flex items-center h-8 w-36 rounded-full p-1 cursor-pointer transition-colors ${f?"bg-amber-600/20":"bg-zinc-800"}`,children:[t.jsx("div",{className:`absolute left-1 top-1 bottom-1 w-16 rounded-full bg-white/5 flex items-center justify-center text-xs font-bold ${f?"translate-x-16":"translate-x-0"} transition-transform`,children:"R"}),t.jsx("div",{className:`absolute left-1 top-1 bottom-1 w-16 rounded-full bg-white/5 flex items-center justify-center text-xs font-bold ${f?"translate-x-16":"translate-x-0"} transition-transform`,children:"$"}),t.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-2 text-xs text-zinc-400",children:[t.jsx("span",{className:`mr-2 ${f?"":"text-amber-400 font-semibold"}`,children:"ZAR (R)"}),t.jsx("span",{className:`${f?"text-amber-400 font-semibold":""}`,children:"USD ($)"})]})]})]})]}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl sm:text-4xl font-bold text-amber-400 font-cherry",children:"Premium Artist Program"}),t.jsx("p",{className:"text-sm text-zinc-300 mt-2",children:"Curated, vetted, and shipped with care."})]}),t.jsx("div",{children:t.jsxs(He,{to:"/register?source=artist",className:"inline-block mt-2 sm:mt-0 bg-amber-600 hover:bg-amber-500 text-black font-semibold py-3 px-5 rounded-full shadow-lg",children:["START YOUR SHOP - ",f?"$1.50":"R19"," / Month"]})})]})]}),t.jsxs("section",{className:"mb-12",children:[t.jsx("h3",{className:"text-xl font-semibold text-amber-400 text-center mb-6",children:"The Trust Timeline"}),t.jsxs("div",{className:"flex flex-col md:flex-row items-stretch gap-4 md:gap-6",children:[t.jsxs("div",{className:"flex-1 bg-zinc-900/40 border border-zinc-800 rounded-lg p-4 text-center relative ring-amber-600/30 shadow-[0_16px_48px_rgba(250,204,21,0.14)]",children:[t.jsx("div",{className:"text-3xl mb-2",children:""}),t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("h4",{className:"font-bold",children:"Sold"}),t.jsx("button",{"aria-label":"More info about Sold",onClick:()=>Pe("sold"),className:"p-1 rounded-full bg-zinc-800/40 hover:bg-zinc-800 text-zinc-300",children:t.jsx(Xi,{className:"w-4 h-4"})})]}),t.jsx("p",{className:"text-zinc-400 mt-1",children:"Funds held securely in escrow."})]}),t.jsxs("div",{className:"flex-1 bg-zinc-900/30 border border-zinc-800 rounded-lg p-4 text-center ring-amber-600/30 shadow-[0_16px_48px_rgba(250,204,21,0.14)]",children:[t.jsx("div",{className:"text-3xl mb-2",children:""}),t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("h4",{className:"font-bold",children:"Hub Check"}),t.jsx("button",{"aria-label":"More info about Hub Check",onClick:()=>Pe("hub"),className:"p-1 rounded-full bg-zinc-800/40 hover:bg-zinc-800 text-zinc-300",children:t.jsx(Xi,{className:"w-4 h-4"})})]}),t.jsx("p",{className:"text-zinc-400 mt-1",children:"Piece inspected at our Worcester hub."})]}),t.jsxs("div",{className:"flex-1 bg-zinc-900/30 border border-zinc-800 rounded-lg p-4 text-center ring-amber-600/30 shadow-[0_16px_48px_rgba(250,204,21,0.14)]",children:[t.jsx("div",{className:"text-3xl mb-2",children:""}),t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("h4",{className:"font-bold",children:"Delivered"}),t.jsx("button",{"aria-label":"More info about Delivered",onClick:()=>Pe("delivered"),className:"p-1 rounded-full bg-zinc-800/40 hover:bg-zinc-800 text-zinc-300",children:t.jsx(Xi,{className:"w-4 h-4"})})]}),t.jsx("p",{className:"text-zinc-400 mt-1",children:"Collector receives your art."})]}),t.jsxs("div",{className:"flex-1 bg-zinc-900/30 border border-zinc-800 rounded-lg p-4 text-center ring-amber-600/30 shadow-[0_16px_48px_rgba(250,204,21,0.14)]",children:[t.jsx("div",{className:"text-3xl mb-2",children:""}),t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("h4",{className:"font-bold",children:"Day 30"}),t.jsx("button",{"aria-label":"More info about Day 30",onClick:()=>Pe("day30"),className:"p-1 rounded-full bg-zinc-800/40 hover:bg-zinc-800 text-zinc-300",children:t.jsx(Xi,{className:"w-4 h-4"})})]}),t.jsx("p",{className:"text-zinc-400 mt-1",children:"Funds released to your wallet."})]})]})]}),t.jsxs("section",{className:"mb-12",children:[t.jsx("h3",{className:"text-xl font-semibold text-amber-400 text-center mb-6",children:"Choose Your Plan"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6",children:we.map(Ce=>{const Qe=f?`$${Ce.priceUSD}`:`R${Ce.priceZAR}`;return t.jsxs("div",{className:`bg-zinc-900/40 border border-zinc-800 rounded-xl p-5 text-center flex flex-col justify-between ${Ce.name==="Creator"?"ring-2 ring-amber-600":""}`,children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("h4",{className:"text-2xl font-bold text-amber-400",children:Ce.name}),Ce.name==="Creator"&&t.jsx("span",{className:"text-xs bg-amber-600 text-black px-2 py-1 rounded-full font-bold",children:"MOST POPULAR"})]}),t.jsxs("p",{className:"text-3xl font-bold my-4 text-white",children:[Qe,t.jsx("span",{className:"text-sm text-zinc-400 ml-1",children:"/month"})]}),t.jsxs("p",{className:"text-zinc-400 mb-4",children:[Ce.slots," Slots"]}),t.jsx("ul",{className:"text-sm text-zinc-400 mb-4 space-y-1",children:Ce.features.map(ut=>t.jsxs("li",{children:[" ",ut]},ut))})]}),t.jsx("div",{children:t.jsx("button",{type:"button",onClick:()=>X(Ce.name),className:"inline-block w-full bg-amber-600 hover:bg-amber-500 text-black font-semibold py-2 rounded-full",children:"Apply Now"})})]},Ce.name)})})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-xl font-semibold text-amber-400 text-center mb-6",children:"How It Works"}),t.jsx("div",{className:"max-w-3xl mx-auto text-lg text-zinc-300 space-y-4",children:t.jsxs("ol",{className:"list-decimal list-inside space-y-3",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Apply:"})," Submit your application to join our curated artist program."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Approved / Upload:"})," Once approved, upload your product images and details."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Ship to Hub:"})," Ship sold items to our Worcester hub for inspection."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Quality Check:"})," We inspect and package items for the collector."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Escrow Release:"})," Funds held in escrow are released on day 30 to your wallet."]})]})})]}),t.jsxs("section",{className:"mt-10",children:[t.jsx("h3",{className:"text-xl font-semibold text-amber-400 text-center mb-2",children:"What Artists Say"}),t.jsx("p",{className:"text-center text-zinc-400 mb-4",children:"Real feedback from our first few months of operation."}),t.jsx("div",{className:"overflow-x-auto md:overflow-visible snap-x snap-mandatory md:snap-none gap-4 flex md:grid md:grid-cols-3 lg:grid-cols-5",children:[{author:"Sarah J. (Small Batch Smith)",text:"I honestly didn't believe the 1% fee was real at first. I'm a small-time artist, but since joining 3 months ago, my customer base has tripled."},{author:"David K.",text:"The escrow system is a lifesaver. I used to worry about scams, but the Worcester hub check makes the buyer feel safe, which makes them buy more."},{author:"Elena M.",text:"Finally, a platform that doesn't eat 20% of my profits. The $4 hobbyist plan is cheaper than a cup of coffee. It's only been live a few months but the traffic is great."},{author:"Jabu N.",text:"I was skeptical about shipping to a hub first, but it actually saves me headache dealing with international customs. They handle the hard part."},{author:"Chloe R.",text:"I switched from Etsy. The global reach here for such a low monthly fee is unbeatable. I love that it's curated so I'm not competing with mass-produced junk."}].map((Ce,Qe)=>t.jsxs("div",{className:"snap-start min-w-[260px] md:min-w-0 bg-zinc-900/40 border border-zinc-800 rounded-lg p-4 m-2 md:m-0",children:[t.jsxs("p",{className:"text-sm text-zinc-300",children:['"',Ce.text,'"']}),t.jsxs("p",{className:"mt-3 text-xs text-zinc-400 font-semibold",children:[" ",Ce.author]})]},Qe))})]}),c&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>u(!1)}),t.jsxs("form",{onSubmit:xe,className:"relative bg-zinc-900 border border-zinc-800 rounded-t-xl md:rounded-xl p-4 md:p-6 w-full max-w-md z-10",children:[t.jsx("div",{className:"w-full flex items-center justify-center md:hidden mb-2",children:t.jsx("div",{className:"w-14 h-1.5 bg-zinc-800 rounded-full"})}),t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx("h4",{className:"text-lg font-bold text-white",children:"Artist Application"}),t.jsx("button",{type:"button",onClick:()=>u(!1),"aria-label":"Close application form",className:"p-1 rounded bg-zinc-800/40 text-zinc-300",children:"Close"})]}),x.plan&&t.jsxs("div",{className:"mb-3 text-sm text-zinc-400",children:["Applying for: ",t.jsx("strong",{className:"text-amber-300",children:x.plan})]}),s&&s.id&&s.id!=="guest"&&t.jsxs("div",{className:"mb-3 p-3 bg-zinc-900 border border-zinc-800 rounded text-sm text-zinc-300",children:[t.jsxs("div",{className:"font-semibold text-white",children:["Welcome back, ",(s.name||"").split(" ")[0]||"Artist","!"]}),t.jsx("div",{className:"mt-2 text-sm",children:"Please review your pre-filled details below and complete any missing fields before applying."}),se.length>0&&t.jsxs("div",{className:"mt-2 text-xs text-amber-300",children:["Missing: ",se.join(", ")]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{name:"name",value:x.name,onChange:oe,placeholder:"First name",className:"w-full bg-black border border-gray-700 rounded p-2 text-white"}),t.jsx("input",{name:"surname",value:x.surname,onChange:oe,placeholder:"Surname",className:"w-full bg-black border border-gray-700 rounded p-2 text-white"}),t.jsx("input",{name:"artistTradeName",value:x.artistTradeName,onChange:oe,placeholder:"Artist / Trade name",className:"w-full bg-black border border-gray-700 rounded p-2 text-white"}),t.jsx("input",{name:"contactNumber",value:x.contactNumber,onChange:oe,placeholder:"Contact number",className:"w-full bg-black border border-gray-700 rounded p-2 text-white"}),t.jsx("input",{name:"email",type:"email",value:x.email,onChange:oe,placeholder:"Email",className:"w-full bg-black border border-gray-700 rounded p-2 text-white"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Date of Birth"}),t.jsx("input",{name:"birthday",type:"date",value:x.birthday||"",onChange:oe,className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded p-2 text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Gender"}),t.jsxs("select",{name:"gender",value:x.gender||"",onChange:oe,className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded p-2 text-white",children:[t.jsx("option",{value:"",children:"Select gender"}),t.jsx("option",{value:"male",children:"Male"}),t.jsx("option",{value:"female",children:"Female"}),t.jsx("option",{value:"other",children:"Other"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:L?"text":"password",value:V,onChange:Ce=>I(Ce.target.value),className:"w-full px-3 py-2 pr-10 bg-zinc-900 border border-gray-700 rounded p-2 text-white",placeholder:"Choose a password"}),t.jsx("button",{type:"button",onClick:()=>O(Ce=>!Ce),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-amber-300",children:L?t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.006.151-1.976.432-2.9M3 3l18 18"})}):t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Confirm Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:B?"text":"password",value:k,onChange:Ce=>E(Ce.target.value),className:"w-full px-3 py-2 pr-10 bg-zinc-900 border border-gray-700 rounded p-2 text-white",placeholder:"Confirm password"}),t.jsx("button",{type:"button",onClick:()=>A(Ce=>!Ce),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-amber-300",children:B?t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.006.151-1.976.432-2.9M3 3l18 18"})}):t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Country"}),t.jsx("input",{name:"country",type:"text",value:x.country||"",onChange:oe,className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded p-2 text-white",placeholder:"Country"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Favorite Color"}),t.jsxs("select",{name:"favoriteColor",value:x.favoriteColor||"",onChange:oe,className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded p-2 text-white",children:[t.jsx("option",{value:"",children:"Select favorite color"}),t.jsx("option",{value:"red",children:"Red"}),t.jsx("option",{value:"blue",children:"Blue"}),t.jsx("option",{value:"green",children:"Green"}),t.jsx("option",{value:"yellow",children:"Yellow"}),t.jsx("option",{value:"purple",children:"Purple"}),t.jsx("option",{value:"pink",children:"Pink"}),t.jsx("option",{value:"orange",children:"Orange"}),t.jsx("option",{value:"black",children:"Black"}),t.jsx("option",{value:"white",children:"White"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-zinc-400",children:"Product images"}),t.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:be,className:"w-full mt-1"}),t.jsx("div",{className:"mt-2 text-xs text-zinc-400",children:R.length===0?"No file chosen":`${R.length} / 5 images selected`}),R.length>0&&t.jsx("div",{className:"mt-2 flex gap-2 flex-wrap",children:R.map((Ce,Qe)=>t.jsxs("div",{className:"relative w-20 h-20 rounded overflow-hidden border border-zinc-800",children:[t.jsx("img",{src:Ce,alt:`preview-${Qe}`,className:"w-full h-full object-cover"}),t.jsx("button",{type:"button",onClick:()=>{try{URL.revokeObjectURL(Ce)}catch{}C(ut=>ut.filter((ie,Se)=>Se!==Qe)),z(ut=>ut.filter((ie,Se)=>Se!==Qe)),De("")},className:"absolute top-1 right-1 p-1 rounded bg-black/60 text-zinc-200",children:""})]},Qe))}),ke&&t.jsx("p",{className:"text-xs text-amber-300 mt-2",children:ke})]}),t.jsxs("div",{className:"mt-4 border-t border-zinc-800 pt-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("button",{type:"button",onClick:()=>fe(Ce=>!Ce),className:"text-amber-300 underline text-sm",children:"Read Terms & Conditions"}),t.jsxs("label",{className:"flex items-center gap-2 text-sm text-zinc-300",children:[t.jsx("input",{type:"checkbox",checked:$,onChange:Ce=>{Ce.target.checked?fe(!0):(U(!1),fe(!1))},className:"w-4 h-4"}),t.jsxs("span",{children:["I agree to the ",t.jsx("strong",{className:"text-amber-300",children:"Artist Terms & Conditions"})]})]})]}),ne&&t.jsxs("div",{className:"mt-3 bg-zinc-900 border border-zinc-800 p-4 rounded space-y-3 text-sm text-zinc-300 max-h-64 overflow-y-auto pr-3",children:[t.jsx("div",{className:"bg-amber-900/10 border border-amber-700/20 p-3 rounded text-amber-100",children:"Please read these terms carefully. You must agree to proceed with your application."}),t.jsxs("section",{children:[t.jsx("h4",{className:"font-semibold text-white",children:"1. Enrollment & Eligibility"}),t.jsx("p",{className:"mt-2",children:"By applying you confirm that you own the rights to the items listed and that all information provided is accurate. We reserve the right to accept or reject applications."})]}),t.jsxs("section",{children:[t.jsx("h4",{className:"font-semibold text-white",children:"2. Hub Inventory & Storage"}),t.jsxs("p",{className:"mt-2",children:["Each product must have at least one physical stock item recorded in our Worcester hub ",t.jsx("strong",{className:"text-amber-300",children:"before the product goes live"}),". Storage is free for one physical stock item. Additional identical items are subject to a once-off fee (R2 per item in ZAR or $0.50 per item in USD). We do not store more than 20 identical items per listing."]})]}),t.jsxs("section",{children:[t.jsx("h4",{className:"font-semibold text-white",children:"3. Inspection, Delivery & Escrow"}),t.jsx("p",{className:"mt-2",children:"All sold items are inspected at our Worcester hub. Funds are held in escrow until delivery is confirmed and the buyer's inspection period passes. Payouts follow the platform's payout schedule and commission structure."})]}),t.jsxs("section",{children:[t.jsx("h4",{className:"font-semibold text-white",children:"4. Vault Listing"}),t.jsx("p",{className:"mt-2",children:"You may opt to have items relisted in the Vault. Vault items are sold as-is, may have minor imperfections, and are sold at low prices with expected artist profit typically 5% or less. Vault sales follow the rules: Deluxe Member access, loyalty limits, first-come first-serve, and limited stock."})]}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{type:"button",onClick:()=>{U(!0),fe(!1)},className:"bg-amber-600 text-black font-semibold py-2 px-4 rounded",children:"Accept"}),t.jsx("button",{type:"button",onClick:()=>{U(!1),fe(!1)},className:"bg-zinc-800 text-zinc-300 py-2 px-4 rounded",children:"Close"})]})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[t.jsx("button",{type:"submit",disabled:N||!$||_.length===0||(!s||s.id==="guest")&&!r&&(!V||V.length<6||V!==k),className:"w-full bg-amber-600 text-black font-semibold py-2 px-4 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Applying":"Apply"}),t.jsx("button",{type:"button",onClick:()=>{u(!1),v(Ce=>({...Ce,plan:""})),C([]),z([]),U(!1)},className:"w-full sm:w-auto bg-zinc-800 text-zinc-300 py-2 px-4 rounded",children:"Cancel"})]}),ke&&t.jsx("p",{className:"text-xs text-amber-300 mt-2",children:ke}),!r&&(!s||s.id==="guest")&&t.jsxs("div",{className:"mt-2 text-xs",children:[t.jsx("p",{className:"text-zinc-400",children:"Note: Creating an account will be required to complete your application. Choose a password at least 6 characters long."}),V&&k&&V!==k&&t.jsx("p",{className:"text-xs text-red-400",children:"Passwords do not match."})]})]})]})]}),Z&&t.jsxs("div",{className:"fixed inset-0 z-60 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>q(!1)}),t.jsxs("div",{className:"relative w-full max-w-3xl bg-zinc-900 border border-zinc-800 rounded-xl p-6 z-10",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-xl font-bold text-amber-300",children:"Artist Terms & Conditions"}),t.jsx("button",{onClick:()=>q(!1),className:"p-1 rounded bg-zinc-800/40 text-zinc-300",children:"Close"})]}),t.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-3 text-sm text-zinc-300",children:[t.jsx("div",{className:"bg-amber-900/10 border border-amber-700/20 p-3 rounded text-amber-100",children:"Please read these terms carefully. You must agree to proceed with your application."}),t.jsxs("section",{children:[t.jsx("h4",{className:"font-semibold text-white",children:"1. Enrollment & Eligibility"}),t.jsx("p",{className:"mt-2",children:"By applying you confirm that you own the rights to the items listed and that all information provided is accurate. We reserve the right to accept or reject applications."})]}),t.jsxs("section",{children:[t.jsx("h4",{className:"font-semibold text-white",children:"2. Hub Inventory & Storage"}),t.jsxs("p",{className:"mt-2",children:["Each product must have at least one physical stock item recorded in our Worcester hub ",t.jsx("strong",{className:"text-amber-300",children:"before the product goes live"}),". Storage is free for one physical stock item. Additional identical items are subject to a once-off fee (R2 per item in ZAR or $0.50 per item in USD). We do not store more than 20 identical items per listing."]})]}),t.jsxs("section",{children:[t.jsx("h4",{className:"font-semibold text-white",children:"3. Inspection, Delivery & Escrow"}),t.jsx("p",{className:"mt-2",children:"All sold items are inspected at our Worcester hub. Funds are held in escrow until delivery is confirmed and the buyer's inspection period passes. Payouts follow the platform's payout schedule and commission structure."})]}),t.jsxs("section",{children:[t.jsx("h4",{className:"font-semibold text-white",children:"4. Vault Listing"}),t.jsx("p",{className:"mt-2",children:"You may opt to have items relisted in the Vault. Vault items are sold as-is, may have minor imperfections, and are sold at low prices with expected artist profit typically 5% or less. Vault sales follow the rules: Deluxe Member access, loyalty limits, first-come first-serve, and limited stock."})]}),t.jsxs("section",{children:[t.jsx("h4",{className:"font-semibold text-white",children:"5. Returns, Penalties & Termination"}),t.jsx("p",{className:"mt-2",children:"Failure to provide accurate inventory or repeated delivery issues may result in penalties, temporary holds, or account termination. We will notify you and provide remediation steps when possible."})]}),t.jsxs("section",{children:[t.jsx("h4",{className:"font-semibold text-white",children:"6. Intellectual Property & Representations"}),t.jsx("p",{className:"mt-2",children:"You represent and warrant that you have all necessary rights to list and sell the items, and that listings do not infringe on third-party rights."})]}),t.jsxs("section",{children:[t.jsx("h4",{className:"font-semibold text-white",children:"7. Governing Law"}),t.jsx("p",{className:"mt-2",children:"These terms are governed by the laws applicable to Spoil Me's principal place of business."})]})]}),t.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[t.jsx("button",{onClick:()=>{U(!0),q(!1)},className:"bg-amber-600 text-black font-semibold py-2 px-4 rounded",children:"Agree & Close"}),t.jsx("button",{onClick:()=>{q(!1),U(!1)},className:"bg-zinc-800 text-zinc-300 py-2 px-4 rounded",children:"Close"})]})]})]}),H&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>Pe(null)}),t.jsx("div",{role:"dialog","aria-modal":"true","aria-label":"Timeline info",onClick:Ce=>Ce.stopPropagation(),className:"relative w-full max-w-md bg-zinc-900 border border-zinc-800 rounded-t-xl md:rounded-xl p-4 md:p-6 z-10 ring-amber-600/30 shadow-[0_20px_60px_rgba(250,204,21,0.16)]",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-white",children:zt(H).title}),t.jsx("div",{className:"text-sm text-zinc-400 mt-2 space-y-3",children:zt(H).body})]}),t.jsx("button",{"aria-label":"Close",onClick:()=>Pe(null),className:"p-2 rounded-md bg-zinc-800/40 hover:bg-zinc-800 text-zinc-300",children:t.jsx(as,{className:"w-4 h-4"})})]})})]}),t.jsx("footer",{className:"mt-12 text-center text-sm text-zinc-500",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:t.jsxs("div",{children:[" ",new Date().getFullYear()," Spoil Me Vintage  Artists: 1% fee, curated marketplace."]})})]})})},jL=({onClose:n})=>t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:n}),t.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-sm w-full shadow-[0_0_50px_rgba(236,72,153,0.4)] animate-in zoom-in-95 duration-300 text-center",children:[t.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:t.jsx(as,{size:20})}),t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600 to-purple-600 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg transform rotate-3",children:t.jsx(AI,{size:32,className:"text-white"})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Voucher Redeemed!"}),t.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"To ensure your discount applies correctly and for the best shopping experience, please use our App."}),t.jsxs("button",{className:"w-full py-3 bg-white text-black font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors mb-3 shadow-lg",onClick:()=>alert("Please use the Install button at the bottom of the screen."),children:[t.jsx(Sc,{size:20})," Install App"]}),t.jsx("button",{onClick:n,className:"text-xs text-gray-500 hover:text-gray-300 underline",children:"Continue in Browser"})]})]}),SL=()=>{const n=la(),e=en(),{applyExternalVoucher:s}=wt(),[r,i]=S.useState(!1);return S.useEffect(()=>{const c=new URLSearchParams(n.search).get("voucher");c&&s(c)&&(i(!0),e("/cart",{replace:!0}))},[n,s,e]),r?t.jsx(jL,{onClose:()=>i(!1)}):null},kL=()=>t.jsx(rI,{children:t.jsx(_L,{})}),_L=()=>{const{isLoading:n,user:e}=wt(),{updateAvailable:s,isDownloading:r,performUpdate:i,dismissUpdate:o}=tL();return S.useEffect(()=>{e!=null&&e.id&&RN(e.id)},[e==null?void 0:e.id]),n?t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):t.jsxs(U1,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[t.jsx(SL,{}),t.jsx(zO,{}),t.jsx(oL,{}),t.jsx(iL,{}),s&&t.jsx(sL,{version:s.version,isDownloading:r,onUpdate:i,onDismiss:o}),t.jsxs(I1,{children:[t.jsxs(Nt,{path:"/",element:t.jsx(YI,{}),children:[t.jsx(Nt,{index:!0,element:t.jsx(eR,{})}),t.jsx(Nt,{path:"collections/:categoryName",element:t.jsx(y5,{})}),t.jsx(Nt,{path:"catalog/:type",element:t.jsx(b5,{})}),t.jsx(Nt,{path:"product/:id",element:t.jsx(LR,{})}),t.jsx(Nt,{path:"cart",element:t.jsx(VR,{})}),t.jsx(Nt,{path:"profile",element:t.jsx(BR,{})}),t.jsx(Nt,{path:"membership",element:t.jsx(f5,{})}),t.jsx(Nt,{path:"earn-rewards",element:t.jsx(m5,{})}),t.jsx(Nt,{path:"affiliate-program",element:t.jsx(g5,{})}),t.jsx(Nt,{path:"gift-cards",element:t.jsx(x5,{})}),t.jsx(Nt,{path:"weekly-winners",element:t.jsx(UO,{})})," ",t.jsx(Nt,{path:"login",element:t.jsx(qR,{})}),t.jsx(Nt,{path:"terms",element:t.jsx(GO,{})})," ",t.jsx(Nt,{path:"vault",element:t.jsx(cL,{})})," ",t.jsx(Nt,{path:"vip/:affiliateCode",element:t.jsx(hL,{})}),t.jsx(Nt,{path:"notifications",element:t.jsx(gL,{})})," ",t.jsx(Nt,{path:"customized-wire-wrapped-pendants",element:t.jsx(yL,{})}),t.jsx(Nt,{path:"customized-wire-wrapped-pendants/:id",element:t.jsx(vL,{})})," ",t.jsx(Nt,{path:"artist-partnership",element:t.jsx(NL,{})})," "]}),t.jsxs(Nt,{path:"/admin",element:t.jsx(ZI,{}),children:[t.jsx(Nt,{index:!0,element:t.jsx(v5,{})}),t.jsx(Nt,{path:"products",element:t.jsx(PO,{})}),t.jsx(Nt,{path:"orders",element:t.jsx(HO,{})}),t.jsx(Nt,{path:"categories",element:t.jsx(AO,{})}),t.jsx(Nt,{path:"gift-cards",element:t.jsx(IO,{})}),t.jsx(Nt,{path:"social",element:t.jsx(MO,{})}),t.jsx(Nt,{path:"affiliates",element:t.jsx(OO,{})}),t.jsx(Nt,{path:"winners",element:t.jsx(FO,{})}),t.jsx(Nt,{path:"expenses",element:t.jsx(WO,{})})," ",t.jsx(Nt,{path:"vault",element:t.jsx(lL,{})})," ",t.jsx(Nt,{path:"members",element:t.jsx(dL,{})})," ",t.jsx(Nt,{path:"users",element:t.jsx(uL,{})})," ",t.jsx(Nt,{path:"affiliate/store-builder",element:t.jsx(pL,{})}),t.jsx(Nt,{path:"notifications",element:t.jsx(xL,{})})," ",t.jsx(Nt,{path:"custom-pendant-manager",element:t.jsx(bL,{})})," ",t.jsx(Nt,{path:"artists",element:t.jsx(wL,{})}),t.jsx(Nt,{path:"ad-pricing",element:t.jsx(xj,{})})]}),t.jsx(Nt,{path:"*",element:t.jsx(P1,{to:"/"})})]})]})};var Ev={},CL="@vercel/speed-insights",EL="1.3.1",TL=()=>{window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)})};function PL(){return typeof window<"u"}function AL(){try{const n="production"}catch{}return"production"}function yj(){return AL()==="development"}function IL(n){return n.scriptSrc?n.scriptSrc:yj()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":n.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":n.basePath?`${n.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function RL(n={}){var e;if(!PL()||n.route===null)return null;TL();const s=IL(n);if(document.head.querySelector(`script[src*="${s}"]`))return null;n.beforeSend&&((e=window.si)==null||e.call(window,"beforeSend",n.beforeSend));const r=document.createElement("script");return r.src=s,r.defer=!0,r.dataset.sdkn=CL+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=EL,n.sampleRate&&(r.dataset.sampleRate=n.sampleRate.toString()),n.route&&(r.dataset.route=n.route),n.endpoint?r.dataset.endpoint=n.endpoint:n.basePath&&(r.dataset.endpoint=`${n.basePath}/speed-insights/vitals`),n.dsn&&(r.dataset.dsn=n.dsn),yj()&&n.debug===!1&&(r.dataset.debug="false"),r.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${s}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(r),{setRoute:i=>{r.dataset.route=i??void 0}}}function DL(){if(!(typeof process>"u"||typeof Ev>"u"))return Ev.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function ML(n){S.useEffect(()=>{var s;n.beforeSend&&((s=window.si)==null||s.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]);const e=S.useRef(null);return S.useEffect(()=>{if(e.current)n.route&&e.current(n.route);else{const s=RL({framework:n.framework??"react",basePath:n.basePath??DL(),...n});s&&(e.current=s.setRoute)}},[n.route]),null}"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").catch(n=>{console.warn("Service worker registration failed:",n)});const bj=document.getElementById("root");if(!bj)throw new Error("Could not find root element to mount to");const OL=LS.createRoot(bj);OL.render(t.jsxs(qa.StrictMode,{children:[t.jsx(kL,{}),t.jsx(ML,{})]}));export{_v as E,WN as W,qI as b};
