function X1(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function tv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qh={exports:{}},ol={},Hh={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function Z1(){if(c0)return it;c0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function N($){return $===null||typeof $!="object"?null:($=w&&$[w]||$["@@iterator"],typeof $=="function"?$:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,T={};function A($,M,se){this.props=$,this.context=M,this.refs=T,this.updater=se||E}A.prototype.isReactComponent={},A.prototype.setState=function($,M){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,M,"setState")},A.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function H(){}H.prototype=A.prototype;function W($,M,se){this.props=$,this.context=M,this.refs=T,this.updater=se||E}var K=W.prototype=new H;K.constructor=W,I(K,A.prototype),K.isPureReactComponent=!0;var te=Array.isArray,pe=Object.prototype.hasOwnProperty,J={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function P($,M,se){var de,ze={},We=null,Ze=null;if(M!=null)for(de in M.ref!==void 0&&(Ze=M.ref),M.key!==void 0&&(We=""+M.key),M)pe.call(M,de)&&!O.hasOwnProperty(de)&&(ze[de]=M[de]);var Ke=arguments.length-2;if(Ke===1)ze.children=se;else if(1<Ke){for(var Je=Array(Ke),He=0;He<Ke;He++)Je[He]=arguments[He+2];ze.children=Je}if($&&$.defaultProps)for(de in Ke=$.defaultProps,Ke)ze[de]===void 0&&(ze[de]=Ke[de]);return{$$typeof:n,type:$,key:We,ref:Ze,props:ze,_owner:J.current}}function z($,M){return{$$typeof:n,type:$.type,key:M,ref:$.ref,props:$.props,_owner:$._owner}}function F($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function k($){var M={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(se){return M[se]})}var j=/\/+/g;function V($,M){return typeof $=="object"&&$!==null&&$.key!=null?k(""+$.key):M.toString(36)}function me($,M,se,de,ze){var We=typeof $;(We==="undefined"||We==="boolean")&&($=null);var Ze=!1;if($===null)Ze=!0;else switch(We){case"string":case"number":Ze=!0;break;case"object":switch($.$$typeof){case n:case e:Ze=!0}}if(Ze)return Ze=$,ze=ze(Ze),$=de===""?"."+V(Ze,0):de,te(ze)?(se="",$!=null&&(se=$.replace(j,"$&/")+"/"),me(ze,M,se,"",function(He){return He})):ze!=null&&(F(ze)&&(ze=z(ze,se+(!ze.key||Ze&&Ze.key===ze.key?"":(""+ze.key).replace(j,"$&/")+"/")+$)),M.push(ze)),1;if(Ze=0,de=de===""?".":de+":",te($))for(var Ke=0;Ke<$.length;Ke++){We=$[Ke];var Je=de+V(We,Ke);Ze+=me(We,M,se,Je,ze)}else if(Je=N($),typeof Je=="function")for($=Je.call($),Ke=0;!(We=$.next()).done;)We=We.value,Je=de+V(We,Ke++),Ze+=me(We,M,se,Je,ze);else if(We==="object")throw M=String($),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return Ze}function Le($,M,se){if($==null)return $;var de=[],ze=0;return me($,de,"","",function(We){return M.call(se,We,ze++)}),de}function Se($){if($._status===-1){var M=$._result;M=M(),M.then(function(se){($._status===0||$._status===-1)&&($._status=1,$._result=se)},function(se){($._status===0||$._status===-1)&&($._status=2,$._result=se)}),$._status===-1&&($._status=0,$._result=M)}if($._status===1)return $._result.default;throw $._result}var Te={current:null},B={transition:null},ve={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:B,ReactCurrentOwner:J};function G(){throw Error("act(...) is not supported in production builds of React.")}return it.Children={map:Le,forEach:function($,M,se){Le($,function(){M.apply(this,arguments)},se)},count:function($){var M=0;return Le($,function(){M++}),M},toArray:function($){return Le($,function(M){return M})||[]},only:function($){if(!F($))throw Error("React.Children.only expected to receive a single React element child.");return $}},it.Component=A,it.Fragment=t,it.Profiler=o,it.PureComponent=W,it.StrictMode=s,it.Suspense=m,it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,it.act=G,it.cloneElement=function($,M,se){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var de=I({},$.props),ze=$.key,We=$.ref,Ze=$._owner;if(M!=null){if(M.ref!==void 0&&(We=M.ref,Ze=J.current),M.key!==void 0&&(ze=""+M.key),$.type&&$.type.defaultProps)var Ke=$.type.defaultProps;for(Je in M)pe.call(M,Je)&&!O.hasOwnProperty(Je)&&(de[Je]=M[Je]===void 0&&Ke!==void 0?Ke[Je]:M[Je])}var Je=arguments.length-2;if(Je===1)de.children=se;else if(1<Je){Ke=Array(Je);for(var He=0;He<Je;He++)Ke[He]=arguments[He+2];de.children=Ke}return{$$typeof:n,type:$.type,key:ze,ref:We,props:de,_owner:Ze}},it.createContext=function($){return $={$$typeof:c,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:l,_context:$},$.Consumer=$},it.createElement=P,it.createFactory=function($){var M=P.bind(null,$);return M.type=$,M},it.createRef=function(){return{current:null}},it.forwardRef=function($){return{$$typeof:d,render:$}},it.isValidElement=F,it.lazy=function($){return{$$typeof:v,_payload:{_status:-1,_result:$},_init:Se}},it.memo=function($,M){return{$$typeof:f,type:$,compare:M===void 0?null:M}},it.startTransition=function($){var M=B.transition;B.transition={};try{$()}finally{B.transition=M}},it.unstable_act=G,it.useCallback=function($,M){return Te.current.useCallback($,M)},it.useContext=function($){return Te.current.useContext($)},it.useDebugValue=function(){},it.useDeferredValue=function($){return Te.current.useDeferredValue($)},it.useEffect=function($,M){return Te.current.useEffect($,M)},it.useId=function(){return Te.current.useId()},it.useImperativeHandle=function($,M,se){return Te.current.useImperativeHandle($,M,se)},it.useInsertionEffect=function($,M){return Te.current.useInsertionEffect($,M)},it.useLayoutEffect=function($,M){return Te.current.useLayoutEffect($,M)},it.useMemo=function($,M){return Te.current.useMemo($,M)},it.useReducer=function($,M,se){return Te.current.useReducer($,M,se)},it.useRef=function($){return Te.current.useRef($)},it.useState=function($){return Te.current.useState($)},it.useSyncExternalStore=function($,M,se){return Te.current.useSyncExternalStore($,M,se)},it.useTransition=function(){return Te.current.useTransition()},it.version="18.3.1",it}var u0;function Qf(){return u0||(u0=1,Hh.exports=Z1()),Hh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0;function e_(){if(d0)return ol;d0=1;var n=Qf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,m,f){var v,w={},N=null,E=null;f!==void 0&&(N=""+f),m.key!==void 0&&(N=""+m.key),m.ref!==void 0&&(E=m.ref);for(v in m)s.call(m,v)&&!l.hasOwnProperty(v)&&(w[v]=m[v]);if(d&&d.defaultProps)for(v in m=d.defaultProps,m)w[v]===void 0&&(w[v]=m[v]);return{$$typeof:e,type:d,key:N,ref:E,props:w,_owner:o.current}}return ol.Fragment=t,ol.jsx=c,ol.jsxs=c,ol}var h0;function t_(){return h0||(h0=1,qh.exports=e_()),qh.exports}var r=t_(),D=Qf();const nv=tv(D),n_=X1({__proto__:null,default:nv},[D]);var iu={},Gh={exports:{}},lr={},Wh={exports:{}},Kh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function r_(){return f0||(f0=1,(function(n){function e(B,ve){var G=B.length;B.push(ve);e:for(;0<G;){var $=G-1>>>1,M=B[$];if(0<o(M,ve))B[$]=ve,B[G]=M,G=$;else break e}}function t(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var ve=B[0],G=B.pop();if(G!==ve){B[0]=G;e:for(var $=0,M=B.length,se=M>>>1;$<se;){var de=2*($+1)-1,ze=B[de],We=de+1,Ze=B[We];if(0>o(ze,G))We<M&&0>o(Ze,ze)?(B[$]=Ze,B[We]=G,$=We):(B[$]=ze,B[de]=G,$=de);else if(We<M&&0>o(Ze,G))B[$]=Ze,B[We]=G,$=We;else break e}}return ve}function o(B,ve){var G=B.sortIndex-ve.sortIndex;return G!==0?G:B.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],f=[],v=1,w=null,N=3,E=!1,I=!1,T=!1,A=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(B){for(var ve=t(f);ve!==null;){if(ve.callback===null)s(f);else if(ve.startTime<=B)s(f),ve.sortIndex=ve.expirationTime,e(m,ve);else break;ve=t(f)}}function te(B){if(T=!1,K(B),!I)if(t(m)!==null)I=!0,Se(pe);else{var ve=t(f);ve!==null&&Te(te,ve.startTime-B)}}function pe(B,ve){I=!1,T&&(T=!1,H(P),P=-1),E=!0;var G=N;try{for(K(ve),w=t(m);w!==null&&(!(w.expirationTime>ve)||B&&!k());){var $=w.callback;if(typeof $=="function"){w.callback=null,N=w.priorityLevel;var M=$(w.expirationTime<=ve);ve=n.unstable_now(),typeof M=="function"?w.callback=M:w===t(m)&&s(m),K(ve)}else s(m);w=t(m)}if(w!==null)var se=!0;else{var de=t(f);de!==null&&Te(te,de.startTime-ve),se=!1}return se}finally{w=null,N=G,E=!1}}var J=!1,O=null,P=-1,z=5,F=-1;function k(){return!(n.unstable_now()-F<z)}function j(){if(O!==null){var B=n.unstable_now();F=B;var ve=!0;try{ve=O(!0,B)}finally{ve?V():(J=!1,O=null)}}else J=!1}var V;if(typeof W=="function")V=function(){W(j)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Le=me.port2;me.port1.onmessage=j,V=function(){Le.postMessage(null)}}else V=function(){A(j,0)};function Se(B){O=B,J||(J=!0,V())}function Te(B,ve){P=A(function(){B(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){I||E||(I=!0,Se(pe))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(B){switch(N){case 1:case 2:case 3:var ve=3;break;default:ve=N}var G=N;N=ve;try{return B()}finally{N=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,ve){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=N;N=B;try{return ve()}finally{N=G}},n.unstable_scheduleCallback=function(B,ve,G){var $=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?$+G:$):G=$,B){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=G+M,B={id:v++,callback:ve,priorityLevel:B,startTime:G,expirationTime:M,sortIndex:-1},G>$?(B.sortIndex=G,e(f,B),t(m)===null&&B===t(f)&&(T?(H(P),P=-1):T=!0,Te(te,G-$))):(B.sortIndex=M,e(m,B),I||E||(I=!0,Se(pe))),B},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(B){var ve=N;return function(){var G=N;N=ve;try{return B.apply(this,arguments)}finally{N=G}}}})(Kh)),Kh}var p0;function s_(){return p0||(p0=1,Wh.exports=r_()),Wh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function i_(){if(m0)return lr;m0=1;var n=Qf(),e=s_();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(i,a){c(i,a),c(i+"Capture",a)}function c(i,a){for(o[i]=a,i=0;i<a.length;i++)s.add(a[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function N(i){return m.call(w,i)?!0:m.call(v,i)?!1:f.test(i)?w[i]=!0:(v[i]=!0,!1)}function E(i,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function I(i,a,u,p){if(a===null||typeof a>"u"||E(i,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function T(i,a,u,p,y,_,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=C}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new T(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];A[a]=new T(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new T(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new T(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new T(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new T(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new T(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new T(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new T(i,5,!1,i.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function W(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(H,W);A[a]=new T(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(H,W);A[a]=new T(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(H,W);A[a]=new T(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new T(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new T(i,1,!1,i.toLowerCase(),null,!0,!0)});function K(i,a,u,p){var y=A.hasOwnProperty(a)?A[a]:null;(y!==null?y.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(I(a,u,y,p)&&(u=null),p||y===null?N(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):y.mustUseProperty?i[y.propertyName]=u===null?y.type===3?!1:"":u:(a=y.attributeName,p=y.attributeNamespace,u===null?i.removeAttribute(a):(y=y.type,u=y===3||y===4&&u===!0?"":""+u,p?i.setAttributeNS(p,a,u):i.setAttribute(a,u))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pe=Symbol.for("react.element"),J=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),k=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),Le=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),B=Symbol.iterator;function ve(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var G=Object.assign,$;function M(i){if($===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);$=a&&a[1]||""}return`
`+$+i}var se=!1;function de(i,a){if(!i||se)return"";se=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ie){var p=ie}Reflect.construct(i,[],a)}else{try{a.call()}catch(ie){p=ie}i.call(a.prototype)}else{try{throw Error()}catch(ie){p=ie}i()}}catch(ie){if(ie&&p&&typeof ie.stack=="string"){for(var y=ie.stack.split(`
`),_=p.stack.split(`
`),C=y.length-1,U=_.length-1;1<=C&&0<=U&&y[C]!==_[U];)U--;for(;1<=C&&0<=U;C--,U--)if(y[C]!==_[U]){if(C!==1||U!==1)do if(C--,U--,0>U||y[C]!==_[U]){var q=`
`+y[C].replace(" at new "," at ");return i.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",i.displayName)),q}while(1<=C&&0<=U);break}}}finally{se=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?M(i):""}function ze(i){switch(i.tag){case 5:return M(i.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return i=de(i.type,!1),i;case 11:return i=de(i.type.render,!1),i;case 1:return i=de(i.type,!0),i;default:return""}}function We(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case J:return"Portal";case z:return"Profiler";case P:return"StrictMode";case V:return"Suspense";case me:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case k:return(i.displayName||"Context")+".Consumer";case F:return(i._context.displayName||"Context")+".Provider";case j:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Le:return a=i.displayName||null,a!==null?a:We(i.type)||"Memo";case Se:a=i._payload,i=i._init;try{return We(i(a))}catch{}}return null}function Ze(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return We(a);case 8:return a===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ke(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Je(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function He(i){var a=Je(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),p=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,_=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(C){p=""+C,_.call(this,C)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(C){p=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function wt(i){i._valueTracker||(i._valueTracker=He(i))}function Et(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return i&&(p=Je(i)?i.checked?"true":"false":i.value),i=p,i!==u?(a.setValue(i),!0):!1}function ot(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function je(i,a){var u=a.checked;return G({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function at(i,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=Ke(a.value!=null?a.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Bt(i,a){a=a.checked,a!=null&&K(i,"checked",a,!1)}function $t(i,a){Bt(i,a);var u=Ke(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?qt(i,a.type,u):a.hasOwnProperty("defaultValue")&&qt(i,a.type,Ke(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function un(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function qt(i,a,u){(a!=="number"||ot(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var _e=Array.isArray;function Ht(i,a,u,p){if(i=i.options,a){a={};for(var y=0;y<u.length;y++)a["$"+u[y]]=!0;for(u=0;u<i.length;u++)y=a.hasOwnProperty("$"+i[u].value),i[u].selected!==y&&(i[u].selected=y),y&&p&&(i[u].defaultSelected=!0)}else{for(u=""+Ke(u),a=null,y=0;y<i.length;y++){if(i[y].value===u){i[y].selected=!0,p&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function Mn(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Qn(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(_e(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:Ke(u)}}function hr(i,a){var u=Ke(a.value),p=Ke(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function En(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Ct(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rt(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Ct(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var dn,fr=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,y){MSApp.execUnsafeLocalFunction(function(){return i(a,u,p,y)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(dn=dn||document.createElement("div"),dn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=dn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Xn(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var ce={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qe=["Webkit","ms","Moz","O"];Object.keys(ce).forEach(function(i){qe.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),ce[a]=ce[i]})});function kt(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||ce.hasOwnProperty(i)&&ce[i]?(""+a).trim():a+"px"}function hn(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,y=kt(u,a[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,y):i[u]=y}}var Dn=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Or(i,a){if(a){if(Dn[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Ss(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cr=null;function os(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var as=null,Vn=null,Zn=null;function kr(i){if(i=Ha(i)){if(typeof as!="function")throw Error(t(280));var a=i.stateNode;a&&(a=bc(a),as(i.stateNode,i.type,a))}}function er(i){Vn?Zn?Zn.push(i):Zn=[i]:Vn=i}function Es(){if(Vn){var i=Vn,a=Zn;if(Zn=Vn=null,kr(i),a)for(i=0;i<a.length;i++)kr(a[i])}}function jr(i,a){return i(a)}function Ur(){}var ee=!1;function Q(i,a,u){if(ee)return i(a,u);ee=!0;try{return jr(i,a,u)}finally{ee=!1,(Vn!==null||Zn!==null)&&(Ur(),Es())}}function ne(i,a){var u=i.stateNode;if(u===null)return null;var p=bc(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var he=!1;if(d)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){he=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch{he=!1}function $e(i,a,u,p,y,_,C,U,q){var ie=Array.prototype.slice.call(arguments,3);try{a.apply(u,ie)}catch(fe){this.onError(fe)}}var Xe=!1,lt=null,Re=!1,Ye=null,yt={onError:function(i){Xe=!0,lt=i}};function jt(i,a,u,p,y,_,C,U,q){Xe=!1,lt=null,$e.apply(yt,arguments)}function L(i,a,u,p,y,_,C,U,q){if(jt.apply(this,arguments),Xe){if(Xe){var ie=lt;Xe=!1,lt=null}else throw Error(t(198));Re||(Re=!0,Ye=ie)}}function oe(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function Ve(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function et(i){if(oe(i)!==i)throw Error(t(188))}function st(i){var a=i.alternate;if(!a){if(a=oe(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,p=a;;){var y=u.return;if(y===null)break;var _=y.alternate;if(_===null){if(p=y.return,p!==null){u=p;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===u)return et(y),i;if(_===p)return et(y),a;_=_.sibling}throw Error(t(188))}if(u.return!==p.return)u=y,p=_;else{for(var C=!1,U=y.child;U;){if(U===u){C=!0,u=y,p=_;break}if(U===p){C=!0,p=y,u=_;break}U=U.sibling}if(!C){for(U=_.child;U;){if(U===u){C=!0,u=_,p=y;break}if(U===p){C=!0,p=_,u=y;break}U=U.sibling}if(!C)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function rn(i){return i=st(i),i!==null?_t(i):null}function _t(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=_t(i);if(a!==null)return a;i=i.sibling}return null}var vn=e.unstable_scheduleCallback,So=e.unstable_cancelCallback,Wl=e.unstable_shouldYield,vd=e.unstable_requestPaint,Tt=e.unstable_now,Kl=e.unstable_getCurrentPriorityLevel,Oi=e.unstable_ImmediatePriority,Qs=e.unstable_UserBlockingPriority,Tr=e.unstable_NormalPriority,ja=e.unstable_LowPriority,Jl=e.unstable_IdlePriority,Ui=null,pr=null;function Yl(i){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(Ui,i,void 0,(i.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:Xl,Ta=Math.log,Ql=Math.LN2;function Xl(i){return i>>>=0,i===0?32:31-(Ta(i)/Ql|0)|0}var Eo=64,Co=4194304;function Xs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Bi(i,a){var u=i.pendingLanes;if(u===0)return 0;var p=0,y=i.suspendedLanes,_=i.pingedLanes,C=u&268435455;if(C!==0){var U=C&~y;U!==0?p=Xs(U):(_&=C,_!==0&&(p=Xs(_)))}else C=u&~y,C!==0?p=Xs(C):_!==0&&(p=Xs(_));if(p===0)return 0;if(a!==0&&a!==p&&(a&y)===0&&(y=p&-p,_=a&-a,y>=_||y===16&&(_&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=p;0<a;)u=31-Gn(a),y=1<<u,p|=i[u],a&=~y;return p}function bd(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cs(i,a){for(var u=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes;0<_;){var C=31-Gn(_),U=1<<C,q=y[C];q===-1?((U&u)===0||(U&p)!==0)&&(y[C]=bd(U,a)):q<=a&&(i.expiredLanes|=U),_&=~U}}function mr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function $i(){var i=Eo;return Eo<<=1,(Eo&4194240)===0&&(Eo=64),i}function Zs(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function ei(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Gn(a),i[a]=u}function Nt(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var y=31-Gn(u),_=1<<y;a[y]=0,p[y]=-1,i[y]=-1,u&=~_}}function ti(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var p=31-Gn(u),y=1<<p;y&a|i[p]&a&&(i[p]|=a),u&=~y}}var ut=0;function ni(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Zl,ko,ec,tc,nc,Pa=!1,ls=[],Cn=null,Br=null,$r=null,ri=new Map,Pr=new Map,cs=[],wd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(i,a){switch(i){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":ri.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pr.delete(a.pointerId)}}function tr(i,a,u,p,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:_,targetContainers:[y]},a!==null&&(a=Ha(a),a!==null&&ko(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function _d(i,a,u,p,y){switch(a){case"focusin":return Cn=tr(Cn,i,a,u,p,y),!0;case"dragenter":return Br=tr(Br,i,a,u,p,y),!0;case"mouseover":return $r=tr($r,i,a,u,p,y),!0;case"pointerover":var _=y.pointerId;return ri.set(_,tr(ri.get(_)||null,i,a,u,p,y)),!0;case"gotpointercapture":return _=y.pointerId,Pr.set(_,tr(Pr.get(_)||null,i,a,u,p,y)),!0}return!1}function sc(i){var a=Ki(i.target);if(a!==null){var u=oe(a);if(u!==null){if(a=u.tag,a===13){if(a=Ve(u),a!==null){i.blockedOn=a,nc(i.priority,function(){ec(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ks(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=jo(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);Cr=p,u.target.dispatchEvent(p),Cr=null}else return a=Ha(u),a!==null&&ko(a),i.blockedOn=u,!1;a.shift()}return!0}function qi(i,a,u){ks(i)&&u.delete(a)}function ic(){Pa=!1,Cn!==null&&ks(Cn)&&(Cn=null),Br!==null&&ks(Br)&&(Br=null),$r!==null&&ks($r)&&($r=null),ri.forEach(qi),Pr.forEach(qi)}function qr(i,a){i.blockedOn===a&&(i.blockedOn=null,Pa||(Pa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ic)))}function Hr(i){function a(y){return qr(y,i)}if(0<ls.length){qr(ls[0],i);for(var u=1;u<ls.length;u++){var p=ls[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Cn!==null&&qr(Cn,i),Br!==null&&qr(Br,i),$r!==null&&qr($r,i),ri.forEach(a),Pr.forEach(a),u=0;u<cs.length;u++)p=cs[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<cs.length&&(u=cs[0],u.blockedOn===null);)sc(u),u.blockedOn===null&&cs.shift()}var js=te.ReactCurrentBatchConfig,si=!0;function Ot(i,a,u,p){var y=ut,_=js.transition;js.transition=null;try{ut=1,Aa(i,a,u,p)}finally{ut=y,js.transition=_}}function Nd(i,a,u,p){var y=ut,_=js.transition;js.transition=null;try{ut=4,Aa(i,a,u,p)}finally{ut=y,js.transition=_}}function Aa(i,a,u,p){if(si){var y=jo(i,a,u,p);if(y===null)Md(i,a,p,Hi,u),rc(i,p);else if(_d(y,i,a,u,p))p.stopPropagation();else if(rc(i,p),a&4&&-1<wd.indexOf(i)){for(;y!==null;){var _=Ha(y);if(_!==null&&Zl(_),_=jo(i,a,u,p),_===null&&Md(i,a,p,Hi,u),_===y)break;y=_}y!==null&&p.stopPropagation()}else Md(i,a,p,null,u)}}var Hi=null;function jo(i,a,u,p){if(Hi=null,i=os(p),i=Ki(i),i!==null)if(a=oe(i),a===null)i=null;else if(u=a.tag,u===13){if(i=Ve(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Hi=i,null}function Ia(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kl()){case Oi:return 1;case Qs:return 4;case Tr:case ja:return 16;case Jl:return 536870912;default:return 16}default:return 16}}var gr=null,To=null,nr=null;function Ra(){if(nr)return nr;var i,a=To,u=a.length,p,y="value"in gr?gr.value:gr.textContent,_=y.length;for(i=0;i<u&&a[i]===y[i];i++);var C=u-i;for(p=1;p<=C&&a[u-p]===y[_-p];p++);return nr=y.slice(i,1<p?1-p:void 0)}function Po(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function us(){return!0}function Ma(){return!1}function kn(i){function a(u,p,y,_,C){this._reactName=u,this._targetInst=y,this.type=p,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var U in i)i.hasOwnProperty(U)&&(u=i[U],this[U]=u?u(_):_[U]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?us:Ma,this.isPropagationStopped=Ma,this}return G(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=us)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=us)},persist:function(){},isPersistent:us}),a}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ao=kn(Gr),ds=G({},Gr,{view:0,detail:0}),Sd=kn(ds),Io,Ts,ii,Gi=G({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ii&&(ii&&i.type==="mousemove"?(Io=i.screenX-ii.screenX,Ts=i.screenY-ii.screenY):Ts=Io=0,ii=i),Io)},movementY:function(i){return"movementY"in i?i.movementY:Ts}}),Ro=kn(Gi),Da=G({},Gi,{dataTransfer:0}),oc=kn(Da),Mo=G({},ds,{relatedTarget:0}),Do=kn(Mo),ac=G({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ps=kn(ac),lc=G({},Gr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),cc=kn(lc),uc=G({},Gr,{data:0}),Va=kn(uc),Vo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hc(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=dc[i])?!!a[i]:!1}function hs(){return hc}var h=G({},ds,{key:function(i){if(i.key){var a=Vo[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Po(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Wn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hs,charCode:function(i){return i.type==="keypress"?Po(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Po(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),b=kn(h),S=G({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R=kn(S),X=G({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hs}),ae=kn(X),we=G({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vt=kn(we),fn=G({},Gi,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ht=kn(fn),bn=[9,13,27,32],sn=d&&"CompositionEvent"in window,Ar=null;d&&"documentMode"in document&&(Ar=document.documentMode);var xr=d&&"TextEvent"in window&&!Ar,Wi=d&&(!sn||Ar&&8<Ar&&11>=Ar),Lo=" ",rm=!1;function sm(i,a){switch(i){case"keyup":return bn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function im(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var zo=!1;function Jw(i,a){switch(i){case"compositionend":return im(a);case"keypress":return a.which!==32?null:(rm=!0,Lo);case"textInput":return i=a.data,i===Lo&&rm?null:i;default:return null}}function Yw(i,a){if(zo)return i==="compositionend"||!sn&&sm(i,a)?(i=Ra(),nr=To=gr=null,zo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Wi&&a.locale!=="ko"?null:a.data;default:return null}}var Qw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function om(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Qw[i.type]:a==="textarea"}function am(i,a,u,p){er(p),a=xc(a,"onChange"),0<a.length&&(u=new Ao("onChange","change",null,u,p),i.push({event:u,listeners:a}))}var La=null,za=null;function Xw(i){Em(i,0)}function fc(i){var a=$o(i);if(Et(a))return i}function Zw(i,a){if(i==="change")return a}var lm=!1;if(d){var Ed;if(d){var Cd="oninput"in document;if(!Cd){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),Cd=typeof cm.oninput=="function"}Ed=Cd}else Ed=!1;lm=Ed&&(!document.documentMode||9<document.documentMode)}function um(){La&&(La.detachEvent("onpropertychange",dm),za=La=null)}function dm(i){if(i.propertyName==="value"&&fc(za)){var a=[];am(a,za,i,os(i)),Q(Xw,a)}}function e1(i,a,u){i==="focusin"?(um(),La=a,za=u,La.attachEvent("onpropertychange",dm)):i==="focusout"&&um()}function t1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return fc(za)}function n1(i,a){if(i==="click")return fc(a)}function r1(i,a){if(i==="input"||i==="change")return fc(a)}function s1(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Wr=typeof Object.is=="function"?Object.is:s1;function Fa(i,a){if(Wr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var y=u[p];if(!m.call(a,y)||!Wr(i[y],a[y]))return!1}return!0}function hm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function fm(i,a){var u=hm(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=a&&p>=a)return{node:u,offset:a-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=hm(u)}}function pm(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?pm(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function mm(){for(var i=window,a=ot();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=ot(i.document)}return a}function kd(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function i1(i){var a=mm(),u=i.focusedElem,p=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&pm(u.ownerDocument.documentElement,u)){if(p!==null&&kd(u)){if(a=p.start,i=p.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var y=u.textContent.length,_=Math.min(p.start,y);p=p.end===void 0?_:Math.min(p.end,y),!i.extend&&_>p&&(y=p,p=_,_=y),y=fm(u,_);var C=fm(u,p);y&&C&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),i.removeAllRanges(),_>p?(i.addRange(a),i.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var o1=d&&"documentMode"in document&&11>=document.documentMode,Fo=null,jd=null,Oa=null,Td=!1;function gm(i,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Td||Fo==null||Fo!==ot(p)||(p=Fo,"selectionStart"in p&&kd(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Oa&&Fa(Oa,p)||(Oa=p,p=xc(jd,"onSelect"),0<p.length&&(a=new Ao("onSelect","select",null,a,u),i.push({event:a,listeners:p}),a.target=Fo)))}function pc(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var Oo={animationend:pc("Animation","AnimationEnd"),animationiteration:pc("Animation","AnimationIteration"),animationstart:pc("Animation","AnimationStart"),transitionend:pc("Transition","TransitionEnd")},Pd={},xm={};d&&(xm=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function mc(i){if(Pd[i])return Pd[i];if(!Oo[i])return i;var a=Oo[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in xm)return Pd[i]=a[u];return i}var ym=mc("animationend"),vm=mc("animationiteration"),bm=mc("animationstart"),wm=mc("transitionend"),_m=new Map,Nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(i,a){_m.set(i,a),l(a,[i])}for(var Ad=0;Ad<Nm.length;Ad++){var Id=Nm[Ad],a1=Id.toLowerCase(),l1=Id[0].toUpperCase()+Id.slice(1);oi(a1,"on"+l1)}oi(ym,"onAnimationEnd"),oi(vm,"onAnimationIteration"),oi(bm,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(wm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ua));function Sm(i,a,u){var p=i.type||"unknown-event";i.currentTarget=u,L(p,a,void 0,i),i.currentTarget=null}function Em(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],y=p.event;p=p.listeners;e:{var _=void 0;if(a)for(var C=p.length-1;0<=C;C--){var U=p[C],q=U.instance,ie=U.currentTarget;if(U=U.listener,q!==_&&y.isPropagationStopped())break e;Sm(y,U,ie),_=q}else for(C=0;C<p.length;C++){if(U=p[C],q=U.instance,ie=U.currentTarget,U=U.listener,q!==_&&y.isPropagationStopped())break e;Sm(y,U,ie),_=q}}}if(Re)throw i=Ye,Re=!1,Ye=null,i}function Mt(i,a){var u=a[Od];u===void 0&&(u=a[Od]=new Set);var p=i+"__bubble";u.has(p)||(Cm(a,i,2,!1),u.add(p))}function Rd(i,a,u){var p=0;a&&(p|=4),Cm(u,i,p,a)}var gc="_reactListening"+Math.random().toString(36).slice(2);function Ba(i){if(!i[gc]){i[gc]=!0,s.forEach(function(u){u!=="selectionchange"&&(c1.has(u)||Rd(u,!1,i),Rd(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[gc]||(a[gc]=!0,Rd("selectionchange",!1,a))}}function Cm(i,a,u,p){switch(Ia(a)){case 1:var y=Ot;break;case 4:y=Nd;break;default:y=Aa}u=y.bind(null,a,u,i),y=void 0,!he||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),p?y!==void 0?i.addEventListener(a,u,{capture:!0,passive:y}):i.addEventListener(a,u,!0):y!==void 0?i.addEventListener(a,u,{passive:y}):i.addEventListener(a,u,!1)}function Md(i,a,u,p,y){var _=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var C=p.tag;if(C===3||C===4){var U=p.stateNode.containerInfo;if(U===y||U.nodeType===8&&U.parentNode===y)break;if(C===4)for(C=p.return;C!==null;){var q=C.tag;if((q===3||q===4)&&(q=C.stateNode.containerInfo,q===y||q.nodeType===8&&q.parentNode===y))return;C=C.return}for(;U!==null;){if(C=Ki(U),C===null)return;if(q=C.tag,q===5||q===6){p=_=C;continue e}U=U.parentNode}}p=p.return}Q(function(){var ie=_,fe=os(u),ye=[];e:{var ue=_m.get(i);if(ue!==void 0){var Ce=Ao,Ie=i;switch(i){case"keypress":if(Po(u)===0)break e;case"keydown":case"keyup":Ce=b;break;case"focusin":Ie="focus",Ce=Do;break;case"focusout":Ie="blur",Ce=Do;break;case"beforeblur":case"afterblur":Ce=Do;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=Ro;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=oc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=ae;break;case ym:case vm:case bm:Ce=Ps;break;case wm:Ce=vt;break;case"scroll":Ce=Sd;break;case"wheel":Ce=ht;break;case"copy":case"cut":case"paste":Ce=cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=R}var Me=(a&4)!==0,en=!Me&&i==="scroll",Z=Me?ue!==null?ue+"Capture":null:ue;Me=[];for(var Y=ie,re;Y!==null;){re=Y;var be=re.stateNode;if(re.tag===5&&be!==null&&(re=be,Z!==null&&(be=ne(Y,Z),be!=null&&Me.push($a(Y,be,re)))),en)break;Y=Y.return}0<Me.length&&(ue=new Ce(ue,Ie,null,u,fe),ye.push({event:ue,listeners:Me}))}}if((a&7)===0){e:{if(ue=i==="mouseover"||i==="pointerover",Ce=i==="mouseout"||i==="pointerout",ue&&u!==Cr&&(Ie=u.relatedTarget||u.fromElement)&&(Ki(Ie)||Ie[As]))break e;if((Ce||ue)&&(ue=fe.window===fe?fe:(ue=fe.ownerDocument)?ue.defaultView||ue.parentWindow:window,Ce?(Ie=u.relatedTarget||u.toElement,Ce=ie,Ie=Ie?Ki(Ie):null,Ie!==null&&(en=oe(Ie),Ie!==en||Ie.tag!==5&&Ie.tag!==6)&&(Ie=null)):(Ce=null,Ie=ie),Ce!==Ie)){if(Me=Ro,be="onMouseLeave",Z="onMouseEnter",Y="mouse",(i==="pointerout"||i==="pointerover")&&(Me=R,be="onPointerLeave",Z="onPointerEnter",Y="pointer"),en=Ce==null?ue:$o(Ce),re=Ie==null?ue:$o(Ie),ue=new Me(be,Y+"leave",Ce,u,fe),ue.target=en,ue.relatedTarget=re,be=null,Ki(fe)===ie&&(Me=new Me(Z,Y+"enter",Ie,u,fe),Me.target=re,Me.relatedTarget=en,be=Me),en=be,Ce&&Ie)t:{for(Me=Ce,Z=Ie,Y=0,re=Me;re;re=Uo(re))Y++;for(re=0,be=Z;be;be=Uo(be))re++;for(;0<Y-re;)Me=Uo(Me),Y--;for(;0<re-Y;)Z=Uo(Z),re--;for(;Y--;){if(Me===Z||Z!==null&&Me===Z.alternate)break t;Me=Uo(Me),Z=Uo(Z)}Me=null}else Me=null;Ce!==null&&km(ye,ue,Ce,Me,!1),Ie!==null&&en!==null&&km(ye,en,Ie,Me,!0)}}e:{if(ue=ie?$o(ie):window,Ce=ue.nodeName&&ue.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&ue.type==="file")var Fe=Zw;else if(om(ue))if(lm)Fe=r1;else{Fe=t1;var Ue=e1}else(Ce=ue.nodeName)&&Ce.toLowerCase()==="input"&&(ue.type==="checkbox"||ue.type==="radio")&&(Fe=n1);if(Fe&&(Fe=Fe(i,ie))){am(ye,Fe,u,fe);break e}Ue&&Ue(i,ue,ie),i==="focusout"&&(Ue=ue._wrapperState)&&Ue.controlled&&ue.type==="number"&&qt(ue,"number",ue.value)}switch(Ue=ie?$o(ie):window,i){case"focusin":(om(Ue)||Ue.contentEditable==="true")&&(Fo=Ue,jd=ie,Oa=null);break;case"focusout":Oa=jd=Fo=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,gm(ye,u,fe);break;case"selectionchange":if(o1)break;case"keydown":case"keyup":gm(ye,u,fe)}var Be;if(sn)e:{switch(i){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else zo?sm(i,u)&&(Ge="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ge="onCompositionStart");Ge&&(Wi&&u.locale!=="ko"&&(zo||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&zo&&(Be=Ra()):(gr=fe,To="value"in gr?gr.value:gr.textContent,zo=!0)),Ue=xc(ie,Ge),0<Ue.length&&(Ge=new Va(Ge,i,null,u,fe),ye.push({event:Ge,listeners:Ue}),Be?Ge.data=Be:(Be=im(u),Be!==null&&(Ge.data=Be)))),(Be=xr?Jw(i,u):Yw(i,u))&&(ie=xc(ie,"onBeforeInput"),0<ie.length&&(fe=new Va("onBeforeInput","beforeinput",null,u,fe),ye.push({event:fe,listeners:ie}),fe.data=Be))}Em(ye,a)})}function $a(i,a,u){return{instance:i,listener:a,currentTarget:u}}function xc(i,a){for(var u=a+"Capture",p=[];i!==null;){var y=i,_=y.stateNode;y.tag===5&&_!==null&&(y=_,_=ne(i,u),_!=null&&p.unshift($a(i,_,y)),_=ne(i,a),_!=null&&p.push($a(i,_,y))),i=i.return}return p}function Uo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function km(i,a,u,p,y){for(var _=a._reactName,C=[];u!==null&&u!==p;){var U=u,q=U.alternate,ie=U.stateNode;if(q!==null&&q===p)break;U.tag===5&&ie!==null&&(U=ie,y?(q=ne(u,_),q!=null&&C.unshift($a(u,q,U))):y||(q=ne(u,_),q!=null&&C.push($a(u,q,U)))),u=u.return}C.length!==0&&i.push({event:a,listeners:C})}var u1=/\r\n?/g,d1=/\u0000|\uFFFD/g;function jm(i){return(typeof i=="string"?i:""+i).replace(u1,`
`).replace(d1,"")}function yc(i,a,u){if(a=jm(a),jm(i)!==a&&u)throw Error(t(425))}function vc(){}var Dd=null,Vd=null;function Ld(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var zd=typeof setTimeout=="function"?setTimeout:void 0,h1=typeof clearTimeout=="function"?clearTimeout:void 0,Tm=typeof Promise=="function"?Promise:void 0,f1=typeof queueMicrotask=="function"?queueMicrotask:typeof Tm<"u"?function(i){return Tm.resolve(null).then(i).catch(p1)}:zd;function p1(i){setTimeout(function(){throw i})}function Fd(i,a){var u=a,p=0;do{var y=u.nextSibling;if(i.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(p===0){i.removeChild(y),Hr(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=y}while(u);Hr(a)}function ai(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Pm(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var Bo=Math.random().toString(36).slice(2),fs="__reactFiber$"+Bo,qa="__reactProps$"+Bo,As="__reactContainer$"+Bo,Od="__reactEvents$"+Bo,m1="__reactListeners$"+Bo,g1="__reactHandles$"+Bo;function Ki(i){var a=i[fs];if(a)return a;for(var u=i.parentNode;u;){if(a=u[As]||u[fs]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=Pm(i);i!==null;){if(u=i[fs])return u;i=Pm(i)}return a}i=u,u=i.parentNode}return null}function Ha(i){return i=i[fs]||i[As],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function $o(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function bc(i){return i[qa]||null}var Ud=[],qo=-1;function li(i){return{current:i}}function Dt(i){0>qo||(i.current=Ud[qo],Ud[qo]=null,qo--)}function Pt(i,a){qo++,Ud[qo]=i.current,i.current=a}var ci={},Ln=li(ci),rr=li(!1),Ji=ci;function Ho(i,a){var u=i.type.contextTypes;if(!u)return ci;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var y={},_;for(_ in u)y[_]=a[_];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=y),y}function sr(i){return i=i.childContextTypes,i!=null}function wc(){Dt(rr),Dt(Ln)}function Am(i,a,u){if(Ln.current!==ci)throw Error(t(168));Pt(Ln,a),Pt(rr,u)}function Im(i,a,u){var p=i.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var y in p)if(!(y in a))throw Error(t(108,Ze(i)||"Unknown",y));return G({},u,p)}function _c(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ci,Ji=Ln.current,Pt(Ln,i),Pt(rr,rr.current),!0}function Rm(i,a,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=Im(i,a,Ji),p.__reactInternalMemoizedMergedChildContext=i,Dt(rr),Dt(Ln),Pt(Ln,i)):Dt(rr),Pt(rr,u)}var Is=null,Nc=!1,Bd=!1;function Mm(i){Is===null?Is=[i]:Is.push(i)}function x1(i){Nc=!0,Mm(i)}function ui(){if(!Bd&&Is!==null){Bd=!0;var i=0,a=ut;try{var u=Is;for(ut=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}Is=null,Nc=!1}catch(y){throw Is!==null&&(Is=Is.slice(i+1)),vn(Oi,ui),y}finally{ut=a,Bd=!1}}return null}var Go=[],Wo=0,Sc=null,Ec=0,Ir=[],Rr=0,Yi=null,Rs=1,Ms="";function Qi(i,a){Go[Wo++]=Ec,Go[Wo++]=Sc,Sc=i,Ec=a}function Dm(i,a,u){Ir[Rr++]=Rs,Ir[Rr++]=Ms,Ir[Rr++]=Yi,Yi=i;var p=Rs;i=Ms;var y=32-Gn(p)-1;p&=~(1<<y),u+=1;var _=32-Gn(a)+y;if(30<_){var C=y-y%5;_=(p&(1<<C)-1).toString(32),p>>=C,y-=C,Rs=1<<32-Gn(a)+y|u<<y|p,Ms=_+i}else Rs=1<<_|u<<y|p,Ms=i}function $d(i){i.return!==null&&(Qi(i,1),Dm(i,1,0))}function qd(i){for(;i===Sc;)Sc=Go[--Wo],Go[Wo]=null,Ec=Go[--Wo],Go[Wo]=null;for(;i===Yi;)Yi=Ir[--Rr],Ir[Rr]=null,Ms=Ir[--Rr],Ir[Rr]=null,Rs=Ir[--Rr],Ir[Rr]=null}var yr=null,vr=null,Ut=!1,Kr=null;function Vm(i,a){var u=Lr(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function Lm(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,yr=i,vr=ai(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,yr=i,vr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Yi!==null?{id:Rs,overflow:Ms}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Lr(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,yr=i,vr=null,!0):!1;default:return!1}}function Hd(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Gd(i){if(Ut){var a=vr;if(a){var u=a;if(!Lm(i,a)){if(Hd(i))throw Error(t(418));a=ai(u.nextSibling);var p=yr;a&&Lm(i,a)?Vm(p,u):(i.flags=i.flags&-4097|2,Ut=!1,yr=i)}}else{if(Hd(i))throw Error(t(418));i.flags=i.flags&-4097|2,Ut=!1,yr=i}}}function zm(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;yr=i}function Cc(i){if(i!==yr)return!1;if(!Ut)return zm(i),Ut=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Ld(i.type,i.memoizedProps)),a&&(a=vr)){if(Hd(i))throw Fm(),Error(t(418));for(;a;)Vm(i,a),a=ai(a.nextSibling)}if(zm(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){vr=ai(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}vr=null}}else vr=yr?ai(i.stateNode.nextSibling):null;return!0}function Fm(){for(var i=vr;i;)i=ai(i.nextSibling)}function Ko(){vr=yr=null,Ut=!1}function Wd(i){Kr===null?Kr=[i]:Kr.push(i)}var y1=te.ReactCurrentBatchConfig;function Ga(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var y=p,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(C){var U=y.refs;C===null?delete U[_]:U[_]=C},a._stringRef=_,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function kc(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Om(i){var a=i._init;return a(i._payload)}function Um(i){function a(Z,Y){if(i){var re=Z.deletions;re===null?(Z.deletions=[Y],Z.flags|=16):re.push(Y)}}function u(Z,Y){if(!i)return null;for(;Y!==null;)a(Z,Y),Y=Y.sibling;return null}function p(Z,Y){for(Z=new Map;Y!==null;)Y.key!==null?Z.set(Y.key,Y):Z.set(Y.index,Y),Y=Y.sibling;return Z}function y(Z,Y){return Z=yi(Z,Y),Z.index=0,Z.sibling=null,Z}function _(Z,Y,re){return Z.index=re,i?(re=Z.alternate,re!==null?(re=re.index,re<Y?(Z.flags|=2,Y):re):(Z.flags|=2,Y)):(Z.flags|=1048576,Y)}function C(Z){return i&&Z.alternate===null&&(Z.flags|=2),Z}function U(Z,Y,re,be){return Y===null||Y.tag!==6?(Y=zh(re,Z.mode,be),Y.return=Z,Y):(Y=y(Y,re),Y.return=Z,Y)}function q(Z,Y,re,be){var Fe=re.type;return Fe===O?fe(Z,Y,re.props.children,be,re.key):Y!==null&&(Y.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===Se&&Om(Fe)===Y.type)?(be=y(Y,re.props),be.ref=Ga(Z,Y,re),be.return=Z,be):(be=Qc(re.type,re.key,re.props,null,Z.mode,be),be.ref=Ga(Z,Y,re),be.return=Z,be)}function ie(Z,Y,re,be){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==re.containerInfo||Y.stateNode.implementation!==re.implementation?(Y=Fh(re,Z.mode,be),Y.return=Z,Y):(Y=y(Y,re.children||[]),Y.return=Z,Y)}function fe(Z,Y,re,be,Fe){return Y===null||Y.tag!==7?(Y=io(re,Z.mode,be,Fe),Y.return=Z,Y):(Y=y(Y,re),Y.return=Z,Y)}function ye(Z,Y,re){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=zh(""+Y,Z.mode,re),Y.return=Z,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case pe:return re=Qc(Y.type,Y.key,Y.props,null,Z.mode,re),re.ref=Ga(Z,null,Y),re.return=Z,re;case J:return Y=Fh(Y,Z.mode,re),Y.return=Z,Y;case Se:var be=Y._init;return ye(Z,be(Y._payload),re)}if(_e(Y)||ve(Y))return Y=io(Y,Z.mode,re,null),Y.return=Z,Y;kc(Z,Y)}return null}function ue(Z,Y,re,be){var Fe=Y!==null?Y.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Fe!==null?null:U(Z,Y,""+re,be);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case pe:return re.key===Fe?q(Z,Y,re,be):null;case J:return re.key===Fe?ie(Z,Y,re,be):null;case Se:return Fe=re._init,ue(Z,Y,Fe(re._payload),be)}if(_e(re)||ve(re))return Fe!==null?null:fe(Z,Y,re,be,null);kc(Z,re)}return null}function Ce(Z,Y,re,be,Fe){if(typeof be=="string"&&be!==""||typeof be=="number")return Z=Z.get(re)||null,U(Y,Z,""+be,Fe);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case pe:return Z=Z.get(be.key===null?re:be.key)||null,q(Y,Z,be,Fe);case J:return Z=Z.get(be.key===null?re:be.key)||null,ie(Y,Z,be,Fe);case Se:var Ue=be._init;return Ce(Z,Y,re,Ue(be._payload),Fe)}if(_e(be)||ve(be))return Z=Z.get(re)||null,fe(Y,Z,be,Fe,null);kc(Y,be)}return null}function Ie(Z,Y,re,be){for(var Fe=null,Ue=null,Be=Y,Ge=Y=0,Nn=null;Be!==null&&Ge<re.length;Ge++){Be.index>Ge?(Nn=Be,Be=null):Nn=Be.sibling;var gt=ue(Z,Be,re[Ge],be);if(gt===null){Be===null&&(Be=Nn);break}i&&Be&&gt.alternate===null&&a(Z,Be),Y=_(gt,Y,Ge),Ue===null?Fe=gt:Ue.sibling=gt,Ue=gt,Be=Nn}if(Ge===re.length)return u(Z,Be),Ut&&Qi(Z,Ge),Fe;if(Be===null){for(;Ge<re.length;Ge++)Be=ye(Z,re[Ge],be),Be!==null&&(Y=_(Be,Y,Ge),Ue===null?Fe=Be:Ue.sibling=Be,Ue=Be);return Ut&&Qi(Z,Ge),Fe}for(Be=p(Z,Be);Ge<re.length;Ge++)Nn=Ce(Be,Z,Ge,re[Ge],be),Nn!==null&&(i&&Nn.alternate!==null&&Be.delete(Nn.key===null?Ge:Nn.key),Y=_(Nn,Y,Ge),Ue===null?Fe=Nn:Ue.sibling=Nn,Ue=Nn);return i&&Be.forEach(function(vi){return a(Z,vi)}),Ut&&Qi(Z,Ge),Fe}function Me(Z,Y,re,be){var Fe=ve(re);if(typeof Fe!="function")throw Error(t(150));if(re=Fe.call(re),re==null)throw Error(t(151));for(var Ue=Fe=null,Be=Y,Ge=Y=0,Nn=null,gt=re.next();Be!==null&&!gt.done;Ge++,gt=re.next()){Be.index>Ge?(Nn=Be,Be=null):Nn=Be.sibling;var vi=ue(Z,Be,gt.value,be);if(vi===null){Be===null&&(Be=Nn);break}i&&Be&&vi.alternate===null&&a(Z,Be),Y=_(vi,Y,Ge),Ue===null?Fe=vi:Ue.sibling=vi,Ue=vi,Be=Nn}if(gt.done)return u(Z,Be),Ut&&Qi(Z,Ge),Fe;if(Be===null){for(;!gt.done;Ge++,gt=re.next())gt=ye(Z,gt.value,be),gt!==null&&(Y=_(gt,Y,Ge),Ue===null?Fe=gt:Ue.sibling=gt,Ue=gt);return Ut&&Qi(Z,Ge),Fe}for(Be=p(Z,Be);!gt.done;Ge++,gt=re.next())gt=Ce(Be,Z,Ge,gt.value,be),gt!==null&&(i&&gt.alternate!==null&&Be.delete(gt.key===null?Ge:gt.key),Y=_(gt,Y,Ge),Ue===null?Fe=gt:Ue.sibling=gt,Ue=gt);return i&&Be.forEach(function(Q1){return a(Z,Q1)}),Ut&&Qi(Z,Ge),Fe}function en(Z,Y,re,be){if(typeof re=="object"&&re!==null&&re.type===O&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case pe:e:{for(var Fe=re.key,Ue=Y;Ue!==null;){if(Ue.key===Fe){if(Fe=re.type,Fe===O){if(Ue.tag===7){u(Z,Ue.sibling),Y=y(Ue,re.props.children),Y.return=Z,Z=Y;break e}}else if(Ue.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===Se&&Om(Fe)===Ue.type){u(Z,Ue.sibling),Y=y(Ue,re.props),Y.ref=Ga(Z,Ue,re),Y.return=Z,Z=Y;break e}u(Z,Ue);break}else a(Z,Ue);Ue=Ue.sibling}re.type===O?(Y=io(re.props.children,Z.mode,be,re.key),Y.return=Z,Z=Y):(be=Qc(re.type,re.key,re.props,null,Z.mode,be),be.ref=Ga(Z,Y,re),be.return=Z,Z=be)}return C(Z);case J:e:{for(Ue=re.key;Y!==null;){if(Y.key===Ue)if(Y.tag===4&&Y.stateNode.containerInfo===re.containerInfo&&Y.stateNode.implementation===re.implementation){u(Z,Y.sibling),Y=y(Y,re.children||[]),Y.return=Z,Z=Y;break e}else{u(Z,Y);break}else a(Z,Y);Y=Y.sibling}Y=Fh(re,Z.mode,be),Y.return=Z,Z=Y}return C(Z);case Se:return Ue=re._init,en(Z,Y,Ue(re._payload),be)}if(_e(re))return Ie(Z,Y,re,be);if(ve(re))return Me(Z,Y,re,be);kc(Z,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,Y!==null&&Y.tag===6?(u(Z,Y.sibling),Y=y(Y,re),Y.return=Z,Z=Y):(u(Z,Y),Y=zh(re,Z.mode,be),Y.return=Z,Z=Y),C(Z)):u(Z,Y)}return en}var Jo=Um(!0),Bm=Um(!1),jc=li(null),Tc=null,Yo=null,Kd=null;function Jd(){Kd=Yo=Tc=null}function Yd(i){var a=jc.current;Dt(jc),i._currentValue=a}function Qd(i,a,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===u)break;i=i.return}}function Qo(i,a){Tc=i,Kd=Yo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(ir=!0),i.firstContext=null)}function Mr(i){var a=i._currentValue;if(Kd!==i)if(i={context:i,memoizedValue:a,next:null},Yo===null){if(Tc===null)throw Error(t(308));Yo=i,Tc.dependencies={lanes:0,firstContext:i}}else Yo=Yo.next=i;return a}var Xi=null;function Xd(i){Xi===null?Xi=[i]:Xi.push(i)}function $m(i,a,u,p){var y=a.interleaved;return y===null?(u.next=u,Xd(a)):(u.next=y.next,y.next=u),a.interleaved=u,Ds(i,p)}function Ds(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var di=!1;function Zd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qm(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Vs(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function hi(i,a,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(pt&2)!==0){var y=p.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),p.pending=a,Ds(i,u)}return y=p.interleaved,y===null?(a.next=a,Xd(p)):(a.next=y.next,y.next=a),p.interleaved=a,Ds(i,u)}function Pc(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,ti(i,u)}}function Hm(i,a){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var y=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var C={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?y=_=C:_=_.next=C,u=u.next}while(u!==null);_===null?y=_=a:_=_.next=a}else y=_=a;u={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function Ac(i,a,u,p){var y=i.updateQueue;di=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,U=y.shared.pending;if(U!==null){y.shared.pending=null;var q=U,ie=q.next;q.next=null,C===null?_=ie:C.next=ie,C=q;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,U=fe.lastBaseUpdate,U!==C&&(U===null?fe.firstBaseUpdate=ie:U.next=ie,fe.lastBaseUpdate=q))}if(_!==null){var ye=y.baseState;C=0,fe=ie=q=null,U=_;do{var ue=U.lane,Ce=U.eventTime;if((p&ue)===ue){fe!==null&&(fe=fe.next={eventTime:Ce,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var Ie=i,Me=U;switch(ue=a,Ce=u,Me.tag){case 1:if(Ie=Me.payload,typeof Ie=="function"){ye=Ie.call(Ce,ye,ue);break e}ye=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Me.payload,ue=typeof Ie=="function"?Ie.call(Ce,ye,ue):Ie,ue==null)break e;ye=G({},ye,ue);break e;case 2:di=!0}}U.callback!==null&&U.lane!==0&&(i.flags|=64,ue=y.effects,ue===null?y.effects=[U]:ue.push(U))}else Ce={eventTime:Ce,lane:ue,tag:U.tag,payload:U.payload,callback:U.callback,next:null},fe===null?(ie=fe=Ce,q=ye):fe=fe.next=Ce,C|=ue;if(U=U.next,U===null){if(U=y.shared.pending,U===null)break;ue=U,U=ue.next,ue.next=null,y.lastBaseUpdate=ue,y.shared.pending=null}}while(!0);if(fe===null&&(q=ye),y.baseState=q,y.firstBaseUpdate=ie,y.lastBaseUpdate=fe,a=y.shared.interleaved,a!==null){y=a;do C|=y.lane,y=y.next;while(y!==a)}else _===null&&(y.shared.lanes=0);to|=C,i.lanes=C,i.memoizedState=ye}}function Gm(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var p=i[a],y=p.callback;if(y!==null){if(p.callback=null,p=u,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var Wa={},ps=li(Wa),Ka=li(Wa),Ja=li(Wa);function Zi(i){if(i===Wa)throw Error(t(174));return i}function eh(i,a){switch(Pt(Ja,a),Pt(Ka,i),Pt(ps,Wa),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Rt(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Rt(a,i)}Dt(ps),Pt(ps,a)}function Xo(){Dt(ps),Dt(Ka),Dt(Ja)}function Wm(i){Zi(Ja.current);var a=Zi(ps.current),u=Rt(a,i.type);a!==u&&(Pt(Ka,i),Pt(ps,u))}function th(i){Ka.current===i&&(Dt(ps),Dt(Ka))}var Gt=li(0);function Ic(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var nh=[];function rh(){for(var i=0;i<nh.length;i++)nh[i]._workInProgressVersionPrimary=null;nh.length=0}var Rc=te.ReactCurrentDispatcher,sh=te.ReactCurrentBatchConfig,eo=0,Wt=null,pn=null,wn=null,Mc=!1,Ya=!1,Qa=0,v1=0;function zn(){throw Error(t(321))}function ih(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!Wr(i[u],a[u]))return!1;return!0}function oh(i,a,u,p,y,_){if(eo=_,Wt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Rc.current=i===null||i.memoizedState===null?N1:S1,i=u(p,y),Ya){_=0;do{if(Ya=!1,Qa=0,25<=_)throw Error(t(301));_+=1,wn=pn=null,a.updateQueue=null,Rc.current=E1,i=u(p,y)}while(Ya)}if(Rc.current=Lc,a=pn!==null&&pn.next!==null,eo=0,wn=pn=Wt=null,Mc=!1,a)throw Error(t(300));return i}function ah(){var i=Qa!==0;return Qa=0,i}function ms(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?Wt.memoizedState=wn=i:wn=wn.next=i,wn}function Dr(){if(pn===null){var i=Wt.alternate;i=i!==null?i.memoizedState:null}else i=pn.next;var a=wn===null?Wt.memoizedState:wn.next;if(a!==null)wn=a,pn=i;else{if(i===null)throw Error(t(310));pn=i,i={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},wn===null?Wt.memoizedState=wn=i:wn=wn.next=i}return wn}function Xa(i,a){return typeof a=="function"?a(i):a}function lh(i){var a=Dr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=pn,y=p.baseQueue,_=u.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}p.baseQueue=y=_,u.pending=null}if(y!==null){_=y.next,p=p.baseState;var U=C=null,q=null,ie=_;do{var fe=ie.lane;if((eo&fe)===fe)q!==null&&(q=q.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),p=ie.hasEagerState?ie.eagerState:i(p,ie.action);else{var ye={lane:fe,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};q===null?(U=q=ye,C=p):q=q.next=ye,Wt.lanes|=fe,to|=fe}ie=ie.next}while(ie!==null&&ie!==_);q===null?C=p:q.next=U,Wr(p,a.memoizedState)||(ir=!0),a.memoizedState=p,a.baseState=C,a.baseQueue=q,u.lastRenderedState=p}if(i=u.interleaved,i!==null){y=i;do _=y.lane,Wt.lanes|=_,to|=_,y=y.next;while(y!==i)}else y===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function ch(i){var a=Dr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,y=u.pending,_=a.memoizedState;if(y!==null){u.pending=null;var C=y=y.next;do _=i(_,C.action),C=C.next;while(C!==y);Wr(_,a.memoizedState)||(ir=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),u.lastRenderedState=_}return[_,p]}function Km(){}function Jm(i,a){var u=Wt,p=Dr(),y=a(),_=!Wr(p.memoizedState,y);if(_&&(p.memoizedState=y,ir=!0),p=p.queue,uh(Xm.bind(null,u,p,i),[i]),p.getSnapshot!==a||_||wn!==null&&wn.memoizedState.tag&1){if(u.flags|=2048,Za(9,Qm.bind(null,u,p,y,a),void 0,null),_n===null)throw Error(t(349));(eo&30)!==0||Ym(u,a,y)}return y}function Ym(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=Wt.updateQueue,a===null?(a={lastEffect:null,stores:null},Wt.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function Qm(i,a,u,p){a.value=u,a.getSnapshot=p,Zm(a)&&eg(i)}function Xm(i,a,u){return u(function(){Zm(a)&&eg(i)})}function Zm(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!Wr(i,u)}catch{return!0}}function eg(i){var a=Ds(i,1);a!==null&&Xr(a,i,1,-1)}function tg(i){var a=ms();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:i},a.queue=i,i=i.dispatch=_1.bind(null,Wt,i),[a.memoizedState,i]}function Za(i,a,u,p){return i={tag:i,create:a,destroy:u,deps:p,next:null},a=Wt.updateQueue,a===null?(a={lastEffect:null,stores:null},Wt.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,a.lastEffect=i)),i}function ng(){return Dr().memoizedState}function Dc(i,a,u,p){var y=ms();Wt.flags|=i,y.memoizedState=Za(1|a,u,void 0,p===void 0?null:p)}function Vc(i,a,u,p){var y=Dr();p=p===void 0?null:p;var _=void 0;if(pn!==null){var C=pn.memoizedState;if(_=C.destroy,p!==null&&ih(p,C.deps)){y.memoizedState=Za(a,u,_,p);return}}Wt.flags|=i,y.memoizedState=Za(1|a,u,_,p)}function rg(i,a){return Dc(8390656,8,i,a)}function uh(i,a){return Vc(2048,8,i,a)}function sg(i,a){return Vc(4,2,i,a)}function ig(i,a){return Vc(4,4,i,a)}function og(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function ag(i,a,u){return u=u!=null?u.concat([i]):null,Vc(4,4,og.bind(null,a,i),u)}function dh(){}function lg(i,a){var u=Dr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&ih(a,p[1])?p[0]:(u.memoizedState=[i,a],i)}function cg(i,a){var u=Dr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&ih(a,p[1])?p[0]:(i=i(),u.memoizedState=[i,a],i)}function ug(i,a,u){return(eo&21)===0?(i.baseState&&(i.baseState=!1,ir=!0),i.memoizedState=u):(Wr(u,a)||(u=$i(),Wt.lanes|=u,to|=u,i.baseState=!0),a)}function b1(i,a){var u=ut;ut=u!==0&&4>u?u:4,i(!0);var p=sh.transition;sh.transition={};try{i(!1),a()}finally{ut=u,sh.transition=p}}function dg(){return Dr().memoizedState}function w1(i,a,u){var p=gi(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},hg(i))fg(a,u);else if(u=$m(i,a,u,p),u!==null){var y=Jn();Xr(u,i,p,y),pg(u,a,p)}}function _1(i,a,u){var p=gi(i),y={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(hg(i))fg(a,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var C=a.lastRenderedState,U=_(C,u);if(y.hasEagerState=!0,y.eagerState=U,Wr(U,C)){var q=a.interleaved;q===null?(y.next=y,Xd(a)):(y.next=q.next,q.next=y),a.interleaved=y;return}}catch{}finally{}u=$m(i,a,y,p),u!==null&&(y=Jn(),Xr(u,i,p,y),pg(u,a,p))}}function hg(i){var a=i.alternate;return i===Wt||a!==null&&a===Wt}function fg(i,a){Ya=Mc=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function pg(i,a,u){if((u&4194240)!==0){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,ti(i,u)}}var Lc={readContext:Mr,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useInsertionEffect:zn,useLayoutEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useMutableSource:zn,useSyncExternalStore:zn,useId:zn,unstable_isNewReconciler:!1},N1={readContext:Mr,useCallback:function(i,a){return ms().memoizedState=[i,a===void 0?null:a],i},useContext:Mr,useEffect:rg,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,Dc(4194308,4,og.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Dc(4194308,4,i,a)},useInsertionEffect:function(i,a){return Dc(4,2,i,a)},useMemo:function(i,a){var u=ms();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var p=ms();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},p.queue=i,i=i.dispatch=w1.bind(null,Wt,i),[p.memoizedState,i]},useRef:function(i){var a=ms();return i={current:i},a.memoizedState=i},useState:tg,useDebugValue:dh,useDeferredValue:function(i){return ms().memoizedState=i},useTransition:function(){var i=tg(!1),a=i[0];return i=b1.bind(null,i[1]),ms().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var p=Wt,y=ms();if(Ut){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),_n===null)throw Error(t(349));(eo&30)!==0||Ym(p,a,u)}y.memoizedState=u;var _={value:u,getSnapshot:a};return y.queue=_,rg(Xm.bind(null,p,_,i),[i]),p.flags|=2048,Za(9,Qm.bind(null,p,_,u,a),void 0,null),u},useId:function(){var i=ms(),a=_n.identifierPrefix;if(Ut){var u=Ms,p=Rs;u=(p&~(1<<32-Gn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=Qa++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=v1++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},S1={readContext:Mr,useCallback:lg,useContext:Mr,useEffect:uh,useImperativeHandle:ag,useInsertionEffect:sg,useLayoutEffect:ig,useMemo:cg,useReducer:lh,useRef:ng,useState:function(){return lh(Xa)},useDebugValue:dh,useDeferredValue:function(i){var a=Dr();return ug(a,pn.memoizedState,i)},useTransition:function(){var i=lh(Xa)[0],a=Dr().memoizedState;return[i,a]},useMutableSource:Km,useSyncExternalStore:Jm,useId:dg,unstable_isNewReconciler:!1},E1={readContext:Mr,useCallback:lg,useContext:Mr,useEffect:uh,useImperativeHandle:ag,useInsertionEffect:sg,useLayoutEffect:ig,useMemo:cg,useReducer:ch,useRef:ng,useState:function(){return ch(Xa)},useDebugValue:dh,useDeferredValue:function(i){var a=Dr();return pn===null?a.memoizedState=i:ug(a,pn.memoizedState,i)},useTransition:function(){var i=ch(Xa)[0],a=Dr().memoizedState;return[i,a]},useMutableSource:Km,useSyncExternalStore:Jm,useId:dg,unstable_isNewReconciler:!1};function Jr(i,a){if(i&&i.defaultProps){a=G({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function hh(i,a,u,p){a=i.memoizedState,u=u(p,a),u=u==null?a:G({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var zc={isMounted:function(i){return(i=i._reactInternals)?oe(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var p=Jn(),y=gi(i),_=Vs(p,y);_.payload=a,u!=null&&(_.callback=u),a=hi(i,_,y),a!==null&&(Xr(a,i,y,p),Pc(a,i,y))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var p=Jn(),y=gi(i),_=Vs(p,y);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=hi(i,_,y),a!==null&&(Xr(a,i,y,p),Pc(a,i,y))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=Jn(),p=gi(i),y=Vs(u,p);y.tag=2,a!=null&&(y.callback=a),a=hi(i,y,p),a!==null&&(Xr(a,i,p,u),Pc(a,i,p))}};function mg(i,a,u,p,y,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,_,C):a.prototype&&a.prototype.isPureReactComponent?!Fa(u,p)||!Fa(y,_):!0}function gg(i,a,u){var p=!1,y=ci,_=a.contextType;return typeof _=="object"&&_!==null?_=Mr(_):(y=sr(a)?Ji:Ln.current,p=a.contextTypes,_=(p=p!=null)?Ho(i,y):ci),a=new a(u,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=zc,i.stateNode=a,a._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=_),a}function xg(i,a,u,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==i&&zc.enqueueReplaceState(a,a.state,null)}function fh(i,a,u,p){var y=i.stateNode;y.props=u,y.state=i.memoizedState,y.refs={},Zd(i);var _=a.contextType;typeof _=="object"&&_!==null?y.context=Mr(_):(_=sr(a)?Ji:Ln.current,y.context=Ho(i,_)),y.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(hh(i,a,_,u),y.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&zc.enqueueReplaceState(y,y.state,null),Ac(i,u,y,p),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function Zo(i,a){try{var u="",p=a;do u+=ze(p),p=p.return;while(p);var y=u}catch(_){y=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:y,digest:null}}function ph(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function mh(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var C1=typeof WeakMap=="function"?WeakMap:Map;function yg(i,a,u){u=Vs(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){Hc||(Hc=!0,Ph=p),mh(i,a)},u}function vg(i,a,u){u=Vs(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var y=a.value;u.payload=function(){return p(y)},u.callback=function(){mh(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){mh(i,a),typeof p!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),u}function bg(i,a,u){var p=i.pingCache;if(p===null){p=i.pingCache=new C1;var y=new Set;p.set(a,y)}else y=p.get(a),y===void 0&&(y=new Set,p.set(a,y));y.has(u)||(y.add(u),i=O1.bind(null,i,a,u),a.then(i,i))}function wg(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function _g(i,a,u,p,y){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Vs(-1,1),a.tag=2,hi(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=y,i)}var k1=te.ReactCurrentOwner,ir=!1;function Kn(i,a,u,p){a.child=i===null?Bm(a,null,u,p):Jo(a,i.child,u,p)}function Ng(i,a,u,p,y){u=u.render;var _=a.ref;return Qo(a,y),p=oh(i,a,u,p,_,y),u=ah(),i!==null&&!ir?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,Ls(i,a,y)):(Ut&&u&&$d(a),a.flags|=1,Kn(i,a,p,y),a.child)}function Sg(i,a,u,p,y){if(i===null){var _=u.type;return typeof _=="function"&&!Lh(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=_,Eg(i,a,_,p,y)):(i=Qc(u.type,null,p,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,(i.lanes&y)===0){var C=_.memoizedProps;if(u=u.compare,u=u!==null?u:Fa,u(C,p)&&i.ref===a.ref)return Ls(i,a,y)}return a.flags|=1,i=yi(_,p),i.ref=a.ref,i.return=a,a.child=i}function Eg(i,a,u,p,y){if(i!==null){var _=i.memoizedProps;if(Fa(_,p)&&i.ref===a.ref)if(ir=!1,a.pendingProps=p=_,(i.lanes&y)!==0)(i.flags&131072)!==0&&(ir=!0);else return a.lanes=i.lanes,Ls(i,a,y)}return gh(i,a,u,p,y)}function Cg(i,a,u){var p=a.pendingProps,y=p.children,_=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(ta,br),br|=u;else{if((u&1073741824)===0)return i=_!==null?_.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Pt(ta,br),br|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=_!==null?_.baseLanes:u,Pt(ta,br),br|=p}else _!==null?(p=_.baseLanes|u,a.memoizedState=null):p=u,Pt(ta,br),br|=p;return Kn(i,a,y,u),a.child}function kg(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function gh(i,a,u,p,y){var _=sr(u)?Ji:Ln.current;return _=Ho(a,_),Qo(a,y),u=oh(i,a,u,p,_,y),p=ah(),i!==null&&!ir?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,Ls(i,a,y)):(Ut&&p&&$d(a),a.flags|=1,Kn(i,a,u,y),a.child)}function jg(i,a,u,p,y){if(sr(u)){var _=!0;_c(a)}else _=!1;if(Qo(a,y),a.stateNode===null)Oc(i,a),gg(a,u,p),fh(a,u,p,y),p=!0;else if(i===null){var C=a.stateNode,U=a.memoizedProps;C.props=U;var q=C.context,ie=u.contextType;typeof ie=="object"&&ie!==null?ie=Mr(ie):(ie=sr(u)?Ji:Ln.current,ie=Ho(a,ie));var fe=u.getDerivedStateFromProps,ye=typeof fe=="function"||typeof C.getSnapshotBeforeUpdate=="function";ye||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(U!==p||q!==ie)&&xg(a,C,p,ie),di=!1;var ue=a.memoizedState;C.state=ue,Ac(a,p,C,y),q=a.memoizedState,U!==p||ue!==q||rr.current||di?(typeof fe=="function"&&(hh(a,u,fe,p),q=a.memoizedState),(U=di||mg(a,u,U,p,ue,q,ie))?(ye||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=q),C.props=p,C.state=q,C.context=ie,p=U):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{C=a.stateNode,qm(i,a),U=a.memoizedProps,ie=a.type===a.elementType?U:Jr(a.type,U),C.props=ie,ye=a.pendingProps,ue=C.context,q=u.contextType,typeof q=="object"&&q!==null?q=Mr(q):(q=sr(u)?Ji:Ln.current,q=Ho(a,q));var Ce=u.getDerivedStateFromProps;(fe=typeof Ce=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(U!==ye||ue!==q)&&xg(a,C,p,q),di=!1,ue=a.memoizedState,C.state=ue,Ac(a,p,C,y);var Ie=a.memoizedState;U!==ye||ue!==Ie||rr.current||di?(typeof Ce=="function"&&(hh(a,u,Ce,p),Ie=a.memoizedState),(ie=di||mg(a,u,ie,p,ue,Ie,q)||!1)?(fe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,Ie,q),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,Ie,q)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||U===i.memoizedProps&&ue===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||U===i.memoizedProps&&ue===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=Ie),C.props=p,C.state=Ie,C.context=q,p=ie):(typeof C.componentDidUpdate!="function"||U===i.memoizedProps&&ue===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||U===i.memoizedProps&&ue===i.memoizedState||(a.flags|=1024),p=!1)}return xh(i,a,u,p,_,y)}function xh(i,a,u,p,y,_){kg(i,a);var C=(a.flags&128)!==0;if(!p&&!C)return y&&Rm(a,u,!1),Ls(i,a,_);p=a.stateNode,k1.current=a;var U=C&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,i!==null&&C?(a.child=Jo(a,i.child,null,_),a.child=Jo(a,null,U,_)):Kn(i,a,U,_),a.memoizedState=p.state,y&&Rm(a,u,!0),a.child}function Tg(i){var a=i.stateNode;a.pendingContext?Am(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Am(i,a.context,!1),eh(i,a.containerInfo)}function Pg(i,a,u,p,y){return Ko(),Wd(y),a.flags|=256,Kn(i,a,u,p),a.child}var yh={dehydrated:null,treeContext:null,retryLane:0};function vh(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ag(i,a,u){var p=a.pendingProps,y=Gt.current,_=!1,C=(a.flags&128)!==0,U;if((U=C)||(U=i!==null&&i.memoizedState===null?!1:(y&2)!==0),U?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),Pt(Gt,y&1),i===null)return Gd(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(C=p.children,i=p.fallback,_?(p=a.mode,_=a.child,C={mode:"hidden",children:C},(p&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=C):_=Xc(C,p,0,null),i=io(i,p,u,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=vh(u),a.memoizedState=yh,i):bh(a,C));if(y=i.memoizedState,y!==null&&(U=y.dehydrated,U!==null))return j1(i,a,C,p,U,y,u);if(_){_=p.fallback,C=a.mode,y=i.child,U=y.sibling;var q={mode:"hidden",children:p.children};return(C&1)===0&&a.child!==y?(p=a.child,p.childLanes=0,p.pendingProps=q,a.deletions=null):(p=yi(y,q),p.subtreeFlags=y.subtreeFlags&14680064),U!==null?_=yi(U,_):(_=io(_,C,u,null),_.flags|=2),_.return=a,p.return=a,p.sibling=_,a.child=p,p=_,_=a.child,C=i.child.memoizedState,C=C===null?vh(u):{baseLanes:C.baseLanes|u,cachePool:null,transitions:C.transitions},_.memoizedState=C,_.childLanes=i.childLanes&~u,a.memoizedState=yh,p}return _=i.child,i=_.sibling,p=yi(_,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=p,a.memoizedState=null,p}function bh(i,a){return a=Xc({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Fc(i,a,u,p){return p!==null&&Wd(p),Jo(a,i.child,null,u),i=bh(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function j1(i,a,u,p,y,_,C){if(u)return a.flags&256?(a.flags&=-257,p=ph(Error(t(422))),Fc(i,a,C,p)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=p.fallback,y=a.mode,p=Xc({mode:"visible",children:p.children},y,0,null),_=io(_,y,C,null),_.flags|=2,p.return=a,_.return=a,p.sibling=_,a.child=p,(a.mode&1)!==0&&Jo(a,i.child,null,C),a.child.memoizedState=vh(C),a.memoizedState=yh,_);if((a.mode&1)===0)return Fc(i,a,C,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var U=p.dgst;return p=U,_=Error(t(419)),p=ph(_,p,void 0),Fc(i,a,C,p)}if(U=(C&i.childLanes)!==0,ir||U){if(p=_n,p!==null){switch(C&-C){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|C))!==0?0:y,y!==0&&y!==_.retryLane&&(_.retryLane=y,Ds(i,y),Xr(p,i,y,-1))}return Vh(),p=ph(Error(t(421))),Fc(i,a,C,p)}return y.data==="$?"?(a.flags|=128,a.child=i.child,a=U1.bind(null,i),y._reactRetry=a,null):(i=_.treeContext,vr=ai(y.nextSibling),yr=a,Ut=!0,Kr=null,i!==null&&(Ir[Rr++]=Rs,Ir[Rr++]=Ms,Ir[Rr++]=Yi,Rs=i.id,Ms=i.overflow,Yi=a),a=bh(a,p.children),a.flags|=4096,a)}function Ig(i,a,u){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),Qd(i.return,a,u)}function wh(i,a,u,p,y){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:y}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=p,_.tail=u,_.tailMode=y)}function Rg(i,a,u){var p=a.pendingProps,y=p.revealOrder,_=p.tail;if(Kn(i,a,p.children,u),p=Gt.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ig(i,u,a);else if(i.tag===19)Ig(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Pt(Gt,p),(a.mode&1)===0)a.memoizedState=null;else switch(y){case"forwards":for(u=a.child,y=null;u!==null;)i=u.alternate,i!==null&&Ic(i)===null&&(y=u),u=u.sibling;u=y,u===null?(y=a.child,a.child=null):(y=u.sibling,u.sibling=null),wh(a,!1,y,u,_);break;case"backwards":for(u=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&Ic(i)===null){a.child=y;break}i=y.sibling,y.sibling=u,u=y,y=i}wh(a,!0,u,null,_);break;case"together":wh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Oc(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Ls(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),to|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=yi(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=yi(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function T1(i,a,u){switch(a.tag){case 3:Tg(a),Ko();break;case 5:Wm(a);break;case 1:sr(a.type)&&_c(a);break;case 4:eh(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,y=a.memoizedProps.value;Pt(jc,p._currentValue),p._currentValue=y;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(Pt(Gt,Gt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?Ag(i,a,u):(Pt(Gt,Gt.current&1),i=Ls(i,a,u),i!==null?i.sibling:null);Pt(Gt,Gt.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(i.flags&128)!==0){if(p)return Rg(i,a,u);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Pt(Gt,Gt.current),p)break;return null;case 22:case 23:return a.lanes=0,Cg(i,a,u)}return Ls(i,a,u)}var Mg,_h,Dg,Vg;Mg=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},_h=function(){},Dg=function(i,a,u,p){var y=i.memoizedProps;if(y!==p){i=a.stateNode,Zi(ps.current);var _=null;switch(u){case"input":y=je(i,y),p=je(i,p),_=[];break;case"select":y=G({},y,{value:void 0}),p=G({},p,{value:void 0}),_=[];break;case"textarea":y=Mn(i,y),p=Mn(i,p),_=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=vc)}Or(u,p);var C;u=null;for(ie in y)if(!p.hasOwnProperty(ie)&&y.hasOwnProperty(ie)&&y[ie]!=null)if(ie==="style"){var U=y[ie];for(C in U)U.hasOwnProperty(C)&&(u||(u={}),u[C]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(o.hasOwnProperty(ie)?_||(_=[]):(_=_||[]).push(ie,null));for(ie in p){var q=p[ie];if(U=y!=null?y[ie]:void 0,p.hasOwnProperty(ie)&&q!==U&&(q!=null||U!=null))if(ie==="style")if(U){for(C in U)!U.hasOwnProperty(C)||q&&q.hasOwnProperty(C)||(u||(u={}),u[C]="");for(C in q)q.hasOwnProperty(C)&&U[C]!==q[C]&&(u||(u={}),u[C]=q[C])}else u||(_||(_=[]),_.push(ie,u)),u=q;else ie==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,U=U?U.__html:void 0,q!=null&&U!==q&&(_=_||[]).push(ie,q)):ie==="children"?typeof q!="string"&&typeof q!="number"||(_=_||[]).push(ie,""+q):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(o.hasOwnProperty(ie)?(q!=null&&ie==="onScroll"&&Mt("scroll",i),_||U===q||(_=[])):(_=_||[]).push(ie,q))}u&&(_=_||[]).push("style",u);var ie=_;(a.updateQueue=ie)&&(a.flags|=4)}},Vg=function(i,a,u,p){u!==p&&(a.flags|=4)};function el(i,a){if(!Ut)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Fn(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(a)for(var y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=u,a}function P1(i,a,u){var p=a.pendingProps;switch(qd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(a),null;case 1:return sr(a.type)&&wc(),Fn(a),null;case 3:return p=a.stateNode,Xo(),Dt(rr),Dt(Ln),rh(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(Cc(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Kr!==null&&(Rh(Kr),Kr=null))),_h(i,a),Fn(a),null;case 5:th(a);var y=Zi(Ja.current);if(u=a.type,i!==null&&a.stateNode!=null)Dg(i,a,u,p,y),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return Fn(a),null}if(i=Zi(ps.current),Cc(a)){p=a.stateNode,u=a.type;var _=a.memoizedProps;switch(p[fs]=a,p[qa]=_,i=(a.mode&1)!==0,u){case"dialog":Mt("cancel",p),Mt("close",p);break;case"iframe":case"object":case"embed":Mt("load",p);break;case"video":case"audio":for(y=0;y<Ua.length;y++)Mt(Ua[y],p);break;case"source":Mt("error",p);break;case"img":case"image":case"link":Mt("error",p),Mt("load",p);break;case"details":Mt("toggle",p);break;case"input":at(p,_),Mt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!_.multiple},Mt("invalid",p);break;case"textarea":Qn(p,_),Mt("invalid",p)}Or(u,_),y=null;for(var C in _)if(_.hasOwnProperty(C)){var U=_[C];C==="children"?typeof U=="string"?p.textContent!==U&&(_.suppressHydrationWarning!==!0&&yc(p.textContent,U,i),y=["children",U]):typeof U=="number"&&p.textContent!==""+U&&(_.suppressHydrationWarning!==!0&&yc(p.textContent,U,i),y=["children",""+U]):o.hasOwnProperty(C)&&U!=null&&C==="onScroll"&&Mt("scroll",p)}switch(u){case"input":wt(p),un(p,_,!0);break;case"textarea":wt(p),En(p);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(p.onclick=vc)}p=y,a.updateQueue=p,p!==null&&(a.flags|=4)}else{C=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ct(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=C.createElement(u,{is:p.is}):(i=C.createElement(u),u==="select"&&(C=i,p.multiple?C.multiple=!0:p.size&&(C.size=p.size))):i=C.createElementNS(i,u),i[fs]=a,i[qa]=p,Mg(i,a,!1,!1),a.stateNode=i;e:{switch(C=Ss(u,p),u){case"dialog":Mt("cancel",i),Mt("close",i),y=p;break;case"iframe":case"object":case"embed":Mt("load",i),y=p;break;case"video":case"audio":for(y=0;y<Ua.length;y++)Mt(Ua[y],i);y=p;break;case"source":Mt("error",i),y=p;break;case"img":case"image":case"link":Mt("error",i),Mt("load",i),y=p;break;case"details":Mt("toggle",i),y=p;break;case"input":at(i,p),y=je(i,p),Mt("invalid",i);break;case"option":y=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},y=G({},p,{value:void 0}),Mt("invalid",i);break;case"textarea":Qn(i,p),y=Mn(i,p),Mt("invalid",i);break;default:y=p}Or(u,y),U=y;for(_ in U)if(U.hasOwnProperty(_)){var q=U[_];_==="style"?hn(i,q):_==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&fr(i,q)):_==="children"?typeof q=="string"?(u!=="textarea"||q!=="")&&Xn(i,q):typeof q=="number"&&Xn(i,""+q):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(o.hasOwnProperty(_)?q!=null&&_==="onScroll"&&Mt("scroll",i):q!=null&&K(i,_,q,C))}switch(u){case"input":wt(i),un(i,p,!1);break;case"textarea":wt(i),En(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Ke(p.value));break;case"select":i.multiple=!!p.multiple,_=p.value,_!=null?Ht(i,!!p.multiple,_,!1):p.defaultValue!=null&&Ht(i,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=vc)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Fn(a),null;case 6:if(i&&a.stateNode!=null)Vg(i,a,i.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=Zi(Ja.current),Zi(ps.current),Cc(a)){if(p=a.stateNode,u=a.memoizedProps,p[fs]=a,(_=p.nodeValue!==u)&&(i=yr,i!==null))switch(i.tag){case 3:yc(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&yc(p.nodeValue,u,(i.mode&1)!==0)}_&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[fs]=a,a.stateNode=p}return Fn(a),null;case 13:if(Dt(Gt),p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ut&&vr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Fm(),Ko(),a.flags|=98560,_=!1;else if(_=Cc(a),p!==null&&p.dehydrated!==null){if(i===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[fs]=a}else Ko(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Fn(a),_=!1}else Kr!==null&&(Rh(Kr),Kr=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(Gt.current&1)!==0?mn===0&&(mn=3):Vh())),a.updateQueue!==null&&(a.flags|=4),Fn(a),null);case 4:return Xo(),_h(i,a),i===null&&Ba(a.stateNode.containerInfo),Fn(a),null;case 10:return Yd(a.type._context),Fn(a),null;case 17:return sr(a.type)&&wc(),Fn(a),null;case 19:if(Dt(Gt),_=a.memoizedState,_===null)return Fn(a),null;if(p=(a.flags&128)!==0,C=_.rendering,C===null)if(p)el(_,!1);else{if(mn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(C=Ic(i),C!==null){for(a.flags|=128,el(_,!1),p=C.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)_=u,i=p,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,i=C.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Pt(Gt,Gt.current&1|2),a.child}i=i.sibling}_.tail!==null&&Tt()>na&&(a.flags|=128,p=!0,el(_,!1),a.lanes=4194304)}else{if(!p)if(i=Ic(C),i!==null){if(a.flags|=128,p=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),el(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!Ut)return Fn(a),null}else 2*Tt()-_.renderingStartTime>na&&u!==1073741824&&(a.flags|=128,p=!0,el(_,!1),a.lanes=4194304);_.isBackwards?(C.sibling=a.child,a.child=C):(u=_.last,u!==null?u.sibling=C:a.child=C,_.last=C)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=Tt(),a.sibling=null,u=Gt.current,Pt(Gt,p?u&1|2:u&1),a):(Fn(a),null);case 22:case 23:return Dh(),p=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(br&1073741824)!==0&&(Fn(a),a.subtreeFlags&6&&(a.flags|=8192)):Fn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function A1(i,a){switch(qd(a),a.tag){case 1:return sr(a.type)&&wc(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Xo(),Dt(rr),Dt(Ln),rh(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return th(a),null;case 13:if(Dt(Gt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Ko()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Dt(Gt),null;case 4:return Xo(),null;case 10:return Yd(a.type._context),null;case 22:case 23:return Dh(),null;case 24:return null;default:return null}}var Uc=!1,On=!1,I1=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function ea(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){Jt(i,a,p)}else u.current=null}function Nh(i,a,u){try{u()}catch(p){Jt(i,a,p)}}var Lg=!1;function R1(i,a){if(Dd=si,i=mm(),kd(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var y=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var C=0,U=-1,q=-1,ie=0,fe=0,ye=i,ue=null;t:for(;;){for(var Ce;ye!==u||y!==0&&ye.nodeType!==3||(U=C+y),ye!==_||p!==0&&ye.nodeType!==3||(q=C+p),ye.nodeType===3&&(C+=ye.nodeValue.length),(Ce=ye.firstChild)!==null;)ue=ye,ye=Ce;for(;;){if(ye===i)break t;if(ue===u&&++ie===y&&(U=C),ue===_&&++fe===p&&(q=C),(Ce=ye.nextSibling)!==null)break;ye=ue,ue=ye.parentNode}ye=Ce}u=U===-1||q===-1?null:{start:U,end:q}}else u=null}u=u||{start:0,end:0}}else u=null;for(Vd={focusedElem:i,selectionRange:u},si=!1,Pe=a;Pe!==null;)if(a=Pe,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Pe=i;else for(;Pe!==null;){a=Pe;try{var Ie=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ie!==null){var Me=Ie.memoizedProps,en=Ie.memoizedState,Z=a.stateNode,Y=Z.getSnapshotBeforeUpdate(a.elementType===a.type?Me:Jr(a.type,Me),en);Z.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var re=a.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(be){Jt(a,a.return,be)}if(i=a.sibling,i!==null){i.return=a.return,Pe=i;break}Pe=a.return}return Ie=Lg,Lg=!1,Ie}function tl(i,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&i)===i){var _=y.destroy;y.destroy=void 0,_!==void 0&&Nh(a,u,_)}y=y.next}while(y!==p)}}function Bc(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function Sh(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function zg(i){var a=i.alternate;a!==null&&(i.alternate=null,zg(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[fs],delete a[qa],delete a[Od],delete a[m1],delete a[g1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Fg(i){return i.tag===5||i.tag===3||i.tag===4}function Og(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Fg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Eh(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=vc));else if(p!==4&&(i=i.child,i!==null))for(Eh(i,a,u),i=i.sibling;i!==null;)Eh(i,a,u),i=i.sibling}function Ch(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Ch(i,a,u),i=i.sibling;i!==null;)Ch(i,a,u),i=i.sibling}var jn=null,Yr=!1;function fi(i,a,u){for(u=u.child;u!==null;)Ug(i,a,u),u=u.sibling}function Ug(i,a,u){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(Ui,u)}catch{}switch(u.tag){case 5:On||ea(u,a);case 6:var p=jn,y=Yr;jn=null,fi(i,a,u),jn=p,Yr=y,jn!==null&&(Yr?(i=jn,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):jn.removeChild(u.stateNode));break;case 18:jn!==null&&(Yr?(i=jn,u=u.stateNode,i.nodeType===8?Fd(i.parentNode,u):i.nodeType===1&&Fd(i,u),Hr(i)):Fd(jn,u.stateNode));break;case 4:p=jn,y=Yr,jn=u.stateNode.containerInfo,Yr=!0,fi(i,a,u),jn=p,Yr=y;break;case 0:case 11:case 14:case 15:if(!On&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var _=y,C=_.destroy;_=_.tag,C!==void 0&&((_&2)!==0||(_&4)!==0)&&Nh(u,a,C),y=y.next}while(y!==p)}fi(i,a,u);break;case 1:if(!On&&(ea(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(U){Jt(u,a,U)}fi(i,a,u);break;case 21:fi(i,a,u);break;case 22:u.mode&1?(On=(p=On)||u.memoizedState!==null,fi(i,a,u),On=p):fi(i,a,u);break;default:fi(i,a,u)}}function Bg(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new I1),a.forEach(function(p){var y=B1.bind(null,i,p);u.has(p)||(u.add(p),p.then(y,y))})}}function Qr(i,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];try{var _=i,C=a,U=C;e:for(;U!==null;){switch(U.tag){case 5:jn=U.stateNode,Yr=!1;break e;case 3:jn=U.stateNode.containerInfo,Yr=!0;break e;case 4:jn=U.stateNode.containerInfo,Yr=!0;break e}U=U.return}if(jn===null)throw Error(t(160));Ug(_,C,y),jn=null,Yr=!1;var q=y.alternate;q!==null&&(q.return=null),y.return=null}catch(ie){Jt(y,a,ie)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)$g(a,i),a=a.sibling}function $g(i,a){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Qr(a,i),gs(i),p&4){try{tl(3,i,i.return),Bc(3,i)}catch(Me){Jt(i,i.return,Me)}try{tl(5,i,i.return)}catch(Me){Jt(i,i.return,Me)}}break;case 1:Qr(a,i),gs(i),p&512&&u!==null&&ea(u,u.return);break;case 5:if(Qr(a,i),gs(i),p&512&&u!==null&&ea(u,u.return),i.flags&32){var y=i.stateNode;try{Xn(y,"")}catch(Me){Jt(i,i.return,Me)}}if(p&4&&(y=i.stateNode,y!=null)){var _=i.memoizedProps,C=u!==null?u.memoizedProps:_,U=i.type,q=i.updateQueue;if(i.updateQueue=null,q!==null)try{U==="input"&&_.type==="radio"&&_.name!=null&&Bt(y,_),Ss(U,C);var ie=Ss(U,_);for(C=0;C<q.length;C+=2){var fe=q[C],ye=q[C+1];fe==="style"?hn(y,ye):fe==="dangerouslySetInnerHTML"?fr(y,ye):fe==="children"?Xn(y,ye):K(y,fe,ye,ie)}switch(U){case"input":$t(y,_);break;case"textarea":hr(y,_);break;case"select":var ue=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!_.multiple;var Ce=_.value;Ce!=null?Ht(y,!!_.multiple,Ce,!1):ue!==!!_.multiple&&(_.defaultValue!=null?Ht(y,!!_.multiple,_.defaultValue,!0):Ht(y,!!_.multiple,_.multiple?[]:"",!1))}y[qa]=_}catch(Me){Jt(i,i.return,Me)}}break;case 6:if(Qr(a,i),gs(i),p&4){if(i.stateNode===null)throw Error(t(162));y=i.stateNode,_=i.memoizedProps;try{y.nodeValue=_}catch(Me){Jt(i,i.return,Me)}}break;case 3:if(Qr(a,i),gs(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Hr(a.containerInfo)}catch(Me){Jt(i,i.return,Me)}break;case 4:Qr(a,i),gs(i);break;case 13:Qr(a,i),gs(i),y=i.child,y.flags&8192&&(_=y.memoizedState!==null,y.stateNode.isHidden=_,!_||y.alternate!==null&&y.alternate.memoizedState!==null||(Th=Tt())),p&4&&Bg(i);break;case 22:if(fe=u!==null&&u.memoizedState!==null,i.mode&1?(On=(ie=On)||fe,Qr(a,i),On=ie):Qr(a,i),gs(i),p&8192){if(ie=i.memoizedState!==null,(i.stateNode.isHidden=ie)&&!fe&&(i.mode&1)!==0)for(Pe=i,fe=i.child;fe!==null;){for(ye=Pe=fe;Pe!==null;){switch(ue=Pe,Ce=ue.child,ue.tag){case 0:case 11:case 14:case 15:tl(4,ue,ue.return);break;case 1:ea(ue,ue.return);var Ie=ue.stateNode;if(typeof Ie.componentWillUnmount=="function"){p=ue,u=ue.return;try{a=p,Ie.props=a.memoizedProps,Ie.state=a.memoizedState,Ie.componentWillUnmount()}catch(Me){Jt(p,u,Me)}}break;case 5:ea(ue,ue.return);break;case 22:if(ue.memoizedState!==null){Gg(ye);continue}}Ce!==null?(Ce.return=ue,Pe=Ce):Gg(ye)}fe=fe.sibling}e:for(fe=null,ye=i;;){if(ye.tag===5){if(fe===null){fe=ye;try{y=ye.stateNode,ie?(_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(U=ye.stateNode,q=ye.memoizedProps.style,C=q!=null&&q.hasOwnProperty("display")?q.display:null,U.style.display=kt("display",C))}catch(Me){Jt(i,i.return,Me)}}}else if(ye.tag===6){if(fe===null)try{ye.stateNode.nodeValue=ie?"":ye.memoizedProps}catch(Me){Jt(i,i.return,Me)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===i)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===i)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===i)break e;fe===ye&&(fe=null),ye=ye.return}fe===ye&&(fe=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:Qr(a,i),gs(i),p&4&&Bg(i);break;case 21:break;default:Qr(a,i),gs(i)}}function gs(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(Fg(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Xn(y,""),p.flags&=-33);var _=Og(i);Ch(i,_,y);break;case 3:case 4:var C=p.stateNode.containerInfo,U=Og(i);Eh(i,U,C);break;default:throw Error(t(161))}}catch(q){Jt(i,i.return,q)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function M1(i,a,u){Pe=i,qg(i)}function qg(i,a,u){for(var p=(i.mode&1)!==0;Pe!==null;){var y=Pe,_=y.child;if(y.tag===22&&p){var C=y.memoizedState!==null||Uc;if(!C){var U=y.alternate,q=U!==null&&U.memoizedState!==null||On;U=Uc;var ie=On;if(Uc=C,(On=q)&&!ie)for(Pe=y;Pe!==null;)C=Pe,q=C.child,C.tag===22&&C.memoizedState!==null?Wg(y):q!==null?(q.return=C,Pe=q):Wg(y);for(;_!==null;)Pe=_,qg(_),_=_.sibling;Pe=y,Uc=U,On=ie}Hg(i)}else(y.subtreeFlags&8772)!==0&&_!==null?(_.return=y,Pe=_):Hg(i)}}function Hg(i){for(;Pe!==null;){var a=Pe;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:On||Bc(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!On)if(u===null)p.componentDidMount();else{var y=a.elementType===a.type?u.memoizedProps:Jr(a.type,u.memoizedProps);p.componentDidUpdate(y,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&Gm(a,_,p);break;case 3:var C=a.updateQueue;if(C!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}Gm(a,C,u)}break;case 5:var U=a.stateNode;if(u===null&&a.flags&4){u=U;var q=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":q.autoFocus&&u.focus();break;case"img":q.src&&(u.src=q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ie=a.alternate;if(ie!==null){var fe=ie.memoizedState;if(fe!==null){var ye=fe.dehydrated;ye!==null&&Hr(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}On||a.flags&512&&Sh(a)}catch(ue){Jt(a,a.return,ue)}}if(a===i){Pe=null;break}if(u=a.sibling,u!==null){u.return=a.return,Pe=u;break}Pe=a.return}}function Gg(i){for(;Pe!==null;){var a=Pe;if(a===i){Pe=null;break}var u=a.sibling;if(u!==null){u.return=a.return,Pe=u;break}Pe=a.return}}function Wg(i){for(;Pe!==null;){var a=Pe;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Bc(4,a)}catch(q){Jt(a,u,q)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var y=a.return;try{p.componentDidMount()}catch(q){Jt(a,y,q)}}var _=a.return;try{Sh(a)}catch(q){Jt(a,_,q)}break;case 5:var C=a.return;try{Sh(a)}catch(q){Jt(a,C,q)}}}catch(q){Jt(a,a.return,q)}if(a===i){Pe=null;break}var U=a.sibling;if(U!==null){U.return=a.return,Pe=U;break}Pe=a.return}}var D1=Math.ceil,$c=te.ReactCurrentDispatcher,kh=te.ReactCurrentOwner,Vr=te.ReactCurrentBatchConfig,pt=0,_n=null,on=null,Tn=0,br=0,ta=li(0),mn=0,nl=null,to=0,qc=0,jh=0,rl=null,or=null,Th=0,na=1/0,zs=null,Hc=!1,Ph=null,pi=null,Gc=!1,mi=null,Wc=0,sl=0,Ah=null,Kc=-1,Jc=0;function Jn(){return(pt&6)!==0?Tt():Kc!==-1?Kc:Kc=Tt()}function gi(i){return(i.mode&1)===0?1:(pt&2)!==0&&Tn!==0?Tn&-Tn:y1.transition!==null?(Jc===0&&(Jc=$i()),Jc):(i=ut,i!==0||(i=window.event,i=i===void 0?16:Ia(i.type)),i)}function Xr(i,a,u,p){if(50<sl)throw sl=0,Ah=null,Error(t(185));ei(i,u,p),((pt&2)===0||i!==_n)&&(i===_n&&((pt&2)===0&&(qc|=u),mn===4&&xi(i,Tn)),ar(i,p),u===1&&pt===0&&(a.mode&1)===0&&(na=Tt()+500,Nc&&ui()))}function ar(i,a){var u=i.callbackNode;Cs(i,a);var p=Bi(i,i===_n?Tn:0);if(p===0)u!==null&&So(u),i.callbackNode=null,i.callbackPriority=0;else if(a=p&-p,i.callbackPriority!==a){if(u!=null&&So(u),a===1)i.tag===0?x1(Jg.bind(null,i)):Mm(Jg.bind(null,i)),f1(function(){(pt&6)===0&&ui()}),u=null;else{switch(ni(p)){case 1:u=Oi;break;case 4:u=Qs;break;case 16:u=Tr;break;case 536870912:u=Jl;break;default:u=Tr}u=r0(u,Kg.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function Kg(i,a){if(Kc=-1,Jc=0,(pt&6)!==0)throw Error(t(327));var u=i.callbackNode;if(ra()&&i.callbackNode!==u)return null;var p=Bi(i,i===_n?Tn:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||a)a=Yc(i,p);else{a=p;var y=pt;pt|=2;var _=Qg();(_n!==i||Tn!==a)&&(zs=null,na=Tt()+500,ro(i,a));do try{z1();break}catch(U){Yg(i,U)}while(!0);Jd(),$c.current=_,pt=y,on!==null?a=0:(_n=null,Tn=0,a=mn)}if(a!==0){if(a===2&&(y=mr(i),y!==0&&(p=y,a=Ih(i,y))),a===1)throw u=nl,ro(i,0),xi(i,p),ar(i,Tt()),u;if(a===6)xi(i,p);else{if(y=i.current.alternate,(p&30)===0&&!V1(y)&&(a=Yc(i,p),a===2&&(_=mr(i),_!==0&&(p=_,a=Ih(i,_))),a===1))throw u=nl,ro(i,0),xi(i,p),ar(i,Tt()),u;switch(i.finishedWork=y,i.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:so(i,or,zs);break;case 3:if(xi(i,p),(p&130023424)===p&&(a=Th+500-Tt(),10<a)){if(Bi(i,0)!==0)break;if(y=i.suspendedLanes,(y&p)!==p){Jn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=zd(so.bind(null,i,or,zs),a);break}so(i,or,zs);break;case 4:if(xi(i,p),(p&4194240)===p)break;for(a=i.eventTimes,y=-1;0<p;){var C=31-Gn(p);_=1<<C,C=a[C],C>y&&(y=C),p&=~_}if(p=y,p=Tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*D1(p/1960))-p,10<p){i.timeoutHandle=zd(so.bind(null,i,or,zs),p);break}so(i,or,zs);break;case 5:so(i,or,zs);break;default:throw Error(t(329))}}}return ar(i,Tt()),i.callbackNode===u?Kg.bind(null,i):null}function Ih(i,a){var u=rl;return i.current.memoizedState.isDehydrated&&(ro(i,a).flags|=256),i=Yc(i,a),i!==2&&(a=or,or=u,a!==null&&Rh(a)),i}function Rh(i){or===null?or=i:or.push.apply(or,i)}function V1(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var y=u[p],_=y.getSnapshot;y=y.value;try{if(!Wr(_(),y))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function xi(i,a){for(a&=~jh,a&=~qc,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-Gn(a),p=1<<u;i[u]=-1,a&=~p}}function Jg(i){if((pt&6)!==0)throw Error(t(327));ra();var a=Bi(i,0);if((a&1)===0)return ar(i,Tt()),null;var u=Yc(i,a);if(i.tag!==0&&u===2){var p=mr(i);p!==0&&(a=p,u=Ih(i,p))}if(u===1)throw u=nl,ro(i,0),xi(i,a),ar(i,Tt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,so(i,or,zs),ar(i,Tt()),null}function Mh(i,a){var u=pt;pt|=1;try{return i(a)}finally{pt=u,pt===0&&(na=Tt()+500,Nc&&ui())}}function no(i){mi!==null&&mi.tag===0&&(pt&6)===0&&ra();var a=pt;pt|=1;var u=Vr.transition,p=ut;try{if(Vr.transition=null,ut=1,i)return i()}finally{ut=p,Vr.transition=u,pt=a,(pt&6)===0&&ui()}}function Dh(){br=ta.current,Dt(ta)}function ro(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,h1(u)),on!==null)for(u=on.return;u!==null;){var p=u;switch(qd(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&wc();break;case 3:Xo(),Dt(rr),Dt(Ln),rh();break;case 5:th(p);break;case 4:Xo();break;case 13:Dt(Gt);break;case 19:Dt(Gt);break;case 10:Yd(p.type._context);break;case 22:case 23:Dh()}u=u.return}if(_n=i,on=i=yi(i.current,null),Tn=br=a,mn=0,nl=null,jh=qc=to=0,or=rl=null,Xi!==null){for(a=0;a<Xi.length;a++)if(u=Xi[a],p=u.interleaved,p!==null){u.interleaved=null;var y=p.next,_=u.pending;if(_!==null){var C=_.next;_.next=y,p.next=C}u.pending=p}Xi=null}return i}function Yg(i,a){do{var u=on;try{if(Jd(),Rc.current=Lc,Mc){for(var p=Wt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Mc=!1}if(eo=0,wn=pn=Wt=null,Ya=!1,Qa=0,kh.current=null,u===null||u.return===null){mn=1,nl=a,on=null;break}e:{var _=i,C=u.return,U=u,q=a;if(a=Tn,U.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var ie=q,fe=U,ye=fe.tag;if((fe.mode&1)===0&&(ye===0||ye===11||ye===15)){var ue=fe.alternate;ue?(fe.updateQueue=ue.updateQueue,fe.memoizedState=ue.memoizedState,fe.lanes=ue.lanes):(fe.updateQueue=null,fe.memoizedState=null)}var Ce=wg(C);if(Ce!==null){Ce.flags&=-257,_g(Ce,C,U,_,a),Ce.mode&1&&bg(_,ie,a),a=Ce,q=ie;var Ie=a.updateQueue;if(Ie===null){var Me=new Set;Me.add(q),a.updateQueue=Me}else Ie.add(q);break e}else{if((a&1)===0){bg(_,ie,a),Vh();break e}q=Error(t(426))}}else if(Ut&&U.mode&1){var en=wg(C);if(en!==null){(en.flags&65536)===0&&(en.flags|=256),_g(en,C,U,_,a),Wd(Zo(q,U));break e}}_=q=Zo(q,U),mn!==4&&(mn=2),rl===null?rl=[_]:rl.push(_),_=C;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var Z=yg(_,q,a);Hm(_,Z);break e;case 1:U=q;var Y=_.type,re=_.stateNode;if((_.flags&128)===0&&(typeof Y.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(pi===null||!pi.has(re)))){_.flags|=65536,a&=-a,_.lanes|=a;var be=vg(_,U,a);Hm(_,be);break e}}_=_.return}while(_!==null)}Zg(u)}catch(Fe){a=Fe,on===u&&u!==null&&(on=u=u.return);continue}break}while(!0)}function Qg(){var i=$c.current;return $c.current=Lc,i===null?Lc:i}function Vh(){(mn===0||mn===3||mn===2)&&(mn=4),_n===null||(to&268435455)===0&&(qc&268435455)===0||xi(_n,Tn)}function Yc(i,a){var u=pt;pt|=2;var p=Qg();(_n!==i||Tn!==a)&&(zs=null,ro(i,a));do try{L1();break}catch(y){Yg(i,y)}while(!0);if(Jd(),pt=u,$c.current=p,on!==null)throw Error(t(261));return _n=null,Tn=0,mn}function L1(){for(;on!==null;)Xg(on)}function z1(){for(;on!==null&&!Wl();)Xg(on)}function Xg(i){var a=n0(i.alternate,i,br);i.memoizedProps=i.pendingProps,a===null?Zg(i):on=a,kh.current=null}function Zg(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=P1(u,a,br),u!==null){on=u;return}}else{if(u=A1(u,a),u!==null){u.flags&=32767,on=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{mn=6,on=null;return}}if(a=a.sibling,a!==null){on=a;return}on=a=i}while(a!==null);mn===0&&(mn=5)}function so(i,a,u){var p=ut,y=Vr.transition;try{Vr.transition=null,ut=1,F1(i,a,u,p)}finally{Vr.transition=y,ut=p}return null}function F1(i,a,u,p){do ra();while(mi!==null);if((pt&6)!==0)throw Error(t(327));u=i.finishedWork;var y=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var _=u.lanes|u.childLanes;if(Nt(i,_),i===_n&&(on=_n=null,Tn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Gc||(Gc=!0,r0(Tr,function(){return ra(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=Vr.transition,Vr.transition=null;var C=ut;ut=1;var U=pt;pt|=4,kh.current=null,R1(i,u),$g(u,i),i1(Vd),si=!!Dd,Vd=Dd=null,i.current=u,M1(u),vd(),pt=U,ut=C,Vr.transition=_}else i.current=u;if(Gc&&(Gc=!1,mi=i,Wc=y),_=i.pendingLanes,_===0&&(pi=null),Yl(u.stateNode),ar(i,Tt()),a!==null)for(p=i.onRecoverableError,u=0;u<a.length;u++)y=a[u],p(y.value,{componentStack:y.stack,digest:y.digest});if(Hc)throw Hc=!1,i=Ph,Ph=null,i;return(Wc&1)!==0&&i.tag!==0&&ra(),_=i.pendingLanes,(_&1)!==0?i===Ah?sl++:(sl=0,Ah=i):sl=0,ui(),null}function ra(){if(mi!==null){var i=ni(Wc),a=Vr.transition,u=ut;try{if(Vr.transition=null,ut=16>i?16:i,mi===null)var p=!1;else{if(i=mi,mi=null,Wc=0,(pt&6)!==0)throw Error(t(331));var y=pt;for(pt|=4,Pe=i.current;Pe!==null;){var _=Pe,C=_.child;if((Pe.flags&16)!==0){var U=_.deletions;if(U!==null){for(var q=0;q<U.length;q++){var ie=U[q];for(Pe=ie;Pe!==null;){var fe=Pe;switch(fe.tag){case 0:case 11:case 15:tl(8,fe,_)}var ye=fe.child;if(ye!==null)ye.return=fe,Pe=ye;else for(;Pe!==null;){fe=Pe;var ue=fe.sibling,Ce=fe.return;if(zg(fe),fe===ie){Pe=null;break}if(ue!==null){ue.return=Ce,Pe=ue;break}Pe=Ce}}}var Ie=_.alternate;if(Ie!==null){var Me=Ie.child;if(Me!==null){Ie.child=null;do{var en=Me.sibling;Me.sibling=null,Me=en}while(Me!==null)}}Pe=_}}if((_.subtreeFlags&2064)!==0&&C!==null)C.return=_,Pe=C;else e:for(;Pe!==null;){if(_=Pe,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:tl(9,_,_.return)}var Z=_.sibling;if(Z!==null){Z.return=_.return,Pe=Z;break e}Pe=_.return}}var Y=i.current;for(Pe=Y;Pe!==null;){C=Pe;var re=C.child;if((C.subtreeFlags&2064)!==0&&re!==null)re.return=C,Pe=re;else e:for(C=Y;Pe!==null;){if(U=Pe,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:Bc(9,U)}}catch(Fe){Jt(U,U.return,Fe)}if(U===C){Pe=null;break e}var be=U.sibling;if(be!==null){be.return=U.return,Pe=be;break e}Pe=U.return}}if(pt=y,ui(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(Ui,i)}catch{}p=!0}return p}finally{ut=u,Vr.transition=a}}return!1}function e0(i,a,u){a=Zo(u,a),a=yg(i,a,1),i=hi(i,a,1),a=Jn(),i!==null&&(ei(i,1,a),ar(i,a))}function Jt(i,a,u){if(i.tag===3)e0(i,i,u);else for(;a!==null;){if(a.tag===3){e0(a,i,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(pi===null||!pi.has(p))){i=Zo(u,i),i=vg(a,i,1),a=hi(a,i,1),i=Jn(),a!==null&&(ei(a,1,i),ar(a,i));break}}a=a.return}}function O1(i,a,u){var p=i.pingCache;p!==null&&p.delete(a),a=Jn(),i.pingedLanes|=i.suspendedLanes&u,_n===i&&(Tn&u)===u&&(mn===4||mn===3&&(Tn&130023424)===Tn&&500>Tt()-Th?ro(i,0):jh|=u),ar(i,a)}function t0(i,a){a===0&&((i.mode&1)===0?a=1:(a=Co,Co<<=1,(Co&130023424)===0&&(Co=4194304)));var u=Jn();i=Ds(i,a),i!==null&&(ei(i,a,u),ar(i,u))}function U1(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),t0(i,u)}function B1(i,a){var u=0;switch(i.tag){case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(u=y.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),t0(i,u)}var n0;n0=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||rr.current)ir=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return ir=!1,T1(i,a,u);ir=(i.flags&131072)!==0}else ir=!1,Ut&&(a.flags&1048576)!==0&&Dm(a,Ec,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Oc(i,a),i=a.pendingProps;var y=Ho(a,Ln.current);Qo(a,u),y=oh(null,a,p,i,y,u);var _=ah();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,sr(p)?(_=!0,_c(a)):_=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Zd(a),y.updater=zc,a.stateNode=y,y._reactInternals=a,fh(a,p,i,u),a=xh(null,a,p,!0,_,u)):(a.tag=0,Ut&&_&&$d(a),Kn(null,a,y,u),a=a.child),a;case 16:p=a.elementType;e:{switch(Oc(i,a),i=a.pendingProps,y=p._init,p=y(p._payload),a.type=p,y=a.tag=q1(p),i=Jr(p,i),y){case 0:a=gh(null,a,p,i,u);break e;case 1:a=jg(null,a,p,i,u);break e;case 11:a=Ng(null,a,p,i,u);break e;case 14:a=Sg(null,a,p,Jr(p.type,i),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:Jr(p,y),gh(i,a,p,y,u);case 1:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:Jr(p,y),jg(i,a,p,y,u);case 3:e:{if(Tg(a),i===null)throw Error(t(387));p=a.pendingProps,_=a.memoizedState,y=_.element,qm(i,a),Ac(a,p,null,u);var C=a.memoizedState;if(p=C.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){y=Zo(Error(t(423)),a),a=Pg(i,a,p,u,y);break e}else if(p!==y){y=Zo(Error(t(424)),a),a=Pg(i,a,p,u,y);break e}else for(vr=ai(a.stateNode.containerInfo.firstChild),yr=a,Ut=!0,Kr=null,u=Bm(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ko(),p===y){a=Ls(i,a,u);break e}Kn(i,a,p,u)}a=a.child}return a;case 5:return Wm(a),i===null&&Gd(a),p=a.type,y=a.pendingProps,_=i!==null?i.memoizedProps:null,C=y.children,Ld(p,y)?C=null:_!==null&&Ld(p,_)&&(a.flags|=32),kg(i,a),Kn(i,a,C,u),a.child;case 6:return i===null&&Gd(a),null;case 13:return Ag(i,a,u);case 4:return eh(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=Jo(a,null,p,u):Kn(i,a,p,u),a.child;case 11:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:Jr(p,y),Ng(i,a,p,y,u);case 7:return Kn(i,a,a.pendingProps,u),a.child;case 8:return Kn(i,a,a.pendingProps.children,u),a.child;case 12:return Kn(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,y=a.pendingProps,_=a.memoizedProps,C=y.value,Pt(jc,p._currentValue),p._currentValue=C,_!==null)if(Wr(_.value,C)){if(_.children===y.children&&!rr.current){a=Ls(i,a,u);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var U=_.dependencies;if(U!==null){C=_.child;for(var q=U.firstContext;q!==null;){if(q.context===p){if(_.tag===1){q=Vs(-1,u&-u),q.tag=2;var ie=_.updateQueue;if(ie!==null){ie=ie.shared;var fe=ie.pending;fe===null?q.next=q:(q.next=fe.next,fe.next=q),ie.pending=q}}_.lanes|=u,q=_.alternate,q!==null&&(q.lanes|=u),Qd(_.return,u,a),U.lanes|=u;break}q=q.next}}else if(_.tag===10)C=_.type===a.type?null:_.child;else if(_.tag===18){if(C=_.return,C===null)throw Error(t(341));C.lanes|=u,U=C.alternate,U!==null&&(U.lanes|=u),Qd(C,u,a),C=_.sibling}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===a){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}Kn(i,a,y.children,u),a=a.child}return a;case 9:return y=a.type,p=a.pendingProps.children,Qo(a,u),y=Mr(y),p=p(y),a.flags|=1,Kn(i,a,p,u),a.child;case 14:return p=a.type,y=Jr(p,a.pendingProps),y=Jr(p.type,y),Sg(i,a,p,y,u);case 15:return Eg(i,a,a.type,a.pendingProps,u);case 17:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:Jr(p,y),Oc(i,a),a.tag=1,sr(p)?(i=!0,_c(a)):i=!1,Qo(a,u),gg(a,p,y),fh(a,p,y,u),xh(null,a,p,!0,i,u);case 19:return Rg(i,a,u);case 22:return Cg(i,a,u)}throw Error(t(156,a.tag))};function r0(i,a){return vn(i,a)}function $1(i,a,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(i,a,u,p){return new $1(i,a,u,p)}function Lh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function q1(i){if(typeof i=="function")return Lh(i)?1:0;if(i!=null){if(i=i.$$typeof,i===j)return 11;if(i===Le)return 14}return 2}function yi(i,a){var u=i.alternate;return u===null?(u=Lr(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Qc(i,a,u,p,y,_){var C=2;if(p=i,typeof i=="function")Lh(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case O:return io(u.children,y,_,a);case P:C=8,y|=8;break;case z:return i=Lr(12,u,a,y|2),i.elementType=z,i.lanes=_,i;case V:return i=Lr(13,u,a,y),i.elementType=V,i.lanes=_,i;case me:return i=Lr(19,u,a,y),i.elementType=me,i.lanes=_,i;case Te:return Xc(u,y,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case F:C=10;break e;case k:C=9;break e;case j:C=11;break e;case Le:C=14;break e;case Se:C=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=Lr(C,u,a,y),a.elementType=i,a.type=p,a.lanes=_,a}function io(i,a,u,p){return i=Lr(7,i,p,a),i.lanes=u,i}function Xc(i,a,u,p){return i=Lr(22,i,p,a),i.elementType=Te,i.lanes=u,i.stateNode={isHidden:!1},i}function zh(i,a,u){return i=Lr(6,i,null,a),i.lanes=u,i}function Fh(i,a,u){return a=Lr(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function H1(i,a,u,p,y){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zs(0),this.expirationTimes=Zs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zs(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Oh(i,a,u,p,y,_,C,U,q){return i=new H1(i,a,u,U,q),a===1?(a=1,_===!0&&(a|=8)):a=0,_=Lr(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zd(_),i}function G1(i,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:p==null?null:""+p,children:i,containerInfo:a,implementation:u}}function s0(i){if(!i)return ci;i=i._reactInternals;e:{if(oe(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(sr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(sr(u))return Im(i,u,a)}return a}function i0(i,a,u,p,y,_,C,U,q){return i=Oh(u,p,!0,i,y,_,C,U,q),i.context=s0(null),u=i.current,p=Jn(),y=gi(u),_=Vs(p,y),_.callback=a??null,hi(u,_,y),i.current.lanes=y,ei(i,y,p),ar(i,p),i}function Zc(i,a,u,p){var y=a.current,_=Jn(),C=gi(y);return u=s0(u),a.context===null?a.context=u:a.pendingContext=u,a=Vs(_,C),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=hi(y,a,C),i!==null&&(Xr(i,y,C,_),Pc(i,y,C)),C}function eu(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function o0(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function Uh(i,a){o0(i,a),(i=i.alternate)&&o0(i,a)}function W1(){return null}var a0=typeof reportError=="function"?reportError:function(i){console.error(i)};function Bh(i){this._internalRoot=i}tu.prototype.render=Bh.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Zc(i,a,null,null)},tu.prototype.unmount=Bh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;no(function(){Zc(null,i,null,null)}),a[As]=null}};function tu(i){this._internalRoot=i}tu.prototype.unstable_scheduleHydration=function(i){if(i){var a=tc();i={blockedOn:null,target:i,priority:a};for(var u=0;u<cs.length&&a!==0&&a<cs[u].priority;u++);cs.splice(u,0,i),u===0&&sc(i)}};function $h(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function nu(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function l0(){}function K1(i,a,u,p,y){if(y){if(typeof p=="function"){var _=p;p=function(){var ie=eu(C);_.call(ie)}}var C=i0(a,p,i,0,null,!1,!1,"",l0);return i._reactRootContainer=C,i[As]=C.current,Ba(i.nodeType===8?i.parentNode:i),no(),C}for(;y=i.lastChild;)i.removeChild(y);if(typeof p=="function"){var U=p;p=function(){var ie=eu(q);U.call(ie)}}var q=Oh(i,0,!1,null,null,!1,!1,"",l0);return i._reactRootContainer=q,i[As]=q.current,Ba(i.nodeType===8?i.parentNode:i),no(function(){Zc(a,q,u,p)}),q}function ru(i,a,u,p,y){var _=u._reactRootContainer;if(_){var C=_;if(typeof y=="function"){var U=y;y=function(){var q=eu(C);U.call(q)}}Zc(a,C,i,y)}else C=K1(u,a,i,y,p);return eu(C)}Zl=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=Xs(a.pendingLanes);u!==0&&(ti(a,u|1),ar(a,Tt()),(pt&6)===0&&(na=Tt()+500,ui()))}break;case 13:no(function(){var p=Ds(i,1);if(p!==null){var y=Jn();Xr(p,i,1,y)}}),Uh(i,1)}},ko=function(i){if(i.tag===13){var a=Ds(i,134217728);if(a!==null){var u=Jn();Xr(a,i,134217728,u)}Uh(i,134217728)}},ec=function(i){if(i.tag===13){var a=gi(i),u=Ds(i,a);if(u!==null){var p=Jn();Xr(u,i,a,p)}Uh(i,a)}},tc=function(){return ut},nc=function(i,a){var u=ut;try{return ut=i,a()}finally{ut=u}},as=function(i,a,u){switch(a){case"input":if($t(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==i&&p.form===i.form){var y=bc(p);if(!y)throw Error(t(90));Et(p),$t(p,y)}}}break;case"textarea":hr(i,u);break;case"select":a=u.value,a!=null&&Ht(i,!!u.multiple,a,!1)}},jr=Mh,Ur=no;var J1={usingClientEntryPoint:!1,Events:[Ha,$o,bc,er,Es,Mh]},il={findFiberByHostInstance:Ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y1={bundleType:il.bundleType,version:il.version,rendererPackageName:il.rendererPackageName,rendererConfig:il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=rn(i),i===null?null:i.stateNode},findFiberByHostInstance:il.findFiberByHostInstance||W1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{Ui=su.inject(Y1),pr=su}catch{}}return lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J1,lr.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$h(a))throw Error(t(200));return G1(i,a,null,u)},lr.createRoot=function(i,a){if(!$h(i))throw Error(t(299));var u=!1,p="",y=a0;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Oh(i,1,!1,null,null,u,!1,p,y),i[As]=a.current,Ba(i.nodeType===8?i.parentNode:i),new Bh(a)},lr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=rn(a),i=i===null?null:i.stateNode,i},lr.flushSync=function(i){return no(i)},lr.hydrate=function(i,a,u){if(!nu(a))throw Error(t(200));return ru(null,i,a,!0,u)},lr.hydrateRoot=function(i,a,u){if(!$h(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,y=!1,_="",C=a0;if(u!=null&&(u.unstable_strictMode===!0&&(y=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),a=i0(a,null,i,1,u??null,y,!1,_,C),i[As]=a.current,Ba(i),p)for(i=0;i<p.length;i++)u=p[i],y=u._getVersion,y=y(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,y]:a.mutableSourceEagerHydrationData.push(u,y);return new tu(a)},lr.render=function(i,a,u){if(!nu(a))throw Error(t(200));return ru(null,i,a,!1,u)},lr.unmountComponentAtNode=function(i){if(!nu(i))throw Error(t(40));return i._reactRootContainer?(no(function(){ru(null,null,i,!1,function(){i._reactRootContainer=null,i[As]=null})}),!0):!1},lr.unstable_batchedUpdates=Mh,lr.unstable_renderSubtreeIntoContainer=function(i,a,u,p){if(!nu(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return ru(i,a,u,!1,p)},lr.version="18.3.1-next-f1338f8080-20240426",lr}var g0;function rv(){if(g0)return Gh.exports;g0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gh.exports=i_(),Gh.exports}var x0;function o_(){if(x0)return iu;x0=1;var n=rv();return iu.createRoot=n.createRoot,iu.hydrateRoot=n.hydrateRoot,iu}var a_=o_();const l_=tv(a_);rv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bl(){return bl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},bl.apply(this,arguments)}var wi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(wi||(wi={}));const y0="popstate";function c_(n){n===void 0&&(n={});function e(o,l){let{pathname:c="/",search:d="",hash:m=""}=wo(o.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),pf("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let c=o.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=o.location.href,f=m.indexOf("#");d=f===-1?m:m.slice(0,f)}return d+"#"+(typeof l=="string"?l:ku(l))}function s(o,l){Gu(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return d_(e,t,s,n)}function nn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Gu(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function u_(){return Math.random().toString(36).substr(2,8)}function v0(n,e){return{usr:n.state,key:n.key,idx:e}}function pf(n,e,t,s){return t===void 0&&(t=null),bl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?wo(e):e,{state:t,key:e&&e.key||s||u_()})}function ku(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function wo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function d_(n,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,c=o.history,d=wi.Pop,m=null,f=v();f==null&&(f=0,c.replaceState(bl({},c.state,{idx:f}),""));function v(){return(c.state||{idx:null}).idx}function w(){d=wi.Pop;let A=v(),H=A==null?null:A-f;f=A,m&&m({action:d,location:T.location,delta:H})}function N(A,H){d=wi.Push;let W=pf(T.location,A,H);t&&t(W,A),f=v()+1;let K=v0(W,f),te=T.createHref(W);try{c.pushState(K,"",te)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;o.location.assign(te)}l&&m&&m({action:d,location:T.location,delta:1})}function E(A,H){d=wi.Replace;let W=pf(T.location,A,H);t&&t(W,A),f=v();let K=v0(W,f),te=T.createHref(W);c.replaceState(K,"",te),l&&m&&m({action:d,location:T.location,delta:0})}function I(A){let H=o.location.origin!=="null"?o.location.origin:o.location.href,W=typeof A=="string"?A:ku(A);return W=W.replace(/ $/,"%20"),nn(H,"No window.location.(origin|href) available to create URL for href: "+W),new URL(W,H)}let T={get action(){return d},get location(){return n(o,c)},listen(A){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(y0,w),m=A,()=>{o.removeEventListener(y0,w),m=null}},createHref(A){return e(o,A)},createURL:I,encodeLocation(A){let H=I(A);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:N,replace:E,go(A){return c.go(A)}};return T}var b0;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(b0||(b0={}));function h_(n,e,t){return t===void 0&&(t="/"),f_(n,e,t)}function f_(n,e,t,s){let o=typeof e=="string"?wo(e):e,l=Xf(o.pathname||"/",t);if(l==null)return null;let c=sv(n);p_(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let f=C_(l);d=N_(c[m],f)}return d}function sv(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(nn(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let f=Ni([s,m.relativePath]),v=t.concat(m);l.children&&l.children.length>0&&(nn(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),sv(l.children,e,v,f)),!(l.path==null&&!l.index)&&e.push({path:f,score:w_(f,l.index),routesMeta:v})};return n.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,c);else for(let m of iv(l.path))o(l,c,m)}),e}function iv(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let c=iv(s.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),o&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function p_(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:__(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const m_=/^:[\w-]+$/,g_=3,x_=2,y_=1,v_=10,b_=-2,w0=n=>n==="*";function w_(n,e){let t=n.split("/"),s=t.length;return t.some(w0)&&(s+=b_),e&&(s+=x_),t.filter(o=>!w0(o)).reduce((o,l)=>o+(m_.test(l)?g_:l===""?y_:v_),s)}function __(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function N_(n,e,t){let{routesMeta:s}=n,o={},l="/",c=[];for(let d=0;d<s.length;++d){let m=s[d],f=d===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",w=S_({path:m.relativePath,caseSensitive:m.caseSensitive,end:f},v),N=m.route;if(!w)return null;Object.assign(o,w.params),c.push({params:o,pathname:Ni([l,w.pathname]),pathnameBase:A_(Ni([l,w.pathnameBase])),route:N}),w.pathnameBase!=="/"&&(l=Ni([l,w.pathnameBase]))}return c}function S_(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=E_(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((f,v,w)=>{let{paramName:N,isOptional:E}=v;if(N==="*"){let T=d[w]||"";c=l.slice(0,l.length-T.length).replace(/(.)\/+$/,"$1")}const I=d[w];return E&&!I?f[N]=void 0:f[N]=(I||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:n}}function E_(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Gu(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(s.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function C_(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gu(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Xf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const k_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j_=n=>k_.test(n);function T_(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?wo(n):n,l;if(t)if(j_(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Gu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+t))}t.startsWith("/")?l=_0(t.substring(1),"/"):l=_0(t,e)}else l=e;return{pathname:l,search:I_(s),hash:R_(o)}}function _0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Jh(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function P_(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Zf(n,e){let t=P_(n);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function ep(n,e,t,s){s===void 0&&(s=!1);let o;typeof n=="string"?o=wo(n):(o=bl({},n),nn(!o.pathname||!o.pathname.includes("?"),Jh("?","pathname","search",o)),nn(!o.pathname||!o.pathname.includes("#"),Jh("#","pathname","hash",o)),nn(!o.search||!o.search.includes("#"),Jh("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,d;if(c==null)d=t;else{let w=e.length-1;if(!s&&c.startsWith("..")){let N=c.split("/");for(;N[0]==="..";)N.shift(),w-=1;o.pathname=N.join("/")}d=w>=0?e[w]:"/"}let m=T_(o,d),f=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(f||v)&&(m.pathname+="/"),m}const Ni=n=>n.join("/").replace(/\/\/+/g,"/"),A_=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),I_=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,R_=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function M_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const ov=["post","put","patch","delete"];new Set(ov);const D_=["get",...ov];new Set(D_);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wl(){return wl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},wl.apply(this,arguments)}const tp=D.createContext(null),V_=D.createContext(null),Ri=D.createContext(null),Wu=D.createContext(null),Ns=D.createContext({outlet:null,matches:[],isDataRoute:!1}),av=D.createContext(null);function L_(n,e){let{relative:t}=e===void 0?{}:e;wa()||nn(!1);let{basename:s,navigator:o}=D.useContext(Ri),{hash:l,pathname:c,search:d}=cv(n,{relative:t}),m=c;return s!=="/"&&(m=c==="/"?s:Ni([s,c])),o.createHref({pathname:m,search:d,hash:l})}function wa(){return D.useContext(Wu)!=null}function Mi(){return wa()||nn(!1),D.useContext(Wu).location}function lv(n){D.useContext(Ri).static||D.useLayoutEffect(n)}function is(){let{isDataRoute:n}=D.useContext(Ns);return n?X_():z_()}function z_(){wa()||nn(!1);let n=D.useContext(tp),{basename:e,future:t,navigator:s}=D.useContext(Ri),{matches:o}=D.useContext(Ns),{pathname:l}=Mi(),c=JSON.stringify(Zf(o,t.v7_relativeSplatPath)),d=D.useRef(!1);return lv(()=>{d.current=!0}),D.useCallback(function(f,v){if(v===void 0&&(v={}),!d.current)return;if(typeof f=="number"){s.go(f);return}let w=ep(f,JSON.parse(c),l,v.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Ni([e,w.pathname])),(v.replace?s.replace:s.push)(w,v.state,v)},[e,s,c,l,n])}const F_=D.createContext(null);function O_(n){let e=D.useContext(Ns).outlet;return e&&D.createElement(F_.Provider,{value:n},e)}function np(){let{matches:n}=D.useContext(Ns),e=n[n.length-1];return e?e.params:{}}function cv(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=D.useContext(Ri),{matches:o}=D.useContext(Ns),{pathname:l}=Mi(),c=JSON.stringify(Zf(o,s.v7_relativeSplatPath));return D.useMemo(()=>ep(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function U_(n,e){return B_(n,e)}function B_(n,e,t,s){wa()||nn(!1);let{navigator:o}=D.useContext(Ri),{matches:l}=D.useContext(Ns),c=l[l.length-1],d=c?c.params:{};c&&c.pathname;let m=c?c.pathnameBase:"/";c&&c.route;let f=Mi(),v;if(e){var w;let A=typeof e=="string"?wo(e):e;m==="/"||(w=A.pathname)!=null&&w.startsWith(m)||nn(!1),v=A}else v=f;let N=v.pathname||"/",E=N;if(m!=="/"){let A=m.replace(/^\//,"").split("/");E="/"+N.replace(/^\//,"").split("/").slice(A.length).join("/")}let I=h_(n,{pathname:E}),T=W_(I&&I.map(A=>Object.assign({},A,{params:Object.assign({},d,A.params),pathname:Ni([m,o.encodeLocation?o.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?m:Ni([m,o.encodeLocation?o.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),l,t,s);return e&&T?D.createElement(Wu.Provider,{value:{location:wl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:wi.Pop}},T):T}function $_(){let n=Q_(),e=M_(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:o},t):null,null)}const q_=D.createElement($_,null);class H_ extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?D.createElement(Ns.Provider,{value:this.props.routeContext},D.createElement(av.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function G_(n){let{routeContext:e,match:t,children:s}=n,o=D.useContext(tp);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),D.createElement(Ns.Provider,{value:e},s)}function W_(n,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let v=c.findIndex(w=>w.route.id&&(d==null?void 0:d[w.route.id])!==void 0);v>=0||nn(!1),c=c.slice(0,Math.min(c.length,v+1))}let m=!1,f=-1;if(t&&s&&s.v7_partialHydration)for(let v=0;v<c.length;v++){let w=c[v];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(f=v),w.route.id){let{loaderData:N,errors:E}=t,I=w.route.loader&&N[w.route.id]===void 0&&(!E||E[w.route.id]===void 0);if(w.route.lazy||I){m=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((v,w,N)=>{let E,I=!1,T=null,A=null;t&&(E=d&&w.route.id?d[w.route.id]:void 0,T=w.route.errorElement||q_,m&&(f<0&&N===0?(Z_("route-fallback"),I=!0,A=null):f===N&&(I=!0,A=w.route.hydrateFallbackElement||null)));let H=e.concat(c.slice(0,N+1)),W=()=>{let K;return E?K=T:I?K=A:w.route.Component?K=D.createElement(w.route.Component,null):w.route.element?K=w.route.element:K=v,D.createElement(G_,{match:w,routeContext:{outlet:v,matches:H,isDataRoute:t!=null},children:K})};return t&&(w.route.ErrorBoundary||w.route.errorElement||N===0)?D.createElement(H_,{location:t.location,revalidation:t.revalidation,component:T,error:E,children:W(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):W()},null)}var uv=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(uv||{}),dv=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(dv||{});function K_(n){let e=D.useContext(tp);return e||nn(!1),e}function J_(n){let e=D.useContext(V_);return e||nn(!1),e}function Y_(n){let e=D.useContext(Ns);return e||nn(!1),e}function hv(n){let e=Y_(),t=e.matches[e.matches.length-1];return t.route.id||nn(!1),t.route.id}function Q_(){var n;let e=D.useContext(av),t=J_(),s=hv();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function X_(){let{router:n}=K_(uv.UseNavigateStable),e=hv(dv.UseNavigateStable),t=D.useRef(!1);return lv(()=>{t.current=!0}),D.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,wl({fromRouteId:e},l)))},[n,e])}const N0={};function Z_(n,e,t){N0[n]||(N0[n]=!0)}function eN(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function tN(n){let{to:e,replace:t,state:s,relative:o}=n;wa()||nn(!1);let{future:l,static:c}=D.useContext(Ri),{matches:d}=D.useContext(Ns),{pathname:m}=Mi(),f=is(),v=ep(e,Zf(d,l.v7_relativeSplatPath),m,o==="path"),w=JSON.stringify(v);return D.useEffect(()=>f(JSON.parse(w),{replace:t,state:s,relative:o}),[f,w,o,t,s]),null}function fv(n){return O_(n.context)}function Vt(n){nn(!1)}function nN(n){let{basename:e="/",children:t=null,location:s,navigationType:o=wi.Pop,navigator:l,static:c=!1,future:d}=n;wa()&&nn(!1);let m=e.replace(/^\/*/,"/"),f=D.useMemo(()=>({basename:m,navigator:l,static:c,future:wl({v7_relativeSplatPath:!1},d)}),[m,d,l,c]);typeof s=="string"&&(s=wo(s));let{pathname:v="/",search:w="",hash:N="",state:E=null,key:I="default"}=s,T=D.useMemo(()=>{let A=Xf(v,m);return A==null?null:{location:{pathname:A,search:w,hash:N,state:E,key:I},navigationType:o}},[m,v,w,N,E,I,o]);return T==null?null:D.createElement(Ri.Provider,{value:f},D.createElement(Wu.Provider,{children:t,value:T}))}function rN(n){let{children:e,location:t}=n;return U_(mf(e),t)}new Promise(()=>{});function mf(n,e){e===void 0&&(e=[]);let t=[];return D.Children.forEach(n,(s,o)=>{if(!D.isValidElement(s))return;let l=[...e,o];if(s.type===D.Fragment){t.push.apply(t,mf(s.props.children,l));return}s.type!==Vt&&nn(!1),!s.props.index||!s.props.children||nn(!1);let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=mf(s.props.children,l)),t.push(c)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gf(){return gf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},gf.apply(this,arguments)}function sN(n,e){if(n==null)return{};var t={},s=Object.keys(n),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function iN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function oN(n,e){return n.button===0&&(!e||e==="_self")&&!iN(n)}const aN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lN="6";try{window.__reactRouterVersion=lN}catch{}const cN="startTransition",S0=n_[cN];function uN(n){let{basename:e,children:t,future:s,window:o}=n,l=D.useRef();l.current==null&&(l.current=c_({window:o,v5Compat:!0}));let c=l.current,[d,m]=D.useState({action:c.action,location:c.location}),{v7_startTransition:f}=s||{},v=D.useCallback(w=>{f&&S0?S0(()=>m(w)):m(w)},[m,f]);return D.useLayoutEffect(()=>c.listen(v),[c,v]),D.useEffect(()=>eN(s),[s]),D.createElement(nN,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:c,future:s})}const dN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=D.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:c,state:d,target:m,to:f,preventScrollReset:v,viewTransition:w}=e,N=sN(e,aN),{basename:E}=D.useContext(Ri),I,T=!1;if(typeof f=="string"&&hN.test(f)&&(I=f,dN))try{let K=new URL(window.location.href),te=f.startsWith("//")?new URL(K.protocol+f):new URL(f),pe=Xf(te.pathname,E);te.origin===K.origin&&pe!=null?f=pe+te.search+te.hash:T=!0}catch{}let A=L_(f,{relative:o}),H=fN(f,{replace:c,state:d,target:m,preventScrollReset:v,relative:o,viewTransition:w});function W(K){s&&s(K),K.defaultPrevented||H(K)}return D.createElement("a",gf({},N,{href:I||A,onClick:T||l?s:W,ref:t,target:m}))});var E0;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(E0||(E0={}));var C0;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(C0||(C0={}));function fN(n,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:c,viewTransition:d}=e===void 0?{}:e,m=is(),f=Mi(),v=cv(n,{relative:c});return D.useCallback(w=>{if(oN(w,t)){w.preventDefault();let N=s!==void 0?s:ku(f)===ku(v);m(n,{replace:N,state:o,preventScrollReset:l,relative:c,viewTransition:d})}},[f,m,v,s,o,t,n,l,c,d])}new Date().toISOString(),new Date().toISOString();const Zr={id:"guest",name:"Guest",email:"",isMember:!1,membershipTier:"none",loyaltyPoints:0,affiliateCode:"",affiliateEarnings:0,wishlist:[],notifications:[],isAdmin:!1,socialRewards:{},shippingAddress:{street:"",suburb:"",city:"",province:"",postalCode:""}},pN=[{id:"s1",title:"Summer Tech Sale",products:["1761729812469"],discountPercentage:15,endsAt:new Date(Date.now()+864e5*2).toISOString(),image:"https://picsum.photos/800/400?random=20"}];var k0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},mN=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],m=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},mv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,m=o+2<n.length,f=m?n[o+2]:0,v=l>>2,w=(l&3)<<4|d>>4;let N=(d&15)<<2|f>>6,E=f&63;m||(E=64,c||(N=64)),s.push(t[v],t[w],t[N],t[E])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(pv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):mN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const f=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||f==null||w==null)throw new gN;const N=l<<2|d>>4;if(s.push(N),f!==64){const E=d<<4&240|f>>2;if(s.push(E),w!==64){const I=f<<6&192|w;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};let gN=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};const xN=function(n){const e=pv(n);return mv.encodeByteArray(e,!0)},gv=function(n){return xN(n).replace(/\./g,"")},yN=function(n){try{return mv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=()=>vN().__FIREBASE_DEFAULTS__,wN=()=>{if(typeof process>"u"||typeof k0>"u")return;const n=k0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_N=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&yN(n[1]);return e&&JSON.parse(e)},NN=()=>{try{return bN()||wN()||_N()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xv=()=>{var n;return(n=NN())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function EN(){try{return typeof indexedDB=="object"}catch{return!1}}function CN(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="FirebaseError";let rp=class yv extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=kN,Object.setPrototypeOf(this,yv.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vv.prototype.create)}},vv=class{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?jN(l,s):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new rp(o,d,s)}};function jN(n,e){return n.replace(TN,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const TN=/\{\$([^}]+)}/g;function xf(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(j0(l)&&j0(c)){if(!xf(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function j0(n){return n!==null&&typeof n=="object"}let ju=class{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new SN;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IN(e))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lo){return this.instances.has(e)}getOptions(e=lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:AN(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=lo){return this.component?this.component.multipleInstances?e:lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AN(n){return n===lo?void 0:n}function IN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new PN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(zt||(zt={}));const MN={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},DN=zt.INFO,VN={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},LN=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=VN[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let zN=class{constructor(e){this.name=e,this._logLevel=DN,this._logHandler=LN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...e),this._logHandler(this,zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...e),this._logHandler(this,zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,zt.INFO,...e),this._logHandler(this,zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,zt.WARN,...e),this._logHandler(this,zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...e),this._logHandler(this,zt.ERROR,...e)}};const FN=(n,e)=>e.some(t=>n instanceof t);let T0,P0;function ON(){return T0||(T0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UN(){return P0||(P0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bv=new WeakMap,yf=new WeakMap,wv=new WeakMap,Yh=new WeakMap,sp=new WeakMap;function BN(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Si(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&bv.set(t,n)}).catch(()=>{}),sp.set(e,n),e}function $N(n){if(yf.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});yf.set(n,e)}let vf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return yf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Si(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function qN(n){vf=n(vf)}function HN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Qh(this),e,...t);return wv.set(s,e.sort?e.sort():[e]),Si(s)}:UN().includes(n)?function(...e){return n.apply(Qh(this),e),Si(bv.get(this))}:function(...e){return Si(n.apply(Qh(this),e))}}function GN(n){return typeof n=="function"?HN(n):(n instanceof IDBTransaction&&$N(n),FN(n,ON())?new Proxy(n,vf):n)}function Si(n){if(n instanceof IDBRequest)return BN(n);if(Yh.has(n))return Yh.get(n);const e=GN(n);return e!==n&&(Yh.set(n,e),sp.set(e,n)),e}const Qh=n=>sp.get(n);function WN(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=Si(c);return s&&c.addEventListener("upgradeneeded",m=>{s(Si(c.result),m.oldVersion,m.newVersion,Si(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",f=>o(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const KN=["get","getKey","getAll","getAllKeys","count"],JN=["put","add","delete","clear"],Xh=new Map;function A0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Xh.get(e))return Xh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=JN.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||KN.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,o?"readwrite":"readonly");let f=m.store;return s&&(f=f.index(d.shift())),(await Promise.all([f[t](...d),o&&m.done]))[0]};return Xh.set(e,l),l}qN(n=>({...n,get:(e,t,s)=>A0(e,t)||n.get(e,t,s),has:(e,t)=>!!A0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(QN(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function QN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bf="@firebase/app",I0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new zN("@firebase/app"),XN="@firebase/app-compat",ZN="@firebase/analytics-compat",e2="@firebase/analytics",t2="@firebase/app-check-compat",n2="@firebase/app-check",r2="@firebase/auth",s2="@firebase/auth-compat",i2="@firebase/database",o2="@firebase/data-connect",a2="@firebase/database-compat",l2="@firebase/functions",c2="@firebase/functions-compat",u2="@firebase/installations",d2="@firebase/installations-compat",h2="@firebase/messaging",f2="@firebase/messaging-compat",p2="@firebase/performance",m2="@firebase/performance-compat",g2="@firebase/remote-config",x2="@firebase/remote-config-compat",y2="@firebase/storage",v2="@firebase/storage-compat",b2="@firebase/firestore",w2="@firebase/vertexai-preview",_2="@firebase/firestore-compat",N2="firebase",S2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="[DEFAULT]",E2={[bf]:"fire-core",[XN]:"fire-core-compat",[e2]:"fire-analytics",[ZN]:"fire-analytics-compat",[n2]:"fire-app-check",[t2]:"fire-app-check-compat",[r2]:"fire-auth",[s2]:"fire-auth-compat",[i2]:"fire-rtdb",[o2]:"fire-data-connect",[a2]:"fire-rtdb-compat",[l2]:"fire-fn",[c2]:"fire-fn-compat",[u2]:"fire-iid",[d2]:"fire-iid-compat",[h2]:"fire-fcm",[f2]:"fire-fcm-compat",[p2]:"fire-perf",[m2]:"fire-perf-compat",[g2]:"fire-rc",[x2]:"fire-rc-compat",[y2]:"fire-gcs",[v2]:"fire-gcs-compat",[b2]:"fire-fst",[_2]:"fire-fst-compat",[w2]:"fire-vertex","fire-js":"fire-js",[N2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=new Map,C2=new Map,_f=new Map;function R0(n,e){try{n.container.addComponent(e)}catch(t){Gs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _l(n){const e=n.name;if(_f.has(e))return Gs.debug(`There were multiple attempts to register component ${e}.`),!1;_f.set(e,n);for(const t of Tu.values())R0(t,n);for(const t of C2.values())R0(t,n);return!0}function _v(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new vv("app","Firebase",k2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ju("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=S2;function Sv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:wf,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Ei.create("bad-app-name",{appName:String(o)});if(t||(t=xv()),!t)throw Ei.create("no-options");const l=Tu.get(o);if(l){if(xf(t,l.options)&&xf(s,l.config))return l;throw Ei.create("duplicate-app",{appName:o})}const c=new RN(o);for(const m of _f.values())c.addComponent(m);const d=new j2(t,s,c);return Tu.set(o,d),d}function Ev(n=wf){const e=Tu.get(n);if(!e&&n===wf&&xv())return Sv();if(!e)throw Ei.create("no-app",{appName:n});return e}function Ci(n,e,t){var s;let o=(s=E2[n])!==null&&s!==void 0?s:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gs.warn(d.join(" "));return}_l(new ju(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="firebase-heartbeat-database",P2=1,Nl="firebase-heartbeat-store";let Zh=null;function Cv(){return Zh||(Zh=WN(T2,P2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ei.create("idb-open",{originalErrorMessage:n.message})})),Zh}async function A2(n){try{const t=(await Cv()).transaction(Nl),s=await t.objectStore(Nl).get(kv(n));return await t.done,s}catch(e){if(e instanceof rp)Gs.warn(e.message);else{const t=Ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gs.warn(t.message)}}}async function M0(n,e){try{const s=(await Cv()).transaction(Nl,"readwrite");await s.objectStore(Nl).put(e,kv(n)),await s.done}catch(t){if(t instanceof rp)Gs.warn(t.message);else{const s=Ei.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Gs.warn(s.message)}}}function kv(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=1024,R2=720*60*60*1e3;class M2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new V2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=D0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=R2}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Gs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=D0(),{heartbeatsToSend:s,unsentEntries:o}=D2(this._heartbeatsCache.heartbeats),l=gv(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Gs.warn(t),""}}}function D0(){return new Date().toISOString().substring(0,10)}function D2(n,e=I2){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),V0(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),V0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class V2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EN()?CN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await A2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return M0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return M0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function V0(n){return gv(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(n){_l(new ju("platform-logger",e=>new YN(e),"PRIVATE")),_l(new ju("heartbeat",e=>new M2(e),"PRIVATE")),Ci(bf,I0,n),Ci(bf,I0,"esm2017"),Ci("fire-js","")}L2("");var z2="firebase",F2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ci(z2,F2,"app");var L0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},O2=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],m=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Tv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,m=o+2<n.length,f=m?n[o+2]:0,v=l>>2,w=(l&3)<<4|d>>4;let N=(d&15)<<2|f>>6,E=f&63;m||(E=64,c||(N=64)),s.push(t[v],t[w],t[N],t[E])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):O2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const f=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||f==null||w==null)throw new U2;const N=l<<2|d>>4;if(s.push(N),f!==64){const E=d<<4&240|f>>2;if(s.push(E),w!==64){const I=f<<6&192|w;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};let U2=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};const B2=function(n){const e=jv(n);return Tv.encodeByteArray(e,!0)},z0=function(n){return B2(n).replace(/\./g,"")},$2=function(n){try{return Tv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=()=>q2().__FIREBASE_DEFAULTS__,G2=()=>{if(typeof process>"u"||typeof L0>"u")return;const n=L0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},W2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&$2(n[1]);return e&&JSON.parse(e)},Pv=()=>{try{return H2()||G2()||W2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},K2=n=>{var e,t;return(t=(e=Pv())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},J2=n=>{const e=K2(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[z0(JSON.stringify(t)),z0(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function X2(){var n;const e=(n=Pv())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Z2(){return!X2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="FirebaseError";let Av=class Iv extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=eS,Object.setPrototypeOf(this,Iv.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tS.prototype.create)}},tS=class{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?nS(l,s):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Av(o,d,s)}};function nS(n,e){return n.replace(rS,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const rS=/\{\$([^}]+)}/g;function Rv(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(F0(l)&&F0(c)){if(!Rv(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function F0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(n){return n&&n._delegate?n._delegate:n}let sS=class{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(mt||(mt={}));const iS={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},oS=mt.INFO,aS={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},lS=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=aS[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cS{constructor(e){this.name=e,this._logLevel=oS,this._logHandler=lS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}}var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var po,Mv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,P){function z(){}z.prototype=P.prototype,O.D=P.prototype,O.prototype=new z,O.prototype.constructor=O,O.C=function(F,k,j){for(var V=Array(arguments.length-2),me=2;me<arguments.length;me++)V[me-2]=arguments[me];return P.prototype[k].apply(F,V)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,P,z){z||(z=0);var F=Array(16);if(typeof P=="string")for(var k=0;16>k;++k)F[k]=P.charCodeAt(z++)|P.charCodeAt(z++)<<8|P.charCodeAt(z++)<<16|P.charCodeAt(z++)<<24;else for(k=0;16>k;++k)F[k]=P[z++]|P[z++]<<8|P[z++]<<16|P[z++]<<24;P=O.g[0],z=O.g[1],k=O.g[2];var j=O.g[3],V=P+(j^z&(k^j))+F[0]+3614090360&4294967295;P=z+(V<<7&4294967295|V>>>25),V=j+(k^P&(z^k))+F[1]+3905402710&4294967295,j=P+(V<<12&4294967295|V>>>20),V=k+(z^j&(P^z))+F[2]+606105819&4294967295,k=j+(V<<17&4294967295|V>>>15),V=z+(P^k&(j^P))+F[3]+3250441966&4294967295,z=k+(V<<22&4294967295|V>>>10),V=P+(j^z&(k^j))+F[4]+4118548399&4294967295,P=z+(V<<7&4294967295|V>>>25),V=j+(k^P&(z^k))+F[5]+1200080426&4294967295,j=P+(V<<12&4294967295|V>>>20),V=k+(z^j&(P^z))+F[6]+2821735955&4294967295,k=j+(V<<17&4294967295|V>>>15),V=z+(P^k&(j^P))+F[7]+4249261313&4294967295,z=k+(V<<22&4294967295|V>>>10),V=P+(j^z&(k^j))+F[8]+1770035416&4294967295,P=z+(V<<7&4294967295|V>>>25),V=j+(k^P&(z^k))+F[9]+2336552879&4294967295,j=P+(V<<12&4294967295|V>>>20),V=k+(z^j&(P^z))+F[10]+4294925233&4294967295,k=j+(V<<17&4294967295|V>>>15),V=z+(P^k&(j^P))+F[11]+2304563134&4294967295,z=k+(V<<22&4294967295|V>>>10),V=P+(j^z&(k^j))+F[12]+1804603682&4294967295,P=z+(V<<7&4294967295|V>>>25),V=j+(k^P&(z^k))+F[13]+4254626195&4294967295,j=P+(V<<12&4294967295|V>>>20),V=k+(z^j&(P^z))+F[14]+2792965006&4294967295,k=j+(V<<17&4294967295|V>>>15),V=z+(P^k&(j^P))+F[15]+1236535329&4294967295,z=k+(V<<22&4294967295|V>>>10),V=P+(k^j&(z^k))+F[1]+4129170786&4294967295,P=z+(V<<5&4294967295|V>>>27),V=j+(z^k&(P^z))+F[6]+3225465664&4294967295,j=P+(V<<9&4294967295|V>>>23),V=k+(P^z&(j^P))+F[11]+643717713&4294967295,k=j+(V<<14&4294967295|V>>>18),V=z+(j^P&(k^j))+F[0]+3921069994&4294967295,z=k+(V<<20&4294967295|V>>>12),V=P+(k^j&(z^k))+F[5]+3593408605&4294967295,P=z+(V<<5&4294967295|V>>>27),V=j+(z^k&(P^z))+F[10]+38016083&4294967295,j=P+(V<<9&4294967295|V>>>23),V=k+(P^z&(j^P))+F[15]+3634488961&4294967295,k=j+(V<<14&4294967295|V>>>18),V=z+(j^P&(k^j))+F[4]+3889429448&4294967295,z=k+(V<<20&4294967295|V>>>12),V=P+(k^j&(z^k))+F[9]+568446438&4294967295,P=z+(V<<5&4294967295|V>>>27),V=j+(z^k&(P^z))+F[14]+3275163606&4294967295,j=P+(V<<9&4294967295|V>>>23),V=k+(P^z&(j^P))+F[3]+4107603335&4294967295,k=j+(V<<14&4294967295|V>>>18),V=z+(j^P&(k^j))+F[8]+1163531501&4294967295,z=k+(V<<20&4294967295|V>>>12),V=P+(k^j&(z^k))+F[13]+2850285829&4294967295,P=z+(V<<5&4294967295|V>>>27),V=j+(z^k&(P^z))+F[2]+4243563512&4294967295,j=P+(V<<9&4294967295|V>>>23),V=k+(P^z&(j^P))+F[7]+1735328473&4294967295,k=j+(V<<14&4294967295|V>>>18),V=z+(j^P&(k^j))+F[12]+2368359562&4294967295,z=k+(V<<20&4294967295|V>>>12),V=P+(z^k^j)+F[5]+4294588738&4294967295,P=z+(V<<4&4294967295|V>>>28),V=j+(P^z^k)+F[8]+2272392833&4294967295,j=P+(V<<11&4294967295|V>>>21),V=k+(j^P^z)+F[11]+1839030562&4294967295,k=j+(V<<16&4294967295|V>>>16),V=z+(k^j^P)+F[14]+4259657740&4294967295,z=k+(V<<23&4294967295|V>>>9),V=P+(z^k^j)+F[1]+2763975236&4294967295,P=z+(V<<4&4294967295|V>>>28),V=j+(P^z^k)+F[4]+1272893353&4294967295,j=P+(V<<11&4294967295|V>>>21),V=k+(j^P^z)+F[7]+4139469664&4294967295,k=j+(V<<16&4294967295|V>>>16),V=z+(k^j^P)+F[10]+3200236656&4294967295,z=k+(V<<23&4294967295|V>>>9),V=P+(z^k^j)+F[13]+681279174&4294967295,P=z+(V<<4&4294967295|V>>>28),V=j+(P^z^k)+F[0]+3936430074&4294967295,j=P+(V<<11&4294967295|V>>>21),V=k+(j^P^z)+F[3]+3572445317&4294967295,k=j+(V<<16&4294967295|V>>>16),V=z+(k^j^P)+F[6]+76029189&4294967295,z=k+(V<<23&4294967295|V>>>9),V=P+(z^k^j)+F[9]+3654602809&4294967295,P=z+(V<<4&4294967295|V>>>28),V=j+(P^z^k)+F[12]+3873151461&4294967295,j=P+(V<<11&4294967295|V>>>21),V=k+(j^P^z)+F[15]+530742520&4294967295,k=j+(V<<16&4294967295|V>>>16),V=z+(k^j^P)+F[2]+3299628645&4294967295,z=k+(V<<23&4294967295|V>>>9),V=P+(k^(z|~j))+F[0]+4096336452&4294967295,P=z+(V<<6&4294967295|V>>>26),V=j+(z^(P|~k))+F[7]+1126891415&4294967295,j=P+(V<<10&4294967295|V>>>22),V=k+(P^(j|~z))+F[14]+2878612391&4294967295,k=j+(V<<15&4294967295|V>>>17),V=z+(j^(k|~P))+F[5]+4237533241&4294967295,z=k+(V<<21&4294967295|V>>>11),V=P+(k^(z|~j))+F[12]+1700485571&4294967295,P=z+(V<<6&4294967295|V>>>26),V=j+(z^(P|~k))+F[3]+2399980690&4294967295,j=P+(V<<10&4294967295|V>>>22),V=k+(P^(j|~z))+F[10]+4293915773&4294967295,k=j+(V<<15&4294967295|V>>>17),V=z+(j^(k|~P))+F[1]+2240044497&4294967295,z=k+(V<<21&4294967295|V>>>11),V=P+(k^(z|~j))+F[8]+1873313359&4294967295,P=z+(V<<6&4294967295|V>>>26),V=j+(z^(P|~k))+F[15]+4264355552&4294967295,j=P+(V<<10&4294967295|V>>>22),V=k+(P^(j|~z))+F[6]+2734768916&4294967295,k=j+(V<<15&4294967295|V>>>17),V=z+(j^(k|~P))+F[13]+1309151649&4294967295,z=k+(V<<21&4294967295|V>>>11),V=P+(k^(z|~j))+F[4]+4149444226&4294967295,P=z+(V<<6&4294967295|V>>>26),V=j+(z^(P|~k))+F[11]+3174756917&4294967295,j=P+(V<<10&4294967295|V>>>22),V=k+(P^(j|~z))+F[2]+718787259&4294967295,k=j+(V<<15&4294967295|V>>>17),V=z+(j^(k|~P))+F[9]+3951481745&4294967295,O.g[0]=O.g[0]+P&4294967295,O.g[1]=O.g[1]+(k+(V<<21&4294967295|V>>>11))&4294967295,O.g[2]=O.g[2]+k&4294967295,O.g[3]=O.g[3]+j&4294967295}s.prototype.u=function(O,P){P===void 0&&(P=O.length);for(var z=P-this.blockSize,F=this.B,k=this.h,j=0;j<P;){if(k==0)for(;j<=z;)o(this,O,j),j+=this.blockSize;if(typeof O=="string"){for(;j<P;)if(F[k++]=O.charCodeAt(j++),k==this.blockSize){o(this,F),k=0;break}}else for(;j<P;)if(F[k++]=O[j++],k==this.blockSize){o(this,F),k=0;break}}this.h=k,this.o+=P},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var P=1;P<O.length-8;++P)O[P]=0;var z=8*this.o;for(P=O.length-8;P<O.length;++P)O[P]=z&255,z/=256;for(this.u(O),O=Array(16),P=z=0;4>P;++P)for(var F=0;32>F;F+=8)O[z++]=this.g[P]>>>F&255;return O};function l(O,P){var z=d;return Object.prototype.hasOwnProperty.call(z,O)?z[O]:z[O]=P(O)}function c(O,P){this.h=P;for(var z=[],F=!0,k=O.length-1;0<=k;k--){var j=O[k]|0;F&&j==P||(z[k]=j,F=!1)}this.g=z}var d={};function m(O){return-128<=O&&128>O?l(O,function(P){return new c([P|0],0>P?-1:0)}):new c([O|0],0>O?-1:0)}function f(O){if(isNaN(O)||!isFinite(O))return w;if(0>O)return A(f(-O));for(var P=[],z=1,F=0;O>=z;F++)P[F]=O/z|0,z*=4294967296;return new c(P,0)}function v(O,P){if(O.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(O.charAt(0)=="-")return A(v(O.substring(1),P));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var z=f(Math.pow(P,8)),F=w,k=0;k<O.length;k+=8){var j=Math.min(8,O.length-k),V=parseInt(O.substring(k,k+j),P);8>j?(j=f(Math.pow(P,j)),F=F.j(j).add(f(V))):(F=F.j(z),F=F.add(f(V)))}return F}var w=m(0),N=m(1),E=m(16777216);n=c.prototype,n.m=function(){if(T(this))return-A(this).m();for(var O=0,P=1,z=0;z<this.g.length;z++){var F=this.i(z);O+=(0<=F?F:4294967296+F)*P,P*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(I(this))return"0";if(T(this))return"-"+A(this).toString(O);for(var P=f(Math.pow(O,6)),z=this,F="";;){var k=te(z,P).g;z=H(z,k.j(P));var j=((0<z.g.length?z.g[0]:z.h)>>>0).toString(O);if(z=k,I(z))return j+F;for(;6>j.length;)j="0"+j;F=j+F}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function I(O){if(O.h!=0)return!1;for(var P=0;P<O.g.length;P++)if(O.g[P]!=0)return!1;return!0}function T(O){return O.h==-1}n.l=function(O){return O=H(this,O),T(O)?-1:I(O)?0:1};function A(O){for(var P=O.g.length,z=[],F=0;F<P;F++)z[F]=~O.g[F];return new c(z,~O.h).add(N)}n.abs=function(){return T(this)?A(this):this},n.add=function(O){for(var P=Math.max(this.g.length,O.g.length),z=[],F=0,k=0;k<=P;k++){var j=F+(this.i(k)&65535)+(O.i(k)&65535),V=(j>>>16)+(this.i(k)>>>16)+(O.i(k)>>>16);F=V>>>16,j&=65535,V&=65535,z[k]=V<<16|j}return new c(z,z[z.length-1]&-2147483648?-1:0)};function H(O,P){return O.add(A(P))}n.j=function(O){if(I(this)||I(O))return w;if(T(this))return T(O)?A(this).j(A(O)):A(A(this).j(O));if(T(O))return A(this.j(A(O)));if(0>this.l(E)&&0>O.l(E))return f(this.m()*O.m());for(var P=this.g.length+O.g.length,z=[],F=0;F<2*P;F++)z[F]=0;for(F=0;F<this.g.length;F++)for(var k=0;k<O.g.length;k++){var j=this.i(F)>>>16,V=this.i(F)&65535,me=O.i(k)>>>16,Le=O.i(k)&65535;z[2*F+2*k]+=V*Le,W(z,2*F+2*k),z[2*F+2*k+1]+=j*Le,W(z,2*F+2*k+1),z[2*F+2*k+1]+=V*me,W(z,2*F+2*k+1),z[2*F+2*k+2]+=j*me,W(z,2*F+2*k+2)}for(F=0;F<P;F++)z[F]=z[2*F+1]<<16|z[2*F];for(F=P;F<2*P;F++)z[F]=0;return new c(z,0)};function W(O,P){for(;(O[P]&65535)!=O[P];)O[P+1]+=O[P]>>>16,O[P]&=65535,P++}function K(O,P){this.g=O,this.h=P}function te(O,P){if(I(P))throw Error("division by zero");if(I(O))return new K(w,w);if(T(O))return P=te(A(O),P),new K(A(P.g),A(P.h));if(T(P))return P=te(O,A(P)),new K(A(P.g),P.h);if(30<O.g.length){if(T(O)||T(P))throw Error("slowDivide_ only works with positive integers.");for(var z=N,F=P;0>=F.l(O);)z=pe(z),F=pe(F);var k=J(z,1),j=J(F,1);for(F=J(F,2),z=J(z,2);!I(F);){var V=j.add(F);0>=V.l(O)&&(k=k.add(z),j=V),F=J(F,1),z=J(z,1)}return P=H(O,k.j(P)),new K(k,P)}for(k=w;0<=O.l(P);){for(z=Math.max(1,Math.floor(O.m()/P.m())),F=Math.ceil(Math.log(z)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),j=f(z),V=j.j(P);T(V)||0<V.l(O);)z-=F,j=f(z),V=j.j(P);I(j)&&(j=N),k=k.add(j),O=H(O,V)}return new K(k,O)}n.A=function(O){return te(this,O).h},n.and=function(O){for(var P=Math.max(this.g.length,O.g.length),z=[],F=0;F<P;F++)z[F]=this.i(F)&O.i(F);return new c(z,this.h&O.h)},n.or=function(O){for(var P=Math.max(this.g.length,O.g.length),z=[],F=0;F<P;F++)z[F]=this.i(F)|O.i(F);return new c(z,this.h|O.h)},n.xor=function(O){for(var P=Math.max(this.g.length,O.g.length),z=[],F=0;F<P;F++)z[F]=this.i(F)^O.i(F);return new c(z,this.h^O.h)};function pe(O){for(var P=O.g.length+1,z=[],F=0;F<P;F++)z[F]=O.i(F)<<1|O.i(F-1)>>>31;return new c(z,O.h)}function J(O,P){var z=P>>5;P%=32;for(var F=O.g.length-z,k=[],j=0;j<F;j++)k[j]=0<P?O.i(j+z)>>>P|O.i(j+z+1)<<32-P:O.i(j+z);return new c(k,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Mv=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=v,po=c}).apply(typeof O0<"u"?O0:typeof self<"u"?self:typeof window<"u"?window:{});var ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dv,cl,Vv,xu,Nf,Lv,zv,Fv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,b,S){return h==Array.prototype||h==Object.prototype||(h[b]=S.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ou=="object"&&ou];for(var b=0;b<h.length;++b){var S=h[b];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=t(this);function o(h,b){if(b)e:{var S=s;h=h.split(".");for(var R=0;R<h.length-1;R++){var X=h[R];if(!(X in S))break e;S=S[X]}h=h[h.length-1],R=S[h],b=b(R),b!=R&&b!=null&&e(S,h,{configurable:!0,writable:!0,value:b})}}function l(h,b){h instanceof String&&(h+="");var S=0,R=!1,X={next:function(){if(!R&&S<h.length){var ae=S++;return{value:b(ae,h[ae]),done:!1}}return R=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}o("Array.prototype.values",function(h){return h||function(){return l(this,function(b,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var b=typeof h;return b=b!="object"?b:h?Array.isArray(h)?"array":b:"null",b=="array"||b=="object"&&typeof h.length=="number"}function f(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function v(h,b,S){return h.call.apply(h.bind,arguments)}function w(h,b,S){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,R),h.apply(b,X)}}return function(){return h.apply(b,arguments)}}function N(h,b,S){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,N.apply(null,arguments)}function E(h,b){var S=Array.prototype.slice.call(arguments,1);return function(){var R=S.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function I(h,b){function S(){}S.prototype=b.prototype,h.aa=b.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(R,X,ae){for(var we=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)we[vt-2]=arguments[vt];return b.prototype[X].apply(R,we)}}function T(h){const b=h.length;if(0<b){const S=Array(b);for(let R=0;R<b;R++)S[R]=h[R];return S}return[]}function A(h,b){for(let S=1;S<arguments.length;S++){const R=arguments[S];if(m(R)){const X=h.length||0,ae=R.length||0;h.length=X+ae;for(let we=0;we<ae;we++)h[X+we]=R[we]}else h.push(R)}}class H{constructor(b,S){this.i=b,this.j=S,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function W(h){return/^[\s\xa0]*$/.test(h)}function K(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function te(h){return te[" "](h),h}te[" "]=function(){};var pe=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function J(h,b,S){for(const R in h)b.call(S,h[R],R,h)}function O(h,b){for(const S in h)b.call(void 0,h[S],S,h)}function P(h){const b={};for(const S in h)b[S]=h[S];return b}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(h,b){let S,R;for(let X=1;X<arguments.length;X++){R=arguments[X];for(S in R)h[S]=R[S];for(let ae=0;ae<z.length;ae++)S=z[ae],Object.prototype.hasOwnProperty.call(R,S)&&(h[S]=R[S])}}function k(h){var b=1;h=h.split(":");const S=[];for(;0<b&&h.length;)S.push(h.shift()),b--;return h.length&&S.push(h.join(":")),S}function j(h){d.setTimeout(()=>{throw h},0)}function V(){var h=ve;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class me{constructor(){this.h=this.g=null}add(b,S){const R=Le.get();R.set(b,S),this.h?this.h.next=R:this.g=R,this.h=R}}var Le=new H(()=>new Se,h=>h.reset());class Se{constructor(){this.next=this.g=this.h=null}set(b,S){this.h=b,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,B=!1,ve=new me,G=()=>{const h=d.Promise.resolve(void 0);Te=()=>{h.then($)}};var $=()=>{for(var h;h=V();){try{h.h.call(h.g)}catch(S){j(S)}var b=Le;b.j(h),100>b.h&&(b.h++,h.next=b.g,b.g=h)}B=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var de=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};d.addEventListener("test",S,b),d.removeEventListener("test",S,b)}catch{}return h})();function ze(h,b){if(se.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget){if(pe){e:{try{te(b.nodeName);var X=!0;break e}catch{}X=!1}X||(b=null)}}else S=="mouseover"?b=h.fromElement:S=="mouseout"&&(b=h.toElement);this.relatedTarget=b,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:We[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ze.aa.h.call(this)}}I(ze,se);var We={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ze="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Je(h,b,S,R,X){this.listener=h,this.proxy=null,this.src=b,this.type=S,this.capture=!!R,this.ha=X,this.key=++Ke,this.da=this.fa=!1}function He(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function wt(h){this.src=h,this.g={},this.h=0}wt.prototype.add=function(h,b,S,R,X){var ae=h.toString();h=this.g[ae],h||(h=this.g[ae]=[],this.h++);var we=ot(h,b,R,X);return-1<we?(b=h[we],S||(b.fa=!1)):(b=new Je(b,this.src,ae,!!R,X),b.fa=S,h.push(b)),b};function Et(h,b){var S=b.type;if(S in h.g){var R=h.g[S],X=Array.prototype.indexOf.call(R,b,void 0),ae;(ae=0<=X)&&Array.prototype.splice.call(R,X,1),ae&&(He(b),h.g[S].length==0&&(delete h.g[S],h.h--))}}function ot(h,b,S,R){for(var X=0;X<h.length;++X){var ae=h[X];if(!ae.da&&ae.listener==b&&ae.capture==!!S&&ae.ha==R)return X}return-1}var je="closure_lm_"+(1e6*Math.random()|0),at={};function Bt(h,b,S,R,X){if(Array.isArray(b)){for(var ae=0;ae<b.length;ae++)Bt(h,b[ae],S,R,X);return null}return S=En(S),h&&h[Ze]?h.K(b,S,f(R)?!!R.capture:!1,X):$t(h,b,S,!1,R,X)}function $t(h,b,S,R,X,ae){if(!b)throw Error("Invalid event type");var we=f(X)?!!X.capture:!!X,vt=Qn(h);if(vt||(h[je]=vt=new wt(h)),S=vt.add(b,S,R,we,ae),S.proxy)return S;if(R=un(),S.proxy=R,R.src=h,R.listener=S,h.addEventListener)de||(X=we),X===void 0&&(X=!1),h.addEventListener(b.toString(),R,X);else if(h.attachEvent)h.attachEvent(Ht(b.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return S}function un(){function h(S){return b.call(h.src,h.listener,S)}const b=Mn;return h}function qt(h,b,S,R,X){if(Array.isArray(b))for(var ae=0;ae<b.length;ae++)qt(h,b[ae],S,R,X);else R=f(R)?!!R.capture:!!R,S=En(S),h&&h[Ze]?(h=h.i,b=String(b).toString(),b in h.g&&(ae=h.g[b],S=ot(ae,S,R,X),-1<S&&(He(ae[S]),Array.prototype.splice.call(ae,S,1),ae.length==0&&(delete h.g[b],h.h--)))):h&&(h=Qn(h))&&(b=h.g[b.toString()],h=-1,b&&(h=ot(b,S,R,X)),(S=-1<h?b[h]:null)&&_e(S))}function _e(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[Ze])Et(b.i,h);else{var S=h.type,R=h.proxy;b.removeEventListener?b.removeEventListener(S,R,h.capture):b.detachEvent?b.detachEvent(Ht(S),R):b.addListener&&b.removeListener&&b.removeListener(R),(S=Qn(b))?(Et(S,h),S.h==0&&(S.src=null,b[je]=null)):He(h)}}}function Ht(h){return h in at?at[h]:at[h]="on"+h}function Mn(h,b){if(h.da)h=!0;else{b=new ze(b,this);var S=h.listener,R=h.ha||h.src;h.fa&&_e(h),h=S.call(R,b)}return h}function Qn(h){return h=h[je],h instanceof wt?h:null}var hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(h){return typeof h=="function"?h:(h[hr]||(h[hr]=function(b){return h.handleEvent(b)}),h[hr])}function Ct(){M.call(this),this.i=new wt(this),this.M=this,this.F=null}I(Ct,M),Ct.prototype[Ze]=!0,Ct.prototype.removeEventListener=function(h,b,S,R){qt(this,h,b,S,R)};function Rt(h,b){var S,R=h.F;if(R)for(S=[];R;R=R.F)S.push(R);if(h=h.M,R=b.type||b,typeof b=="string")b=new se(b,h);else if(b instanceof se)b.target=b.target||h;else{var X=b;b=new se(R,h),F(b,X)}if(X=!0,S)for(var ae=S.length-1;0<=ae;ae--){var we=b.g=S[ae];X=dn(we,R,!0,b)&&X}if(we=b.g=h,X=dn(we,R,!0,b)&&X,X=dn(we,R,!1,b)&&X,S)for(ae=0;ae<S.length;ae++)we=b.g=S[ae],X=dn(we,R,!1,b)&&X}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var h=this.i,b;for(b in h.g){for(var S=h.g[b],R=0;R<S.length;R++)He(S[R]);delete h.g[b],h.h--}}this.F=null},Ct.prototype.K=function(h,b,S,R){return this.i.add(String(h),b,!1,S,R)},Ct.prototype.L=function(h,b,S,R){return this.i.add(String(h),b,!0,S,R)};function dn(h,b,S,R){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();for(var X=!0,ae=0;ae<b.length;++ae){var we=b[ae];if(we&&!we.da&&we.capture==S){var vt=we.listener,fn=we.ha||we.src;we.fa&&Et(h.i,we),X=vt.call(fn,R)!==!1&&X}}return X&&!R.defaultPrevented}function fr(h,b,S){if(typeof h=="function")S&&(h=N(h,S));else if(h&&typeof h.handleEvent=="function")h=N(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:d.setTimeout(h,b||0)}function Xn(h){h.g=fr(()=>{h.g=null,h.i&&(h.i=!1,Xn(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class ce extends M{constructor(b,S){super(),this.m=b,this.l=S,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Xn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qe(h){M.call(this),this.h=h,this.g={}}I(qe,M);var kt=[];function hn(h){J(h.g,function(b,S){this.g.hasOwnProperty(S)&&_e(b)},h),h.g={}}qe.prototype.N=function(){qe.aa.N.call(this),hn(this)},qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dn=d.JSON.stringify,Or=d.JSON.parse,Ss=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Cr(){}Cr.prototype.h=null;function os(h){return h.h||(h.h=h.i())}function as(){}var Vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zn(){se.call(this,"d")}I(Zn,se);function kr(){se.call(this,"c")}I(kr,se);var er={},Es=null;function jr(){return Es=Es||new Ct}er.La="serverreachability";function Ur(h){se.call(this,er.La,h)}I(Ur,se);function ee(h){const b=jr();Rt(b,new Ur(b))}er.STAT_EVENT="statevent";function Q(h,b){se.call(this,er.STAT_EVENT,h),this.stat=b}I(Q,se);function ne(h){const b=jr();Rt(b,new Q(b,h))}er.Ma="timingevent";function he(h,b){se.call(this,er.Ma,h),this.size=b}I(he,se);function Ne(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},b)}function $e(){this.g=!0}$e.prototype.xa=function(){this.g=!1};function Xe(h,b,S,R,X,ae){h.info(function(){if(h.g)if(ae)for(var we="",vt=ae.split("&"),fn=0;fn<vt.length;fn++){var ht=vt[fn].split("=");if(1<ht.length){var bn=ht[0];ht=ht[1];var sn=bn.split("_");we=2<=sn.length&&sn[1]=="type"?we+(bn+"="+ht+"&"):we+(bn+"=redacted&")}}else we=null;else we=ae;return"XMLHTTP REQ ("+R+") [attempt "+X+"]: "+b+`
`+S+`
`+we})}function lt(h,b,S,R,X,ae,we){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+X+"]: "+b+`
`+S+`
`+ae+" "+we})}function Re(h,b,S,R){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+yt(h,S)+(R?" "+R:"")})}function Ye(h,b){h.info(function(){return"TIMEOUT: "+b})}$e.prototype.info=function(){};function yt(h,b){if(!h.g)return b;if(!b)return null;try{var S=JSON.parse(b);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var R=S[h];if(!(2>R.length)){var X=R[1];if(Array.isArray(X)&&!(1>X.length)){var ae=X[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var we=1;we<X.length;we++)X[we]=""}}}}return Dn(S)}catch{return b}}var jt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},L={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oe;function Ve(){}I(Ve,Cr),Ve.prototype.g=function(){return new XMLHttpRequest},Ve.prototype.i=function(){return{}},oe=new Ve;function et(h,b,S,R){this.j=h,this.i=b,this.l=S,this.R=R||1,this.U=new qe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new st}function st(){this.i=null,this.g="",this.h=!1}var rn={},_t={};function vn(h,b,S){h.L=1,h.v=ti(mr(b)),h.m=S,h.P=!0,So(h,null)}function So(h,b){h.F=Date.now(),Tt(h),h.A=mr(h.v);var S=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),ri(S.i,"t",R),h.C=0,S=h.j.J,h.h=new st,h.g=uc(h.j,S?b:null,!h.m),0<h.O&&(h.M=new ce(N(h.Y,h,h.g),h.O)),b=h.U,S=h.g,R=h.ca;var X="readystatechange";Array.isArray(X)||(X&&(kt[0]=X.toString()),X=kt);for(var ae=0;ae<X.length;ae++){var we=Bt(S,X[ae],R||b.handleEvent,!1,b.h||b);if(!we)break;b.g[we.key]=we}b=h.H?P(h.H):{},h.m?(h.u||(h.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,b)):(h.u="GET",h.g.ea(h.A,h.u,null,b)),ee(),Xe(h.i,h.u,h.A,h.l,h.R,h.m)}et.prototype.ca=function(h){h=h.target;const b=this.M;b&&nr(h)==3?b.j():this.Y(h)},et.prototype.Y=function(h){try{if(h==this.g)e:{const sn=nr(this.g);var b=this.g.Ba();const Ar=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||Ra(this.g)))){this.J||sn!=4||b==7||(b==8||0>=Ar?ee(3):ee(2)),Oi(this);var S=this.g.Z();this.X=S;t:if(Wl(this)){var R=Ra(this.g);h="";var X=R.length,ae=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tr(this),Qs(this);var we="";break t}this.h.i=new d.TextDecoder}for(b=0;b<X;b++)this.h.h=!0,h+=this.h.i.decode(R[b],{stream:!(ae&&b==X-1)});R.length=0,this.h.g+=h,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=S==200,lt(this.i,this.u,this.A,this.l,this.R,sn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var vt,fn=this.g;if((vt=fn.g?fn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(vt)){var ht=vt;break t}}ht=null}if(S=ht)Re(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ja(this,S);else{this.o=!1,this.s=3,ne(12),Tr(this),Qs(this);break e}}if(this.P){S=!0;let xr;for(;!this.J&&this.C<we.length;)if(xr=vd(this,we),xr==_t){sn==4&&(this.s=4,ne(14),S=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}else if(xr==rn){this.s=4,ne(15),Re(this.i,this.l,we,"[Invalid Chunk]"),S=!1;break}else Re(this.i,this.l,xr,null),ja(this,xr);if(Wl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||we.length!=0||this.h.h||(this.s=1,ne(16),S=!1),this.o=this.o&&S,!S)Re(this.i,this.l,we,"[Invalid Chunked Response]"),Tr(this),Qs(this);else if(0<we.length&&!this.W){this.W=!0;var bn=this.j;bn.g==this&&bn.ba&&!bn.M&&(bn.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),Da(bn),bn.M=!0,ne(11))}}else Re(this.i,this.l,we,null),ja(this,we);sn==4&&Tr(this),this.o&&!this.J&&(sn==4?Do(this.j,this):(this.o=!1,Tt(this)))}else Po(this.g),S==400&&0<we.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Tr(this),Qs(this)}}}catch{}finally{}};function Wl(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function vd(h,b){var S=h.C,R=b.indexOf(`
`,S);return R==-1?_t:(S=Number(b.substring(S,R)),isNaN(S)?rn:(R+=1,R+S>b.length?_t:(b=b.slice(R,R+S),h.C=R+S,b)))}et.prototype.cancel=function(){this.J=!0,Tr(this)};function Tt(h){h.S=Date.now()+h.I,Kl(h,h.I)}function Kl(h,b){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ne(N(h.ba,h),b)}function Oi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}et.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ye(this.i,this.A),this.L!=2&&(ee(),ne(17)),Tr(this),this.s=2,Qs(this)):Kl(this,this.S-h)};function Qs(h){h.j.G==0||h.J||Do(h.j,h)}function Tr(h){Oi(h);var b=h.M;b&&typeof b.ma=="function"&&b.ma(),h.M=null,hn(h.U),h.g&&(b=h.g,h.g=null,b.abort(),b.ma())}function ja(h,b){try{var S=h.j;if(S.G!=0&&(S.g==h||Gn(S.h,h))){if(!h.K&&Gn(S.h,h)&&S.G==3){try{var R=S.Da.g.parse(b)}catch{R=null}if(Array.isArray(R)&&R.length==3){var X=R;if(X[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)Mo(S),Gr(S);else break e;Ro(S),ne(18)}}else S.za=X[1],0<S.za-S.T&&37500>X[2]&&S.F&&S.v==0&&!S.C&&(S.C=Ne(N(S.Za,S),6e3));if(1>=Yl(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Ps(S,11)}else if((h.K||S.g==h)&&Mo(S),!W(b))for(X=S.Da.g.parse(b),b=0;b<X.length;b++){let ht=X[b];if(S.T=ht[0],ht=ht[1],S.G==2)if(ht[0]=="c"){S.K=ht[1],S.ia=ht[2];const bn=ht[3];bn!=null&&(S.la=bn,S.j.info("VER="+S.la));const sn=ht[4];sn!=null&&(S.Aa=sn,S.j.info("SVER="+S.Aa));const Ar=ht[5];Ar!=null&&typeof Ar=="number"&&0<Ar&&(R=1.5*Ar,S.L=R,S.j.info("backChannelRequestTimeoutMs_="+R)),R=S;const xr=h.g;if(xr){const Wi=xr.g?xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wi){var ae=R.h;ae.g||Wi.indexOf("spdy")==-1&&Wi.indexOf("quic")==-1&&Wi.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Ta(ae,ae.h),ae.h=null))}if(R.D){const Lo=xr.g?xr.g.getResponseHeader("X-HTTP-Session-Id"):null;Lo&&(R.ya=Lo,Nt(R.I,R.D,Lo))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),R=S;var we=h;if(R.qa=cc(R,R.J?R.ia:null,R.W),we.K){Ql(R.h,we);var vt=we,fn=R.L;fn&&(vt.I=fn),vt.B&&(Oi(vt),Tt(vt)),R.g=we}else Gi(R);0<S.i.length&&ds(S)}else ht[0]!="stop"&&ht[0]!="close"||Ps(S,7);else S.G==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?Ps(S,7):kn(S):ht[0]!="noop"&&S.l&&S.l.ta(ht),S.v=0)}}ee(4)}catch{}}var Jl=class{constructor(h,b){this.g=h,this.map=b}};function Ui(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Yl(h){return h.h?1:h.g?h.g.size:0}function Gn(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function Ta(h,b){h.g?h.g.add(b):h.h=b}function Ql(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}Ui.prototype.cancel=function(){if(this.i=Xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Xl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const S of h.g.values())b=b.concat(S.D);return b}return T(h.i)}function Eo(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var b=[],S=h.length,R=0;R<S;R++)b.push(h[R]);return b}b=[],S=0;for(R in h)b[S++]=h[R];return b}function Co(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var b=[];h=h.length;for(var S=0;S<h;S++)b.push(S);return b}b=[],S=0;for(const R in h)b[S++]=R;return b}}}function Xs(h,b){if(h.forEach&&typeof h.forEach=="function")h.forEach(b,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,b,void 0);else for(var S=Co(h),R=Eo(h),X=R.length,ae=0;ae<X;ae++)b.call(void 0,R[ae],S&&S[ae],h)}var Bi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bd(h,b){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var R=h[S].indexOf("="),X=null;if(0<=R){var ae=h[S].substring(0,R);X=h[S].substring(R+1)}else ae=h[S];b(ae,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Cs(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Cs){this.h=h.h,$i(this,h.j),this.o=h.o,this.g=h.g,Zs(this,h.s),this.l=h.l;var b=h.i,S=new ls;S.i=b.i,b.g&&(S.g=new Map(b.g),S.h=b.h),ei(this,S),this.m=h.m}else h&&(b=String(h).match(Bi))?(this.h=!1,$i(this,b[1]||"",!0),this.o=ut(b[2]||""),this.g=ut(b[3]||"",!0),Zs(this,b[4]),this.l=ut(b[5]||"",!0),ei(this,b[6]||"",!0),this.m=ut(b[7]||"")):(this.h=!1,this.i=new ls(null,this.h))}Cs.prototype.toString=function(){var h=[],b=this.j;b&&h.push(ni(b,ko,!0),":");var S=this.g;return(S||b=="file")&&(h.push("//"),(b=this.o)&&h.push(ni(b,ko,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(ni(S,S.charAt(0)=="/"?tc:ec,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",ni(S,Pa)),h.join("")};function mr(h){return new Cs(h)}function $i(h,b,S){h.j=S?ut(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function Zs(h,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);h.s=b}else h.s=null}function ei(h,b,S){b instanceof ls?(h.i=b,cs(h.i,h.h)):(S||(b=ni(b,nc)),h.i=new ls(b,h.h))}function Nt(h,b,S){h.i.set(b,S)}function ti(h){return Nt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ut(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ni(h,b,S){return typeof h=="string"?(h=encodeURI(h).replace(b,Zl),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Zl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ko=/[#\/\?@]/g,ec=/[#\?:]/g,tc=/[#\?]/g,nc=/[#\?@]/g,Pa=/#/g;function ls(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function Cn(h){h.g||(h.g=new Map,h.h=0,h.i&&bd(h.i,function(b,S){h.add(decodeURIComponent(b.replace(/\+/g," ")),S)}))}n=ls.prototype,n.add=function(h,b){Cn(this),this.i=null,h=Pr(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(b),this.h+=1,this};function Br(h,b){Cn(h),b=Pr(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function $r(h,b){return Cn(h),b=Pr(h,b),h.g.has(b)}n.forEach=function(h,b){Cn(this),this.g.forEach(function(S,R){S.forEach(function(X){h.call(b,X,R,this)},this)},this)},n.na=function(){Cn(this);const h=Array.from(this.g.values()),b=Array.from(this.g.keys()),S=[];for(let R=0;R<b.length;R++){const X=h[R];for(let ae=0;ae<X.length;ae++)S.push(b[R])}return S},n.V=function(h){Cn(this);let b=[];if(typeof h=="string")$r(this,h)&&(b=b.concat(this.g.get(Pr(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)b=b.concat(h[S])}return b},n.set=function(h,b){return Cn(this),this.i=null,h=Pr(this,h),$r(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},n.get=function(h,b){return h?(h=this.V(h),0<h.length?String(h[0]):b):b};function ri(h,b,S){Br(h,b),0<S.length&&(h.i=null,h.g.set(Pr(h,b),T(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(var S=0;S<b.length;S++){var R=b[S];const ae=encodeURIComponent(String(R)),we=this.V(R);for(R=0;R<we.length;R++){var X=ae;we[R]!==""&&(X+="="+encodeURIComponent(String(we[R]))),h.push(X)}}return this.i=h.join("&")};function Pr(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function cs(h,b){b&&!h.j&&(Cn(h),h.i=null,h.g.forEach(function(S,R){var X=R.toLowerCase();R!=X&&(Br(this,R),ri(this,X,S))},h)),h.j=b}function wd(h,b){const S=new $e;if(d.Image){const R=new Image;R.onload=E(tr,S,"TestLoadImage: loaded",!0,b,R),R.onerror=E(tr,S,"TestLoadImage: error",!1,b,R),R.onabort=E(tr,S,"TestLoadImage: abort",!1,b,R),R.ontimeout=E(tr,S,"TestLoadImage: timeout",!1,b,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else b(!1)}function rc(h,b){const S=new $e,R=new AbortController,X=setTimeout(()=>{R.abort(),tr(S,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:R.signal}).then(ae=>{clearTimeout(X),ae.ok?tr(S,"TestPingServer: ok",!0,b):tr(S,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(X),tr(S,"TestPingServer: error",!1,b)})}function tr(h,b,S,R,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),R(S)}catch{}}function _d(){this.g=new Ss}function sc(h,b,S){const R=S||"";try{Xs(h,function(X,ae){let we=X;f(X)&&(we=Dn(X)),b.push(R+ae+"="+encodeURIComponent(we))})}catch(X){throw b.push(R+"type="+encodeURIComponent("_badmap")),X}}function ks(h){this.l=h.Ub||null,this.j=h.eb||!1}I(ks,Cr),ks.prototype.g=function(){return new qi(this.l,this.j)},ks.prototype.i=(function(h){return function(){return h}})({});function qi(h,b){Ct.call(this),this.D=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(qi,Ct),n=qi.prototype,n.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=b,this.readyState=1,Hr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(b.body=h),(this.D||d).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Hr(this)),this.g&&(this.readyState=3,Hr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ic(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function ic(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?qr(this):Hr(this),this.readyState==3&&ic(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,qr(this))},n.Qa=function(h){this.g&&(this.response=h,qr(this))},n.ga=function(){this.g&&qr(this)};function qr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Hr(h)}n.setRequestHeader=function(h,b){this.u.append(h,b)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var S=b.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=b.next();return h.join(`\r
`)};function Hr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function js(h){let b="";return J(h,function(S,R){b+=R,b+=":",b+=S,b+=`\r
`}),b}function si(h,b,S){e:{for(R in S){var R=!1;break e}R=!0}R||(S=js(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):Nt(h,b,S))}function Ot(h){Ct.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ot,Ct);var Nd=/^https?$/i,Aa=["POST","PUT"];n=Ot.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,b,S,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oe.g(),this.v=this.o?os(this.o):os(oe),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(ae){Hi(this,ae);return}if(h=S||"",S=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var X in R)S.set(X,R[X]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ae of R.keys())S.set(ae,R.get(ae));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(S.keys()).find(ae=>ae.toLowerCase()=="content-type"),X=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Aa,b,void 0))||R||X||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,we]of S)this.g.setRequestHeader(ae,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{To(this),this.u=!0,this.g.send(h),this.u=!1}catch(ae){Hi(this,ae)}};function Hi(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.m=5,jo(h),gr(h)}function jo(h){h.A||(h.A=!0,Rt(h,"complete"),Rt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Rt(this,"complete"),Rt(this,"abort"),gr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gr(this,!0)),Ot.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ia(this):this.bb())},n.bb=function(){Ia(this)};function Ia(h){if(h.h&&typeof c<"u"&&(!h.v[1]||nr(h)!=4||h.Z()!=2)){if(h.u&&nr(h)==4)fr(h.Ea,0,h);else if(Rt(h,"readystatechange"),nr(h)==4){h.h=!1;try{const we=h.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var S;if(!(S=b)){var R;if(R=we===0){var X=String(h.D).match(Bi)[1]||null;!X&&d.self&&d.self.location&&(X=d.self.location.protocol.slice(0,-1)),R=!Nd.test(X?X.toLowerCase():"")}S=R}if(S)Rt(h,"complete"),Rt(h,"success");else{h.m=6;try{var ae=2<nr(h)?h.g.statusText:""}catch{ae=""}h.l=ae+" ["+h.Z()+"]",jo(h)}}finally{gr(h)}}}}function gr(h,b){if(h.g){To(h);const S=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,b||Rt(h,"ready");try{S.onreadystatechange=R}catch{}}}function To(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function nr(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),Or(b)}};function Ra(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Po(h){const b={};h=(h.g&&2<=nr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(W(h[R]))continue;var S=k(h[R]);const X=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ae=b[X]||[];b[X]=ae,ae.push(S)}O(b,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function us(h,b,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||b}function Ma(h){this.Aa=0,this.i=[],this.j=new $e,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=us("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=us("baseRetryDelayMs",5e3,h),this.cb=us("retryDelaySeedMs",1e4,h),this.Wa=us("forwardChannelMaxRetries",2,h),this.wa=us("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ui(h&&h.concurrentRequestLimit),this.Da=new _d,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ma.prototype,n.la=8,n.G=1,n.connect=function(h,b,S,R){ne(0),this.W=h,this.H=b||{},S&&R!==void 0&&(this.H.OSID=S,this.H.OAID=R),this.F=this.X,this.I=cc(this,null,this.W),ds(this)};function kn(h){if(Ao(h),h.G==3){var b=h.U++,S=mr(h.I);if(Nt(S,"SID",h.K),Nt(S,"RID",b),Nt(S,"TYPE","terminate"),Ts(h,S),b=new et(h,h.j,b),b.L=2,b.v=ti(mr(S)),S=!1,d.navigator&&d.navigator.sendBeacon)try{S=d.navigator.sendBeacon(b.v.toString(),"")}catch{}!S&&d.Image&&(new Image().src=b.v,S=!0),S||(b.g=uc(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Tt(b)}lc(h)}function Gr(h){h.g&&(Da(h),h.g.cancel(),h.g=null)}function Ao(h){Gr(h),h.u&&(d.clearTimeout(h.u),h.u=null),Mo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function ds(h){if(!pr(h.h)&&!h.s){h.s=!0;var b=h.Ga;Te||G(),B||(Te(),B=!0),ve.add(b,h),h.B=0}}function Sd(h,b){return Yl(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=b.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ne(N(h.Ga,h,b),ac(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const X=new et(this,this.j,h);let ae=this.o;if(this.S&&(ae?(ae=P(ae),F(ae,this.S)):ae=this.S),this.m!==null||this.O||(X.H=ae,ae=null),this.P)e:{for(var b=0,S=0;S<this.i.length;S++){t:{var R=this.i[S];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(b+=R,4096<b){b=S;break e}if(b===4096||S===this.i.length-1){b=S+1;break e}}b=1e3}else b=1e3;b=ii(this,X,b),S=mr(this.I),Nt(S,"RID",h),Nt(S,"CVER",22),this.D&&Nt(S,"X-HTTP-Session-Id",this.D),Ts(this,S),ae&&(this.O?b="headers="+encodeURIComponent(String(js(ae)))+"&"+b:this.m&&si(S,this.m,ae)),Ta(this.h,X),this.Ua&&Nt(S,"TYPE","init"),this.P?(Nt(S,"$req",b),Nt(S,"SID","null"),X.T=!0,vn(X,S,null)):vn(X,S,b),this.G=2}}else this.G==3&&(h?Io(this,h):this.i.length==0||pr(this.h)||Io(this))};function Io(h,b){var S;b?S=b.l:S=h.U++;const R=mr(h.I);Nt(R,"SID",h.K),Nt(R,"RID",S),Nt(R,"AID",h.T),Ts(h,R),h.m&&h.o&&si(R,h.m,h.o),S=new et(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),b&&(h.i=b.D.concat(h.i)),b=ii(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ta(h.h,S),vn(S,R,b)}function Ts(h,b){h.H&&J(h.H,function(S,R){Nt(b,R,S)}),h.l&&Xs({},function(S,R){Nt(b,R,S)})}function ii(h,b,S){S=Math.min(h.i.length,S);var R=h.l?N(h.l.Na,h.l,h):null;e:{var X=h.i;let ae=-1;for(;;){const we=["count="+S];ae==-1?0<S?(ae=X[0].g,we.push("ofs="+ae)):ae=0:we.push("ofs="+ae);let vt=!0;for(let fn=0;fn<S;fn++){let ht=X[fn].g;const bn=X[fn].map;if(ht-=ae,0>ht)ae=Math.max(0,X[fn].g-100),vt=!1;else try{sc(bn,we,"req"+ht+"_")}catch{R&&R(bn)}}if(vt){R=we.join("&");break e}}}return h=h.i.splice(0,S),b.D=h,R}function Gi(h){if(!h.g&&!h.u){h.Y=1;var b=h.Fa;Te||G(),B||(Te(),B=!0),ve.add(b,h),h.v=0}}function Ro(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ne(N(h.Fa,h),ac(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,oc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ne(N(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),Gr(this),oc(this))};function Da(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function oc(h){h.g=new et(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var b=mr(h.qa);Nt(b,"RID","rpc"),Nt(b,"SID",h.K),Nt(b,"AID",h.T),Nt(b,"CI",h.F?"0":"1"),!h.F&&h.ja&&Nt(b,"TO",h.ja),Nt(b,"TYPE","xmlhttp"),Ts(h,b),h.m&&h.o&&si(b,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=ti(mr(b)),S.m=null,S.P=!0,So(S,h)}n.Za=function(){this.C!=null&&(this.C=null,Gr(this),Ro(this),ne(19))};function Mo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Do(h,b){var S=null;if(h.g==b){Mo(h),Da(h),h.g=null;var R=2}else if(Gn(h.h,b))S=b.D,Ql(h.h,b),R=1;else return;if(h.G!=0){if(b.o)if(R==1){S=b.m?b.m.length:0,b=Date.now()-b.F;var X=h.B;R=jr(),Rt(R,new he(R,S)),ds(h)}else Gi(h);else if(X=b.s,X==3||X==0&&0<b.X||!(R==1&&Sd(h,b)||R==2&&Ro(h)))switch(S&&0<S.length&&(b=h.h,b.i=b.i.concat(S)),X){case 1:Ps(h,5);break;case 4:Ps(h,10);break;case 3:Ps(h,6);break;default:Ps(h,2)}}}function ac(h,b){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*b}function Ps(h,b){if(h.j.info("Error code "+b),b==2){var S=N(h.fb,h),R=h.Xa;const X=!R;R=new Cs(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||$i(R,"https"),ti(R),X?wd(R.toString(),S):rc(R.toString(),S)}else ne(2);h.G=0,h.l&&h.l.sa(b),lc(h),Ao(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function lc(h){if(h.G=0,h.ka=[],h.l){const b=Xl(h.h);(b.length!=0||h.i.length!=0)&&(A(h.ka,b),A(h.ka,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.ra()}}function cc(h,b,S){var R=S instanceof Cs?mr(S):new Cs(S);if(R.g!="")b&&(R.g=b+"."+R.g),Zs(R,R.s);else{var X=d.location;R=X.protocol,b=b?b+"."+X.hostname:X.hostname,X=+X.port;var ae=new Cs(null);R&&$i(ae,R),b&&(ae.g=b),X&&Zs(ae,X),S&&(ae.l=S),R=ae}return S=h.D,b=h.ya,S&&b&&Nt(R,S,b),Nt(R,"VER",h.la),Ts(h,R),R}function uc(h,b,S){if(b&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Ca&&!h.pa?new Ot(new ks({eb:S})):new Ot(h.pa),b.Ha(h.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Va(){}n=Va.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Vo(){}Vo.prototype.g=function(h,b){return new Wn(h,b)};function Wn(h,b){Ct.call(this),this.g=new Ma(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(h?h["X-WebChannel-Client-Profile"]=b.va:h={"X-WebChannel-Client-Profile":b.va}),this.g.S=h,(h=b&&b.Sb)&&!W(h)&&(this.g.m=h),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!W(b)&&(this.g.D=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new hs(this)}I(Wn,Ct),Wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){kn(this.g)},Wn.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=Dn(h),h=S);b.i.push(new Jl(b.Ya++,h)),b.G==3&&ds(b)},Wn.prototype.N=function(){this.g.l=null,delete this.j,kn(this.g),delete this.g,Wn.aa.N.call(this)};function dc(h){Zn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const S in b){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}I(dc,Zn);function hc(){kr.call(this),this.status=1}I(hc,kr);function hs(h){this.g=h}I(hs,Va),hs.prototype.ua=function(){Rt(this.g,"a")},hs.prototype.ta=function(h){Rt(this.g,new dc(h))},hs.prototype.sa=function(h){Rt(this.g,new hc)},hs.prototype.ra=function(){Rt(this.g,"b")},Vo.prototype.createWebChannel=Vo.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,Fv=function(){return new Vo},zv=function(){return jr()},Lv=er,Nf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jt.NO_ERROR=0,jt.TIMEOUT=8,jt.HTTP_ERROR=6,xu=jt,L.COMPLETE="complete",Vv=L,as.EventType=Vn,Vn.OPEN="a",Vn.CLOSE="b",Vn.ERROR="c",Vn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,cl=as,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,Dv=Ot}).apply(typeof ou<"u"?ou:typeof self<"u"?self:typeof window<"u"?window:{});const U0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _a="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new cS("@firebase/firestore");function al(){return go.logLevel}function De(n,...e){if(go.logLevel<=mt.DEBUG){const t=e.map(ip);go.debug(`Firestore (${_a}): ${n}`,...t)}}function Ws(n,...e){if(go.logLevel<=mt.ERROR){const t=e.map(ip);go.error(`Firestore (${_a}): ${n}`,...t)}}function ha(n,...e){if(go.logLevel<=mt.WARN){const t=e.map(ip);go.warn(`Firestore (${_a}): ${n}`,...t)}}function ip(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(n="Unexpected state"){const e=`FIRESTORE (${_a}) INTERNAL ASSERTION FAILED: `+n;throw Ws(e),new Error(e)}function bt(n,e){n||Qe()}function nt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends Av{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bn.UNAUTHENTICATED)))}shutdown(){}}class dS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class hS{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0);let s=this.i;const o=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new $s,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},d=m=>{De("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(De("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new $s)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(De("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(bt(typeof s.accessToken=="string"),new Ov(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string"),new Bn(e)}}class fS{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pS{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new fS(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){bt(this.o===void 0);const s=l=>{l.error!=null&&De("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,De("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{De("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):De("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(bt(typeof t.token=="string"),this.R=t.token,new mS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=xS(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%e.length))}return s}}function xt(n,e){return n<e?-1:n>e?1:0}function fa(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xn.fromMillis(Date.now())}static fromDate(e){return xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new xn(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tt(e)}static min(){return new tt(new xn(0,0))}static max(){return new tt(new xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t,s){t===void 0?t=0:t>e.length&&Qe(),s===void 0?s=e.length-t:s>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Sl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sl?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=e.get(o),c=t.get(o);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ft extends Sl{construct(e,t,s){return new Ft(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ke(le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ft(t)}static emptyPath(){return new Ft([])}}const yS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends Sl{construct(e,t,s){return new An(e,t,s)}static isValidIdentifier(e){return yS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new An(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ke(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ke(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ke(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(s+=d,o++):(l(),o++)}if(l(),c)throw new ke(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(t)}static emptyPath(){return new An([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Ft.fromString(e))}static fromName(e){return new Oe(Ft.fromString(e).popFirst(5))}static empty(){return new Oe(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Ft(e.slice()))}}function vS(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=tt.fromTimestamp(s===1e9?new xn(t+1,0):new xn(t,s));return new ji(o,Oe.empty(),e)}function bS(n){return new ji(n.readTime,n.key,-1)}class ji{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ji(tt.min(),Oe.empty(),-1)}static max(){return new ji(tt.max(),Oe.empty(),-1)}}function wS(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:xt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==_S)throw n;De("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.reject(t)}static resolve(e){return new ge(((t,s)=>{t(e)}))}static reject(e){return new ge(((t,s)=>{s(e)}))}static waitFor(e){return new ge(((t,s)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(m=>s(m)))})),c=!0,l===o&&t()}))}static or(e){let t=ge.resolve(!1);for(const s of e)t=t.next((o=>o?ge.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new ge(((s,o)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const f=m;t(e[f]).next((v=>{c[f]=v,++d,d===l&&s(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new ge(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function SS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}op.oe=-1;function Ku(n){return n==null}function Pu(n){return n===0&&1/n==-1/0}function ES(n){return typeof n=="number"&&Number.isInteger(n)&&!Pu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _o(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Bv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new Kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new au(this.root,e,this.comparator,!1)}getReverseIterator(){return new au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new au(this.root,e,this.comparator,!0)}}class au{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Pn.RED,this.left=o??Pn.EMPTY,this.right=l??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Pn(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Pn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(e,t,s,o,l){return this}insert(e,t,s){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $0(this.data.getIterator())}getIteratorFrom(e){return new $0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class $0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new wr([])}unionWith(e){let t=new In(An.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new wr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fa(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new $v("Invalid base64 string: "+l):l}})(e);return new Rn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rn.EMPTY_BYTE_STRING=new Rn("");const CS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ti(n){if(bt(!!n),typeof n=="string"){let e=0;const t=CS.exec(n);if(bt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:tn(n.seconds),nanos:tn(n.nanos)}}function tn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xo(n){return typeof n=="string"?Rn.fromBase64String(n):Rn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function lp(n){const e=n.mapValue.fields.__previous_value__;return ap(e)?lp(e):e}function El(n){const e=Ti(n.mapValue.fields.__local_write_time__.timestampValue);return new xn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t,s,o,l,c,d,m,f){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=f}}class Cl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Cl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu={mapValue:{}};function yo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ap(n)?4:TS(n)?9007199254740991:jS(n)?10:11:Qe()}function ws(n,e){if(n===e)return!0;const t=yo(n);if(t!==yo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return El(n).isEqual(El(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Ti(o.timestampValue),d=Ti(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return xo(o.bytesValue).isEqual(xo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return tn(o.geoPointValue.latitude)===tn(l.geoPointValue.latitude)&&tn(o.geoPointValue.longitude)===tn(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return tn(o.integerValue)===tn(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=tn(o.doubleValue),d=tn(l.doubleValue);return c===d?Pu(c)===Pu(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return fa(n.arrayValue.values||[],e.arrayValue.values||[],ws);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(B0(c)!==B0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!ws(c[m],d[m])))return!1;return!0})(n,e);default:return Qe()}}function kl(n,e){return(n.values||[]).find((t=>ws(t,e)))!==void 0}function pa(n,e){if(n===e)return 0;const t=yo(n),s=yo(e);if(t!==s)return xt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=tn(l.integerValue||l.doubleValue),m=tn(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return q0(n.timestampValue,e.timestampValue);case 4:return q0(El(n),El(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=xo(l),m=xo(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let f=0;f<d.length&&f<m.length;f++){const v=xt(d[f],m[f]);if(v!==0)return v}return xt(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=xt(tn(l.latitude),tn(c.latitude));return d!==0?d:xt(tn(l.longitude),tn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return H0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,m,f,v;const w=l.fields||{},N=c.fields||{},E=(d=w.value)===null||d===void 0?void 0:d.arrayValue,I=(m=N.value)===null||m===void 0?void 0:m.arrayValue,T=xt(((f=E==null?void 0:E.values)===null||f===void 0?void 0:f.length)||0,((v=I==null?void 0:I.values)===null||v===void 0?void 0:v.length)||0);return T!==0?T:H0(E,I)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===lu.mapValue&&c===lu.mapValue)return 0;if(l===lu.mapValue)return 1;if(c===lu.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),f=c.fields||{},v=Object.keys(f);m.sort(),v.sort();for(let w=0;w<m.length&&w<v.length;++w){const N=xt(m[w],v[w]);if(N!==0)return N;const E=pa(d[m[w]],f[v[w]]);if(E!==0)return E}return xt(m.length,v.length)})(n.mapValue,e.mapValue);default:throw Qe()}}function q0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return xt(n,e);const t=Ti(n),s=Ti(e),o=xt(t.seconds,s.seconds);return o!==0?o:xt(t.nanos,s.nanos)}function H0(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=pa(t[o],s[o]);if(l)return l}return xt(t.length,s.length)}function ma(n){return Sf(n)}function Sf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ti(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return xo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Oe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Sf(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${Sf(t.fields[c])}`;return o+"}"})(n.mapValue):Qe()}function G0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ef(n){return!!n&&"integerValue"in n}function cp(n){return!!n&&"arrayValue"in n}function W0(n){return!!n&&"nullValue"in n}function K0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yu(n){return!!n&&"mapValue"in n}function jS(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function fl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _o(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=fl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function TS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.value=e}static empty(){return new ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!yu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fl(t)}setAll(e){let t=An.emptyPath(),s={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,s,o),s={},o=[],t=d.popLast()}c?s[d.lastSegment()]=fl(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());yu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ws(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];yu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){_o(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new ur(fl(this.value))}}function qv(n){const e=[];return _o(n.fields,((t,s)=>{const o=new An([t]);if(yu(s)){const l=qv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new wr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t,s,o,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new qn(e,0,tt.min(),tt.min(),tt.min(),ur.empty(),0)}static newFoundDocument(e,t,s,o){return new qn(e,1,t,tt.min(),s,o,0)}static newNoDocument(e,t){return new qn(e,2,t,tt.min(),tt.min(),ur.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,tt.min(),tt.min(),ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t){this.position=e,this.inclusive=t}}function J0(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=Oe.comparator(Oe.fromName(c.referenceValue),t.key):s=pa(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Y0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ws(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t="asc"){this.field=e,this.dir=t}}function PS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hv=class{};class cn extends Hv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new IS(e,t,s):t==="array-contains"?new DS(e,s):t==="in"?new VS(e,s):t==="not-in"?new LS(e,s):t==="array-contains-any"?new zS(e,s):new cn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new RS(e,s):new MS(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(pa(t,this.value)):t!==null&&yo(this.value)===yo(t)&&this.matchesComparison(pa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rs extends Hv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new rs(e,t)}matches(e){return Gv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Gv(n){return n.op==="and"}function Wv(n){return AS(n)&&Gv(n)}function AS(n){for(const e of n.filters)if(e instanceof rs)return!1;return!0}function Cf(n){if(n instanceof cn)return n.field.canonicalString()+n.op.toString()+ma(n.value);if(Wv(n))return n.filters.map((e=>Cf(e))).join(",");{const e=n.filters.map((t=>Cf(t))).join(",");return`${n.op}(${e})`}}function Kv(n,e){return n instanceof cn?(function(s,o){return o instanceof cn&&s.op===o.op&&s.field.isEqual(o.field)&&ws(s.value,o.value)})(n,e):n instanceof rs?(function(s,o){return o instanceof rs&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,d)=>l&&Kv(c,o.filters[d])),!0):!1})(n,e):void Qe()}function Jv(n){return n instanceof cn?(function(t){return`${t.field.canonicalString()} ${t.op} ${ma(t.value)}`})(n):n instanceof rs?(function(t){return t.op.toString()+" {"+t.getFilters().map(Jv).join(" ,")+"}"})(n):"Filter"}class IS extends cn{constructor(e,t,s){super(e,t,s),this.key=Oe.fromName(s.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class RS extends cn{constructor(e,t){super(e,"in",t),this.keys=Yv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class MS extends cn{constructor(e,t){super(e,"not-in",t),this.keys=Yv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Yv(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>Oe.fromName(s.referenceValue)))}class DS extends cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cp(t)&&kl(t.arrayValue,this.value)}}class VS extends cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kl(this.value.arrayValue,t)}}class LS extends cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!kl(this.value.arrayValue,t)}}class zS extends cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>kl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t=null,s=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.ue=null}}function Q0(n,e=null,t=[],s=[],o=null,l=null,c=null){return new FS(n,e,t,s,o,l,c)}function up(n){const e=nt(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Cf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Ku(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>ma(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>ma(s))).join(",")),e.ue=t}return e.ue}function dp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!PS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Kv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Y0(n.startAt,e.startAt)&&Y0(n.endAt,e.endAt)}function kf(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t=null,s=[],o=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function OS(n,e,t,s,o,l,c,d){return new Na(n,e,t,s,o,l,c,d)}function Ju(n){return new Na(n)}function X0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Qv(n){return n.collectionGroup!==null}function pl(n){const e=nt(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new In(An.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new jl(l,s))})),t.has(An.keyField().canonicalString())||e.ce.push(new jl(An.keyField(),s))}return e.ce}function ys(n){const e=nt(n);return e.le||(e.le=US(e,pl(n))),e.le}function US(n,e){if(n.limitType==="F")return Q0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new jl(o.field,l)}));const t=n.endAt?new Au(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Au(n.startAt.position,n.startAt.inclusive):null;return Q0(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function jf(n,e){const t=n.filters.concat([e]);return new Na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Tf(n,e,t){return new Na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Yu(n,e){return dp(ys(n),ys(e))&&n.limitType===e.limitType}function Xv(n){return`${up(ys(n))}|lt:${n.limitType}`}function ia(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Jv(o))).join(", ")}]`),Ku(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>ma(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>ma(o))).join(",")),`Target(${s})`})(ys(n))}; limitType=${n.limitType})`}function Qu(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Oe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of pl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,d,m){const f=J0(c,d,m);return c.inclusive?f<=0:f<0})(s.startAt,pl(s),o)||s.endAt&&!(function(c,d,m){const f=J0(c,d,m);return c.inclusive?f>=0:f>0})(s.endAt,pl(s),o))})(n,e)}function BS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Zv(n){return(e,t)=>{let s=!1;for(const o of pl(n)){const l=$S(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function $S(n,e,t){const s=n.field.isKeyField()?Oe.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),f=d.data.field(l);return m!==null&&f!==null?pa(m,f):Qe()})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Qe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Bv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=new Kt(Oe.comparator);function Ks(){return qS}const eb=new Kt(Oe.comparator);function ul(...n){let e=eb;for(const t of n)e=e.insert(t.key,t);return e}function tb(n){let e=eb;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function co(){return ml()}function nb(){return ml()}function ml(){return new Sa((n=>n.toString()),((n,e)=>n.isEqual(e)))}const HS=new Kt(Oe.comparator),GS=new In(Oe.comparator);function ct(...n){let e=GS;for(const t of n)e=e.add(t);return e}const WS=new In(xt);function KS(){return WS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(e)?"-0":e}}function rb(n){return{integerValue:""+n}}function JS(n,e){return ES(e)?rb(e):hp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this._=void 0}}function YS(n,e,t){return n instanceof Iu?(function(o,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&ap(l)&&(l=lp(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}})(t,e):n instanceof ga?ib(n,e):n instanceof Tl?ob(n,e):(function(o,l){const c=sb(o,l),d=Z0(c)+Z0(o.Pe);return Ef(c)&&Ef(o.Pe)?rb(d):hp(o.serializer,d)})(n,e)}function QS(n,e,t){return n instanceof ga?ib(n,e):n instanceof Tl?ob(n,e):t}function sb(n,e){return n instanceof Ru?(function(s){return Ef(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Iu extends Xu{}class ga extends Xu{constructor(e){super(),this.elements=e}}function ib(n,e){const t=ab(e);for(const s of n.elements)t.some((o=>ws(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Tl extends Xu{constructor(e){super(),this.elements=e}}function ob(n,e){let t=ab(e);for(const s of n.elements)t=t.filter((o=>!ws(o,s)));return{arrayValue:{values:t}}}class Ru extends Xu{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Z0(n){return tn(n.integerValue||n.doubleValue)}function ab(n){return cp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t){this.field=e,this.transform=t}}function ZS(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof ga&&o instanceof ga||s instanceof Tl&&o instanceof Tl?fa(s.elements,o.elements,ws):s instanceof Ru&&o instanceof Ru?ws(s.Pe,o.Pe):s instanceof Iu&&o instanceof Iu})(n.transform,e.transform)}class eE{constructor(e,t){this.version=e,this.transformResults=t}}class ns{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ns}static exists(e){return new ns(void 0,e)}static updateTime(e){return new ns(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Zu{}function lb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fp(n.key,ns.none()):new Ol(n.key,n.data,ns.none());{const t=n.data,s=ur.empty();let o=new In(An.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new Di(n.key,s,new wr(o.toArray()),ns.none())}}function tE(n,e,t){n instanceof Ol?(function(o,l,c){const d=o.value.clone(),m=tx(o.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Di?(function(o,l,c){if(!vu(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=tx(o.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(cb(o)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function gl(n,e,t,s){return n instanceof Ol?(function(l,c,d,m){if(!vu(l.precondition,c))return d;const f=l.value.clone(),v=nx(l.fieldTransforms,m,c);return f.setAll(v),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(n,e,t,s):n instanceof Di?(function(l,c,d,m){if(!vu(l.precondition,c))return d;const f=nx(l.fieldTransforms,m,c),v=c.data;return v.setAll(cb(l)),v.setAll(f),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((w=>w.field)))})(n,e,t,s):(function(l,c,d){return vu(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function nE(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=sb(s.transform,o||null);l!=null&&(t===null&&(t=ur.empty()),t.set(s.field,l))}return t||null}function ex(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&fa(s,o,((l,c)=>ZS(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ol extends Zu{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Di extends Zu{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function cb(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function tx(n,e,t){const s=new Map;bt(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);s.set(l.field,QS(c,d,t[o]))}return s}function nx(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,YS(l,c,e))}return s}class fp extends Zu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rE extends Zu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&tE(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=gl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=gl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=nb();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const m=lb(c,d);m!==null&&s.set(o.key,m),c.isValidDocument()||c.convertToNoDocument(tt.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ct())}isEqual(e){return this.batchId===e.batchId&&fa(this.mutations,e.mutations,((t,s)=>ex(t,s)))&&fa(this.baseMutations,e.baseMutations,((t,s)=>ex(t,s)))}}class pp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){bt(e.mutations.length===s.length);let o=(function(){return HS})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new pp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln,ft;function aE(n){switch(n){default:return Qe();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function ub(n){if(n===void 0)return Ws("GRPC error has no .code"),le.UNKNOWN;switch(n){case ln.OK:return le.OK;case ln.CANCELLED:return le.CANCELLED;case ln.UNKNOWN:return le.UNKNOWN;case ln.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case ln.INTERNAL:return le.INTERNAL;case ln.UNAVAILABLE:return le.UNAVAILABLE;case ln.UNAUTHENTICATED:return le.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case ln.NOT_FOUND:return le.NOT_FOUND;case ln.ALREADY_EXISTS:return le.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return le.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case ln.ABORTED:return le.ABORTED;case ln.OUT_OF_RANGE:return le.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return le.UNIMPLEMENTED;case ln.DATA_LOSS:return le.DATA_LOSS;default:return Qe()}}(ft=ln||(ln={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=new po([4294967295,4294967295],0);function rx(n){const e=lE().encode(n),t=new Mv;return t.update(e),new Uint8Array(t.digest())}function sx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new po([t,s],0),new po([o,l],0)]}class mp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new dl(`Invalid padding: ${t}`);if(s<0)throw new dl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new dl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new dl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=po.fromNumber(this.Ie)}Ee(e,t,s){let o=e.add(t.multiply(po.fromNumber(s)));return o.compare(cE)===1&&(o=new po([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=rx(e),[s,o]=sx(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(s,o,l);if(!this.de(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new mp(l,o,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.Ie===0)return;const t=rx(e),[s,o]=sx(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(s,o,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ul.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new ed(tt.min(),o,new Kt(xt),Ks(),ct())}}class Ul{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ul(s,t,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class db{constructor(e,t){this.targetId=e,this.me=t}}class hb{constructor(e,t,s=Rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class ix{constructor(){this.fe=0,this.ge=ax(),this.pe=Rn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ct(),t=ct(),s=ct();return this.ge.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Qe()}})),new Ul(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=ax()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,bt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uE{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ks(),this.qe=ox(),this.Qe=new Kt(xt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const s=this.Ge(t);switch(e.state){case 0:this.ze(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),s.De(e.resumeToken));break;default:Qe()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((s,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,s=e.me.count,o=this.Je(t);if(o){const l=o.target;if(kf(l))if(s===0){const c=new Oe(l.path);this.Ue(t,c,qn.newNoDocument(c,tt.min()))}else bt(s===1);else{const c=this.Ye(t);if(c!==s){const d=this.Ze(e),m=d?this.Xe(d,e,c):1;if(m!==0){this.je(t);const f=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=xo(s).toUint8Array()}catch(m){if(m instanceof $v)return ha("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new mp(c,o,l)}catch(m){return ha(m instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ie===0?null:d}Xe(e,t,s){return t.me.count===s-this.nt(e,t.targetId)?0:2}nt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,l,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((l,c)=>{const d=this.Je(c);if(d){if(l.current&&kf(d.target)){const m=new Oe(d.target.path);this.ke.get(m)!==null||this.it(c,m)||this.Ue(c,m,qn.newNoDocument(m,e))}l.be&&(t.set(c,l.ve()),l.Ce())}}));let s=ct();this.qe.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const f=this.Je(m);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.ke.forEach(((l,c)=>c.setReadTime(e)));const o=new ed(e,t,this.Qe,this.ke,s);return this.ke=Ks(),this.qe=ox(),this.Qe=new Kt(xt),o}$e(e,t){if(!this.ze(e))return;const s=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,s){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ix,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new In(xt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||De("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ix),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ox(){return new Kt(Oe.comparator)}function ax(){return new Kt(Oe.comparator)}const dE={asc:"ASCENDING",desc:"DESCENDING"},hE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fE={and:"AND",or:"OR"};class pE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pf(n,e){return n.useProto3Json||Ku(e)?e:{value:e}}function Mu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mE(n,e){return Mu(n,e.toTimestamp())}function vs(n){return bt(!!n),tt.fromTimestamp((function(t){const s=Ti(t);return new xn(s.seconds,s.nanos)})(n))}function gp(n,e){return Af(n,e).canonicalString()}function Af(n,e){const t=(function(o){return new Ft(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pb(n){const e=Ft.fromString(n);return bt(vb(e)),e}function If(n,e){return gp(n.databaseId,e.path)}function ef(n,e){const t=pb(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(gb(t))}function mb(n,e){return gp(n.databaseId,e)}function gE(n){const e=pb(n);return e.length===4?Ft.emptyPath():gb(e)}function Rf(n){return new Ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gb(n){return bt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function lx(n,e,t){return{name:If(n,e),fields:t.value.mapValue.fields}}function xE(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Qe()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(f,v){return f.useProto3Json?(bt(v===void 0||typeof v=="string"),Rn.fromBase64String(v||"")):(bt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Rn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(f){const v=f.code===void 0?le.UNKNOWN:ub(f.code);return new ke(v,f.message||"")})(c);t=new hb(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=ef(n,s.document.name),l=vs(s.document.updateTime),c=s.document.createTime?vs(s.document.createTime):tt.min(),d=new ur({mapValue:{fields:s.document.fields}}),m=qn.newFoundDocument(o,l,c,d),f=s.targetIds||[],v=s.removedTargetIds||[];t=new bu(f,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=ef(n,s.document),l=s.readTime?vs(s.readTime):tt.min(),c=qn.newNoDocument(o,l),d=s.removedTargetIds||[];t=new bu([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=ef(n,s.document),l=s.removedTargetIds||[];t=new bu([],l,o,null)}else{if(!("filter"in e))return Qe();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new oE(o,l),d=s.targetId;t=new db(d,c)}}return t}function yE(n,e){let t;if(e instanceof Ol)t={update:lx(n,e.key,e.value)};else if(e instanceof fp)t={delete:If(n,e.key)};else if(e instanceof Di)t={update:lx(n,e.key,e.data),updateMask:kE(e.fieldMask)};else{if(!(e instanceof rE))return Qe();t={verify:If(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof Iu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ga)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Tl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ru)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw Qe()})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:mE(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Qe()})(n,e.precondition)),t}function vE(n,e){return n&&n.length>0?(bt(e!==void 0),n.map((t=>(function(o,l){let c=o.updateTime?vs(o.updateTime):vs(l);return c.isEqual(tt.min())&&(c=vs(l)),new eE(c,o.transformResults||[])})(t,e)))):[]}function bE(n,e){return{documents:[mb(n,e.path)]}}function wE(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=mb(n,o);const l=(function(f){if(f.length!==0)return yb(rs.create(f,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(f){if(f.length!==0)return f.map((v=>(function(N){return{field:oa(N.field),direction:SE(N.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Pf(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{_t:t,parent:o}}function _E(n){let e=gE(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){bt(s===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(w){const N=xb(w);return N instanceof rs&&Wv(N)?N.getFilters():[N]})(t.where));let c=[];t.orderBy&&(c=(function(w){return w.map((N=>(function(I){return new jl(aa(I.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(N)))})(t.orderBy));let d=null;t.limit&&(d=(function(w){let N;return N=typeof w=="object"?w.value:w,Ku(N)?null:N})(t.limit));let m=null;t.startAt&&(m=(function(w){const N=!!w.before,E=w.values||[];return new Au(E,N)})(t.startAt));let f=null;return t.endAt&&(f=(function(w){const N=!w.before,E=w.values||[];return new Au(E,N)})(t.endAt)),OS(e,o,c,l,d,"F",m,f)}function NE(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xb(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=aa(t.unaryFilter.field);return cn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=aa(t.unaryFilter.field);return cn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=aa(t.unaryFilter.field);return cn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=aa(t.unaryFilter.field);return cn.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}})(n):n.fieldFilter!==void 0?(function(t){return cn.create(aa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return rs.create(t.compositeFilter.filters.map((s=>xb(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Qe()}})(t.compositeFilter.op))})(n):Qe()}function SE(n){return dE[n]}function EE(n){return hE[n]}function CE(n){return fE[n]}function oa(n){return{fieldPath:n.canonicalString()}}function aa(n){return An.fromServerFormat(n.fieldPath)}function yb(n){return n instanceof cn?(function(t){if(t.op==="=="){if(K0(t.value))return{unaryFilter:{field:oa(t.field),op:"IS_NAN"}};if(W0(t.value))return{unaryFilter:{field:oa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(K0(t.value))return{unaryFilter:{field:oa(t.field),op:"IS_NOT_NAN"}};if(W0(t.value))return{unaryFilter:{field:oa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oa(t.field),op:EE(t.op),value:t.value}}})(n):n instanceof rs?(function(t){const s=t.getFilters().map((o=>yb(o)));return s.length===1?s[0]:{compositeFilter:{op:CE(t.op),filters:s}}})(n):Qe()}function kE(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function vb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t,s,o,l=tt.min(),c=tt.min(),d=Rn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.ct=e}}function TE(n){const e=_E({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Tf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this.un=new AE}addToCollectionParentIndex(e,t){return this.un.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(ji.min())}updateCollectionGroup(e,t,s){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class AE{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new In(Ft.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new In(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xa(0)}static kn(){return new xa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.changes=new Sa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ge.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&gl(s.mutation,o,wr.empty(),xn.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ct()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ct()){const o=co();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=ul();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=co();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ct())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,o){let l=Ks();const c=ml(),d=(function(){return ml()})();return t.forEach(((m,f)=>{const v=s.get(f.key);o.has(f.key)&&(v===void 0||v.mutation instanceof Di)?l=l.insert(f.key,f):v!==void 0?(c.set(f.key,v.mutation.getFieldMask()),gl(v.mutation,f,v.mutation.getFieldMask(),xn.now())):c.set(f.key,wr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((f,v)=>c.set(f,v))),t.forEach(((f,v)=>{var w;return d.set(f,new RE(v,(w=c.get(f))!==null&&w!==void 0?w:null))})),d)))}recalculateAndSaveOverlays(e,t){const s=ml();let o=new Kt(((c,d)=>c-d)),l=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const f=t.get(m);if(f===null)return;let v=s.get(m)||wr.empty();v=d.applyToLocalView(f,v),s.set(m,v);const w=(o.get(d.batchId)||ct()).add(m);o=o.insert(d.batchId,w)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),f=m.key,v=m.value,w=nb();v.forEach((N=>{if(!l.has(N)){const E=lb(t.get(N),s.get(N));E!==null&&w.set(N,E),l=l.add(N)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,w))}return ge.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return Oe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):ge.resolve(co());let d=-1,m=l;return c.next((f=>ge.forEach(f,((v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),l.get(v)?ge.resolve():this.remoteDocumentCache.getEntry(e,v).next((N=>{m=m.insert(v,N)}))))).next((()=>this.populateOverlays(e,f,l))).next((()=>this.computeViews(e,m,f,ct()))).next((v=>({batchId:d,changes:tb(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next((s=>{let o=ul();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=ul();return this.indexManager.getCollectionParents(e,l).next((d=>ge.forEach(d,(m=>{const f=(function(w,N){return new Na(N,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,f,s,o).next((v=>{v.forEach(((w,N)=>{c=c.insert(w,N)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((m,f)=>{const v=f.getKey();c.get(v)===null&&(c=c.insert(v,qn.newInvalidDocument(v)))}));let d=ul();return c.forEach(((m,f)=>{const v=l.get(m);v!==void 0&&gl(v.mutation,f,wr.empty(),xn.now()),Qu(t,f)&&(d=d.insert(m,f))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ge.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:vs(o.createTime)}})(t)),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:TE(o.bundledQuery),readTime:vs(o.readTime)}})(t)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.overlays=new Kt(Oe.comparator),this.Ir=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const s=co();return ge.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.ht(e,t,l)})),ge.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Ir.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(s)),ge.resolve()}getOverlaysForCollection(e,t,s){const o=co(),l=t.length+1,c=new Oe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,f=m.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===l&&m.largestBatchId>s&&o.set(m.getKey(),m)}return ge.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new Kt(((f,v)=>f-v));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>s){let v=l.get(f.largestBatchId);v===null&&(v=co(),l=l.insert(f.largestBatchId,v)),v.set(f.getKey(),f)}}const d=co(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((f,v)=>d.set(f,v))),!(d.size()>=o)););return ge.resolve(d)}ht(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.Ir.get(o.largestBatchId).delete(s.key);this.Ir.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new iE(t,s));let l=this.Ir.get(t);l===void 0&&(l=ct(),this.Ir.set(t,l)),this.Ir.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(){this.sessionToken=Rn.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(){this.Tr=new In(Sn.Er),this.dr=new In(Sn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const s=new Sn(e,t);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Vr(new Sn(e,t))}mr(e,t){e.forEach((s=>this.removeReference(s,t)))}gr(e){const t=new Oe(new Ft([])),s=new Sn(t,e),o=new Sn(t,e+1),l=[];return this.dr.forEachInRange([s,o],(c=>{this.Vr(c),l.push(c.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Oe(new Ft([])),s=new Sn(t,e),o=new Sn(t,e+1);let l=ct();return this.dr.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Sn(e,0),s=this.Tr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Sn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Oe.comparator(e.key,t.key)||xt(e.wr,t.wr)}static Ar(e,t){return xt(e.wr,t.wr)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new In(Sn.Er)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new sE(l,t,s,o);this.mutationQueue.push(c);for(const d of o)this.br=this.br.add(new Sn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(e,t){return ge.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.vr(s),l=o<0?0:o;return ge.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Sn(t,0),o=new Sn(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([s,o],(c=>{const d=this.Dr(c.wr);l.push(d)})),ge.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new In(xt);return t.forEach((o=>{const l=new Sn(o,0),c=new Sn(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,c],(d=>{s=s.add(d.wr)}))})),ge.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Oe.isDocumentKey(l)||(l=l.child(""));const c=new Sn(new Oe(l),0);let d=new In(xt);return this.br.forEachWhile((m=>{const f=m.key.path;return!!s.isPrefixOf(f)&&(f.length===o&&(d=d.add(m.wr)),!0)}),c),ge.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((s=>{const o=this.Dr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){bt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return ge.forEach(t.mutations,(o=>{const l=new Sn(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=s}))}On(e){}containsKey(e,t){const s=new Sn(t,0),o=this.br.firstAfterOrEqual(s);return ge.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.Mr=e,this.docs=(function(){return new Kt(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.Mr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ge.resolve(s?s.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let s=Ks();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():qn.newInvalidDocument(o))})),ge.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Ks();const c=t.path,d=new Oe(c.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:f,value:{document:v}}=m.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||wS(bS(v),s)<=0||(o.has(v.key)||Qu(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ge.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Qe()}Or(e,t){return ge.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new OE(this)}getSize(e){return ge.resolve(this.size)}}class OE extends IE{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(s)})),ge.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.persistence=e,this.Nr=new Sa((t=>up(t)),dp),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xp,this.targetCount=0,this.kr=xa.Bn()}forEachTarget(e,t){return this.Nr.forEach(((s,o)=>t(o))),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Lr&&(this.Lr=t),ge.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new xa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Kn(t),ge.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.Nr.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.Nr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ge.waitFor(l).next((()=>o))}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const s=this.Nr.get(t)||null;return ge.resolve(s)}addMatchingKeys(e,t,s){return this.Br.Rr(t,s),ge.resolve()}removeMatchingKeys(e,t,s){this.Br.mr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),ge.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Br.yr(t);return ge.resolve(s)}containsKey(e,t){return ge.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,t){this.qr={},this.overlays={},this.Qr=new op(0),this.Kr=!1,this.Kr=!0,this.$r=new LE,this.referenceDelegate=e(this),this.Ur=new UE(this),this.indexManager=new PE,this.remoteDocumentCache=(function(o){return new FE(o)})((s=>this.referenceDelegate.Wr(s))),this.serializer=new jE(t),this.Gr=new DE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.qr[e.toKey()];return s||(s=new zE(t,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,s){De("MemoryPersistence","Starting transaction:",e);const o=new $E(this.Qr.next());return this.referenceDelegate.zr(),s(o).next((l=>this.referenceDelegate.jr(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Hr(e,t){return ge.or(Object.values(this.qr).map((s=>()=>s.containsKey(e,t))))}}class $E extends NS{constructor(e){super(),this.currentSequenceNumber=e}}class yp{constructor(e){this.persistence=e,this.Jr=new xp,this.Yr=null}static Zr(e){return new yp(e)}get Xr(){if(this.Yr)return this.Yr;throw Qe()}addReference(e,t,s){return this.Jr.addReference(s,t),this.Xr.delete(s.toString()),ge.resolve()}removeReference(e,t,s){return this.Jr.removeReference(s,t),this.Xr.add(s.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.Xr.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Xr,(s=>{const o=Oe.fromPath(s);return this.ei(e,o).next((l=>{l||t.removeEntry(o,tt.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((s=>{s?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return ge.or([()=>ge.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.$i=s,this.Ui=o}static Wi(e,t){let s=ct(),o=ct();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new vp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Z2()?8:SS(Q2())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.Yi(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.Zi(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new qE;return this.Xi(e,t,c).next((d=>{if(l.result=d,this.zi)return this.es(e,t,c,d.size)}))})).next((()=>l.result))}es(e,t,s,o){return s.documentReadCount<this.ji?(al()<=mt.DEBUG&&De("QueryEngine","SDK will not create cache indexes for query:",ia(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ge.resolve()):(al()<=mt.DEBUG&&De("QueryEngine","Query:",ia(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Hi*o?(al()<=mt.DEBUG&&De("QueryEngine","The SDK decides to create cache indexes for query:",ia(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(t))):ge.resolve())}Yi(e,t){if(X0(t))return ge.resolve(null);let s=ys(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Tf(t,null,"F"),s=ys(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=ct(...l);return this.Ji.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((m=>{const f=this.ts(t,d);return this.ns(t,f,c,m.readTime)?this.Yi(e,Tf(t,null,"F")):this.rs(e,f,t,m)}))))})))))}Zi(e,t,s,o){return X0(t)||o.isEqual(tt.min())?ge.resolve(null):this.Ji.getDocuments(e,s).next((l=>{const c=this.ts(t,l);return this.ns(t,c,s,o)?ge.resolve(null):(al()<=mt.DEBUG&&De("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ia(t)),this.rs(e,c,t,vS(o,-1)).next((d=>d)))}))}ts(e,t){let s=new In(Zv(e));return t.forEach(((o,l)=>{Qu(e,l)&&(s=s.add(l))})),s}ns(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,t,s){return al()<=mt.DEBUG&&De("QueryEngine","Using full collection scan to execute query:",ia(t)),this.Ji.getDocumentsMatchingQuery(e,t,ji.min(),s)}rs(e,t,s,o){return this.Ji.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t,s,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new Kt(xt),this._s=new Sa((l=>up(l)),dp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ME(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function WE(n,e,t,s){return new GE(n,e,t,s)}async function bb(n,e){const t=nt(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.ls(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let m=ct();for(const f of o){c.push(f.batchId);for(const v of f.mutations)m=m.add(v.key)}for(const f of l){d.push(f.batchId);for(const v of f.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(s,m).next((f=>({hs:f,removedBatchIds:c,addedBatchIds:d})))}))}))}function KE(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,m,f,v){const w=f.batch,N=w.keys();let E=ge.resolve();return N.forEach((I=>{E=E.next((()=>v.getEntry(m,I))).next((T=>{const A=f.docVersions.get(I);bt(A!==null),T.version.compareTo(A)<0&&(w.applyToRemoteDocument(T,f),T.isValidDocument()&&(T.setReadTime(f.commitVersion),v.addEntry(T)))}))})),E.next((()=>d.mutationQueue.removeMutationBatch(m,w)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let m=ct();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(m=m.add(d.batch.mutations[f].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function wb(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function JE(n,e){const t=nt(n),s=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const d=[];e.targetChanges.forEach(((v,w)=>{const N=o.get(w);if(!N)return;d.push(t.Ur.removeMatchingKeys(l,v.removedDocuments,w).next((()=>t.Ur.addMatchingKeys(l,v.addedDocuments,w))));let E=N.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?E=E.withResumeToken(Rn.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):v.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(v.resumeToken,s)),o=o.insert(w,E),(function(T,A,H){return T.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(N,E,v)&&d.push(t.Ur.updateTargetData(l,E))}));let m=Ks(),f=ct();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(YE(l,c,e.documentUpdates).next((v=>{m=v.Ps,f=v.Is}))),!s.isEqual(tt.min())){const v=t.Ur.getLastRemoteSnapshotVersion(l).next((w=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(v)}return ge.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,f))).next((()=>m))})).then((l=>(t.os=o,l)))}function YE(n,e,t){let s=ct(),o=ct();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=Ks();return t.forEach(((d,m)=>{const f=l.get(d);m.isFoundDocument()!==f.isFoundDocument()&&(o=o.add(d)),m.isNoDocument()&&m.version.isEqual(tt.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!f.isValidDocument()||m.version.compareTo(f.version)>0||m.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):De("LocalStore","Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",m.version)})),{Ps:c,Is:o}}))}function QE(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function XE(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Ur.getTargetData(s,e).next((l=>l?(o=l,ge.resolve(o)):t.Ur.allocateTargetId(s).next((c=>(o=new _i(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Ur.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.os.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(s.targetId,s),t._s.set(e,s.targetId)),s}))}async function Mf(n,e,t){const s=nt(n),o=s.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Fl(c))throw c;De("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}s.os=s.os.remove(e),s._s.delete(o.target)}function cx(n,e,t){const s=nt(n);let o=tt.min(),l=ct();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,f,v){const w=nt(m),N=w._s.get(v);return N!==void 0?ge.resolve(w.os.get(N)):w.Ur.getTargetData(f,v)})(s,c,ys(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>s.ss.getDocumentsMatchingQuery(c,e,t?o:tt.min(),t?l:ct()))).next((d=>(ZE(s,BS(e),d),{documents:d,Ts:l})))))}function ZE(n,e,t){let s=n.us.get(e)||tt.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.us.set(e,s)}class ux{constructor(){this.activeTargetIds=KS()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eC{constructor(){this.so=new ux,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,s){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ux,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){De("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){De("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu=null;function tf(){return cu===null?cu=(function(){return 268435456+Math.round(2147483648*Math.random())})():cu++,"0x"+cu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="WebChannelConnection";class sC extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+t.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(t,s,o,l,c){const d=tf(),m=this.xo(t,s.toUriEncodedString());De("RestConnection",`Sending RPC '${t}' ${d}:`,m,o);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,l,c),this.No(t,m,f,o).then((v=>(De("RestConnection",`Received RPC '${t}' ${d}: `,v),v)),(v=>{throw ha("RestConnection",`RPC '${t}' ${d} failed with error: `,v,"url: ",m,"request:",o),v}))}Lo(t,s,o,l,c,d){return this.Mo(t,s,o,l,c)}Oo(t,s,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_a})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((l,c)=>t[c]=l)),o&&o.headers.forEach(((l,c)=>t[c]=l))}xo(t,s){const o=nC[t];return`${this.Do}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,s,o){const l=tf();return new Promise(((c,d)=>{const m=new Dv;m.setWithCredentials(!0),m.listenOnce(Vv.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case xu.NO_ERROR:const v=m.getResponseJson();De(Un,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case xu.TIMEOUT:De(Un,`RPC '${e}' ${l} timed out`),d(new ke(le.DEADLINE_EXCEEDED,"Request time out"));break;case xu.HTTP_ERROR:const w=m.getStatus();if(De(Un,`RPC '${e}' ${l} failed with status:`,w,"response text:",m.getResponseText()),w>0){let N=m.getResponseJson();Array.isArray(N)&&(N=N[0]);const E=N==null?void 0:N.error;if(E&&E.status&&E.message){const I=(function(A){const H=A.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(H)>=0?H:le.UNKNOWN})(E.status);d(new ke(I,E.message))}else d(new ke(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ke(le.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{De(Un,`RPC '${e}' ${l} completed.`)}}));const f=JSON.stringify(o);De(Un,`RPC '${e}' ${l} sending request:`,o),m.send(t,"POST",f,s,15)}))}Bo(e,t,s){const o=tf(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Fv(),d=zv(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(m.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Oo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const v=l.join("");De(Un,`Creating RPC '${e}' stream ${o}: ${v}`,m);const w=c.createWebChannel(v,m);let N=!1,E=!1;const I=new rC({Io:A=>{E?De(Un,`Not sending because RPC '${e}' stream ${o} is closed:`,A):(N||(De(Un,`Opening RPC '${e}' stream ${o} transport.`),w.open(),N=!0),De(Un,`RPC '${e}' stream ${o} sending:`,A),w.send(A))},To:()=>w.close()}),T=(A,H,W)=>{A.listen(H,(K=>{try{W(K)}catch(te){setTimeout((()=>{throw te}),0)}}))};return T(w,cl.EventType.OPEN,(()=>{E||(De(Un,`RPC '${e}' stream ${o} transport opened.`),I.yo())})),T(w,cl.EventType.CLOSE,(()=>{E||(E=!0,De(Un,`RPC '${e}' stream ${o} transport closed`),I.So())})),T(w,cl.EventType.ERROR,(A=>{E||(E=!0,ha(Un,`RPC '${e}' stream ${o} transport errored:`,A),I.So(new ke(le.UNAVAILABLE,"The operation could not be completed")))})),T(w,cl.EventType.MESSAGE,(A=>{var H;if(!E){const W=A.data[0];bt(!!W);const K=W,te=K.error||((H=K[0])===null||H===void 0?void 0:H.error);if(te){De(Un,`RPC '${e}' stream ${o} received error:`,te);const pe=te.status;let J=(function(z){const F=ln[z];if(F!==void 0)return ub(F)})(pe),O=te.message;J===void 0&&(J=le.INTERNAL,O="Unknown error status: "+pe+" with message "+te.message),E=!0,I.So(new ke(J,O)),w.close()}else De(Un,`RPC '${e}' stream ${o} received:`,W),I.bo(W)}})),T(d,Lv.STAT_EVENT,(A=>{A.stat===Nf.PROXY?De(Un,`RPC '${e}' stream ${o} detected buffering proxy`):A.stat===Nf.NOPROXY&&De(Un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{I.wo()}),0),I}}function nf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(n){return new pE(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,t,s=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=s,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-s);o>0&&De("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,t,s,o,l,c,d,m){this.ui=e,this.Ho=s,this.Jo=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new _b(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Ws(t.toString()),Ws("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.Yo===t&&this.P_(s,o)}),(s=>{e((()=>{const o=new ke(le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(o)}))}))}P_(e,t){const s=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{s((()=>this.listener.Eo()))})),this.stream.Ro((()=>{s((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{s((()=>this.I_(o)))})),this.stream.onMessage((o=>{s((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return De("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(De("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iC extends Nb{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=xE(this.serializer,e),s=(function(l){if(!("targetChange"in l))return tt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?tt.min():c.readTime?vs(c.readTime):tt.min()})(e);return this.listener.d_(t,s)}A_(e){const t={};t.database=Rf(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=kf(m)?{documents:bE(l,m)}:{query:wE(l,m)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=fb(l,c.resumeToken);const f=Pf(l,c.expectedCount);f!==null&&(d.expectedCount=f)}else if(c.snapshotVersion.compareTo(tt.min())>0){d.readTime=Mu(l,c.snapshotVersion.toTimestamp());const f=Pf(l,c.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const s=NE(this.serializer,e);s&&(t.labels=s),this.a_(t)}R_(e){const t={};t.database=Rf(this.serializer),t.removeTarget=e,this.a_(t)}}class oC extends Nb{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return bt(!!e.streamToken),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=vE(e.writeResults,e.commitTime),s=vs(e.commitTime);return this.listener.g_(s,t)}p_(){const e={};e.database=Rf(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>yE(this.serializer,s)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ke(le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Mo(e,Af(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(le.UNKNOWN,l.toString())}))}Lo(e,t,s,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Lo(e,Af(t,s),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ke(le.UNKNOWN,c.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class lC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ws(t),this.D_=!1):De("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((c=>{s.enqueueAndForget((async()=>{No(this)&&(De("RemoteStore","Restarting streams for network reachability change."),await(async function(m){const f=nt(m);f.L_.add(4),await Bl(f),f.q_.set("Unknown"),f.L_.delete(4),await nd(f)})(this))}))})),this.q_=new lC(s,o)}}async function nd(n){if(No(n))for(const e of n.B_)await e(!0)}async function Bl(n){for(const e of n.B_)await e(!1)}function Sb(n,e){const t=nt(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Np(t)?_p(t):Ea(t).r_()&&wp(t,e))}function bp(n,e){const t=nt(n),s=Ea(t);t.N_.delete(e),s.r_()&&Eb(t,e),t.N_.size===0&&(s.r_()?s.o_():No(t)&&t.q_.set("Unknown"))}function wp(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ea(n).A_(e)}function Eb(n,e){n.Q_.xe(e),Ea(n).R_(e)}function _p(n){n.Q_=new uE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ea(n).start(),n.q_.v_()}function Np(n){return No(n)&&!Ea(n).n_()&&n.N_.size>0}function No(n){return nt(n).L_.size===0}function Cb(n){n.Q_=void 0}async function uC(n){n.q_.set("Online")}async function dC(n){n.N_.forEach(((e,t)=>{wp(n,e)}))}async function hC(n,e){Cb(n),Np(n)?(n.q_.M_(e),_p(n)):n.q_.set("Unknown")}async function fC(n,e,t){if(n.q_.set("Online"),e instanceof hb&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.N_.delete(d),o.Q_.removeTarget(d))})(n,e)}catch(s){De("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Du(n,s)}else if(e instanceof bu?n.Q_.Ke(e):e instanceof db?n.Q_.He(e):n.Q_.We(e),!t.isEqual(tt.min()))try{const s=await wb(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Q_.rt(c);return d.targetChanges.forEach(((m,f)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.N_.get(f);v&&l.N_.set(f,v.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,f)=>{const v=l.N_.get(m);if(!v)return;l.N_.set(m,v.withResumeToken(Rn.EMPTY_BYTE_STRING,v.snapshotVersion)),Eb(l,m);const w=new _i(v.target,m,f,v.sequenceNumber);wp(l,w)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){De("RemoteStore","Failed to raise snapshot:",s),await Du(n,s)}}async function Du(n,e,t){if(!Fl(e))throw e;n.L_.add(1),await Bl(n),n.q_.set("Offline"),t||(t=()=>wb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{De("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await nd(n)}))}function kb(n,e){return e().catch((t=>Du(n,t,e)))}async function rd(n){const e=nt(n),t=Pi(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;pC(e);)try{const o=await QE(e.localStore,s);if(o===null){e.O_.length===0&&t.o_();break}s=o.batchId,mC(e,o)}catch(o){await Du(e,o)}jb(e)&&Tb(e)}function pC(n){return No(n)&&n.O_.length<10}function mC(n,e){n.O_.push(e);const t=Pi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function jb(n){return No(n)&&!Pi(n).n_()&&n.O_.length>0}function Tb(n){Pi(n).start()}async function gC(n){Pi(n).p_()}async function xC(n){const e=Pi(n);for(const t of n.O_)e.m_(t.mutations)}async function yC(n,e,t){const s=n.O_.shift(),o=pp.from(s,e,t);await kb(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await rd(n)}async function vC(n,e){e&&Pi(n).V_&&await(async function(s,o){if((function(c){return aE(c)&&c!==le.ABORTED})(o.code)){const l=s.O_.shift();Pi(s).s_(),await kb(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await rd(s)}})(n,e),jb(n)&&Tb(n)}async function hx(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),De("RemoteStore","RemoteStore received new credentials");const s=No(t);t.L_.add(3),await Bl(t),s&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await nd(t)}async function bC(n,e){const t=nt(n);e?(t.L_.delete(2),await nd(t)):e||(t.L_.add(2),await Bl(t),t.q_.set("Unknown"))}function Ea(n){return n.K_||(n.K_=(function(t,s,o){const l=nt(t);return l.w_(),new iC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Eo:uC.bind(null,n),Ro:dC.bind(null,n),mo:hC.bind(null,n),d_:fC.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Np(n)?_p(n):n.q_.set("Unknown")):(await n.K_.stop(),Cb(n))}))),n.K_}function Pi(n){return n.U_||(n.U_=(function(t,s,o){const l=nt(t);return l.w_(),new oC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:gC.bind(null,n),mo:vC.bind(null,n),f_:xC.bind(null,n),g_:yC.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await rd(n)):(await n.U_.stop(),n.O_.length>0&&(De("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,d=new Sp(e,t,c,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ep(n,e){if(Ws("AsyncQueue",`${e}: ${n}`),Fl(n))return new ke(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Oe.comparator(t.key,s.key):(t,s)=>Oe.comparator(t.key,s.key),this.keyedMap=ul(),this.sortedSet=new Kt(this.comparator)}static emptySet(e){return new da(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new da;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.W_=new Kt(Oe.comparator)}track(e){const t=e.doc.key,s=this.W_.get(t);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(t,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(t):e.type===1&&s.type===2?this.W_=this.W_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Qe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ya{constructor(e,t,s,o,l,c,d,m,f){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=f}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new ya(e,t,da.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class _C{constructor(){this.queries=px(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,s){const o=nt(t),l=o.queries;o.queries=px(),l.forEach(((c,d)=>{for(const m of d.j_)m.onError(s)}))})(this,new ke(le.ABORTED,"Firestore shutting down"))}}function px(){return new Sa((n=>Xv(n)),Yu)}async function Cp(n,e){const t=nt(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.H_()&&e.J_()&&(s=2):(l=new wC,s=e.J_()?0:1);try{switch(s){case 0:l.z_=await t.onListen(o,!0);break;case 1:l.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=Ep(c,`Initialization of query '${ia(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&jp(t)}async function kp(n,e){const t=nt(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.j_.indexOf(e);c>=0&&(l.j_.splice(c,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function NC(n,e){const t=nt(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.j_)d.X_(o)&&(s=!0);c.z_=o}}s&&jp(t)}function SC(n,e,t){const s=nt(n),o=s.queries.get(e);if(o)for(const l of o.j_)l.onError(t);s.queries.delete(e)}function jp(n){n.Y_.forEach((e=>{e.next()}))}var Df,mx;(mx=Df||(Df={})).ea="default",mx.Cache="cache";class Tp{constructor(e,t,s){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ya(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const s=t!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Df.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.key=e}}class Ab{constructor(e){this.key=e}}class EC{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ct(),this.mutatedKeys=ct(),this.Aa=Zv(e),this.Ra=new da(this.Aa)}get Va(){return this.Ta}ma(e,t){const s=t?t.fa:new fx,o=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,f=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,w)=>{const N=o.get(v),E=Qu(this.query,w)?w:null,I=!!N&&this.mutatedKeys.has(N.key),T=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let A=!1;N&&E?N.data.isEqual(E.data)?I!==T&&(s.track({type:3,doc:E}),A=!0):this.ga(N,E)||(s.track({type:2,doc:E}),A=!0,(m&&this.Aa(E,m)>0||f&&this.Aa(E,f)<0)&&(d=!0)):!N&&E?(s.track({type:0,doc:E}),A=!0):N&&!E&&(s.track({type:1,doc:N}),A=!0,(m||f)&&(d=!0)),A&&(E?(c=c.add(E),l=T?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{Ra:c,fa:s,ns:d,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort(((v,w)=>(function(E,I){const T=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return T(E)-T(I)})(v.type,w.type)||this.Aa(v.doc,w.doc))),this.pa(s),o=o!=null&&o;const d=t&&!o?this.ya():[],m=this.da.size===0&&this.current&&!o?1:0,f=m!==this.Ea;return this.Ea=m,c.length!==0||f?{snapshot:new ya(this.query,e.Ra,l,c,e.mutatedKeys,m===0,f,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ct(),this.Ra.forEach((s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))}));const t=[];return e.forEach((s=>{this.da.has(s)||t.push(new Ab(s))})),this.da.forEach((s=>{e.has(s)||t.push(new Pb(s))})),t}ba(e){this.Ta=e.Ts,this.da=ct();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ya.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class CC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class kC{constructor(e){this.key=e,this.va=!1}}class jC{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Sa((d=>Xv(d)),Yu),this.Ma=new Map,this.xa=new Set,this.Oa=new Kt(Oe.comparator),this.Na=new Map,this.La=new xp,this.Ba={},this.ka=new Map,this.qa=xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function TC(n,e,t=!0){const s=Lb(n);let o;const l=s.Fa.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await Ib(s,e,t,!0),o}async function PC(n,e){const t=Lb(n);await Ib(t,e,!0,!1)}async function Ib(n,e,t,s){const o=await XE(n.localStore,ys(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await AC(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&Sb(n.remoteStore,o),d}async function AC(n,e,t,s,o){n.Ka=(w,N,E)=>(async function(T,A,H,W){let K=A.view.ma(H);K.ns&&(K=await cx(T.localStore,A.query,!1).then((({documents:O})=>A.view.ma(O,K))));const te=W&&W.targetChanges.get(A.targetId),pe=W&&W.targetMismatches.get(A.targetId)!=null,J=A.view.applyChanges(K,T.isPrimaryClient,te,pe);return xx(T,A.targetId,J.wa),J.snapshot})(n,w,N,E);const l=await cx(n.localStore,e,!0),c=new EC(e,l.Ts),d=c.ma(l.documents),m=Ul.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),f=c.applyChanges(d,n.isPrimaryClient,m);xx(n,t,f.wa);const v=new CC(e,t,c);return n.Fa.set(e,v),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),f.snapshot}async function IC(n,e,t){const s=nt(n),o=s.Fa.get(e),l=s.Ma.get(o.targetId);if(l.length>1)return s.Ma.set(o.targetId,l.filter((c=>!Yu(c,e)))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Mf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&bp(s.remoteStore,o.targetId),Vf(s,o.targetId)})).catch(zl)):(Vf(s,o.targetId),await Mf(s.localStore,o.targetId,!0))}async function RC(n,e){const t=nt(n),s=t.Fa.get(e),o=t.Ma.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),bp(t.remoteStore,s.targetId))}async function MC(n,e,t){const s=UC(n);try{const o=await(function(c,d){const m=nt(c),f=xn.now(),v=d.reduce(((E,I)=>E.add(I.key)),ct());let w,N;return m.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let I=Ks(),T=ct();return m.cs.getEntries(E,v).next((A=>{I=A,I.forEach(((H,W)=>{W.isValidDocument()||(T=T.add(H))}))})).next((()=>m.localDocuments.getOverlayedDocuments(E,I))).next((A=>{w=A;const H=[];for(const W of d){const K=nE(W,w.get(W.key).overlayedDocument);K!=null&&H.push(new Di(W.key,K,qv(K.value.mapValue),ns.exists(!0)))}return m.mutationQueue.addMutationBatch(E,f,H,d)})).next((A=>{N=A;const H=A.applyToLocalDocumentSet(w,T);return m.documentOverlayCache.saveOverlays(E,A.batchId,H)}))})).then((()=>({batchId:N.batchId,changes:tb(w)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,d,m){let f=c.Ba[c.currentUser.toKey()];f||(f=new Kt(xt)),f=f.insert(d,m),c.Ba[c.currentUser.toKey()]=f})(s,o.batchId,t),await $l(s,o.changes),await rd(s.remoteStore)}catch(o){const l=Ep(o,"Failed to persist write");t.reject(l)}}async function Rb(n,e){const t=nt(n);try{const s=await JE(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Na.get(l);c&&(bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.va=!0:o.modifiedDocuments.size>0?bt(c.va):o.removedDocuments.size>0&&(bt(c.va),c.va=!1))})),await $l(t,s,e)}catch(s){await zl(s)}}function gx(n,e,t){const s=nt(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Fa.forEach(((l,c)=>{const d=c.view.Z_(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const m=nt(c);m.onlineState=d;let f=!1;m.queries.forEach(((v,w)=>{for(const N of w.j_)N.Z_(d)&&(f=!0)})),f&&jp(m)})(s.eventManager,e),o.length&&s.Ca.d_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function DC(n,e,t){const s=nt(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Na.get(e),l=o&&o.key;if(l){let c=new Kt(Oe.comparator);c=c.insert(l,qn.newNoDocument(l,tt.min()));const d=ct().add(l),m=new ed(tt.min(),new Map,new Kt(xt),c,d);await Rb(s,m),s.Oa=s.Oa.remove(l),s.Na.delete(e),Pp(s)}else await Mf(s.localStore,e,!1).then((()=>Vf(s,e,t))).catch(zl)}async function VC(n,e){const t=nt(n),s=e.batch.batchId;try{const o=await KE(t.localStore,e);Db(t,s,null),Mb(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await $l(t,o)}catch(o){await zl(o)}}async function LC(n,e,t){const s=nt(n);try{const o=await(function(c,d){const m=nt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let v;return m.mutationQueue.lookupMutationBatch(f,d).next((w=>(bt(w!==null),v=w.keys(),m.mutationQueue.removeMutationBatch(f,w)))).next((()=>m.mutationQueue.performConsistencyCheck(f))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(f,v,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,v))).next((()=>m.localDocuments.getDocuments(f,v)))}))})(s.localStore,e);Db(s,e,t),Mb(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await $l(s,o)}catch(o){await zl(o)}}function Mb(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function Db(n,e,t){const s=nt(n);let o=s.Ba[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ba[s.currentUser.toKey()]=o}}function Vf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Ma.get(e))n.Fa.delete(s),t&&n.Ca.$a(s,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((s=>{n.La.containsKey(s)||Vb(n,s)}))}function Vb(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(bp(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Pp(n))}function xx(n,e,t){for(const s of t)s instanceof Pb?(n.La.addReference(s.key,e),zC(n,s)):s instanceof Ab?(De("SyncEngine","Document no longer in limbo: "+s.key),n.La.removeReference(s.key,e),n.La.containsKey(s.key)||Vb(n,s.key)):Qe()}function zC(n,e){const t=e.key,s=t.path.canonicalString();n.Oa.get(t)||n.xa.has(s)||(De("SyncEngine","New document in limbo: "+t),n.xa.add(s),Pp(n))}function Pp(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Oe(Ft.fromString(e)),s=n.qa.next();n.Na.set(s,new kC(t)),n.Oa=n.Oa.insert(t,s),Sb(n.remoteStore,new _i(ys(Ju(t.path)),s,"TargetPurposeLimboResolution",op.oe))}}async function $l(n,e,t){const s=nt(n),o=[],l=[],c=[];s.Fa.isEmpty()||(s.Fa.forEach(((d,m)=>{c.push(s.Ka(m,e,t).then((f=>{var v;if((f||t)&&s.isPrimaryClient){const w=f?!f.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(m.targetId,w?"current":"not-current")}if(f){o.push(f);const w=vp.Wi(m.targetId,f);l.push(w)}})))})),await Promise.all(c),s.Ca.d_(o),await(async function(m,f){const v=nt(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ge.forEach(f,(N=>ge.forEach(N.$i,(E=>v.persistence.referenceDelegate.addReference(w,N.targetId,E))).next((()=>ge.forEach(N.Ui,(E=>v.persistence.referenceDelegate.removeReference(w,N.targetId,E)))))))))}catch(w){if(!Fl(w))throw w;De("LocalStore","Failed to update sequence numbers: "+w)}for(const w of f){const N=w.targetId;if(!w.fromCache){const E=v.os.get(N),I=E.snapshotVersion,T=E.withLastLimboFreeSnapshotVersion(I);v.os=v.os.insert(N,T)}}})(s.localStore,l))}async function FC(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){De("SyncEngine","User change. New user:",e.toKey());const s=await bb(t.localStore,e);t.currentUser=e,(function(l,c){l.ka.forEach((d=>{d.forEach((m=>{m.reject(new ke(le.CANCELLED,c))}))})),l.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await $l(t,s.hs)}}function OC(n,e){const t=nt(n),s=t.Na.get(e);if(s&&s.va)return ct().add(s.key);{let o=ct();const l=t.Ma.get(e);if(!l)return o;for(const c of l){const d=t.Fa.get(c);o=o.unionWith(d.view.Va)}return o}}function Lb(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DC.bind(null,e),e.Ca.d_=NC.bind(null,e.eventManager),e.Ca.$a=SC.bind(null,e.eventManager),e}function UC(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LC.bind(null,e),e}class Vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=td(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return WE(this.persistence,new HE,e.initialUser,this.serializer)}Ga(e){return new BE(yp.Zr,this.serializer)}Wa(e){return new eC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vu.provider={build:()=>new Vu};class Lf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gx(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=FC.bind(null,this.syncEngine),await bC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _C})()}createDatastore(e){const t=td(e.databaseInfo.databaseId),s=(function(l){return new sC(l)})(e.databaseInfo);return(function(l,c,d,m){return new aC(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,d){return new cC(s,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>gx(this.syncEngine,t,0)),(function(){return dx.D()?new dx:new tC})())}createSyncEngine(e,t){return(function(o,l,c,d,m,f,v){const w=new jC(o,l,c,d,m,f);return v&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=nt(o);De("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await Bl(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Lf.provider={build:()=>new Lf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ws("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Bn.UNAUTHENTICATED,this.clientId=Uv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{De("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(De("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Ep(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function rf(n,e){n.asyncQueue.verifyOperationInProgress(),De("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await bb(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function yx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await $C(n);De("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>hx(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>hx(e.remoteStore,o))),n._onlineComponents=e}async function $C(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){De("FirestoreClient","Using user provided OfflineComponentProvider");try{await rf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===le.FAILED_PRECONDITION||o.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ha("Error using user provided cache. Falling back to memory cache: "+t),await rf(n,new Vu)}}else De("FirestoreClient","Using default OfflineComponentProvider"),await rf(n,new Vu);return n._offlineComponents}async function zb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(De("FirestoreClient","Using user provided OnlineComponentProvider"),await yx(n,n._uninitializedComponentsProvider._online)):(De("FirestoreClient","Using default OnlineComponentProvider"),await yx(n,new Lf))),n._onlineComponents}function qC(n){return zb(n).then((e=>e.syncEngine))}async function Lu(n){const e=await zb(n),t=e.eventManager;return t.onListen=TC.bind(null,e.syncEngine),t.onUnlisten=IC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=RC.bind(null,e.syncEngine),t}function HC(n,e,t={}){const s=new $s;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,f){const v=new Ap({next:N=>{v.Za(),c.enqueueAndForget((()=>kp(l,w)));const E=N.docs.has(d);!E&&N.fromCache?f.reject(new ke(le.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&N.fromCache&&m&&m.source==="server"?f.reject(new ke(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(N)},error:N=>f.reject(N)}),w=new Tp(Ju(d.path),v,{includeMetadataChanges:!0,_a:!0});return Cp(l,w)})(await Lu(n),n.asyncQueue,e,t,s))),s.promise}function GC(n,e,t={}){const s=new $s;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,f){const v=new Ap({next:N=>{v.Za(),c.enqueueAndForget((()=>kp(l,w))),N.fromCache&&m.source==="server"?f.reject(new ke(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(N)},error:N=>f.reject(N)}),w=new Tp(d,v,{includeMetadataChanges:!0,_a:!0});return Cp(l,w)})(await Lu(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(n,e,t){if(!t)throw new ke(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function WC(n,e,t,s){if(e===!0&&s===!0)throw new ke(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bx(n){if(!Oe.isDocumentKey(n))throw new ke(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wx(n){if(Oe.isDocumentKey(n))throw new ke(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Qe()}function Sr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sd(n);throw new ke(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ke(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fb((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ke(le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ke(le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ke(le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class id{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _x({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _x(e),e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new uS;switch(s.type){case"firstParty":return new pS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ke(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=vx.get(t);s&&(De("ComponentProvider","Removing Datastore"),vx.delete(t),s.terminate())})(this),Promise.resolve()}}function KC(n,e,t,s={}){var o;const l=(n=Sr(n,id))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&ha("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),s.mockUserToken){let d,m;if(typeof s.mockUserToken=="string")d=s.mockUserToken,m=Bn.MOCK_USER;else{d=Y2(s.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new ke(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Bn(f)}n._authCredentials=new dS(new Ov(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Vi(this.firestore,e,this._query)}}class Hn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class ki extends Vi{constructor(e,t,s){super(e,t,Ju(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new Oe(e))}withConverter(e){return new ki(this.firestore,e,this._path)}}function xs(n,e,...t){if(n=bs(n),Ob("collection","path",e),n instanceof id){const s=Ft.fromString(e,...t);return wx(s),new ki(n,null,s)}{if(!(n instanceof Hn||n instanceof ki))throw new ke(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ft.fromString(e,...t));return wx(s),new ki(n.firestore,null,s)}}function St(n,e,...t){if(n=bs(n),arguments.length===1&&(e=Uv.newId()),Ob("doc","path",e),n instanceof id){const s=Ft.fromString(e,...t);return bx(s),new Hn(n,null,new Oe(s))}{if(!(n instanceof Hn||n instanceof ki))throw new ke(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ft.fromString(e,...t));return bx(s),new Hn(n.firestore,n instanceof ki?n.converter:null,new Oe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new _b(this,"async_queue_retry"),this.Vu=()=>{const s=nf();s&&De("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const t=nf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=nf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new $s;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fl(e))throw e;De("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((s=>{this.Eu=s,this.du=!1;const o=(function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d})(s);throw Ws("INTERNAL UNHANDLED ERROR: ",o),s})).then((s=>(this.du=!1,s))))));return this.mu=t,t}enqueueAfterDelay(e,t,s){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Sp.createAndSchedule(this,e,t,s,(l=>this.yu(l)));return this.Tu.push(o),o}fu(){this.Eu&&Qe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Sx(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Ai extends id{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Nx,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nx(e),this._firestoreClient=void 0,await e}}}function JC(n,e){const t=typeof n=="object"?n:Ev(),s=typeof n=="string"?n:e,o=_v(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=J2("firestore");l&&KC(o,...l)}return o}function od(n){if(n._terminated)throw new ke(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||YC(n),n._firestoreClient}function YC(n){var e,t,s;const o=n._freezeSettings(),l=(function(d,m,f,v){return new kS(d,m,f,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Fb(v.experimentalLongPollingOptions),v.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new BC(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this._byteString=e}static fromBase64String(e){try{return new va(Rn.fromBase64String(e))}catch(t){throw new ke(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new va(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=/^__.*__$/;class XC{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ol(e,this.data,t,this.fieldTransforms)}}class Ub{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Di(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Bb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class cd{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new cd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:s,xu:!1});return o.Ou(e),o}Nu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:s,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Bb(this.Cu)&&QC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ZC{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||td(e)}Qu(e,t,s,o=!1){return new cd({Cu:e,methodName:t,qu:s,path:An.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mp(n){const e=n._freezeSettings(),t=td(n._databaseId);return new ZC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ek(n,e,t,s,o,l={}){const c=n.Qu(l.merge||l.mergeFields?2:0,e,t,o);Vp("Data must be an object, but it was:",c,s);const d=$b(s,c);let m,f;if(l.merge)m=new wr(c.fieldMask),f=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const w of l.mergeFields){const N=zf(e,w,t);if(!c.contains(N))throw new ke(le.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);Hb(v,N)||v.push(N)}m=new wr(v),f=c.fieldTransforms.filter((w=>m.covers(w.field)))}else m=null,f=c.fieldTransforms;return new XC(new ur(d),m,f)}class ud extends ld{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ud}}function tk(n,e,t){return new cd({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Dp extends ld{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=tk(this,e,!0),s=this.Ku.map((l=>Ca(l,t))),o=new ga(s);return new XS(e.path,o)}isEqual(e){return e instanceof Dp&&Rv(this.Ku,e.Ku)}}function nk(n,e,t,s){const o=n.Qu(1,e,t);Vp("Data must be an object, but it was:",o,s);const l=[],c=ur.empty();_o(s,((m,f)=>{const v=Lp(e,m,t);f=bs(f);const w=o.Nu(v);if(f instanceof ud)l.push(v);else{const N=Ca(f,w);N!=null&&(l.push(v),c.set(v,N))}}));const d=new wr(l);return new Ub(c,d,o.fieldTransforms)}function rk(n,e,t,s,o,l){const c=n.Qu(1,e,t),d=[zf(e,s,t)],m=[o];if(l.length%2!=0)throw new ke(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<l.length;N+=2)d.push(zf(e,l[N])),m.push(l[N+1]);const f=[],v=ur.empty();for(let N=d.length-1;N>=0;--N)if(!Hb(f,d[N])){const E=d[N];let I=m[N];I=bs(I);const T=c.Nu(E);if(I instanceof ud)f.push(E);else{const A=Ca(I,T);A!=null&&(f.push(E),v.set(E,A))}}const w=new wr(f);return new Ub(v,w,c.fieldTransforms)}function sk(n,e,t,s=!1){return Ca(t,n.Qu(s?4:3,e))}function Ca(n,e){if(qb(n=bs(n)))return Vp("Unsupported field value:",e,n),$b(n,e);if(n instanceof ld)return(function(s,o){if(!Bb(o.Cu))throw o.Bu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const d of s){let m=Ca(d,o.Lu(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=bs(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return JS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=xn.fromDate(s);return{timestampValue:Mu(o.serializer,l)}}if(s instanceof xn){const l=new xn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Mu(o.serializer,l)}}if(s instanceof Ip)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof va)return{bytesValue:fb(o.serializer,s._byteString)};if(s instanceof Hn){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:gp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Rp)return(function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw d.Bu("VectorValues must only contain numeric values.");return hp(d.serializer,m)}))}}}}}})(s,o);throw o.Bu(`Unsupported field value: ${sd(s)}`)})(n,e)}function $b(n,e){const t={};return Bv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(n,((s,o)=>{const l=Ca(o,e.Mu(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function qb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof xn||n instanceof Ip||n instanceof va||n instanceof Hn||n instanceof ld||n instanceof Rp)}function Vp(n,e,t){if(!qb(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const s=sd(t);throw s==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+s)}}function zf(n,e,t){if((e=bs(e))instanceof ad)return e._internalPath;if(typeof e=="string")return Lp(n,e);throw zu("Field path arguments must be of type string or ",n,!1,void 0,t)}const ik=new RegExp("[~\\*/\\[\\]]");function Lp(n,e,t){if(e.search(ik)>=0)throw zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ad(...e.split("."))._internalPath}catch{throw zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zu(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${s}`),c&&(m+=` in document ${o}`),m+=")"),new ke(le.INVALID_ARGUMENT,d+n+m)}function Hb(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ok(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ok extends Gb{data(){return super.data()}}function dd(n,e){return typeof e=="string"?Lp(n,e):e instanceof ad?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ke(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zp{}class Kb extends zp{}function Fs(n,e,...t){let s=[];e instanceof zp&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((m=>m instanceof Fp)).length,d=l.filter((m=>m instanceof hd)).length;if(c>1||c>0&&d>0)throw new ke(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class hd extends Kb{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new hd(e,t,s)}_apply(e){const t=this._parse(e);return Jb(e._query,t),new Vi(e.firestore,e.converter,jf(e._query,t))}_parse(e){const t=Mp(e.firestore);return(function(l,c,d,m,f,v,w){let N;if(f.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ke(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Cx(w,v);const E=[];for(const I of w)E.push(Ex(m,l,I));N={arrayValue:{values:E}}}else N=Ex(m,l,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Cx(w,v),N=sk(d,c,w,v==="in"||v==="not-in");return cn.create(f,v,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function la(n,e,t){const s=e,o=dd("where",n);return hd._create(o,s,t)}class Fp extends zp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:rs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const d=l.getFlattenedFilters();for(const m of d)Jb(c,m),c=jf(c,m)})(e._query,t),new Vi(e.firestore,e.converter,jf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Op extends Kb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Op(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new ke(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ke(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jl(l,c)})(e._query,this._field,this._direction);return new Vi(e.firestore,e.converter,(function(o,l){const c=o.explicitOrderBy.concat([l]);return new Na(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function sf(n,e="asc"){const t=e,s=dd("orderBy",n);return Op._create(s,t)}function Ex(n,e,t){if(typeof(t=bs(t))=="string"){if(t==="")throw new ke(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qv(e)&&t.indexOf("/")!==-1)throw new ke(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ft.fromString(t));if(!Oe.isDocumentKey(s))throw new ke(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return G0(n,new Oe(s))}if(t instanceof Hn)return G0(n,t._key);throw new ke(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sd(t)}.`)}function Cx(n,e){if(!Array.isArray(n)||n.length===0)throw new ke(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Jb(n,e){const t=(function(o,l){for(const c of o)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ke(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ke(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ak{convertValue(e,t="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return _o(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((c=>tn(c.doubleValue)));return new Rp(l)}convertGeoPoint(e){return new Ip(tn(e.latitude),tn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=lp(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const t=Ti(e);return new xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ft.fromString(e);bt(vb(s));const o=new Cl(s.get(1),s.get(3)),l=new Oe(s.popFirst(5));return o.isEqual(t)||Ws(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(n,e,t){let s;return s=n?n.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yb extends Gb{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(dd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class wu extends Yb{data(e={}){return super.data(e)}}class Qb{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new hl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new wu(this._firestore,this._userDataWriter,s.key,s,new hl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const m=new wu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new hl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new wu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new hl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let f=-1,v=-1;return d.type!==0&&(f=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:ck(d.type),doc:m,oldIndex:f,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ck(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(n){n=Sr(n,Hn);const e=Sr(n.firestore,Ai);return HC(od(e),n._key).then((t=>Xb(e,n,t)))}class Up extends ak{constructor(e){super(),this.firestore=e}convertBytes(e){return new va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}function ca(n){n=Sr(n,Vi);const e=Sr(n.firestore,Ai),t=od(e),s=new Up(e);return Wb(n._query),GC(t,n._query).then((o=>new Qb(e,s,n,o)))}function oo(n,e,t){n=Sr(n,Hn);const s=Sr(n.firestore,Ai),o=lk(n.converter,e);return Bp(s,[ek(Mp(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ns.none())])}function an(n,e,t,...s){n=Sr(n,Hn);const o=Sr(n.firestore,Ai),l=Mp(o);let c;return c=typeof(e=bs(e))=="string"||e instanceof ad?rk(l,"updateDoc",n._key,e,t,s):nk(l,"updateDoc",n._key,e),Bp(o,[c.toMutation(n._key,ns.exists(!0))])}function of(n){return Bp(Sr(n.firestore,Ai),[new fp(n._key,ns.none())])}function uu(n,...e){var t,s,o;n=bs(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Sx(e[c])||(l=e[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Sx(e[c])){const w=e[c];e[c]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[c+1]=(s=w.error)===null||s===void 0?void 0:s.bind(w),e[c+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let m,f,v;if(n instanceof Hn)f=Sr(n.firestore,Ai),v=Ju(n._key.path),m={next:w=>{e[c]&&e[c](Xb(f,n,w))},error:e[c+1],complete:e[c+2]};else{const w=Sr(n,Vi);f=Sr(w.firestore,Ai),v=w._query;const N=new Up(f);m={next:E=>{e[c]&&e[c](new Qb(f,N,w,E))},error:e[c+1],complete:e[c+2]},Wb(n._query)}return(function(N,E,I,T){const A=new Ap(T),H=new Tp(E,A,I);return N.asyncQueue.enqueueAndForget((async()=>Cp(await Lu(N),H))),()=>{A.Za(),N.asyncQueue.enqueueAndForget((async()=>kp(await Lu(N),H)))}})(od(f),v,d,m)}function Bp(n,e){return(function(s,o){const l=new $s;return s.asyncQueue.enqueueAndForget((async()=>MC(await qC(s),o,l))),l.promise})(od(n),e)}function Xb(n,e,t){const s=t.docs.get(e._key),o=new Up(n);return new Yb(n,o,e._key,s,new hl(t.hasPendingWrites,t.fromCache),e.converter)}function Ff(...n){return new Dp("arrayUnion",n)}(function(e,t=!0){(function(o){_a=o})(Nv),_l(new sS("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new Ai(new hS(s.getProvider("auth-internal")),new gS(s.getProvider("app-check-internal")),(function(f,v){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ke(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(f.options.projectId,v)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Ci(U0,"4.7.3",e),Ci(U0,"4.7.3","esm2017")})();var kx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},dk=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],m=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,m=o+2<n.length,f=m?n[o+2]:0,v=l>>2,w=(l&3)<<4|d>>4;let N=(d&15)<<2|f>>6,E=f&63;m||(E=64,c||(N=64)),s.push(t[v],t[w],t[N],t[E])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Zb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):dk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const f=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||f==null||w==null)throw new hk;const N=l<<2|d>>4;if(s.push(N),f!==64){const E=d<<4&240|f>>2;if(s.push(E),w!==64){const I=f<<6&192|w;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class hk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fk=function(n){const e=Zb(n);return ew.encodeByteArray(e,!0)},jx=function(n){return fk(n).replace(/\./g,"")},pk=function(n){try{return ew.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=()=>mk().__FIREBASE_DEFAULTS__,xk=()=>{if(typeof process>"u"||typeof kx>"u")return;const n=kx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&pk(n[1]);return e&&JSON.parse(e)},vk=()=>{try{return gk()||xk()||yk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bk=n=>{var e,t;return(t=(e=vk())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},wk=n=>{const e=bk(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jx(JSON.stringify(t)),jx(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="FirebaseError";class fd extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Nk,Object.setPrototypeOf(this,fd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sk.prototype.create)}}class Sk{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?Ek(l,s):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new fd(o,d,s)}}function Ek(n,e){return n.replace(Ck,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Ck=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(n){return n&&n._delegate?n._delegate:n}class kk{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="firebasestorage.googleapis.com",nw="storageBucket",jk=120*1e3,Tk=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt extends fd{constructor(e,t,s=0){super(af(e),`Firebase Storage: ${t} (${af(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return af(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qt||(Qt={}));function af(n){return"storage/"+n}function $p(){const n="An unknown error occurred, please check the error payload for server response.";return new Zt(Qt.UNKNOWN,n)}function Pk(n){return new Zt(Qt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Ak(n){return new Zt(Qt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ik(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zt(Qt.UNAUTHENTICATED,n)}function Rk(){return new Zt(Qt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Mk(n){return new Zt(Qt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Dk(){return new Zt(Qt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Vk(){return new Zt(Qt.CANCELED,"User canceled the upload/download.")}function Lk(n){return new Zt(Qt.INVALID_URL,"Invalid URL '"+n+"'.")}function zk(n){return new Zt(Qt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Fk(){return new Zt(Qt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nw+"' property when initializing the app?")}function Ok(){return new Zt(Qt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Uk(){return new Zt(Qt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Bk(n){return new Zt(Qt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Of(n){return new Zt(Qt.INVALID_ARGUMENT,n)}function rw(){return new Zt(Qt.APP_DELETED,"The Firebase app was deleted.")}function $k(n){return new Zt(Qt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xl(n,e){return new Zt(Qt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ll(n){throw new Zt(Qt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=_r.makeFromUrl(e,t)}catch{return new _r(e,"")}if(s.path==="")return s;throw zk(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function l(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+o+c,"i"),m={bucket:1,path:3};function f(te){te.path_=decodeURIComponent(te.path)}const v="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",E=new RegExp(`^https?://${w}/${v}/b/${o}/o${N}`,"i"),I={bucket:1,path:3},T=t===tw?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",H=new RegExp(`^https?://${T}/${o}/${A}`,"i"),K=[{regex:d,indices:m,postModify:l},{regex:E,indices:I,postModify:f},{regex:H,indices:{bucket:1,path:2},postModify:f}];for(let te=0;te<K.length;te++){const pe=K[te],J=pe.regex.exec(e);if(J){const O=J[pe.indices.bucket];let P=J[pe.indices.path];P||(P=""),s=new _r(O,P),pe.postModify(s);break}}if(s==null)throw Lk(e);return s}}class qk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(n,e,t){let s=1,o=null,l=null,c=!1,d=0;function m(){return d===2}let f=!1;function v(...A){f||(f=!0,e.apply(null,A))}function w(A){o=setTimeout(()=>{o=null,n(E,m())},A)}function N(){l&&clearTimeout(l)}function E(A,...H){if(f){N();return}if(A){N(),v.call(null,A,...H);return}if(m()||c){N(),v.call(null,A,...H);return}s<64&&(s*=2);let K;d===1?(d=2,K=0):K=(s+Math.random())*1e3,w(K)}let I=!1;function T(A){I||(I=!0,N(),!f&&(o!==null?(A||(d=2),clearTimeout(o),w(0)):A||(d=1)))}return w(0),l=setTimeout(()=>{c=!0,T(!0)},t),T}function Gk(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(n){return n!==void 0}function Kk(n){return typeof n=="object"&&!Array.isArray(n)}function qp(n){return typeof n=="string"||n instanceof String}function Tx(n){return Hp()&&n instanceof Blob}function Hp(){return typeof Blob<"u"}function Px(n,e,t,s){if(s<e)throw Of(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw Of(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function sw(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const o=e(s)+"="+e(n[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var mo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(mo||(mo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,t,s,o,l,c,d,m,f,v,w,N=!0){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=m,this.timeout_=f,this.progressCallback_=v,this.connectionFactory_=w,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,I)=>{this.resolve_=E,this.reject_=I,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new du(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const m=d.loaded,f=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,f)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===mo.NO_ERROR,m=l.getStatus();if(!d||Jk(m,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===mo.ABORT;s(!1,new du(!1,null,v));return}const f=this.successCodes_.indexOf(m)!==-1;s(!0,new du(f,l))})},t=(s,o)=>{const l=this.resolve_,c=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());Wk(m)?l(m):l()}catch(m){c(m)}else if(d!==null){const m=$p();m.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,m)):c(m)}else if(o.canceled){const m=this.appDelete_?rw():Vk();c(m)}else{const m=Dk();c(m)}};this.canceled_?t(!1,new du(!1,null,!0)):this.backoffId_=Hk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Gk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class du{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function Qk(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Xk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Zk(n,e){e&&(n["X-Firebase-GMPID"]=e)}function ej(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function tj(n,e,t,s,o,l,c=!0){const d=sw(n.urlParams),m=n.url+d,f=Object.assign({},n.headers);return Zk(f,e),Qk(f,t),Xk(f,l),ej(f,s),new Yk(m,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rj(...n){const e=nj();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(Hp())return new Blob(n);throw new Zt(Qt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sj(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(n){if(typeof atob>"u")throw Bk("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lf{constructor(e,t){this.data=e,this.contentType=t||null}}function iw(n,e){switch(n){case ts.RAW:return new lf(ow(e));case ts.BASE64:case ts.BASE64URL:return new lf(aw(n,e));case ts.DATA_URL:return new lf(aj(e),lj(e))}throw $p()}function ow(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=s,c=n.charCodeAt(++t);s=65536|(l&1023)<<10|c&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function oj(n){let e;try{e=decodeURIComponent(n)}catch{throw xl(ts.DATA_URL,"Malformed data URL.")}return ow(e)}function aw(n,e){switch(n){case ts.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw xl(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case ts.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw xl(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=ij(e)}catch(o){throw o.message.includes("polyfill")?o:xl(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class lw{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw xl(ts.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=cj(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function aj(n){const e=new lw(n);return e.base64?aw(ts.BASE64,e.rest):oj(e.rest)}function lj(n){return new lw(n).contentType}function cj(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t){let s=0,o="";Tx(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(Tx(this.data_)){const s=this.data_,o=sj(s,e,t);return o===null?null:new bi(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new bi(s,!0)}}static getBlob(...e){if(Hp()){const t=e.map(s=>s instanceof bi?s.data_:s);return new bi(rj.apply(null,t))}else{const t=e.map(c=>qp(c)?iw(ts.RAW,c).data:c.data_);let s=0;t.forEach(c=>{s+=c.byteLength});const o=new Uint8Array(s);let l=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)o[l++]=c[d]}),new bi(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(n){let e;try{e=JSON.parse(n)}catch{return null}return Kk(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function dj(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function uw(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(n,e){return e}class Yn{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||hj}}let hu=null;function fj(n){return!qp(n)||n.length<2?n:uw(n)}function dw(){if(hu)return hu;const n=[];n.push(new Yn("bucket")),n.push(new Yn("generation")),n.push(new Yn("metageneration")),n.push(new Yn("name","fullPath",!0));function e(l,c){return fj(c)}const t=new Yn("name");t.xform=e,n.push(t);function s(l,c){return c!==void 0?Number(c):c}const o=new Yn("size");return o.xform=s,n.push(o),n.push(new Yn("timeCreated")),n.push(new Yn("updated")),n.push(new Yn("md5Hash",null,!0)),n.push(new Yn("cacheControl",null,!0)),n.push(new Yn("contentDisposition",null,!0)),n.push(new Yn("contentEncoding",null,!0)),n.push(new Yn("contentLanguage",null,!0)),n.push(new Yn("contentType",null,!0)),n.push(new Yn("metadata","customMetadata",!0)),hu=n,hu}function pj(n,e){function t(){const s=n.bucket,o=n.fullPath,l=new _r(s,o);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function mj(n,e,t){const s={};s.type="file";const o=t.length;for(let l=0;l<o;l++){const c=t[l];s[c.local]=c.xform(s,e[c.server])}return pj(s,n),s}function hw(n,e,t){const s=cw(e);return s===null?null:mj(n,s,t)}function gj(n,e,t,s){const o=cw(e);if(o===null||!qp(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(f=>{const v=n.bucket,w=n.fullPath,N="/b/"+c(v)+"/o/"+c(w),E=Gp(N,t,s),I=sw({alt:"media",token:f});return E+I})[0]}function xj(n,e){const t={},s=e.length;for(let o=0;o<s;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class fw{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(n){if(!n)throw $p()}function yj(n,e){function t(s,o){const l=hw(n,o,e);return pw(l!==null),l}return t}function vj(n,e){function t(s,o){const l=hw(n,o,e);return pw(l!==null),gj(l,o,n.host,n._protocol)}return t}function mw(n){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=Rk():o=Ik():t.getStatus()===402?o=Ak(n.bucket):t.getStatus()===403?o=Mk(n.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function bj(n){const e=mw(n);function t(s,o){let l=e(s,o);return s.getStatus()===404&&(l=Pk(n.path)),l.serverResponse=o.serverResponse,l}return t}function wj(n,e,t){const s=e.fullServerUrl(),o=Gp(s,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,d=new fw(o,l,vj(n,t),c);return d.errorHandler=bj(e),d}function _j(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Nj(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=_j(null,e)),s}function Sj(n,e,t,s,o){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let K="";for(let te=0;te<2;te++)K=K+Math.random().toString().slice(2);return K}const m=d();c["Content-Type"]="multipart/related; boundary="+m;const f=Nj(e,s,o),v=xj(f,t),w="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+m+`\r
Content-Type: `+f.contentType+`\r
\r
`,N=`\r
--`+m+"--",E=bi.getBlob(w,s,N);if(E===null)throw Ok();const I={name:f.fullPath},T=Gp(l,n.host,n._protocol),A="POST",H=n.maxUploadRetryTime,W=new fw(T,A,yj(n,t),H);return W.urlParams=I,W.headers=c,W.body=E.uploadData(),W.errorHandler=mw(e),W}class Ej{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o){if(this.sent_)throw ll("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ll("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ll("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ll("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ll("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Cj extends Ej{initXhr(){this.xhr_.responseType="text"}}function gw(){return new Cj}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t){this._service=e,t instanceof _r?this._location=t:this._location=_r.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new vo(e,t)}get root(){const e=new _r(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uw(this._location.path)}get storage(){return this._service}get parent(){const e=uj(this._location.path);if(e===null)return null;const t=new _r(this._location.bucket,e);return new vo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw $k(e)}}function xw(n,e,t){n._throwIfRoot("uploadBytes");const s=Sj(n.storage,n._location,dw(),new bi(e,!0),t);return n.storage.makeRequestWithTokens(s,gw).then(o=>({metadata:o,ref:n}))}function kj(n,e,t=ts.RAW,s){n._throwIfRoot("uploadString");const o=iw(t,e),l=Object.assign({},s);return l.contentType==null&&o.contentType!=null&&(l.contentType=o.contentType),xw(n,o.data,l)}function jj(n){n._throwIfRoot("getDownloadURL");const e=wj(n.storage,n._location,dw());return n.storage.makeRequestWithTokens(e,gw).then(t=>{if(t===null)throw Uk();return t})}function Tj(n,e){const t=dj(n._location.path,e),s=new _r(n._location.bucket,t);return new vo(n.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(n){return/^[A-Za-z]+:\/\//.test(n)}function Aj(n,e){return new vo(n,e)}function yw(n,e){if(n instanceof Wp){const t=n;if(t._bucket==null)throw Fk();const s=new vo(t,t._bucket);return e!=null?yw(s,e):s}else return e!==void 0?Tj(n,e):n}function Ij(n,e){if(e&&Pj(e)){if(n instanceof Wp)return Aj(n,e);throw Of("To use ref(service, url), the first argument must be a Storage instance.")}else return yw(n,e)}function Ax(n,e){const t=e==null?void 0:e[nw];return t==null?null:_r.makeFromBucketSpec(t,n)}function Rj(n,e,t,s={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=s;o&&(n._overrideAuthToken=typeof o=="string"?o:_k(o,n.app.options.projectId))}class Wp{constructor(e,t,s,o,l){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=l,this._bucket=null,this._host=tw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jk,this._maxUploadRetryTime=Tk,this._requests=new Set,o!=null?this._bucket=_r.makeFromBucketSpec(o,this._host):this._bucket=Ax(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_r.makeFromBucketSpec(this._url,e):this._bucket=Ax(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Px("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Px("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vo(this,e)}_makeRequest(e,t,s,o,l=!0){if(this._deleted)return new qk(rw());{const c=tj(e,this._appId,s,o,t,this._firebaseVersion,l);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const Ix="@firebase/storage",Rx="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="storage";function Mj(n,e,t){return n=ql(n),xw(n,e,t)}function Dj(n,e,t,s){return n=ql(n),kj(n,e,t,s)}function Us(n){return n=ql(n),jj(n)}function Bs(n,e){return n=ql(n),Ij(n,e)}function Vj(n=Ev(),e){n=ql(n);const s=_v(n,vw).getImmediate({identifier:e}),o=wk("storage");return o&&Lj(s,...o),s}function Lj(n,e,t,s={}){Rj(n,e,t,s)}function zj(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Wp(t,s,o,e,Nv)}function Fj(){_l(new kk(vw,zj,"PUBLIC").setMultipleInstances(!0)),Ci(Ix,Rx,""),Ci(Ix,Rx,"esm2017")}Fj();const _u={apiKey:"AIzaSyCFi4LIpQBzs9QGnn4QQdNJtCvMOi_-VF8",authDomain:"spoilme-edee0.firebaseapp.com",projectId:"spoilme-edee0",storageBucket:"spoilme-edee0.firebasestorage.app",messagingSenderId:"744288044885",appId:"1:744288044885:web:24614b67ffe485446151dc",measurementId:"G-H9VG45QVZR"},Oj=_u.apiKey&&_u.projectId&&_u.projectId!=="your-app-id";let Ee=null,gn=null;if(Oj)try{const n=Sv(_u);Ee=JC(n,"spoilme");try{gn=Vj(n),console.log("Firebase Storage initialized")}catch(e){console.error("Firebase Storage init failed:",e)}console.log("Firebase initialized successfully")}catch(n){console.error("Firebase initialization error:",n)}else console.warn("Firebase keys missing or invalid. Application running in Demo Mode (Local Storage).");const bw=D.createContext(void 0),Lt=(n,e=new WeakSet)=>{if(n==null)return null;if(typeof n!="object")return n;if(e.has(n))return null;if(e.add(n),n instanceof Date)return n.toISOString();if(typeof n.toDate=="function")try{return n.toDate().toISOString()}catch{return null}if(n.path&&typeof n.path=="string"&&(n.firestore||n._key))return n.path;if(Array.isArray(n))return n.map(o=>Lt(o,e));if(n.seconds!==void 0&&n.nanoseconds!==void 0&&Object.keys(n).length<=4)return new Date(n.seconds*1e3+n.nanoseconds/1e6).toISOString();const t=Object.getPrototypeOf(n);if(t&&t!==Object.prototype&&t!==null)return null;const s={};for(const o in n)if(!(o.startsWith("_")||o==="auth"||o==="firestore"||o==="app"||o==="metadata"||o==="proactiveRefresh"||o==="providerData"||o==="stsTokenManager")&&Object.prototype.hasOwnProperty.call(n,o)){const l=Lt(n[o],e);l!=null&&(s[o]=l)}return s},Uj=()=>{const n=["Thandiwe Zulu","Jessica Nel","Precious Khumalo","Sarah Van Der Merwe","Amahle Dlamini","Chloe Naidoo","Nicole Botha","Zanele Mthembu","Ashley Smith","Bianca Fourie"],e=new Date,t=e.getFullYear()*100+e.getMonth(),s=c=>{let d=c+=1831565813;return d=Math.imul(d^d>>>15,d|1),d^=d+Math.imul(d^d>>>7,d|61),((d^d>>>14)>>>0)/4294967296},o=n.map((c,d)=>({id:`aff_${d}`,name:c,sales:0,rank:0,change:"same"}));o[0].sales=28561.68;let l=28561.68;for(let c=1;c<o.length;c++){const m=1500+s(t+c)*3500,f=Math.floor(s(t+c+50)*99)/100;l=Math.max(1e3,l-m);const v=Math.floor(l)+f;o[c].sales=parseFloat(v.toFixed(2))}return o.forEach((c,d)=>{c.rank=d+1;const m=s(t+d+200);c.change=m>.6?"up":m<.3?"down":"same",d===0&&(c.change="same")}),o},Bj=()=>{const n=["Thandiwe Zulu","Jessica Nel","Precious Khumalo","Sarah Van Der Merwe","Amahle Dlamini","Chloe Naidoo","Nicole Botha","Zanele Mthembu","Ashley Smith","Bianca Fourie","Elize Venter","Fayruz Adams","Gugulethu Mchunu","Megan Reddy","Nosipho Cele","Anelisa Peterson","Busisiwe Malinga","Danielle Jacobs","Fatima Khan","Isabella Martins","Liesl Jacobs","Nomvula Gqola","Pieterse Van Zyl","Rethabile Mokoena","Sibusiso Ndlovu","Tshegofatso Moloi","Lerato Pillay","Anja Pretorius","Fatima Akoojee","Mandisa Botha"],e=new Date,t=Math.floor((e.getTime()-new Date(e.getFullYear(),0,0).getTime())/1e3/60/60/24),s=Math.ceil(t/7),o=e.getFullYear()*100+s,l=f=>{let v=f+=1831565813;return v=Math.imul(v^v>>>15,v|1),v^=v+Math.imul(v^v>>>7,v|61),((v^v>>>14)>>>0)/4294967296},c=[...n].sort((f,v)=>l(o+f.length)-.5),d=[],m=[500,250,200,...Array(7).fill(100),...Array(10).fill(50)];for(let f=0;f<m.length;f++)d.push({rank:f+1,name:c[f],prize:m[f]});return d},$j=({children:n})=>{const[e,t]=D.useState([]),[s,o]=D.useState([]),[l,c]=D.useState([]),[d,m]=D.useState(()=>{try{const ee=localStorage.getItem("spv_cart");return ee?JSON.parse(ee):[]}catch(ee){return console.error("Failed to load cart",ee),[]}}),[f,v]=D.useState(Zr),[w,N]=D.useState(pN),[E,I]=D.useState([]),[T,A]=D.useState(!0),[H,W]=D.useState(null),[K,te]=D.useState(null),[pe,J]=D.useState([]),[O,P]=D.useState(0),[z,F]=D.useState([]),[k,j]=D.useState(!Ee),[V,me]=D.useState(!1),[Le,Se]=D.useState([]),[Te,B]=D.useState([]);D.useEffect(()=>{const ee=localStorage.getItem("spv_active_user");if(ee)try{const Ne=JSON.parse(ee);v(Ne)}catch(Ne){console.error("Error parsing stored user",Ne),v(Zr)}J(Uj()),F(Bj());const Q=new Date,ne=Q.getFullYear()*100+Q.getMonth();P(780+Math.floor((Ne=>{let $e=Ne+=1831565813;return $e=Math.imul($e^$e>>>15,$e|1),$e^=$e+Math.imul($e^$e>>>7,$e|61),(($e^$e>>>14)>>>0)/4294967296})(ne)*15));try{const Ne=localStorage.getItem("spv_packaging_presets");Ne&&Se(JSON.parse(Ne));const $e=localStorage.getItem("spv_material_presets");$e&&B(JSON.parse($e))}catch(Ne){console.error("Error loading presets",Ne)}},[]),D.useEffect(()=>{localStorage.setItem("spv_cart",JSON.stringify(d))},[d]),D.useEffect(()=>{k&&localStorage.setItem("spv_orders",JSON.stringify(l))},[l,k]);const ve=ee=>{try{const Q=Lt(ee);localStorage.setItem("spv_active_user",JSON.stringify(Q))}catch(Q){console.error("Error saving user to localStorage",Q)}};D.useEffect(()=>{if(!Ee||k||!f.id||f.id==="guest")return;const ee=uu(St(Ee,"users",f.id),Q=>{if(Q.exists()){const ne=Q.data();v(he=>{const Ne={...he,...ne};return ve(Ne),Ne})}},Q=>{Q.code==="not-found"&&Q.message.includes("default")&&W("Database ID Mismatch. Please clear browser cache.")});return()=>ee()},[f.id,k]);const G=ee=>{Se(Q=>{const he=Q.find(Ne=>Ne.name===ee.name)?Q.map(Ne=>Ne.name===ee.name?ee:Ne):[...Q,ee];return localStorage.setItem("spv_packaging_presets",JSON.stringify(he)),he})},$=ee=>{Se(Q=>{const ne=Q.filter(he=>he.name!==ee);return localStorage.setItem("spv_packaging_presets",JSON.stringify(ne)),ne})},M=ee=>{B(Q=>{const he=Q.find(Ne=>Ne.name===ee.name)?Q.map(Ne=>Ne.name===ee.name?ee:Ne):[...Q,ee];return localStorage.setItem("spv_material_presets",JSON.stringify(he)),he})},se=ee=>{B(Q=>{const ne=Q.filter(he=>he.name!==ee);return localStorage.setItem("spv_material_presets",JSON.stringify(ne)),ne})},de=async(ee,Q)=>{const ne=ee.trim().toLowerCase();let he=null;if(ne==="spoilmevintagediy@gmail.com"&&Q==="admin@spoilme"&&(he={...Zr,id:"admin_01",name:"Admin User",email:ee,isAdmin:!0,isMember:!0,membershipTier:"deluxe",loyaltyPoints:9999,affiliateCode:"ADMIN_MASTER",socialRewards:{}}),!he&&Q==="test"&&(ne==="eliz@gmail.com"?he={...Zr,id:"u1",name:"Elize Test 1",email:"eliz@gmail.com",isMember:!1,membershipTier:"none"}:ne==="anna@gmail.com"&&(he={...Zr,id:"u2",name:"Anna Test 2",email:"anna@gmail.com",isMember:!0,membershipTier:"basic",loyaltyPoints:100})),!he&&Ee)try{const Ne=xs(Ee,"users"),$e=Fs(Ne,la("email","==",ne)),Xe=await ca($e);if(!Xe.empty){const lt=Lt(Xe.docs[0].data());lt.password===Q&&(he={...lt,id:Xe.docs[0].id})}}catch(Ne){console.error("Error logging in via DB:",Ne)}return he?(v(he),ve(he),!0):!1},ze=async ee=>{const Q={...Zr,...ee,id:`user_${Date.now()}`,affiliateCode:`Spoilme-${Date.now().toString().slice(-6)}`,affiliateStats:ee.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1}};try{return!k&&Ee&&await oo(St(Ee,"users",Q.id),Lt(Q)),v(Q),ve(Q),!0}catch(ne){return console.error("Registration Failed",ne),v(Q),ve(Q),!0}},We=()=>{v(Zr),localStorage.removeItem("spv_active_user")},Ze=async ee=>{const Q={...f,shippingAddress:ee};if(v(Q),ve(Q),!k&&Ee&&f.id!=="guest")try{await an(St(Ee,"users",f.id),{shippingAddress:ee})}catch(ne){console.error("Error saving address to DB",ne)}},Ke=async()=>{if(k||!Ee){alert("Database not connected. Cannot seed users.");return}const ee=[{...Zr,id:"u1",name:"Elize Test 1",email:"eliz@gmail.com",password:"test",isMember:!1,membershipTier:"none",affiliateCode:"Spoilme-ELIZ01",affiliateStats:{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...Zr,id:"u2",name:"Anna Test 2",email:"anna@gmail.com",password:"test",isMember:!0,membershipTier:"basic",loyaltyPoints:100,affiliateCode:"Spoilme-ANNA02",affiliateStats:{status:"pending",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...Zr,id:"u3",name:"Fay Test 3",email:"fay@gmail.com",password:"test",isMember:!0,membershipTier:"premium",loyaltyPoints:500,affiliateCode:"Spoilme-FAY003",affiliateStats:{status:"approved",totalSalesCount:45,totalSalesValue:4500,commissionRate:10,balance:450,recurringBalance:50}},{...Zr,id:"u4",name:"Debs Test 4",email:"debs@gmail.com",password:"test",isMember:!0,membershipTier:"deluxe",loyaltyPoints:1e3,affiliateCode:"Spoilme-DEBS04",affiliateStats:{status:"approved",totalSalesCount:150,totalSalesValue:15e3,commissionRate:15,balance:2250,recurringBalance:300}}];try{for(const Q of ee)await oo(St(Ee,"users",Q.id),Lt(Q));alert("Test Users Created!")}catch(Q){console.error("Error seeding users:",Q)}};D.useEffect(()=>{if(console.log("Loading products, isDemoMode:",k,"db:",!!Ee),k){const Q=localStorage.getItem("spv_products");t(Q?JSON.parse(Q):[]);const ne=localStorage.getItem("spv_categories");o(ne?JSON.parse(ne):[]);const he=localStorage.getItem("spv_vouchers");he&&I(JSON.parse(he));const Ne=localStorage.getItem("spv_orders");c(Ne?JSON.parse(Ne):[]),A(!1);return}const ee=setTimeout(()=>{T&&(W("Connection timed out"),A(!1))},5e3);try{const Q=Fs(xs(Ee,"products"),sf("createdAt","desc")),ne=new Map,he=async Re=>{if(!Re)return null;if(typeof Re=="string"){if(Re.startsWith("http")||Re.startsWith("data:")||Re.startsWith("blob:")||Re.startsWith("/"))return Re;if(Re.startsWith("gs://"))try{const Ye=Re.match(/^gs:\/\/[^/]+\/(.+)$/),yt=Ye?Ye[1]:Re;if(ne.has(Re))return ne.get(Re);if(gn){const jt=await Us(Bs(gn,decodeURIComponent(yt)));return ne.set(Re,jt),jt}}catch(Ye){return console.error("Failed to convert gs:// URL to downloadURL",Re,Ye),null}if(!Re.startsWith("http")&&gn)try{if(ne.has(Re))return ne.get(Re);const Ye=await Us(Bs(gn,Re));return ne.set(Re,Ye),Ye}catch{}return Re}else if(typeof Re=="object"){if(Re.fullPath)try{const Ye=Re.fullPath+"::fullPath";if(ne.has(Ye))return ne.get(Ye);if(gn){const yt=await Us(Bs(gn,Re.fullPath));return ne.set(Ye,yt),yt}}catch(Ye){return console.error("Failed to convert storage object fullPath to downloadURL",Re,Ye),null}if(Re.path)try{const Ye=Re.path+"::path";if(ne.has(Ye))return ne.get(Ye);if(gn){const yt=await Us(Bs(gn,Re.path));return ne.set(Ye,yt),yt}}catch(Ye){return console.error("Failed to convert storage object path to downloadURL",Re,Ye),null}}return null},Ne=uu(Q,async Re=>{console.log("Firestore snapshot received, docs count:",Re.docs.length),clearTimeout(ee);const Ye=await Promise.all(Re.docs.map(async yt=>{const jt={...Lt(yt.data()),id:yt.id};console.log("Raw product:",jt.id,"images:",jt.images);try{if(jt.images&&Array.isArray(jt.images)){const L=await Promise.all(jt.images.map(async oe=>await he(oe)));jt.images=L.filter(Boolean),console.log("Resolved images for",jt.id,":",jt.images)}}catch(L){console.error("Failed resolving product images for",jt.id,L)}return jt}));t(Ye),console.log("Loaded products and resolved images (first 5):",Ye.slice(0,5).map(yt=>({id:yt.id,images:yt.images})))},Re=>{console.log("Firestore products error:",Re),clearTimeout(ee),W(Re.message),A(!1)}),$e=uu(xs(Ee,"categories"),Re=>{console.log("Categories snapshot received, docs count:",Re.docs.length);const Ye=Re.docs.map(yt=>({...Lt(yt.data()),id:yt.id}));o(Ye)},Re=>{console.log("Firestore categories error:",Re)}),Xe=f.isAdmin?Fs(xs(Ee,"orders"),sf("date","desc")):Fs(xs(Ee,"orders"),la("customerEmail","==",f.email),sf("date","desc")),lt=uu(Xe,Re=>{console.log("Orders snapshot received, docs count:",Re.docs.length);const Ye=Re.docs.map(yt=>({...Lt(yt.data()),id:yt.id}));c(Ye),A(!1)},()=>{A(!1)});return()=>{clearTimeout(ee),Ne(),$e(),lt()}}catch(Q){console.log("Try-catch error in products useEffect:",Q),clearTimeout(ee),A(!1)}},[k,f.isAdmin,f.email]);const Je=(ee,Q={})=>{m(ne=>{const he=ne.findIndex(lt=>lt.id===ee.id&&lt.selectedSize===Q.selectedSize&&lt.selectedMaterial===Q.selectedMaterial&&lt.selectedChainStyle===Q.selectedChainStyle&&lt.selectedChainLength===Q.selectedChainLength),Ne=he>-1?ne[he]:null,$e=Ne?Ne.quantity:0;let Xe=ee.stock;if(ee.type==="Ring"&&Q.selectedSize&&ee.ringStock&&(Xe=ee.ringStock[Q.selectedSize]||0),$e>=Xe)return alert(`Sorry, you can't add more of this item. We only have ${Xe} in stock.`),ne;if(he>-1){const lt=[...ne];return lt[he]={...lt[he],quantity:lt[he].quantity+1},lt}return[...ne,{...ee,quantity:1,...Q}]})},He=(ee,Q={})=>{m(ne=>ne.filter(he=>!(he.id===ee&&he.selectedSize===Q.selectedSize&&he.selectedMaterial===Q.selectedMaterial&&he.selectedChainStyle===Q.selectedChainStyle&&he.selectedChainLength===Q.selectedChainLength)))},wt=(ee,Q,ne={})=>{if(Q<=0){He(ee,ne);return}const he=e.find(Xe=>Xe.id===ee);if(!he)return;let Ne=he.stock;he.type==="Ring"&&ne.selectedSize&&he.ringStock&&(Ne=he.ringStock[ne.selectedSize]||0);const $e=Math.min(Q,Ne);Q>Ne&&alert(`Sorry, we only have ${Ne} of this item in stock. Quantity has been adjusted.`),m(Xe=>Xe.map(lt=>lt.id===ee&&lt.selectedSize===ne.selectedSize&&lt.selectedMaterial===ne.selectedMaterial&&lt.selectedChainStyle===ne.selectedChainStyle&&lt.selectedChainLength===ne.selectedChainLength?{...lt,quantity:$e}:lt))},Et=()=>{m([]),te(null)},ot=ee=>{v(Q=>{const he=Q.wishlist.includes(ee)?Q.wishlist.filter($e=>$e!==ee):[...Q.wishlist,ee],Ne={...Q,wishlist:he};return ve(Ne),Ne})},je=async ee=>{if(!f.id||f.id==="guest"){console.error("Cannot apply for affiliate as guest user directly.");return}const Q={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},ne={...f,name:`${ee.name} ${ee.surname}`,birthday:ee.dob,notifications:[Q,...f.notifications],affiliateStats:{...f.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1},status:"pending",gender:ee.gender,joinReason:`${ee.reason} | Socials: ${ee.socials}`}};v(ne),ve(ne),!k&&Ee&&f.id!=="guest"&&await an(St(Ee,"users",f.id),Lt(ne))},at=async(ee,Q)=>{if(k||!Ee)return;const ne=St(Ee,"users",ee),he={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Welcome to the Partnership Program!",message:`Welcome to Spoil Me Vintage Partnership Program! We are thrilled to have you on the team.${Q?` Note from admin: ${Q}`:""}`,date:new Date().toISOString(),isRead:!1};await an(ne,{"affiliateStats.status":"approved","affiliateStats.commissionRate":10,"affiliateStats.adminNote":Q||"",notifications:Ff(he)})},Bt=async(ee,Q)=>{if(k||!Ee)return;const ne=St(Ee,"users",ee),he={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Partnership Application Update",message:`We regret to inform you that your application has been declined.${Q?` Note: ${Q}`:""}`,date:new Date().toISOString(),isRead:!1};await an(ne,{"affiliateStats.status":"rejected","affiliateStats.adminNote":Q||"",notifications:Ff(he)})},$t=async(ee,Q)=>{if(k||!Ee)return;const ne={id:`aff_msg_${Date.now()}`,type:"affiliate_msg",title:"Partnership Update",message:Q,date:new Date().toISOString(),isRead:!1},he=await ca(Fs(xs(Ee,"users"),la("id","==",ee)));he.empty||await an(he.docs[0].ref,{notifications:[ne,...he.docs[0].data().notifications]})},un=async(ee,Q)=>{if(k||!Ee)return;const ne=St(Ee,"users",ee);await an(ne,{"affiliateStats.commissionRate":Q})},qt=async(ee,Q)=>{if(k||!Ee)return;const ne=St(Ee,"users",ee);await an(ne,{"affiliateStats.parentId":Q})},_e=async()=>{const ee={...f,affiliateStats:{...f.affiliateStats,hasContentAccess:!0}};v(ee),ve(ee),!k&&Ee&&f.id!=="guest"&&await an(St(Ee,"users",f.id),Lt(ee))},Ht=async()=>{const ee={...f,affiliateStats:{...f.affiliateStats,isElite:!0}};v(ee),ve(ee),!k&&Ee&&f.id!=="guest"&&await an(St(Ee,"users",f.id),Lt(ee))},Mn=async(ee,Q)=>{var lt;if(!Ee&&!k)return{success:!1,message:"Database not ready"};let ne=null,he=null;if(k)if(f.affiliateCode===ee)ne=f;else return{success:!1,message:"In Demo Mode, only your own code works."};else{const Re=Fs(xs(Ee,"users"),la("affiliateCode","==",ee)),Ye=await ca(Re);Ye.empty||(ne={...Ye.docs[0].data(),id:Ye.docs[0].id},he=Ye.docs[0].ref)}if(!ne)return{success:!1,message:"Affiliate code not found."};if(((lt=ne.affiliateStats)==null?void 0:lt.status)!=="approved"&&!k)return{success:!1,message:"Affiliate not approved."};const Ne=ne.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0},$e=Q*Ne.commissionRate/100,Xe={...Ne,totalSalesCount:Ne.totalSalesCount+1,totalSalesValue:Ne.totalSalesValue+Q,balance:Ne.balance+$e};if(Xe.totalSalesCount>=500?Xe.commissionRate=20:Xe.totalSalesCount>=100?Xe.commissionRate=15:Xe.totalSalesCount>=50&&(Xe.commissionRate=11),k)v({...ne,affiliateStats:Xe});else if(he){const Re={id:`sale_${Date.now()}`,type:"system",title:"New Partnership Sale!",message:`You earned R${$e.toFixed(2)} commission!`,date:new Date().toISOString(),isRead:!1};if(await an(he,{affiliateStats:Xe,notifications:[Re,...ne.notifications||[]]}),Ne.parentId)try{const Ye=St(Ee,"users",Ne.parentId),yt=await uk(Ye);if(yt.exists()){const jt=yt.data(),L=jt.affiliateStats||{status:"approved",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0},oe=Q*.01,Ve={...L,balance:(L.balance||0)+oe},et={id:`sub_sale_${Date.now()}`,type:"system",title:"Downline Sale Bonus",message:`You earned R${oe.toFixed(2)} from a recruit's sale!`,date:new Date().toISOString(),isRead:!1};await an(Ye,{affiliateStats:Ve,notifications:[et,...jt.notifications||[]]})}}catch(Ye){console.error("Failed to process parent commission",Ye)}}return{success:!0,message:`Sale simulated! Added R${$e.toFixed(2)}.`}},Qn=async(ee,Q)=>{if(k){if(f.id===ee){const ne={...f,loyaltyPoints:f.loyaltyPoints+Q};v(ne),ve(ne)}return}if(Ee)if(f.id===ee){const ne={...f,loyaltyPoints:f.loyaltyPoints+Q};v(ne),ve(ne),await an(St(Ee,"users",ee),{loyaltyPoints:ne.loyaltyPoints})}else{const ne=await ca(Fs(xs(Ee,"users"),la("id","==",ee)));ne.empty||await an(ne.docs[0].ref,{loyaltyPoints:(ne.docs[0].data().loyaltyPoints||0)+Q})}},hr=async()=>k||!Ee?[]:(await ca(Fs(xs(Ee,"users")))).docs.map(Q=>({...Lt(Q.data()),id:Q.id})),En=async ee=>{const Q=Lt(ee);t(ne=>[Q,...ne]),!k&&Ee?await oo(St(Ee,"products",Q.id),Q):localStorage.setItem("spv_products",JSON.stringify([Q,...e]))},Ct=async ee=>{const Q=Lt(ee);if(t(ne=>ne.map(he=>he.id===Q.id?Q:he)),!k&&Ee)await oo(St(Ee,"products",Q.id),Q);else{const ne=e.map(he=>he.id===Q.id?Q:he);localStorage.setItem("spv_products",JSON.stringify(ne))}},Rt=async ee=>{if(t(Q=>Q.filter(ne=>ne.id!==ee)),!k&&Ee)await of(St(Ee,"products",ee));else{const Q=e.filter(ne=>ne.id!==ee);localStorage.setItem("spv_products",JSON.stringify(Q))}},dn=async ee=>{const Q=Lt(ee);c(ne=>[Q,...ne]),!k&&Ee&&await oo(St(Ee,"orders",Q.id),Q)},fr=async ee=>{const Q=Lt(ee);c(ne=>ne.map(he=>he.id===Q.id?Q:he)),!k&&Ee&&await an(St(Ee,"orders",Q.id),Q)},Xn=async ee=>{c(Q=>Q.filter(ne=>ne.id!==ee)),!k&&Ee&&await of(St(Ee,"orders",ee))},ce=async ee=>{const Q=Lt(ee);o(ne=>[...ne,Q]),!k&&Ee?await oo(St(Ee,"categories",Q.id),Q):localStorage.setItem("spv_categories",JSON.stringify([...s,Q]))},qe=async ee=>{const Q=Lt(ee);if(o(ne=>ne.map(he=>he.id===Q.id?Q:he)),!k&&Ee)await oo(St(Ee,"categories",Q.id),Q);else{const ne=s.map(he=>he.id===Q.id?Q:he);localStorage.setItem("spv_categories",JSON.stringify(ne))}},kt=async ee=>{if(o(Q=>Q.filter(ne=>ne.id!==ee)),!k&&Ee)await of(St(Ee,"categories",ee));else{const Q=s.filter(ne=>ne.id!==ee);localStorage.setItem("spv_categories",JSON.stringify(Q))}},hn=async ee=>{const Q=Lt(ee);o(Q),k&&localStorage.setItem("spv_categories",JSON.stringify(Q))},Dn=ee=>N(Q=>[...Q,ee]),Or=ee=>{const Q=Lt(ee);I(he=>[...he,Q]);const ne=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify([...ne,Q]))},Ss=ee=>{I(ne=>ne.filter(he=>he.code!==ee));const Q=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify(Q.filter(ne=>ne.code!==ee)))},Cr=ee=>{const Q=E.find(ne=>ne.code===ee);return Q?(te(Q),!0):!1},os=()=>{localStorage.clear(),window.location.reload()},as=()=>d.reduce((ee,Q)=>ee+(Q.price+(Q.selectedMaterialModifier||0))*Q.quantity,0),Vn=async ee=>{var $e;if(!f.email)throw new Error("User must be logged in to checkout.");const Q={...ee,id:`ord_${Date.now()}`,orderNumber:`#SMV-${Date.now().toString().slice(-6)}`,date:new Date().toISOString(),customerName:f.name,customerEmail:f.email,status:"Pending"};await dn(Q);const ne=[];for(const Xe of d)($e=Xe.tags)!=null&&$e.includes("Voucher")||ne.push({id:`notif_${Date.now()}_${Xe.id}`,type:"review_request",title:"How was your purchase?",message:`Review ${Xe.name} to earn 100 Points!`,productId:Xe.id,productName:Xe.name,date:new Date().toISOString(),isRead:!1});const he=Math.floor(ee.total/10),Ne={...f,loyaltyPoints:Math.max(0,f.loyaltyPoints+he),notifications:[...ne,...f.notifications]};return v(Ne),ve(Ne),!k&&Ee&&f.id!=="guest"&&await an(St(Ee,"users",f.id),Lt(Ne)),Q},Zn=async(ee,Q)=>{const ne="GV-"+Math.random().toString(36).substr(2,9).toUpperCase(),he={code:ne,discountType:"fixed",value:ee,minSpend:ee,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};Or(he);const Ne={id:`gift_${Date.now()}`,type:"gift_ready",title:"Gift Ready",message:"Your voucher is ready.",date:new Date().toISOString(),isRead:!1,voucherData:{code:ne,amount:ee,meta:Q}},$e={...f,notifications:[Ne,...f.notifications]};v($e),ve($e),!k&&Ee&&f.id!=="guest"&&await an(St(Ee,"users",f.id),Lt($e))},kr=async(ee,Q,ne,he)=>{if(f.id==="guest")return;const Ne=e.find(Xe=>Xe.id===ee);if(Ne){const Xe={id:`rev_${Date.now()}`,userName:f.name,location:"Verified Buyer",content:ne,rating:Q,date:new Date().toLocaleDateString()};await Ct({...Ne,reviews:[Xe,...Ne.reviews||[]]})}const $e={...f,loyaltyPoints:f.loyaltyPoints+100,notifications:f.notifications.filter(Xe=>Xe.id!==he)};v($e),ve($e),!k&&Ee&&await an(St(Ee,"users",f.id),Lt($e))},er=async ee=>{const Q={...f,loyaltyPoints:f.loyaltyPoints+50};v(Q),ve(Q),!k&&Ee&&f.id!=="guest"&&await an(St(Ee,"users",f.id),{loyaltyPoints:Q.loyaltyPoints})},Es=async(ee,Q)=>{if(f.id==="guest")return;const ne=f.socialRewards||{};if(ne[ee])return;const he={...f,loyaltyPoints:f.loyaltyPoints+100,socialRewards:{...ne,[ee]:!0},socialHandles:{...f.socialHandles,[ee]:Q}};v(he),ve(he),!k&&Ee&&await an(St(Ee,"users",f.id),Lt(he))},jr=(ee,Q,ne="system")=>{const he={id:`sys_${Date.now()}`,type:ne,title:ee,message:Q,date:new Date().toISOString(),isRead:!1},Ne={...f,notifications:[he,...f.notifications]};v(Ne),ve(Ne)},Ur=()=>{try{const ee=JSON.stringify(e);return ee.length>0?{status:"success",details:`Serialization OK. Size: ${(ee.length/1024).toFixed(2)} KB`}:{status:"warning",details:"Empty products."}}catch(ee){return{status:"error",details:`Error: ${ee.message}`}}};return r.jsx(bw.Provider,{value:{products:e,categories:s,cart:d,user:f,specials:w,vouchers:E,appliedVoucher:K,affiliateLeaderboard:pe,memberCount:O,weeklyWinners:z,isLoading:T,isDemoMode:k,dbConnectionError:H,orders:l,isStickyProgressBarVisible:V,setIsStickyProgressBarVisible:me,packagingPresets:Le,materialPresets:Te,savePackagingPreset:G,deletePackagingPreset:$,saveMaterialPreset:M,deleteMaterialPreset:se,login:de,logout:We,register:ze,addToCart:Je,removeFromCart:He,updateCartQuantity:wt,clearCart:Et,toggleWishlist:ot,checkout:Vn,submitReview:kr,addSystemNotification:jr,processGiftVoucherPurchase:Zn,applyForAffiliate:je,approveAffiliate:at,rejectAffiliate:Bt,sendAffiliateMessage:$t,buyAffiliateContent:_e,joinAffiliateElite:Ht,simulateAffiliateSale:Mn,updateAffiliateTier:un,assignAffiliateParent:qt,addProduct:En,updateProduct:Ct,deleteProduct:Rt,addOrder:dn,updateOrder:fr,deleteOrder:Xn,addCategory:ce,updateCategory:qe,deleteCategory:kt,replaceCategories:hn,addSpecial:Dn,resetStore:os,seedTestUsers:Ke,getAllUsers:hr,runDataDiagnostics:Ur,adminAdjustPoints:Qn,getCartTotal:as,addVoucher:Or,deleteVoucher:Ss,applyExternalVoucher:Cr,setAppliedVoucher:te,shareProduct:er,claimSocialReward:Es,updateUserAddress:Ze},children:n})},It=()=>{const n=D.useContext(bw);if(!n)throw new Error("useStore must be used within StoreProvider");return n};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(n,e)=>{const t=D.forwardRef(({color:s="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:d="",children:m,...f},v)=>D.createElement("svg",{ref:v,...qj,width:o,height:o,stroke:s,strokeWidth:c?Number(l)*24/Number(o):l,className:["lucide",`lucide-${Hj(n)}`,d].join(" "),...f},[...e.map(([w,N])=>D.createElement(w,N)),...Array.isArray(m)?m:[m]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=xe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=xe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=xe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=xe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=xe("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=xe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=xe("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=xe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=xe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=xe("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=xe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=xe("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=xe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=xe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=xe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=xe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=xe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=xe("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=xe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=xe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=xe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=xe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=xe("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=xe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=xe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=xe("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=xe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=xe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=xe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=xe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=xe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=xe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=xe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=xe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=xe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=xe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=xe("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=xe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=xe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=xe("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=xe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=xe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=xe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=xe("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=xe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=xe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=xe("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=xe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=xe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=xe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=xe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=xe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=xe("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=xe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=xe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=xe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=xe("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=xe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=xe("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=xe("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=xe("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=xe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=xe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=xe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=xe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=xe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=xe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Bx=["Thandi","Jessica","Precious","Elize","Zanele","Sarah","Nosipho","Annelie","Busi","Nicole","Lindiwe","Megan","Nompumelelo","Bianca","Ayanda","Michelle","Gugulethu","Chantelle","Siphesihle","Debbie","Refilwe","Karen"],$x=["Priya","Meera","Anjali","Deepa","Lakshmi"],qx=["Wei","Li","Mei","Yuki","Jin"],Hx=["Dlamini","Botha","Nkosi","Nel","Khumalo","Van Der Merwe","Molefe","Smith","Mthembu","Coetzee","Ngcobo","Fourie","Mkhize","Van Wyk","Zulu","Kruger"],Gx=["Naidoo","Patel","Govender","Chetty","Singh"],Wx=["Chen","Wang","Lee","Zhang","Liu"],Kx=["Sandton","Cape Town","Durban North","Centurion","Paarl","Soweto","Umhlanga","Bloemfontein","Stellenbosch","George","Ballito","Benoni","Midrand","Somerset West","Port Elizabeth","Pretoria East"],NT=()=>{const{products:n}=It(),[e,t]=D.useState(!1),[s,o]=D.useState(null),l=D.useMemo(()=>n.filter(c=>c.stock>1&&(c.soldCount||0)>150),[n]);return D.useEffect(()=>{if(l.length===0)return;let c;const d=()=>{const f=l[Math.floor(Math.random()*l.length)],v=Math.random();let w="",N="";v>.99?(w=qx[Math.floor(Math.random()*qx.length)],N=Wx[Math.floor(Math.random()*Wx.length)]):v>.98?(w=$x[Math.floor(Math.random()*$x.length)],N=Gx[Math.floor(Math.random()*Gx.length)]):(w=Bx[Math.floor(Math.random()*Bx.length)],N=Hx[Math.floor(Math.random()*Hx.length)]);const E=Kx[Math.floor(Math.random()*Kx.length)],I=`${Math.floor(Math.random()*59)+1} minutes ago`,T=f.type==="Pendant"||f.type==="Bracelet";o({img:T?void 0:f.images[0],name:`${w} ${N.charAt(0)}.`,location:E,productName:f.name,productId:f.id,timeAgo:I}),t(!0),setTimeout(()=>{t(!1)},6e3);const A=Math.floor(Math.random()*25001+2e4);c=setTimeout(d,A)};return c=setTimeout(d,5e3),()=>clearTimeout(c)},[l]),s?r.jsx("div",{className:`fixed bottom-4 left-4 z-50 max-w-xs w-full transition-all duration-700 transform ${e?"translate-y-0 opacity-100":"translate-y-20 opacity-0 pointer-events-none"}`,children:r.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md border border-gray-800 p-3 rounded-xl shadow-2xl flex items-center gap-3 relative overflow-hidden group",children:[r.jsx("button",{onClick:()=>t(!1),className:"absolute top-1 right-1 text-gray-500 hover:text-white p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(yn,{size:12})}),s.img?r.jsx("div",{className:"w-16 h-16 shrink-0 rounded-lg overflow-hidden border border-gray-700 bg-black",children:r.jsx("img",{src:s.img,alt:"Product",className:"w-full h-full object-cover",onError:c=>{console.warn("Image failed to load in SocialProofPopup:",c.currentTarget.src),c.currentTarget.src="https://via.placeholder.com/200"}})}):r.jsx("div",{className:"w-16 h-16 shrink-0 rounded-lg border border-purple-500/30 bg-purple-900/20 flex items-center justify-center",children:r.jsxs("span",{className:"font-cherry text-xs text-purple-400 text-center leading-none",children:["Unique",r.jsx("br",{}),"Find"]})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[r.jsx("span",{className:"text-xs font-bold text-white truncate",children:s.name}),r.jsxs("span",{className:"text-[9px] text-gray-400",children:["in ",s.location]})]}),r.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-green-400 font-bold uppercase tracking-wide mb-1",children:[r.jsx(Al,{size:10})," Verified Purchase"]}),r.jsx(Ae,{to:`/product/${s.productId}`,className:"block text-xs text-gray-300 hover:text-pink-500 transition-colors truncate line-clamp-2 leading-tight",children:s.productName}),r.jsx("div",{className:"text-[9px] text-gray-500 mt-1",children:s.timeAgo})]})]})}):null},hf=500,Aw=({subtotal:n,isSticky:e=!1,onContinueShopping:t,onClose:s})=>{const o=hf-n,l=Math.min(n/hf*100,100),c=n>=hf,d=c?"Congratulations! You've unlocked FREE shipping!":`You're R${o.toFixed(2)} away from free shipping!`;return e?r.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:r.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-pink-900/20 text-pink-500 rounded-full border border-pink-500/30",children:r.jsx(ss,{size:20})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm font-bold ${c?"text-green-400":"text-white"}`,children:d}),r.jsx("div",{className:"w-full bg-black/50 rounded-full h-2 mt-1 overflow-hidden border border-gray-700",children:r.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c?"bg-green-500":"bg-pink-500"}`,style:{width:`${l}%`}})})]}),r.jsx("button",{onClick:s,className:"p-2 text-gray-500 hover:text-white",children:r.jsx(yn,{size:18})})]})}):r.jsx("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-pink-500/30 rounded-2xl p-6 shadow-lg mb-8",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[r.jsx("div",{className:"p-3 bg-pink-900/30 text-pink-400 rounded-full border border-pink-500/30",children:r.jsx(ss,{size:28})}),r.jsxs("div",{className:"flex-1 text-center md:text-left",children:[r.jsx("h3",{className:`text-lg font-bold ${c?"text-green-400":"text-white"}`,children:d}),r.jsx("div",{className:"w-full bg-black rounded-full h-2.5 mt-2 overflow-hidden border border-gray-700 shadow-inner",children:r.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c?"bg-green-500":"bg-pink-500"} shadow-[inset_0_1px_1px_rgba(255,255,255,0.2)]`,style:{width:`${l}%`}})})]}),!c&&r.jsxs("button",{onClick:t,className:"w-full md:w-auto mt-2 md:mt-0 px-6 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:["Continue Shopping ",r.jsx(At,{size:18})]})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var ba;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(ba||(ba={}));class ff extends Error{constructor(e,t,s){super(e),this.message=e,this.code=t,this.data=s}}const ST=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},ET=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},s=t.Plugins=t.Plugins||{},o=()=>e!==null?e.name:ST(n),l=()=>o()!=="web",c=w=>{const N=f.get(w);return!!(N!=null&&N.platforms.has(o())||d(w))},d=w=>{var N;return(N=t.PluginHeaders)===null||N===void 0?void 0:N.find(E=>E.name===w)},m=w=>n.console.error(w),f=new Map,v=(w,N={})=>{const E=f.get(w);if(E)return console.warn(`Capacitor plugin "${w}" already registered. Cannot register plugins twice.`),E.proxy;const I=o(),T=d(w);let A;const H=async()=>(!A&&I in N?A=typeof N[I]=="function"?A=await N[I]():A=N[I]:e!==null&&!A&&"web"in N&&(A=typeof N.web=="function"?A=await N.web():A=N.web),A),W=(P,z)=>{var F,k;if(T){const j=T==null?void 0:T.methods.find(V=>z===V.name);if(j)return j.rtype==="promise"?V=>t.nativePromise(w,z.toString(),V):(V,me)=>t.nativeCallback(w,z.toString(),V,me);if(P)return(F=P[z])===null||F===void 0?void 0:F.bind(P)}else{if(P)return(k=P[z])===null||k===void 0?void 0:k.bind(P);throw new ff(`"${w}" plugin is not implemented on ${I}`,ba.Unimplemented)}},K=P=>{let z;const F=(...k)=>{const j=H().then(V=>{const me=W(V,P);if(me){const Le=me(...k);return z=Le==null?void 0:Le.remove,Le}else throw new ff(`"${w}.${P}()" is not implemented on ${I}`,ba.Unimplemented)});return P==="addListener"&&(j.remove=async()=>z()),j};return F.toString=()=>`${P.toString()}() { [capacitor code] }`,Object.defineProperty(F,"name",{value:P,writable:!1,configurable:!1}),F},te=K("addListener"),pe=K("removeListener"),J=(P,z)=>{const F=te({eventName:P},z),k=async()=>{const V=await F;pe({eventName:P,callbackId:V},z)},j=new Promise(V=>F.then(()=>V({remove:k})));return j.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},j},O=new Proxy({},{get(P,z){switch(z){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return T?J:te;case"removeListener":return pe;default:return K(z)}}});return s[w]=O,f.set(w,{name:w,proxy:O,platforms:new Set([...Object.keys(N),...T?[I]:[]])}),O};return t.convertFileSrc||(t.convertFileSrc=w=>w),t.getPlatform=o,t.handleError=m,t.isNativePlatform=l,t.isPluginAvailable=c,t.registerPlugin=v,t.Exception=ff,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},CT=n=>n.Capacitor=ET(n),$f=CT(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),em=$f.registerPlugin;class Iw{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);const l=this.windowListeners[e];l&&!l.registered&&this.addWindowListener(l),s&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,t);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,s){const o=this.listeners[e];if(!o){if(s){let l=this.retainedEventArguments[e];l||(l=[]),l.push(t),this.retainedEventArguments[e]=l}return}o.forEach(l=>l(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:s=>{this.notifyListeners(t,s)}}}unimplemented(e="not implemented"){return new $f.Exception(e,ba.Unimplemented)}unavailable(e="not available"){return new $f.Exception(e,ba.Unavailable)}async removeListener(e,t){const s=this.listeners[e];if(!s)return;const o=s.indexOf(t);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(s=>{this.notifyListeners(e,s)}))}}const Jx=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Yx=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class kT extends Iw{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[o,l]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=Yx(o).trim(),l=Yx(l).trim(),t[o]=l}),t}async setCookie(e){try{const t=Jx(e.key),s=Jx(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,l=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${s||""}${o}; path=${l}; ${c};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}em("CapacitorCookies",{web:()=>new kT});const jT=async n=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{const o=s.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},s.onerror=o=>t(o),s.readAsDataURL(n)}),TT=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(o=>o.toLocaleLowerCase()).reduce((o,l,c)=>(o[l]=n[e[c]],o),{})},PT=(n,e=!0)=>n?Object.entries(n).reduce((s,o)=>{const[l,c]=o;let d,m;return Array.isArray(c)?(m="",c.forEach(f=>{d=e?encodeURIComponent(f):f,m+=`${l}=${d}&`}),m.slice(0,-1)):(d=e?encodeURIComponent(c):c,m=`${l}=${d}`),`${s}&${m}`},"").substr(1):null,AT=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),o=TT(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(o.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[c,d]of Object.entries(n.data||{}))l.set(c,d);t.body=l.toString()}else if(o.includes("multipart/form-data")||n.data instanceof FormData){const l=new FormData;if(n.data instanceof FormData)n.data.forEach((d,m)=>{l.append(m,d)});else for(const d of Object.keys(n.data))l.append(d,n.data[d]);t.body=l;const c=new Headers(t.headers);c.delete("content-type"),t.headers=c}else(o.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class IT extends Iw{async request(e){const t=AT(e,e.webFetchExtra),s=PT(e.params,e.shouldEncodeUrlParams),o=s?`${e.url}?${s}`:e.url,l=await fetch(o,t),c=l.headers.get("content-type")||"";let{responseType:d="text"}=l.ok?e:{};c.includes("application/json")&&(d="json");let m,f;switch(d){case"arraybuffer":case"blob":f=await l.blob(),m=await jT(f);break;case"json":m=await l.json();break;case"document":case"text":default:m=await l.text()}const v={};return l.headers.forEach((w,N)=>{v[N]=w}),{data:m,headers:v,status:l.status,url:l.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}em("CapacitorHttp",{web:()=>new IT});async function RT(n){try{const e=globalThis.Capacitor||window.Capacitor,t=e&&e.Plugins&&e.Plugins.UpdaterPlugin;if(t&&t.downloadAndInstall){await t.downloadAndInstall({url:n});return}}catch{}throw new Error("UpdaterPlugin not available")}em("UpdaterPlugin",{web:()=>({openUrl:async()=>{console.warn("UpdaterPlugin not available on web")}})});const MT="https://spoilme-edee0.web.app/Spoil-Me-Vintage-0.1.apk",DT=()=>{if(typeof navigator>"u")return!1;const n=navigator.userAgent||navigator.vendor||"";return/Android|iPhone|iPad|iPod/i.test(n)};function VT({apkUrl:n=MT,playStoreUrl:e}){const[t,s]=D.useState(!1);if(D.useEffect(()=>{if(!DT())return;localStorage.getItem("appPromptDismissed")||s(!0)},[]),!t)return null;const o=()=>{localStorage.setItem("appPromptDismissed",String(Date.now())),s(!1)},l=()=>{window.location.href=n},c=async()=>{try{window.Capacitor&&window.Capacitor.isNativePlatform&&window.Capacitor.isNativePlatform()?await RT(n):window.open(n,"_blank")}catch(d){console.error("Updater error",d),window.open(n,"_blank")}o()};return r.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:o}),r.jsxs("div",{className:"relative bg-zinc-900 rounded-xl p-6 w-[92%] max-w-md text-gray-100",children:[r.jsx("h3",{className:"text-lg font-bold mb-2",children:"Make your experience better  download the app"}),r.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Get faster checkout, push notifications, and a native experience."}),r.jsxs("div",{className:"flex gap-3",children:[e?r.jsx("a",{className:"px-4 py-2 bg-cyan-500 text-black rounded font-semibold",href:e,children:"Get it on Google Play"}):r.jsx("button",{onClick:l,className:"px-4 py-2 bg-green-500 text-black rounded font-semibold",children:"Download APK"}),r.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded font-semibold",children:"Open installer"}),r.jsx("button",{onClick:o,className:"px-4 py-2 ring-1 ring-gray-700 rounded text-gray-300",children:"Maybe later"})]})]})]})}const LT=()=>{const[n,e]=D.useState(!1),{cart:t,user:s,isStickyProgressBarVisible:o,setIsStickyProgressBarVisible:l,getCartTotal:c}=It(),d=Mi();D.useEffect(()=>{window.scrollTo(0,0)},[d.pathname]);const m=t.reduce((N,E)=>N+E.quantity,0),f=c(),v=s.wishlist?s.wishlist.length:0,w=s.notifications?s.notifications.filter(N=>!N.isRead).length:0;return r.jsxs("div",{className:"min-h-screen flex flex-col bg-black text-gray-100",children:[r.jsx("style",{children:`
        @keyframes marquee {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
        .animate-marquee {
          animation: marquee 10s linear infinite;
        }
        .animate-marquee:hover {
          animation-play-state: paused;
        }
      `}),r.jsx("div",{className:"w-full bg-zinc-900 border-b border-white/5 overflow-hidden py-2 relative z-[60]",children:r.jsxs("div",{className:"flex animate-marquee whitespace-nowrap",children:[r.jsxs("div",{className:"flex items-center gap-8 px-4",children:[r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[r.jsx(Ys,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[r.jsx(Er,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[r.jsx(ss,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[r.jsx(Yt,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[r.jsx(vl,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[r.jsx(Fr,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[r.jsx(Al,{size:14,className:"text-green-500"})," And lots more!"]})]}),r.jsxs("div",{className:"flex items-center gap-8 px-4",children:[r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[r.jsx(Ys,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[r.jsx(Er,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[r.jsx(ss,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[r.jsx(Yt,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[r.jsx(vl,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[r.jsx(Fr,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[r.jsx(Al,{size:14,className:"text-green-500"})," And lots more!"]})]})]})}),r.jsxs("header",{className:"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800 transition-all",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"relative flex flex-col lg:flex-row items-center justify-center lg:justify-between h-auto lg:h-20 py-4 lg:py-0 gap-3",children:[r.jsx("button",{className:"absolute top-1/2 -translate-y-1/2 left-4 lg:hidden p-2 rounded-md text-gray-400 hover:text-white",onClick:()=>e(!n),children:n?r.jsx(yn,{size:24}):r.jsx(sT,{size:24})}),r.jsxs(Ae,{to:"/",className:"flex-shrink-0 group flex flex-col items-center leading-none",children:[r.jsx("span",{className:"font-cherry text-[24px] font-bold text-pink-500 group-hover:text-pink-400 transition-colors drop-shadow-[0_0_5px_rgba(236,72,153,0.5)]",children:"Spoil Me"}),r.jsx("span",{className:"font-cherry text-[24px] font-bold text-cyan-400 group-hover:text-cyan-300 transition-colors drop-shadow-[0_0_5px_rgba(34,211,238,0.5)] ml-7 -mt-1",children:"Vintage"})]}),r.jsxs("nav",{className:"hidden lg:flex absolute left-1/2 -translate-x-1/2 space-x-8",children:[r.jsx(Ae,{to:"/",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${d.pathname==="/"?"text-cyan-400":"text-gray-300"}`,children:"Home"}),r.jsx(Ae,{to:"/#catalog",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Catalog"}),r.jsxs(Ae,{to:"/membership",className:`text-sm font-medium flex items-center gap-1 hover:text-purple-400 transition-colors ${d.pathname==="/membership"?"text-purple-400 font-bold":"text-gray-300"}`,children:[r.jsx(Nr,{size:14})," Membership"]}),r.jsx(Ae,{to:"/#specials",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Specials"})]}),r.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-3 w-full lg:w-auto justify-center lg:justify-end",children:[r.jsx("button",{className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors",children:r.jsx(md,{size:20})}),s.email?r.jsx(Ae,{to:"/earn-rewards",className:"group flex items-center justify-center p-2 relative",title:"Your Loyalty Rewards",children:r.jsxs("div",{className:"flex items-center gap-1.5 hover:bg-purple-900/50 px-2 py-1 rounded-full transition-colors border border-transparent hover:border-purple-500/30",children:[r.jsx(Fr,{size:20,className:"text-purple-400 group-hover:text-pink-400"}),r.jsx("span",{className:"hidden md:inline-block text-xs font-bold text-purple-200 group-hover:text-white",children:s.loyaltyPoints})]})}):r.jsx(Ae,{to:"/earn-rewards",className:"p-2 text-gray-400 hover:text-purple-400 transition-colors relative",title:"Earn Rewards",children:r.jsx(Fr,{size:20})}),s.email&&r.jsxs(Ae,{to:"/profile",className:"p-2 text-gray-400 hover:text-yellow-400 transition-colors relative group",children:[r.jsx(Nw,{size:20}),w>0&&r.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-yellow-400 rounded-full shadow-[0_0_5px_rgba(250,204,21,0.8)]",children:w})]}),r.jsxs(Ae,{to:"/profile",className:"p-2 text-gray-400 hover:text-pink-500 transition-colors relative group",children:[r.jsx(Yp,{size:20}),v>0&&r.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-pink-600 rounded-full shadow-[0_0_5px_rgba(236,72,153,0.8)]",children:v})]}),s.email?r.jsx(Ae,{to:"/profile",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative",children:r.jsx(Vl,{size:20})}):r.jsx(Ae,{to:"/login",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative flex items-center gap-1",children:r.jsx(jw,{size:20})}),r.jsxs(Ae,{to:"/cart",className:"p-2 text-gray-400 hover:text-pink-500 transition-colors relative group",children:[r.jsx(Xp,{size:20}),m>0&&r.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-green-400 rounded-full shadow-[0_0_5px_rgba(74,222,128,0.8)]",children:m})]})]})]})}),n&&r.jsx("div",{className:"lg:hidden absolute top-full left-0 w-full bg-zinc-900 border-b border-gray-800 shadow-lg animate-in slide-in-from-top-5 duration-200 z-40",children:r.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[r.jsx(Ae,{to:"/",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Home"}),r.jsxs(Ae,{to:"/membership",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-purple-400 hover:bg-zinc-800 hover:text-purple-300 flex items-center gap-2",children:[r.jsx(Nr,{size:16})," Membership Perks"]}),r.jsxs(Ae,{to:"/earn-rewards",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[r.jsx(Fr,{size:16,className:"text-purple-400"}),s.email?"My Rewards":"Earn Rewards",s.email&&r.jsxs("span",{className:"bg-purple-900/50 text-purple-200 text-[10px] px-2 py-0.5 rounded-full font-bold ml-auto",children:[s.loyaltyPoints," Pts"]})]}),r.jsxs(Ae,{to:"/affiliate-program",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-green-400 flex items-center gap-2",children:[r.jsx(Zp,{size:16,className:"text-green-500"})," Partnership Program"]}),s.email?r.jsxs(Ae,{to:"/profile",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center justify-between",children:["My Profile",w>0&&r.jsxs("span",{className:"bg-yellow-400 text-black text-xs px-2 py-0.5 rounded-full font-bold",children:[w," New"]})]}):r.jsx(Ae,{to:"/login",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Login / Register"})]})})]}),r.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsx(fv,{})}),r.jsx(NT,{}),o&&f>0&&r.jsx(Aw,{subtotal:f,isSticky:!0,onClose:()=>l(!1)}),r.jsx(VT,{}),r.jsx("footer",{className:"bg-zinc-950 border-t border-gray-800 py-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"About"}),r.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[r.jsx("li",{className:"hover:text-white cursor-pointer",children:"Our Story"}),r.jsx("li",{className:"hover:text-white cursor-pointer",children:"Careers"}),r.jsx("li",{className:"hover:text-white cursor-pointer",children:"Press"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"Support"}),r.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[r.jsx("li",{className:"hover:text-white cursor-pointer",children:"Contact Us"}),r.jsx("li",{className:"hover:text-white cursor-pointer",children:"Shipping"}),r.jsx("li",{className:"hover:text-white cursor-pointer",children:"Returns"}),r.jsx("li",{className:"hover:text-green-400 cursor-pointer flex items-center gap-2 text-gray-300 font-medium",children:r.jsxs("a",{href:"https://spoilme-edee0.web.app/Spoil-Me-Vintage-0.1.apk",download:!0,style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"inherit",textDecoration:"none"},children:[r.jsx(qs,{size:14})," Download App"]})})]})]})]}),s.isAdmin&&r.jsx("div",{className:"mt-12 pt-8 border-t border-gray-900 flex justify-center",children:r.jsxs(Ae,{to:"/admin",className:"flex items-center gap-2 text-xs text-red-400 hover:text-red-300 uppercase tracking-widest font-bold transition-colors bg-red-900/10 px-4 py-2 rounded border border-red-900/30",children:[r.jsx(Bf,{size:14})," Admin Dashboard"]})})]})})]})},zT=()=>{const n=Mi(),e=is(),{user:t}=It();D.useEffect(()=>{t.isAdmin||e("/login")},[t,e]);const s=[{path:"/admin",icon:Bf,label:"Dashboard"},{path:"/admin/orders",icon:Ii,label:"Orders"},{path:"/admin/products",icon:Ou,label:"Products"},{path:"/admin/categories",icon:gT,label:"Categories"},{path:"/admin/gift-cards",icon:Yt,label:"Gift Cards"},{path:"/admin/social",icon:bo,label:"Social Studio"},{path:"/admin/affiliates",icon:Ys,label:"Affiliates"},{path:"/admin/winners",icon:es,label:"Weekly Winners"},{path:"/admin/expenses",icon:_s,label:"Expenses"}];return t.isAdmin?r.jsxs("div",{className:"min-h-screen bg-black flex text-gray-100",children:[r.jsxs("aside",{className:"w-64 bg-zinc-900 border-r border-gray-800 hidden md:flex flex-col fixed h-full",children:[r.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-gray-800",children:[r.jsx("span",{className:"text-xl font-bold text-pink-500 drop-shadow-[0_0_3px_rgba(236,72,153,0.6)]",children:"Spoil Me Vintage"}),r.jsx("span",{className:"ml-2 text-xs bg-purple-900/50 border border-purple-500/50 text-purple-300 px-2 py-0.5 rounded",children:"ADMIN"})]}),r.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[r.jsxs(Ae,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-gray-400 hover:bg-zinc-800 hover:text-white rounded-lg mb-4 transition-colors",children:[r.jsx(Pl,{size:18})," Back to Store"]}),r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Management"}),s.map(o=>{const l=n.pathname===o.path;return r.jsxs(Ae,{to:o.path,className:`flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-colors ${l?"bg-pink-900/20 text-pink-400 border border-pink-500/20":"text-gray-400 hover:bg-zinc-800 hover:text-white"}`,children:[r.jsx(o.icon,{size:18})," ",o.label]},o.path)})]})]}),r.jsx("main",{className:"flex-1 md:ml-64 p-8 overflow-y-auto bg-black",children:r.jsx("div",{className:"max-w-6xl mx-auto",children:r.jsx(fv,{})})}),r.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 flex justify-around py-3 z-50 overflow-x-auto",children:[r.jsx(Ae,{to:"/admin",className:"p-2 text-gray-400 hover:text-white",children:r.jsx(Bf,{size:24})}),r.jsx(Ae,{to:"/admin/orders",className:"p-2 text-gray-400 hover:text-white",children:r.jsx(Ii,{size:24})}),r.jsx(Ae,{to:"/admin/products",className:"p-2 text-gray-400 hover:text-white",children:r.jsx(Ou,{size:24})}),r.jsx(Ae,{to:"/admin/social",className:"p-2 text-gray-400 hover:text-white",children:r.jsx(bo,{size:24})}),r.jsx(Ae,{to:"/admin/gift-cards",className:"p-2 text-gray-400 hover:text-white",children:r.jsx(Yt,{size:24})}),r.jsx(Ae,{to:"/admin/affiliates",className:"p-2 text-gray-400 hover:text-white",children:r.jsx(Ys,{size:24})}),r.jsx(Ae,{to:"/admin/expenses",className:"p-2 text-gray-400 hover:text-white",children:r.jsx(_s,{size:24})})]})]}):null},cr=({product:n})=>{const{addToCart:e,toggleWishlist:t,user:s,cart:o}=It(),[l,c]=D.useState(!1),d=s.wishlist.includes(n.id),m=is(),f=new Date,v=n.promoStartsAt?new Date(n.promoStartsAt):null,w=n.promoExpiresAt?new Date(n.promoExpiresAt):null,N=v&&!isNaN(v.getTime()),E=w&&!isNaN(w.getTime()),I=(n.promoPrice||0)>0&&(!N||v<=f)&&(!E||w>f),T=parseFloat((n.price*.8).toFixed(2));let A=n.price,H=!1,W="none";s.isMember?(H=!0,I?s.membershipTier==="deluxe"&&n.promoDeluxeMemberPrice&&n.promoDeluxeMemberPrice>0?(A=n.promoDeluxeMemberPrice,W="deluxe"):s.membershipTier==="premium"&&n.promoPremiumMemberPrice&&n.promoPremiumMemberPrice>0?(A=n.promoPremiumMemberPrice,W="premium"):s.membershipTier==="basic"&&n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0?(A=n.promoBasicMemberPrice,W="basic"):A=Math.min(T,n.promoPrice||1/0):A=T):I&&(A=n.promoPrice);const K=I&&n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0?n.promoBasicMemberPrice:T,pe=n.reviews&&n.reviews.length>0?(n.reviews.reduce((Se,Te)=>Se+Te.rating,0)/n.reviews.length).toFixed(1):"5.0",J=n.reviews?n.reviews.length:0,O=n.soldCount||0,z=I?(()=>{if(!E||!w)return null;const Se=w.getTime()-f.getTime();if(Se<=0)return null;const Te=Math.floor(Se/(1e3*60*60*24)),B=Math.floor(Se%(1e3*60*60*24)/(1e3*60*60)),ve=Math.floor(Se%(1e3*60*60)/(1e3*60));return Te>0?`${Te}d ${B}h`:`${B}h ${ve}m`})():null,F=n.type==="Ring"||n.showEarringOptions&&n.earringMaterials&&n.earringMaterials.length>1||n.type==="Pendant"&&n.chainStyles&&n.chainStyles.length>1,k=n.stock<=0,j=o.filter(Se=>Se.id===n.id).reduce((Se,Te)=>Se+Te.quantity,0),V=!F&&j>=n.stock,me=()=>{k||V||(F?m(`/product/${n.id}`):e({...n,price:A}))},Le=I&&(n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0||n.promoDeluxeMemberPrice&&n.promoDeluxeMemberPrice>0);return r.jsxs("div",{className:"group relative bg-zinc-900 rounded-lg shadow-[0_0_30px_rgba(255,255,255,0.15)] hover:shadow-pink-500/20 transition-all duration-300 border border-gray-800 hover:border-pink-500/50 z-0 flex flex-col h-full",children:[r.jsxs(Ae,{to:`/product/${n.id}`,className:"block relative overflow-hidden aspect-square rounded-t-lg",children:[r.jsx("img",{src:n.images[0],alt:n.name,onError:Se=>{console.warn("Image failed to load in ProductCard:",Se.currentTarget.src)},className:`w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500 ${k?"opacity-50 grayscale":"opacity-90 group-hover:opacity-100"}`}),r.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1 z-10",children:[H&&r.jsxs("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-purple-400/30 flex items-center gap-1",children:[r.jsx(Nr,{size:10,fill:"currentColor"}),W!=="none"?`${W.toUpperCase()} PRICE`:"MEMBER"]}),!H&&I&&r.jsx("span",{className:"bg-green-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-green-500/30",children:"PROMO"}),n.isNewArrival&&r.jsx("span",{className:"bg-cyan-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-cyan-500/30",children:"NEW"})]}),k&&r.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center z-20",children:r.jsx("div",{className:"border-2 border-white px-4 py-2 transform -rotate-12 backdrop-blur-sm",children:r.jsx("span",{className:"text-white font-bold uppercase tracking-widest text-lg",children:"Sold Out"})})}),I&&z&&!k&&r.jsxs("div",{className:"absolute bottom-0 left-0 w-full bg-black/80 backdrop-blur-md py-1 px-2 flex items-center justify-center gap-1.5 text-[10px] text-green-400 font-bold border-t border-green-500/30",children:[r.jsx(Js,{size:10})," Ends in: ",z]})]}),r.jsx("button",{onClick:Se=>{Se.preventDefault(),t(n.id)},className:`absolute top-2 right-2 p-2 rounded-full bg-black/50 backdrop-blur-md shadow-md transition-colors border border-transparent hover:border-pink-500 z-20 ${d?"text-pink-500":"text-gray-300 hover:text-white"}`,children:r.jsx(Yp,{size:18,fill:d?"currentColor":"none"})}),r.jsxs("div",{className:"p-4 rounded-b-lg flex flex-col flex-1 space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("p",{className:"text-xs text-cyan-400 font-medium uppercase tracking-wider truncate pr-2",children:n.category}),r.jsx("button",{onClick:me,disabled:k||V,className:`p-1.5 rounded-full transition-all flex-shrink-0 -mt-1 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed ${s.isMember?"bg-purple-600/20 text-purple-400 hover:bg-purple-600 hover:text-white border border-purple-500/30":"bg-zinc-800 text-gray-300 hover:bg-cyan-500 hover:text-black border border-gray-700"}`,title:F?"View Options":k?"Sold Out":V?"Stock limit in cart":"Add to Cart",children:F?r.jsx(Uf,{size:16}):r.jsx(Ii,{size:16})})]}),r.jsx(Ae,{to:`/product/${n.id}`,children:r.jsx("h3",{className:"text-sm font-bold text-gray-100 leading-tight group-hover:text-pink-500 transition-colors line-clamp-2 h-10",children:n.name})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[r.jsx(Hs,{size:12,fill:"currentColor"}),r.jsx("span",{className:"text-xs font-bold text-gray-300",children:pe}),r.jsxs("span",{className:"text-[10px] text-gray-500",children:["(",J,")"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[O>0&&r.jsxs("div",{className:"text-gray-500 font-medium flex items-center gap-1",children:[O," sold"]}),n.stock>0&&n.stock<=5&&r.jsx("div",{className:"text-orange-400 font-medium flex items-center gap-1",children:"Low Stock"})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 min-h-[20px]",children:[n.compareAtPrice&&r.jsxs("div",{className:"flex items-center gap-1 relative",children:[r.jsxs("span",{className:"text-[10px] text-gray-500 line-through",children:["RRP R",n.compareAtPrice.toFixed(2)]}),r.jsx("button",{onClick:Se=>{Se.preventDefault(),c(!l)},className:"text-gray-600 hover:text-gray-400 focus:outline-none",children:r.jsx(pd,{size:10})}),l&&r.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 p-2 bg-zinc-950 border border-gray-700 rounded shadow-xl text-[10px] text-gray-300 z-50",children:"Recommended retail price."})]}),r.jsxs("span",{className:"text-sm font-bold text-green-400",children:["Retail R",n.price.toFixed(2)]})]}),r.jsx("div",{className:"mt-auto pt-2 border-t border-gray-800/50",children:s.isMember?r.jsx("div",{className:"flex items-end justify-between",children:r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsxs("span",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-wide flex items-center gap-1",children:[r.jsx(Nr,{size:10})," ",W!=="none"?W:"Member"," Price"]}),r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsxs("span",{className:"text-2xl font-bold text-white drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",children:["R",A.toFixed(2)]}),A<n.price&&r.jsxs("span",{className:"text-xs text-gray-500 line-through",children:["R",n.price.toFixed(2)]})]})]})}):r.jsx("div",{className:"flex items-end justify-between",children:r.jsxs("div",{className:"flex flex-col w-full",children:[I?r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsxs("span",{className:"text-2xl font-bold text-green-400",children:["R",A.toFixed(2)]}),r.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["R",n.price.toFixed(2)]})]}):null,Le?r.jsxs("div",{className:"flex flex-col gap-0.5 mt-1",children:[r.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[r.jsx("span",{children:"Basic & Premium:"}),r.jsxs("span",{className:"text-purple-400 font-bold",children:["R",(n.promoBasicMemberPrice||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[r.jsx("span",{children:"Deluxe:"}),r.jsxs("span",{className:"text-purple-400 font-bold",children:["R",(n.promoDeluxeMemberPrice||0).toFixed(2)]})]})]}):r.jsxs("div",{className:"text-[10px] text-gray-400 flex items-center gap-1 mt-0.5",children:["Members: ",r.jsxs("span",{className:"text-purple-400 font-bold",children:["R",K.toFixed(2)]})]})]})})})]})]})},FT=n=>!!n&&/^https?:\/\//i.test(n),OT=n=>!!n&&n.startsWith("data:"),UT=n=>!!n&&n.startsWith("blob:"),BT=n=>!!n&&n.startsWith("gs://");async function $T(n){if(!n)return null;if(typeof n=="string"){if(FT(n)||OT(n)||UT(n)||n.startsWith("/"))return n;if(BT(n)){const e=n.match(/^gs:\/\/[^/]+\/(.+)$/),t=e?e[1]:n;try{return gn?await Us(Bs(gn,decodeURIComponent(t).replace(/^\//,""))):null}catch(s){return console.warn("Failed to resolve gs:// URL",n,s),null}}try{return gn?await Us(Bs(gn,n.replace(/^\//,""))):n}catch{}return n}if(typeof n=="object"){const e=n.fullPath||n.path||n.name||null;if(e&&gn)try{return await Us(Bs(gn,e.replace(/^\//,"")))}catch(t){return console.warn("Failed to resolve storage object image path",n,t),null}}return null}function Rw(n,e){const[t,s]=D.useState(e||void 0);return D.useEffect(()=>{let o=!0;if(!n){s(e);return}return(async()=>{try{const l=await $T(n);o&&s(l||e)}catch(l){console.error("Error resolving image src",l),o&&s(e)}})(),()=>{o=!1}},[n,e]),t}const Bu=({src:n,alt:e="",className:t,fallback:s,onError:o})=>{const l=Rw(n,s||"https://via.placeholder.com/600");return r.jsx("img",{src:l,alt:e,className:t,onError:c=>{o==null||o(c)}})},qT=()=>{const{products:n,categories:e,specials:t,user:s,memberCount:o,weeklyWinners:l}=It(),c=D.useRef(null),d=D.useRef(null),m=D.useRef(null),f=D.useRef(null),v=D.useRef(null),w=D.useRef(null),N=D.useRef(null),E=D.useRef(null),I=D.useRef(null),T=D.useRef(null),A=n.filter(j=>j.isBestSeller),H=n.filter(j=>j.type==="Ring"||j.isFeaturedRing),W=n.filter(j=>j.type==="Bracelet"||j.isFeaturedBracelet),K=n.filter(j=>j.isUniquePendant),te=n.filter(j=>j.type==="Stud"||j.isFeaturedStud),pe=n.filter(j=>j.type==="Dangle"||j.isFeaturedDangle),J=n.filter(j=>j.isJewelrySet),O=n.filter(j=>j.type==="Watch"||j.isFeaturedWatch),P=n.filter(j=>j.type==="Jewelry Box"||j.isFeaturedJewelryBox),z=n.filter(j=>j.type==="Perfume Holder"||j.isFeaturedPerfumeHolder),F=800-o,k=(j,V)=>{if(j.current){const me=j.current.clientWidth*.8;j.current.scrollBy({left:V==="right"?me:-me,behavior:"smooth"})}};return r.jsxs("div",{className:"space-y-12",children:[r.jsx("div",{className:"space-y-2",children:r.jsxs("section",{className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-pink-900 via-purple-900 to-indigo-900 border border-pink-500/30 shadow-[0_0_20px_rgba(236,72,153,0.2)] group hover:shadow-[0_0_30px_rgba(236,72,153,0.4)] transition-all",children:[r.jsx("div",{className:"absolute top-0 right-0 w-64 h-full bg-white/5 skew-x-12 translate-x-20 group-hover:translate-x-10 transition-transform duration-700"}),r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between p-6 md:p-8 relative z-10 gap-6",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsx("div",{className:"p-4 bg-white/10 backdrop-blur-md rounded-full border border-white/20 shadow-lg hidden sm:block",children:r.jsx(Il,{size:32,className:"text-pink-300"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"bg-green-500 text-white text-[10px] font-bold px-2 py-0.5 rounded shadow animate-pulse",children:"LIMITED OFFER"}),r.jsx("span",{className:"text-pink-300 text-xs font-bold uppercase tracking-wider",children:"Give the perfect gift"})]}),r.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-1",children:"Buy a Gift Voucher"}),r.jsxs("p",{className:"text-sm md:text-base text-gray-200",children:["Purchase between ",r.jsx("strong",{className:"text-white",children:"R250 - R500"})," and get an ",r.jsx("span",{className:"text-yellow-300 font-bold underline decoration-wavy",children:"EXTRA R100"})," to spend!"]})]})]}),r.jsxs(Ae,{to:"/gift-cards",className:"whitespace-nowrap px-8 py-3 bg-white text-purple-900 font-bold rounded-full hover:bg-gray-100 transition-colors shadow-lg flex items-center gap-2 group/btn",children:["Create Voucher ",r.jsx(At,{size:18,className:"group-hover/btn:translate-x-1 transition-transform"})]})]})]})}),r.jsxs("div",{className:"relative rounded-2xl overflow-hidden border-4 border-cyan-500",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[r.jsxs("section",{className:"relative bg-zinc-900 text-white",children:[r.jsxs("div",{className:`absolute top-2 right-2 text-xs font-bold px-3 py-1 rounded-full border shadow-md z-20 ${F<=20?"bg-red-600 border-red-400 text-white animate-pulse":"bg-black/50 border-cyan-500/50 text-cyan-300"}`,children:[F," spot",F!==1?"s":""," left"]}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-900/10 via-black to-zinc-900"}),r.jsx("div",{className:"relative z-10 p-4 flex flex-col justify-center",children:r.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-sm font-bold text-cyan-400",children:" Spoil Me Package"}),r.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-cyan-400 drop-shadow-lg py-1",children:"Join the club Win weekly."}),r.jsx("p",{className:"text-sm text-gray-300",children:"All for just R19/month  cancel whenever you want!"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center pt-2",children:[r.jsxs(Ae,{to:"/membership",className:"px-5 py-2.5 bg-pink-600 hover:bg-pink-500 text-white rounded-lg font-semibold transition-all hover:shadow-[0_0_20px_rgba(236,72,153,0.6)] flex items-center justify-center gap-2 text-xs",children:["Join Now ",r.jsx(At,{size:14})]}),r.jsxs(Ae,{to:"/weekly-winners",className:"px-5 py-2.5 border border-gray-500 hover:border-cyan-400 hover:text-cyan-400 hover:bg-cyan-950/30 text-gray-300 rounded-lg font-semibold transition-all text-xs flex items-center justify-center gap-2",children:["View This Week's Winners ",r.jsx(es,{size:14})]})]})]})})]}),l.length>0&&r.jsx("section",{className:"bg-gradient-to-r from-amber-300 via-yellow-400 to-amber-300 py-3 overflow-hidden border-t-2 border-cyan-500/50",children:r.jsx("div",{className:"flex animate-marquee whitespace-nowrap",style:{animationDuration:"40s"},children:[...l,...l].map((j,V)=>r.jsxs("div",{className:"flex items-center mx-6",children:[r.jsx(es,{size:16,className:"text-amber-700 mr-3 shrink-0"}),r.jsx("span",{className:"text-sm text-black font-bold tracking-wide",children:j.name}),r.jsx("span",{className:"text-xs text-zinc-700 font-medium mx-2",children:"won"}),r.jsxs("span",{className:"text-sm font-extrabold text-black",children:["R",j.prize.toFixed(2),"!"]})]},V))})})]}),A.length>0&&r.jsxs("section",{children:[r.jsxs("div",{className:"flex justify-between items-end mb-6",children:[r.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-yellow-400 pb-1 inline-block transform -rotate-1 drop-shadow-[0_0_5px_rgba(250,204,21,0.5)]",children:"Best Sellers"}),r.jsxs(Ae,{to:"/catalog/best",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",r.jsx(At,{size:14})]})]}),r.jsxs("div",{className:"relative group/slider",children:[r.jsx("button",{onClick:()=>k(c,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/slider:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(ao,{size:20})}),r.jsx("button",{onClick:()=>k(c,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/slider:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(zr,{size:20})}),r.jsx("div",{ref:c,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:A.map(j=>r.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:r.jsx(cr,{product:j})},j.id))})]})]}),r.jsxs("section",{children:[r.jsx("div",{className:"flex justify-between items-end mb-6",children:r.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-purple-500 pb-1 inline-block transform -rotate-1 drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",children:"Shop by Category"})}),r.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-8 md:p-4",children:e.map(j=>{const V=j.name==="Red Collection",me=`/collections/${encodeURIComponent(j.name)}`;return V?r.jsx("div",{className:"relative aspect-[4/5] md:aspect-square group cursor-pointer z-10",children:r.jsxs(Ae,{to:me,className:"block w-full h-full relative rounded-xl md:rounded-2xl overflow-hidden bg-zinc-900 text-white border-2 md:border-4 border-black transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 15px 3px rgba(220, 38, 38, 0.6)"},children:[r.jsx(Bu,{src:j.image,alt:j.name,className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity",fallback:"https://via.placeholder.com/600",onError:Le=>{console.warn("Image failed to load in Home category:",Le.currentTarget.src),Le.currentTarget.src="https://via.placeholder.com/600"}}),r.jsxs("div",{className:"absolute bottom-0 left-0 p-1.5 md:p-4 w-full bg-gradient-to-t from-black/80 to-transparent",children:[r.jsx("h3",{className:"font-handwriting text-xl md:text-3xl font-bold mb-0.5 md:mb-1 text-white drop-shadow-md truncate",children:j.name}),r.jsx("p",{className:"text-gray-200 text-[9px] md:text-xs drop-shadow-md line-clamp-1",children:j.description})]})]})},j.id):r.jsx("div",{className:"relative aspect-[4/5] md:aspect-square cursor-pointer overflow-hidden transition-all duration-300 rounded-lg md:rounded-xl border border-gray-800 bg-zinc-900 hover:border-gray-600 group",children:r.jsxs(Ae,{to:me,className:"block w-full h-full relative",children:[r.jsx(Bu,{src:j.image,alt:j.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",fallback:"https://via.placeholder.com/600",onError:Le=>{console.warn("Image failed to load in Home category alt:",Le.currentTarget.src),Le.currentTarget.src="https://via.placeholder.com/600"}}),r.jsxs("div",{className:"absolute bottom-0 left-0 p-1.5 md:p-4 w-full bg-gradient-to-t from-black/80 to-transparent",children:[r.jsx("h3",{className:"font-handwriting text-xl md:text-3xl font-bold mb-0.5 md:mb-1 text-white drop-shadow-md truncate",children:j.name}),r.jsx("p",{className:"text-gray-200 text-[9px] md:text-xs drop-shadow-md line-clamp-1",children:j.description})]})]})},j.id)})})]}),r.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 py-8 border-y border-gray-800 bg-zinc-900/50 backdrop-blur-sm rounded-xl px-6 my-8",children:[r.jsxs(Ae,{to:"/earn-rewards",className:"flex items-center gap-3 group cursor-pointer",children:[r.jsx("div",{className:"p-3 bg-zinc-800 text-pink-500 rounded-full shadow-[0_0_10px_rgba(236,72,153,0.2)] group-hover:shadow-[0_0_15px_rgba(236,72,153,0.5)] transition-all",children:s.email?r.jsx(Fr,{size:20}):r.jsx(Yt,{size:20})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-100 text-base",children:s.email?`My Points: ${s.loyaltyPoints}`:"Loyalty Rewards"}),r.jsx("p",{className:"text-xs text-gray-400",children:s.email?"Redeem for discounts or earn more":"Earn points on every vintage find."})]})]}),r.jsxs(Ae,{to:"/affiliate-program",className:"flex items-center gap-3 group cursor-pointer",children:[r.jsx("div",{className:"p-3 bg-zinc-800 text-green-400 rounded-full shadow-[0_0_10px_rgba(74,222,128,0.2)] group-hover:shadow-[0_0_15px_rgba(74,222,128,0.5)] transition-all",children:r.jsx(Zp,{size:20})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-100 text-base",children:"Partnership Program"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Earn 20% commission on referrals."})]})]}),r.jsxs("div",{className:"flex items-center gap-3 group",children:[r.jsx("div",{className:"p-3 bg-zinc-800 text-cyan-400 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.2)] group-hover:shadow-[0_0_15px_rgba(34,211,238,0.5)] transition-all",children:r.jsx(Js,{size:20})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-100 text-base",children:"Flash Sales"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Daily limited-time offers."})]})]})]}),K.length>0&&r.jsxs("section",{children:[r.jsxs("div",{className:"flex justify-between items-end mb-6",children:[r.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-purple-500 pl-4 inline-block",children:"Unique Pendants"}),r.jsxs(Ae,{to:"/catalog/unique",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",r.jsx(At,{size:14})]})]}),r.jsxs("div",{className:"relative group/pendants",children:[r.jsx("button",{onClick:()=>k(f,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/pendants:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(ao,{size:20})}),r.jsx("button",{onClick:()=>k(f,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/pendants:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(zr,{size:20})}),r.jsx("div",{ref:f,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:K.map(j=>r.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:r.jsx(cr,{product:j})},j.id))})]})]}),H.length>0&&r.jsxs("section",{id:"rings",children:[r.jsxs("div",{className:"flex justify-between items-end mb-6",children:[r.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-pink-500 pl-4 inline-block",children:"Rings"}),r.jsxs(Ae,{to:"/catalog/ring",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",r.jsx(At,{size:14})]})]}),r.jsxs("div",{className:"relative group/rings",children:[r.jsx("button",{onClick:()=>k(d,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/rings:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(ao,{size:20})}),r.jsx("button",{onClick:()=>k(d,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/rings:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(zr,{size:20})}),r.jsx("div",{ref:d,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:H.map(j=>r.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:r.jsx(cr,{product:j})},j.id))})]})]}),W.length>0&&r.jsxs("section",{id:"bracelets",children:[r.jsxs("div",{className:"flex justify-between items-end mb-6",children:[r.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-teal-500 pl-4 inline-block",children:"Bracelets"}),r.jsxs(Ae,{to:"/catalog/bracelet",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",r.jsx(At,{size:14})]})]}),r.jsxs("div",{className:"relative group/bracelets",children:[r.jsx("button",{onClick:()=>k(m,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/bracelets:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(ao,{size:20})}),r.jsx("button",{onClick:()=>k(m,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/bracelets:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(zr,{size:20})}),r.jsx("div",{ref:m,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:W.map(j=>r.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:r.jsx(cr,{product:j})},j.id))})]})]}),te.length>0&&r.jsxs("section",{id:"studs",children:[r.jsxs("div",{className:"flex justify-between items-end mb-6",children:[r.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-pink-400 pl-4 inline-block",children:"Stud Earrings"}),r.jsxs(Ae,{to:"/catalog/stud",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",r.jsx(At,{size:14})]})]}),r.jsxs("div",{className:"relative group/studs",children:[r.jsx("button",{onClick:()=>k(v,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/studs:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(ao,{size:20})}),r.jsx("button",{onClick:()=>k(v,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/studs:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(zr,{size:20})}),r.jsx("div",{ref:v,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:te.map(j=>r.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:r.jsx(cr,{product:j})},j.id))})]})]}),pe.length>0&&r.jsxs("section",{id:"dangles",children:[r.jsxs("div",{className:"flex justify-between items-end mb-6",children:[r.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-cyan-400 pl-4 inline-block",children:"Dangle Earrings"}),r.jsxs(Ae,{to:"/catalog/dangle",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",r.jsx(At,{size:14})]})]}),r.jsxs("div",{className:"relative group/dangles",children:[r.jsx("button",{onClick:()=>k(w,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/dangles:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(zr,{size:20})}),r.jsx("button",{onClick:()=>k(w,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/dangles:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(zr,{size:20})}),r.jsx("div",{ref:w,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:pe.map(j=>r.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:r.jsx(cr,{product:j})},j.id))})]})]}),r.jsxs("section",{className:"relative overflow-hidden rounded-2xl p-8 md:p-12 text-center border-2 border-purple-500 shadow-[0_0_40px_rgba(168,85,247,0.4)] group mt-12",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900 via-black to-zinc-900"}),r.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[r.jsx("div",{className:"bg-purple-600 p-4 rounded-full shadow-[0_0_20px_rgba(168,85,247,0.6)] animate-pulse",children:r.jsx(Nr,{size:40,className:"text-white"})}),r.jsx("h2",{className:"font-cherry text-3xl md:text-5xl text-white drop-shadow-md",children:"Unlock VIP Pricing"}),r.jsxs("p",{className:"text-gray-300 max-w-2xl text-lg leading-relaxed",children:["Join our exclusive membership club to save up to ",r.jsx("span",{className:"text-purple-400 font-bold",children:"50% OFF"})," retail prices, receive monthly free gifts, and access members-only collections."]}),r.jsxs(Ae,{to:"/membership",className:"px-8 py-4 bg-white text-purple-900 font-bold rounded-full hover:scale-105 transition-transform shadow-[0_0_20px_rgba(255,255,255,0.3)] flex items-center gap-2",children:["View Membership Perks ",r.jsx(At,{size:20})]})]})]}),O.length>0&&r.jsxs("section",{id:"watches",className:"mt-12",children:[r.jsxs("div",{className:"flex justify-between items-end mb-6",children:[r.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-yellow-500 pl-4 inline-block",children:"Watches"}),r.jsxs(Ae,{to:"/catalog/watch",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",r.jsx(At,{size:14})]})]}),r.jsxs("div",{className:"relative group/watches",children:[r.jsx("button",{onClick:()=>k(E,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/watches:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(ao,{size:20})}),r.jsx("button",{onClick:()=>k(E,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/watches:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(zr,{size:20})}),r.jsx("div",{ref:E,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:O.map(j=>r.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:r.jsx(cr,{product:j})},j.id))})]})]}),P.length>0&&r.jsxs("section",{id:"jewelry-boxes",className:"mt-12",children:[r.jsxs("div",{className:"flex justify-between items-end mb-6",children:[r.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-orange-500 pl-4 inline-block flex items-center gap-2",children:[r.jsx(Sw,{size:20})," Jewelry Boxes"]}),r.jsxs(Ae,{to:"/catalog/box",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",r.jsx(At,{size:14})]})]}),r.jsxs("div",{className:"relative group/boxes",children:[r.jsx("button",{onClick:()=>k(I,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/boxes:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(zr,{size:20})}),r.jsx("div",{ref:I,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:P.map(j=>r.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:r.jsx(cr,{product:j})},j.id))})]})]}),z.length>0&&r.jsxs("section",{id:"perfumes",className:"mt-12",children:[r.jsxs("div",{className:"flex justify-between items-end mb-6",children:[r.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-blue-500 pl-4 inline-block flex items-center gap-2",children:[r.jsx(Qj,{size:20})," Perfume Holders"]}),r.jsxs(Ae,{to:"/catalog/perfume",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",r.jsx(At,{size:14})]})]}),r.jsxs("div",{className:"relative group/perfumes",children:[r.jsx("button",{onClick:()=>k(T,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/perfumes:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(zr,{size:20})}),r.jsx("div",{ref:T,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:z.map(j=>r.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:r.jsx(cr,{product:j})},j.id))})]})]}),J.length>0&&r.jsxs("section",{id:"jewelry-sets",className:"mt-12",children:[r.jsxs("div",{className:"flex justify-between items-end mb-6",children:[r.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-pink-500 pl-4 inline-block",children:"Jewelry Sets"}),r.jsxs(Ae,{to:"/catalog/sets",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",r.jsx(At,{size:14})]})]}),r.jsxs("div",{className:"relative group/sets",children:[r.jsx("button",{onClick:()=>k(N,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/sets:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(ao,{size:20})}),r.jsx("button",{onClick:()=>k(N,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/sets:opacity-100 transition-opacity focus:opacity-100",children:r.jsx(zr,{size:20})}),r.jsx("div",{ref:N,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:J.map(j=>r.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:r.jsx(cr,{product:j})},j.id))})]})]})]})},HT={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},sa=[{size:5,mm:49.3},{size:6,mm:51.9},{size:7,mm:54.4},{size:8,mm:57},{size:9,mm:59.5},{size:10,mm:62.1},{size:11,mm:64.6},{size:12,mm:67.2},{size:13,mm:69.7}],GT=()=>{const{id:n}=np(),{products:e,addToCart:t,toggleWishlist:s,user:o,shareProduct:l,cart:c}=It(),d=is(),[m,f]=D.useState(0),[v,w]=D.useState(!1),[N,E]=D.useState(!1),[I,T]=D.useState(!1),[A,H]=D.useState(!1),[W,K]=D.useState(1),[te,pe]=D.useState(""),[J,O]=D.useState("Ring Finger"),[P,z]=D.useState(null),[F,k]=D.useState(""),[j,V]=D.useState(null),[me,Le]=D.useState(""),[Se,Te]=D.useState(""),B=e.find(ce=>ce.id===n),ve=B?e.filter(ce=>ce.category===B.category&&ce.id!==B.id).slice(0,4):[];D.useEffect(()=>{window.scrollTo(0,0),T(!1)},[n]),D.useEffect(()=>{if(B){if(B.type==="Ring"&&B.ringStock){const ce=Object.entries(B.ringStock).filter(([qe,kt])=>kt>0).map(([qe])=>qe);ce.length>0&&k(ce[0])}(B.type==="Stud"||B.type==="Dangle")&&B.showEarringOptions&&B.earringMaterials&&B.earringMaterials.length>0&&V(B.earringMaterials[0]),B.type==="Pendant"&&B.chainStyles&&B.chainStyles.length>0&&(B.chainStyles.includes("Metal Chain")?Le("Metal Chain"):Le(B.chainStyles[0]))}},[B]),D.useEffect(()=>{if(me==="Leather Cord")Te("45cm");else if(me==="Metal Chain"&&(B!=null&&B.pendantChainLengths)){const ce=Object.keys(B.pendantChainLengths).find(qe=>B.pendantChainLengths[qe]);ce&&Te(ce)}},[me,B]);const G=D.useMemo(()=>{var ce;return((ce=c.find(qe=>qe.id===(B==null?void 0:B.id)&&qe.selectedSize===F&&qe.selectedMaterial===(j==null?void 0:j.name)&&qe.selectedChainStyle===me&&qe.selectedChainLength===Se))==null?void 0:ce.quantity)||0},[c,B==null?void 0:B.id,F,j,me,Se]),{availableStock:$,isOutOfStock:M,isStockLimitInCart:se,buttonText:de}=D.useMemo(()=>{var Dn;if(!B)return{availableStock:0,isOutOfStock:!0,isStockLimitInCart:!0,buttonText:"Product not found"};let ce=B.stock,qe=ce<=0,kt="Add to Cart";B.type==="Ring"&&(F?(ce=((Dn=B.ringStock)==null?void 0:Dn[F])||0,ce<=0&&(qe=!0,kt="Out of Stock")):(qe=!0,kt="Select a Size"));const hn=ce>0&&G>=ce;return!qe&&hn&&(kt="Stock limit in cart"),{availableStock:ce,isOutOfStock:qe,isStockLimitInCart:hn,buttonText:kt}},[B,F,G]);if(!B)return r.jsx("div",{className:"text-center py-20 text-gray-400",children:"Product not found"});const ze=o.wishlist.includes(B.id),We=new Date,Ze=B.promoStartsAt?new Date(B.promoStartsAt):null,Ke=B.promoExpiresAt?new Date(B.promoExpiresAt):null,Je=Ze&&!isNaN(Ze.getTime()),He=Ke&&!isNaN(Ke.getTime()),wt=(B.promoPrice||0)>0&&(!Je||Ze<=We)&&(!He||Ke>We),Et=parseFloat((B.price*.8).toFixed(2));let ot=B.price,je="none";o.isMember?(ot=Et,wt&&(o.membershipTier==="deluxe"&&B.promoDeluxeMemberPrice&&B.promoDeluxeMemberPrice>0?(ot=B.promoDeluxeMemberPrice,je="deluxe"):o.membershipTier==="premium"&&B.promoPremiumMemberPrice&&B.promoPremiumMemberPrice>0?(ot=B.promoPremiumMemberPrice,je="premium"):o.membershipTier==="basic"&&B.promoBasicMemberPrice&&B.promoBasicMemberPrice>0?(ot=B.promoBasicMemberPrice,je="basic"):(B.promoPrice||1/0)<Et&&(ot=B.promoPrice))):wt&&(ot=B.promoPrice);const at=wt&&B.promoBasicMemberPrice&&B.promoBasicMemberPrice>0?B.promoBasicMemberPrice:Et;let Bt=ot;j&&(Bt+=j.modifier);const $t=B.price+((j==null?void 0:j.modifier)||0),un=$t-at,qt=Math.round(un/$t*100),_e=wt&&(B.promoBasicMemberPrice&&B.promoBasicMemberPrice>0||B.promoDeluxeMemberPrice&&B.promoDeluxeMemberPrice>0),Ht=ce=>Math.round(($t-ce)/$t*100),Mn=B.reviews&&B.reviews.length>0,Qn=Mn?(B.reviews.reduce((ce,qe)=>ce+qe.rating,0)/B.reviews.length).toFixed(1):"4.9",hr=Mn?B.reviews.length:128,En=B.giftProductId?e.find(ce=>ce.id===B.giftProductId):null,Ct=()=>{M||se||(t({...B,price:ot},{selectedSize:F,selectedMaterial:j==null?void 0:j.name,selectedMaterialModifier:j==null?void 0:j.modifier,selectedChainStyle:me,selectedChainLength:Se}),En&&t(En,{}))},Rt=()=>{const ce=parseFloat(te);if(!ce||isNaN(ce))return;let qe=sa[0],kt=Math.abs(ce-qe.mm);for(let hn=1;hn<sa.length;hn++){const Dn=Math.abs(ce-sa[hn].mm);Dn<kt&&(kt=Dn,qe=sa[hn])}ce>sa[sa.length-1].mm+1.5?z(13):z(qe.size),K(4)},dn=()=>{H(!1),K(1),pe(""),z(null)},fr=async ce=>{const qe=window.location.href,kt="Look at this I just bought or saw this isn't it beautiful!",hn=`${kt} ${qe}`;if(o.id&&!I?(l(B.id),T(!0),alert("You earned 50 Loyalty Points for sharing!")):o.id,ce==="native"&&navigator.share)try{await navigator.share({title:B.name,text:kt,url:qe})}catch{console.log("Native share cancelled")}else ce==="whatsapp"?window.open(`https://wa.me/?text=${encodeURIComponent(hn)}`,"_blank"):ce==="facebook"&&window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(qe)}&quote=${encodeURIComponent(kt)}`,"_blank")},Xn=Rw(B.images[m]||B.images[0]||"","https://via.placeholder.com/800x800");return r.jsxs("div",{className:"space-y-16 pt-4 pb-16 relative",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-4",children:[r.jsx(Ae,{to:"/",className:"hover:text-white",children:"Home"}),r.jsx("span",{children:"/"}),r.jsx(Ae,{to:`/collections/${encodeURIComponent(B.category)}`,className:"hover:text-white",children:B.category}),r.jsx("span",{children:"/"}),r.jsx("span",{className:"text-gray-300 truncate max-w-[200px]",children:B.name})]}),N&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>E(!1)}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-400",children:[r.jsx(cf,{size:32}),r.jsx("h3",{className:"text-xl font-bold text-white",children:"Verified Purchases Only"})]}),r.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-4",children:"To maintain the integrity of our reviews, we only accept feedback from verified customers who have purchased this specific item."}),r.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800 mb-6",children:[r.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"How it works:"}),r.jsxs("ul",{className:"text-xs text-gray-400 space-y-3",children:[r.jsxs("li",{className:"flex gap-2 items-start",children:[r.jsx(Js,{size:14,className:"text-cyan-400 shrink-0 mt-0.5"})," ",r.jsxs("span",{children:["A secure review link will be sent to you ",r.jsx("strong",{children:"25 days after purchase"}),"."]})]}),r.jsxs("li",{className:"flex gap-2 items-start",children:[r.jsx(Hs,{size:14,className:"text-yellow-400 shrink-0 mt-0.5"})," ",r.jsxs("span",{children:["Review honestly and earn ",r.jsx("strong",{children:"100 Loyalty Points"}),"!"]})]}),r.jsxs("li",{className:"flex gap-2 items-start",children:[r.jsx(Yt,{size:14,className:"text-pink-500 shrink-0 mt-0.5"})," ",r.jsx("span",{children:"Use points (1000 pts = R10) for discounts on your next order."})]})]})]}),r.jsx("button",{onClick:()=>E(!1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-xl font-semibold transition-colors",children:"Understood"})]})]}),A&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:dn}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[r.jsx(Ux,{className:"text-pink-500",size:20})," Find Your Ring Size"]}),r.jsx("button",{onClick:dn,className:"text-gray-500 hover:text-white",children:r.jsx(uf,{size:16})})]}),r.jsxs("div",{className:"min-h-[250px] flex flex-col",children:[W===1&&r.jsxs("div",{className:"flex-1 space-y-4",children:[r.jsxs("div",{className:"bg-pink-900/20 p-4 rounded-xl border border-pink-500/20 text-center",children:[r.jsx("span",{className:"text-3xl block mb-2",children:""}),r.jsx("p",{className:"text-sm text-pink-200 font-semibold",children:"Step 1"})]}),r.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Take a flexible measuring tape or a piece of string and wrap it around the base of the finger you want to wear the ring on."}),r.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/20 rounded-lg",children:[r.jsxs("p",{className:"text-xs text-yellow-400 font-bold flex items-center gap-2",children:[r.jsx(uf,{size:14})," Important:"]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Please read your measurement in Millimeters (MM), not CM."})]})]}),W===2&&r.jsxs("div",{className:"flex-1 space-y-6 text-center flex flex-col justify-center",children:[r.jsx("p",{className:"text-white font-semibold",children:"Did you measure your finger with a tape or string?"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>K(3),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-xl font-bold transition-all",children:"Yes, I measured my finger"}),r.jsx("button",{onClick:()=>K(1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-gray-300 rounded-xl font-medium transition-all",children:"Back to Instructions"})]})]}),W===3&&r.jsxs("div",{className:"flex-1 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Which finger?"}),r.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-sm",value:J,onChange:ce=>O(ce.target.value),children:[r.jsx("option",{children:"Thumb"}),r.jsx("option",{children:"Index Finger"}),r.jsx("option",{children:"Middle Finger"}),r.jsx("option",{children:"Ring Finger"}),r.jsx("option",{children:"Pinky Finger"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Measured Length (MM)"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",placeholder:"e.g. 54.5",className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-lg font-bold focus:border-pink-500 focus:outline-none",value:te,onChange:ce=>pe(ce.target.value)}),r.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-bold",children:"mm"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please enter the exact circumference."})]})]}),W===4&&r.jsxs("div",{className:"flex-1 text-center flex flex-col justify-center space-y-6",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Based on your ",J," measurement:"]}),r.jsxs("div",{className:"inline-block p-6 bg-zinc-800 rounded-full border-4 border-pink-500 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[r.jsx("span",{className:"block text-xs text-gray-400 uppercase tracking-wide",children:"US Size"}),r.jsx("span",{className:"text-4xl font-black text-white",children:P})]})]}),B.ringStock&&B.ringStock[(P==null?void 0:P.toString())||""]>0?r.jsxs("button",{onClick:()=>{k((P==null?void 0:P.toString())||""),dn()},className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold transition-all flex items-center justify-center gap-2",children:[r.jsx(dt,{size:18})," Select Size ",P]}):r.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/20 rounded-lg text-red-300 text-sm",children:["Sorry, Size ",P," is currently out of stock."]})]})]}),r.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-800",children:[W>1&&W<4?r.jsxs("button",{onClick:()=>K(ce=>ce-1),className:"text-gray-400 hover:text-white text-sm flex items-center gap-1",children:[r.jsx(Pl,{size:14})," Back"]}):r.jsx("div",{}),W===1&&r.jsxs("button",{onClick:()=>K(2),className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500",children:["Next Step ",r.jsx(At,{size:14,className:"inline"})]}),W===3&&r.jsx("button",{onClick:Rt,disabled:!te,className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Get My Size"}),W===4&&r.jsx("button",{onClick:dn,className:"text-gray-400 hover:text-white text-sm",children:"Close"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden bg-zinc-900 shadow-lg border border-gray-800 relative group",children:[r.jsx(Bu,{src:Xn,alt:B.name,className:"w-full h-full object-cover opacity-95",onError:ce=>{console.warn("Image failed to load in ProductDetail primary:",ce.currentTarget.src),ce.currentTarget.src="https://via.placeholder.com/800x800"}}),r.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[B.isNewArrival&&r.jsx("span",{className:"bg-cyan-600/90 text-white text-xs font-bold px-3 py-1 rounded-full w-fit",children:"NEW"}),o.isMember&&r.jsxs("span",{className:"bg-purple-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-purple-400 flex items-center gap-1 w-fit",children:[r.jsx(Nr,{size:12,fill:"currentColor"}),je!=="none"?`${je.toUpperCase()} PRICE`:"MEMBER DEAL"]})]}),wt&&!o.isMember&&r.jsx("span",{className:"absolute top-4 right-4 bg-green-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-[0_0_10px_rgba(74,222,128,0.5)]",children:"PROMO"})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:B.images.map((ce,qe)=>r.jsx("button",{onClick:()=>f(qe),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${m===qe?"border-pink-500 opacity-100 shadow-[0_0_10px_rgba(236,72,153,0.4)]":"border-gray-800 opacity-60 hover:opacity-100"}`,children:r.jsx(Bu,{src:ce,alt:`View ${qe}`,className:"w-full h-full object-cover",onError:kt=>{console.warn("Image failed to load in ProductDetail thumb:",kt.currentTarget.src),kt.currentTarget.src="https://via.placeholder.com/320x320"}})},qe))})]}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[r.jsx("span",{className:"uppercase tracking-wider font-semibold text-cyan-400",children:B.category}),r.jsx("span",{children:""}),r.jsxs("div",{className:"flex items-center text-yellow-400 gap-1",children:[r.jsx(Hs,{size:14,fill:"currentColor"})," ",Qn," (",hr," reviews)"]})]}),r.jsx("h1",{className:"text-[26px] font-bold text-white mb-4",children:B.name}),r.jsxs("div",{className:"flex flex-col gap-1",children:[B.compareAtPrice&&B.compareAtPrice>Bt&&r.jsxs("div",{className:"flex items-center gap-2 relative",children:[r.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["RRP R",B.compareAtPrice.toFixed(2)]}),r.jsx("button",{onClick:()=>w(!v),className:"text-gray-500 hover:text-cyan-400",children:r.jsx(pd,{size:14})}),v&&r.jsx("div",{className:"absolute top-6 left-0 z-10 bg-zinc-950 border border-gray-700 p-3 rounded-lg shadow-xl w-64 text-xs text-gray-300 leading-relaxed",children:"Recommended retail price (RRP) set by the manufacturer and used for price comparison purposes."})]}),r.jsxs("div",{className:"flex items-baseline gap-3",children:[r.jsxs("span",{className:`text-[32px] font-bold drop-shadow-sm ${o.isMember?"text-purple-400":"text-green-400"}`,children:["R",Bt.toFixed(2)]}),$t>Bt+.01&&r.jsxs("span",{className:"text-lg text-gray-600 line-through",children:["R",$t.toFixed(2)]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[wt&&r.jsxs("div",{className:"flex items-center gap-2 text-xs bg-green-900/30 border border-green-500/30 text-green-400 px-2 py-1 rounded w-fit",children:[r.jsx(Js,{size:12})," Ends: ",new Date(B.promoExpiresAt).toLocaleDateString()]}),o.isMember&&r.jsxs("div",{className:"flex items-center gap-2 text-xs bg-purple-900/30 border border-purple-500/30 text-purple-400 px-2 py-1 rounded w-fit font-bold",children:[r.jsx(Nr,{size:12})," ",je!=="none"?je:"Member"," Pricing Applied"]})]}),r.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${$>0?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.8)]":"bg-red-500"}`}),r.jsx("span",{className:`${$>0?$<=5?"text-orange-400":"text-green-400":"text-red-400"} font-bold`,children:$>0?$<=5?`Only ${$} left!`:"In Stock":"Out of Stock"})]})]})]}),!o.isMember&&r.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-900/50 rounded-xl p-5 relative overflow-hidden group",children:[r.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:r.jsx(Nr,{size:80,className:"text-purple-500 transform rotate-12"})}),r.jsxs("h3",{className:"text-purple-400 font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2",children:[r.jsx(Nr,{size:16,fill:"currentColor"})," Unlock Membership Savings"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-zinc-800/50 border border-zinc-700/50",children:[r.jsx("span",{className:"text-gray-400",children:"Retail Price"}),r.jsxs("span",{className:"text-gray-300 font-medium",children:["R",$t.toFixed(2)]})]}),_e?r.jsxs("div",{className:"space-y-2",children:[B.promoBasicMemberPrice&&B.promoBasicMemberPrice>0&&r.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Basic Member"}),r.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[Ht(B.promoBasicMemberPrice),"% Off"]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:["R",B.promoBasicMemberPrice.toFixed(0)]})})]}),B.promoPremiumMemberPrice&&B.promoPremiumMemberPrice>0&&B.promoPremiumMemberPrice!==B.promoBasicMemberPrice&&r.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Premium Member"}),r.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[Ht(B.promoPremiumMemberPrice),"% Off"]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:["R",B.promoPremiumMemberPrice.toFixed(0)]})})]}),B.promoDeluxeMemberPrice&&B.promoDeluxeMemberPrice>0&&r.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-lime-900/20 border border-lime-500/40",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-lime-200 font-bold text-xs",children:"Deluxe Member"}),r.jsxs("span",{className:"text-xs text-lime-300 uppercase font-bold",children:[Ht(B.promoDeluxeMemberPrice),"% Off"]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("span",{className:"block text-lime-400 font-bold text-lg",children:["R",B.promoDeluxeMemberPrice.toFixed(0)]})})]})]}):r.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[r.jsx("span",{className:"text-purple-200 font-bold",children:"Member Price"}),r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:["R",at.toFixed(2)]}),r.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:["Save ",qt,"%"]})]})]})]}),r.jsxs("div",{className:"mt-4 text-center",children:[r.jsx("button",{onClick:()=>d("/membership"),className:"w-full py-3 text-sm font-bold uppercase tracking-widest text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded hover:shadow-[0_0_15px_rgba(168,85,247,0.4)] transition-all",children:"Join Now"}),r.jsx("p",{className:"text-[10px] text-red-400 font-bold mt-2 uppercase tracking-wide animate-pulse",children:"LIMITED places Available"})]})]}),r.jsxs("div",{className:"space-y-6 mt-6 border-t border-gray-800 pt-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-cherry text-2xl text-pink-500 mb-2 tracking-wide",children:"Description"}),r.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:B.description})]}),B.whenAndHowToWear&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-cherry text-2xl text-cyan-400 mb-2 tracking-wide",children:"Stylish Suggestions"}),r.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:B.whenAndHowToWear})]}),B.material&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-cherry text-2xl text-purple-400 mb-2 tracking-wide",children:"Materials"}),r.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:B.material})]}),B.isUniquePendant&&r.jsxs("div",{className:"bg-orange-900/10 border border-orange-500/20 rounded-xl p-5 mt-4",children:[r.jsxs("h3",{className:"font-cherry text-xl text-orange-400 mb-3 tracking-wide flex items-center gap-2",children:[r.jsx(uf,{size:20})," Oxidized Jewelry Care"]}),r.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"This unique pendant features a deliberate oxidized finish (darkened patina) to enhance the vintage detail."}),r.jsxs("ul",{className:"text-xs text-gray-400 space-y-2 list-disc pl-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Do NOT use liquid silver cleaner or dips:"})," These will strip the antique finish instantly."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Avoid polishing cloths:"})," Aggressive rubbing can remove the darkened details."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Keep it dry:"})," Remove before swimming or showering to preserve the wire wrapping."]}),r.jsx("li",{children:"To clean, simply wipe gently with a soft, dry cotton cloth."})]})]})]}),En&&r.jsxs("div",{className:"bg-gradient-to-r from-purple-900/40 to-pink-900/40 border border-purple-500/30 rounded-xl p-4 flex items-center gap-4 shadow-[0_0_15px_rgba(168,85,247,0.1)]",children:[r.jsx("div",{className:"p-3 bg-black/50 rounded-full text-pink-400 border border-pink-500/30",children:r.jsx(Yt,{size:24})}),r.jsxs("div",{children:[r.jsx("span",{className:"block text-xs font-bold text-pink-400 uppercase tracking-wider mb-1",children:"Free Gift Included"}),r.jsx("h4",{className:"font-bold text-white",children:En.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:["Value: R",B.giftValue||En.price]})]}),r.jsx("div",{className:"ml-auto",children:r.jsx("img",{src:En.images[0],alt:"Gift",className:"w-12 h-12 rounded object-cover border border-gray-700"})})]}),r.jsxs("div",{className:"space-y-6 py-4 border-t border-gray-800",children:[B.type==="Ring"&&B.ringStock&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Size"}),r.jsxs("button",{onClick:()=>{H(!0),K(1)},className:"text-xs text-pink-400 hover:text-pink-300 flex items-center gap-1 underline decoration-dotted underline-offset-4",children:[r.jsx(Ux,{size:14})," Find My Ring Size"]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(B.ringStock).map(([ce,qe])=>r.jsx("button",{disabled:qe===0,onClick:()=>k(ce),className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium border transition-all ${F===ce?"bg-pink-600 border-pink-600 text-white shadow-[0_0_10px_rgba(236,72,153,0.5)]":qe===0?"bg-zinc-900 border-gray-800 text-gray-600 cursor-not-allowed decoration-slice line-through":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:ce},ce))}),F&&B.ringStock[F]>0&&r.jsxs("p",{className:`text-xs mt-2 flex items-center gap-1 ${B.ringStock[F]<=5?"text-orange-400 font-bold":"text-green-400"}`,children:[r.jsx(dt,{size:12}),B.ringStock[F]<=5?`Only ${B.ringStock[F]} left in stock!`:"In Stock"]}),F&&B.ringStock[F]===0&&r.jsx("p",{className:"text-xs text-red-500 mt-2 font-bold",children:"Out of stock for this size."})]}),(B.type==="Stud"||B.type==="Dangle")&&B.showEarringOptions&&B.earringMaterials&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Material"}),r.jsx("div",{className:"grid gap-3",children:B.earringMaterials.map(ce=>r.jsxs("div",{onClick:()=>V(ce),className:`relative p-4 rounded-xl border cursor-pointer transition-all ${(j==null?void 0:j.name)===ce.name?"bg-pink-900/10 border-pink-500 shadow-[0_0_10px_rgba(236,72,153,0.2)]":"bg-zinc-900 border-gray-800 hover:border-gray-600"}`,children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:`font-medium text-sm ${(j==null?void 0:j.name)===ce.name?"text-white":"text-gray-300"}`,children:ce.name}),r.jsx("span",{className:"text-xs font-bold text-pink-400",children:ce.modifier>0?`+R${ce.modifier}`:""})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ce.description}),(j==null?void 0:j.name)===ce.name&&r.jsx("div",{className:"absolute top-3 right-3 w-4 h-4 bg-pink-500 rounded-full flex items-center justify-center",children:r.jsx(dt,{size:10,className:"text-white"})})]},ce.name))})]}),B.type==="Pendant"&&B.chainStyles&&B.chainStyles.length>0&&r.jsxs("div",{className:"space-y-6",children:[B.chainStyles.length>1&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Chain Style"}),r.jsx("div",{className:"flex gap-4",children:B.chainStyles.map(ce=>r.jsx("button",{onClick:()=>Le(ce),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all ${me===ce?"bg-pink-600 border-pink-600 text-white":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:ce},ce))})]}),me==="Metal Chain"&&B.pendantChainLengths&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Length"}),r.jsx("div",{className:"grid gap-2",children:Object.keys(B.pendantChainLengths).filter(ce=>B.pendantChainLengths[ce]).map(ce=>r.jsxs("button",{onClick:()=>Te(ce),className:`text-left p-3 rounded-lg border transition-all ${Se===ce?"bg-cyan-900/20 border-cyan-500":"bg-zinc-900 border-gray-800 hover:bg-zinc-800"}`,children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:`text-sm font-medium ${Se===ce?"text-cyan-400":"text-gray-200"}`,children:ce}),Se===ce&&r.jsx(dt,{size:14,className:"text-cyan-400"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:HT[ce]||""})]},ce))})]}),me==="Leather Cord"&&r.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded-lg border border-gray-700 flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gray-700 rounded-full",children:r.jsx(dt,{size:14,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-white",children:"Fixed Length: 45cm"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Standard leather cord length."})]})]})]})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsxs("button",{onClick:Ct,disabled:M||se,className:"flex-1 bg-pink-600 text-white py-4 rounded-xl font-semibold hover:bg-pink-500 transition-all flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(236,72,153,0.4)] text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(Ii,{size:20})," ",de]}),r.jsx("button",{onClick:()=>s(B.id),className:`p-4 rounded-xl border transition-colors ${ze?"border-pink-500 bg-pink-500/10 text-pink-500":"border-gray-700 hover:bg-zinc-800 text-gray-400 hover:text-white"}`,children:r.jsx(Yp,{size:24,fill:ze?"currentColor":"none"})})]}),r.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/20 to-purple-900/20 border border-cyan-500/30 rounded-xl p-5 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 pointer-events-none",children:r.jsx(bo,{size:60})}),r.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-2",children:[r.jsx(Yt,{size:18,className:"text-pink-500"})," Share & Earn"]}),r.jsxs("p",{className:"text-xs text-gray-300 mb-4 max-w-sm",children:["Share this treasure with friends and earn ",r.jsx("strong",{className:"text-green-400",children:"50 Loyalty Points"})," instantly!"]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>fr("whatsapp"),className:"flex-1 py-2 bg-[#25D366] hover:bg-[#1ebc57] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(37,211,102,0.4)]",children:[r.jsx(Ml,{size:16})," WhatsApp"]}),r.jsxs("button",{onClick:()=>fr("facebook"),className:"flex-1 py-2 bg-[#1877F2] hover:bg-[#166fe5] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(24,119,242,0.4)]",children:[r.jsx(yl,{size:16})," Facebook"]}),navigator.share&&r.jsxs("button",{onClick:()=>fr("native"),className:"flex-1 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all",children:[r.jsx(bo,{size:16})," More"]})]}),I&&r.jsxs("div",{className:"mt-3 text-xs text-green-400 font-bold flex items-center gap-1 justify-center animate-in fade-in zoom-in",children:[r.jsx(dt,{size:12})," 50 Points Awarded!"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-8 border-t border-gray-800",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(ss,{className:"text-cyan-400 mt-1",size:20}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm text-gray-200",children:"Free Delivery"}),r.jsx("p",{className:"text-xs text-gray-500",children:"On orders over R500 (PUDO/PAXI only)"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(ua,{className:"text-cyan-400 mt-1",size:20}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm text-gray-200",children:"2 Year Warranty"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Full coverage included"})]})]})]})]})]}),r.jsxs("div",{className:"pt-12 border-t border-gray-800 animate-in fade-in slide-in-from-bottom-10 duration-700",children:[B.isUniquePendant&&r.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl mb-8 flex gap-3 items-start",children:[r.jsx(Kp,{className:"text-purple-400 shrink-0 mt-1",size:20}),r.jsxs("p",{className:"text-sm text-gray-300",children:[r.jsx("strong",{children:"Please note:"})," As this is a one-of-a-kind treasure, these reviews reflect experiences from customers who have purchased similar unique pendants from our collection."]})]}),r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"font-cherry text-[26px] font-bold text-white flex items-center gap-3",children:["Customer Reviews",r.jsx("span",{className:"text-sm font-sans font-normal text-gray-500 bg-zinc-900 px-3 py-1 rounded-full",children:hr})]}),r.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[r.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-green-900/20 border border-green-500/30 text-green-400 px-2 py-1 rounded text-xs font-bold w-fit",children:[r.jsx(cf,{size:14,fill:"currentColor",className:"text-green-500"})," Verified Purchases Only"]}),r.jsx("p",{className:"text-xs text-gray-500 max-w-md",children:"To ensure authenticity, only customers who have purchased this item can leave a review."})]})]}),r.jsx("button",{onClick:()=>E(!0),className:"px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg border border-gray-700 hover:border-gray-600 transition-all flex items-center gap-2 text-sm font-semibold shadow-lg",children:"Write a review"})]}),Mn?r.jsx("div",{className:"space-y-8",children:B.reviews.map(ce=>r.jsxs("div",{className:"flex flex-col md:flex-row gap-6 border-b border-gray-800 pb-8 last:border-0",children:[r.jsxs("div",{className:"md:w-48 flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-white font-bold text-xs",children:ce.userName.charAt(0)}),r.jsx("span",{className:"font-bold text-gray-200 text-sm",children:ce.userName})]}),r.jsxs("div",{className:"flex items-center gap-1 ml-10 mb-1",children:[r.jsx(cf,{size:12,className:"text-green-500"}),r.jsx("span",{className:"text--[10px] text-green-500 font-medium",children:"Verified Buyer"})]}),r.jsx("p",{className:"text-xs text-gray-500 ml-10 mb-2",children:ce.location}),r.jsxs("div",{className:"flex items-center gap-1 ml-10",children:[r.jsx("div",{className:"flex text-yellow-400",children:[1,2,3,4,5].map(qe=>r.jsx(Hs,{size:12,fill:qe<=Math.round(ce.rating)?"currentColor":"none",className:qe<=Math.round(ce.rating)?"text-yellow-400":"text-gray-700"},qe))}),r.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["(",ce.rating,")"]})]})]}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl rounded-tl-none border border-gray-800/50",children:[r.jsxs("p",{className:"text-gray-300 text-sm italic mb-3 leading-relaxed",children:['"',ce.content,'"']}),r.jsx("p",{className:"text-xs text-gray-500 font-medium text-right",children:ce.date})]})})]},ce.id))}):r.jsx("div",{className:"bg-zinc-900/30 border border-dashed border-gray-800 rounded-xl p-8 text-center",children:r.jsx("p",{className:"text-gray-500 text-sm",children:"No reviews yet. Be the first to own and review this treasure!"})})]}),ve.length>0&&r.jsxs("div",{className:"pt-12 border-t border-gray-800",children:[r.jsxs("div",{className:"flex justify-between items-end mb-6",children:[r.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white flex items-center gap-2",children:[r.jsx(Er,{size:20,className:"text-pink-500"})," More from ",B.category]}),r.jsxs(Ae,{to:`/collections/${encodeURIComponent(B.category)}`,className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View Collection ",r.jsx(At,{size:14})]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:ve.map(ce=>r.jsx(cr,{product:ce},ce.id))})]})]})},fu={IS_SANDBOX:!1,MERCHANT_ID:"113371222",MERCHANT_KEY:"cbhnt80ljkt7g",getProcessUrl:()=>"https://www.payfast.co.za/eng/process",getUrls:()=>{const n=window.location.origin;return{return_url:`${n}/#/profile`,cancel_url:`${n}/#/cart`,notify_url:`${n}/api/notify`}}},tm=D.forwardRef(({amount:n,itemName:e,email:t,returnUrl:s,cancelUrl:o,notifyUrl:l,customStr1:c,customStr2:d,customStr3:m,customInt1:f,isSubscription:v=!1,frequency:w=3,cycles:N=0},E)=>{const I=D.useRef(null);D.useImperativeHandle(E,()=>({submit:()=>{I.current&&I.current.submit()}}));const T=fu.getUrls(),A=fu.MERCHANT_ID,H=fu.MERCHANT_KEY,W=new Date;W.setDate(W.getDate()+1);const K=W.toISOString().split("T")[0];return r.jsxs("form",{ref:I,action:fu.getProcessUrl(),method:"POST",className:"hidden",children:[r.jsx("input",{type:"hidden",name:"merchant_id",value:A}),r.jsx("input",{type:"hidden",name:"merchant_key",value:H}),r.jsx("input",{type:"hidden",name:"return_url",value:s||T.return_url}),r.jsx("input",{type:"hidden",name:"cancel_url",value:o||T.cancel_url}),r.jsx("input",{type:"hidden",name:"notify_url",value:l||T.notify_url}),r.jsx("input",{type:"hidden",name:"amount",value:n.toFixed(2)}),r.jsx("input",{type:"hidden",name:"item_name",value:e}),r.jsx("input",{type:"hidden",name:"email_address",value:t||""}),c&&r.jsx("input",{type:"hidden",name:"custom_str1",value:c}),d&&r.jsx("input",{type:"hidden",name:"custom_str2",value:d}),m&&r.jsx("input",{type:"hidden",name:"custom_str3",value:m}),f&&r.jsx("input",{type:"hidden",name:"custom_int1",value:f}),v&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"hidden",name:"subscription_type",value:"1"}),r.jsx("input",{type:"hidden",name:"billing_date",value:K}),r.jsx("input",{type:"hidden",name:"recurring_amount",value:n.toFixed(2)}),r.jsx("input",{type:"hidden",name:"frequency",value:w}),r.jsx("input",{type:"hidden",name:"cycles",value:N})]})]})}),Qx={"Eastern Cape":{"Gqeberha (Port Elizabeth)":["PEP Pier 14 (Ground Floor, 444 Govan Mbeki Ave)","PEP Home Walmer Park (Shop 87A, Walmer Park Shopping Centre)","PEP Greenacres","PEP Newton Park","PEP Summerstrand"],"East London":["PEP EL CBD (32 Oxford St)","PEP Hemingways Mall (Shop UG54, Hemingways Mall)","PEP Vincent Park","PEP Beacon Bay","PEP Gonubie"],Mthatha:["PEP Mthatha BT Ngebs City (Shop 89, BT Ngebs City)","PEP Mthatha Circus Triangle (Shop 7, Circus Triangle)","PEP Mthatha Plaza"],"Makhanda (Grahamstown)":["PEP Grahamstown High Street (48 High St)","PEP Market Square"],"Queenstown (Komani)":["PEP Queenstown Lukhanji Mall (Shop 45, Lukhanji Mall)"],Uitenhage:["PEP Uitenhage Mall","PEP Corkwood Square"],"Jeffreys Bay":["PEP Fountains Mall","PEP Jeffrey's Bay CBD"],"King William's Town":["PEP King William's Town CBD","PEP Metlife Mall"]},"Free State":{Bloemfontein:["PEP BFN St Andrew St (45 St Andrew St)","PEP Home Mimosa Mall (Mimosa Mall, 131 Kellner St)","PEP Loch Logan","PEP Fleurdal","PEP Northridge Mall"],Welkom:["PEP Welkom Bok Street (Shop 22A, Bok Street)","PEP Welkom Goldfields Mall (Shop U5, Goldfields Mall)","PEP Boitumelo Junction"],Bethlehem:["PEP Bethlehem Dihlabeng Mall (Shop 52, Dihlabeng Mall)","PEP Bethlehem CBD"],Sasolburg:["PEP Sasolburg (Shop 9 Sake Complex, Wandellaan Street)","PEP Sasolburg Mall"],Parys:["PEP Parys (Cnr Kort Street & Middle Street)"],Kroonstad:["PEP Kroonstad Reitz Street (21 Reitz St)","PEP Maokeng Mall"]},Gauteng:{Johannesburg:["PEP JHB Carlton Centre (C/O Commissioner St & Kruis Sts)","PEP Home Jabulani Mall (Shop 84, Jabulani Mall, Soweto)","PEP Sandton City (Shop U12, Sandton City, Rivonia Rd)","PEP Jozi CBD","PEP Braamfontein","PEP Rosebank Mall","PEP Mellville","PEP Cresta","PEP Clearwater Mall"],Pretoria:["PEP PTA Central (Cnr Paul Kruger & Pretorius St)","PEP Home Menlyn Park (Menlyn Park, Garsfontein Road)","PEP Centurion Mall (Shop 15, Centurion Mall, Heuwel Ave)","PEP Sunnyside","PEP Brooklyn","PEP Kolonnade","PEP Wonderpark"],Soweto:["PEP Maponya Mall","PEP Jabulani Mall","PEP Bara Mall","PEP Dobsonville"],Centurion:["PEP Centurion Mall","PEP Lyttelton","PEP Mall @ Reds","PEP Forest Hill"],Midrand:["PEP Mall of Africa","PEP Boulders","PEP Midrand CBD"],Benoni:["PEP Benoni Lakeside Mall (Shop L20, Lakeside Mall, Tom Jones St)","PEP Northmead Square"],Boksburg:["PEP East Rand Mall","PEP Sunward Park"],Krugersdorp:["PEP Krugersdorp Cnr Ockerse (Cnr Ockerse & Human Street)","PEP Krugersdorp Westgate (Shop 30, Westgate Shopping Centre)"],Alberton:["PEP Alberton City (SHOP L106, Alberton City, Voortrekker Street)"],Vereeniging:["PEP Vereeniging Arcon Park (Arcon Park Shopping Centre)","PEP Vereeniging CBD (12 Joubert Street)"]},"KwaZulu-Natal":{Durban:["PEP Durban Dr Pixley Kaseme St (442 Dr Pixley Kaseme Street)","PEP Bluff Towers (Shop 94 Bluff Twrs, 15 Tara Rd)","PEP Home Pavilion (Shop L94, The Pavilion Shopping Centre)","PEP Durban Workshop","PEP Musgrave","PEP Berea","PEP South Beach","PEP Ushaka"],Umhlanga:["PEP Gateway","PEP Crescent","PEP Cornubia"],Pietermaritzburg:["PEP PMB Liberty Mall (Shop 15, Liberty Midlands Mall)","PEP PMB CBD (335 Church Street)","PEP Greater Edendale"],"Richards Bay":["PEP Cell Richards Bay Boardwalk (Shop U004, Boardwalk Inkwazi)","PEP Richards Bay Checkers (Shop 17A, Checkers Centre)"],Ballito:["PEP Ballito Junction","PEP Lifestyle Centre"],Newcastle:["PEP Newcastle Mall","PEP Amajuba Mall"],"Port Shepstone":["PEP Port Shepstone (Cnr Escombe & Wooley St)","PEP South Coast Mall"],Ladysmith:["PEP Ladysmith Murchison Mall (Shop LG11, Murchison Mall)"],Kokstad:["PEP Kokstad Main Street (Shop 1 Spargs Building, 40 Main Street)"]},Limpopo:{Hoedspruit:["PEP Hoedspruit (Wildlife Shop 12)","PEP Hoedspruit Centre"],Ohrigstad:["PEP Ohrigstad (Potgieter St)"],Metz:["PEP Metz Mahlakung Shopping Centre (Shop 7)","PEP Cell Metz (Shop 11)"],Phalaborwa:["PEP Home Ba-phalaborwa Eden Square (Shop 13)","PEP Phalaborwa Shoprite Centre (Shop 8)","PEP Phalaborwa Mall (Shop 5)","PEP Cell Ba-phalaborwa (Shop 7C)","PEP Ba-phalaborwa Checkers (Shop 9)","PEP Phalaborwa Standard Bank Centre (Shop B1)","PEP Ba-phalaborwa Namakwale Crossing (Shop 7)","PEP Cell Phalaborwa Namakgale Crossing (Shop 26)","PEP Lulekani Spar Centre (Shop A3)"],Burgersfort:["PEP Home Burgersfort Tubatse (Shop L50)","PEP Cell Burgersfort Morone Centre (Shop 23A)","PEP Burgersfort Morone Shopping Centre (Shop 5 & 6)","PEP Burgersfort Twin City Mall (Shop 17)","PEP Cell Burgersfort Twin City (Shop 5)","PEP Cell Burgersfort Twin City Shop 41","PEP Burgersfort Platinum Place (Shop 1-3)","PEP Cell Burgersfort Castle Square (Shop 10)","PEP Burgersfort Castle Square (Shop 8)","PEP Burgersfort Burgersfort Mall (Shop 18)","PEP Cell Burgersfort Mall (Shop 28)","PEP Burgersfort Tubatse Mall (Shop L87)","PEP Cell Burgersfort Tubatse Crossing (Shop L57)"],Steelpoort:["PEP Home Steelpoort (Steelpoort Centre)","PEP Steelpoort (Shop 5)","PEP Cell Steelpoort Shopping Centre (Shop 19)"],Polokwane:["PEP Polokwane CBD (Cnr Grobler & Thabo Mbeki St)","PEP Mall of the North (Shop 10, Mall of the North)","PEP Savanna Mall","PEP Limpopo Mall"],Tzaneen:["PEP Tzaneen Tzaneng Mall (Shop B5, Tzaneng Mall, Danie Joubert St)","PEP Tzaneen CBD","PEP Tzaneen Crossing"],Thohoyandou:["PEP Thohoyandou Venda Plaza (Shop B1, Venda Plaza)","PEP Home Thohoyandou (Next to Shoprite, Thohoyandou)","PEP Thavhani Mall","PEP Mvyu"],Mokopane:["PEP Mokopane Mall","PEP Crossing"],"Makhado (Louis Trichardt)":["PEP Louis Trichardt Burger Str (Cnr Burger St & Songozwi Rd)"]},Mpumalanga:{Acornhoek:["PEP Home Acornhoek Mall (Shop 27)","PEP Acornhoek Plaza Extension (Shop 75)","PEP Cell Acornhoek Plaza (Shop 71)","PEP Cell Acornhoek Mall (Shop 3)","PEP Acornhoek Mall (Shop 10)","PEP Cell Acornhoek Mall (Shop 33B)","PEP Acornhoek Shopping Centre (Station Centre)","PEP Cell Acornhoek Shopping Centre"],Thulamahashe:["PEP Cell Thulamahashe (Thula Mall)","PEP Thulamahashe Thula Mall (Shop 17)","PEP Cell Thulamahashe Plaza (Shop 103)","PEP Thulamahashe (Plaza Shop 7)","PEP Cell Thulamahashe Plaza (Shop 14)"],Dwarsloop:["PEP Home Dwarsloop Mall (Shop 208)","PEP Dwarsloop Mall (Shop 66)","PEP Cell Dwarsloop Mall (Shop 48)"],Bushbuckridge:["PEP Bushbuckridge Twin City Mall (Shop 9)","PEP Cell Bushbuckridge Twin City Mall (Shop 2A)","PEP Cell Bushbuckridge Shopping Centre (Shop 1B)","PEP Bushbuckridge Shopping Centre (Shop 6)"],Graskop:["PEP Graskop (Spar Centre)"],Mkhuhlu:["PEP Cell Mkhuhlu (Plaza Shop 12)","PEP Mkhuhlu (Plaza Shop 7)"],Hazyview:["PEP Home Hazyview Junction (Shop 5A)","PEP Home Numbi Gate Dayizenza (Shop 7)","PEP Hazyview Junction (Shop 14B)","PEP Cell Lowveld Mall PNP (Shop 168)","PEP Cell Lowveld Mall Spar (Shop 12)","PEP Hazyview Blue Haze (Shop 304)","PEP Hazyview Lowveld Mall (Shop 232)","PEP Hazyview Lowveld Mall (Shop 155)","PEP Numbigate Dayizenza Plaza (Shop 38A)","PEP Cell Numbigate Dayizenza Plaza (Shop 12)"],Sabie:["PEP Sabie (Shopping Centre)"],"White River":["PEP Home White River Square (Shop 20)","PEP White River (Square Shop 17)","PEP Whiteriver Square 1 (Shop 17)","PEP White River Crossing (Shop 15)","PEP White River Kabokweni (Plaza Shop 10)","PEP Cell White River Kabokweni Plaza (Shop 205A)"],"Lydenburg (Mashishing)":["PEP Home Lydenburg Lt Centre (Shop 5)","PEP Lydenburg Highland Centre (Shop 6A)","PEP Lydenburg (Tamarisk Building)","PEP Cell Mashishing Shoprite Centre"],"Mbombela (Nelspruit)":["PEP Home Riverside Mall Nelspruit (Shop G241)","PEP Home Nelspruit Promenade (Shop 41 & 42)","PEP Home Nelspruit Ilanga Mall (Shop LG36)","PEP Home Nelspruit The Square (Shop 7)","PEP Nelspruit The Grove (Shop 18)","PEP Cell Nelspruit Plaza (Shop 28)","PEP Nelspruit Plaza (Shop 17-20)","PEP Cell Nelspruit Ekukhanyeni (Shop 5)","PEP Nelspruit Brown & Henshall Street","PEP Cell Nelspruit Promenade (Shop 49)","PEP Nelspruit Brown Street (Prorom Building)","PEP Nelspruit (Bester Brown Building)","PEP Nelspruit The Square (Shop 10)","PEP Nelspruit CBD","PEP Riverside Mall (Shop U40)"],Kanyamazane:["PEP Kanyamazane (Shopping Centre Shop 11)"],Emoyeni:["PEP Emoyeni Mall (Shop 22)","PEP Cell Emoyeni Mall (Shop 8)"],"eMalahleni (Witbank)":["PEP Witbank Taxi Rank (Shop 1, 3 Escombe St)","PEP Highveld Mall (Shop U03, Highveld Mall)","PEP Witbank CBD","PEP Saveways Crescent"],Middelburg:["PEP Home Middelburg Mall (Shop 97, Middelburg Mall)","PEP Middelburg CBD (28 Cowen Ntuli Street)","PEP Midwater"],Secunda:["PEP Secunda Mall (Shop 160, Secunda Mall)","PEP Secunda CBD"]},"North West":{Rustenburg:["PEP Rustenburg Mall (Shop 73 Rustenburg Mall)","PEP Waterfall Mall (Shop 12, Waterfall Mall)","PEP Rustenburg CBD","PEP Rustenburg Plaza","PEP Platinum Square"],Potchefstroom:["PEP Potch Walter Sisulu Lane (149 Walter Sisulu Lane)","PEP Home Mooirivier Mall (Shop 16, Mooirivier Mall)","PEP Potch CBD"],"Mahikeng (Mafikeng)":["PEP Mafikeng City Mall (Shop G10, Mafikeng City Mall)","PEP Mmabatho Crossing (Shop 25, Mmabatho Crossing)","PEP Mahikeng CBD","PEP Mega City"],Klerksdorp:["PEP Klerksdorp Terminus (Shop 19, The Terminus Centre)","PEP Klerksdorp CBD","PEP Matlosana Mall","PEP City Mall"],Brits:["PEP Brits Town Centre (Shop G2, Brits Town Centre)","PEP Brits Mall"]},"Northern Cape":{Kimberley:["PEP North Cape Mall (Shop 60, North Cape Mall)","PEP Home Diamond Pavilion Mall (Shop 93, Diamond Pavilion Mall)","PEP Kimberley CBD","PEP New Park"],Upington:["PEP Upington Mall (Shop 12, Upington Mall)","PEP Upington CBD (20 Schroder Street)","PEP Kalahari Mall"],Kuruman:["PEP Kuruman Beare Street (Shop 28B, Beare Street)","PEP Kuruman Mall","PEP The Eye"],"De Aar":["PEP De Aar Main Road (35 Main Road, De Aar)"],Springbok:["PEP Springbok (62 Main Street, Springbok)"]},"Western Cape":{"Cape Town":["PEP CPT Station (Cape Town Station Concourse)","PEP Golden Acre (Shop 10, Golden Acre Mall)","PEP Home Parow Centre (Shop G6, Parow Centre, Voortrekker Rd)","PEP Gardens","PEP V&A Waterfront","PEP Canal Walk","PEP Blue Route"],Stellenbosch:["PEP Eikestad Mall (Shop E4, Eikestad Mall, 43 Andringa Rd)","PEP Kayamandi (Shop 11, Kayamandi Shopping Centre)","PEP Stellenbosch Central"],George:["PEP George Garden Route Mall (Shop 2, Garden Route Mall)","PEP George CBD (82 Hibernia Street)","PEP York Street"],Paarl:["PEP Paarl Mall (Shop 12, Paarl Mall, Cnr Newvlei & Jones St)","PEP Lady Grey","PEP Rembrandt Mall"],Hermanus:["PEP Hermanus Whale Coast Mall (Shop 15, Whale Coast Mall)"],Knysna:["PEP Knysna Long Street (13 Long Street, Knysna)","PEP Knysna Mall","PEP Woodmill Lane"],"Somerset West":["PEP Somerset Mall","PEP Main Road","PEP Waterstone"],"Mossel Bay":["PEP Mossel Bay Mall","PEP Langeberg Mall"],Worcester:["PEP Mountain Mill","PEP Worcester CBD"]}},WT=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm  8cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],KT={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:0}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:0}]},JT=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],YT=({cartItemCount:n,onShippingChange:e,subtotal:t})=>{var Le,Se,Te,B,ve;const{user:s}=It(),[o,l]=D.useState("pudo"),[c,d]=D.useState(""),[m,f]=D.useState(""),[v,w]=D.useState(""),[N,E]=D.useState(""),[I,T]=D.useState(""),[A,H]=D.useState(""),[W,K]=D.useState(""),[te,pe]=D.useState("economy"),[J,O]=D.useState({street:((Le=s.shippingAddress)==null?void 0:Le.street)||"",suburb:((Se=s.shippingAddress)==null?void 0:Se.suburb)||"",city:((Te=s.shippingAddress)==null?void 0:Te.city)||"",province:((B=s.shippingAddress)==null?void 0:B.province)||"",postalCode:((ve=s.shippingAddress)==null?void 0:ve.postalCode)||""}),[P,z]=D.useState(WT),[F,k]=D.useState(KT),[j,V]=D.useState(JT),me=t>=500;return D.useEffect(()=>{me&&o==="door"&&l("pudo")},[me,o]),D.useEffect(()=>{try{const G=localStorage.getItem("spv_pudo_costs");G&&z(JSON.parse(G));const $=localStorage.getItem("spv_paxi_costs");$&&k(JSON.parse($));const M=localStorage.getItem("spv_door_to_door_costs");M&&V(JSON.parse(M))}catch(G){console.error("Failed to load shipping costs from storage",G)}},[]),D.useEffect(()=>{let G=0,$="";if(o==="pudo"){const M=n<=20?"Extra-Small (XS)":"Small (S)",se=P.find(ze=>ze.name===M);let de="locker";se?se.lockerToLockerCost!==null?G=se.boxCost+se.lockerToLockerCost+se.lockerHandleFee:se.doorToLockerCost!==null?(G=se.boxCost+se.doorToLockerCost+se.doorHandleFee,de="door"):G=se.boxCost:G=60,I&&A&&W&&($=`${I} | ${A} | ${W} | ${de}`)}else if(o==="paxi"){let M="7-9 Days Service";t>1e3&&(M="3-5 Days Service");const se=F[M],de=n<=20?"Small":"Large",ze=se.find(Ze=>Ze.bag.includes(de));ze?G=(de==="Small"?6:15)+ze.serviceCost+ze.handleFee:G=60,c&&m&&v&&N&&($=`${c} | ${m} | ${v} | ${N} | ${M}`)}else if(o==="door"){const M=te==="overnight"?"Overnight":"Economy",se=j.find(de=>de.service.includes(M));se?G=se.boxFee+se.initialCharge+(se.ratePerKg!==null?se.ratePerKg:0)+se.handleFee:G=120,J.street&&J.city&&J.postalCode&&($=JSON.stringify({...J,service:te}))}e({method:o,cost:G,details:$})},[o,n,P,F,j,te,I,A,W,c,m,v,N,J,e]),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[r.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(ss,{size:18,className:"text-cyan-400"})," Shipping Method"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="pudo"?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="pudo"?"border-cyan-500 bg-cyan-500":"border-gray-500"}`,children:o==="pudo"&&r.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),r.jsx("span",{className:"text-sm text-gray-300",children:"PUDO Locker to Locker"})]}),r.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="pudo",onChange:()=>l("pudo")})]}),r.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="paxi"?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="paxi"?"border-yellow-500 bg-yellow-500":"border-gray-500"}`,children:o==="paxi"&&r.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),r.jsx("span",{className:"text-sm text-gray-300",children:"PAXI (PEP Store - 7-9 Days)"})]}),r.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="paxi",onChange:()=>l("paxi")})]}),r.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${o==="door"?"bg-purple-900/20 border-purple-500 cursor-pointer":me?"bg-zinc-900 border-gray-800 opacity-50 cursor-not-allowed":"bg-black border-gray-700 hover:border-gray-600 cursor-pointer"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="door"?"border-purple-500 bg-purple-500":me?"border-gray-700":"border-gray-500"}`,children:o==="door"&&r.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),r.jsxs("div",{children:[r.jsx("span",{className:`text-sm ${me?"text-gray-500":"text-gray-300"}`,children:"PUDO Door to Door"}),me&&r.jsx("span",{className:"text-xs text-gray-500 block",children:"Not available for free shipping"})]})]}),r.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="door",onChange:()=>l("door"),disabled:me})]})]}),o==="pudo"&&r.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-cyan-500/20",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("label",{className:"text-[10px] text-cyan-400 uppercase font-bold",children:"Select PUDO Locker Location"}),r.jsxs("a",{href:"https://thecourierguy.co.za/locations/",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[r.jsx(zx,{size:10})," Find PUDO Locker Location Click Here"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:I,onChange:G=>T(G.target.value),children:[r.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(Qx).sort().map(G=>r.jsx("option",{value:G,children:G},G))]}),r.jsx(Vx,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),I&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[r.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),r.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none",placeholder:"e.g. Sandton",value:A,onChange:G=>H(G.target.value)})]}),A&&r.jsx("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Locker Name / Address"}),r.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none",placeholder:"e.g. PUDO Locker @ Sandton City",value:W,onChange:G=>K(G.target.value)})]})})]}),o==="paxi"&&r.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-yellow-500/20",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("label",{className:"text-[10px] text-yellow-400 uppercase font-bold",children:"Select PEP Store"}),r.jsxs("a",{href:"https://www.paxi.co.za/paxi-points",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[r.jsx(zx,{size:10})," Find PAXI Point"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:c,onChange:G=>d(G.target.value),children:[r.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(Qx).sort().map(G=>r.jsx("option",{value:G,children:G},G))]}),r.jsx(Vx,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),c&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[r.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),r.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. Acornhoek",value:m,onChange:G=>f(G.target.value)})]}),m&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Store Name (or P-Code)"}),r.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. PEP Home Acornhoek Mall",value:v,onChange:G=>w(G.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Store Street Address"}),r.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. Shop 27, Acornhoek Mall, R40 Main Rd",value:N,onChange:G=>E(G.target.value)})]})]})]}),o==="door"&&r.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-purple-500/20",children:[r.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block",children:"Select Service"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${te==="economy"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[r.jsx("input",{type:"radio",name:"doorService",value:"economy",checked:te==="economy",onChange:()=>pe("economy"),className:"hidden"}),"Economy Road"]}),r.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${te==="overnight"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[r.jsx("input",{type:"radio",name:"doorService",value:"overnight",checked:te==="overnight",onChange:()=>pe("overnight"),className:"hidden"}),"Overnight Courier"]})]}),r.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block pt-2 border-t border-gray-700/50",children:"Delivery Address"}),r.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:J.street,onChange:G=>O({...J,street:G.target.value})}),r.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:J.suburb,onChange:G=>O({...J,suburb:G.target.value})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:J.city,onChange:G=>O({...J,city:G.target.value})}),r.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:J.postalCode,onChange:G=>O({...J,postalCode:G.target.value})})]}),r.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:J.province,onChange:G=>O({...J,province:G.target.value})})]})]})},QT=()=>{const{cart:n,removeFromCart:e,updateCartQuantity:t,getCartTotal:s,user:o,appliedVoucher:l,setAppliedVoucher:c,applyExternalVoucher:d,updateUserAddress:m,setIsStickyProgressBarVisible:f,checkout:v,clearCart:w,register:N,login:E}=It(),I=is(),[T,A]=D.useState({method:"pudo",cost:60,details:""}),[H,W]=D.useState(""),[K,te]=D.useState(""),pe=D.useRef(null),[J,O]=D.useState(null),[P,z]=D.useState(!1),[F,k]=D.useState("register"),[j,V]=D.useState(!1),[me,Le]=D.useState(!1),[Se,Te]=D.useState(""),[B,ve]=D.useState(""),[G,$]=D.useState(""),[M,se]=D.useState(""),[de,ze]=D.useState(""),[We,Ze]=D.useState("");D.useEffect(()=>{f(!1)},[f]),D.useEffect(()=>{me&&o.email&&($t(),Le(!1))},[me,o.email]),D.useEffect(()=>{J&&pe.current&&(pe.current.submit(),w())},[J,w]);const Ke=()=>{f(!0),I("/")},Je=s(),He=n.reduce((_e,Ht)=>_e+Ht.quantity,0),wt=Je>=500&&(T.method==="pudo"||T.method==="paxi"),Et=wt?0:T.cost;let ot=0;l&&(l.minSpend&&Je<l.minSpend||(l.discountType==="percentage"?ot=Je*l.value/100:ot=l.value)),ot>Je&&(ot=Je);const je=Je+Et-ot,at=()=>{if(te(""),!H.trim())return;d(H.trim())?W(""):te("Invalid or expired voucher code.")},Bt=async()=>{if(!T.details){alert("Please complete all shipping details.");return}if(!o.email){z(!0);return}await $t()},$t=async()=>{T.method==="door"&&await m(JSON.parse(T.details));try{const _e=await v({items:n,total:je,shippingMethod:T.method,shippingDetails:T.details,shippingCost:Et});O(_e)}catch(_e){console.error("Order creation failed",_e),alert("Could not create your order. Please try again.")}},un=async _e=>{if(_e.preventDefault(),Te(""),de!==We){Te("Passwords do not match!");return}await N({name:B,email:G,birthday:M,password:de})?(z(!1),Le(!0)):Te("Registration failed. Please try again.")},qt=async _e=>{_e.preventDefault(),Te(""),await E(G,de)?(z(!1),Le(!0)):Te("Invalid credentials.")};return n.length===0?r.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[r.jsx("div",{className:"w-20 h-20 bg-zinc-900 rounded-full flex items-center justify-center text-gray-600",children:r.jsx(Il,{size:40})}),r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Cart is Empty"}),r.jsx("p",{className:"text-gray-400",children:"Looks like you haven't added any treasures yet."}),r.jsx(Ae,{to:"/",className:"px-6 py-3 bg-pink-600 text-white font-bold rounded-full hover:bg-pink-500 transition-colors",children:"Start Shopping"})]}):r.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[r.jsx(Aw,{subtotal:Je,onContinueShopping:Ke}),P&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>z(!1)}),r.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-white",children:F==="register"?"Create an Account":"Sign In"}),r.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"An account is required to track your order history and status."})]}),F==="register"?r.jsxs("form",{onSubmit:un,className:"space-y-4",children:[r.jsx("input",{type:"text",required:!0,value:B,onChange:_e=>ve(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Full Name"}),r.jsx("input",{type:"email",required:!0,value:G,onChange:_e=>$(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),r.jsx("input",{type:"date",required:!0,value:M,onChange:_e=>se(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"}),r.jsx("input",{type:j?"text":"password",required:!0,value:de,onChange:_e=>ze(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Create Password"}),r.jsx("input",{type:j?"text":"password",required:!0,value:We,onChange:_e=>Ze(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Confirm Password"}),Se&&r.jsx("p",{className:"text-xs text-red-400 text-center",children:Se}),r.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500",children:"Create Account & Continue"}),r.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",r.jsx("button",{type:"button",onClick:()=>k("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):r.jsxs("form",{onSubmit:qt,className:"space-y-4",children:[r.jsx("input",{type:"email",required:!0,value:G,onChange:_e=>$(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),r.jsx("input",{type:j?"text":"password",required:!0,value:de,onChange:_e=>ze(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Password"}),Se&&r.jsx("p",{className:"text-xs text-red-400 text-center",children:Se}),r.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500",children:"Sign In & Continue"}),r.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",r.jsx("button",{type:"button",onClick:()=>k("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx(tm,{ref:pe,amount:(J==null?void 0:J.total)??je,itemName:J?`Order ${J.orderNumber}`:"Spoil Me Vintage Order",email:o.email,customStr1:(J==null?void 0:J.id)??"",customStr2:T.method,customStr3:(l==null?void 0:l.code)||""}),r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("h1",{className:"text-2xl font-bold text-white mb-4",children:["Shopping Cart (",He,")"]}),r.jsx("div",{className:"space-y-4",children:n.map((_e,Ht)=>{let Mn=_e.stock;_e.type==="Ring"&&_e.selectedSize&&_e.ringStock&&(Mn=_e.ringStock[_e.selectedSize]||0);const Qn=_e.quantity>=Mn;return r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-4 rounded-xl flex gap-4 items-start",children:[r.jsx("div",{className:"w-20 h-20 bg-black rounded-lg overflow-hidden border border-gray-700 shrink-0",children:r.jsx("img",{src:_e.images[0],alt:_e.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h3",{className:"font-bold text-white text-sm line-clamp-2",children:_e.name}),r.jsx("button",{onClick:()=>e(_e.id,{selectedSize:_e.selectedSize,selectedMaterial:_e.selectedMaterial,selectedChainStyle:_e.selectedChainStyle,selectedChainLength:_e.selectedChainLength}),className:"text-gray-500 hover:text-red-400 p-1",children:r.jsx(fo,{size:16})})]}),r.jsxs("div",{className:"text-xs text-gray-400 mt-1 space-y-0.5",children:[_e.selectedSize&&r.jsxs("div",{children:["Size: ",r.jsx("span",{className:"text-gray-300",children:_e.selectedSize})]}),_e.selectedMaterial&&r.jsxs("div",{children:["Material: ",r.jsx("span",{className:"text-gray-300",children:_e.selectedMaterial})]}),_e.selectedChainStyle&&r.jsxs("div",{children:["Chain: ",r.jsxs("span",{className:"text-gray-300",children:[_e.selectedChainStyle," ",_e.selectedChainLength?`(${_e.selectedChainLength})`:""]})]})]}),r.jsxs("div",{className:"flex justify-between items-end mt-3",children:[r.jsxs("div",{className:"flex items-center gap-3 bg-black rounded-lg border border-gray-700 px-2 py-1",children:[r.jsx("button",{onClick:()=>t(_e.id,_e.quantity-1,_e),className:"text-gray-400 hover:text-white",children:r.jsx(oT,{size:14})}),r.jsx("span",{className:"text-sm font-bold text-white w-4 text-center",children:_e.quantity}),r.jsx("button",{onClick:()=>t(_e.id,_e.quantity+1,_e),className:"text-gray-400 hover:text-white disabled:text-gray-700 disabled:cursor-not-allowed",disabled:Qn,children:r.jsx(Os,{size:14})})]}),r.jsxs("div",{className:"font-bold text-white",children:["R",((_e.price+(_e.selectedMaterialModifier||0))*_e.quantity).toFixed(2)]})]})]})]},`${_e.id}_${Ht}`)})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(YT,{cartItemCount:He,onShippingChange:A,subtotal:Je}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[r.jsx("h3",{className:"font-bold text-white mb-4",children:"Summary"}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-400 mb-4 pb-4 border-b border-gray-800",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{className:"text-white",children:["R",Je.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Shipping"}),r.jsx("span",{className:"text-white",children:wt?r.jsx("span",{className:"text-green-400",children:"FREE"}):`R${Et.toFixed(2)}`})]}),ot>0&&r.jsxs("div",{className:"flex justify-between text-green-400",children:[r.jsx("span",{children:"Discount"}),r.jsxs("span",{children:["-R",ot.toFixed(2)]})]})]}),r.jsxs("div",{className:"flex justify-between items-end mb-6",children:[r.jsx("span",{className:"text-gray-300 font-bold",children:"Total"}),r.jsxs("span",{className:"text-2xl font-bold text-white",children:["R",je.toFixed(2)]})]}),l?r.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 p-3 rounded-lg mb-4 flex justify-between items-center text-xs",children:[r.jsxs("span",{className:"text-green-400 font-bold flex items-center gap-1",children:[r.jsx(dt,{size:12})," Code ",l.code," Applied"]}),r.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:"Remove"})]}):r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsx("input",{type:"text",placeholder:"Promo Code",className:"flex-1 bg-black border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-pink-500 outline-none",value:H,onChange:_e=>W(_e.target.value)}),r.jsx("button",{onClick:at,className:"bg-zinc-800 hover:bg-zinc-700 text-white px-3 py-2 rounded-lg text-sm border border-gray-600",children:"Apply"})]}),K&&r.jsx("p",{className:"text-xs text-red-400 mb-4",children:K}),r.jsxs("button",{onClick:Bt,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:["Pay Now ",r.jsx(At,{size:20})]}),r.jsxs("div",{className:"text-center mt-3 text-xs text-gray-500 flex justify-center gap-2",children:[r.jsx(ua,{size:14})," Secure Payment via PayFast"]})]})]})]})]})},XT=()=>{const{user:n,products:e,logout:t,submitReview:s}=It(),o=is(),[l,c]=D.useState(null),[d,m]=D.useState(!1),[f,v]=D.useState(5),[w,N]=D.useState(""),E=e.filter(J=>n.wishlist.includes(J.id)),I=n.notifications.filter(J=>J.type==="review_request"&&!J.isRead),T=n.notifications.filter(J=>J.type==="gift_ready"),A=n.notifications.filter(J=>J.type==="gift_received"),H=n.notifications.filter(J=>(J.type==="system"||J.type==="affiliate_msg")&&!J.isRead),W=()=>{t(),o("/")},K=async()=>{!l||!l.productId||(await s(l.productId,f,w,l.id),N(""),v(5),c(null),alert("Review submitted! You earned 100 Loyalty Points."))},te=J=>{if(!J.voucherData)return;const{code:O,amount:P,meta:z}=J.voucherData,F=`${window.location.origin}/#/?voucher=${O}`,k=`Hey ${z.recipientName}! 

${z.senderName} sent you a Spoil Me Vintage Gift Voucher worth R${P}!

"${z.message}"

Redeem it here:
${F}`,j=z.whatsappNumber?z.whatsappNumber.replace(/[^0-9]/g,""):"",V=j?`https://wa.me/${j}?text=${encodeURIComponent(k)}`:`https://wa.me/?text=${encodeURIComponent(k)}`;window.open(V,"_blank")},pe=J=>{window.location.href=`/#/?voucher=${J}`};return n.email?r.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[d&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>m(!1)}),r.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[r.jsx("button",{onClick:()=>m(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:r.jsx(yn,{size:20})}),r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:r.jsx(Fr,{size:24})}),r.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),r.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",r.jsx("span",{className:"text-green-400",children:"1 Point for every R10"})," spent on products."]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",r.jsx("span",{className:"text-green-400",children:"100 Points"})," for every verified review."]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",r.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing products on social media."]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",r.jsx("span",{className:"text-white font-bold",children:"R1.00 Discount"}),"."]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum redemption is 1000 Points (R10)."})]})]}),r.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[r.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[r.jsx(Fr,{size:14})," Membership Rule"]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",r.jsx("strong",{children:"R100 (10,000 pts)"})," per order. To redeem more than R100 at once, you must be a ",r.jsx(Ae,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),r.jsx("button",{onClick:()=>m(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),l&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>c(null)}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[r.jsx("button",{onClick:()=>c(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:r.jsx(yn,{size:20})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Write a Review"}),r.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["For: ",r.jsx("span",{className:"text-cyan-400 font-semibold",children:l.productName})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rating"}),r.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(J=>r.jsx("button",{onClick:()=>v(J),className:"text-yellow-400 hover:scale-110 transition-transform",children:r.jsx(Hs,{size:28,fill:J<=f?"currentColor":"none"})},J))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Your Review"}),r.jsx("textarea",{rows:4,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:ring-1 focus:ring-pink-500 focus:border-pink-500",placeholder:"What did you think of the product?",value:w,onChange:J=>N(J.target.value)})]}),r.jsx("button",{onClick:K,disabled:!w.trim(),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:"Submit & Earn 100 Points"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-zinc-800 flex items-center justify-center text-[22px] font-bold text-cyan-400 border border-gray-700 shadow-[0_0_10px_rgba(34,211,238,0.3)]",children:n.name.charAt(0)}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-[22px] font-bold text-white",children:n.name}),r.jsx("p",{className:"text-gray-400 text-sm",children:n.email}),n.isAdmin&&r.jsx("span",{className:"text-xs text-pink-500 font-bold bg-pink-900/20 px-2 py-1 rounded mt-1 inline-block",children:"ADMIN ACCESS"})]})]}),r.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-4 py-2 bg-zinc-900 hover:bg-zinc-800 text-gray-300 rounded-lg border border-gray-700 transition-colors text-sm",children:[r.jsx(rT,{size:16})," Sign Out"]})]}),H.length>0&&r.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-2xl p-6 animate-in slide-in-from-bottom-4 mb-8",children:[r.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(Nw,{size:20,className:"text-yellow-400"})," Updates (",H.length,")"]}),r.jsx("div",{className:"space-y-4",children:H.map(J=>r.jsx("div",{className:"bg-black p-4 rounded-xl border border-gray-800 shadow-sm",children:r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-bold text-sm",children:J.title}),r.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:J.message}),r.jsx("p",{className:"text-[10px] text-gray-600 mt-2",children:new Date(J.date).toLocaleDateString()})]}),J.type==="affiliate_msg"&&r.jsxs(Ae,{to:"/affiliate-program",className:"shrink-0 px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded-lg transition-colors whitespace-nowrap flex items-center gap-2",children:["Open Dashboard ",r.jsx(At,{size:12})]})]})},J.id))})]}),A.length>0&&r.jsxs("div",{className:"bg-gradient-to-r from-zinc-900 to-black border border-cyan-500/30 rounded-2xl p-6 animate-in slide-in-from-bottom-4 mb-8",children:[r.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(Yt,{size:20,className:"text-cyan-400"})," My Gift Collection (",A.length,")"]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:A.map(J=>{var O,P,z,F;return r.jsxs("div",{className:"bg-zinc-900/80 p-4 rounded-xl border border-gray-800 space-y-4 shadow-lg",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"text-white font-bold",children:["Gift from ",(O=J.voucherData)==null?void 0:O.meta.senderName]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Received: ",new Date(J.date).toLocaleDateString()]})]}),r.jsx("div",{className:"px-2 py-1 bg-cyan-900/20 border border-cyan-500/30 text-cyan-400 text-[10px] font-bold rounded uppercase",children:"Ready to Use"})]}),r.jsxs("div",{className:"relative aspect-[1.586/1] rounded-lg overflow-hidden text-white border border-gray-700 bg-black",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-zinc-900 to-black"}),r.jsxs("div",{className:"relative h-full p-4 flex flex-col justify-between z-10",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("span",{className:"font-cherry text-sm text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400",children:"SV"}),r.jsxs("span",{className:"text-lg font-bold text-white font-architects",children:["R",(P=J.voucherData)==null?void 0:P.amount]})]}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"font-architects text-sm text-gray-200 italic line-clamp-2",children:['"',(z=J.voucherData)==null?void 0:z.meta.message,'"']})}),r.jsxs("div",{className:"flex justify-between text-[8px] text-gray-500 uppercase",children:[r.jsx("span",{children:"To You"}),r.jsx("span",{className:"font-mono text-cyan-400 text-[10px]",children:(F=J.voucherData)==null?void 0:F.code})]})]})]}),r.jsxs("button",{onClick:()=>J.voucherData&&pe(J.voucherData.code),className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center justify-center gap-2 shadow-lg group",children:[r.jsx(Al,{size:16})," Redeem Now ",r.jsx(At,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})]},J.id)})})]}),T.length>0&&r.jsxs("div",{className:"bg-zinc-900/50 border border-pink-500/30 rounded-2xl p-6 animate-in slide-in-from-bottom-4 mb-8",children:[r.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(Uu,{size:20,className:"text-pink-500"})," Ready to Send (",T.length,")"]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:T.map(J=>{var O,P,z,F,k;return r.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"text-white font-bold",children:["Gift Voucher for ",(O=J.voucherData)==null?void 0:O.meta.recipientName]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(J.date).toLocaleDateString()]})]}),r.jsx("div",{className:"px-2 py-1 bg-green-900/20 border border-green-500/30 text-green-400 text-[10px] font-bold rounded uppercase",children:"Paid & Active"})]}),r.jsxs("div",{className:"relative aspect-[1.586/1] rounded-lg overflow-hidden text-white border border-gray-700 bg-zinc-900",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),r.jsxs("div",{className:"relative h-full p-4 flex flex-col justify-between z-10",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("span",{className:"font-cherry text-sm text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400",children:"SV"}),r.jsxs("span",{className:"text-lg font-bold text-white font-architects",children:["R",(P=J.voucherData)==null?void 0:P.amount]})]}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"font-architects text-sm text-gray-200 italic line-clamp-2",children:['"',(z=J.voucherData)==null?void 0:z.meta.message,'"']})}),r.jsxs("div",{className:"flex justify-between text-[8px] text-gray-500 uppercase",children:[r.jsxs("span",{children:["For: ",(F=J.voucherData)==null?void 0:F.meta.recipientName]}),r.jsxs("span",{children:["By: ",(k=J.voucherData)==null?void 0:k.meta.senderName]})]})]})]}),r.jsx("div",{className:"flex items-center gap-2 pt-2",children:r.jsxs("button",{onClick:()=>te(J),className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center justify-center gap-2 shadow-lg",children:[r.jsx(Uu,{size:16})," Send on WhatsApp"]})}),r.jsx("p",{className:"text-[10px] text-gray-500 text-center",children:"Clicking will open WhatsApp with the voucher image/link pre-filled."})]},J.id)})})]}),I.length>0&&r.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-2xl p-6 animate-in slide-in-from-bottom-4",children:[r.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(iT,{size:20,className:"text-cyan-400"})," Pending Reviews (",I.length,")"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:I.map(J=>r.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 flex gap-4 items-center",children:[J.productImage&&r.jsx("img",{src:J.productImage,alt:"",className:"w-16 h-16 rounded-lg object-cover border border-gray-700",onError:O=>{console.warn("Image failed to load in Profile notification:",O.currentTarget.src),O.currentTarget.src="https://via.placeholder.com/64"}}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-white font-medium text-sm line-clamp-1",children:J.productName}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Share your thoughts honestly!"}),r.jsx("p",{className:"text-xs text-purple-400 font-bold mt-1",children:"+100 Points Reward"})]}),r.jsx("button",{onClick:()=>c(J),className:"px-4 py-2 bg-zinc-800 hover:bg-pink-600 text-white text-xs font-bold rounded-lg transition-colors whitespace-nowrap border border-gray-700 hover:border-pink-500",children:"Review Now"})]},J.id))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 border border-purple-700 rounded-2xl p-6 text-white shadow-[0_0_20px_rgba(168,85,247,0.2)] relative overflow-hidden",children:[r.jsx("button",{onClick:()=>m(!0),className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors text-white/80 hover:text-white z-10",children:r.jsx(pd,{size:18})}),r.jsxs("div",{className:"flex justify-between items-start mb-8",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold opacity-90 text-purple-200",children:"Loyalty Balance"}),r.jsxs("p",{className:"text-xs opacity-75 flex items-center gap-1 mt-1",children:[r.jsx(Xp,{size:10})," 1 pt per R10 spent"]}),r.jsxs("p",{className:"text-xs opacity-75 flex items-center gap-1",children:[r.jsx(Ml,{size:10})," 100 pts per review"]}),r.jsxs("p",{className:"text-xs opacity-75 flex items-center gap-1",children:[r.jsx(bo,{size:10})," 50 pts per share"]})]}),r.jsx(Fr,{size:28,className:"text-pink-300 drop-shadow-[0_0_5px_rgba(236,72,153,0.8)] mr-8"})]}),r.jsxs("div",{className:"text-[22px] font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-white to-pink-200",children:[n.loyaltyPoints," ",r.jsx("span",{className:"text-lg font-normal opacity-80 text-white",children:"Points"})]}),r.jsx("div",{className:"mt-4 text-xs bg-black/30 p-3 rounded-lg border border-white/10",children:n.loyaltyPoints>=1e3?`You have R${(Math.floor(n.loyaltyPoints/1e3)*10).toFixed(2)} off available for your next order!`:`${1e3-n.loyaltyPoints} more points needed for a R10 voucher.`})]}),r.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Partnership Program"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Earn 20% commission on referrals"})]}),r.jsx(_s,{size:28,className:"text-green-400 drop-shadow-[0_0_5px_rgba(74,222,128,0.6)]"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-black p-3 rounded-lg flex justify-between items-center border border-gray-700",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Your Referral Code"}),r.jsx("span",{className:"font-mono font-bold text-base text-cyan-400 tracking-wider",children:n.affiliateCode||"N/A"})]}),r.jsx("button",{className:"p-2 text-gray-500 hover:text-cyan-400 transition-colors",children:r.jsx(Jp,{size:18})})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Total Earnings"}),r.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",n.affiliateEarnings.toFixed(2)]})]}),r.jsx(Ae,{to:"/affiliate-program",className:"block w-full py-2 border border-cyan-500/50 text-cyan-400 rounded-lg font-semibold hover:bg-cyan-900/30 transition-colors text-sm text-center",children:"View Dashboard"})]})]})]}),r.jsxs("div",{className:"pt-8 border-t border-gray-800",children:[r.jsxs("h2",{className:"text-[20px] font-bold text-white mb-6 flex items-center gap-2",children:[r.jsx(Ii,{size:20,className:"text-pink-500"})," Wishlist (",E.length,")"]}),E.length>0?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:E.map(J=>r.jsx(cr,{product:J},J.id))}):r.jsx("p",{className:"text-gray-500 text-sm",children:"Your wishlist is empty."})]})]}):(o("/login"),null)},ZT=()=>{const[n,e]=D.useState(""),[t,s]=D.useState(""),[o,l]=D.useState(""),{login:c}=It(),d=is(),m=async f=>{f.preventDefault(),l(""),await c(n,t)?d("/admin"):l("Invalid credentials. Please check your email and password.")};return r.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:r.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-zinc-900 rounded-2xl border border-gray-800 shadow-xl",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-3xl font-handwriting font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Welcome Back"}),r.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Sign in to access your account"})]}),r.jsxs("form",{className:"space-y-6",onSubmit:m,children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Fu,{size:18,className:"text-gray-500"})}),r.jsx("input",{type:"email",name:"email",autoComplete:"email",required:!0,value:n,onChange:f=>e(f.target.value),className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:"name@example.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Rl,{size:18,className:"text-gray-500"})}),r.jsx("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,value:t,onChange:f=>s(f.target.value),className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:""})]})]})]}),o&&r.jsx("div",{className:"p-3 bg-red-900/20 border border-red-900/50 rounded-lg",children:r.jsx("p",{className:"text-sm text-red-400 text-center",children:o})}),r.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-pink-600 hover:bg-pink-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition-all hover:shadow-[0_0_15px_rgba(236,72,153,0.4)]",children:["Sign In ",r.jsx(At,{size:16})]})]}),r.jsx("div",{className:"text-center pt-4 border-t border-gray-800",children:r.jsxs("p",{className:"text-xs text-gray-500",children:["Don't have an account? ",r.jsx("span",{className:"text-gray-400",children:"Registration is currently invite only."})]})})]})})},eP=()=>{const{addSystemNotification:n,user:e,memberCount:t}=It(),s=is(),o=D.useRef(null),[l,c]=D.useState(null),d=(v,w)=>{if(!e.email){alert("Please create an account or log in to subscribe."),s("/login");return}c({name:v,amount:w}),setTimeout(()=>{o.current&&o.current.submit()},100)};D.useEffect(()=>{const v=new Date,w=v.getDate(),N=`${v.getFullYear()}-${v.getMonth()}`;if(w===15){const E=`notif_sent_${N}_15`;!localStorage.getItem(E)&&e.email&&(n("Only 2 Spots Left!","The Spoil Me Package has only two spots remaining. Claim yours via WhatsApp or Email delivery now!","system"),localStorage.setItem(E,"true"))}},[n,e.email]);const m=800-t,f=Math.min(100,t/800*100);return r.jsxs("div",{className:"py-8 space-y-12",children:[l&&r.jsx(tm,{ref:o,amount:l.amount,itemName:`${l.name} Membership`,email:e.email,isSubscription:!0,frequency:3,cycles:0,customStr1:e.id,customStr2:"MEMBERSHIP_SIGNUP"}),r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("h1",{className:"font-cherry text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Membership Perks"}),r.jsx("p",{className:"font-architects text-xl md:text-2xl text-gray-300 max-w-2xl mx-auto",children:"Join the Spoil Me Vintage family and unlock a world of exclusive benefits, discounts, and special gifts!"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-8",children:[r.jsxs(Ae,{to:"/weekly-winners",className:"block relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[r.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-cyan-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Starter"}),r.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"Spoil Me Package"}),r.jsxs("div",{className:"text-center mb-2",children:[r.jsx("span",{className:"text-4xl font-bold text-white",children:"R19"}),r.jsx("span",{className:"text-gray-400",children:"/month"})]}),r.jsx("p",{className:"text-[10px] text-cyan-300 text-center mb-6 font-semibold uppercase tracking-wide border border-cyan-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:"Cancel at anytime"}),r.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[r.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[r.jsxs("span",{children:[t," / 800 members"]}),r.jsxs("span",{className:`${m<=5?"text-red-500 animate-pulse":"text-white"}`,children:[m," spot",m!==1?"s":""," left"]})]}),r.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:r.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${m<=5?"bg-red-500":"bg-cyan-500"}`,style:{width:`${f}%`,transition:"width 1s ease-in-out"}})}),r.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Progress updates daily"}),m<=5&&r.jsx("div",{className:"absolute top-0 right-0 bg-red-600 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg shadow-md animate-pulse",children:"HURRY!"})]}),r.jsx("ul",{className:"space-y-3 mb-8 flex-1",children:r.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[r.jsx(es,{className:"text-cyan-400 shrink-0 mt-0.5",size:16}),r.jsxs("span",{children:[r.jsx("strong",{className:"text-white",children:"300 lucky winners"})," of this package get a gift each week between R50 - R500 voucher to spend in this store"]})]})}),r.jsxs("div",{className:"mt-auto",children:[r.jsx("button",{onClick:v=>{v.preventDefault(),v.stopPropagation(),d("Spoil Me",19)},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[r.jsx(ua,{size:12})," PayFast Secure Subscription"]})]})]}),r.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[r.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-purple-800 text-white font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Popular"}),r.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"Basic"}),r.jsxs("div",{className:"text-center mb-2",children:[r.jsx("span",{className:"text-4xl font-bold text-white",children:"R49"}),r.jsx("span",{className:"text-gray-400",children:"/month"})]}),r.jsx("p",{className:"text-[10px] text-purple-300 text-center mb-6 font-semibold uppercase tracking-wide border border-purple-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:"Cancel at anytime"}),r.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(Yt,{className:"text-purple-500 shrink-0",size:16}),r.jsxs("span",{children:["Receive a ",r.jsx("strong",{className:"text-white",children:"R50 Birthday Voucher"})]})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(dt,{className:"text-purple-500 shrink-0",size:16}),r.jsx("span",{children:"Get 20% discount on non-discount products"})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(Er,{className:"text-purple-500 shrink-0",size:16}),r.jsx("span",{children:"Get a chance to win a giveaway"})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(dt,{className:"text-purple-500 shrink-0",size:16}),r.jsx("span",{children:"Receive 25% Discount on Public Holidays"})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(Yt,{className:"text-purple-500 shrink-0",size:16}),r.jsx("span",{children:"Receive a free gift every 6th month"})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(es,{className:"text-purple-500 shrink-0",size:16}),r.jsx("span",{children:"Receive R200 gift voucher each month to spend in store"})]})]}),r.jsxs("div",{className:"mt-auto",children:[r.jsx("button",{onClick:()=>d("Basic",49),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[r.jsx(ua,{size:12})," PayFast Secure Subscription"]})]})]}),r.jsxs("div",{className:"relative bg-zinc-900 border-4 border-pink-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(236, 72, 153, 0.4)"},children:[r.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-pink-500 text-white font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Recommended"}),r.jsx("h2",{className:"text-2xl font-bold text-pink-500 text-center mt-4 mb-2",children:"Premium"}),r.jsxs("div",{className:"text-center mb-2",children:[r.jsx("span",{className:"text-4xl font-bold text-white",children:"R99"}),r.jsx("span",{className:"text-gray-400",children:"/month"})]}),r.jsx("p",{className:"text-[10px] text-pink-300 text-center mb-6 font-semibold uppercase tracking-wide border border-pink-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:"Cancel at anytime"}),r.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(Yt,{className:"text-pink-500 shrink-0",size:16}),r.jsxs("span",{children:["Receive ",r.jsx("strong",{className:"text-white",children:"R100 Birthday Voucher"})]})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(dt,{className:"text-pink-500 shrink-0",size:16}),r.jsx("span",{children:"Save 20% on all non-discount products"})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(es,{className:"text-pink-500 shrink-0",size:16}),r.jsx("span",{children:"Get a chance to win a giveaway each month"})]}),r.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[r.jsx(Yt,{className:"text-pink-500 shrink-0 mt-0.5",size:16}),r.jsx("span",{children:"Received a free gift on Valentine's, Mother's, Father's Day & Festive Season"})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(dt,{className:"text-pink-500 shrink-0",size:16}),r.jsx("span",{children:"Received 25% discount on Public Holidays"})]}),r.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[r.jsx(Yt,{className:"text-pink-500 shrink-0 mt-0.5",size:16}),r.jsx("span",{children:"Received a free gift on your first month and then every 3rd month"})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(es,{className:"text-pink-500 shrink-0",size:16}),r.jsx("span",{children:"Receive R200 voucher to spend in store!"})]})]}),r.jsxs("div",{className:"mt-auto",children:[r.jsx("button",{onClick:()=>d("Premium",99),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[r.jsx(ua,{size:12})," PayFast Secure Subscription"]})]})]}),r.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[r.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[r.jsx(Nr,{size:14})," The Ultimate"]}),r.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:"Deluxe"}),r.jsxs("div",{className:"text-center mb-2",children:[r.jsx("span",{className:"text-4xl font-bold text-white",children:"R199"}),r.jsx("span",{className:"text-gray-400",children:"/month"})]}),r.jsx("p",{className:"text-[10px] text-lime-300 text-center mb-6 font-semibold uppercase tracking-wide border border-lime-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:"Cancel at anytime"}),r.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6",children:[r.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[r.jsx("span",{children:"490 / 500 members"}),r.jsx("span",{className:"text-red-400 animate-pulse",children:"10 spots left"})]}),r.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:r.jsx("div",{className:"bg-lime-500 h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)]",style:{width:"98%"}})}),r.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Progress updates monthly"})]}),r.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(Yt,{className:"text-lime-400 shrink-0",size:16}),r.jsxs("span",{children:["Receive a ",r.jsx("strong",{className:"text-white",children:"R200 Birthday Voucher"})]})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(dt,{className:"text-lime-400 shrink-0",size:16}),r.jsx("span",{children:"Save 20% on all non-discount products"})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(es,{className:"text-lime-400 shrink-0",size:16}),r.jsx("span",{children:"Get a chance to win a giveaway each month"})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(Er,{className:"text-lime-400 shrink-0",size:16}),r.jsx("span",{className:"text-white font-bold",children:"Receive 50% - 70% discount on the 16th of each month"})]}),r.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[r.jsx(Yt,{className:"text-lime-400 shrink-0 mt-0.5",size:16}),r.jsx("span",{children:"Received a free gift on Valentine's, Mother's, Father's Day & Festive Season"})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(dt,{className:"text-lime-400 shrink-0",size:16}),r.jsx("span",{children:"Received 30% discount on Public Holidays"})]}),r.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[r.jsx(Yt,{className:"text-lime-400 shrink-0 mt-0.5",size:16}),r.jsx("span",{children:"Receive a free gift 1st month and then every 2nd month"})]}),r.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[r.jsx(es,{className:"text-lime-400 shrink-0",size:16}),r.jsx("span",{children:"A free gift voucher to spend in store!"})]}),r.jsxs("li",{className:"flex items-start gap-3 text-sm text-lime-200 bg-lime-900/20 p-2 rounded border border-lime-500/20",children:[r.jsx(Nr,{className:"text-lime-400 shrink-0 mt-0.5",size:16}),r.jsxs("span",{children:["For loyal members, buy products at cheapest price, pay as little as ",r.jsx("strong",{className:"text-white text-lg underline",children:"R8 per item"})]})]})]}),r.jsxs("div",{className:"mt-auto",children:[r.jsx("button",{onClick:()=>d("Deluxe",199),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[r.jsx(ua,{size:12})," PayFast Secure Subscription"]})]})]})]}),r.jsxs("div",{className:"mt-16 border-t border-gray-800 pt-12 text-center",children:[r.jsxs("h2",{className:"font-cherry text-3xl text-white flex items-center justify-center gap-3 mb-4",children:[r.jsx(Yt,{className:"text-yellow-400",size:32})," Want to Earn Rewards for Free?"]}),r.jsx("p",{className:"text-gray-400 max-w-lg mx-auto mb-8",children:"You don't have to be a member to start earning. Join our social channels, leave reviews, and shop to earn points."}),r.jsxs(Ae,{to:"/earn-rewards",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105",children:["Go to Rewards Hub ",r.jsx(At,{size:20})]})]})]})},tP=()=>{var v,w,N,E;const{user:n,claimSocialReward:e}=It(),[t,s]=D.useState(!1),[o,l]=D.useState(null),[c,d]=D.useState(""),m=(I,T)=>{l({platform:I,name:T}),d("")},f=()=>{if(o){if(o.platform!=="whatsapp"&&!c.trim()){alert(`Please enter your ${o.name} username to verify.`);return}e(o.platform,c),l(null)}};return r.jsxs("div",{className:"max-w-5xl mx-auto py-8 space-y-12 relative",children:[o&&r.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>l(null)}),r.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"One Last Step!"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"To prevent fraud and secure your points, please enter your username. This allows us to verify your follow."}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:["Your ",o.name," Username"]}),r.jsxs("div",{className:"relative",children:[r.jsx(Vl,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),r.jsx("input",{type:"text",value:c,onChange:I=>d(I.target.value),className:"w-full pl-10 p-3 bg-black border border-gray-700 rounded-xl text-white text-sm focus:border-pink-500 outline-none",placeholder:"@username"})]})]}),r.jsx("button",{onClick:f,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all",children:"Verify & Claim Points"})]}),r.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:r.jsx(yn,{size:20})})]})]}),r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 border-b border-gray-800 pb-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h1",{className:"font-cherry text-4xl text-white",children:"Loyalty Rewards"}),r.jsx("button",{onClick:()=>s(!0),className:"text-gray-500 hover:text-cyan-400 transition-colors",title:"How it works",children:r.jsx(pd,{size:24})})]}),r.jsx("p",{className:"text-gray-400 text-lg max-w-xl",children:"Complete simple tasks to earn points and unlock discounts on your next vintage treasure."})]}),r.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-purple-500/30 min-w-[250px] text-center shadow-[0_0_20px_rgba(168,85,247,0.15)] relative group",children:[r.jsx("div",{className:"absolute inset-0 bg-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("div",{className:"text-sm text-gray-400 uppercase tracking-wider mb-1 font-semibold",children:"Your Balance"}),r.jsx("div",{className:"text-5xl font-bold text-white mb-2 font-mono tracking-tight",children:n.loyaltyPoints}),r.jsx("div",{className:"text-xs text-purple-400 font-bold bg-purple-900/20 py-1 px-3 rounded-full w-fit mx-auto",children:"Points Available"})]})]})]}),t&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>s(!1)}),r.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[r.jsx("button",{onClick:()=>s(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:r.jsx(yn,{size:20})}),r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:r.jsx(Fr,{size:24})}),r.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),r.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",r.jsx("span",{className:"text-green-400",children:"1 Point for every R10"})," spent."]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",r.jsx("span",{className:"text-green-400",children:"100 Points"})," for verified reviews."]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",r.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing."]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",r.jsx("span",{className:"text-white font-bold",children:"R1.00 Discount"}),"."]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum redemption is 1000 Points (R10)."})]})]}),r.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[r.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[r.jsx(Fr,{size:14})," Membership Rule"]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",r.jsx("strong",{children:"R100 (10,000 pts)"})," per order. To redeem more, you must be a ",r.jsx(Ae,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),r.jsx("button",{onClick:()=>s(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[r.jsx(Yt,{className:"text-yellow-400"})," Quick Earn: Social Media"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-pink-500 transition-all",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-pink-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"w-16 h-16 bg-black border border-pink-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(236,72,153,0.4)] relative z-10",children:r.jsx(qs,{size:32,className:"text-pink-500"})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"TikTok"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Get exclusive clips & flash sales."}),(v=n.socialRewards)!=null&&v.tiktok?r.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[r.jsx(dt,{size:18})," 100 Pts Claimed"]}):r.jsxs("button",{onClick:()=>m("tiktok","TikTok"),className:"mt-auto w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[r.jsx(uo,{size:16})," Join & Earn 100"]})]}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-blue-500 transition-all",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"w-16 h-16 bg-black border border-blue-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(59,130,246,0.4)] relative z-10",children:r.jsx(yl,{size:32,className:"text-blue-500"})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Facebook"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Join our community group."}),(w=n.socialRewards)!=null&&w.facebook?r.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[r.jsx(dt,{size:18})," 100 Pts Claimed"]}):r.jsxs("button",{onClick:()=>m("facebook","Facebook"),className:"mt-auto w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(59,130,246,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[r.jsx(uo,{size:16})," Join & Earn 100"]})]}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-white/20 transition-all",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:r.jsx(Su,{size:32,className:"text-white"})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Twitter"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"News and polls."}),(N=n.socialRewards)!=null&&N.twitter?r.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[r.jsx(dt,{size:18})," 100 Pts Claimed"]}):r.jsxs("button",{onClick:()=>m("twitter","Twitter"),className:"mt-auto w-full py-3 bg-gray-700 hover:bg-gray-600 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(255,255,255,0.2)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[r.jsx(uo,{size:16})," Join & Earn 100"]})]}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-green-500/30 transition-all",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-green-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:r.jsx(Ml,{size:32,className:"text-green-500"})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"WhatsApp"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Instant drop notifications."}),(E=n.socialRewards)!=null&&E.whatsapp?r.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[r.jsx(dt,{size:18})," 100 Pts Claimed"]}):r.jsxs("button",{onClick:()=>e("whatsapp"),className:"mt-auto w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(34,197,94,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[r.jsx(uo,{size:16})," Join & Earn 100"]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-8 border-t border-gray-800",children:[r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[r.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:r.jsx(Xp,{className:"text-cyan-400",size:24})}),r.jsx("h3",{className:"text-lg font-bold text-white",children:"Shop & Earn"}),r.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 1 point for every R10 you spend on any purchase automatically."}),r.jsx(Ae,{to:"/",className:"text-cyan-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Start Shopping"})]}),r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-yellow-500/30 transition-colors",children:[r.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:r.jsx(Hs,{className:"text-yellow-400",size:24})}),r.jsx("h3",{className:"text-lg font-bold text-white",children:"Review Products"}),r.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 100 points for every verified review you leave on items you've bought."}),r.jsx(Ae,{to:"/profile",className:"text-yellow-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Check Pending Reviews"})]})]})]})},nP=()=>{const{user:n,affiliateLeaderboard:e,applyForAffiliate:t,buyAffiliateContent:s,joinAffiliateElite:o,register:l,login:c,getAllUsers:d}=It(),[m,f]=D.useState(!1),[v,w]=D.useState(1),[N,E]=D.useState(!1),[I,T]=D.useState(!1),[A,H]=D.useState({name:n.name!=="Guest"?n.name.split(" ")[0]:"",surname:n.name!=="Guest"?n.name.split(" ").slice(1).join(" "):"",email:n.email||"",dob:n.birthday||"",gender:"",reason:"",socials:"",password:""}),[W,K]=D.useState(!1),[te,pe]=D.useState(!1),[J,O]=D.useState(!1),[P,z]=D.useState(!1),[F,k]=D.useState(""),[j,V]=D.useState(""),[me,Le]=D.useState({}),[Se,Te]=D.useState(!1),[B,ve]=D.useState([]);D.useEffect(()=>{var je,at;((je=n.affiliateStats)==null?void 0:je.status)==="pending"&&T(!0),((at=n.affiliateStats)==null?void 0:at.status)==="approved"&&d().then(Bt=>{const $t=Bt.filter(un=>{var qt;return((qt=un.affiliateStats)==null?void 0:qt.parentId)===n.id});ve($t)})},[n.affiliateStats,n.id,d]);const G=D.useMemo(()=>[{title:"1. Introduction",content:'These Terms and Conditions ("Agreement") govern your participation in the Spoil Me Vintage Partnership Program ("Program"). By enrolling in the Program, you agree to be bound by these terms.'},{title:"2. Definitions",content:'"Partner", "You", and "Your" refer to the individual or entity applying for or participating in the Program. "We", "Us", and "Our" refer to Spoil Me Vintage. "Commission" refers to the amount paid for a successful referral.'},{title:"3. Enrollment",content:"To begin the enrollment process, you must submit a complete Partnership Application. We will evaluate your application and notify you of your acceptance or rejection."},{title:"4. Affiliate Links",content:"You will be issued a unique Affiliate URL or code. It is your responsibility to ensure that these links are correctly formatted and used on your site."},{title:"5. Commissions",content:"You will earn commissions based on the tiered structure defined in your dashboard. Standard commissions range from 10% to 20%. Additionally, you earn a 1% override commission on sales generated by partners you directly recruit."},{title:"6. Payment Terms",content:"Commissions are paid once a month. Payments are made via EFT to a South African bank account. Minimum payout balance is R200."}],[]),$=G.length>0&&G.every((je,at)=>me[at]),M=async je=>{var Bt;if(je.preventDefault(),V(""),await c(A.email,F)){z(!1),w(2);const un=(await d()).find(qt=>qt.email.toLowerCase()===A.email.toLowerCase());((Bt=un==null?void 0:un.affiliateStats)==null?void 0:Bt.status)==="approved"&&(f(!1),setTimeout(()=>{var qt;return(qt=document.getElementById("affiliate-dashboard"))==null?void 0:qt.scrollIntoView({behavior:"smooth"})},500))}else V("Invalid password. Please try again.")},se=async je=>{if(je.preventDefault(),!A.reason.trim()||!W)return;const at={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},Bt={status:"pending",gender:A.gender,joinReason:`${A.reason} | Socials: ${A.socials}`,totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1};if(n.email)await t(A),O(!0);else{if(!A.email||!A.password){alert("Please provide email and password to create your account.");return}if((await d()).find(_e=>_e.email.toLowerCase()===A.email.toLowerCase())){z(!0),V("This email address is already associated with an account. Please Log In to continue your application.");return}if(!await l({name:`${A.name} ${A.surname}`,email:A.email,password:A.password,birthday:A.dob,notifications:[at],affiliateStats:Bt})){alert("Failed to create account. Please try again.");return}O(!0)}},de=()=>{f(!1),O(!1),w(1),pe(!1),K(!1),Le({}),z(!1),k(""),V("")},ze=async()=>{window.confirm("Purchase the Partner Content Pack for R250?")&&(await s(),alert("Content Unlocked!"))},We=async()=>{window.confirm("Upgrade to Elite Partner Status? A fee applies.")&&(await o(),alert("Welcome to the Elite Squad!"))},Ze=()=>{K(!0),E(!1)},Ke=je=>{Le(at=>({...at,[je]:!at[je]}))},Je=()=>{const je=`${window.location.origin}/#/?ref=${n.affiliateCode}`;navigator.clipboard.writeText(je),Te(!0),setTimeout(()=>Te(!1),2e3)},He=n.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,isElite:!1},wt=He.status==="approved";let Et=50,ot=0;return He.totalSalesCount<50?(Et=50,ot=0):He.totalSalesCount<100?(Et=100,ot=50):(He.totalSalesCount<500,Et=500,ot=100),He.totalSalesCount>=500||(He.totalSalesCount-ot)/(Et-ot)*100,r.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-16",children:[r.jsxs("div",{className:"relative rounded-3xl overflow-hidden bg-zinc-900 border border-pink-500/30 min-h-[400px] flex items-center",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-zinc-900/90 to-transparent z-10"}),r.jsx("div",{className:"absolute right-0 top-0 h-full w-1/2 bg-[url('https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80')] bg-cover bg-center opacity-40 grayscale mix-blend-luminosity"}),r.jsxs("div",{className:"relative z-20 p-8 md:p-16 max-w-2xl space-y-6",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-1.5 rounded-full text-sm font-bold uppercase tracking-wider",children:[r.jsx(xT,{size:16})," Join the Team"]}),r.jsxs("h1",{className:"font-cherry text-5xl md:text-7xl text-white leading-none drop-shadow-[0_0_15px_rgba(236,72,153,0.6)]",children:["Partner & ",r.jsx("br",{}),r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Earn Cash"})]}),r.jsxs("p",{className:"text-gray-300 text-lg leading-relaxed",children:["Turn your passion for vintage into profit. Join our exclusive Partnership Program and earn up to ",r.jsx("strong",{children:"20% Lifetime Commission"})," on every sale you generate."]}),!wt&&He.status!=="pending"&&r.jsxs("button",{onClick:()=>f(!0),className:"px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.4)] flex items-center gap-2",children:["Join the Program ",r.jsx(At,{size:20})]}),He.status==="pending"&&r.jsxs("button",{onClick:()=>T(!0),className:"inline-flex items-center gap-2 bg-yellow-900/20 border border-yellow-500/30 text-yellow-400 px-6 py-3 rounded-lg font-bold hover:bg-yellow-900/40 transition-colors",children:[r.jsx(Js,{size:18})," Check Application Status"]}),wt&&r.jsxs("button",{onClick:()=>{var je;return(je=document.getElementById("affiliate-dashboard"))==null?void 0:je.scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 bg-green-600 text-white font-bold rounded-full hover:bg-green-500 transition-all shadow-[0_0_20px_rgba(34,197,94,0.4)] flex items-center gap-2",children:["Go to Dashboard ",r.jsx(At,{size:20})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[r.jsx("div",{className:"w-16 h-16 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto mb-4 text-green-500 font-bold text-xl shadow-[0_0_15px_rgba(34,197,94,0.3)]",children:"1"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sign Up & Share"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Apply to become a partner. Once approved, share your unique code to start earning."})]}),r.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[r.jsx("div",{className:"w-16 h-16 bg-black border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 text-pink-500 font-bold text-xl shadow-[0_0_15px_rgba(236,72,153,0.3)]",children:"2"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Recruit & Earn"}),r.jsxs("p",{className:"text-gray-400 text-sm",children:["Invite others to join your team. You earn a ",r.jsx("strong",{children:"1% commission"})," on their sales forever!"]})]}),r.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[r.jsx("div",{className:"w-16 h-16 bg-black border-2 border-purple-500 rounded-full flex items-center justify-center mx-auto mb-4 text-purple-500 font-bold text-xl shadow-[0_0_15px_rgba(168,85,247,0.3)]",children:"3"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Get Paid"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"We payout commissions monthly via EFT to your South African bank account."})]})]}),wt&&r.jsxs("div",{id:"affiliate-dashboard",className:"space-y-8 animate-in slide-in-from-bottom-10 duration-700 pt-8 border-t border-gray-800",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Your Partnership Dashboard"}),r.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",n.name.split(" ")[0],"! Manage your links and earnings."]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:ze,className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg text-sm border border-gray-700 flex items-center gap-2",children:[r.jsx(Xj,{size:16})," Content Assets"]}),!He.isElite&&r.jsxs("button",{onClick:We,className:"px-4 py-2 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:brightness-110",children:[r.jsx(Nr,{size:16})," Go Elite"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:r.jsx(_s,{size:24})}),r.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Total Earnings"})]}),r.jsxs("div",{className:"text-3xl font-bold text-white",children:["R",He.balance.toFixed(2)]}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Next payout date: 1st of month"})]}),r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:r.jsx(Ys,{size:24})}),r.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Direct Sales"})]}),r.jsx("div",{className:"text-3xl font-bold text-white",children:He.totalSalesCount}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Value: R",He.totalSalesValue.toFixed(0)]})]}),r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:r.jsx(Hs,{size:24})}),r.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Current Rate"})]}),r.jsxs("div",{className:"text-3xl font-bold text-white",children:[He.commissionRate,"%"]}),r.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:["Tier: ",He.commissionRate>=20?"Gold Elite":He.commissionRate>=15?"Silver":He.commissionRate>=11?"Bronze":"Starter"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(bo,{size:20,className:"text-pink-500"})," Your Referral Link"]}),r.jsx("div",{className:"bg-black p-4 rounded-xl border border-gray-700 flex flex-col gap-3",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[r.jsxs("code",{className:"flex-1 text-cyan-400 text-sm break-all font-mono bg-zinc-900/50 p-3 rounded border border-gray-800 w-full",children:[window.location.origin,"/#/?ref=",n.affiliateCode]}),r.jsxs("button",{onClick:Je,className:"w-full md:w-auto px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg transition-colors flex items-center justify-center gap-2 border border-gray-600",children:[Se?r.jsx(dt,{size:14}):r.jsx(Jp,{size:14}),Se?"Copied!":"Copy Link"]})]})}),r.jsx("div",{className:"mt-4 bg-pink-900/20 p-3 rounded-lg border border-pink-500/20",children:r.jsxs("p",{className:"text-xs text-pink-300",children:[r.jsx("strong",{children:"Tip:"})," Customers get ",r.jsx("strong",{children:"5% OFF"})," when using your code ",r.jsx("code",{children:n.affiliateCode})," at checkout!"]})})]}),r.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-cyan-500/30 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:r.jsx(Tw,{size:80,className:"text-cyan-500"})}),r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 relative z-10",children:[r.jsx(Ys,{size:20,className:"text-cyan-400"})," Recruitment Center"]}),r.jsx("div",{className:"bg-cyan-900/20 border border-cyan-500/30 p-4 rounded-xl mb-6 relative z-10",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-full text-cyan-400 shrink-0",children:r.jsx(_s,{size:16})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-bold text-white",children:"Earn 1% Override Commission"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Recruit new affiliates and earn 1% of their sales volume forever. No impact on their earnings!"})]})]})}),r.jsxs("div",{className:"space-y-3 relative z-10",children:[r.jsxs("h4",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:["My Recruits (",B.length,")"]}),B.length>0?r.jsx("div",{className:"max-h-[150px] overflow-y-auto pr-2 space-y-2 custom-scrollbar",children:B.map(je=>{var at;return r.jsxs("div",{className:"flex justify-between items-center p-2 bg-black/40 rounded border border-gray-800",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-zinc-800 rounded-full flex items-center justify-center text-[10px] text-gray-400 border border-gray-700",children:je.name.charAt(0)}),r.jsx("span",{className:"text-xs text-gray-300",children:je.name})]}),r.jsxs("span",{className:"text-xs text-green-400 font-mono",children:["Sales: R",(at=je.affiliateStats)==null?void 0:at.totalSalesValue.toFixed(0)]})]},je.id)})}):r.jsx("div",{className:"text-center py-4 border border-dashed border-gray-800 rounded-lg",children:r.jsx("p",{className:"text-xs text-gray-500",children:"No recruits yet. Start building your team!"})})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 relative z-10",children:[r.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"Share your recruitment link:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("code",{className:"flex-1 bg-black p-2 rounded text-[10px] text-gray-400 truncate border border-gray-800",children:[window.location.origin,"/#/?ref=",n.affiliateCode]}),r.jsx("button",{onClick:Je,className:"text-xs text-cyan-400 hover:text-cyan-300 font-bold",children:"Copy"})]})]})]})]})]}),N&&r.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-xl",onClick:()=>!$&&E(!1)}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-3xl w-full relative z-20 shadow-2xl h-[90vh] flex flex-col animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-800",children:[r.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(Mx,{size:20,className:"text-pink-500"})," Terms & Conditions"]}),r.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-white",children:r.jsx(yn,{size:20})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-8 pr-4",children:[r.jsx("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-4 rounded-lg mb-6 text-yellow-200 text-sm",children:"Please read each section carefully. You must acknowledge each section to proceed."}),G.map((je,at)=>r.jsxs("div",{className:"bg-black/30 rounded-xl p-5 border border-gray-800 hover:border-gray-700 transition-colors",children:[r.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:je.title}),r.jsx("div",{className:"text-sm text-gray-400 leading-relaxed whitespace-pre-wrap font-sans mb-4 pl-2 border-l-2 border-gray-700",children:je.content}),r.jsxs("label",{className:`flex items-center gap-3 cursor-pointer p-3 rounded-lg transition-all ${me[at]?"bg-green-900/20 border border-green-500/30":"bg-zinc-800/50 border border-gray-700 hover:bg-zinc-800"}`,children:[r.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${me[at]?"bg-green-500 border-green-500 text-black":"bg-black border-gray-600 text-transparent"}`,children:r.jsx(dt,{size:14,strokeWidth:4})}),r.jsx("input",{type:"checkbox",className:"hidden",checked:!!me[at],onChange:()=>Ke(at)}),r.jsxs("span",{className:`text-sm font-bold ${me[at]?"text-green-400":"text-gray-400"}`,children:["I have read and agree to the ",je.title]})]})]},at))]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 flex justify-between items-center",children:[r.jsxs("div",{className:"text-xs text-gray-500",children:[Object.values(me).filter(Boolean).length," of ",G.length," sections agreed"]}),r.jsxs("button",{onClick:Ze,disabled:!$,className:"px-8 py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg",children:[$?r.jsx(dt,{size:18}):r.jsx(Rl,{size:18}),$?"Confirm Agreement":"Agree to All Sections to Continue"]})]})]})]}),I&&r.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>T(!1)}),r.jsxs("div",{className:"bg-zinc-900 border border-yellow-500/50 rounded-2xl p-8 max-w-md w-full relative z-20 shadow-[0_0_50px_rgba(234,179,8,0.2)] animate-in zoom-in-95 duration-200 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-yellow-900/20 border-2 border-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:r.jsx(Js,{size:40,className:"text-yellow-500"})}),r.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Under Review"}),r.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed mb-6",children:["Thank you for applying to the Spoil Me Vintage Partnership Program. ",r.jsx("br",{}),r.jsx("br",{}),"Our team is currently reviewing your application details. This process typically takes ",r.jsx("strong",{children:"24-48 hours"}),"."]}),r.jsx("button",{onClick:()=>T(!1),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded-xl transition-colors",children:"Understood"})]})]}),m&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:de}),r.jsx("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-xl w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200 max-h-[95vh] overflow-y-auto",children:J?r.jsx("div",{className:"text-center py-8 px-4",children:r.jsxs("div",{className:"bg-zinc-800 border border-green-500/30 rounded-2xl p-8 shadow-[0_0_40px_rgba(34,197,94,0.1)] relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-cyan-500"}),r.jsx("div",{className:"w-20 h-20 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto shadow-[0_0_20px_rgba(34,197,94,0.4)] mb-6",children:r.jsx(dt,{size:40,className:"text-green-500"})}),r.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Received!"}),r.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["Thank you, ",r.jsx("strong",{children:A.name}),". Your application has been sent to our admin team for review."]}),r.jsx("button",{onClick:de,className:"mt-8 w-full py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg",children:"Done"})]})}):P?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center border-b border-gray-800 pb-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Welcome Back"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Please log in to continue your application."})]}),j&&r.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/50 rounded-lg flex gap-2 items-center text-red-400 text-sm",children:[r.jsx(Kp,{size:16})," ",j]}),r.jsxs("form",{onSubmit:M,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Email Address"}),r.jsx("input",{type:"email",value:A.email,readOnly:!0,className:"w-full bg-zinc-800 border border-gray-700 rounded-lg p-3 text-gray-400 text-sm cursor-not-allowed"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Password"}),r.jsx("input",{type:"password",value:F,onChange:je=>k(je.target.value),required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:""})]}),r.jsxs("button",{type:"submit",className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:[r.jsx(jw,{size:18})," Login & Continue Application"]})]}),r.jsx("div",{className:"text-center",children:r.jsx("button",{onClick:()=>z(!1),className:"text-xs text-gray-500 hover:text-white underline",children:"Go Back"})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Apply to Partner"}),r.jsx("button",{onClick:de,className:"text-gray-500 hover:text-white",children:r.jsx(yn,{size:24})})]}),v===1&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl",children:[r.jsxs("h3",{className:"text-purple-400 font-bold mb-2 flex items-center gap-2",children:[r.jsx(Rl,{size:18})," Reality Check"]}),r.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"This is a business partnership. Inactive accounts (0 sales in 3 months) may be deactivated."})]}),r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[r.jsx("div",{className:`mt-1 w-5 h-5 rounded border flex items-center justify-center ${te?"bg-pink-500 border-pink-500":"border-gray-600"}`,children:te&&r.jsx(dt,{size:14,className:"text-white"})}),r.jsx("input",{type:"checkbox",className:"hidden",checked:te,onChange:je=>pe(je.target.checked)}),r.jsx("span",{className:"text-sm text-gray-400 group-hover:text-white transition-colors",children:"I understand that this program requires active participation."})]}),r.jsx("button",{disabled:!te,onClick:()=>w(2),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all",children:"Continue"})]}),v===2&&r.jsxs("form",{onSubmit:se,className:"space-y-4",children:[!n.email&&r.jsxs("div",{className:"p-3 bg-zinc-800 rounded-lg border border-gray-700 mb-4",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Create your account to get started:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[r.jsx("input",{type:"text",placeholder:"First Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:A.name,onChange:je=>H({...A,name:je.target.value})}),r.jsx("input",{type:"text",placeholder:"Surname",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:A.surname,onChange:je=>H({...A,surname:je.target.value})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"email",placeholder:"Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:A.email,onChange:je=>H({...A,email:je.target.value})}),r.jsx("input",{type:"password",placeholder:"Create Password",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:A.password,onChange:je=>H({...A,password:je.target.value})}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("input",{type:"date",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:A.dob,onChange:je=>H({...A,dob:je.target.value})}),r.jsxs("select",{className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",required:!0,value:A.gender,onChange:je=>H({...A,gender:je.target.value}),children:[r.jsx("option",{value:"",children:"Gender"}),r.jsx("option",{value:"Male",children:"Male"}),r.jsx("option",{value:"Female",children:"Female"}),r.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Why do you want to join?"}),r.jsx("textarea",{required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none h-24",placeholder:"Tell us about your audience or marketing plan...",value:A.reason,onChange:je=>H({...A,reason:je.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Social Media Links"}),r.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Instagram, TikTok, Blog URL...",value:A.socials,onChange:je=>H({...A,socials:je.target.value})})]}),r.jsxs("div",{className:"pt-2",children:[r.jsxs("button",{type:"button",onClick:()=>E(!0),className:`w-full flex items-center justify-between p-4 rounded-xl border transition-all ${W?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:[r.jsxs("span",{className:"text-sm font-bold flex items-center gap-2",children:[r.jsx(Mx,{size:16})," ",W?"Terms Accepted":"Read Terms & Conditions"]}),W?r.jsx(Al,{size:18}):r.jsx(At,{size:16})]}),!W&&r.jsx("p",{className:"text-xs text-red-400 mt-1 text-center",children:"You must accept terms to proceed."})]}),r.jsx("button",{type:"submit",disabled:!W,className:"w-full py-4 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all mt-4",children:"Submit Application"})]})]})})]})]})},rP=()=>{const{user:n,register:e,login:t,processGiftVoucherPurchase:s}=It();is();const[o,l]=D.useState(250),[c,d]=D.useState(""),[m,f]=D.useState(""),[v,w]=D.useState(""),[N,E]=D.useState(""),[I,T]=D.useState("self"),[A,H]=D.useState(0),[W,K]=D.useState(!1),[te,pe]=D.useState("register"),[J,O]=D.useState(!1),[P,z]=D.useState(""),[F,k]=D.useState(""),[j,V]=D.useState(""),[me,Le]=D.useState(""),[Se,Te]=D.useState(""),B=D.useRef(null);D.useEffect(()=>{o>=250&&o<=500?H(100):H(0)},[o]);const ve=o+A,G=async()=>{await s(ve,{recipientName:c,senderName:m,message:v,whatsappNumber:N,deliveryMethod:I}),B.current&&B.current.submit()},$=()=>{if(!c||!m){alert("Please fill in the 'To' and 'From' fields.");return}n.email?G():K(!0)},M=async de=>{if(de.preventDefault(),me!==Se){alert("Passwords do not match!");return}await e({name:P,email:F,birthday:j})&&(K(!1),setTimeout(()=>{G()},500))},se=async de=>{de.preventDefault(),await t(F,me)?(K(!1),setTimeout(()=>{G()},500)):alert("Invalid Credentials")};return r.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 space-y-12 relative",children:[r.jsx(tm,{ref:B,amount:o,itemName:`Gift Voucher for ${c}`,email:n.email||F,customStr1:c,customStr2:m,customStr3:v,returnUrl:`${window.location.origin}/#/profile`,cancelUrl:`${window.location.origin}/#/gift-cards`}),W&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>K(!1)}),r.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-white",children:te==="register"?"Create Account to Pay":"Sign In to Pay"}),r.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["To secure your voucher and ensure delivery, please ",te==="register"?"create a profile":"sign in","."]})]}),te==="register"?r.jsxs("form",{onSubmit:M,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Full Name"}),r.jsxs("div",{className:"relative",children:[r.jsx(Vl,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),r.jsx("input",{type:"text",required:!0,value:P,onChange:de=>z(de.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Jane Doe"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(Fu,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),r.jsx("input",{type:"email",required:!0,value:F,onChange:de=>k(de.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Birthday (For Birthday Vouchers)"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ew,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),r.jsx("input",{type:"date",required:!0,value:j,onChange:de=>V(de.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Rl,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),r.jsx("input",{type:J?"text":"password",required:!0,value:me,onChange:de=>Le(de.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Confirm"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:J?"text":"password",required:!0,value:Se,onChange:de=>Te(de.target.value),className:"w-full p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),r.jsx("button",{type:"button",onClick:()=>O(!J),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:J?r.jsx(Lx,{size:16}):r.jsx(Uf,{size:16})})]})]})]}),r.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500 transition-colors",children:"Create Account & Pay"}),r.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",r.jsx("button",{type:"button",onClick:()=>pe("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):r.jsxs("form",{onSubmit:se,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(Fu,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),r.jsx("input",{type:"email",required:!0,value:F,onChange:de=>k(de.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Rl,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),r.jsx("input",{type:J?"text":"password",required:!0,value:me,onChange:de=>Le(de.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),r.jsx("button",{type:"button",onClick:()=>O(!J),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:J?r.jsx(Lx,{size:16}):r.jsx(Uf,{size:16})})]})]}),r.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500 transition-colors",children:"Sign In & Pay"}),r.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",r.jsx("button",{type:"button",onClick:()=>pe("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-white drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Give the Gift of Vintage"}),r.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Create a personalized digital wish card."})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl shadow-xl space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-800",children:[r.jsx("div",{className:"p-2 bg-pink-900/30 text-pink-500 rounded-lg",children:r.jsx(Yt,{size:24})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:"Customize Voucher"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Enter details below"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Amount (R)"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"R"}),r.jsx("input",{type:"number",value:o,onChange:de=>l(parseFloat(de.target.value)),className:"w-full bg-black border border-gray-700 rounded-xl py-4 pl-10 pr-4 text-white text-xl font-bold focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none transition-all",placeholder:"250",min:"50"})]}),o>=250&&o<=500?r.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-xs font-bold bg-green-900/20 p-2 rounded border border-green-500/30 animate-in fade-in slide-in-from-top-2",children:[r.jsx(Er,{size:14}),"Bonus R100 added to voucher value automatically!"]}):r.jsxs("p",{className:"text-xs text-gray-500",children:["Tip: Spend between ",r.jsx("strong",{children:"R250 - R500"})," to get a ",r.jsx("span",{className:"text-pink-500 font-bold",children:"FREE R100"})," bonus!"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"To (Recipient Name)"}),r.jsx("input",{type:"text",value:c,onChange:de=>d(de.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. Sarah"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-300 flex items-center gap-2",children:[r.jsx(Fx,{size:14})," From (Your Name)"]}),r.jsx("input",{type:"text",value:m,onChange:de=>f(de.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. John"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Personal Message"}),r.jsx("textarea",{rows:4,value:v,onChange:de=>w(de.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none resize-none",placeholder:"Write a sweet note...",maxLength:150}),r.jsxs("div",{className:"text-right text-[10px] text-gray-600",children:[v.length,"/150"]})]}),r.jsxs("div",{className:"space-y-4 pt-2 border-t border-gray-800",children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300",children:"How should we deliver this?"}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.jsxs("div",{onClick:()=>T("self"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${I==="self"?"bg-purple-900/20 border-purple-500 ring-1 ring-purple-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[r.jsx("div",{className:`mt-1 p-1 rounded-full ${I==="self"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400"}`,children:r.jsx(Vl,{size:16})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:`text-sm font-bold ${I==="self"?"text-purple-400":"text-gray-300"}`,children:"Send to Me (Higher Success Rate)"}),r.jsx("div",{className:"flex items-center gap-2 mt-1",children:r.jsxs("span",{className:"text-[10px] bg-green-900/40 text-green-400 border border-green-500/30 px-1.5 py-0.5 rounded font-bold flex items-center gap-1",children:[r.jsx(dt,{size:10})," Best Option"]})}),r.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We send the voucher code and link to YOU via notification. You can then forward it via WhatsApp personally."}),I==="self"&&r.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:de=>de.stopPropagation(),children:[r.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[r.jsx(qs,{size:12})," Your WhatsApp Number"]}),r.jsx("input",{type:"text",value:N,onChange:de=>E(de.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]}),r.jsxs("div",{onClick:()=>T("recipient"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${I==="recipient"?"bg-pink-900/20 border-pink-500 ring-1 ring-pink-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[r.jsx("div",{className:`mt-1 p-1 rounded-full ${I==="recipient"?"bg-pink-500 text-white":"bg-gray-800 text-gray-400"}`,children:r.jsx(Uu,{size:16})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:`text-sm font-bold ${I==="recipient"?"text-pink-400":"text-gray-300"}`,children:"Send directly to Recipient"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We will email or WhatsApp the recipient directly on your behalf."}),I==="recipient"&&r.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:de=>de.stopPropagation(),children:[r.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[r.jsx(Ml,{size:12})," Recipient WhatsApp (Optional)"]}),r.jsx("input",{type:"text",value:N,onChange:de=>E(de.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]})]})]}),r.jsxs("button",{onClick:$,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 text-lg",children:[r.jsx(Il,{size:20})," Buy Now & Pay - R",o.toFixed(2)]}),r.jsxs("p",{className:"text-center text-xs text-gray-500 mt-2 flex items-center justify-center gap-1",children:[r.jsx(dt,{size:12,className:"text-green-500"})," Secure Payment via PayFast"]})]}),r.jsxs("div",{className:"sticky top-24",children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[r.jsx(Il,{size:16})," Example"]}),r.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),r.jsx("div",{className:"absolute top-0 left-0 p-4 opacity-10 pointer-events-none",children:r.jsx("span",{className:"font-cherry text-8xl text-white leading-none",children:"SV"})}),r.jsxs("div",{className:"relative h-full p-6 md:p-8 flex flex-col justify-between z-20",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-cherry text-xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.3)]",children:"Spoil Me Vintage"}),r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx(Er,{size:10,className:"text-cyan-400"}),r.jsx("p",{className:"text-[10px] text-gray-300 tracking-[0.2em] uppercase",children:"Exclusive Voucher"})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"text-2xl md:text-5xl font-bold text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.5)] font-architects",children:["R",ve]})})]}),r.jsxs("div",{className:"flex-1 flex flex-col justify-center py-2 md:py-4 relative",children:[r.jsxs("p",{className:"font-architects text-lg md:text-2xl text-gray-200 leading-relaxed text-center break-words relative drop-shadow-sm line-clamp-3",children:['"',v||"Treat yourself to something timeless...",'"']}),r.jsx("div",{className:"mx-auto mt-4 md:mt-6 cursor-pointer group w-full md:w-auto flex justify-center",children:r.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-full px-6 py-3 md:px-6 md:py-2 flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(34,211,238,0.2)] hover:bg-cyan-900/30 hover:border-cyan-400 transition-all w-full md:w-auto",children:[r.jsx("span",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),r.jsx("span",{className:"text-xs md:text-xs font-bold text-white uppercase tracking-widest group-hover:text-cyan-300 transition-colors",children:"Redeem Now"}),r.jsx(At,{size:12,className:"text-cyan-400 group-hover:translate-x-1 transition-transform"})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-800 pt-3 md:pt-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"To"}),r.jsx("p",{className:"text-sm font-bold text-white truncate",children:c||"Recipient Name"})]}),r.jsxs("div",{className:"space-y-1 text-right",children:[r.jsxs("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center justify-end gap-1",children:["From ",r.jsx(Fx,{size:10})]}),r.jsx("p",{className:"text-lg font-architects text-cyan-400 truncate",children:m||"Your Name"})]})]})]})]}),r.jsxs("div",{className:"mt-6 bg-zinc-900/50 border border-gray-800 rounded-xl p-5 shadow-lg",children:[r.jsxs("h4",{className:"font-bold text-white text-sm mb-3 flex items-center gap-2 border-b border-gray-800 pb-2",children:[r.jsx(dt,{size:14,className:"text-green-400"})," Verified Voucher Features"]}),r.jsxs("ul",{className:"text-xs text-gray-400 space-y-2.5",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Er,{size:12,className:"text-purple-400 mt-0.5"})," Valid for 3 years from date of purchase."]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(qs,{size:12,className:"text-cyan-400 mt-0.5"})," ",r.jsx("span",{className:"text-white font-bold",children:"Smart Link:"}),' Recipient taps "Redeem Now" to auto-apply discount in App.']}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Ml,{size:12,className:"text-green-400 mt-0.5"})," ",r.jsx("span",{className:"text-white font-bold",children:"Instant Delivery"})," via Notification & WhatsApp."]})]})]})]})]})]})},sP=()=>{const{categoryName:n}=np(),{products:e,categories:t}=It(),s=decodeURIComponent(n||""),o=t.find(c=>c.name===s),l=e.filter(c=>c.category===s);return D.useEffect(()=>{window.scrollTo(0,0)},[n]),o?r.jsxs("div",{className:"space-y-8 pb-12",children:[r.jsxs("div",{className:"relative h-64 md:h-80 rounded-2xl overflow-hidden bg-zinc-900 border border-gray-800 shadow-2xl group",children:[r.jsx("img",{src:o.image,alt:o.name,className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"}),r.jsxs("div",{className:"absolute bottom-0 left-0 p-8 w-full",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs(Ae,{to:"/",className:"text-xs text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[r.jsx(Pl,{size:12})," Home"]}),r.jsx("span",{className:"text-gray-600",children:"/"}),r.jsx("span",{className:"text-xs text-pink-500 font-bold tracking-wider uppercase",children:"Collection"})]}),r.jsx("h1",{className:"font-cherry text-4xl md:text-6xl text-white drop-shadow-lg mb-2",children:o.name}),o.description&&r.jsx("p",{className:"text-gray-300 max-w-2xl text-sm md:text-base font-light border-l-4 border-pink-500 pl-4",children:o.description})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(Er,{size:20,className:"text-cyan-400"}),"Available Treasures (",l.length,")"]})}),l.length>0?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:l.map(c=>r.jsx(cr,{product:c},c.id))}):r.jsxs("div",{className:"py-20 text-center border border-dashed border-gray-800 rounded-2xl",children:[r.jsx("p",{className:"text-gray-500",children:"No products found in this collection yet."}),r.jsx(Ae,{to:"/",className:"text-pink-500 text-sm mt-4 inline-block hover:underline",children:"Browse other collections"})]})]})]}):r.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Collection Not Found"}),r.jsxs(Ae,{to:"/",className:"text-pink-500 hover:text-pink-400 flex items-center gap-2",children:[r.jsx(Pl,{size:20})," Back to Home"]})]})},iP=()=>{const{type:n}=np(),{products:e,categories:t}=It(),[s,o]=D.useState("newest"),[l,c]=D.useState(!1),[d,m]=D.useState(""),[f,v]=D.useState(""),[w,N]=D.useState(!1);D.useEffect(()=>{window.scrollTo(0,0),c(!1),m(""),v(""),o("newest")},[n]);const{title:E,baseProducts:I}=D.useMemo(()=>{let H="",W=[];switch(n){case"stud":H="Stud Earrings",W=e.filter(K=>K.type==="Stud"||K.isFeaturedStud);break;case"dangle":H="Dangle Earrings",W=e.filter(K=>K.type==="Dangle"||K.isFeaturedDangle);break;case"ring":H="Rings",W=e.filter(K=>K.type==="Ring");break;case"unique":H="Unique Pendants",W=e.filter(K=>K.isUniquePendant);break;case"bracelet":H="Bracelets",W=e.filter(K=>K.type==="Bracelet"||K.isFeaturedBracelet);break;case"watch":H="Watches",W=e.filter(K=>K.isFeaturedWatch);break;case"best":H="Best Sellers",W=e.filter(K=>K.isBestSeller);break;case"sets":H="Jewelry Sets",W=e.filter(K=>K.isJewelrySet);break;default:H="Catalog",W=e}return{title:H,baseProducts:W}},[n,e]),T=D.useMemo(()=>{const H=new Set;return I.forEach(W=>{var K;(K=W.colors)==null||K.forEach(te=>H.add(te))}),Array.from(H).sort()},[I]),A=D.useMemo(()=>{let H=[...I];if(l){const W=new Date;H=H.filter(K=>{const te=K.promoStartsAt?new Date(K.promoStartsAt):null,pe=K.promoExpiresAt?new Date(K.promoExpiresAt):null;return(K.promoPrice||0)>0&&(!te||te<=W)&&(!pe||pe>W)})}return d&&(H=H.filter(W=>{var K;return(K=W.colors)==null?void 0:K.includes(d)})),f&&(H=H.filter(W=>W.category===f)),H.sort((W,K)=>s==="price_asc"?W.price-K.price:s==="price_desc"?K.price-W.price:new Date(K.createdAt).getTime()-new Date(W.createdAt).getTime()),H},[I,l,d,f,s]);return r.jsxs("div",{className:"space-y-8 pb-12 min-h-screen",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 pt-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs text-gray-500",children:[r.jsxs(Ae,{to:"/",className:"hover:text-white flex items-center gap-1",children:[r.jsx(Pl,{size:12})," Home"]}),r.jsx("span",{children:"/"}),r.jsx("span",{className:"text-pink-500 font-bold",children:E})]}),r.jsx("h1",{className:"font-cherry text-3xl md:text-4xl text-white",children:E}),r.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[A.length," Items Found"]})]}),r.jsxs("button",{className:"md:hidden flex items-center gap-2 bg-zinc-800 px-4 py-2 rounded text-white text-sm w-fit",onClick:()=>N(!w),children:[r.jsx(pT,{size:16})," Filters & Sort"]}),r.jsxs("div",{className:`flex-col md:flex-row gap-4 items-start md:items-center bg-zinc-900/80 p-4 rounded-xl border border-gray-800 ${w?"flex":"hidden md:flex"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Sort:"}),r.jsxs("select",{value:s,onChange:H=>o(H.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none",children:[r.jsx("option",{value:"newest",children:"Newest"}),r.jsx("option",{value:"price_asc",children:"Price Low-High"}),r.jsx("option",{value:"price_desc",children:"Price High-Low"})]})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none bg-black border border-gray-700 px-3 py-1 rounded hover:border-pink-500 transition-colors",children:[r.jsx("input",{type:"checkbox",checked:l,onChange:H=>c(H.target.checked),className:"hidden"}),r.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${l?"bg-pink-600 border-pink-600":"border-gray-500"}`,children:l&&r.jsx(dt,{size:10,className:"text-white"})}),r.jsx("span",{className:`text-sm ${l?"text-pink-400 font-bold":"text-gray-300"}`,children:"Promotions"})]}),r.jsxs("select",{value:f,onChange:H=>v(H.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[r.jsx("option",{value:"",children:"All Collections"}),t.map(H=>r.jsx("option",{value:H.name,children:H.name},H.id))]}),T.length>0&&r.jsxs("select",{value:d,onChange:H=>m(H.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[r.jsx("option",{value:"",children:"All Colors"}),T.map(H=>r.jsx("option",{value:H,children:H},H))]}),(l||d||f)&&r.jsx("button",{onClick:()=>{c(!1),m(""),v("")},className:"text-xs text-red-400 hover:text-red-300 underline",children:"Clear"})]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:A.map(H=>r.jsx(cr,{product:H},H.id))}),A.length===0&&r.jsxs("div",{className:"py-20 text-center bg-zinc-900/30 rounded-xl border border-dashed border-gray-800",children:[r.jsx("p",{className:"text-gray-400",children:"No products found matching your filters."}),r.jsx("button",{onClick:()=>{c(!1),m(""),v("")},className:"mt-4 text-pink-500 font-bold hover:underline",children:"Clear Filters"})]})]})},oP=()=>{const{products:n,isDemoMode:e,resetStore:t,dbConnectionError:s,seedTestUsers:o,runDataDiagnostics:l,simulateAffiliateSale:c,getAllUsers:d,adminAdjustPoints:m}=It(),[f,v]=D.useState(null),[w,N]=D.useState(""),[E,I]=D.useState(100),[T,A]=D.useState(null),[H,W]=D.useState([]),[K,te]=D.useState(""),[pe,J]=D.useState(null);D.useEffect(()=>{(async()=>{const V=await d();W(V),V.length>0&&te(V[0].id)})()},[d]);const O=[{title:"Total Revenue",value:"R12,450",change:"+12%",icon:_s,color:"bg-green-900/30 text-green-400 border-green-500/20"},{title:"Total Orders",value:"154",change:"+8%",icon:Ii,color:"bg-cyan-900/30 text-cyan-400 border-cyan-500/20"},{title:"Active Users",value:"1,203",change:"+24%",icon:Ys,color:"bg-purple-900/30 text-purple-400 border-purple-500/20"},{title:"Products",value:n.length,change:"0%",icon:_w,color:"bg-pink-900/30 text-pink-400 border-pink-500/20"}],P=()=>{const j=l();v(j)},z=async()=>{if(!w)return;A("Processing...");const j=await c(w,E);A(j.message)},F=async()=>{K&&(await m(K,1e3),J(`Added 1000 Points to user ID: ${K}`),setTimeout(()=>J(null),3e3))},k=async()=>{if(!K){alert("Please select a user");return}await m(K,100),J(`Simulated Review: Awarded 100 Points to ${K}`),setTimeout(()=>J(null),3e3)};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Dashboard Overview"}),r.jsxs("div",{className:"flex gap-2",children:[!e&&r.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-3 py-2 rounded hover:bg-purple-900/50 transition-colors",children:[r.jsx(wT,{size:14})," Seed Test Users to DB"]}),e&&r.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-3 py-2 rounded hover:bg-red-900/50 transition-colors",children:[r.jsx(Dl,{size:14})," Reset Demo Data"]})]})]}),r.jsxs("div",{className:"bg-zinc-900/50 border-2 border-amber-500/30 p-6 rounded-xl relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 bg-amber-500/20 text-amber-400 px-3 py-1 text-xs font-bold rounded-bl-lg border-l border-b border-amber-500/30",children:"TESTING LAB"}),r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-2 bg-amber-900/30 text-amber-400 rounded-lg border border-amber-500/30",children:r.jsx(vT,{size:24})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-white text-lg",children:"Feature Verification Lab"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"Manually trigger logic to verify Affiliate & Loyalty systems."})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[r.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2 text-sm",children:[r.jsx(_s,{size:14,className:"text-green-400"})," Affiliate Sale Simulator"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Affiliate Code"}),r.jsx("input",{type:"text",className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:w,onChange:j=>N(j.target.value),placeholder:"e.g. Spoilme-FAY003"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Sale Amount (R)"}),r.jsx("input",{type:"number",className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:E,onChange:j=>I(parseFloat(j.target.value))})]}),r.jsx("button",{onClick:z,className:"w-full py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors",children:"Simulate Sale & Commission"}),T&&r.jsx("div",{className:"p-2 bg-zinc-800 rounded text-xs text-green-300 border border-green-500/30 mt-2",children:T})]})]}),r.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[r.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2 text-sm",children:[r.jsx(Fr,{size:14,className:"text-purple-400"})," Loyalty System Tester"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Select User"}),r.jsxs("select",{className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:K,onChange:j=>te(j.target.value),children:[r.jsx("option",{value:"",children:"-- Select User --"}),H.map(j=>r.jsxs("option",{value:j.id,children:[j.name," (",j.email,")"]},j.id))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:F,className:"py-2 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors",children:"+1000 Points"}),r.jsx("button",{onClick:k,className:"py-2 bg-zinc-700 hover:bg-zinc-600 text-white text-xs font-bold rounded transition-colors",children:"Simulate Review"})]}),pe&&r.jsx("div",{className:"p-2 bg-zinc-800 rounded text-xs text-purple-300 border border-purple-500/30 mt-2 animate-pulse",children:pe})]})]})]})]}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[r.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[r.jsx(ss,{size:20,className:"text-cyan-400"}),"Shipping & Logistics"]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center bg-black/40 p-4 rounded-lg border border-gray-800",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-bold text-white",children:"PUDO Locker Management"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Access your PUDO dashboard to manage locker shipments, track parcels, and view your account details."})]}),r.jsxs("a",{href:"https://customer.pudo.co.za/dashboard",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Open PUDO Dashboard ",r.jsx(uo,{size:16})]})]})]}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg relative overflow-hidden",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-900/30 text-blue-400 rounded-lg border border-blue-500/30",children:r.jsx(mT,{size:24})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-white text-lg",children:"System Doctor"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"Verify database integrity and save functionality."})]})]}),r.jsxs("button",{onClick:P,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded-lg flex items-center gap-2 transition-colors",children:[r.jsx(ww,{size:14})," Run Integrity Check"]})]}),f&&r.jsxs("div",{className:`p-4 rounded-lg border flex items-start gap-3 animate-in slide-in-from-top-2 ${f.status==="success"?"bg-green-900/20 border-green-500/30 text-green-300":"bg-red-900/20 border-red-500/30 text-red-300"}`,children:[f.status==="success"?r.jsx(dt,{size:18,className:"shrink-0 mt-0.5"}):r.jsx(yn,{size:18,className:"shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm",children:f.status==="success"?"System Healthy":"Issue Detected"}),r.jsx("p",{className:"text-xs opacity-80",children:f.details})]})]})]}),s&&r.jsxs("div",{className:"bg-red-900/20 border border-red-600/30 p-4 rounded-xl flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-red-900/50 text-red-500 rounded-lg",children:r.jsx(Pw,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-red-500",children:"Firestore Connection Failed"}),r.jsxs("p",{className:"text-xs text-red-200/70 mt-1",children:["Error: ",s,".",r.jsx("br",{}),"Please ensure you have created the ",r.jsx("strong",{children:"Firestore Database"})," in your Firebase Console. Until then, the app is running in ",r.jsx("strong",{children:"Demo Mode"}),"."]})]})]}),e&&!s&&r.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-600/30 p-4 rounded-xl flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-yellow-900/50 text-yellow-500 rounded-lg",children:r.jsx(Yj,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-yellow-500",children:"Running in Demo Mode"}),r.jsx("p",{className:"text-xs text-yellow-200/70 mt-1",children:"Firebase is not configured or unavailable. All changes (Products, Categories) are saved to your browser's Local Storage. Uploading large images might fill your storage limit."})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:O.map((j,V)=>r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("div",{className:`p-3 rounded-lg border ${j.color}`,children:r.jsx(j.icon,{size:20})}),r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${j.change.startsWith("+")?"bg-green-900/30 text-green-400":"bg-gray-800 text-gray-400"}`,children:j.change})]}),r.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:j.title}),r.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:j.value})]},V))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[r.jsx("h3",{className:"font-bold text-white mb-4 text-lg",children:"Recent Activity"}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map((j,V)=>r.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-800 last:border-0",children:[r.jsx("div",{className:"w-10 h-10 bg-black border border-gray-800 rounded-full flex items-center justify-center text-xs font-bold text-gray-500",children:"OR"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium text-gray-200",children:["Order #492",V," placed"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"2 minutes ago"})]}),r.jsx("div",{className:"ml-auto font-bold text-green-400 text-sm",children:"R129.00"})]},V))})]}),r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[r.jsx("h3",{className:"font-bold text-white mb-4 text-lg",children:"Inventory Status"}),r.jsx("div",{className:"space-y-4",children:n.slice(0,4).map(j=>r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:j.images[0],className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:""}),r.jsx("span",{className:"text-sm text-gray-300 truncate w-40",children:j.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-24 h-2 bg-gray-800 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-pink-500",style:{width:`${Math.min(j.stock,100)}%`}})}),r.jsxs("span",{className:"text-xs font-mono text-gray-500",children:[j.stock," left"]})]})]},j.id))})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let aP,lP;function cP(){return{geminiUrl:aP,vertexUrl:lP}}function uP(n,e,t){var s,o,l;if(!(!((s=n.httpOptions)===null||s===void 0)&&s.baseUrl)){const c=cP();return n.vertexai?(o=c.vertexUrl)!==null&&o!==void 0?o:e:(l=c.geminiUrl)!==null&&l!==void 0?l:t}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hl{}function rt(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function x(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const m=n[d];if(Array.isArray(t))for(let f=0;f<m.length;f++){const v=m[f];x(v,e.slice(l+1),t[f])}else for(const f of m)x(f,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const m=n[d];x(m[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else n[s]=t}function g(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const s=e[t];if(s.endsWith("[]")){const o=s.slice(0,-2);if(o in n){const l=n[o];return Array.isArray(l)?l.map(c=>g(c,e.slice(t+1))):void 0}else return}else n=n[s]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Mw(n,e){const t=Xt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Dw(n,e){return Array.isArray(e)?e.map(t=>$u(n,t)):[$u(n,e)]}function $u(n,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function dP(n,e){const t=$u(n,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function hP(n,e){const t=$u(n,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Xx(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Vw(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Xx(n,t)):[Xx(n,e)]}function qf(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Zx(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function ey(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function dr(n,e){if(e==null)throw new Error("ContentUnion is required");return qf(e)?e:{role:"user",parts:Vw(n,e)}}function Lw(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=dr(n,t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=dr(n,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>dr(n,t)):[dr(n,e)]}function Li(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Zx(e)||ey(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dr(n,e)]}const t=[],s=[],o=qf(e[0]);for(const l of e){const c=qf(l);if(c!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)t.push(l);else{if(Zx(l)||ey(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");s.push(l)}}return o||t.push({role:"user",parts:Vw(n,s)}),t}function zw(n,e){return e}function Fw(n,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function gd(n,e){return e}function xd(n,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function fP(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function zi(n,e){if(typeof e!="string")throw new Error("name must be a string");return fP(n,e,"cachedContents")}function Ow(n,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Fi(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Uw(n,e){if(typeof e!="string")throw new Error("fromName must be a string");return e.startsWith("files/")?e.split("files/")[1]:e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pP(n,e){const t={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const s=g(e,["thought"]);s!=null&&x(t,["thought"],s);const o=g(e,["codeExecutionResult"]);o!=null&&x(t,["codeExecutionResult"],o);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const m=g(e,["functionResponse"]);m!=null&&x(t,["functionResponse"],m);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function ty(n,e){const t={},s=g(e,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>pP(n,c))),x(t,["parts"],l)}const o=g(e,["role"]);return o!=null&&x(t,["role"],o),t}function mP(){return{}}function gP(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const o=g(e,["dynamicThreshold"]);return o!=null&&x(t,["dynamicThreshold"],o),t}function xP(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],gP(n,s)),t}function yP(n,e){const t={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(t,["googleSearch"],mP());const o=g(e,["googleSearchRetrieval"]);o!=null&&x(t,["googleSearchRetrieval"],xP(n,o));const l=g(e,["codeExecution"]);l!=null&&x(t,["codeExecution"],l);const c=g(e,["functionDeclarations"]);return c!=null&&x(t,["functionDeclarations"],c),t}function vP(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const o=g(e,["allowedFunctionNames"]);return o!=null&&x(t,["allowedFunctionNames"],o),t}function bP(n,e){const t={},s=g(e,["functionCallingConfig"]);return s!=null&&x(t,["functionCallingConfig"],vP(n,s)),t}function wP(n,e,t){const s={},o=g(e,["ttl"]);t!==void 0&&o!=null&&x(t,["ttl"],o);const l=g(e,["expireTime"]);t!==void 0&&l!=null&&x(t,["expireTime"],l);const c=g(e,["displayName"]);t!==void 0&&c!=null&&x(t,["displayName"],c);const d=g(e,["contents"]);if(t!==void 0&&d!=null){let w=Li(n,d);Array.isArray(w)&&(w=w.map(N=>ty(n,N))),x(t,["contents"],w)}const m=g(e,["systemInstruction"]);t!==void 0&&m!=null&&x(t,["systemInstruction"],ty(n,dr(n,m)));const f=g(e,["tools"]);if(t!==void 0&&f!=null){let w=f;Array.isArray(w)&&(w=w.map(N=>yP(n,N))),x(t,["tools"],w)}const v=g(e,["toolConfig"]);return t!==void 0&&v!=null&&x(t,["toolConfig"],bP(n,v)),s}function _P(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["model"],Mw(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],wP(n,o,t)),t}function NP(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],zi(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function SP(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],zi(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function EP(n,e,t){const s={},o=g(e,["ttl"]);t!==void 0&&o!=null&&x(t,["ttl"],o);const l=g(e,["expireTime"]);return t!==void 0&&l!=null&&x(t,["expireTime"],l),s}function CP(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],zi(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],EP(n,o,t)),t}function kP(n,e,t){const s={},o=g(e,["pageSize"]);t!==void 0&&o!=null&&x(t,["_query","pageSize"],o);const l=g(e,["pageToken"]);return t!==void 0&&l!=null&&x(t,["_query","pageToken"],l),s}function jP(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],kP(n,s,t)),t}function TP(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],s);const o=g(e,["thought"]);o!=null&&x(t,["thought"],o);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const m=g(e,["functionCall"]);m!=null&&x(t,["functionCall"],m);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const v=g(e,["inlineData"]);v!=null&&x(t,["inlineData"],v);const w=g(e,["text"]);return w!=null&&x(t,["text"],w),t}function ny(n,e){const t={},s=g(e,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>TP(n,c))),x(t,["parts"],l)}const o=g(e,["role"]);return o!=null&&x(t,["role"],o),t}function PP(){return{}}function AP(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const o=g(e,["dynamicThreshold"]);return o!=null&&x(t,["dynamicThreshold"],o),t}function IP(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],AP(n,s)),t}function RP(n,e){const t={},s=g(e,["retrieval"]);s!=null&&x(t,["retrieval"],s),g(e,["googleSearch"])!=null&&x(t,["googleSearch"],PP());const l=g(e,["googleSearchRetrieval"]);l!=null&&x(t,["googleSearchRetrieval"],IP(n,l));const c=g(e,["codeExecution"]);c!=null&&x(t,["codeExecution"],c);const d=g(e,["functionDeclarations"]);return d!=null&&x(t,["functionDeclarations"],d),t}function MP(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const o=g(e,["allowedFunctionNames"]);return o!=null&&x(t,["allowedFunctionNames"],o),t}function DP(n,e){const t={},s=g(e,["functionCallingConfig"]);return s!=null&&x(t,["functionCallingConfig"],MP(n,s)),t}function VP(n,e,t){const s={},o=g(e,["ttl"]);t!==void 0&&o!=null&&x(t,["ttl"],o);const l=g(e,["expireTime"]);t!==void 0&&l!=null&&x(t,["expireTime"],l);const c=g(e,["displayName"]);t!==void 0&&c!=null&&x(t,["displayName"],c);const d=g(e,["contents"]);if(t!==void 0&&d!=null){let w=Li(n,d);Array.isArray(w)&&(w=w.map(N=>ny(n,N))),x(t,["contents"],w)}const m=g(e,["systemInstruction"]);t!==void 0&&m!=null&&x(t,["systemInstruction"],ny(n,dr(n,m)));const f=g(e,["tools"]);if(t!==void 0&&f!=null){let w=f;Array.isArray(w)&&(w=w.map(N=>RP(n,N))),x(t,["tools"],w)}const v=g(e,["toolConfig"]);return t!==void 0&&v!=null&&x(t,["toolConfig"],DP(n,v)),s}function LP(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["model"],Mw(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],VP(n,o,t)),t}function zP(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],zi(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function FP(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],zi(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function OP(n,e,t){const s={},o=g(e,["ttl"]);t!==void 0&&o!=null&&x(t,["ttl"],o);const l=g(e,["expireTime"]);return t!==void 0&&l!=null&&x(t,["expireTime"],l),s}function UP(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],zi(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],OP(n,o,t)),t}function BP(n,e,t){const s={},o=g(e,["pageSize"]);t!==void 0&&o!=null&&x(t,["_query","pageSize"],o);const l=g(e,["pageToken"]);return t!==void 0&&l!=null&&x(t,["_query","pageToken"],l),s}function $P(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],BP(n,s,t)),t}function Eu(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["displayName"]);o!=null&&x(t,["displayName"],o);const l=g(e,["model"]);l!=null&&x(t,["model"],l);const c=g(e,["createTime"]);c!=null&&x(t,["createTime"],c);const d=g(e,["updateTime"]);d!=null&&x(t,["updateTime"],d);const m=g(e,["expireTime"]);m!=null&&x(t,["expireTime"],m);const f=g(e,["usageMetadata"]);return f!=null&&x(t,["usageMetadata"],f),t}function qP(){return{}}function HP(n,e){const t={},s=g(e,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const o=g(e,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Eu(n,c))),x(t,["cachedContents"],l)}return t}function Cu(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["displayName"]);o!=null&&x(t,["displayName"],o);const l=g(e,["model"]);l!=null&&x(t,["model"],l);const c=g(e,["createTime"]);c!=null&&x(t,["createTime"],c);const d=g(e,["updateTime"]);d!=null&&x(t,["updateTime"],d);const m=g(e,["expireTime"]);m!=null&&x(t,["expireTime"],m);const f=g(e,["usageMetadata"]);return f!=null&&x(t,["usageMetadata"],f),t}function GP(){return{}}function WP(n,e){const t={},s=g(e,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const o=g(e,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Cu(n,c))),x(t,["cachedContents"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ll;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ll||(Ll={}));class nm{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let c={config:{}};s?typeof s=="object"?c=Object.assign({},s):c=s:c={config:{}},c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ry;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ry||(ry={}));var sy;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(sy||(sy={}));var iy;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(iy||(iy={}));var oy;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(oy||(oy={}));var ay;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(ay||(ay={}));var ly;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(ly||(ly={}));var cy;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(cy||(cy={}));var uy;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY"})(uy||(uy={}));var dy;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(dy||(dy={}));var hy;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(hy||(hy={}));var fy;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(fy||(fy={}));var py;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(py||(py={}));var qu;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(qu||(qu={}));var my;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(my||(my={}));var Hf;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Hf||(Hf={}));var gy;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(gy||(gy={}));var xy;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(xy||(xy={}));var yy;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(yy||(yy={}));var vy;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(vy||(vy={}));var by;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(by||(by={}));var wy;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(wy||(wy={}));var _y;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(_y||(_y={}));var Ny;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Ny||(Ny={}));var Sy;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Sy||(Sy={}));var Ey;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ey||(Ey={}));var Cy;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Cy||(Cy={}));var ky;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ky||(ky={}));var jy;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(jy||(jy={}));var Ty;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ty||(Ty={}));var Py;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Py||(Py={}));var Ay;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Ay||(Ay={}));var Iy;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Iy||(Iy={}));class pu{get text(){var e,t,s,o,l,c,d,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",v=!1;const w=[];for(const N of(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[E,I]of Object.entries(N))E!=="text"&&E!=="thought"&&(I!==null||I!==void 0)&&w.push(E);if(typeof N.text=="string"){if(typeof N.thought=="boolean"&&N.thought)continue;v=!0,f+=N.text}}return w.length>0&&console.warn(`there are non-text parts ${w} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?f:void 0}get data(){var e,t,s,o,l,c,d,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const v=[];for(const w of(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[N,E]of Object.entries(w))N!=="inlineData"&&(E!==null||E!==void 0)&&v.push(N);w.inlineData&&typeof w.inlineData.data=="string"&&(f+=atob(w.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,s,o,l,c,d,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,s,o,l,c,d,m,f;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(w=>w.executableCode).map(w=>w.executableCode).filter(w=>w!==void 0);if((v==null?void 0:v.length)!==0)return(f=v==null?void 0:v[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,s,o,l,c,d,m,f;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(w=>w.codeExecutionResult).map(w=>w.codeExecutionResult).filter(w=>w!==void 0);if((v==null?void 0:v.length)!==0)return(f=v==null?void 0:v[0])===null||f===void 0?void 0:f.output}}class Ry{}class My{}class Dy{}class Vy{}class KP{}class Ly{}class zy{}class Fy{}class JP{}class Gf{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class YP{}class QP{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XP extends Hl{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new nm(Ll.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=LP(this.apiClient,e);return d=rt("cachedContents",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Cu(this.apiClient,v))}else{const f=_P(this.apiClient,e);return d=rt("cachedContents",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Eu(this.apiClient,v))}}async get(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=zP(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Cu(this.apiClient,v))}else{const f=NP(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Eu(this.apiClient,v))}}async delete(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=FP(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(()=>{const v=GP(),w=new zy;return Object.assign(w,v),w})}else{const f=SP(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(()=>{const v=qP(),w=new zy;return Object.assign(w,v),w})}}async update(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=UP(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Cu(this.apiClient,v))}else{const f=CP(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Eu(this.apiClient,v))}}async listInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=$P(this.apiClient,e);return d=rt("cachedContents",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const w=WP(this.apiClient,v),N=new Fy;return Object.assign(N,w),N})}else{const f=jP(this.apiClient,e);return d=rt("cachedContents",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const w=HP(this.apiClient,v),N=new Fy;return Object.assign(N,w),N})}}}function Oy(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $n(n){return this instanceof $n?(this.v=n,this):new $n(n)}function Hu(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(E){return function(I){return Promise.resolve(I).then(E,w)}}function d(E,I){s[E]&&(o[E]=function(T){return new Promise(function(A,H){l.push([E,T,A,H])>1||m(E,T)})},I&&(o[E]=I(o[E])))}function m(E,I){try{f(s[E](I))}catch(T){N(l[0][3],T)}}function f(E){E.value instanceof $n?Promise.resolve(E.value.v).then(v,w):N(l[0][2],E)}function v(E){m("next",E)}function w(E){m("throw",E)}function N(E,I){E(I),l.shift(),l.length&&m(l[0][0],l[0][1])}}function Wf(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Oy=="function"?Oy(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(d,m){c=n[l](c),o(d,m,c.done,c.value)})}}function o(l,c,d,m){Promise.resolve(m).then(function(f){l({value:f,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZP(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Bw(t)}function Bw(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function eA(n){if(n.length!==0){if(n[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function tA(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0,o=n[0];for(;s<t;)if(n[s].role==="user")o=n[s],s++;else{const l=[];let c=!0;for(;s<t&&n[s].role==="model";)l.push(n[s]),c&&!Bw(n[s])&&(c=!1),s++;c&&(e.push(o),e.push(...l))}return e}class nA{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new rA(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class rA{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),eA(l)}async sendMessage(e){var t;await this.sendPromise;const s=dr(this.apiClient,e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c;const m=(c=(l=(await o).candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,f=m?[m]:[];this.recordHistory(s,f)})(),await this.sendPromise,o}async sendMessageStream(e){var t;await this.sendPromise;const s=dr(this.apiClient,e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){return e?tA(this.history):this.history}processStreamResponse(e,t){var s,o;return Hu(this,arguments,function*(){var c,d,m,f;const v=[];try{for(var w=!0,N=Wf(e),E;E=yield $n(N.next()),c=E.done,!c;w=!0){f=E.value,w=!1;const I=f;if(ZP(I)){const T=(o=(s=I.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;T!==void 0&&v.push(T)}yield yield $n(I)}}catch(I){d={error:I}}finally{try{!w&&!c&&(m=N.return)&&(yield $n(m.call(N)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t){let s=[];t.length>0&&t.every(o=>o.role==="model")?s=t:s.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sA(n,e,t){const s={},o=g(e,["pageSize"]);t!==void 0&&o!=null&&x(t,["_query","pageSize"],o);const l=g(e,["pageToken"]);return t!==void 0&&l!=null&&x(t,["_query","pageToken"],l),s}function iA(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],sA(n,s,t)),t}function oA(n,e){const t={},s=g(e,["details"]);s!=null&&x(t,["details"],s);const o=g(e,["message"]);o!=null&&x(t,["message"],o);const l=g(e,["code"]);return l!=null&&x(t,["code"],l),t}function aA(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["displayName"]);o!=null&&x(t,["displayName"],o);const l=g(e,["mimeType"]);l!=null&&x(t,["mimeType"],l);const c=g(e,["sizeBytes"]);c!=null&&x(t,["sizeBytes"],c);const d=g(e,["createTime"]);d!=null&&x(t,["createTime"],d);const m=g(e,["expirationTime"]);m!=null&&x(t,["expirationTime"],m);const f=g(e,["updateTime"]);f!=null&&x(t,["updateTime"],f);const v=g(e,["sha256Hash"]);v!=null&&x(t,["sha256Hash"],v);const w=g(e,["uri"]);w!=null&&x(t,["uri"],w);const N=g(e,["downloadUri"]);N!=null&&x(t,["downloadUri"],N);const E=g(e,["state"]);E!=null&&x(t,["state"],E);const I=g(e,["source"]);I!=null&&x(t,["source"],I);const T=g(e,["videoMetadata"]);T!=null&&x(t,["videoMetadata"],T);const A=g(e,["error"]);return A!=null&&x(t,["error"],oA(n,A)),t}function lA(n,e){const t={},s=g(e,["file"]);s!=null&&x(t,["file"],aA(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function cA(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","file"],Uw(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function uA(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","file"],Uw(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function dA(n,e){const t={},s=g(e,["details"]);s!=null&&x(t,["details"],s);const o=g(e,["message"]);o!=null&&x(t,["message"],o);const l=g(e,["code"]);return l!=null&&x(t,["code"],l),t}function Kf(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["displayName"]);o!=null&&x(t,["displayName"],o);const l=g(e,["mimeType"]);l!=null&&x(t,["mimeType"],l);const c=g(e,["sizeBytes"]);c!=null&&x(t,["sizeBytes"],c);const d=g(e,["createTime"]);d!=null&&x(t,["createTime"],d);const m=g(e,["expirationTime"]);m!=null&&x(t,["expirationTime"],m);const f=g(e,["updateTime"]);f!=null&&x(t,["updateTime"],f);const v=g(e,["sha256Hash"]);v!=null&&x(t,["sha256Hash"],v);const w=g(e,["uri"]);w!=null&&x(t,["uri"],w);const N=g(e,["downloadUri"]);N!=null&&x(t,["downloadUri"],N);const E=g(e,["state"]);E!=null&&x(t,["state"],E);const I=g(e,["source"]);I!=null&&x(t,["source"],I);const T=g(e,["videoMetadata"]);T!=null&&x(t,["videoMetadata"],T);const A=g(e,["error"]);return A!=null&&x(t,["error"],dA(n,A)),t}function hA(n,e){const t={},s=g(e,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const o=g(e,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Kf(n,c))),x(t,["files"],l)}return t}function fA(){return{}}function pA(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mA extends Hl{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new nm(Ll.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Kf(this.apiClient,t))}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iA(this.apiClient,e);return l=rt("files",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const f=hA(this.apiClient,m),v=new JP;return Object.assign(v,f),v})}}async createInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lA(this.apiClient,e);return l=rt("upload/v1beta/files",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(()=>{const m=fA(),f=new YP;return Object.assign(f,m),f})}}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cA(this.apiClient,e);return l=rt("files/{file}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>Kf(this.apiClient,m))}}async delete(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=uA(this.apiClient,e);return l=rt("files/{file}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(()=>{const m=pA(),f=new QP;return Object.assign(f,m),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gA(n,e){const t={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const s=g(e,["thought"]);s!=null&&x(t,["thought"],s);const o=g(e,["codeExecutionResult"]);o!=null&&x(t,["codeExecutionResult"],o);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const m=g(e,["functionResponse"]);m!=null&&x(t,["functionResponse"],m);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function xA(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],s);const o=g(e,["thought"]);o!=null&&x(t,["thought"],o);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const m=g(e,["functionCall"]);m!=null&&x(t,["functionCall"],m);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const v=g(e,["inlineData"]);v!=null&&x(t,["inlineData"],v);const w=g(e,["text"]);return w!=null&&x(t,["text"],w),t}function yA(n,e){const t={},s=g(e,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>gA(n,c))),x(t,["parts"],l)}const o=g(e,["role"]);return o!=null&&x(t,["role"],o),t}function vA(n,e){const t={},s=g(e,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>xA(n,c))),x(t,["parts"],l)}const o=g(e,["role"]);return o!=null&&x(t,["role"],o),t}function bA(){return{}}function wA(){return{}}function _A(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const o=g(e,["dynamicThreshold"]);return o!=null&&x(t,["dynamicThreshold"],o),t}function NA(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const o=g(e,["dynamicThreshold"]);return o!=null&&x(t,["dynamicThreshold"],o),t}function SA(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],_A(n,s)),t}function EA(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],NA(n,s)),t}function CA(n,e){const t={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(t,["googleSearch"],bA());const o=g(e,["googleSearchRetrieval"]);o!=null&&x(t,["googleSearchRetrieval"],SA(n,o));const l=g(e,["codeExecution"]);l!=null&&x(t,["codeExecution"],l);const c=g(e,["functionDeclarations"]);return c!=null&&x(t,["functionDeclarations"],c),t}function kA(n,e){const t={},s=g(e,["retrieval"]);s!=null&&x(t,["retrieval"],s),g(e,["googleSearch"])!=null&&x(t,["googleSearch"],wA());const l=g(e,["googleSearchRetrieval"]);l!=null&&x(t,["googleSearchRetrieval"],EA(n,l));const c=g(e,["codeExecution"]);c!=null&&x(t,["codeExecution"],c);const d=g(e,["functionDeclarations"]);return d!=null&&x(t,["functionDeclarations"],d),t}function jA(n,e){const t={},s=g(e,["handle"]);if(s!=null&&x(t,["handle"],s),g(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function TA(n,e){const t={},s=g(e,["handle"]);s!=null&&x(t,["handle"],s);const o=g(e,["transparent"]);return o!=null&&x(t,["transparent"],o),t}function PA(){return{}}function Uy(){return{}}function AA(n,e){const t={},s=g(e,["disabled"]);s!=null&&x(t,["disabled"],s);const o=g(e,["startOfSpeechSensitivity"]);o!=null&&x(t,["startOfSpeechSensitivity"],o);const l=g(e,["endOfSpeechSensitivity"]);l!=null&&x(t,["endOfSpeechSensitivity"],l);const c=g(e,["prefixPaddingMs"]);c!=null&&x(t,["prefixPaddingMs"],c);const d=g(e,["silenceDurationMs"]);return d!=null&&x(t,["silenceDurationMs"],d),t}function IA(n,e){const t={},s=g(e,["disabled"]);s!=null&&x(t,["disabled"],s);const o=g(e,["startOfSpeechSensitivity"]);o!=null&&x(t,["startOfSpeechSensitivity"],o);const l=g(e,["endOfSpeechSensitivity"]);l!=null&&x(t,["endOfSpeechSensitivity"],l);const c=g(e,["prefixPaddingMs"]);c!=null&&x(t,["prefixPaddingMs"],c);const d=g(e,["silenceDurationMs"]);return d!=null&&x(t,["silenceDurationMs"],d),t}function RA(n,e){const t={},s=g(e,["automaticActivityDetection"]);s!=null&&x(t,["automaticActivityDetection"],AA(n,s));const o=g(e,["activityHandling"]);o!=null&&x(t,["activityHandling"],o);const l=g(e,["turnCoverage"]);return l!=null&&x(t,["turnCoverage"],l),t}function MA(n,e){const t={},s=g(e,["automaticActivityDetection"]);s!=null&&x(t,["automaticActivityDetection"],IA(n,s));const o=g(e,["activityHandling"]);o!=null&&x(t,["activityHandling"],o);const l=g(e,["turnCoverage"]);return l!=null&&x(t,["turnCoverage"],l),t}function DA(n,e){const t={},s=g(e,["targetTokens"]);return s!=null&&x(t,["targetTokens"],s),t}function VA(n,e){const t={},s=g(e,["targetTokens"]);return s!=null&&x(t,["targetTokens"],s),t}function LA(n,e){const t={},s=g(e,["triggerTokens"]);s!=null&&x(t,["triggerTokens"],s);const o=g(e,["slidingWindow"]);return o!=null&&x(t,["slidingWindow"],DA(n,o)),t}function zA(n,e){const t={},s=g(e,["triggerTokens"]);s!=null&&x(t,["triggerTokens"],s);const o=g(e,["slidingWindow"]);return o!=null&&x(t,["slidingWindow"],VA(n,o)),t}function FA(n,e,t){const s={},o=g(e,["generationConfig"]);t!==void 0&&o!=null&&x(t,["setup","generationConfig"],o);const l=g(e,["responseModalities"]);t!==void 0&&l!=null&&x(t,["setup","generationConfig","responseModalities"],l);const c=g(e,["temperature"]);t!==void 0&&c!=null&&x(t,["setup","generationConfig","temperature"],c);const d=g(e,["topP"]);t!==void 0&&d!=null&&x(t,["setup","generationConfig","topP"],d);const m=g(e,["topK"]);t!==void 0&&m!=null&&x(t,["setup","generationConfig","topK"],m);const f=g(e,["maxOutputTokens"]);t!==void 0&&f!=null&&x(t,["setup","generationConfig","maxOutputTokens"],f);const v=g(e,["mediaResolution"]);t!==void 0&&v!=null&&x(t,["setup","generationConfig","mediaResolution"],v);const w=g(e,["seed"]);t!==void 0&&w!=null&&x(t,["setup","generationConfig","seed"],w);const N=g(e,["speechConfig"]);t!==void 0&&N!=null&&x(t,["setup","generationConfig","speechConfig"],N);const E=g(e,["systemInstruction"]);t!==void 0&&E!=null&&x(t,["setup","systemInstruction"],yA(n,dr(n,E)));const I=g(e,["tools"]);if(t!==void 0&&I!=null){let K=xd(n,I);Array.isArray(K)&&(K=K.map(te=>CA(n,gd(n,te)))),x(t,["setup","tools"],K)}const T=g(e,["sessionResumption"]);if(t!==void 0&&T!=null&&x(t,["setup","sessionResumption"],jA(n,T)),g(e,["inputAudioTranscription"])!==void 0)throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");const A=g(e,["outputAudioTranscription"]);t!==void 0&&A!=null&&x(t,["setup","outputAudioTranscription"],PA());const H=g(e,["realtimeInputConfig"]);t!==void 0&&H!=null&&x(t,["setup","realtimeInputConfig"],RA(n,H));const W=g(e,["contextWindowCompression"]);return t!==void 0&&W!=null&&x(t,["setup","contextWindowCompression"],LA(n,W)),s}function OA(n,e,t){const s={},o=g(e,["generationConfig"]);t!==void 0&&o!=null&&x(t,["setup","generationConfig"],o);const l=g(e,["responseModalities"]);t!==void 0&&l!=null&&x(t,["setup","generationConfig","responseModalities"],l);const c=g(e,["temperature"]);t!==void 0&&c!=null&&x(t,["setup","generationConfig","temperature"],c);const d=g(e,["topP"]);t!==void 0&&d!=null&&x(t,["setup","generationConfig","topP"],d);const m=g(e,["topK"]);t!==void 0&&m!=null&&x(t,["setup","generationConfig","topK"],m);const f=g(e,["maxOutputTokens"]);t!==void 0&&f!=null&&x(t,["setup","generationConfig","maxOutputTokens"],f);const v=g(e,["mediaResolution"]);t!==void 0&&v!=null&&x(t,["setup","generationConfig","mediaResolution"],v);const w=g(e,["seed"]);t!==void 0&&w!=null&&x(t,["setup","generationConfig","seed"],w);const N=g(e,["speechConfig"]);t!==void 0&&N!=null&&x(t,["setup","generationConfig","speechConfig"],N);const E=g(e,["systemInstruction"]);t!==void 0&&E!=null&&x(t,["setup","systemInstruction"],vA(n,dr(n,E)));const I=g(e,["tools"]);if(t!==void 0&&I!=null){let te=xd(n,I);Array.isArray(te)&&(te=te.map(pe=>kA(n,gd(n,pe)))),x(t,["setup","tools"],te)}const T=g(e,["sessionResumption"]);t!==void 0&&T!=null&&x(t,["setup","sessionResumption"],TA(n,T));const A=g(e,["inputAudioTranscription"]);t!==void 0&&A!=null&&x(t,["setup","inputAudioTranscription"],Uy());const H=g(e,["outputAudioTranscription"]);t!==void 0&&H!=null&&x(t,["setup","outputAudioTranscription"],Uy());const W=g(e,["realtimeInputConfig"]);t!==void 0&&W!=null&&x(t,["setup","realtimeInputConfig"],MA(n,W));const K=g(e,["contextWindowCompression"]);return t!==void 0&&K!=null&&x(t,["setup","contextWindowCompression"],zA(n,K)),s}function UA(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["setup","model"],Xt(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],FA(n,o,t)),t}function BA(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["setup","model"],Xt(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],OA(n,o,t)),t}function $A(){return{}}function qA(){return{}}function HA(){return{}}function GA(){return{}}function WA(n,e){const t={},s=g(e,["media"]);s!=null&&x(t,["mediaChunks"],Dw(n,s));const o=g(e,["audio"]);o!=null&&x(t,["audio"],hP(n,o));const l=g(e,["audioStreamEnd"]);l!=null&&x(t,["audioStreamEnd"],l);const c=g(e,["video"]);c!=null&&x(t,["video"],dP(n,c));const d=g(e,["text"]);return d!=null&&x(t,["text"],d),g(e,["activityStart"])!=null&&x(t,["activityStart"],$A()),g(e,["activityEnd"])!=null&&x(t,["activityEnd"],HA()),t}function KA(n,e){const t={},s=g(e,["media"]);if(s!=null&&x(t,["mediaChunks"],Dw(n,s)),g(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const o=g(e,["audioStreamEnd"]);if(o!=null&&x(t,["audioStreamEnd"],o),g(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(g(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return g(e,["activityStart"])!=null&&x(t,["activityStart"],qA()),g(e,["activityEnd"])!=null&&x(t,["activityEnd"],GA()),t}function JA(){return{}}function YA(){return{}}function QA(n,e){const t={},s=g(e,["thought"]);s!=null&&x(t,["thought"],s);const o=g(e,["codeExecutionResult"]);o!=null&&x(t,["codeExecutionResult"],o);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const m=g(e,["functionResponse"]);m!=null&&x(t,["functionResponse"],m);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function XA(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],s);const o=g(e,["thought"]);o!=null&&x(t,["thought"],o);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const m=g(e,["functionCall"]);m!=null&&x(t,["functionCall"],m);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const v=g(e,["inlineData"]);v!=null&&x(t,["inlineData"],v);const w=g(e,["text"]);return w!=null&&x(t,["text"],w),t}function ZA(n,e){const t={},s=g(e,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>QA(n,c))),x(t,["parts"],l)}const o=g(e,["role"]);return o!=null&&x(t,["role"],o),t}function e4(n,e){const t={},s=g(e,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>XA(n,c))),x(t,["parts"],l)}const o=g(e,["role"]);return o!=null&&x(t,["role"],o),t}function By(n,e){const t={},s=g(e,["text"]);s!=null&&x(t,["text"],s);const o=g(e,["finished"]);return o!=null&&x(t,["finished"],o),t}function $y(n,e){const t={},s=g(e,["text"]);s!=null&&x(t,["text"],s);const o=g(e,["finished"]);return o!=null&&x(t,["finished"],o),t}function t4(n,e){const t={},s=g(e,["modelTurn"]);s!=null&&x(t,["modelTurn"],ZA(n,s));const o=g(e,["turnComplete"]);o!=null&&x(t,["turnComplete"],o);const l=g(e,["interrupted"]);l!=null&&x(t,["interrupted"],l);const c=g(e,["groundingMetadata"]);c!=null&&x(t,["groundingMetadata"],c);const d=g(e,["generationComplete"]);d!=null&&x(t,["generationComplete"],d);const m=g(e,["inputTranscription"]);m!=null&&x(t,["inputTranscription"],By(n,m));const f=g(e,["outputTranscription"]);return f!=null&&x(t,["outputTranscription"],By(n,f)),t}function n4(n,e){const t={},s=g(e,["modelTurn"]);s!=null&&x(t,["modelTurn"],e4(n,s));const o=g(e,["turnComplete"]);o!=null&&x(t,["turnComplete"],o);const l=g(e,["interrupted"]);l!=null&&x(t,["interrupted"],l);const c=g(e,["groundingMetadata"]);c!=null&&x(t,["groundingMetadata"],c);const d=g(e,["generationComplete"]);d!=null&&x(t,["generationComplete"],d);const m=g(e,["inputTranscription"]);m!=null&&x(t,["inputTranscription"],$y(n,m));const f=g(e,["outputTranscription"]);return f!=null&&x(t,["outputTranscription"],$y(n,f)),t}function r4(n,e){const t={},s=g(e,["id"]);s!=null&&x(t,["id"],s);const o=g(e,["args"]);o!=null&&x(t,["args"],o);const l=g(e,["name"]);return l!=null&&x(t,["name"],l),t}function s4(n,e){const t={},s=g(e,["args"]);s!=null&&x(t,["args"],s);const o=g(e,["name"]);return o!=null&&x(t,["name"],o),t}function i4(n,e){const t={},s=g(e,["functionCalls"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>r4(n,l))),x(t,["functionCalls"],o)}return t}function o4(n,e){const t={},s=g(e,["functionCalls"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>s4(n,l))),x(t,["functionCalls"],o)}return t}function a4(n,e){const t={},s=g(e,["ids"]);return s!=null&&x(t,["ids"],s),t}function l4(n,e){const t={},s=g(e,["ids"]);return s!=null&&x(t,["ids"],s),t}function mu(n,e){const t={},s=g(e,["modality"]);s!=null&&x(t,["modality"],s);const o=g(e,["tokenCount"]);return o!=null&&x(t,["tokenCount"],o),t}function gu(n,e){const t={},s=g(e,["modality"]);s!=null&&x(t,["modality"],s);const o=g(e,["tokenCount"]);return o!=null&&x(t,["tokenCount"],o),t}function c4(n,e){const t={},s=g(e,["promptTokenCount"]);s!=null&&x(t,["promptTokenCount"],s);const o=g(e,["cachedContentTokenCount"]);o!=null&&x(t,["cachedContentTokenCount"],o);const l=g(e,["responseTokenCount"]);l!=null&&x(t,["responseTokenCount"],l);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&x(t,["toolUsePromptTokenCount"],c);const d=g(e,["thoughtsTokenCount"]);d!=null&&x(t,["thoughtsTokenCount"],d);const m=g(e,["totalTokenCount"]);m!=null&&x(t,["totalTokenCount"],m);const f=g(e,["promptTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(I=>mu(n,I))),x(t,["promptTokensDetails"],E)}const v=g(e,["cacheTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(I=>mu(n,I))),x(t,["cacheTokensDetails"],E)}const w=g(e,["responseTokensDetails"]);if(w!=null){let E=w;Array.isArray(E)&&(E=E.map(I=>mu(n,I))),x(t,["responseTokensDetails"],E)}const N=g(e,["toolUsePromptTokensDetails"]);if(N!=null){let E=N;Array.isArray(E)&&(E=E.map(I=>mu(n,I))),x(t,["toolUsePromptTokensDetails"],E)}return t}function u4(n,e){const t={},s=g(e,["promptTokenCount"]);s!=null&&x(t,["promptTokenCount"],s);const o=g(e,["cachedContentTokenCount"]);o!=null&&x(t,["cachedContentTokenCount"],o);const l=g(e,["candidatesTokenCount"]);l!=null&&x(t,["responseTokenCount"],l);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&x(t,["toolUsePromptTokenCount"],c);const d=g(e,["thoughtsTokenCount"]);d!=null&&x(t,["thoughtsTokenCount"],d);const m=g(e,["totalTokenCount"]);m!=null&&x(t,["totalTokenCount"],m);const f=g(e,["promptTokensDetails"]);if(f!=null){let I=f;Array.isArray(I)&&(I=I.map(T=>gu(n,T))),x(t,["promptTokensDetails"],I)}const v=g(e,["cacheTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(T=>gu(n,T))),x(t,["cacheTokensDetails"],I)}const w=g(e,["candidatesTokensDetails"]);if(w!=null){let I=w;Array.isArray(I)&&(I=I.map(T=>gu(n,T))),x(t,["responseTokensDetails"],I)}const N=g(e,["toolUsePromptTokensDetails"]);if(N!=null){let I=N;Array.isArray(I)&&(I=I.map(T=>gu(n,T))),x(t,["toolUsePromptTokensDetails"],I)}const E=g(e,["trafficType"]);return E!=null&&x(t,["trafficType"],E),t}function d4(n,e){const t={},s=g(e,["timeLeft"]);return s!=null&&x(t,["timeLeft"],s),t}function h4(n,e){const t={},s=g(e,["timeLeft"]);return s!=null&&x(t,["timeLeft"],s),t}function f4(n,e){const t={},s=g(e,["newHandle"]);s!=null&&x(t,["newHandle"],s);const o=g(e,["resumable"]);o!=null&&x(t,["resumable"],o);const l=g(e,["lastConsumedClientMessageIndex"]);return l!=null&&x(t,["lastConsumedClientMessageIndex"],l),t}function p4(n,e){const t={},s=g(e,["newHandle"]);s!=null&&x(t,["newHandle"],s);const o=g(e,["resumable"]);o!=null&&x(t,["resumable"],o);const l=g(e,["lastConsumedClientMessageIndex"]);return l!=null&&x(t,["lastConsumedClientMessageIndex"],l),t}function m4(n,e){const t={};g(e,["setupComplete"])!=null&&x(t,["setupComplete"],JA());const o=g(e,["serverContent"]);o!=null&&x(t,["serverContent"],t4(n,o));const l=g(e,["toolCall"]);l!=null&&x(t,["toolCall"],i4(n,l));const c=g(e,["toolCallCancellation"]);c!=null&&x(t,["toolCallCancellation"],a4(n,c));const d=g(e,["usageMetadata"]);d!=null&&x(t,["usageMetadata"],c4(n,d));const m=g(e,["goAway"]);m!=null&&x(t,["goAway"],d4(n,m));const f=g(e,["sessionResumptionUpdate"]);return f!=null&&x(t,["sessionResumptionUpdate"],f4(n,f)),t}function g4(n,e){const t={};g(e,["setupComplete"])!=null&&x(t,["setupComplete"],YA());const o=g(e,["serverContent"]);o!=null&&x(t,["serverContent"],n4(n,o));const l=g(e,["toolCall"]);l!=null&&x(t,["toolCall"],o4(n,l));const c=g(e,["toolCallCancellation"]);c!=null&&x(t,["toolCallCancellation"],l4(n,c));const d=g(e,["usageMetadata"]);d!=null&&x(t,["usageMetadata"],u4(n,d));const m=g(e,["goAway"]);m!=null&&x(t,["goAway"],h4(n,m));const f=g(e,["sessionResumptionUpdate"]);return f!=null&&x(t,["sessionResumptionUpdate"],p4(n,f)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x4(n,e){const t={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const s=g(e,["thought"]);s!=null&&x(t,["thought"],s);const o=g(e,["codeExecutionResult"]);o!=null&&x(t,["codeExecutionResult"],o);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const m=g(e,["functionResponse"]);m!=null&&x(t,["functionResponse"],m);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function yd(n,e){const t={},s=g(e,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>x4(n,c))),x(t,["parts"],l)}const o=g(e,["role"]);return o!=null&&x(t,["role"],o),t}function y4(n,e){const t={};if(g(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=g(e,["category"]);s!=null&&x(t,["category"],s);const o=g(e,["threshold"]);return o!=null&&x(t,["threshold"],o),t}function v4(){return{}}function b4(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const o=g(e,["dynamicThreshold"]);return o!=null&&x(t,["dynamicThreshold"],o),t}function w4(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],b4(n,s)),t}function _4(n,e){const t={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(t,["googleSearch"],v4());const o=g(e,["googleSearchRetrieval"]);o!=null&&x(t,["googleSearchRetrieval"],w4(n,o));const l=g(e,["codeExecution"]);l!=null&&x(t,["codeExecution"],l);const c=g(e,["functionDeclarations"]);return c!=null&&x(t,["functionDeclarations"],c),t}function N4(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const o=g(e,["allowedFunctionNames"]);return o!=null&&x(t,["allowedFunctionNames"],o),t}function S4(n,e){const t={},s=g(e,["functionCallingConfig"]);return s!=null&&x(t,["functionCallingConfig"],N4(n,s)),t}function E4(n,e){const t={},s=g(e,["voiceName"]);return s!=null&&x(t,["voiceName"],s),t}function C4(n,e){const t={},s=g(e,["prebuiltVoiceConfig"]);return s!=null&&x(t,["prebuiltVoiceConfig"],E4(n,s)),t}function k4(n,e){const t={},s=g(e,["voiceConfig"]);s!=null&&x(t,["voiceConfig"],C4(n,s));const o=g(e,["languageCode"]);return o!=null&&x(t,["languageCode"],o),t}function j4(n,e){const t={},s=g(e,["includeThoughts"]);s!=null&&x(t,["includeThoughts"],s);const o=g(e,["thinkingBudget"]);return o!=null&&x(t,["thinkingBudget"],o),t}function T4(n,e,t){const s={},o=g(e,["systemInstruction"]);t!==void 0&&o!=null&&x(t,["systemInstruction"],yd(n,dr(n,o)));const l=g(e,["temperature"]);l!=null&&x(s,["temperature"],l);const c=g(e,["topP"]);c!=null&&x(s,["topP"],c);const d=g(e,["topK"]);d!=null&&x(s,["topK"],d);const m=g(e,["candidateCount"]);m!=null&&x(s,["candidateCount"],m);const f=g(e,["maxOutputTokens"]);f!=null&&x(s,["maxOutputTokens"],f);const v=g(e,["stopSequences"]);v!=null&&x(s,["stopSequences"],v);const w=g(e,["responseLogprobs"]);w!=null&&x(s,["responseLogprobs"],w);const N=g(e,["logprobs"]);N!=null&&x(s,["logprobs"],N);const E=g(e,["presencePenalty"]);E!=null&&x(s,["presencePenalty"],E);const I=g(e,["frequencyPenalty"]);I!=null&&x(s,["frequencyPenalty"],I);const T=g(e,["seed"]);T!=null&&x(s,["seed"],T);const A=g(e,["responseMimeType"]);A!=null&&x(s,["responseMimeType"],A);const H=g(e,["responseSchema"]);if(H!=null&&x(s,["responseSchema"],zw(n,H)),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=g(e,["safetySettings"]);if(t!==void 0&&W!=null){let F=W;Array.isArray(F)&&(F=F.map(k=>y4(n,k))),x(t,["safetySettings"],F)}const K=g(e,["tools"]);if(t!==void 0&&K!=null){let F=xd(n,K);Array.isArray(F)&&(F=F.map(k=>_4(n,gd(n,k)))),x(t,["tools"],F)}const te=g(e,["toolConfig"]);if(t!==void 0&&te!=null&&x(t,["toolConfig"],S4(n,te)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const pe=g(e,["cachedContent"]);t!==void 0&&pe!=null&&x(t,["cachedContent"],zi(n,pe));const J=g(e,["responseModalities"]);J!=null&&x(s,["responseModalities"],J);const O=g(e,["mediaResolution"]);O!=null&&x(s,["mediaResolution"],O);const P=g(e,["speechConfig"]);if(P!=null&&x(s,["speechConfig"],k4(n,Fw(n,P))),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=g(e,["thinkingConfig"]);return z!=null&&x(s,["thinkingConfig"],j4(n,z)),s}function qy(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],Xt(n,s));const o=g(e,["contents"]);if(o!=null){let c=Li(n,o);Array.isArray(c)&&(c=c.map(d=>yd(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["generationConfig"],T4(n,l,t)),t}function P4(n,e,t){const s={},o=g(e,["taskType"]);t!==void 0&&o!=null&&x(t,["requests[]","taskType"],o);const l=g(e,["title"]);t!==void 0&&l!=null&&x(t,["requests[]","title"],l);const c=g(e,["outputDimensionality"]);if(t!==void 0&&c!=null&&x(t,["requests[]","outputDimensionality"],c),g(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function A4(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],Xt(n,s));const o=g(e,["contents"]);o!=null&&x(t,["requests[]","content"],Lw(n,o));const l=g(e,["config"]);l!=null&&x(t,["config"],P4(n,l,t));const c=g(e,["model"]);return c!==void 0&&x(t,["requests[]","model"],Xt(n,c)),t}function I4(n,e,t){const s={};if(g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=g(e,["numberOfImages"]);t!==void 0&&o!=null&&x(t,["parameters","sampleCount"],o);const l=g(e,["aspectRatio"]);t!==void 0&&l!=null&&x(t,["parameters","aspectRatio"],l);const c=g(e,["guidanceScale"]);if(t!==void 0&&c!=null&&x(t,["parameters","guidanceScale"],c),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=g(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&x(t,["parameters","safetySetting"],d);const m=g(e,["personGeneration"]);t!==void 0&&m!=null&&x(t,["parameters","personGeneration"],m);const f=g(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&x(t,["parameters","includeSafetyAttributes"],f);const v=g(e,["includeRaiReason"]);t!==void 0&&v!=null&&x(t,["parameters","includeRaiReason"],v);const w=g(e,["language"]);t!==void 0&&w!=null&&x(t,["parameters","language"],w);const N=g(e,["outputMimeType"]);t!==void 0&&N!=null&&x(t,["parameters","outputOptions","mimeType"],N);const E=g(e,["outputCompressionQuality"]);if(t!==void 0&&E!=null&&x(t,["parameters","outputOptions","compressionQuality"],E),g(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function R4(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],Xt(n,s));const o=g(e,["prompt"]);o!=null&&x(t,["instances[0]","prompt"],o);const l=g(e,["config"]);return l!=null&&x(t,["config"],I4(n,l,t)),t}function M4(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","name"],Xt(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function D4(n,e,t){const s={},o=g(e,["displayName"]);t!==void 0&&o!=null&&x(t,["displayName"],o);const l=g(e,["description"]);return t!==void 0&&l!=null&&x(t,["description"],l),s}function V4(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","name"],Xt(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],D4(n,o,t)),t}function L4(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","name"],Xt(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function z4(n,e){const t={};if(g(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function F4(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],Xt(n,s));const o=g(e,["contents"]);if(o!=null){let c=Li(n,o);Array.isArray(c)&&(c=c.map(d=>yd(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["config"],z4(n,l)),t}function O4(n,e){const t={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=g(e,["imageBytes"]);s!=null&&x(t,["bytesBase64Encoded"],Fi(n,s));const o=g(e,["mimeType"]);return o!=null&&x(t,["mimeType"],o),t}function U4(n,e,t){const s={},o=g(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&x(t,["parameters","sampleCount"],o),g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=g(e,["durationSeconds"]);if(t!==void 0&&l!=null&&x(t,["parameters","durationSeconds"],l),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=g(e,["aspectRatio"]);if(t!==void 0&&c!=null&&x(t,["parameters","aspectRatio"],c),g(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=g(e,["personGeneration"]);if(t!==void 0&&d!=null&&x(t,["parameters","personGeneration"],d),g(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=g(e,["negativePrompt"]);if(t!==void 0&&m!=null&&x(t,["parameters","negativePrompt"],m),g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function B4(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],Xt(n,s));const o=g(e,["prompt"]);o!=null&&x(t,["instances[0]","prompt"],o);const l=g(e,["image"]);l!=null&&x(t,["instances[0]","image"],O4(n,l));const c=g(e,["config"]);return c!=null&&x(t,["config"],U4(n,c,t)),t}function $4(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],s);const o=g(e,["thought"]);o!=null&&x(t,["thought"],o);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const m=g(e,["functionCall"]);m!=null&&x(t,["functionCall"],m);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const v=g(e,["inlineData"]);v!=null&&x(t,["inlineData"],v);const w=g(e,["text"]);return w!=null&&x(t,["text"],w),t}function ka(n,e){const t={},s=g(e,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>$4(n,c))),x(t,["parts"],l)}const o=g(e,["role"]);return o!=null&&x(t,["role"],o),t}function q4(n,e){const t={},s=g(e,["featureSelectionPreference"]);return s!=null&&x(t,["featureSelectionPreference"],s),t}function H4(n,e){const t={},s=g(e,["method"]);s!=null&&x(t,["method"],s);const o=g(e,["category"]);o!=null&&x(t,["category"],o);const l=g(e,["threshold"]);return l!=null&&x(t,["threshold"],l),t}function G4(){return{}}function W4(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const o=g(e,["dynamicThreshold"]);return o!=null&&x(t,["dynamicThreshold"],o),t}function K4(n,e){const t={},s=g(e,["dynamicRetrievalConfig"]);return s!=null&&x(t,["dynamicRetrievalConfig"],W4(n,s)),t}function $w(n,e){const t={},s=g(e,["retrieval"]);s!=null&&x(t,["retrieval"],s),g(e,["googleSearch"])!=null&&x(t,["googleSearch"],G4());const l=g(e,["googleSearchRetrieval"]);l!=null&&x(t,["googleSearchRetrieval"],K4(n,l));const c=g(e,["codeExecution"]);c!=null&&x(t,["codeExecution"],c);const d=g(e,["functionDeclarations"]);return d!=null&&x(t,["functionDeclarations"],d),t}function J4(n,e){const t={},s=g(e,["mode"]);s!=null&&x(t,["mode"],s);const o=g(e,["allowedFunctionNames"]);return o!=null&&x(t,["allowedFunctionNames"],o),t}function Y4(n,e){const t={},s=g(e,["functionCallingConfig"]);return s!=null&&x(t,["functionCallingConfig"],J4(n,s)),t}function Q4(n,e){const t={},s=g(e,["voiceName"]);return s!=null&&x(t,["voiceName"],s),t}function X4(n,e){const t={},s=g(e,["prebuiltVoiceConfig"]);return s!=null&&x(t,["prebuiltVoiceConfig"],Q4(n,s)),t}function Z4(n,e){const t={},s=g(e,["voiceConfig"]);s!=null&&x(t,["voiceConfig"],X4(n,s));const o=g(e,["languageCode"]);return o!=null&&x(t,["languageCode"],o),t}function eI(n,e){const t={},s=g(e,["includeThoughts"]);s!=null&&x(t,["includeThoughts"],s);const o=g(e,["thinkingBudget"]);return o!=null&&x(t,["thinkingBudget"],o),t}function tI(n,e,t){const s={},o=g(e,["systemInstruction"]);t!==void 0&&o!=null&&x(t,["systemInstruction"],ka(n,dr(n,o)));const l=g(e,["temperature"]);l!=null&&x(s,["temperature"],l);const c=g(e,["topP"]);c!=null&&x(s,["topP"],c);const d=g(e,["topK"]);d!=null&&x(s,["topK"],d);const m=g(e,["candidateCount"]);m!=null&&x(s,["candidateCount"],m);const f=g(e,["maxOutputTokens"]);f!=null&&x(s,["maxOutputTokens"],f);const v=g(e,["stopSequences"]);v!=null&&x(s,["stopSequences"],v);const w=g(e,["responseLogprobs"]);w!=null&&x(s,["responseLogprobs"],w);const N=g(e,["logprobs"]);N!=null&&x(s,["logprobs"],N);const E=g(e,["presencePenalty"]);E!=null&&x(s,["presencePenalty"],E);const I=g(e,["frequencyPenalty"]);I!=null&&x(s,["frequencyPenalty"],I);const T=g(e,["seed"]);T!=null&&x(s,["seed"],T);const A=g(e,["responseMimeType"]);A!=null&&x(s,["responseMimeType"],A);const H=g(e,["responseSchema"]);H!=null&&x(s,["responseSchema"],zw(n,H));const W=g(e,["routingConfig"]);W!=null&&x(s,["routingConfig"],W);const K=g(e,["modelSelectionConfig"]);K!=null&&x(s,["modelConfig"],q4(n,K));const te=g(e,["safetySettings"]);if(t!==void 0&&te!=null){let me=te;Array.isArray(me)&&(me=me.map(Le=>H4(n,Le))),x(t,["safetySettings"],me)}const pe=g(e,["tools"]);if(t!==void 0&&pe!=null){let me=xd(n,pe);Array.isArray(me)&&(me=me.map(Le=>$w(n,gd(n,Le)))),x(t,["tools"],me)}const J=g(e,["toolConfig"]);t!==void 0&&J!=null&&x(t,["toolConfig"],Y4(n,J));const O=g(e,["labels"]);t!==void 0&&O!=null&&x(t,["labels"],O);const P=g(e,["cachedContent"]);t!==void 0&&P!=null&&x(t,["cachedContent"],zi(n,P));const z=g(e,["responseModalities"]);z!=null&&x(s,["responseModalities"],z);const F=g(e,["mediaResolution"]);F!=null&&x(s,["mediaResolution"],F);const k=g(e,["speechConfig"]);k!=null&&x(s,["speechConfig"],Z4(n,Fw(n,k)));const j=g(e,["audioTimestamp"]);j!=null&&x(s,["audioTimestamp"],j);const V=g(e,["thinkingConfig"]);return V!=null&&x(s,["thinkingConfig"],eI(n,V)),s}function Hy(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],Xt(n,s));const o=g(e,["contents"]);if(o!=null){let c=Li(n,o);Array.isArray(c)&&(c=c.map(d=>ka(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["generationConfig"],tI(n,l,t)),t}function nI(n,e,t){const s={},o=g(e,["taskType"]);t!==void 0&&o!=null&&x(t,["instances[]","task_type"],o);const l=g(e,["title"]);t!==void 0&&l!=null&&x(t,["instances[]","title"],l);const c=g(e,["outputDimensionality"]);t!==void 0&&c!=null&&x(t,["parameters","outputDimensionality"],c);const d=g(e,["mimeType"]);t!==void 0&&d!=null&&x(t,["instances[]","mimeType"],d);const m=g(e,["autoTruncate"]);return t!==void 0&&m!=null&&x(t,["parameters","autoTruncate"],m),s}function rI(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],Xt(n,s));const o=g(e,["contents"]);o!=null&&x(t,["instances[]","content"],Lw(n,o));const l=g(e,["config"]);return l!=null&&x(t,["config"],nI(n,l,t)),t}function sI(n,e,t){const s={},o=g(e,["outputGcsUri"]);t!==void 0&&o!=null&&x(t,["parameters","storageUri"],o);const l=g(e,["negativePrompt"]);t!==void 0&&l!=null&&x(t,["parameters","negativePrompt"],l);const c=g(e,["numberOfImages"]);t!==void 0&&c!=null&&x(t,["parameters","sampleCount"],c);const d=g(e,["aspectRatio"]);t!==void 0&&d!=null&&x(t,["parameters","aspectRatio"],d);const m=g(e,["guidanceScale"]);t!==void 0&&m!=null&&x(t,["parameters","guidanceScale"],m);const f=g(e,["seed"]);t!==void 0&&f!=null&&x(t,["parameters","seed"],f);const v=g(e,["safetyFilterLevel"]);t!==void 0&&v!=null&&x(t,["parameters","safetySetting"],v);const w=g(e,["personGeneration"]);t!==void 0&&w!=null&&x(t,["parameters","personGeneration"],w);const N=g(e,["includeSafetyAttributes"]);t!==void 0&&N!=null&&x(t,["parameters","includeSafetyAttributes"],N);const E=g(e,["includeRaiReason"]);t!==void 0&&E!=null&&x(t,["parameters","includeRaiReason"],E);const I=g(e,["language"]);t!==void 0&&I!=null&&x(t,["parameters","language"],I);const T=g(e,["outputMimeType"]);t!==void 0&&T!=null&&x(t,["parameters","outputOptions","mimeType"],T);const A=g(e,["outputCompressionQuality"]);t!==void 0&&A!=null&&x(t,["parameters","outputOptions","compressionQuality"],A);const H=g(e,["addWatermark"]);t!==void 0&&H!=null&&x(t,["parameters","addWatermark"],H);const W=g(e,["enhancePrompt"]);return t!==void 0&&W!=null&&x(t,["parameters","enhancePrompt"],W),s}function iI(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],Xt(n,s));const o=g(e,["prompt"]);o!=null&&x(t,["instances[0]","prompt"],o);const l=g(e,["config"]);return l!=null&&x(t,["config"],sI(n,l,t)),t}function oI(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","name"],Xt(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function aI(n,e,t){const s={},o=g(e,["displayName"]);t!==void 0&&o!=null&&x(t,["displayName"],o);const l=g(e,["description"]);return t!==void 0&&l!=null&&x(t,["description"],l),s}function lI(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],Xt(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],aI(n,o,t)),t}function cI(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","name"],Xt(n,s));const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function uI(n,e,t){const s={},o=g(e,["systemInstruction"]);t!==void 0&&o!=null&&x(t,["systemInstruction"],ka(n,dr(n,o)));const l=g(e,["tools"]);if(t!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>$w(n,m))),x(t,["tools"],d)}const c=g(e,["generationConfig"]);return t!==void 0&&c!=null&&x(t,["generationConfig"],c),s}function dI(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],Xt(n,s));const o=g(e,["contents"]);if(o!=null){let c=Li(n,o);Array.isArray(c)&&(c=c.map(d=>ka(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["config"],uI(n,l,t)),t}function hI(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],Xt(n,s));const o=g(e,["contents"]);if(o!=null){let c=Li(n,o);Array.isArray(c)&&(c=c.map(d=>ka(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["config"],l),t}function fI(n,e){const t={},s=g(e,["gcsUri"]);s!=null&&x(t,["gcsUri"],s);const o=g(e,["imageBytes"]);o!=null&&x(t,["bytesBase64Encoded"],Fi(n,o));const l=g(e,["mimeType"]);return l!=null&&x(t,["mimeType"],l),t}function pI(n,e,t){const s={},o=g(e,["numberOfVideos"]);t!==void 0&&o!=null&&x(t,["parameters","sampleCount"],o);const l=g(e,["outputGcsUri"]);t!==void 0&&l!=null&&x(t,["parameters","storageUri"],l);const c=g(e,["fps"]);t!==void 0&&c!=null&&x(t,["parameters","fps"],c);const d=g(e,["durationSeconds"]);t!==void 0&&d!=null&&x(t,["parameters","durationSeconds"],d);const m=g(e,["seed"]);t!==void 0&&m!=null&&x(t,["parameters","seed"],m);const f=g(e,["aspectRatio"]);t!==void 0&&f!=null&&x(t,["parameters","aspectRatio"],f);const v=g(e,["resolution"]);t!==void 0&&v!=null&&x(t,["parameters","resolution"],v);const w=g(e,["personGeneration"]);t!==void 0&&w!=null&&x(t,["parameters","personGeneration"],w);const N=g(e,["pubsubTopic"]);t!==void 0&&N!=null&&x(t,["parameters","pubsubTopic"],N);const E=g(e,["negativePrompt"]);t!==void 0&&E!=null&&x(t,["parameters","negativePrompt"],E);const I=g(e,["enhancePrompt"]);return t!==void 0&&I!=null&&x(t,["parameters","enhancePrompt"],I),s}function mI(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["_url","model"],Xt(n,s));const o=g(e,["prompt"]);o!=null&&x(t,["instances[0]","prompt"],o);const l=g(e,["image"]);l!=null&&x(t,["instances[0]","image"],fI(n,l));const c=g(e,["config"]);return c!=null&&x(t,["config"],pI(n,c,t)),t}function gI(n,e){const t={},s=g(e,["thought"]);s!=null&&x(t,["thought"],s);const o=g(e,["codeExecutionResult"]);o!=null&&x(t,["codeExecutionResult"],o);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const m=g(e,["functionResponse"]);m!=null&&x(t,["functionResponse"],m);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const v=g(e,["text"]);return v!=null&&x(t,["text"],v),t}function xI(n,e){const t={},s=g(e,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>gI(n,c))),x(t,["parts"],l)}const o=g(e,["role"]);return o!=null&&x(t,["role"],o),t}function yI(n,e){const t={},s=g(e,["citationSources"]);return s!=null&&x(t,["citations"],s),t}function vI(n,e){const t={},s=g(e,["content"]);s!=null&&x(t,["content"],xI(n,s));const o=g(e,["citationMetadata"]);o!=null&&x(t,["citationMetadata"],yI(n,o));const l=g(e,["tokenCount"]);l!=null&&x(t,["tokenCount"],l);const c=g(e,["finishReason"]);c!=null&&x(t,["finishReason"],c);const d=g(e,["avgLogprobs"]);d!=null&&x(t,["avgLogprobs"],d);const m=g(e,["groundingMetadata"]);m!=null&&x(t,["groundingMetadata"],m);const f=g(e,["index"]);f!=null&&x(t,["index"],f);const v=g(e,["logprobsResult"]);v!=null&&x(t,["logprobsResult"],v);const w=g(e,["safetyRatings"]);return w!=null&&x(t,["safetyRatings"],w),t}function Gy(n,e){const t={},s=g(e,["candidates"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(m=>vI(n,m))),x(t,["candidates"],d)}const o=g(e,["modelVersion"]);o!=null&&x(t,["modelVersion"],o);const l=g(e,["promptFeedback"]);l!=null&&x(t,["promptFeedback"],l);const c=g(e,["usageMetadata"]);return c!=null&&x(t,["usageMetadata"],c),t}function bI(n,e){const t={},s=g(e,["values"]);return s!=null&&x(t,["values"],s),t}function wI(){return{}}function _I(n,e){const t={},s=g(e,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>bI(n,c))),x(t,["embeddings"],l)}return g(e,["metadata"])!=null&&x(t,["metadata"],wI()),t}function NI(n,e){const t={},s=g(e,["bytesBase64Encoded"]);s!=null&&x(t,["imageBytes"],Fi(n,s));const o=g(e,["mimeType"]);return o!=null&&x(t,["mimeType"],o),t}function qw(n,e){const t={},s=g(e,["safetyAttributes","categories"]);s!=null&&x(t,["categories"],s);const o=g(e,["safetyAttributes","scores"]);o!=null&&x(t,["scores"],o);const l=g(e,["contentType"]);return l!=null&&x(t,["contentType"],l),t}function SI(n,e){const t={},s=g(e,["_self"]);s!=null&&x(t,["image"],NI(n,s));const o=g(e,["raiFilteredReason"]);o!=null&&x(t,["raiFilteredReason"],o);const l=g(e,["_self"]);return l!=null&&x(t,["safetyAttributes"],qw(n,l)),t}function EI(n,e){const t={},s=g(e,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>SI(n,c))),x(t,["generatedImages"],l)}const o=g(e,["positivePromptSafetyAttributes"]);return o!=null&&x(t,["positivePromptSafetyAttributes"],qw(n,o)),t}function CI(n,e){const t={},s=g(e,["baseModel"]);s!=null&&x(t,["baseModel"],s);const o=g(e,["createTime"]);o!=null&&x(t,["createTime"],o);const l=g(e,["updateTime"]);return l!=null&&x(t,["updateTime"],l),t}function Wy(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["displayName"]);o!=null&&x(t,["displayName"],o);const l=g(e,["description"]);l!=null&&x(t,["description"],l);const c=g(e,["version"]);c!=null&&x(t,["version"],c);const d=g(e,["_self"]);d!=null&&x(t,["tunedModelInfo"],CI(n,d));const m=g(e,["inputTokenLimit"]);m!=null&&x(t,["inputTokenLimit"],m);const f=g(e,["outputTokenLimit"]);f!=null&&x(t,["outputTokenLimit"],f);const v=g(e,["supportedGenerationMethods"]);return v!=null&&x(t,["supportedActions"],v),t}function kI(){return{}}function jI(n,e){const t={},s=g(e,["totalTokens"]);s!=null&&x(t,["totalTokens"],s);const o=g(e,["cachedContentTokenCount"]);return o!=null&&x(t,["cachedContentTokenCount"],o),t}function TI(n,e){const t={},s=g(e,["video","uri"]);s!=null&&x(t,["uri"],s);const o=g(e,["video","encodedVideo"]);o!=null&&x(t,["videoBytes"],Fi(n,o));const l=g(e,["encoding"]);return l!=null&&x(t,["mimeType"],l),t}function PI(n,e){const t={},s=g(e,["_self"]);return s!=null&&x(t,["video"],TI(n,s)),t}function AI(n,e){const t={},s=g(e,["generatedSamples"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>PI(n,d))),x(t,["generatedVideos"],c)}const o=g(e,["raiMediaFilteredCount"]);o!=null&&x(t,["raiMediaFilteredCount"],o);const l=g(e,["raiMediaFilteredReasons"]);return l!=null&&x(t,["raiMediaFilteredReasons"],l),t}function II(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["metadata"]);o!=null&&x(t,["metadata"],o);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response","generateVideoResponse"]);return d!=null&&x(t,["response"],AI(n,d)),t}function RI(n,e){const t={},s=g(e,["videoMetadata"]);s!=null&&x(t,["videoMetadata"],s);const o=g(e,["thought"]);o!=null&&x(t,["thought"],o);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const m=g(e,["functionCall"]);m!=null&&x(t,["functionCall"],m);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const v=g(e,["inlineData"]);v!=null&&x(t,["inlineData"],v);const w=g(e,["text"]);return w!=null&&x(t,["text"],w),t}function MI(n,e){const t={},s=g(e,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>RI(n,c))),x(t,["parts"],l)}const o=g(e,["role"]);return o!=null&&x(t,["role"],o),t}function DI(n,e){const t={},s=g(e,["citations"]);return s!=null&&x(t,["citations"],s),t}function VI(n,e){const t={},s=g(e,["content"]);s!=null&&x(t,["content"],MI(n,s));const o=g(e,["citationMetadata"]);o!=null&&x(t,["citationMetadata"],DI(n,o));const l=g(e,["finishMessage"]);l!=null&&x(t,["finishMessage"],l);const c=g(e,["finishReason"]);c!=null&&x(t,["finishReason"],c);const d=g(e,["avgLogprobs"]);d!=null&&x(t,["avgLogprobs"],d);const m=g(e,["groundingMetadata"]);m!=null&&x(t,["groundingMetadata"],m);const f=g(e,["index"]);f!=null&&x(t,["index"],f);const v=g(e,["logprobsResult"]);v!=null&&x(t,["logprobsResult"],v);const w=g(e,["safetyRatings"]);return w!=null&&x(t,["safetyRatings"],w),t}function Ky(n,e){const t={},s=g(e,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(v=>VI(n,v))),x(t,["candidates"],f)}const o=g(e,["createTime"]);o!=null&&x(t,["createTime"],o);const l=g(e,["responseId"]);l!=null&&x(t,["responseId"],l);const c=g(e,["modelVersion"]);c!=null&&x(t,["modelVersion"],c);const d=g(e,["promptFeedback"]);d!=null&&x(t,["promptFeedback"],d);const m=g(e,["usageMetadata"]);return m!=null&&x(t,["usageMetadata"],m),t}function LI(n,e){const t={},s=g(e,["truncated"]);s!=null&&x(t,["truncated"],s);const o=g(e,["token_count"]);return o!=null&&x(t,["tokenCount"],o),t}function zI(n,e){const t={},s=g(e,["values"]);s!=null&&x(t,["values"],s);const o=g(e,["statistics"]);return o!=null&&x(t,["statistics"],LI(n,o)),t}function FI(n,e){const t={},s=g(e,["billableCharacterCount"]);return s!=null&&x(t,["billableCharacterCount"],s),t}function OI(n,e){const t={},s=g(e,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>zI(n,c))),x(t,["embeddings"],l)}const o=g(e,["metadata"]);return o!=null&&x(t,["metadata"],FI(n,o)),t}function UI(n,e){const t={},s=g(e,["gcsUri"]);s!=null&&x(t,["gcsUri"],s);const o=g(e,["bytesBase64Encoded"]);o!=null&&x(t,["imageBytes"],Fi(n,o));const l=g(e,["mimeType"]);return l!=null&&x(t,["mimeType"],l),t}function Hw(n,e){const t={},s=g(e,["safetyAttributes","categories"]);s!=null&&x(t,["categories"],s);const o=g(e,["safetyAttributes","scores"]);o!=null&&x(t,["scores"],o);const l=g(e,["contentType"]);return l!=null&&x(t,["contentType"],l),t}function BI(n,e){const t={},s=g(e,["_self"]);s!=null&&x(t,["image"],UI(n,s));const o=g(e,["raiFilteredReason"]);o!=null&&x(t,["raiFilteredReason"],o);const l=g(e,["_self"]);l!=null&&x(t,["safetyAttributes"],Hw(n,l));const c=g(e,["prompt"]);return c!=null&&x(t,["enhancedPrompt"],c),t}function $I(n,e){const t={},s=g(e,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>BI(n,c))),x(t,["generatedImages"],l)}const o=g(e,["positivePromptSafetyAttributes"]);return o!=null&&x(t,["positivePromptSafetyAttributes"],Hw(n,o)),t}function qI(n,e){const t={},s=g(e,["endpoint"]);s!=null&&x(t,["name"],s);const o=g(e,["deployedModelId"]);return o!=null&&x(t,["deployedModelId"],o),t}function HI(n,e){const t={},s=g(e,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&x(t,["baseModel"],s);const o=g(e,["createTime"]);o!=null&&x(t,["createTime"],o);const l=g(e,["updateTime"]);return l!=null&&x(t,["updateTime"],l),t}function Jy(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["displayName"]);o!=null&&x(t,["displayName"],o);const l=g(e,["description"]);l!=null&&x(t,["description"],l);const c=g(e,["versionId"]);c!=null&&x(t,["version"],c);const d=g(e,["deployedModels"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(w=>qI(n,w))),x(t,["endpoints"],v)}const m=g(e,["labels"]);m!=null&&x(t,["labels"],m);const f=g(e,["_self"]);return f!=null&&x(t,["tunedModelInfo"],HI(n,f)),t}function GI(){return{}}function WI(n,e){const t={},s=g(e,["totalTokens"]);return s!=null&&x(t,["totalTokens"],s),t}function KI(n,e){const t={},s=g(e,["tokensInfo"]);return s!=null&&x(t,["tokensInfo"],s),t}function JI(n,e){const t={},s=g(e,["gcsUri"]);s!=null&&x(t,["uri"],s);const o=g(e,["bytesBase64Encoded"]);o!=null&&x(t,["videoBytes"],Fi(n,o));const l=g(e,["mimeType"]);return l!=null&&x(t,["mimeType"],l),t}function YI(n,e){const t={},s=g(e,["_self"]);return s!=null&&x(t,["video"],JI(n,s)),t}function QI(n,e){const t={},s=g(e,["videos"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>YI(n,d))),x(t,["generatedVideos"],c)}const o=g(e,["raiMediaFilteredCount"]);o!=null&&x(t,["raiMediaFilteredCount"],o);const l=g(e,["raiMediaFilteredReasons"]);return l!=null&&x(t,["raiMediaFilteredReasons"],l),t}function XI(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["metadata"]);o!=null&&x(t,["metadata"],o);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response"]);return d!=null&&x(t,["response"],QI(n,d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZI="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function eR(n,e,t){let s,o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),n.isVertexAI()?s=g4(n,o):s=m4(n,o),e(s)}class tR{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s,o,l;const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const f=iR(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())m=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(f);else{const te=this.apiClient.getApiKey();m=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateContent?key=${te}`}let v=()=>{};const w=new Promise(te=>{v=te}),N=e.callbacks,E=function(){var te;(te=N==null?void 0:N.onopen)===null||te===void 0||te.call(N),v({})},I=this.apiClient,T={onopen:E,onmessage:te=>{eR(I,N.onmessage,te)},onerror:(t=N==null?void 0:N.onerror)!==null&&t!==void 0?t:function(te){},onclose:(s=N==null?void 0:N.onclose)!==null&&s!==void 0?s:function(te){}},A=this.webSocketFactory.create(m,sR(f),T);A.connect(),await w;let H=Xt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&H.startsWith("publishers/")){const te=this.apiClient.getProject(),pe=this.apiClient.getLocation();H=`projects/${te}/locations/${pe}/`+H}let W={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[qu.AUDIO]}:e.config.responseModalities=[qu.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const K={model:H,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=BA(this.apiClient,K):W=UA(this.apiClient,K),delete W.config,A.send(JSON.stringify(W)),new rR(A,this.apiClient)}}const nR={turnComplete:!0};class rR{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Li(e,t.turns),e.isVertexAI()?s=s.map(o=>ka(e,o)):s=s.map(o=>yd(e,o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(ZI)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},nR),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:KA(this.apiClient,e)}:t={realtimeInput:WA(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function sR(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function iR(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oR extends Hl{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>await this.generateContentInternal(t),this.generateContentStream=async t=>await this.generateContentStreamInternal(t),this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const c=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:c.push(m);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l}:d={generatedImages:c},d})}async generateContentInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=Hy(this.apiClient,e);return d=rt("{model}:generateContent",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const w=Ky(this.apiClient,v),N=new pu;return Object.assign(N,w),N})}else{const f=qy(this.apiClient,e);return d=rt("{model}:generateContent",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const w=Gy(this.apiClient,v),N=new pu;return Object.assign(N,w),N})}}async generateContentStreamInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=Hy(this.apiClient,e);d=rt("{model}:streamGenerateContent?alt=sse",f._url),m=f._query,delete f.config,delete f._url,delete f._query;const v=this.apiClient;return c=v.requestStream({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(w){return Hu(this,arguments,function*(){var N,E,I,T;try{for(var A=!0,H=Wf(w),W;W=yield $n(H.next()),N=W.done,!N;A=!0){T=W.value,A=!1;const te=Ky(v,yield $n(T.json())),pe=new pu;Object.assign(pe,te),yield yield $n(pe)}}catch(K){E={error:K}}finally{try{!A&&!N&&(I=H.return)&&(yield $n(I.call(H)))}finally{if(E)throw E.error}}})})}else{const f=qy(this.apiClient,e);d=rt("{model}:streamGenerateContent?alt=sse",f._url),m=f._query,delete f.config,delete f._url,delete f._query;const v=this.apiClient;return c=v.requestStream({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(w){return Hu(this,arguments,function*(){var N,E,I,T;try{for(var A=!0,H=Wf(w),W;W=yield $n(H.next()),N=W.done,!N;A=!0){T=W.value,A=!1;const te=Gy(v,yield $n(T.json())),pe=new pu;Object.assign(pe,te),yield yield $n(pe)}}catch(K){E={error:K}}finally{try{!A&&!N&&(I=H.return)&&(yield $n(I.call(H)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=rI(this.apiClient,e);return d=rt("{model}:predict",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const w=OI(this.apiClient,v),N=new Ry;return Object.assign(N,w),N})}else{const f=A4(this.apiClient,e);return d=rt("{model}:batchEmbedContents",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const w=_I(this.apiClient,v),N=new Ry;return Object.assign(N,w),N})}}async generateImagesInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=iI(this.apiClient,e);return d=rt("{model}:predict",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const w=$I(this.apiClient,v),N=new My;return Object.assign(N,w),N})}else{const f=R4(this.apiClient,e);return d=rt("{model}:predict",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const w=EI(this.apiClient,v),N=new My;return Object.assign(N,w),N})}}async get(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=oI(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Jy(this.apiClient,v))}else{const f=M4(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Wy(this.apiClient,v))}}async update(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=lI(this.apiClient,e);return d=rt("{model}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Jy(this.apiClient,v))}else{const f=V4(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Wy(this.apiClient,v))}}async delete(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=cI(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(()=>{const v=GI(),w=new Dy;return Object.assign(w,v),w})}else{const f=L4(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(()=>{const v=kI(),w=new Dy;return Object.assign(w,v),w})}}async countTokens(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=dI(this.apiClient,e);return d=rt("{model}:countTokens",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const w=WI(this.apiClient,v),N=new Vy;return Object.assign(N,w),N})}else{const f=F4(this.apiClient,e);return d=rt("{model}:countTokens",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const w=jI(this.apiClient,v),N=new Vy;return Object.assign(N,w),N})}}async computeTokens(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=hI(this.apiClient,e);return l=rt("{model}:computeTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const f=KI(this.apiClient,m),v=new KP;return Object.assign(v,f),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=mI(this.apiClient,e);return d=rt("{model}:predictLongRunning",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>XI(this.apiClient,v))}else{const f=B4(this.apiClient,e);return d=rt("{model}:predictLongRunning",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>II(this.apiClient,v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aR(n,e){const t={},s=g(e,["operationName"]);s!=null&&x(t,["_url","operationName"],s);const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function lR(n,e){const t={},s=g(e,["operationName"]);s!=null&&x(t,["_url","operationName"],s);const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function cR(n,e){const t={},s=g(e,["operationName"]);s!=null&&x(t,["operationName"],s);const o=g(e,["resourceName"]);o!=null&&x(t,["_url","resourceName"],o);const l=g(e,["config"]);return l!=null&&x(t,["config"],l),t}function uR(n,e){const t={},s=g(e,["video","uri"]);s!=null&&x(t,["uri"],s);const o=g(e,["video","encodedVideo"]);o!=null&&x(t,["videoBytes"],Fi(n,o));const l=g(e,["encoding"]);return l!=null&&x(t,["mimeType"],l),t}function dR(n,e){const t={},s=g(e,["_self"]);return s!=null&&x(t,["video"],uR(n,s)),t}function hR(n,e){const t={},s=g(e,["generatedSamples"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>dR(n,d))),x(t,["generatedVideos"],c)}const o=g(e,["raiMediaFilteredCount"]);o!=null&&x(t,["raiMediaFilteredCount"],o);const l=g(e,["raiMediaFilteredReasons"]);return l!=null&&x(t,["raiMediaFilteredReasons"],l),t}function fR(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["metadata"]);o!=null&&x(t,["metadata"],o);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response","generateVideoResponse"]);return d!=null&&x(t,["response"],hR(n,d)),t}function pR(n,e){const t={},s=g(e,["gcsUri"]);s!=null&&x(t,["uri"],s);const o=g(e,["bytesBase64Encoded"]);o!=null&&x(t,["videoBytes"],Fi(n,o));const l=g(e,["mimeType"]);return l!=null&&x(t,["mimeType"],l),t}function mR(n,e){const t={},s=g(e,["_self"]);return s!=null&&x(t,["video"],pR(n,s)),t}function gR(n,e){const t={},s=g(e,["videos"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>mR(n,d))),x(t,["generatedVideos"],c)}const o=g(e,["raiMediaFilteredCount"]);o!=null&&x(t,["raiMediaFilteredCount"],o);const l=g(e,["raiMediaFilteredReasons"]);return l!=null&&x(t,["raiMediaFilteredReasons"],l),t}function Yy(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["metadata"]);o!=null&&x(t,["metadata"],o);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response"]);return d!=null&&x(t,["response"],gR(n,d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xR extends Hl{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;return s&&"httpOptions"in s&&(l=s.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:t.name,config:s})}async getVideosOperationInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=lR(this.apiClient,e);return d=rt("{operationName}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Yy(this.apiClient,v))}else{const f=aR(this.apiClient,e);return d=rt("{operationName}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>fR(this.apiClient,v))}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=cR(this.apiClient,e);return l=rt("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>Yy(this.apiClient,m))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yR="Content-Type",vR="X-Server-Timeout",bR="User-Agent",wR="x-goog-api-client",_R="0.12.0",NR=`google-genai-sdk/${_R}`,SR="v1beta1",ER="v1beta",Qy=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Gw extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class Jf extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class CR{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:SR,this.getProject()||this.getLocation()?(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(o.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:ER,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))o.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s){if(t&&t.timeout||s){const o=new AbortController,l=o.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>o.abort(),t.timeout),s&&s.addEventListener("abort",()=>{o.abort()}),e.signal=l}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await Xy(o),new Gf(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await Xy(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Hu(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:m}=yield $n(o.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=l.decode(m);try{const w=JSON.parse(f);if("error"in w){const N=JSON.parse(JSON.stringify(w.error)),E=N.status,I=N.code,T=`got status: ${E}. ${JSON.stringify(w)}`;if(I>=400&&I<500)throw new Gw(T);if(I>=500&&I<600)throw new Jf(T)}}catch(w){const N=w;if(N.name==="ClientError"||N.name==="ServerError")throw w}c+=f;let v=c.match(Qy);for(;v;){const w=v[1];try{const N=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield $n(new Gf(N)),c=c.slice(v[0].length),v=c.match(Qy)}catch(N){throw new Error(`exception parsing stream chunk ${w}. ${N}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=NR+" "+this.clientOptions.userAgentExtra;return e[bR]=t,e[wR]=t,e[yR]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[s,o]of Object.entries(e.headers))t.append(s,o);e.timeout&&e.timeout>0&&t.append(vR,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);o.sizeBytes=String(c.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const m=await this.fetchUploadUrl(o,t);return l.upload(e,m,this)}async fetchUploadUrl(e,t){var s;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},c=await this.request({path:rt("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function Xy(n){var e;if(n===void 0)throw new Jf("response is undefined");if(!n.ok){const t=n.status,s=n.statusText;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const l=`got status: ${t} ${s}. ${JSON.stringify(o)}`;throw t>=400&&t<500?new Gw(l):t>=500&&t<600?new Jf(l):new Error(l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kR(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],s);const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function jR(n,e,t){const s={},o=g(e,["pageSize"]);t!==void 0&&o!=null&&x(t,["_query","pageSize"],o);const l=g(e,["pageToken"]);t!==void 0&&l!=null&&x(t,["_query","pageToken"],l);const c=g(e,["filter"]);return t!==void 0&&c!=null&&x(t,["_query","filter"],c),s}function TR(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],jR(n,s,t)),t}function PR(n,e){const t={},s=g(e,["textInput"]);s!=null&&x(t,["textInput"],s);const o=g(e,["output"]);return o!=null&&x(t,["output"],o),t}function AR(n,e){const t={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=g(e,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>PR(n,l))),x(t,["examples","examples"],o)}return t}function IR(n,e,t){const s={};if(g(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=g(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&x(t,["displayName"],o),g(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=g(e,["epochCount"]);t!==void 0&&l!=null&&x(t,["tuningTask","hyperparameters","epochCount"],l);const c=g(e,["learningRateMultiplier"]);if(c!=null&&x(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),g(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=g(e,["batchSize"]);t!==void 0&&d!=null&&x(t,["tuningTask","hyperparameters","batchSize"],d);const m=g(e,["learningRate"]);return t!==void 0&&m!=null&&x(t,["tuningTask","hyperparameters","learningRate"],m),s}function RR(n,e){const t={},s=g(e,["baseModel"]);s!=null&&x(t,["baseModel"],s);const o=g(e,["trainingDataset"]);o!=null&&x(t,["tuningTask","trainingData"],AR(n,o));const l=g(e,["config"]);return l!=null&&x(t,["config"],IR(n,l,t)),t}function MR(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["_url","name"],s);const o=g(e,["config"]);return o!=null&&x(t,["config"],o),t}function DR(n,e,t){const s={},o=g(e,["pageSize"]);t!==void 0&&o!=null&&x(t,["_query","pageSize"],o);const l=g(e,["pageToken"]);t!==void 0&&l!=null&&x(t,["_query","pageToken"],l);const c=g(e,["filter"]);return t!==void 0&&c!=null&&x(t,["_query","filter"],c),s}function VR(n,e){const t={},s=g(e,["config"]);return s!=null&&x(t,["config"],DR(n,s,t)),t}function LR(n,e,t){const s={},o=g(e,["gcsUri"]);if(t!==void 0&&o!=null&&x(t,["supervisedTuningSpec","trainingDatasetUri"],o),g(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function zR(n,e){const t={},s=g(e,["gcsUri"]);return s!=null&&x(t,["validationDatasetUri"],s),t}function FR(n,e,t){const s={},o=g(e,["validationDataset"]);t!==void 0&&o!=null&&x(t,["supervisedTuningSpec"],zR(n,o));const l=g(e,["tunedModelDisplayName"]);t!==void 0&&l!=null&&x(t,["tunedModelDisplayName"],l);const c=g(e,["description"]);t!==void 0&&c!=null&&x(t,["description"],c);const d=g(e,["epochCount"]);t!==void 0&&d!=null&&x(t,["supervisedTuningSpec","hyperParameters","epochCount"],d);const m=g(e,["learningRateMultiplier"]);t!==void 0&&m!=null&&x(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m);const f=g(e,["adapterSize"]);if(t!==void 0&&f!=null&&x(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),g(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return s}function OR(n,e){const t={},s=g(e,["baseModel"]);s!=null&&x(t,["baseModel"],s);const o=g(e,["trainingDataset"]);o!=null&&x(t,["supervisedTuningSpec","trainingDatasetUri"],LR(n,o,t));const l=g(e,["config"]);return l!=null&&x(t,["config"],FR(n,l,t)),t}function UR(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["model"],s);const o=g(e,["name"]);return o!=null&&x(t,["endpoint"],o),t}function Ww(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["state"]);o!=null&&x(t,["state"],Ow(n,o));const l=g(e,["createTime"]);l!=null&&x(t,["createTime"],l);const c=g(e,["tuningTask","startTime"]);c!=null&&x(t,["startTime"],c);const d=g(e,["tuningTask","completeTime"]);d!=null&&x(t,["endTime"],d);const m=g(e,["updateTime"]);m!=null&&x(t,["updateTime"],m);const f=g(e,["description"]);f!=null&&x(t,["description"],f);const v=g(e,["baseModel"]);v!=null&&x(t,["baseModel"],v);const w=g(e,["_self"]);w!=null&&x(t,["tunedModel"],UR(n,w));const N=g(e,["distillationSpec"]);N!=null&&x(t,["distillationSpec"],N);const E=g(e,["experiment"]);E!=null&&x(t,["experiment"],E);const I=g(e,["labels"]);I!=null&&x(t,["labels"],I);const T=g(e,["pipelineJob"]);T!=null&&x(t,["pipelineJob"],T);const A=g(e,["tunedModelDisplayName"]);return A!=null&&x(t,["tunedModelDisplayName"],A),t}function BR(n,e){const t={},s=g(e,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const o=g(e,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Ww(n,c))),x(t,["tuningJobs"],l)}return t}function $R(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["metadata"]);o!=null&&x(t,["metadata"],o);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);return c!=null&&x(t,["error"],c),t}function qR(n,e){const t={},s=g(e,["model"]);s!=null&&x(t,["model"],s);const o=g(e,["endpoint"]);return o!=null&&x(t,["endpoint"],o),t}function Yf(n,e){const t={},s=g(e,["name"]);s!=null&&x(t,["name"],s);const o=g(e,["state"]);o!=null&&x(t,["state"],Ow(n,o));const l=g(e,["createTime"]);l!=null&&x(t,["createTime"],l);const c=g(e,["startTime"]);c!=null&&x(t,["startTime"],c);const d=g(e,["endTime"]);d!=null&&x(t,["endTime"],d);const m=g(e,["updateTime"]);m!=null&&x(t,["updateTime"],m);const f=g(e,["error"]);f!=null&&x(t,["error"],f);const v=g(e,["description"]);v!=null&&x(t,["description"],v);const w=g(e,["baseModel"]);w!=null&&x(t,["baseModel"],w);const N=g(e,["tunedModel"]);N!=null&&x(t,["tunedModel"],qR(n,N));const E=g(e,["supervisedTuningSpec"]);E!=null&&x(t,["supervisedTuningSpec"],E);const I=g(e,["tuningDataStats"]);I!=null&&x(t,["tuningDataStats"],I);const T=g(e,["encryptionSpec"]);T!=null&&x(t,["encryptionSpec"],T);const A=g(e,["partnerModelTuningSpec"]);A!=null&&x(t,["partnerModelTuningSpec"],A);const H=g(e,["distillationSpec"]);H!=null&&x(t,["distillationSpec"],H);const W=g(e,["experiment"]);W!=null&&x(t,["experiment"],W);const K=g(e,["labels"]);K!=null&&x(t,["labels"],K);const te=g(e,["pipelineJob"]);te!=null&&x(t,["pipelineJob"],te);const pe=g(e,["tunedModelDisplayName"]);return pe!=null&&x(t,["tunedModelDisplayName"],pe),t}function HR(n,e){const t={},s=g(e,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const o=g(e,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Yf(n,c))),x(t,["tuningJobs"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GR extends Hl{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new nm(Ll.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const s=await this.tuneMldevInternal(t);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:Hf.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=MR(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Yf(this.apiClient,v))}else{const f=kR(this.apiClient,e);return d=rt("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Ww(this.apiClient,v))}}async listInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const f=VR(this.apiClient,e);return d=rt("tuningJobs",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const w=HR(this.apiClient,v),N=new Ly;return Object.assign(N,w),N})}else{const f=TR(this.apiClient,e);return d=rt("tunedModels",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const w=BR(this.apiClient,v),N=new Ly;return Object.assign(N,w),N})}}async tuneInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=OR(this.apiClient,e);return l=rt("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>Yf(this.apiClient,m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RR(this.apiClient,e);return l=rt("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>$R(this.apiClient,m))}}}const WR=1024*1024*8;async function KR(n,e,t){var s,o;let l=0,c=0,d=new Gf(new Response),m="upload";for(l=n.size;c<l;){const v=Math.min(WR,l-c),w=n.slice(c,c+v);if(c+v>=l&&(m+=", finalize"),d=await t.request({path:"",body:w,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(c),"Content-Length":String(v)}}}),c+=v,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s["x-goog-upload-status"])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(d==null?void 0:d.json());if(((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function JR(n){return{size:n.size,type:n.type}}class YR{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KR(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await JR(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QR{create(e,t,s){return new XR(e,t,s)}}class XR{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zy="x-goog-api-key";class ZR{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(Zy)===null&&e.append(Zy,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eM="gl-node/";class tM{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=uP(e,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new ZR(this.apiKey);this.apiClient=new CR({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:eM+"web",uploader:new YR}),this.models=new oR(this.apiClient),this.live=new tR(this.apiClient,o,new QR),this.chats=new nA(this.models,this.apiClient),this.caches=new XP(this.apiClient),this.files=new mA(this.apiClient),this.operations=new xR(this.apiClient),this.tunings=new GR(this.apiClient)}}const nM="PLACEHOLDER_API_KEY",Gl=()=>new tM({apiKey:nM}),rM=async(n,e,t)=>{const s=Gl();if(!s)return"AI Generation unavailable (Missing API Key).";try{return(await s.models.generateContent({model:"gemini-2.5-flash",contents:`Write a compelling, SEO-friendly product description for an e-commerce product.
      
      Product Name: ${n}
      Category: ${e}
      Keywords/Features: ${t}
      
      Tone: Professional, persuasive, and enthusiastic. 
      Keep it under 150 words.`})).text||"Could not generate description."}catch(o){return console.error("Gemini API Error:",o),"Error generating description. Please try again."}},sM=async(n,e)=>{const t=Gl();if(!t)return null;const s=n.replace(/^data:image\/\w+;base64,/,"");try{const l=(await t.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:s}},{text:`You are a fashion merchandising expert for a specialized jewelry store. Analyze this image of a ${e||"jewelry product"}.
            
            Generate the following JSON object:
            {
              "name": "A short, catchy, premium product name",
              "description": "A short, powerful, attractive description (max 3 sentences) that sells the product emotionally.",
              "whenAndHowToWear": "Short, powerful advice on when and how to wear this item (max 2 sentences).",
              "tags": ["Array", "of", "5", "jewelry-specific", "tags"],
              "seoKeywords": ["Array", "of", "5", "strong", "SEO", "keywords"],
              "colors": ["List", "of", "dominant", "product", "colors"]
            }
            
            CRITICAL INSTRUCTIONS:
            1. **Tags**: STRICTLY JEWELRY ONLY. Allowed: Materials (Gold, Resin, Silver, Gemstone), Types (Ring, Stud, Choker, Pendant), Styles (Art Deco, Vintage, Boho, Minimalist), Techniques (Filigree, Wire Wrap). 
               FORBIDDEN: "Fashion", "Style", "Woman", "Girl", "Cute", "Gift", "Love", "Trend", "Beautiful", "Accessory".
            2. **Colors**: STRICTLY PRODUCT ONLY. Ignore background, skin, or prop colors. If the ring is silver and the stone is red, output ["Silver", "Red"]. Do not output "White" if the background is white.
            
            Return ONLY raw JSON.`}]},config:{responseMimeType:"application/json"}})).text;return l?JSON.parse(l):null}catch(o){return console.error("Gemini Image Analysis Error:",o),null}},iM=async(n,e)=>{const t=Gl();if(!t)return[];try{const o=(await t.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${e} unique South African product reviews for a jewelry item named "${n}".
      
      CRITICAL INSTRUCTIONS:
      1. **Persona**: Use ONLY Female names.
      2. **Diversity**: Mix names from Zulu, Xhosa, Afrikaans, English, and Coloured backgrounds.
      3. **Locations**: Use specific South African towns (e.g., Paarl, Benoni, Mthatha, Umlazi, George, Soweto, Ballito, Bloemfontein), NOT just "Cape Town" or "JHB".
      4. **Language Mixing**: 
         - Some reviews must mix English with Afrikaans (e.g., "Baie nice", "Lekker", "Te oulik").
         - Some reviews must mix English with Xhosa/Zulu slang (e.g., "Yho", "Shame", "Stunning shem", "Haikona").
         - Keep it natural.
      5. **Realism**: Include occasional spelling mistakes (e.g., "realy", "awsome") and casual grammar.
      6. **Rating**: Randomly between 3.5 and 5.0 stars.
      7. **Content**: Short, punchy comments about quality, delivery, or how it looks.
      8. **Dates**: Random dates strictly between January 1st, 2025 and today (Format: YYYY-MM-DD). Do NOT generate 2024 dates.

      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return o?JSON.parse(o).map(c=>({...c,id:`rev_ai_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(s){return console.error("Gemini Review Generation Error:",s),[]}},oM=async n=>{const e=Gl();if(!e)return[];try{const s=(await e.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${n} unique South African reviews specifically for "One of a Kind" handmade wire-wrapped pendants.
      
      CRITICAL INSTRUCTIONS:
      1. **Context**: These are unique, single items. The reviews should NOT mention specific colors or stones (like "love the blue stone") because every piece is different.
      2. **Focus**: Focus on the "surprise" element, the uniqueness, the wire-wrapping craftsmanship, the packaging, and the fact that nobody else has this exact piece.
      3. **Persona**: Female names, South African diversity (Zulu, Xhosa, Afrikaans, English).
      4. **Locations**: Specific SA towns.
      5. **Language**: Mix in SA slang (Lekker, Mooi, Pragtig, Yho, Stunning).
      6. **Rating**: 4.0 to 5.0 stars.
      7. **Dates**: Random dates between Jan 2025 and now.
      
      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return s?JSON.parse(s).map(l=>({...l,id:`rev_unique_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(t){return console.error("Gemini Unique Review Generation Error:",t),[]}},aM=async(n,e,t)=>{const s=Gl();if(!s)return"Check out this amazing product at Spoil Me Vintage! #vintage #jewelry";try{let o=`Write a single social media post for a jewelry product named "${n}". Price: R${t}.`;return e==="Instagram"||e==="TikTok"?o+=' Style: High energy, visually descriptive, lots of emojis, include 10 relevant hashtags. Focus on "Unique", "Handmade", "South Africa". Keep it under 200 characters + hashtags.':e==="Facebook"?o+=' Style: Friendly, community-focused, engaging question at the end. Mention "Spoil Me Vintage". Include link placeholder [Link].':e==="Twitter"||e==="X"?o+=" Style: Short, punchy, urgent. Max 280 characters. Include 3 hashtags.":o+=" Style: Professional yet inviting.",(await s.models.generateContent({model:"gemini-2.5-flash",contents:o})).text||""}catch(o){return console.error("Gemini Social Post Error:",o),`New arrival: ${n} for only R${t}! Get it before it's gone. #SpoilMeVintage`}},lM={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},cM=[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Black",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Silver",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Hypo-Allergic Plastic",modifier:0,description:"Plastic state bends easily"}],uM=()=>{var he,Ne,$e,Xe,lt,Re,Ye,yt,jt;const{products:n,addProduct:e,updateProduct:t,deleteProduct:s,categories:o,packagingPresets:l,materialPresets:c,savePackagingPreset:d,saveMaterialPreset:m,deleteMaterialPreset:f}=It(),[v,w]=D.useState(!1),[N,E]=D.useState(!1),[I,T]=D.useState(!1),[A,H]=D.useState(!1),[W,K]=D.useState(!1),[te,pe]=D.useState("general"),[J,O]=D.useState(null),[P,z]=D.useState(null),[F,k]=D.useState(""),[j,V]=D.useState(""),[me,Le]=D.useState(""),[Se,Te]=D.useState(!1),B=D.useRef(null),ve=D.useRef(null),G=D.useRef(null),$={id:"",code:"",name:"",slug:"",description:"",whenAndHowToWear:"",price:0,compareAtPrice:0,memberPrice:0,costPrice:0,shippingCost:0,packaging:[],backOfficeLink:"",madeBy:"Spoil Me Vintage",category:((he=o[0])==null?void 0:he.name)||"",type:"Stud",status:"draft",images:[""],stock:0,soldCount:0,tags:[],seoKeywords:[],colors:[],isNewArrival:!1,isBestSeller:!1,isFeaturedRing:!1,isFeaturedBracelet:!1,isFeaturedWatch:!1,isUniquePendant:!1,isFeaturedStud:!1,isFeaturedDangle:!1,isFeaturedJewelryBox:!1,isFeaturedPerfumeHolder:!1,isJewelrySet:!1,createdAt:new Date().toISOString(),ringStock:{5:0,6:0,7:0,8:0,9:0,10:0,11:0},earringMaterials:[],showEarringOptions:!1,pendantChainLengths:{},pendantWireWrapped:!1,chainStyles:[],material:"",reviews:[],giftProductId:"",giftValue:0,promoPrice:0,promoStartsAt:"",promoExpiresAt:"",promoBasicMemberPrice:0,promoPremiumMemberPrice:0,promoDeluxeMemberPrice:0},[M,se]=D.useState($),[de,ze]=D.useState(""),[We,Ze]=D.useState(""),[Ke,Je]=D.useState(""),[He,wt]=D.useState(0),[Et,ot]=D.useState(""),[je,at]=D.useState(""),[Bt,$t]=D.useState(5),un=[...cM,...c],qt=()=>{var L;se({...$,id:`SPV-${Date.now()}`,createdAt:new Date().toISOString(),category:((L=o[0])==null?void 0:L.name)||""}),w(!0),pe("general"),at("")},_e=L=>{se({...$,...L,compareAtPrice:L.compareAtPrice||0,memberPrice:L.memberPrice||0,costPrice:L.costPrice||0,shippingCost:L.shippingCost||0,soldCount:L.soldCount||0,packaging:L.packaging||[],ringStock:L.ringStock||$.ringStock,pendantChainLengths:L.pendantChainLengths||{},showEarringOptions:L.showEarringOptions??!1,chainStyles:L.chainStyles||[],reviews:L.reviews||[],giftProductId:L.giftProductId||"",giftValue:L.giftValue||0,promoPrice:L.promoPrice||0,promoStartsAt:L.promoStartsAt||"",promoExpiresAt:L.promoExpiresAt||"",promoBasicMemberPrice:L.promoBasicMemberPrice||0,promoPremiumMemberPrice:L.promoPremiumMemberPrice||0,promoDeluxeMemberPrice:L.promoDeluxeMemberPrice||0,tags:L.tags||[],seoKeywords:L.seoKeywords||[],colors:L.colors||[],isFeaturedJewelryBox:L.isFeaturedJewelryBox||!1,isFeaturedPerfumeHolder:L.isFeaturedPerfumeHolder||!1}),w(!0),pe("general"),at("")},Ht=async()=>{if(!M.name||!M.price){alert("Name and Price are required");return}E(!0);try{let L=[];if(gn){const Ve=M.images.map(async(st,rn)=>{if(st.startsWith("data:"))try{const _t=Date.now(),vn=Bs(gn,`products/${M.id}/img_${_t}_${rn}`);return await Dj(vn,st,"data_url"),await Us(vn)}catch(_t){return console.error("Failed to upload image:",_t),""}return st}),et=await Promise.all(Ve);console.log("AdminProducts: upload raw results:",et),L=et.filter(st=>st&&st.trim()!==""),console.log("AdminProducts: processedImages:",L)}else L=M.images.filter(Ve=>Ve.trim()!=="");const oe={...M,images:L,price:Number(M.price),stock:Number(M.stock),soldCount:Number(M.soldCount),compareAtPrice:Number(M.compareAtPrice||0),memberPrice:Number(M.memberPrice||0),costPrice:Number(M.costPrice||0),shippingCost:Number(M.shippingCost||0),giftValue:Number(M.giftValue||0),promoPrice:Number(M.promoPrice||0),promoBasicMemberPrice:Number(M.promoBasicMemberPrice||0),promoPremiumMemberPrice:Number(M.promoPremiumMemberPrice||0),promoDeluxeMemberPrice:Number(M.promoDeluxeMemberPrice||0)};oe.type==="Ring"&&oe.ringStock&&(oe.stock=Object.values(oe.ringStock).reduce((Ve,et)=>Ve+et,0)),n.some(Ve=>Ve.id===oe.id)?await t(oe):await e(oe),w(!1)}catch(L){console.error("Failed to save product:",L),alert("Failed to save product. Please check console.")}finally{E(!1)}},Mn=async L=>{if(window.confirm("Are you sure?"))try{await s(L)}catch{alert("Failed to delete product.")}},Qn=async()=>{if(!M.name||!M.category){alert("Please enter a name and category first.");return}T(!0);const L=await rM(M.name,M.category,"Handmade, Unique, Vintage");se(oe=>({...oe,description:L})),T(!1)},hr=async L=>{var et;const oe=(et=L.target.files)==null?void 0:et[0];if(!oe)return;H(!0);const Ve=new FileReader;Ve.onloadend=async()=>{const st=Ve.result,rn=[st,...M.images.filter(vn=>vn!=="")];se(vn=>({...vn,images:rn})),console.log("AdminProducts: Added base64 image for analysis (preview length):",st.slice(0,80));const _t=await sM(st,M.category);_t&&se(vn=>({...vn,name:_t.name,description:_t.description,whenAndHowToWear:_t.whenAndHowToWear,tags:[...new Set([...vn.tags,..._t.tags])],seoKeywords:[...new Set([...vn.seoKeywords||[],..._t.seoKeywords])],colors:[...new Set([...vn.colors||[],..._t.colors])],slug:_t.name.toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-")})),H(!1)},Ve.readAsDataURL(oe)},En=async L=>{const oe=L.target.files;if(!oe||oe.length===0)return;const Ve=Array.from(oe).map(st=>new Promise(rn=>{const _t=new FileReader;_t.onloadend=()=>rn(_t.result),_t.readAsDataURL(st)})),et=await Promise.all(Ve);se(st=>({...st,images:[...st.images.filter(rn=>rn.trim()!==""),...et]})),L.target.value=""},Ct=async()=>{if(!M.name){alert("Please enter a product name first.");return}K(!0);const L=await iM(M.name,Bt);L.length>0&&se(oe=>({...oe,reviews:[...oe.reviews||[],...L]})),K(!1)},Rt=async()=>{K(!0);const L=await oM(25);L.length>0&&se(oe=>({...oe,reviews:[...oe.reviews||[],...L]})),K(!1)},dn=()=>{const L=Math.floor(1e5+Math.random()*9e5);se(oe=>({...oe,code:`SPV-${L}`}))},fr=()=>{if(!M.name)return;const L=M.name.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");se(oe=>({...oe,slug:L}))},Xn=L=>{se(oe=>{var Ve;return{...oe,reviews:(Ve=oe.reviews)==null?void 0:Ve.filter(et=>et.id!==L)}})},ce=(L,oe,Ve)=>{if(!oe.trim())return;const et=oe.split(",").map(st=>st.trim()).filter(st=>st.length>0);se(st=>({...st,[L]:Array.from(new Set([...st[L]||[],...et]))})),Ve("")},qe=(L,oe)=>{se(Ve=>{var et;return{...Ve,[L]:(et=Ve[L])==null?void 0:et.filter((st,rn)=>rn!==oe)}})},kt=L=>{const oe=M.images.filter((Ve,et)=>et!==L);oe.length===0&&oe.push(""),se({...M,images:oe})},hn=L=>{O(L.id),z({userName:L.userName,location:L.location,content:L.content,rating:L.rating,date:L.date||new Date().toLocaleDateString()})},Dn=()=>{!J||!P||(se(L=>{var oe;return{...L,reviews:(oe=L.reviews)==null?void 0:oe.map(Ve=>Ve.id===J?{...Ve,...P}:Ve)}}),O(null),z(null))},Or=(L,oe,Ve)=>{var et;(et=M.earringMaterials)!=null&&et.some(st=>st.name===L)||se(st=>({...st,earringMaterials:[...st.earringMaterials||[],{name:L,modifier:oe,description:Ve}]}))},Ss=L=>{const oe=[...M.earringMaterials||[]];oe.splice(L,1),se({...M,earringMaterials:oe})},Cr=L=>{Ke&&(Or(Ke,He,Et),L&&(m({name:Ke,modifier:He,description:Et}),alert("Material saved to presets!")),Je(""),wt(0),ot(""))},os=(L,oe)=>{L.stopPropagation(),window.confirm(`Remove "${oe}" from presets?`)&&f(oe)},as=()=>{(M.packaging||[]).length>=3||se({...M,packaging:[...M.packaging||[],{id:`pack_${Date.now()}`,name:"",bulkCost:0,bulkQuantity:1,unitCost:0}]})},Vn=L=>{if(!L)return;const oe=l.find(Ve=>Ve.name===L);oe&&(M.packaging||[]).length<3&&se({...M,packaging:[...M.packaging||[],{...oe,id:`pack_${Date.now()}`}]})},Zn=L=>{var Ve;const oe=(Ve=M.packaging)==null?void 0:Ve[L];oe&&oe.name&&(d(oe),alert(`Saved "${oe.name}" to packaging presets!`))},kr=(L,oe,Ve)=>{const et=[...M.packaging||[]],st={...et[L],[oe]:Ve};if(oe==="bulkCost"||oe==="bulkQuantity"){const rn=oe==="bulkCost"?parseFloat(Ve):st.bulkCost,_t=oe==="bulkQuantity"?parseFloat(Ve):st.bulkQuantity;st.unitCost=_t>0?rn/_t:0}et[L]=st,se({...M,packaging:et})},er=L=>{const oe=[...M.packaging||[]];oe.splice(L,1),se({...M,packaging:oe})},Es=L=>{se(oe=>({...oe,price:L,memberPrice:parseFloat((L*.8).toFixed(2))}))},jr=((Ne=M.packaging)==null?void 0:Ne.reduce((L,oe)=>L+oe.unitCost,0))||0,Ur=(M.costPrice||0)+(M.shippingCost||0)+jr,ee=M.price-Ur,Q=(M.memberPrice||0)-Ur,ne=n.filter(L=>{const oe=F.toLowerCase();return(L.name.toLowerCase().includes(oe)||L.code.toLowerCase().includes(oe))&&(j?L.type===j:!0)&&(me?L.category===me:!0)&&(Se?L.promoPrice&&L.promoPrice>0:!0)});return r.jsxs("div",{className:"space-y-6 text-[22px]",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Product Management"}),!v&&r.jsxs("button",{onClick:qt,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 shadow-lg transition-colors text-sm",children:[r.jsx(Os,{size:18})," Add Product"]})]}),!v&&r.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[r.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[r.jsx(md,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),r.jsx("input",{type:"text",placeholder:"Search by Name or SKU...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:F,onChange:L=>k(L.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(kw,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),r.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:j,onChange:L=>V(L.target.value),children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"Stud",children:"Stud Earrings"}),r.jsx("option",{value:"Dangle",children:"Dangle Earrings"}),r.jsx("option",{value:"Ring",children:"Rings"}),r.jsx("option",{value:"Pendant",children:"Pendants"}),r.jsx("option",{value:"Bracelet",children:"Bracelets"}),r.jsx("option",{value:"Watch",children:"Watches"}),r.jsx("option",{value:"Jewelry Box",children:"Jewelry Boxes"}),r.jsx("option",{value:"Perfume Holder",children:"Perfume Holders"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(nT,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),r.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:me,onChange:L=>Le(L.target.value),children:[r.jsx("option",{value:"",children:"All Collections"}),o.map(L=>r.jsx("option",{value:L.name,children:L.name},L.id))]})]}),r.jsxs("button",{onClick:()=>Te(!Se),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all flex items-center gap-2 ${Se?"bg-green-900/30 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-400 hover:bg-zinc-800"}`,children:[r.jsx(vl,{size:16})," ",Se?"Promotions Active":"Show Promotions"]}),(F||j||me||Se)&&r.jsx("button",{onClick:()=>{k(""),V(""),Le(""),Te(!1)},className:"px-3 py-2 text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Reset Filters"})]}),v?r.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:[r.jsx("div",{className:"flex border-b border-gray-800 bg-zinc-950/50 overflow-x-auto no-scrollbar",children:["general","pricing","media","inventory","marketing","reviews","promotions","gifts"].map(L=>r.jsx("button",{onClick:()=>pe(L),className:`px-6 py-4 text-sm font-medium capitalize whitespace-nowrap transition-colors ${te===L?"text-pink-500 border-b-2 border-pink-500 bg-pink-500/5":"text-gray-400 hover:text-white"}`,children:L},L))}),r.jsxs("div",{className:"p-6",children:[te==="general"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Name *"}),r.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm focus:border-pink-500",value:M.name,onChange:L=>se({...M,name:L.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"URL Slug"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.slug,onChange:L=>se({...M,slug:L.target.value}),placeholder:"product-name-url"}),r.jsx("button",{onClick:fr,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:r.jsx(Dl,{size:16})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"SKU / Code"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.code,onChange:L=>se({...M,code:L.target.value}),placeholder:"SPV-001"}),r.jsx("button",{onClick:dn,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:r.jsx(Dl,{size:16})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Status"}),r.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.status,onChange:L=>se({...M,status:L.target.value}),children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"published",children:"Published"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),r.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.category,onChange:L=>se({...M,category:L.target.value}),children:[r.jsx("option",{value:"",children:"Select Category"}),o.map(L=>r.jsx("option",{value:L.name,children:L.name},L.id))]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Type"}),r.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.type,onChange:L=>se({...M,type:L.target.value}),children:[r.jsx("option",{value:"Stud",children:"Stud Earrings"}),r.jsx("option",{value:"Dangle",children:"Dangle Earrings"}),r.jsx("option",{value:"Ring",children:"Ring"}),r.jsx("option",{value:"Pendant",children:"Pendant / Necklace"}),r.jsx("option",{value:"Bracelet",children:"Bracelet"}),r.jsx("option",{value:"Watch",children:"Watch"}),r.jsx("option",{value:"Jewelry Box",children:"Jewelry Box"}),r.jsx("option",{value:"Perfume Holder",children:"Perfume Holder"}),r.jsx("option",{value:"Other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Made By"}),r.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.madeBy,onChange:L=>se({...M,madeBy:L.target.value}),children:[r.jsx("option",{value:"Spoil Me Vintage",children:"Spoil Me Vintage (Handmade)"}),r.jsx("option",{value:"Outsourced",children:"Outsourced"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Base Material"}),r.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.material,onChange:L=>se({...M,material:L.target.value}),placeholder:"e.g. Epoxy Resin, Copper"})]})]})]}),te==="pricing"&&r.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[r.jsx(_s,{size:18,className:"text-green-400"})," Sales Prices"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (R) *"}),r.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-green-400",value:M.price,onChange:L=>Es(parseFloat(L.target.value)||0)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (Comparison)"}),r.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.compareAtPrice||"",onChange:L=>se({...M,compareAtPrice:parseFloat(L.target.value)||0})})]})]}),r.jsxs("div",{className:"p-4 bg-purple-900/10 border border-purple-500/30 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("label",{className:"block text-sm font-bold text-purple-400 flex items-center gap-2",children:[r.jsx(Nr,{size:16})," Member Price"]}),r.jsx("span",{className:"text-[10px] bg-purple-600/20 text-purple-300 border border-purple-500/50 px-2 py-1 rounded font-bold",children:"20% OFF"})]}),r.jsx("input",{type:"number",className:"w-full p-2 bg-zinc-900/50 border border-purple-500/30 rounded-md text-gray-400 text-sm font-bold cursor-not-allowed",value:M.memberPrice||"",readOnly:!0,disabled:!0})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[r.jsx(ss,{size:18,className:"text-red-400"})," Cost & Shipping"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-red-400/80 mb-1",children:"Product Cost (R)"}),r.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-red-900/30 rounded-md text-white text-sm",value:M.costPrice||0,onChange:L=>se({...M,costPrice:parseFloat(L.target.value)||0})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-red-400/80 mb-1",children:"Shipping In (R)"}),r.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-red-900/30 rounded-md text-white text-sm",value:M.shippingCost||0,onChange:L=>se({...M,shippingCost:parseFloat(L.target.value)||0})})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1 flex items-center gap-2",children:[r.jsx(Qp,{size:14})," Back Office / Supplier Link"]}),r.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.backOfficeLink,onChange:L=>se({...M,backOfficeLink:L.target.value})})]})]})]}),r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 shadow-lg",children:[r.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 mb-4",children:[r.jsx(Kj,{size:18,className:"text-cyan-400"})," Profit & Margins"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[r.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-red-900/30",children:[r.jsx("span",{className:"text-gray-400 block mb-1",children:"Total Unit Cost"}),r.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["R",Ur.toFixed(2)]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-2 space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Product:"})," ",r.jsxs("span",{children:["R",(M.costPrice||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Shipping:"})," ",r.jsxs("span",{children:["R",(M.shippingCost||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Packaging:"})," ",r.jsxs("span",{children:["R",jr.toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-green-900/30",children:[r.jsx("span",{className:"text-gray-400 block mb-1",children:"Retail Profit"}),r.jsxs("div",{className:`text-2xl font-bold ${ee>0?"text-green-400":"text-red-500"}`,children:["R",ee.toFixed(2)]})]}),r.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-purple-900/30",children:[r.jsx("span",{className:"text-gray-400 block mb-1",children:"Member Profit"}),r.jsxs("div",{className:`text-2xl font-bold ${Q>0?"text-purple-400":"text-red-500"}`,children:["R",Q.toFixed(2)]})]})]})]}),r.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[r.jsx(Ou,{size:16,className:"text-pink-500"})," Packaging Breakdown"]}),r.jsxs("select",{className:"bg-zinc-800 text-xs text-gray-300 border border-gray-700 rounded px-2 py-1",onChange:L=>Vn(L.target.value),value:"",children:[r.jsx("option",{value:"",children:"Load Preset..."}),l.map((L,oe)=>r.jsxs("option",{value:L.name,children:[L.name," (R",L.unitCost.toFixed(2),")"]},oe))]})]}),((($e=M.packaging)==null?void 0:$e.length)||0)<3&&r.jsxs("button",{onClick:as,className:"text-xs flex items-center gap-1 text-cyan-400 hover:text-cyan-300",children:[r.jsx(Os,{size:12})," Add Item"]})]}),r.jsx("div",{className:"space-y-3",children:(Xe=M.packaging)==null?void 0:Xe.map((L,oe)=>r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end bg-zinc-900 p-3 rounded border border-gray-800",children:[r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Item Name"}),r.jsx("input",{type:"text",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:L.name,onChange:Ve=>kr(oe,"name",Ve.target.value)})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Cost (R)"}),r.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:L.bulkCost,onChange:Ve=>kr(oe,"bulkCost",parseFloat(Ve.target.value)||0)})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Qty"}),r.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:L.bulkQuantity,onChange:Ve=>kr(oe,"bulkQuantity",parseFloat(Ve.target.value)||0)})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Unit Cost"}),r.jsxs("div",{className:"w-full p-1.5 bg-zinc-800 border border-gray-700 rounded text-xs text-red-300 font-mono",children:["R",L.unitCost.toFixed(2)]})]}),r.jsxs("div",{className:"md:col-span-3 flex justify-end pb-1 gap-2",children:[r.jsx("button",{onClick:()=>Zn(oe),className:"text-blue-400 hover:text-blue-300 bg-blue-900/20 p-1 rounded hover:bg-blue-900/40 transition-colors",title:"Save as Preset",children:r.jsx(Nu,{size:16})}),r.jsx("button",{onClick:()=>er(oe),className:"text-gray-600 hover:text-red-400 p-1",children:r.jsx(fo,{size:16})})]})]},oe))})]})]}),te==="inventory"&&r.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Current Stock"}),r.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.stock,onChange:L=>se({...M,stock:parseInt(L.target.value)||0})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sold Count"}),r.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.soldCount,onChange:L=>se({...M,soldCount:parseInt(L.target.value)||0})})]})]}),M.type==="Ring"&&r.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[r.jsx("h3",{className:"text-sm font-bold text-white mb-3",children:"Ring Sizes"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.keys($.ringStock||{}).map(L=>{var oe;return r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:["Size ",L]}),r.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded text-white text-sm",value:((oe=M.ringStock)==null?void 0:oe[L])||0,onChange:Ve=>se({...M,ringStock:{...M.ringStock,[L]:parseInt(Ve.target.value)||0}})})]},L)})})]}),(M.type==="Stud"||M.type==="Dangle")&&r.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("input",{type:"checkbox",id:"showEarringOptions",checked:M.showEarringOptions,onChange:L=>se({...M,showEarringOptions:L.target.checked}),className:"rounded bg-black border-gray-600 text-pink-600 focus:ring-pink-500"}),r.jsx("label",{htmlFor:"showEarringOptions",className:"text-sm font-bold text-white",children:"Enable Material Customization"})]}),M.showEarringOptions&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex gap-2 flex-wrap",children:un.map(L=>r.jsxs("div",{className:"group relative inline-flex",children:[r.jsxs("button",{onClick:()=>Or(L.name,L.modifier,L.description),className:"text-xs bg-gray-800 hover:bg-gray-700 text-gray-300 px-2 py-1 rounded border border-gray-600",children:["+ ",L.name]}),c.some(oe=>oe.name===L.name)&&r.jsx("button",{onClick:oe=>os(oe,L.name),className:"absolute -top-1.5 -right-1.5 bg-red-600 text-white rounded-full p-0.5 w-3 h-3 flex items-center justify-center text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:"X"})]},L.name))}),r.jsx("div",{className:"space-y-2",children:(lt=M.earringMaterials)==null?void 0:lt.map((L,oe)=>r.jsxs("div",{className:"flex items-center gap-2 bg-black p-2 rounded border border-gray-800",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-white",children:L.name}),r.jsxs("span",{className:"text-xs text-pink-400",children:["+R",L.modifier]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:L.description})]}),r.jsx("button",{onClick:()=>Ss(oe),className:"text-gray-600 hover:text-red-400",children:r.jsx(fo,{size:14})})]},oe))}),r.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end pt-2 border-t border-gray-700",children:[r.jsx("div",{className:"col-span-3",children:r.jsx("input",{type:"text",placeholder:"Custom Material",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Ke,onChange:L=>Je(L.target.value)})}),r.jsx("div",{className:"col-span-2",children:r.jsx("input",{type:"number",placeholder:"Price Mod",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:He,onChange:L=>wt(parseFloat(L.target.value)||0)})}),r.jsx("div",{className:"col-span-4",children:r.jsx("input",{type:"text",placeholder:"Description",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Et,onChange:L=>ot(L.target.value)})}),r.jsxs("div",{className:"col-span-3 flex gap-1",children:[r.jsx("button",{onClick:()=>Cr(!1),className:"flex-1 p-1.5 bg-pink-600 text-white rounded text-xs flex items-center justify-center",title:"Add to Product",children:r.jsx(Os,{size:14})}),r.jsx("button",{onClick:()=>Cr(!0),className:"flex-1 p-1.5 bg-cyan-600 text-white rounded text-xs flex items-center justify-center",title:"Add & Save Preset",children:r.jsx(Nu,{size:14})})]})]})]})]}),M.type==="Pendant"&&r.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Chain Styles"}),r.jsx("div",{className:"flex gap-2",children:["Metal Chain","Leather Cord","Ribbon"].map(L=>{var oe;return r.jsx("button",{onClick:()=>{var st,rn;const et=((st=M.chainStyles)==null?void 0:st.includes(L))?(rn=M.chainStyles)==null?void 0:rn.filter(_t=>_t!==L):[...M.chainStyles||[],L];se({...M,chainStyles:et})},className:`px-3 py-1 rounded text-xs border ${(oe=M.chainStyles)!=null&&oe.includes(L)?"bg-cyan-900/50 border-cyan-500 text-cyan-400":"bg-black border-gray-700 text-gray-400"}`,children:L},L)})})]}),((Re=M.chainStyles)==null?void 0:Re.includes("Metal Chain"))&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Available Lengths"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(lM).map(L=>{var oe,Ve;return r.jsxs("div",{onClick:()=>{const et=M.pendantChainLengths||{};se({...M,pendantChainLengths:{...et,[L]:!et[L]}})},className:`p-2 rounded border cursor-pointer text-xs flex items-center justify-between ${(oe=M.pendantChainLengths)!=null&&oe[L]?"bg-green-900/20 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-500"}`,children:[r.jsx("span",{children:L}),((Ve=M.pendantChainLengths)==null?void 0:Ve[L])&&r.jsx(dt,{size:12})]},L)})})]})]})]}),te==="marketing"&&r.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[r.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[r.jsx(vl,{size:18,className:"text-cyan-400"})," Product Visibility & Features"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${M.isNewArrival?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[r.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${M.isNewArrival?"bg-cyan-500 border-cyan-500":"border-gray-600"}`,children:M.isNewArrival&&r.jsx(dt,{size:14,className:"text-black"})}),r.jsx("input",{type:"checkbox",className:"hidden",checked:M.isNewArrival,onChange:L=>se({...M,isNewArrival:L.target.checked})}),r.jsx("span",{className:"text-sm font-bold text-white",children:"New Arrival"})]}),r.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${M.isBestSeller?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[r.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${M.isBestSeller?"bg-yellow-500 border-yellow-500":"border-gray-600"}`,children:M.isBestSeller&&r.jsx(dt,{size:14,className:"text-black"})}),r.jsx("input",{type:"checkbox",className:"hidden",checked:M.isBestSeller,onChange:L=>se({...M,isBestSeller:L.target.checked})}),r.jsx("span",{className:"text-sm font-bold text-white",children:"Best Seller"})]}),r.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${M.isJewelrySet?"bg-purple-900/20 border-purple-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[r.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${M.isJewelrySet?"bg-purple-500 border-purple-500":"border-gray-600"}`,children:M.isJewelrySet&&r.jsx(dt,{size:14,className:"text-white"})}),r.jsx("input",{type:"checkbox",className:"hidden",checked:M.isJewelrySet,onChange:L=>se({...M,isJewelrySet:L.target.checked})}),r.jsx("span",{className:"text-sm font-bold text-white",children:"Jewelry Set"})]})]}),r.jsx("h4",{className:"text-sm text-gray-400 font-bold mt-6 mb-3 uppercase tracking-wider",children:"Category Features"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:M.isFeaturedRing,onChange:L=>se({...M,isFeaturedRing:L.target.checked})}),r.jsx("span",{className:"text-xs text-white",children:"Featured Ring"})]}),r.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:M.isFeaturedBracelet,onChange:L=>se({...M,isFeaturedBracelet:L.target.checked})}),r.jsx("span",{className:"text-xs text-white",children:"Featured Bracelet"})]}),r.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:M.isUniquePendant,onChange:L=>se({...M,isUniquePendant:L.target.checked})}),r.jsx("span",{className:"text-xs text-white",children:"Unique Pendant"})]}),r.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:M.isFeaturedStud,onChange:L=>se({...M,isFeaturedStud:L.target.checked})}),r.jsx("span",{className:"text-xs text-white",children:"Featured Studs"})]}),r.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:M.isFeaturedDangle,onChange:L=>se({...M,isFeaturedDangle:L.target.checked})}),r.jsx("span",{className:"text-xs text-white",children:"Featured Dangles"})]}),r.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:M.isFeaturedWatch,onChange:L=>se({...M,isFeaturedWatch:L.target.checked})}),r.jsx("span",{className:"text-xs text-white",children:"Featured Watch"})]}),r.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:M.isFeaturedJewelryBox,onChange:L=>se({...M,isFeaturedJewelryBox:L.target.checked})}),r.jsx("span",{className:"text-xs text-white",children:"Featured Jewelry Box"})]}),r.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:M.isFeaturedPerfumeHolder,onChange:L=>se({...M,isFeaturedPerfumeHolder:L.target.checked})}),r.jsx("span",{className:"text-xs text-white",children:"Featured Perfume Holder"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Tags & SEO"}),r.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:M.tags.map((L,oe)=>r.jsxs("span",{className:"bg-gray-800 text-gray-300 text-xs px-2 py-1 rounded flex items-center gap-1",children:[L,r.jsx(yn,{size:12,className:"cursor-pointer",onClick:()=>qe("tags",oe)})]},oe))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:de,onChange:L=>ze(L.target.value),onKeyDown:L=>L.key==="Enter"&&ce("tags",de,ze),placeholder:"Add tag..."}),r.jsx("button",{onClick:()=>ce("tags",de,ze),className:"bg-gray-800 p-2 rounded text-white",children:r.jsx(Os,{size:18})})]})]})]}),te==="reviews"&&r.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[r.jsxs("div",{className:"flex gap-4 flex-wrap",children:[r.jsxs("div",{className:"flex-1 bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-500/30 p-5 rounded-xl shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3 text-cyan-400 font-bold text-lg",children:[r.jsx(Dx,{size:24}),r.jsx("h3",{children:"AI South African Reviewer"})]}),r.jsxs("button",{onClick:Ct,disabled:W,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[W?r.jsx(ho,{className:"animate-spin",size:18}):r.jsx(Er,{size:18})," Generate Standard Reviews"]})]}),(M.isUniquePendant||M.type==="Pendant")&&r.jsxs("div",{className:"flex-1 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/30 p-5 rounded-xl shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3 text-purple-400 font-bold text-lg",children:[r.jsx(Zj,{size:24}),r.jsx("h3",{children:"Unique Piece Reviewer"})]}),r.jsxs("button",{onClick:Rt,disabled:W,className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[W?r.jsx(ho,{className:"animate-spin",size:18}):r.jsx(Er,{size:18})," Generate Unique Reviews"]})]})]}),r.jsx("div",{className:"space-y-3",children:(Ye=M.reviews)==null?void 0:Ye.map(L=>r.jsx("div",{className:"bg-black p-3 rounded border border-gray-800",children:J===L.id&&P?r.jsxs("div",{className:"space-y-3 animate-in fade-in",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:P.userName,onChange:oe=>z({...P,userName:oe.target.value}),placeholder:"Name"}),r.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:P.location,onChange:oe=>z({...P,location:oe.target.value}),placeholder:"Location"}),r.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white col-span-2",value:P.date,onChange:oe=>z({...P,date:oe.target.value}),placeholder:"Date (YYYY-MM-DD or Text)"})]}),r.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(oe=>r.jsx(Hs,{size:16,className:"cursor-pointer",fill:oe<=P.rating?"orange":"none",stroke:oe<=P.rating?"orange":"gray",onClick:()=>z({...P,rating:oe})},oe))}),r.jsx("textarea",{className:"w-full bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",rows:3,value:P.content,onChange:oe=>z({...P,content:oe.target.value})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>O(null),className:"px-3 py-1 bg-zinc-800 text-white text-xs rounded hover:bg-zinc-700",children:"Cancel"}),r.jsx("button",{onClick:Dn,className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-500",children:"Save"})]})]}):r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-300",children:[L.userName," ",r.jsxs("span",{className:"text-gray-600 font-normal",children:["from ",L.location]}),r.jsx("span",{className:"text-gray-500 font-normal ml-2",children:L.date})]}),r.jsx("div",{className:"flex text-yellow-400 gap-0.5 my-1",children:[1,2,3,4,5].map(oe=>r.jsx(Hs,{size:10,fill:oe<=L.rating?"currentColor":"none"},oe))}),r.jsxs("p",{className:"text-xs text-gray-400 italic",children:['"',L.content,'"']})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>hn(L),className:"text-gray-500 hover:text-cyan-400",children:r.jsx(Ox,{size:14})}),r.jsx("button",{onClick:()=>Xn(L.id),className:"text-gray-600 hover:text-red-400",children:r.jsx(fo,{size:14})})]})]})},L.id))})]}),te==="promotions"&&r.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[r.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ss,{className:"text-green-400"}),r.jsx("div",{children:r.jsx("h3",{className:"text-lg font-bold text-white",children:"Retail Base Price"})})]}),r.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["R",M.price.toFixed(2)]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[r.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-4",children:[r.jsx(vl,{size:18,className:"text-cyan-400"})," Non-Member Promo"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Promotional Price (R)"}),r.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white font-bold",value:M.promoPrice||"",onChange:L=>se({...M,promoPrice:parseFloat(L.target.value)||0})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Discount (%)"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white",value:((M.price-(M.promoPrice||0))/M.price*100).toFixed(0),readOnly:!0}),r.jsx(lT,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[r.jsx(Js,{size:12})," Start"]}),r.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((yt=M.promoStartsAt)==null?void 0:yt.slice(0,16))||"",onChange:L=>se({...M,promoStartsAt:L.target.value})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[r.jsx(Js,{size:12})," End"]}),r.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((jt=M.promoExpiresAt)==null?void 0:jt.slice(0,16))||"",onChange:L=>se({...M,promoExpiresAt:L.target.value})})]})]})]})})})]}),te==="gifts"&&r.jsx("div",{className:"space-y-6 animate-in fade-in",children:r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[r.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(Yt,{size:18,className:"text-pink-500"})," Promotional Gift"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Select Gift Product"}),r.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm",value:M.giftProductId||"",onChange:L=>se({...M,giftProductId:L.target.value}),children:[r.jsx("option",{value:"",children:"-- No Gift --"}),n.filter(L=>L.id!==M.id).map(L=>r.jsx("option",{value:L.id,children:L.name},L.id))]})]}),M.giftProductId&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Gift Value (R)"}),r.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:M.giftValue||"",onChange:L=>se({...M,giftValue:parseFloat(L.target.value)||0})})]})]})]})}),te==="media"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 border border-pink-500/30 p-5 rounded-xl shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3 text-pink-400 font-bold text-lg",children:[r.jsx(Er,{size:20}),r.jsx("h3",{children:"AI Product Analyst"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("input",{type:"file",accept:"image/*",ref:B,className:"hidden",onChange:hr}),r.jsxs("button",{onClick:()=>{var L;return(L=B.current)==null?void 0:L.click()},disabled:A,className:"flex-1 py-3 bg-zinc-800 hover:bg-pink-600 text-white rounded-lg border border-gray-600 hover:border-pink-400 transition-all flex items-center justify-center gap-2 text-sm font-semibold disabled:opacity-50 shadow-lg",children:[A?r.jsx(ho,{className:"animate-spin",size:18}):r.jsx(Jj,{size:18}),A?"Analyzing Image...":"Upload & Analyze with AI"]})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Description"}),r.jsxs("button",{onClick:Qn,disabled:I,className:"text-xs text-cyan-400 flex items-center gap-1 hover:text-cyan-300",children:[r.jsx(Dx,{size:12})," ",I?"Writing...":"Generate from Text"]})]}),r.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-32 text-white text-sm",value:M.description,onChange:L=>se({...M,description:L.target.value})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"When & How to Wear"}),r.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-24 text-white text-sm",value:M.whenAndHowToWear,onChange:L=>se({...M,whenAndHowToWear:L.target.value}),placeholder:"Styling advice..."})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Images"}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-2",children:[M.images.filter(L=>L!=="").map((L,oe)=>r.jsxs("div",{className:"relative group aspect-square rounded-lg overflow-hidden border border-gray-800 bg-black",children:[r.jsx("img",{src:L,alt:"",className:"w-full h-full object-cover",onError:Ve=>{console.warn("Image failed to load in AdminProducts gallery:",Ve.currentTarget.src)}}),r.jsx("button",{onClick:()=>kt(oe),className:"absolute top-1 right-1 bg-black/60 hover:bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-all",children:r.jsx(yn,{size:12})})]},oe)),r.jsxs("div",{onClick:()=>{var L;return(L=ve.current)==null?void 0:L.click()},className:"aspect-square rounded-lg border border-dashed border-gray-700 bg-zinc-900/30 flex flex-col items-center justify-center text-gray-500 cursor-pointer hover:bg-zinc-800 hover:border-gray-500 transition-all",children:[r.jsx(Os,{size:24}),r.jsx("span",{className:"text-[10px] mt-1",children:"Add Image"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:ve,className:"hidden",onChange:En}),r.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:G,className:"hidden",onChange:En}),r.jsxs("button",{onClick:()=>{var L;return(L=ve.current)==null?void 0:L.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[r.jsx(eT,{size:16,className:"text-cyan-400"})," Upload"]}),r.jsxs("button",{onClick:()=>{var L;return(L=G.current)==null?void 0:L.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[r.jsx(qs,{size:16,className:"text-pink-500"})," Camera"]})]})]})]})]}),r.jsxs("div",{className:"p-4 border-t border-gray-800 bg-zinc-950 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Cancel"}),r.jsxs("button",{onClick:Ht,disabled:N,className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2 shadow transition-colors text-sm font-semibold disabled:opacity-50",children:[N?r.jsx(ho,{className:"animate-spin",size:18}):r.jsx(Nu,{size:18})," ",N?"Saving...":"Save Product"]})]})]}):r.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:r.jsxs("table",{className:"w-full text-left text-sm",children:[r.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4",children:"Product"}),r.jsx("th",{className:"p-4",children:"Type"}),r.jsx("th",{className:"p-4",children:"SKU"}),r.jsx("th",{className:"p-4",children:"Price"}),r.jsx("th",{className:"p-4",children:"Stock"}),r.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:ne.map(L=>r.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[r.jsxs("td",{className:"p-4 flex items-center gap-3",children:[r.jsx("img",{src:L.images[0]||"https://via.placeholder.com/40",className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:"",onError:oe=>{console.warn("Image failed to load in AdminProducts list:",oe.currentTarget.src)}}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-200 block",children:L.name}),r.jsx("span",{className:"text-xs text-gray-500",children:L.category})]})]}),r.jsx("td",{className:"p-4 text-gray-400",children:L.type}),r.jsx("td",{className:"p-4 text-gray-500 font-mono text-xs",children:L.code}),r.jsxs("td",{className:"p-4 font-medium text-green-400",children:["R",L.price.toFixed(2)]}),r.jsx("td",{className:"p-4 text-gray-300",children:L.stock}),r.jsx("td",{className:"p-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:()=>_e(L),className:"p-2 text-gray-400 hover:text-cyan-400",children:r.jsx(Ox,{size:16})}),r.jsx("button",{onClick:()=>Mn(L.id),className:"p-2 text-gray-400 hover:text-red-400",children:r.jsx(fo,{size:16})})]})})]},L.id))})]})})]})},dM=()=>{const{categories:n,addCategory:e,updateCategory:t,deleteCategory:s,replaceCategories:o}=It(),l=D.useRef({}),[c,d]=D.useState(null),m=(w,N)=>{const E=[...n],I=N==="up"?w-1:w+1;I>=0&&I<E.length&&([E[w],E[I]]=[E[I],E[w]],o(E))},f=async(w,N)=>{if(!N)return;if(gn)try{d(w);const I=Date.now(),T=Bs(gn,`categories/${w}/${I}_${N.name}`),A=await Mj(T,N),H=await Us(A.ref),W=n.find(K=>K.id===w);W&&t({...W,image:H}),d(null);return}catch(I){console.error("Firebase Storage Upload failed:",I)}const E=new FileReader;E.onloadend=()=>{const I=n.find(T=>T.id===w);I&&typeof E.result=="string"&&t({...I,image:E.result}),d(null)},E.readAsDataURL(N)},v=()=>{e({id:`cat_${Date.now()}`,name:"New Collection",image:"https://picsum.photos/400/400?grayscale",description:""})};return r.jsxs("div",{className:"space-y-6 max-w-4xl",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Category Management"}),r.jsxs("button",{onClick:v,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 transition-colors text-sm",children:[r.jsx(Os,{size:18})," Add Category"]})]}),r.jsxs("div",{className:"space-y-4",children:[n.map((w,N)=>r.jsxs("div",{className:"flex items-center gap-4 bg-zinc-900 p-4 rounded-xl border border-gray-800 shadow-sm animate-in fade-in",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("button",{onClick:()=>m(N,"up"),disabled:N===0,className:`p-1 rounded hover:bg-gray-800 ${N===0?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:r.jsx(Wj,{size:18})}),r.jsx("button",{onClick:()=>m(N,"down"),disabled:N===n.length-1,className:`p-1 rounded hover:bg-gray-800 ${N===n.length-1?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:r.jsx(Gj,{size:18})})]}),r.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Collection Name"}),r.jsx("input",{type:"text",value:w.name,onChange:E=>t({...w,name:E.target.value}),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm focus:border-cyan-400 focus:outline-none"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative w-12 h-12",children:[r.jsx("img",{src:w.image,alt:w.name,className:`w-12 h-12 rounded object-cover bg-zinc-800 border border-gray-700 ${c===w.id?"opacity-50":""}`}),c===w.id&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx(ho,{size:16,className:"animate-spin text-pink-500"})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Cover Image"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{var E;return(E=l.current[w.id])==null?void 0:E.click()},disabled:c===w.id,className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-gray-200 text-xs rounded border border-gray-600 transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:c===w.id?"Uploading...":"Change Image"}),r.jsx("input",{type:"file",ref:E=>{l.current[w.id]=E},className:"hidden",accept:"image/*",onChange:E=>E.target.files&&f(w.id,E.target.files[0])})]})]})]})]}),r.jsx("div",{className:"ml-2",children:r.jsx("button",{onClick:()=>{window.confirm("Delete this category?")&&s(w.id)},className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-900/20 rounded-full transition-all",children:r.jsx(yn,{size:20})})})]},w.id)),n.length===0&&r.jsx("div",{className:"text-center py-12 text-gray-500",children:'No categories found. Click "Add Category" to start.'})]})]})},hM=()=>{const{vouchers:n,addVoucher:e,deleteVoucher:t,cart:s}=It(),[o,l]=D.useState(250),[c,d]=D.useState(""),[m,f]=D.useState(""),[v,w]=D.useState(""),[N,E]=D.useState(""),[I,T]=D.useState(null),[A,H]=D.useState(!1),W=s.filter(J=>J.code==="GV-DIGITAL"),K=()=>{const J="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let O="";for(let P=0;P<12;P++)P>0&&P%4===0&&(O+="-"),O+=J.charAt(Math.floor(Math.random()*J.length));E(O)},te=async()=>{if(!o||!N)return;H(!0);const J={code:N,discountType:"fixed",value:o,minSpend:o,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};if(e(J),m&&Ee)try{const O=xs(Ee,"users"),P=Fs(O,la("email","==",m)),z=await ca(P);if(z.empty)alert(`Voucher created, but user with email ${m} was not found. Please send the code manually.`);else{const F=z.docs[0],k={id:`gift_recv_${Date.now()}`,type:"gift_received",title:"You received a Gift Voucher!",message:`Spoil Me Vintage sent you a voucher worth R${o}.`,date:new Date().toISOString(),isRead:!1,voucherData:{code:N,amount:o,meta:{recipientName:c||F.data().name||"Valued Customer",senderName:"Spoil Me Vintage Team",message:v||"Enjoy a little something special from us!",deliveryMethod:"recipient"}}};await an(F.ref,{notifications:Ff(k)}),alert(`Voucher created AND sent to ${m}!`)}}catch(O){console.error("Error sending voucher:",O),alert("Voucher created, but failed to send to user due to an error.")}else m&&!Ee&&alert("Voucher created, but cannot send to user (Database not connected / Demo Mode).");E(""),d(""),f(""),w(""),H(!1)},pe=J=>{navigator.clipboard.writeText(J),T(J),setTimeout(()=>T(null),2e3)};return r.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Gift Card Management"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Generate valid codes and manage active vouchers."})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[W.length>0&&r.jsxs("div",{className:"bg-pink-900/10 border border-pink-500/30 p-4 rounded-xl mb-6",children:[r.jsxs("h3",{className:"text-pink-400 font-bold flex items-center gap-2 mb-3",children:[r.jsx(Ii,{size:18})," Pending Requests (",W.length,")"]}),r.jsx("div",{className:"space-y-2",children:W.map((J,O)=>r.jsxs("div",{className:"bg-zinc-900 p-3 rounded-lg border border-pink-500/20 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-white text-sm font-medium",children:J.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Value: R",J.price]})]}),r.jsx("button",{onClick:()=>{l(J.price),d("Customer"),K()},className:"px-3 py-1.5 bg-pink-600 text-white text-xs rounded hover:bg-pink-500",children:"Process"})]},O))})]}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl shadow-sm",children:[r.jsxs("h2",{className:"font-bold text-white mb-6 flex items-center gap-2",children:[r.jsx(Os,{size:20,className:"text-cyan-400"})," Issue New Voucher"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Voucher Value (R)"}),r.jsx("input",{type:"number",value:o,onChange:J=>l(parseFloat(J.target.value)),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white font-bold focus:border-cyan-400 outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Recipient Name"}),r.jsx("input",{type:"text",value:c,onChange:J=>d(J.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white focus:border-cyan-400 outline-none",placeholder:"e.g. Sarah"})]})]}),r.jsxs("div",{className:"bg-black/30 border border-gray-700 rounded-xl p-4 mb-6",children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[r.jsx(Uu,{size:14})," Send Directly to User (Optional)"]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"User Email Address"}),r.jsx("input",{type:"email",value:m,onChange:J=>f(J.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"user@example.com (Must be registered)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Custom Message"}),r.jsx("textarea",{rows:2,value:v,onChange:J=>w(J.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Enjoy your gift!"})]})]})]}),r.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 mb-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex-1 w-full",children:[r.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Unique Voucher Code"}),r.jsx("div",{className:"font-mono text-2xl text-cyan-400 tracking-widest break-all",children:N||"XXXX-XXXX-XXXX"})]}),r.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors whitespace-nowrap",children:[r.jsx(Dl,{size:16})," Generate Number"]})]}),r.jsx("button",{onClick:te,disabled:!N||A,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center justify-center gap-2",children:A?"Processing...":m?"Create & Send to User":"Activate Voucher Only"})]}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[r.jsx("h2",{className:"font-bold text-white mb-4",children:"Active Vouchers"}),n.length===0?r.jsx("p",{className:"text-gray-500 text-sm",children:"No active vouchers."}):r.jsx("div",{className:"space-y-3",children:n.map((J,O)=>r.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-gray-600 transition-colors",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-cyan-400 font-bold",children:J.code}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Value: R",J.value,"  Expires: ",new Date(J.expiresAt).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>pe(J.code),className:"p-2 text-gray-500 hover:text-white",children:I===J.code?r.jsx(dt,{size:16,className:"text-green-400"}):r.jsx(Jp,{size:16})}),r.jsx("button",{onClick:()=>t(J.code),className:"p-2 text-gray-500 hover:text-red-400",children:r.jsx(fo,{size:16})})]})]},O))})]})]}),r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"sticky top-6",children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[r.jsx(Il,{size:16})," Card Preview"]}),r.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),r.jsxs("div",{className:"relative h-full p-6 flex flex-col justify-between z-10",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("div",{className:"font-cherry text-xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400",children:"Spoil Me Vintage"}),r.jsxs("div",{className:"text-3xl font-bold text-white font-architects",children:["R",o]})]}),r.jsxs("div",{className:"text-center my-auto",children:[r.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-[0.3em] mb-2",children:"VOUCHER CODE"}),r.jsx("div",{className:"bg-white/5 border border-white/10 rounded px-4 py-2 inline-block backdrop-blur-sm",children:r.jsx("span",{className:"font-mono text-xl md:text-2xl font-bold text-cyan-400 tracking-wider",children:N||"--"})})]}),r.jsxs("div",{className:"flex justify-between items-end text-[10px] text-gray-500 uppercase tracking-wider",children:[r.jsxs("div",{children:["To: ",c||"Valued Customer",r.jsx("div",{className:"font-handwriting text-lg text-gray-300 normal-case mt-1",children:"Admin Team"})]}),r.jsxs("div",{className:"text-right",children:["Valid for 3 Years",r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date().toLocaleDateString()})]})]})]})]}),r.jsxs("div",{className:"mt-6 bg-zinc-900/50 p-4 rounded-xl border border-gray-800 text-sm text-gray-400",children:[r.jsx("p",{className:"mb-2 font-bold text-white",children:"Sending Instructions:"}),r.jsxs("ul",{className:"list-disc pl-4 space-y-2 text-xs",children:[r.jsx("li",{children:"Set the Value and generate a unique code."}),r.jsxs("li",{children:[r.jsx("strong",{children:"Option A (Manual):"}),' Click "Activate Voucher Only", then send the code via WhatsApp/Email manually.']}),r.jsxs("li",{children:[r.jsx("strong",{children:"Option B (Direct):"}),` Enter the user's Registered Email. The voucher will appear in their App Profile under "My Gifts".`]})]})]})]})})]})]})},fM=[{id:"fb",name:"Facebook",icon:"facebook",isConnected:!1,accountName:"",urlTemplate:"https://www.facebook.com/sharer/sharer.php?u={url}&quote={text}"},{id:"ig",name:"Instagram",icon:"instagram",isConnected:!1,accountName:"",urlTemplate:""},{id:"tk",name:"TikTok",icon:"video",isConnected:!1,accountName:"",urlTemplate:""},{id:"x",name:"X (Twitter)",icon:"twitter",isConnected:!1,accountName:"",urlTemplate:"https://twitter.com/intent/tweet?text={text}&url={url}"}],pM={fb:["Log in to your Facebook Brand Page in your browser or app.","Enter your Page Name below for the AI context.","When you click 'Post Now', we will open the Facebook Sharer tool.","Paste the caption we generate for you."],ig:["Ensure the Instagram App is installed on this device.","Enter your Instagram Handle (@name) below.","When you click 'Post Now', we will copy the caption to your clipboard.","We will then open Instagram. Create a new post and select the downloaded photo.","Long press in the caption box and select 'Paste'."],tk:["Ensure the TikTok App is installed.","Enter your Handle below.","We will copy the text and hashtags to your clipboard.","When TikTok opens, upload the video/photo and paste the caption."],x:["Log in to X (Twitter).","Enter your handle below.","We will automatically open a 'Compose Tweet' window with your text and link pre-filled."]},mM=()=>{var F;const{products:n}=It(),[e,t]=D.useState(fM),[s,o]=D.useState(!1),[l,c]=D.useState(null),[d,m]=D.useState(""),[f,v]=D.useState(null),[w,N]=D.useState({}),[E,I]=D.useState(null),[T,A]=D.useState(!1),[H,W]=D.useState([]),[K,te]=D.useState({posts:0,errors:0});D.useEffect(()=>{const k=localStorage.getItem("spv_social_config");k&&t(JSON.parse(k))},[]),D.useEffect(()=>{let k;return T&&(k=setInterval(()=>{if(n.length===0)return;const j=n[Math.floor(Math.random()*n.length)],V=e.filter(Se=>Se.isConnected),me=V.length>0?V[Math.floor(Math.random()*V.length)]:e[Math.floor(Math.random()*e.length)],Le=new Date().toLocaleTimeString();W(Se=>[{time:Le,msg:`AI Worker: Analyzing "${j.name}" trends & hashtags...`,type:"process"},...Se].slice(0,6)),setTimeout(()=>{const Se=new Date().toLocaleTimeString();W(Te=>[{time:Se,msg:`Server: Successfully scheduled post to ${me.name} (Simulated)`,type:"success"},...Te].slice(0,6)),te(Te=>({...Te,posts:Te.posts+1}))},2e3)},5e3)),()=>clearInterval(k)},[T,n,e]);const pe=k=>{c(k),m(k.accountName||"")},J=()=>{if(!l)return;const k=e.map(j=>j.id===l.id?{...j,isConnected:!0,accountName:d}:j);t(k),localStorage.setItem("spv_social_config",JSON.stringify(k)),c(null)},O=k=>{const j=e.map(V=>V.id===k?{...V,isConnected:!1,accountName:""}:V);t(j),localStorage.setItem("spv_social_config",JSON.stringify(j))},P=async()=>{if(n.length===0)return;o(!0);const k=n[Math.floor(Math.random()*n.length)];v(k);const j={},V=e.filter(me=>me.isConnected);if(V.length===0){alert("Please connect at least one platform first."),o(!1);return}for(const me of V){const Le=me.accountName?`(Account: @${me.accountName})`:"";j[me.id]=await aM(k.name,`${me.name} ${Le}`,k.price)}N(j),o(!1)},z=k=>{const j=w[k.id];if(!j||!f)return;const V=`${window.location.origin}/#/product/${f.id}`;if(navigator.clipboard.writeText(`${j} ${V}`).then(()=>{I(k.id),setTimeout(()=>I(null),2e3)}),k.id==="fb"||k.id==="x"){const me=k.urlTemplate.replace("{url}",encodeURIComponent(V)).replace("{text}",encodeURIComponent(j));window.open(me,"_blank","width=600,height=400")}else alert("Caption copied! Opening platform..."),k.id==="ig"&&window.open("https://instagram.com","_blank"),k.id==="tk"&&window.open("https://tiktok.com","_blank")};return r.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[l&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>c(null)}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[r.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.id==="fb"&&r.jsx(yl,{size:24,className:"text-blue-500"}),l.id==="ig"&&r.jsx(df,{size:24,className:"text-pink-500"}),l.id==="x"&&r.jsx(Su,{size:24,className:"text-white"}),l.id==="tk"&&r.jsx(qs,{size:24,className:"text-cyan-400"}),"Connect ",l.name]}),r.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:r.jsx(yn,{size:20})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 uppercase mb-1",children:"Account Handle / Name"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"@"}),r.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 pl-8 text-white focus:border-pink-500 outline-none",value:d,onChange:k=>m(k.target.value),placeholder:"spoilmevintage"})]})]}),r.jsxs("div",{className:"bg-black/30 p-4 rounded-lg border border-gray-800",children:[r.jsxs("h4",{className:"text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[r.jsx(Qp,{size:14})," How to connect:"]}),r.jsx("ul",{className:"space-y-2",children:(F=pM[l.id])==null?void 0:F.map((k,j)=>r.jsxs("li",{className:"text-xs text-gray-400 flex gap-2",children:[r.jsx("span",{className:"bg-gray-800 w-4 h-4 rounded-full flex items-center justify-center text-[10px] shrink-0 mt-0.5",children:j+1}),k]},j))})]}),r.jsxs("button",{onClick:J,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl flex items-center justify-center gap-2 transition-colors",children:[r.jsx(Nu,{size:18})," Save & Connect"]})]})]})]}),r.jsx("div",{className:"flex justify-between items-start",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Social Media Studio"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Manage accounts and automate daily content sharing."})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:e.map(k=>r.jsxs("div",{className:`p-4 rounded-xl border transition-all relative group ${k.isConnected?"bg-zinc-900 border-green-500/50 shadow-[0_0_10px_rgba(34,197,94,0.1)]":"bg-black border-gray-800 opacity-75"}`,children:[r.jsx("button",{onClick:()=>pe(k),className:"absolute top-2 right-2 p-2 text-gray-500 hover:text-white hover:bg-gray-800 rounded-full transition-colors",children:r.jsx(dT,{size:16})}),r.jsxs("div",{className:"flex flex-col items-center text-center pt-4 pb-2 cursor-pointer",onClick:()=>pe(k),children:[r.jsxs("div",{className:`p-3 rounded-full mb-3 transition-colors ${k.isConnected?"bg-white text-black":"bg-gray-800 text-gray-500"}`,children:[k.id==="fb"&&r.jsx(yl,{size:24}),k.id==="ig"&&r.jsx(df,{size:24}),k.id==="x"&&r.jsx(Su,{size:24}),k.id==="tk"&&r.jsx(qs,{size:24})]}),r.jsx("h3",{className:"font-bold text-white text-sm",children:k.name}),k.isConnected?r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),r.jsxs("p",{className:"text-xs text-green-400 font-medium",children:["@",k.accountName]})]}):r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Not Connected"})]}),k.isConnected&&r.jsx("button",{onClick:j=>{j.stopPropagation(),O(k.id)},className:"w-full mt-3 py-1 text-[10px] text-red-400 hover:text-red-300 border border-red-900/30 hover:bg-red-900/20 rounded",children:"Disconnect"}),!k.isConnected&&r.jsx("button",{onClick:()=>pe(k),className:"w-full mt-3 py-1 text-[10px] text-cyan-400 hover:text-cyan-300 border border-cyan-900/30 hover:bg-cyan-900/20 rounded",children:"Configure"})]},k.id))}),r.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-500/30 rounded-2xl p-6 md:p-8 shadow-xl relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:r.jsx(_T,{size:120,className:"text-purple-500"})}),r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 relative z-10",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:`p-2 rounded-lg ${T?"bg-green-500/20 text-green-400":"bg-gray-800 text-gray-500"}`,children:r.jsx(uT,{size:24})}),r.jsx("h2",{className:"text-xl font-bold text-white",children:"Background Auto-Pilot (Demo)"})]}),r.jsx("p",{className:"text-sm text-gray-400 max-w-lg",children:"Enable this to simulate the server-side process that automatically picks products, writes captions, and schedules them to your connected accounts while you sleep."}),T&&r.jsxs("div",{className:"flex items-center gap-2 mt-4 text-xs text-green-400 font-mono bg-green-900/20 border border-green-500/30 px-3 py-1.5 rounded-lg w-fit animate-pulse",children:[r.jsx(ww,{size:14})," Service Running..."]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-right hidden md:block",children:[r.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:K.posts}),r.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Posts Queued"})]}),r.jsxs("button",{onClick:()=>A(!T),className:`px-6 py-4 rounded-xl font-bold flex items-center gap-2 transition-all shadow-lg ${T?"bg-red-600 hover:bg-red-500 text-white shadow-red-900/20":"bg-purple-600 hover:bg-purple-500 text-white shadow-purple-900/20"}`,children:[T?r.jsx(aT,{size:20,fill:"currentColor"}):r.jsx(cT,{size:20,fill:"currentColor"}),T?"Stop Simulation":"Start Auto-Pilot"]})]})]}),r.jsxs("div",{className:"mt-8 bg-black rounded-xl border border-gray-800 font-mono text-xs p-4 h-48 overflow-y-auto shadow-inner relative",children:[r.jsxs("div",{className:"absolute top-2 right-2 text-gray-700 flex items-center gap-1 pointer-events-none",children:[r.jsx(yT,{size:14})," Console"]}),H.length===0?r.jsx("div",{className:"h-full flex items-center justify-center text-gray-600 italic",children:"System Idle. Press Start to begin simulation."}):r.jsx("div",{className:"space-y-2",children:H.map((k,j)=>r.jsxs("div",{className:"flex gap-3 animate-in slide-in-from-left-2 fade-in duration-300",children:[r.jsxs("span",{className:"text-gray-600 shrink-0",children:["[",k.time,"]"]}),r.jsxs("span",{className:`break-all ${k.type==="success"?"text-green-400":k.type==="process"?"text-yellow-400":"text-gray-300"}`,children:[k.type==="success"&&r.jsx(dt,{size:12,className:"inline mr-1"}),k.type==="process"&&r.jsx(ho,{size:12,className:"inline mr-1 animate-spin"}),k.msg]})]},j))})]})]}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 md:p-8 shadow-xl",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 mb-8",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(Er,{className:"text-pink-500"})," Manual Content Generator"]}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"One click to pick a product and write tailored captions for all your active platforms."})]}),r.jsxs("button",{onClick:P,disabled:s,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg flex items-center gap-2 disabled:opacity-50 transition-all",children:[s?r.jsx(ho,{className:"animate-spin"}):r.jsx(Dl,{}),s?"Creating Strategy...":"Generate Today's Posts"]})]}),f&&r.jsxs("div",{className:"animate-in slide-in-from-bottom-4 fade-in",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6 bg-black p-4 rounded-xl border border-gray-800",children:[r.jsx("img",{src:f.images[0],alt:"",className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-pink-500 uppercase font-bold",children:"Today's Pick"}),r.jsx("h3",{className:"text-white font-bold",children:f.name}),r.jsxs("p",{className:"text-gray-400 text-xs",children:["R",f.price]})]}),r.jsx("div",{className:"ml-auto hidden md:block",children:r.jsxs("a",{href:f.images[0],download:!0,target:"_blank",rel:"noreferrer",className:"text-xs text-cyan-400 flex items-center gap-1 hover:underline",children:[r.jsx(tT,{size:14})," Download High-Res"]})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.filter(k=>k.isConnected).map(k=>r.jsxs("div",{className:"bg-black border border-gray-800 p-4 rounded-xl space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800 pb-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-300",children:[k.id==="fb"&&r.jsx(yl,{size:16,className:"text-blue-500"}),k.id==="ig"&&r.jsx(df,{size:16,className:"text-pink-500"}),k.id==="x"&&r.jsx(Su,{size:16,className:"text-white"}),k.id==="tk"&&r.jsx(qs,{size:16,className:"text-cyan-400"}),k.name," Draft"]}),r.jsxs("button",{onClick:()=>z(k),className:"text-xs bg-zinc-800 hover:bg-pink-600 text-white px-3 py-1.5 rounded-full transition-colors flex items-center gap-1",children:[E===k.id?r.jsx(dt,{size:12}):r.jsx(bo,{size:12}),E===k.id?"Copied!":"Post Now"]})]}),r.jsx("textarea",{className:"w-full h-32 bg-transparent text-sm text-gray-300 resize-none focus:outline-none",value:w[k.id]||"Generating...",readOnly:!0})]},k.id))})]}),!f&&!s&&r.jsx("div",{className:"text-center py-12 border border-dashed border-gray-800 rounded-xl",children:r.jsx("p",{className:"text-gray-500",children:'Click "Generate" to start your daily social media workflow.'})})]}),r.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-xl p-6",children:[r.jsxs("h3",{className:"text-blue-400 font-bold flex items-center gap-2 mb-3",children:[r.jsx(Kp,{size:20})," System Capabilities Explained"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-gray-300",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white mb-2",children:"What this system CAN do:"}),r.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[r.jsx("li",{children:"Use AI to generate unique, platform-specific captions for your products instantly."}),r.jsx("li",{children:"Organize your daily posting workflow into a single dashboard."}),r.jsx("li",{children:'Use "Web Intents" to open your social apps with text pre-filled (semi-automated).'}),r.jsxs("li",{children:[r.jsx("strong",{children:"Demo Simulation:"})," As seen above, we can simulate how a server-side bot would process your queue."]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white mb-2",children:"What requires Server Upgrades:"}),r.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Fully Automated Background Posting:"}),' To enable the "Auto-Pilot" feature for real (posting while you sleep), a dedicated backend server (e.g., Firebase Cloud Functions) is required to run timers (Cron jobs).']}),r.jsxs("li",{children:[r.jsx("strong",{children:"Direct API Integration:"})," Posting directly without opening the app requires expensive API approvals and secure server-side token storage which cannot run safely in a browser-only admin panel."]})]})]})]})]})]})},gM=()=>{var Te,B,ve;const{getAllUsers:n,approveAffiliate:e,rejectAffiliate:t,updateAffiliateTier:s,assignAffiliateParent:o}=It(),[l,c]=D.useState([]),[d,m]=D.useState(!0),[f,v]=D.useState("applicants"),[w,N]=D.useState(null),[E,I]=D.useState(10),[T,A]=D.useState(""),[H,W]=D.useState(null),[K,te]=D.useState("");D.useEffect(()=>{pe()},[]);const pe=async()=>{m(!0);const G=await n();c(G),m(!1)},J=l.filter(G=>{var $;return(($=G.affiliateStats)==null?void 0:$.status)==="pending"}),O=l.filter(G=>{var $;return(($=G.affiliateStats)==null?void 0:$.status)==="approved"}),P=(G,$)=>{W({userId:G.id,name:G.name,action:$}),te("")},z=async()=>{H&&(H.action==="approve"?await e(H.userId,K):await t(H.userId,K),W(null),te(""),pe())},F=G=>{var $;N(G),I((($=G.affiliateStats)==null?void 0:$.commissionRate)||10),A("")},k=async()=>{if(!w)return;await s(w.id,E);const G={...w,affiliateStats:{...w.affiliateStats,commissionRate:E}};N(G),c($=>$.map(M=>M.id===w.id?G:M)),alert("Commission Tier Updated!")},j=async()=>{if(!w||!T)return;await o(T,w.id),alert("Recruit Added! This affiliate will now earn 1% commission from their sales.");const G=await n();c(G);const $=G.find(M=>M.id===w.id);$&&N($),A("")},V=w?l.filter(G=>{var $;return(($=G.affiliateStats)==null?void 0:$.parentId)===w.id}):[],me=(Te=w==null?void 0:w.affiliateStats)!=null&&Te.parentId?l.find(G=>{var $;return G.id===(($=w.affiliateStats)==null?void 0:$.parentId)}):null,Se=V.reduce((G,$)=>{var M;return G+(((M=$.affiliateStats)==null?void 0:M.totalSalesValue)||0)},0)*.01;return r.jsxs("div",{className:"space-y-8 relative",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Affiliate Management"}),r.jsxs("button",{onClick:pe,className:"text-xs text-gray-400 hover:text-white flex items-center gap-1",children:[r.jsx(md,{size:14})," Refresh Data"]})]}),r.jsxs("div",{className:"flex gap-4 border-b border-gray-800 pb-1",children:[r.jsxs("button",{onClick:()=>v("applicants"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors ${f==="applicants"?"border-pink-500 text-pink-500":"border-transparent text-gray-400 hover:text-white"}`,children:["Applicants (",J.length,")"]}),r.jsxs("button",{onClick:()=>v("active"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors ${f==="active"?"border-cyan-500 text-cyan-500":"border-transparent text-gray-400 hover:text-white"}`,children:["Active Partners (",O.length,")"]})]}),d?r.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading data..."}):r.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden min-h-[400px]",children:[f==="applicants"&&r.jsx("div",{className:"divide-y divide-gray-800",children:J.length===0?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No pending applications."}):J.map(G=>{var $,M;return r.jsxs("div",{className:"p-6 flex flex-col md:flex-row md:items-center justify-between hover:bg-black/20 gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-bold",children:G.name}),r.jsx("p",{className:"text-sm text-gray-400",children:G.email}),r.jsxs("div",{className:"mt-3 p-3 bg-black/50 border border-gray-700 rounded-lg max-w-xl",children:[r.jsxs("p",{className:"text-xs text-gray-300 italic",children:['"',($=G.affiliateStats)==null?void 0:$.joinReason,'"']}),((M=G.affiliateStats)==null?void 0:M.gender)&&r.jsxs("span",{className:"text-[10px] text-gray-500 mt-1 block",children:["Gender: ",G.affiliateStats.gender]})]})]}),r.jsxs("div",{className:"flex gap-2 shrink-0",children:[r.jsxs("button",{onClick:()=>P(G,"approve"),className:"px-4 py-2 bg-green-900/30 text-green-400 rounded hover:bg-green-900/50 border border-green-500/30 flex items-center gap-2 text-sm font-bold",children:[r.jsx(dt,{size:16})," Approve"]}),r.jsxs("button",{onClick:()=>P(G,"reject"),className:"px-4 py-2 bg-red-900/30 text-red-400 rounded hover:bg-red-900/50 border border-red-500/30 flex items-center gap-2 text-sm font-bold",children:[r.jsx(yn,{size:16})," Reject"]})]})]},G.id)})}),f==="active"&&r.jsx("div",{className:"divide-y divide-gray-800",children:O.length===0?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No active affiliates yet."}):O.map(G=>{var $,M;return r.jsxs("div",{onClick:()=>F(G),className:"p-6 flex items-center justify-between hover:bg-zinc-800 cursor-pointer transition-colors group",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-800 flex items-center justify-center text-cyan-400 font-bold border border-gray-700",children:G.name.charAt(0)}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 group-hover:text-cyan-400 transition-colors",children:[G.name," ",r.jsx(zr,{size:16,className:"opacity-0 group-hover:opacity-100 transition-opacity"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:G.affiliateCode})]})]}),r.jsxs("div",{className:"text-right flex items-center gap-8",children:[r.jsxs("div",{className:"hidden sm:block",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Recruits"}),r.jsx("p",{className:"text-white font-bold text-center",children:l.filter(se=>{var de;return((de=se.affiliateStats)==null?void 0:de.parentId)===G.id}).length})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Sales"}),r.jsxs("p",{className:"text-white font-bold",children:["R",($=G.affiliateStats)==null?void 0:$.totalSalesValue.toFixed(0)]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Rate"}),r.jsxs("p",{className:"text-pink-400 font-bold",children:[(M=G.affiliateStats)==null?void 0:M.commissionRate,"%"]})]})]})]},G.id)})})]}),H&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>W(null)}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-6 max-w-sm w-full relative z-10 shadow-2xl",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-2 capitalize",children:[H.action," Application"]}),r.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["For ",H.name]}),r.jsx("textarea",{className:"w-full bg-black border border-gray-700 rounded p-3 text-white text-sm mb-4",placeholder:"Add a note (optional)...",rows:3,value:K,onChange:G=>te(G.target.value)}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>W(null),className:"flex-1 py-2 bg-zinc-800 text-gray-300 rounded hover:bg-zinc-700",children:"Cancel"}),r.jsx("button",{onClick:z,className:`flex-1 py-2 text-white font-bold rounded ${H.action==="approve"?"bg-green-600 hover:bg-green-500":"bg-red-600 hover:bg-red-500"}`,children:"Confirm"})]})]})]}),w&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>N(null)}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-4xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg border-2 border-white/10",children:w.name.charAt(0)}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:w.name}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-gray-400",children:w.email}),r.jsx("span",{className:"text-gray-600",children:""}),r.jsx("span",{className:"font-mono text-cyan-400 bg-cyan-900/20 px-2 py-0.5 rounded text-xs border border-cyan-500/30",children:w.affiliateCode})]})]})]}),r.jsx("button",{onClick:()=>N(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white transition-colors",children:r.jsx(yn,{size:20})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[r.jsx(_s,{size:16,className:"text-green-500"}),r.jsx("span",{className:"text-xs uppercase",children:"Direct Sales"})]}),r.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",(B=w.affiliateStats)==null?void 0:B.totalSalesValue.toFixed(2)]})]}),r.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[r.jsx(Zp,{size:16,className:"text-purple-500"}),r.jsx("span",{className:"text-xs uppercase",children:"Total Earned"})]}),r.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["R",(ve=w.affiliateStats)==null?void 0:ve.balance.toFixed(2)]})]}),r.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[r.jsx(Ys,{size:16,className:"text-cyan-500"}),r.jsx("span",{className:"text-xs uppercase",children:"Network"})]}),r.jsxs("p",{className:"text-2xl font-bold text-white",children:[V.length," ",r.jsx("span",{className:"text-sm font-normal text-gray-500",children:"Recruits"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(fT,{size:18,className:"text-yellow-400"})," Commission Settings"]}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Direct Commission Tier (%)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx("input",{type:"number",value:E,onChange:G=>I(parseFloat(G.target.value)),className:"w-full bg-black border border-gray-600 rounded-lg p-3 text-white text-sm font-bold focus:border-pink-500 outline-none"}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),r.jsx("button",{onClick:k,className:"bg-pink-600 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 shadow-lg",children:"Update"})]}),r.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:["Standard Tiers: ",r.jsx("span",{className:"text-gray-300",children:"10%, 11%, 15%, 20%"}),". This setting overrides automatic tier progression."]})]})})]}),me&&r.jsxs("div",{className:"bg-blue-900/10 p-4 rounded-xl border border-blue-500/30 flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-500/20 rounded-full text-blue-400",children:r.jsx(Qp,{size:20})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-blue-300 uppercase font-bold mb-1",children:"Recruited By (Upline)"}),r.jsx("p",{className:"text-white font-bold text-sm",children:me.name}),r.jsx("p",{className:"text-[10px] text-gray-400",children:me.affiliateCode})]})]})]}),r.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700 h-full flex flex-col",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(Tw,{size:18,className:"text-cyan-400"})," Network & Downline"]}),r.jsxs("div",{className:"mb-4 p-4 bg-black/40 rounded-xl border border-gray-700",children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Add Recruit to Downline"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{className:"flex-1 bg-zinc-900 border border-gray-600 rounded-lg p-2 text-xs text-white focus:border-cyan-500 outline-none",value:T,onChange:G=>A(G.target.value),children:[r.jsx("option",{value:"",children:"Select User to Link..."}),l.filter(G=>{var $,M;return G.id!==w.id&&(($=G.affiliateStats)==null?void 0:$.parentId)!==w.id&&((M=G.affiliateStats)==null?void 0:M.status)==="approved"}).sort((G,$)=>G.name.localeCompare($.name)).map(G=>r.jsxs("option",{value:G.id,children:[G.name," (",G.affiliateCode,")"]},G.id))]}),r.jsxs("button",{onClick:j,disabled:!T,className:"bg-cyan-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center gap-1",children:[r.jsx(Os,{size:14})," Add"]})]}),r.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:[w.name," will earn ",r.jsx("strong",{children:"1%"})," from sales made by users added here."]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 max-h-[300px] custom-scrollbar",children:V.length===0?r.jsx("div",{className:"text-center py-8 border border-dashed border-gray-800 rounded-xl",children:r.jsx("p",{className:"text-gray-500 text-xs",children:"No recruits in downline yet."})}):V.map(G=>{var $,M;return r.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-zinc-900 rounded-full flex items-center justify-center text-xs font-bold text-gray-400 border border-gray-700",children:G.name.charAt(0)}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-white font-bold",children:G.name}),r.jsx("p",{className:"text-[10px] text-gray-500",children:G.affiliateCode})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-[10px] text-gray-500",children:["Sales: R",($=G.affiliateStats)==null?void 0:$.totalSalesValue.toFixed(0)]}),r.jsxs("p",{className:"text-xs text-green-400 font-bold",children:["+R",(((M=G.affiliateStats)==null?void 0:M.totalSalesValue)||0*.01).toFixed(2)]})]})]},G.id)})}),V.length>0&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold",children:"Passive Income Generated"}),r.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",Se.toFixed(2)]})]})]})]})]})]})]})]})},xM=()=>{const[n,e]=D.useState(null),[t,s]=D.useState(!1),[o,l]=D.useState(!1);D.useEffect(()=>{const d=window.navigator.userAgent.toLowerCase(),m=/iphone|ipad|ipod/.test(d);if(l(m),window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)return;const v=N=>{N.preventDefault(),e(N),setTimeout(()=>s(!0),3e3)},w=()=>{s(!0)};return window.addEventListener("beforeinstallprompt",v),window.addEventListener("open-install-prompt",w),m&&setTimeout(()=>s(!0),5e3),()=>{window.removeEventListener("beforeinstallprompt",v),window.removeEventListener("open-install-prompt",w)}},[]);const c=async()=>{if(!n)return;n.prompt();const{outcome:d}=await n.userChoice;d==="accepted"&&(e(null),s(!1))};return t?r.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>s(!1)}),r.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-6 shadow-[0_0_50px_rgba(236,72,153,0.4)] relative max-w-sm w-full animate-in zoom-in-95 duration-300 text-center",children:[r.jsx("button",{onClick:()=>s(!1),className:"absolute top-3 right-3 p-2 text-gray-400 hover:text-white rounded-full hover:bg-white/10 transition-colors",children:r.jsx(yn,{size:20})}),r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-pink-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-xl mx-auto mb-6 rotate-3 border-2 border-white/10",children:r.jsx("span",{className:"font-cherry text-white text-3xl drop-shadow-md",children:"SV"})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Install App"}),r.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-6",children:"Get the best experience! Install Spoil Me Vintage for faster access, exclusive notifications, and offline browsing."}),o?r.jsxs("div",{className:"text-xs text-left text-gray-400 bg-black/40 p-4 rounded-xl border border-gray-700",children:[r.jsxs("p",{className:"mb-3 font-bold text-white flex items-center gap-2",children:[r.jsx(qs,{size:14})," iOS Installation:"]}),r.jsxs("ol",{className:"list-decimal pl-4 space-y-2",children:[r.jsxs("li",{children:["Tap the ",r.jsx("strong",{className:"text-cyan-400",children:"Share"})," button ",r.jsx(hT,{size:12,className:"inline align-middle"})," in your browser bar."]}),r.jsxs("li",{children:["Scroll down and select ",r.jsx("strong",{className:"text-white",children:"Add to Home Screen"}),"."]})]})]}):r.jsxs("button",{onClick:c,className:"w-full py-3.5 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl transition-all flex items-center justify-center gap-2 text-sm shadow-lg hover:shadow-pink-500/25 hover:scale-[1.02]",children:[r.jsx(Cw,{size:18})," Install Now"]})]})]}):null},yM=()=>{const{weeklyWinners:n}=It(),[e,t]=D.useState(new Date),[s,o]=D.useState("");return D.useEffect(()=>{const l=()=>{const d=new Date,m=new Date(d);m.setUTCDate(d.getUTCDate()+(7-d.getUTCDay())),m.setUTCHours(8,0,0,0),m<d&&m.setUTCDate(m.getUTCDate()+7),t(m)};l();const c=setInterval(l,6e4);return()=>clearInterval(c)},[]),D.useEffect(()=>{const l=setInterval(()=>{const c=new Date,d=e.getTime()-c.getTime();if(d>0){const m=Math.floor(d/864e5),f=Math.floor(d/(1e3*60*60)%24),v=Math.floor(d/1e3/60%60);o(`${m}d ${f}h ${v}m`)}else o("Drawing new winners...")},1e3);return()=>clearInterval(l)},[e]),r.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-12",children:[r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:"inline-block bg-gradient-to-br from-yellow-500 to-orange-500 p-5 rounded-full shadow-[0_0_30px_rgba(250,204,21,0.5)]",children:r.jsx(es,{size:48,className:"text-white"})}),r.jsx("h1",{className:"font-cherry text-5xl text-white",children:"This Week's Winners!"}),r.jsx("p",{className:"text-gray-300 text-lg",children:"Congratulations to the lucky members of our R19 Spoil Me Package!"})]}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[r.jsxs("div",{className:"text-center md:text-left",children:[r.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:[r.jsx(Js,{size:20,className:"text-cyan-400"}),"Next Draw"]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"A new set of winners is drawn every Sunday at 08:00 AM."})]}),r.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:s}),r.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Time Remaining"})]})]}),r.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/20 p-5 rounded-xl flex items-start gap-4",children:[r.jsx(Yt,{size:24,className:"text-purple-400 shrink-0 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-purple-300",children:"How to Claim Your Prize"}),r.jsx("p",{className:"text-sm text-gray-300/80 mt-1",children:"If you're a winner, a notification has been sent to your profile's inbox containing your unique voucher code. Simply apply it at checkout to claim your winnings!"})]})]}),r.jsx("div",{className:"bg-zinc-900 rounded-2xl border border-gray-800 overflow-hidden",children:r.jsx("div",{className:"divide-y divide-gray-800",children:n.map(l=>r.jsxs("div",{className:`p-4 flex items-center justify-between gap-4 transition-colors ${l.rank<=3?"bg-yellow-900/10":""}`,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm border-2 ${l.rank===1?"bg-yellow-500 border-yellow-300 text-black shadow-[0_0_10px_rgba(250,204,21,0.5)]":l.rank===2?"bg-gray-400 border-gray-200 text-black":l.rank===3?"bg-orange-600 border-orange-400 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:["#",l.rank]}),r.jsx("span",{className:"font-medium text-white",children:l.name})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"font-bold text-lg text-green-400",children:["R",l.prize.toFixed(2)]}),r.jsx("span",{className:"text-xs text-gray-500 block",children:"Voucher"})]})]},l.rank))})}),r.jsxs("div",{className:"mt-12 bg-gradient-to-r from-pink-600 to-purple-600 p-8 rounded-2xl text-center shadow-2xl",children:[r.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Want to be on this list?"}),r.jsx("p",{className:"text-pink-100 mb-6 max-w-lg mx-auto",children:"Join the Spoil Me Package for just R19/month for your chance to win weekly vouchers and get exclusive member perks!"}),r.jsxs(Ae,{to:"/membership",className:"inline-flex items-center gap-2 px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-lg text-lg",children:["Join Now ",r.jsx(At,{size:20})]})]})]})},vM=()=>{const{weeklyWinners:n}=It();return r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[r.jsx(es,{size:24,className:"text-yellow-400"}),' Weekly "Spoil Me" Winners']}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Review and manage the simulated weekly prize draw."})]})}),r.jsxs("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-5 rounded-xl flex items-start gap-4",children:[r.jsx(Pw,{size:24,className:"text-yellow-500 shrink-0 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-yellow-400",children:"Simulation Mode Active"}),r.jsxs("p",{className:"text-sm text-yellow-200/80 mt-1",children:["This panel displays a ",r.jsx("strong",{className:"text-white",children:"simulated list of winners"})," for demonstration. In a live production environment, this page would be connected to your database to:"]}),r.jsxs("ul",{className:"list-disc pl-5 mt-3 text-xs text-yellow-200/70 space-y-1",children:[r.jsx("li",{children:'Show a list of all users subscribed to the "Spoil Me Package".'}),r.jsxs("li",{children:["Allow you to run the draw, which would randomly select ",r.jsx("strong",{children:"real users"})," from that list."]}),r.jsx("li",{children:"Automatically generate unique voucher codes and assign them to the winning user accounts."}),r.jsx("li",{children:"Send a notification to the winners' in-app inbox."})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[r.jsx("div",{className:"flex justify-between items-start mb-4",children:r.jsx("div",{className:"p-3 rounded-lg bg-cyan-900/30 text-cyan-400 border border-cyan-500/20",children:r.jsx(Ys,{size:20})})}),r.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Winners This Week"}),r.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:n.length})]}),r.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[r.jsx("div",{className:"flex justify-between items-start mb-4",children:r.jsx("div",{className:"p-3 rounded-lg bg-green-900/30 text-green-400 border border-green-500/20",children:r.jsx(_w,{size:20})})}),r.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Prize Value"}),r.jsxs("p",{className:"text-[22px] font-bold text-white mt-1",children:["R",n.reduce((e,t)=>e+t.prize,0).toFixed(2)]})]})]}),r.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:r.jsxs("table",{className:"w-full text-left text-sm",children:[r.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4 w-20",children:"Rank"}),r.jsx("th",{className:"p-4",children:"Winner Name"}),r.jsx("th",{className:"p-4 text-right",children:"Prize Value"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:n.map(e=>r.jsxs("tr",{className:`group transition-colors ${e.rank<=3?"bg-yellow-900/10":"hover:bg-zinc-800/50"}`,children:[r.jsx("td",{className:"p-4",children:r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold border ${e.rank===1?"bg-yellow-500 border-yellow-400 text-black":e.rank===2?"bg-gray-400 border-gray-300 text-black":e.rank===3?"bg-orange-600 border-orange-500 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:e.rank})}),r.jsx("td",{className:"p-4 font-medium text-gray-200",children:e.name}),r.jsxs("td",{className:"p-4 text-right font-bold text-lg text-green-400",children:["R",e.prize.toFixed(2)]})]},e.rank))})]})})]})},bM=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm  8cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],wM={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:0}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:0}]},_M=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],NM=()=>{const[n,e]=D.useState(()=>{const N=localStorage.getItem("spv_pudo_costs");return N?JSON.parse(N):bM}),[t,s]=D.useState(()=>{const N=localStorage.getItem("spv_paxi_costs");return N?JSON.parse(N):wM}),[o,l]=D.useState(()=>{const N=localStorage.getItem("spv_door_to_door_costs");return N?JSON.parse(N):_M}),[c,d]=D.useState({}),m=N=>{d(E=>({...E,[N]:"Saved!"})),setTimeout(()=>{d(E=>({...E,[N]:""}))},2e3)};D.useEffect(()=>{},[]),D.useEffect(()=>{try{localStorage.setItem("spv_paxi_costs",JSON.stringify(t))}catch(N){console.error("Failed to save PAXI costs to storage",N)}},[t]),D.useEffect(()=>{},[]),D.useEffect(()=>{try{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(o))}catch(N){console.error("Failed to save Door to Door costs to storage",N)}},[o]);const f=(N,E,I)=>{const T=[...n],A=parseFloat(I)||0;T[N][E]=A,e(T)},v=(N,E,I,T)=>{const A={...t},H=parseFloat(T)||0;A[N][E][I]=H,s(A)},w=(N,E,I)=>{l(T=>T.map((H,W)=>{if(W!==N)return H;let K={...H};if(E==="initialCharge"||E==="ratePerKg"||E==="handleFee"||E==="boxFee"){const te=parseFloat(I);E==="ratePerKg"&&(isNaN(te)||I==="")?K[E]=null:K[E]=isNaN(te)?0:te}else K[E]=I;return K}))};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[r.jsx(_s,{size:24,className:"text-green-400"})," Shipping Expenses & Supplies"]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Reference for PUDO & PAXI costs and supplies."})]}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[r.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[r.jsx(Sw,{size:20,className:"text-cyan-400"})," PUDO Box & Service Pricing"]}),r.jsxs("a",{href:"https://stationery.thecourierguy.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Order Stationery ",r.jsx(uo,{size:16})]})]}),r.jsx("div",{className:"space-y-4 md:hidden",children:n.map((N,E)=>(N.boxCost+(N.lockerToLockerCost||0)+N.lockerHandleFee,N.boxCost+(N.doorToLockerCost||0)+N.doorHandleFee,r.jsx("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-800"},E)))}),r.jsxs("div",{className:"hidden md:block mt-8",children:[r.jsx("h4",{className:"font-bold text-cyan-400 mb-2 mt-6",children:"Locker to Locker"}),r.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[r.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2",children:"Box"}),r.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),r.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),r.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),r.jsx("th",{className:"px-4 py-2",children:"Locker to Locker"}),r.jsx("th",{className:"px-4 py-2",children:"Locker Handle Fee"}),r.jsx("th",{className:"px-4 py-2",children:"Total"}),r.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),r.jsx("tbody",{children:n.map((N,E)=>{if(N.lockerToLockerCost===null)return null;const I=N.boxCost+(N.lockerToLockerCost||0)+N.lockerHandleFee;return r.jsxs("tr",{className:"border-b border-gray-700",children:[r.jsx("td",{className:"px-4 py-2 font-bold text-white",children:N.name}),r.jsx("td",{className:"px-4 py-2",children:N.dimensions}),r.jsx("td",{className:"px-4 py-2",children:N.maxWeight}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("input",{type:"number",value:N.boxCost,onChange:T=>f(E,"boxCost",T.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("input",{type:"number",value:N.lockerToLockerCost||0,onChange:T=>f(E,"lockerToLockerCost",T.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("input",{type:"number",value:N.lockerHandleFee,onChange:T=>f(E,"lockerHandleFee",T.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),r.jsxs("td",{className:"px-4 py-2 font-bold text-cyan-400",children:["R",I.toFixed(2)]}),r.jsxs("td",{className:"px-4 py-2",children:[r.jsx("button",{className:"px-2 py-1 bg-cyan-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(n)),m(`pudo-lockerToLockerCost-${E}`)},children:""}),r.jsx("span",{className:"text-green-400 text-xs",children:c[`pudo-lockerToLockerCost-${E}`]})]})]},E)})})]}),r.jsx("h4",{className:"font-bold text-purple-400 mb-2 mt-6",children:"Door to Locker"}),r.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400",children:[r.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2",children:"Box"}),r.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),r.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),r.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),r.jsx("th",{className:"px-4 py-2",children:"Door to Locker"}),r.jsx("th",{className:"px-4 py-2",children:"Door Handle Fee"}),r.jsx("th",{className:"px-4 py-2",children:"Total"}),r.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),r.jsx("tbody",{children:n.map((N,E)=>{if(N.doorToLockerCost===null)return null;const I=N.boxCost+(N.doorToLockerCost||0)+N.doorHandleFee;return r.jsxs("tr",{className:"border-b border-gray-700",children:[r.jsx("td",{className:"px-4 py-2 font-bold text-white",children:N.name}),r.jsx("td",{className:"px-4 py-2",children:N.dimensions}),r.jsx("td",{className:"px-4 py-2",children:N.maxWeight}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("input",{type:"number",value:N.boxCost,onChange:T=>f(E,"boxCost",T.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("input",{type:"number",value:N.doorToLockerCost||0,onChange:T=>f(E,"doorToLockerCost",T.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("input",{type:"number",value:N.doorHandleFee,onChange:T=>f(E,"doorHandleFee",T.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),r.jsxs("td",{className:"px-4 py-2 font-bold text-purple-400",children:["R",I.toFixed(2)]}),r.jsxs("td",{className:"px-4 py-2",children:[r.jsx("button",{className:"px-2 py-1 bg-purple-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(n)),m(`pudo-doorToLockerCost-${E}`)},children:""}),r.jsx("span",{className:"text-green-400 text-xs",children:c[`pudo-doorToLockerCost-${E}`]})]})]},E)})})]})]})]}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[r.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[r.jsx(Ou,{size:20,className:"text-pink-400"})," PAXI Bag & Service Pricing"]}),r.jsxs("a",{href:"https://www.paxi.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["PAXI Website ",r.jsx(uo,{size:16})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:Object.entries(t).map(([N,E])=>r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-pink-400 mb-2",children:N}),r.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[r.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2",children:"Bag"}),r.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),r.jsx("th",{className:"px-4 py-2",children:"Service Cost"}),r.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),r.jsx("th",{className:"px-4 py-2",children:"Total"}),r.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),r.jsx("tbody",{children:E.map((I,T)=>{let A=I.bag.includes("Small")?6:15;const H=A+I.serviceCost+I.handleFee;return r.jsxs("tr",{className:"border-b border-gray-700",children:[r.jsx("td",{className:"px-4 py-2 font-bold text-white",children:I.bag}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("input",{type:"number",value:A,onChange:W=>{},className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right",disabled:!0})}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("input",{type:"number",value:I.serviceCost,onChange:W=>v(N,T,"serviceCost",W.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("input",{type:"number",value:I.handleFee,onChange:W=>v(N,T,"handleFee",W.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),r.jsxs("td",{className:"px-4 py-2 font-bold text-pink-400",children:["R",H.toFixed(2)]}),r.jsxs("td",{className:"px-4 py-2",children:[r.jsx("button",{className:"px-2 py-1 bg-pink-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_paxi_costs",JSON.stringify(t)),m(`paxi-${N}-${T}`)},children:""}),r.jsx("span",{className:"text-green-400 text-xs",children:c[`paxi-${N}-${T}`]})]})]},T)})})]})]},N))})]}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[r.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:r.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[r.jsx(ss,{size:20,className:"text-yellow-400"})," Door-to-Door Courier Pricing"]})}),r.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[r.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2",children:"Service"}),r.jsx("th",{className:"px-4 py-2",children:"Initial Weight"}),r.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),r.jsx("th",{className:"px-4 py-2",children:"Initial Charge"}),r.jsx("th",{className:"px-4 py-2",children:"Rate per Kg"}),r.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),r.jsx("th",{className:"px-4 py-2",children:"Total"}),r.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),r.jsx("tbody",{children:o.map((N,E)=>{const I=N.boxFee+N.initialCharge+(N.ratePerKg!==null?N.ratePerKg:0)+N.handleFee;return r.jsxs("tr",{className:"border-b border-gray-700",children:[r.jsx("td",{className:"px-4 py-2 font-bold text-white",children:N.service}),r.jsx("td",{className:"px-4 py-2",children:N.initialWeight}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("input",{type:"number",value:N.boxFee,onChange:T=>w(E,"boxFee",T.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("input",{type:"number",value:N.initialCharge,onChange:T=>w(E,"initialCharge",T.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),r.jsx("td",{className:"px-4 py-2",children:N.ratePerKg!==null?r.jsx("input",{type:"number",value:N.ratePerKg,onChange:T=>w(E,"ratePerKg",T.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"}):"-"}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("input",{type:"number",value:N.handleFee,onChange:T=>w(E,"handleFee",T.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),r.jsxs("td",{className:"px-4 py-2 font-bold text-yellow-400",children:["R",I.toFixed(2)]}),r.jsxs("td",{className:"px-4 py-2",children:[r.jsx("button",{className:"px-2 py-1 bg-yellow-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(o)),m(`doorToDoor-${E}`)},children:""}),r.jsx("span",{className:"text-green-400 text-xs",children:c[`doorToDoor-${E}`]})]})]},E)})})]})]})]})},ev=n=>{switch(n){case"Pending":return"bg-yellow-900/30 text-yellow-400 border-yellow-500/30";case"Processing":return"bg-blue-900/30 text-blue-400 border-blue-500/30";case"Shipped":return"bg-cyan-900/30 text-cyan-400 border-cyan-500/30";case"Delivered":return"bg-green-900/30 text-green-400 border-green-500/30";case"Cancelled":return"bg-red-900/30 text-red-400 border-red-500/30";default:return"bg-gray-800 text-gray-400"}},SM=()=>{const{orders:n,updateOrder:e,deleteOrder:t}=It(),[s,o]=D.useState(""),[l,c]=D.useState(""),[d,m]=D.useState(null),[f,v]=D.useState(""),w=D.useMemo(()=>n.filter(T=>{const A=s.toLowerCase();return T.orderNumber.toLowerCase().includes(A)||T.customerName.toLowerCase().includes(A)||T.customerEmail.toLowerCase().includes(A)}).filter(T=>l?T.status===l:!0),[n,s,l]),N=T=>{m(T),v(T.status)},E=async()=>{d&&f&&(await e({...d,status:f}),m(null),v(""))},I=async T=>{window.confirm("Are you sure you want to delete this order? This action cannot be undone.")&&(await t(T),m(null))};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Order Management"}),r.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[r.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[r.jsx(md,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),r.jsx("input",{type:"text",placeholder:"Search by Order #, Name, or Email...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:s,onChange:T=>o(T.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(kw,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),r.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none appearance-none",value:l,onChange:T=>c(T.target.value),children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"Pending",children:"Pending"}),r.jsx("option",{value:"Processing",children:"Processing"}),r.jsx("option",{value:"Shipped",children:"Shipped"}),r.jsx("option",{value:"Delivered",children:"Delivered"}),r.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),r.jsxs("div",{className:"hidden md:block bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[r.jsxs("table",{className:"w-full text-left text-sm",children:[r.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4",children:"Order #"}),r.jsx("th",{className:"p-4",children:"Date"}),r.jsx("th",{className:"p-4",children:"Customer"}),r.jsx("th",{className:"p-4 text-right",children:"Total"}),r.jsx("th",{className:"p-4",children:"Status"}),r.jsx("th",{className:"p-4"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:w.map(T=>r.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[r.jsx("td",{className:"p-4 font-mono text-cyan-400",children:T.orderNumber}),r.jsx("td",{className:"p-4 text-gray-400",children:new Date(T.date).toLocaleDateString()}),r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:"font-medium text-gray-200",children:T.customerName}),r.jsx("div",{className:"text-xs text-gray-500",children:T.customerEmail})]}),r.jsxs("td",{className:"p-4 text-right font-bold text-green-400",children:["R",T.total.toFixed(2)]}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${ev(T.status)}`,children:T.status})}),r.jsx("td",{className:"p-4 text-right",children:r.jsx("button",{onClick:()=>N(T),className:"text-xs text-gray-400 hover:text-white underline opacity-0 group-hover:opacity-100 transition-opacity",children:"View Details"})})]},T.id))})]}),w.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),r.jsxs("div",{className:"md:hidden space-y-4",children:[w.map(T=>r.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-mono text-cyan-400 text-sm",children:T.orderNumber}),r.jsx("div",{className:"text-xs text-gray-500",children:new Date(T.date).toLocaleString()})]}),r.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${ev(T.status)}`,children:T.status})]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-200 text-sm",children:T.customerName}),r.jsx("div",{className:"text-xs text-gray-500",children:T.customerEmail})]}),r.jsxs("div",{className:"flex justify-between items-end pt-2 border-t border-gray-800",children:[r.jsx("button",{onClick:()=>N(T),className:"text-xs text-gray-400 hover:text-white underline",children:"View Details"}),r.jsxs("div",{className:"font-bold text-green-400 text-lg",children:["R",T.total.toFixed(2)]})]})]},T.id)),w.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),d&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>m(null)}),r.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-2xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:"Order Details"}),r.jsx("p",{className:"font-mono text-cyan-400",children:d.orderNumber})]}),r.jsx("button",{onClick:()=>m(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white",children:r.jsx(yn,{size:20})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[r.jsx(Vl,{size:16,className:"text-gray-500"}),r.jsx("span",{className:"text-gray-300",children:d.customerName})]}),r.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[r.jsx(Fu,{size:16,className:"text-gray-500"}),r.jsx("span",{className:"text-gray-300",children:d.customerEmail})]}),r.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[r.jsx(Ew,{size:16,className:"text-gray-500"}),r.jsx("span",{className:"text-gray-300",children:new Date(d.date).toLocaleString()})]})]}),r.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800",children:[r.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[r.jsx(ss,{size:18,className:"text-cyan-400"}),"Shipping Information"]}),r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{className:"text-gray-400",children:"Method:"})," ",r.jsx("span",{className:"text-gray-200",children:d.shippingMethod})]}),r.jsxs("p",{children:[r.jsx("strong",{className:"text-gray-400",children:"Details:"})," ",r.jsx("span",{className:"text-gray-200",children:d.shippingDetails})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[r.jsx(Ii,{size:18,className:"text-pink-400"}),"Items (",d.items.reduce((T,A)=>T+A.quantity,0),")"]}),d.items.map((T,A)=>r.jsxs("div",{className:"flex items-center gap-4 bg-black/40 p-3 rounded-lg border border-gray-800",children:[r.jsx("img",{src:T.images[0],alt:T.name,className:"w-12 h-12 rounded object-cover border border-gray-700"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-bold text-white",children:T.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:[T.selectedSize&&`Size: ${T.selectedSize}`,T.selectedMaterial&&`Material: ${T.selectedMaterial}`]})]}),r.jsxs("div",{className:"text-sm text-gray-400",children:["x",T.quantity]}),r.jsxs("div",{className:"text-sm font-bold text-white",children:["R",(T.price*T.quantity).toFixed(2)]})]},A))]}),r.jsxs("div",{className:"pt-4 border-t border-gray-800 text-sm text-right space-y-2",children:[r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx("span",{className:"text-gray-400",children:"Subtotal:"})," ",r.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",(d.total-d.shippingCost).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx("span",{className:"text-gray-400",children:"Shipping:"})," ",r.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",d.shippingCost.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-end gap-4 font-bold text-lg",children:[r.jsx("span",{className:"text-white",children:"Total:"})," ",r.jsxs("span",{className:"text-green-400 w-24 text-left",children:["R",d.total.toFixed(2)]})]})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-800 bg-zinc-950/50 flex flex-col md:flex-row justify-between items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[r.jsx("label",{className:"text-sm font-bold text-white",children:"Status:"}),r.jsxs("select",{value:f,onChange:T=>v(T.target.value),className:"flex-1 bg-black border border-gray-700 rounded-lg p-2 text-white text-sm focus:border-pink-500 outline-none",children:[r.jsx("option",{value:"Pending",children:"Pending"}),r.jsx("option",{value:"Processing",children:"Processing"}),r.jsx("option",{value:"Shipped",children:"Shipped"}),r.jsx("option",{value:"Delivered",children:"Delivered"}),r.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),r.jsx("button",{onClick:E,className:"px-4 py-2 bg-pink-600 text-white font-bold rounded-lg text-sm hover:bg-pink-500",children:"Save"})]}),r.jsxs("button",{onClick:()=>I(d.id),className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 text-red-400 text-sm font-bold hover:bg-red-900/20 rounded-lg border border-red-900/0 hover:border-red-900/30 transition-colors",children:[r.jsx(fo,{size:16})," Delete Order"]})]})]})]})]})},EM=({onClose:n})=>r.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:n}),r.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-sm w-full shadow-[0_0_50px_rgba(236,72,153,0.4)] animate-in zoom-in-95 duration-300 text-center",children:[r.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:r.jsx(yn,{size:20})}),r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600 to-purple-600 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg transform rotate-3",children:r.jsx(bT,{size:32,className:"text-white"})}),r.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Voucher Redeemed!"}),r.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"To ensure your discount applies correctly and for the best shopping experience, please use our App."}),r.jsxs("button",{className:"w-full py-3 bg-white text-black font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors mb-3 shadow-lg",onClick:()=>alert("Please use the Install button at the bottom of the screen."),children:[r.jsx(Cw,{size:20})," Install App"]}),r.jsx("button",{onClick:n,className:"text-xs text-gray-500 hover:text-gray-300 underline",children:"Continue in Browser"})]})]}),CM=()=>{const n=Mi(),e=is(),{applyExternalVoucher:t}=It(),[s,o]=D.useState(!1);return D.useEffect(()=>{const c=new URLSearchParams(n.search).get("voucher");c&&t(c)&&(o(!0),e("/cart",{replace:!0}))},[n,t,e]),s?r.jsx(EM,{onClose:()=>o(!1)}):null},kM=()=>r.jsx($j,{children:r.jsxs(uN,{children:[r.jsx(CM,{}),r.jsx(xM,{}),r.jsxs(rN,{children:[r.jsxs(Vt,{path:"/",element:r.jsx(LT,{}),children:[r.jsx(Vt,{index:!0,element:r.jsx(qT,{})}),r.jsx(Vt,{path:"collections/:categoryName",element:r.jsx(sP,{})}),r.jsx(Vt,{path:"catalog/:type",element:r.jsx(iP,{})}),r.jsx(Vt,{path:"product/:id",element:r.jsx(GT,{})}),r.jsx(Vt,{path:"cart",element:r.jsx(QT,{})}),r.jsx(Vt,{path:"profile",element:r.jsx(XT,{})}),r.jsx(Vt,{path:"membership",element:r.jsx(eP,{})}),r.jsx(Vt,{path:"earn-rewards",element:r.jsx(tP,{})}),r.jsx(Vt,{path:"affiliate-program",element:r.jsx(nP,{})}),r.jsx(Vt,{path:"gift-cards",element:r.jsx(rP,{})}),r.jsx(Vt,{path:"weekly-winners",element:r.jsx(yM,{})})," ",r.jsx(Vt,{path:"login",element:r.jsx(ZT,{})})]}),r.jsxs(Vt,{path:"/admin",element:r.jsx(zT,{}),children:[r.jsx(Vt,{index:!0,element:r.jsx(oP,{})}),r.jsx(Vt,{path:"products",element:r.jsx(uM,{})}),r.jsx(Vt,{path:"orders",element:r.jsx(SM,{})}),r.jsx(Vt,{path:"categories",element:r.jsx(dM,{})}),r.jsx(Vt,{path:"gift-cards",element:r.jsx(hM,{})}),r.jsx(Vt,{path:"social",element:r.jsx(mM,{})}),r.jsx(Vt,{path:"affiliates",element:r.jsx(gM,{})}),r.jsx(Vt,{path:"winners",element:r.jsx(vM,{})}),r.jsx(Vt,{path:"expenses",element:r.jsx(NM,{})})," "]}),r.jsx(Vt,{path:"*",element:r.jsx(tN,{to:"/"})})]})]})}),Kw=document.getElementById("root");if(!Kw)throw new Error("Could not find root element to mount to");const jM=l_.createRoot(Kw);jM.render(r.jsx(nv.StrictMode,{children:r.jsx(kM,{})}));
