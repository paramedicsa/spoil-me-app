function Ij(s,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in s)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(s,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();function Jy(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var am={exports:{}},ql={},om={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function Oj(){if(v0)return Et;v0=1;var s=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.iterator;function N(K){return K===null||typeof K!="object"?null:(K=w&&K[w]||K["@@iterator"],typeof K=="function"?K:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,_={};function O(K,me,se){this.props=K,this.context=me,this.refs=_,this.updater=se||R}O.prototype.isReactComponent={},O.prototype.setState=function(K,me){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,me,"setState")},O.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function L(){}L.prototype=O.prototype;function $(K,me,se){this.props=K,this.context=me,this.refs=_,this.updater=se||R}var M=$.prototype=new L;M.constructor=$,P(M,O.prototype),M.isPureReactComponent=!0;var te=Array.isArray,H=Object.prototype.hasOwnProperty,U={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function j(K,me,se){var ve,G={},Ie=null,be=null;if(me!=null)for(ve in me.ref!==void 0&&(be=me.ref),me.key!==void 0&&(Ie=""+me.key),me)H.call(me,ve)&&!E.hasOwnProperty(ve)&&(G[ve]=me[ve]);var He=arguments.length-2;if(He===1)G.children=se;else if(1<He){for(var qe=Array(He),at=0;at<He;at++)qe[at]=arguments[at+2];G.children=qe}if(K&&K.defaultProps)for(ve in He=K.defaultProps,He)G[ve]===void 0&&(G[ve]=He[ve]);return{$$typeof:s,type:K,key:Ie,ref:be,props:G,_owner:U.current}}function S(K,me){return{$$typeof:s,type:K.type,key:me,ref:K.ref,props:K.props,_owner:K._owner}}function D(K){return typeof K=="object"&&K!==null&&K.$$typeof===s}function I(K){var me={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(se){return me[se]})}var F=/\/+/g;function C(K,me){return typeof K=="object"&&K!==null&&K.key!=null?I(""+K.key):me.toString(36)}function ee(K,me,se,ve,G){var Ie=typeof K;(Ie==="undefined"||Ie==="boolean")&&(K=null);var be=!1;if(K===null)be=!0;else switch(Ie){case"string":case"number":be=!0;break;case"object":switch(K.$$typeof){case s:case t:be=!0}}if(be)return be=K,G=G(be),K=ve===""?"."+C(be,0):ve,te(G)?(se="",K!=null&&(se=K.replace(F,"$&/")+"/"),ee(G,me,se,"",function(at){return at})):G!=null&&(D(G)&&(G=S(G,se+(!G.key||be&&be.key===G.key?"":(""+G.key).replace(F,"$&/")+"/")+K)),me.push(G)),1;if(be=0,ve=ve===""?".":ve+":",te(K))for(var He=0;He<K.length;He++){Ie=K[He];var qe=ve+C(Ie,He);be+=ee(Ie,me,se,qe,G)}else if(qe=N(K),typeof qe=="function")for(K=qe.call(K),He=0;!(Ie=K.next()).done;)Ie=Ie.value,qe=ve+C(Ie,He++),be+=ee(Ie,me,se,qe,G);else if(Ie==="object")throw me=String(K),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.");return be}function ue(K,me,se){if(K==null)return K;var ve=[],G=0;return ee(K,ve,"","",function(Ie){return me.call(se,Ie,G++)}),ve}function Se(K){if(K._status===-1){var me=K._result;me=me(),me.then(function(se){(K._status===0||K._status===-1)&&(K._status=1,K._result=se)},function(se){(K._status===0||K._status===-1)&&(K._status=2,K._result=se)}),K._status===-1&&(K._status=0,K._result=me)}if(K._status===1)return K._result.default;throw K._result}var Pe={current:null},ce={transition:null},ye={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:ce,ReactCurrentOwner:U};function je(){throw Error("act(...) is not supported in production builds of React.")}return Et.Children={map:ue,forEach:function(K,me,se){ue(K,function(){me.apply(this,arguments)},se)},count:function(K){var me=0;return ue(K,function(){me++}),me},toArray:function(K){return ue(K,function(me){return me})||[]},only:function(K){if(!D(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Et.Component=O,Et.Fragment=r,Et.Profiler=o,Et.PureComponent=$,Et.StrictMode=i,Et.Suspense=p,Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,Et.act=je,Et.cloneElement=function(K,me,se){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var ve=P({},K.props),G=K.key,Ie=K.ref,be=K._owner;if(me!=null){if(me.ref!==void 0&&(Ie=me.ref,be=U.current),me.key!==void 0&&(G=""+me.key),K.type&&K.type.defaultProps)var He=K.type.defaultProps;for(qe in me)H.call(me,qe)&&!E.hasOwnProperty(qe)&&(ve[qe]=me[qe]===void 0&&He!==void 0?He[qe]:me[qe])}var qe=arguments.length-2;if(qe===1)ve.children=se;else if(1<qe){He=Array(qe);for(var at=0;at<qe;at++)He[at]=arguments[at+2];ve.children=He}return{$$typeof:s,type:K.type,key:G,ref:Ie,props:ve,_owner:be}},Et.createContext=function(K){return K={$$typeof:d,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:l,_context:K},K.Consumer=K},Et.createElement=j,Et.createFactory=function(K){var me=j.bind(null,K);return me.type=K,me},Et.createRef=function(){return{current:null}},Et.forwardRef=function(K){return{$$typeof:m,render:K}},Et.isValidElement=D,Et.lazy=function(K){return{$$typeof:b,_payload:{_status:-1,_result:K},_init:Se}},Et.memo=function(K,me){return{$$typeof:f,type:K,compare:me===void 0?null:me}},Et.startTransition=function(K){var me=ce.transition;ce.transition={};try{K()}finally{ce.transition=me}},Et.unstable_act=je,Et.useCallback=function(K,me){return Pe.current.useCallback(K,me)},Et.useContext=function(K){return Pe.current.useContext(K)},Et.useDebugValue=function(){},Et.useDeferredValue=function(K){return Pe.current.useDeferredValue(K)},Et.useEffect=function(K,me){return Pe.current.useEffect(K,me)},Et.useId=function(){return Pe.current.useId()},Et.useImperativeHandle=function(K,me,se){return Pe.current.useImperativeHandle(K,me,se)},Et.useInsertionEffect=function(K,me){return Pe.current.useInsertionEffect(K,me)},Et.useLayoutEffect=function(K,me){return Pe.current.useLayoutEffect(K,me)},Et.useMemo=function(K,me){return Pe.current.useMemo(K,me)},Et.useReducer=function(K,me,se){return Pe.current.useReducer(K,me,se)},Et.useRef=function(K){return Pe.current.useRef(K)},Et.useState=function(K){return Pe.current.useState(K)},Et.useSyncExternalStore=function(K,me,se){return Pe.current.useSyncExternalStore(K,me,se)},Et.useTransition=function(){return Pe.current.useTransition()},Et.version="18.3.1",Et}var w0;function jp(){return w0||(w0=1,om.exports=Oj()),om.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function Dj(){if(j0)return ql;j0=1;var s=jp(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(m,p,f){var b,w={},N=null,R=null;f!==void 0&&(N=""+f),p.key!==void 0&&(N=""+p.key),p.ref!==void 0&&(R=p.ref);for(b in p)i.call(p,b)&&!l.hasOwnProperty(b)&&(w[b]=p[b]);if(m&&m.defaultProps)for(b in p=m.defaultProps,p)w[b]===void 0&&(w[b]=p[b]);return{$$typeof:t,type:m,key:N,ref:R,props:w,_owner:o.current}}return ql.Fragment=r,ql.jsx=d,ql.jsxs=d,ql}var N0;function zj(){return N0||(N0=1,am.exports=Dj()),am.exports}var e=zj(),v=jp();const ra=Jy(v),Mj=Ij({__proto__:null,default:ra},[v]);var Od={},lm={exports:{}},Sr={},cm={exports:{}},dm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0;function Lj(){return S0||(S0=1,(function(s){function t(ce,ye){var je=ce.length;ce.push(ye);e:for(;0<je;){var K=je-1>>>1,me=ce[K];if(0<o(me,ye))ce[K]=ye,ce[je]=me,je=K;else break e}}function r(ce){return ce.length===0?null:ce[0]}function i(ce){if(ce.length===0)return null;var ye=ce[0],je=ce.pop();if(je!==ye){ce[0]=je;e:for(var K=0,me=ce.length,se=me>>>1;K<se;){var ve=2*(K+1)-1,G=ce[ve],Ie=ve+1,be=ce[Ie];if(0>o(G,je))Ie<me&&0>o(be,G)?(ce[K]=be,ce[Ie]=je,K=Ie):(ce[K]=G,ce[ve]=je,K=ve);else if(Ie<me&&0>o(be,je))ce[K]=be,ce[Ie]=je,K=Ie;else break e}}return ye}function o(ce,ye){var je=ce.sortIndex-ye.sortIndex;return je!==0?je:ce.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var p=[],f=[],b=1,w=null,N=3,R=!1,P=!1,_=!1,O=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ce){for(var ye=r(f);ye!==null;){if(ye.callback===null)i(f);else if(ye.startTime<=ce)i(f),ye.sortIndex=ye.expirationTime,t(p,ye);else break;ye=r(f)}}function te(ce){if(_=!1,M(ce),!P)if(r(p)!==null)P=!0,Se(H);else{var ye=r(f);ye!==null&&Pe(te,ye.startTime-ce)}}function H(ce,ye){P=!1,_&&(_=!1,L(j),j=-1),R=!0;var je=N;try{for(M(ye),w=r(p);w!==null&&(!(w.expirationTime>ye)||ce&&!I());){var K=w.callback;if(typeof K=="function"){w.callback=null,N=w.priorityLevel;var me=K(w.expirationTime<=ye);ye=s.unstable_now(),typeof me=="function"?w.callback=me:w===r(p)&&i(p),M(ye)}else i(p);w=r(p)}if(w!==null)var se=!0;else{var ve=r(f);ve!==null&&Pe(te,ve.startTime-ye),se=!1}return se}finally{w=null,N=je,R=!1}}var U=!1,E=null,j=-1,S=5,D=-1;function I(){return!(s.unstable_now()-D<S)}function F(){if(E!==null){var ce=s.unstable_now();D=ce;var ye=!0;try{ye=E(!0,ce)}finally{ye?C():(U=!1,E=null)}}else U=!1}var C;if(typeof $=="function")C=function(){$(F)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ue=ee.port2;ee.port1.onmessage=F,C=function(){ue.postMessage(null)}}else C=function(){O(F,0)};function Se(ce){E=ce,U||(U=!0,C())}function Pe(ce,ye){j=O(function(){ce(s.unstable_now())},ye)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ce){ce.callback=null},s.unstable_continueExecution=function(){P||R||(P=!0,Se(H))},s.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<ce?Math.floor(1e3/ce):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_getFirstCallbackNode=function(){return r(p)},s.unstable_next=function(ce){switch(N){case 1:case 2:case 3:var ye=3;break;default:ye=N}var je=N;N=ye;try{return ce()}finally{N=je}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ce,ye){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var je=N;N=ce;try{return ye()}finally{N=je}},s.unstable_scheduleCallback=function(ce,ye,je){var K=s.unstable_now();switch(typeof je=="object"&&je!==null?(je=je.delay,je=typeof je=="number"&&0<je?K+je:K):je=K,ce){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=je+me,ce={id:b++,callback:ye,priorityLevel:ce,startTime:je,expirationTime:me,sortIndex:-1},je>K?(ce.sortIndex=je,t(f,ce),r(p)===null&&ce===r(f)&&(_?(L(j),j=-1):_=!0,Pe(te,je-K))):(ce.sortIndex=me,t(p,ce),P||R||(P=!0,Se(H))),ce},s.unstable_shouldYield=I,s.unstable_wrapCallback=function(ce){var ye=N;return function(){var je=N;N=ye;try{return ce.apply(this,arguments)}finally{N=je}}}})(dm)),dm}var k0;function Uj(){return k0||(k0=1,cm.exports=Lj()),cm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0;function $j(){if(_0)return Sr;_0=1;var s=jp(),t=Uj();function r(n){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+n,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,a){d(n,a),d(n+"Capture",a)}function d(n,a){for(o[n]=a,n=0;n<a.length;n++)i.add(a[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},w={};function N(n){return p.call(w,n)?!0:p.call(b,n)?!1:f.test(n)?w[n]=!0:(b[n]=!0,!1)}function R(n,a,c,h){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return h?!1:c!==null?!c.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function P(n,a,c,h){if(a===null||typeof a>"u"||R(n,a,c,h))return!0;if(h)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function _(n,a,c,h,g,x,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=n,this.type=a,this.sanitizeURL=x,this.removeEmptyString=T}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){O[n]=new _(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var a=n[0];O[a]=new _(a,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){O[n]=new _(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){O[n]=new _(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){O[n]=new _(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){O[n]=new _(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){O[n]=new _(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){O[n]=new _(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){O[n]=new _(n,5,!1,n.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function $(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var a=n.replace(L,$);O[a]=new _(a,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var a=n.replace(L,$);O[a]=new _(a,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var a=n.replace(L,$);O[a]=new _(a,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){O[n]=new _(n,1,!1,n.toLowerCase(),null,!1,!1)}),O.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){O[n]=new _(n,1,!1,n.toLowerCase(),null,!0,!0)});function M(n,a,c,h){var g=O.hasOwnProperty(a)?O[a]:null;(g!==null?g.type!==0:h||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(P(a,c,g,h)&&(c=null),h||g===null?N(a)&&(c===null?n.removeAttribute(a):n.setAttribute(a,""+c)):g.mustUseProperty?n[g.propertyName]=c===null?g.type===3?!1:"":c:(a=g.attributeName,h=g.attributeNamespace,c===null?n.removeAttribute(a):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,h?n.setAttributeNS(h,a,c):n.setAttribute(a,c))))}var te=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),U=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),I=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),ce=Symbol.iterator;function ye(n){return n===null||typeof n!="object"?null:(n=ce&&n[ce]||n["@@iterator"],typeof n=="function"?n:null)}var je=Object.assign,K;function me(n){if(K===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);K=a&&a[1]||""}return`
`+K+n}var se=!1;function ve(n,a){if(!n||se)return"";se=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(he){var h=he}Reflect.construct(n,[],a)}else{try{a.call()}catch(he){h=he}n.call(a.prototype)}else{try{throw Error()}catch(he){h=he}n()}}catch(he){if(he&&h&&typeof he.stack=="string"){for(var g=he.stack.split(`
`),x=h.stack.split(`
`),T=g.length-1,W=x.length-1;1<=T&&0<=W&&g[T]!==x[W];)W--;for(;1<=T&&0<=W;T--,W--)if(g[T]!==x[W]){if(T!==1||W!==1)do if(T--,W--,0>W||g[T]!==x[W]){var J=`
`+g[T].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=T&&0<=W);break}}}finally{se=!1,Error.prepareStackTrace=c}return(n=n?n.displayName||n.name:"")?me(n):""}function G(n){switch(n.tag){case 5:return me(n.type);case 16:return me("Lazy");case 13:return me("Suspense");case 19:return me("SuspenseList");case 0:case 2:case 15:return n=ve(n.type,!1),n;case 11:return n=ve(n.type.render,!1),n;case 1:return n=ve(n.type,!0),n;default:return""}}function Ie(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case E:return"Fragment";case U:return"Portal";case S:return"Profiler";case j:return"StrictMode";case C:return"Suspense";case ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case I:return(n.displayName||"Context")+".Consumer";case D:return(n._context.displayName||"Context")+".Provider";case F:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ue:return a=n.displayName||null,a!==null?a:Ie(n.type)||"Memo";case Se:a=n._payload,n=n._init;try{return Ie(n(a))}catch{}}return null}function be(n){var a=n.type;switch(n.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=a.render,n=n.displayName||n.name||"",a.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(a);case 8:return a===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function He(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function at(n){var a=qe(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),h=""+n[a];if(!n.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,x=c.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){h=""+T,x.call(this,T)}}),Object.defineProperty(n,a,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Rt(n){n._valueTracker||(n._valueTracker=at(n))}function xe(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var c=a.getValue(),h="";return n&&(h=qe(n)?n.checked?"true":"false":n.value),n=h,n!==c?(a.setValue(n),!0):!1}function Je(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function wt(n,a){var c=a.checked;return je({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??n._wrapperState.initialChecked})}function Lt(n,a){var c=a.defaultValue==null?"":a.defaultValue,h=a.checked!=null?a.checked:a.defaultChecked;c=He(a.value!=null?a.value:c),n._wrapperState={initialChecked:h,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ae(n,a){a=a.checked,a!=null&&M(n,"checked",a,!1)}function ge(n,a){ae(n,a);var c=He(a.value),h=a.type;if(c!=null)h==="number"?(c===0&&n.value===""||n.value!=c)&&(n.value=""+c):n.value!==""+c&&(n.value=""+c);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}a.hasOwnProperty("value")?we(n,a.type,c):a.hasOwnProperty("defaultValue")&&we(n,a.type,He(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(n.defaultChecked=!!a.defaultChecked)}function ze(n,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var h=a.type;if(!(h!=="submit"&&h!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+n._wrapperState.initialValue,c||a===n.value||(n.value=a),n.defaultValue=a}c=n.name,c!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,c!==""&&(n.name=c)}function we(n,a,c){(a!=="number"||Je(n.ownerDocument)!==n)&&(c==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+c&&(n.defaultValue=""+c))}var Ue=Array.isArray;function et(n,a,c,h){if(n=n.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<n.length;c++)g=a.hasOwnProperty("$"+n[c].value),n[c].selected!==g&&(n[c].selected=g),g&&h&&(n[c].defaultSelected=!0)}else{for(c=""+He(c),a=null,g=0;g<n.length;g++){if(n[g].value===c){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}a!==null||n[g].disabled||(a=n[g])}a!==null&&(a.selected=!0)}}function fe(n,a){if(a.dangerouslySetInnerHTML!=null)throw Error(r(91));return je({},a,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function nt(n,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(r(92));if(Ue(c)){if(1<c.length)throw Error(r(93));c=c[0]}a=c}a==null&&(a=""),c=a}n._wrapperState={initialValue:He(c)}}function dt(n,a){var c=He(a.value),h=He(a.defaultValue);c!=null&&(c=""+c,c!==n.value&&(n.value=c),a.defaultValue==null&&n.defaultValue!==c&&(n.defaultValue=c)),h!=null&&(n.defaultValue=""+h)}function _t(n){var a=n.textContent;a===n._wrapperState.initialValue&&a!==""&&a!==null&&(n.value=a)}function xt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kt(n,a){return n==null||n==="http://www.w3.org/1999/xhtml"?xt(a):n==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Bt,is=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,h,g){MSApp.execUnsafeLocalFunction(function(){return n(a,c,h,g)})}:n})(function(n,a){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=a;else{for(Bt=Bt||document.createElement("div"),Bt.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Bt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;a.firstChild;)n.appendChild(a.firstChild)}});function ds(n,a){if(a){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=a;return}}n.textContent=a}var De={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ns=["Webkit","ms","Moz","O"];Object.keys(De).forEach(function(n){Ns.forEach(function(a){a=a+n.charAt(0).toUpperCase()+n.substring(1),De[a]=De[n]})});function us(n,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||De.hasOwnProperty(n)&&De[n]?(""+a).trim():a+"px"}function Ms(n,a){n=n.style;for(var c in a)if(a.hasOwnProperty(c)){var h=c.indexOf("--")===0,g=us(c,a[c],h);c==="float"&&(c="cssFloat"),h?n.setProperty(c,g):n[c]=g}}var X=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $e(n,a){if(a){if(X[n]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(r(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(r(61))}if(a.style!=null&&typeof a.style!="object")throw Error(r(62))}}function Zs(n,a){if(n.indexOf("-")===-1)return typeof a.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ls=null;function Wr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fr=null,Ts=null,Ot=null;function gr(n){if(n=Tl(n)){if(typeof fr!="function")throw Error(r(280));var a=n.stateNode;a&&(a=Jc(a),fr(n.stateNode,n.type,a))}}function ir(n){Ts?Ot?Ot.push(n):Ot=[n]:Ts=n}function Rs(){if(Ts){var n=Ts,a=Ot;if(Ot=Ts=null,gr(n),a)for(n=0;n<a.length;n++)gr(a[n])}}function Pr(n,a){return n(a)}function Hn(){}var ts=!1;function Us(n,a,c){if(ts)return n(a,c);ts=!0;try{return Pr(n,a,c)}finally{ts=!1,(Ts!==null||Ot!==null)&&(Hn(),Rs())}}function Ne(n,a){var c=n.stateNode;if(c===null)return null;var h=Jc(c);if(h===null)return null;c=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var Ye=!1;if(m)try{var Ct={};Object.defineProperty(Ct,"passive",{get:function(){Ye=!0}}),window.addEventListener("test",Ct,Ct),window.removeEventListener("test",Ct,Ct)}catch{Ye=!1}function Jt(n,a,c,h,g,x,T,W,J){var he=Array.prototype.slice.call(arguments,3);try{a.apply(c,he)}catch(Te){this.onError(Te)}}var Pt=!1,At=null,Wt=!1,It=null,en={onError:function(n){Pt=!0,At=n}};function qn(n,a,c,h,g,x,T,W,J){Pt=!1,At=null,Jt.apply(en,arguments)}function Gn(n,a,c,h,g,x,T,W,J){if(qn.apply(this,arguments),Pt){if(Pt){var he=At;Pt=!1,At=null}else throw Error(r(198));Wt||(Wt=!0,It=he)}}function ar(n){var a=n,c=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(c=a.return),n=a.return;while(n)}return a.tag===3?c:null}function Kn(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function ji(n){if(ar(n)!==n)throw Error(r(188))}function Ni(n){var a=n.alternate;if(!a){if(a=ar(n),a===null)throw Error(r(188));return a!==n?null:n}for(var c=n,h=a;;){var g=c.return;if(g===null)break;var x=g.alternate;if(x===null){if(h=g.return,h!==null){c=h;continue}break}if(g.child===x.child){for(x=g.child;x;){if(x===c)return ji(g),n;if(x===h)return ji(g),a;x=x.sibling}throw Error(r(188))}if(c.return!==h.return)c=g,h=x;else{for(var T=!1,W=g.child;W;){if(W===c){T=!0,c=g,h=x;break}if(W===h){T=!0,h=g,c=x;break}W=W.sibling}if(!T){for(W=x.child;W;){if(W===c){T=!0,c=x,h=g;break}if(W===h){T=!0,h=x,c=g;break}W=W.sibling}if(!T)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?n:a}function Si(n){return n=Ni(n),n!==null?Er(n):null}function Er(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var a=Er(n);if(a!==null)return a;n=n.sibling}return null}var Jn=t.unstable_scheduleCallback,V=t.unstable_cancelCallback,B=t.unstable_shouldYield,q=t.unstable_requestPaint,Q=t.unstable_now,re=t.unstable_getCurrentPriorityLevel,ke=t.unstable_ImmediatePriority,Ce=t.unstable_UserBlockingPriority,ne=t.unstable_NormalPriority,de=t.unstable_LowPriority,Ee=t.unstable_IdlePriority,ct=null,Be=null;function jt(n){if(Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(ct,n,void 0,(n.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:bt,Tt=Math.log,Vt=Math.LN2;function bt(n){return n>>>=0,n===0?32:31-(Tt(n)/Vt|0)|0}var gs=64,it=4194304;function tt(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function qt(n,a){var c=n.pendingLanes;if(c===0)return 0;var h=0,g=n.suspendedLanes,x=n.pingedLanes,T=c&268435455;if(T!==0){var W=T&~g;W!==0?h=tt(W):(x&=T,x!==0&&(h=tt(x)))}else T=c&~g,T!==0?h=tt(T):x!==0&&(h=tt(x));if(h===0)return 0;if(a!==0&&a!==h&&(a&g)===0&&(g=h&-h,x=a&-a,g>=x||g===16&&(x&4194240)!==0))return a;if((h&4)!==0&&(h|=c&16),a=n.entangledLanes,a!==0)for(n=n.entanglements,a&=h;0<a;)c=31-St(a),g=1<<c,h|=n[c],a&=~g;return h}function xs(n,a){switch(n){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xr(n,a){for(var c=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,x=n.pendingLanes;0<x;){var T=31-St(x),W=1<<T,J=g[T];J===-1?((W&c)===0||(W&h)!==0)&&(g[T]=xs(W,a)):J<=a&&(n.expiredLanes|=W),x&=~W}}function Zn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function yn(){var n=gs;return gs<<=1,(gs&4194240)===0&&(gs=64),n}function ki(n){for(var a=[],c=0;31>c;c++)a.push(n);return a}function bn(n,a,c){n.pendingLanes|=a,a!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,a=31-St(a),n[a]=c}function io(n,a){var c=n.pendingLanes&~a;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=a,n.mutableReadLanes&=a,n.entangledLanes&=a,a=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<c;){var g=31-St(c),x=1<<g;a[g]=0,h[g]=-1,n[g]=-1,c&=~x}}function A(n,a){var c=n.entangledLanes|=a;for(n=n.entanglements;c;){var h=31-St(c),g=1<<h;g&a|n[h]&a&&(n[h]|=a),c&=~g}}var Z=0;function Me(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ke,Ae,Zt,ut,Ws,yt=!1,as=[],Ar=null,Tr=null,Yt=null,fa=new Map,Yn=new Map,Rr=[],Oc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _i(n,a){switch(n){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Yt=null;break;case"pointerover":case"pointerout":fa.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(a.pointerId)}}function tn(n,a,c,h,g,x){return n===null||n.nativeEvent!==x?(n={blockedOn:a,domEventName:c,eventSystemFlags:h,nativeEvent:x,targetContainers:[g]},a!==null&&(a=Tl(a),a!==null&&Ae(a)),n):(n.eventSystemFlags|=h,a=n.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),n)}function Dc(n,a,c,h,g){switch(a){case"focusin":return Ar=tn(Ar,n,a,c,h,g),!0;case"dragenter":return Tr=tn(Tr,n,a,c,h,g),!0;case"mouseover":return Yt=tn(Yt,n,a,c,h,g),!0;case"pointerover":var x=g.pointerId;return fa.set(x,tn(fa.get(x)||null,n,a,c,h,g)),!0;case"gotpointercapture":return x=g.pointerId,Yn.set(x,tn(Yn.get(x)||null,n,a,c,h,g)),!0}return!1}function ao(n){var a=ba(n.target);if(a!==null){var c=ar(a);if(c!==null){if(a=c.tag,a===13){if(a=Kn(c),a!==null){n.blockedOn=a,Ws(n.priority,function(){Zt(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xt(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var c=oo(n.domEventName,n.eventSystemFlags,a[0],n.nativeEvent);if(c===null){c=n.nativeEvent;var h=new c.constructor(c.type,c);Ls=h,c.target.dispatchEvent(h),Ls=null}else return a=Tl(c),a!==null&&Ae(a),n.blockedOn=c,!1;a.shift()}return!0}function zc(n,a,c){Xt(n)&&c.delete(a)}function Uu(){yt=!1,Ar!==null&&Xt(Ar)&&(Ar=null),Tr!==null&&Xt(Tr)&&(Tr=null),Yt!==null&&Xt(Yt)&&(Yt=null),fa.forEach(zc),Yn.forEach(zc)}function Ci(n,a){n.blockedOn===a&&(n.blockedOn=null,yt||(yt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Uu)))}function Pi(n){function a(g){return Ci(g,n)}if(0<as.length){Ci(as[0],n);for(var c=1;c<as.length;c++){var h=as[c];h.blockedOn===n&&(h.blockedOn=null)}}for(Ar!==null&&Ci(Ar,n),Tr!==null&&Ci(Tr,n),Yt!==null&&Ci(Yt,n),fa.forEach(a),Yn.forEach(a),c=0;c<Rr.length;c++)h=Rr[c],h.blockedOn===n&&(h.blockedOn=null);for(;0<Rr.length&&(c=Rr[0],c.blockedOn===null);)ao(c),c.blockedOn===null&&Rr.shift()}var Xn=te.ReactCurrentBatchConfig,Qn=!0;function vn(n,a,c,h){var g=Z,x=Xn.transition;Xn.transition=null;try{Z=1,yl(n,a,c,h)}finally{Z=g,Xn.transition=x}}function Mc(n,a,c,h){var g=Z,x=Xn.transition;Xn.transition=null;try{Z=4,yl(n,a,c,h)}finally{Z=g,Xn.transition=x}}function yl(n,a,c,h){if(Qn){var g=oo(n,a,c,h);if(g===null)Zu(n,a,h,wn,c),_i(n,h);else if(Dc(g,n,a,c,h))h.stopPropagation();else if(_i(n,h),a&4&&-1<Oc.indexOf(n)){for(;g!==null;){var x=Tl(g);if(x!==null&&Ke(x),x=oo(n,a,c,h),x===null&&Zu(n,a,h,wn,c),x===g)break;g=x}g!==null&&h.stopPropagation()}else Zu(n,a,h,null,c)}}var wn=null;function oo(n,a,c,h){if(wn=null,n=Wr(h),n=ba(n),n!==null)if(a=ar(n),a===null)n=null;else if(c=a.tag,c===13){if(n=Kn(a),n!==null)return n;n=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null);return wn=n,null}function lo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(re()){case ke:return 1;case Ce:return 4;case ne:case de:return 16;case Ee:return 536870912;default:return 16}default:return 16}}var Ir=null,co=null,ei=null;function Lc(){if(ei)return ei;var n,a=co,c=a.length,h,g="value"in Ir?Ir.value:Ir.textContent,x=g.length;for(n=0;n<c&&a[n]===g[n];n++);var T=c-n;for(h=1;h<=T&&a[c-h]===g[x-h];h++);return ei=g.slice(n,1<h?1-h:void 0)}function ga(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function jn(){return!0}function bl(){return!1}function Ys(n){function a(c,h,g,x,T){this._reactName=c,this._targetInst=g,this.type=h,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var W in n)n.hasOwnProperty(W)&&(c=n[W],this[W]=c?c(x):x[W]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?jn:bl,this.isPropagationStopped=bl,this}return je(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=jn)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=jn)},persist:function(){},isPersistent:jn}),a}var Nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=Ys(Nn),Ei=je({},Nn,{view:0,detail:0}),uo=Ys(Ei),ho,mo,Or,ya=je({},Ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Or&&(Or&&n.type==="mousemove"?(ho=n.screenX-Or.screenX,mo=n.screenY-Or.screenY):mo=ho=0,Or=n),ho)},movementY:function(n){return"movementY"in n?n.movementY:mo}}),vl=Ys(ya),Uc=je({},ya,{dataTransfer:0}),$c=Ys(Uc),yr=je({},Ei,{relatedTarget:0}),po=Ys(yr),Fc=je({},Nn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ai=Ys(Fc),u=je({},Nn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),y=Ys(u),k=je({},Nn,{data:0}),z=Ys(k),oe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nt(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Fe[n])?!!a[n]:!1}function hs(){return Nt}var Gt=je({},Ei,{key:function(n){if(n.key){var a=oe[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=ga(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?pe[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hs,charCode:function(n){return n.type==="keypress"?ga(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ga(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ss=Ys(Gt),Hr=je({},ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sn=Ys(Hr),kn=je({},Ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hs}),_n=Ys(kn),fo=je({},Nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),wl=Ys(fo),_w=je({},ya,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Cw=Ys(_w),Pw=[9,13,27,32],$u=m&&"CompositionEvent"in window,jl=null;m&&"documentMode"in document&&(jl=document.documentMode);var Ew=m&&"TextEvent"in window&&!jl,hf=m&&(!$u||jl&&8<jl&&11>=jl),mf=" ",pf=!1;function ff(n,a){switch(n){case"keyup":return Pw.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var go=!1;function Aw(n,a){switch(n){case"compositionend":return gf(a);case"keypress":return a.which!==32?null:(pf=!0,mf);case"textInput":return n=a.data,n===mf&&pf?null:n;default:return null}}function Tw(n,a){if(go)return n==="compositionend"||!$u&&ff(n,a)?(n=Lc(),ei=co=Ir=null,go=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return hf&&a.locale!=="ko"?null:a.data;default:return null}}var Rw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xf(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!Rw[n.type]:a==="textarea"}function yf(n,a,c,h){ir(h),a=qc(a,"onChange"),0<a.length&&(c=new xa("onChange","change",null,c,h),n.push({event:c,listeners:a}))}var Nl=null,Sl=null;function Iw(n){zf(n,0)}function Bc(n){var a=wo(n);if(xe(a))return n}function Ow(n,a){if(n==="change")return a}var bf=!1;if(m){var Fu;if(m){var Bu="oninput"in document;if(!Bu){var vf=document.createElement("div");vf.setAttribute("oninput","return;"),Bu=typeof vf.oninput=="function"}Fu=Bu}else Fu=!1;bf=Fu&&(!document.documentMode||9<document.documentMode)}function wf(){Nl&&(Nl.detachEvent("onpropertychange",jf),Sl=Nl=null)}function jf(n){if(n.propertyName==="value"&&Bc(Sl)){var a=[];yf(a,Sl,n,Wr(n)),Us(Iw,a)}}function Dw(n,a,c){n==="focusin"?(wf(),Nl=a,Sl=c,Nl.attachEvent("onpropertychange",jf)):n==="focusout"&&wf()}function zw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bc(Sl)}function Mw(n,a){if(n==="click")return Bc(a)}function Lw(n,a){if(n==="input"||n==="change")return Bc(a)}function Uw(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var sn=typeof Object.is=="function"?Object.is:Uw;function kl(n,a){if(sn(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var c=Object.keys(n),h=Object.keys(a);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var g=c[h];if(!p.call(a,g)||!sn(n[g],a[g]))return!1}return!0}function Nf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sf(n,a){var c=Nf(n);n=0;for(var h;c;){if(c.nodeType===3){if(h=n+c.textContent.length,n<=a&&h>=a)return{node:c,offset:a-n};n=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Nf(c)}}function kf(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?kf(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function _f(){for(var n=window,a=Je();a instanceof n.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)n=a.contentWindow;else break;a=Je(n.document)}return a}function Vu(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}function $w(n){var a=_f(),c=n.focusedElem,h=n.selectionRange;if(a!==c&&c&&c.ownerDocument&&kf(c.ownerDocument.documentElement,c)){if(h!==null&&Vu(c)){if(a=h.start,n=h.end,n===void 0&&(n=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(n,c.value.length);else if(n=(a=c.ownerDocument||document)&&a.defaultView||window,n.getSelection){n=n.getSelection();var g=c.textContent.length,x=Math.min(h.start,g);h=h.end===void 0?x:Math.min(h.end,g),!n.extend&&x>h&&(g=h,h=x,x=g),g=Sf(c,x);var T=Sf(c,h);g&&T&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==T.node||n.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),n.removeAllRanges(),x>h?(n.addRange(a),n.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),n.addRange(a)))}}for(a=[],n=c;n=n.parentNode;)n.nodeType===1&&a.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)n=a[c],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Fw=m&&"documentMode"in document&&11>=document.documentMode,xo=null,Wu=null,_l=null,Hu=!1;function Cf(n,a,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Hu||xo==null||xo!==Je(h)||(h=xo,"selectionStart"in h&&Vu(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),_l&&kl(_l,h)||(_l=h,h=qc(Wu,"onSelect"),0<h.length&&(a=new xa("onSelect","select",null,a,c),n.push({event:a,listeners:h}),a.target=xo)))}function Vc(n,a){var c={};return c[n.toLowerCase()]=a.toLowerCase(),c["Webkit"+n]="webkit"+a,c["Moz"+n]="moz"+a,c}var yo={animationend:Vc("Animation","AnimationEnd"),animationiteration:Vc("Animation","AnimationIteration"),animationstart:Vc("Animation","AnimationStart"),transitionend:Vc("Transition","TransitionEnd")},qu={},Pf={};m&&(Pf=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function Wc(n){if(qu[n])return qu[n];if(!yo[n])return n;var a=yo[n],c;for(c in a)if(a.hasOwnProperty(c)&&c in Pf)return qu[n]=a[c];return n}var Ef=Wc("animationend"),Af=Wc("animationiteration"),Tf=Wc("animationstart"),Rf=Wc("transitionend"),If=new Map,Of="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(n,a){If.set(n,a),l(a,[n])}for(var Gu=0;Gu<Of.length;Gu++){var Ku=Of[Gu],Bw=Ku.toLowerCase(),Vw=Ku[0].toUpperCase()+Ku.slice(1);Ti(Bw,"on"+Vw)}Ti(Ef,"onAnimationEnd"),Ti(Af,"onAnimationIteration"),Ti(Tf,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(Rf,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ww=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cl));function Df(n,a,c){var h=n.type||"unknown-event";n.currentTarget=c,Gn(h,a,void 0,n),n.currentTarget=null}function zf(n,a){a=(a&4)!==0;for(var c=0;c<n.length;c++){var h=n[c],g=h.event;h=h.listeners;e:{var x=void 0;if(a)for(var T=h.length-1;0<=T;T--){var W=h[T],J=W.instance,he=W.currentTarget;if(W=W.listener,J!==x&&g.isPropagationStopped())break e;Df(g,W,he),x=J}else for(T=0;T<h.length;T++){if(W=h[T],J=W.instance,he=W.currentTarget,W=W.listener,J!==x&&g.isPropagationStopped())break e;Df(g,W,he),x=J}}}if(Wt)throw n=It,Wt=!1,It=null,n}function ss(n,a){var c=a[sh];c===void 0&&(c=a[sh]=new Set);var h=n+"__bubble";c.has(h)||(Mf(a,n,2,!1),c.add(h))}function Ju(n,a,c){var h=0;a&&(h|=4),Mf(c,n,h,a)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function Pl(n){if(!n[Hc]){n[Hc]=!0,i.forEach(function(c){c!=="selectionchange"&&(Ww.has(c)||Ju(c,!1,n),Ju(c,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Hc]||(a[Hc]=!0,Ju("selectionchange",!1,a))}}function Mf(n,a,c,h){switch(lo(a)){case 1:var g=vn;break;case 4:g=Mc;break;default:g=yl}c=g.bind(null,a,c,n),g=void 0,!Ye||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(a,c,{capture:!0,passive:g}):n.addEventListener(a,c,!0):g!==void 0?n.addEventListener(a,c,{passive:g}):n.addEventListener(a,c,!1)}function Zu(n,a,c,h,g){var x=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var W=h.stateNode.containerInfo;if(W===g||W.nodeType===8&&W.parentNode===g)break;if(T===4)for(T=h.return;T!==null;){var J=T.tag;if((J===3||J===4)&&(J=T.stateNode.containerInfo,J===g||J.nodeType===8&&J.parentNode===g))return;T=T.return}for(;W!==null;){if(T=ba(W),T===null)return;if(J=T.tag,J===5||J===6){h=x=T;continue e}W=W.parentNode}}h=h.return}Us(function(){var he=x,Te=Wr(c),Oe=[];e:{var _e=If.get(n);if(_e!==void 0){var Ge=xa,Xe=n;switch(n){case"keypress":if(ga(c)===0)break e;case"keydown":case"keyup":Ge=Ss;break;case"focusin":Xe="focus",Ge=po;break;case"focusout":Xe="blur",Ge=po;break;case"beforeblur":case"afterblur":Ge=po;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=$c;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=_n;break;case Ef:case Af:case Tf:Ge=Ai;break;case Rf:Ge=wl;break;case"scroll":Ge=uo;break;case"wheel":Ge=Cw;break;case"copy":case"cut":case"paste":Ge=y;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=Sn}var Qe=(a&4)!==0,ws=!Qe&&n==="scroll",ie=Qe?_e!==null?_e+"Capture":null:_e;Qe=[];for(var Y=he,le;Y!==null;){le=Y;var Le=le.stateNode;if(le.tag===5&&Le!==null&&(le=Le,ie!==null&&(Le=Ne(Y,ie),Le!=null&&Qe.push(El(Y,Le,le)))),ws)break;Y=Y.return}0<Qe.length&&(_e=new Ge(_e,Xe,null,c,Te),Oe.push({event:_e,listeners:Qe}))}}if((a&7)===0){e:{if(_e=n==="mouseover"||n==="pointerover",Ge=n==="mouseout"||n==="pointerout",_e&&c!==Ls&&(Xe=c.relatedTarget||c.fromElement)&&(ba(Xe)||Xe[ti]))break e;if((Ge||_e)&&(_e=Te.window===Te?Te:(_e=Te.ownerDocument)?_e.defaultView||_e.parentWindow:window,Ge?(Xe=c.relatedTarget||c.toElement,Ge=he,Xe=Xe?ba(Xe):null,Xe!==null&&(ws=ar(Xe),Xe!==ws||Xe.tag!==5&&Xe.tag!==6)&&(Xe=null)):(Ge=null,Xe=he),Ge!==Xe)){if(Qe=vl,Le="onMouseLeave",ie="onMouseEnter",Y="mouse",(n==="pointerout"||n==="pointerover")&&(Qe=Sn,Le="onPointerLeave",ie="onPointerEnter",Y="pointer"),ws=Ge==null?_e:wo(Ge),le=Xe==null?_e:wo(Xe),_e=new Qe(Le,Y+"leave",Ge,c,Te),_e.target=ws,_e.relatedTarget=le,Le=null,ba(Te)===he&&(Qe=new Qe(ie,Y+"enter",Xe,c,Te),Qe.target=le,Qe.relatedTarget=ws,Le=Qe),ws=Le,Ge&&Xe)t:{for(Qe=Ge,ie=Xe,Y=0,le=Qe;le;le=bo(le))Y++;for(le=0,Le=ie;Le;Le=bo(Le))le++;for(;0<Y-le;)Qe=bo(Qe),Y--;for(;0<le-Y;)ie=bo(ie),le--;for(;Y--;){if(Qe===ie||ie!==null&&Qe===ie.alternate)break t;Qe=bo(Qe),ie=bo(ie)}Qe=null}else Qe=null;Ge!==null&&Lf(Oe,_e,Ge,Qe,!1),Xe!==null&&ws!==null&&Lf(Oe,ws,Xe,Qe,!0)}}e:{if(_e=he?wo(he):window,Ge=_e.nodeName&&_e.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&_e.type==="file")var st=Ow;else if(xf(_e))if(bf)st=Lw;else{st=zw;var ot=Dw}else(Ge=_e.nodeName)&&Ge.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(st=Mw);if(st&&(st=st(n,he))){yf(Oe,st,c,Te);break e}ot&&ot(n,_e,he),n==="focusout"&&(ot=_e._wrapperState)&&ot.controlled&&_e.type==="number"&&we(_e,"number",_e.value)}switch(ot=he?wo(he):window,n){case"focusin":(xf(ot)||ot.contentEditable==="true")&&(xo=ot,Wu=he,_l=null);break;case"focusout":_l=Wu=xo=null;break;case"mousedown":Hu=!0;break;case"contextmenu":case"mouseup":case"dragend":Hu=!1,Cf(Oe,c,Te);break;case"selectionchange":if(Fw)break;case"keydown":case"keyup":Cf(Oe,c,Te)}var lt;if($u)e:{switch(n){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else go?ff(n,c)&&(ft="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(ft="onCompositionStart");ft&&(hf&&c.locale!=="ko"&&(go||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&go&&(lt=Lc()):(Ir=Te,co="value"in Ir?Ir.value:Ir.textContent,go=!0)),ot=qc(he,ft),0<ot.length&&(ft=new z(ft,n,null,c,Te),Oe.push({event:ft,listeners:ot}),lt?ft.data=lt:(lt=gf(c),lt!==null&&(ft.data=lt)))),(lt=Ew?Aw(n,c):Tw(n,c))&&(he=qc(he,"onBeforeInput"),0<he.length&&(Te=new z("onBeforeInput","beforeinput",null,c,Te),Oe.push({event:Te,listeners:he}),Te.data=lt))}zf(Oe,a)})}function El(n,a,c){return{instance:n,listener:a,currentTarget:c}}function qc(n,a){for(var c=a+"Capture",h=[];n!==null;){var g=n,x=g.stateNode;g.tag===5&&x!==null&&(g=x,x=Ne(n,c),x!=null&&h.unshift(El(n,x,g)),x=Ne(n,a),x!=null&&h.push(El(n,x,g))),n=n.return}return h}function bo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Lf(n,a,c,h,g){for(var x=a._reactName,T=[];c!==null&&c!==h;){var W=c,J=W.alternate,he=W.stateNode;if(J!==null&&J===h)break;W.tag===5&&he!==null&&(W=he,g?(J=Ne(c,x),J!=null&&T.unshift(El(c,J,W))):g||(J=Ne(c,x),J!=null&&T.push(El(c,J,W)))),c=c.return}T.length!==0&&n.push({event:a,listeners:T})}var Hw=/\r\n?/g,qw=/\u0000|\uFFFD/g;function Uf(n){return(typeof n=="string"?n:""+n).replace(Hw,`
`).replace(qw,"")}function Gc(n,a,c){if(a=Uf(a),Uf(n)!==a&&c)throw Error(r(425))}function Kc(){}var Yu=null,Xu=null;function Qu(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var eh=typeof setTimeout=="function"?setTimeout:void 0,Gw=typeof clearTimeout=="function"?clearTimeout:void 0,$f=typeof Promise=="function"?Promise:void 0,Kw=typeof queueMicrotask=="function"?queueMicrotask:typeof $f<"u"?function(n){return $f.resolve(null).then(n).catch(Jw)}:eh;function Jw(n){setTimeout(function(){throw n})}function th(n,a){var c=a,h=0;do{var g=c.nextSibling;if(n.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(h===0){n.removeChild(g),Pi(a);return}h--}else c!=="$"&&c!=="$?"&&c!=="$!"||h++;c=g}while(c);Pi(a)}function Ri(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return n}function Ff(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return n;a--}else c==="/$"&&a++}n=n.previousSibling}return null}var vo=Math.random().toString(36).slice(2),Cn="__reactFiber$"+vo,Al="__reactProps$"+vo,ti="__reactContainer$"+vo,sh="__reactEvents$"+vo,Zw="__reactListeners$"+vo,Yw="__reactHandles$"+vo;function ba(n){var a=n[Cn];if(a)return a;for(var c=n.parentNode;c;){if(a=c[ti]||c[Cn]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(n=Ff(n);n!==null;){if(c=n[Cn])return c;n=Ff(n)}return a}n=c,c=n.parentNode}return null}function Tl(n){return n=n[Cn]||n[ti],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function wo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function Jc(n){return n[Al]||null}var rh=[],jo=-1;function Ii(n){return{current:n}}function rs(n){0>jo||(n.current=rh[jo],rh[jo]=null,jo--)}function Qt(n,a){jo++,rh[jo]=n.current,n.current=a}var Oi={},Xs=Ii(Oi),br=Ii(!1),va=Oi;function No(n,a){var c=n.type.contextTypes;if(!c)return Oi;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===a)return h.__reactInternalMemoizedMaskedChildContext;var g={},x;for(x in c)g[x]=a[x];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=a,n.__reactInternalMemoizedMaskedChildContext=g),g}function vr(n){return n=n.childContextTypes,n!=null}function Zc(){rs(br),rs(Xs)}function Bf(n,a,c){if(Xs.current!==Oi)throw Error(r(168));Qt(Xs,a),Qt(br,c)}function Vf(n,a,c){var h=n.stateNode;if(a=a.childContextTypes,typeof h.getChildContext!="function")return c;h=h.getChildContext();for(var g in h)if(!(g in a))throw Error(r(108,be(n)||"Unknown",g));return je({},c,h)}function Yc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Oi,va=Xs.current,Qt(Xs,n),Qt(br,br.current),!0}function Wf(n,a,c){var h=n.stateNode;if(!h)throw Error(r(169));c?(n=Vf(n,a,va),h.__reactInternalMemoizedMergedChildContext=n,rs(br),rs(Xs),Qt(Xs,n)):rs(br),Qt(br,c)}var si=null,Xc=!1,nh=!1;function Hf(n){si===null?si=[n]:si.push(n)}function Xw(n){Xc=!0,Hf(n)}function Di(){if(!nh&&si!==null){nh=!0;var n=0,a=Z;try{var c=si;for(Z=1;n<c.length;n++){var h=c[n];do h=h(!0);while(h!==null)}si=null,Xc=!1}catch(g){throw si!==null&&(si=si.slice(n+1)),Jn(ke,Di),g}finally{Z=a,nh=!1}}return null}var So=[],ko=0,Qc=null,ed=0,qr=[],Gr=0,wa=null,ri=1,ni="";function ja(n,a){So[ko++]=ed,So[ko++]=Qc,Qc=n,ed=a}function qf(n,a,c){qr[Gr++]=ri,qr[Gr++]=ni,qr[Gr++]=wa,wa=n;var h=ri;n=ni;var g=32-St(h)-1;h&=~(1<<g),c+=1;var x=32-St(a)+g;if(30<x){var T=g-g%5;x=(h&(1<<T)-1).toString(32),h>>=T,g-=T,ri=1<<32-St(a)+g|c<<g|h,ni=x+n}else ri=1<<x|c<<g|h,ni=n}function ih(n){n.return!==null&&(ja(n,1),qf(n,1,0))}function ah(n){for(;n===Qc;)Qc=So[--ko],So[ko]=null,ed=So[--ko],So[ko]=null;for(;n===wa;)wa=qr[--Gr],qr[Gr]=null,ni=qr[--Gr],qr[Gr]=null,ri=qr[--Gr],qr[Gr]=null}var Dr=null,zr=null,os=!1,rn=null;function Gf(n,a){var c=Yr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=n,a=n.deletions,a===null?(n.deletions=[c],n.flags|=16):a.push(c)}function Kf(n,a){switch(n.tag){case 5:var c=n.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(n.stateNode=a,Dr=n,zr=Ri(a.firstChild),!0):!1;case 6:return a=n.pendingProps===""||a.nodeType!==3?null:a,a!==null?(n.stateNode=a,Dr=n,zr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=wa!==null?{id:ri,overflow:ni}:null,n.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=Yr(18,null,null,0),c.stateNode=a,c.return=n,n.child=c,Dr=n,zr=null,!0):!1;default:return!1}}function oh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function lh(n){if(os){var a=zr;if(a){var c=a;if(!Kf(n,a)){if(oh(n))throw Error(r(418));a=Ri(c.nextSibling);var h=Dr;a&&Kf(n,a)?Gf(h,c):(n.flags=n.flags&-4097|2,os=!1,Dr=n)}}else{if(oh(n))throw Error(r(418));n.flags=n.flags&-4097|2,os=!1,Dr=n}}}function Jf(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Dr=n}function td(n){if(n!==Dr)return!1;if(!os)return Jf(n),os=!0,!1;var a;if((a=n.tag!==3)&&!(a=n.tag!==5)&&(a=n.type,a=a!=="head"&&a!=="body"&&!Qu(n.type,n.memoizedProps)),a&&(a=zr)){if(oh(n))throw Zf(),Error(r(418));for(;a;)Gf(n,a),a=Ri(a.nextSibling)}if(Jf(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"){if(a===0){zr=Ri(n.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}n=n.nextSibling}zr=null}}else zr=Dr?Ri(n.stateNode.nextSibling):null;return!0}function Zf(){for(var n=zr;n;)n=Ri(n.nextSibling)}function _o(){zr=Dr=null,os=!1}function ch(n){rn===null?rn=[n]:rn.push(n)}var Qw=te.ReactCurrentBatchConfig;function Rl(n,a,c){if(n=c.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(r(309));var h=c.stateNode}if(!h)throw Error(r(147,n));var g=h,x=""+n;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===x?a.ref:(a=function(T){var W=g.refs;T===null?delete W[x]:W[x]=T},a._stringRef=x,a)}if(typeof n!="string")throw Error(r(284));if(!c._owner)throw Error(r(290,n))}return n}function sd(n,a){throw n=Object.prototype.toString.call(a),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n))}function Yf(n){var a=n._init;return a(n._payload)}function Xf(n){function a(ie,Y){if(n){var le=ie.deletions;le===null?(ie.deletions=[Y],ie.flags|=16):le.push(Y)}}function c(ie,Y){if(!n)return null;for(;Y!==null;)a(ie,Y),Y=Y.sibling;return null}function h(ie,Y){for(ie=new Map;Y!==null;)Y.key!==null?ie.set(Y.key,Y):ie.set(Y.index,Y),Y=Y.sibling;return ie}function g(ie,Y){return ie=Vi(ie,Y),ie.index=0,ie.sibling=null,ie}function x(ie,Y,le){return ie.index=le,n?(le=ie.alternate,le!==null?(le=le.index,le<Y?(ie.flags|=2,Y):le):(ie.flags|=2,Y)):(ie.flags|=1048576,Y)}function T(ie){return n&&ie.alternate===null&&(ie.flags|=2),ie}function W(ie,Y,le,Le){return Y===null||Y.tag!==6?(Y=em(le,ie.mode,Le),Y.return=ie,Y):(Y=g(Y,le),Y.return=ie,Y)}function J(ie,Y,le,Le){var st=le.type;return st===E?Te(ie,Y,le.props.children,Le,le.key):Y!==null&&(Y.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Se&&Yf(st)===Y.type)?(Le=g(Y,le.props),Le.ref=Rl(ie,Y,le),Le.return=ie,Le):(Le=_d(le.type,le.key,le.props,null,ie.mode,Le),Le.ref=Rl(ie,Y,le),Le.return=ie,Le)}function he(ie,Y,le,Le){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==le.containerInfo||Y.stateNode.implementation!==le.implementation?(Y=tm(le,ie.mode,Le),Y.return=ie,Y):(Y=g(Y,le.children||[]),Y.return=ie,Y)}function Te(ie,Y,le,Le,st){return Y===null||Y.tag!==7?(Y=Aa(le,ie.mode,Le,st),Y.return=ie,Y):(Y=g(Y,le),Y.return=ie,Y)}function Oe(ie,Y,le){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=em(""+Y,ie.mode,le),Y.return=ie,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case H:return le=_d(Y.type,Y.key,Y.props,null,ie.mode,le),le.ref=Rl(ie,null,Y),le.return=ie,le;case U:return Y=tm(Y,ie.mode,le),Y.return=ie,Y;case Se:var Le=Y._init;return Oe(ie,Le(Y._payload),le)}if(Ue(Y)||ye(Y))return Y=Aa(Y,ie.mode,le,null),Y.return=ie,Y;sd(ie,Y)}return null}function _e(ie,Y,le,Le){var st=Y!==null?Y.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return st!==null?null:W(ie,Y,""+le,Le);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case H:return le.key===st?J(ie,Y,le,Le):null;case U:return le.key===st?he(ie,Y,le,Le):null;case Se:return st=le._init,_e(ie,Y,st(le._payload),Le)}if(Ue(le)||ye(le))return st!==null?null:Te(ie,Y,le,Le,null);sd(ie,le)}return null}function Ge(ie,Y,le,Le,st){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return ie=ie.get(le)||null,W(Y,ie,""+Le,st);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case H:return ie=ie.get(Le.key===null?le:Le.key)||null,J(Y,ie,Le,st);case U:return ie=ie.get(Le.key===null?le:Le.key)||null,he(Y,ie,Le,st);case Se:var ot=Le._init;return Ge(ie,Y,le,ot(Le._payload),st)}if(Ue(Le)||ye(Le))return ie=ie.get(le)||null,Te(Y,ie,Le,st,null);sd(Y,Le)}return null}function Xe(ie,Y,le,Le){for(var st=null,ot=null,lt=Y,ft=Y=0,Bs=null;lt!==null&&ft<le.length;ft++){lt.index>ft?(Bs=lt,lt=null):Bs=lt.sibling;var $t=_e(ie,lt,le[ft],Le);if($t===null){lt===null&&(lt=Bs);break}n&&lt&&$t.alternate===null&&a(ie,lt),Y=x($t,Y,ft),ot===null?st=$t:ot.sibling=$t,ot=$t,lt=Bs}if(ft===le.length)return c(ie,lt),os&&ja(ie,ft),st;if(lt===null){for(;ft<le.length;ft++)lt=Oe(ie,le[ft],Le),lt!==null&&(Y=x(lt,Y,ft),ot===null?st=lt:ot.sibling=lt,ot=lt);return os&&ja(ie,ft),st}for(lt=h(ie,lt);ft<le.length;ft++)Bs=Ge(lt,ie,ft,le[ft],Le),Bs!==null&&(n&&Bs.alternate!==null&&lt.delete(Bs.key===null?ft:Bs.key),Y=x(Bs,Y,ft),ot===null?st=Bs:ot.sibling=Bs,ot=Bs);return n&&lt.forEach(function(Wi){return a(ie,Wi)}),os&&ja(ie,ft),st}function Qe(ie,Y,le,Le){var st=ye(le);if(typeof st!="function")throw Error(r(150));if(le=st.call(le),le==null)throw Error(r(151));for(var ot=st=null,lt=Y,ft=Y=0,Bs=null,$t=le.next();lt!==null&&!$t.done;ft++,$t=le.next()){lt.index>ft?(Bs=lt,lt=null):Bs=lt.sibling;var Wi=_e(ie,lt,$t.value,Le);if(Wi===null){lt===null&&(lt=Bs);break}n&&lt&&Wi.alternate===null&&a(ie,lt),Y=x(Wi,Y,ft),ot===null?st=Wi:ot.sibling=Wi,ot=Wi,lt=Bs}if($t.done)return c(ie,lt),os&&ja(ie,ft),st;if(lt===null){for(;!$t.done;ft++,$t=le.next())$t=Oe(ie,$t.value,Le),$t!==null&&(Y=x($t,Y,ft),ot===null?st=$t:ot.sibling=$t,ot=$t);return os&&ja(ie,ft),st}for(lt=h(ie,lt);!$t.done;ft++,$t=le.next())$t=Ge(lt,ie,ft,$t.value,Le),$t!==null&&(n&&$t.alternate!==null&&lt.delete($t.key===null?ft:$t.key),Y=x($t,Y,ft),ot===null?st=$t:ot.sibling=$t,ot=$t);return n&&lt.forEach(function(Rj){return a(ie,Rj)}),os&&ja(ie,ft),st}function ws(ie,Y,le,Le){if(typeof le=="object"&&le!==null&&le.type===E&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case H:e:{for(var st=le.key,ot=Y;ot!==null;){if(ot.key===st){if(st=le.type,st===E){if(ot.tag===7){c(ie,ot.sibling),Y=g(ot,le.props.children),Y.return=ie,ie=Y;break e}}else if(ot.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Se&&Yf(st)===ot.type){c(ie,ot.sibling),Y=g(ot,le.props),Y.ref=Rl(ie,ot,le),Y.return=ie,ie=Y;break e}c(ie,ot);break}else a(ie,ot);ot=ot.sibling}le.type===E?(Y=Aa(le.props.children,ie.mode,Le,le.key),Y.return=ie,ie=Y):(Le=_d(le.type,le.key,le.props,null,ie.mode,Le),Le.ref=Rl(ie,Y,le),Le.return=ie,ie=Le)}return T(ie);case U:e:{for(ot=le.key;Y!==null;){if(Y.key===ot)if(Y.tag===4&&Y.stateNode.containerInfo===le.containerInfo&&Y.stateNode.implementation===le.implementation){c(ie,Y.sibling),Y=g(Y,le.children||[]),Y.return=ie,ie=Y;break e}else{c(ie,Y);break}else a(ie,Y);Y=Y.sibling}Y=tm(le,ie.mode,Le),Y.return=ie,ie=Y}return T(ie);case Se:return ot=le._init,ws(ie,Y,ot(le._payload),Le)}if(Ue(le))return Xe(ie,Y,le,Le);if(ye(le))return Qe(ie,Y,le,Le);sd(ie,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,Y!==null&&Y.tag===6?(c(ie,Y.sibling),Y=g(Y,le),Y.return=ie,ie=Y):(c(ie,Y),Y=em(le,ie.mode,Le),Y.return=ie,ie=Y),T(ie)):c(ie,Y)}return ws}var Co=Xf(!0),Qf=Xf(!1),rd=Ii(null),nd=null,Po=null,dh=null;function uh(){dh=Po=nd=null}function hh(n){var a=rd.current;rs(rd),n._currentValue=a}function mh(n,a,c){for(;n!==null;){var h=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),n===c)break;n=n.return}}function Eo(n,a){nd=n,dh=Po=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&a)!==0&&(wr=!0),n.firstContext=null)}function Kr(n){var a=n._currentValue;if(dh!==n)if(n={context:n,memoizedValue:a,next:null},Po===null){if(nd===null)throw Error(r(308));Po=n,nd.dependencies={lanes:0,firstContext:n}}else Po=Po.next=n;return a}var Na=null;function ph(n){Na===null?Na=[n]:Na.push(n)}function eg(n,a,c,h){var g=a.interleaved;return g===null?(c.next=c,ph(a)):(c.next=g.next,g.next=c),a.interleaved=c,ii(n,h)}function ii(n,a){n.lanes|=a;var c=n.alternate;for(c!==null&&(c.lanes|=a),c=n,n=n.return;n!==null;)n.childLanes|=a,c=n.alternate,c!==null&&(c.childLanes|=a),c=n,n=n.return;return c.tag===3?c.stateNode:null}var zi=!1;function fh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tg(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ai(n,a){return{eventTime:n,lane:a,tag:0,payload:null,callback:null,next:null}}function Mi(n,a,c){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Ut&2)!==0){var g=h.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),h.pending=a,ii(n,c)}return g=h.interleaved,g===null?(a.next=a,ph(h)):(a.next=g.next,g.next=a),h.interleaved=a,ii(n,c)}function id(n,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var h=a.lanes;h&=n.pendingLanes,c|=h,a.lanes=c,A(n,c)}}function sg(n,a){var c=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var g=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var T={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};x===null?g=x=T:x=x.next=T,c=c.next}while(c!==null);x===null?g=x=a:x=x.next=a}else g=x=a;c={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:x,shared:h.shared,effects:h.effects},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=a:n.next=a,c.lastBaseUpdate=a}function ad(n,a,c,h){var g=n.updateQueue;zi=!1;var x=g.firstBaseUpdate,T=g.lastBaseUpdate,W=g.shared.pending;if(W!==null){g.shared.pending=null;var J=W,he=J.next;J.next=null,T===null?x=he:T.next=he,T=J;var Te=n.alternate;Te!==null&&(Te=Te.updateQueue,W=Te.lastBaseUpdate,W!==T&&(W===null?Te.firstBaseUpdate=he:W.next=he,Te.lastBaseUpdate=J))}if(x!==null){var Oe=g.baseState;T=0,Te=he=J=null,W=x;do{var _e=W.lane,Ge=W.eventTime;if((h&_e)===_e){Te!==null&&(Te=Te.next={eventTime:Ge,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var Xe=n,Qe=W;switch(_e=a,Ge=c,Qe.tag){case 1:if(Xe=Qe.payload,typeof Xe=="function"){Oe=Xe.call(Ge,Oe,_e);break e}Oe=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=Qe.payload,_e=typeof Xe=="function"?Xe.call(Ge,Oe,_e):Xe,_e==null)break e;Oe=je({},Oe,_e);break e;case 2:zi=!0}}W.callback!==null&&W.lane!==0&&(n.flags|=64,_e=g.effects,_e===null?g.effects=[W]:_e.push(W))}else Ge={eventTime:Ge,lane:_e,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Te===null?(he=Te=Ge,J=Oe):Te=Te.next=Ge,T|=_e;if(W=W.next,W===null){if(W=g.shared.pending,W===null)break;_e=W,W=_e.next,_e.next=null,g.lastBaseUpdate=_e,g.shared.pending=null}}while(!0);if(Te===null&&(J=Oe),g.baseState=J,g.firstBaseUpdate=he,g.lastBaseUpdate=Te,a=g.shared.interleaved,a!==null){g=a;do T|=g.lane,g=g.next;while(g!==a)}else x===null&&(g.shared.lanes=0);_a|=T,n.lanes=T,n.memoizedState=Oe}}function rg(n,a,c){if(n=a.effects,a.effects=null,n!==null)for(a=0;a<n.length;a++){var h=n[a],g=h.callback;if(g!==null){if(h.callback=null,h=c,typeof g!="function")throw Error(r(191,g));g.call(h)}}}var Il={},Pn=Ii(Il),Ol=Ii(Il),Dl=Ii(Il);function Sa(n){if(n===Il)throw Error(r(174));return n}function gh(n,a){switch(Qt(Dl,a),Qt(Ol,n),Qt(Pn,Il),n=a.nodeType,n){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Kt(null,"");break;default:n=n===8?a.parentNode:a,a=n.namespaceURI||null,n=n.tagName,a=Kt(a,n)}rs(Pn),Qt(Pn,a)}function Ao(){rs(Pn),rs(Ol),rs(Dl)}function ng(n){Sa(Dl.current);var a=Sa(Pn.current),c=Kt(a,n.type);a!==c&&(Qt(Ol,n),Qt(Pn,c))}function xh(n){Ol.current===n&&(rs(Pn),rs(Ol))}var ms=Ii(0);function od(n){for(var a=n;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var yh=[];function bh(){for(var n=0;n<yh.length;n++)yh[n]._workInProgressVersionPrimary=null;yh.length=0}var ld=te.ReactCurrentDispatcher,vh=te.ReactCurrentBatchConfig,ka=0,ps=null,Is=null,$s=null,cd=!1,zl=!1,Ml=0,ej=0;function Qs(){throw Error(r(321))}function wh(n,a){if(a===null)return!1;for(var c=0;c<a.length&&c<n.length;c++)if(!sn(n[c],a[c]))return!1;return!0}function jh(n,a,c,h,g,x){if(ka=x,ps=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ld.current=n===null||n.memoizedState===null?nj:ij,n=c(h,g),zl){x=0;do{if(zl=!1,Ml=0,25<=x)throw Error(r(301));x+=1,$s=Is=null,a.updateQueue=null,ld.current=aj,n=c(h,g)}while(zl)}if(ld.current=hd,a=Is!==null&&Is.next!==null,ka=0,$s=Is=ps=null,cd=!1,a)throw Error(r(300));return n}function Nh(){var n=Ml!==0;return Ml=0,n}function En(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $s===null?ps.memoizedState=$s=n:$s=$s.next=n,$s}function Jr(){if(Is===null){var n=ps.alternate;n=n!==null?n.memoizedState:null}else n=Is.next;var a=$s===null?ps.memoizedState:$s.next;if(a!==null)$s=a,Is=n;else{if(n===null)throw Error(r(310));Is=n,n={memoizedState:Is.memoizedState,baseState:Is.baseState,baseQueue:Is.baseQueue,queue:Is.queue,next:null},$s===null?ps.memoizedState=$s=n:$s=$s.next=n}return $s}function Ll(n,a){return typeof a=="function"?a(n):a}function Sh(n){var a=Jr(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=n;var h=Is,g=h.baseQueue,x=c.pending;if(x!==null){if(g!==null){var T=g.next;g.next=x.next,x.next=T}h.baseQueue=g=x,c.pending=null}if(g!==null){x=g.next,h=h.baseState;var W=T=null,J=null,he=x;do{var Te=he.lane;if((ka&Te)===Te)J!==null&&(J=J.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),h=he.hasEagerState?he.eagerState:n(h,he.action);else{var Oe={lane:Te,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};J===null?(W=J=Oe,T=h):J=J.next=Oe,ps.lanes|=Te,_a|=Te}he=he.next}while(he!==null&&he!==x);J===null?T=h:J.next=W,sn(h,a.memoizedState)||(wr=!0),a.memoizedState=h,a.baseState=T,a.baseQueue=J,c.lastRenderedState=h}if(n=c.interleaved,n!==null){g=n;do x=g.lane,ps.lanes|=x,_a|=x,g=g.next;while(g!==n)}else g===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function kh(n){var a=Jr(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=n;var h=c.dispatch,g=c.pending,x=a.memoizedState;if(g!==null){c.pending=null;var T=g=g.next;do x=n(x,T.action),T=T.next;while(T!==g);sn(x,a.memoizedState)||(wr=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),c.lastRenderedState=x}return[x,h]}function ig(){}function ag(n,a){var c=ps,h=Jr(),g=a(),x=!sn(h.memoizedState,g);if(x&&(h.memoizedState=g,wr=!0),h=h.queue,_h(cg.bind(null,c,h,n),[n]),h.getSnapshot!==a||x||$s!==null&&$s.memoizedState.tag&1){if(c.flags|=2048,Ul(9,lg.bind(null,c,h,g,a),void 0,null),Fs===null)throw Error(r(349));(ka&30)!==0||og(c,a,g)}return g}function og(n,a,c){n.flags|=16384,n={getSnapshot:a,value:c},a=ps.updateQueue,a===null?(a={lastEffect:null,stores:null},ps.updateQueue=a,a.stores=[n]):(c=a.stores,c===null?a.stores=[n]:c.push(n))}function lg(n,a,c,h){a.value=c,a.getSnapshot=h,dg(a)&&ug(n)}function cg(n,a,c){return c(function(){dg(a)&&ug(n)})}function dg(n){var a=n.getSnapshot;n=n.value;try{var c=a();return!sn(n,c)}catch{return!0}}function ug(n){var a=ii(n,1);a!==null&&ln(a,n,1,-1)}function hg(n){var a=En();return typeof n=="function"&&(n=n()),a.memoizedState=a.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:n},a.queue=n,n=n.dispatch=rj.bind(null,ps,n),[a.memoizedState,n]}function Ul(n,a,c,h){return n={tag:n,create:a,destroy:c,deps:h,next:null},a=ps.updateQueue,a===null?(a={lastEffect:null,stores:null},ps.updateQueue=a,a.lastEffect=n.next=n):(c=a.lastEffect,c===null?a.lastEffect=n.next=n:(h=c.next,c.next=n,n.next=h,a.lastEffect=n)),n}function mg(){return Jr().memoizedState}function dd(n,a,c,h){var g=En();ps.flags|=n,g.memoizedState=Ul(1|a,c,void 0,h===void 0?null:h)}function ud(n,a,c,h){var g=Jr();h=h===void 0?null:h;var x=void 0;if(Is!==null){var T=Is.memoizedState;if(x=T.destroy,h!==null&&wh(h,T.deps)){g.memoizedState=Ul(a,c,x,h);return}}ps.flags|=n,g.memoizedState=Ul(1|a,c,x,h)}function pg(n,a){return dd(8390656,8,n,a)}function _h(n,a){return ud(2048,8,n,a)}function fg(n,a){return ud(4,2,n,a)}function gg(n,a){return ud(4,4,n,a)}function xg(n,a){if(typeof a=="function")return n=n(),a(n),function(){a(null)};if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function yg(n,a,c){return c=c!=null?c.concat([n]):null,ud(4,4,xg.bind(null,a,n),c)}function Ch(){}function bg(n,a){var c=Jr();a=a===void 0?null:a;var h=c.memoizedState;return h!==null&&a!==null&&wh(a,h[1])?h[0]:(c.memoizedState=[n,a],n)}function vg(n,a){var c=Jr();a=a===void 0?null:a;var h=c.memoizedState;return h!==null&&a!==null&&wh(a,h[1])?h[0]:(n=n(),c.memoizedState=[n,a],n)}function wg(n,a,c){return(ka&21)===0?(n.baseState&&(n.baseState=!1,wr=!0),n.memoizedState=c):(sn(c,a)||(c=yn(),ps.lanes|=c,_a|=c,n.baseState=!0),a)}function tj(n,a){var c=Z;Z=c!==0&&4>c?c:4,n(!0);var h=vh.transition;vh.transition={};try{n(!1),a()}finally{Z=c,vh.transition=h}}function jg(){return Jr().memoizedState}function sj(n,a,c){var h=Fi(n);if(c={lane:h,action:c,hasEagerState:!1,eagerState:null,next:null},Ng(n))Sg(a,c);else if(c=eg(n,a,c,h),c!==null){var g=lr();ln(c,n,h,g),kg(c,a,h)}}function rj(n,a,c){var h=Fi(n),g={lane:h,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ng(n))Sg(a,g);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var T=a.lastRenderedState,W=x(T,c);if(g.hasEagerState=!0,g.eagerState=W,sn(W,T)){var J=a.interleaved;J===null?(g.next=g,ph(a)):(g.next=J.next,J.next=g),a.interleaved=g;return}}catch{}finally{}c=eg(n,a,g,h),c!==null&&(g=lr(),ln(c,n,h,g),kg(c,a,h))}}function Ng(n){var a=n.alternate;return n===ps||a!==null&&a===ps}function Sg(n,a){zl=cd=!0;var c=n.pending;c===null?a.next=a:(a.next=c.next,c.next=a),n.pending=a}function kg(n,a,c){if((c&4194240)!==0){var h=a.lanes;h&=n.pendingLanes,c|=h,a.lanes=c,A(n,c)}}var hd={readContext:Kr,useCallback:Qs,useContext:Qs,useEffect:Qs,useImperativeHandle:Qs,useInsertionEffect:Qs,useLayoutEffect:Qs,useMemo:Qs,useReducer:Qs,useRef:Qs,useState:Qs,useDebugValue:Qs,useDeferredValue:Qs,useTransition:Qs,useMutableSource:Qs,useSyncExternalStore:Qs,useId:Qs,unstable_isNewReconciler:!1},nj={readContext:Kr,useCallback:function(n,a){return En().memoizedState=[n,a===void 0?null:a],n},useContext:Kr,useEffect:pg,useImperativeHandle:function(n,a,c){return c=c!=null?c.concat([n]):null,dd(4194308,4,xg.bind(null,a,n),c)},useLayoutEffect:function(n,a){return dd(4194308,4,n,a)},useInsertionEffect:function(n,a){return dd(4,2,n,a)},useMemo:function(n,a){var c=En();return a=a===void 0?null:a,n=n(),c.memoizedState=[n,a],n},useReducer:function(n,a,c){var h=En();return a=c!==void 0?c(a):a,h.memoizedState=h.baseState=a,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:a},h.queue=n,n=n.dispatch=sj.bind(null,ps,n),[h.memoizedState,n]},useRef:function(n){var a=En();return n={current:n},a.memoizedState=n},useState:hg,useDebugValue:Ch,useDeferredValue:function(n){return En().memoizedState=n},useTransition:function(){var n=hg(!1),a=n[0];return n=tj.bind(null,n[1]),En().memoizedState=n,[a,n]},useMutableSource:function(){},useSyncExternalStore:function(n,a,c){var h=ps,g=En();if(os){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),Fs===null)throw Error(r(349));(ka&30)!==0||og(h,a,c)}g.memoizedState=c;var x={value:c,getSnapshot:a};return g.queue=x,pg(cg.bind(null,h,x,n),[n]),h.flags|=2048,Ul(9,lg.bind(null,h,x,c,a),void 0,null),c},useId:function(){var n=En(),a=Fs.identifierPrefix;if(os){var c=ni,h=ri;c=(h&~(1<<32-St(h)-1)).toString(32)+c,a=":"+a+"R"+c,c=Ml++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=ej++,a=":"+a+"r"+c.toString(32)+":";return n.memoizedState=a},unstable_isNewReconciler:!1},ij={readContext:Kr,useCallback:bg,useContext:Kr,useEffect:_h,useImperativeHandle:yg,useInsertionEffect:fg,useLayoutEffect:gg,useMemo:vg,useReducer:Sh,useRef:mg,useState:function(){return Sh(Ll)},useDebugValue:Ch,useDeferredValue:function(n){var a=Jr();return wg(a,Is.memoizedState,n)},useTransition:function(){var n=Sh(Ll)[0],a=Jr().memoizedState;return[n,a]},useMutableSource:ig,useSyncExternalStore:ag,useId:jg,unstable_isNewReconciler:!1},aj={readContext:Kr,useCallback:bg,useContext:Kr,useEffect:_h,useImperativeHandle:yg,useInsertionEffect:fg,useLayoutEffect:gg,useMemo:vg,useReducer:kh,useRef:mg,useState:function(){return kh(Ll)},useDebugValue:Ch,useDeferredValue:function(n){var a=Jr();return Is===null?a.memoizedState=n:wg(a,Is.memoizedState,n)},useTransition:function(){var n=kh(Ll)[0],a=Jr().memoizedState;return[n,a]},useMutableSource:ig,useSyncExternalStore:ag,useId:jg,unstable_isNewReconciler:!1};function nn(n,a){if(n&&n.defaultProps){a=je({},a),n=n.defaultProps;for(var c in n)a[c]===void 0&&(a[c]=n[c]);return a}return a}function Ph(n,a,c,h){a=n.memoizedState,c=c(h,a),c=c==null?a:je({},a,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var md={isMounted:function(n){return(n=n._reactInternals)?ar(n)===n:!1},enqueueSetState:function(n,a,c){n=n._reactInternals;var h=lr(),g=Fi(n),x=ai(h,g);x.payload=a,c!=null&&(x.callback=c),a=Mi(n,x,g),a!==null&&(ln(a,n,g,h),id(a,n,g))},enqueueReplaceState:function(n,a,c){n=n._reactInternals;var h=lr(),g=Fi(n),x=ai(h,g);x.tag=1,x.payload=a,c!=null&&(x.callback=c),a=Mi(n,x,g),a!==null&&(ln(a,n,g,h),id(a,n,g))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var c=lr(),h=Fi(n),g=ai(c,h);g.tag=2,a!=null&&(g.callback=a),a=Mi(n,g,h),a!==null&&(ln(a,n,h,c),id(a,n,h))}};function _g(n,a,c,h,g,x,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,x,T):a.prototype&&a.prototype.isPureReactComponent?!kl(c,h)||!kl(g,x):!0}function Cg(n,a,c){var h=!1,g=Oi,x=a.contextType;return typeof x=="object"&&x!==null?x=Kr(x):(g=vr(a)?va:Xs.current,h=a.contextTypes,x=(h=h!=null)?No(n,g):Oi),a=new a(c,x),n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=md,n.stateNode=a,a._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=x),a}function Pg(n,a,c,h){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,h),a.state!==n&&md.enqueueReplaceState(a,a.state,null)}function Eh(n,a,c,h){var g=n.stateNode;g.props=c,g.state=n.memoizedState,g.refs={},fh(n);var x=a.contextType;typeof x=="object"&&x!==null?g.context=Kr(x):(x=vr(a)?va:Xs.current,g.context=No(n,x)),g.state=n.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(Ph(n,a,x,c),g.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&md.enqueueReplaceState(g,g.state,null),ad(n,c,g,h),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function To(n,a){try{var c="",h=a;do c+=G(h),h=h.return;while(h);var g=c}catch(x){g=`
Error generating stack: `+x.message+`
`+x.stack}return{value:n,source:a,stack:g,digest:null}}function Ah(n,a,c){return{value:n,source:null,stack:c??null,digest:a??null}}function Th(n,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var oj=typeof WeakMap=="function"?WeakMap:Map;function Eg(n,a,c){c=ai(-1,c),c.tag=3,c.payload={element:null};var h=a.value;return c.callback=function(){vd||(vd=!0,qh=h),Th(n,a)},c}function Ag(n,a,c){c=ai(-1,c),c.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var g=a.value;c.payload=function(){return h(g)},c.callback=function(){Th(n,a)}}var x=n.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(c.callback=function(){Th(n,a),typeof h!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),c}function Tg(n,a,c){var h=n.pingCache;if(h===null){h=n.pingCache=new oj;var g=new Set;h.set(a,g)}else g=h.get(a),g===void 0&&(g=new Set,h.set(a,g));g.has(c)||(g.add(c),n=wj.bind(null,n,a,c),a.then(n,n))}function Rg(n){do{var a;if((a=n.tag===13)&&(a=n.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return n;n=n.return}while(n!==null);return null}function Ig(n,a,c,h,g){return(n.mode&1)===0?(n===a?n.flags|=65536:(n.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=ai(-1,1),a.tag=2,Mi(c,a,1))),c.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var lj=te.ReactCurrentOwner,wr=!1;function or(n,a,c,h){a.child=n===null?Qf(a,null,c,h):Co(a,n.child,c,h)}function Og(n,a,c,h,g){c=c.render;var x=a.ref;return Eo(a,g),h=jh(n,a,c,h,x,g),c=Nh(),n!==null&&!wr?(a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~g,oi(n,a,g)):(os&&c&&ih(a),a.flags|=1,or(n,a,h,g),a.child)}function Dg(n,a,c,h,g){if(n===null){var x=c.type;return typeof x=="function"&&!Qh(x)&&x.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=x,zg(n,a,x,h,g)):(n=_d(c.type,null,h,a,a.mode,g),n.ref=a.ref,n.return=a,a.child=n)}if(x=n.child,(n.lanes&g)===0){var T=x.memoizedProps;if(c=c.compare,c=c!==null?c:kl,c(T,h)&&n.ref===a.ref)return oi(n,a,g)}return a.flags|=1,n=Vi(x,h),n.ref=a.ref,n.return=a,a.child=n}function zg(n,a,c,h,g){if(n!==null){var x=n.memoizedProps;if(kl(x,h)&&n.ref===a.ref)if(wr=!1,a.pendingProps=h=x,(n.lanes&g)!==0)(n.flags&131072)!==0&&(wr=!0);else return a.lanes=n.lanes,oi(n,a,g)}return Rh(n,a,c,h,g)}function Mg(n,a,c){var h=a.pendingProps,g=h.children,x=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(Io,Mr),Mr|=c;else{if((c&1073741824)===0)return n=x!==null?x.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:n,cachePool:null,transitions:null},a.updateQueue=null,Qt(Io,Mr),Mr|=n,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=x!==null?x.baseLanes:c,Qt(Io,Mr),Mr|=h}else x!==null?(h=x.baseLanes|c,a.memoizedState=null):h=c,Qt(Io,Mr),Mr|=h;return or(n,a,g,c),a.child}function Lg(n,a){var c=a.ref;(n===null&&c!==null||n!==null&&n.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Rh(n,a,c,h,g){var x=vr(c)?va:Xs.current;return x=No(a,x),Eo(a,g),c=jh(n,a,c,h,x,g),h=Nh(),n!==null&&!wr?(a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~g,oi(n,a,g)):(os&&h&&ih(a),a.flags|=1,or(n,a,c,g),a.child)}function Ug(n,a,c,h,g){if(vr(c)){var x=!0;Yc(a)}else x=!1;if(Eo(a,g),a.stateNode===null)fd(n,a),Cg(a,c,h),Eh(a,c,h,g),h=!0;else if(n===null){var T=a.stateNode,W=a.memoizedProps;T.props=W;var J=T.context,he=c.contextType;typeof he=="object"&&he!==null?he=Kr(he):(he=vr(c)?va:Xs.current,he=No(a,he));var Te=c.getDerivedStateFromProps,Oe=typeof Te=="function"||typeof T.getSnapshotBeforeUpdate=="function";Oe||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(W!==h||J!==he)&&Pg(a,T,h,he),zi=!1;var _e=a.memoizedState;T.state=_e,ad(a,h,T,g),J=a.memoizedState,W!==h||_e!==J||br.current||zi?(typeof Te=="function"&&(Ph(a,c,Te,h),J=a.memoizedState),(W=zi||_g(a,c,W,h,_e,J,he))?(Oe||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=J),T.props=h,T.state=J,T.context=he,h=W):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{T=a.stateNode,tg(n,a),W=a.memoizedProps,he=a.type===a.elementType?W:nn(a.type,W),T.props=he,Oe=a.pendingProps,_e=T.context,J=c.contextType,typeof J=="object"&&J!==null?J=Kr(J):(J=vr(c)?va:Xs.current,J=No(a,J));var Ge=c.getDerivedStateFromProps;(Te=typeof Ge=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(W!==Oe||_e!==J)&&Pg(a,T,h,J),zi=!1,_e=a.memoizedState,T.state=_e,ad(a,h,T,g);var Xe=a.memoizedState;W!==Oe||_e!==Xe||br.current||zi?(typeof Ge=="function"&&(Ph(a,c,Ge,h),Xe=a.memoizedState),(he=zi||_g(a,c,he,h,_e,Xe,J)||!1)?(Te||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,Xe,J),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,Xe,J)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||W===n.memoizedProps&&_e===n.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||W===n.memoizedProps&&_e===n.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=Xe),T.props=h,T.state=Xe,T.context=J,h=he):(typeof T.componentDidUpdate!="function"||W===n.memoizedProps&&_e===n.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||W===n.memoizedProps&&_e===n.memoizedState||(a.flags|=1024),h=!1)}return Ih(n,a,c,h,x,g)}function Ih(n,a,c,h,g,x){Lg(n,a);var T=(a.flags&128)!==0;if(!h&&!T)return g&&Wf(a,c,!1),oi(n,a,x);h=a.stateNode,lj.current=a;var W=T&&typeof c.getDerivedStateFromError!="function"?null:h.render();return a.flags|=1,n!==null&&T?(a.child=Co(a,n.child,null,x),a.child=Co(a,null,W,x)):or(n,a,W,x),a.memoizedState=h.state,g&&Wf(a,c,!0),a.child}function $g(n){var a=n.stateNode;a.pendingContext?Bf(n,a.pendingContext,a.pendingContext!==a.context):a.context&&Bf(n,a.context,!1),gh(n,a.containerInfo)}function Fg(n,a,c,h,g){return _o(),ch(g),a.flags|=256,or(n,a,c,h),a.child}var Oh={dehydrated:null,treeContext:null,retryLane:0};function Dh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Bg(n,a,c){var h=a.pendingProps,g=ms.current,x=!1,T=(a.flags&128)!==0,W;if((W=T)||(W=n!==null&&n.memoizedState===null?!1:(g&2)!==0),W?(x=!0,a.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Qt(ms,g&1),n===null)return lh(a),n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((a.mode&1)===0?a.lanes=1:n.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(T=h.children,n=h.fallback,x?(h=a.mode,x=a.child,T={mode:"hidden",children:T},(h&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=T):x=Cd(T,h,0,null),n=Aa(n,h,c,null),x.return=a,n.return=a,x.sibling=n,a.child=x,a.child.memoizedState=Dh(c),a.memoizedState=Oh,n):zh(a,T));if(g=n.memoizedState,g!==null&&(W=g.dehydrated,W!==null))return cj(n,a,T,h,W,g,c);if(x){x=h.fallback,T=a.mode,g=n.child,W=g.sibling;var J={mode:"hidden",children:h.children};return(T&1)===0&&a.child!==g?(h=a.child,h.childLanes=0,h.pendingProps=J,a.deletions=null):(h=Vi(g,J),h.subtreeFlags=g.subtreeFlags&14680064),W!==null?x=Vi(W,x):(x=Aa(x,T,c,null),x.flags|=2),x.return=a,h.return=a,h.sibling=x,a.child=h,h=x,x=a.child,T=n.child.memoizedState,T=T===null?Dh(c):{baseLanes:T.baseLanes|c,cachePool:null,transitions:T.transitions},x.memoizedState=T,x.childLanes=n.childLanes&~c,a.memoizedState=Oh,h}return x=n.child,n=x.sibling,h=Vi(x,{mode:"visible",children:h.children}),(a.mode&1)===0&&(h.lanes=c),h.return=a,h.sibling=null,n!==null&&(c=a.deletions,c===null?(a.deletions=[n],a.flags|=16):c.push(n)),a.child=h,a.memoizedState=null,h}function zh(n,a){return a=Cd({mode:"visible",children:a},n.mode,0,null),a.return=n,n.child=a}function pd(n,a,c,h){return h!==null&&ch(h),Co(a,n.child,null,c),n=zh(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function cj(n,a,c,h,g,x,T){if(c)return a.flags&256?(a.flags&=-257,h=Ah(Error(r(422))),pd(n,a,T,h)):a.memoizedState!==null?(a.child=n.child,a.flags|=128,null):(x=h.fallback,g=a.mode,h=Cd({mode:"visible",children:h.children},g,0,null),x=Aa(x,g,T,null),x.flags|=2,h.return=a,x.return=a,h.sibling=x,a.child=h,(a.mode&1)!==0&&Co(a,n.child,null,T),a.child.memoizedState=Dh(T),a.memoizedState=Oh,x);if((a.mode&1)===0)return pd(n,a,T,null);if(g.data==="$!"){if(h=g.nextSibling&&g.nextSibling.dataset,h)var W=h.dgst;return h=W,x=Error(r(419)),h=Ah(x,h,void 0),pd(n,a,T,h)}if(W=(T&n.childLanes)!==0,wr||W){if(h=Fs,h!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(h.suspendedLanes|T))!==0?0:g,g!==0&&g!==x.retryLane&&(x.retryLane=g,ii(n,g),ln(h,n,g,-1))}return Xh(),h=Ah(Error(r(421))),pd(n,a,T,h)}return g.data==="$?"?(a.flags|=128,a.child=n.child,a=jj.bind(null,n),g._reactRetry=a,null):(n=x.treeContext,zr=Ri(g.nextSibling),Dr=a,os=!0,rn=null,n!==null&&(qr[Gr++]=ri,qr[Gr++]=ni,qr[Gr++]=wa,ri=n.id,ni=n.overflow,wa=a),a=zh(a,h.children),a.flags|=4096,a)}function Vg(n,a,c){n.lanes|=a;var h=n.alternate;h!==null&&(h.lanes|=a),mh(n.return,a,c)}function Mh(n,a,c,h,g){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:g}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=h,x.tail=c,x.tailMode=g)}function Wg(n,a,c){var h=a.pendingProps,g=h.revealOrder,x=h.tail;if(or(n,a,h.children,c),h=ms.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Vg(n,c,a);else if(n.tag===19)Vg(n,c,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Qt(ms,h),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(c=a.child,g=null;c!==null;)n=c.alternate,n!==null&&od(n)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Mh(a,!1,g,c,x);break;case"backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(n=g.alternate,n!==null&&od(n)===null){a.child=g;break}n=g.sibling,g.sibling=c,c=g,g=n}Mh(a,!0,c,null,x);break;case"together":Mh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function fd(n,a){(a.mode&1)===0&&n!==null&&(n.alternate=null,a.alternate=null,a.flags|=2)}function oi(n,a,c){if(n!==null&&(a.dependencies=n.dependencies),_a|=a.lanes,(c&a.childLanes)===0)return null;if(n!==null&&a.child!==n.child)throw Error(r(153));if(a.child!==null){for(n=a.child,c=Vi(n,n.pendingProps),a.child=c,c.return=a;n.sibling!==null;)n=n.sibling,c=c.sibling=Vi(n,n.pendingProps),c.return=a;c.sibling=null}return a.child}function dj(n,a,c){switch(a.tag){case 3:$g(a),_o();break;case 5:ng(a);break;case 1:vr(a.type)&&Yc(a);break;case 4:gh(a,a.stateNode.containerInfo);break;case 10:var h=a.type._context,g=a.memoizedProps.value;Qt(rd,h._currentValue),h._currentValue=g;break;case 13:if(h=a.memoizedState,h!==null)return h.dehydrated!==null?(Qt(ms,ms.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?Bg(n,a,c):(Qt(ms,ms.current&1),n=oi(n,a,c),n!==null?n.sibling:null);Qt(ms,ms.current&1);break;case 19:if(h=(c&a.childLanes)!==0,(n.flags&128)!==0){if(h)return Wg(n,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Qt(ms,ms.current),h)break;return null;case 22:case 23:return a.lanes=0,Mg(n,a,c)}return oi(n,a,c)}var Hg,Lh,qg,Gg;Hg=function(n,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)n.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Lh=function(){},qg=function(n,a,c,h){var g=n.memoizedProps;if(g!==h){n=a.stateNode,Sa(Pn.current);var x=null;switch(c){case"input":g=wt(n,g),h=wt(n,h),x=[];break;case"select":g=je({},g,{value:void 0}),h=je({},h,{value:void 0}),x=[];break;case"textarea":g=fe(n,g),h=fe(n,h),x=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Kc)}$e(c,h);var T;c=null;for(he in g)if(!h.hasOwnProperty(he)&&g.hasOwnProperty(he)&&g[he]!=null)if(he==="style"){var W=g[he];for(T in W)W.hasOwnProperty(T)&&(c||(c={}),c[T]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(o.hasOwnProperty(he)?x||(x=[]):(x=x||[]).push(he,null));for(he in h){var J=h[he];if(W=g!=null?g[he]:void 0,h.hasOwnProperty(he)&&J!==W&&(J!=null||W!=null))if(he==="style")if(W){for(T in W)!W.hasOwnProperty(T)||J&&J.hasOwnProperty(T)||(c||(c={}),c[T]="");for(T in J)J.hasOwnProperty(T)&&W[T]!==J[T]&&(c||(c={}),c[T]=J[T])}else c||(x||(x=[]),x.push(he,c)),c=J;else he==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,W=W?W.__html:void 0,J!=null&&W!==J&&(x=x||[]).push(he,J)):he==="children"?typeof J!="string"&&typeof J!="number"||(x=x||[]).push(he,""+J):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(o.hasOwnProperty(he)?(J!=null&&he==="onScroll"&&ss("scroll",n),x||W===J||(x=[])):(x=x||[]).push(he,J))}c&&(x=x||[]).push("style",c);var he=x;(a.updateQueue=he)&&(a.flags|=4)}},Gg=function(n,a,c,h){c!==h&&(a.flags|=4)};function $l(n,a){if(!os)switch(n.tailMode){case"hidden":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function er(n){var a=n.alternate!==null&&n.alternate.child===n.child,c=0,h=0;if(a)for(var g=n.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=c,a}function uj(n,a,c){var h=a.pendingProps;switch(ah(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return er(a),null;case 1:return vr(a.type)&&Zc(),er(a),null;case 3:return h=a.stateNode,Ao(),rs(br),rs(Xs),bh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(td(a)?a.flags|=4:n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,rn!==null&&(Jh(rn),rn=null))),Lh(n,a),er(a),null;case 5:xh(a);var g=Sa(Dl.current);if(c=a.type,n!==null&&a.stateNode!=null)qg(n,a,c,h,g),n.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!h){if(a.stateNode===null)throw Error(r(166));return er(a),null}if(n=Sa(Pn.current),td(a)){h=a.stateNode,c=a.type;var x=a.memoizedProps;switch(h[Cn]=a,h[Al]=x,n=(a.mode&1)!==0,c){case"dialog":ss("cancel",h),ss("close",h);break;case"iframe":case"object":case"embed":ss("load",h);break;case"video":case"audio":for(g=0;g<Cl.length;g++)ss(Cl[g],h);break;case"source":ss("error",h);break;case"img":case"image":case"link":ss("error",h),ss("load",h);break;case"details":ss("toggle",h);break;case"input":Lt(h,x),ss("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!x.multiple},ss("invalid",h);break;case"textarea":nt(h,x),ss("invalid",h)}$e(c,x),g=null;for(var T in x)if(x.hasOwnProperty(T)){var W=x[T];T==="children"?typeof W=="string"?h.textContent!==W&&(x.suppressHydrationWarning!==!0&&Gc(h.textContent,W,n),g=["children",W]):typeof W=="number"&&h.textContent!==""+W&&(x.suppressHydrationWarning!==!0&&Gc(h.textContent,W,n),g=["children",""+W]):o.hasOwnProperty(T)&&W!=null&&T==="onScroll"&&ss("scroll",h)}switch(c){case"input":Rt(h),ze(h,x,!0);break;case"textarea":Rt(h),_t(h);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(h.onclick=Kc)}h=g,a.updateQueue=h,h!==null&&(a.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=xt(c)),n==="http://www.w3.org/1999/xhtml"?c==="script"?(n=T.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=T.createElement(c,{is:h.is}):(n=T.createElement(c),c==="select"&&(T=n,h.multiple?T.multiple=!0:h.size&&(T.size=h.size))):n=T.createElementNS(n,c),n[Cn]=a,n[Al]=h,Hg(n,a,!1,!1),a.stateNode=n;e:{switch(T=Zs(c,h),c){case"dialog":ss("cancel",n),ss("close",n),g=h;break;case"iframe":case"object":case"embed":ss("load",n),g=h;break;case"video":case"audio":for(g=0;g<Cl.length;g++)ss(Cl[g],n);g=h;break;case"source":ss("error",n),g=h;break;case"img":case"image":case"link":ss("error",n),ss("load",n),g=h;break;case"details":ss("toggle",n),g=h;break;case"input":Lt(n,h),g=wt(n,h),ss("invalid",n);break;case"option":g=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},g=je({},h,{value:void 0}),ss("invalid",n);break;case"textarea":nt(n,h),g=fe(n,h),ss("invalid",n);break;default:g=h}$e(c,g),W=g;for(x in W)if(W.hasOwnProperty(x)){var J=W[x];x==="style"?Ms(n,J):x==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&is(n,J)):x==="children"?typeof J=="string"?(c!=="textarea"||J!=="")&&ds(n,J):typeof J=="number"&&ds(n,""+J):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(o.hasOwnProperty(x)?J!=null&&x==="onScroll"&&ss("scroll",n):J!=null&&M(n,x,J,T))}switch(c){case"input":Rt(n),ze(n,h,!1);break;case"textarea":Rt(n),_t(n);break;case"option":h.value!=null&&n.setAttribute("value",""+He(h.value));break;case"select":n.multiple=!!h.multiple,x=h.value,x!=null?et(n,!!h.multiple,x,!1):h.defaultValue!=null&&et(n,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=Kc)}switch(c){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return er(a),null;case 6:if(n&&a.stateNode!=null)Gg(n,a,n.memoizedProps,h);else{if(typeof h!="string"&&a.stateNode===null)throw Error(r(166));if(c=Sa(Dl.current),Sa(Pn.current),td(a)){if(h=a.stateNode,c=a.memoizedProps,h[Cn]=a,(x=h.nodeValue!==c)&&(n=Dr,n!==null))switch(n.tag){case 3:Gc(h.nodeValue,c,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Gc(h.nodeValue,c,(n.mode&1)!==0)}x&&(a.flags|=4)}else h=(c.nodeType===9?c:c.ownerDocument).createTextNode(h),h[Cn]=a,a.stateNode=h}return er(a),null;case 13:if(rs(ms),h=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(os&&zr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Zf(),_o(),a.flags|=98560,x=!1;else if(x=td(a),h!==null&&h.dehydrated!==null){if(n===null){if(!x)throw Error(r(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[Cn]=a}else _o(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;er(a),x=!1}else rn!==null&&(Jh(rn),rn=null),x=!0;if(!x)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(a.child.flags|=8192,(a.mode&1)!==0&&(n===null||(ms.current&1)!==0?Os===0&&(Os=3):Xh())),a.updateQueue!==null&&(a.flags|=4),er(a),null);case 4:return Ao(),Lh(n,a),n===null&&Pl(a.stateNode.containerInfo),er(a),null;case 10:return hh(a.type._context),er(a),null;case 17:return vr(a.type)&&Zc(),er(a),null;case 19:if(rs(ms),x=a.memoizedState,x===null)return er(a),null;if(h=(a.flags&128)!==0,T=x.rendering,T===null)if(h)$l(x,!1);else{if(Os!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(T=od(n),T!==null){for(a.flags|=128,$l(x,!1),h=T.updateQueue,h!==null&&(a.updateQueue=h,a.flags|=4),a.subtreeFlags=0,h=c,c=a.child;c!==null;)x=c,n=h,x.flags&=14680066,T=x.alternate,T===null?(x.childLanes=0,x.lanes=n,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=T.childLanes,x.lanes=T.lanes,x.child=T.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=T.memoizedProps,x.memoizedState=T.memoizedState,x.updateQueue=T.updateQueue,x.type=T.type,n=T.dependencies,x.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),c=c.sibling;return Qt(ms,ms.current&1|2),a.child}n=n.sibling}x.tail!==null&&Q()>Oo&&(a.flags|=128,h=!0,$l(x,!1),a.lanes=4194304)}else{if(!h)if(n=od(T),n!==null){if(a.flags|=128,h=!0,c=n.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),$l(x,!0),x.tail===null&&x.tailMode==="hidden"&&!T.alternate&&!os)return er(a),null}else 2*Q()-x.renderingStartTime>Oo&&c!==1073741824&&(a.flags|=128,h=!0,$l(x,!1),a.lanes=4194304);x.isBackwards?(T.sibling=a.child,a.child=T):(c=x.last,c!==null?c.sibling=T:a.child=T,x.last=T)}return x.tail!==null?(a=x.tail,x.rendering=a,x.tail=a.sibling,x.renderingStartTime=Q(),a.sibling=null,c=ms.current,Qt(ms,h?c&1|2:c&1),a):(er(a),null);case 22:case 23:return Yh(),h=a.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(a.flags|=8192),h&&(a.mode&1)!==0?(Mr&1073741824)!==0&&(er(a),a.subtreeFlags&6&&(a.flags|=8192)):er(a),null;case 24:return null;case 25:return null}throw Error(r(156,a.tag))}function hj(n,a){switch(ah(a),a.tag){case 1:return vr(a.type)&&Zc(),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Ao(),rs(br),rs(Xs),bh(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 5:return xh(a),null;case 13:if(rs(ms),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(r(340));_o()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return rs(ms),null;case 4:return Ao(),null;case 10:return hh(a.type._context),null;case 22:case 23:return Yh(),null;case 24:return null;default:return null}}var gd=!1,tr=!1,mj=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Ro(n,a){var c=n.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(h){ys(n,a,h)}else c.current=null}function Uh(n,a,c){try{c()}catch(h){ys(n,a,h)}}var Kg=!1;function pj(n,a){if(Yu=Qn,n=_f(),Vu(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var g=h.anchorOffset,x=h.focusNode;h=h.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var T=0,W=-1,J=-1,he=0,Te=0,Oe=n,_e=null;t:for(;;){for(var Ge;Oe!==c||g!==0&&Oe.nodeType!==3||(W=T+g),Oe!==x||h!==0&&Oe.nodeType!==3||(J=T+h),Oe.nodeType===3&&(T+=Oe.nodeValue.length),(Ge=Oe.firstChild)!==null;)_e=Oe,Oe=Ge;for(;;){if(Oe===n)break t;if(_e===c&&++he===g&&(W=T),_e===x&&++Te===h&&(J=T),(Ge=Oe.nextSibling)!==null)break;Oe=_e,_e=Oe.parentNode}Oe=Ge}c=W===-1||J===-1?null:{start:W,end:J}}else c=null}c=c||{start:0,end:0}}else c=null;for(Xu={focusedElem:n,selectionRange:c},Qn=!1,Ze=a;Ze!==null;)if(a=Ze,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,Ze=n;else for(;Ze!==null;){a=Ze;try{var Xe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Xe!==null){var Qe=Xe.memoizedProps,ws=Xe.memoizedState,ie=a.stateNode,Y=ie.getSnapshotBeforeUpdate(a.elementType===a.type?Qe:nn(a.type,Qe),ws);ie.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var le=a.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Le){ys(a,a.return,Le)}if(n=a.sibling,n!==null){n.return=a.return,Ze=n;break}Ze=a.return}return Xe=Kg,Kg=!1,Xe}function Fl(n,a,c){var h=a.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&n)===n){var x=g.destroy;g.destroy=void 0,x!==void 0&&Uh(a,c,x)}g=g.next}while(g!==h)}}function xd(n,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&n)===n){var h=c.create;c.destroy=h()}c=c.next}while(c!==a)}}function $h(n){var a=n.ref;if(a!==null){var c=n.stateNode;switch(n.tag){case 5:n=c;break;default:n=c}typeof a=="function"?a(n):a.current=n}}function Jg(n){var a=n.alternate;a!==null&&(n.alternate=null,Jg(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&(delete a[Cn],delete a[Al],delete a[sh],delete a[Zw],delete a[Yw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Zg(n){return n.tag===5||n.tag===3||n.tag===4}function Yg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Zg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Fh(n,a,c){var h=n.tag;if(h===5||h===6)n=n.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(n,a):c.insertBefore(n,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(n,c)):(a=c,a.appendChild(n)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Kc));else if(h!==4&&(n=n.child,n!==null))for(Fh(n,a,c),n=n.sibling;n!==null;)Fh(n,a,c),n=n.sibling}function Bh(n,a,c){var h=n.tag;if(h===5||h===6)n=n.stateNode,a?c.insertBefore(n,a):c.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Bh(n,a,c),n=n.sibling;n!==null;)Bh(n,a,c),n=n.sibling}var Hs=null,an=!1;function Li(n,a,c){for(c=c.child;c!==null;)Xg(n,a,c),c=c.sibling}function Xg(n,a,c){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(ct,c)}catch{}switch(c.tag){case 5:tr||Ro(c,a);case 6:var h=Hs,g=an;Hs=null,Li(n,a,c),Hs=h,an=g,Hs!==null&&(an?(n=Hs,c=c.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)):Hs.removeChild(c.stateNode));break;case 18:Hs!==null&&(an?(n=Hs,c=c.stateNode,n.nodeType===8?th(n.parentNode,c):n.nodeType===1&&th(n,c),Pi(n)):th(Hs,c.stateNode));break;case 4:h=Hs,g=an,Hs=c.stateNode.containerInfo,an=!0,Li(n,a,c),Hs=h,an=g;break;case 0:case 11:case 14:case 15:if(!tr&&(h=c.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var x=g,T=x.destroy;x=x.tag,T!==void 0&&((x&2)!==0||(x&4)!==0)&&Uh(c,a,T),g=g.next}while(g!==h)}Li(n,a,c);break;case 1:if(!tr&&(Ro(c,a),h=c.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=c.memoizedProps,h.state=c.memoizedState,h.componentWillUnmount()}catch(W){ys(c,a,W)}Li(n,a,c);break;case 21:Li(n,a,c);break;case 22:c.mode&1?(tr=(h=tr)||c.memoizedState!==null,Li(n,a,c),tr=h):Li(n,a,c);break;default:Li(n,a,c)}}function Qg(n){var a=n.updateQueue;if(a!==null){n.updateQueue=null;var c=n.stateNode;c===null&&(c=n.stateNode=new mj),a.forEach(function(h){var g=Nj.bind(null,n,h);c.has(h)||(c.add(h),h.then(g,g))})}}function on(n,a){var c=a.deletions;if(c!==null)for(var h=0;h<c.length;h++){var g=c[h];try{var x=n,T=a,W=T;e:for(;W!==null;){switch(W.tag){case 5:Hs=W.stateNode,an=!1;break e;case 3:Hs=W.stateNode.containerInfo,an=!0;break e;case 4:Hs=W.stateNode.containerInfo,an=!0;break e}W=W.return}if(Hs===null)throw Error(r(160));Xg(x,T,g),Hs=null,an=!1;var J=g.alternate;J!==null&&(J.return=null),g.return=null}catch(he){ys(g,a,he)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)e0(a,n),a=a.sibling}function e0(n,a){var c=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(on(a,n),An(n),h&4){try{Fl(3,n,n.return),xd(3,n)}catch(Qe){ys(n,n.return,Qe)}try{Fl(5,n,n.return)}catch(Qe){ys(n,n.return,Qe)}}break;case 1:on(a,n),An(n),h&512&&c!==null&&Ro(c,c.return);break;case 5:if(on(a,n),An(n),h&512&&c!==null&&Ro(c,c.return),n.flags&32){var g=n.stateNode;try{ds(g,"")}catch(Qe){ys(n,n.return,Qe)}}if(h&4&&(g=n.stateNode,g!=null)){var x=n.memoizedProps,T=c!==null?c.memoizedProps:x,W=n.type,J=n.updateQueue;if(n.updateQueue=null,J!==null)try{W==="input"&&x.type==="radio"&&x.name!=null&&ae(g,x),Zs(W,T);var he=Zs(W,x);for(T=0;T<J.length;T+=2){var Te=J[T],Oe=J[T+1];Te==="style"?Ms(g,Oe):Te==="dangerouslySetInnerHTML"?is(g,Oe):Te==="children"?ds(g,Oe):M(g,Te,Oe,he)}switch(W){case"input":ge(g,x);break;case"textarea":dt(g,x);break;case"select":var _e=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!x.multiple;var Ge=x.value;Ge!=null?et(g,!!x.multiple,Ge,!1):_e!==!!x.multiple&&(x.defaultValue!=null?et(g,!!x.multiple,x.defaultValue,!0):et(g,!!x.multiple,x.multiple?[]:"",!1))}g[Al]=x}catch(Qe){ys(n,n.return,Qe)}}break;case 6:if(on(a,n),An(n),h&4){if(n.stateNode===null)throw Error(r(162));g=n.stateNode,x=n.memoizedProps;try{g.nodeValue=x}catch(Qe){ys(n,n.return,Qe)}}break;case 3:if(on(a,n),An(n),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Pi(a.containerInfo)}catch(Qe){ys(n,n.return,Qe)}break;case 4:on(a,n),An(n);break;case 13:on(a,n),An(n),g=n.child,g.flags&8192&&(x=g.memoizedState!==null,g.stateNode.isHidden=x,!x||g.alternate!==null&&g.alternate.memoizedState!==null||(Hh=Q())),h&4&&Qg(n);break;case 22:if(Te=c!==null&&c.memoizedState!==null,n.mode&1?(tr=(he=tr)||Te,on(a,n),tr=he):on(a,n),An(n),h&8192){if(he=n.memoizedState!==null,(n.stateNode.isHidden=he)&&!Te&&(n.mode&1)!==0)for(Ze=n,Te=n.child;Te!==null;){for(Oe=Ze=Te;Ze!==null;){switch(_e=Ze,Ge=_e.child,_e.tag){case 0:case 11:case 14:case 15:Fl(4,_e,_e.return);break;case 1:Ro(_e,_e.return);var Xe=_e.stateNode;if(typeof Xe.componentWillUnmount=="function"){h=_e,c=_e.return;try{a=h,Xe.props=a.memoizedProps,Xe.state=a.memoizedState,Xe.componentWillUnmount()}catch(Qe){ys(h,c,Qe)}}break;case 5:Ro(_e,_e.return);break;case 22:if(_e.memoizedState!==null){r0(Oe);continue}}Ge!==null?(Ge.return=_e,Ze=Ge):r0(Oe)}Te=Te.sibling}e:for(Te=null,Oe=n;;){if(Oe.tag===5){if(Te===null){Te=Oe;try{g=Oe.stateNode,he?(x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(W=Oe.stateNode,J=Oe.memoizedProps.style,T=J!=null&&J.hasOwnProperty("display")?J.display:null,W.style.display=us("display",T))}catch(Qe){ys(n,n.return,Qe)}}}else if(Oe.tag===6){if(Te===null)try{Oe.stateNode.nodeValue=he?"":Oe.memoizedProps}catch(Qe){ys(n,n.return,Qe)}}else if((Oe.tag!==22&&Oe.tag!==23||Oe.memoizedState===null||Oe===n)&&Oe.child!==null){Oe.child.return=Oe,Oe=Oe.child;continue}if(Oe===n)break e;for(;Oe.sibling===null;){if(Oe.return===null||Oe.return===n)break e;Te===Oe&&(Te=null),Oe=Oe.return}Te===Oe&&(Te=null),Oe.sibling.return=Oe.return,Oe=Oe.sibling}}break;case 19:on(a,n),An(n),h&4&&Qg(n);break;case 21:break;default:on(a,n),An(n)}}function An(n){var a=n.flags;if(a&2){try{e:{for(var c=n.return;c!==null;){if(Zg(c)){var h=c;break e}c=c.return}throw Error(r(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&(ds(g,""),h.flags&=-33);var x=Yg(n);Bh(n,x,g);break;case 3:case 4:var T=h.stateNode.containerInfo,W=Yg(n);Fh(n,W,T);break;default:throw Error(r(161))}}catch(J){ys(n,n.return,J)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function fj(n,a,c){Ze=n,t0(n)}function t0(n,a,c){for(var h=(n.mode&1)!==0;Ze!==null;){var g=Ze,x=g.child;if(g.tag===22&&h){var T=g.memoizedState!==null||gd;if(!T){var W=g.alternate,J=W!==null&&W.memoizedState!==null||tr;W=gd;var he=tr;if(gd=T,(tr=J)&&!he)for(Ze=g;Ze!==null;)T=Ze,J=T.child,T.tag===22&&T.memoizedState!==null?n0(g):J!==null?(J.return=T,Ze=J):n0(g);for(;x!==null;)Ze=x,t0(x),x=x.sibling;Ze=g,gd=W,tr=he}s0(n)}else(g.subtreeFlags&8772)!==0&&x!==null?(x.return=g,Ze=x):s0(n)}}function s0(n){for(;Ze!==null;){var a=Ze;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:tr||xd(5,a);break;case 1:var h=a.stateNode;if(a.flags&4&&!tr)if(c===null)h.componentDidMount();else{var g=a.elementType===a.type?c.memoizedProps:nn(a.type,c.memoizedProps);h.componentDidUpdate(g,c.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var x=a.updateQueue;x!==null&&rg(a,x,h);break;case 3:var T=a.updateQueue;if(T!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}rg(a,T,c)}break;case 5:var W=a.stateNode;if(c===null&&a.flags&4){c=W;var J=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&c.focus();break;case"img":J.src&&(c.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var he=a.alternate;if(he!==null){var Te=he.memoizedState;if(Te!==null){var Oe=Te.dehydrated;Oe!==null&&Pi(Oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}tr||a.flags&512&&$h(a)}catch(_e){ys(a,a.return,_e)}}if(a===n){Ze=null;break}if(c=a.sibling,c!==null){c.return=a.return,Ze=c;break}Ze=a.return}}function r0(n){for(;Ze!==null;){var a=Ze;if(a===n){Ze=null;break}var c=a.sibling;if(c!==null){c.return=a.return,Ze=c;break}Ze=a.return}}function n0(n){for(;Ze!==null;){var a=Ze;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{xd(4,a)}catch(J){ys(a,c,J)}break;case 1:var h=a.stateNode;if(typeof h.componentDidMount=="function"){var g=a.return;try{h.componentDidMount()}catch(J){ys(a,g,J)}}var x=a.return;try{$h(a)}catch(J){ys(a,x,J)}break;case 5:var T=a.return;try{$h(a)}catch(J){ys(a,T,J)}}}catch(J){ys(a,a.return,J)}if(a===n){Ze=null;break}var W=a.sibling;if(W!==null){W.return=a.return,Ze=W;break}Ze=a.return}}var gj=Math.ceil,yd=te.ReactCurrentDispatcher,Vh=te.ReactCurrentOwner,Zr=te.ReactCurrentBatchConfig,Ut=0,Fs=null,ks=null,qs=0,Mr=0,Io=Ii(0),Os=0,Bl=null,_a=0,bd=0,Wh=0,Vl=null,jr=null,Hh=0,Oo=1/0,li=null,vd=!1,qh=null,Ui=null,wd=!1,$i=null,jd=0,Wl=0,Gh=null,Nd=-1,Sd=0;function lr(){return(Ut&6)!==0?Q():Nd!==-1?Nd:Nd=Q()}function Fi(n){return(n.mode&1)===0?1:(Ut&2)!==0&&qs!==0?qs&-qs:Qw.transition!==null?(Sd===0&&(Sd=yn()),Sd):(n=Z,n!==0||(n=window.event,n=n===void 0?16:lo(n.type)),n)}function ln(n,a,c,h){if(50<Wl)throw Wl=0,Gh=null,Error(r(185));bn(n,c,h),((Ut&2)===0||n!==Fs)&&(n===Fs&&((Ut&2)===0&&(bd|=c),Os===4&&Bi(n,qs)),Nr(n,h),c===1&&Ut===0&&(a.mode&1)===0&&(Oo=Q()+500,Xc&&Di()))}function Nr(n,a){var c=n.callbackNode;xr(n,a);var h=qt(n,n===Fs?qs:0);if(h===0)c!==null&&V(c),n.callbackNode=null,n.callbackPriority=0;else if(a=h&-h,n.callbackPriority!==a){if(c!=null&&V(c),a===1)n.tag===0?Xw(a0.bind(null,n)):Hf(a0.bind(null,n)),Kw(function(){(Ut&6)===0&&Di()}),c=null;else{switch(Me(h)){case 1:c=ke;break;case 4:c=Ce;break;case 16:c=ne;break;case 536870912:c=Ee;break;default:c=ne}c=p0(c,i0.bind(null,n))}n.callbackPriority=a,n.callbackNode=c}}function i0(n,a){if(Nd=-1,Sd=0,(Ut&6)!==0)throw Error(r(327));var c=n.callbackNode;if(Do()&&n.callbackNode!==c)return null;var h=qt(n,n===Fs?qs:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||a)a=kd(n,h);else{a=h;var g=Ut;Ut|=2;var x=l0();(Fs!==n||qs!==a)&&(li=null,Oo=Q()+500,Pa(n,a));do try{bj();break}catch(W){o0(n,W)}while(!0);uh(),yd.current=x,Ut=g,ks!==null?a=0:(Fs=null,qs=0,a=Os)}if(a!==0){if(a===2&&(g=Zn(n),g!==0&&(h=g,a=Kh(n,g))),a===1)throw c=Bl,Pa(n,0),Bi(n,h),Nr(n,Q()),c;if(a===6)Bi(n,h);else{if(g=n.current.alternate,(h&30)===0&&!xj(g)&&(a=kd(n,h),a===2&&(x=Zn(n),x!==0&&(h=x,a=Kh(n,x))),a===1))throw c=Bl,Pa(n,0),Bi(n,h),Nr(n,Q()),c;switch(n.finishedWork=g,n.finishedLanes=h,a){case 0:case 1:throw Error(r(345));case 2:Ea(n,jr,li);break;case 3:if(Bi(n,h),(h&130023424)===h&&(a=Hh+500-Q(),10<a)){if(qt(n,0)!==0)break;if(g=n.suspendedLanes,(g&h)!==h){lr(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=eh(Ea.bind(null,n,jr,li),a);break}Ea(n,jr,li);break;case 4:if(Bi(n,h),(h&4194240)===h)break;for(a=n.eventTimes,g=-1;0<h;){var T=31-St(h);x=1<<T,T=a[T],T>g&&(g=T),h&=~x}if(h=g,h=Q()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*gj(h/1960))-h,10<h){n.timeoutHandle=eh(Ea.bind(null,n,jr,li),h);break}Ea(n,jr,li);break;case 5:Ea(n,jr,li);break;default:throw Error(r(329))}}}return Nr(n,Q()),n.callbackNode===c?i0.bind(null,n):null}function Kh(n,a){var c=Vl;return n.current.memoizedState.isDehydrated&&(Pa(n,a).flags|=256),n=kd(n,a),n!==2&&(a=jr,jr=c,a!==null&&Jh(a)),n}function Jh(n){jr===null?jr=n:jr.push.apply(jr,n)}function xj(n){for(var a=n;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var h=0;h<c.length;h++){var g=c[h],x=g.getSnapshot;g=g.value;try{if(!sn(x(),g))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Bi(n,a){for(a&=~Wh,a&=~bd,n.suspendedLanes|=a,n.pingedLanes&=~a,n=n.expirationTimes;0<a;){var c=31-St(a),h=1<<c;n[c]=-1,a&=~h}}function a0(n){if((Ut&6)!==0)throw Error(r(327));Do();var a=qt(n,0);if((a&1)===0)return Nr(n,Q()),null;var c=kd(n,a);if(n.tag!==0&&c===2){var h=Zn(n);h!==0&&(a=h,c=Kh(n,h))}if(c===1)throw c=Bl,Pa(n,0),Bi(n,a),Nr(n,Q()),c;if(c===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=a,Ea(n,jr,li),Nr(n,Q()),null}function Zh(n,a){var c=Ut;Ut|=1;try{return n(a)}finally{Ut=c,Ut===0&&(Oo=Q()+500,Xc&&Di())}}function Ca(n){$i!==null&&$i.tag===0&&(Ut&6)===0&&Do();var a=Ut;Ut|=1;var c=Zr.transition,h=Z;try{if(Zr.transition=null,Z=1,n)return n()}finally{Z=h,Zr.transition=c,Ut=a,(Ut&6)===0&&Di()}}function Yh(){Mr=Io.current,rs(Io)}function Pa(n,a){n.finishedWork=null,n.finishedLanes=0;var c=n.timeoutHandle;if(c!==-1&&(n.timeoutHandle=-1,Gw(c)),ks!==null)for(c=ks.return;c!==null;){var h=c;switch(ah(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Zc();break;case 3:Ao(),rs(br),rs(Xs),bh();break;case 5:xh(h);break;case 4:Ao();break;case 13:rs(ms);break;case 19:rs(ms);break;case 10:hh(h.type._context);break;case 22:case 23:Yh()}c=c.return}if(Fs=n,ks=n=Vi(n.current,null),qs=Mr=a,Os=0,Bl=null,Wh=bd=_a=0,jr=Vl=null,Na!==null){for(a=0;a<Na.length;a++)if(c=Na[a],h=c.interleaved,h!==null){c.interleaved=null;var g=h.next,x=c.pending;if(x!==null){var T=x.next;x.next=g,h.next=T}c.pending=h}Na=null}return n}function o0(n,a){do{var c=ks;try{if(uh(),ld.current=hd,cd){for(var h=ps.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}cd=!1}if(ka=0,$s=Is=ps=null,zl=!1,Ml=0,Vh.current=null,c===null||c.return===null){Os=1,Bl=a,ks=null;break}e:{var x=n,T=c.return,W=c,J=a;if(a=qs,W.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var he=J,Te=W,Oe=Te.tag;if((Te.mode&1)===0&&(Oe===0||Oe===11||Oe===15)){var _e=Te.alternate;_e?(Te.updateQueue=_e.updateQueue,Te.memoizedState=_e.memoizedState,Te.lanes=_e.lanes):(Te.updateQueue=null,Te.memoizedState=null)}var Ge=Rg(T);if(Ge!==null){Ge.flags&=-257,Ig(Ge,T,W,x,a),Ge.mode&1&&Tg(x,he,a),a=Ge,J=he;var Xe=a.updateQueue;if(Xe===null){var Qe=new Set;Qe.add(J),a.updateQueue=Qe}else Xe.add(J);break e}else{if((a&1)===0){Tg(x,he,a),Xh();break e}J=Error(r(426))}}else if(os&&W.mode&1){var ws=Rg(T);if(ws!==null){(ws.flags&65536)===0&&(ws.flags|=256),Ig(ws,T,W,x,a),ch(To(J,W));break e}}x=J=To(J,W),Os!==4&&(Os=2),Vl===null?Vl=[x]:Vl.push(x),x=T;do{switch(x.tag){case 3:x.flags|=65536,a&=-a,x.lanes|=a;var ie=Eg(x,J,a);sg(x,ie);break e;case 1:W=J;var Y=x.type,le=x.stateNode;if((x.flags&128)===0&&(typeof Y.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(Ui===null||!Ui.has(le)))){x.flags|=65536,a&=-a,x.lanes|=a;var Le=Ag(x,W,a);sg(x,Le);break e}}x=x.return}while(x!==null)}d0(c)}catch(st){a=st,ks===c&&c!==null&&(ks=c=c.return);continue}break}while(!0)}function l0(){var n=yd.current;return yd.current=hd,n===null?hd:n}function Xh(){(Os===0||Os===3||Os===2)&&(Os=4),Fs===null||(_a&268435455)===0&&(bd&268435455)===0||Bi(Fs,qs)}function kd(n,a){var c=Ut;Ut|=2;var h=l0();(Fs!==n||qs!==a)&&(li=null,Pa(n,a));do try{yj();break}catch(g){o0(n,g)}while(!0);if(uh(),Ut=c,yd.current=h,ks!==null)throw Error(r(261));return Fs=null,qs=0,Os}function yj(){for(;ks!==null;)c0(ks)}function bj(){for(;ks!==null&&!B();)c0(ks)}function c0(n){var a=m0(n.alternate,n,Mr);n.memoizedProps=n.pendingProps,a===null?d0(n):ks=a,Vh.current=null}function d0(n){var a=n;do{var c=a.alternate;if(n=a.return,(a.flags&32768)===0){if(c=uj(c,a,Mr),c!==null){ks=c;return}}else{if(c=hj(c,a),c!==null){c.flags&=32767,ks=c;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Os=6,ks=null;return}}if(a=a.sibling,a!==null){ks=a;return}ks=a=n}while(a!==null);Os===0&&(Os=5)}function Ea(n,a,c){var h=Z,g=Zr.transition;try{Zr.transition=null,Z=1,vj(n,a,c,h)}finally{Zr.transition=g,Z=h}return null}function vj(n,a,c,h){do Do();while($i!==null);if((Ut&6)!==0)throw Error(r(327));c=n.finishedWork;var g=n.finishedLanes;if(c===null)return null;if(n.finishedWork=null,n.finishedLanes=0,c===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var x=c.lanes|c.childLanes;if(io(n,x),n===Fs&&(ks=Fs=null,qs=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||wd||(wd=!0,p0(ne,function(){return Do(),null})),x=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||x){x=Zr.transition,Zr.transition=null;var T=Z;Z=1;var W=Ut;Ut|=4,Vh.current=null,pj(n,c),e0(c,n),$w(Xu),Qn=!!Yu,Xu=Yu=null,n.current=c,fj(c),q(),Ut=W,Z=T,Zr.transition=x}else n.current=c;if(wd&&(wd=!1,$i=n,jd=g),x=n.pendingLanes,x===0&&(Ui=null),jt(c.stateNode),Nr(n,Q()),a!==null)for(h=n.onRecoverableError,c=0;c<a.length;c++)g=a[c],h(g.value,{componentStack:g.stack,digest:g.digest});if(vd)throw vd=!1,n=qh,qh=null,n;return(jd&1)!==0&&n.tag!==0&&Do(),x=n.pendingLanes,(x&1)!==0?n===Gh?Wl++:(Wl=0,Gh=n):Wl=0,Di(),null}function Do(){if($i!==null){var n=Me(jd),a=Zr.transition,c=Z;try{if(Zr.transition=null,Z=16>n?16:n,$i===null)var h=!1;else{if(n=$i,$i=null,jd=0,(Ut&6)!==0)throw Error(r(331));var g=Ut;for(Ut|=4,Ze=n.current;Ze!==null;){var x=Ze,T=x.child;if((Ze.flags&16)!==0){var W=x.deletions;if(W!==null){for(var J=0;J<W.length;J++){var he=W[J];for(Ze=he;Ze!==null;){var Te=Ze;switch(Te.tag){case 0:case 11:case 15:Fl(8,Te,x)}var Oe=Te.child;if(Oe!==null)Oe.return=Te,Ze=Oe;else for(;Ze!==null;){Te=Ze;var _e=Te.sibling,Ge=Te.return;if(Jg(Te),Te===he){Ze=null;break}if(_e!==null){_e.return=Ge,Ze=_e;break}Ze=Ge}}}var Xe=x.alternate;if(Xe!==null){var Qe=Xe.child;if(Qe!==null){Xe.child=null;do{var ws=Qe.sibling;Qe.sibling=null,Qe=ws}while(Qe!==null)}}Ze=x}}if((x.subtreeFlags&2064)!==0&&T!==null)T.return=x,Ze=T;else e:for(;Ze!==null;){if(x=Ze,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Fl(9,x,x.return)}var ie=x.sibling;if(ie!==null){ie.return=x.return,Ze=ie;break e}Ze=x.return}}var Y=n.current;for(Ze=Y;Ze!==null;){T=Ze;var le=T.child;if((T.subtreeFlags&2064)!==0&&le!==null)le.return=T,Ze=le;else e:for(T=Y;Ze!==null;){if(W=Ze,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:xd(9,W)}}catch(st){ys(W,W.return,st)}if(W===T){Ze=null;break e}var Le=W.sibling;if(Le!==null){Le.return=W.return,Ze=Le;break e}Ze=W.return}}if(Ut=g,Di(),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(ct,n)}catch{}h=!0}return h}finally{Z=c,Zr.transition=a}}return!1}function u0(n,a,c){a=To(c,a),a=Eg(n,a,1),n=Mi(n,a,1),a=lr(),n!==null&&(bn(n,1,a),Nr(n,a))}function ys(n,a,c){if(n.tag===3)u0(n,n,c);else for(;a!==null;){if(a.tag===3){u0(a,n,c);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ui===null||!Ui.has(h))){n=To(c,n),n=Ag(a,n,1),a=Mi(a,n,1),n=lr(),a!==null&&(bn(a,1,n),Nr(a,n));break}}a=a.return}}function wj(n,a,c){var h=n.pingCache;h!==null&&h.delete(a),a=lr(),n.pingedLanes|=n.suspendedLanes&c,Fs===n&&(qs&c)===c&&(Os===4||Os===3&&(qs&130023424)===qs&&500>Q()-Hh?Pa(n,0):Wh|=c),Nr(n,a)}function h0(n,a){a===0&&((n.mode&1)===0?a=1:(a=it,it<<=1,(it&130023424)===0&&(it=4194304)));var c=lr();n=ii(n,a),n!==null&&(bn(n,a,c),Nr(n,c))}function jj(n){var a=n.memoizedState,c=0;a!==null&&(c=a.retryLane),h0(n,c)}function Nj(n,a){var c=0;switch(n.tag){case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(c=g.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(r(314))}h!==null&&h.delete(a),h0(n,c)}var m0;m0=function(n,a,c){if(n!==null)if(n.memoizedProps!==a.pendingProps||br.current)wr=!0;else{if((n.lanes&c)===0&&(a.flags&128)===0)return wr=!1,dj(n,a,c);wr=(n.flags&131072)!==0}else wr=!1,os&&(a.flags&1048576)!==0&&qf(a,ed,a.index);switch(a.lanes=0,a.tag){case 2:var h=a.type;fd(n,a),n=a.pendingProps;var g=No(a,Xs.current);Eo(a,c),g=jh(null,a,h,n,g,c);var x=Nh();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,vr(h)?(x=!0,Yc(a)):x=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,fh(a),g.updater=md,a.stateNode=g,g._reactInternals=a,Eh(a,h,n,c),a=Ih(null,a,h,!0,x,c)):(a.tag=0,os&&x&&ih(a),or(null,a,g,c),a=a.child),a;case 16:h=a.elementType;e:{switch(fd(n,a),n=a.pendingProps,g=h._init,h=g(h._payload),a.type=h,g=a.tag=kj(h),n=nn(h,n),g){case 0:a=Rh(null,a,h,n,c);break e;case 1:a=Ug(null,a,h,n,c);break e;case 11:a=Og(null,a,h,n,c);break e;case 14:a=Dg(null,a,h,nn(h.type,n),c);break e}throw Error(r(306,h,""))}return a;case 0:return h=a.type,g=a.pendingProps,g=a.elementType===h?g:nn(h,g),Rh(n,a,h,g,c);case 1:return h=a.type,g=a.pendingProps,g=a.elementType===h?g:nn(h,g),Ug(n,a,h,g,c);case 3:e:{if($g(a),n===null)throw Error(r(387));h=a.pendingProps,x=a.memoizedState,g=x.element,tg(n,a),ad(a,h,null,c);var T=a.memoizedState;if(h=T.element,x.isDehydrated)if(x={element:h,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){g=To(Error(r(423)),a),a=Fg(n,a,h,c,g);break e}else if(h!==g){g=To(Error(r(424)),a),a=Fg(n,a,h,c,g);break e}else for(zr=Ri(a.stateNode.containerInfo.firstChild),Dr=a,os=!0,rn=null,c=Qf(a,null,h,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(_o(),h===g){a=oi(n,a,c);break e}or(n,a,h,c)}a=a.child}return a;case 5:return ng(a),n===null&&lh(a),h=a.type,g=a.pendingProps,x=n!==null?n.memoizedProps:null,T=g.children,Qu(h,g)?T=null:x!==null&&Qu(h,x)&&(a.flags|=32),Lg(n,a),or(n,a,T,c),a.child;case 6:return n===null&&lh(a),null;case 13:return Bg(n,a,c);case 4:return gh(a,a.stateNode.containerInfo),h=a.pendingProps,n===null?a.child=Co(a,null,h,c):or(n,a,h,c),a.child;case 11:return h=a.type,g=a.pendingProps,g=a.elementType===h?g:nn(h,g),Og(n,a,h,g,c);case 7:return or(n,a,a.pendingProps,c),a.child;case 8:return or(n,a,a.pendingProps.children,c),a.child;case 12:return or(n,a,a.pendingProps.children,c),a.child;case 10:e:{if(h=a.type._context,g=a.pendingProps,x=a.memoizedProps,T=g.value,Qt(rd,h._currentValue),h._currentValue=T,x!==null)if(sn(x.value,T)){if(x.children===g.children&&!br.current){a=oi(n,a,c);break e}}else for(x=a.child,x!==null&&(x.return=a);x!==null;){var W=x.dependencies;if(W!==null){T=x.child;for(var J=W.firstContext;J!==null;){if(J.context===h){if(x.tag===1){J=ai(-1,c&-c),J.tag=2;var he=x.updateQueue;if(he!==null){he=he.shared;var Te=he.pending;Te===null?J.next=J:(J.next=Te.next,Te.next=J),he.pending=J}}x.lanes|=c,J=x.alternate,J!==null&&(J.lanes|=c),mh(x.return,c,a),W.lanes|=c;break}J=J.next}}else if(x.tag===10)T=x.type===a.type?null:x.child;else if(x.tag===18){if(T=x.return,T===null)throw Error(r(341));T.lanes|=c,W=T.alternate,W!==null&&(W.lanes|=c),mh(T,c,a),T=x.sibling}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===a){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}or(n,a,g.children,c),a=a.child}return a;case 9:return g=a.type,h=a.pendingProps.children,Eo(a,c),g=Kr(g),h=h(g),a.flags|=1,or(n,a,h,c),a.child;case 14:return h=a.type,g=nn(h,a.pendingProps),g=nn(h.type,g),Dg(n,a,h,g,c);case 15:return zg(n,a,a.type,a.pendingProps,c);case 17:return h=a.type,g=a.pendingProps,g=a.elementType===h?g:nn(h,g),fd(n,a),a.tag=1,vr(h)?(n=!0,Yc(a)):n=!1,Eo(a,c),Cg(a,h,g),Eh(a,h,g,c),Ih(null,a,h,!0,n,c);case 19:return Wg(n,a,c);case 22:return Mg(n,a,c)}throw Error(r(156,a.tag))};function p0(n,a){return Jn(n,a)}function Sj(n,a,c,h){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(n,a,c,h){return new Sj(n,a,c,h)}function Qh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function kj(n){if(typeof n=="function")return Qh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===F)return 11;if(n===ue)return 14}return 2}function Vi(n,a){var c=n.alternate;return c===null?(c=Yr(n.tag,a,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=a,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&14680064,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,a=n.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c}function _d(n,a,c,h,g,x){var T=2;if(h=n,typeof n=="function")Qh(n)&&(T=1);else if(typeof n=="string")T=5;else e:switch(n){case E:return Aa(c.children,g,x,a);case j:T=8,g|=8;break;case S:return n=Yr(12,c,a,g|2),n.elementType=S,n.lanes=x,n;case C:return n=Yr(13,c,a,g),n.elementType=C,n.lanes=x,n;case ee:return n=Yr(19,c,a,g),n.elementType=ee,n.lanes=x,n;case Pe:return Cd(c,g,x,a);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:T=10;break e;case I:T=9;break e;case F:T=11;break e;case ue:T=14;break e;case Se:T=16,h=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return a=Yr(T,c,a,g),a.elementType=n,a.type=h,a.lanes=x,a}function Aa(n,a,c,h){return n=Yr(7,n,h,a),n.lanes=c,n}function Cd(n,a,c,h){return n=Yr(22,n,h,a),n.elementType=Pe,n.lanes=c,n.stateNode={isHidden:!1},n}function em(n,a,c){return n=Yr(6,n,null,a),n.lanes=c,n}function tm(n,a,c){return a=Yr(4,n.children!==null?n.children:[],n.key,a),a.lanes=c,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}function _j(n,a,c,h,g){this.tag=a,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ki(0),this.expirationTimes=ki(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ki(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function sm(n,a,c,h,g,x,T,W,J){return n=new _j(n,a,c,W,J),a===1?(a=1,x===!0&&(a|=8)):a=0,x=Yr(3,null,null,a),n.current=x,x.stateNode=n,x.memoizedState={element:h,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},fh(x),n}function Cj(n,a,c){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:h==null?null:""+h,children:n,containerInfo:a,implementation:c}}function f0(n){if(!n)return Oi;n=n._reactInternals;e:{if(ar(n)!==n||n.tag!==1)throw Error(r(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(vr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(r(171))}if(n.tag===1){var c=n.type;if(vr(c))return Vf(n,c,a)}return a}function g0(n,a,c,h,g,x,T,W,J){return n=sm(c,h,!0,n,g,x,T,W,J),n.context=f0(null),c=n.current,h=lr(),g=Fi(c),x=ai(h,g),x.callback=a??null,Mi(c,x,g),n.current.lanes=g,bn(n,g,h),Nr(n,h),n}function Pd(n,a,c,h){var g=a.current,x=lr(),T=Fi(g);return c=f0(c),a.context===null?a.context=c:a.pendingContext=c,a=ai(x,T),a.payload={element:n},h=h===void 0?null:h,h!==null&&(a.callback=h),n=Mi(g,a,T),n!==null&&(ln(n,g,T,x),id(n,g,T)),T}function Ed(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function x0(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<a?c:a}}function rm(n,a){x0(n,a),(n=n.alternate)&&x0(n,a)}function Pj(){return null}var y0=typeof reportError=="function"?reportError:function(n){console.error(n)};function nm(n){this._internalRoot=n}Ad.prototype.render=nm.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(r(409));Pd(n,a,null,null)},Ad.prototype.unmount=nm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Ca(function(){Pd(null,n,null,null)}),a[ti]=null}};function Ad(n){this._internalRoot=n}Ad.prototype.unstable_scheduleHydration=function(n){if(n){var a=ut();n={blockedOn:null,target:n,priority:a};for(var c=0;c<Rr.length&&a!==0&&a<Rr[c].priority;c++);Rr.splice(c,0,n),c===0&&ao(n)}};function im(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Td(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function b0(){}function Ej(n,a,c,h,g){if(g){if(typeof h=="function"){var x=h;h=function(){var he=Ed(T);x.call(he)}}var T=g0(a,h,n,0,null,!1,!1,"",b0);return n._reactRootContainer=T,n[ti]=T.current,Pl(n.nodeType===8?n.parentNode:n),Ca(),T}for(;g=n.lastChild;)n.removeChild(g);if(typeof h=="function"){var W=h;h=function(){var he=Ed(J);W.call(he)}}var J=sm(n,0,!1,null,null,!1,!1,"",b0);return n._reactRootContainer=J,n[ti]=J.current,Pl(n.nodeType===8?n.parentNode:n),Ca(function(){Pd(a,J,c,h)}),J}function Rd(n,a,c,h,g){var x=c._reactRootContainer;if(x){var T=x;if(typeof g=="function"){var W=g;g=function(){var J=Ed(T);W.call(J)}}Pd(a,T,n,g)}else T=Ej(c,a,n,g,h);return Ed(T)}Ke=function(n){switch(n.tag){case 3:var a=n.stateNode;if(a.current.memoizedState.isDehydrated){var c=tt(a.pendingLanes);c!==0&&(A(a,c|1),Nr(a,Q()),(Ut&6)===0&&(Oo=Q()+500,Di()))}break;case 13:Ca(function(){var h=ii(n,1);if(h!==null){var g=lr();ln(h,n,1,g)}}),rm(n,1)}},Ae=function(n){if(n.tag===13){var a=ii(n,134217728);if(a!==null){var c=lr();ln(a,n,134217728,c)}rm(n,134217728)}},Zt=function(n){if(n.tag===13){var a=Fi(n),c=ii(n,a);if(c!==null){var h=lr();ln(c,n,a,h)}rm(n,a)}},ut=function(){return Z},Ws=function(n,a){var c=Z;try{return Z=n,a()}finally{Z=c}},fr=function(n,a,c){switch(a){case"input":if(ge(n,c),a=c.name,c.type==="radio"&&a!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var h=c[a];if(h!==n&&h.form===n.form){var g=Jc(h);if(!g)throw Error(r(90));xe(h),ge(h,g)}}}break;case"textarea":dt(n,c);break;case"select":a=c.value,a!=null&&et(n,!!c.multiple,a,!1)}},Pr=Zh,Hn=Ca;var Aj={usingClientEntryPoint:!1,Events:[Tl,wo,Jc,ir,Rs,Zh]},Hl={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tj={bundleType:Hl.bundleType,version:Hl.version,rendererPackageName:Hl.rendererPackageName,rendererConfig:Hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Si(n),n===null?null:n.stateNode},findFiberByHostInstance:Hl.findFiberByHostInstance||Pj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{ct=Id.inject(Tj),Be=Id}catch{}}return Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Aj,Sr.createPortal=function(n,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!im(a))throw Error(r(200));return Cj(n,a,null,c)},Sr.createRoot=function(n,a){if(!im(n))throw Error(r(299));var c=!1,h="",g=y0;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=sm(n,1,!1,null,null,c,!1,h,g),n[ti]=a.current,Pl(n.nodeType===8?n.parentNode:n),new nm(a)},Sr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=Si(a),n=n===null?null:n.stateNode,n},Sr.flushSync=function(n){return Ca(n)},Sr.hydrate=function(n,a,c){if(!Td(a))throw Error(r(200));return Rd(null,n,a,!0,c)},Sr.hydrateRoot=function(n,a,c){if(!im(n))throw Error(r(405));var h=c!=null&&c.hydratedSources||null,g=!1,x="",T=y0;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),a=g0(a,null,n,1,c??null,g,!1,x,T),n[ti]=a.current,Pl(n),h)for(n=0;n<h.length;n++)c=h[n],g=c._getVersion,g=g(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,g]:a.mutableSourceEagerHydrationData.push(c,g);return new Ad(a)},Sr.render=function(n,a,c){if(!Td(a))throw Error(r(200));return Rd(null,n,a,!1,c)},Sr.unmountComponentAtNode=function(n){if(!Td(n))throw Error(r(40));return n._reactRootContainer?(Ca(function(){Rd(null,null,n,!1,function(){n._reactRootContainer=null,n[ti]=null})}),!0):!1},Sr.unstable_batchedUpdates=Zh,Sr.unstable_renderSubtreeIntoContainer=function(n,a,c,h){if(!Td(c))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return Rd(n,a,c,!1,h)},Sr.version="18.3.1-next-f1338f8080-20240426",Sr}var C0;function Zy(){if(C0)return lm.exports;C0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),lm.exports=$j(),lm.exports}var P0;function Fj(){if(P0)return Od;P0=1;var s=Zy();return Od.createRoot=s.createRoot,Od.hydrateRoot=s.hydrateRoot,Od}var Bj=Fj();const Vj=Jy(Bj);Zy();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nc(){return nc=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},nc.apply(this,arguments)}var ea;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(ea||(ea={}));const E0="popstate";function Wj(s){s===void 0&&(s={});function t(o,l){let{pathname:d="/",search:m="",hash:p=""}=so(o.location.hash.substr(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),qm("",{pathname:d,search:m,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(o,l){let d=o.document.querySelector("base"),m="";if(d&&d.getAttribute("href")){let p=o.location.href,f=p.indexOf("#");m=f===-1?p:p.slice(0,f)}return m+"#"+(typeof l=="string"?l:ru(l))}function i(o,l){Su(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return qj(t,r,i,s)}function js(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function Su(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hj(){return Math.random().toString(36).substr(2,8)}function A0(s,t){return{usr:s.state,key:s.key,idx:t}}function qm(s,t,r,i){return r===void 0&&(r=null),nc({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?so(t):t,{state:r,key:t&&t.key||i||Hj()})}function ru(s){let{pathname:t="/",search:r="",hash:i=""}=s;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function so(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substr(r),s=s.substr(0,r));let i=s.indexOf("?");i>=0&&(t.search=s.substr(i),s=s.substr(0,i)),s&&(t.pathname=s)}return t}function qj(s,t,r,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,m=ea.Pop,p=null,f=b();f==null&&(f=0,d.replaceState(nc({},d.state,{idx:f}),""));function b(){return(d.state||{idx:null}).idx}function w(){m=ea.Pop;let O=b(),L=O==null?null:O-f;f=O,p&&p({action:m,location:_.location,delta:L})}function N(O,L){m=ea.Push;let $=qm(_.location,O,L);r&&r($,O),f=b()+1;let M=A0($,f),te=_.createHref($);try{d.pushState(M,"",te)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;o.location.assign(te)}l&&p&&p({action:m,location:_.location,delta:1})}function R(O,L){m=ea.Replace;let $=qm(_.location,O,L);r&&r($,O),f=b();let M=A0($,f),te=_.createHref($);d.replaceState(M,"",te),l&&p&&p({action:m,location:_.location,delta:0})}function P(O){let L=o.location.origin!=="null"?o.location.origin:o.location.href,$=typeof O=="string"?O:ru(O);return $=$.replace(/ $/,"%20"),js(L,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,L)}let _={get action(){return m},get location(){return s(o,d)},listen(O){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(E0,w),p=O,()=>{o.removeEventListener(E0,w),p=null}},createHref(O){return t(o,O)},createURL:P,encodeLocation(O){let L=P(O);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:N,replace:R,go(O){return d.go(O)}};return _}var T0;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(T0||(T0={}));function Gj(s,t,r){return r===void 0&&(r="/"),Kj(s,t,r)}function Kj(s,t,r,i){let o=typeof t=="string"?so(t):t,l=Np(o.pathname||"/",r);if(l==null)return null;let d=Yy(s);Jj(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let f=oN(l);m=nN(d[p],f)}return m}function Yy(s,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let o=(l,d,m)=>{let p={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};p.relativePath.startsWith("/")&&(js(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let f=na([i,p.relativePath]),b=r.concat(p);l.children&&l.children.length>0&&(js(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Yy(l.children,t,b,f)),!(l.path==null&&!l.index)&&t.push({path:f,score:sN(f,l.index),routesMeta:b})};return s.forEach((l,d)=>{var m;if(l.path===""||!((m=l.path)!=null&&m.includes("?")))o(l,d);else for(let p of Xy(l.path))o(l,d,p)}),t}function Xy(s){let t=s.split("/");if(t.length===0)return[];let[r,...i]=t,o=r.endsWith("?"),l=r.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=Xy(i.join("/")),m=[];return m.push(...d.map(p=>p===""?l:[l,p].join("/"))),o&&m.push(...d),m.map(p=>s.startsWith("/")&&p===""?"/":p)}function Jj(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:rN(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const Zj=/^:[\w-]+$/,Yj=3,Xj=2,Qj=1,eN=10,tN=-2,R0=s=>s==="*";function sN(s,t){let r=s.split("/"),i=r.length;return r.some(R0)&&(i+=tN),t&&(i+=Xj),r.filter(o=>!R0(o)).reduce((o,l)=>o+(Zj.test(l)?Yj:l===""?Qj:eN),i)}function rN(s,t){return s.length===t.length&&s.slice(0,-1).every((i,o)=>i===t[o])?s[s.length-1]-t[t.length-1]:0}function nN(s,t,r){let{routesMeta:i}=s,o={},l="/",d=[];for(let m=0;m<i.length;++m){let p=i[m],f=m===i.length-1,b=l==="/"?t:t.slice(l.length)||"/",w=iN({path:p.relativePath,caseSensitive:p.caseSensitive,end:f},b),N=p.route;if(!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:na([l,w.pathname]),pathnameBase:hN(na([l,w.pathnameBase])),route:N}),w.pathnameBase!=="/"&&(l=na([l,w.pathnameBase]))}return d}function iN(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,i]=aN(s.path,s.caseSensitive,s.end),o=t.match(r);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:i.reduce((f,b,w)=>{let{paramName:N,isOptional:R}=b;if(N==="*"){let _=m[w]||"";d=l.slice(0,l.length-_.length).replace(/(.)\/+$/,"$1")}const P=m[w];return R&&!P?f[N]=void 0:f[N]=(P||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:d,pattern:s}}function aN(s,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Su(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(i.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),i]}function oN(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Su(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function Np(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=s.charAt(r);return i&&i!=="/"?null:s.slice(r)||"/"}const lN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cN=s=>lN.test(s);function dN(s,t){t===void 0&&(t="/");let{pathname:r,search:i="",hash:o=""}=typeof s=="string"?so(s):s,l;if(r)if(cN(r))l=r;else{if(r.includes("//")){let d=r;r=r.replace(/\/\/+/g,"/"),Su(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+r))}r.startsWith("/")?l=I0(r.substring(1),"/"):l=I0(r,t)}else l=t;return{pathname:l,search:mN(i),hash:pN(o)}}function I0(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function um(s,t,r,i){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uN(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Sp(s,t){let r=uN(s);return t?r.map((i,o)=>o===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function kp(s,t,r,i){i===void 0&&(i=!1);let o;typeof s=="string"?o=so(s):(o=nc({},s),js(!o.pathname||!o.pathname.includes("?"),um("?","pathname","search",o)),js(!o.pathname||!o.pathname.includes("#"),um("#","pathname","hash",o)),js(!o.search||!o.search.includes("#"),um("#","search","hash",o)));let l=s===""||o.pathname==="",d=l?"/":o.pathname,m;if(d==null)m=r;else{let w=t.length-1;if(!i&&d.startsWith("..")){let N=d.split("/");for(;N[0]==="..";)N.shift(),w-=1;o.pathname=N.join("/")}m=w>=0?t[w]:"/"}let p=dN(o,m),f=d&&d!=="/"&&d.endsWith("/"),b=(l||d===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(f||b)&&(p.pathname+="/"),p}const na=s=>s.join("/").replace(/\/\/+/g,"/"),hN=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),mN=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,pN=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function fN(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const Qy=["post","put","patch","delete"];new Set(Qy);const gN=["get",...Qy];new Set(gN);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ic(){return ic=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},ic.apply(this,arguments)}const _p=v.createContext(null),xN=v.createContext(null),ua=v.createContext(null),ku=v.createContext(null),Bn=v.createContext({outlet:null,matches:[],isDataRoute:!1}),eb=v.createContext(null);function yN(s,t){let{relative:r}=t===void 0?{}:t;dl()||js(!1);let{basename:i,navigator:o}=v.useContext(ua),{hash:l,pathname:d,search:m}=sb(s,{relative:r}),p=d;return i!=="/"&&(p=d==="/"?i:na([i,d])),o.createHref({pathname:p,search:m,hash:l})}function dl(){return v.useContext(ku)!=null}function ha(){return dl()||js(!1),v.useContext(ku).location}function tb(s){v.useContext(ua).static||v.useLayoutEffect(s)}function nr(){let{isDataRoute:s}=v.useContext(Bn);return s?IN():bN()}function bN(){dl()||js(!1);let s=v.useContext(_p),{basename:t,future:r,navigator:i}=v.useContext(ua),{matches:o}=v.useContext(Bn),{pathname:l}=ha(),d=JSON.stringify(Sp(o,r.v7_relativeSplatPath)),m=v.useRef(!1);return tb(()=>{m.current=!0}),v.useCallback(function(f,b){if(b===void 0&&(b={}),!m.current)return;if(typeof f=="number"){i.go(f);return}let w=kp(f,JSON.parse(d),l,b.relative==="path");s==null&&t!=="/"&&(w.pathname=w.pathname==="/"?t:na([t,w.pathname])),(b.replace?i.replace:i.push)(w,b.state,b)},[t,i,d,l,s])}const vN=v.createContext(null);function wN(s){let t=v.useContext(Bn).outlet;return t&&v.createElement(vN.Provider,{value:s},t)}function ul(){let{matches:s}=v.useContext(Bn),t=s[s.length-1];return t?t.params:{}}function sb(s,t){let{relative:r}=t===void 0?{}:t,{future:i}=v.useContext(ua),{matches:o}=v.useContext(Bn),{pathname:l}=ha(),d=JSON.stringify(Sp(o,i.v7_relativeSplatPath));return v.useMemo(()=>kp(s,JSON.parse(d),l,r==="path"),[s,d,l,r])}function jN(s,t){return NN(s,t)}function NN(s,t,r,i){dl()||js(!1);let{navigator:o}=v.useContext(ua),{matches:l}=v.useContext(Bn),d=l[l.length-1],m=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let f=ha(),b;if(t){var w;let O=typeof t=="string"?so(t):t;p==="/"||(w=O.pathname)!=null&&w.startsWith(p)||js(!1),b=O}else b=f;let N=b.pathname||"/",R=N;if(p!=="/"){let O=p.replace(/^\//,"").split("/");R="/"+N.replace(/^\//,"").split("/").slice(O.length).join("/")}let P=Gj(s,{pathname:R}),_=PN(P&&P.map(O=>Object.assign({},O,{params:Object.assign({},m,O.params),pathname:na([p,o.encodeLocation?o.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:na([p,o.encodeLocation?o.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),l,r,i);return t&&_?v.createElement(ku.Provider,{value:{location:ic({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:ea.Pop}},_):_}function SN(){let s=RN(),t=fN(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:o},r):null,null)}const kN=v.createElement(SN,null);class _N extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?v.createElement(Bn.Provider,{value:this.props.routeContext},v.createElement(eb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function CN(s){let{routeContext:t,match:r,children:i}=s,o=v.useContext(_p);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(Bn.Provider,{value:t},i)}function PN(s,t,r,i){var o;if(t===void 0&&(t=[]),r===void 0&&(r=null),i===void 0&&(i=null),s==null){var l;if(!r)return null;if(r.errors)s=r.matches;else if((l=i)!=null&&l.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let d=s,m=(o=r)==null?void 0:o.errors;if(m!=null){let b=d.findIndex(w=>w.route.id&&(m==null?void 0:m[w.route.id])!==void 0);b>=0||js(!1),d=d.slice(0,Math.min(d.length,b+1))}let p=!1,f=-1;if(r&&i&&i.v7_partialHydration)for(let b=0;b<d.length;b++){let w=d[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(f=b),w.route.id){let{loaderData:N,errors:R}=r,P=w.route.loader&&N[w.route.id]===void 0&&(!R||R[w.route.id]===void 0);if(w.route.lazy||P){p=!0,f>=0?d=d.slice(0,f+1):d=[d[0]];break}}}return d.reduceRight((b,w,N)=>{let R,P=!1,_=null,O=null;r&&(R=m&&w.route.id?m[w.route.id]:void 0,_=w.route.errorElement||kN,p&&(f<0&&N===0?(ON("route-fallback"),P=!0,O=null):f===N&&(P=!0,O=w.route.hydrateFallbackElement||null)));let L=t.concat(d.slice(0,N+1)),$=()=>{let M;return R?M=_:P?M=O:w.route.Component?M=v.createElement(w.route.Component,null):w.route.element?M=w.route.element:M=b,v.createElement(CN,{match:w,routeContext:{outlet:b,matches:L,isDataRoute:r!=null},children:M})};return r&&(w.route.ErrorBoundary||w.route.errorElement||N===0)?v.createElement(_N,{location:r.location,revalidation:r.revalidation,component:_,error:R,children:$(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):$()},null)}var rb=(function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s})(rb||{}),nb=(function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s})(nb||{});function EN(s){let t=v.useContext(_p);return t||js(!1),t}function AN(s){let t=v.useContext(xN);return t||js(!1),t}function TN(s){let t=v.useContext(Bn);return t||js(!1),t}function ib(s){let t=TN(),r=t.matches[t.matches.length-1];return r.route.id||js(!1),r.route.id}function RN(){var s;let t=v.useContext(eb),r=AN(),i=ib();return t!==void 0?t:(s=r.errors)==null?void 0:s[i]}function IN(){let{router:s}=EN(rb.UseNavigateStable),t=ib(nb.UseNavigateStable),r=v.useRef(!1);return tb(()=>{r.current=!0}),v.useCallback(function(o,l){l===void 0&&(l={}),r.current&&(typeof o=="number"?s.navigate(o):s.navigate(o,ic({fromRouteId:t},l)))},[s,t])}const O0={};function ON(s,t,r){O0[s]||(O0[s]=!0)}function DN(s,t){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function zN(s){let{to:t,replace:r,state:i,relative:o}=s;dl()||js(!1);let{future:l,static:d}=v.useContext(ua),{matches:m}=v.useContext(Bn),{pathname:p}=ha(),f=nr(),b=kp(t,Sp(m,l.v7_relativeSplatPath),p,o==="path"),w=JSON.stringify(b);return v.useEffect(()=>f(JSON.parse(w),{replace:r,state:i,relative:o}),[f,w,o,r,i]),null}function ab(s){return wN(s.context)}function kt(s){js(!1)}function MN(s){let{basename:t="/",children:r=null,location:i,navigationType:o=ea.Pop,navigator:l,static:d=!1,future:m}=s;dl()&&js(!1);let p=t.replace(/^\/*/,"/"),f=v.useMemo(()=>({basename:p,navigator:l,static:d,future:ic({v7_relativeSplatPath:!1},m)}),[p,m,l,d]);typeof i=="string"&&(i=so(i));let{pathname:b="/",search:w="",hash:N="",state:R=null,key:P="default"}=i,_=v.useMemo(()=>{let O=Np(b,p);return O==null?null:{location:{pathname:O,search:w,hash:N,state:R,key:P},navigationType:o}},[p,b,w,N,R,P,o]);return _==null?null:v.createElement(ua.Provider,{value:f},v.createElement(ku.Provider,{children:r,value:_}))}function LN(s){let{children:t,location:r}=s;return jN(Gm(t),r)}new Promise(()=>{});function Gm(s,t){t===void 0&&(t=[]);let r=[];return v.Children.forEach(s,(i,o)=>{if(!v.isValidElement(i))return;let l=[...t,o];if(i.type===v.Fragment){r.push.apply(r,Gm(i.props.children,l));return}i.type!==kt&&js(!1),!i.props.index||!i.props.children||js(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Gm(i.props.children,l)),r.push(d)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Km(){return Km=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},Km.apply(this,arguments)}function UN(s,t){if(s==null)return{};var r={},i=Object.keys(s),o,l;for(l=0;l<i.length;l++)o=i[l],!(t.indexOf(o)>=0)&&(r[o]=s[o]);return r}function $N(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function FN(s,t){return s.button===0&&(!t||t==="_self")&&!$N(s)}const BN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VN="6";try{window.__reactRouterVersion=VN}catch{}const WN="startTransition",D0=Mj[WN];function HN(s){let{basename:t,children:r,future:i,window:o}=s,l=v.useRef();l.current==null&&(l.current=Wj({window:o,v5Compat:!0}));let d=l.current,[m,p]=v.useState({action:d.action,location:d.location}),{v7_startTransition:f}=i||{},b=v.useCallback(w=>{f&&D0?D0(()=>p(w)):p(w)},[p,f]);return v.useLayoutEffect(()=>d.listen(b),[d,b]),v.useEffect(()=>DN(i),[i]),v.createElement(MN,{basename:t,children:r,location:m.location,navigationType:m.action,navigator:d,future:i})}const qN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,We=v.forwardRef(function(t,r){let{onClick:i,relative:o,reloadDocument:l,replace:d,state:m,target:p,to:f,preventScrollReset:b,viewTransition:w}=t,N=UN(t,BN),{basename:R}=v.useContext(ua),P,_=!1;if(typeof f=="string"&&GN.test(f)&&(P=f,qN))try{let M=new URL(window.location.href),te=f.startsWith("//")?new URL(M.protocol+f):new URL(f),H=Np(te.pathname,R);te.origin===M.origin&&H!=null?f=H+te.search+te.hash:_=!0}catch{}let O=yN(f,{relative:o}),L=KN(f,{replace:d,state:m,target:p,preventScrollReset:b,relative:o,viewTransition:w});function $(M){i&&i(M),M.defaultPrevented||L(M)}return v.createElement("a",Km({},N,{href:P||O,onClick:_||l?i:$,ref:r,target:p}))});var z0;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(z0||(z0={}));var M0;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(M0||(M0={}));function KN(s,t){let{target:r,replace:i,state:o,preventScrollReset:l,relative:d,viewTransition:m}=t===void 0?{}:t,p=nr(),f=ha(),b=sb(s,{relative:d});return v.useCallback(w=>{if(FN(w,r)){w.preventDefault();let N=i!==void 0?i:ru(f)===ru(b);p(s,{replace:N,state:o,preventScrollReset:l,relative:d,viewTransition:m})}},[f,p,b,i,o,r,s,l,d,m])}const L0=[{id:"bc0ef8b5-e4b9-4bc8-aedd-d677391d74c0",name:"Red Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763528572144%2F1763528976141_red%20model.png?alt=media&token=1deef60f-3c4f-4e3e-beae-763d1b39621e",description:"Passion & Energy"},{id:"23bcfca6-5735-4481-ab25-9d61ac83bc3f",name:"Pink Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763716235698%2F1763716259515_pink%20model.png?alt=media&token=c41510b1-9946-49d0-8b19-f679f24d392b",description:"Love & Softness"},{id:"3427e08d-f82c-47c7-b5e7-2b8567733f38",name:"Silver Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732069765%2F1763732089246_silver%20model.png?alt=media&token=eb30db54-99d1-4c3f-ba97-0f2b34934d79",description:"Sleek & Modern"},{id:"3efca09b-07d8-40f2-8b6e-104049593cb3",name:"Colorfull",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763849326772%2F1763849625346_colorfull.jpg?alt=media&token=41d78666-4aa1-47a0-935f-c5361b4538ac",description:"Vibrant & Fun"},{id:"530b80f1-ac27-4ab4-ac10-f093d9d48dde",name:"Green Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732028982%2F1763732064239_download%20(1).png?alt=media&token=1b184b78-799f-4d79-9e55-8d122c2c07eb",description:"Nature & Harmony"},{id:"5fa9457f-3d9b-421c-9746-6bffbee4d4da",name:"Yellow Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732120801%2F1763732142964_download.png?alt=media&token=49c0be99-48b2-47ba-9cb4-38628d2876fe",description:"Joy & Sunshine"},{id:"6e673b67-9dd3-44b8-8797-51cc7e4ddf07",name:"Orange Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732327301%2F1763732349258_orange%20model.png?alt=media&token=78d402fc-e0f7-4b73-b0d3-a7502f7bc6d3",description:"Warmth & Creativity"},{id:"80da52b5-5130-462c-8f27-bdf7ff1c6564",name:"Black Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732028102%2F1763732058240_1.jpg?alt=media&token=6458bde4-9255-4c11-9015-ec738b79a8cb",description:"Bold & Mysterious"},{id:"8e8e275a-98fb-42b9-8551-ffeff03fb92a",name:"Purple Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763529047916%2F1763529076550_purple%20model.png?alt=media&token=10fa0811-7c4c-4c41-9165-262addea89f3",description:"Royalty & Spirit"},{id:"9667b780-6f85-48ad-a19e-da0951efc590",name:"Bronze and Brown Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732005647%2F1763732023012_copper%20model.png?alt=media&token=72619e26-b086-4913-a97f-ed8bea238d23",description:"Earthy & Ancient"},{id:"9d24210c-eb1c-4273-8f6d-beebe2016fc4",name:"Blue Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763529024900%2F1763529043293_2.jpg?alt=media&token=29dcba53-1264-45a2-9b68-a661a277cc91",description:"Calm & Ocean"},{id:"9d9fff97-3b25-409e-9e39-4a3b6412bb57",name:"Girls",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1764232246395%2F1764232265823_girls%20color%20background.jpg?alt=media&token=13860e81-a2e7-48fc-a6b3-42d0763c8d41",description:"Fun & Playful"},{id:"b40795f0-5b04-4e95-8e84-40ca3c9561d1",name:"White & Pearl Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763731966302%2F1763731995895_white%20model.png?alt=media&token=56bdfed9-00c4-4442-ac6a-358d1223e04c",description:"Elegance & Purity"},{id:"1ef06240-10e5-4bdf-9286-84d355991e95",name:"Gold Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732095040%2F1763732116711_gold%20model.png?alt=media&token=25b5331b-6bf1-4ecc-94c8-1ceb31ccdcc7",description:"Luxury & Wealth"}],JN=[{id:"1761729812469",code:"SPV-003",name:"Sweetheart Red Resin Stud Earrings",slug:"sweetheart-red-resin-studs",description:"Embrace a touch of whimsy with these adorable sweetheart stud earrings, meticulously crafted from vibrant epoxy resin. Each glossy red heart reflects light beautifully.",whenAndHowToWear:"Perfect for date nights or adding a pop of color to a monochrome outfit.",price:29,priceUSD:2,compareAtPrice:45,memberPrice:14.5,costPrice:5,madeBy:"Spoil Me Vintage",category:"Red Collection",type:"Stud",status:"published",images:[],stock:58,tags:["Red heart earrings","stud earrings","resin jewelry","handmade"],seoKeywords:["heart earrings","red studs"],earringMaterials:[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal"},{name:"Stainless Steel",modifier:0,description:"Hypo-allergenic"}],isNewArrival:!1,isBestSeller:!0,reviews:[{id:"rev1",userName:"Amelia Thompson",location:"London, UK",content:"The sparkle of these earrings is absolutely mesmerizing, perfect for adding elegance to any outfit.",rating:5,date:"2024-11-15T10:30:00Z"},{id:"rev2",userName:"Carlos Ramirez",location:"Mexico City, Mexico",content:"Good quality, but the durability could be better for everyday wear.",rating:4,date:"2024-12-20T14:45:00Z"},{id:"rev3",userName:"Yuki Tanaka",location:"Tokyo, Japan",content:"These arrived faster than expected and the craftsmanship is impeccable. Highly recommend for special occasions.",rating:5,date:"2025-01-22T09:15:00Z"},{id:"rev4",userName:"Fatima Al-Zahra",location:"Dubai, UAE",content:"Beautiful design, though the price feels a bit high for the materials used.",rating:4,date:"2025-02-25T16:20:00Z"},{id:"rev5",userName:"Liam O'Sullivan",location:"Dublin, Ireland",content:"The color is vibrant and the design is unique. Perfect for everyday wear.",rating:4,date:"2025-03-28T11:00:00Z"},{id:"rev6",userName:"Priya Sharma",location:"Mumbai, India",content:"Nice piece, but I wish it sparkled more under different lights.",rating:3,date:"2025-04-01T13:30:00Z"},{id:"rev7",userName:"Hans Mueller",location:"Berlin, Germany",content:"Exceeded my expectations in terms of quality and style. The opal shines beautifully under light.",rating:5,date:"2025-05-03T08:45:00Z"},{id:"rev8",userName:"Isabella Rossi",location:"Rome, Italy",content:"Elegant design, but the durability is questionable after a few wears.",rating:3,date:"2025-06-05T17:10:00Z"},{id:"rev9",userName:"Ahmed Hassan",location:"Cairo, Egypt",content:"The ring fits perfectly and the stone has amazing play of colors. Worth every penny.",rating:5,date:"2025-07-07T12:25:00Z"},{id:"rev10",userName:"Sophie Dubois",location:"Paris, France",content:"Charming, and the price is reasonable for the sparkle it provides.",rating:4,date:"2025-08-09T15:50:00Z"},{id:"rev11",userName:"Raj Patel",location:"Sydney, Australia",content:"Fast shipping and the product is as described. Very satisfied with the purchase.",rating:5,date:"2025-09-11T10:05:00Z"},{id:"rev12",userName:"Elena Petrova",location:"Moscow, Russia",content:"Unique style, but the durability leaves much to be desired.",rating:3,date:"2025-10-13T14:30:00Z"},{id:"rev13",userName:"Miguel Santos",location:"So Paulo, Brazil",content:"The earrings are lightweight and comfortable to wear all day. Love the red color.",rating:4,date:"2025-11-15T09:20:00Z"}],createdAt:new Date().toISOString()},{id:"1762477248818",code:"SPV-052",name:"Ethereal Aurora Oval Opal Ring",slug:"ethereal-aurora-oval-opal-ring",description:"Experience the captivating play of color in this unique oval opal ring, meticulously set in gleaming sterling silver.",price:129,priceUSD:7,costPrice:50,memberPrice:60,backOfficeLink:"https://www.temu.com/example-ring-link",madeBy:"Outsourced",category:"White or Pearl Collection",type:"Ring",status:"published",images:[],stock:7,ringStock:{5:1,6:1,7:1,8:1,9:1,10:1,11:1},tags:["Opal ring","sterling silver","statement ring"],isNewArrival:!0,isFeaturedRing:!0,reviews:[{id:"rev14",userName:"Aisha Khan",location:"Karachi, Pakistan",content:"Gorgeous sparkle, but the price is a bit steep for what you get.",rating:4,date:"2024-11-17T16:45:00Z"},{id:"rev15",userName:"Oliver Jensen",location:"Copenhagen, Denmark",content:"High-quality materials and excellent customer service. The ring is a standout piece.",rating:5,date:"2024-12-19T11:15:00Z"},{id:"rev16",userName:"Nina Kowalski",location:"Warsaw, Poland",content:"Decent value, though durability could be improved.",rating:3,date:"2025-01-21T13:40:00Z"},{id:"rev17",userName:"Diego Fernandez",location:"Buenos Aires, Argentina",content:"The opal's iridescence is mesmerizing. Arrived well-packaged and on time.",rating:5,date:"2025-02-23T08:55:00Z"},{id:"rev18",userName:"Layla Al-Farsi",location:"Riyadh, Saudi Arabia",content:"Stylish accessory with great sparkle, worth the investment.",rating:5,date:"2025-03-25T17:25:00Z"},{id:"rev19",userName:"Finn Larsen",location:"Oslo, Norway",content:"Great attention to detail in the craftsmanship. Perfect for gifting.",rating:4,date:"2025-04-27T12:10:00Z"},{id:"rev20",userName:"Zara Ahmed",location:"Lagos, Nigeria",content:"Impressive quality, but the durability is not as expected.",rating:3,date:"2025-05-29T15:35:00Z"},{id:"rev21",userName:"Luca Bianchi",location:"Milan, Italy",content:"The earrings sparkle just right and the resin is smooth. Very happy with this buy.",rating:5,date:"2025-06-31T10:50:00Z"},{id:"rev22",userName:"Anika Gupta",location:"Delhi, India",content:"Solid choice, and the price matches the sparkle and quality.",rating:4,date:"2025-07-02T14:15:00Z"},{id:"rev23",userName:"Victor Nguyen",location:"Ho Chi Minh City, Vietnam",content:"Beautiful design and the silver setting enhances the opal perfectly. Highly recommended.",rating:5,date:"2025-08-04T09:30:00Z"},{id:"rev24",userName:"Maya Cohen",location:"Tel Aviv, Israel",content:"Lovely item with excellent durability for daily use.",rating:4,date:"2025-09-06T16:55:00Z"},{id:"rev25",userName:"Johan Svensson",location:"Stockholm, Sweden",content:"The product exceeded my expectations. The color and fit are spot on.",rating:5,date:"2025-10-08T11:40:00Z"}],createdAt:new Date().toISOString()}],Tn={id:"guest",name:"Guest",email:"",isMember:!1,membershipTier:"none",loyaltyPoints:0,affiliateCode:"",affiliateEarnings:0,wishlist:[],notifications:[],isAdmin:!1,socialRewards:{},shippingAddress:{street:"",suburb:"",city:"",province:"",postalCode:""}},ZN=[{id:"s1",title:"Summer Tech Sale",products:["1761729812469"],discountPercentage:15,endsAt:new Date(Date.now()+864e5*2).toISOString(),image:"https://picsum.photos/800/400?random=20"}];function _u(s,t){var r={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(r[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(r[i[o]]=s[i[o]]);return r}function YN(s,t,r,i){function o(l){return l instanceof r?l:new r(function(d){d(l)})}return new(r||(r=Promise))(function(l,d){function m(b){try{f(i.next(b))}catch(w){d(w)}}function p(b){try{f(i.throw(b))}catch(w){d(w)}}function f(b){b.done?l(b.value):o(b.value).then(m,p)}f((i=i.apply(s,t||[])).next())})}const XN=s=>s?(...t)=>s(...t):(...t)=>fetch(...t);class Cp extends Error{constructor(t,r="FunctionsError",i){super(t),this.name=r,this.context=i}}class QN extends Cp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class U0 extends Cp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class $0 extends Cp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Jm;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Jm||(Jm={}));class e1{constructor(t,{headers:r={},customFetch:i,region:o=Jm.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=XN(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return YN(this,arguments,void 0,function*(r,i={}){var o;let l,d;try{const{headers:m,method:p,body:f,signal:b,timeout:w}=i;let N={},{region:R}=i;R||(R=this.region);const P=new URL(`${this.url}/${r}`);R&&R!=="any"&&(N["x-region"]=R,P.searchParams.set("forceFunctionRegion",R));let _;f&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(N["Content-Type"]="application/octet-stream",_=f):typeof f=="string"?(N["Content-Type"]="text/plain",_=f):typeof FormData<"u"&&f instanceof FormData?_=f:(N["Content-Type"]="application/json",_=JSON.stringify(f)):_=f;let O=b;w&&(d=new AbortController,l=setTimeout(()=>d.abort(),w),b?(O=d.signal,b.addEventListener("abort",()=>d.abort())):O=d.signal);const L=yield this.fetch(P.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},N),this.headers),m),body:_,signal:O}).catch(H=>{throw new QN(H)}),$=L.headers.get("x-relay-error");if($&&$==="true")throw new U0(L);if(!L.ok)throw new $0(L);let M=((o=L.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),te;return M==="application/json"?te=yield L.json():M==="application/octet-stream"||M==="application/pdf"?te=yield L.blob():M==="text/event-stream"?te=L:M==="multipart/form-data"?te=yield L.formData():te=yield L.text(),{data:te,error:null,response:L}}catch(m){return{data:null,error:m,response:m instanceof $0||m instanceof U0?m.context:void 0}}finally{l&&clearTimeout(l)}})}}var t1=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},s1=class{constructor(s){var t,r;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(t=s.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,t){return this.headers=new Headers(this.headers),this.headers.set(s,t),this}then(s,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let d=null,m=null,p=null,f=l.status,b=l.statusText;if(l.ok){var w,N;if(r.method!=="HEAD"){var R;const L=await l.text();L===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((R=r.headers.get("Accept"))===null||R===void 0)&&R.includes("application/vnd.pgrst.plan+text"))?m=L:m=JSON.parse(L))}const _=(w=r.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),O=(N=l.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");_&&O&&O.length>1&&(p=parseInt(O[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(m)&&(m.length>1?(d={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,p=null,f=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var P;const _=await l.text();try{d=JSON.parse(_),Array.isArray(d)&&l.status===404&&(m=[],d=null,f=200,b="OK")}catch{l.status===404&&_===""?(f=204,b="No Content"):d={message:_}}if(d&&r.isMaybeSingle&&(!(d==null||(P=d.details)===null||P===void 0)&&P.includes("0 rows"))&&(d=null,f=200,b="OK"),d&&r.shouldThrowOnError)throw new t1(d)}return{error:d,data:m,count:p,status:f,statusText:b}});return this.shouldThrowOnError||(o=o.catch(l=>{var d;let m="";const p=l==null?void 0:l.cause;if(p){var f,b,w,N;const P=(f=p==null?void 0:p.message)!==null&&f!==void 0?f:"",_=(b=p==null?void 0:p.code)!==null&&b!==void 0?b:"";m=`${(w=l==null?void 0:l.name)!==null&&w!==void 0?w:"FetchError"}: ${l==null?void 0:l.message}`,m+=`

Caused by: ${(N=p==null?void 0:p.name)!==null&&N!==void 0?N:"Error"}: ${P}`,_&&(m+=` (${_})`),p!=null&&p.stack&&(m+=`
${p.stack}`)}else{var R;m=(R=l==null?void 0:l.stack)!==null&&R!==void 0?R:""}return{error:{message:`${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"FetchError"}: ${l==null?void 0:l.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(s,t)}returns(){return this}overrideTypes(){return this}},r1=class extends s1{select(s){let t=!1;const r=(s??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.order`:"order",d=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${d?`${d},`:""}${s}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${s}`),this}range(s,t,{foreignTable:r,referencedTable:i=r}={}){const o=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${s}`),this.url.searchParams.set(l,`${t-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:l="text"}={}){var d;const m=[s?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${p}"; options=${m};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const F0=new RegExp("[,()]");var Wo=class extends r1{eq(s,t){return this.url.searchParams.append(s,`eq.${t}`),this}neq(s,t){return this.url.searchParams.append(s,`neq.${t}`),this}gt(s,t){return this.url.searchParams.append(s,`gt.${t}`),this}gte(s,t){return this.url.searchParams.append(s,`gte.${t}`),this}lt(s,t){return this.url.searchParams.append(s,`lt.${t}`),this}lte(s,t){return this.url.searchParams.append(s,`lte.${t}`),this}like(s,t){return this.url.searchParams.append(s,`like.${t}`),this}likeAllOf(s,t){return this.url.searchParams.append(s,`like(all).{${t.join(",")}}`),this}likeAnyOf(s,t){return this.url.searchParams.append(s,`like(any).{${t.join(",")}}`),this}ilike(s,t){return this.url.searchParams.append(s,`ilike.${t}`),this}ilikeAllOf(s,t){return this.url.searchParams.append(s,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(s,t){return this.url.searchParams.append(s,`ilike(any).{${t.join(",")}}`),this}regexMatch(s,t){return this.url.searchParams.append(s,`match.${t}`),this}regexIMatch(s,t){return this.url.searchParams.append(s,`imatch.${t}`),this}is(s,t){return this.url.searchParams.append(s,`is.${t}`),this}isDistinct(s,t){return this.url.searchParams.append(s,`isdistinct.${t}`),this}in(s,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&F0.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&F0.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,t){return typeof t=="string"?this.url.searchParams.append(s,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(s,`cs.{${t.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(t)}`),this}containedBy(s,t){return typeof t=="string"?this.url.searchParams.append(s,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(s,`cd.{${t.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(t)}`),this}rangeGt(s,t){return this.url.searchParams.append(s,`sr.${t}`),this}rangeGte(s,t){return this.url.searchParams.append(s,`nxl.${t}`),this}rangeLt(s,t){return this.url.searchParams.append(s,`sl.${t}`),this}rangeLte(s,t){return this.url.searchParams.append(s,`nxr.${t}`),this}rangeAdjacent(s,t){return this.url.searchParams.append(s,`adj.${t}`),this}overlaps(s,t){return typeof t=="string"?this.url.searchParams.append(s,`ov.${t}`):this.url.searchParams.append(s,`ov.{${t.join(",")}}`),this}textSearch(s,t,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${o}fts${l}.${t}`),this}match(s){return Object.entries(s).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(s,t,r){return this.url.searchParams.append(s,`not.${t}.${r}`),this}or(s,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${s})`),this}filter(s,t,r){return this.url.searchParams.append(s,`${t}.${r}`),this}},n1=class{constructor(s,{headers:t={},schema:r,fetch:i}){this.url=s,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(s,t){const{head:r=!1,count:i}=t??{},o=r?"HEAD":"GET";let l=!1;const d=(s??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join("");return this.url.searchParams.set("select",d),i&&this.headers.append("Prefer",`count=${i}`),new Wo({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:t,defaultToNull:r=!0}={}){var i;const o="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const l=s.reduce((d,m)=>d.concat(Object.keys(m)),[]);if(l.length>0){const d=[...new Set(l)].map(m=>`"${m}"`);this.url.searchParams.set("columns",d.join(","))}}return new Wo({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(s,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){var l;const d="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((p,f)=>p.concat(Object.keys(f)),[]);if(m.length>0){const p=[...new Set(m)].map(f=>`"${f}"`);this.url.searchParams.set("columns",p.join(","))}}return new Wo({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(s,{count:t}={}){var r;const i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Wo({method:i,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:s}={}){var t;const r="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new Wo({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},i1=class ob{constructor(t,{headers:r={},schema:i,fetch:o}={}){this.url=t,this.headers=new Headers(r),this.schemaName=i,this.fetch=o}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new n1(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ob(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:i=!1,get:o=!1,count:l}={}){var d;let m;const p=new URL(`${this.url}/rpc/${t}`);let f;i||o?(m=i?"HEAD":"GET",Object.entries(r).filter(([w,N])=>N!==void 0).map(([w,N])=>[w,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([w,N])=>{p.searchParams.append(w,N)})):(m="POST",f=r);const b=new Headers(this.headers);return l&&b.set("Prefer",`count=${l}`),new Wo({method:m,url:p,headers:b,schema:this.schemaName,body:f,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class a1{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const i=this.getWebSocketConstructor();return new i(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const o1="2.89.0",l1=`realtime-js/${o1}`,lb="1.0.0",c1="2.0.0",B0=lb,Zm=1e4,d1=1e3,u1=100;var Gi;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Gi||(Gi={}));var Ds;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Ds||(Ds={}));var un;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(un||(un={}));var Ym;(function(s){s.websocket="websocket"})(Ym||(Ym={}));var Da;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Da||(Da={}));class h1{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,i;const o=(i=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var r,i;const o=(i=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},d=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(t,r,i){var o,l;const d=t.topic,m=(o=t.ref)!==null&&o!==void 0?o:"",p=(l=t.join_ref)!==null&&l!==void 0?l:"",f=t.payload.event,b=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},w=Object.keys(b).length===0?"":JSON.stringify(b);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const N=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+m.length+d.length+f.length+w.length,R=new ArrayBuffer(this.HEADER_LENGTH+N);let P=new DataView(R),_=0;P.setUint8(_++,this.KINDS.userBroadcastPush),P.setUint8(_++,p.length),P.setUint8(_++,m.length),P.setUint8(_++,d.length),P.setUint8(_++,f.length),P.setUint8(_++,w.length),P.setUint8(_++,r),Array.from(p,L=>P.setUint8(_++,L.charCodeAt(0))),Array.from(m,L=>P.setUint8(_++,L.charCodeAt(0))),Array.from(d,L=>P.setUint8(_++,L.charCodeAt(0))),Array.from(f,L=>P.setUint8(_++,L.charCodeAt(0))),Array.from(w,L=>P.setUint8(_++,L.charCodeAt(0)));var O=new Uint8Array(R.byteLength+i.byteLength);return O.set(new Uint8Array(R),0),O.set(new Uint8Array(i),R.byteLength),O.buffer}decode(t,r){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return r(i)}if(typeof t=="string"){const i=JSON.parse(t),[o,l,d,m,p]=i;return r({join_ref:o,ref:l,topic:d,event:m,payload:p})}return r({})}_binaryDecode(t){const r=new DataView(t),i=r.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,o)}}_decodeUserBroadcast(t,r,i){const o=r.getUint8(1),l=r.getUint8(2),d=r.getUint8(3),m=r.getUint8(4);let p=this.HEADER_LENGTH+4;const f=i.decode(t.slice(p,p+o));p=p+o;const b=i.decode(t.slice(p,p+l));p=p+l;const w=i.decode(t.slice(p,p+d));p=p+d;const N=t.slice(p,t.byteLength),R=m===this.JSON_ENCODING?JSON.parse(i.decode(N)):N,P={type:this.BROADCAST_EVENT,event:b,payload:R};return d>0&&(P.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:P}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>r.includes(i)))}}class cb{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var es;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(es||(es={}));const V0=(s,t,r={})=>{var i;const o=(i=r.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((l,d)=>(l[d]=m1(d,s,t,o),l),{}):{}},m1=(s,t,r,i)=>{const o=t.find(m=>m.name===s),l=o==null?void 0:o.type,d=r[s];return l&&!i.includes(l)?db(l,d):Xm(d)},db=(s,t)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return x1(t,r)}switch(s){case es.bool:return p1(t);case es.float4:case es.float8:case es.int2:case es.int4:case es.int8:case es.numeric:case es.oid:return f1(t);case es.json:case es.jsonb:return g1(t);case es.timestamp:return y1(t);case es.abstime:case es.date:case es.daterange:case es.int4range:case es.int8range:case es.money:case es.reltime:case es.text:case es.time:case es.timestamptz:case es.timetz:case es.tsrange:case es.tstzrange:return Xm(t);default:return Xm(t)}},Xm=s=>s,p1=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},f1=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},g1=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},x1=(s,t)=>{if(typeof s!="string")return s;const r=s.length-1,i=s[r];if(s[0]==="{"&&i==="}"){let l;const d=s.slice(1,r);try{l=JSON.parse("["+d+"]")}catch{l=d?d.split(","):[]}return l.map(m=>db(t,m))}return s},y1=s=>typeof s=="string"?s.replace(" ","T"):s,ub=s=>{const t=new URL(s);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class hm{constructor(t,r,i={},o=Zm){this.channel=t,this.event=r,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var i;return this._hasReceived(t)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var W0;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(W0||(W0={}));class Kl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:d,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Kl.syncState(this.state,o,l,d),this.pendingDiffs.forEach(p=>{this.state=Kl.syncDiff(this.state,p,l,d)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:d,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Kl.syncDiff(this.state,o,l,d),m())}),this.onJoin((o,l,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:d})}),this.onLeave((o,l,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,i,o){const l=this.cloneDeep(t),d=this.transformState(r),m={},p={};return this.map(l,(f,b)=>{d[f]||(p[f]=b)}),this.map(d,(f,b)=>{const w=l[f];if(w){const N=b.map(O=>O.presence_ref),R=w.map(O=>O.presence_ref),P=b.filter(O=>R.indexOf(O.presence_ref)<0),_=w.filter(O=>N.indexOf(O.presence_ref)<0);P.length>0&&(m[f]=P),_.length>0&&(p[f]=_)}else m[f]=b}),this.syncDiff(l,{joins:m,leaves:p},i,o)}static syncDiff(t,r,i,o){const{joins:l,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(m,p)=>{var f;const b=(f=t[m])!==null&&f!==void 0?f:[];if(t[m]=this.cloneDeep(p),b.length>0){const w=t[m].map(R=>R.presence_ref),N=b.filter(R=>w.indexOf(R.presence_ref)<0);t[m].unshift(...N)}i(m,b,p)}),this.map(d,(m,p)=>{let f=t[m];if(!f)return;const b=p.map(w=>w.presence_ref);f=f.filter(w=>b.indexOf(w.presence_ref)<0),t[m]=f,o(m,f,p),f.length===0&&delete t[m]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(i=>r(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,i)=>{const o=t[i];return"metas"in o?r[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[i]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var H0;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(H0||(H0={}));var Jl;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Jl||(Jl={}));var di;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(di||(di={}));class Go{constructor(t,r={config:{}},i){var o,l;if(this.topic=t,this.params=r,this.socket=i,this.bindings={},this.state=Ds.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new hm(this,un.join,this.params,this.timeout),this.rejoinTimer=new cb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ds.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ds.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Ds.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ds.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Ds.errored,this.rejoinTimer.scheduleTimeout())}),this._on(un.reply,{},(d,m)=>{this._trigger(this._replyEventName(m),d)}),this.presence=new Kl(this),this.broadcastEndpointURL=ub(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Ds.closed){const{config:{broadcast:d,presence:m,private:p}}=this.params,f=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(R=>R.filter))!==null&&o!==void 0?o:[],b=!!this.bindings[Jl.PRESENCE]&&this.bindings[Jl.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,w={},N={broadcast:d,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:f,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(R=>t==null?void 0:t(di.CHANNEL_ERROR,R)),this._onClose(()=>t==null?void 0:t(di.CLOSED)),this.updateJoinPayload(Object.assign({config:N},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:R})=>{var P;if(this.socket._isManualToken()||this.socket.setAuth(),R===void 0){t==null||t(di.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,O=(P=_==null?void 0:_.length)!==null&&P!==void 0?P:0,L=[];for(let $=0;$<O;$++){const M=_[$],{filter:{event:te,schema:H,table:U,filter:E}}=M,j=R&&R[$];if(j&&j.event===te&&Go.isFilterValueEqual(j.schema,H)&&Go.isFilterValueEqual(j.table,U)&&Go.isFilterValueEqual(j.filter,E))L.push(Object.assign(Object.assign({},M),{id:j.id}));else{this.unsubscribe(),this.state=Ds.errored,t==null||t(di.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,t&&t(di.SUBSCRIBED);return}}).receive("error",R=>{this.state=Ds.errored,t==null||t(di.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(R).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(di.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,i){return this.state===Ds.joined&&t===Jl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,i)}async httpSend(t,r,i={}){var o;if(r==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const f=await m.json();p=f.error||f.message||p}catch{}return Promise.reject(new Error(p))}async send(t,r={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:d}=t,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:d,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=f.body)===null||o===void 0?void 0:o.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var d,m,p;const f=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((p=(m=(d=this.params)===null||d===void 0?void 0:d.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),f.receive("ok",()=>l("ok")),f.receive("error",()=>l("error")),f.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ds.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(un.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new hm(this,un.leave,{},t),i.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ds.closed,this.bindings={}}async _fetchWithTimeout(t,r,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),d=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(l),d}_push(t,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new hm(this,t,r,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>u1){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,i){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,i){var o,l;const d=t.toLocaleLowerCase(),{close:m,error:p,leave:f,join:b}=un;if(i&&[m,p,f,b].indexOf(d)>=0&&i!==this._joinRef())return;let N=this._onMessage(d,r,i);if(r&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(R=>{var P,_,O;return((P=R.filter)===null||P===void 0?void 0:P.event)==="*"||((O=(_=R.filter)===null||_===void 0?void 0:_.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===d}).map(R=>R.callback(N,i)):(l=this.bindings[d])===null||l===void 0||l.filter(R=>{var P,_,O,L,$,M;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in R){const te=R.id,H=(P=R.filter)===null||P===void 0?void 0:P.event;return te&&((_=r.ids)===null||_===void 0?void 0:_.includes(te))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((O=r.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{const te=($=(L=R==null?void 0:R.filter)===null||L===void 0?void 0:L.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return te==="*"||te===((M=r==null?void 0:r.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return R.type.toLocaleLowerCase()===d}).map(R=>{if(typeof N=="object"&&"ids"in N){const P=N.data,{schema:_,table:O,commit_timestamp:L,type:$,errors:M}=P;N=Object.assign(Object.assign({},{schema:_,table:O,commit_timestamp:L,eventType:$,new:{},old:{},errors:M}),this._getPayloadRecords(P))}R.callback(N,i)})}_isClosed(){return this.state===Ds.closed}_isJoined(){return this.state===Ds.joined}_isJoining(){return this.state===Ds.joining}_isLeaving(){return this.state===Ds.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,i){const o=t.toLocaleLowerCase(),l={type:o,filter:r,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(t,r){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Go.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const i in t)if(t[i]!==r[i])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(un.close,{},t)}_onError(t){this._on(un.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ds.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=V0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=V0(t.columns,t.old_record)),r}}const mm=()=>{},Dd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},b1=[1e3,2e3,5e3,1e4],v1=1e4,w1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class j1{constructor(t,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zm,this.transport=null,this.heartbeatIntervalMs=Dd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=mm,this.ref=0,this.reconnectTimer=null,this.vsn=B0,this.logger=mm,this.conn=null,this.sendBuffer=[],this.serializer=new h1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((i=r==null?void 0:r.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Ym.websocket}`,this.httpEndpoint=ub(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=a1.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,i){this.logger(t,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Gi.connecting:return Da.Connecting;case Gi.open:return Da.Open;case Gi.closing:return Da.Closing;default:return Da.Closed}}isConnected(){return this.connectionState()===Da.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new Go(`realtime:${t}`,r,this);return this.channels.push(l),l}}push(t){const{topic:r,event:i,payload:o,ref:l}=t,d=()=>{this.encode(t,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${r} ${i} (${l})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(d1,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Dd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:d}=r,m=d?`(${d})`:"",p=l.status||"";this.log("receive",`${p} ${i} ${o} ${m}`.trim(),l),this.channels.filter(f=>f._isMember(i)).forEach(f=>f._trigger(o,l,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Gi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Gi.open||this.conn.readyState===Gi.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(un.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${i}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const i=new Blob([w1],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,i=!1;if(t)r=t,i=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),r=this.accessTokenValue}else r=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const l={access_token:r,version:l1};r&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(un.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new cb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Dd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,i,o,l,d,m,p,f,b,w,N,R;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:Zm,this.heartbeatIntervalMs=(o=t==null?void 0:t.heartbeatIntervalMs)!==null&&o!==void 0?o:Dd.HEARTBEAT_INTERVAL,this.worker=(l=t==null?void 0:t.worker)!==null&&l!==void 0?l:!1,this.accessToken=(d=t==null?void 0:t.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(m=t==null?void 0:t.heartbeatCallback)!==null&&m!==void 0?m:mm,this.vsn=(p=t==null?void 0:t.vsn)!==null&&p!==void 0?p:B0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:(P=>b1[P-1]||v1),this.vsn){case lb:this.encode=(b=t==null?void 0:t.encode)!==null&&b!==void 0?b:((P,_)=>_(JSON.stringify(P))),this.decode=(w=t==null?void 0:t.decode)!==null&&w!==void 0?w:((P,_)=>_(JSON.parse(P)));break;case c1:this.encode=(N=t==null?void 0:t.encode)!==null&&N!==void 0?N:this.serializer.encode.bind(this.serializer),this.decode=(R=t==null?void 0:t.decode)!==null&&R!==void 0?R:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var ac=class extends Error{constructor(s,t){var r;super(s),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function N1(s,t,r){const i=new URL(t,s);if(r)for(const[o,l]of Object.entries(r))l!==void 0&&i.searchParams.set(o,l);return i.toString()}async function S1(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function k1(s){const t=s.fetchImpl??globalThis.fetch;return{async request({method:r,path:i,query:o,body:l,headers:d}){const m=N1(s.baseUrl,i,o),p=await S1(s.auth),f=await t(m,{method:r,headers:{...l?{"Content-Type":"application/json"}:{},...p,...d},body:l?JSON.stringify(l):void 0}),b=await f.text(),w=(f.headers.get("content-type")||"").includes("application/json"),N=w&&b?JSON.parse(b):b;if(!f.ok){const R=w?N:void 0,P=R==null?void 0:R.error;throw new ac((P==null?void 0:P.message)??`Request failed with status ${f.status}`,{status:f.status,icebergType:P==null?void 0:P.type,icebergCode:P==null?void 0:P.code,details:R})}return{status:f.status,headers:f.headers,data:N}}}}function zd(s){return s.join("")}var _1=class{constructor(s,t=""){this.client=s,this.prefix=t}async listNamespaces(s){const t=s?{parent:zd(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(s,t){const r={namespace:s.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zd(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zd(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zd(s.namespace)}`}),!0}catch(t){if(t instanceof ac&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(s,t){try{return await this.createNamespace(s,t)}catch(r){if(r instanceof ac&&r.status===409)return;throw r}}};function zo(s){return s.join("")}var C1=class{constructor(s,t="",r){this.client=s,this.prefix=t,this.accessDelegation=r}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zo(s.namespace)}/tables`})).data.identifiers}async createTable(s,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${zo(s.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(s,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${zo(s.namespace)}/tables/${s.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(s,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zo(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(s){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zo(s.namespace)}/tables/${s.name}`,headers:t})).data.metadata}async tableExists(s){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zo(s.namespace)}/tables/${s.name}`,headers:t}),!0}catch(r){if(r instanceof ac&&r.status===404)return!1;throw r}}async createTableIfNotExists(s,t){try{return await this.createTable(s,t)}catch(r){if(r instanceof ac&&r.status===409)return await this.loadTable({namespace:s.namespace,name:t.name});throw r}}},P1=class{constructor(s){var i;let t="v1";s.catalogName&&(t+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=k1({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(i=s.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new _1(this.client,t),this.tableOps=new C1(this.client,t,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,t){return this.namespaceOps.createNamespace(s,t)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,t){return this.tableOps.createTable(s,t)}async updateTable(s,t){return this.tableOps.updateTable(s,t)}async dropTable(s,t){await this.tableOps.dropTable(s,t)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,t){return this.namespaceOps.createNamespaceIfNotExists(s,t)}async createTableIfNotExists(s,t){return this.tableOps.createTableIfNotExists(s,t)}},Cu=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function fs(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var E1=class extends Cu{constructor(s,t,r){super(s),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Qm=class extends Cu{constructor(s,t){super(s),this.name="StorageUnknownError",this.originalError=t}};const Pp=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),A1=()=>Response,ep=s=>{if(Array.isArray(s))return s.map(r=>ep(r));if(typeof s=="function"||s!==Object(s))return s;const t={};return Object.entries(s).forEach(([r,i])=>{const o=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[o]=ep(i)}),t},T1=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},R1=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function oc(s){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oc(s)}function I1(s,t){if(oc(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var i=r.call(s,t);if(oc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function O1(s){var t=I1(s,"string");return oc(t)=="symbol"?t:t+""}function D1(s,t,r){return(t=O1(t))in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function q0(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),r.push.apply(r,i)}return r}function mt(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q0(Object(r),!0).forEach(function(i){D1(s,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):q0(Object(r)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(r,i))})}return s}const pm=s=>{var t;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(t=s.error)===null||t===void 0?void 0:t.message)||JSON.stringify(s)},z1=async(s,t,r)=>{s instanceof await A1()&&!(r!=null&&r.noResolveJson)?s.json().then(i=>{const o=s.status||500,l=(i==null?void 0:i.statusCode)||o+"";t(new E1(pm(i),o,l))}).catch(i=>{t(new Qm(pm(i),i))}):t(new Qm(pm(s),s))},M1=(s,t,r,i)=>{const o={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"||!i?o:(T1(i)?(o.headers=mt({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i)):o.body=i,t!=null&&t.duplex&&(o.duplex=t.duplex),mt(mt({},o),r))};async function kc(s,t,r,i,o,l){return new Promise((d,m)=>{s(r,M1(t,i,o,l)).then(p=>{if(!p.ok)throw p;return i!=null&&i.noResolveJson?p:p.json()}).then(p=>d(p)).catch(p=>z1(p,m,i))})}async function lc(s,t,r,i){return kc(s,"GET",t,r,i)}async function dn(s,t,r,i,o){return kc(s,"POST",t,i,o,r)}async function tp(s,t,r,i,o){return kc(s,"PUT",t,i,o,r)}async function L1(s,t,r,i){return kc(s,"HEAD",t,mt(mt({},r),{},{noResolveJson:!0}),i)}async function Ep(s,t,r,i,o){return kc(s,"DELETE",t,i,o,r)}var U1=class{constructor(s,t){this.downloadFn=s,this.shouldThrowOnError=t}then(s,t){return this.execute().then(s,t)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(t){if(s.shouldThrowOnError)throw t;if(fs(t))return{data:null,error:t};throw t}}};let hb;hb=Symbol.toStringTag;var $1=class{constructor(s,t){this.downloadFn=s,this.shouldThrowOnError=t,this[hb]="BlobDownloadBuilder",this.promise=null}asStream(){return new U1(this.downloadFn,this.shouldThrowOnError)}then(s,t){return this.getPromise().then(s,t)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(t){if(s.shouldThrowOnError)throw t;if(fs(t))return{data:null,error:t};throw t}}};const F1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},G0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var B1=class{constructor(s,t={},r,i){this.shouldThrowOnError=!1,this.url=s,this.headers=t,this.bucketId=r,this.fetch=Pp(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(s,t,r,i){var o=this;try{let l;const d=mt(mt({},G0),i);let m=mt(mt({},o.headers),s==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),p&&l.append("metadata",o.encodeMetadata(p)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.has("cacheControl")||l.append("cacheControl",d.cacheControl),p&&!l.has("metadata")&&l.append("metadata",o.encodeMetadata(p))):(l=r,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType,p&&(m["x-metadata"]=o.toBase64(o.encodeMetadata(p))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!d.duplex&&(d.duplex="half")),i!=null&&i.headers&&(m=mt(mt({},m),i.headers));const f=o._removeEmptyFolders(t),b=o._getFinalPath(f),w=await(s=="PUT"?tp:dn)(o.fetch,`${o.url}/object/${b}`,l,mt({headers:m},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:f,id:w.Id,fullPath:w.Key},error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(fs(l))return{data:null,error:l};throw l}}async upload(s,t,r){return this.uploadOrUpdate("POST",s,t,r)}async uploadToSignedUrl(s,t,r,i){var o=this;const l=o._removeEmptyFolders(s),d=o._getFinalPath(l),m=new URL(o.url+`/object/upload/sign/${d}`);m.searchParams.set("token",t);try{let p;const f=mt({upsert:G0.upsert},i),b=mt(mt({},o.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&r instanceof Blob?(p=new FormData,p.append("cacheControl",f.cacheControl),p.append("",r)):typeof FormData<"u"&&r instanceof FormData?(p=r,p.append("cacheControl",f.cacheControl)):(p=r,b["cache-control"]=`max-age=${f.cacheControl}`,b["content-type"]=f.contentType),{data:{path:l,fullPath:(await tp(o.fetch,m.toString(),p,{headers:b})).Key},error:null}}catch(p){if(o.shouldThrowOnError)throw p;if(fs(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(s,t){var r=this;try{let i=r._getFinalPath(s);const o=mt({},r.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const l=await dn(r.fetch,`${r.url}/object/upload/sign/${i}`,{},{headers:o}),d=new URL(r.url+l.url),m=d.searchParams.get("token");if(!m)throw new Cu("No token returned by API");return{data:{signedUrl:d.toString(),path:s,token:m},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(fs(i))return{data:null,error:i};throw i}}async update(s,t,r){return this.uploadOrUpdate("PUT",s,t,r)}async move(s,t,r){var i=this;try{return{data:await dn(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:s,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(fs(o))return{data:null,error:o};throw o}}async copy(s,t,r){var i=this;try{return{data:{path:(await dn(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:s,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:i.headers})).Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(fs(o))return{data:null,error:o};throw o}}async createSignedUrl(s,t,r){var i=this;try{let o=i._getFinalPath(s),l=await dn(i.fetch,`${i.url}/object/sign/${o}`,mt({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:i.headers});const d=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return l={signedUrl:encodeURI(`${i.url}${l.signedURL}${d}`)},{data:l,error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(fs(o))return{data:null,error:o};throw o}}async createSignedUrls(s,t,r){var i=this;try{const o=await dn(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:t,paths:s},{headers:i.headers}),l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(d=>mt(mt({},d),{},{signedUrl:d.signedURL?encodeURI(`${i.url}${d.signedURL}${l}`):null})),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(fs(o))return{data:null,error:o};throw o}}download(s,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(s),d=()=>lc(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new $1(d,this.shouldThrowOnError)}async info(s){var t=this;const r=t._getFinalPath(s);try{return{data:ep(await lc(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(fs(i))return{data:null,error:i};throw i}}async exists(s){var t=this;const r=t._getFinalPath(s);try{return await L1(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(fs(i)&&i instanceof Qm){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}}getPublicUrl(s,t){const r=this._getFinalPath(s),i=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});d!==""&&i.push(d);let m=i.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${m}`)}}}async remove(s){var t=this;try{return{data:await Ep(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:s},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fs(r))return{data:null,error:r};throw r}}async list(s,t,r){var i=this;try{const o=mt(mt(mt({},F1),t),{},{prefix:s||""});return{data:await dn(i.fetch,`${i.url}/object/list/${i.bucketId}`,o,{headers:i.headers},r),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(fs(o))return{data:null,error:o};throw o}}async listV2(s,t){var r=this;try{const i=mt({},s);return{data:await dn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,i,{headers:r.headers},t),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(fs(i))return{data:null,error:i};throw i}}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const t=[];return s.width&&t.push(`width=${s.width}`),s.height&&t.push(`height=${s.height}`),s.resize&&t.push(`resize=${s.resize}`),s.format&&t.push(`format=${s.format}`),s.quality&&t.push(`quality=${s.quality}`),t.join("&")}};const mb="2.89.0",pb={"X-Client-Info":`storage-js/${mb}`};var V1=class{constructor(s,t={},r,i){this.shouldThrowOnError=!1;const o=new URL(s);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=mt(mt({},pb),t),this.fetch=Pp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(s){var t=this;try{const r=t.listBucketOptionsToQueryString(s);return{data:await lc(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fs(r))return{data:null,error:r};throw r}}async getBucket(s){var t=this;try{return{data:await lc(t.fetch,`${t.url}/bucket/${s}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fs(r))return{data:null,error:r};throw r}}async createBucket(s,t={public:!1}){var r=this;try{return{data:await dn(r.fetch,`${r.url}/bucket`,{id:s,name:s,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(fs(i))return{data:null,error:i};throw i}}async updateBucket(s,t){var r=this;try{return{data:await tp(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(fs(i))return{data:null,error:i};throw i}}async emptyBucket(s){var t=this;try{return{data:await dn(t.fetch,`${t.url}/bucket/${s}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fs(r))return{data:null,error:r};throw r}}async deleteBucket(s){var t=this;try{return{data:await Ep(t.fetch,`${t.url}/bucket/${s}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fs(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(s){const t={};return s&&("limit"in s&&(t.limit=String(s.limit)),"offset"in s&&(t.offset=String(s.offset)),s.search&&(t.search=s.search),s.sortColumn&&(t.sortColumn=s.sortColumn),s.sortOrder&&(t.sortOrder=s.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},W1=class{constructor(s,t={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=mt(mt({},pb),t),this.fetch=Pp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var t=this;try{return{data:await dn(t.fetch,`${t.url}/bucket`,{name:s},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fs(r))return{data:null,error:r};throw r}}async listBuckets(s){var t=this;try{const r=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&r.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&r.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&r.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&r.set("sortOrder",s.sortOrder),s!=null&&s.search&&r.set("search",s.search);const i=r.toString(),o=i?`${t.url}/bucket?${i}`:`${t.url}/bucket`;return{data:await lc(t.fetch,o,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fs(r))return{data:null,error:r};throw r}}async deleteBucket(s){var t=this;try{return{data:await Ep(t.fetch,`${t.url}/bucket/${s}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fs(r))return{data:null,error:r};throw r}}from(s){var t=this;if(!R1(s))throw new Cu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new P1({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(r,{get(o,l){const d=o[l];return typeof d!="function"?d:async(...m)=>{try{return{data:await d.apply(o,m),error:null}}catch(p){if(i)throw p;return{data:null,error:p}}}}})}};const Ap={"X-Client-Info":`storage-js/${mb}`,"Content-Type":"application/json"};var fb=class extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function $r(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var fm=class extends fb{constructor(s,t,r){super(s),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},H1=class extends fb{constructor(s,t){super(s),this.name="StorageVectorsUnknownError",this.originalError=t}};const Tp=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),q1=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},K0=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),G1=async(s,t,r)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(r!=null&&r.noResolveJson)){const i=s.status||500,o=s;if(typeof o.json=="function")o.json().then(l=>{const d=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||i+"";t(new fm(K0(l),i,d))}).catch(()=>{const l=i+"";t(new fm(o.statusText||`HTTP ${i} error`,i,l))});else{const l=i+"";t(new fm(o.statusText||`HTTP ${i} error`,i,l))}}else t(new H1(K0(s),s))},K1=(s,t,r,i)=>{const o={method:s,headers:(t==null?void 0:t.headers)||{}};return i?(q1(i)?(o.headers=mt({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i)):o.body=i,mt(mt({},o),r)):o};async function J1(s,t,r,i,o,l){return new Promise((d,m)=>{s(r,K1(t,i,o,l)).then(p=>{if(!p.ok)throw p;if(i!=null&&i.noResolveJson)return p;const f=p.headers.get("content-type");return!f||!f.includes("application/json")?{}:p.json()}).then(p=>d(p)).catch(p=>G1(p,m,i))})}async function Fr(s,t,r,i,o){return J1(s,"POST",t,i,o,r)}var Z1=class{constructor(s,t={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=mt(mt({},Ap),t),this.fetch=Tp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(s){var t=this;try{return{data:await Fr(t.fetch,`${t.url}/CreateIndex`,s,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async getIndex(s,t){var r=this;try{return{data:await Fr(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:t},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if($r(i))return{data:null,error:i};throw i}}async listIndexes(s){var t=this;try{return{data:await Fr(t.fetch,`${t.url}/ListIndexes`,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async deleteIndex(s,t){var r=this;try{return{data:await Fr(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:t},{headers:r.headers})||{},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if($r(i))return{data:null,error:i};throw i}}},Y1=class{constructor(s,t={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=mt(mt({},Ap),t),this.fetch=Tp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(s){var t=this;try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Fr(t.fetch,`${t.url}/PutVectors`,s,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async getVectors(s){var t=this;try{return{data:await Fr(t.fetch,`${t.url}/GetVectors`,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async listVectors(s){var t=this;try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:await Fr(t.fetch,`${t.url}/ListVectors`,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async queryVectors(s){var t=this;try{return{data:await Fr(t.fetch,`${t.url}/QueryVectors`,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async deleteVectors(s){var t=this;try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Fr(t.fetch,`${t.url}/DeleteVectors`,s,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}},X1=class{constructor(s,t={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=mt(mt({},Ap),t),this.fetch=Tp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var t=this;try{return{data:await Fr(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async getBucket(s){var t=this;try{return{data:await Fr(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:s},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async listBuckets(s={}){var t=this;try{return{data:await Fr(t.fetch,`${t.url}/ListVectorBuckets`,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async deleteBucket(s){var t=this;try{return{data:await Fr(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}},Q1=class extends X1{constructor(s,t={}){super(s,t.headers||{},t.fetch)}from(s){return new e2(this.url,this.headers,s,this.fetch)}async createBucket(s){var t=()=>super.createBucket,r=this;return t().call(r,s)}async getBucket(s){var t=()=>super.getBucket,r=this;return t().call(r,s)}async listBuckets(s={}){var t=()=>super.listBuckets,r=this;return t().call(r,s)}async deleteBucket(s){var t=()=>super.deleteBucket,r=this;return t().call(r,s)}},e2=class extends Z1{constructor(s,t,r,i){super(s,t,i),this.vectorBucketName=r}async createIndex(s){var t=()=>super.createIndex,r=this;return t().call(r,mt(mt({},s),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(s={}){var t=()=>super.listIndexes,r=this;return t().call(r,mt(mt({},s),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(s){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,s)}async deleteIndex(s){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,s)}index(s){return new t2(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},t2=class extends Y1{constructor(s,t,r,i,o){super(s,t,o),this.vectorBucketName=r,this.indexName=i}async putVectors(s){var t=()=>super.putVectors,r=this;return t().call(r,mt(mt({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(s){var t=()=>super.getVectors,r=this;return t().call(r,mt(mt({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(s={}){var t=()=>super.listVectors,r=this;return t().call(r,mt(mt({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(s){var t=()=>super.queryVectors,r=this;return t().call(r,mt(mt({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(s){var t=()=>super.deleteVectors,r=this;return t().call(r,mt(mt({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},s2=class extends V1{constructor(s,t={},r,i){super(s,t,r,i)}from(s){return new B1(this.url,this.headers,s,this.fetch)}get vectors(){return new Q1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new W1(this.url+"/iceberg",this.headers,this.fetch)}};const gb="2.89.0",Ho=30*1e3,sp=3,gm=sp*Ho,r2="http://localhost:9999",n2="supabase.auth.token",i2={"X-Client-Info":`gotrue-js/${gb}`},rp="X-Supabase-Api-Version",xb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},a2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,o2=600*1e3;class cc extends Error{constructor(t,r,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function rt(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class l2 extends cc{constructor(t,r,i){super(t,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function c2(s){return rt(s)&&s.name==="AuthApiError"}class za extends cc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class wi extends cc{constructor(t,r,i,o){super(t,i,o),this.name=r,this.status=i}}class Ur extends wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function d2(s){return rt(s)&&s.name==="AuthSessionMissingError"}class Mo extends wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Md extends wi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ld extends wi{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function u2(s){return rt(s)&&s.name==="AuthImplicitGrantRedirectError"}class J0 extends wi{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class h2 extends wi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class np extends wi{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function xm(s){return rt(s)&&s.name==="AuthRetryableFetchError"}class Z0 extends wi{constructor(t,r,i){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class ip extends wi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const nu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Y0=` 	
\r=`.split(""),m2=(()=>{const s=new Array(128);for(let t=0;t<s.length;t+=1)s[t]=-1;for(let t=0;t<Y0.length;t+=1)s[Y0[t].charCodeAt(0)]=-2;for(let t=0;t<nu.length;t+=1)s[nu[t].charCodeAt(0)]=t;return s})();function X0(s,t,r){if(s!==null)for(t.queue=t.queue<<8|s,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;r(nu[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;r(nu[i]),t.queuedBits-=6}}function yb(s,t,r){const i=m2[s];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Q0(s){const t=[],r=d=>{t.push(String.fromCodePoint(d))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=d=>{g2(d,i,r)};for(let d=0;d<s.length;d+=1)yb(s.charCodeAt(d),o,l);return t.join("")}function p2(s,t){if(s<=127){t(s);return}else if(s<=2047){t(192|s>>6),t(128|s&63);return}else if(s<=65535){t(224|s>>12),t(128|s>>6&63),t(128|s&63);return}else if(s<=1114111){t(240|s>>18),t(128|s>>12&63),t(128|s>>6&63),t(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function f2(s,t){for(let r=0;r<s.length;r+=1){let i=s.charCodeAt(r);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(s.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}p2(i,t)}}function g2(s,t,r){if(t.utf8seq===0){if(s<=127){r(s);return}for(let i=1;i<6;i+=1)if((s>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=s&31;else if(t.utf8seq===3)t.codepoint=s&15;else if(t.utf8seq===4)t.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|s&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Yo(s){const t=[],r={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<s.length;o+=1)yb(s.charCodeAt(o),r,i);return new Uint8Array(t)}function x2(s){const t=[];return f2(s,r=>t.push(r)),new Uint8Array(t)}function $a(s){const t=[],r={queue:0,queuedBits:0},i=o=>{t.push(o)};return s.forEach(o=>X0(o,r,i)),X0(null,r,i),t.join("")}function y2(s){return Math.round(Date.now()/1e3)+s}function b2(){return Symbol("auth-callback")}const Ks=()=>typeof window<"u"&&typeof document<"u",Ta={tested:!1,writable:!1},bb=()=>{if(!Ks())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ta.tested)return Ta.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Ta.tested=!0,Ta.writable=!0}catch{Ta.tested=!0,Ta.writable=!1}return Ta.writable};function v2(s){const t={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,l)=>{t[l]=o})}catch{}return r.searchParams.forEach((i,o)=>{t[o]=i}),t}const vb=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),w2=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",qo=async(s,t,r)=>{await s.setItem(t,JSON.stringify(r))},Ra=async(s,t)=>{const r=await s.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Gs=async(s,t)=>{await s.removeItem(t)};let wb=class jb{constructor(){this.promise=new jb.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}};wb.promiseConstructor=Promise;function ym(s){const t=s.split(".");if(t.length!==3)throw new ip("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!a2.test(t[i]))throw new ip("JWT not in base64url format");return{header:JSON.parse(Q0(t[0])),payload:JSON.parse(Q0(t[1])),signature:Yo(t[2]),raw:{header:t[0],payload:t[1]}}}async function j2(s){return await new Promise(t=>{setTimeout(()=>t(null),s)})}function N2(s,t){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const d=await s(l);if(!t(l,null,d)){i(d);return}}catch(d){if(!t(l,d)){o(d);return}}})()})}function S2(s){return("0"+s.toString(16)).substr(-2)}function k2(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let o="";for(let l=0;l<56;l++)o+=r.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,S2).join("")}async function _2(s){const r=new TextEncoder().encode(s),i=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function C2(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await _2(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Lo(s,t,r=!1){const i=k2();let o=i;r&&(o+="/PASSWORD_RECOVERY"),await qo(s,`${t}-code-verifier`,o);const l=await C2(i);return[l,i===l?"plain":"s256"]}const P2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function E2(s){const t=s.headers.get(rp);if(!t||!t.match(P2))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function A2(s){if(!s)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(s<=t)throw new Error("JWT has expired")}function T2(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const R2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Uo(s){if(!R2.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bm(){const s={};return new Proxy(s,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function I2(s,t){return new Proxy(s,{get:(r,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,i,o)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,i,o)}})}function ex(s){return JSON.parse(JSON.stringify(s))}const Ia=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),O2=[502,503,504];async function tx(s){var t;if(!w2(s))throw new np(Ia(s),0);if(O2.includes(s.status))throw new np(Ia(s),s.status);let r;try{r=await s.json()}catch(l){throw new za(Ia(l),l)}let i;const o=E2(s);if(o&&o.getTime()>=xb["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Z0(Ia(r),s.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Ur}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,d)=>l&&typeof d=="string",!0))throw new Z0(Ia(r),s.status,r.weak_password.reasons);throw new l2(Ia(r),s.status||500,i)}const D2=(s,t,r,i)=>{const o={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),r))};async function ht(s,t,r,i){var o;const l=Object.assign({},i==null?void 0:i.headers);l[rp]||(l[rp]=xb["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const d=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(d.redirect_to=i.redirectTo);const m=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await z2(s,t,r+m,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(p):{data:Object.assign({},p),error:null}}async function z2(s,t,r,i,o,l){const d=D2(t,i,o,l);let m;try{m=await s(r,Object.assign({},d))}catch(p){throw console.error(p),new np(Ia(p),0)}if(m.ok||await tx(m),i!=null&&i.noResolveJson)return m;try{return await m.json()}catch(p){await tx(p)}}function cn(s){var t;let r=null;U2(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=y2(s.expires_in)));const i=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:r,user:i},error:null}}function sx(s){const t=cn(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(t.data.weak_password=s.weak_password),t}function Ki(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function M2(s){return{data:s,error:null}}function L2(s){const{action_link:t,email_otp:r,hashed_token:i,redirect_to:o,verification_type:l}=s,d=_u(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:t,email_otp:r,hashed_token:i,redirect_to:o,verification_type:l},p=Object.assign({},d);return{data:{properties:m,user:p},error:null}}function rx(s){return s}function U2(s){return s.access_token&&s.refresh_token&&s.expires_in}const vm=["global","local","others"];class $2{constructor({url:t="",headers:r={},fetch:i}){this.url=t,this.headers=r,this.fetch=vb(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=vm[0]){if(vm.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vm.join(", ")}`);try{return await ht(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(rt(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,r={}){try{return await ht(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ki})}catch(i){if(rt(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:r}=t,i=_u(t,["options"]),o=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await ht(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:L2,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(rt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ki})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,i,o,l,d,m,p;try{const f={nextPage:null,lastPage:0,total:0},b=await ht(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:rx});if(b.error)throw b.error;const w=await b.json(),N=(d=b.headers.get("x-total-count"))!==null&&d!==void 0?d:0,R=(p=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return R.length>0&&(R.forEach(P=>{const _=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(P.split(";")[1].split("=")[1]);f[`${O}Page`]=_}),f.total=parseInt(N)),{data:Object.assign(Object.assign({},w),f),error:null}}catch(f){if(rt(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){Uo(t);try{return await ht(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ki})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Uo(t);try{return await ht(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ki})}catch(i){if(rt(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,r=!1){Uo(t);try{return await ht(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ki})}catch(i){if(rt(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Uo(t.userId);try{const{data:r,error:i}=await ht(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:i}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Uo(t.userId),Uo(t.id);try{return{data:await ht(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,i,o,l,d,m,p;try{const f={nextPage:null,lastPage:0,total:0},b=await ht(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:rx});if(b.error)throw b.error;const w=await b.json(),N=(d=b.headers.get("x-total-count"))!==null&&d!==void 0?d:0,R=(p=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return R.length>0&&(R.forEach(P=>{const _=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(P.split(";")[1].split("=")[1]);f[`${O}Page`]=_}),f.total=parseInt(N)),{data:Object.assign(Object.assign({},w),f),error:null}}catch(f){if(rt(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ht(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await ht(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(rt(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await ht(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}}function nx(s={}){return{getItem:t=>s[t]||null,setItem:(t,r)=>{s[t]=r},removeItem:t=>{delete s[t]}}}const $o={debug:!!(globalThis&&bb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Nb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class F2 extends Nb{}async function B2(s,t,r){$o.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),$o.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){$o.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,o.name);try{return await r()}finally{$o.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,o.name)}}else{if(t===0)throw $o.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new F2(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if($o.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function V2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Sb(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function W2(s){return parseInt(s,16)}function H2(s){const t=new TextEncoder().encode(s);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function q2(s){var t;const{chainId:r,domain:i,expirationTime:o,issuedAt:l=new Date,nonce:d,notBefore:m,requestId:p,resources:f,scheme:b,uri:w,version:N}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(N!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${N}`);if(!((t=s.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const R=Sb(s.address),P=b?`${b}://${i}`:i,_=s.statement?`${s.statement}
`:"",O=`${P} wants you to sign in with your Ethereum account:
${R}

${_}`;let L=`URI: ${w}
Version: ${N}
Chain ID: ${r}${d?`
Nonce: ${d}`:""}
Issued At: ${l.toISOString()}`;if(o&&(L+=`
Expiration Time: ${o.toISOString()}`),m&&(L+=`
Not Before: ${m.toISOString()}`),p&&(L+=`
Request ID: ${p}`),f){let $=`
Resources:`;for(const M of f){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);$+=`
- ${M}`}L+=$}return`${O}
${L}`}class _s extends Error{constructor({message:t,code:r,cause:i,name:o}){var l;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=o??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=r}}class iu extends _s{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function G2({error:s,options:t}){var r,i,o;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _s({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new _s({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(t.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new _s({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new _s({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new _s({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new _s({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return l.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new _s({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new _s({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const d=window.location.hostname;if(kb(d)){if(l.rp.id!==d)return new _s({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new _s({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new _s({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new _s({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new _s({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function K2({error:s,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _s({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new _s({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const i=window.location.hostname;if(kb(i)){if(r.rpId!==i)return new _s({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new _s({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new _s({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new _s({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class J2{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Z2=new J2;function Y2(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:t,user:r,excludeCredentials:i}=s,o=_u(s,["challenge","user","excludeCredentials"]),l=Yo(t).buffer,d=Object.assign(Object.assign({},r),{id:Yo(r.id).buffer}),m=Object.assign(Object.assign({},o),{challenge:l,user:d});if(i&&i.length>0){m.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const f=i[p];m.excludeCredentials[p]=Object.assign(Object.assign({},f),{id:Yo(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return m}function X2(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:t,allowCredentials:r}=s,i=_u(s,["challenge","allowCredentials"]),o=Yo(t).buffer,l=Object.assign(Object.assign({},i),{challenge:o});if(r&&r.length>0){l.allowCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const m=r[d];l.allowCredentials[d]=Object.assign(Object.assign({},m),{id:Yo(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return l}function Q2(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:$a(new Uint8Array(s.response.attestationObject)),clientDataJSON:$a(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function eS(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,i=s.getClientExtensionResults(),o=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:$a(new Uint8Array(o.authenticatorData)),clientDataJSON:$a(new Uint8Array(o.clientDataJSON)),signature:$a(new Uint8Array(o.signature)),userHandle:o.userHandle?$a(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function kb(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function ix(){var s,t;return!!(Ks()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function tS(s){try{const t=await navigator.credentials.create(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new iu("Browser returned unexpected credential type",t)}:{data:null,error:new iu("Empty credential response",t)}}catch(t){return{data:null,error:G2({error:t,options:s})}}}async function sS(s){try{const t=await navigator.credentials.get(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new iu("Browser returned unexpected credential type",t)}:{data:null,error:new iu("Empty credential response",t)}}catch(t){return{data:null,error:K2({error:t,options:s})}}}const rS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},nS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function au(...s){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of s)if(o)for(const l in o){const d=o[l];if(d!==void 0)if(Array.isArray(d))i[l]=d;else if(r(d))i[l]=d;else if(t(d)){const m=i[l];t(m)?i[l]=au(m,d):i[l]=au(d)}else i[l]=d}return i}function iS(s,t){return au(rS,s,t||{})}function aS(s,t){return au(nS,s,t||{})}class oS{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:i,signal:o},l){try{const{data:d,error:m}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!d)return{data:null,error:m};const p=o??Z2.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:f}=d.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${i}`),f.displayName||(f.displayName=f.name)}switch(d.webauthn.type){case"create":{const f=iS(d.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:b,error:w}=await tS({publicKey:f,signal:p});return b?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const f=aS(d.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:b,error:w}=await sS(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:f,signal:p}));return b?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(d){return rt(d)?{data:null,error:d}:{data:null,error:new za("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!r)return{data:null,error:new cc("rpId is required for WebAuthn authentication")};try{if(!ix())return{data:null,error:new za("Browser does not support WebAuthn",null)};const{data:d,error:m}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:i},signal:o},{request:l});if(!d)return{data:null,error:m};const{webauthn:p}=d;return this._verify({factorId:t,challengeId:d.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:i,credential_response:p.credential_response}})}catch(d){return rt(d)?{data:null,error:d}:{data:null,error:new za("Unexpected error in authenticate",d)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!r)return{data:null,error:new cc("rpId is required for WebAuthn registration")};try{if(!ix())return{data:null,error:new za("Browser does not support WebAuthn",null)};const{data:d,error:m}=await this._enroll({friendlyName:t});if(!d)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(N=>N.factor_type==="webauthn"&&N.friendly_name===t&&N.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:m};const{data:p,error:f}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:o},{create:l});return p?this._verify({factorId:d.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:f}}catch(d){return rt(d)?{data:null,error:d}:{data:null,error:new za("Unexpected error in register",d)}}}}V2();const lS={url:r2,storageKey:n2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:i2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ax(s,t,r){return await r()}const Fo={};class dc{get jwks(){var t,r;return(r=(t=Fo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Fo[this.storageKey]=Object.assign(Object.assign({},Fo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Fo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Fo[this.storageKey]=Object.assign(Object.assign({},Fo[this.storageKey]),{cachedAt:t})}constructor(t){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},lS),t);if(this.storageKey=l.storageKey,this.instanceID=(r=dc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,dc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Ks()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new $2({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=vb(l.fetch),this.lock=l.lock||ax,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&Ks()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=B2:this.lock=ax,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new oS(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:bb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=nx(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=nx(this.memoryStorage)),Ks()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${gb}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},i="none";if(Ks()&&(r=v2(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),Ks()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(r,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),u2(l)){const p=(t=l.details)===null||t===void 0?void 0:t.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:d,redirectType:m}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",m),await this._saveSession(d),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return rt(r)?this._returnResult({error:r}):this._returnResult({error:new za("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,i,o;try{const l=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:cn}),{data:d,error:m}=l;if(m||!d)return this._returnResult({data:{user:null,session:null},error:m});const p=d.session,f=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:f,session:p},error:null})}catch(l){if(rt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var r,i,o;try{let l;if("email"in t){const{email:b,password:w,options:N}=t;let R=null,P=null;this.flowType==="pkce"&&([R,P]=await Lo(this.storage,this.storageKey)),l=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:b,password:w,data:(r=N==null?void 0:N.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:R,code_challenge_method:P},xform:cn})}else if("phone"in t){const{phone:b,password:w,options:N}=t;l=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(i=N==null?void 0:N.data)!==null&&i!==void 0?i:{},channel:(o=N==null?void 0:N.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:cn})}else throw new Md("You must provide either an email or phone number and a password");const{data:d,error:m}=l;if(m||!d)return await Gs(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const p=d.session,f=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:f,session:p},error:null})}catch(l){if(await Gs(this.storage,`${this.storageKey}-code-verifier`),rt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let r;if("email"in t){const{email:l,password:d,options:m}=t;r=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:d,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:sx})}else if("phone"in t){const{phone:l,password:d,options:m}=t;r=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:d,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:sx})}else throw new Md("You must provide either an email or phone number and a password");const{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const l=new Mo;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(rt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,i,o,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,i,o,l,d,m,p,f,b,w,N;let R,P;if("message"in t)R=t.message,P=t.signature;else{const{chain:_,wallet:O,statement:L,options:$}=t;let M;if(Ks())if(typeof O=="object")M=O;else{const S=window;if("ethereum"in S&&typeof S.ethereum=="object"&&"request"in S.ethereum&&typeof S.ethereum.request=="function")M=S.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!($!=null&&$.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=O}const te=new URL((r=$==null?void 0:$.url)!==null&&r!==void 0?r:window.location.href),H=await M.request({method:"eth_requestAccounts"}).then(S=>S).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const U=Sb(H[0]);let E=(i=$==null?void 0:$.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!E){const S=await M.request({method:"eth_chainId"});E=W2(S)}const j={domain:te.host,address:U,statement:L,uri:te.href,version:"1",chainId:E,nonce:(o=$==null?void 0:$.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(d=(l=$==null?void 0:$.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(m=$==null?void 0:$.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=$==null?void 0:$.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(f=$==null?void 0:$.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(b=$==null?void 0:$.signInWithEthereum)===null||b===void 0?void 0:b.resources};R=q2(j),P=await M.request({method:"personal_sign",params:[H2(R),U]})}try{const{data:_,error:O}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:R,signature:P},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(N=t.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:cn});if(O)throw O;if(!_||!_.session||!_.user){const L=new Mo;return this._returnResult({data:{user:null,session:null},error:L})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:O})}catch(_){if(rt(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(t){var r,i,o,l,d,m,p,f,b,w,N,R;let P,_;if("message"in t)P=t.message,_=t.signature;else{const{chain:O,wallet:L,statement:$,options:M}=t;let te;if(Ks())if(typeof L=="object")te=L;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))te=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");te=L}const H=new URL((r=M==null?void 0:M.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in te&&te.signIn){const U=await te.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M==null?void 0:M.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),$?{statement:$}:null));let E;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")E=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)E=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)P=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),_=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in te)||typeof te.signMessage!="function"||!("publicKey"in te)||typeof te!="object"||!te.publicKey||!("toBase58"in te.publicKey)||typeof te.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${H.host} wants you to sign in with your Solana account:`,te.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(o=(i=M==null?void 0:M.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=M==null?void 0:M.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((d=M==null?void 0:M.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((m=M==null?void 0:M.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((p=M==null?void 0:M.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((f=M==null?void 0:M.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((w=(b=M==null?void 0:M.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...M.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const U=await te.signMessage(new TextEncoder().encode(P),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=U}}try{const{data:O,error:L}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:$a(_)},!((N=t.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(R=t.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:cn});if(L)throw L;if(!O||!O.session||!O.user){const $=new Mo;return this._returnResult({data:{user:null,session:null},error:$})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:L})}catch(O){if(rt(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async _exchangeCodeForSession(t){const r=await Ra(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new h2;const{data:l,error:d}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:cn});if(await Gs(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!l||!l.session||!l.user){const m=new Mo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:d})}catch(l){if(await Gs(this.storage,`${this.storageKey}-code-verifier`),rt(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:r,provider:i,token:o,access_token:l,nonce:d}=t,m=await ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:d,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:cn}),{data:p,error:f}=m;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!p||!p.session||!p.user){const b=new Mo;return this._returnResult({data:{user:null,session:null},error:b})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:f})}catch(r){if(rt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,i,o,l,d;try{if("email"in t){const{email:m,options:p}=t;let f=null,b=null;this.flowType==="pkce"&&([f,b]=await Lo(this.storage,this.storageKey));const{error:w}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},create_user:(i=p==null?void 0:p.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:f,code_challenge_method:b},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in t){const{phone:m,options:p}=t,{data:f,error:b}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(o=p==null?void 0:p.data)!==null&&o!==void 0?o:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(d=p==null?void 0:p.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:b})}throw new Md("You must provide either an email or phone number.")}catch(m){if(await Gs(this.storage,`${this.storageKey}-code-verifier`),rt(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(t){var r,i;try{let o,l;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,l=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:d,error:m}=await ht(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:cn});if(m)throw m;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,f=d.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:f,session:p},error:null})}catch(o){if(rt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var r,i,o,l,d;try{let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Lo(this.storage,this.storageKey));const f=await ht(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:p}),headers:this.headers,xform:M2});return!((l=f.data)===null||l===void 0)&&l.url&&Ks()&&!(!((d=t.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(m){if(await Gs(this.storage,`${this.storageKey}-code-verifier`),rt(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new Ur;const{error:o}=await ht(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(rt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:l}=t,{error:d}=await ht(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in t){const{phone:i,type:o,options:l}=t,{data:d,error:m}=await ht(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:m})}throw new Md("You must provide either an email or phone number and a type")}catch(r){if(rt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ra(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<gm:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const d=await Ra(this.userStorage,this.storageKey+"-user");d!=null&&d.user?t.user=d.user:t.user=bm()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};t.user=I2(t.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ki}):await this._useSession(async r=>{var i,o,l;const{data:d,error:m}=r;if(m)throw m;return!(!((i=d.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ur}:await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:Ki})})}catch(r){if(rt(r))return d2(r)&&(await this._removeSession(),await Gs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new Ur;const d=o.session;let m=null,p=null;this.flowType==="pkce"&&t.email!=null&&([m,p]=await Lo(this.storage,this.storageKey));const{data:f,error:b}=await ht(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:m,code_challenge_method:p}),jwt:d.access_token,xform:Ki});if(b)throw b;return d.user=f.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(i){if(await Gs(this.storage,`${this.storageKey}-code-verifier`),rt(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ur;const r=Date.now()/1e3;let i=r,o=!0,l=null;const{payload:d}=ym(t.access_token);if(d.exp&&(i=d.exp,o=i<=r),o){const{data:m,error:p}=await this._callRefreshToken(t.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};l=m}else{const{data:m,error:p}=await this._getUser(t.access_token);if(p)throw p;l={access_token:t.access_token,refresh_token:t.refresh_token,user:m.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(r){if(rt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var i;if(!t){const{data:d,error:m}=r;if(m)throw m;t=(i=d.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new Ur;const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(rt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ks())throw new Ld("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ld(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new J0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ld("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new J0("No code detected.");const{data:$,error:M}=await this._exchangeCodeForSession(t.code);if(M)throw M;const te=new URL(window.location.href);return te.searchParams.delete("code"),window.history.replaceState(window.history.state,"",te.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:d,expires_in:m,expires_at:p,token_type:f}=t;if(!l||!m||!d||!f)throw new Ld("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(m);let N=b+w;p&&(N=parseInt(p));const R=N-b;R*1e3<=Ho&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${R}s, should have been closer to ${w}s`);const P=N-w;b-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,N,b):b-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,N,b);const{data:_,error:O}=await this._getUser(l);if(O)throw O;const L={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:w,expires_at:N,refresh_token:d,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:t.type},error:null})}catch(i){if(rt(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ra(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return this._returnResult({error:l});const d=(i=o.session)===null||i===void 0?void 0:i.access_token;if(d){const{error:m}=await this.admin.signOut(d,t);if(m&&!(c2(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return t!=="others"&&(await this._removeSession(),await Gs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=b2(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async r=>{var i,o;try{const{data:{session:l},error:d}=r;if(d)throw d;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Lo(this.storage,this.storageKey,!0));try{return await ht(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(await Gs(this.storage,`${this.storageKey}-code-verifier`),rt(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:i,error:o}=await this._useSession(async l=>{var d,m,p,f,b;const{data:w,error:N}=l;if(N)throw N;const R=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(m=t.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=t.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ht(this.fetch,"GET",R,{headers:this.headers,jwt:(b=(f=w.session)===null||f===void 0?void 0:f.access_token)!==null&&b!==void 0?b:void 0})});if(o)throw o;return Ks()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(rt(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var i;try{const{error:o,data:{session:l}}=r;if(o)throw o;const{options:d,provider:m,token:p,access_token:f,nonce:b}=t,w=await ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l==null?void 0:l.access_token)!==null&&i!==void 0?i:void 0,body:{provider:m,id_token:p,access_token:f,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:cn}),{data:N,error:R}=w;return R?this._returnResult({data:{user:null,session:null},error:R}):!N||!N.session||!N.user?this._returnResult({data:{user:null,session:null},error:new Mo}):(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("USER_UPDATED",N.session)),this._returnResult({data:N,error:R}))}catch(o){if(await Gs(this.storage,`${this.storageKey}-code-verifier`),rt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var i,o;const{data:l,error:d}=r;if(d)throw d;return await ht(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await N2(async o=>(o>0&&await j2(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await ht(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:cn})),(o,l)=>{const d=200*Math.pow(2,o);return l&&xm(l)&&Date.now()+d-i<Ho})}catch(i){if(this._debug(r,"error",i),rt(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),Ks()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Ra(this.storage,this.storageKey);if(o&&this.userStorage){let d=await Ra(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await qo(this.userStorage,this.storageKey+"-user",d)),o.user=(t=d==null?void 0:d.user)!==null&&t!==void 0?t:bm()}else if(o&&!o.user&&!o.user){const d=await Ra(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(o.user=d.user,await Gs(this.storage,this.storageKey+"-user"),await qo(this.storage,this.storageKey,o)):o.user=bm()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<gm;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${gm}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),xm(d)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:m}=await this._getUser(o.access_token);!m&&(d!=null&&d.user)?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(i,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var r,i;if(!t)throw new Ur;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new wb;const{data:l,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!l.session)throw new Ur;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const m={data:l.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(l){if(this._debug(o,"error",l),rt(l)){const d={data:null,error:l};return xm(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});const l=[],d=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(t,r)}catch(p){l.push(p)}});if(await Promise.all(d),l.length>0){for(let m=0;m<l.length;m+=1)console.error(l[m]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Gs(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await qo(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const l=ex(o);await qo(this.storage,this.storageKey,l)}else{const o=ex(r);await qo(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Gs(this.storage,this.storageKey),await Gs(this.storage,this.storageKey+"-code-verifier"),await Gs(this.storage,this.storageKey+"-user"),this.userStorage&&await Gs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ks()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ho);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/Ho);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Ho}ms, refresh threshold is ${sp} ticks`),o<=sp&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Nb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ks()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,i){const o=[`provider=${encodeURIComponent(r)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,d]=await Lo(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(m.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;return l?this._returnResult({data:null,error:l}):await ht(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var i,o;const{data:l,error:d}=r;if(d)return this._returnResult({data:null,error:d});const m=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:p,error:f}=await ht(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return f?this._returnResult({data:null,error:f}):(t.factorType==="totp"&&p.type==="totp"&&(!((o=p==null?void 0:p.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return this._returnResult({data:null,error:l});const d=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Q2(t.webauthn.credential_response):eS(t.webauthn.credential_response)})}:{code:t.code}),{data:m,error:p}=await ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:d,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return this._returnResult({data:null,error:l});const d=await ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});if(d.error)return d;const{data:m}=d;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Y2(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:X2(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ym(i.access_token);let d=null;l.aal&&(d=l.aal);let m=d;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(m="aal2");const f=l.amr||[];return{data:{currentLevel:d,nextLevel:m,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await ht(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Ur})})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Ur});const d=await ht(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return d.data&&d.data.redirect_url&&Ks()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(i){if(rt(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,r){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Ur});const d=await ht(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return d.data&&d.data.redirect_url&&Ks()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(i){if(rt(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?await ht(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ur})})}catch(t){if(rt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await ht(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ur})})}catch(r){if(rt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let i=r.keys.find(m=>m.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(m=>m.kid===t),i&&this.jwks_cached_at+o2>o)return i;const{data:l,error:d}=await ht(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(m=>m.kid===t),!i)?null:i}async getClaims(t,r={}){try{let i=t;if(!i){const{data:R,error:P}=await this.getSession();if(P||!R.session)return this._returnResult({data:null,error:P});i=R.session.access_token}const{header:o,payload:l,signature:d,raw:{header:m,payload:p}}=ym(i);r!=null&&r.allowExpired||A2(l.exp);const f=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!f){const{error:R}=await this.getUser(i);if(R)throw R;return{data:{claims:l,header:o,signature:d},error:null}}const b=T2(o.alg),w=await crypto.subtle.importKey("jwk",f,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,d,x2(`${m}.${p}`)))throw new ip("Invalid JWT signature");return{data:{claims:l,header:o,signature:d},error:null}}catch(i){if(rt(i))return this._returnResult({data:null,error:i});throw i}}}dc.nextInstanceID={};const cS=dc,dS="2.89.0";let Gl="";typeof Deno<"u"?Gl="deno":typeof document<"u"?Gl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gl="react-native":Gl="node";const uS={"X-Client-Info":`supabase-js-${Gl}/${dS}`},hS={headers:uS},mS={schema:"public"},pS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fS={};function uc(s){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uc(s)}function gS(s,t){if(uc(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var i=r.call(s,t);if(uc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function xS(s){var t=gS(s,"string");return uc(t)=="symbol"?t:t+""}function yS(s,t,r){return(t=xS(t))in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function ox(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),r.push.apply(r,i)}return r}function bs(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ox(Object(r),!0).forEach(function(i){yS(s,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):ox(Object(r)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(r,i))})}return s}const bS=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),vS=()=>Headers,wS=(s,t,r)=>{const i=bS(r),o=vS();return async(l,d)=>{var m;const p=(m=await t())!==null&&m!==void 0?m:s;let f=new o(d==null?void 0:d.headers);return f.has("apikey")||f.set("apikey",s),f.has("Authorization")||f.set("Authorization",`Bearer ${p}`),i(l,bs(bs({},d),{},{headers:f}))}};function jS(s){return s.endsWith("/")?s:s+"/"}function NS(s,t){var r,i;const{db:o,auth:l,realtime:d,global:m}=s,{db:p,auth:f,realtime:b,global:w}=t,N={db:bs(bs({},p),o),auth:bs(bs({},f),l),realtime:bs(bs({},b),d),storage:{},global:bs(bs(bs({},w),m),{},{headers:bs(bs({},(r=w==null?void 0:w.headers)!==null&&r!==void 0?r:{}),(i=m==null?void 0:m.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return s.accessToken?N.accessToken=s.accessToken:delete N.accessToken,N}function SS(s){const t=s==null?void 0:s.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(jS(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var kS=class extends cS{constructor(s){super(s)}},_S=class{constructor(s,t,r){var i,o;this.supabaseUrl=s,this.supabaseKey=t;const l=SS(s);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,m={db:mS,realtime:fS,auth:bs(bs({},pS),{},{storageKey:d}),global:hS},p=NS(r??{},m);if(this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(b,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=p.auth)!==null&&f!==void 0?f:{},this.headers,p.global.fetch)}this.fetch=wS(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(bs({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new i1(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new s2(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new e1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,t,r)}channel(s,t={config:{}}){return this.realtime.channel(s,t)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,t,r;if(s.accessToken)return await s.accessToken();const{data:i}=await s.auth.getSession();return(t=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:l,flowType:d,lock:m,debug:p,throwOnError:f},b,w){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kS({url:this.authUrl.href,headers:bs(bs({},N),b),storageKey:l,autoRefreshToken:s,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,flowType:d,lock:m,debug:p,throwOnError:f,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(R=>R.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new j1(this.realtimeUrl.href,bs(bs({},s),{},{params:bs(bs({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,t)=>{this._handleTokenChanged(s,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(s,t,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const CS=(s,t,r)=>new _S(s,t,r);function PS(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const t=s.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}PS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ES="https://xqcnqtrzamgzsrgbmxuk.supabase.co",AS="sb_publishable_KwSUm9DTjeHvxqOSfECRFQ_4dkpCxAW",TS=!0;console.log(" Supabase Client initialized successfully");const Ve=CS(ES,AS),ls=TS;async function zs(s,t={}){try{let r=Ve.from(s).select(t.select||"*");if(t.filters)for(const o of Object.keys(t.filters))r=r.eq(o,t.filters[o]);t.orderBy&&(r=r.order(t.orderBy.column,{ascending:!!t.orderBy.ascending})),typeof t.limit=="number"&&(r=r.limit(t.limit)),typeof t.offset=="number"&&(r=r.range(t.offset,(t.offset||0)+(t.limit||0)-1));const i=await r;if(i.error)throw i.error;return i.data}catch(r){return console.warn("queryDocuments failed:",r),null}}async function _c(s,t){try{const{data:r,error:i}=await Ve.from(s).select("*").eq("id",t).maybeSingle();if(i)throw i;return r}catch(r){return console.warn("getDocument failed:",r),null}}async function ia(s,t){const{data:r,error:i}=await Ve.from(s).insert([t]);if(i)throw i;return r}async function ta(s,t,r){const{data:i,error:o}=await Ve.from(s).update(r).eq("id",t);if(o)throw o;return i}async function Rp(s,t){const{data:r,error:i}=await Ve.from(s).delete().eq("id",t);if(i)throw i;return r}function Gd(s,t){try{const r=Ve.channel(`${s}_realtime`).on("postgres_changes",{event:"*",schema:"public",table:s},i=>t(i)).subscribe();return()=>{try{r.unsubscribe()}catch(i){console.warn("unsubscribe failed:",i)}}}catch(r){return console.warn("subscribeToTable failed:",r),()=>{}}}async function Ip(s,t,r){try{const{error:i}=await Ve.storage.from(s).upload(t,r,{upsert:!0});if(i)throw i;const{data:o}=Ve.storage.from(s).getPublicUrl(t);return(o==null?void 0:o.publicUrl)||null}catch(i){throw console.error("uploadFile failed:",i),i}}async function sa(s,t){var r;try{let i=null;try{const{data:l}=await Ve.auth.getSession();i=((r=l==null?void 0:l.session)==null?void 0:r.access_token)||null}catch{i=null}const o=await fetch(`/api/functions/${s}`,{method:"POST",headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify(t||{})});if(!o.ok){const l=await o.text();throw new Error(l||`Function ${s} failed with status ${o.status}`)}return await o.json()}catch(i){throw console.warn("callServerFunction failed:",s,i),i}}const RS=()=>{};var lx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=function(s){const t=[];let r=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128)}return t},IS=function(s){const t=[];let r=0,i=0;for(;r<s.length;){const o=s[r++];if(o<128)t[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=s[r++];t[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=s[r++],d=s[r++],m=s[r++],p=((o&7)<<18|(l&63)<<12|(d&63)<<6|m&63)-65536;t[i++]=String.fromCharCode(55296+(p>>10)),t[i++]=String.fromCharCode(56320+(p&1023))}else{const l=s[r++],d=s[r++];t[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return t.join("")},Cb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const l=s[o],d=o+1<s.length,m=d?s[o+1]:0,p=o+2<s.length,f=p?s[o+2]:0,b=l>>2,w=(l&3)<<4|m>>4;let N=(m&15)<<2|f>>6,R=f&63;p||(R=64,d||(N=64)),i.push(r[b],r[w],r[N],r[R])}return i.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(_b(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):IS(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const l=r[s.charAt(o++)],m=o<s.length?r[s.charAt(o)]:0;++o;const f=o<s.length?r[s.charAt(o)]:64;++o;const w=o<s.length?r[s.charAt(o)]:64;if(++o,l==null||m==null||f==null||w==null)throw new OS;const N=l<<2|m>>4;if(i.push(N),f!==64){const R=m<<4&240|f>>2;if(i.push(R),w!==64){const P=f<<6&192|w;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class OS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DS=function(s){const t=_b(s);return Cb.encodeByteArray(t,!0)},ou=function(s){return DS(s).replace(/\./g,"")},Pb=function(s){try{return Cb.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=()=>zS().__FIREBASE_DEFAULTS__,LS=()=>{if(typeof process>"u"||typeof lx>"u")return;const s=lx.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},US=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&Pb(s[1]);return t&&JSON.parse(t)},Op=()=>{try{return RS()||MS()||LS()||US()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Eb=s=>{var t,r;return(r=(t=Op())==null?void 0:t.emulatorHosts)==null?void 0:r[s]},Dp=s=>{const t=Eb(s);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),i]:[t.substring(0,r),i]},Ab=()=>{var s;return(s=Op())==null?void 0:s.config},Tb=s=>{var t;return(t=Op())==null?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Pu(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=t||"demo-project",o=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ou(JSON.stringify(r)),ou(JSON.stringify(d)),""].join(".")}const Zl={};function FS(){const s={prod:[],emulator:[]};for(const t of Object.keys(Zl))Zl[t]?s.emulator.push(t):s.prod.push(t);return s}function BS(s){let t=document.getElementById(s),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),r=!0),{created:r,element:t}}let cx=!1;function Eu(s,t){if(typeof window>"u"||typeof document>"u"||!ro(window.location.host)||Zl[s]===t||Zl[s]||cx)return;Zl[s]=t;function r(N){return`__firebase__banner__${N}`}const i="__firebase__banner",l=FS().prod.length>0;function d(){const N=document.getElementById(i);N&&N.remove()}function m(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function p(N,R){N.setAttribute("width","24"),N.setAttribute("id",R),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function f(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{cx=!0,d()},N}function b(N,R){N.setAttribute("id",R),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function w(){const N=BS(i),R=r("text"),P=document.getElementById(R)||document.createElement("span"),_=r("learnmore"),O=document.getElementById(_)||document.createElement("a"),L=r("preprendIcon"),$=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const M=N.element;m(M),b(O,_);const te=f();p($,L),M.append($,P,O,te),document.body.appendChild(M)}l?(P.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hr())}function WS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ib(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function HS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qS(){const s=hr();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function zp(){try{return typeof indexedDB=="object"}catch{return!1}}function Mp(){return new Promise((s,t)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),r||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{r=!1},o.onerror=()=>{var l;t(((l=o.error)==null?void 0:l.message)||"")}}catch(r){t(r)}})}function Ob(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="FirebaseError";class Qr extends Error{constructor(t,r,i){super(r),this.code=t,this.customData=i,this.name=GS,Object.setPrototypeOf(this,Qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ma.prototype.create)}}class ma{constructor(t,r,i){this.service=t,this.serviceName=r,this.errors=i}create(t,...r){const i=r[0]||{},o=`${this.service}/${t}`,l=this.errors[t],d=l?KS(l,i):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Qr(o,m,i)}}function KS(s,t){return s.replace(JS,(r,i)=>{const o=t[i];return o!=null?String(o):`<${i}?>`})}const JS=/\{\$([^}]+)}/g;function ZS(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function la(s,t){if(s===t)return!0;const r=Object.keys(s),i=Object.keys(t);for(const o of r){if(!i.includes(o))return!1;const l=s[o],d=t[o];if(dx(l)&&dx(d)){if(!la(l,d))return!1}else if(l!==d)return!1}for(const o of i)if(!r.includes(o))return!1;return!0}function dx(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(s){const t=[];for(const[r,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function YS(s,t){const r=new XS(s,t);return r.subscribe.bind(r)}class XS{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,i){let o;if(t===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");QS(t,["next","error","complete"])?o=t:o={next:t,error:r,complete:i},o.next===void 0&&(o.next=wm),o.error===void 0&&(o.error=wm),o.complete===void 0&&(o.complete=wm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QS(s,t){if(typeof s!="object"||s===null)return!1;for(const r of t)if(r in s&&typeof s[r]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=1e3,tk=2,sk=14400*1e3,rk=.5;function ux(s,t=ek,r=tk){const i=t*Math.pow(r,s),o=Math.round(rk*i*(Math.random()-.5)*2);return Math.min(sk,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(s){return s&&s._delegate?s._delegate:s}class mr{constructor(t,r,i){this.name=t,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const i=new $S;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:r});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ak(t))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(r);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(t=Oa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Oa){return this.instances.has(t)}getOptions(t=Oa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[l,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&d.resolve(o)}return o}onInit(t,r){const i=this.normalizeInstanceIdentifier(r),o=this.onInitCallbacks.get(i)??new Set;o.add(t),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&t(l,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,r){const i=this.onInitCallbacks.get(r);if(i)for(const o of i)try{o(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ik(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Oa){return this.component?this.component.multipleInstances?t:Oa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ik(s){return s===Oa?void 0:s}function ak(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new nk(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ht||(Ht={}));const lk={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},ck=Ht.INFO,dk={[Ht.DEBUG]:"log",[Ht.VERBOSE]:"log",[Ht.INFO]:"info",[Ht.WARN]:"warn",[Ht.ERROR]:"error"},uk=(s,t,...r)=>{if(t<s.logLevel)return;const i=new Date().toISOString(),o=dk[t];if(o)console[o](`[${i}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Au{constructor(t){this.name=t,this._logLevel=ck,this._logHandler=uk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ht))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?lk[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ht.DEBUG,...t),this._logHandler(this,Ht.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ht.VERBOSE,...t),this._logHandler(this,Ht.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ht.INFO,...t),this._logHandler(this,Ht.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ht.WARN,...t),this._logHandler(this,Ht.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ht.ERROR,...t),this._logHandler(this,Ht.ERROR,...t)}}const hk=(s,t)=>t.some(r=>s instanceof r);let hx,mx;function mk(){return hx||(hx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pk(){return mx||(mx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Db=new WeakMap,ap=new WeakMap,zb=new WeakMap,jm=new WeakMap,Lp=new WeakMap;function fk(s){const t=new Promise((r,i)=>{const o=()=>{s.removeEventListener("success",l),s.removeEventListener("error",d)},l=()=>{r(fi(s.result)),o()},d=()=>{i(s.error),o()};s.addEventListener("success",l),s.addEventListener("error",d)});return t.then(r=>{r instanceof IDBCursor&&Db.set(r,s)}).catch(()=>{}),Lp.set(t,s),t}function gk(s){if(ap.has(s))return;const t=new Promise((r,i)=>{const o=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",d),s.removeEventListener("abort",d)},l=()=>{r(),o()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",l),s.addEventListener("error",d),s.addEventListener("abort",d)});ap.set(s,t)}let op={get(s,t,r){if(s instanceof IDBTransaction){if(t==="done")return ap.get(s);if(t==="objectStoreNames")return s.objectStoreNames||zb.get(s);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return fi(s[t])},set(s,t,r){return s[t]=r,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function xk(s){op=s(op)}function yk(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const i=s.call(Nm(this),t,...r);return zb.set(i,t.sort?t.sort():[t]),fi(i)}:pk().includes(s)?function(...t){return s.apply(Nm(this),t),fi(Db.get(this))}:function(...t){return fi(s.apply(Nm(this),t))}}function bk(s){return typeof s=="function"?yk(s):(s instanceof IDBTransaction&&gk(s),hk(s,mk())?new Proxy(s,op):s)}function fi(s){if(s instanceof IDBRequest)return fk(s);if(jm.has(s))return jm.get(s);const t=bk(s);return t!==s&&(jm.set(s,t),Lp.set(t,s)),t}const Nm=s=>Lp.get(s);function Tu(s,t,{blocked:r,upgrade:i,blocking:o,terminated:l}={}){const d=indexedDB.open(s,t),m=fi(d);return i&&d.addEventListener("upgradeneeded",p=>{i(fi(d.result),p.oldVersion,p.newVersion,fi(d.transaction),p)}),r&&d.addEventListener("blocked",p=>r(p.oldVersion,p.newVersion,p)),m.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",f=>o(f.oldVersion,f.newVersion,f))}).catch(()=>{}),m}function Sm(s,{blocked:t}={}){const r=indexedDB.deleteDatabase(s);return t&&r.addEventListener("blocked",i=>t(i.oldVersion,i)),fi(r).then(()=>{})}const vk=["get","getKey","getAll","getAllKeys","count"],wk=["put","add","delete","clear"],km=new Map;function px(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(km.get(t))return km.get(t);const r=t.replace(/FromIndex$/,""),i=t!==r,o=wk.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(o||vk.includes(r)))return;const l=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let f=p.store;return i&&(f=f.index(m.shift())),(await Promise.all([f[r](...m),o&&p.done]))[0]};return km.set(t,l),l}xk(s=>({...s,get:(t,r,i)=>px(t,r)||s.get(t,r,i),has:(t,r)=>!!px(t,r)||s.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Nk(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function Nk(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const lp="@firebase/app",fx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new Au("@firebase/app"),Sk="@firebase/app-compat",kk="@firebase/analytics-compat",_k="@firebase/analytics",Ck="@firebase/app-check-compat",Pk="@firebase/app-check",Ek="@firebase/auth",Ak="@firebase/auth-compat",Tk="@firebase/database",Rk="@firebase/data-connect",Ik="@firebase/database-compat",Ok="@firebase/functions",Dk="@firebase/functions-compat",zk="@firebase/installations",Mk="@firebase/installations-compat",Lk="@firebase/messaging",Uk="@firebase/messaging-compat",$k="@firebase/performance",Fk="@firebase/performance-compat",Bk="@firebase/remote-config",Vk="@firebase/remote-config-compat",Wk="@firebase/storage",Hk="@firebase/storage-compat",qk="@firebase/firestore",Gk="@firebase/ai",Kk="@firebase/firestore-compat",Jk="firebase",Zk="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",Yk={[lp]:"fire-core",[Sk]:"fire-core-compat",[_k]:"fire-analytics",[kk]:"fire-analytics-compat",[Pk]:"fire-app-check",[Ck]:"fire-app-check-compat",[Ek]:"fire-auth",[Ak]:"fire-auth-compat",[Tk]:"fire-rtdb",[Rk]:"fire-data-connect",[Ik]:"fire-rtdb-compat",[Ok]:"fire-fn",[Dk]:"fire-fn-compat",[zk]:"fire-iid",[Mk]:"fire-iid-compat",[Lk]:"fire-fcm",[Uk]:"fire-fcm-compat",[$k]:"fire-perf",[Fk]:"fire-perf-compat",[Bk]:"fire-rc",[Vk]:"fire-rc-compat",[Wk]:"fire-gcs",[Hk]:"fire-gcs-compat",[qk]:"fire-fst",[Kk]:"fire-fst-compat",[Gk]:"fire-vertex","fire-js":"fire-js",[Jk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=new Map,Xk=new Map,dp=new Map;function gx(s,t){try{s.container.addComponent(t)}catch(r){xi.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,r)}}function Cr(s){const t=s.name;if(dp.has(t))return xi.debug(`There were multiple attempts to register component ${t}.`),!1;dp.set(t,s);for(const r of lu.values())gx(r,s);for(const r of Xk.values())gx(r,s);return!0}function Vn(s,t){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(t)}function Xr(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},aa=new ma("app","Firebase",Qk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(t,r,i){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=Zk;function Mb(s,t={}){let r=s;typeof t!="object"&&(t={name:t});const i={name:cp,automaticDataCollectionEnabled:!0,...t},o=i.name;if(typeof o!="string"||!o)throw aa.create("bad-app-name",{appName:String(o)});if(r||(r=Ab()),!r)throw aa.create("no-options");const l=lu.get(o);if(l){if(la(r,l.options)&&la(i,l.config))return l;throw aa.create("duplicate-app",{appName:o})}const d=new ok(o);for(const p of dp.values())d.addComponent(p);const m=new e_(r,i,d);return lu.set(o,m),m}function hl(s=cp){const t=lu.get(s);if(!t&&s===cp&&Ab())return Mb();if(!t)throw aa.create("no-app",{appName:s});return t}function Vs(s,t,r){let i=Yk[s]??s;r&&(i+=`-${r}`);const o=i.match(/\s|\//),l=t.match(/\s|\//);if(o||l){const d=[`Unable to register library "${i}" with version "${t}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&d.push("and"),l&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),xi.warn(d.join(" "));return}Cr(new mr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="firebase-heartbeat-database",s_=1,hc="firebase-heartbeat-store";let _m=null;function Lb(){return _m||(_m=Tu(t_,s_,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(hc)}catch(r){console.warn(r)}}}}).catch(s=>{throw aa.create("idb-open",{originalErrorMessage:s.message})})),_m}async function r_(s){try{const r=(await Lb()).transaction(hc),i=await r.objectStore(hc).get(Ub(s));return await r.done,i}catch(t){if(t instanceof Qr)xi.warn(t.message);else{const r=aa.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});xi.warn(r.message)}}}async function xx(s,t){try{const i=(await Lb()).transaction(hc,"readwrite");await i.objectStore(hc).put(t,Ub(s)),await i.done}catch(r){if(r instanceof Qr)xi.warn(r.message);else{const i=aa.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});xi.warn(i.message)}}}function Ub(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=1024,i_=30;class a_{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new l_(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,r;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=yx();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>i_){const d=c_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=yx(),{heartbeatsToSend:i,unsentEntries:o}=o_(this._heartbeatsCache.heartbeats),l=ou(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(r){return xi.warn(r),""}}}function yx(){return new Date().toISOString().substring(0,10)}function o_(s,t=n_){const r=[];let i=s.slice();for(const o of s){const l=r.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),bx(r)>t){l.dates.pop();break}}else if(r.push({agent:o.agent,dates:[o.date]}),bx(r)>t){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class l_{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zp()?Mp().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await r_(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return xx(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return xx(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function bx(s){return ou(JSON.stringify({version:2,heartbeats:s})).length}function c_(s){if(s.length===0)return-1;let t=0,r=s[0].date;for(let i=1;i<s.length;i++)s[i].date<r&&(r=s[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(s){Cr(new mr("platform-logger",t=>new jk(t),"PRIVATE")),Cr(new mr("heartbeat",t=>new a_(t),"PRIVATE")),Vs(lp,fx,s),Vs(lp,fx,"esm2020"),Vs("fire-js","")}d_("");var u_="firebase",h_="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs(u_,h_,"app");var vx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Up;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,j){function S(){}S.prototype=j.prototype,E.F=j.prototype,E.prototype=new S,E.prototype.constructor=E,E.D=function(D,I,F){for(var C=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)C[ee-2]=arguments[ee];return j.prototype[I].apply(D,C)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,r),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(E,j,S){S||(S=0);const D=Array(16);if(typeof j=="string")for(var I=0;I<16;++I)D[I]=j.charCodeAt(S++)|j.charCodeAt(S++)<<8|j.charCodeAt(S++)<<16|j.charCodeAt(S++)<<24;else for(I=0;I<16;++I)D[I]=j[S++]|j[S++]<<8|j[S++]<<16|j[S++]<<24;j=E.g[0],S=E.g[1],I=E.g[2];let F=E.g[3],C;C=j+(F^S&(I^F))+D[0]+3614090360&4294967295,j=S+(C<<7&4294967295|C>>>25),C=F+(I^j&(S^I))+D[1]+3905402710&4294967295,F=j+(C<<12&4294967295|C>>>20),C=I+(S^F&(j^S))+D[2]+606105819&4294967295,I=F+(C<<17&4294967295|C>>>15),C=S+(j^I&(F^j))+D[3]+3250441966&4294967295,S=I+(C<<22&4294967295|C>>>10),C=j+(F^S&(I^F))+D[4]+4118548399&4294967295,j=S+(C<<7&4294967295|C>>>25),C=F+(I^j&(S^I))+D[5]+1200080426&4294967295,F=j+(C<<12&4294967295|C>>>20),C=I+(S^F&(j^S))+D[6]+2821735955&4294967295,I=F+(C<<17&4294967295|C>>>15),C=S+(j^I&(F^j))+D[7]+4249261313&4294967295,S=I+(C<<22&4294967295|C>>>10),C=j+(F^S&(I^F))+D[8]+1770035416&4294967295,j=S+(C<<7&4294967295|C>>>25),C=F+(I^j&(S^I))+D[9]+2336552879&4294967295,F=j+(C<<12&4294967295|C>>>20),C=I+(S^F&(j^S))+D[10]+4294925233&4294967295,I=F+(C<<17&4294967295|C>>>15),C=S+(j^I&(F^j))+D[11]+2304563134&4294967295,S=I+(C<<22&4294967295|C>>>10),C=j+(F^S&(I^F))+D[12]+1804603682&4294967295,j=S+(C<<7&4294967295|C>>>25),C=F+(I^j&(S^I))+D[13]+4254626195&4294967295,F=j+(C<<12&4294967295|C>>>20),C=I+(S^F&(j^S))+D[14]+2792965006&4294967295,I=F+(C<<17&4294967295|C>>>15),C=S+(j^I&(F^j))+D[15]+1236535329&4294967295,S=I+(C<<22&4294967295|C>>>10),C=j+(I^F&(S^I))+D[1]+4129170786&4294967295,j=S+(C<<5&4294967295|C>>>27),C=F+(S^I&(j^S))+D[6]+3225465664&4294967295,F=j+(C<<9&4294967295|C>>>23),C=I+(j^S&(F^j))+D[11]+643717713&4294967295,I=F+(C<<14&4294967295|C>>>18),C=S+(F^j&(I^F))+D[0]+3921069994&4294967295,S=I+(C<<20&4294967295|C>>>12),C=j+(I^F&(S^I))+D[5]+3593408605&4294967295,j=S+(C<<5&4294967295|C>>>27),C=F+(S^I&(j^S))+D[10]+38016083&4294967295,F=j+(C<<9&4294967295|C>>>23),C=I+(j^S&(F^j))+D[15]+3634488961&4294967295,I=F+(C<<14&4294967295|C>>>18),C=S+(F^j&(I^F))+D[4]+3889429448&4294967295,S=I+(C<<20&4294967295|C>>>12),C=j+(I^F&(S^I))+D[9]+568446438&4294967295,j=S+(C<<5&4294967295|C>>>27),C=F+(S^I&(j^S))+D[14]+3275163606&4294967295,F=j+(C<<9&4294967295|C>>>23),C=I+(j^S&(F^j))+D[3]+4107603335&4294967295,I=F+(C<<14&4294967295|C>>>18),C=S+(F^j&(I^F))+D[8]+1163531501&4294967295,S=I+(C<<20&4294967295|C>>>12),C=j+(I^F&(S^I))+D[13]+2850285829&4294967295,j=S+(C<<5&4294967295|C>>>27),C=F+(S^I&(j^S))+D[2]+4243563512&4294967295,F=j+(C<<9&4294967295|C>>>23),C=I+(j^S&(F^j))+D[7]+1735328473&4294967295,I=F+(C<<14&4294967295|C>>>18),C=S+(F^j&(I^F))+D[12]+2368359562&4294967295,S=I+(C<<20&4294967295|C>>>12),C=j+(S^I^F)+D[5]+4294588738&4294967295,j=S+(C<<4&4294967295|C>>>28),C=F+(j^S^I)+D[8]+2272392833&4294967295,F=j+(C<<11&4294967295|C>>>21),C=I+(F^j^S)+D[11]+1839030562&4294967295,I=F+(C<<16&4294967295|C>>>16),C=S+(I^F^j)+D[14]+4259657740&4294967295,S=I+(C<<23&4294967295|C>>>9),C=j+(S^I^F)+D[1]+2763975236&4294967295,j=S+(C<<4&4294967295|C>>>28),C=F+(j^S^I)+D[4]+1272893353&4294967295,F=j+(C<<11&4294967295|C>>>21),C=I+(F^j^S)+D[7]+4139469664&4294967295,I=F+(C<<16&4294967295|C>>>16),C=S+(I^F^j)+D[10]+3200236656&4294967295,S=I+(C<<23&4294967295|C>>>9),C=j+(S^I^F)+D[13]+681279174&4294967295,j=S+(C<<4&4294967295|C>>>28),C=F+(j^S^I)+D[0]+3936430074&4294967295,F=j+(C<<11&4294967295|C>>>21),C=I+(F^j^S)+D[3]+3572445317&4294967295,I=F+(C<<16&4294967295|C>>>16),C=S+(I^F^j)+D[6]+76029189&4294967295,S=I+(C<<23&4294967295|C>>>9),C=j+(S^I^F)+D[9]+3654602809&4294967295,j=S+(C<<4&4294967295|C>>>28),C=F+(j^S^I)+D[12]+3873151461&4294967295,F=j+(C<<11&4294967295|C>>>21),C=I+(F^j^S)+D[15]+530742520&4294967295,I=F+(C<<16&4294967295|C>>>16),C=S+(I^F^j)+D[2]+3299628645&4294967295,S=I+(C<<23&4294967295|C>>>9),C=j+(I^(S|~F))+D[0]+4096336452&4294967295,j=S+(C<<6&4294967295|C>>>26),C=F+(S^(j|~I))+D[7]+1126891415&4294967295,F=j+(C<<10&4294967295|C>>>22),C=I+(j^(F|~S))+D[14]+2878612391&4294967295,I=F+(C<<15&4294967295|C>>>17),C=S+(F^(I|~j))+D[5]+4237533241&4294967295,S=I+(C<<21&4294967295|C>>>11),C=j+(I^(S|~F))+D[12]+1700485571&4294967295,j=S+(C<<6&4294967295|C>>>26),C=F+(S^(j|~I))+D[3]+2399980690&4294967295,F=j+(C<<10&4294967295|C>>>22),C=I+(j^(F|~S))+D[10]+4293915773&4294967295,I=F+(C<<15&4294967295|C>>>17),C=S+(F^(I|~j))+D[1]+2240044497&4294967295,S=I+(C<<21&4294967295|C>>>11),C=j+(I^(S|~F))+D[8]+1873313359&4294967295,j=S+(C<<6&4294967295|C>>>26),C=F+(S^(j|~I))+D[15]+4264355552&4294967295,F=j+(C<<10&4294967295|C>>>22),C=I+(j^(F|~S))+D[6]+2734768916&4294967295,I=F+(C<<15&4294967295|C>>>17),C=S+(F^(I|~j))+D[13]+1309151649&4294967295,S=I+(C<<21&4294967295|C>>>11),C=j+(I^(S|~F))+D[4]+4149444226&4294967295,j=S+(C<<6&4294967295|C>>>26),C=F+(S^(j|~I))+D[11]+3174756917&4294967295,F=j+(C<<10&4294967295|C>>>22),C=I+(j^(F|~S))+D[2]+718787259&4294967295,I=F+(C<<15&4294967295|C>>>17),C=S+(F^(I|~j))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+j&4294967295,E.g[1]=E.g[1]+(I+(C<<21&4294967295|C>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+F&4294967295}i.prototype.v=function(E,j){j===void 0&&(j=E.length);const S=j-this.blockSize,D=this.C;let I=this.h,F=0;for(;F<j;){if(I==0)for(;F<=S;)o(this,E,F),F+=this.blockSize;if(typeof E=="string"){for(;F<j;)if(D[I++]=E.charCodeAt(F++),I==this.blockSize){o(this,D),I=0;break}}else for(;F<j;)if(D[I++]=E[F++],I==this.blockSize){o(this,D),I=0;break}}this.h=I,this.o+=j},i.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var j=1;j<E.length-8;++j)E[j]=0;j=this.o*8;for(var S=E.length-8;S<E.length;++S)E[S]=j&255,j/=256;for(this.v(E),E=Array(16),j=0,S=0;S<4;++S)for(let D=0;D<32;D+=8)E[j++]=this.g[S]>>>D&255;return E};function l(E,j){var S=m;return Object.prototype.hasOwnProperty.call(S,E)?S[E]:S[E]=j(E)}function d(E,j){this.h=j;const S=[];let D=!0;for(let I=E.length-1;I>=0;I--){const F=E[I]|0;D&&F==j||(S[I]=F,D=!1)}this.g=S}var m={};function p(E){return-128<=E&&E<128?l(E,function(j){return new d([j|0],j<0?-1:0)}):new d([E|0],E<0?-1:0)}function f(E){if(isNaN(E)||!isFinite(E))return w;if(E<0)return O(f(-E));const j=[];let S=1;for(let D=0;E>=S;D++)j[D]=E/S|0,S*=4294967296;return new d(j,0)}function b(E,j){if(E.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(E.charAt(0)=="-")return O(b(E.substring(1),j));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=f(Math.pow(j,8));let D=w;for(let F=0;F<E.length;F+=8){var I=Math.min(8,E.length-F);const C=parseInt(E.substring(F,F+I),j);I<8?(I=f(Math.pow(j,I)),D=D.j(I).add(f(C))):(D=D.j(S),D=D.add(f(C)))}return D}var w=p(0),N=p(1),R=p(16777216);s=d.prototype,s.m=function(){if(_(this))return-O(this).m();let E=0,j=1;for(let S=0;S<this.g.length;S++){const D=this.i(S);E+=(D>=0?D:4294967296+D)*j,j*=4294967296}return E},s.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(P(this))return"0";if(_(this))return"-"+O(this).toString(E);const j=f(Math.pow(E,6));var S=this;let D="";for(;;){const I=te(S,j).g;S=L(S,I.j(j));let F=((S.g.length>0?S.g[0]:S.h)>>>0).toString(E);if(S=I,P(S))return F+D;for(;F.length<6;)F="0"+F;D=F+D}},s.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function P(E){if(E.h!=0)return!1;for(let j=0;j<E.g.length;j++)if(E.g[j]!=0)return!1;return!0}function _(E){return E.h==-1}s.l=function(E){return E=L(this,E),_(E)?-1:P(E)?0:1};function O(E){const j=E.g.length,S=[];for(let D=0;D<j;D++)S[D]=~E.g[D];return new d(S,~E.h).add(N)}s.abs=function(){return _(this)?O(this):this},s.add=function(E){const j=Math.max(this.g.length,E.g.length),S=[];let D=0;for(let I=0;I<=j;I++){let F=D+(this.i(I)&65535)+(E.i(I)&65535),C=(F>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);D=C>>>16,F&=65535,C&=65535,S[I]=C<<16|F}return new d(S,S[S.length-1]&-2147483648?-1:0)};function L(E,j){return E.add(O(j))}s.j=function(E){if(P(this)||P(E))return w;if(_(this))return _(E)?O(this).j(O(E)):O(O(this).j(E));if(_(E))return O(this.j(O(E)));if(this.l(R)<0&&E.l(R)<0)return f(this.m()*E.m());const j=this.g.length+E.g.length,S=[];for(var D=0;D<2*j;D++)S[D]=0;for(D=0;D<this.g.length;D++)for(let I=0;I<E.g.length;I++){const F=this.i(D)>>>16,C=this.i(D)&65535,ee=E.i(I)>>>16,ue=E.i(I)&65535;S[2*D+2*I]+=C*ue,$(S,2*D+2*I),S[2*D+2*I+1]+=F*ue,$(S,2*D+2*I+1),S[2*D+2*I+1]+=C*ee,$(S,2*D+2*I+1),S[2*D+2*I+2]+=F*ee,$(S,2*D+2*I+2)}for(E=0;E<j;E++)S[E]=S[2*E+1]<<16|S[2*E];for(E=j;E<2*j;E++)S[E]=0;return new d(S,0)};function $(E,j){for(;(E[j]&65535)!=E[j];)E[j+1]+=E[j]>>>16,E[j]&=65535,j++}function M(E,j){this.g=E,this.h=j}function te(E,j){if(P(j))throw Error("division by zero");if(P(E))return new M(w,w);if(_(E))return j=te(O(E),j),new M(O(j.g),O(j.h));if(_(j))return j=te(E,O(j)),new M(O(j.g),j.h);if(E.g.length>30){if(_(E)||_(j))throw Error("slowDivide_ only works with positive integers.");for(var S=N,D=j;D.l(E)<=0;)S=H(S),D=H(D);var I=U(S,1),F=U(D,1);for(D=U(D,2),S=U(S,2);!P(D);){var C=F.add(D);C.l(E)<=0&&(I=I.add(S),F=C),D=U(D,1),S=U(S,1)}return j=L(E,I.j(j)),new M(I,j)}for(I=w;E.l(j)>=0;){for(S=Math.max(1,Math.floor(E.m()/j.m())),D=Math.ceil(Math.log(S)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),F=f(S),C=F.j(j);_(C)||C.l(E)>0;)S-=D,F=f(S),C=F.j(j);P(F)&&(F=N),I=I.add(F),E=L(E,C)}return new M(I,E)}s.B=function(E){return te(this,E).h},s.and=function(E){const j=Math.max(this.g.length,E.g.length),S=[];for(let D=0;D<j;D++)S[D]=this.i(D)&E.i(D);return new d(S,this.h&E.h)},s.or=function(E){const j=Math.max(this.g.length,E.g.length),S=[];for(let D=0;D<j;D++)S[D]=this.i(D)|E.i(D);return new d(S,this.h|E.h)},s.xor=function(E){const j=Math.max(this.g.length,E.g.length),S=[];for(let D=0;D<j;D++)S[D]=this.i(D)^E.i(D);return new d(S,this.h^E.h)};function H(E){const j=E.g.length+1,S=[];for(let D=0;D<j;D++)S[D]=E.i(D)<<1|E.i(D-1)>>>31;return new d(S,E.h)}function U(E,j){const S=j>>5;j%=32;const D=E.g.length-S,I=[];for(let F=0;F<D;F++)I[F]=j>0?E.i(F+S)>>>j|E.i(F+S+1)<<32-j:E.i(F+S);return new d(I,E.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=f,d.fromString=b,Up=d}).apply(typeof vx<"u"?vx:typeof self<"u"?self:typeof window<"u"?window:{});var Ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var s,t=Object.defineProperty;function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ud=="object"&&Ud];for(var y=0;y<u.length;++y){var k=u[y];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var i=r(this);function o(u,y){if(y)e:{var k=i;u=u.split(".");for(var z=0;z<u.length-1;z++){var oe=u[z];if(!(oe in k))break e;k=k[oe]}u=u[u.length-1],z=k[u],y=y(z),y!=z&&y!=null&&t(k,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var k=[],z;for(z in y)Object.prototype.hasOwnProperty.call(y,z)&&k.push([z,y[z]]);return k}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function m(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function p(u,y,k){return u.call.apply(u.bind,arguments)}function f(u,y,k){return f=p,f.apply(null,arguments)}function b(u,y){var k=Array.prototype.slice.call(arguments,1);return function(){var z=k.slice();return z.push.apply(z,arguments),u.apply(this,z)}}function w(u,y){function k(){}k.prototype=y.prototype,u.Z=y.prototype,u.prototype=new k,u.prototype.constructor=u,u.Ob=function(z,oe,pe){for(var Fe=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)Fe[Nt-2]=arguments[Nt];return y.prototype[oe].apply(z,Fe)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function R(u){const y=u.length;if(y>0){const k=Array(y);for(let z=0;z<y;z++)k[z]=u[z];return k}return[]}function P(u,y){for(let z=1;z<arguments.length;z++){const oe=arguments[z];var k=typeof oe;if(k=k!="object"?k:oe?Array.isArray(oe)?"array":k:"null",k=="array"||k=="object"&&typeof oe.length=="number"){k=u.length||0;const pe=oe.length||0;u.length=k+pe;for(let Fe=0;Fe<pe;Fe++)u[k+Fe]=oe[Fe]}else u.push(oe)}}class _{constructor(y,k){this.i=y,this.j=k,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function O(u){d.setTimeout(()=>{throw u},0)}function L(){var u=E;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class ${constructor(){this.h=this.g=null}add(y,k){const z=M.get();z.set(y,k),this.h?this.h.next=z:this.g=z,this.h=z}}var M=new _(()=>new te,u=>u.reset());class te{constructor(){this.next=this.g=this.h=null}set(y,k){this.h=y,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let H,U=!1,E=new $,j=()=>{const u=Promise.resolve(void 0);H=()=>{u.then(S)}};function S(){for(var u;u=L();){try{u.h.call(u.g)}catch(k){O(k)}var y=M;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}U=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const k=()=>{};d.addEventListener("test",k,y),d.removeEventListener("test",k,y)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function ee(u,y){I.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}w(ee,I),ee.prototype.init=function(u,y){const k=this.type=u.type,z=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(k=="mouseover"?y=u.fromElement:k=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ue="closure_listenable_"+(Math.random()*1e6|0),Se=0;function Pe(u,y,k,z,oe){this.listener=u,this.proxy=null,this.src=y,this.type=k,this.capture=!!z,this.ha=oe,this.key=++Se,this.da=this.fa=!1}function ce(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ye(u,y,k){for(const z in u)y.call(k,u[z],z,u)}function je(u,y){for(const k in u)y.call(void 0,u[k],k,u)}function K(u){const y={};for(const k in u)y[k]=u[k];return y}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(u,y){let k,z;for(let oe=1;oe<arguments.length;oe++){z=arguments[oe];for(k in z)u[k]=z[k];for(let pe=0;pe<me.length;pe++)k=me[pe],Object.prototype.hasOwnProperty.call(z,k)&&(u[k]=z[k])}}function ve(u){this.src=u,this.g={},this.h=0}ve.prototype.add=function(u,y,k,z,oe){const pe=u.toString();u=this.g[pe],u||(u=this.g[pe]=[],this.h++);const Fe=Ie(u,y,z,oe);return Fe>-1?(y=u[Fe],k||(y.fa=!1)):(y=new Pe(y,this.src,pe,!!z,oe),y.fa=k,u.push(y)),y};function G(u,y){const k=y.type;if(k in u.g){var z=u.g[k],oe=Array.prototype.indexOf.call(z,y,void 0),pe;(pe=oe>=0)&&Array.prototype.splice.call(z,oe,1),pe&&(ce(y),u.g[k].length==0&&(delete u.g[k],u.h--))}}function Ie(u,y,k,z){for(let oe=0;oe<u.length;++oe){const pe=u[oe];if(!pe.da&&pe.listener==y&&pe.capture==!!k&&pe.ha==z)return oe}return-1}var be="closure_lm_"+(Math.random()*1e6|0),He={};function qe(u,y,k,z,oe){if(Array.isArray(y)){for(let pe=0;pe<y.length;pe++)qe(u,y[pe],k,z,oe);return null}return k=ze(k),u&&u[ue]?u.J(y,k,m(z)?!!z.capture:!1,oe):at(u,y,k,!1,z,oe)}function at(u,y,k,z,oe,pe){if(!y)throw Error("Invalid event type");const Fe=m(oe)?!!oe.capture:!!oe;let Nt=ae(u);if(Nt||(u[be]=Nt=new ve(u)),k=Nt.add(y,k,z,Fe,pe),k.proxy)return k;if(z=Rt(),k.proxy=z,z.src=u,z.listener=k,u.addEventListener)F||(oe=Fe),oe===void 0&&(oe=!1),u.addEventListener(y.toString(),z,oe);else if(u.attachEvent)u.attachEvent(wt(y.toString()),z);else if(u.addListener&&u.removeListener)u.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Rt(){function u(k){return y.call(u.src,u.listener,k)}const y=Lt;return u}function xe(u,y,k,z,oe){if(Array.isArray(y))for(var pe=0;pe<y.length;pe++)xe(u,y[pe],k,z,oe);else z=m(z)?!!z.capture:!!z,k=ze(k),u&&u[ue]?(u=u.i,pe=String(y).toString(),pe in u.g&&(y=u.g[pe],k=Ie(y,k,z,oe),k>-1&&(ce(y[k]),Array.prototype.splice.call(y,k,1),y.length==0&&(delete u.g[pe],u.h--)))):u&&(u=ae(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Ie(y,k,z,oe)),(k=u>-1?y[u]:null)&&Je(k))}function Je(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[ue])G(y.i,u);else{var k=u.type,z=u.proxy;y.removeEventListener?y.removeEventListener(k,z,u.capture):y.detachEvent?y.detachEvent(wt(k),z):y.addListener&&y.removeListener&&y.removeListener(z),(k=ae(y))?(G(k,u),k.h==0&&(k.src=null,y[be]=null)):ce(u)}}}function wt(u){return u in He?He[u]:He[u]="on"+u}function Lt(u,y){if(u.da)u=!0;else{y=new ee(y,this);const k=u.listener,z=u.ha||u.src;u.fa&&Je(u),u=k.call(z,y)}return u}function ae(u){return u=u[be],u instanceof ve?u:null}var ge="__closure_events_fn_"+(Math.random()*1e9>>>0);function ze(u){return typeof u=="function"?u:(u[ge]||(u[ge]=function(y){return u.handleEvent(y)}),u[ge])}function we(){D.call(this),this.i=new ve(this),this.M=this,this.G=null}w(we,D),we.prototype[ue]=!0,we.prototype.removeEventListener=function(u,y,k,z){xe(this,u,y,k,z)};function Ue(u,y){var k,z=u.G;if(z)for(k=[];z;z=z.G)k.push(z);if(u=u.M,z=y.type||y,typeof y=="string")y=new I(y,u);else if(y instanceof I)y.target=y.target||u;else{var oe=y;y=new I(z,u),se(y,oe)}oe=!0;let pe,Fe;if(k)for(Fe=k.length-1;Fe>=0;Fe--)pe=y.g=k[Fe],oe=et(pe,z,!0,y)&&oe;if(pe=y.g=u,oe=et(pe,z,!0,y)&&oe,oe=et(pe,z,!1,y)&&oe,k)for(Fe=0;Fe<k.length;Fe++)pe=y.g=k[Fe],oe=et(pe,z,!1,y)&&oe}we.prototype.N=function(){if(we.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const k=u.g[y];for(let z=0;z<k.length;z++)ce(k[z]);delete u.g[y],u.h--}}this.G=null},we.prototype.J=function(u,y,k,z){return this.i.add(String(u),y,!1,k,z)},we.prototype.K=function(u,y,k,z){return this.i.add(String(u),y,!0,k,z)};function et(u,y,k,z){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let oe=!0;for(let pe=0;pe<y.length;++pe){const Fe=y[pe];if(Fe&&!Fe.da&&Fe.capture==k){const Nt=Fe.listener,hs=Fe.ha||Fe.src;Fe.fa&&G(u.i,Fe),oe=Nt.call(hs,z)!==!1&&oe}}return oe&&!z.defaultPrevented}function fe(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(u,y||0)}function nt(u){u.g=fe(()=>{u.g=null,u.i&&(u.i=!1,nt(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class dt extends D{constructor(y,k){super(),this.m=y,this.l=k,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:nt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _t(u){D.call(this),this.h=u,this.g={}}w(_t,D);var xt=[];function Kt(u){ye(u.g,function(y,k){this.g.hasOwnProperty(k)&&Je(y)},u),u.g={}}_t.prototype.N=function(){_t.Z.N.call(this),Kt(this)},_t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bt=d.JSON.stringify,is=d.JSON.parse,ds=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function De(){}function Ns(){}var us={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ms(){I.call(this,"d")}w(Ms,I);function X(){I.call(this,"c")}w(X,I);var $e={},Zs=null;function Ls(){return Zs=Zs||new we}$e.Ia="serverreachability";function Wr(u){I.call(this,$e.Ia,u)}w(Wr,I);function fr(u){const y=Ls();Ue(y,new Wr(y))}$e.STAT_EVENT="statevent";function Ts(u,y){I.call(this,$e.STAT_EVENT,u),this.stat=y}w(Ts,I);function Ot(u){const y=Ls();Ue(y,new Ts(y,u))}$e.Ja="timingevent";function gr(u,y){I.call(this,$e.Ja,u),this.size=y}w(gr,I);function ir(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},y)}function Rs(){this.g=!0}Rs.prototype.ua=function(){this.g=!1};function Pr(u,y,k,z,oe,pe){u.info(function(){if(u.g)if(pe){var Fe="",Nt=pe.split("&");for(let Gt=0;Gt<Nt.length;Gt++){var hs=Nt[Gt].split("=");if(hs.length>1){const Ss=hs[0];hs=hs[1];const Hr=Ss.split("_");Fe=Hr.length>=2&&Hr[1]=="type"?Fe+(Ss+"="+hs+"&"):Fe+(Ss+"=redacted&")}}}else Fe=null;else Fe=pe;return"XMLHTTP REQ ("+z+") [attempt "+oe+"]: "+y+`
`+k+`
`+Fe})}function Hn(u,y,k,z,oe,pe,Fe){u.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+oe+"]: "+y+`
`+k+`
`+pe+" "+Fe})}function ts(u,y,k,z){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ne(u,k)+(z?" "+z:"")})}function Us(u,y){u.info(function(){return"TIMEOUT: "+y})}Rs.prototype.info=function(){};function Ne(u,y){if(!u.g)return y;if(!y)return null;try{const pe=JSON.parse(y);if(pe){for(u=0;u<pe.length;u++)if(Array.isArray(pe[u])){var k=pe[u];if(!(k.length<2)){var z=k[1];if(Array.isArray(z)&&!(z.length<1)){var oe=z[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(let Fe=1;Fe<z.length;Fe++)z[Fe]=""}}}}return Bt(pe)}catch{return y}}var Ye={NO_ERROR:0,TIMEOUT:8},Ct={},Jt;function Pt(){}w(Pt,De),Pt.prototype.g=function(){return new XMLHttpRequest},Jt=new Pt;function At(u){return encodeURIComponent(String(u))}function Wt(u){var y=1;u=u.split(":");const k=[];for(;y>0&&u.length;)k.push(u.shift()),y--;return u.length&&k.push(u.join(":")),k}function It(u,y,k,z){this.j=u,this.i=y,this.l=k,this.S=z||1,this.V=new _t(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new en}function en(){this.i=null,this.g="",this.h=!1}var qn={},Gn={};function ar(u,y,k){u.M=1,u.A=qt(Vt(y)),u.u=k,u.R=!0,Kn(u,null)}function Kn(u,y){u.F=Date.now(),Er(u),u.B=Vt(u.A);var k=u.B,z=u.S;Array.isArray(z)||(z=[String(z)]),ut(k.i,"t",z),u.C=0,k=u.j.L,u.h=new en,u.g=Uc(u.j,k?y:null,!u.u),u.P>0&&(u.O=new dt(f(u.Y,u,u.g),u.P)),y=u.V,k=u.g,z=u.ba;var oe="readystatechange";Array.isArray(oe)||(oe&&(xt[0]=oe.toString()),oe=xt);for(let pe=0;pe<oe.length;pe++){const Fe=qe(k,oe[pe],z||y.handleEvent,!1,y.h||y);if(!Fe)break;y.g[Fe.key]=Fe}y=u.J?K(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),fr(),Pr(u.i,u.v,u.B,u.l,u.S,u.u)}It.prototype.ba=function(u){u=u.target;const y=this.O;y&&vn(u)==3?y.j():this.Y(u)},It.prototype.Y=function(u){try{if(u==this.g)e:{const Nt=vn(this.g),hs=this.g.ya(),Gt=this.g.ca();if(!(Nt<3)&&(Nt!=3||this.g&&(this.h.h||this.g.la()||Mc(this.g)))){this.K||Nt!=4||hs==7||(hs==8||Gt<=0?fr(3):fr(2)),V(this);var y=this.g.ca();this.X=y;var k=ji(this);if(this.o=y==200,Hn(this.i,this.v,this.B,this.l,this.S,Nt,y),this.o){if(this.U&&!this.L){t:{if(this.g){var z,oe=this.g;if((z=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(z)){var pe=z;break t}}pe=null}if(u=pe)ts(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Q(this,u);else{this.o=!1,this.m=3,Ot(12),q(this),B(this);break e}}if(this.R){u=!0;let Ss;for(;!this.K&&this.C<k.length;)if(Ss=Si(this,k),Ss==Gn){Nt==4&&(this.m=4,Ot(14),u=!1),ts(this.i,this.l,null,"[Incomplete Response]");break}else if(Ss==qn){this.m=4,Ot(15),ts(this.i,this.l,k,"[Invalid Chunk]"),u=!1;break}else ts(this.i,this.l,Ss,null),Q(this,Ss);if(Ni(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||k.length!=0||this.h.h||(this.m=1,Ot(16),u=!1),this.o=this.o&&u,!u)ts(this.i,this.l,k,"[Invalid Chunked Response]"),q(this),B(this);else if(k.length>0&&!this.W){this.W=!0;var Fe=this.j;Fe.g==this&&Fe.aa&&!Fe.P&&(Fe.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),xa(Fe),Fe.P=!0,Ot(11))}}else ts(this.i,this.l,k,null),Q(this,k);Nt==4&&q(this),this.o&&!this.K&&(Nt==4?ho(this.j,this):(this.o=!1,Er(this)))}else yl(this.g),y==400&&k.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),q(this),B(this)}}}catch{}finally{}};function ji(u){if(!Ni(u))return u.g.la();const y=Mc(u.g);if(y==="")return"";let k="";const z=y.length,oe=vn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return q(u),B(u),"";u.h.i=new d.TextDecoder}for(let pe=0;pe<z;pe++)u.h.h=!0,k+=u.h.i.decode(y[pe],{stream:!(oe&&pe==z-1)});return y.length=0,u.h.g+=k,u.C=0,u.h.g}function Ni(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Si(u,y){var k=u.C,z=y.indexOf(`
`,k);return z==-1?Gn:(k=Number(y.substring(k,z)),isNaN(k)?qn:(z+=1,z+k>y.length?Gn:(y=y.slice(z,z+k),u.C=z+k,y)))}It.prototype.cancel=function(){this.K=!0,q(this)};function Er(u){u.T=Date.now()+u.H,Jn(u,u.H)}function Jn(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ir(f(u.aa,u),y)}function V(u){u.D&&(d.clearTimeout(u.D),u.D=null)}It.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Us(this.i,this.B),this.M!=2&&(fr(),Ot(17)),q(this),this.m=2,B(this)):Jn(this,this.T-u)};function B(u){u.j.I==0||u.K||ho(u.j,u)}function q(u){V(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,Kt(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function Q(u,y){try{var k=u.j;if(k.I!=0&&(k.g==u||de(k.h,u))){if(!u.L&&de(k.h,u)&&k.I==3){try{var z=k.Ba.g.parse(y)}catch{z=null}if(Array.isArray(z)&&z.length==3){var oe=z;if(oe[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<u.F)uo(k),Ir(k);else break e;Nn(k),Ot(18)}}else k.xa=oe[1],0<k.xa-k.K&&oe[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=ir(f(k.Va,k),6e3));ne(k.h)<=1&&k.ta&&(k.ta=void 0)}else Or(k,11)}else if((u.L||k.g==u)&&uo(k),!C(y))for(oe=k.Ba.g.parse(y),y=0;y<oe.length;y++){let Gt=oe[y];const Ss=Gt[0];if(!(Ss<=k.K))if(k.K=Ss,Gt=Gt[1],k.I==2)if(Gt[0]=="c"){k.M=Gt[1],k.ba=Gt[2];const Hr=Gt[3];Hr!=null&&(k.ka=Hr,k.j.info("VER="+k.ka));const Sn=Gt[4];Sn!=null&&(k.za=Sn,k.j.info("SVER="+k.za));const kn=Gt[5];kn!=null&&typeof kn=="number"&&kn>0&&(z=1.5*kn,k.O=z,k.j.info("backChannelRequestTimeoutMs_="+z)),z=k;const _n=u.g;if(_n){const fo=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fo){var pe=z.h;pe.g||fo.indexOf("spdy")==-1&&fo.indexOf("quic")==-1&&fo.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&(Ee(pe,pe.h),pe.h=null))}if(z.G){const wl=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;wl&&(z.wa=wl,tt(z.J,z.G,wl))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-u.F,k.j.info("Handshake RTT: "+k.T+"ms")),z=k;var Fe=u;if(z.na=vl(z,z.L?z.ba:null,z.W),Fe.L){ct(z.h,Fe);var Nt=Fe,hs=z.O;hs&&(Nt.H=hs),Nt.D&&(V(Nt),Er(Nt)),z.g=Fe}else Ys(z);k.i.length>0&&ei(k)}else Gt[0]!="stop"&&Gt[0]!="close"||Or(k,7);else k.I==3&&(Gt[0]=="stop"||Gt[0]=="close"?Gt[0]=="stop"?Or(k,7):lo(k):Gt[0]!="noop"&&k.l&&k.l.qa(Gt),k.A=0)}}fr(4)}catch{}}var re=class{constructor(u,y){this.g=u,this.map=y}};function ke(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ce(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ne(u){return u.h?1:u.g?u.g.size:0}function de(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Ee(u,y){u.g?u.g.add(y):u.h=y}function ct(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}ke.prototype.cancel=function(){if(this.i=Be(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Be(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const k of u.g.values())y=y.concat(k.G);return y}return R(u.i)}var jt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function St(u,y){if(u){u=u.split("&");for(let k=0;k<u.length;k++){const z=u[k].indexOf("=");let oe,pe=null;z>=0?(oe=u[k].substring(0,z),pe=u[k].substring(z+1)):oe=u[k],y(oe,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function Tt(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof Tt?(this.l=u.l,bt(this,u.j),this.o=u.o,this.g=u.g,gs(this,u.u),this.h=u.h,it(this,Ws(u.i)),this.m=u.m):u&&(y=String(u).match(jt))?(this.l=!1,bt(this,y[1]||"",!0),this.o=xs(y[2]||""),this.g=xs(y[3]||"",!0),gs(this,y[4]),this.h=xs(y[5]||"",!0),it(this,y[6]||"",!0),this.m=xs(y[7]||"")):(this.l=!1,this.i=new Z(null,this.l))}Tt.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(xr(y,yn,!0),":");var k=this.g;return(k||y=="file")&&(u.push("//"),(y=this.o)&&u.push(xr(y,yn,!0),"@"),u.push(At(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&u.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&u.push("/"),u.push(xr(k,k.charAt(0)=="/"?bn:ki,!0))),(k=this.i.toString())&&u.push("?",k),(k=this.m)&&u.push("#",xr(k,A)),u.join("")},Tt.prototype.resolve=function(u){const y=Vt(this);let k=!!u.j;k?bt(y,u.j):k=!!u.o,k?y.o=u.o:k=!!u.g,k?y.g=u.g:k=u.u!=null;var z=u.h;if(k)gs(y,u.u);else if(k=!!u.h){if(z.charAt(0)!="/")if(this.g&&!this.h)z="/"+z;else{var oe=y.h.lastIndexOf("/");oe!=-1&&(z=y.h.slice(0,oe+1)+z)}if(oe=z,oe==".."||oe==".")z="";else if(oe.indexOf("./")!=-1||oe.indexOf("/.")!=-1){z=oe.lastIndexOf("/",0)==0,oe=oe.split("/");const pe=[];for(let Fe=0;Fe<oe.length;){const Nt=oe[Fe++];Nt=="."?z&&Fe==oe.length&&pe.push(""):Nt==".."?((pe.length>1||pe.length==1&&pe[0]!="")&&pe.pop(),z&&Fe==oe.length&&pe.push("")):(pe.push(Nt),z=!0)}z=pe.join("/")}else z=oe}return k?y.h=z:k=u.i.toString()!=="",k?it(y,Ws(u.i)):k=!!u.m,k&&(y.m=u.m),y};function Vt(u){return new Tt(u)}function bt(u,y,k){u.j=k?xs(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function gs(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function it(u,y,k){y instanceof Z?(u.i=y,as(u.i,u.l)):(k||(y=xr(y,io)),u.i=new Z(y,u.l))}function tt(u,y,k){u.i.set(y,k)}function qt(u){return tt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function xs(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function xr(u,y,k){return typeof u=="string"?(u=encodeURI(u).replace(y,Zn),k&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Zn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var yn=/[#\/\?@]/g,ki=/[#\?:]/g,bn=/[#\?]/g,io=/[#\?@]/g,A=/#/g;function Z(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Me(u){u.g||(u.g=new Map,u.h=0,u.i&&St(u.i,function(y,k){u.add(decodeURIComponent(y.replace(/\+/g," ")),k)}))}s=Z.prototype,s.add=function(u,y){Me(this),this.i=null,u=yt(this,u);let k=this.g.get(u);return k||this.g.set(u,k=[]),k.push(y),this.h+=1,this};function Ke(u,y){Me(u),y=yt(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function Ae(u,y){return Me(u),y=yt(u,y),u.g.has(y)}s.forEach=function(u,y){Me(this),this.g.forEach(function(k,z){k.forEach(function(oe){u.call(y,oe,z,this)},this)},this)};function Zt(u,y){Me(u);let k=[];if(typeof y=="string")Ae(u,y)&&(k=k.concat(u.g.get(yt(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)k=k.concat(u[y]);return k}s.set=function(u,y){return Me(this),this.i=null,u=yt(this,u),Ae(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},s.get=function(u,y){return u?(u=Zt(this,u),u.length>0?String(u[0]):y):y};function ut(u,y,k){Ke(u,y),k.length>0&&(u.i=null,u.g.set(yt(u,y),R(k)),u.h+=k.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let z=0;z<y.length;z++){var k=y[z];const oe=At(k);k=Zt(this,k);for(let pe=0;pe<k.length;pe++){let Fe=oe;k[pe]!==""&&(Fe+="="+At(k[pe])),u.push(Fe)}}return this.i=u.join("&")};function Ws(u){const y=new Z;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function yt(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function as(u,y){y&&!u.j&&(Me(u),u.i=null,u.g.forEach(function(k,z){const oe=z.toLowerCase();z!=oe&&(Ke(this,z),ut(this,oe,k))},u)),u.j=y}function Ar(u,y){const k=new Rs;if(d.Image){const z=new Image;z.onload=b(Yt,k,"TestLoadImage: loaded",!0,y,z),z.onerror=b(Yt,k,"TestLoadImage: error",!1,y,z),z.onabort=b(Yt,k,"TestLoadImage: abort",!1,y,z),z.ontimeout=b(Yt,k,"TestLoadImage: timeout",!1,y,z),d.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=u}else y(!1)}function Tr(u,y){const k=new Rs,z=new AbortController,oe=setTimeout(()=>{z.abort(),Yt(k,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:z.signal}).then(pe=>{clearTimeout(oe),pe.ok?Yt(k,"TestPingServer: ok",!0,y):Yt(k,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(oe),Yt(k,"TestPingServer: error",!1,y)})}function Yt(u,y,k,z,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),z(k)}catch{}}function fa(){this.g=new ds}function Yn(u){this.i=u.Sb||null,this.h=u.ab||!1}w(Yn,De),Yn.prototype.g=function(){return new Rr(this.i,this.h)};function Rr(u,y){we.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Rr,we),s=Rr.prototype,s.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,tn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_i(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,tn(this)),this.g&&(this.readyState=3,tn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Oc(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Oc(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?_i(this):tn(this),this.readyState==3&&Oc(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,_i(this))},s.Na=function(u){this.g&&(this.response=u,_i(this))},s.ga=function(){this.g&&_i(this)};function _i(u){u.readyState=4,u.l=null,u.j=null,u.B=null,tn(u)}s.setRequestHeader=function(u,y){this.A.append(u,y)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var k=y.next();!k.done;)k=k.value,u.push(k[0]+": "+k[1]),k=y.next();return u.join(`\r
`)};function tn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Rr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Dc(u){let y="";return ye(u,function(k,z){y+=z,y+=":",y+=k,y+=`\r
`}),y}function ao(u,y,k){e:{for(z in k){var z=!1;break e}z=!0}z||(k=Dc(k),typeof u=="string"?k!=null&&At(k):tt(u,y,k))}function Xt(u){we.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Xt,we);var zc=/^https?$/i,Uu=["POST","PUT"];s=Xt.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,y,k,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Jt.g(),this.g.onreadystatechange=N(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(pe){Ci(this,pe);return}if(u=k||"",k=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var oe in z)k.set(oe,z[oe]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const pe of z.keys())k.set(pe,z.get(pe));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(k.keys()).find(pe=>pe.toLowerCase()=="content-type"),oe=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Uu,y,void 0)>=0)||z||oe||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pe,Fe]of k)this.g.setRequestHeader(pe,Fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(pe){Ci(this,pe)}};function Ci(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,Pi(u),Qn(u)}function Pi(u){u.A||(u.A=!0,Ue(u,"complete"),Ue(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ue(this,"complete"),Ue(this,"abort"),Qn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qn(this,!0)),Xt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Xn(this):this.Xa())},s.Xa=function(){Xn(this)};function Xn(u){if(u.h&&typeof l<"u"){if(u.v&&vn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ue(u,"readystatechange"),vn(u)==4){u.h=!1;try{const pe=u.ca();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var k;if(!(k=y)){var z;if(z=pe===0){let Fe=String(u.D).match(jt)[1]||null;!Fe&&d.self&&d.self.location&&(Fe=d.self.location.protocol.slice(0,-1)),z=!zc.test(Fe?Fe.toLowerCase():"")}k=z}if(k)Ue(u,"complete"),Ue(u,"success");else{u.o=6;try{var oe=vn(u)>2?u.g.statusText:""}catch{oe=""}u.l=oe+" ["+u.ca()+"]",Pi(u)}}finally{Qn(u)}}}}function Qn(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const k=u.g;u.g=null,y||Ue(u,"ready");try{k.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function vn(u){return u.g?u.g.readyState:0}s.ca=function(){try{return vn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),is(y)}};function Mc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function yl(u){const y={};u=(u.g&&vn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<u.length;z++){if(C(u[z]))continue;var k=Wt(u[z]);const oe=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const pe=y[oe]||[];y[oe]=pe,pe.push(k)}je(y,function(z){return z.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wn(u,y,k){return k&&k.internalChannelParams&&k.internalChannelParams[u]||y}function oo(u){this.za=0,this.i=[],this.j=new Rs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wn("baseRetryDelayMs",5e3,u),this.Za=wn("retryDelaySeedMs",1e4,u),this.Ta=wn("forwardChannelMaxRetries",2,u),this.va=wn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ke(u&&u.concurrentRequestLimit),this.Ba=new fa,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=oo.prototype,s.ka=8,s.I=1,s.connect=function(u,y,k,z){Ot(0),this.W=u,this.H=y||{},k&&z!==void 0&&(this.H.OSID=k,this.H.OAID=z),this.F=this.X,this.J=vl(this,null,this.W),ei(this)};function lo(u){if(co(u),u.I==3){var y=u.V++,k=Vt(u.J);if(tt(k,"SID",u.M),tt(k,"RID",y),tt(k,"TYPE","terminate"),jn(u,k),y=new It(u,u.j,y),y.M=2,y.A=qt(Vt(k)),k=!1,d.navigator&&d.navigator.sendBeacon)try{k=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!k&&d.Image&&(new Image().src=y.A,k=!0),k||(y.g=Uc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Er(y)}ya(u)}function Ir(u){u.g&&(xa(u),u.g.cancel(),u.g=null)}function co(u){Ir(u),u.v&&(d.clearTimeout(u.v),u.v=null),uo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function ei(u){if(!Ce(u.h)&&!u.m){u.m=!0;var y=u.Ea;H||j(),U||(H(),U=!0),E.add(y,u),u.D=0}}function Lc(u,y){return ne(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ir(f(u.Ea,u,y),mo(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const oe=new It(this,this.j,u);let pe=this.o;if(this.U&&(pe?(pe=K(pe),se(pe,this.U)):pe=this.U),this.u!==null||this.R||(oe.J=pe,pe=null),this.S)e:{for(var y=0,k=0;k<this.i.length;k++){t:{var z=this.i[k];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(y+=z,y>4096){y=k;break e}if(y===4096||k===this.i.length-1){y=k+1;break e}}y=1e3}else y=1e3;y=bl(this,oe,y),k=Vt(this.J),tt(k,"RID",u),tt(k,"CVER",22),this.G&&tt(k,"X-HTTP-Session-Id",this.G),jn(this,k),pe&&(this.R?y="headers="+At(Dc(pe))+"&"+y:this.u&&ao(k,this.u,pe)),Ee(this.h,oe),this.Ra&&tt(k,"TYPE","init"),this.S?(tt(k,"$req",y),tt(k,"SID","null"),oe.U=!0,ar(oe,k,null)):ar(oe,k,y),this.I=2}}else this.I==3&&(u?ga(this,u):this.i.length==0||Ce(this.h)||ga(this))};function ga(u,y){var k;y?k=y.l:k=u.V++;const z=Vt(u.J);tt(z,"SID",u.M),tt(z,"RID",k),tt(z,"AID",u.K),jn(u,z),u.u&&u.o&&ao(z,u.u,u.o),k=new It(u,u.j,k,u.D+1),u.u===null&&(k.J=u.o),y&&(u.i=y.G.concat(u.i)),y=bl(u,k,1e3),k.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ee(u.h,k),ar(k,z,y)}function jn(u,y){u.H&&ye(u.H,function(k,z){tt(y,z,k)}),u.l&&ye({},function(k,z){tt(y,z,k)})}function bl(u,y,k){k=Math.min(u.i.length,k);const z=u.l?f(u.l.Ka,u.l,u):null;e:{var oe=u.i;let Nt=-1;for(;;){const hs=["count="+k];Nt==-1?k>0?(Nt=oe[0].g,hs.push("ofs="+Nt)):Nt=0:hs.push("ofs="+Nt);let Gt=!0;for(let Ss=0;Ss<k;Ss++){var pe=oe[Ss].g;const Hr=oe[Ss].map;if(pe-=Nt,pe<0)Nt=Math.max(0,oe[Ss].g-100),Gt=!1;else try{pe="req"+pe+"_"||"";try{var Fe=Hr instanceof Map?Hr:Object.entries(Hr);for(const[Sn,kn]of Fe){let _n=kn;m(kn)&&(_n=Bt(kn)),hs.push(pe+Sn+"="+encodeURIComponent(_n))}}catch(Sn){throw hs.push(pe+"type="+encodeURIComponent("_badmap")),Sn}}catch{z&&z(Hr)}}if(Gt){Fe=hs.join("&");break e}}Fe=void 0}return u=u.i.splice(0,k),y.G=u,Fe}function Ys(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;H||j(),U||(H(),U=!0),E.add(y,u),u.A=0}}function Nn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ir(f(u.Da,u),mo(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Ei(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ir(f(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),Ir(this),Ei(this))};function xa(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Ei(u){u.g=new It(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=Vt(u.na);tt(y,"RID","rpc"),tt(y,"SID",u.M),tt(y,"AID",u.K),tt(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&tt(y,"TO",u.ia),tt(y,"TYPE","xmlhttp"),jn(u,y),u.u&&u.o&&ao(y,u.u,u.o),u.O&&(u.g.H=u.O);var k=u.g;u=u.ba,k.M=1,k.A=qt(Vt(y)),k.u=null,k.R=!0,Kn(k,u)}s.Va=function(){this.C!=null&&(this.C=null,Ir(this),Nn(this),Ot(19))};function uo(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function ho(u,y){var k=null;if(u.g==y){uo(u),xa(u),u.g=null;var z=2}else if(de(u.h,y))k=y.G,ct(u.h,y),z=1;else return;if(u.I!=0){if(y.o)if(z==1){k=y.u?y.u.length:0,y=Date.now()-y.F;var oe=u.D;z=Ls(),Ue(z,new gr(z,k)),ei(u)}else Ys(u);else if(oe=y.m,oe==3||oe==0&&y.X>0||!(z==1&&Lc(u,y)||z==2&&Nn(u)))switch(k&&k.length>0&&(y=u.h,y.i=y.i.concat(k)),oe){case 1:Or(u,5);break;case 4:Or(u,10);break;case 3:Or(u,6);break;default:Or(u,2)}}}function mo(u,y){let k=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(k*=2),k*y}function Or(u,y){if(u.j.info("Error code "+y),y==2){var k=f(u.bb,u),z=u.Ua;const oe=!z;z=new Tt(z||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||bt(z,"https"),qt(z),oe?Ar(z.toString(),k):Tr(z.toString(),k)}else Ot(2);u.I=0,u.l&&u.l.pa(y),ya(u),co(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function ya(u){if(u.I=0,u.ja=[],u.l){const y=Be(u.h);(y.length!=0||u.i.length!=0)&&(P(u.ja,y),P(u.ja,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.oa()}}function vl(u,y,k){var z=k instanceof Tt?Vt(k):new Tt(k);if(z.g!="")y&&(z.g=y+"."+z.g),gs(z,z.u);else{var oe=d.location;z=oe.protocol,y=y?y+"."+oe.hostname:oe.hostname,oe=+oe.port;const pe=new Tt(null);z&&bt(pe,z),y&&(pe.g=y),oe&&gs(pe,oe),k&&(pe.h=k),z=pe}return k=u.G,y=u.wa,k&&y&&tt(z,k,y),tt(z,"VER",u.ka),jn(u,z),z}function Uc(u,y,k){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new Xt(new Yn({ab:k})):new Xt(u.ma),y.Fa(u.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function $c(){}s=$c.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function yr(u,y){we.call(this),this.g=new oo(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!C(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Ai(this)}w(yr,we),yr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){lo(this.g)},yr.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var k={};k.__data__=u,u=k}else this.v&&(k={},k.__data__=Bt(u),u=k);y.i.push(new re(y.Ya++,u)),y.I==3&&ei(y)},yr.prototype.N=function(){this.g.l=null,delete this.j,lo(this.g),delete this.g,yr.Z.N.call(this)};function po(u){Ms.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const k in y){u=k;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}w(po,Ms);function Fc(){X.call(this),this.status=1}w(Fc,X);function Ai(u){this.g=u}w(Ai,$c),Ai.prototype.ra=function(){Ue(this.g,"a")},Ai.prototype.qa=function(u){Ue(this.g,new po(u))},Ai.prototype.pa=function(u){Ue(this.g,new Fc)},Ai.prototype.oa=function(){Ue(this.g,"b")},yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,Ye.NO_ERROR=0,Ye.TIMEOUT=8,Ye.HTTP_ERROR=6,Ct.COMPLETE="complete",Ns.EventType=us,us.OPEN="a",us.CLOSE="b",us.ERROR="c",us.MESSAGE="d",we.prototype.listen=we.prototype.J,Xt.prototype.listenOnce=Xt.prototype.K,Xt.prototype.getLastError=Xt.prototype.Ha,Xt.prototype.getLastErrorCode=Xt.prototype.ya,Xt.prototype.getStatus=Xt.prototype.ca,Xt.prototype.getResponseJson=Xt.prototype.La,Xt.prototype.getResponseText=Xt.prototype.la,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Fa}).apply(typeof Ud<"u"?Ud:typeof self<"u"?self:typeof window<"u"?window:{});const wx="@firebase/firestore",jx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cr=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new Au("@firebase/firestore");function mn(s,...t){if(rl.logLevel<=Ht.DEBUG){const r=t.map($p);rl.debug(`Firestore (${Pc}): ${s}`,...r)}}function $b(s,...t){if(rl.logLevel<=Ht.ERROR){const r=t.map($p);rl.error(`Firestore (${Pc}): ${s}`,...r)}}function m_(s,...t){if(rl.logLevel<=Ht.WARN){const r=t.map($p);rl.warn(`Firestore (${Pc}): ${s}`,...r)}}function $p(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(s,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,Fb(s,i,r)}function Fb(s,t,r){let i=`FIRESTORE (${Pc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(r!==void 0)try{i+=" CONTEXT: "+JSON.stringify(r)}catch{i+=" CONTEXT: "+r}throw $b(i),new Error(i)}function Yl(s,t,r,i){let o="Unexpected state";typeof r=="string"?o=r:i=r,s||Fb(t,o,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Mt extends Qr{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(){this.promise=new Promise(((t,r)=>{this.resolve=t,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class p_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable((()=>r(cr.UNAUTHENTICATED)))}shutdown(){}}class f_{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class g_{constructor(t){this.t=t,this.currentUser=cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){Yl(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,r(p)):Promise.resolve();let l=new Xl;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Xl,t.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=l;t.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{mn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(mn("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Xl)}}),0),d()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((i=>this.i!==t?(mn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Yl(typeof i.accessToken=="string",31837,{l:i}),new Bb(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yl(t===null||typeof t=="string",2055,{h:t}),new cr(t)}}class x_{constructor(t,r,i){this.P=t,this.T=r,this.I=i,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class y_{constructor(t,r,i){this.P=t,this.T=r,this.I=i}getToken(){return Promise.resolve(new x_(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable((()=>r(cr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nx{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b_{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xr(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){Yl(this.o===void 0,3512);const i=l=>{l.error!=null&&mn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,mn("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?r(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable((()=>i(l)))};const o=l=>{mn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):mn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Nx(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((r=>r?(Yl(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Nx(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let i=0;i<s;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=v_(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<r&&(i+=t.charAt(o[l]%62))}return i}}function ca(s,t){return s<t?-1:s>t?1:0}function j_(s,t){const r=Math.min(s.length,t.length);for(let i=0;i<r;i++){const o=s.charAt(i),l=t.charAt(i);if(o!==l)return Cm(o)===Cm(l)?ca(o,l):Cm(o)?1:-1}return ca(s.length,t.length)}const N_=55296,S_=57343;function Cm(s){const t=s.charCodeAt(0);return t>=N_&&t<=S_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="__name__";class Rn{constructor(t,r,i){r===void 0?r=0:r>t.length&&mc(637,{offset:r,range:t.length}),i===void 0?i=t.length-r:i>t.length-r&&mc(1746,{length:i,range:t.length-r}),this.segments=t,this.offset=r,this.len=i}get length(){return this.len}isEqual(t){return Rn.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Rn?t.forEach((i=>{r.push(i)})):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,i=this.limit();r<i;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const i=Math.min(t.length,r.length);for(let o=0;o<i;o++){const l=Rn.compareSegments(t.get(o),r.get(o));if(l!==0)return l}return ca(t.length,r.length)}static compareSegments(t,r){const i=Rn.isNumericId(t),o=Rn.isNumericId(r);return i&&!o?-1:!i&&o?1:i&&o?Rn.extractNumericId(t).compare(Rn.extractNumericId(r)):j_(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Up.fromString(t.substring(4,t.length-2))}}class hn extends Rn{construct(t,r,i){return new hn(t,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const i of t){if(i.indexOf("//")>=0)throw new Mt(zt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter((o=>o.length>0)))}return new hn(r)}static emptyPath(){return new hn([])}}const k_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ma extends Rn{construct(t,r,i){return new Ma(t,r,i)}static isValidIdentifier(t){return k_.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ma.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sx}static keyField(){return new Ma([Sx])}static fromServerFormat(t){const r=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Mt(zt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let d=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new Mt(zt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Mt(zt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(i+=m,o++):(l(),o++)}if(l(),d)throw new Mt(zt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ma(r)}static emptyPath(){return new Ma([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(t){this.path=t}static fromPath(t){return new Fa(hn.fromString(t))}static fromName(t){return new Fa(hn.fromString(t).popFirst(5))}static empty(){return new Fa(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&hn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return hn.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Fa(new hn(t.slice()))}}function __(s,t,r,i){if(t===!0&&i===!0)throw new Mt(zt.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function C_(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function P_(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":mc(12329,{type:typeof s})}function E_(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Mt(zt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=P_(s);throw new Mt(zt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(s,t){const r={typeString:s};return t&&(r.value=t),r}function Ec(s,t){if(!C_(s))throw new Mt(zt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const i in t)if(t[i]){const o=t[i].typeString,l="value"in t[i]?{value:t[i].value}:void 0;if(!(i in s)){r=`JSON missing required field: '${i}'`;break}const d=s[i];if(o&&typeof d!==o){r=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){r=`Expected '${i}' field to equal '${l.value}'`;break}}if(r)throw new Mt(zt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=-62135596800,_x=1e6;class In{static now(){return In.fromMillis(Date.now())}static fromDate(t){return In.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),i=Math.floor((t-1e3*r)*_x);return new In(r,i)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Mt(zt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Mt(zt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<kx)throw new Mt(zt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Mt(zt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_x}_compareTo(t){return this.seconds===t.seconds?ca(this.nanoseconds,t.nanoseconds):ca(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:In._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ec(t,In._jsonSchema))return new In(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-kx;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}In._jsonSchemaVersion="firestore/timestamp/1.0",In._jsonSchema={type:Es("string",In._jsonSchemaVersion),seconds:Es("number"),nanoseconds:Es("number")};function A_(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(t){this.binaryString=t}static fromBase64String(t){const r=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new T_("Invalid base64 string: "+l):l}})(t);return new Ka(r)}static fromUint8Array(t){const r=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(t);return new Ka(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const i=new Uint8Array(r.length);for(let o=0;o<r.length;o++)i[o]=r.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ca(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ka.EMPTY_BYTE_STRING=new Ka("");const Cx="(default)";class cu{constructor(t,r){this.projectId=t,this.database=r||Cx}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database===Cx}isEqual(t){return t instanceof cu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(t,r=null,i=[],o=[],l=null,d="F",m=null,p=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=d,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function I_(s){return new R_(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Px,Dt;(Dt=Px||(Px={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Up([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=1048576;function Pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(t,r,i=1e3,o=1.5,l=6e4){this.Mi=t,this.timerId=r,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,r-i);o>0&&mn("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(t,r,i,o,l){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Xl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,r,i,o,l){const d=Date.now()+i,m=new Fp(t,r,d,o,l);return m.start(i),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Mt(zt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Ex,Ax;(Ax=Ex||(Ex={})).Ma="default",Ax.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firestore.googleapis.com",Rx=!0;class Ix{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Mt(zt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vb,this.ssl=Rx}else this.host=t.host,this.ssl=t.ssl??Rx;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=O_;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<D_)throw new Mt(zt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}__("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=M_(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Mt(zt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Mt(zt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Mt(zt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Wb{constructor(t,r,i,o){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ix({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Mt(zt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Mt(zt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ix(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new p_;switch(i.type){case"firstParty":return new y_(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Mt(zt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const i=Tx.get(r);i&&(mn("ComponentProvider","Removing Datastore"),Tx.delete(r),i.terminate())})(this),Promise.resolve()}}function L_(s,t,r,i={}){var f;s=E_(s,Wb);const o=ro(t),l=s._getSettings(),d={...l,emulatorOptions:s._getEmulatorOptions()},m=`${t}:${r}`;o&&(Pu(`https://${m}`),Eu("Firestore",!0)),l.host!==Vb&&l.host!==m&&m_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:m,ssl:o,emulatorOptions:i};if(!la(p,d)&&(s._setSettings(p),i.mockUserToken)){let b,w;if(typeof i.mockUserToken=="string")b=i.mockUserToken,w=cr.MOCK_USER;else{b=Rb(i.mockUserToken,(f=s._app)==null?void 0:f.options.projectId);const N=i.mockUserToken.sub||i.mockUserToken.user_id;if(!N)throw new Mt(zt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new cr(N)}s._authCredentials=new f_(new Bb(b,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(t,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Bp(this.firestore,t,this._query)}}class Dn{constructor(t,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vp(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Dn(this.firestore,t,this._key)}toJSON(){return{type:Dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,i){if(Ec(r,Dn._jsonSchema))return new Dn(t,i||null,new Fa(hn.fromString(r.referencePath)))}}Dn._jsonSchemaVersion="firestore/documentReference/1.0",Dn._jsonSchema={type:Es("string",Dn._jsonSchemaVersion),referencePath:Es("string")};class Vp extends Bp{constructor(t,r,i){super(t,r,I_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Dn(this.firestore,null,new Fa(t))}withConverter(t){return new Vp(this.firestore,t,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="AsyncQueue";class Dx{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new z_(this,"async_queue_retry"),this._c=()=>{const i=Pm();i&&mn(Ox,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const r=Pm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=Pm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new Xl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!A_(t))throw t;mn(Ox,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const r=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,$b("INTERNAL UNHANDLED ERROR: ",zx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=r,r}enqueueAfterDelay(t,r,i){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const o=Fp.createAndSchedule(this,t,r,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&mc(47125,{Pc:zx(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((r,i)=>r.targetTimeMs-i.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function zx(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class U_ extends Wb{constructor(t,r,i,o){super(t,r,i,o),this.type="firestore",this._queue=new Dx,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Dx(t),this._firestoreClient=void 0,await t}}}function $_(s,t){const r=typeof s=="object"?s:hl(),i=typeof s=="string"?s:t,o=Vn(r,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Dp("firestore");l&&L_(o,...l)}return o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hi(Ka.fromBase64String(t))}catch(r){throw new Mt(zt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new hi(Ka.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:hi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ec(t,hi._jsonSchema))return hi.fromBase64String(t.bytes)}}hi._jsonSchemaVersion="firestore/bytes/1.0",hi._jsonSchema={type:Es("string",hi._jsonSchemaVersion),bytes:Es("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Mt(zt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ma(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Mt(zt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Mt(zt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ca(this._lat,t._lat)||ca(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wa._jsonSchemaVersion}}static fromJSON(t){if(Ec(t,Wa._jsonSchema))return new Wa(t.latitude,t.longitude)}}Wa._jsonSchemaVersion="firestore/geoPoint/1.0",Wa._jsonSchema={type:Es("string",Wa._jsonSchemaVersion),latitude:Es("number"),longitude:Es("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(t){this._values=(t||[]).map((r=>r))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ha._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ec(t,Ha._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((r=>typeof r=="number")))return new Ha(t.vectorValues);throw new Mt(zt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ha._jsonSchemaVersion="firestore/vectorValue/1.0",Ha._jsonSchema={type:Es("string",Ha._jsonSchemaVersion),vectorValues:Es("object")};const F_=new RegExp("[~\\*/\\[\\]]");function B_(s,t,r){if(t.search(F_)>=0)throw Mx(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s);try{return new Hb(...t.split("."))._internalPath}catch{throw Mx(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s)}}function Mx(s,t,r,i,o){let l=`Function ${t}() called with invalid data`;l+=". ";let d="";return new Mt(zt.INVALID_ARGUMENT,l+s+d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(t,r,i,o,l){this._firestore=t,this._userDataWriter=r,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new V_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(Gb("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class V_ extends qb{data(){return super.data()}}function Gb(s,t){return typeof t=="string"?B_(s,t):t instanceof Hb?t._internalPath:t._delegate._internalPath}class $d{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Xo extends qb{constructor(t,r,i,o,l,d){super(t,r,i,o,d),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const i=this._document.data.field(Gb("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Mt(zt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Xo._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xo._jsonSchema={type:Es("string",Xo._jsonSchemaVersion),bundleSource:Es("string","DocumentSnapshot"),bundleName:Es("string"),bundle:Es("string")};class Kd extends Xo{data(t={}){return super.data(t)}}class Ql{constructor(t,r,i,o){this._firestore=t,this._userDataWriter=r,this._snapshot=o,this.metadata=new $d(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const t=[];return this.forEach((r=>t.push(r))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach((i=>{t.call(r,new Kd(this._firestore,this._userDataWriter,i.key,i,new $d(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Mt(zt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const p=new Kd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new $d(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const p=new Kd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new $d(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let f=-1,b=-1;return m.type!==0&&(f=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),b=d.indexOf(m.doc.key)),{type:W_(m.type),doc:p,oldIndex:f,newIndex:b}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Mt(zt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ql._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=w_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(r.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function W_(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mc(61501,{type:s})}}Ql._jsonSchemaVersion="firestore/querySnapshot/1.0",Ql._jsonSchema={type:Es("string",Ql._jsonSchemaVersion),bundleSource:Es("string","QuerySnapshot"),bundleName:Es("string"),bundle:Es("string")};(function(t,r=!0){(function(o){Pc=o})(no),Cr(new mr("firestore",((i,{instanceIdentifier:o,options:l})=>{const d=i.getProvider("app").getImmediate(),m=new U_(new g_(i.getProvider("auth-internal")),new b_(d,i.getProvider("app-check-internal")),(function(f,b){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Mt(zt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(f.options.projectId,b)})(d,o),d);return l={useFetchStreams:r,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Vs(wx,jx,t),Vs(wx,jx,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="firebasestorage.googleapis.com",H_="storageBucket",q_=120*1e3,G_=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Qr{constructor(t,r,i=0){super(Em(t),`Firebase Storage: ${r} (${Em(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Em(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Un;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Un||(Un={}));function Em(s){return"storage/"+s}function K_(){const s="An unknown error occurred, please check the error payload for server response.";return new Wn(Un.UNKNOWN,s)}function J_(){return new Wn(Un.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Z_(){return new Wn(Un.CANCELED,"User canceled the upload/download.")}function Y_(s){return new Wn(Un.INVALID_URL,"Invalid URL '"+s+"'.")}function X_(s){return new Wn(Un.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function Lx(s){return new Wn(Un.INVALID_ARGUMENT,s)}function Jb(){return new Wn(Un.APP_DELETED,"The Firebase app was deleted.")}function Q_(s){return new Wn(Un.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let i;try{i=pn.makeFromUrl(t,r)}catch{return new pn(t,"")}if(i.path==="")return i;throw X_(t)}static makeFromUrl(t,r){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),p={bucket:1,path:3};function f(te){te.path_=decodeURIComponent(te.path)}const b="v[A-Za-z0-9_]+",w=r.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",R=new RegExp(`^https?://${w}/${b}/b/${o}/o${N}`,"i"),P={bucket:1,path:3},_=r===Kb?"(?:storage.googleapis.com|storage.cloud.google.com)":r,O="([^?#]*)",L=new RegExp(`^https?://${_}/${o}/${O}`,"i"),M=[{regex:m,indices:p,postModify:l},{regex:R,indices:P,postModify:f},{regex:L,indices:{bucket:1,path:2},postModify:f}];for(let te=0;te<M.length;te++){const H=M[te],U=H.regex.exec(t);if(U){const E=U[H.indices.bucket];let j=U[H.indices.path];j||(j=""),i=new pn(E,j),H.postModify(i);break}}if(i==null)throw Y_(t);return i}}class e4{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(s,t,r){let i=1,o=null,l=null,d=!1,m=0;function p(){return m===2}let f=!1;function b(...O){f||(f=!0,t.apply(null,O))}function w(O){o=setTimeout(()=>{o=null,s(R,p())},O)}function N(){l&&clearTimeout(l)}function R(O,...L){if(f){N();return}if(O){N(),b.call(null,O,...L);return}if(p()||d){N(),b.call(null,O,...L);return}i<64&&(i*=2);let M;m===1?(m=2,M=0):M=(i+Math.random())*1e3,w(M)}let P=!1;function _(O){P||(P=!0,N(),!f&&(o!==null?(O||(m=2),clearTimeout(o),w(0)):O||(m=1)))}return w(0),l=setTimeout(()=>{d=!0,_(!0)},r),_}function s4(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(s){return s!==void 0}function Ux(s,t,r,i){if(i<t)throw Lx(`Invalid value for '${s}'. Expected ${t} or greater.`);if(i>r)throw Lx(`Invalid value for '${s}'. Expected ${r} or less.`)}function n4(s){const t=encodeURIComponent;let r="?";for(const i in s)if(s.hasOwnProperty(i)){const o=t(i)+"="+t(s[i]);r=r+o+"&"}return r=r.slice(0,-1),r}var du;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(du||(du={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(s,t){const r=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,l=t.indexOf(s)!==-1;return r||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(t,r,i,o,l,d,m,p,f,b,w,N=!0,R=!1){this.url_=t,this.method_=r,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=p,this.timeout_=f,this.progressCallback_=b,this.connectionFactory_=w,this.retry=N,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,_)=>{this.resolve_=P,this.reject_=_,this.start_()})}start_(){const t=(i,o)=>{if(o){i(!1,new Fd(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const d=m=>{const p=m.loaded,f=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,f)};this.progressCallback_!==null&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const m=l.getErrorCode()===du.NO_ERROR,p=l.getStatus();if(!m||i4(p,this.additionalRetryCodes_)&&this.retry){const b=l.getErrorCode()===du.ABORT;i(!1,new Fd(!1,null,b));return}const f=this.successCodes_.indexOf(p)!==-1;i(!0,new Fd(f,l))})},r=(i,o)=>{const l=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());r4(p)?l(p):l()}catch(p){d(p)}else if(m!==null){const p=K_();p.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,p)):d(p)}else if(o.canceled){const p=this.appDelete_?Jb():Z_();d(p)}else{const p=J_();d(p)}};this.canceled_?r(!1,new Fd(!1,null,!0)):this.backoffId_=t4(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&s4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Fd{constructor(t,r,i){this.wasSuccessCode=t,this.connection=r,this.canceled=!!i}}function o4(s,t){t!==null&&t.length>0&&(s.Authorization="Firebase "+t)}function l4(s,t){s["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function c4(s,t){t&&(s["X-Firebase-GMPID"]=t)}function d4(s,t){t!==null&&(s["X-Firebase-AppCheck"]=t)}function u4(s,t,r,i,o,l,d=!0,m=!1){const p=n4(s.urlParams),f=s.url+p,b=Object.assign({},s.headers);return c4(b,t),o4(b,r),l4(b,l),d4(b,i),new a4(f,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(s){if(s.length===0)return null;const t=s.lastIndexOf("/");return t===-1?"":s.slice(0,t)}function m4(s){const t=s.lastIndexOf("/",s.length-2);return t===-1?s:s.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(t,r){this._service=t,r instanceof pn?this._location=r:this._location=pn.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new uu(t,r)}get root(){const t=new pn(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return m4(this._location.path)}get storage(){return this._service}get parent(){const t=h4(this._location.path);if(t===null)return null;const r=new pn(this._location.bucket,t);return new uu(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw Q_(t)}}function $x(s,t){const r=t==null?void 0:t[H_];return r==null?null:pn.makeFromBucketSpec(r,s)}function p4(s,t,r,i={}){s.host=`${t}:${r}`;const o=ro(t);o&&(Pu(`https://${s.host}/b`),Eu("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:l}=i;l&&(s._overrideAuthToken=typeof l=="string"?l:Rb(l,s.app.options.projectId))}class f4{constructor(t,r,i,o,l,d=!1){this.app=t,this._authProvider=r,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=d,this._bucket=null,this._host=Kb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=q_,this._maxUploadRetryTime=G_,this._requests=new Set,o!=null?this._bucket=pn.makeFromBucketSpec(o,this._host):this._bucket=$x(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=pn.makeFromBucketSpec(this._url,t):this._bucket=$x(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Ux("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Ux("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new uu(this,t)}_makeRequest(t,r,i,o,l=!0){if(this._deleted)return new e4(Jb());{const d=u4(t,this._appId,i,o,r,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(t,r){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,i,o).getPromise()}}const Fx="@firebase/storage",Bx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="storage";function g4(s=hl(),t){s=pr(s);const i=Vn(s,Zb).getImmediate({identifier:t}),o=Dp("storage");return o&&x4(i,...o),i}function x4(s,t,r,i={}){p4(s,t,r,i)}function y4(s,{instanceIdentifier:t}){const r=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new f4(r,i,o,t,no)}function b4(){Cr(new mr(Zb,y4,"PUBLIC").setMultipleInstances(!0)),Vs(Fx,Bx,""),Vs(Fx,Bx,"esm2020")}b4();function Yb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v4=Yb,Xb=new ma("auth","Firebase",Yb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=new Au("@firebase/auth");function w4(s,...t){hu.logLevel<=Ht.WARN&&hu.warn(`Auth (${no}): ${s}`,...t)}function Jd(s,...t){hu.logLevel<=Ht.ERROR&&hu.error(`Auth (${no}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(s,...t){throw Wp(s,...t)}function Mn(s,...t){return Wp(s,...t)}function Qb(s,t,r){const i={...v4(),[t]:r};return new ma("auth","Firebase",i).create(t,{appName:s.name})}function qa(s){return Qb(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wp(s,...t){if(typeof s!="string"){const r=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(r,...i)}return Xb.create(s,...t)}function gt(s,t,...r){if(!s)throw Wp(t,...r)}function mi(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Jd(t),new Error(t)}function bi(s,t){s||mi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function j4(){return Vx()==="http:"||Vx()==="https:"}function Vx(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j4()||Ib()||"connection"in navigator)?navigator.onLine:!0}function S4(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(t,r){this.shortDelay=t,this.longDelay=r,bi(r>t,"Short delay should be less than long delay!"),this.isMobile=VS()||HS()}get(){return N4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(s,t){bi(s.emulator,"Emulator should always be set here");const{url:r}=s.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{static initialize(t,r,i){this.fetchImpl=t,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],C4=new Ac(3e4,6e4);function qp(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function ml(s,t,r,i,o={}){return tv(s,o,async()=>{let l={},d={};i&&(t==="GET"?d=i:l={body:JSON.stringify(i)});const m=Cc({key:s.config.apiKey,...d}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const f={method:t,headers:p,...l};return WS()||(f.referrerPolicy="no-referrer"),s.emulatorConfig&&ro(s.emulatorConfig.host)&&(f.credentials="include"),ev.fetch()(await sv(s,s.config.apiHost,r,m),f)})}async function tv(s,t,r){s._canInitEmulator=!1;const i={...k4,...t};try{const o=new E4(s),l=await Promise.race([r(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Bd(s,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const m=l.ok?d.errorMessage:d.error.message,[p,f]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bd(s,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Bd(s,"email-already-in-use",d);if(p==="USER_DISABLED")throw Bd(s,"user-disabled",d);const b=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Qb(s,b,f);yi(s,b)}}catch(o){if(o instanceof Qr)throw o;yi(s,"network-request-failed",{message:String(o)})}}async function P4(s,t,r,i,o={}){const l=await ml(s,t,r,i,o);return"mfaPendingCredential"in l&&yi(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function sv(s,t,r,i){const o=`${t}${r}?${i}`,l=s,d=l.config.emulator?Hp(s.config,o):`${s.config.apiScheme}://${o}`;return _4.includes(r)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}class E4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(Mn(this.auth,"network-request-failed")),C4.get())})}}function Bd(s,t,r){const i={appName:s.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const o=Mn(s,t,i);return o.customData._tokenResponse=r,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(s,t){return ml(s,"POST","/v1/accounts:delete",t)}async function mu(s,t){return ml(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function T4(s,t=!1){const r=pr(s),i=await r.getIdToken(t),o=Gp(i);gt(o&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:ec(Am(o.auth_time)),issuedAtTime:ec(Am(o.iat)),expirationTime:ec(Am(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Am(s){return Number(s)*1e3}function Gp(s){const[t,r,i]=s.split(".");if(t===void 0||r===void 0||i===void 0)return Jd("JWT malformed, contained fewer than 3 sections"),null;try{const o=Pb(r);return o?JSON.parse(o):(Jd("Failed to decode base64 JWT payload"),null)}catch(o){return Jd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Wx(s){const t=Gp(s);return gt(t,"internal-error"),gt(typeof t.exp<"u","internal-error"),gt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(s,t,r=!1){if(r)return t;try{return await t}catch(i){throw i instanceof Qr&&R4(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function R4({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(s){var w;const t=s.auth,r=await s.getIdToken(),i=await pc(s,mu(t,{idToken:r}));gt(i==null?void 0:i.users.length,t,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const l=(w=o.providerUserInfo)!=null&&w.length?rv(o.providerUserInfo):[],d=D4(s.providerData,l),m=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!(d!=null&&d.length),f=m?p:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new hp(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(s,b)}async function O4(s){const t=pr(s);await pu(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function D4(s,t){return[...s.filter(i=>!t.some(o=>o.providerId===i.providerId)),...t]}function rv(s){return s.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4(s,t){const r=await tv(s,{},async()=>{const i=Cc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:l}=s.config,d=await sv(s,o,"/v1/token",`key=${l}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:i};return s.emulatorConfig&&ro(s.emulatorConfig.host)&&(p.credentials="include"),ev.fetch()(d,p)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function M4(s,t){return ml(s,"POST","/v2/accounts:revokeToken",qp(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){gt(t.idToken,"internal-error"),gt(typeof t.idToken<"u","internal-error"),gt(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Wx(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){gt(t.length!==0,"internal-error");const r=Wx(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:i,refreshToken:o,expiresIn:l}=await z4(t,r);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(t,r,i){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,r){const{refreshToken:i,accessToken:o,expirationTime:l}=r,d=new Qo;return i&&(gt(typeof i=="string","internal-error",{appName:t}),d.refreshToken=i),o&&(gt(typeof o=="string","internal-error",{appName:t}),d.accessToken=o),l&&(gt(typeof l=="number","internal-error",{appName:t}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Qo,this.toJSON())}_performRefresh(){return mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(s,t){gt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class fn{constructor({uid:t,auth:r,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new I4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new hp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const r=await pc(this,this.stsTokenManager.getToken(this.auth,t));return gt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return T4(this,t)}reload(){return O4(this)}_assign(t){this!==t&&(gt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new fn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),r&&await pu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xr(this.auth.app))return Promise.reject(qa(this.auth));const t=await this.getIdToken();return await pc(this,A4(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const i=r.displayName??void 0,o=r.email??void 0,l=r.phoneNumber??void 0,d=r.photoURL??void 0,m=r.tenantId??void 0,p=r._redirectEventId??void 0,f=r.createdAt??void 0,b=r.lastLoginAt??void 0,{uid:w,emailVerified:N,isAnonymous:R,providerData:P,stsTokenManager:_}=r;gt(w&&_,t,"internal-error");const O=Qo.fromJSON(this.name,_);gt(typeof w=="string",t,"internal-error"),Hi(i,t.name),Hi(o,t.name),gt(typeof N=="boolean",t,"internal-error"),gt(typeof R=="boolean",t,"internal-error"),Hi(l,t.name),Hi(d,t.name),Hi(m,t.name),Hi(p,t.name),Hi(f,t.name),Hi(b,t.name);const L=new fn({uid:w,auth:t,email:o,emailVerified:N,displayName:i,isAnonymous:R,photoURL:d,phoneNumber:l,tenantId:m,stsTokenManager:O,createdAt:f,lastLoginAt:b});return P&&Array.isArray(P)&&(L.providerData=P.map($=>({...$}))),p&&(L._redirectEventId=p),L}static async _fromIdTokenResponse(t,r,i=!1){const o=new Qo;o.updateFromServerResponse(r);const l=new fn({uid:r.localId,auth:t,stsTokenManager:o,isAnonymous:i});return await pu(l),l}static async _fromGetAccountInfoResponse(t,r,i){const o=r.users[0];gt(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?rv(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),m=new Qo;m.updateFromIdToken(i);const p=new fn({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:d}),f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new hp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,f),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=new Map;function pi(s){bi(s instanceof Function,"Expected a class definition");let t=Hx.get(s);return t?(bi(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,Hx.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}nv.type="NONE";const qx=nv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(s,t,r){return`firebase:${s}:${t}:${r}`}class el{constructor(t,r,i){this.persistence=t,this.auth=r,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Zd(this.userKey,o.apiKey,l),this.fullPersistenceKey=Zd("persistence",o.apiKey,l),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await mu(this.auth,{idToken:t}).catch(()=>{});return r?fn._fromGetAccountInfoResponse(this.auth,r,t):null}return fn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,i="authUser"){if(!r.length)return new el(pi(qx),t,i);const o=(await Promise.all(r.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=o[0]||pi(qx);const d=Zd(i,t.config.apiKey,t.name);let m=null;for(const f of r)try{const b=await f._get(d);if(b){let w;if(typeof b=="string"){const N=await mu(t,{idToken:b}).catch(()=>{});if(!N)break;w=await fn._fromGetAccountInfoResponse(t,N,b)}else w=fn._fromJSON(t,b);f!==l&&(m=w),l=f;break}}catch{}const p=o.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new el(l,t,i):(l=p[0],m&&await l._set(d,m.toJSON()),await Promise.all(r.map(async f=>{if(f!==l)try{await f._remove(d)}catch{}})),new el(l,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(iv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dv(t))return"Blackberry";if(uv(t))return"Webos";if(av(t))return"Safari";if((t.includes("chrome/")||ov(t))&&!t.includes("edge/"))return"Chrome";if(cv(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function iv(s=hr()){return/firefox\//i.test(s)}function av(s=hr()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ov(s=hr()){return/crios\//i.test(s)}function lv(s=hr()){return/iemobile/i.test(s)}function cv(s=hr()){return/android/i.test(s)}function dv(s=hr()){return/blackberry/i.test(s)}function uv(s=hr()){return/webos/i.test(s)}function Kp(s=hr()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function L4(s=hr()){var t;return Kp(s)&&!!((t=window.navigator)!=null&&t.standalone)}function U4(){return qS()&&document.documentMode===10}function hv(s=hr()){return Kp(s)||cv(s)||uv(s)||dv(s)||/windows phone/i.test(s)||lv(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(s,t=[]){let r;switch(s){case"Browser":r=Gx(hr());break;case"Worker":r=`${Gx(hr())}-${s}`;break;default:r=s}const i=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${no}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const i=l=>new Promise((d,m)=>{try{const p=t(l);d(p)}catch(p){m(p)}});i.onAbort=r,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const i of this.queue)await i(t),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4(s,t={}){return ml(s,"GET","/v2/passwordPolicy",qp(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=6;class V4{constructor(t){var i;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??B4,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=t.length>=i),o&&(r.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let o=0;o<t.length;o++)i=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,r,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(t,r,i,o){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kx(this),this.idTokenSubscription=new Kx(this),this.beforeStateQueue=new $4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=pi(r)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await el.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await mu(this,{idToken:t}),i=await fn._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var l;if(Xr(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(t);(!d||d===m)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await pu(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=S4()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Xr(this.app))return Promise.reject(qa(this));const r=t?pr(t):null;return r&&gt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&gt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Xr(this.app)?Promise.reject(qa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Xr(this.app)?Promise.reject(qa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await F4(this),r=new V4(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ma("auth","Firebase",t())}onAuthStateChanged(t,r,i){return this.registerStateListener(this.authStateSubscription,t,r,i)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,i){return this.registerStateListener(this.idTokenSubscription,t,r,i)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await M4(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const i=await this.getOrInitRedirectPersistenceManager(r);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&pi(t)||this._popupRedirectResolver;gt(r,this,"argument-error"),this.redirectPersistenceManager=await el.create(this,[pi(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,i,o){if(this._deleted)return()=>{};const l=typeof r=="function"?r:r.next.bind(r);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(m,this,"internal-error"),m.then(()=>{d||l(this.currentUser)}),typeof r=="function"){const p=t.addObserver(r,i,o);return()=>{d=!0,p()}}else{const p=t.addObserver(r);return()=>{d=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=mv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var r;if(Xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&w4(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Jp(s){return pr(s)}class Kx{constructor(t){this.auth=t,this.observer=null,this.addObserver=YS(r=>this.observer=r)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H4(s){Zp=s}function q4(s){return Zp.loadJS(s)}function G4(){return Zp.gapiScript}function K4(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(s,t){const r=Vn(s,"auth");if(r.isInitialized()){const o=r.getImmediate(),l=r.getOptions();if(la(l,t??{}))return o;yi(o,"already-initialized")}return r.initialize({options:t})}function Z4(s,t){const r=(t==null?void 0:t.persistence)||[],i=(Array.isArray(r)?r:[r]).map(pi);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function Y4(s,t,r){const i=Jp(s);gt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const o=!1,l=pv(t),{host:d,port:m}=X4(t),p=m===null?"":`:${m}`,f={url:`${l}//${d}${p}/`},b=Object.freeze({host:d,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){gt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),gt(la(f,i.config.emulator)&&la(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,ro(d)?(Pu(`${l}//${d}${p}`),Eu("Auth",!0)):Q4()}function pv(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function X4(s){const t=pv(s),r=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Jx(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:Jx(d)}}}function Jx(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function Q4(){function s(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return mi("not implemented")}_getIdTokenResponse(t){return mi("not implemented")}_linkToIdToken(t,r){return mi("not implemented")}_getReauthenticationResolver(t){return mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(s,t){return P4(s,"POST","/v1/accounts:signInWithIdp",qp(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="http://localhost";class Ja extends fv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Ja(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):yi("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:o,...l}=r;if(!i||!o)return null;const d=new Ja(i,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(t){const r=this.buildRequest();return tl(t,r)}_linkToIdToken(t,r){const i=this.buildRequest();return i.idToken=r,tl(t,i)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,tl(t,r)}buildRequest(){const t={requestUri:eC,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=Cc(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends gv{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Tc{constructor(){super("facebook.com")}static credential(t){return Ja._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ji.credentialFromTaggedObject(t)}static credentialFromError(t){return Ji.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ji.credential(t.oauthAccessToken)}catch{return null}}}Ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Tc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Ja._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return Zi.credentialFromTaggedObject(t)}static credentialFromError(t){return Zi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return Zi.credential(r,i)}catch{return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com";Zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Tc{constructor(){super("github.com")}static credential(t){return Ja._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Yi.credentialFromTaggedObject(t)}static credentialFromError(t){return Yi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Yi.credential(t.oauthAccessToken)}catch{return null}}}Yi.GITHUB_SIGN_IN_METHOD="github.com";Yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Tc{constructor(){super("twitter.com")}static credential(t,r){return Ja._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return Xi.credentialFromTaggedObject(t)}static credentialFromError(t){return Xi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=t;if(!r||!i)return null;try{return Xi.credential(r,i)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,i,o=!1){const l=await fn._fromIdTokenResponse(t,i,o),d=Zx(i);return new nl({user:l,providerId:d,_tokenResponse:i,operationType:r})}static async _forOperation(t,r,i){await t._updateTokensIfNecessary(i,!0);const o=Zx(i);return new nl({user:t,providerId:o,_tokenResponse:i,operationType:r})}}function Zx(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends Qr{constructor(t,r,i,o){super(r.code,r.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,fu.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,r,i,o){return new fu(t,r,i,o)}}function xv(s,t,r,i){return(t==="reauthenticate"?r._getReauthenticationResolver(s):r._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?fu._fromErrorAndOperation(s,l,t,i):l})}async function tC(s,t,r=!1){const i=await pc(s,t._linkToIdToken(s.auth,await s.getIdToken()),r);return nl._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(s,t,r=!1){const{auth:i}=s;if(Xr(i.app))return Promise.reject(qa(i));const o="reauthenticate";try{const l=await pc(s,xv(i,o,t,s),r);gt(l.idToken,i,"internal-error");const d=Gp(l.idToken);gt(d,i,"internal-error");const{sub:m}=d;return gt(s.uid===m,i,"user-mismatch"),nl._forOperation(s,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&yi(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(s,t,r=!1){if(Xr(s.app))return Promise.reject(qa(s));const i="signIn",o=await xv(s,i,t),l=await nl._fromIdTokenResponse(s,i,o);return r||await s._updateCurrentUser(l.user),l}function nC(s,t,r,i){return pr(s).onIdTokenChanged(t,r,i)}function iC(s,t,r){return pr(s).beforeAuthStateChanged(t,r)}const gu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(gu,"1"),this.storage.removeItem(gu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=1e3,oC=10;class bv extends yv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const i=t.key;r?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!r&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);U4()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,oC):o()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},aC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}bv.type="LOCAL";const lC=bv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv extends yv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}vv.type="SESSION";const wv=vv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;const i=new Ru(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:i,eventType:o,data:l}=r.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(d).map(async f=>f(r.origin,l)),p=await cC(m);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ru.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(s="",t=10){let r="";for(let i=0;i<t;i++)r+=Math.floor(Math.random()*10);return s+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((m,p)=>{const f=Yp("",20);o.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(w){const N=w;if(N.data.eventId===f)switch(N.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(N.data.response);break;default:clearTimeout(b),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:f,data:r},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function uC(s){Ln().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function hC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mC(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function pC(){return jv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="firebaseLocalStorageDb",fC=1,xu="firebaseLocalStorage",Sv="fbase_key";class Rc{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Iu(s,t){return s.transaction([xu],t?"readwrite":"readonly").objectStore(xu)}function gC(){const s=indexedDB.deleteDatabase(Nv);return new Rc(s).toPromise()}function mp(){const s=indexedDB.open(Nv,fC);return new Promise((t,r)=>{s.addEventListener("error",()=>{r(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(xu,{keyPath:Sv})}catch(o){r(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(xu)?t(i):(i.close(),await gC(),t(await mp()))})})}async function Yx(s,t,r){const i=Iu(s,!0).put({[Sv]:t,value:r});return new Rc(i).toPromise()}async function xC(s,t){const r=Iu(s,!1).get(t),i=await new Rc(r).toPromise();return i===void 0?null:i.value}function Xx(s,t){const r=Iu(s,!0).delete(t);return new Rc(r).toPromise()}const yC=800,bC=3;class kv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mp(),this.db)}async _withRetries(t){let r=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(r++>bC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ru._getInstance(pC()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,i;if(this.activeServiceWorker=await hC(),!this.activeServiceWorker)return;this.sender=new dC(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||mC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await mp();return await Yx(t,gu,"1"),await Xx(t,gu),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>Yx(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(i=>xC(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Xx(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const l=Iu(o,!1).getAll();return new Rc(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(t.length!==0)for(const{fbase_key:o,value:l}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),r.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kv.type="LOCAL";const vC=kv;new Ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(s,t){return t?pi(t):(gt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp extends fv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return tl(t,this._buildIdpRequest())}_linkToIdToken(t,r){return tl(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return tl(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function jC(s){return rC(s.auth,new Xp(s),s.bypassAuthState)}function NC(s){const{auth:t,user:r}=s;return gt(r,t,"internal-error"),sC(r,new Xp(s),s.bypassAuthState)}async function SC(s){const{auth:t,user:r}=s;return gt(r,t,"internal-error"),tC(r,new Xp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(t,r,i,o,l=!1){this.auth=t,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:i,postBody:o,tenantId:l,error:d,type:m}=t;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:r,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return jC;case"linkViaPopup":case"linkViaRedirect":return SC;case"reauthViaPopup":case"reauthViaRedirect":return NC;default:yi(this.auth,"internal-error")}}resolve(t){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new Ac(2e3,1e4);class Ko extends _v{constructor(t,r,i,o,l){super(t,r,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return gt(t,this.auth,"internal-error"),t}async onExecution(){bi(this.filter.length===1,"Popup operations only handle one event");const t=Yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;if((i=(r=this.authWindow)==null?void 0:r.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,kC.get())};t()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="pendingRedirect",Yd=new Map;class CC extends _v{constructor(t,r,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let t=Yd.get(this.auth._key());if(!t){try{const i=await PC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(r){t=()=>Promise.reject(r)}Yd.set(this.auth._key(),t)}return this.bypassAuthState||Yd.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PC(s,t){const r=TC(t),i=AC(s);if(!await i._isAvailable())return!1;const o=await i._get(r)==="true";return await i._remove(r),o}function EC(s,t){Yd.set(s._key(),t)}function AC(s){return pi(s._redirectPersistence)}function TC(s){return Zd(_C,s.config.apiKey,s.name)}async function RC(s,t,r=!1){if(Xr(s.app))return Promise.reject(qa(s));const i=Jp(s),o=wC(i,t),d=await new CC(i,o,r).execute();return d&&!r&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=600*1e3;class OC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(r=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!DC(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var i;if(t.error&&!Cv(t)){const o=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";r.onError(Mn(this.auth,o))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const i=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=IC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qx(t))}saveEventToCache(t){this.cachedEventUids.add(Qx(t)),this.lastProcessedEventTime=Date.now()}}function Qx(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function Cv({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function DC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cv(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(s,t={}){return ml(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LC=/^https?/;async function UC(s){if(s.config.emulator)return;const{authorizedDomains:t}=await zC(s);for(const r of t)try{if($C(r))return}catch{}yi(s,"unauthorized-domain")}function $C(s){const t=up(),{protocol:r,hostname:i}=new URL(t);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?r==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&d.hostname===i}if(!LC.test(r))return!1;if(MC.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new Ac(3e4,6e4);function ey(){const s=Ln().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let r=0;r<s.CP.length;r++)s.CP[r]=null}}function BC(s){return new Promise((t,r)=>{var o,l,d;function i(){ey(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ey(),r(Mn(s,"network-request-failed"))},timeout:FC.get()})}if((l=(o=Ln().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)t(gapi.iframes.getContext());else if((d=Ln().gapi)!=null&&d.load)i();else{const m=K4("iframefcb");return Ln()[m]=()=>{gapi.load?i():r(Mn(s,"network-request-failed"))},q4(`${G4()}?onload=${m}`).catch(p=>r(p))}}).catch(t=>{throw Xd=null,t})}let Xd=null;function VC(s){return Xd=Xd||BC(s),Xd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new Ac(5e3,15e3),HC="__/auth/iframe",qC="emulator/auth/iframe",GC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JC(s){const t=s.config;gt(t.authDomain,s,"auth-domain-config-required");const r=t.emulator?Hp(t,qC):`https://${s.config.authDomain}/${HC}`,i={apiKey:t.apiKey,appName:s.name,v:no},o=KC.get(s.config.apiHost);o&&(i.eid=o);const l=s._getFrameworks();return l.length&&(i.fw=l.join(",")),`${r}?${Cc(i).slice(1)}`}async function ZC(s){const t=await VC(s),r=Ln().gapi;return gt(r,s,"internal-error"),t.open({where:document.body,url:JC(s),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GC,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const d=Mn(s,"network-request-failed"),m=Ln().setTimeout(()=>{l(d)},WC.get());function p(){Ln().clearTimeout(m),o(i)}i.ping(p).then(p,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XC=500,QC=600,eP="_blank",tP="http://localhost";class ty{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sP(s,t,r,i=XC,o=QC){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const p={...YC,width:i.toString(),height:o.toString(),top:l,left:d},f=hr().toLowerCase();r&&(m=ov(f)?eP:r),iv(f)&&(t=t||tP,p.scrollbars="yes");const b=Object.entries(p).reduce((N,[R,P])=>`${N}${R}=${P},`,"");if(L4(f)&&m!=="_self")return rP(t||"",m),new ty(null);const w=window.open(t||"",m,b);gt(w,s,"popup-blocked");try{w.focus()}catch{}return new ty(w)}function rP(s,t){const r=document.createElement("a");r.href=s,r.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="__/auth/handler",iP="emulator/auth/handler",aP=encodeURIComponent("fac");async function sy(s,t,r,i,o,l){gt(s.config.authDomain,s,"auth-domain-config-required"),gt(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:r,redirectUrl:i,v:no,eventId:o};if(t instanceof gv){t.setDefaultLanguage(s.languageCode),d.providerId=t.providerId||"",ZS(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,w]of Object.entries({}))d[b]=w}if(t instanceof Tc){const b=t.getScopes().filter(w=>w!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const m=d;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const p=await s._getAppCheckToken(),f=p?`#${aP}=${encodeURIComponent(p)}`:"";return`${oP(s)}?${Cc(m).slice(1)}${f}`}function oP({config:s}){return s.emulator?Hp(s,iP):`https://${s.authDomain}/${nP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="webStorageSupport";class lP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wv,this._completeRedirectFn=RC,this._overrideRedirectResult=EC}async _openPopup(t,r,i,o){var d;bi((d=this.eventManagers[t._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const l=await sy(t,r,i,up(),o);return sP(t,l,Yp())}async _openRedirect(t,r,i,o){await this._originValidation(t);const l=await sy(t,r,i,up(),o);return uC(l),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:o,promise:l}=this.eventManagers[r];return o?Promise.resolve(o):(bi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(t){const r=await ZC(t),i=new OC(t);return r.register("authEvent",o=>(gt(o==null?void 0:o.authEvent,t,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=r,i}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(Tm,{type:Tm},o=>{var d;const l=(d=o==null?void 0:o[0])==null?void 0:d[Tm];l!==void 0&&r(!!l),yi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=UC(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return hv()||av()||Kp()}}const cP=lP;var ry="@firebase/auth",ny="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hP(s){Cr(new mr("auth",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=i.options;gt(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:d,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mv(s)},f=new W4(i,o,l,p);return Z4(f,r),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,i)=>{t.getProvider("auth-internal").initialize()})),Cr(new mr("auth-internal",t=>{const r=Jp(t.getProvider("auth").getImmediate());return(i=>new dP(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vs(ry,ny,uP(s)),Vs(ry,ny,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=300,pP=Tb("authIdTokenMaxAge")||mP;let iy=null;const fP=s=>async t=>{const r=t&&await t.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>pP)return;const o=r==null?void 0:r.token;iy!==o&&(iy=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function gP(s=hl()){const t=Vn(s,"auth");if(t.isInitialized())return t.getImmediate();const r=J4(s,{popupRedirectResolver:cP,persistence:[vC,lC,wv]}),i=Tb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=fP(l.toString());iC(r,d,()=>d(r.currentUser)),nC(r,m=>d(m))}}const o=Eb("auth");return o&&Y4(r,`http://${o}`),r}function xP(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}H4({loadJS(s){return new Promise((t,r)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=t,i.onerror=o=>{const l=Mn("internal-error");l.customData=o,r(l)},i.type="text/javascript",i.charset="UTF-8",xP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hP("Browser");const Pv="@firebase/installations",Qp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=1e4,Av=`w:${Qp}`,Tv="FIS_v2",yP="https://firebaseinstallations.googleapis.com/v1",bP=3600*1e3,vP="installations",wP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Za=new ma(vP,wP,jP);function Rv(s){return s instanceof Qr&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv({projectId:s}){return`${yP}/projects/${s}/installations`}function Ov(s){return{token:s.token,requestStatus:2,expiresIn:SP(s.expiresIn),creationTime:Date.now()}}async function Dv(s,t){const i=(await t.json()).error;return Za.create("request-failed",{requestName:s,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function zv({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function NP(s,{refreshToken:t}){const r=zv(s);return r.append("Authorization",kP(t)),r}async function Mv(s){const t=await s();return t.status>=500&&t.status<600?s():t}function SP(s){return Number(s.replace("s","000"))}function kP(s){return`${Tv} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P({appConfig:s,heartbeatServiceProvider:t},{fid:r}){const i=Iv(s),o=zv(s),l=t.getImmediate({optional:!0});if(l){const f=await l.getHeartbeatsHeader();f&&o.append("x-firebase-client",f)}const d={fid:r,authVersion:Tv,appId:s.appId,sdkVersion:Av},m={method:"POST",headers:o,body:JSON.stringify(d)},p=await Mv(()=>fetch(i,m));if(p.ok){const f=await p.json();return{fid:f.fid||r,registrationStatus:2,refreshToken:f.refreshToken,authToken:Ov(f.authToken)}}else throw await Dv("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=/^[cdef][\w-]{21}$/,pp="";function EP(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const r=AP(s);return PP.test(r)?r:pp}catch{return pp}}function AP(s){return CP(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=new Map;function $v(s,t){const r=Ou(s);Fv(r,t),TP(r,t)}function Fv(s,t){const r=Uv.get(s);if(r)for(const i of r)i(t)}function TP(s,t){const r=RP();r&&r.postMessage({key:s,fid:t}),IP()}let Ba=null;function RP(){return!Ba&&"BroadcastChannel"in self&&(Ba=new BroadcastChannel("[Firebase] FID Change"),Ba.onmessage=s=>{Fv(s.data.key,s.data.fid)}),Ba}function IP(){Uv.size===0&&Ba&&(Ba.close(),Ba=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="firebase-installations-database",DP=1,Ya="firebase-installations-store";let Rm=null;function ef(){return Rm||(Rm=Tu(OP,DP,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(Ya)}}})),Rm}async function yu(s,t){const r=Ou(s),o=(await ef()).transaction(Ya,"readwrite"),l=o.objectStore(Ya),d=await l.get(r);return await l.put(t,r),await o.done,(!d||d.fid!==t.fid)&&$v(s,t.fid),t}async function Bv(s){const t=Ou(s),i=(await ef()).transaction(Ya,"readwrite");await i.objectStore(Ya).delete(t),await i.done}async function Du(s,t){const r=Ou(s),o=(await ef()).transaction(Ya,"readwrite"),l=o.objectStore(Ya),d=await l.get(r),m=t(d);return m===void 0?await l.delete(r):await l.put(m,r),await o.done,m&&(!d||d.fid!==m.fid)&&$v(s,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tf(s){let t;const r=await Du(s.appConfig,i=>{const o=zP(i),l=MP(s,o);return t=l.registrationPromise,l.installationEntry});return r.fid===pp?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}function zP(s){const t=s||{fid:EP(),registrationStatus:0};return Vv(t)}function MP(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Za.create("app-offline"));return{installationEntry:t,registrationPromise:o}}const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=LP(s,r);return{installationEntry:r,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:UP(s)}:{installationEntry:t}}async function LP(s,t){try{const r=await _P(s,t);return yu(s.appConfig,r)}catch(r){throw Rv(r)&&r.customData.serverCode===409?await Bv(s.appConfig):await yu(s.appConfig,{fid:t.fid,registrationStatus:0}),r}}async function UP(s){let t=await ay(s.appConfig);for(;t.registrationStatus===1;)await Lv(100),t=await ay(s.appConfig);if(t.registrationStatus===0){const{installationEntry:r,registrationPromise:i}=await tf(s);return i||r}return t}function ay(s){return Du(s,t=>{if(!t)throw Za.create("installation-not-found");return Vv(t)})}function Vv(s){return $P(s)?{fid:s.fid,registrationStatus:0}:s}function $P(s){return s.registrationStatus===1&&s.registrationTime+Ev<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP({appConfig:s,heartbeatServiceProvider:t},r){const i=BP(s,r),o=NP(s,r),l=t.getImmediate({optional:!0});if(l){const f=await l.getHeartbeatsHeader();f&&o.append("x-firebase-client",f)}const d={installation:{sdkVersion:Av,appId:s.appId}},m={method:"POST",headers:o,body:JSON.stringify(d)},p=await Mv(()=>fetch(i,m));if(p.ok){const f=await p.json();return Ov(f)}else throw await Dv("Generate Auth Token",p)}function BP(s,{fid:t}){return`${Iv(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sf(s,t=!1){let r;const i=await Du(s.appConfig,l=>{if(!Wv(l))throw Za.create("not-registered");const d=l.authToken;if(!t&&HP(d))return l;if(d.requestStatus===1)return r=VP(s,t),l;{if(!navigator.onLine)throw Za.create("app-offline");const m=GP(l);return r=WP(s,m),m}});return r?await r:i.authToken}async function VP(s,t){let r=await oy(s.appConfig);for(;r.authToken.requestStatus===1;)await Lv(100),r=await oy(s.appConfig);const i=r.authToken;return i.requestStatus===0?sf(s,t):i}function oy(s){return Du(s,t=>{if(!Wv(t))throw Za.create("not-registered");const r=t.authToken;return KP(r)?{...t,authToken:{requestStatus:0}}:t})}async function WP(s,t){try{const r=await FP(s,t),i={...t,authToken:r};return await yu(s.appConfig,i),r}catch(r){if(Rv(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await Bv(s.appConfig);else{const i={...t,authToken:{requestStatus:0}};await yu(s.appConfig,i)}throw r}}function Wv(s){return s!==void 0&&s.registrationStatus===2}function HP(s){return s.requestStatus===2&&!qP(s)}function qP(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+bP}function GP(s){const t={requestStatus:1,requestTime:Date.now()};return{...s,authToken:t}}function KP(s){return s.requestStatus===1&&s.requestTime+Ev<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JP(s){const t=s,{installationEntry:r,registrationPromise:i}=await tf(t);return i?i.catch(console.error):sf(t).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(s,t=!1){const r=s;return await YP(r),(await sf(r,t)).token}async function YP(s){const{registrationPromise:t}=await tf(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(s){if(!s||!s.options)throw Im("App Configuration");if(!s.name)throw Im("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!s.options[r])throw Im(r);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Im(s){return Za.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="installations",QP="installations-internal",eE=s=>{const t=s.getProvider("app").getImmediate(),r=XP(t),i=Vn(t,"heartbeat");return{app:t,appConfig:r,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},tE=s=>{const t=s.getProvider("app").getImmediate(),r=Vn(t,Hv).getImmediate();return{getId:()=>JP(r),getToken:o=>ZP(r,o)}};function sE(){Cr(new mr(Hv,eE,"PUBLIC")),Cr(new mr(QP,tE,"PRIVATE"))}sE();Vs(Pv,Qp);Vs(Pv,Qp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="/firebase-messaging-sw.js",nE="/firebase-cloud-messaging-push-scope",qv="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",iE="https://fcmregistrations.googleapis.com/v1",Gv="google.c.a.c_id",aE="google.c.a.c_l",oE="google.c.a.ts",lE="google.c.a.e",ly=1e4;var cy;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(cy||(cy={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var fc;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(fc||(fc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(s){const t=new Uint8Array(s);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cE(s){const t="=".repeat((4-s.length%4)%4),r=(s+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(r),o=new Uint8Array(i.length);for(let l=0;l<i.length;++l)o[l]=i.charCodeAt(l);return o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="fcm_token_details_db",dE=5,dy="fcm_token_object_Store";async function uE(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(l=>l.name).includes(Om))return null;let t=null;return(await Tu(Om,dE,{upgrade:async(i,o,l,d)=>{if(o<2||!i.objectStoreNames.contains(dy))return;const m=d.objectStore(dy),p=await m.index("fcmSenderId").get(s);if(await m.clear(),!!p){if(o===2){const f=p;if(!f.auth||!f.p256dh||!f.endpoint)return;t={token:f.fcmToken,createTime:f.createTime??Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:ui(f.vapidKey)}}}else if(o===3){const f=p;t={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:ui(f.auth),p256dh:ui(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:ui(f.vapidKey)}}}else if(o===4){const f=p;t={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:ui(f.auth),p256dh:ui(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:ui(f.vapidKey)}}}}}})).close(),await Sm(Om),await Sm("fcm_vapid_details_db"),await Sm("undefined"),hE(t)?t:null}function hE(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:t}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="firebase-messaging-database",pE=1,gc="firebase-messaging-store";let Dm=null;function Kv(){return Dm||(Dm=Tu(mE,pE,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(gc)}}})),Dm}async function fE(s){const t=Jv(s),i=await(await Kv()).transaction(gc).objectStore(gc).get(t);if(i)return i;{const o=await uE(s.appConfig.senderId);if(o)return await rf(s,o),o}}async function rf(s,t){const r=Jv(s),o=(await Kv()).transaction(gc,"readwrite");return await o.objectStore(gc).put(t,r),await o.done,t}function Jv({appConfig:s}){return s.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},sr=new ma("messaging","Messaging",gE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(s,t){const r=await af(s),i=Zv(t),o={method:"POST",headers:r,body:JSON.stringify(i)};let l;try{l=await(await fetch(nf(s.appConfig),o)).json()}catch(d){throw sr.create("token-subscribe-failed",{errorInfo:d==null?void 0:d.toString()})}if(l.error){const d=l.error.message;throw sr.create("token-subscribe-failed",{errorInfo:d})}if(!l.token)throw sr.create("token-subscribe-no-token");return l.token}async function yE(s,t){const r=await af(s),i=Zv(t.subscriptionOptions),o={method:"PATCH",headers:r,body:JSON.stringify(i)};let l;try{l=await(await fetch(`${nf(s.appConfig)}/${t.token}`,o)).json()}catch(d){throw sr.create("token-update-failed",{errorInfo:d==null?void 0:d.toString()})}if(l.error){const d=l.error.message;throw sr.create("token-update-failed",{errorInfo:d})}if(!l.token)throw sr.create("token-update-no-token");return l.token}async function bE(s,t){const i={method:"DELETE",headers:await af(s)};try{const l=await(await fetch(`${nf(s.appConfig)}/${t}`,i)).json();if(l.error){const d=l.error.message;throw sr.create("token-unsubscribe-failed",{errorInfo:d})}}catch(o){throw sr.create("token-unsubscribe-failed",{errorInfo:o==null?void 0:o.toString()})}}function nf({projectId:s}){return`${iE}/projects/${s}/registrations`}async function af({appConfig:s,installations:t}){const r=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function Zv({p256dh:s,auth:t,endpoint:r,vapidKey:i}){const o={web:{endpoint:r,auth:t,p256dh:s}};return i!==qv&&(o.web.applicationPubKey=i),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=10080*60*1e3;async function wE(s){const t=await NE(s.swRegistration,s.vapidKey),r={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:t.endpoint,auth:ui(t.getKey("auth")),p256dh:ui(t.getKey("p256dh"))},i=await fE(s.firebaseDependencies);if(i){if(SE(i.subscriptionOptions,r))return Date.now()>=i.createTime+vE?jE(s,{token:i.token,createTime:Date.now(),subscriptionOptions:r}):i.token;try{await bE(s.firebaseDependencies,i.token)}catch(o){console.warn(o)}return uy(s.firebaseDependencies,r)}else return uy(s.firebaseDependencies,r)}async function jE(s,t){try{const r=await yE(s.firebaseDependencies,t),i={...t,token:r,createTime:Date.now()};return await rf(s.firebaseDependencies,i),r}catch(r){throw r}}async function uy(s,t){const i={token:await xE(s,t),createTime:Date.now(),subscriptionOptions:t};return await rf(s,i),i.token}async function NE(s,t){const r=await s.pushManager.getSubscription();return r||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cE(t)})}function SE(s,t){const r=t.vapidKey===s.vapidKey,i=t.endpoint===s.endpoint,o=t.auth===s.auth,l=t.p256dh===s.p256dh;return r&&i&&o&&l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(s){const t={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return kE(t,s),_E(t,s),CE(t,s),t}function kE(s,t){if(!t.notification)return;s.notification={};const r=t.notification.title;r&&(s.notification.title=r);const i=t.notification.body;i&&(s.notification.body=i);const o=t.notification.image;o&&(s.notification.image=o);const l=t.notification.icon;l&&(s.notification.icon=l)}function _E(s,t){t.data&&(s.data=t.data)}function CE(s,t){var o,l,d,m;if(!t.fcmOptions&&!((o=t.notification)!=null&&o.click_action))return;s.fcmOptions={};const r=((l=t.fcmOptions)==null?void 0:l.link)??((d=t.notification)==null?void 0:d.click_action);r&&(s.fcmOptions.link=r);const i=(m=t.fcmOptions)==null?void 0:m.analytics_label;i&&(s.fcmOptions.analyticsLabel=i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(s){return typeof s=="object"&&!!s&&Gv in s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(s){if(!s||!s.options)throw zm("App Configuration Object");if(!s.name)throw zm("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:r}=s;for(const i of t)if(!r[i])throw zm(i);return{appName:s.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}function zm(s){return sr.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(t,r,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=EE(t);this.firebaseDependencies={app:t,appConfig:o,installations:r,analyticsProvider:i}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TE(s){try{s.swRegistration=await navigator.serviceWorker.register(rE,{scope:nE}),s.swRegistration.update().catch(()=>{}),await RE(s.swRegistration)}catch(t){throw sr.create("failed-service-worker-registration",{browserErrorMessage:t==null?void 0:t.message})}}async function RE(s){return new Promise((t,r)=>{const i=setTimeout(()=>r(new Error(`Service worker not registered after ${ly} ms`)),ly),o=s.installing||s.waiting;s.active?(clearTimeout(i),t()):o?o.onstatechange=l=>{var d;((d=l.target)==null?void 0:d.state)==="activated"&&(o.onstatechange=null,clearTimeout(i),t())}:(clearTimeout(i),r(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(s,t){if(!t&&!s.swRegistration&&await TE(s),!(!t&&s.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw sr.create("invalid-sw-registration");s.swRegistration=t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OE(s,t){t?s.vapidKey=t:s.vapidKey||(s.vapidKey=qv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yv(s,t){if(!navigator)throw sr.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw sr.create("permission-blocked");return await OE(s,t==null?void 0:t.vapidKey),await IE(s,t==null?void 0:t.serviceWorkerRegistration),wE(s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DE(s,t,r){const i=zE(t);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:r[Gv],message_name:r[aE],message_time:r[oE],message_device_time:Math.floor(Date.now()/1e3)})}function zE(s){switch(s){case fc.NOTIFICATION_CLICKED:return"notification_open";case fc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(s,t){const r=t.data;if(!r.isFirebaseMessaging)return;s.onMessageHandler&&r.messageType===fc.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(hy(r)):s.onMessageHandler.next(hy(r)));const i=r.data;PE(i)&&i[lE]==="1"&&await DE(s,r.messageType,i)}const my="@firebase/messaging",py="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=s=>{const t=new AE(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",r=>ME(t,r)),t},UE=s=>{const t=s.getProvider("messaging").getImmediate();return{getToken:i=>Yv(t,i)}};function $E(){Cr(new mr("messaging",LE,"PUBLIC")),Cr(new mr("messaging-internal",UE,"PRIVATE")),Vs(my,py),Vs(my,py,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FE(){try{await Mp()}catch{return!1}return typeof window<"u"&&zp()&&Ob()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(s,t){if(!navigator)throw sr.create("only-available-in-window");return s.onMessageHandler=t,()=>{s.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(s=hl()){return FE().then(t=>{if(!t)throw sr.create("unsupported-browser")},t=>{throw sr.create("indexed-db-unsupported")}),Vn(pr(s),"messaging").getImmediate()}async function WE(s,t){return s=pr(s),Yv(s,t)}function HE(s,t){return s=pr(s),BE(s,t)}$E();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(t,r,i,o){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Xr(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||r.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o==null||o.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(t);return{authToken:r,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="us-central1";class GE{constructor(t,r,i,o,l=fp,d=(...m)=>fetch(...m)){this.app=t,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new qE(t,r,i,o),this.cancelAllRequests=new Promise(m=>{this.deleteService=()=>Promise.resolve(m())});try{const m=new URL(l);this.customDomain=m.origin+(m.pathname==="/"?"":m.pathname),this.region=fp}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function KE(s,t,r){const i=ro(t);s.emulatorOrigin=`http${i?"s":""}://${t}:${r}`,i&&(Pu(s.emulatorOrigin+"/backends"),Eu("Functions",!0))}const fy="@firebase/functions",gy="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="auth-internal",ZE="app-check-internal",YE="messaging-internal";function XE(s){const t=(r,{instanceIdentifier:i})=>{const o=r.getProvider("app").getImmediate(),l=r.getProvider(JE),d=r.getProvider(YE),m=r.getProvider(ZE);return new GE(o,l,d,m,i)};Cr(new mr(Xv,t,"PUBLIC").setMultipleInstances(!0)),Vs(fy,gy,s),Vs(fy,gy,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(s=hl(),t=fp){const i=Vn(pr(s),Xv).getImmediate({identifier:t}),o=Dp("functions");return o&&eA(i,...o),i}function eA(s,t,r){KE(pr(s),t,r)}XE();const Qd={apiKey:"AIzaSyCFi4LIpQBzs9QGnn4QQdNJtCvMOi_-VF8",authDomain:"spoilme-edee0.firebaseapp.com",projectId:"spoilme-edee0",storageBucket:"spoilme-edee0.appspot.com",messagingSenderId:"744288044885",appId:"1:744288044885:web:24614b67ffe485446151dc",measurementId:"G-H9VG45QVZR"},tA=Qd.apiKey&&Qd.projectId&&Qd.projectId!=="your-app-id";let sA=null,rA=null,nA=null,eu=null,iA=null,Bo=null;if(tA)try{Bo=Mb(Qd),sA=$_(Bo,"spoilme");try{rA=g4(Bo),console.log("Firebase Storage initialized")}catch(s){console.error("Firebase Storage init failed:",s)}try{nA=gP(Bo),console.log("Firebase Auth initialized")}catch(s){console.error("Firebase Auth init failed:",s)}try{eu=VE(Bo),console.log("Firebase Messaging initialized")}catch(s){console.error("Firebase Messaging init failed:",s)}try{iA=QE(Bo),console.log("Firebase Functions initialized")}catch(s){console.error("Firebase Functions init failed:",s)}console.log("Firebase initialized successfully")}catch(s){console.error("Firebase initialization error:",s)}else console.warn("Firebase keys missing or invalid. Application running in Demo Mode (Local Storage).");const xy="spv_fcm_token";async function gp(s){var t,r,i,o,l,d,m,p;try{if(typeof window>"u")return{ok:!1,reason:"not_in_browser"};if(!(s!=null&&s.userId))return{ok:!1,reason:"missing_userId"};if(!("Notification"in window))return{ok:!1,reason:"notifications_unsupported"};if(!("serviceWorker"in navigator))return{ok:!1,reason:"sw_unsupported"};if(!eu)return{ok:!1,reason:"firebase_messaging_not_configured"};const f=((r=(t=import.meta)==null?void 0:t.env)==null?void 0:r.VITE_FIREBASE_VAPID_KEY)||((o=(i=import.meta)==null?void 0:i.env)==null?void 0:o.VITE_FCM_VAPID_KEY)||((d=(l=import.meta)==null?void 0:l.env)==null?void 0:d.VITE_VAPID_KEY)||"";if(!f)return{ok:!1,reason:"missing_vapid_key"};if(await Notification.requestPermission()!=="granted")return{ok:!1,reason:"permission_not_granted"};const w=await navigator.serviceWorker.register("/firebase-messaging-sw.js");try{const P=s.userName||"valued customer";navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"USER_DATA",name:P}):(p=(m=(await navigator.serviceWorker.ready).active)==null?void 0:m.postMessage)==null||p.call(m,{type:"USER_DATA",name:P})}catch{}const N=await WE(eu,{vapidKey:f,serviceWorkerRegistration:w});if(!N)return{ok:!1,reason:"no_token"};if(localStorage.getItem(xy)!==N){localStorage.setItem(xy,N);try{await Ve.from("public.users").update({fcm_token:N}).eq("id",s.userId)}catch(P){console.warn("Failed to update public.users.fcm_token (non-fatal):",P)}try{const P="serviceWorker"in navigator?"web":"native",_={userAgent:navigator.userAgent};await Ve.from("public.push_tokens").upsert([{user_id:s.userId,token:N,platform:P,device_info:_,is_active:!0}],{onConflict:"token",returning:"minimal"})}catch(P){console.warn("Failed to upsert push token to public.push_tokens table:",P)}}try{HE(eu,P=>{var L,$;const _=(L=P==null?void 0:P.notification)==null?void 0:L.title,O=($=P==null?void 0:P.notification)==null?void 0:$.body;_&&O&&Notification.permission==="granted"&&new Notification(_,{body:O})})}catch{}return{ok:!0,token:N}}catch(f){return console.warn("ensureFcmTokenRegistered failed:",f),{ok:!1,reason:(f==null?void 0:f.message)||String(f)}}}const Qv=async(s,t)=>{s&&await gp({userId:s,userName:t})};var aA={};const ew=v.createContext(void 0),cs=(s,t=new WeakSet)=>{if(s==null)return null;if(typeof s!="object")return s;if(t.has(s))return null;if(t.add(s),s instanceof Date)return s.toISOString();if(typeof s.toDate=="function")try{return s.toDate().toISOString()}catch{return null}if(s.path&&typeof s.path=="string"&&(s.firestore||s._key))return s.path;if(Array.isArray(s))return s.map(i=>cs(i,t));if(s.seconds!==void 0&&s.nanoseconds!==void 0&&Object.keys(s).length<=4)return new Date(s.seconds*1e3+s.nanoseconds/1e6).toISOString();const r={};for(const i in s)if(!(i.startsWith("_")||i==="auth"||i==="firestore"||i==="proactiveRefresh"||i==="providerData"||i==="isEditing"||i==="tempImage"||i==="tempTag"||i==="tempKeyword"||i==="editingReviewId"||i==="editReviewData"||i==="imageUrl"||i==="image_url")&&Object.prototype.hasOwnProperty.call(s,i)){const o=cs(s[i],t);if(o!=null){const l=i.replace(/([a-z0-9])([A-Z])/g,"$1_$2").toLowerCase();r[l]=o}}return r},yy=(s,t=!1)=>{const r={...s},i=["promo_starts_at","promo_expires_at","created_at","updated_at"],o=["is_new_arrival","is_best_seller","is_featured_ring","is_featured_bracelet","is_featured_watch","is_unique_pendant","is_featured_stud","is_featured_dangle","is_featured_jewelry_box","is_featured_perfume_holder","is_jewelry_set","is_sold_out","is_featured","is_on_sale","show_earring_options","pendant_wire_wrapped"],l=["images","tags","options","ring_stock","earring_materials","pendant_chain_lengths","chain_styles","packaging","colors","sizes","metadata","seo_keywords","reviews","ads"],d=["price","price_usd","member_price","member_price_usd","cost_price","compare_at_price","compare_at_price_usd","promo_price","promo_basic_member_price","promo_premium_member_price","promo_deluxe_member_price","stock","stock_quantity","weight","shipping_cost","sold_count","gift_value"];Object.keys(r).forEach(p=>{const f=r[p];if(f===""||f==="undefined"||f==="null"){r[p]=null;return}if(o.includes(p)){typeof f=="string"?r[p]=f==="true"||f==="1":typeof f=="number"?r[p]=f===1:r[p]=!!f;return}if(l.includes(p)&&f!==null){if(typeof f=="string")try{r[p]=JSON.parse(f)}catch{["images","tags","colors","sizes"].includes(p)?r[p]=[f]:r[p]={}}return}if(d.includes(p)&&f!==null){const b=Number(f);r[p]=isNaN(b)?0:b;return}if(i.includes(p)&&f!==null){const b=new Date(f);isNaN(b.getTime())?r[p]=null:r[p]=b.toISOString();return}}),t&&delete r.id;const m={};return r.compare_at_price&&(m.compareAtPrice=r.compare_at_price),r.member_price&&(m.memberPrice=r.member_price),r.packaging&&(m.packaging=r.packaging),r.ring_stock&&(m.ringStock=r.ring_stock),r.earring_materials&&(m.earringMaterials=r.earring_materials),r.pendant_chain_lengths&&(m.pendantChainLengths=r.pendant_chain_lengths),r.chain_styles&&(m.chainStyles=r.chain_styles),Object.keys(m).length>0&&(r.options=m),r},Vd=["id","name","slug","description","price","price_usd","stock","status","category","images","options","code"],by=s=>{if(!s)return null;const t={...s};return t.is_admin!==void 0&&(t.isAdmin=!!t.is_admin),t.isAdmin===void 0&&(t.isAdmin=!1),t.created_at&&!t.createdAt&&(t.createdAt=typeof t.created_at=="string"?t.created_at:t.created_at.toISOString?t.created_at.toISOString():String(t.created_at)),t},Mm=async s=>{const t=cs(s),r={};for(const i of Object.keys(t))/^[a-z0-9_]+$/.test(i)&&(r[i]=t[i]);try{console.debug("Attempting users upsert with payload:",r);let i={...r},o=0;for(;;){o++;const{error:l}=await Ve.from("users").upsert([i]);if(!l)break;const d=String(l.message||l);console.warn("Users upsert error:",d);const m=d.match(/Could not find the '([^']+)' column/i),p=m?m[1]:null;if(p&&i[p]!==void 0)console.warn("Detected missing column in schema cache:",p," removing and retrying upsert without it"),delete i[p];else{if(o>1){const f={id:s.id,email:s.email,name:s.name};console.warn("Attempting minimal upsert payload to avoid schema issues:",f);const{error:b}=await Ve.from("users").upsert([cs(f)]);if(b)throw b;break}throw l}}}catch(i){throw console.error("Final users upsert failure:",i),i}},oA=async s=>{try{console.log("Attempting to resend verification email to:",s);const{data:t,error:r}=await Ve.auth.resend({type:"signup",email:s});if(r)throw console.error("Supabase resend error:",r),r;return console.log("Verification email resent successfully:",t),!0}catch(t){return console.error("resendVerificationEmail failed:",t),console.error("Error details:",JSON.stringify(t,null,2)),!1}},lA=()=>{const s=["Thandiwe Zulu","Jessica Nel","Precious Khumalo","Sarah Van Der Merwe","Amahle Dlamini","Chloe Naidoo","Nicole Botha","Zanele Mthembu","Ashley Smith","Bianca Fourie"],t=new Date,r=t.getFullYear()*100+t.getMonth(),i=d=>{let m=d+=1831565813;return m=Math.imul(m^m>>>15,m|1),m^=m+Math.imul(m^m>>>7,m|61),((m^m>>>14)>>>0)/4294967296},o=s.map((d,m)=>({id:`aff_${m}`,name:d,sales:0,rank:0,change:"same"}));o[0].sales=28561.68;let l=28561.68;for(let d=1;d<o.length;d++){const p=1500+i(r+d)*3500,f=Math.floor(i(r+d+50)*99)/100;l=Math.max(1e3,l-p);const b=Math.floor(l)+f;o[d].sales=parseFloat(b.toFixed(2))}return o.forEach((d,m)=>{d.rank=m+1;const p=i(r+m+200);d.change=p>.6?"up":p<.3?"down":"same",m===0&&(d.change="same")}),o},vy=s=>{const t=new Date,r=new Date(t.getFullYear(),0,1),i=Math.ceil(((t.getTime()-r.getTime())/864e5+r.getDay()+1)/7);if(s){const l=[];for(let d=3;d>=1;d--){const m=(i-1-d+52)%52;l.push(wy[m])}return[s,...l.map((d,m)=>({rank:m+2,name:d.name,prize:d.currency==="ZAR"?500:30,currency:d.currency}))]}const o=[];for(let l=3;l>=0;l--){const d=(i-1-l+52)%52;o.push(wy[d])}return o.map((l,d)=>({rank:d+1,name:l.name,prize:l.currency==="ZAR"?500:30,currency:l.currency}))},wy=[{name:"Anja P.",location:"Pretoria, SA",currency:"ZAR"},{name:"Sarah Jenkins",location:"Texas, USA",currency:"USD"},{name:"Thandi M.",location:"Sandton, SA",currency:"ZAR"},{name:"Sophie Clarke",location:"London, UK",currency:"USD"},{name:"Johan V.",location:"Bloemfontein, SA",currency:"ZAR"},{name:"Emily R.",location:"New York, USA",currency:"USD"},{name:"Priya N.",location:"Durban, SA",currency:"ZAR"},{name:"Isabella G.",location:"Toronto, Canada",currency:"USD"},{name:"Bianca S.",location:"Cape Town, SA",currency:"ZAR"},{name:"Madison L.",location:"Chicago, USA",currency:"USD"},{name:"Lerato K.",location:"Soweto, SA",currency:"ZAR"},{name:"Charlotte B.",location:"Manchester, UK",currency:"USD"},{name:"David W.",location:"Port Elizabeth, SA",currency:"ZAR"},{name:"Jessica H.",location:"Florida, USA",currency:"USD"},{name:"Zanele T.",location:"Polokwane, SA",currency:"ZAR"},{name:"Olivia M.",location:"Dublin, Ireland",currency:"USD"},{name:"Riaan O.",location:"Paarl, SA",currency:"ZAR"},{name:"Ashley T.",location:"California, USA",currency:"USD"},{name:"Fatima A.",location:"Lenasia, SA",currency:"ZAR"},{name:"Emma W.",location:"Sydney, Australia",currency:"USD"},{name:"Michelle D.",location:"George, SA",currency:"ZAR"},{name:"Grace P.",location:"Ohio, USA",currency:"USD"},{name:"Nandi Z.",location:"East London, SA",currency:"ZAR"},{name:"Mia S.",location:"Berlin, Germany",currency:"USD"},{name:"Chantelle V.",location:"Boksburg, SA",currency:"ZAR"},{name:"Harper C.",location:"Arizona, USA",currency:"USD"},{name:"Sipho M.",location:"Johannesburg, SA",currency:"ZAR"},{name:"Chloe F.",location:"Bristol, UK",currency:"USD"},{name:"Elize B.",location:"Stellenbosch, SA",currency:"ZAR"},{name:"Samantha K.",location:"Nevada, USA",currency:"USD"},{name:"Yusuf E.",location:"Cape Town, SA",currency:"ZAR"},{name:"Lily J.",location:"Auckland, NZ",currency:"USD"},{name:"Monique L.",location:"Centurion, SA",currency:"ZAR"},{name:"Ava R.",location:"Washington, USA",currency:"USD"},{name:"Karabo P.",location:"Rustenburg, SA",currency:"ZAR"},{name:"Zoe T.",location:"Liverpool, UK",currency:"USD"},{name:"Andre F.",location:"Nelspruit, SA",currency:"ZAR"},{name:"Elizabeth N.",location:"Virginia, USA",currency:"USD"},{name:"Ts hepo G.",location:"Midrand, SA",currency:"ZAR"},{name:"Amelia H.",location:"Edinburgh, Scotland",currency:"USD"},{name:"Marlize J.",location:"Upington, SA",currency:"ZAR"},{name:"Victoria B.",location:"Georgia, USA",currency:"USD"},{name:"Keshav R.",location:"Chatsworth, SA",currency:"ZAR"},{name:"Hannah D.",location:"Leeds, UK",currency:"USD"},{name:"Angelique S.",location:"Krugersdorp, SA",currency:"ZAR"},{name:"Natalie M.",location:"Oregon, USA",currency:"USD"},{name:"Vusi K.",location:"Pietermaritzburg, SA",currency:"ZAR"},{name:"Layla O.",location:"Dubai, UAE",currency:"USD"},{name:"Sunette W.",location:"Mossel Bay, SA",currency:"ZAR"},{name:"Ella F.",location:"Colorado, USA",currency:"USD"},{name:"Bongani N.",location:"Soweto, SA",currency:"ZAR"},{name:"Scarlet V.",location:"Melbourne, Australia",currency:"USD"}],cA=({children:s})=>{const[t,r]=v.useState([]),[i,o]=v.useState([]),[l,d]=v.useState([]),[m,p]=v.useState(()=>{try{const V=localStorage.getItem("spv_cart");return V?JSON.parse(V):[]}catch(V){return console.error("Failed to load cart",V),[]}}),[f,b]=v.useState(Tn),[w,N]=v.useState(ZN),[R,P]=v.useState([]),[_,O]=v.useState(!0),[L,$]=v.useState(null),[M,te]=v.useState(null),[H,U]=v.useState([]),[E,j]=v.useState(0),[S,D]=v.useState([]),[I,F]=v.useState("local"),[C,ee]=v.useState(!ls),[ue,Se]=v.useState(null),[Pe,ce]=v.useState(!1),[ye,je]=v.useState([]),[K,me]=v.useState([]),[se,ve]=v.useState(()=>{try{return localStorage.getItem("spv_currency")==="USD"?"USD":"ZAR"}catch{return"ZAR"}});v.useEffect(()=>{try{localStorage.setItem("spv_currency",se)}catch{}},[se]);const[G,Ie]=v.useState(null);v.useEffect(()=>{const V=localStorage.getItem("spv_active_user");if(V)try{const re=JSON.parse(V);b(re)}catch(re){console.error("Error parsing stored user",re),b(Tn)}U(lA()),D(vy(G));const B=new Date,q=B.getFullYear()*100+B.getMonth();j(780+Math.floor((re=>{let ke=re+=1831565813;return ke=Math.imul(ke^ke>>>15,ke|1),ke^=ke+Math.imul(ke^ke>>>7,ke|61),(ke>>>0)/4294967296})(q)*15));try{const re=localStorage.getItem("spv_packaging_presets");re&&je(JSON.parse(re));const ke=localStorage.getItem("spv_material_presets");ke&&me(JSON.parse(ke))}catch(re){console.error("Error loading presets",re)}},[]),v.useEffect(()=>{localStorage.setItem("spv_cart",JSON.stringify(m))},[m]),v.useEffect(()=>{C&&localStorage.setItem("spv_orders",JSON.stringify(l))},[l,C]);const be=V=>{try{const B=cs(V);localStorage.setItem("spv_active_user",JSON.stringify(B))}catch(B){console.error("Error saving user to localStorage",B)}};v.useEffect(()=>{if(!f||f.id==="guest")return;let V=null;try{V=Gd("notifications",B=>{var q,Q;try{const re=(B==null?void 0:B.new)||(B==null?void 0:B.record)||((q=B==null?void 0:B.payload)==null?void 0:q.new)||((Q=B==null?void 0:B.payload)==null?void 0:Q.record)||null,ke=(B==null?void 0:B.event)||(B==null?void 0:B.type)||(B==null?void 0:B.eventType)||(B==null?void 0:B.payload)&&B.payload.event;if(!re)return;const Ce=re.user_id||re.userId||re.user||re.uid;if(!Ce||Ce!==f.id)return;const ne={id:re.id||`notif_${Date.now()}`,type:re.type||"system",title:re.title||re.title_text||"",message:re.message||re.body||"",date:re.created_at||re.createdAt||new Date().toISOString(),isRead:!!re.read};b(de=>{if(!de)return de;if(String(ke).toLowerCase().includes("update")){const Be=(de.notifications||[]).map(St=>St.id===ne.id?{...St,...ne}:St),jt={...de,notifications:Be};return be(jt),jt}if((de.notifications||[]).some(Be=>Be.id===ne.id))return de;const ct={...de,notifications:[ne,...de.notifications||[]]};return be(ct),ct})}catch(re){console.warn("notifications subscription handler error:",re)}})}catch(B){console.warn("Failed to subscribe to notifications realtime:",B)}return()=>{try{V&&V()}catch{}}},[ls,f==null?void 0:f.id]);const He=V=>V?/^user_\d+$/.test(V)||/^u\d{6,}$/.test(V):!1;v.useEffect(()=>{(async()=>{var V;try{if(!(f!=null&&f.id)||!He(f.id))return;try{const{data:B}=await Ve.auth.getUser(),q=(V=B==null?void 0:B.user)==null?void 0:V.id;if(q&&q!==f.id){const Q={...f,id:q};b(Q),be(Q),console.log("Replaced temporary user id with authenticated supabase uid:",q)}}catch{}}catch{}})()},[f==null?void 0:f.id,ls]);const qe=async(V,B)=>{if(!C)try{await Ve.from("users").update(cs(B)).eq("id",V)}catch(q){console.error("Failed to update user fields in Supabase:",q)}},at=async(V,B,q,Q="/#/notifications")=>{if(!(C||!ls))try{await sa("send-push",{title:B,body:q,targetGroup:"individual",targetId:V,url:Q})}catch(re){console.warn("pushToIndividual failed:",re)}},Rt=async(V,B)=>{if(!C)try{const{data:q}=await Ve.from("users").select("notifications").eq("id",V).maybeSingle(),Q=q&&q.notifications||[],re=[B,...Q];await Ve.from("users").update({notifications:re}).eq("id",V)}catch(q){console.error("Failed to append notification to user:",q)}},xe=async V=>{const B={...f,...V};b(B),be(B),!C&&f.id&&f.id!=="guest"&&await qe(f.id,cs(B))},Je=async()=>{try{if(typeof window>"u")return{ok:!1,message:"Not in browser"};const V=localStorage.getItem("spv_dev_admin");if(!V)return{ok:!1,message:"No local dev admin found"};const B=JSON.parse(V),q={...Tn,...B,id:B.id||"admin_local",email:B.email};return b(q),be(q),console.log("signInWithLocalDevAdmin: signed in as local dev admin",q.email),{ok:!0,message:"Signed in as local dev admin"}}catch(V){return console.warn("signInWithLocalDevAdmin failed:",V),{ok:!1,message:(V==null?void 0:V.message)||String(V)}}},wt=()=>Se(null);v.useEffect(()=>{if(C||!f.id||f.id==="guest"||!ls)return;let V=!1;(async()=>{try{const{data:q,error:Q}=await Ve.from("users").select("*").eq("id",f.id).maybeSingle();if(!V&&!Q&&q){const re={...f,...q};b(re),be(re)}}catch(q){console.warn("Failed to fetch user from Supabase:",q)}})();const B=Ve.channel(`users:${f.id}`).on("postgres_changes",{event:"*",schema:"public",table:"users",filter:`id=eq.${f.id}`},q=>{const Q=q.new;if(Q){const re={...f,...Q};b(re),be(re)}}).subscribe();return()=>{V=!0;try{B.unsubscribe()}catch{}}},[f.id,C]),v.useEffect(()=>{C||!ls||!(f!=null&&f.id)||f.id==="guest"||Qv(f.id,f.name||(f.firstName?`${f.firstName} ${f.lastName||""}`.trim():void 0))},[f.id,C]);const Lt=V=>{je(B=>{const Q=B.find(re=>re.name===V.name)?B.map(re=>re.name===V.name?V:re):[...B,V];return localStorage.setItem("spv_packaging_presets",JSON.stringify(Q)),Q})},ae=V=>{je(B=>{const q=B.filter(Q=>Q.name!==V);return localStorage.setItem("spv_packaging_presets",JSON.stringify(q)),q})},ge=V=>{me(B=>{const Q=B.find(re=>re.name===V.name)?B.map(re=>re.name===V.name?V:re):[...B,V];return localStorage.setItem("spv_material_presets",JSON.stringify(Q)),Q})},ze=V=>{me(B=>{const q=B.filter(Q=>Q.name!==V);return localStorage.setItem("spv_material_presets",JSON.stringify(q)),q})},we=async(V,B)=>{var Q;const q=V.trim().toLowerCase();Se(null);try{const{data:re,error:ke}=await Ve.auth.signInWithPassword({email:q,password:B});if(ke)return console.warn("Supabase signInWithPassword failed:",ke.message),ke.message.includes("Email not confirmed")||ke.message.includes("confirm")?Se("Please verify your email address. Check your inbox for a confirmation link."):ke.message.includes("Invalid login credentials")?Se("Invalid email or password. Please try again."):Se(ke.message||"Sign-in failed."),!1;if(!(re!=null&&re.user))return Se("Authentication failed - no user data returned."),!1;const Ce=re.user.id,{data:ne,error:de}=await Ve.from("users").select("*").eq("id",Ce).single();if(de){console.warn("Failed to fetch user profile:",de);const ct={...Tn,id:Ce,email:q,name:((Q=re.user.user_metadata)==null?void 0:Q.full_name)||""};try{await Mm(ct)}catch(jt){console.warn("Failed to create basic user profile:",jt)}let Be=by(ct);return q==="spoilmevintagediy@gmail.com"&&(Be.isAdmin=!0),Be.isActive===!1?(Se("Account is deactivated."),!1):(b(Be),be(Be),Er(Be),!0)}let Ee=by({...ne,id:Ce});return q==="spoilmevintagediy@gmail.com"&&(Ee.isAdmin=!0),Ee.isActive===!1?(Se("Account is deactivated."),!1):(b(Ee),be(Ee),Er(Ee),!0)}catch(re){return console.warn("Login error:",re),Se((re==null?void 0:re.message)||String(re)),!1}},Ue=async V=>{const B={...Tn,...V,id:`user_${Date.now()}`,affiliateCode:`Spoilme-${Date.now().toString().slice(-6)}`,affiliateStats:V.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1}};try{if(V.password&&V.email){const q=String(V.email||"").trim();if(!/\S+@\S+\.\S+/.test(q))throw new Error("Please provide a valid email address.");if(C||!ls)console.warn("Demo mode or Supabase not configured  skipping remote signUp and creating local account only.");else try{const{data:re,error:ke}=await Ve.auth.signUp({email:q,password:V.password,options:{emailRedirectTo:window.location.origin,data:{name:V.name||"",first_name:V.firstName||"",last_name:V.lastName||""}}});if(ke){const Ce=String(ke.message||ke);if(console.warn("Supabase signUp failed:",Ce),/invalid email|invalid.*email|bad request|400/i.test(Ce))Se("Account created locally: Supabase signUp failed ("+Ce+")."),console.warn("Falling back to local-only account due to signUp validation failure.");else return Se(Ce),!1}else re!=null&&re.user&&(B.id=re.user.id,console.log("Supabase user created. Confirmation email sent to:",q))}catch(re){console.warn("Supabase signUp threw an exception  falling back to local account:",(re==null?void 0:re.message)||re),Se((re==null?void 0:re.message)||String(re))}}try{await Mm(B)}catch(q){console.warn("Upsert to users table threw (continuing locally):",q)}return b(B),be(B),!0}catch(q){return console.error("Registration Failed (unexpected)",q),Se((q==null?void 0:q.message)||String(q)),!1}},et=()=>{b(Tn),localStorage.removeItem("spv_active_user");try{Ve.auth.signOut()}catch{}},fe=async V=>{const B={...f,shippingAddress:V};if(b(B),be(B),!C&&f.id!=="guest")try{await Ve.from("users").update({shippingAddress:V}).eq("id",f.id)}catch(q){console.error("Error saving address to DB",q)}},nt=async()=>{if(C){alert("Cannot seed users in Demo Mode.");return}const V=[{...Tn,id:"u1",name:"Elize Test 1",email:"eliz@gmail.com",password:"test",isMember:!1,membershipTier:"none",affiliateCode:"Spoilme-ELIZ01",affiliateStats:{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...Tn,id:"u2",name:"Anna Test 2",email:"anna@gmail.com",password:"test",isMember:!0,membershipTier:"basic",loyaltyPoints:100,affiliateCode:"Spoilme-ANNA02",affiliateStats:{status:"pending",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...Tn,id:"u3",name:"Fay Test 3",email:"fay@gmail.com",password:"test",isMember:!0,membershipTier:"premium",loyaltyPoints:500,affiliateCode:"Spoilme-FAY003",affiliateStats:{status:"approved",totalSalesCount:45,totalSalesValue:4500,commissionRate:10,balance:450,recurringBalance:50}},{...Tn,id:"u4",name:"Debs Test 4",email:"debs@gmail.com",password:"test",isMember:!0,membershipTier:"deluxe",loyaltyPoints:1e3,affiliateCode:"Spoilme-DEBS04",affiliateStats:{status:"approved",totalSalesCount:150,totalSalesValue:15e3,commissionRate:15,balance:2250,recurringBalance:300}}];try{for(const B of V)try{await Mm(B)}catch(q){console.error("Failed to upsert test user into Supabase:",q)}alert("Test Users Created!")}catch(B){console.error("Error seeding users:",B)}};v.useEffect(()=>{if(console.log("Loading products, isDemoMode:",C,"isSupabaseConfigured:",ls),console.log("Loading products, isDemoMode:",C,"isSupabaseConfigured:",ls),C||!ls){F(C?"demo":"local");const B=localStorage.getItem("spv_products"),Q=(B?JSON.parse(B):JN).filter(ne=>ne.status==="published");r(Q);const re=localStorage.getItem("spv_categories");o(re?JSON.parse(re):L0);const ke=localStorage.getItem("spv_vouchers");ke&&P(JSON.parse(ke));const Ce=localStorage.getItem("spv_orders");d(Ce?JSON.parse(Ce):[]),O(!1);return}const V=setTimeout(()=>{_&&($("Connection timed out"),O(!1))},5e3);try{const B=new Map,q=async ne=>{if(!ne)return null;if(typeof ne=="string"){if(ne.startsWith("http")||ne.startsWith("data:")||ne.startsWith("blob:")||ne.startsWith("/"))return ne;if(ne.startsWith("gs://"))try{const de=ne.match(/^gs:\/\/([^/]+)\/(.+)$/);if(de){const Ee=de[1],ct=de[2],Be=`https://firebasestorage.googleapis.com/v0/b/${Ee}/o/${encodeURIComponent(ct)}?alt=media`;return B.set(ne,Be),Be}}catch(de){return console.error("Failed to convert gs:// URL to a public URL",ne,de),null}if(!ne.startsWith("http"))try{if(B.has(ne))return B.get(ne);const de=["public","products","images","spoilme"];for(const Ee of de)try{const{data:ct}=Ve.storage.from(Ee).getPublicUrl(ne);if(ct&&ct.publicUrl)return B.set(ne,ct.publicUrl),ct.publicUrl}catch{}}catch{}return ne}else if(typeof ne=="object"&&(ne.fullPath||ne.path))try{const de=ne.fullPath||ne.path,Ee=de+"::path";if(B.has(Ee))return B.get(Ee);const ct=["public","products","images","spoilme"];for(const Be of ct)try{const{data:jt}=Ve.storage.from(Be).getPublicUrl(de);if(jt&&jt.publicUrl)return B.set(Ee,jt.publicUrl),jt.publicUrl}catch{}}catch(de){return console.error("Failed to convert storage object path to public URL",ne,de),null}return null},Q=ne=>{if(typeof ne!="string")return ne;const de=ne.trim();if(!de||!(de.startsWith("{")&&de.endsWith("}")||de.startsWith("[")&&de.endsWith("]")))return ne;try{return JSON.parse(de)}catch{return ne}},re=(...ne)=>{for(const de of ne)if(de!=null&&(typeof de!="string"||de.trim()!==""))return de},ke=async ne=>{var it,tt;const de={};Object.entries(ne||{}).forEach(([qt,xs])=>{const xr=qt.replace(/_([a-z])/g,(Zn,yn)=>yn.toUpperCase());de[xr]=xs}),de.options=Q(de.options);const Ee=de.options&&typeof de.options=="object"&&!Array.isArray(de.options)?de.options:{};de.id=re(de.id,ne==null?void 0:ne.id),de.code=re(de.code,de.sku,ne==null?void 0:ne.sku,ne==null?void 0:ne.code,Ee==null?void 0:Ee.sku,Ee==null?void 0:Ee.code);const ct=re(de.priceUSD,de.priceUsd,ne==null?void 0:ne.price_usd,ne==null?void 0:ne.priceUSD,Ee==null?void 0:Ee.priceUSD,Ee==null?void 0:Ee.priceUsd);ct!==void 0&&(de.priceUSD=typeof ct=="number"?ct:parseFloat(String(ct))||0);const Be=re(de.compareAtPriceUSD,de.compareAtPriceUsd,ne==null?void 0:ne.compare_at_price_usd,ne==null?void 0:ne.compareAtPriceUSD,Ee==null?void 0:Ee.compareAtPriceUSD,Ee==null?void 0:Ee.compareAtPriceUsd);Be!==void 0&&(de.compareAtPriceUSD=typeof Be=="number"?Be:parseFloat(String(Be))||0);const jt=re(de.memberPriceUSD,de.memberPriceUsd,ne==null?void 0:ne.member_price_usd,ne==null?void 0:ne.memberPriceUSD,Ee==null?void 0:Ee.memberPriceUSD,Ee==null?void 0:Ee.memberPriceUsd);if(jt!==void 0&&(de.memberPriceUSD=typeof jt=="number"?jt:parseFloat(String(jt))||0),!de.type&&(Ee!=null&&Ee.type)&&(de.type=Ee.type),(!de.colors||Array.isArray(de.colors)&&de.colors.length===0)&&(Ee!=null&&Ee.colors)&&(de.colors=Ee.colors),(!de.tags||Array.isArray(de.tags)&&de.tags.length===0)&&(Ee!=null&&Ee.tags)&&(de.tags=Ee.tags),!de.material&&(Ee!=null&&Ee.material)&&(de.material=Ee.material),!de.description&&(Ee!=null&&Ee.description)&&(de.description=Ee.description),!de.name&&(Ee!=null&&Ee.name)&&(de.name=Ee.name),!de.createdAt&&(ne!=null&&ne.created_at))try{de.createdAt=typeof ne.created_at=="string"?ne.created_at:(it=ne.created_at)!=null&&it.toISOString?ne.created_at.toISOString():String(ne.created_at)}catch{de.createdAt=String(ne.created_at)}if(!de.updatedAt&&(ne!=null&&ne.updated_at))try{de.updatedAt=typeof ne.updated_at=="string"?ne.updated_at:(tt=ne.updated_at)!=null&&tt.toISOString?ne.updated_at.toISOString():String(ne.updated_at)}catch{de.updatedAt=String(ne.updated_at)}const St=Q(de.images);de.images=Array.isArray(St)?St:St?[St]:[];const Tt=Q(de.tags);de.tags=Array.isArray(Tt)?Tt:Tt?[Tt]:[];const Vt=Q(de.colors);de.colors=Array.isArray(Vt)?Vt:Vt?[Vt]:[];const bt=Q(de.seoKeywords);de.seoKeywords=Array.isArray(bt)?bt:bt?[bt]:[];const gs=Q(de.reviews);de.reviews=Array.isArray(gs)?gs:gs?[gs]:[];try{if(de.images&&Array.isArray(de.images)){const qt=await Promise.all(de.images.map(async xs=>await q(xs)));de.images=qt.filter(Boolean)}}catch(qt){console.error("Failed resolving product images for",de.id||(ne==null?void 0:ne.id),qt)}return de},Ce=async()=>{try{const{data:ne,error:de}=await Ve.from("products").select("*").eq("status","published").order("created_at",{ascending:!1});if(console.log(" SUPABASE ERROR:",de),console.log(" SUPABASE DATA:",ne),!de&&ne){const Be=await Promise.all(ne.map(async jt=>await ke(jt)));if(console.log("Loaded products from Supabase:",Be.length),F("supabase"),Be.length===0)try{const{data:jt}=await Ve.from("products").select("*").limit(5);console.warn("No published products found  sample rows from products table:",jt)}catch(jt){console.warn("Failed to fetch sample products for debug:",jt)}r(Be)}else if(de&&String((de==null?void 0:de.message)||(de==null?void 0:de.code)||"").toLowerCase().includes("permission"))try{const jt=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?`http://${window.location.hostname}:3001/api`:aA.REACT_APP_API_URL||"/api",St=await fetch(`${jt}/products?limit=100`);if(St.ok){const Tt=await St.json(),Vt=Array.isArray(Tt.products)?Tt.products:[],bt=await Promise.all(Vt.map(async gs=>await ke(gs)));console.log("Loaded products from server endpoint:",bt.length),F("supabase"),r(bt)}}catch(Be){console.warn("Fallback to /api/products failed:",Be)}const{data:Ee,error:ct}=await Ve.from("categories").select("*").order("created_at",{ascending:!1});if(!ct&&Ee&&Ee.length>0){const Be=await Promise.all(Ee.map(async jt=>{const St={};Object.entries(jt).forEach(([Tt,Vt])=>{const bt=Tt.replace(/_([a-z])/g,(gs,it)=>it.toUpperCase());St[bt]=Vt});try{if(St.image){const Tt=await q(St.image);Tt&&(St.image=Tt)}}catch{}return St}));o(Be)}else o(L0);if(f!=null&&f.isAdmin){const{data:Be}=await Ve.from("orders").select("*").order("created_at",{ascending:!1});Be&&d(Be)}else if(f!=null&&f.email){const{data:Be}=await Ve.from("orders").select("*").eq("customer_email",f.email).order("created_at",{ascending:!1});Be&&d(Be)}clearTimeout(V),O(!1)}catch(ne){console.warn("Supabase fetch failed, falling back to Firestore where available:",ne)}};if(ls){Ce();const ne=Ve.channel("public:products").on("postgres_changes",{event:"*",schema:"public",table:"products"},()=>Ce()).subscribe(),de=Ve.channel("public:categories").on("postgres_changes",{event:"*",schema:"public",table:"categories"},()=>Ce()).subscribe(),Ee=Ve.channel("public:orders").on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>Ce()).subscribe();return()=>{clearTimeout(V);try{ne.unsubscribe()}catch{}try{de.unsubscribe()}catch{}try{Ee.unsubscribe()}catch{}}}}catch(B){console.log("Try-catch error in products useEffect:",B),clearTimeout(V),O(!1)}},[C,f.isAdmin,f.email]);const dt=(V,B={})=>{p(q=>{if(V.isSoldOut)return alert("Sorry, this product is marked as sold out."),q;const Q=q.findIndex(ne=>ne.id===V.id&&ne.selectedSize===B.selectedSize&&ne.selectedMaterial===B.selectedMaterial&&ne.selectedChainStyle===B.selectedChainStyle&&ne.selectedChainLength===B.selectedChainLength),re=Q>-1?q[Q]:null,ke=re?re.quantity:0;let Ce=V.stock;if(V.type==="Ring"&&B.selectedSize&&V.ringStock&&(Ce=V.ringStock[B.selectedSize]||0),ke>=Ce)return alert(`Sorry, you can't add more of this item. We only have ${Ce} in stock.`),q;if(Q>-1){const ne=[...q];return ne[Q]={...ne[Q],quantity:ne[Q].quantity+1},ne}return[...q,{...V,quantity:1,...B}]})},_t=(V,B={})=>{p(q=>q.filter(Q=>!(Q.id===V&&Q.selectedSize===B.selectedSize&&Q.selectedMaterial===B.selectedMaterial&&Q.selectedChainStyle===B.selectedChainStyle&&Q.selectedChainLength===B.selectedChainLength)))},xt=(V,B,q={})=>{if(B<=0){_t(V,q);return}const Q=t.find(Ce=>Ce.id===V);if(!Q)return;let re=Q.stock;Q.type==="Ring"&&q.selectedSize&&Q.ringStock&&(re=Q.ringStock[q.selectedSize]||0);const ke=Math.min(B,re);B>re&&alert(`Sorry, we only have ${re} of this item in stock. Quantity has been adjusted.`),p(Ce=>Ce.map(ne=>ne.id===V&&ne.selectedSize===q.selectedSize&&ne.selectedMaterial===q.selectedMaterial&&ne.selectedChainStyle===q.selectedChainStyle&&ne.selectedChainLength===q.selectedChainLength?{...ne,quantity:ke}:ne))},Kt=()=>{p([]),te(null)},Bt=V=>{b(B=>{const Q=B.wishlist.includes(V)?B.wishlist.filter(ke=>ke!==V):[...B.wishlist,V],re={...B,wishlist:Q};return be(re),re})},is=async V=>{if(!f.id||f.id==="guest"){console.error("Cannot apply for affiliate as guest user directly.");return}const B={userId:f.id,status:"pending",appliedAt:new Date().toISOString(),autoApproveAt:new Date(Date.now()+3600*1e3),userEmail:f.email,userName:`${V.name} ${V.surname}`,gender:V.gender,reason:V.reason,socials:V.socials};if(!C)try{await Ve.from("affiliate_applications").insert([B])}catch(re){throw console.error("Error submitting affiliate application to Supabase:",re),re}const q={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},Q={...f,name:`${V.name} ${V.surname}`,birthday:V.dob,notifications:[q,...f.notifications],affiliateStats:{...f.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1},status:"pending",gender:V.gender,joinReason:`${V.reason} | Socials: ${V.socials}`}};b(Q),be(Q),!C&&f.id!=="guest"&&await qe(f.id,cs(Q))},ds=async(V,B)=>{if(C)return;const q={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Welcome to the Partnership Program!",message:`Welcome to Spoil Me Vintage Partnership Program! We are thrilled to have you on the team.${B?` Note from admin: ${B}`:""}`,date:new Date().toISOString(),isRead:!1};try{const{data:Q}=await Ve.from("users").select("notifications").eq("id",V).maybeSingle(),re=Q&&Q.notifications||[];await Ve.from("users").update({affiliateStats:{status:"approved",commissionRate:10,adminNote:B||""},notifications:[q,...re]}).eq("id",V),await at(V,q.title,q.message,"/#/affiliate-program")}catch(Q){console.error("approveAffiliate failed:",Q)}},De=async(V,B)=>{if(C)return;const q={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Partnership Application Update",message:`We regret to inform you that your application has been declined.${B?` Note: ${B}`:""}`,date:new Date().toISOString(),isRead:!1};try{const{data:Q}=await Ve.from("users").select("notifications").eq("id",V).maybeSingle(),re=Q&&Q.notifications||[];await Ve.from("users").update({affiliateStats:{status:"rejected",adminNote:B||""},notifications:[q,...re]}).eq("id",V),await at(V,q.title,q.message,"/#/notifications")}catch(Q){console.error("rejectAffiliate failed:",Q)}},Ns=async(V,B)=>{if(C)return;const q={id:`aff_msg_${Date.now()}`,type:"affiliate_msg",title:"Partnership Update",message:B,date:new Date().toISOString(),isRead:!1};await Rt(V,q),await at(V,q.title,q.message,"/#/notifications")},us=async(V,B)=>{C||await qe(V,{affiliateStats:{...f.affiliateStats||{},commissionRate:B}})},Ms=async(V,B)=>{C||await qe(V,{affiliateStats:{...f.affiliateStats||{},parentId:B}})},X=async()=>{const V={...f,affiliateStats:{...f.affiliateStats,hasContentAccess:!0}};b(V),be(V),!C&&f.id!=="guest"&&await qe(f.id,cs(V))},$e=async()=>{const V={...f,affiliateStats:{...f.affiliateStats,isElite:!0}};b(V),be(V),!C&&f.id!=="guest"&&await qe(f.id,cs(V))},Zs=async(V,B)=>{var Ce;if(!C&&!Ve)return{success:!1,message:"Database not ready"};let q=null;if(C)if(f.affiliateCode===V)q=f;else return{success:!1,message:"In Demo Mode, only your own code works."};else{const{data:ne,error:de}=await Ve.from("users").select("*").eq("affiliateCode",V).limit(1).maybeSingle();ne&&!de&&(q=ne)}if(!q)return{success:!1,message:"Affiliate code not found."};if(((Ce=q.affiliateStats)==null?void 0:Ce.status)!=="approved"&&!C)return{success:!1,message:"Affiliate not approved."};const Q=q.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0},re=B*Q.commissionRate/100,ke={...Q,totalSalesCount:Q.totalSalesCount+1,totalSalesValue:Q.totalSalesValue+B,balance:Q.balance+re};if(ke.totalSalesCount>=500?ke.commissionRate=20:ke.totalSalesCount>=100?ke.commissionRate=15:ke.totalSalesCount>=50&&(ke.commissionRate=11),C)b({...q,affiliateStats:ke});else{const ne={id:`sale_${Date.now()}`,type:"system",title:"New Partnership Sale!",message:`You earned R${re.toFixed(2)} commission!`,date:new Date().toISOString(),isRead:!1};try{await Ve.from("users").update({affiliateStats:ke,notifications:[ne,...q.notifications||[]]}).eq("id",q.id)}catch(de){console.error("Failed to update affiliate user after sale:",de)}}return{success:!0,message:`Sale simulated! Added R${re.toFixed(2)}.`}},Ls=async(V,B)=>{if(C){if(f.id===V){const q={...f,loyaltyPoints:f.loyaltyPoints+B};b(q),be(q)}return}if(f.id===V){const q={...f,loyaltyPoints:f.loyaltyPoints+B};b(q),be(q),await Ve.from("users").update({loyaltyPoints:q.loyaltyPoints}).eq("id",V)}else try{const{data:q}=await Ve.from("users").select("loyaltyPoints").eq("id",V).maybeSingle(),Q=(q&&q.loyaltyPoints||0)+B;await Ve.from("users").update({loyaltyPoints:Q}).eq("id",V)}catch(q){console.error("adminAdjustPoints failed:",q)}},Wr=async()=>{if(C)return[];try{const{data:V,error:B}=await Ve.from("users").select("*");if(B)throw B;return(V||[]).map(q=>cs(q))}catch(V){return console.error("getAllUsers failed:",V),[]}},fr=async V=>{const B=cs(V),q=yy(B,!1),Q=[B,...t];if(r(Q),!C&&ls)try{const re={};for(const Ce of Vd)q[Ce]!==void 0&&(re[Ce]=q[Ce]);const ke={};for(const Ce of Object.keys(q))Vd.includes(Ce)||(ke[Ce]=q[Ce]);Object.keys(ke).length>0&&console.debug("addProduct: moving extra keys into options:",Object.keys(ke)),re.options=Object.assign({},re.options||{},ke,re.options||{}),console.log("DEBUG: Final Product Data to Supabase (Add) - cleanData:",JSON.stringify(re,null,2));try{const Ce=await Ve.from("products").upsert([re]).select();if(console.log("Supabase addProduct response:",Ce),Ce.error)throw console.error("Supabase addProduct ERROR:",Ce.error),(Ce.error.status===403||Ce.error.code==="42501")&&console.error("Permission / RLS error detected when inserting product. Check RLS policies and grants."),Ce.error;$(null)}catch(Ce){console.warn("Supabase addProduct failed, saving to local storage instead:",Ce);try{const ne=JSON.parse(localStorage.getItem("spv_products")||"[]");localStorage.setItem("spv_products",JSON.stringify([B,...ne]))}catch{}}$(null)}catch(re){console.error("CRITICAL FIRESTORE ERROR (addProduct):",re,"Product:",q);try{localStorage.setItem("spv_products",JSON.stringify(Q)),$(`Failed to add product: ${re.code||"Unknown Error"}. Changes saved locally.`),console.warn("Firestore write failed  product saved to localStorage instead.")}catch(ke){throw console.error("Fallback localStorage save also failed:",ke),new Error(`Critical Save Failure. Firestore and LocalStorage failed. (Details: ${ke.message})`)}throw new Error(re.message||"Failed to add product.")}else try{localStorage.setItem("spv_products",JSON.stringify(Q))}catch(re){throw console.error("Failed to save products to localStorage on addProduct:",re),new Error("Failed to add product in Demo Mode: LocalStorage error.")}},Ts=async V=>{const B=cs(V),q=yy(B,!0),Q=t.map(re=>re.id===B.id?B:re);if(r(Q),!C&&ls)try{const re={};for(const Ce of Vd)q[Ce]!==void 0&&(re[Ce]=q[Ce]);const ke={};for(const Ce of Object.keys(q))Vd.includes(Ce)||(ke[Ce]=q[Ce]);Object.keys(ke).length>0&&console.debug("updateProduct: moving extra keys into options:",Object.keys(ke)),re.options=Object.assign({},re.options||{},ke,re.options||{}),console.log("DEBUG: Final Product Data to Supabase (Update) - cleanData:",JSON.stringify(re,null,2)),console.log("DEBUG: Product ID for .eq() clause:",B.id);try{const Ce=await Ve.from("products").update(re).eq("id",B.id).select();if(console.log("Supabase updateProduct response:",Ce),Ce.error)throw console.error("Supabase updateProduct ERROR DETAILS:",Ce.error,"productId:",B.id),(Ce.error.status===403||Ce.error.code==="42501")&&console.error("Permission / RLS error detected when updating product. Check RLS policies and grants."),Ce.error;$(null)}catch(Ce){console.warn("Supabase updateProduct failed, saving to local storage instead:",Ce),console.error("Full error object:",JSON.stringify(Ce,null,2));try{const de=JSON.parse(localStorage.getItem("spv_products")||"[]").map(Ee=>Ee.id===B.id?B:Ee);localStorage.setItem("spv_products",JSON.stringify(de))}catch{}}}catch(re){console.error("CRITICAL FIRESTORE ERROR (updateProduct):",re,"Product:",q);try{localStorage.setItem("spv_products",JSON.stringify(Q)),$(`Failed to update product: ${re.code||"Unknown Error"}. Changes saved locally.`),console.warn("Firestore write failed  update saved to localStorage instead.")}catch(ke){throw console.error("Fallback localStorage save also failed:",ke),new Error(`Critical Save Failure. Firestore and LocalStorage failed. (Details: ${ke.message})`)}throw new Error(re.message||"Failed to update product.")}else try{localStorage.setItem("spv_products",JSON.stringify(Q))}catch(re){throw console.error("Failed to save products to localStorage on updateProduct:",re),new Error("Failed to update product in Demo Mode: LocalStorage error.")}},Ot=async V=>{const B=t.filter(q=>q.id!==V);if(r(B),!C&&ls)try{console.log("DEBUG: Final Product Delete to Supabase/Firestore:",V);try{const{error:q}=await Ve.from("products").delete().eq("id",V);if(q)throw q}catch(q){console.warn("Supabase deleteProduct failed, removing from local storage instead:",q);try{const Q=JSON.parse(localStorage.getItem("spv_products")||"[]");localStorage.setItem("spv_products",JSON.stringify(Q.filter(re=>re.id!==V)))}catch{}}$(null)}catch(q){console.error("CRITICAL FIRESTORE ERROR (deleteProduct):",q,"productId:",V);try{localStorage.setItem("spv_products",JSON.stringify(B)),$(`Failed to delete product: ${q.code||"Unknown Error"}. Change saved locally.`),console.warn("Firestore delete failed  delete reflected locally.")}catch(Q){throw console.error("Fallback localStorage save also failed:",Q),new Error(`Critical Delete Failure. Firestore and LocalStorage failed. (Details: ${Q.message})`)}throw new Error(q.message||"Failed to delete product.")}else try{localStorage.setItem("spv_products",JSON.stringify(B))}catch(q){console.error("Failed to save products to localStorage on deleteProduct:",q)}},gr=async V=>{const B=cs(V);if(d(q=>[B,...q]),!C&&ls)try{const{error:q}=await Ve.from("orders").upsert([B]);if(q)throw q}catch(q){console.error("Failed to addOrder to Supabase, saving to local storage instead:",q);try{const Q=JSON.parse(localStorage.getItem("spv_orders")||"[]");localStorage.setItem("spv_orders",JSON.stringify([B,...Q]))}catch{}}},ir=async V=>{const B=cs(V);if(d(q=>q.map(Q=>Q.id===B.id?B:Q)),!C&&ls)try{const{error:q}=await Ve.from("orders").update(B).eq("id",B.id);if(q)throw q}catch(q){console.error("Failed to updateOrder in Supabase, saving to local storage instead:",q);try{const re=JSON.parse(localStorage.getItem("spv_orders")||"[]").map(ke=>ke.id===B.id?B:ke);localStorage.setItem("spv_orders",JSON.stringify(re))}catch{}}},Rs=async V=>{if(d(B=>B.filter(q=>q.id!==V)),!C&&ls)try{const{error:B}=await Ve.from("orders").delete().eq("id",V);if(B)throw B}catch(B){console.error("Failed to deleteOrder in Supabase, removing from local storage instead:",B);try{const q=JSON.parse(localStorage.getItem("spv_orders")||"[]");localStorage.setItem("spv_orders",JSON.stringify(q.filter(Q=>Q.id!==V)))}catch{}}},Pr=async V=>{const B=cs(V);if(o(q=>[...q,B]),!C&&ls)try{const{error:q}=await Ve.from("categories").upsert([B]);if(q)throw q}catch(q){console.error("Supabase addCategory error, saving to local storage instead:",q);try{const Q=JSON.parse(localStorage.getItem("spv_categories")||"[]");localStorage.setItem("spv_categories",JSON.stringify([B,...Q]))}catch{}}else localStorage.setItem("spv_categories",JSON.stringify([...i,B]))},Hn=async V=>{const B=cs(V);if(o(q=>q.map(Q=>Q.id===B.id?B:Q)),!C&&ls)try{const{error:q}=await Ve.from("categories").update(B).eq("id",B.id);if(q)throw q}catch(q){console.error("Supabase updateCategory error, saving to local storage instead:",q);try{const re=JSON.parse(localStorage.getItem("spv_categories")||"[]").map(ke=>ke.id===B.id?B:ke);localStorage.setItem("spv_categories",JSON.stringify(re))}catch{}}else{const q=i.map(Q=>Q.id===B.id?B:Q);localStorage.setItem("spv_categories",JSON.stringify(q))}},ts=async V=>{if(o(B=>B.filter(q=>q.id!==V)),!C&&ls)try{const{error:B}=await Ve.from("categories").delete().eq("id",V);if(B)throw B}catch(B){console.error("Supabase deleteCategory error, removing from local storage instead:",B);try{const q=JSON.parse(localStorage.getItem("spv_categories")||"[]");localStorage.setItem("spv_categories",JSON.stringify(q.filter(Q=>Q.id!==V)))}catch{}}else{const B=i.filter(q=>q.id!==V);localStorage.setItem("spv_categories",JSON.stringify(B))}},Us=async V=>{const B=cs(V);o(B),C&&localStorage.setItem("spv_categories",JSON.stringify(B))},Ne=V=>N(B=>[...B,V]),Ye=V=>{const B=cs(V);P(Q=>[...Q,B]);const q=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify([...q,B]))},Ct=V=>{P(q=>q.filter(Q=>Q.code!==V));const B=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify(B.filter(q=>q.code!==V)))},Jt=V=>{const B=R.find(q=>q.code===V);return B?(te(B),!0):!1},Pt=()=>{localStorage.clear(),window.location.reload()},At=()=>m.reduce((V,B)=>V+(B.price+(B.selectedMaterialModifier||0))*B.quantity,0),Wt=async V=>{var ct;if(!f.email)throw new Error("User must be logged in to checkout.");const B=`#SMV-${Date.now().toString().slice(-6)}`,q={order_number:B,customer_name:f.name,customer_email:f.email,items:m.map(Be=>({id:Be.id,name:Be.name,sku:Be.code||Be.id,quantity:Be.quantity,unit_price:Be.price})),subtotal:At(),shipping_cost:V.shippingCost??0,discount:0,total:V.total,payment_method:"payfast",shipping_address:V.shippingDetails?typeof V.shippingDetails=="string"?JSON.parse(V.shippingDetails):V.shippingDetails:null,status:"pending",voucher_code:null,affiliate_code:null,points_redeemed:V.pointsToRedeem||0};let Q=null;if(!C&&ls)try{const{data:Be}=await Ve.auth.getUser(),jt=Be==null?void 0:Be.user;if(!jt||!jt.id)throw new Error("Authenticated user required to create order");q.user_id=jt.id;const{data:St,error:Tt}=await Ve.from("orders").insert([q]).select().maybeSingle();if(Tt)throw Tt;Q=St;const Vt=m.map(bt=>({order_id:Q.id,product_id:bt.id,product_name:bt.name,sku:bt.code||bt.id,quantity:bt.quantity,unit_price:bt.price,variant_details:{selectedSize:bt.selectedSize||null,selectedMaterial:bt.selectedMaterial||null,selectedChainStyle:bt.selectedChainStyle||null,selectedChainLength:bt.selectedChainLength||null}}));if(Vt.length>0){const{error:bt}=await Ve.from("order_items").insert(Vt);bt&&console.warn("Failed to insert order_items:",bt)}}catch(Be){console.error("Order DB insert failed, falling back to local order creation:",Be)}const re={id:Q&&Q.id||`ord_${Date.now()}`,orderNumber:B,date:Q&&Q.created_at||new Date().toISOString(),customerName:f.name,customerEmail:f.email,status:Q&&(Q.status?Q.status.charAt(0).toUpperCase()+Q.status.slice(1):"Pending")||"Pending",items:m,shippingCost:q.shipping_cost,shippingMethod:V.shippingMethod||q.shipping_method||"pudo",shippingDetails:V.shippingDetails||q.shipping_address||"",total:q.total};await gr(re),f.affiliateCode&&f.affiliateCode!=="none"&&await Ni(m,re.id,f.affiliateCode);const ke=[];for(const Be of m)(ct=Be.tags)!=null&&ct.includes("Voucher")||ke.push({id:`notif_${Date.now()}_${Be.id}`,type:"review_request",title:"How was your purchase?",message:`Review ${Be.name} to earn 100 Points!`,productId:Be.id,productName:Be.name,date:new Date().toISOString(),isRead:!1});let Ce=0;const ne=At();f!=null&&f.storeCredit&&f.storeCredit>0&&f.creditCurrency===se&&(Ce=Math.min(ne,f.storeCredit));const de=Math.floor(se==="ZAR"?V.total/10:V.total/3),Ee={...f,loyaltyPoints:Math.max(0,f.loyaltyPoints+de-(V.pointsToRedeem||0)),storeCredit:Math.max(0,(f.storeCredit||0)-Ce),notifications:[...ke,...f.notifications]};return b(Ee),be(Ee),!C&&f.id!=="guest"&&await qe(f.id,cs(Ee)),re},It=async(V,B)=>{const q="GV-"+Math.random().toString(36).substr(2,9).toUpperCase(),Q={code:q,discountType:"fixed",value:V,minSpend:V,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};Ye(Q);const re={id:`gift_${Date.now()}`,type:"gift_ready",title:"Gift Ready",message:"Your voucher is ready.",date:new Date().toISOString(),isRead:!1,voucherData:{code:q,amount:V,meta:B}},ke={...f,notifications:[re,...f.notifications]};b(ke),be(ke),!C&&f.id!=="guest"&&await qe(f.id,cs(ke))},en=async(V,B,q,Q)=>{if(f.id==="guest")return;const re=t.find(Ce=>Ce.id===V);if(re){const Ce={id:`rev_${Date.now()}`,userName:f.name,location:"Verified Buyer",content:q,rating:B,date:new Date().toLocaleDateString()};await Ts({...re,reviews:[Ce,...re.reviews||[]]})}const ke={...f,loyaltyPoints:f.loyaltyPoints+100,notifications:f.notifications.filter(Ce=>Ce.id!==Q)};b(ke),be(ke),!C&&f.id!=="guest"&&await qe(f.id,cs(ke))},qn=async V=>{const B={...f,loyaltyPoints:f.loyaltyPoints+50};b(B),be(B),!C&&f.id!=="guest"&&await qe(f.id,{loyaltyPoints:B.loyaltyPoints})},Gn=async(V,B)=>{if(f.id==="guest")return;const q=f.socialRewards||{};if(q[V])return;const Q={...f,loyaltyPoints:f.loyaltyPoints+100,socialRewards:{...q,[V]:!0},socialHandles:{...f.socialHandles,[V]:B}};b(Q),be(Q),!C&&f.id!=="guest"&&await qe(f.id,cs(Q))},ar=(V,B,q="system")=>{const Q={id:`sys_${Date.now()}`,type:q,title:V,message:B,date:new Date().toISOString(),isRead:!1},re={...f,notifications:[Q,...f.notifications]};b(re),be(re)},Kn=()=>{try{const V=JSON.stringify(t);return V.length>0?{status:"success",details:`Serialization OK. Size: ${(V.length/1024).toFixed(2)} KB`}:{status:"warning",details:"Empty products."}}catch(V){return{status:"error",details:`Error: ${V.message}`}}},ji=()=>{ve(V=>V==="ZAR"?"USD":"ZAR")};v.useEffect(()=>{D(vy(G))},[G]);const Ni=async(V,B,q)=>{var Q,re,ke,Ce;if(C){if(f.affiliateCode===q){const ne=f.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,weeklyMilestones:{membershipsSold:0,salesValue:0,vaultItemsSold:0,weekStart:""}},de=V.reduce((ct,Be)=>ct+(se==="ZAR"?Be.price:Be.priceUSD)*Be.quantity,0),Ee={...ne,totalSalesCount:ne.totalSalesCount+V.length,totalSalesValue:ne.totalSalesValue+de,balance:ne.balance+de*(ne.commissionRate/100)};b({...f,affiliateStats:Ee}),be({...f,affiliateStats:Ee})}return}try{const{data:ne}=await Ve.from("users").select("*").eq("affiliateCode",q).limit(1).maybeSingle();if(!ne||((Q=ne.affiliateStats)==null?void 0:Q.status)!=="approved")return;const de=ne.affiliateStats,Ee=V.filter(it=>!it.vaultItem),ct=V.filter(it=>it.vaultItem);let Be=0,jt=0,St=0;const Tt=[];for(const it of Ee){const tt=se==="ZAR"?it.price:it.priceUSD,qt=de.commissionRate/100,xs=tt*it.quantity*qt;Be+=xs,Tt.push({id:`comm_${Date.now()}_${it.id}`,affiliateId:ne.id,orderId:B,itemId:it.id,itemName:it.name,itemType:"standard",basePrice:tt,commissionRate:de.commissionRate,commissionAmount:xs,currency:se,date:new Date().toISOString()})}for(const it of ct){const tt=se==="ZAR"?it.price:it.priceUSD,qt=tt*it.quantity*.01;jt+=qt,St+=it.quantity,Tt.push({id:`comm_${Date.now()}_${it.id}`,affiliateId:ne.id,orderId:B,itemId:it.id,itemName:it.name,itemType:"vault",basePrice:tt,commissionRate:1,commissionAmount:qt,currency:se,date:new Date().toISOString()})}const Vt=Be+jt,bt={...de,totalSalesCount:de.totalSalesCount+V.length,totalSalesValue:de.totalSalesValue+V.reduce((it,tt)=>it+(se==="ZAR"?tt.price:tt.priceUSD)*tt.quantity,0),balance:(de.balance||0)+Vt,vaultPurchasesThisMonth:(de.vaultPurchasesThisMonth||0)+St,weeklyMilestones:{...de.weeklyMilestones,salesValue:(((re=de.weeklyMilestones)==null?void 0:re.salesValue)||0)+V.reduce((it,tt)=>it+(se==="ZAR"?tt.price:tt.priceUSD)*tt.quantity,0),vaultItemsSold:(((ke=de.weeklyMilestones)==null?void 0:ke.vaultItemsSold)||0)+St}};bt.totalSalesValue>=5e4?bt.commissionRate=20:bt.totalSalesValue>=15e3?bt.commissionRate=15:bt.totalSalesValue>=5e3&&(bt.commissionRate=11);const gs={id:`commission_${Date.now()}`,type:"system",title:"New Commission Earned!",message:`You earned ${se==="ZAR"?"R":"$"}${Vt.toFixed(2)} from this sale!`,date:new Date().toISOString(),isRead:!1};if(await Ve.from("users").update({affiliateStats:bt,notifications:[gs,...ne.notifications||[]]}).eq("id",ne.id),de.parentId)try{const{data:it}=await Ve.from("users").select("*").eq("id",de.parentId).maybeSingle();if(it&&((Ce=it.affiliateStats)==null?void 0:Ce.status)==="approved"){const tt=it.affiliateStats,qt=Vt*.01,xs={...tt,balance:(tt.balance||0)+qt},xr={id:`team_bonus_${Date.now()}`,type:"system",title:"Team Leader Bonus",message:`You earned ${se==="ZAR"?"R":"$"}${qt.toFixed(2)} from a recruit's sale!`,date:new Date().toISOString(),isRead:!1};await Ve.from("users").update({affiliateStats:xs,notifications:[xr,...it.notifications||[]]}).eq("id",it.id)}}catch(it){console.error("Failed to process parent commission",it)}try{Tt.length>0&&await Ve.from("commission_records").insert(Tt)}catch(it){console.error("Failed to persist commission_records to Supabase:",it);const tt=JSON.parse(localStorage.getItem("commission_records")||"[]");localStorage.setItem("commission_records",JSON.stringify([...tt,...Tt]))}try{const it=[],tt=new Date().toISOString().split("T")[0];if(bt.weeklyMilestones.membershipsSold>=5&&!localStorage.getItem(`milestone_${ne.id}_sprinter_${tt}`)){const xs=se==="ZAR"?50:5;bt.balance+=xs,it.push({id:`milestone_${Date.now()}`,affiliateId:ne.id,type:"sprinter",achievedAt:new Date().toISOString(),bonusAmount:xs,currency:se,weekStart:tt}),localStorage.setItem(`milestone_${ne.id}_sprinter_${tt}`,"true")}if(it.length>0){const qt=JSON.parse(localStorage.getItem("affiliate_milestones")||"[]");localStorage.setItem("affiliate_milestones",JSON.stringify([...qt,...it]))}}catch(it){console.warn("Failed processing affiliate milestones locally",it)}}catch(ne){console.error("Failed to process affiliate commissions",ne)}},Si=async V=>{if(!(C||f.id==="guest"))try{const B={id:`acct_close_admin_${Date.now()}`,type:"system",title:"Account Closure Request",message:`${f.name} (${f.email}) has requested account closure. Reason: ${V}`,date:new Date().toISOString(),isRead:!1};await Ve.from("users").update({isActive:!1,closureReason:V,closureRequestedAt:new Date().toISOString(),scheduledDeletionAt:new Date(Date.now()+1440*60*1e3).toISOString()}).eq("id",f.id);const{data:q}=await Ve.from("users").select("notifications").eq("email","spoilmevintagediy@gmail.com").limit(1).maybeSingle();if(q){const re=q.notifications||[];await Ve.from("users").update({notifications:[B,...re]}).eq("email","spoilmevintagediy@gmail.com")}const Q={id:`acct_close_user_${Date.now()}`,type:"system",title:"Account Closure Requested",message:"Your account closure has been requested. Your account and all data will be permanently deleted within 24 hours.",date:new Date().toISOString(),isRead:!1};await Rt(f.id,Q),await at(f.id,Q.title,Q.message,"/#/profile")}catch(B){throw console.error("Error closing account:",B),B}},Er=V=>{"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"USER_DATA",name:V.name||V.firstName+" "+V.lastName||"valued customer"})},Jn=async V=>{const{data:{user:B}}=await Ve.auth.getUser();if(!B)throw new Error("You must be logged in with a verified account to apply.");try{const{data:ke,error:Ce}=await Ve.from("artist_applications").select("id,status").eq("user_id",B.id).in("status",["pending","approved"]);if(Ce)console.warn("applyForArtist duplicate check could not complete (Supabase error), continuing:",Ce);else if(ke&&ke.length>0)throw new Error("You already have an active application.")}catch(ke){console.warn("applyForArtist duplicate check encountered an unexpected error, continuing as best-effort:",ke)}const q={user_id:B.id,shop_name:V.shop_name&&String(V.shop_name).trim()!==""?String(V.shop_name).trim():null,product_images:Array.isArray(V.product_images)?V.product_images.filter(ke=>!!ke).map(String):[],status:"pending"};try{const ke=await Ve.from("artist_applications").insert([q]).select().maybeSingle();console.log("artist_applications.insert response",ke);const Ce=(ke==null?void 0:ke.data)||ke;if(ke!=null&&ke.error)throw console.error("Insert into artist_applications returned error object:",ke),ke.error||ke;const ne={...f,artistApplicationStatus:"pending",artistApplicationId:(Ce==null?void 0:Ce.id)||null};b(ne),be(ne),await qe(f.id,{artistApplicationStatus:"pending",artistApplicationId:(Ce==null?void 0:Ce.id)||null});try{await Ve.from("artist_applications_logs").insert([{application_id:(Ce==null?void 0:Ce.id)||null,user_id:B.id,action:"create",payload:q,created_at:new Date().toISOString()}])}catch(Ee){console.warn("Failed to write artist application audit log:",Ee)}const de={id:`artist_app_sub_${Date.now()}`,type:"system",title:"Artist Application Received",message:"Thank you for applying to the Spoil Me Vintage Artist Program. We will review your application and respond within 72 hours. If approved, you will receive instructions on next steps.",date:new Date().toISOString(),isRead:!1};await Rt(f.id,de),await at(f.id,de.title,de.message);try{const{data:Ee}=await Ve.from("users").select("id").eq("is_admin",!0);if(Array.isArray(Ee)&&Ee.length>0){const ct={title:"New Artist Application",message:`New application from ${q.shop_name||f.name||f.email||"Unknown Artist"}`,link:"/#/admin/artists",read:!1,created_at:new Date().toISOString()};for(const Be of Ee)try{await Rt(Be.id,{id:`artist_app_alert_${Date.now()}_${Be.id}`,type:"general",title:ct.title,message:ct.message,date:ct.created_at,isRead:!1}),await at(Be.id,ct.title,ct.message,ct.link)}catch(jt){console.warn("Failed to notify admin",Be.id,jt)}}}catch(Ee){console.warn("Failed to notify admins about new artist application:",Ee)}}catch(ke){console.error("Error submitting artist application:",ke);try{const Ce=!!(f!=null&&f.id)&&String(f.id).startsWith("user_");if(C||Ce){const ne=`pending_artist_application:${f.id}`;localStorage.setItem(ne,JSON.stringify({payload:q,error:String(ke),createdAt:new Date().toISOString()})),console.warn("Saved artist application locally due to submission error:",ke);const de={...f,artistApplicationStatus:"pending_local"};b(de),be(de);const Ee={id:`artist_app_local_${Date.now()}`,type:"system",title:"Artist Application Saved Locally",message:"Your application was saved locally because the server could not be reached. An admin will not see this until it is synced.",date:new Date().toISOString(),isRead:!1};await Rt(f.id,Ee);return}}catch(Ce){console.error("Failed to persist application locally after DB error:",Ce)}throw ke}const Q={id:`artist_app_${Date.now()}`,type:"system",title:"Artist Partnership Application Received",message:"Your application to become an artist partner is pending review. We will contact you soon!",date:new Date().toISOString(),isRead:!1},re={...f,notifications:[Q,...f.notifications]};b(re),be(re),!C&&f.id!=="guest"&&await qe(f.id,cs(re))};return e.jsx(ew.Provider,{value:{products:t,categories:i,cart:m,user:f,currentUser:f,specials:w,vouchers:R,appliedVoucher:M,affiliateLeaderboard:H,memberCount:E,weeklyWinners:S,isDemoMode:C,isLoading:_,dbConnectionError:L,db:Ve,orders:l,isStickyProgressBarVisible:Pe,setIsStickyProgressBarVisible:ce,currency:se,setCurrency:ve,toggleCurrency:ji,packagingPresets:ye,materialPresets:K,savePackagingPreset:Lt,deletePackagingPreset:ae,saveMaterialPreset:ge,deleteMaterialPreset:ze,login:we,logout:et,register:Ue,addToCart:dt,removeFromCart:_t,updateCartQuantity:xt,clearCart:Kt,toggleWishlist:Bt,checkout:Wt,submitReview:en,addSystemNotification:ar,processGiftVoucherPurchase:It,applyForAffiliate:is,approveAffiliate:ds,rejectAffiliate:De,sendAffiliateMessage:Ns,buyAffiliateContent:X,joinAffiliateElite:$e,simulateAffiliateSale:Zs,updateAffiliateTier:us,assignAffiliateParent:Ms,applyForArtist:Jn,addProduct:fr,updateProduct:Ts,deleteProduct:Ot,addOrder:gr,updateOrder:ir,deleteOrder:Rs,addCategory:Pr,updateCategory:Hn,deleteCategory:ts,replaceCategories:Us,addSpecial:Ne,resetStore:Pt,seedTestUsers:nt,getAllUsers:Wr,runDataDiagnostics:Kn,adminAdjustPoints:Ls,getCartTotal:At,addVoucher:Ye,deleteVoucher:Ct,applyExternalVoucher:Jt,setAppliedVoucher:te,shareProduct:qn,claimSocialReward:Gn,updateUserAddress:fe,updateUser:xe,manualWinner:G,setManualWinner:Ie,auth:Ve.auth,authErrorMessage:ue,clearAuthError:wt,signInWithLocalDevAdmin:Je,isSupabaseConfigured:ls,resendVerificationEmail:oA,dataSource:I,closeAccount:Si},children:s})},vt=()=>{const s=v.useContext(ew);if(!s)throw new Error("useStore must be used within StoreProvider");return s};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(s,t)=>{const r=v.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:m="",children:p,...f},b)=>v.createElement("svg",{ref:b,...dA,width:o,height:o,stroke:i,strokeWidth:d?Number(l)*24/Number(o):l,className:["lucide",`lucide-${uA(s)}`,m].join(" "),...f},[...t.map(([w,N])=>v.createElement(w,N)),...Array.isArray(p)?p:[p]]));return r.displayName=`${s}`,r};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=Re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=Re("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=Re("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=Re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=Re("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=Re("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=Re("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=Re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=Re("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=Re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=Re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=Re("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=Re("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=Re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=Re("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=Re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=Re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=Re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=Re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=Re("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=Re("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=Re("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=Re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=Re("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=Re("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=Re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=Re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=Re("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=Re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Re("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=Re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=Re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=Re("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Re("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=Re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=Re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=Re("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=Re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=Re("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=Re("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=Re("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=Re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Re("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=Re("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=Re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=Re("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=Re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=Re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=Re("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=Re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=Re("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=Re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=Re("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Re("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=Re("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=Re("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=Re("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=Re("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=Re("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=Re("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=Re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=Re("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=Re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Re("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=Re("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=Re("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=Re("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=Re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=Re("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=Re("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=Re("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=Re("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Re("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=Re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Re("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=Re("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=Re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=Re("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=Re("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=Re("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=Re("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=Re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=Re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Re("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Re("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=Re("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=Re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=Re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=Re("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ky=["Lerato in Sandton just unlocked The Secret Vault.","Thandi in Durban just unlocked The Secret Vault.","Johan in Cape Town just unlocked The Secret Vault.","Bianca in Pretoria just unlocked The Secret Vault.","Jessica in New York just unlocked The Secret Vault.","Emily in Texas just unlocked The Secret Vault.","Ashley in California just unlocked The Secret Vault.","Sarah in Florida just unlocked The Secret Vault.","Sophie in London just unlocked The Secret Vault.","Emma in Manchester just unlocked The Secret Vault."],$A=()=>{const{weeklyWinners:s,currency:t}=vt(),[r,i]=v.useState(!1),[o,l]=v.useState(""),[d,m]=v.useState("winner");return v.useEffect(()=>{let p;const f=()=>{if(Math.random()<.6&&s.length>0){const R=s[Math.floor(Math.random()*s.length)],P=R.currency==="ZAR"?`R${R.prize}`:`$${R.prize}`,_=`${R.name} just won ${P} in the Weekly Draw!`;l(_),m("winner")}else{const R=ky[Math.floor(Math.random()*ky.length)];l(R),m("vault")}i(!0),setTimeout(()=>{i(!1)},6e3);const N=Math.floor(Math.random()*20001+2e4);p=setTimeout(f,N)};return p=setTimeout(f,5e3),()=>clearTimeout(p)},[s,t]),o?e.jsx("div",{className:`fixed bottom-4 left-4 z-50 max-w-xs w-full transition-all duration-700 transform ${r?"translate-y-0 opacity-100":"translate-y-20 opacity-0 pointer-events-none"}`,children:e.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md border border-gray-800 p-3 rounded-xl shadow-2xl flex items-center gap-3 relative overflow-hidden group",children:[e.jsx("button",{onClick:()=>i(!1),className:"absolute top-1 right-1 text-gray-500 hover:text-white p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ns,{size:12})}),e.jsx("div",{className:`w-8 h-8 shrink-0 rounded-full border flex items-center justify-center ${d==="winner"?"border-yellow-500/30 bg-yellow-900/20":"border-purple-500/30 bg-purple-900/20"}`,children:d==="winner"?e.jsx(xn,{size:16,className:"text-yellow-400"}):e.jsx(Ft,{size:16,className:"text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-200 leading-tight",children:o}),e.jsx("div",{className:"text-[9px] text-gray-500 mt-1",children:"Just now"})]})]})}):null},FA=500,dw=({subtotal:s,isSticky:t=!1,onContinueShopping:r,onClose:i})=>{const{currency:o}=vt();if(o==="USD")return null;const l=()=>o==="ZAR"?"R":"$",d=(N,R)=>o==="ZAR"?N:o==="USD"?0:N,m=d(FA),p=m-s,f=Math.min(s/m*100,100),b=s>=m,w=b?"Congratulations! You've unlocked FREE shipping!":`You're ${l()}${d(p).toFixed(2)} away from free shipping!`;return t?e.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-pink-900/20 text-pink-500 rounded-full border border-pink-500/30",children:e.jsx($n,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-bold ${b?"text-green-400":"text-white"}`,children:w}),e.jsx("div",{className:"w-full bg-black/50 rounded-full h-2 mt-1 overflow-hidden border border-gray-700",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${b?"bg-green-500":"bg-pink-500"}`,style:{width:`${f}%`}})})]}),e.jsx("button",{onClick:i,className:"p-2 text-gray-500 hover:text-white",children:e.jsx(ns,{size:18})})]})}):e.jsx("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-pink-500/30 rounded-2xl p-6 shadow-lg mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[e.jsx("div",{className:"p-3 bg-pink-900/30 text-pink-400 rounded-full border border-pink-500/30",children:e.jsx($n,{size:28})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h3",{className:`text-lg font-bold ${b?"text-green-400":"text-white"}`,children:w}),e.jsx("div",{className:"w-full bg-black rounded-full h-2.5 mt-2 overflow-hidden border border-gray-700 shadow-inner",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${b?"bg-green-500":"bg-pink-500"} shadow-[inset_0_1px_1px_rgba(255,255,255,0.2)]`,style:{width:`${f}%`}})})]}),!b&&e.jsxs("button",{onClick:r,className:"w-full md:w-auto mt-2 md:mt-0 px-6 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:["Continue Shopping ",e.jsx(rr,{size:18})]})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var cl;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(cl||(cl={}));class Fm extends Error{constructor(t,r,i){super(t),this.message=t,this.code=r,this.data=i}}const BA=s=>{var t,r;return s!=null&&s.androidBridge?"android":!((r=(t=s==null?void 0:s.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},VA=s=>{const t=s.CapacitorCustomPlatform||null,r=s.Capacitor||{},i=r.Plugins=r.Plugins||{},o=()=>t!==null?t.name:BA(s),l=()=>o()!=="web",d=w=>{const N=f.get(w);return!!(N!=null&&N.platforms.has(o())||m(w))},m=w=>{var N;return(N=r.PluginHeaders)===null||N===void 0?void 0:N.find(R=>R.name===w)},p=w=>s.console.error(w),f=new Map,b=(w,N={})=>{const R=f.get(w);if(R)return console.warn(`Capacitor plugin "${w}" already registered. Cannot register plugins twice.`),R.proxy;const P=o(),_=m(w);let O;const L=async()=>(!O&&P in N?O=typeof N[P]=="function"?O=await N[P]():O=N[P]:t!==null&&!O&&"web"in N&&(O=typeof N.web=="function"?O=await N.web():O=N.web),O),$=(j,S)=>{var D,I;if(_){const F=_==null?void 0:_.methods.find(C=>S===C.name);if(F)return F.rtype==="promise"?C=>r.nativePromise(w,S.toString(),C):(C,ee)=>r.nativeCallback(w,S.toString(),C,ee);if(j)return(D=j[S])===null||D===void 0?void 0:D.bind(j)}else{if(j)return(I=j[S])===null||I===void 0?void 0:I.bind(j);throw new Fm(`"${w}" plugin is not implemented on ${P}`,cl.Unimplemented)}},M=j=>{let S;const D=(...I)=>{const F=L().then(C=>{const ee=$(C,j);if(ee){const ue=ee(...I);return S=ue==null?void 0:ue.remove,ue}else throw new Fm(`"${w}.${j}()" is not implemented on ${P}`,cl.Unimplemented)});return j==="addListener"&&(F.remove=async()=>S()),F};return D.toString=()=>`${j.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:j,writable:!1,configurable:!1}),D},te=M("addListener"),H=M("removeListener"),U=(j,S)=>{const D=te({eventName:j},S),I=async()=>{const C=await D;H({eventName:j,callbackId:C},S)},F=new Promise(C=>D.then(()=>C({remove:I})));return F.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await I()},F},E=new Proxy({},{get(j,S){switch(S){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return _?U:te;case"removeListener":return H;default:return M(S)}}});return i[w]=E,f.set(w,{name:w,proxy:E,platforms:new Set([...Object.keys(N),..._?[P]:[]])}),E};return r.convertFileSrc||(r.convertFileSrc=w=>w),r.getPlatform=o,r.handleError=p,r.isNativePlatform=l,r.isPluginAvailable=d,r.registerPlugin=b,r.Exception=Fm,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},WA=s=>s.Capacitor=VA(s),vu=WA(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),gl=vu.registerPlugin;class uw{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let i=!1;this.listeners[t]||(this.listeners[t]=[],i=!0),this.listeners[t].push(r);const l=this.windowListeners[t];l&&!l.registered&&this.addWindowListener(l),i&&this.sendRetainedArgumentsForEvent(t);const d=async()=>this.removeListener(t,r);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,i){const o=this.listeners[t];if(!o){if(i){let l=this.retainedEventArguments[t];l||(l=[]),l.push(r),this.retainedEventArguments[t]=l}return}o.forEach(l=>l(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:i=>{this.notifyListeners(r,i)}}}unimplemented(t="not implemented"){return new vu.Exception(t,cl.Unimplemented)}unavailable(t="not available"){return new vu.Exception(t,cl.Unavailable)}async removeListener(t,r){const i=this.listeners[t];if(!i)return;const o=i.indexOf(r);this.listeners[t].splice(o,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(i=>{this.notifyListeners(t,i)}))}}const _y=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Cy=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class HA extends uw{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(i=>{if(i.length<=0)return;let[o,l]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=Cy(o).trim(),l=Cy(l).trim(),r[o]=l}),r}async setCookie(t){try{const r=_y(t.key),i=_y(t.value),o=`; expires=${(t.expires||"").replace("expires=","")}`,l=(t.path||"/").replace("path=",""),d=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${i||""}${o}; path=${l}; ${d};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}gl("CapacitorCookies",{web:()=>new HA});const qA=async s=>new Promise((t,r)=>{const i=new FileReader;i.onload=()=>{const o=i.result;t(o.indexOf(",")>=0?o.split(",")[1]:o)},i.onerror=o=>r(o),i.readAsDataURL(s)}),GA=(s={})=>{const t=Object.keys(s);return Object.keys(s).map(o=>o.toLocaleLowerCase()).reduce((o,l,d)=>(o[l]=s[t[d]],o),{})},KA=(s,t=!0)=>s?Object.entries(s).reduce((i,o)=>{const[l,d]=o;let m,p;return Array.isArray(d)?(p="",d.forEach(f=>{m=t?encodeURIComponent(f):f,p+=`${l}=${m}&`}),p.slice(0,-1)):(m=t?encodeURIComponent(d):d,p=`${l}=${m}`),`${i}&${p}`},"").substr(1):null,JA=(s,t={})=>{const r=Object.assign({method:s.method||"GET",headers:s.headers},t),o=GA(s.headers)["content-type"]||"";if(typeof s.data=="string")r.body=s.data;else if(o.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[d,m]of Object.entries(s.data||{}))l.set(d,m);r.body=l.toString()}else if(o.includes("multipart/form-data")||s.data instanceof FormData){const l=new FormData;if(s.data instanceof FormData)s.data.forEach((m,p)=>{l.append(p,m)});else for(const m of Object.keys(s.data))l.append(m,s.data[m]);r.body=l;const d=new Headers(r.headers);d.delete("content-type"),r.headers=d}else(o.includes("application/json")||typeof s.data=="object")&&(r.body=JSON.stringify(s.data));return r};class ZA extends uw{async request(t){const r=JA(t,t.webFetchExtra),i=KA(t.params,t.shouldEncodeUrlParams),o=i?`${t.url}?${i}`:t.url,l=await fetch(o,r),d=l.headers.get("content-type")||"";let{responseType:m="text"}=l.ok?t:{};d.includes("application/json")&&(m="json");let p,f;switch(m){case"arraybuffer":case"blob":f=await l.blob(),p=await qA(f);break;case"json":p=await l.json();break;case"document":case"text":default:p=await l.text()}const b={};return l.headers.forEach((w,N)=>{b[N]=w}),{data:p,headers:b,status:l.status,url:l.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}gl("CapacitorHttp",{web:()=>new ZA});async function YA(s){try{const t=globalThis.Capacitor||window.Capacitor,r=t&&t.Plugins&&t.Plugins.UpdaterPlugin;if(r&&typeof r.downloadAndInstall=="function"){try{await r.downloadAndInstall({url:s})}catch{await r.downloadAndInstall()}return}const i=t&&t.Plugins&&t.Plugins.CapacitorUpdater;if(i){if(typeof i.downloadUpdate=="function"){try{await i.downloadUpdate({url:s})}catch{try{await i.downloadUpdate()}catch(l){throw l}}typeof i.setUpdate=="function"&&await i.setUpdate();return}if(typeof i.downloadAndInstall=="function"){try{await i.downloadAndInstall({url:s})}catch{await i.downloadAndInstall()}return}}}catch{}try{if(typeof window<"u"&&s){window.open(s,"_blank");return}}catch{}throw new Error("Updater plugin not available and could not open APK URL")}gl("UpdaterPlugin",{web:()=>({openUrl:async()=>{console.warn("UpdaterPlugin not available on web")}})});const XA="https://spoilme-edee0.web.app/version.json",QA=()=>{if(typeof navigator>"u")return!1;const s=navigator.userAgent||navigator.vendor||"";return/Android|iPhone|iPad|iPod/i.test(s)};function eT({apkUrl:s="",playStoreUrl:t}){const[r,i]=v.useState(!1),[o,l]=v.useState(!1),[d,m]=v.useState(s),[p,f]=v.useState("");if(v.useEffect(()=>{var P,_;if(!QA())return;const N=(_=(P=window.Capacitor)==null?void 0:P.isNativePlatform)==null?void 0:_.call(P);l(N),(async()=>{try{console.log("Checking for update...");const L=await(await fetch(XA)).json();console.log("Fetched data:",L);const $=L.version,M=localStorage.getItem("appVersion")||"0.1";console.log("Latest version:",$,"Stored version:",M),$!==M?(N?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))!==$?(console.log("New version detected, showing update banner for this version"),m(L.apkUrl),f(L.version),i(!0)):(console.log("User already dismissed this version, not showing banner"),i(!1)):(console.log("No new version"),(N?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))||i(!0))}catch(O){console.error("Failed to check for update:",O),(N?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))||i(!0)}})()},[]),!r)return null;const b=()=>{const N=o?"updatePromptDismissed":"installPromptDismissed";try{p?localStorage.setItem(N,p):localStorage.setItem(N,String(Date.now()))}catch{}i(!1)},w=async()=>{try{window.Capacitor&&window.Capacitor.isNativePlatform&&window.Capacitor.isNativePlatform()?await YA(d):window.open(d,"_blank")}catch(N){console.error("Updater error",N),window.open(d,"_blank")}try{p?localStorage.setItem(o?"updatePromptDismissed":"installPromptDismissed",p):localStorage.setItem(o?"updatePromptDismissed":"installPromptDismissed",String(Date.now()))}catch{}try{p&&localStorage.setItem("appVersion",p)}catch{}i(!1)};return e.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-cyan-900/20 text-cyan-500 rounded-full border border-cyan-500/30",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z",clipRule:"evenodd"})})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-bold text-white",children:"Update available - Get the latest features!"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:w,className:"px-4 py-2 bg-green-500 text-black rounded font-semibold text-sm",children:"Install Update"}),e.jsx("button",{onClick:b,className:"px-4 py-2 ring-1 ring-gray-700 rounded text-gray-300 text-sm",children:"Later"})]})]})})}const tT=()=>{const[s,t]=v.useState(!1),[r,i]=v.useState("https://spoilme-edee0.web.app/Spoil-Me-Vintage-0.4.apk"),[o,l]=v.useState("0.4"),{cart:d,user:m,isStickyProgressBarVisible:p,setIsStickyProgressBarVisible:f,getCartTotal:b,currency:w,toggleCurrency:N}=vt(),R=ha();v.useEffect(()=>{window.scrollTo(0,0)},[R.pathname]),v.useEffect(()=>{(async()=>{try{const M=await(await fetch("https://spoilme-edee0.web.app/version.json")).json();i(M.apkUrl),l(M.version)}catch($){console.error("Failed to fetch latest APK URL:",$)}})()},[]);const P=d.reduce((L,$)=>L+$.quantity,0),_=b();m.wishlist&&m.wishlist.length;const O=m.notifications?m.notifications.filter(L=>!L.isRead).length:0;return e.jsxs("div",{className:"min-h-screen flex flex-col safe-area text-gray-100",children:[e.jsx("style",{children:`
        @keyframes marquee {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
        .animate-marquee {
          animation: marquee 10s linear infinite;
        }
        .animate-marquee:hover {
          animation-play-state: paused;
        }
      `}),e.jsx("div",{className:"w-full bg-zinc-900 border-b border-white/5 overflow-hidden py-2 relative z-[60]",children:e.jsxs("div",{className:"flex animate-marquee whitespace-nowrap",children:[e.jsxs("div",{className:"flex items-center gap-8 px-4",children:[e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[e.jsx(Js,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[e.jsx(As,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[e.jsx($n,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[e.jsx(vs,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[e.jsx(rc,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[e.jsx(Br,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[e.jsx(Xa,{size:14,className:"text-green-500"})," And lots more!"]})]}),e.jsxs("div",{className:"flex items-center gap-8 px-4",children:[e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[e.jsx(Js,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[e.jsx(As,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[e.jsx($n,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[e.jsx(vs,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[e.jsx(rc,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[e.jsx(Br,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),e.jsx("span",{className:"text-gray-700",children:""}),e.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[e.jsx(Xa,{size:14,className:"text-green-500"})," And lots more!"]})]})]})}),e.jsxs("header",{className:"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800 transition-all",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"relative flex flex-col lg:flex-row items-center justify-center lg:justify-between h-auto lg:h-20 py-4 lg:py-0 gap-3",children:[e.jsx("button",{className:"absolute top-1/2 -translate-y-1/2 left-4 lg:hidden p-2 rounded-md text-gray-400 hover:text-white",onClick:()=>t(!s),children:s?e.jsx(ns,{size:24}):e.jsx(CA,{size:24})}),e.jsxs(We,{to:"/",className:"flex-shrink-0 group flex flex-col items-center leading-none",children:[e.jsx("span",{className:"font-cherry text-[24px] font-bold text-pink-500 group-hover:text-pink-400 transition-colors drop-shadow-[0_0_5px_rgba(236,72,153,0.5)]",children:"Spoil Me"}),e.jsx("span",{className:"font-cherry text-[24px] font-bold text-cyan-400 group-hover:text-cyan-300 transition-colors drop-shadow-[0_0_5px_rgba(34,211,238,0.5)] ml-7 -mt-1",children:"Vintage"})]}),e.jsxs("nav",{className:"hidden lg:flex absolute left-1/2 -translate-x-1/2 space-x-8",children:[e.jsx(We,{to:"/",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${R.pathname==="/"?"text-cyan-400":"text-gray-300"}`,children:"Home"}),e.jsx(We,{to:"/#catalog",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Catalog"}),e.jsx(We,{to:"/customized-wire-wrapped-pendants",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${R.pathname==="/customized-wire-wrapped-pendants"?"text-cyan-400":"text-gray-300"}`,children:"Custom Pendants"}),e.jsxs(We,{to:"/membership",className:`text-sm font-medium flex items-center gap-1 hover:text-purple-400 transition-colors ${R.pathname==="/membership"?"text-purple-400 font-bold":"text-gray-300"}`,children:[e.jsx(Ft,{size:14})," Membership"]}),e.jsx(We,{to:"/#specials",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Specials"})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-3 w-full lg:w-auto justify-center lg:justify-end",children:[e.jsx("button",{onClick:N,className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors text-xs font-bold",title:`Switch to ${w==="ZAR"?"USD":"ZAR"}`,children:w}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors",children:e.jsx(pa,{size:20})}),m.email?e.jsx(We,{to:"/earn-rewards",className:"group flex items-center justify-center p-2 relative",title:"Your Loyalty Rewards",children:e.jsxs("div",{className:"flex items-center gap-1.5 hover:bg-purple-900/50 px-2 py-1 rounded-full transition-colors border border-transparent hover:border-purple-500/30",children:[e.jsx(Br,{size:20,className:"text-purple-400 group-hover:text-pink-400"}),e.jsx("span",{className:"hidden md:inline-block text-xs font-bold text-purple-200 group-hover:text-white",children:m.loyaltyPoints})]})}):e.jsx(We,{to:"/earn-rewards",className:"p-2 text-gray-400 hover:text-purple-400 transition-colors relative",title:"Earn Rewards",children:e.jsx(Br,{size:20})}),m.email&&e.jsxs(We,{to:"/notifications",className:"p-2 text-gray-400 hover:text-yellow-400 transition-colors relative group",children:[e.jsx(Qi,{size:20}),O>0&&e.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-yellow-400 rounded-full shadow-[0_0_5px_rgba(250,204,21,0.8)]",children:O})]}),m.email?e.jsx(We,{to:"/profile",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative",children:e.jsx(Fn,{size:20})}):e.jsx(We,{to:"/login",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative flex items-center gap-1",children:e.jsx(iw,{size:20})}),e.jsxs(We,{to:"/cart",className:"p-2 text-gray-400 hover:text-pink-500 transition-colors relative group",children:[e.jsx(fl,{size:20}),P>0&&e.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-green-400 rounded-full shadow-[0_0_5px_rgba(74,222,128,0.8)]",children:P})]})]})]})}),s&&e.jsx("div",{className:"lg:hidden absolute top-full left-0 w-full bg-zinc-900 border-b border-gray-800 shadow-lg animate-in slide-in-from-top-5 duration-200 z-40",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[e.jsx(We,{to:"/",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Home"}),e.jsxs(We,{to:"/customized-wire-wrapped-pendants",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[e.jsx(As,{size:16,className:"text-gold"})," Custom Pendants"]}),e.jsxs(We,{to:"/membership",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-purple-400 hover:bg-zinc-800 hover:text-purple-300 flex items-center gap-2",children:[e.jsx(Ft,{size:16})," Membership Perks"]}),e.jsxs(We,{to:"/earn-rewards",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[e.jsx(Br,{size:16,className:"text-purple-400"}),m.email?"My Rewards":"Earn Rewards",m.email&&e.jsxs("span",{className:"bg-purple-900/50 text-purple-200 text-[10px] px-2 py-0.5 rounded-full font-bold ml-auto",children:[m.loyaltyPoints," Pts"]})]}),e.jsxs(We,{to:"/affiliate-program",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-green-400 flex items-center gap-2",children:[e.jsx(ll,{size:16,className:"text-green-500"})," Partnership Program"]}),e.jsxs(We,{to:"/artist-partnership",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-yellow-400 flex items-center gap-2",children:[e.jsx(As,{size:16,className:"text-yellow-400"})," Artist Partnership"]}),m.email?e.jsxs(We,{to:"/profile",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center justify-between",children:["My Profile",O>0&&e.jsxs("span",{className:"bg-yellow-400 text-black text-xs px-2 py-0.5 rounded-full font-bold",children:[O," New"]})]}):e.jsx(We,{to:"/login",onClick:()=>t(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Login / Register"})]})})]}),e.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx(ab,{})}),e.jsx($A,{}),p&&_>0&&e.jsx(dw,{subtotal:_,isSticky:!0,onClose:()=>f(!1)}),e.jsx(eT,{}),e.jsx("footer",{className:"bg-zinc-950 border-t border-gray-800 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"About"}),e.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[e.jsx("li",{children:e.jsx(We,{to:"/",className:"hover:text-white",children:"Our Story"})}),e.jsx("li",{children:e.jsx(We,{to:"/",className:"hover:text-white",children:"Careers"})}),e.jsx("li",{children:e.jsx(We,{to:"/",className:"hover:text-white",children:"Press"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[e.jsx("li",{children:e.jsx(We,{to:"/terms",className:"hover:text-white",children:"Contact Us"})}),e.jsx("li",{children:e.jsx(We,{to:"/terms",className:"hover:text-white",children:"Shipping"})}),e.jsx("li",{children:e.jsx(We,{to:"/terms",className:"hover:text-white",children:"Returns"})}),e.jsx("li",{children:e.jsx(We,{to:"/artist-partnership",className:"hover:text-white",children:"Artist Partnership"})})]})]})]}),m.isAdmin&&e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-900 flex justify-center",children:e.jsxs(We,{to:"/admin",className:"flex items-center gap-2 text-xs text-red-400 hover:text-red-300 uppercase tracking-widest font-bold transition-colors bg-red-900/10 px-4 py-2 rounded border border-red-900/30",children:[e.jsx(rw,{size:14})," Admin Dashboard"]})})]})})]})},sT=()=>{const s=ha(),t=nr(),{user:r}=vt();v.useEffect(()=>{if(!r){t("/login");return}if(!r.isAdmin){try{localStorage.setItem("spv_admin_denied",'Your account does not have admin rights. If this is a local dev machine use "Ensure Admin (dev)" on the Login page, or set is_admin=true for your user in the database.')}catch{}t("/login")}},[r,t]);const o=[{path:"/admin",icon:rw,label:"Dashboard",permission:"dashboard"},{path:"/admin/orders",icon:pl,label:"Orders",permission:"orders"},{path:"/admin/products",icon:Qa,label:"Products",permission:"products"},{path:"/admin/categories",icon:IA,label:"Categories",permission:"categories"},{path:"/admin/artists",icon:lw,label:"Artists",permission:"artists"},{path:"/admin/gift-cards",icon:vs,label:"Gift Cards",permission:"giftCards"},{path:"/admin/social",icon:ol,label:"Social Studio",permission:"social"},{path:"/admin/affiliates",icon:Js,label:"Affiliates",permission:"affiliates"},{path:"/admin/affiliate-requests",icon:Zo,label:"Requests",permission:"affiliates"},{path:"/admin/notifications",icon:Qi,label:"Push Notify",permission:"notifications"},{path:"/admin/winners",icon:xn,label:"Weekly Winners",permission:"winners"},{path:"/admin/expenses",icon:Ps,label:"Expenses",permission:"expenses"},{path:"/admin/members",icon:Zo,label:"Membership",permission:"members"},{path:"/admin/vault",icon:mA,label:"Vault",permission:"vault"},{path:"/admin/custom-pendant-manager",icon:As,label:"Custom Pendants",permission:"products"},{path:"/admin/ad-pricing",icon:Ps,label:"Ad Pricing",permission:"admin"}].filter(l=>{var d;return(r==null?void 0:r.email)==="spoilmevintagediy@gmail.com"?!0:((d=r==null?void 0:r.adminPermissions)==null?void 0:d[l.permission])===!0});return r!=null&&r.isAdmin?e.jsxs("div",{className:"min-h-screen bg-black flex text-gray-100",children:[e.jsxs("aside",{className:"w-64 bg-zinc-900 border-r border-gray-800 hidden md:flex flex-col fixed h-full",children:[e.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-gray-800",children:[e.jsx("span",{className:"text-xl font-bold text-pink-500",children:"Spoil Me Vintage"}),e.jsx("span",{className:"ml-2 text-xs bg-purple-900/50 border border-purple-500/50 text-purple-300 px-2 py-0.5 rounded",children:"ADMIN"})]}),e.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[e.jsxs(We,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-gray-400 hover:bg-zinc-800 hover:text-white rounded-lg mb-4 transition-colors",children:[e.jsx(vi,{size:18})," Back to Store"]}),e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-2",children:"Management"}),o.slice(0,5).map(l=>e.jsx(Bm,{item:l,location:s},l.path)),e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Marketing"}),o.slice(5,10).map(l=>e.jsx(Bm,{item:l,location:s},l.path)),e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Operations"}),o.slice(10).map(l=>e.jsx(Bm,{item:l,location:s},l.path))]})]}),e.jsx("main",{className:"flex-1 md:ml-64 p-8 overflow-y-auto bg-black h-screen",children:e.jsx("div",{className:"max-w-6xl mx-auto pb-20 md:pb-0",children:e.jsx(ab,{})})}),e.jsx("div",{className:"md:hidden fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 flex justify-between px-4 py-3 z-50 overflow-x-auto gap-4",children:o.map(l=>e.jsx(We,{to:l.path,className:`p-2 rounded-lg ${s.pathname===l.path?"text-pink-400 bg-pink-900/20":"text-gray-400 hover:text-white"}`,children:e.jsx(l.icon,{size:24})},l.path))})]}):null},Bm=({item:s,location:t})=>{const r=t.pathname===s.path;return e.jsxs(We,{to:s.path,className:`flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-colors ${r?"bg-pink-900/20 text-pink-400 border border-pink-500/20":"text-gray-400 hover:bg-zinc-800 hover:text-white"}`,children:[e.jsx(s.icon,{size:18})," ",s.label]})},wu=({src:s,fallback:t,alt:r,className:i,onError:o,...l})=>{const d=hw(s||void 0,t);return e.jsx("img",{src:d||t||xl(),alt:r,className:i,onError:m=>{try{eo(m)}catch{}o&&o(m)},...l})};function eo(s){const t=s==null?void 0:s.target;t&&(t.src=xl())}function xl(s=600,t=600,r){const o=`<?xml version="1.0" encoding="UTF-8"?><svg xmlns='http://www.w3.org/2000/svg' width='${s}' height='${t}' viewBox='0 0 ${s} ${t}'><rect width='100%' height='100%' fill='%23222' /><text x='50%' y='50%' font-family='Arial, Helvetica, sans-serif' font-size='20' fill='%23ccc' dominant-baseline='middle' text-anchor='middle'>${rT(r||"Image")}</text></svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(o)}`}function rT(s){return String(s).replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t])}function hw(s,t){const[r,i]=v.useState(null);return v.useEffect(()=>{if(!s){i(t||xl());return}i(s)},[s,t]),r}const to=({product:s})=>{var G,Ie;const{addToCart:t,toggleWishlist:r,user:i,cart:o,currency:l}=vt(),[d,m]=v.useState(!1),p=((G=i.wishlist)==null?void 0:G.includes(s.id))||!1,f=nr(),b=new Date,w=s.promoStartsAt?new Date(s.promoStartsAt):null,N=s.promoExpiresAt?new Date(s.promoExpiresAt):null,R=w&&!isNaN(w.getTime()),P=N&&!isNaN(N.getTime()),_=(s.promoPrice||0)>0&&(!R||w<=b)&&(!P||N>b),O=l==="ZAR"?s.price:s.priceUSD||s.price,L=l==="ZAR"?s.memberPrice||O*.8:s.memberPriceUSD||O*.8,$=l==="ZAR"?s.promoPrice||0:(s.promoPrice||0)/29,M=l==="ZAR"?s.promoBasicMemberPrice||0:(s.promoBasicMemberPrice||0)/29,te=l==="ZAR"?s.promoPremiumMemberPrice||0:(s.promoPremiumMemberPrice||0)/29,H=l==="ZAR"?s.promoDeluxeMemberPrice||0:(s.promoDeluxeMemberPrice||0)/29;let U=O,E=!1,j="none";i.isMember?(E=!0,_?i.membershipTier==="deluxe"&&H>0?(U=H,j="deluxe"):i.membershipTier==="premium"&&te>0?(U=te,j="premium"):i.membershipTier==="basic"&&M>0?(U=M,j="basic"):U=Math.min(L,$||1/0):U=L):_&&(U=$);const S=_&&M>0?M:L,I=s.reviews&&s.reviews.length>0?(s.reviews.reduce((be,He)=>be+He.rating,0)/s.reviews.length).toFixed(1):"5.0",F=s.reviews?s.reviews.length:0,C=s.soldCount||0,ue=_?(()=>{if(!P||!N)return null;const be=N.getTime()-b.getTime();if(be<=0)return null;const He=Math.floor(be/(1e3*60*60*24)),qe=Math.floor(be%(1e3*60*60*24)/(1e3*60*60)),at=Math.floor(be%(1e3*60*60)/(1e3*60));return He>0?`${He}d ${qe}h`:`${qe}h ${at}m`})():null,Se=s.type==="Ring"||s.showEarringOptions&&s.earringMaterials&&s.earringMaterials.length>1||(s.type==="Pendant"||s.type==="Necklace")&&s.chainStyles&&s.chainStyles.length>1,Pe=!!s.isSoldOut||s.stock<=0,ce=o.filter(be=>be.id===s.id).reduce((be,He)=>be+He.quantity,0),ye=!Se&&ce>=s.stock,je=()=>{Pe||ye||(Se?f(`/product/${s.id}`):t({...s,price:U}))},K=_&&(M>0||H>0),me=()=>l==="ZAR"?"R":"$",se=be=>`${me()}${be.toFixed(2)}`,ve=l==="ZAR"?s.compareAtPrice:s.compareAtPriceUSD||s.compareAtPrice;return l==="ZAR"?s.memberPrice||s.price*.8:s.memberPriceUSD||(s.priceUSD||s.price)*.8,e.jsxs("div",{className:"group relative bg-zinc-900 rounded-lg shadow-[0_0_30px_rgba(255,255,255,0.15)] hover:shadow-pink-500/20 transition-all duration-300 border border-gray-800 hover:border-pink-500/50 z-0 flex flex-col h-full",children:[e.jsxs(We,{to:`/product/${s.id}`,className:"block relative overflow-hidden aspect-square rounded-t-lg",children:[e.jsx(wu,{src:s.image_url||s.imageUrl||((Ie=s.images)==null?void 0:Ie[0]),alt:s.name,className:`w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500 ${s.stock<=0?"opacity-50 grayscale":"opacity-90 group-hover:opacity-100"}`,fallback:xl(600),onError:eo}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1 z-10",children:[E&&e.jsxs("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-purple-400/30 flex items-center gap-1",children:[e.jsx(Ft,{size:10,fill:"currentColor"}),j!=="none"?`${j.toUpperCase()} PRICE`:"MEMBER"]}),!E&&_&&e.jsx("span",{className:"bg-green-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-green-500/30",children:"PROMO"}),s.isNewArrival&&e.jsx("span",{className:"bg-cyan-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-cyan-500/30",children:"NEW"})]}),_&&ue&&!Pe&&e.jsxs("div",{className:"absolute bottom-0 left-0 w-full bg-black/80 backdrop-blur-md py-1 px-2 flex items-center justify-center gap-1.5 text-[10px] text-green-400 font-bold border-t border-green-500/30",children:[e.jsx(gn,{size:10})," Ends in: ",ue]})]}),e.jsx("button",{onClick:be=>{be.preventDefault(),r(s.id)},className:`absolute top-2 right-2 p-2 rounded-full bg-black/50 backdrop-blur-md shadow-md transition-colors border border-transparent hover:border-pink-500 z-20 ${p?"text-pink-500":"text-gray-300 hover:text-white"}`,children:e.jsx(of,{size:18,fill:p?"currentColor":"none"})}),e.jsxs("div",{className:"p-4 rounded-b-lg flex flex-col flex-1 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-xs text-cyan-400 font-medium uppercase tracking-wider truncate pr-2",children:s.category}),e.jsx("button",{onClick:je,disabled:Pe||ye,className:`p-1.5 rounded-full transition-all flex-shrink-0 -mt-1 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed ${i.isMember?"bg-purple-600/20 text-purple-400 hover:bg-purple-600 hover:text-white border border-purple-500/30":"bg-zinc-800 text-gray-300 hover:bg-cyan-500 hover:text-black border border-gray-700"}`,title:Se?"View Options":Pe?"Sold Out":ye?"Stock limit in cart":"Add to Cart",children:Se?e.jsx(il,{size:16}):e.jsx(pl,{size:16})})]}),e.jsx(We,{to:`/product/${s.id}`,children:e.jsx("h3",{className:"text-sm font-bold text-gray-100 leading-tight group-hover:text-pink-500 transition-colors line-clamp-2 h-10",children:s.name})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[e.jsx(_r,{size:12,fill:"currentColor"}),e.jsx("span",{className:"text-xs font-bold text-gray-300",children:I}),e.jsxs("span",{className:"text-[10px] text-gray-500",children:["(",F,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[C>0&&e.jsxs("div",{className:"text-gray-500 font-medium flex items-center gap-1",children:[C," sold"]}),s.stock>0&&s.stock<=5&&e.jsx("div",{className:"text-orange-400 font-medium flex items-center gap-1",children:s.stock===1?"1 item left":"Low Stock"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 min-h-[20px]",children:[ve&&e.jsxs("div",{className:"flex items-center gap-1 relative",children:[e.jsxs("span",{className:"text-[10px] text-gray-500 line-through",children:["RRP ",me(),ve.toFixed(2)]}),e.jsx("button",{onClick:be=>{be.preventDefault(),m(!d)},className:"text-gray-600 hover:text-gray-400 focus:outline-none",children:e.jsx(Ic,{size:10})}),d&&e.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 p-2 bg-zinc-950 border border-gray-700 rounded shadow-xl text-[10px] text-gray-300 z-50",children:"Recommended retail price."})]}),e.jsxs("span",{className:"text-sm font-bold text-green-400",children:["Retail ",me(),O.toFixed(2)]})]}),e.jsx("div",{className:"mt-auto pt-2 border-t border-gray-800/50",children:i.isMember?e.jsx("div",{className:"flex items-end justify-between",children:e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("span",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-wide flex items-center gap-1",children:[e.jsx(Ft,{size:10})," ",j!=="none"?j:"Member"," Price"]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-white drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",children:se(U)}),U<O&&e.jsx("span",{className:"text-xs text-gray-500 line-through",children:se(O)})]})]})}):e.jsx("div",{className:"flex items-end justify-between",children:e.jsxs("div",{className:"flex flex-col w-full",children:[_?e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-green-400",children:se(U)}),e.jsx("span",{className:"text-xs text-gray-400 line-through",children:se(O)})]}):null,K?e.jsxs("div",{className:"flex flex-col gap-0.5 mt-1",children:[e.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[e.jsx("span",{children:"Basic & Premium:"}),e.jsx("span",{className:"text-purple-400 font-bold",children:se(M)})]}),e.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[e.jsx("span",{children:"Deluxe:"}),e.jsx("span",{className:"text-purple-400 font-bold",children:se(H)})]})]}):e.jsxs("div",{className:"text-[10px] text-gray-400 flex items-center gap-1 mt-0.5",children:["Members: ",e.jsx("span",{className:"text-purple-400 font-bold",children:se(S)})]}),e.jsxs(We,{to:`/maker/${encodeURIComponent(s.madeBy||"Spoil Me Vintage")}`,className:"text-[9px] text-gray-500 hover:text-cyan-400 transition-colors mt-1 inline-block",onClick:be=>be.stopPropagation(),children:["Made by: ",e.jsx("span",{className:"text-gray-400 hover:text-cyan-300",children:s.madeBy||"Spoil Me Vintage"})]})]})})})]})]})},nT=()=>{const[s,t]=v.useState(0),r=[" THIS WEEK'S WINNER: Anja P. from Pretoria just won a R500 Voucher!"," LAST WEEK'S WINNER: Sarah Jenkins from Texas just won a $30 Gift Box!"," PREVIOUS WINNER: Thandi M. from Joburg just won a R500 Voucher!"];return v.useEffect(()=>{const i=setInterval(()=>{t(o=>(o+1)%r.length)},3e3);return()=>clearInterval(i)},[]),e.jsx("div",{className:"flex items-center justify-center bg-yellow-400 p-2 rounded",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xn,{size:16,className:"text-amber-700 mr-3 shrink-0"}),e.jsx("span",{className:"text-sm text-black font-bold tracking-wide",children:r[s]})]})})},iT=()=>{const{products:s,categories:t,user:r,currency:i}=vt(),o=v.useRef(null),l=v.useRef(null),d=v.useRef(null),m=v.useRef(null),p=v.useRef(null),f=v.useRef(null),[b,w]=v.useState(!1);v.useEffect(()=>{const C=setInterval(()=>w(ee=>!ee),5e3);return()=>clearInterval(C)},[]);const N=new Date,P=23+(N.getMonth()+N.getFullYear()*12)%3,_=N.getDate(),O=new Date(N.getFullYear(),N.getMonth()+1,0).getDate(),L=(_-1)/(O-1),$=Math.max(2,Math.floor(P-L*(P-2))),M=(C,ee)=>{const ue=`${C.category||""} ${C.name||""} ${C.tags?C.tags.join(" "):""}`.toLowerCase();return ee.some(Se=>ue.includes(Se.toLowerCase()))},te=s.filter(C=>M(C,["best seller","featured"])),H=(te.length>0?te:s).slice(0,16),U=s.filter(C=>M(C,["stud","studs"])).slice(0,11),E=s.filter(C=>M(C,["dangle","drop","hook"])).slice(0,2),j=s.filter(C=>C.type==="Pendant"&&M(C,["pendant","unique"])).slice(0,23),S=s.filter(C=>M(C,["bracelet","bangle"])).slice(0,6),D=s.filter(C=>M(C,["set","combo","suite"])).slice(0,2),I=(C,ee)=>{if(C.current){const ue=C.current.clientWidth*.8;C.current.scrollBy({left:ee==="right"?ue:-ue,behavior:"smooth"})}},F=({title:C,items:ee,reference:ue,linkTo:Se,icon:Pe,variant:ce="standard"})=>{if(!ee||ee.length===0)return null;const ye=ce==="single"?"min-w-[90vw] md:min-w-[90vw] snap-center px-2":"min-w-[40vw] md:min-w-[200px] snap-start px-2";return e.jsxs("section",{className:"py-4",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4 px-4",children:[e.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-white/20 pb-1 inline-block flex items-center gap-2",children:[Pe&&e.jsx(Pe,{size:20,className:"text-pink-400"})," ",C]}),e.jsxs(We,{to:Se,className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors bg-white/5 px-3 py-1 rounded-full border border-white/10",children:["View All ",e.jsx(rr,{size:14})]})]}),e.jsxs("div",{className:"relative group/slider",children:[e.jsx("button",{onClick:()=>I(ue,"left"),className:"block absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg hover:bg-pink-600 transition-colors",children:e.jsx(vA,{size:20})}),e.jsx("button",{onClick:()=>I(ue,"right"),className:"block absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg hover:bg-pink-600 transition-colors",children:e.jsx(wA,{size:20})}),e.jsxs("div",{ref:ue,className:"flex overflow-x-auto snap-x snap-mandatory pb-6 px-2 no-scrollbar scroll-smooth",children:[ee.map(je=>e.jsx("div",{className:ye,children:e.jsx(to,{product:je})},je.id)),e.jsxs("div",{className:`${ce==="single"?"min-w-[90vw]":"min-w-[40vw]"} snap-center flex flex-col items-center justify-center p-4`,children:[e.jsx(We,{to:Se,className:"w-16 h-16 rounded-full bg-zinc-800 border border-gray-600 flex items-center justify-center text-white mb-2 shadow-lg",children:e.jsx(rr,{})}),e.jsx("span",{className:"text-gray-400 text-xs",children:"View All"})]})]})]})]})};return e.jsxs("div",{className:"space-y-8 pb-20",children:[e.jsx("div",{className:"px-4 mt-4",children:e.jsxs("section",{className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-pink-900 via-purple-900 to-indigo-900 border border-pink-500/30 shadow-lg",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-full bg-white/5 skew-x-12 translate-x-10"}),e.jsxs("div",{className:"flex flex-col p-6 relative z-10 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/10 backdrop-blur-md rounded-full border border-white/20",children:e.jsx(xc,{size:24,className:"text-pink-300"})}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"bg-green-500 text-white text-[10px] font-bold px-2 py-0.5 rounded shadow animate-pulse",children:"LIMITED OFFER"})}),e.jsx("h2",{className:"text-xl font-bold text-white leading-tight",children:"Buy a Gift Voucher"})]})]}),e.jsxs("p",{className:"text-sm text-gray-200",children:["Buy ",e.jsx("strong",{className:"text-white",children:"R250-R500"}),", get ",e.jsx("span",{className:"text-yellow-300 font-bold",children:"R100 EXTRA"}),"!"]}),e.jsxs(We,{to:"/gift-cards",className:"w-full text-center py-3 bg-white text-purple-900 font-bold rounded-full shadow-lg flex items-center justify-center gap-2",children:["Create Voucher ",e.jsx(rr,{size:16})]})]})]})}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"relative rounded-2xl overflow-hidden border-4 border-cyan-500 shadow-[0_0_15px_rgba(34,211,238,0.3)]",children:[e.jsxs("section",{className:"relative bg-zinc-900 text-white p-6",children:[e.jsxs("div",{className:`absolute top-3 right-3 text-[10px] font-bold px-2 py-1 rounded-full bg-red-600 text-white border border-red-400 z-20 ${b?"animate-pulse":""}`,children:[$," spots left"]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-900/20 via-black to-zinc-900"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center space-y-4",children:[e.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-cyan-400 drop-shadow-lg",children:" The Spoil Me Club"}),e.jsxs("p",{className:"text-sm text-gray-300",children:["Join for just ",i==="ZAR"?"R19":"$2"," / month."]}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("p",{children:[" Get a ",i==="ZAR"?"R25":"$3"," Voucher instantly."]}),e.jsx("p",{children:" Auto-entry into Weekly R500 Drop."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full pt-2",children:[e.jsx(We,{to:"/membership",className:"py-2.5 bg-pink-600 hover:bg-pink-500 text-white rounded-lg font-bold text-xs flex items-center justify-center",children:"JOIN CLUB"}),e.jsxs(We,{to:"/weekly-winners",className:"py-2.5 border border-gray-600 text-gray-300 rounded-lg font-bold text-xs flex items-center justify-center gap-1",children:["WINNERS ",e.jsx(xn,{size:12})]})]})]})]}),e.jsx(nT,{})]})}),e.jsx(F,{title:"Best Sellers",items:H,reference:o,linkTo:"/catalog",icon:ll}),e.jsxs("section",{className:"px-4",children:[e.jsx("div",{className:"flex justify-between items-end mb-4",children:e.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-purple-500 pb-1",children:"Shop Categories"})}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:t.map(C=>e.jsxs(We,{to:`/collections/${encodeURIComponent(C.name)}`,className:"relative aspect-square rounded-lg overflow-hidden border border-gray-800 bg-zinc-900 group",children:[e.jsx(wu,{src:C.image,alt:C.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",fallback:xl(400),onError:eo}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent flex flex-col justify-end p-2",children:e.jsx("span",{className:"font-handwriting text-xs md:text-sm font-bold text-white leading-none truncate",children:C.name})})]},C.id))})]}),e.jsx("section",{className:"px-4",children:e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-900 via-pink-900 to-purple-900 rounded-2xl p-6 border-2 border-yellow-400 shadow-lg text-center",children:[e.jsx(Ft,{className:"absolute top-2 left-2 text-yellow-400/20 w-24 h-24 rotate-[-15deg]"}),e.jsxs("div",{className:"relative z-10 space-y-3",children:[e.jsx("h2",{className:"font-cherry text-3xl text-yellow-400 drop-shadow-md",children:"THE SECRET VAULT"}),e.jsx("p",{className:"font-architects text-sm text-gray-200 leading-relaxed",children:"Clearance & Samples. Massive discounts for Deluxe Members!"}),e.jsx(We,{to:"/vault",className:"inline-block w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-black font-bold rounded-full shadow-lg",children:"Enter The Vault"})]})]})}),e.jsx(F,{title:"Stud Earrings",items:U,reference:l,linkTo:"/catalog/stud"}),e.jsx(F,{title:"Dangle Earrings",items:E,reference:d,linkTo:"/catalog/dangle"}),e.jsx("section",{className:"px-4",children:e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur rounded-xl border border-white/10 p-4 space-y-4 divide-y divide-white/10",children:[e.jsxs(We,{to:"/earn-rewards",className:"flex items-center gap-4 pt-1",children:[e.jsx("div",{className:"p-2 bg-pink-900/30 rounded-full text-pink-400",children:e.jsx(vs,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:r.email?`Points: ${r.loyaltyPoints}`:"Loyalty Rewards"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Redeem points for discounts."})]})]}),e.jsxs(We,{to:"/affiliate-program",className:"flex items-center gap-4 pt-4",children:[e.jsx("div",{className:"p-2 bg-green-900/30 rounded-full text-green-400",children:e.jsx(ll,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:"Partnership Program"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Earn 20% commission."})]})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-4",children:[e.jsx("div",{className:"p-2 bg-cyan-900/30 rounded-full text-cyan-400",children:e.jsx(gn,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:"Flash Sales"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Daily limited-time offers."})]})]})]})}),e.jsx(F,{title:"Unique Pendants",items:j,reference:m,linkTo:"/catalog/unique",variant:"single"}),e.jsx(F,{title:"Bracelets",items:S,reference:p,linkTo:"/catalog/bracelet"}),e.jsx("section",{className:"px-4",children:e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-900 to-pink-900 p-6 text-center border border-purple-500/30",children:[e.jsx(As,{className:"absolute top-2 left-2 text-white/20 w-16 h-16 animate-pulse"}),e.jsxs("div",{className:"relative z-10 space-y-3",children:[e.jsx("h2",{className:"font-cherry text-2xl text-white",children:"Unlock VIP Pricing"}),e.jsxs("p",{className:"text-xs text-gray-200",children:["Save up to ",e.jsx("span",{className:"text-yellow-300 font-bold",children:"50% OFF"})," retail & get monthly free gifts."]}),e.jsx(We,{to:"/membership",className:"inline-block w-full py-3 bg-white text-purple-900 font-bold rounded-full shadow-lg mt-2",children:"View Perks"})]})]})}),e.jsx(F,{title:"Jewelry Sets",items:D,reference:f,linkTo:"/catalog/sets"}),e.jsx("section",{className:"px-4 mb-8",children:e.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border-2 border-yellow-600/50 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-900/10"}),e.jsxs("div",{className:"relative z-10 space-y-3",children:[e.jsx("h2",{className:"font-cherry text-2xl text-yellow-500",children:"JOIN OUR ARTIST NETWORK"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Jewelry artist? Showcase to 7,000+ collectors. Only 1% commission!"}),e.jsx(We,{to:"/artist-partnership",className:"inline-block w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-white font-bold rounded-full shadow-lg",children:"Start Your Shop"}),e.jsxs("p",{className:"text-[10px] text-gray-500",children:["From ",i==="ZAR"?"R19":"$1.50"," / month"]})]})]})})]})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju="analytics",aT="firebase_id",oT="origin",lT=60*1e3,cT="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lf="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new Au("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vr=new ma("analytics","Analytics",dT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(s){if(!s.startsWith(lf)){const t=Vr.create("invalid-gtag-resource",{gtagURL:s});return ur.warn(t.message),""}return s}function mw(s){return Promise.all(s.map(t=>t.catch(r=>r)))}function hT(s,t){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(s,t)),r}function mT(s,t){const r=hT("firebase-js-sdk-policy",{createScriptURL:uT}),i=document.createElement("script"),o=`${lf}?l=${s}&id=${t}`;i.src=r?r==null?void 0:r.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function pT(s){let t=[];return Array.isArray(window[s])?t=window[s]:window[s]=t,t}async function fT(s,t,r,i,o,l){const d=i[o];try{if(d)await t[d];else{const p=(await mw(r)).find(f=>f.measurementId===o);p&&await t[p.appId]}}catch(m){ur.error(m)}s("config",o,l)}async function gT(s,t,r,i,o){try{let l=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const m=await mw(r);for(const p of d){const f=m.find(w=>w.measurementId===p),b=f&&t[f.appId];if(b)l.push(b);else{l=[];break}}}l.length===0&&(l=Object.values(t)),await Promise.all(l),s("event",i,o||{})}catch(l){ur.error(l)}}function xT(s,t,r,i){async function o(l,...d){try{if(l==="event"){const[m,p]=d;await gT(s,t,r,m,p)}else if(l==="config"){const[m,p]=d;await fT(s,t,r,i,m,p)}else if(l==="consent"){const[m,p]=d;s("consent",m,p)}else if(l==="get"){const[m,p,f]=d;s("get",m,p,f)}else if(l==="set"){const[m]=d;s("set",m)}else s(l,...d)}catch(m){ur.error(m)}}return o}function yT(s,t,r,i,o){let l=function(...d){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(l=window[o]),window[o]=xT(l,s,t,r),{gtagCore:l,wrappedGtag:window[o]}}function bT(s){const t=window.document.getElementsByTagName("script");for(const r of Object.values(t))if(r.src&&r.src.includes(lf)&&r.src.includes(s))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=30,wT=1e3;class jT{constructor(t={},r=wT){this.throttleMetadata=t,this.intervalMillis=r}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,r){this.throttleMetadata[t]=r}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const pw=new jT;function NT(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function ST(s){var d;const{appId:t,apiKey:r}=s,i={method:"GET",headers:NT(r)},o=cT.replace("{app-id}",t),l=await fetch(o,i);if(l.status!==200&&l.status!==304){let m="";try{const p=await l.json();(d=p.error)!=null&&d.message&&(m=p.error.message)}catch{}throw Vr.create("config-fetch-failed",{httpStatus:l.status,responseMessage:m})}return l.json()}async function kT(s,t=pw,r){const{appId:i,apiKey:o,measurementId:l}=s.options;if(!i)throw Vr.create("no-app-id");if(!o){if(l)return{measurementId:l,appId:i};throw Vr.create("no-api-key")}const d=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new PT;return setTimeout(async()=>{m.abort()},lT),fw({appId:i,apiKey:o,measurementId:l},d,m,t)}async function fw(s,{throttleEndTimeMillis:t,backoffCount:r},i,o=pw){var m;const{appId:l,measurementId:d}=s;try{await _T(i,t)}catch(p){if(d)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:d};throw p}try{const p=await ST(s);return o.deleteThrottleMetadata(l),p}catch(p){const f=p;if(!CT(f)){if(o.deleteThrottleMetadata(l),d)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:l,measurementId:d};throw p}const b=Number((m=f==null?void 0:f.customData)==null?void 0:m.httpStatus)===503?ux(r,o.intervalMillis,vT):ux(r,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+b,backoffCount:r+1};return o.setThrottleMetadata(l,w),ur.debug(`Calling attemptFetch again in ${b} millis`),fw(s,w,i,o)}}function _T(s,t){return new Promise((r,i)=>{const o=Math.max(t-Date.now(),0),l=setTimeout(r,o);s.addEventListener(()=>{clearTimeout(l),i(Vr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function CT(s){if(!(s instanceof Qr)||!s.customData)return!1;const t=Number(s.customData.httpStatus);return t===429||t===500||t===503||t===504}class PT{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function ET(s,t,r,i,o){if(o&&o.global){s("event",r,i);return}else{const l=await t,d={...i,send_to:l};s("event",r,d)}}async function AT(s,t,r,i){if(i&&i.global){const o={};for(const l of Object.keys(r))o[`user_properties.${l}`]=r[l];return s("set",o),Promise.resolve()}else{const o=await t;s("config",o,{update:!0,user_properties:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(){if(zp())try{await Mp()}catch(s){return ur.warn(Vr.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return ur.warn(Vr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function RT(s,t,r,i,o,l,d){const m=kT(s);m.then(N=>{r[N.measurementId]=N.appId,s.options.measurementId&&N.measurementId!==s.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>ur.error(N)),t.push(m);const p=TT().then(N=>{if(N)return i.getId()}),[f,b]=await Promise.all([m,p]);bT(l)||mT(l,f.measurementId),o("js",new Date);const w=(d==null?void 0:d.config)??{};return w[oT]="firebase",w.update=!0,b!=null&&(w[aT]=b),o("config",f.measurementId,w),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t){this.app=t}_delete(){return delete sl[this.app.options.appId],Promise.resolve()}}let sl={},Py=[];const Ey={};let Vm="dataLayer",OT="gtag",Ay,cf,Ty=!1;function DT(){const s=[];if(Ib()&&s.push("This is a browser extension environment."),Ob()||s.push("Cookies are not available."),s.length>0){const t=s.map((i,o)=>`(${o+1}) ${i}`).join(" "),r=Vr.create("invalid-analytics-context",{errorInfo:t});ur.warn(r.message)}}function zT(s,t,r){DT();const i=s.options.appId;if(!i)throw Vr.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vr.create("no-api-key");if(sl[i]!=null)throw Vr.create("already-exists",{id:i});if(!Ty){pT(Vm);const{wrappedGtag:l,gtagCore:d}=yT(sl,Py,Ey,Vm,OT);cf=l,Ay=d,Ty=!0}return sl[i]=RT(s,Py,Ey,t,Ay,Vm,r),new IT(s)}function MT(s=hl()){s=pr(s);const t=Vn(s,ju);return t.isInitialized()?t.getImmediate():LT(s)}function LT(s,t={}){const r=Vn(s,ju);if(r.isInitialized()){const o=r.getImmediate();if(la(t,r.getOptions()))return o;throw Vr.create("already-initialized")}return r.initialize({options:t})}function UT(s,t,r){s=pr(s),AT(cf,sl[s.app.options.appId],t,r).catch(i=>ur.error(i))}function gw(s,t,r,i){s=pr(s),ET(cf,sl[s.app.options.appId],t,r,i).catch(o=>ur.error(o))}const Ry="@firebase/analytics",Iy="0.10.19";function $T(){Cr(new mr(ju,(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),o=t.getProvider("installations-internal").getImmediate();return zT(i,o,r)},"PUBLIC")),Cr(new mr("analytics-internal",s,"PRIVATE")),Vs(Ry,Iy),Vs(Ry,Iy,"esm2020");function s(t){try{const r=t.getProvider(ju).getImmediate();return{logEvent:(i,o,l)=>gw(r,i,o,l),setUserProperties:(i,o)=>UT(r,i,o)}}catch(r){throw Vr.create("interop-component-reg-failed",{reason:r})}}}$T();const FT={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},Vo=[{size:5,mm:49.3},{size:6,mm:51.9},{size:7,mm:54.4},{size:8,mm:57},{size:9,mm:59.5},{size:10,mm:62.1},{size:11,mm:64.6},{size:12,mm:67.2},{size:13,mm:69.7}],BT=()=>{const{id:s}=ul(),{products:t,addToCart:r,toggleWishlist:i,user:o,shareProduct:l,cart:d,currency:m}=vt(),p=nr(),[f,b]=v.useState(0),[w,N]=v.useState(!1),[R,P]=v.useState(!1),[_,O]=v.useState(!1),[L,$]=v.useState(!1),[M,te]=v.useState(1),[H,U]=v.useState(""),[E,j]=v.useState("Ring Finger"),[S,D]=v.useState(null),[I,F]=v.useState(""),[C,ee]=v.useState(null),[ue,Se]=v.useState(""),[Pe,ce]=v.useState(""),[ye,je]=v.useState([]),K=5,me=10,[se,ve]=v.useState(K),G=t.find(Ne=>Ne.id===s),Ie=G?t.filter(Ne=>Ne.category===G.category&&Ne.id!==G.id).slice(0,4):[];v.useEffect(()=>{window.scrollTo(0,0),O(!1)},[s]),v.useEffect(()=>{if(G)try{const Ne=MT();gw(Ne,"view_item",{currency:m,value:G.price,items:[{item_id:G.id,item_name:G.name,price:G.price}]})}catch(Ne){console.log("Analytics error:",Ne)}},[G,m]),v.useEffect(()=>{(async()=>{if(G)try{const Ye=await zs("reviews",{filters:{productId:G.id},orderBy:{column:"created_at",ascending:!1},limit:Math.min(se,me)});je(Ye.map(Ct=>({id:Ct.id,...Ct})))}catch(Ye){console.error("Review fetch error:",Ye)}})()},[G,se]);const be=G!=null&&G.reviews&&Array.isArray(G.reviews)?G.reviews:[],He=v.useMemo(()=>{const Ne=[...be,...ye],Ye=new Set,Ct=[];for(const Wt of Ne){const It=((Wt==null?void 0:Wt.id)??"").toString();if(It){if(Ye.has(It))continue;Ye.add(It)}Ct.push(Wt)}const Jt=Wt=>{const It=(Wt==null?void 0:Wt.created_at)??(Wt==null?void 0:Wt.createdAt)??(Wt==null?void 0:Wt.date);if(!It)return 0;if(typeof It=="string"){const en=Date.parse(It);return Number.isFinite(en)?en:0}if(It!=null&&It.toDate&&typeof It.toDate=="function")try{return It.toDate().getTime()}catch{return 0}return It instanceof Date?It.getTime():0},At=Ct.sort((Wt,It)=>Jt(It)-Jt(Wt)).slice(0,me);return At.slice(0,Math.min(se,At.length))},[be,ye,se]),qe=v.useMemo(()=>{const Ne=[...be,...ye],Ye=Pt=>{const At=(Pt==null?void 0:Pt.created_at)??(Pt==null?void 0:Pt.createdAt)??(Pt==null?void 0:Pt.date);if(!At)return 0;if(typeof At=="string"){const Wt=Date.parse(At);return Number.isFinite(Wt)?Wt:0}if(At!=null&&At.toDate&&typeof At.toDate=="function")try{return At.toDate().getTime()}catch{return 0}return At instanceof Date?At.getTime():0},Ct=new Set,Jt=[];for(const Pt of Ne){const At=((Pt==null?void 0:Pt.id)??"").toString();if(At){if(Ct.has(At))continue;Ct.add(At)}Jt.push(Pt)}return Jt.sort((Pt,At)=>Ye(At)-Ye(Pt)).slice(0,me).length},[be,ye]);v.useEffect(()=>{if(G){if(G.type==="Ring"&&G.ringStock){const Ne=Object.entries(G.ringStock).filter(([Ye,Ct])=>Ct>0).map(([Ye])=>Ye);Ne.length>0&&F(Ne[0])}(G.type==="Stud"||G.type==="Dangle")&&G.showEarringOptions&&G.earringMaterials&&G.earringMaterials.length>0&&ee(G.earringMaterials[0]),(G.type==="Pendant"||G.type==="Necklace")&&G.chainStyles&&G.chainStyles.length>0&&(G.chainStyles.includes("Metal Chain")?Se("Metal Chain"):Se(G.chainStyles[0]))}},[G]),v.useEffect(()=>{if(ue==="Leather Cord")ce("45cm");else if(ue==="Metal Chain"&&(G!=null&&G.pendantChainLengths)){const Ne=Object.keys(G.pendantChainLengths).find(Ye=>G.pendantChainLengths[Ye]);Ne&&ce(Ne)}},[ue,G]);const at=v.useMemo(()=>{var Ne;return((Ne=d.find(Ye=>Ye.id===(G==null?void 0:G.id)&&Ye.selectedSize===I&&Ye.selectedMaterial===(C==null?void 0:C.name)&&Ye.selectedChainStyle===ue&&Ye.selectedChainLength===Pe))==null?void 0:Ne.quantity)||0},[d,G==null?void 0:G.id,I,C,ue,Pe]),{availableStock:Rt,isOutOfStock:xe,isStockLimitInCart:Je,buttonText:wt}=v.useMemo(()=>{var Pt;if(!G)return{availableStock:0,isOutOfStock:!0,isStockLimitInCart:!0,buttonText:"Product not found"};let Ne=G.stock,Ye=Ne<=0,Ct="Add to Cart";G.type==="Ring"&&(I?(Ne=((Pt=G.ringStock)==null?void 0:Pt[I])||0,Ne<=0&&(Ye=!0,Ct="Out of Stock")):(Ye=!0,Ct="Select a Size")),G.isSoldOut&&(Ye=!0);const Jt=Ne>0&&at>=Ne;return!Ye&&Jt&&(Ct="Stock limit in cart"),{availableStock:Ne,isOutOfStock:Ye,isStockLimitInCart:Jt,buttonText:Ct}},[G,I,at]);if(!G)return e.jsx("div",{className:"text-center py-20 text-gray-400",children:"Product not found"});const Lt=o.wishlist.includes(G.id),ae=new Date,ge=G.promoStartsAt?new Date(G.promoStartsAt):null,ze=G.promoExpiresAt?new Date(G.promoExpiresAt):null,we=ge&&!isNaN(ge.getTime()),Ue=ze&&!isNaN(ze.getTime()),et=(G.promoPrice||0)>0&&(!we||ge<=ae)&&(!Ue||ze>ae),fe=m==="ZAR"?G.price:G.priceUSD!==void 0?G.priceUSD:0,nt=m==="ZAR"?G.memberPrice||fe*.8:G.memberPriceUSD!==void 0?G.memberPriceUSD:fe*.8,dt=m==="ZAR"?G.promoPrice||0:(G.promoPrice||0)/29,_t=m==="ZAR"?G.promoBasicMemberPrice||0:(G.promoBasicMemberPrice||0)/29,xt=m==="ZAR"?G.promoPremiumMemberPrice||0:(G.promoPremiumMemberPrice||0)/29,Kt=m==="ZAR"?G.promoDeluxeMemberPrice||0:(G.promoDeluxeMemberPrice||0)/29;let Bt=fe,is="none";o.isMember?(Bt=nt,et&&(o.membershipTier==="deluxe"&&Kt>0?(Bt=Kt,is="deluxe"):o.membershipTier==="premium"&&xt>0?(Bt=xt,is="premium"):o.membershipTier==="basic"&&_t>0?(Bt=_t,is="basic"):dt>0&&dt<nt&&(Bt=dt))):et&&(Bt=dt);const ds=et&&_t>0?_t:nt;let De=Bt;if(C){const Ne=m==="ZAR"?C.modifier:C.modifier/29;De+=Ne}const Ns=C?m==="ZAR"?C.modifier:C.modifier/29:0,us=fe+Ns,Ms=us-ds,X=Math.round(Ms/us*100),$e=et&&(_t>0||Kt>0),Zs=Ne=>Math.round((us-Ne)/us*100),Ls=v.useMemo(()=>[...be,...ye].filter(Ye=>typeof(Ye==null?void 0:Ye.rating)=="number"&&!Number.isNaN(Ye.rating)),[be,ye]),Wr=Ls.length>0,fr=Wr?(Ls.reduce((Ne,Ye)=>Ne+Ye.rating,0)/Ls.length).toFixed(1):"4.9",Ts=Wr?Ls.length:128,Ot=G.giftProductId?t.find(Ne=>Ne.id===G.giftProductId):null,gr=()=>{xe||Je||(r({...G,price:fe},{selectedSize:I,selectedMaterial:C==null?void 0:C.name,selectedMaterialModifier:C==null?void 0:C.modifier,selectedChainStyle:ue,selectedChainLength:Pe}),Ot&&r(Ot,{}))},ir=()=>{const Ne=parseFloat(H);if(!Ne||isNaN(Ne))return;let Ye=Vo[0],Ct=Math.abs(Ne-Ye.mm);for(let Jt=1;Jt<Vo.length;Jt++){const Pt=Math.abs(Ne-Vo[Jt].mm);Pt<Ct&&(Ct=Pt,Ye=Vo[Jt])}Ne>Vo[Vo.length-1].mm+1.5?D(13):D(Ye.size),te(4)},Rs=()=>{$(!1),te(1),U(""),D(null)},Pr=async Ne=>{const Ye=window.location.href,Ct="Look at this I just bought or saw this isn't it beautiful!",Jt=`${Ct} ${Ye}`;if(o.id&&!_?(l(G.id),O(!0),alert("You earned 50 Loyalty Points for sharing!")):o.id,Ne==="native"&&navigator.share)try{await navigator.share({title:G.name,text:Ct,url:Ye})}catch{console.log("Native share cancelled")}else Ne==="whatsapp"?window.open(`https://wa.me/?text=${encodeURIComponent(Jt)}`,"_blank"):Ne==="facebook"&&window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(Ye)}&quote=${encodeURIComponent(Ct)}`,"_blank")},Hn=hw(G.images[f]||G.images[0]||"",xl(800,800,"Spoil Me Vintage")),ts=()=>m==="ZAR"?"R":"$",Us=Ne=>Ne.toFixed(2);return e.jsxs("div",{className:"space-y-16 pt-4 pb-16 relative",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-4",children:[e.jsx(We,{to:"/",className:"hover:text-white",children:"Home"}),e.jsx("span",{children:"/"}),e.jsx(We,{to:`/collections/${encodeURIComponent(G.category)}`,className:"hover:text-white",children:G.category}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-300 truncate max-w-[200px]",children:G.name})]}),R&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>P(!1)}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-400",children:[e.jsx(Lm,{size:32}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Verified Purchases Only"})]}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-4",children:"To maintain the integrity of our reviews, we only accept feedback from verified customers who have purchased this specific item."}),e.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800 mb-6",children:[e.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"How it works:"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-3",children:[e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(gn,{size:14,className:"text-cyan-400 shrink-0 mt-0.5"})," ",e.jsxs("span",{children:["A secure review link will be sent to you ",e.jsx("strong",{children:"25 days after purchase"}),"."]})]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(_r,{size:14,className:"text-yellow-400 shrink-0 mt-0.5"})," ",e.jsxs("span",{children:["Review honestly and earn ",e.jsx("strong",{children:"100 Loyalty Points"}),"!"]})]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(vs,{size:14,className:"text-pink-500 shrink-0 mt-0.5"})," ",e.jsx("span",{children:"Use points (1000 pts = R10) for discounts on your next order."})]})]})]}),e.jsx("button",{onClick:()=>P(!1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-xl font-semibold transition-colors",children:"Understood"})]})]}),L&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:Rs}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx(Sy,{className:"text-pink-500",size:20})," Find Your Ring Size"]}),e.jsx("button",{onClick:Rs,className:"text-gray-500 hover:text-white",children:e.jsx(tu,{size:16})})]}),e.jsxs("div",{className:"min-h-[250px] flex flex-col",children:[M===1&&e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"bg-pink-900/20 p-4 rounded-xl border border-pink-500/20 text-center",children:[e.jsx("span",{className:"text-3xl block mb-2",children:""}),e.jsx("p",{className:"text-sm text-pink-200 font-semibold",children:"Step 1"})]}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Take a flexible measuring tape or a piece of string and wrap it around the base of the finger you want to wear the ring on."}),e.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/20 rounded-lg",children:[e.jsxs("p",{className:"text-xs text-yellow-400 font-bold flex items-center gap-2",children:[e.jsx(tu,{size:14})," Important:"]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Please read your measurement in Millimeters (MM), not CM."})]})]}),M===2&&e.jsxs("div",{className:"flex-1 space-y-6 text-center flex flex-col justify-center",children:[e.jsx("p",{className:"text-white font-semibold",children:"Did you measure your finger with a tape or string?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>te(3),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-xl font-bold transition-all",children:"Yes, I measured my finger"}),e.jsx("button",{onClick:()=>te(1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-gray-300 rounded-xl font-medium transition-all",children:"Back to Instructions"})]})]}),M===3&&e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Which finger?"}),e.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-sm",value:E,onChange:Ne=>j(Ne.target.value),children:[e.jsx("option",{children:"Thumb"}),e.jsx("option",{children:"Index Finger"}),e.jsx("option",{children:"Middle Finger"}),e.jsx("option",{children:"Ring Finger"}),e.jsx("option",{children:"Pinky Finger"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Measured Length (MM)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",placeholder:"e.g. 54.5",className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-lg font-bold focus:border-pink-500 focus:outline-none",value:H,onChange:Ne=>U(Ne.target.value)}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-bold",children:"mm"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please enter the exact circumference."})]})]}),M===4&&e.jsxs("div",{className:"flex-1 text-center flex flex-col justify-center space-y-6",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Based on your ",E," measurement:"]}),e.jsxs("div",{className:"inline-block p-6 bg-zinc-800 rounded-full border-4 border-pink-500 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[e.jsx("span",{className:"block text-xs text-gray-400 uppercase tracking-wide",children:"US Size"}),e.jsx("span",{className:"text-4xl font-black text-white",children:S})]})]}),G.ringStock&&G.ringStock[(S==null?void 0:S.toString())||""]>0?e.jsxs("button",{onClick:()=>{F((S==null?void 0:S.toString())||""),Rs()},className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold transition-all flex items-center justify-center gap-2",children:[e.jsx(pt,{size:18})," Select Size ",S]}):e.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/20 rounded-lg text-red-300 text-sm",children:["Sorry, Size ",S," is currently out of stock."]})]})]}),e.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-800",children:[M>1&&M<4?e.jsxs("button",{onClick:()=>te(Ne=>Ne-1),className:"text-gray-400 hover:text-white text-sm flex items-center gap-1",children:[e.jsx(vi,{size:14})," Back"]}):e.jsx("div",{}),M===1&&e.jsxs("button",{onClick:()=>te(2),className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500",children:["Next Step ",e.jsx(rr,{size:14,className:"inline"})]}),M===3&&e.jsx("button",{onClick:ir,disabled:!H,className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Get My Size"}),M===4&&e.jsx("button",{onClick:Rs,className:"text-gray-400 hover:text-white text-sm",children:"Close"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden bg-zinc-900 shadow-lg border border-gray-800 relative group",children:[e.jsx(wu,{src:Hn,alt:G.name,className:"w-full h-full object-cover opacity-95",onError:eo}),e.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[G.isNewArrival&&e.jsx("span",{className:"bg-cyan-600/90 text-white text-xs font-bold px-3 py-1 rounded-full w-fit",children:"NEW"}),o.isMember&&e.jsxs("span",{className:"bg-purple-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-purple-400 flex items-center gap-1 w-fit",children:[e.jsx(Ft,{size:12,fill:"currentColor"}),is!=="none"?`${is.toUpperCase()} PRICE`:"MEMBER DEAL"]})]}),et&&!o.isMember&&e.jsx("span",{className:"absolute top-4 right-4 bg-green-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-[0_0_10px_rgba(74,222,128,0.5)]",children:"PROMO"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:G.images.map((Ne,Ye)=>e.jsx("button",{onClick:()=>b(Ye),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${f===Ye?"border-pink-500 opacity-100 shadow-[0_0_10px_rgba(236,72,153,0.4)]":"border-gray-800 opacity-60 hover:opacity-100"}`,children:e.jsx(wu,{src:Ne,alt:`View ${Ye}`,className:"w-full h-full object-cover",onError:eo})},Ye))})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[e.jsx("span",{className:"uppercase tracking-wider font-semibold text-cyan-400",children:G.category}),e.jsx("span",{children:""}),e.jsxs("div",{className:"flex items-center text-yellow-400 gap-1",children:[e.jsx(_r,{size:14,fill:"currentColor"})," ",fr," (",Ts," reviews)"]})]}),e.jsx("h1",{className:"text-[26px] font-bold text-white mb-4",children:G.name}),e.jsxs("div",{className:"flex flex-col gap-1",children:[G.compareAtPrice&&G.compareAtPrice>De&&e.jsxs("div",{className:"flex items-center gap-2 relative",children:[e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["RRP ",ts(),Us(m==="ZAR"?G.compareAtPrice:G.compareAtPriceUSD||G.compareAtPrice/29)]}),e.jsx("button",{onClick:()=>N(!w),className:"text-gray-500 hover:text-cyan-400",children:e.jsx(Ic,{size:14})}),w&&e.jsx("div",{className:"absolute top-6 left-0 z-10 bg-zinc-950 border border-gray-700 p-3 rounded-lg shadow-xl w-64 text-xs text-gray-300 leading-relaxed",children:"Recommended retail price (RRP) set by the manufacturer and used for price comparison purposes."})]}),e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsxs("span",{className:`text-[32px] font-bold drop-shadow-sm ${o.isMember?"text-purple-400":"text-green-400"}`,children:[ts(),Us(De)]}),us>De+.01&&e.jsxs("span",{className:"text-lg text-gray-600 line-through",children:[ts(),Us(us)]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[et&&e.jsxs("div",{className:"flex items-center gap-2 text-xs bg-green-900/30 border border-green-500/30 text-green-400 px-2 py-1 rounded w-fit",children:[e.jsx(gn,{size:12})," Ends: ",new Date(G.promoExpiresAt).toLocaleDateString()]}),o.isMember&&e.jsxs("div",{className:"flex items-center gap-2 text-xs bg-purple-900/30 border border-purple-500/30 text-purple-400 px-2 py-1 rounded w-fit font-bold",children:[e.jsx(Ft,{size:12})," ",is!=="none"?is:"Member"," Pricing Applied"]})]}),e.jsx("div",{className:"mt-3 flex items-center gap-2 text-sm",children:xe?e.jsx("span",{className:"bg-red-600 text-white font-black px-3 py-1 rounded-lg shadow-[0_0_10px_rgba(220,38,38,0.8)] border-2 border-red-400 animate-pulse",children:"Just SOLD"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${Rt>0?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.8)]":"bg-red-500"}`}),e.jsx("span",{className:`${Rt>0?Rt<=5?"text-orange-400":"text-green-400":"text-red-400"} font-bold`,children:Rt>0?Rt===1?"1 item left!":Rt<=5?`Only ${Rt} left!`:"In Stock":"Out of Stock"})]})})]})]}),!o.isMember&&e.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-900/50 rounded-xl p-5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(Ft,{size:80,className:"text-purple-500 transform rotate-12"})}),e.jsxs("h3",{className:"text-purple-400 font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(Ft,{size:16,fill:"currentColor"})," Unlock Membership Savings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-zinc-800/50 border border-zinc-700/50",children:[e.jsx("span",{className:"text-gray-400",children:"Retail Price"}),e.jsxs("span",{className:"text-gray-300 font-medium",children:[ts(),Us(us)]})]}),$e?e.jsxs("div",{className:"space-y-2",children:[G.promoBasicMemberPrice&&G.promoBasicMemberPrice>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Basic Member"}),e.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[Zs(G.promoBasicMemberPrice),"% Off"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[ts(),Us(_t)]})})]}),G.promoPremiumMemberPrice&&G.promoPremiumMemberPrice>0&&G.promoPremiumMemberPrice!==G.promoBasicMemberPrice&&e.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Premium Member"}),e.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[Zs(G.promoPremiumMemberPrice),"% Off"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[ts(),Us(xt)]})})]}),G.promoDeluxeMemberPrice&&G.promoDeluxeMemberPrice>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-lime-900/20 border border-lime-500/40",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lime-200 font-bold text-xs",children:"Deluxe Member"}),e.jsxs("span",{className:"text-xs text-lime-300 uppercase font-bold",children:[Zs(G.promoDeluxeMemberPrice),"% Off"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"block text-lime-400 font-bold text-lg",children:[ts(),Us(Kt)]})})]})]}):e.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[e.jsx("span",{className:"text-purple-200 font-bold",children:"Member Price"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[ts(),Us(ds)]}),e.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:["Save ",X,"%"]})]})]})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("button",{onClick:()=>p("/membership"),className:"w-full py-3 text-sm font-bold uppercase tracking-widest text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded hover:shadow-[0_0_15px_rgba(168,85,247,0.4)] transition-all",children:"Join Now"}),e.jsx("p",{className:"text-[10px] text-red-400 font-bold mt-2 uppercase tracking-wide animate-pulse",children:"LIMITED places Available"})]})]}),e.jsxs("div",{className:"space-y-6 mt-6 border-t border-gray-800 pt-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-cherry text-2xl text-pink-500 mb-2 tracking-wide",children:"Description"}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:G.description})]}),G.whenAndHowToWear&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-cherry text-2xl text-cyan-400 mb-2 tracking-wide",children:"Stylish Suggestions"}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:G.whenAndHowToWear})]}),G.material&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-cherry text-2xl text-purple-400 mb-2 tracking-wide",children:"Materials"}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:G.material})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-cherry text-2xl text-amber-400 mb-2 tracking-wide",children:"Made By"}),e.jsx(We,{to:`/maker/${encodeURIComponent(G.madeBy||"Spoil Me Vintage")}`,className:"text-gray-300 text-sm leading-relaxed font-light hover:text-cyan-400 transition-colors inline-block",children:G.madeBy||"Spoil Me Vintage"})]}),G.isUniquePendant&&e.jsxs("div",{className:"bg-orange-900/10 border border-orange-500/20 rounded-xl p-5 mt-4",children:[e.jsxs("h3",{className:"font-cherry text-xl text-orange-400 mb-3 tracking-wide flex items-center gap-2",children:[e.jsx(tu,{size:20})," Oxidized Jewelry Care"]}),e.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"This unique pendant features a deliberate oxidized finish (darkened patina) to enhance the vintage detail."}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-2 list-disc pl-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Do NOT use liquid silver cleaner or dips:"})," These will strip the antique finish instantly."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Avoid polishing cloths:"})," Aggressive rubbing can remove the darkened details."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Keep it dry:"})," Remove before swimming or showering to preserve the wire wrapping."]}),e.jsx("li",{children:"To clean, simply wipe gently with a soft, dry cotton cloth."})]})]})]}),Ot&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/40 to-pink-900/40 border border-purple-500/30 rounded-xl p-4 flex items-center gap-4 shadow-[0_0_15px_rgba(168,85,247,0.1)]",children:[e.jsx("div",{className:"p-3 bg-black/50 rounded-full text-pink-400 border border-pink-500/30",children:e.jsx(vs,{size:24})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs font-bold text-pink-400 uppercase tracking-wider mb-1",children:"Free Gift Included"}),e.jsx("h4",{className:"font-bold text-white",children:Ot.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Value: R",G.giftValue||Ot.price]})]}),e.jsx("div",{className:"ml-auto",children:e.jsx("img",{src:Ot.images[0],alt:"Gift",className:"w-12 h-12 rounded object-cover border border-gray-700"})})]}),e.jsxs("div",{className:"space-y-6 py-4 border-t border-gray-800",children:[G.type==="Ring"&&G.ringStock&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Size"}),e.jsxs("button",{onClick:()=>{$(!0),te(1)},className:"text-xs text-pink-400 hover:text-pink-300 flex items-center gap-1 underline decoration-dotted underline-offset-4",children:[e.jsx(Sy,{size:14})," Find My Ring Size"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(G.ringStock).map(([Ne,Ye])=>e.jsx("button",{disabled:Ye===0,onClick:()=>F(Ne),className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium border transition-all ${I===Ne?"bg-pink-600 border-pink-600 text-white shadow-[0_0_10px_rgba(236,72,153,0.5)]":Ye===0?"bg-zinc-900 border-gray-800 text-gray-600 cursor-not-allowed decoration-slice line-through":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:Ne},Ne))}),I&&G.ringStock[I]>0&&e.jsxs("p",{className:`text-xs mt-2 flex items-center gap-1 ${G.ringStock[I]<=5?"text-orange-400 font-bold":"text-green-400"}`,children:[e.jsx(pt,{size:12}),G.ringStock[I]===1?"1 item left in stock!":G.ringStock[I]<=5?`Only ${G.ringStock[I]} left in stock!`:"In Stock"]}),I&&G.ringStock[I]===0&&e.jsx("p",{className:"text-xs text-red-500 mt-2 font-bold",children:"Out of stock for this size."})]}),(G.type==="Stud"||G.type==="Dangle")&&G.showEarringOptions&&G.earringMaterials&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Material"}),e.jsx("div",{className:"grid gap-3",children:G.earringMaterials.map(Ne=>e.jsxs("div",{onClick:()=>ee(Ne),className:`relative p-4 rounded-xl border cursor-pointer transition-all ${(C==null?void 0:C.name)===Ne.name?"bg-pink-900/10 border-pink-500 shadow-[0_0_10px_rgba(236,72,153,0.2)]":"bg-zinc-900 border-gray-800 hover:border-gray-600"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`font-medium text-sm ${(C==null?void 0:C.name)===Ne.name?"text-white":"text-gray-300"}`,children:Ne.name}),e.jsx("span",{className:"text-xs font-bold text-pink-400",children:Ne.modifier>0?`+${ts()}${Us(m==="ZAR"?Ne.modifier:Ne.modifier/29)}`:""})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Ne.description}),(C==null?void 0:C.name)===Ne.name&&e.jsx("div",{className:"absolute top-3 right-3 w-4 h-4 bg-pink-500 rounded-full flex items-center justify-center",children:e.jsx(pt,{size:10,className:"text-white"})})]},Ne.name))})]}),(G.type==="Pendant"||G.type==="Necklace")&&G.chainStyles&&G.chainStyles.length>0&&e.jsxs("div",{className:"space-y-6",children:[G.chainStyles.length>1&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Chain Style"}),e.jsx("div",{className:"flex gap-4",children:G.chainStyles.map(Ne=>e.jsx("button",{onClick:()=>Se(Ne),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all ${ue===Ne?"bg-pink-600 border-pink-600 text-white":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:Ne},Ne))})]}),ue==="Metal Chain"&&G.pendantChainLengths&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Length"}),e.jsx("div",{className:"grid gap-2",children:Object.keys(G.pendantChainLengths).filter(Ne=>G.pendantChainLengths[Ne]).map(Ne=>e.jsxs("button",{onClick:()=>ce(Ne),className:`text-left p-3 rounded-lg border transition-all ${Pe===Ne?"bg-cyan-900/20 border-cyan-500":"bg-zinc-900 border-gray-800 hover:bg-zinc-800"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:`text-sm font-medium ${Pe===Ne?"text-cyan-400":"text-gray-200"}`,children:Ne}),Pe===Ne&&e.jsx(pt,{size:14,className:"text-cyan-400"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:FT[Ne]||""})]},Ne))})]}),ue==="Leather Cord"&&e.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded-lg border border-gray-700 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-700 rounded-full",children:e.jsx(pt,{size:14,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Fixed Length: 45cm"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Standard leather cord length."})]})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs("button",{onClick:gr,disabled:xe||Je,className:"flex-1 bg-pink-600 text-white py-4 rounded-xl font-semibold hover:bg-pink-500 transition-all flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(236,72,153,0.4)] text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(pl,{size:20})," ",wt]}),e.jsx("button",{onClick:()=>i(G.id),className:`p-4 rounded-xl border transition-colors ${Lt?"border-pink-500 bg-pink-500/10 text-pink-500":"border-gray-700 hover:bg-zinc-800 text-gray-400 hover:text-white"}`,children:e.jsx(of,{size:24,fill:Lt?"currentColor":"none"})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/20 to-purple-900/20 border border-cyan-500/30 rounded-xl p-5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 pointer-events-none",children:e.jsx(ol,{size:60})}),e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-2",children:[e.jsx(vs,{size:18,className:"text-pink-500"})," Share & Earn"]}),e.jsxs("p",{className:"text-xs text-gray-300 mb-4 max-w-sm",children:["Share this treasure with friends and earn ",e.jsx("strong",{className:"text-green-400",children:"50 Loyalty Points"})," instantly!"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>Pr("whatsapp"),className:"flex-1 py-2 bg-[#25D366] hover:bg-[#1ebc57] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(37,211,102,0.4)]",children:[e.jsx(al,{size:16})," WhatsApp"]}),e.jsxs("button",{onClick:()=>Pr("facebook"),className:"flex-1 py-2 bg-[#1877F2] hover:bg-[#166fe5] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(24,119,242,0.4)]",children:[e.jsx(tc,{size:16})," Facebook"]}),navigator.share&&e.jsxs("button",{onClick:()=>Pr("native"),className:"flex-1 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all",children:[e.jsx(ol,{size:16})," More"]})]}),_&&e.jsxs("div",{className:"mt-3 text-xs text-green-400 font-bold flex items-center gap-1 justify-center animate-in fade-in zoom-in",children:[e.jsx(pt,{size:12})," 50 Points Awarded!"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 pt-8 border-t border-gray-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($n,{className:"text-cyan-400 mt-1",size:20}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-200",children:"Free Delivery"}),e.jsx("p",{className:"text-xs text-gray-500",children:"On orders over R500 (PUDO/PAXI only)"})]})]})})]})]}),e.jsxs("div",{className:"pt-12 border-t border-gray-800 animate-in fade-in slide-in-from-bottom-10 duration-700",children:[G.isUniquePendant&&e.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl mb-8 flex gap-3 items-start",children:[e.jsx(zu,{className:"text-purple-400 shrink-0 mt-1",size:20}),e.jsxs("p",{className:"text-sm text-gray-300",children:[e.jsx("strong",{children:"Please note:"})," As this is a one-of-a-kind treasure, these reviews reflect experiences from customers who have purchased similar unique pendants from our collection."]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"font-cherry text-[26px] font-bold text-white flex items-center gap-3",children:["Customer Reviews",e.jsx("span",{className:"text-sm font-sans font-normal text-gray-500 bg-zinc-900 px-3 py-1 rounded-full",children:qe})]}),e.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[e.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-green-900/20 border border-green-500/30 text-green-400 px-2 py-1 rounded text-xs font-bold w-fit",children:[e.jsx(Lm,{size:14,fill:"currentColor",className:"text-green-500"})," Verified Purchases Only"]}),e.jsx("p",{className:"text-xs text-gray-500 max-w-md",children:"To ensure authenticity, only customers who have purchased this item can leave a review."})]})]}),e.jsx("button",{onClick:()=>P(!0),className:"px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg border border-gray-700 hover:border-gray-600 transition-all flex items-center gap-2 text-sm font-semibold shadow-lg",children:"Write a review"})]}),qe>0?e.jsxs("div",{className:"space-y-8",children:[He.map((Ne,Ye)=>{var Ct;return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 border-b border-gray-800 pb-8 last:border-0",children:[e.jsxs("div",{className:"md:w-48 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-white font-bold text-xs",children:(Ne.userName||Ne.name||"Verified Buyer").charAt(0)}),e.jsx("span",{className:"font-bold text-gray-200 text-sm",children:Ne.userName||Ne.name||"Verified Buyer"})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-10 mb-1",children:[e.jsx(Lm,{size:12,className:"text-green-500"}),e.jsx("span",{className:"text--[10px] text-green-500 font-medium",children:"Verified Buyer"})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-10 mb-2",children:Ne.location||"Unknown"}),e.jsxs("div",{className:"flex items-center gap-1 ml-10",children:[e.jsx("div",{className:"flex text-yellow-400",children:[1,2,3,4,5].map(Jt=>e.jsx(_r,{size:12,fill:Jt<=Math.round(Ne.rating||5)?"currentColor":"none",className:Jt<=Math.round(Ne.rating||5)?"text-yellow-400":"text-gray-700"},Jt))}),e.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["(",Ne.rating||5,")"]})]})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl rounded-tl-none border border-gray-800/50",children:[e.jsxs("p",{className:"text-gray-300 text-sm italic mb-3 leading-relaxed",children:['"',Ne.content||Ne.comment||Ne.text,'"']}),e.jsx("p",{className:"text-xs text-gray-500 font-medium text-right",children:Ne.date||((Ct=Ne.createdAt)!=null&&Ct.toDate?Ne.createdAt.toDate().toLocaleDateString():"Recent")})]})})]},Ne.id||`legacy-${Ye}`)}),He.length<qe&&He.length<me&&e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{onClick:()=>ve(Ne=>Math.min(Ne+K,me)),className:"w-full py-2 text-gold text-sm underline hover:text-white transition-colors",children:"Load More Customer Reviews"})})]}):e.jsx("div",{className:"bg-zinc-900/30 border border-dashed border-gray-800 rounded-xl p-8 text-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"No reviews yet. Be the first to own and review this treasure!"})})]}),Ie.length>0&&e.jsxs("div",{className:"pt-12 border-t border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-end mb-6",children:[e.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white flex items-center gap-2",children:[e.jsx(As,{size:20,className:"text-pink-500"})," More from ",G.category]}),e.jsxs(We,{to:`/collections/${encodeURIComponent(G.category)}`,className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View Collection ",e.jsx(rr,{size:14})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Ie.map(Ne=>e.jsx(to,{product:Ne},Ne.id))})]})]})},Hd={IS_SANDBOX:!1,MERCHANT_ID:"113371222",MERCHANT_KEY:"cbhnt80ljkt7g",getProcessUrl:()=>"https://www.payfast.co.za/eng/process",getUrls:()=>{const s=window.location.origin;return{return_url:`${s}/#/profile`,cancel_url:`${s}/#/cart`,notify_url:`${s}/api/notify`}}},df=v.forwardRef(({amount:s,itemName:t,email:r,returnUrl:i,cancelUrl:o,notifyUrl:l,customStr1:d,customStr2:m,customStr3:p,customInt1:f,isSubscription:b=!1,frequency:w=3,cycles:N=0},R)=>{const P=v.useRef(null);v.useImperativeHandle(R,()=>({submit:()=>{P.current&&P.current.submit()}}));const _=Hd.getUrls(),O=Hd.MERCHANT_ID,L=Hd.MERCHANT_KEY,$=new Date;$.setDate($.getDate()+1);const M=$.toISOString().split("T")[0];return e.jsxs("form",{ref:P,action:Hd.getProcessUrl(),method:"POST",className:"hidden",children:[e.jsx("input",{type:"hidden",name:"merchant_id",value:O}),e.jsx("input",{type:"hidden",name:"merchant_key",value:L}),e.jsx("input",{type:"hidden",name:"return_url",value:i||_.return_url}),e.jsx("input",{type:"hidden",name:"cancel_url",value:o||_.cancel_url}),e.jsx("input",{type:"hidden",name:"notify_url",value:l||_.notify_url}),e.jsx("input",{type:"hidden",name:"amount",value:s.toFixed(2)}),e.jsx("input",{type:"hidden",name:"item_name",value:t}),e.jsx("input",{type:"hidden",name:"email_address",value:r||""}),d&&e.jsx("input",{type:"hidden",name:"custom_str1",value:d}),m&&e.jsx("input",{type:"hidden",name:"custom_str2",value:m}),p&&e.jsx("input",{type:"hidden",name:"custom_str3",value:p}),f&&e.jsx("input",{type:"hidden",name:"custom_int1",value:f}),b&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"hidden",name:"subscription_type",value:"1"}),e.jsx("input",{type:"hidden",name:"billing_date",value:M}),e.jsx("input",{type:"hidden",name:"recurring_amount",value:s.toFixed(2)}),e.jsx("input",{type:"hidden",name:"frequency",value:w}),e.jsx("input",{type:"hidden",name:"cycles",value:N})]})]})}),qd={"Eastern Cape":{"Gqeberha (Port Elizabeth)":["PEP Pier 14 (Ground Floor, 444 Govan Mbeki Ave)","PEP Home Walmer Park (Shop 87A, Walmer Park Shopping Centre)","PEP Greenacres","PEP Newton Park","PEP Summerstrand"],"East London":["PEP EL CBD (32 Oxford St)","PEP Hemingways Mall (Shop UG54, Hemingways Mall)","PEP Vincent Park","PEP Beacon Bay","PEP Gonubie"],Mthatha:["PEP Mthatha BT Ngebs City (Shop 89, BT Ngebs City)","PEP Mthatha Circus Triangle (Shop 7, Circus Triangle)","PEP Mthatha Plaza"],"Makhanda (Grahamstown)":["PEP Grahamstown High Street (48 High St)","PEP Market Square"],"Queenstown (Komani)":["PEP Queenstown Lukhanji Mall (Shop 45, Lukhanji Mall)"],Uitenhage:["PEP Uitenhage Mall","PEP Corkwood Square"],"Jeffreys Bay":["PEP Fountains Mall","PEP Jeffrey's Bay CBD"],"King William's Town":["PEP King William's Town CBD","PEP Metlife Mall"]},"Free State":{Bloemfontein:["PEP BFN St Andrew St (45 St Andrew St)","PEP Home Mimosa Mall (Mimosa Mall, 131 Kellner St)","PEP Loch Logan","PEP Fleurdal","PEP Northridge Mall"],Welkom:["PEP Welkom Bok Street (Shop 22A, Bok Street)","PEP Welkom Goldfields Mall (Shop U5, Goldfields Mall)","PEP Boitumelo Junction"],Bethlehem:["PEP Bethlehem Dihlabeng Mall (Shop 52, Dihlabeng Mall)","PEP Bethlehem CBD"],Sasolburg:["PEP Sasolburg (Shop 9 Sake Complex, Wandellaan Street)","PEP Sasolburg Mall"],Parys:["PEP Parys (Cnr Kort Street & Middle Street)"],Kroonstad:["PEP Kroonstad Reitz Street (21 Reitz St)","PEP Maokeng Mall"]},Gauteng:{Johannesburg:["PEP JHB Carlton Centre (C/O Commissioner St & Kruis Sts)","PEP Home Jabulani Mall (Shop 84, Jabulani Mall, Soweto)","PEP Sandton City (Shop U12, Sandton City, Rivonia Rd)","PEP Jozi CBD","PEP Braamfontein","PEP Rosebank Mall","PEP Mellville","PEP Cresta","PEP Clearwater Mall"],Pretoria:["PEP PTA Central (Cnr Paul Kruger & Pretorius St)","PEP Home Menlyn Park (Menlyn Park, Garsfontein Road)","PEP Centurion Mall (Shop 15, Centurion Mall, Heuwel Ave)","PEP Sunnyside","PEP Brooklyn","PEP Kolonnade","PEP Wonderpark"],Soweto:["PEP Maponya Mall","PEP Jabulani Mall","PEP Bara Mall","PEP Dobsonville"],Centurion:["PEP Centurion Mall","PEP Lyttelton","PEP Mall @ Reds","PEP Forest Hill"],Midrand:["PEP Mall of Africa","PEP Boulders","PEP Midrand CBD"],Benoni:["PEP Benoni Lakeside Mall (Shop L20, Lakeside Mall, Tom Jones St)","PEP Northmead Square"],Boksburg:["PEP East Rand Mall","PEP Sunward Park"],Krugersdorp:["PEP Krugersdorp Cnr Ockerse (Cnr Ockerse & Human Street)","PEP Krugersdorp Westgate (Shop 30, Westgate Shopping Centre)"],Alberton:["PEP Alberton City (SHOP L106, Alberton City, Voortrekker Street)"],Vereeniging:["PEP Vereeniging Arcon Park (Arcon Park Shopping Centre)","PEP Vereeniging CBD (12 Joubert Street)"]},"KwaZulu-Natal":{Durban:["PEP Durban Dr Pixley Kaseme St (442 Dr Pixley Kaseme Street)","PEP Bluff Towers (Shop 94 Bluff Twrs, 15 Tara Rd)","PEP Home Pavilion (Shop L94, The Pavilion Shopping Centre)","PEP Durban Workshop","PEP Musgrave","PEP Berea","PEP South Beach","PEP Ushaka"],Umhlanga:["PEP Gateway","PEP Crescent","PEP Cornubia"],Pietermaritzburg:["PEP PMB Liberty Mall (Shop 15, Liberty Midlands Mall)","PEP PMB CBD (335 Church Street)","PEP Greater Edendale"],"Richards Bay":["PEP Cell Richards Bay Boardwalk (Shop U004, Boardwalk Inkwazi)","PEP Richards Bay Checkers (Shop 17A, Checkers Centre)"],Ballito:["PEP Ballito Junction","PEP Lifestyle Centre"],Newcastle:["PEP Newcastle Mall","PEP Amajuba Mall"],"Port Shepstone":["PEP Port Shepstone (Cnr Escombe & Wooley St)","PEP South Coast Mall"],Ladysmith:["PEP Ladysmith Murchison Mall (Shop LG11, Murchison Mall)"],Kokstad:["PEP Kokstad Main Street (Shop 1 Spargs Building, 40 Main Street)"]},Limpopo:{Hoedspruit:["PEP Hoedspruit (Wildlife Shop 12)","PEP Hoedspruit Centre"],Ohrigstad:["PEP Ohrigstad (Potgieter St)"],Metz:["PEP Metz Mahlakung Shopping Centre (Shop 7)","PEP Cell Metz (Shop 11)"],Phalaborwa:["PEP Home Ba-phalaborwa Eden Square (Shop 13)","PEP Phalaborwa Shoprite Centre (Shop 8)","PEP Phalaborwa Mall (Shop 5)","PEP Cell Ba-phalaborwa (Shop 7C)","PEP Ba-phalaborwa Checkers (Shop 9)","PEP Phalaborwa Standard Bank Centre (Shop B1)","PEP Ba-phalaborwa Namakwale Crossing (Shop 7)","PEP Cell Phalaborwa Namakgale Crossing (Shop 26)","PEP Lulekani Spar Centre (Shop A3)"],Burgersfort:["PEP Home Burgersfort Tubatse (Shop L50)","PEP Cell Burgersfort Morone Centre (Shop 23A)","PEP Burgersfort Morone Shopping Centre (Shop 5 & 6)","PEP Burgersfort Twin City Mall (Shop 17)","PEP Cell Burgersfort Twin City (Shop 5)","PEP Cell Burgersfort Twin City Shop 41","PEP Burgersfort Platinum Place (Shop 1-3)","PEP Cell Burgersfort Castle Square (Shop 10)","PEP Burgersfort Castle Square (Shop 8)","PEP Burgersfort Burgersfort Mall (Shop 18)","PEP Cell Burgersfort Mall (Shop 28)","PEP Burgersfort Tubatse Mall (Shop L87)","PEP Cell Burgersfort Tubatse Crossing (Shop L57)"],Steelpoort:["PEP Home Steelpoort (Steelpoort Centre)","PEP Steelpoort (Shop 5)","PEP Cell Steelpoort Shopping Centre (Shop 19)"],Polokwane:["PEP Polokwane CBD (Cnr Grobler & Thabo Mbeki St)","PEP Mall of the North (Shop 10, Mall of the North)","PEP Savanna Mall","PEP Limpopo Mall"],Tzaneen:["PEP Tzaneen Tzaneng Mall (Shop B5, Tzaneng Mall, Danie Joubert St)","PEP Tzaneen CBD","PEP Tzaneen Crossing"],Thohoyandou:["PEP Thohoyandou Venda Plaza (Shop B1, Venda Plaza)","PEP Home Thohoyandou (Next to Shoprite, Thohoyandou)","PEP Thavhani Mall","PEP Mvyu"],Mokopane:["PEP Mokopane Mall","PEP Crossing"],"Makhado (Louis Trichardt)":["PEP Louis Trichardt Burger Str (Cnr Burger St & Songozwi Rd)"]},Mpumalanga:{Acornhoek:["PEP Home Acornhoek Mall (Shop 27)","PEP Acornhoek Plaza Extension (Shop 75)","PEP Cell Acornhoek Plaza (Shop 71)","PEP Cell Acornhoek Mall (Shop 3)","PEP Acornhoek Mall (Shop 10)","PEP Cell Acornhoek Mall (Shop 33B)","PEP Acornhoek Shopping Centre (Station Centre)","PEP Cell Acornhoek Shopping Centre"],Thulamahashe:["PEP Cell Thulamahashe (Thula Mall)","PEP Thulamahashe Thula Mall (Shop 17)","PEP Cell Thulamahashe Plaza (Shop 103)","PEP Thulamahashe (Plaza Shop 7)","PEP Cell Thulamahashe Plaza (Shop 14)"],Dwarsloop:["PEP Home Dwarsloop Mall (Shop 208)","PEP Dwarsloop Mall (Shop 66)","PEP Cell Dwarsloop Mall (Shop 48)"],Bushbuckridge:["PEP Bushbuckridge Twin City Mall (Shop 9)","PEP Cell Bushbuckridge Twin City Mall (Shop 2A)","PEP Cell Bushbuckridge Shopping Centre (Shop 1B)","PEP Bushbuckridge Shopping Centre (Shop 6)"],Graskop:["PEP Graskop (Spar Centre)"],Mkhuhlu:["PEP Cell Mkhuhlu (Plaza Shop 12)","PEP Mkhuhlu (Plaza Shop 7)"],Hazyview:["PEP Home Hazyview Junction (Shop 5A)","PEP Home Numbi Gate Dayizenza (Shop 7)","PEP Hazyview Junction (Shop 14B)","PEP Cell Lowveld Mall PNP (Shop 168)","PEP Cell Lowveld Mall Spar (Shop 12)","PEP Hazyview Blue Haze (Shop 304)","PEP Hazyview Lowveld Mall (Shop 232)","PEP Hazyview Lowveld Mall (Shop 155)","PEP Numbigate Dayizenza Plaza (Shop 38A)","PEP Cell Numbigate Dayizenza Plaza (Shop 12)"],Sabie:["PEP Sabie (Shopping Centre)"],"White River":["PEP Home White River Square (Shop 20)","PEP White River (Square Shop 17)","PEP Whiteriver Square 1 (Shop 17)","PEP White River Crossing (Shop 15)","PEP White River Kabokweni (Plaza Shop 10)","PEP Cell White River Kabokweni Plaza (Shop 205A)"],"Lydenburg (Mashishing)":["PEP Home Lydenburg Lt Centre (Shop 5)","PEP Lydenburg Highland Centre (Shop 6A)","PEP Lydenburg (Tamarisk Building)","PEP Cell Mashishing Shoprite Centre"],"Mbombela (Nelspruit)":["PEP Home Riverside Mall Nelspruit (Shop G241)","PEP Home Nelspruit Promenade (Shop 41 & 42)","PEP Home Nelspruit Ilanga Mall (Shop LG36)","PEP Home Nelspruit The Square (Shop 7)","PEP Nelspruit The Grove (Shop 18)","PEP Cell Nelspruit Plaza (Shop 28)","PEP Nelspruit Plaza (Shop 17-20)","PEP Cell Nelspruit Ekukhanyeni (Shop 5)","PEP Nelspruit Brown & Henshall Street","PEP Cell Nelspruit Promenade (Shop 49)","PEP Nelspruit Brown Street (Prorom Building)","PEP Nelspruit (Bester Brown Building)","PEP Nelspruit The Square (Shop 10)","PEP Nelspruit CBD","PEP Riverside Mall (Shop U40)"],Kanyamazane:["PEP Kanyamazane (Shopping Centre Shop 11)"],Emoyeni:["PEP Emoyeni Mall (Shop 22)","PEP Cell Emoyeni Mall (Shop 8)"],"eMalahleni (Witbank)":["PEP Witbank Taxi Rank (Shop 1, 3 Escombe St)","PEP Highveld Mall (Shop U03, Highveld Mall)","PEP Witbank CBD","PEP Saveways Crescent"],Middelburg:["PEP Home Middelburg Mall (Shop 97, Middelburg Mall)","PEP Middelburg CBD (28 Cowen Ntuli Street)","PEP Midwater"],Secunda:["PEP Secunda Mall (Shop 160, Secunda Mall)","PEP Secunda CBD"]},"North West":{Rustenburg:["PEP Rustenburg Mall (Shop 73 Rustenburg Mall)","PEP Waterfall Mall (Shop 12, Waterfall Mall)","PEP Rustenburg CBD","PEP Rustenburg Plaza","PEP Platinum Square"],Potchefstroom:["PEP Potch Walter Sisulu Lane (149 Walter Sisulu Lane)","PEP Home Mooirivier Mall (Shop 16, Mooirivier Mall)","PEP Potch CBD"],"Mahikeng (Mafikeng)":["PEP Mafikeng City Mall (Shop G10, Mafikeng City Mall)","PEP Mmabatho Crossing (Shop 25, Mmabatho Crossing)","PEP Mahikeng CBD","PEP Mega City"],Klerksdorp:["PEP Klerksdorp Terminus (Shop 19, The Terminus Centre)","PEP Klerksdorp CBD","PEP Matlosana Mall","PEP City Mall"],Brits:["PEP Brits Town Centre (Shop G2, Brits Town Centre)","PEP Brits Mall"]},"Northern Cape":{Kimberley:["PEP North Cape Mall (Shop 60, North Cape Mall)","PEP Home Diamond Pavilion Mall (Shop 93, Diamond Pavilion Mall)","PEP Kimberley CBD","PEP New Park"],Upington:["PEP Upington Mall (Shop 12, Upington Mall)","PEP Upington CBD (20 Schroder Street)","PEP Kalahari Mall"],Kuruman:["PEP Kuruman Beare Street (Shop 28B, Beare Street)","PEP Kuruman Mall","PEP The Eye"],"De Aar":["PEP De Aar Main Road (35 Main Road, De Aar)"],Springbok:["PEP Springbok (62 Main Street, Springbok)"]},"Western Cape":{"Cape Town":["PEP CPT Station (Cape Town Station Concourse)","PEP Golden Acre (Shop 10, Golden Acre Mall)","PEP Home Parow Centre (Shop G6, Parow Centre, Voortrekker Rd)","PEP Gardens","PEP V&A Waterfront","PEP Canal Walk","PEP Blue Route"],Stellenbosch:["PEP Eikestad Mall (Shop E4, Eikestad Mall, 43 Andringa Rd)","PEP Kayamandi (Shop 11, Kayamandi Shopping Centre)","PEP Stellenbosch Central"],George:["PEP George Garden Route Mall (Shop 2, Garden Route Mall)","PEP George CBD (82 Hibernia Street)","PEP York Street"],Paarl:["PEP Paarl Mall (Shop 12, Paarl Mall, Cnr Newvlei & Jones St)","PEP Lady Grey","PEP Rembrandt Mall"],Hermanus:["PEP Hermanus Whale Coast Mall (Shop 15, Whale Coast Mall)"],Knysna:["PEP Knysna Long Street (13 Long Street, Knysna)","PEP Knysna Mall","PEP Woodmill Lane"],"Somerset West":["PEP Somerset Mall","PEP Main Road","PEP Waterstone"],"Mossel Bay":["PEP Mossel Bay Mall","PEP Langeberg Mall"],Worcester:["PEP Mountain Mill","PEP Worcester CBD"]}},VT=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm  8cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],WT={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:0}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:0}]},HT=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],qT=({cartItemCount:s,onShippingChange:t,subtotal:r})=>{var ce,ye,je,K,me;const{user:i,currency:o}=vt(),[l,d]=v.useState("pudo"),[m,p]=v.useState(""),[f,b]=v.useState(""),[w,N]=v.useState(""),[R,P]=v.useState(""),[_,O]=v.useState(""),[L,$]=v.useState(""),[M,te]=v.useState(""),[H,U]=v.useState("economy"),[E,j]=v.useState({street:((ce=i.shippingAddress)==null?void 0:ce.street)||"",suburb:((ye=i.shippingAddress)==null?void 0:ye.suburb)||"",city:((je=i.shippingAddress)==null?void 0:je.city)||"",province:((K=i.shippingAddress)==null?void 0:K.province)||"",postalCode:((me=i.shippingAddress)==null?void 0:me.postalCode)||""}),[S,D]=v.useState({street:"",suburb:"",city:"",province:"",postalCode:"",country:"",email:""}),[I,F]=v.useState(VT),[C,ee]=v.useState(WT),[ue,Se]=v.useState(HT),Pe=r>=500;return v.useEffect(()=>{Pe&&l==="door"&&d("pudo")},[Pe,l]),v.useEffect(()=>{o==="USD"?d("international"):l==="international"&&d("pudo")},[o]),v.useEffect(()=>{try{const se=localStorage.getItem("spv_pudo_costs");se&&F(JSON.parse(se));const ve=localStorage.getItem("spv_paxi_costs");ve&&ee(JSON.parse(ve));const G=localStorage.getItem("spv_door_to_door_costs");G&&Se(JSON.parse(G))}catch(se){console.error("Failed to load shipping costs from storage",se)}},[]),v.useEffect(()=>{let se=0,ve="";if(l==="pudo"){const G=s<=20?"Extra-Small (XS)":"Small (S)",Ie=I.find(He=>He.name===G);let be="locker";Ie?Ie.lockerToLockerCost!==null?se=Ie.boxCost+Ie.lockerToLockerCost+Ie.lockerHandleFee:Ie.doorToLockerCost!==null?(se=Ie.boxCost+Ie.doorToLockerCost+Ie.doorHandleFee,be="door"):se=Ie.boxCost:se=60,_&&L&&M&&(ve=`${_} | ${L} | ${M} | ${be}`)}else if(l==="paxi"){let G="7-9 Days Service";r>1e3&&(G="3-5 Days Service");const Ie=C[G],be=s<=20?"Small":"Large",He=Ie.find(at=>at.bag.includes(be));He?se=(be==="Small"?6:15)+He.serviceCost+He.handleFee:se=60,m&&f&&w&&R&&(ve=`${m} | ${f} | ${w} | ${R} | ${G}`)}else if(l==="door"){const G=H==="overnight"?"Overnight":"Economy",Ie=ue.find(be=>be.service.includes(G));Ie?se=Ie.boxFee+Ie.initialCharge+(Ie.ratePerKg!==null?Ie.ratePerKg:0)+Ie.handleFee:se=120,E.street&&E.city&&E.postalCode&&(ve=JSON.stringify({...E,service:H}))}else l==="international"&&(se=60,S.street&&S.city&&S.postalCode?ve=`International Shipping | ${S.street}, ${S.suburb?S.suburb+", ":""}${S.city}, ${S.province?S.province+", ":""}${S.postalCode}${S.country?", "+S.country:""}${S.email?" | Email: "+S.email:""}`:ve="International Shipping");t({method:l,cost:se,details:ve})},[l,s,I,C,ue,H,_,L,M,m,f,w,R,E,S,t]),v.useEffect(()=>{$("")},[_]),v.useEffect(()=>{b(""),N(""),P("")},[m]),v.useEffect(()=>{N(""),P("")},[f]),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[e.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx($n,{size:18,className:"text-cyan-400"})," Shipping Method"]}),e.jsx("div",{className:"space-y-3",children:o==="USD"?e.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${l==="international"?"bg-green-900/20 border-green-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${l==="international"?"border-green-500 bg-green-500":"border-gray-500"}`,children:l==="international"&&e.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),e.jsx("span",{className:"text-sm text-gray-300",children:"International Shipping $60"})]}),e.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:l==="international",onChange:()=>d("international")})]}):e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${l==="pudo"?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${l==="pudo"?"border-cyan-500 bg-cyan-500":"border-gray-500"}`,children:l==="pudo"&&e.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),e.jsx("span",{className:"text-sm text-gray-300",children:"PUDO Locker to Locker"})]}),e.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:l==="pudo",onChange:()=>d("pudo")})]}),e.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${l==="paxi"?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${l==="paxi"?"border-yellow-500 bg-yellow-500":"border-gray-500"}`,children:l==="paxi"&&e.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),e.jsx("span",{className:"text-sm text-gray-300",children:"PAXI (PEP Store - 7-9 Days)"})]}),e.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:l==="paxi",onChange:()=>d("paxi")})]}),e.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${l==="door"?"bg-purple-900/20 border-purple-500 cursor-pointer":Pe?"bg-zinc-900 border-gray-800 opacity-50 cursor-not-allowed":"bg-black border-gray-700 hover:border-gray-600 cursor-pointer"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${l==="door"?"border-purple-500 bg-purple-500":Pe?"border-gray-700":"border-gray-500"}`,children:l==="door"&&e.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),e.jsxs("div",{children:[e.jsx("span",{className:`text-sm ${Pe?"text-gray-500":"text-gray-300"}`,children:"PUDO Door to Door"}),Pe&&e.jsx("span",{className:"text-xs text-gray-500 block",children:"Not available for free shipping"})]})]}),e.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:l==="door",onChange:()=>d("door"),disabled:Pe})]})]})}),l==="pudo"&&e.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-cyan-500/20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("label",{className:"text-[10px] text-cyan-400 uppercase font-bold",children:"Select PUDO Locker Location"}),e.jsxs("a",{href:"https://thecourierguy.co.za/locations/",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[e.jsx(vc,{size:10})," Find PUDO Locker Location Click Here"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:_,onChange:se=>O(se.target.value),children:[e.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(qd).sort().map(se=>e.jsx("option",{value:se,children:se},se))]}),e.jsx(Wd,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),_&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[e.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:L,onChange:se=>$(se.target.value),children:[e.jsx("option",{value:"",children:"-- Select Town --"}),Object.keys(qd[_]||{}).sort().map(se=>e.jsx("option",{value:se,children:se},se))]}),e.jsx(Wd,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),L&&e.jsx("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Locker Name / Address"}),e.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none",placeholder:"e.g. PUDO Locker @ Sandton City",value:M,onChange:se=>te(se.target.value)})]})})]}),l==="paxi"&&e.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-yellow-500/20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("label",{className:"text-[10px] text-yellow-400 uppercase font-bold",children:"Select PEP Store"}),e.jsxs("a",{href:"https://www.paxi.co.za/paxi-points",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[e.jsx(vc,{size:10})," Find PAXI Point"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:m,onChange:se=>p(se.target.value),children:[e.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(qd).sort().map(se=>e.jsx("option",{value:se,children:se},se))]}),e.jsx(Wd,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),m&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[e.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:f,onChange:se=>b(se.target.value),children:[e.jsx("option",{value:"",children:"-- Select Town --"}),Object.keys(qd[m]||{}).sort().map(se=>e.jsx("option",{value:se,children:se},se))]}),e.jsx(Wd,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),f&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Store Name (or P-Code)"}),e.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. PEP Home Acornhoek Mall",value:w,onChange:se=>N(se.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Store Street Address"}),e.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. Shop 27, Acornhoek Mall, R40 Main Rd",value:R,onChange:se=>P(se.target.value)})]})]})]}),l==="door"&&e.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-purple-500/20",children:[e.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block",children:"Select Service"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${H==="economy"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[e.jsx("input",{type:"radio",name:"doorService",value:"economy",checked:H==="economy",onChange:()=>U("economy"),className:"hidden"}),"Economy Road"]}),e.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${H==="overnight"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[e.jsx("input",{type:"radio",name:"doorService",value:"overnight",checked:H==="overnight",onChange:()=>U("overnight"),className:"hidden"}),"Overnight Courier"]})]}),e.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block pt-2 border-t border-gray-700/50",children:"Delivery Address"}),e.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:E.street,onChange:se=>j({...E,street:se.target.value})}),e.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:E.suburb,onChange:se=>j({...E,suburb:se.target.value})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:E.city,onChange:se=>j({...E,city:se.target.value})}),e.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:E.postalCode,onChange:se=>j({...E,postalCode:se.target.value})})]}),e.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:E.province,onChange:se=>j({...E,province:se.target.value})})]}),l==="international"&&e.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-green-500/20",children:[e.jsx("label",{className:"text-[10px] text-green-400 uppercase font-bold block",children:"International Shipping Address"}),e.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:S.street,onChange:se=>D({...S,street:se.target.value})}),e.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:S.suburb,onChange:se=>D({...S,suburb:se.target.value})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:S.city,onChange:se=>D({...S,city:se.target.value})}),e.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:S.postalCode,onChange:se=>D({...S,postalCode:se.target.value})})]}),e.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:S.province,onChange:se=>D({...S,province:se.target.value})}),e.jsx("input",{type:"text",placeholder:"Country",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:S.country||"",onChange:se=>D({...S,country:se.target.value})}),e.jsx("input",{type:"email",placeholder:"Email",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:S.email||"",onChange:se=>D({...S,email:se.target.value})}),e.jsx("p",{className:"text-xs text-yellow-400 mt-2",children:"You are liable for any import taxes if any arises."})]})]})},GT=()=>{const{cart:s,removeFromCart:t,updateCartQuantity:r,getCartTotal:i,user:o,appliedVoucher:l,setAppliedVoucher:d,applyExternalVoucher:m,updateUserAddress:p,setIsStickyProgressBarVisible:f,checkout:b,clearCart:w,register:N,login:R,currency:P}=vt(),_=nr(),[O,L]=v.useState({method:"pudo",cost:60,details:""}),[$,M]=v.useState(""),[te,H]=v.useState(""),[U,E]=v.useState(0),j=v.useRef(null),[S,D]=v.useState(null),[I,F]=v.useState(!1),[C,ee]=v.useState("register"),[ue,Se]=v.useState(!1),[Pe,ce]=v.useState(!1),[ye,je]=v.useState(""),[K,me]=v.useState(""),[se,ve]=v.useState(""),[G,Ie]=v.useState(""),[be,He]=v.useState(""),[qe,at]=v.useState("");v.useEffect(()=>{f(!1)},[f]),v.useEffect(()=>{Pe&&o.email&&(nt(),ce(!1))},[Pe,o.email]),v.useEffect(()=>{S&&j.current&&(j.current.submit(),w())},[S,w]);const Rt=()=>{f(!0),_("/")},xe=i(),Je=s.reduce((De,Ns)=>De+Ns.quantity,0),wt=xe>=500&&(O.method==="pudo"||O.method==="paxi"),Lt=wt?0:O.cost;let ae=0;l&&(l.minSpend&&xe<l.minSpend||(l.discountType==="percentage"?ae=xe*l.value/100:ae=l.value)),ae>xe&&(ae=xe);let ge=0;const ze=xe-ae;o!=null&&o.storeCredit&&o.storeCredit>0&&o.creditCurrency===P&&(ge=Math.min(ze,o.storeCredit));let we=0;if(U>0){const De=P==="ZAR"?1:.5;we=U/100*De}const Ue=xe+Lt-ae-ge-we,et=()=>{if(H(""),!$.trim())return;m($.trim())?M(""):H("Invalid or expired voucher code.")},fe=async()=>{if(!O.details){alert("Please complete all shipping details.");return}if(!o.email){F(!0);return}await nt()},nt=async()=>{O.method==="door"&&await p(JSON.parse(O.details));try{const De=await b({items:s,total:Ue,shippingMethod:O.method,shippingDetails:O.details,shippingCost:Lt,pointsToRedeem:U});D(De)}catch(De){console.error("Order creation failed",De),alert("Could not create your order. Please try again.")}},dt=async De=>{if(De.preventDefault(),je(""),be!==qe){je("Passwords do not match!");return}await N({name:K,email:se,birthday:G,password:be})?(F(!1),ce(!0)):je("Registration failed. Please try again.")},_t=async De=>{De.preventDefault(),je(""),await R(se,be)?(F(!1),ce(!0)):je("Invalid credentials.")},xt=()=>P==="ZAR"?"R":"$",Kt=(De,Ns)=>P==="ZAR"?De:P==="USD"?Ns!==void 0?Ns:0:De,Bt=P==="ZAR"?"R1.00":"$0.50",is=P==="ZAR"?"R10":"$5",ds=P==="ZAR"?"R100":"$50";return s.length===0?e.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-zinc-900 rounded-full flex items-center justify-center text-gray-600",children:e.jsx(xc,{size:40})}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Cart is Empty"}),e.jsx("p",{className:"text-gray-400",children:"Looks like you haven't added any treasures yet."}),e.jsx(We,{to:"/",className:"px-6 py-3 bg-pink-600 text-white font-bold rounded-full hover:bg-pink-500 transition-colors",children:"Start Shopping"})]}):e.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[e.jsx(dw,{subtotal:xe,onContinueShopping:Rt}),I&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>F(!1)}),e.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:C==="register"?"Create an Account":"Sign In"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"An account is required to track your order history and status."})]}),C==="register"?e.jsxs("form",{onSubmit:dt,className:"space-y-4",children:[e.jsx("input",{type:"text",required:!0,value:K,onChange:De=>me(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Full Name"}),e.jsx("input",{type:"email",required:!0,value:se,onChange:De=>ve(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),e.jsx("input",{type:"date",required:!0,value:G,onChange:De=>Ie(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"}),e.jsx("input",{type:ue?"text":"password",required:!0,value:be,onChange:De=>He(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Create Password"}),e.jsx("input",{type:ue?"text":"password",required:!0,value:qe,onChange:De=>at(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Confirm Password"}),ye&&e.jsx("p",{className:"text-xs text-red-400 text-center",children:ye}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500",children:"Create Account & Continue"}),e.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",e.jsx("button",{type:"button",onClick:()=>ee("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):e.jsxs("form",{onSubmit:_t,className:"space-y-4",children:[e.jsx("input",{type:"email",required:!0,value:se,onChange:De=>ve(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),e.jsx("input",{type:ue?"text":"password",required:!0,value:be,onChange:De=>He(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Password"}),ye&&e.jsx("p",{className:"text-xs text-red-400 text-center",children:ye}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500",children:"Sign In & Continue"}),e.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",e.jsx("button",{type:"button",onClick:()=>ee("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx(df,{ref:j,amount:(S==null?void 0:S.total)??Ue,itemName:S?`Order ${S.orderNumber}`:"Spoil Me Vintage Order",email:o.email,customStr1:(S==null?void 0:S.id)??"",customStr2:O.method,customStr3:(l==null?void 0:l.code)||""}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-white mb-4",children:["Shopping Cart (",Je,")"]}),e.jsx("div",{className:"space-y-4",children:s.map((De,Ns)=>{let us=De.stock;De.type==="Ring"&&De.selectedSize&&De.ringStock&&(us=De.ringStock[De.selectedSize]||0);const Ms=De.quantity>=us;return e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-4 rounded-xl flex gap-4 items-start",children:[e.jsx("div",{className:"w-20 h-20 bg-black rounded-lg overflow-hidden border border-gray-700 shrink-0",children:e.jsx("img",{src:De.images[0],alt:De.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-bold text-white text-sm line-clamp-2",children:De.name}),e.jsx("button",{onClick:()=>t(De.id,{selectedSize:De.selectedSize,selectedMaterial:De.selectedMaterial,selectedChainStyle:De.selectedChainStyle,selectedChainLength:De.selectedChainLength}),className:"text-gray-500 hover:text-red-400 p-1",children:e.jsx(zn,{size:16})})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1 space-y-0.5",children:[De.selectedSize&&e.jsxs("div",{children:["Size: ",e.jsx("span",{className:"text-gray-300",children:De.selectedSize})]}),De.selectedMaterial&&e.jsxs("div",{children:["Material: ",e.jsx("span",{className:"text-gray-300",children:De.selectedMaterial})]}),De.selectedChainStyle&&e.jsxs("div",{children:["Chain: ",e.jsxs("span",{className:"text-gray-300",children:[De.selectedChainStyle," ",De.selectedChainLength?`(${De.selectedChainLength})`:""]})]})]}),e.jsxs("div",{className:"flex justify-between items-end mt-3",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-black rounded-lg border border-gray-700 px-2 py-1",children:[e.jsx("button",{onClick:()=>r(De.id,De.quantity-1,De),className:"text-gray-400 hover:text-white",children:e.jsx(aw,{size:14})}),e.jsx("span",{className:"text-sm font-bold text-white w-4 text-center",children:De.quantity}),e.jsx("button",{onClick:()=>r(De.id,De.quantity+1,De),className:"text-gray-400 hover:text-white disabled:text-gray-700 disabled:cursor-not-allowed",disabled:Ms,children:e.jsx(dr,{size:14})})]}),e.jsxs("div",{className:"font-bold text-white",children:[xt(),((Kt(De.price,De.priceUSD||De.price)+(De.selectedMaterialModifier||0))*De.quantity).toFixed(2)]})]})]})]},`${De.id}_${Ns}`)})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(qT,{cartItemCount:Je,onShippingChange:L,subtotal:xe}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[e.jsx("h3",{className:"font-bold text-white mb-4",children:"Summary"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-400 mb-4 pb-4 border-b border-gray-800",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"text-white",children:[xt(),xe.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{className:"text-white",children:wt?e.jsx("span",{className:"text-green-400",children:"FREE"}):`${xt()}${Lt.toFixed(2)}`})]}),ae>0&&e.jsxs("div",{className:"flex justify-between text-green-400",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-",xt(),ae.toFixed(2)]})]}),ge>0&&e.jsxs("div",{className:"flex justify-between text-green-400",children:[e.jsx("span",{children:"Store Credit"}),e.jsxs("span",{children:["-",xt(),ge.toFixed(2)]})]}),we>0&&e.jsxs("div",{className:"flex justify-between text-purple-400",children:[e.jsx("span",{children:"Loyalty Discount"}),e.jsxs("span",{children:["-",xt(),we.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex justify-between items-end mb-6",children:[e.jsx("span",{className:"text-gray-300 font-bold",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold text-white",children:[xt(),Ue.toFixed(2)]})]}),l?e.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 p-3 rounded-lg mb-4 flex justify-between items-center text-xs",children:[e.jsxs("span",{className:"text-green-400 font-bold flex items-center gap-1",children:[e.jsx(pt,{size:12})," Code ",l.code," Applied"]}),e.jsx("button",{onClick:()=>d(null),className:"text-gray-500 hover:text-white",children:"Remove"})]}):e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Promo Code",className:"flex-1 bg-black border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-pink-500 outline-none",value:$,onChange:De=>M(De.target.value)}),e.jsx("button",{onClick:et,className:"bg-zinc-800 hover:bg-zinc-700 text-white px-3 py-2 rounded-lg text-sm border border-gray-600",children:"Apply"})]}),te&&e.jsx("p",{className:"text-xs text-red-400 mb-4",children:te}),o.email&&o.loyaltyPoints>=1e3&&e.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-lg mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-2",children:"Redeem Loyalty Points"}),e.jsxs("p",{className:"text-xs text-gray-400 mb-3",children:["100 points = ",Bt," discount. Min 1000 points (",is,"). ",o.isMember?"":`Non-members: max ${ds} per order.`]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"0",max:Math.min(o.loyaltyPoints,o.isMember?o.loyaltyPoints:1e4),step:"100",value:U,onChange:De=>E(Math.max(0,parseInt(De.target.value)||0)),className:"flex-1 bg-black border border-gray-700 rounded px-3 py-2 text-white text-sm",placeholder:"Points to redeem"}),e.jsx("button",{onClick:()=>E(Math.min(o.loyaltyPoints,o.isMember?o.loyaltyPoints:1e4)),className:"bg-purple-600 hover:bg-purple-500 text-white px-3 py-2 rounded text-sm",children:"Max"})]}),U>0&&e.jsxs("p",{className:"text-xs text-purple-400 mt-2",children:["Discount: ",xt(),(U/100).toFixed(2)]})]}),e.jsxs("button",{onClick:fe,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:["Pay Now ",e.jsx(rr,{size:20})]}),e.jsxs("div",{className:"text-center mt-3 text-xs text-gray-500 flex justify-center gap-2",children:[e.jsx(qi,{size:14})," Secure Payment via PayFast"]})]})]})]})]})},KT=()=>{const{user:s,products:t,logout:r,currency:i,closeAccount:o}=vt(),l=nr(),[d,m]=v.useState(!1),[p,f]=v.useState(!1),[b,w]=v.useState(""),N=t.filter(M=>(s.wishlist||[]).includes(M.id));if(!s.email)return l("/login"),null;const R=i==="ZAR"?"R10":"$3",P=i==="ZAR"?"R1.00":"$0.50",_=i==="ZAR"?"R10":"$5",O=i==="ZAR"?"R100 (10,000 pts)":"$50 (10,000 pts)",L=i==="ZAR"?"R100":"$50",$=async()=>{try{await o(b),f(!1),alert("Sorry to see you go. Your account will be deleted within 24 hours."),r(),l("/")}catch(M){console.error("Error closing account:",M),alert("Failed to close account. Please try again.")}};return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[d&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>m(!1)}),e.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[e.jsx("button",{onClick:()=>m(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:e.jsx(ns,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:e.jsx(Br,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),e.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",e.jsxs("span",{className:"text-green-400",children:["1 Point for every ",R]})," spent on products."]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",e.jsx("span",{className:"text-green-400",children:"100 Points"})," for every verified review."]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",e.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing products on social media."]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",e.jsxs("span",{className:"text-white font-bold",children:[P," Discount"]}),"."]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum redemption is 1000 Points (",_,")."]})]})]}),e.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[e.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[e.jsx(Br,{size:14})," Membership Rule"]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",e.jsx("strong",{children:O})," per order. To redeem more than ",L," at once, you must be a ",e.jsx(We,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),e.jsx("button",{onClick:()=>m(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),p&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>f(!1)}),e.jsxs("div",{className:"bg-zinc-900 border border-red-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(239,68,68,0.3)] animate-in zoom-in-95 duration-200",children:[e.jsx("button",{onClick:()=>f(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:e.jsx(ns,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-red-900/50 rounded-full border border-red-500 text-red-300",children:e.jsx(Ny,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Close Account"})]}),e.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[e.jsx("p",{className:"text-red-400 font-semibold",children:"Are you sure you want to close your account?"}),e.jsx("p",{className:"text-gray-400",children:"This action cannot be undone. Your account and all associated data will be permanently deleted within 24 hours."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Please tell us why you're leaving (optional)"}),e.jsx("textarea",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-red-500 outline-none resize-none",rows:3,placeholder:"Help us improve our service...",value:b,onChange:M=>w(M.target.value)})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white font-bold rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{onClick:$,className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-xl transition-colors",children:"Close Account"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsxs("h1",{className:"text-[28px] font-cherry text-white",children:["Welcome, ",s.name||s.firstName||"User"]}),e.jsx("p",{className:"text-[14px] font-architects text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-yellow-400 italic",children:"Your personal vault of timeless treasuresbecause ordinary is not your style."})]}),e.jsx("div",{className:"flex-1 flex justify-end",children:e.jsx("button",{onClick:()=>{r(),l("/")},className:"p-3 bg-zinc-800 hover:bg-zinc-700 border border-gray-700 rounded-full transition-colors text-gray-400 hover:text-red-400",title:"Logout",children:e.jsx(Ny,{size:20})})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 border border-purple-700 rounded-2xl p-6 text-white shadow-[0_0_20px_rgba(168,85,247,0.2)] relative overflow-hidden mb-8",children:[e.jsx("button",{onClick:()=>m(!0),className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors text-white/80 hover:text-white z-10",children:e.jsx(Ic,{size:18})}),e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Loyalty Balance"}),e.jsxs("p",{className:"text-xs text-white flex items-center gap-1 mt-1",children:[e.jsx(fl,{size:10})," 1 pt per ",R," spent"]}),e.jsxs("p",{className:"text-xs text-white flex items-center gap-1",children:[e.jsx(al,{size:10})," 100 pts per review"]}),e.jsxs("p",{className:"text-xs text-white flex items-center gap-1",children:[e.jsx(ol,{size:10})," 50 pts per share"]})]}),e.jsx(Br,{size:28,className:"text-pink-300 drop-shadow-[0_0_5px_rgba(236,72,153,0.8)] mr-8"})]}),e.jsxs("div",{className:"text-[22px] font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-white to-pink-200",children:[s.loyaltyPoints||0," ",e.jsx("span",{className:"text-lg font-normal opacity-80 text-white",children:"Points"})]}),e.jsx("div",{className:"mt-4 text-xs bg-black/30 p-3 rounded-lg border border-white/10",children:(s.loyaltyPoints||0)>=1e3?`You have ${i==="ZAR"?"R":"$"}${(Math.floor((s.loyaltyPoints||0)/1e3)*(i==="ZAR"?10:5)).toFixed(2)} off available for your next order!`:`${1e3-(s.loyaltyPoints||0)} more points needed for a ${i==="ZAR"?"R10":"$5"} voucher.`})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Partnership Program"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Earn 20% commission on referrals"})]}),e.jsx(Ps,{size:28,className:"text-green-400 drop-shadow-[0_0_5px_rgba(74,222,128,0.6)]"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-black p-3 rounded-lg flex justify-between items-center border border-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Your Referral Code"}),e.jsx("span",{className:"font-mono font-bold text-base text-cyan-400 tracking-wider",children:s.affiliateCode||"N/A"})]}),e.jsx("button",{className:"p-2 text-gray-500 hover:text-cyan-400 transition-colors",children:e.jsx(Mu,{size:18})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Total Earnings"}),e.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",(s.affiliateEarnings||0).toFixed(2)]})]}),e.jsx(We,{to:"/affiliate-program",className:"block w-full py-2 border border-cyan-500/50 text-cyan-400 rounded-lg font-semibold hover:bg-cyan-900/30 transition-colors text-sm text-center",children:"View Dashboard"})]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Account Management"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage your account settings"})]}),e.jsx(Fn,{size:28,className:"text-blue-400 drop-shadow-[0_0_5px_rgba(59,130,246,0.6)]"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-black p-3 rounded-lg border border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Account Status"}),e.jsx("span",{className:"font-medium text-green-400",children:"Active"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs text-gray-500 block",children:"Member Since"}),e.jsx("span",{className:"text-sm text-white",children:new Date(s.createdAt||Date.now()).toLocaleDateString()})]})]})}),e.jsx("button",{onClick:()=>f(!0),className:"w-full py-3 border border-red-500/50 text-red-400 rounded-lg font-semibold hover:bg-red-900/30 transition-colors text-sm",children:"Close Account"})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-800",children:[e.jsxs("h2",{className:"text-[20px] font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(pl,{size:20,className:"text-pink-500"})," Wishlist (",N.length,")"]}),N.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:N.map(M=>e.jsx(to,{product:M},M.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Your wishlist is empty."})]})]})},JT=()=>{const[s,t]=v.useState(""),[r,i]=v.useState(""),[o,l]=v.useState(""),[d,m]=v.useState(""),{login:p,authErrorMessage:f,clearAuthError:b}=vt(),w=nr(),N=async R=>{R.preventDefault(),l(""),b(),await p(s,r)?w(s==="spoilmevintagediy@gmail.com"?"/admin":"/"):l(f||"Invalid credentials. Please check your email and password.")};return v.useEffect(()=>{try{const R=localStorage.getItem("spv_admin_denied");R&&(m(R),localStorage.removeItem("spv_admin_denied"))}catch{}},[]),e.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-zinc-900 rounded-2xl border border-gray-800 shadow-xl",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-handwriting font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Welcome Back"}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Sign in to access your account"})]}),e.jsxs("form",{className:"space-y-6",onSubmit:N,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(bc,{size:18,className:"text-gray-500"})}),e.jsx("input",{type:"email",name:"email",autoComplete:"email",required:!0,value:s,onChange:R=>{t(R.target.value),b(),l("")},className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:"name@example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(da,{size:18,className:"text-gray-500"})}),e.jsx("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,value:r,onChange:R=>{i(R.target.value),b(),l("")},className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:""})]})]})]}),o&&e.jsx("div",{className:"p-3 bg-red-900/20 border border-red-900/50 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-400 text-center",children:o})}),d&&e.jsx("div",{className:"p-3 bg-yellow-900/20 border border-yellow-800 rounded-lg mt-2",children:e.jsx("p",{className:"text-sm text-yellow-200 text-center",children:d})}),e.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-pink-600 hover:bg-pink-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition-all hover:shadow-[0_0_15px_rgba(236,72,153,0.4)]",children:["Sign In ",e.jsx(rr,{size:16})]})]}),e.jsx("div",{className:"text-center pt-4 border-t border-gray-800",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Don't have an account? ",e.jsx("span",{className:"text-gray-400",children:"Registration is currently invite only."})]})})]})})};/*!
 * react-paypal-js v8.9.2 (2025-10-02T20:17:55.069Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kr;(function(s){s.INITIAL="initial",s.PENDING="pending",s.REJECTED="rejected",s.RESOLVED="resolved"})(kr||(kr={}));var oa;(function(s){s.LOADING_STATUS="setLoadingStatus",s.RESET_OPTIONS="resetOptions",s.SET_BRAINTREE_INSTANCE="braintreeInstance"})(oa||(oa={}));var Oy;(function(s){s.NUMBER="number",s.CVV="cvv",s.EXPIRATION_DATE="expirationDate",s.EXPIRATION_MONTH="expirationMonth",s.EXPIRATION_YEAR="expirationYear",s.POSTAL_CODE="postalCode"})(Oy||(Oy={}));var Cs=function(){return Cs=Object.assign||function(t){for(var r,i=1,o=arguments.length;i<o;i++){r=arguments[i];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},Cs.apply(this,arguments)};function xw(s,t){var r={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(r[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(r[i[o]]=s[i[o]]);return r}function Dy(s,t,r){if(r||arguments.length===2)for(var i=0,o=t.length,l;i<o;i++)(l||!(i in t))&&(l||(l=Array.prototype.slice.call(t,0,i)),l[i]=t[i]);return s.concat(l||Array.prototype.slice.call(t))}var Nc="data-react-paypal-script-id",Va={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},ZT="Failed to load the PayPal JS SDK script.",yw="paypal",YT="usePayPalScriptReducer must be used within a PayPalScriptProvider";function XT(s){return s===void 0&&(s=yw),window[s]}function QT(s){for(var t="",r=0;r<s.length;r++){var i=s[r].charCodeAt(0)*r;s[r+1]&&(i+=s[r+1].charCodeAt(0)*(r-1)),t+=String.fromCharCode(97+Math.abs(i)%26)}return t}function e5(s){var t=s.reactComponentName,r=s.sdkComponentKey,i=s.sdkRequestedComponents,o=i===void 0?"":i,l=s.sdkDataNamespace,d=l===void 0?yw:l,m=r.charAt(0).toUpperCase().concat(r.substring(1)),p="Unable to render <".concat(t," /> because window.").concat(d,".").concat(m," is undefined."),f=typeof o=="string"?o:o.join(",");if(!f.includes(r)){var b=[f,r].filter(Boolean).join();p+=`
To fix the issue, add '`.concat(r,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(b,"'}}>`.")}return p}function bw(s){var t=s,r=Nc;t[r];var i=xw(t,[r+""]);return"react-paypal-js-".concat(QT(JSON.stringify(i)))}function t5(s){var t=self.document.querySelector("script[".concat(Nc,'="').concat(s,'"]'));t!=null&&t.parentNode&&t.parentNode.removeChild(t)}function s5(s,t){var r,i;switch(t.type){case oa.LOADING_STATUS:return typeof t.value=="object"?Cs(Cs({},s),{loadingStatus:t.value.state,loadingStatusErrorMessage:t.value.message}):Cs(Cs({},s),{loadingStatus:t.value});case oa.RESET_OPTIONS:return t5(s.options[Nc]),Cs(Cs({},s),{loadingStatus:kr.PENDING,options:Cs(Cs((r={},r[Va.DATA_SDK_INTEGRATION_SOURCE]=Va.DATA_LIBRARY_VALUE,r),t.value),(i={},i[Nc]="".concat(bw(t.value)),i))});case oa.SET_BRAINTREE_INSTANCE:return Cs(Cs({},s),{braintreePayPalCheckoutInstance:t.value});default:return s}}var vw=v.createContext(null);function r5(s){if(typeof(s==null?void 0:s.dispatch)=="function"&&s.dispatch.length!==0)return s;throw new Error(YT)}function n5(){var s=r5(v.useContext(vw)),t=Cs(Cs({},s),{isInitial:s.loadingStatus===kr.INITIAL,isPending:s.loadingStatus===kr.PENDING,isResolved:s.loadingStatus===kr.RESOLVED,isRejected:s.loadingStatus===kr.REJECTED});return[t,s.dispatch]}v.createContext({});function i5(s){var t=v.useRef(new Proxy({},{get:function(r,i,o){return typeof r[i]=="function"?function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return r[i].apply(r,l)}:Reflect.get(r,i,o)}}));return t.current=Object.assign(t.current,s),t.current}var Sc=function(s){var t,r=s.className,i=r===void 0?"":r,o=s.disabled,l=o===void 0?!1:o,d=s.children,m=s.forceReRender,p=m===void 0?[]:m,f=xw(s,["className","disabled","children","forceReRender"]),b=l?{opacity:.38}:{},w="".concat(i," ").concat(l?"paypal-buttons-disabled":"").trim(),N=v.useRef(null),R=v.useRef(null),P=i5(f),_=n5()[0],O=_.isResolved,L=_.options,$=v.useState(null),M=$[0],te=$[1],H=v.useState(!0),U=H[0],E=H[1],j=v.useState(null),S=j[1];function D(){R.current!==null&&R.current.close().catch(function(){})}return!((t=R.current)===null||t===void 0)&&t.updateProps&&R.current.updateProps({message:f.message}),v.useEffect(function(){if(O===!1)return D;var I=XT(L.dataNamespace);if(I===void 0||I.Buttons===void 0)return S(function(){throw new Error(e5({reactComponentName:Sc.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:L.components,sdkDataNamespace:L[Va.DATA_NAMESPACE]}))}),D;var F=function(C,ee){te(ee),typeof f.onInit=="function"&&f.onInit(C,ee)};try{R.current=I.Buttons(Cs(Cs({},P),{onInit:F}))}catch(C){return S(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(C))})}return R.current.isEligible()===!1?(E(!1),D):(N.current&&R.current.render(N.current).catch(function(C){N.current===null||N.current.children.length===0||S(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(C))})}),D)},Dy(Dy([O],p,!0),[f.fundingSource],!1)),v.useEffect(function(){M!==null&&(l===!0?M.disable().catch(function(){}):M.enable().catch(function(){}))},[l,M]),ra.createElement(ra.Fragment,null,U?ra.createElement("div",{ref:N,style:b,className:w}):d)};Sc.displayName="PayPalButtons";function a5(s,t){var r={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(r[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(r[i[o]]=s[i[o]]);return r}function o5(s,t){var r=document.querySelector('script[src="'.concat(s,'"]'));if(r===null)return null;var i=ww(s,t),o=r.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(i.dataset).length)return null;var l=!0;return Object.keys(o.dataset).forEach(function(d){o.dataset[d]!==i.dataset[d]&&(l=!1)}),l?r:null}function l5(s){var t=s.url,r=s.attributes,i=s.onSuccess,o=s.onError,l=ww(t,r);l.onerror=o,l.onload=i,document.head.insertBefore(l,document.head.firstElementChild)}function c5(s){var t=s.sdkBaseUrl,r=s.environment,i=a5(s,["sdkBaseUrl","environment"]),o=t||h5(r),l=i,d=Object.keys(l).filter(function(f){return typeof l[f]<"u"&&l[f]!==null&&l[f]!==""}).reduce(function(f,b){var w=l[b].toString();return b=d5(b),b.substring(0,4)==="data"||b==="crossorigin"?f.attributes[b]=w:f.queryParams[b]=w,f},{queryParams:{},attributes:{}}),m=d.queryParams,p=d.attributes;return m["merchant-id"]&&m["merchant-id"].indexOf(",")!==-1&&(p["data-merchant-id"]=m["merchant-id"],m["merchant-id"]="*"),{url:"".concat(o,"?").concat(u5(m)),attributes:p}}function d5(s){var t=function(r,i){return(i?"-":"")+r.toLowerCase()};return s.replace(/[A-Z]+(?![a-z])|[A-Z]/g,t)}function u5(s){var t="";return Object.keys(s).forEach(function(r){t.length!==0&&(t+="&"),t+=r+"="+s[r]}),t}function h5(s){return s==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function ww(s,t){t===void 0&&(t={});var r=document.createElement("script");return r.src=s,Object.keys(t).forEach(function(i){r.setAttribute(i,t[i]),i==="data-csp-nonce"&&r.setAttribute("nonce",t["data-csp-nonce"])}),r}function m5(s,t){if(t===void 0&&(t=Promise),jw(s,t),typeof document>"u")return t.resolve(null);var r=c5(s),i=r.url,o=r.attributes,l=o["data-namespace"]||"paypal",d=zy(l);return o["data-js-sdk-library"]||(o["data-js-sdk-library"]="paypal-js"),o5(i,o)&&d?t.resolve(d):p5({url:i,attributes:o},t).then(function(){var m=zy(l);if(m)return m;throw new Error("The window.".concat(l," global variable is not available."))})}function p5(s,t){t===void 0&&(t=Promise),jw(s,t);var r=s.url,i=s.attributes;if(typeof r!="string"||r.length===0)throw new Error("Invalid url.");if(typeof i<"u"&&typeof i!="object")throw new Error("Expected attributes to be an object.");return new t(function(o,l){if(typeof document>"u")return o();l5({url:r,attributes:i,onSuccess:function(){return o()},onError:function(){var d=new Error('The script "'.concat(r,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return l(d)}})})}function zy(s){return window[s]}function jw(s,t){if(typeof s!="object"||s===null)throw new Error("Expected an options object.");var r=s.environment;if(r&&r!=="production"&&r!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof t<"u"&&typeof t!="function")throw new Error("Expected PromisePonyfill to be a function.")}var wp=function(s){var t,r=s.options,i=r===void 0?{clientId:"test"}:r,o=s.children,l=s.deferLoading,d=l===void 0?!1:l,m=v.useReducer(s5,{options:Cs(Cs({},i),(t={},t[Va.DATA_JS_SDK_LIBRARY]=Va.DATA_LIBRARY_VALUE,t[Va.DATA_SDK_INTEGRATION_SOURCE]=Va.DATA_LIBRARY_VALUE,t[Nc]="".concat(bw(i)),t)),loadingStatus:d?kr.INITIAL:kr.PENDING}),p=m[0],f=m[1];return v.useEffect(function(){if(d===!1&&p.loadingStatus===kr.INITIAL)return f({type:oa.LOADING_STATUS,value:kr.PENDING});if(p.loadingStatus===kr.PENDING){var b=!0;return m5(p.options).then(function(){b&&f({type:oa.LOADING_STATUS,value:kr.RESOLVED})}).catch(function(w){console.error("".concat(ZT," ").concat(w)),b&&f({type:oa.LOADING_STATUS,value:{state:kr.REJECTED,message:String(w)}})}),function(){b=!1}}},[p.options,d,p.loadingStatus]),ra.createElement(vw.Provider,{value:Cs(Cs({},p),{dispatch:f})},o)};function My(){}v.createContext({cardFieldsForm:null,fields:{},registerField:My,unregisterField:My});const f5=({planId:s,userId:t,onApprove:r,onError:i})=>{const o="Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",l={clientId:o,"client-id":o,currency:"USD",intent:"subscription",vault:!0,components:"buttons"},d=m=>{const p=m.toLowerCase();return p.includes("insider")?"P-27V6575111695415KNE2N6OI":p.includes("gold")?"P-4KK8219436336790HNE2N7HQ":p.includes("deluxe")?"P-5D389612KP666993XNE2N7UY":(console.error("Plan ID not found for:",m),null)};return e.jsx(wp,{options:l,children:e.jsx(Sc,{createSubscription:(m,p)=>{const f=d(s);if(!f||f.includes("YOUR_")||f.includes("P-INSIDER"))throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID in .env file");return p.subscription.create({plan_id:f})},onApprove:async(m,p)=>{console.log("PayPal subscription approved:",m),await Promise.resolve(r(m))},onError:m=>{console.error("PayPal subscription error:",m),i(m)},style:{shape:"pill",color:"silver",layout:"vertical",label:"subscribe"}})})},g5=({onSuccess:s})=>{const{login:t,authErrorMessage:r}=vt(),[i,o]=v.useState(!1),[l,d]=v.useState(!1),[m,p]=v.useState({email:"",password:""}),f=(w,N)=>{p(R=>({...R,[w]:N}))},b=async w=>{if(w.preventDefault(),!m.email||!m.password){alert("Please fill in all fields.");return}d(!0);try{await t(m.email,m.password)?s():alert(r||"Login failed. Please check your credentials.")}catch(N){console.error("Login Error",N),alert(N.message||"Login failed. Please check your credentials.")}finally{d(!1)}};return e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[r&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-md p-3 text-red-400 text-sm",children:r}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:m.email,onChange:w=>f("email",w.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",value:m.password,onChange:w=>f("password",w.target.value),className:"w-full px-3 py-2 pr-10 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-yellow-400",children:i?e.jsx(bu,{size:20}):e.jsx(il,{size:20})})]})]}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 disabled:bg-gray-600 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:l?"Signing In...":"Sign In"})]})},Nw=({onSuccess:s})=>{const[t,r]=v.useState(!1),[i,o]=v.useState(!1),[l,d]=v.useState({firstName:"",lastName:"",email:"",dob:"",gender:"",favoriteColor:"",country:"",password:""}),m=(R,P)=>{d(_=>({..._,[R]:P}))},{register:p,authErrorMessage:f,resendVerificationEmail:b}=vt(),w=async R=>{if(R.preventDefault(),!l.firstName||!l.lastName||!l.email||!l.password||!l.dob||!l.gender||!l.favoriteColor||!l.country){alert("Please fill in all fields.");return}if(l.password.length<6){alert("Password must be at least 6 characters long.");return}o(!0);try{if(await p({name:`${l.firstName} ${l.lastName}`,email:l.email,password:l.password,firstName:l.firstName,lastName:l.lastName,dob:l.dob,gender:l.gender,favoriteColor:l.favoriteColor,country:l.country})){s();return}alert(f||"Registration failed. Please try again.")}catch(P){console.error("Registration Error",P),alert(P.message||"Registration failed. Please try again.")}finally{o(!1)}},N=async()=>{if(!l.email)return alert("Please enter the email to resend verification to.");const R=await b(l.email);alert(R?"Verification email resent  check your inbox.":"Failed to resend verification email. Check the email address and try again.")};return e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:l.firstName,onChange:R=>m("firstName",R.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"First name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:l.lastName,onChange:R=>m("lastName",R.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Last name",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:l.email,onChange:R=>m("email",R.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",value:l.dob,onChange:R=>m("dob",R.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Gender"}),e.jsxs("select",{value:l.gender,onChange:R=>m("gender",R.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0,children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Favorite Color"}),e.jsxs("select",{value:l.favoriteColor,onChange:R=>m("favoriteColor",R.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0,children:[e.jsx("option",{value:"",children:"Select favorite color"}),e.jsx("option",{value:"red",children:"Red"}),e.jsx("option",{value:"blue",children:"Blue"}),e.jsx("option",{value:"green",children:"Green"}),e.jsx("option",{value:"yellow",children:"Yellow"}),e.jsx("option",{value:"purple",children:"Purple"}),e.jsx("option",{value:"pink",children:"Pink"}),e.jsx("option",{value:"orange",children:"Orange"}),e.jsx("option",{value:"black",children:"Black"}),e.jsx("option",{value:"white",children:"White"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Country"}),e.jsx("input",{type:"text",value:l.country,onChange:R=>m("country",R.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your country",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:t?"text":"password",value:l.password,onChange:R=>m("password",R.target.value),className:"w-full px-3 py-2 pr-10 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Create a password",required:!0}),e.jsx("button",{type:"button",onClick:()=>r(!t),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-yellow-400",children:t?e.jsx(bu,{size:20}):e.jsx(il,{size:20})})]})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 disabled:bg-gray-600 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:i?"Creating Account...":"Create Account"}),f&&f.toLowerCase().includes("confirm")&&e.jsxs("div",{className:"mt-2 text-sm text-yellow-300",children:[e.jsx("div",{children:f}),e.jsx("button",{onClick:N,className:"mt-2 text-sm text-amber-400 underline",children:"Resend verification email"})]})]})},Wm={insider:"P-27V6575111695415KNE2N6OI",gold:"P-4KK8219436336790HNE2N7HQ",deluxe:"P-5D389612KP666993XNE2N7UY"},Ly=s=>{const t=s.toLowerCase();return t.includes("insider")?Wm.insider:t.includes("gold")?Wm.gold:t.includes("deluxe")?Wm.deluxe:(console.error("Plan ID not found for:",s),null)},Uy=async(s,t)=>{try{if(s){const i=await _c("users",s),o={...i||{},acceptedPlans:{...i&&i.acceptedPlans||{},[t]:!0}};await ta("users",s,o);return}}catch(i){console.warn("Supabase accept save failed, falling back to localStorage",i)}const r=`accepted_terms_${s||"guest"}_${t}`;localStorage.setItem(r,"1")},$y=({plan:s,isOpen:t,onClose:r,initialView:i})=>{const{currentUser:o}=vt(),[l,d]=v.useState(i==="auth"?"auth":"terms"),[m,p]=v.useState("register"),[f,b]=v.useState(!1),N=(O=>{const L=O.toLowerCase();return L.includes("insider")?"text-cyan-400":L.includes("gold")?"text-purple-400":L.includes("deluxe")?"text-lime-400":L.includes("spoiler")||L.includes("spoil me")?"text-cyan-400":L.includes("basic")?"text-purple-400":L.includes("premium")?"text-pink-400":"text-gold"})(s.name);v.useEffect(()=>{d(i==="auth"?"auth":"terms")},[i]),v.useEffect(()=>{d(o?"payment":"auth")},[o]),v.useEffect(()=>{o&&l==="auth"&&(console.log("User detected during auth - Auto-switching to Payment"),d("payment"))},[o,l]);const R=()=>{console.log("Auth Success Triggered - Switching to Payment"),d("payment")},P=v.useCallback(async()=>{await Uy((o==null?void 0:o.id)||(o==null?void 0:o.uid)||null,s.id),b(!0),d("payment")},[o,s.id]),_=async(O,L)=>{await Uy((o==null?void 0:o.uid)||null,s.id),r()};return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",children:e.jsxs("div",{className:"bg-zinc-900 border border-gold p-6 rounded-lg max-w-md w-full relative shadow-[0_0_20px_rgba(236,72,153,0.3)]",children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:""}),!o&&l==="auth"&&e.jsxs("div",{children:[e.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] mb-4 text-center",children:m==="login"?"Welcome Back":"Create Account"}),e.jsxs("p",{className:"text-gray-400 text-sm text-center mb-4",children:["You must be logged in to subscribe to the ",e.jsx("strong",{className:N,children:s.name}),"."]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>p("login"),className:`px-4 py-2 rounded-md font-bold transition-colors ${m==="login"?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Log In"}),e.jsx("button",{onClick:()=>p("register"),className:`px-4 py-2 rounded-md font-bold transition-colors ${m==="register"?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Create Account"})]}),m==="login"?e.jsx(g5,{onSuccess:R}):e.jsx(Nw,{onSuccess:R})]}),l==="welcome"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl text-gold mb-4 text-center",children:"Welcome to the Club!"}),e.jsxs("p",{className:"text-gray-400 text-sm text-center mb-4",children:["Thank you for choosing to subscribe to the ",e.jsx("strong",{className:N,children:s.name})," plan."]}),e.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 mb-6",children:[e.jsxs("div",{className:"text-center mb-2",children:[e.jsxs("span",{className:"text-3xl font-bold text-white",children:[s.currency==="USD"?"$":"R",s.amount]}),e.jsx("span",{className:"text-gray-400",children:"/month"})]}),e.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Cancel anytime"})]}),e.jsx("div",{className:"mb-4",children:e.jsx(wp,{options:{clientId:"Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",currency:"USD",intent:"subscription",vault:!0,components:"buttons"},children:e.jsx(Sc,{style:{shape:"pill",color:"gold",layout:"vertical"},fundingSource:"paypal",createSubscription:(O,L)=>{const $=Ly(s.name);if(!$)throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID configuration");return L.subscription.create({plan_id:$})},onApprove:_,onCancel:()=>{},onError:O=>{console.error("PayPal error",O)}})})}),e.jsx("div",{className:"text-xs text-gray-400 text-center",children:"By completing payment you accept the Terms and Conditions."})]}),l==="terms"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl text-gold mb-2 text-center",children:"Confirm Subscription"}),o&&e.jsxs("div",{className:"text-center mb-4 text-green-400 text-sm",children:["Logged in as: ",o.email]}),e.jsxs("div",{className:"bg-black p-4 rounded border border-gray-800 h-48 overflow-y-auto mb-4 text-sm text-gray-300",children:[e.jsx("p",{children:"1. Membership fees are billed monthly..."}),e.jsx("p",{children:"2. You may cancel anytime..."})]}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx("button",{onClick:P,className:"bg-gold text-black font-bold py-3 rounded hover:brightness-110",children:"I AGREE - PROCEED TO PAYMENT"})})]}),l==="payment"&&e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] mb-4 text-center",children:" Welcome to Spoil Me Vintage"}),e.jsx("p",{className:"text-gray-400 text-sm text-center mb-6",children:'"You deserve to be celebrated every single day."'}),e.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 mb-6 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[e.jsxs("p",{className:"text-gray-300 italic text-sm mb-2",children:["You are taking a beautiful step towards self-love. By joining the ",e.jsx("strong",{className:N,children:s.name}),", you aren't just buying jewelry; you are investing in your own happiness and confidence."]}),e.jsx("div",{className:"text-gold text-xs uppercase tracking-wider font-bold mt-2",children:" The Spoil Me Team"})]}),e.jsxs("div",{className:"mb-6 text-sm text-gray-400",children:[e.jsxs("p",{children:["You are subscribing to the ",e.jsx("strong",{className:N,children:s.name}),"."]}),e.jsxs("p",{children:["Price: ",e.jsxs("strong",{children:[s.currency==="USD"?"$":"R",s.amount," / month"]})]}),e.jsx("p",{className:"text-xs mt-1",children:"(Cancel at anytime. No hidden fees.)"})]}),e.jsx("div",{className:"w-full relative z-10",children:e.jsx(wp,{options:{clientId:"Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",currency:"USD",intent:"subscription",vault:!0,components:"buttons"},children:e.jsx(Sc,{style:{shape:"pill",color:"gold",layout:"vertical",label:"subscribe"},fundingSource:"paypal",createSubscription:(O,L)=>{const $=Ly(s.name);if(!$)throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID configuration");return L.subscription.create({plan_id:$})},onApprove:_})})})]})]})}):null},x5=()=>{const{addSystemNotification:s,user:t,memberCount:r,currency:i}=vt();nr();const o=v.useRef(null),[l,d]=v.useState(null),[m,p]=v.useState(!1),[f,b]=v.useState(!1),[w,N]=v.useState(""),[R,P]=v.useState(!1),[_,O]=v.useState(null),[L,$]=v.useState(null),[M,te]=v.useState(!1),[H,U]=v.useState(412),[E,j]=v.useState(500),[S,D]=v.useState(485),[I,F]=v.useState(500),[C,ee]=v.useState(498),[ue,Se]=v.useState(500),Pe=Ie=>Ie===500?750:Ie===750?1e3:Ie===1e3?1250:Ie+250;v.useEffect(()=>{H>=E-5&&j(Pe(E))},[H,E]),v.useEffect(()=>{S>=I-5&&F(Pe(I))},[S,I]),v.useEffect(()=>{C>=ue-5&&Se(Pe(ue))},[C,ue]);const ce=(Ie,be)=>{const He=Ie/be*100;let qe="bg-green-500",at=" OPEN";return He>=95?(qe="bg-red-500 animate-pulse",at=" CRITICAL"):He>=80&&(qe="bg-orange-500",at=" HIGH DEMAND"),{percentage:He,color:qe,status:at}},ye=ce(H,E),je=ce(S,I),K=ce(C,ue),me=new Date,se=me.getMonth(),ve=me.getFullYear();me.getDate(),new Date(ve,se+1,0).getDate();const G=(Ie,be)=>{$({id:Ie,name:Ie,amount:be,currency:i}),te(!0)};return e.jsxs("div",{className:"py-8 space-y-12",children:[l&&e.jsx(df,{ref:o,amount:l.amount,itemName:`${l.name} Membership`,email:t.email,isSubscription:!0,frequency:3,cycles:0,customStr1:t.id,customStr2:"MEMBERSHIP_SIGNUP"}),f&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-zinc-900 p-8 rounded-xl max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Complete Your Subscription"}),e.jsx(f5,{planId:w,userId:t.id,onApprove:async Ie=>{console.log("PayPal subscription approved:",Ie),alert(` Subscription successful! Welcome to ${_==null?void 0:_.name}!`),window.location.reload()},onError:Ie=>{console.error("PayPal error:",Ie),alert("Payment failed. Please try again."),b(!1)}}),e.jsx("button",{onClick:()=>b(!1),className:"mt-4 w-full py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg",children:"Cancel"})]})}),R&&_&&e.jsx($y,{isOpen:R,onClose:()=>P(!1),plan:_,initialView:t?"terms":"auth"}),"%       ",M&&L&&e.jsx($y,{plan:L,isOpen:M,onClose:()=>te(!1),initialView:t?"terms":"auth"}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"font-cherry text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Membership Perks"}),e.jsx("p",{className:"font-architects text-xl md:text-2xl text-gray-300 max-w-2xl mx-auto",children:"Join the Spoil Me Vintage family and unlock a world of exclusive benefits, discounts, and special gifts!"})]}),e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 ${i==="ZAR"?"xl:grid-cols-4":"xl:grid-cols-3"} gap-8`,children:i==="ZAR"?e.jsxs(e.Fragment,{children:[e.jsxs(We,{to:"/weekly-winners",className:"block relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-cyan-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Popular"}),e.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"Spoil Me Package"}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("span",{className:"text-4xl font-bold text-white",children:"R19"}),e.jsx("span",{className:"text-gray-400",children:"/month"})]}),e.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[e.jsxs("span",{children:[H," / ",E," Spots Taken"]}),e.jsxs("span",{className:`${ye.percentage>=95?"text-red-500 animate-pulse":ye.percentage>=80?"text-orange-500":"text-green-500"}`,children:[E-H," spots left"]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${ye.color}`,style:{width:`${ye.percentage}%`,transition:"width 1s ease-in-out"}})}),e.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Join now before the monthly International Draw!"})]}),e.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-cyan-400 shrink-0",size:16}),e.jsxs("span",{children:["Guaranteed: Get ",e.jsx("strong",{className:"text-white",children:"R25 Store Credit"})," every month."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-cyan-400 shrink-0",size:16}),e.jsxs("span",{children:["Discount: ",e.jsx("strong",{className:"text-white",children:"5% OFF"})," everything in store."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(xn,{className:"text-cyan-400 shrink-0",size:16}),e.jsxs("span",{children:["Fun: Entry into ",e.jsx("strong",{className:"text-white",children:"Weekly Giveaway"})," (Win R500 Gift Card)."]})]})]}),e.jsxs("div",{className:"mt-auto",children:[e.jsx("button",{onClick:Ie=>{Ie.preventDefault(),Ie.stopPropagation(),G("Spoil Me",19)},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[e.jsx(qi,{size:12})," PayFast Secure Subscription"]})]})]}),e.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[e.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"Basic Package"}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("span",{className:"text-4xl font-bold text-white",children:"R49"}),e.jsx("span",{className:"text-gray-400",children:"/month"})]}),e.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-purple-500 shrink-0",size:16}),e.jsxs("span",{children:["Guaranteed: Receive a ",e.jsx("strong",{className:"text-white",children:"R50 Voucher"})," every month."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-purple-500 shrink-0",size:16}),e.jsxs("span",{children:["Discount: ",e.jsx("strong",{className:"text-white",children:"20% OFF"})," entire store."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(vs,{className:"text-purple-500 shrink-0",size:16}),e.jsxs("span",{children:["Birthday: Receive a ",e.jsx("strong",{className:"text-white",children:"R100 Birthday Voucher"}),"."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(As,{className:"text-purple-500 shrink-0",size:16}),e.jsxs("span",{children:["Bonus: ",e.jsx("strong",{className:"text-white",children:"2x Entries"})," into the Weekly Drop."]})]})]}),e.jsxs("div",{className:"mt-auto",children:[e.jsx("button",{onClick:()=>G("Basic",49),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[e.jsx(qi,{size:12})," PayFast Secure Subscription"]})]})]}),e.jsxs("div",{className:"relative bg-zinc-900 border-4 border-pink-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(236, 72, 153, 0.4)"},children:[e.jsx("h2",{className:"text-2xl font-bold text-pink-500 text-center mt-4 mb-2",children:"Premium Package"}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("span",{className:"text-4xl font-bold text-white",children:"R99"}),e.jsx("span",{className:"text-gray-400",children:"/month"})]}),e.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-pink-500 shrink-0",size:16}),e.jsxs("span",{children:["Guaranteed: Receive a ",e.jsx("strong",{className:"text-white",children:"R100 Voucher"})," every month."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-pink-500 shrink-0",size:16}),e.jsxs("span",{children:["Discount: ",e.jsx("strong",{className:"text-white",children:"20% OFF"})," entire store."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(vs,{className:"text-pink-500 shrink-0",size:16}),e.jsx("span",{children:"Holidays: Free small gift added to orders (Valentine's Day, Mother's Day, Festive)."})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(vs,{className:"text-pink-500 shrink-0",size:16}),e.jsxs("span",{children:["Birthday: Receive a ",e.jsx("strong",{className:"text-white",children:"R150 Birthday Voucher"}),"."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-pink-500 shrink-0",size:16}),e.jsxs("span",{children:["Priority: ",e.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),e.jsxs("div",{className:"mt-auto",children:[e.jsx("button",{onClick:()=>G("Premium",99),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[e.jsx(qi,{size:12})," PayFast Secure Subscription"]})]})]}),e.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[e.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[e.jsx(Ft,{size:14})," The Ultimate"]}),e.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:'The Deluxe "Boss" Package'}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("span",{className:"text-4xl font-bold text-white",children:"R199"}),e.jsx("span",{className:"text-gray-400",children:"/month"})]}),e.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6 relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[e.jsxs("span",{children:[C," / ",ue," Spots Taken"]}),e.jsxs("span",{className:`${K.percentage>=95?"text-red-500 animate-pulse":K.percentage>=80?"text-orange-500":"text-green-500"}`,children:[ue-C," spots left"]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)] ${K.color}`,style:{width:`${K.percentage}%`,transition:"width 1s ease-in-out"}})}),e.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Warning: We strictly limit Vault access to ensure stock availability. 2 spots remaining."})]}),e.jsxs("div",{className:"bg-lime-900/20 border border-lime-500/30 rounded-xl p-4 mb-6",children:[e.jsxs("h3",{className:"text-lime-400 font-bold text-sm uppercase tracking-wide mb-2 flex items-center gap-2",children:[e.jsx(Ft,{size:16}),' ACCESS TO "THE SECRET VAULT"']}),e.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:["Shop clearance, samples, and slight imperfections starting at ",e.jsx("strong",{className:"text-white",children:"R10"}),"."]}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[e.jsx("p",{children:e.jsx("strong",{children:"The Loyalty Ladder:"})}),e.jsx("p",{children:"Month 1: Buy 5 Vault items."}),e.jsx("p",{children:"Month 2: Buy 7 Vault items."}),e.jsx("p",{children:"Month 3: Buy 10 Vault items."}),e.jsxs("p",{children:["Month 4+: ",e.jsx("strong",{className:"text-lime-400",children:"UNLIMITED ACCESS"}),"."]}),e.jsx("p",{className:"text-red-400 italic",children:"Subscription reset? Start back at Month 1."})]})]}),e.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-lime-400 shrink-0",size:16}),e.jsxs("span",{children:["Guaranteed: ",e.jsx("strong",{className:"text-white",children:"R150 Store Credit"})," every month (Rolls over)."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-lime-400 shrink-0",size:16}),e.jsxs("span",{children:["Discount: ",e.jsx("strong",{className:"text-white",children:"20% OFF"})," normal retail items."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(vs,{className:"text-lime-400 shrink-0",size:16}),e.jsxs("span",{children:["Birthday: Receive a ",e.jsx("strong",{className:"text-white",children:"R300 Voucher"}),"."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-lime-400 shrink-0",size:16}),e.jsxs("span",{children:["Priority: ",e.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),e.jsx("p",{className:"text-xs text-yellow-400 mb-4 italic",children:"Secret Vault items may include factory rejects or slight imperfections. Sold as-is."}),e.jsxs("div",{className:"mt-auto",children:[e.jsx("button",{onClick:()=>G("Deluxe Vault",199),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[e.jsx(qi,{size:12})," PayFast Secure Subscription"]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[e.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"The Insider Club"}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("span",{className:"text-4xl font-bold text-white",children:"$5.00"}),e.jsx("span",{className:"text-gray-400",children:"/month"})]}),e.jsxs("p",{className:"text-[10px] text-cyan-300 text-center mb-6 font-semibold uppercase tracking-wide border border-cyan-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:[ye.status," (Batch 3)"]}),e.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[e.jsxs("span",{children:[H," / ",E," Spots Taken"]}),e.jsxs("span",{className:`${ye.percentage>=95?"text-red-500 animate-pulse":ye.percentage>=80?"text-orange-500":"text-green-500"}`,children:[E-H," spots left"]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${ye.color}`,style:{width:`${ye.percentage}%`,transition:"width 1s ease-in-out"}})}),e.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Join now before the monthly International Draw!"})]}),e.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-cyan-400 shrink-0",size:16}),e.jsxs("span",{children:["Guaranteed: Get ",e.jsx("strong",{className:"text-white",children:"$5.00 Store Credit"})," every month."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-cyan-400 shrink-0",size:16}),e.jsxs("span",{children:["Discount: ",e.jsx("strong",{className:"text-white",children:"5% OFF"})," everything in store."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(xn,{className:"text-cyan-400 shrink-0",size:16}),e.jsxs("span",{children:["Fun: Entry into ",e.jsx("strong",{className:"text-white",children:"Weekly Giveaway"})," (Win $50 Gift Card)."]})]})]}),e.jsxs("div",{className:"mt-auto",children:[e.jsx("button",{onClick:()=>G("Insider Club",5),className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[e.jsx(qi,{size:12})," PayPal Secure Subscription"]})]})]}),e.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[e.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"The Gold Member"}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("span",{className:"text-4xl font-bold text-white",children:"$12.00"}),e.jsx("span",{className:"text-gray-400",children:"/month"})]}),e.jsx("p",{className:"text-[10px] text-purple-300 text-center mb-6 font-semibold uppercase tracking-wide border border-purple-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:je.status}),e.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-purple-500/30 mb-6 relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-purple-400 mb-1",children:[e.jsxs("span",{children:[S," / ",I," Spots Taken"]}),e.jsxs("span",{className:`${je.percentage>=95?"text-red-500 animate-pulse":je.percentage>=80?"text-orange-500":"text-green-500"}`,children:[I-S," spots left"]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(168,85,247,0.8)] ${je.color}`,style:{width:`${je.percentage}%`,transition:"width 1s ease-in-out"}})}),e.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Only 15 spots left at this price."})]}),e.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-purple-500 shrink-0",size:16}),e.jsxs("span",{children:["Guaranteed: Get ",e.jsx("strong",{className:"text-white",children:"$12.00 Store Credit"})," every month."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-purple-500 shrink-0",size:16}),e.jsxs("span",{children:["Discount: ",e.jsx("strong",{className:"text-white",children:"20% OFF"})," everything in store."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(vs,{className:"text-purple-500 shrink-0",size:16}),e.jsxs("span",{children:["Birthday: Receive a ",e.jsx("strong",{className:"text-white",children:"$20 Voucher"}),"."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-purple-500 shrink-0",size:16}),e.jsxs("span",{children:["Priority: ",e.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),e.jsxs("div",{className:"mt-auto",children:[e.jsx("button",{onClick:()=>G("Gold Member",12),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[e.jsx(qi,{size:12})," PayPal Secure Subscription"]})]})]}),e.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[e.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[e.jsx(Ft,{size:14})," Top Tier"]}),e.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:'Deluxe "Vault" Access'}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("span",{className:"text-4xl font-bold text-white",children:"$25.00"}),e.jsx("span",{className:"text-gray-400",children:"/month"})]}),e.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6 relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[e.jsxs("span",{children:[C," / ",ue," Spots Taken"]}),e.jsxs("span",{className:`${K.percentage>=95?"text-red-500 animate-pulse":K.percentage>=80?"text-orange-500":"text-green-500"}`,children:[ue-C," spots left"]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)] ${K.color}`,style:{width:`${K.percentage}%`,transition:"width 1s ease-in-out"}})}),e.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Warning: We strictly limit Vault access to ensure stock availability. 2 spots remaining."})]}),e.jsxs("div",{className:"bg-lime-900/20 border border-lime-500/30 rounded-xl p-4 mb-6",children:[e.jsxs("h3",{className:"text-lime-400 font-bold text-sm uppercase tracking-wide mb-2 flex items-center gap-2",children:[e.jsx(Ft,{size:16}),' ACCESS TO "THE SECRET VAULT"']}),e.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:["Shop clearance, samples, and slight imperfections starting at ",e.jsx("strong",{className:"text-white",children:"R10"}),"."]}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[e.jsx("p",{children:e.jsx("strong",{children:"The Loyalty Ladder:"})}),e.jsx("p",{children:"Month 1: Buy 5 Vault items."}),e.jsx("p",{children:"Month 2: Buy 7 Vault items."}),e.jsx("p",{children:"Month 3: Buy 10 Vault items."}),e.jsxs("p",{children:["Month 4+: ",e.jsx("strong",{className:"text-lime-400",children:"UNLIMITED ACCESS"}),"."]}),e.jsx("p",{className:"text-red-400 italic",children:"Subscription reset? Start back at Month 1."})]})]}),e.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-lime-400 shrink-0",size:16}),e.jsxs("span",{children:["Guaranteed: ",e.jsx("strong",{className:"text-white",children:"$15.00 Store Credit"})," every month (Rolls over)."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-lime-400 shrink-0",size:16}),e.jsxs("span",{children:["Discount: ",e.jsx("strong",{className:"text-white",children:"20% OFF"})," normal retail items."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(vs,{className:"text-lime-400 shrink-0",size:16}),e.jsxs("span",{children:["Birthday: Receive a ",e.jsx("strong",{className:"text-white",children:"$40 Voucher"}),"."]})]}),e.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[e.jsx(pt,{className:"text-lime-400 shrink-0",size:16}),e.jsxs("span",{children:["Priority: ",e.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),e.jsx("p",{className:"text-xs text-yellow-400 mb-4 italic",children:"Secret Vault items may include factory rejects or slight imperfections. Sold as-is."}),e.jsxs("div",{className:"mt-auto",children:[e.jsx("button",{onClick:()=>G("Deluxe Vault",25),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[e.jsx(qi,{size:12})," PayPal Secure Subscription"]})]})]})]})}),e.jsxs("div",{className:"mt-16 border-t border-gray-800 pt-12 text-center",children:[e.jsxs("h2",{className:"font-cherry text-3xl text-white flex items-center justify-center gap-3 mb-4",children:[e.jsx(vs,{className:"text-yellow-400",size:32})," Want to Earn Rewards for Free?"]}),e.jsx("p",{className:"text-gray-400 max-w-lg mx-auto mb-8",children:"You don't have to be a member to start earning. Join our social channels, leave reviews, and shop to earn points."}),e.jsxs(We,{to:"/earn-rewards",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105",children:["Go to Rewards Hub ",e.jsx(rr,{size:20})]}),e.jsx("br",{}),e.jsxs(We,{to:"/vault",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105 mt-4",children:[e.jsx(Ft,{size:20})," Explore The Secret Vault"]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(We,{to:"/terms",className:"text-gray-400 hover:text-white text-sm underline",children:"View Terms & Conditions"})})]})]})},y5=()=>{var b,w,N,R,P;const{user:s,claimSocialReward:t}=vt(),[r,i]=v.useState(!1),[o,l]=v.useState(null),[d,m]=v.useState(""),p=(_,O)=>{l({platform:_,name:O}),m("")},f=()=>{if(o){if(o.platform!=="whatsapp"&&!d.trim()){alert(`Please enter your ${o.name} username to verify.`);return}t(o.platform,d),l(null)}};return e.jsxs("div",{className:"max-w-5xl mx-auto py-8 space-y-12 relative",children:[o&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>l(null)}),e.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"One Last Step!"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"To prevent fraud and secure your points, please enter your username. This allows us to verify your follow."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:["Your ",o.name," Username"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Fn,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",value:d,onChange:_=>m(_.target.value),className:"w-full pl-10 p-3 bg-black border border-gray-700 rounded-xl text-white text-sm focus:border-pink-500 outline-none",placeholder:"@username"})]})]}),e.jsx("button",{onClick:f,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all",children:"Verify & Claim Points"})]}),e.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:e.jsx(ns,{size:20})})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 border-b border-gray-800 pb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"font-cherry text-4xl text-white",children:"Loyalty Rewards"}),e.jsx("button",{onClick:()=>i(!0),className:"text-gray-500 hover:text-cyan-400 transition-colors",title:"How it works",children:e.jsx(Ic,{size:24})})]}),e.jsx("p",{className:"text-gray-400 text-lg max-w-xl",children:"Complete simple tasks to earn points and unlock discounts on your next vintage treasure."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-purple-500/30 min-w-[250px] text-center shadow-[0_0_20px_rgba(168,85,247,0.15)] relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-sm text-gray-400 uppercase tracking-wider mb-1 font-semibold",children:"Your Balance"}),e.jsx("div",{className:"text-5xl font-bold text-white mb-2 font-mono tracking-tight",children:s.loyaltyPoints}),e.jsx("div",{className:"text-xs text-purple-400 font-bold bg-purple-900/20 py-1 px-3 rounded-full w-fit mx-auto",children:"Points Available"})]})]})]}),r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>i(!1)}),e.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[e.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:e.jsx(ns,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:e.jsx(Br,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),e.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",e.jsx("span",{className:"text-green-400",children:"1 Point for every R10"})," spent."]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",e.jsx("span",{className:"text-green-400",children:"100 Points"})," for verified reviews."]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",e.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing."]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",e.jsx("span",{className:"text-white font-bold",children:"R1.00 Discount"}),"."]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum redemption is 1000 Points (R10)."})]})]}),e.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[e.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[e.jsx(Br,{size:14})," Membership Rule"]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",e.jsx("strong",{children:"R100 (10,000 pts)"})," per order. To redeem more, you must be a ",e.jsx(We,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),e.jsx("button",{onClick:()=>i(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(vs,{className:"text-yellow-400"})," Quick Earn: Social Media"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-pink-500 transition-all",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-pink-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"w-16 h-16 bg-black border border-pink-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(236,72,153,0.4)] relative z-10",children:e.jsx(Ga,{size:32,className:"text-pink-500"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"TikTok"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Get exclusive clips & flash sales."}),(b=s.socialRewards)!=null&&b.tiktok?e.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[e.jsx(pt,{size:18})," 100 Pts Claimed"]}):e.jsxs("button",{onClick:()=>p("tiktok","TikTok"),className:"mt-auto w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[e.jsx(Ua,{size:16})," Join & Earn 100"]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-blue-500 transition-all",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"w-16 h-16 bg-black border border-blue-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(59,130,246,0.4)] relative z-10",children:e.jsx(tc,{size:32,className:"text-blue-500"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Facebook"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Join our community group."}),(w=s.socialRewards)!=null&&w.facebook?e.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[e.jsx(pt,{size:18})," 100 Pts Claimed"]}):e.jsxs("button",{onClick:()=>p("facebook","Facebook"),className:"mt-auto w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(59,130,246,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[e.jsx(Ua,{size:16})," Join & Earn 100"]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-white/20 transition-all",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:e.jsx(su,{size:32,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Twitter"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"News and polls."}),(N=s.socialRewards)!=null&&N.twitter?e.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[e.jsx(pt,{size:18})," 100 Pts Claimed"]}):e.jsxs("button",{onClick:()=>p("twitter","Twitter"),className:"mt-auto w-full py-3 bg-gray-700 hover:bg-gray-600 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(255,255,255,0.2)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[e.jsx(Ua,{size:16})," Join & Earn 100"]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-green-500/30 transition-all",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-green-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:e.jsx(al,{size:32,className:"text-green-500"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"WhatsApp"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Instant drop notifications."}),(R=s.socialRewards)!=null&&R.whatsapp?e.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[e.jsx(pt,{size:18})," 100 Pts Claimed"]}):e.jsxs("button",{onClick:()=>t("whatsapp"),className:"mt-auto w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(34,197,94,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[e.jsx(Ua,{size:16})," Join & Earn 100"]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-red-500/30 transition-all",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-red-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:e.jsx("svg",{width:32,height:32,className:"text-red-500",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,children:e.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.75.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.747-1.378 0 0-.599 2.282-.744 2.84-.282 1.084-1.064 2.456-1.549 3.235C9.584 23.815 10.77 24.001 12.017 24.001c6.624 0 11.99-5.367 11.99-11.987C24.007 5.367 18.641.001 12.017.001z"})})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Pinterest"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Visual inspiration board."}),(P=s.socialRewards)!=null&&P.pinterest?e.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[e.jsx(pt,{size:18})," 100 Pts Claimed"]}):e.jsxs("button",{onClick:()=>p("pinterest","Pinterest"),className:"mt-auto w-full py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(239,68,68,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[e.jsx(Ua,{size:16})," Join & Earn 100"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-8 border-t border-gray-800",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:e.jsx(fl,{className:"text-cyan-400",size:24})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Shop & Earn"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 1 point for every R10 you spend on any purchase automatically."}),e.jsx(We,{to:"/",className:"text-cyan-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Start Shopping"})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-yellow-500/30 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:e.jsx(_r,{className:"text-yellow-400",size:24})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Review Products"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 100 points for every verified review you leave on items you've bought."}),e.jsx(We,{to:"/profile",className:"text-yellow-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Check Pending Reviews"})]})]})]})},b5=({isOpen:s,onClose:t})=>{const{user:r,updateUser:i}=vt(),[o,l]=v.useState(null),[d,m]=v.useState(!1),p=async()=>{if(o){m(!0);try{await i({affiliateCurrency:o,currencyLocked:!0}),t()}catch(f){console.error("Error saving currency:",f)}finally{m(!1)}}};return s?e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/95 backdrop-blur-xl",children:e.jsxs("div",{className:"bg-zinc-900 border border-pink-500/50 rounded-2xl p-8 max-w-md w-full shadow-[0_0_50px_rgba(236,72,153,0.3)] animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-pink-900/20 border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ps,{size:32,className:"text-pink-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Choose Your Earning Currency"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"This choice determines how you receive commissions and cannot be changed later."})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("button",{onClick:()=>l("ZAR"),className:`w-full p-4 rounded-xl border transition-all ${o==="ZAR"?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-900/20 rounded-full flex items-center justify-center",children:e.jsx(vc,{size:16,className:"text-green-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold",children:" South African Rand (ZAR)"}),e.jsx("div",{className:"text-xs text-gray-400",children:"EFT Bank Transfer Payouts"})]}),o==="ZAR"&&e.jsx(Xa,{size:20,className:"text-green-400 ml-auto"})]})}),e.jsx("button",{onClick:()=>l("USD"),className:`w-full p-4 rounded-xl border transition-all ${o==="USD"?"bg-blue-900/20 border-blue-500 text-blue-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-900/20 rounded-full flex items-center justify-center",children:e.jsx(vc,{size:16,className:"text-blue-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold",children:" US Dollar (USD)"}),e.jsx("div",{className:"text-xs text-gray-400",children:"PayPal Payouts"})]}),o==="USD"&&e.jsx(Xa,{size:20,className:"text-blue-400 ml-auto"})]})})]}),e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-4 rounded-lg mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gi,{size:20,className:"text-yellow-500 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-yellow-400 font-bold text-sm mb-1",children:"Permanent Choice"}),e.jsx("p",{className:"text-yellow-300 text-xs",children:"Once selected, your currency cannot be changed. Choose based on your payout preferences."})]})]})}),e.jsx("button",{onClick:p,disabled:!o||d,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all shadow-lg",children:d?"Saving...":"Confirm Currency Choice"})]})}):null},v5=()=>{const{user:s,affiliateLeaderboard:t,applyForAffiliate:r,buyAffiliateContent:i,joinAffiliateElite:o,register:l,login:d,getAllUsers:m,currency:p}=vt(),[f,b]=v.useState(!1),[w,N]=v.useState(1),[R,P]=v.useState(!1),[_,O]=v.useState(!1),[L,$]=v.useState({name:s&&s.name&&s.name!=="Guest"?s.name.split(" ")[0]:"",surname:s&&s.name&&s.name!=="Guest"?s.name.split(" ").slice(1).join(" "):"",email:(s==null?void 0:s.email)||"",dob:(s==null?void 0:s.birthday)||"",gender:"",reason:"",socials:"",password:""}),[M,te]=v.useState(!1),[H,U]=v.useState(!1),[E,j]=v.useState(!1),[S,D]=v.useState(!1),[I,F]=v.useState(""),[C,ee]=v.useState(""),[ue,Se]=v.useState({}),[Pe,ce]=v.useState(!1),[ye,je]=v.useState([]),[K,me]=v.useState(!1);v.useEffect(()=>{var we,Ue,et;((we=s.affiliateStats)==null?void 0:we.status)==="pending"&&O(!0),((Ue=s.affiliateStats)==null?void 0:Ue.status)==="approved"&&m().then(fe=>{const nt=fe.filter(dt=>{var _t;return((_t=dt.affiliateStats)==null?void 0:_t.parentId)===s.id});je(nt)}),((et=s.affiliateStats)==null?void 0:et.status)==="approved"&&!s.currencyLocked&&me(!0)},[s.affiliateStats,s.id,s.currencyLocked,m]);const se=v.useMemo(()=>[{title:"1. Introduction",content:'These Terms and Conditions ("Agreement") govern your participation in the Spoil Me Vintage Partnership Program ("Program"). By enrolling in the Program, you agree to be bound by these terms.'},{title:"2. Definitions",content:'"Partner", "You", and "Your" refer to the individual or entity applying for or participating in the Program. "We", "Us", and "Our" refer to Spoil Me Vintage. "Commission" refers to the amount paid for a successful referral. "Net Sales" refers to the final sale price of a product EXCLUDING shipping costs, customs duties, taxes (VAT), and any refunds.'},{title:"3. Enrollment",content:"To begin the enrollment process, you must submit a complete Partnership Application. We will evaluate your application and notify you of your acceptance or rejection. We reserve the right to reject applications from sites or profiles that do not meet our brand standards."},{title:"4. Affiliate Links",content:"You will be issued a unique Affiliate URL or code. Sales must be tracked via these links to generate commission. We use a 30-day cookie window. It is your responsibility to ensure that these links are correctly formatted and used on your site."},{title:"5. Commissions & Earnings",content:'You will earn commissions based on the specific product category sold: 5.1. Standard Jewelry: Earn 10% to 20% on Net Sales based on your monthly performance tier. 5.2. "Secret Vault" Items: Due to the clearance pricing of Vault items, these sales earn a flat 1% Commission regardless of your tier. 5.3. Memberships: Earn a fixed monthly recurring commission (ZAR R2-R15 or USD $1-$3) for active, paid subscriptions. 5.4. Override: Earn a 1% bonus on Net Sales generated by partners you directly recruit.'},{title:"6. Payment Terms & Currency",content:"Commissions are paid once a month. 6.1. South African Partners: Paid via EFT to a valid SA Bank Account. International earnings (USD) are converted to ZAR at the bank rate. Minimum payout: R200. 6.2. International Partners: Paid via PayPal in USD. South African earnings (ZAR) are converted to USD at the bank rate. Minimum payout: $50."},{title:'7. "Secret Vault" Items',content:'This section strictly governs the purchase of discounted items from the "Secret Vault." 7.1. Nature of Goods ("Sold As-Is"): Items listed in "The Secret Vault" (priced from R10 / $1) may include: Factory overstock, Sample items, Items with minor cosmetic imperfections ("Rejects" or "Seconds"). ALL SALES FROM THE SECRET VAULT ARE FINAL. NO RETURNS, REFUNDS, OR EXCHANGES ARE PERMITTED ON THESE ITEMS. 7.2. The "Loyalty Ladder" & Purchase Limits: To prevent resale abuse, purchase limits apply to The Secret Vault based on consecutive months of membership: Month 1: Maximum 5 items, Month 2: Maximum 7 items, Month 3: Maximum 10 items, Month 4+: Unlimited. 7.3. The "Reset Rule" (Strict Enforcement): Membership continuity is required to maintain your "Loyalty Ladder" status. If you cancel your subscription or if your payment fails and is not rectified within 48 hours, your Loyalty Ladder status RESETS TO MONTH 1.'},{title:"8. Competitions & Weekly Drops",content:'8.1. Promotional Competition: The "Spoil Me" package (R19) includes entry into giveaways. This is a promotional competition under the South African Consumer Protection Act (CPA), not a lottery. You are paying for the Membership Services (Sales alerts, Vouchers), and the entry is a complimentary benefit. 8.2. International Winners: If a winner is selected from outside South Africa: Physical prizes may be converted to Store Credit of equivalent value to avoid shipping fees. If the winner requests the physical item, the winner is responsible for all international shipping costs and customs duties.'},{title:"9. International Orders & Shipping",content:"9.1. Customs, Duties, and Taxes: DDU (Delivered Duty Unpaid): For all international orders (outside South Africa), Spoil Me Vintage is NOT responsible for any customs fees, import duties, or local taxes. These fees are the sole responsibility of the customer. If you refuse to pay customs fees and the package is returned to us, we will deduct the return shipping costs from any potential refund. 9.2. Shipping Times: International shipping times are estimates (typically 10-25 business days). We are not liable for delays caused by customs departments or global logistics strikes."},{title:"10. Returns and Refunds",content:"10.1. Standard Products (Non-Vault): South Africa: You may return unused, undamaged standard jewelry within 7 days of receipt for a store credit or exchange, in accordance with the CPA. International: Due to high shipping costs, international returns are generally not accepted unless the item arrived damaged. Evidence (photos) must be provided within 24 hours of delivery. 10.2. Non-Returnable Items: The following items are final sale and cannot be returned: Earrings (for hygiene reasons), Secret Vault Items, Customized or personalized jewelry."},{title:"11. Limitation of Liability",content:"To the fullest extent permitted by law, Spoil Me Vintage shall not be liable for: Allergic Reactions: Our jewelry materials are listed on the product page. It is the customer's responsibility to verify they are not allergic to metals (e.g., nickel, copper, alloys) before wearing. We are not liable for skin reactions. Indirect Damages: Any indirect, incidental, or consequential damages arising from the use of our products or website. Maximum Liability: In no event shall our total liability to you exceed the amount you paid to us in the 3 months preceding the claim."},{title:"12. Payment Terms",content:"Payments are processed securely via third-party providers (e.g., PayFast, Stripe, Yoco). Spoil Me Vintage does not store your full credit card details. By subscribing, you authorize us to charge your payment method automatically every month until you cancel."},{title:"13. Governing Law and Dispute Resolution",content:"These Terms are governed by the laws of the Republic of South Africa. Any disputes arising from these Terms shall be subject to the exclusive jurisdiction of the Magistrate's Court in Worcester, Western Cape. For International customers, you agree to waive any right to class action lawsuits and agree to resolve disputes through binding arbitration in South Africa, or via amicable email resolution."},{title:"14. Commission Rates & Exceptions",content:'14.1. Standard Products: Commission rates (10% - 20%) apply to all full-priced, standard retail jewelry items based on your monthly performance tier. 14.2. "Secret Vault" Items: Items purchased from "The Secret Vault" (Clearance/Sample stock) are sold at near-cost prices. Therefore, all Vault items earn a flat 1% commission, regardless of your current Tier status. 14.3. Shipping & Taxes: Commissions are calculated on the Net Product Price only. Shipping fees, taxes, and duties are excluded from all calculations. 14.4. Payouts: South Africa: Paid via EFT (ZAR). International earnings converted to ZAR. International: Paid via PayPal (USD). South African earnings converted to USD.'},{title:"15. CONTACT US",content:"For questions regarding these Terms, please contact us at: Email: spoilmevintagediy@gmail.com WhatsApp: +27 71858 9370"}],[]),ve=se.length>0&&se.every((we,Ue)=>ue[Ue]),G=async we=>{var et;if(we.preventDefault(),ee(""),await d(L.email,I)){D(!1),N(2);const nt=(await m()).find(dt=>dt.email.toLowerCase()===L.email.toLowerCase());((et=nt==null?void 0:nt.affiliateStats)==null?void 0:et.status)==="approved"&&(b(!1),setTimeout(()=>{var dt;return(dt=document.getElementById("affiliate-dashboard"))==null?void 0:dt.scrollIntoView({behavior:"smooth"})},500))}else ee("Invalid password. Please try again.")},Ie=async we=>{if(we.preventDefault(),!L.reason.trim()||!M)return;const Ue={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},et={status:"pending",gender:L.gender,joinReason:`${L.reason} | Socials: ${L.socials}`,totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1};if(s.email)await r(L),j(!0);else{if(!L.email||!L.password){alert("Please provide email and password to create your account.");return}if((await m()).find(_t=>_t.email.toLowerCase()===L.email.toLowerCase())){D(!0),ee("This email address is already associated with an account. Please Log In to continue your application.");return}if(!await l({name:`${L.name} ${L.surname}`,email:L.email,password:L.password,birthday:L.dob,notifications:[Ue],affiliateStats:et})){alert("Failed to create account. Please try again.");return}j(!0)}},be=()=>{b(!1),j(!1),N(1),U(!1),te(!1),Se({}),D(!1),F(""),ee("")},He=async()=>{window.confirm("Purchase the Partner Content Pack for R250?")&&(await i(),alert("Content Unlocked!"))},qe=async()=>{window.confirm("Upgrade to Elite Partner Status? A fee applies.")&&(await o(),alert("Welcome to the Elite Squad!"))},at=()=>{te(!0),P(!1)},Rt=we=>{Se(Ue=>({...Ue,[we]:!Ue[we]}))},xe=()=>{const we=`${window.location.origin}/#/?ref=${s.affiliateCode}`;navigator.clipboard.writeText(we),ce(!0),setTimeout(()=>ce(!1),2e3)},Je=s.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,isElite:!1},wt=Je.status==="approved",Lt=[{name:"Bronze",rate:10,min:0,max:p==="ZAR"?2e3:200},{name:"Silver",rate:11,min:p==="ZAR"?2001:201,max:p==="ZAR"?5e3:500},{name:"Gold",rate:15,min:p==="ZAR"?5001:501,max:p==="ZAR"?1e4:1e3},{name:"Platinum",rate:20,min:p==="ZAR"?10001:1001,max:p==="ZAR"?25e3:2500}],ae=Lt.find(we=>Je.totalSalesValue>=we.min&&Je.totalSalesValue<=we.max)||Lt[0],ge=Lt.indexOf(ae);let ze=null;return ge<Lt.length-1&&(ze=Lt[ge+1],ze.min-ae.min,Je.totalSalesValue-ae.min),e.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-16",children:[e.jsx("style",{children:`
            @keyframes marquee {
                0% { transform: translateX(100%); }
                100% { transform: translateX(-100%); }
            }
            .animate-marquee {
                animation: marquee 20s linear infinite;
            }
        `}),e.jsxs("div",{className:"relative rounded-3xl overflow-hidden bg-zinc-900 border border-pink-500/30 min-h-[400px] flex items-center",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-zinc-900/90 to-transparent z-10"}),e.jsx("div",{className:"absolute right-0 top-0 h-full w-1/2 bg-[url('https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80')] bg-cover bg-center opacity-40 grayscale mix-blend-luminosity"}),e.jsxs("div",{className:"relative z-20 p-8 md:p-16 max-w-2xl space-y-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-1.5 rounded-full text-sm font-bold uppercase tracking-wider",children:[e.jsx(jc,{size:16})," Join the Team"]}),e.jsx("h1",{className:"font-cherry text-5xl md:text-7xl text-white leading-none drop-shadow-[0_0_15px_rgba(236,72,153,0.6)]",children:"Turn Passion into Profit"}),e.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:p==="ZAR"?"Join the Spoil Me Team. Earn up to 20% Commission + Monthly Recurring Rands.":"Join the Spoil Me Team. Earn up to 20% Commission + Monthly Recurring Cash."}),!wt&&Je.status!=="pending"&&e.jsxs("button",{onClick:()=>b(!0),className:"px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.4)] flex items-center gap-2",children:[p==="ZAR"?"JOIN THE TEAM (ZA)":"JOIN THE TEAM (GLOBAL)"," ",e.jsx(rr,{size:20})]}),Je.status==="pending"&&e.jsxs("button",{onClick:()=>O(!0),className:"inline-flex items-center gap-2 bg-yellow-900/20 border border-yellow-500/30 text-yellow-400 px-6 py-3 rounded-lg font-bold hover:bg-yellow-900/40 transition-colors",children:[e.jsx(gn,{size:18})," Check Application Status"]}),wt&&e.jsxs("button",{onClick:()=>{var we;return(we=document.getElementById("affiliate-dashboard"))==null?void 0:we.scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 bg-green-600 text-white font-bold rounded-full hover:bg-green-500 transition-all shadow-[0_0_20px_rgba(34,197,94,0.4)] flex items-center gap-2",children:["Go to Dashboard ",e.jsx(rr,{size:20})]})]})]}),e.jsxs("div",{className:`overflow-hidden bg-zinc-900/50 border border-gray-800 rounded-2xl p-4 ${p==="ZAR"?"view-zar":"view-usd"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xn,{className:"text-yellow-500",size:20}),e.jsx("span",{className:"text-sm font-bold text-white",children:"Recent Partner Success"})]}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"animate-marquee whitespace-nowrap",children:p==="ZAR"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Sarah J. (Pretoria) earned R450..."}),e.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Thandi M. (JHB) hit Gold Tier..."}),e.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Lerato K. (Durban) earned R2,000..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Emily R. (Texas) earned $50..."}),e.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Mike T. (London) hit Gold Tier..."}),e.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Jessica L. (NY) earned $120..."})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[e.jsx("div",{className:"w-16 h-16 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto mb-4 text-green-500 font-bold text-xl shadow-[0_0_15px_rgba(34,197,94,0.3)]",children:"1"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sign Up & Share"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Apply to become a partner. Once approved, share your unique code to start earning."})]}),e.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[e.jsx("div",{className:"w-16 h-16 bg-black border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 text-pink-500 font-bold text-xl shadow-[0_0_15px_rgba(236,72,153,0.3)]",children:"2"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Recruit & Earn"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Invite others to join your team. You earn a ",e.jsx("strong",{children:"1% commission"})," on their sales forever!"]})]}),e.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[e.jsx("div",{className:"w-16 h-16 bg-black border-2 border-purple-500 rounded-full flex items-center justify-center mx-auto mb-4 text-purple-500 font-bold text-xl shadow-[0_0_15px_rgba(168,85,247,0.3)]",children:"3"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Get Paid"}),e.jsx("p",{className:"text-gray-400 text-sm",children:p==="ZAR"?"We payout commissions monthly via EFT to your South African bank account.":"We pay you monthly in USD via PayPal. Fast and secure."})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Earning Potential"}),e.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"See what successful partners are earning with our tiered commission structure."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:e.jsx(Ps,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Passive Income"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Recruit 10 Deluxe Members"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-green-400 mb-2",children:p==="ZAR"?"R150/month":"$30/month"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Earn recurring commissions on their monthly subscriptions forever."})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-yellow-900/20 rounded-lg text-yellow-400",children:e.jsx(xn,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Weekly Bonus"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Hit the milestone"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-yellow-400 mb-2",children:p==="ZAR"?"R200 Cash":"$15 Cash"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Weekly cash bonuses for reaching sales targets."})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Partner Success Stories"}),e.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Real partners sharing their experiences with the Spoil Me program."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-pink-900/20 rounded-full flex items-center justify-center text-pink-400 font-bold",children:"L"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"Lerato, Johannesburg"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Started 6 months ago"})]})]}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:'"I shared my link on WhatsApp status. My first month I made R2,000 extra cash. The EFT was on time and easy to receive."'})]}),e.jsxs("div",{className:`bg-zinc-900 p-6 rounded-2xl border border-gray-800 ${p==="USD"?"block":"hidden"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-cyan-900/20 rounded-full flex items-center justify-center text-cyan-400 font-bold",children:"J"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"Jessica, Texas"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Active partner"})]})]}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:'"The recurring commission covers my own jewelry addiction! I love getting paid in USD via PayPal."'})]})]})]}),wt&&e.jsxs("div",{id:"affiliate-dashboard",className:"space-y-8 animate-in slide-in-from-bottom-10 duration-700 pt-8 border-t border-gray-800",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Your Partnership Dashboard"}),e.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",s&&s.name?s.name.split(" ")[0]:"Partner","! Manage your links and earnings."]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(We,{to:"/affiliate/store-builder",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white rounded-lg text-sm font-bold flex items-center gap-2",children:[e.jsx(jc,{size:16})," Build Store"]}),e.jsxs("button",{onClick:He,className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg text-sm border border-gray-700 flex items-center gap-2",children:[e.jsx(tw,{size:16})," Content Assets"]}),!Je.isElite&&e.jsxs("button",{onClick:qe,className:"px-4 py-2 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:brightness-110",children:[e.jsx(Ft,{size:16})," Go Elite"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:e.jsx(Ps,{size:24})}),e.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Total Earnings"})]}),e.jsxs("div",{className:"text-3xl font-bold text-white",children:["R",Je.balance.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Next payout date: 1st of month"})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:e.jsx(Js,{size:24})}),e.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Direct Sales"})]}),e.jsx("div",{className:"text-3xl font-bold text-white",children:Je.totalSalesCount}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Value: R",Je.totalSalesValue.toFixed(0)]})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:e.jsx(_r,{size:24})}),e.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Current Rate"})]}),e.jsxs("div",{className:"text-3xl font-bold text-white",children:[Je.commissionRate,"%"]}),e.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:["Tier: ",ae.name]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(ol,{size:20,className:"text-pink-500"})," Your Referral Link"]}),e.jsx("div",{className:"bg-black p-4 rounded-xl border border-gray-700 flex flex-col gap-3",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("code",{className:"flex-1 text-cyan-400 text-sm break-all font-mono bg-zinc-900/50 p-3 rounded border border-gray-800 w-full",children:[window.location.origin,"/#/?ref=",s.affiliateCode]}),e.jsxs("button",{onClick:xe,className:"w-full md:w-auto px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg transition-colors flex items-center justify-center gap-2 border border-gray-600",children:[Pe?e.jsx(pt,{size:14}):e.jsx(Mu,{size:14}),Pe?"Copied!":"Copy Link"]})]})}),e.jsx("div",{className:"mt-4 bg-pink-900/20 p-3 rounded-lg border border-pink-500/20",children:e.jsxs("p",{className:"text-xs text-pink-300",children:[e.jsx("strong",{children:"Tip:"})," Customers get ",e.jsx("strong",{children:"5% OFF"})," when using your code ",e.jsx("code",{children:s.affiliateCode})," at checkout!"]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-cyan-500/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:e.jsx(ow,{size:80,className:"text-cyan-500"})}),e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 relative z-10",children:[e.jsx(Js,{size:20,className:"text-cyan-400"})," Recruitment Center"]}),e.jsx("div",{className:"bg-cyan-900/20 border border-cyan-500/30 p-4 rounded-xl mb-6 relative z-10",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-full text-cyan-400 shrink-0",children:e.jsx(Ps,{size:16})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-white",children:"Earn 1% Override Commission"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Recruit new affiliates and earn 1% of their sales volume forever. No impact on their earnings!"})]})]})}),e.jsxs("div",{className:"space-y-3 relative z-10",children:[e.jsxs("h4",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:["My Recruits (",ye.length,")"]}),ye.length>0?e.jsx("div",{className:"max-h-[150px] overflow-y-auto pr-2 space-y-2 custom-scrollbar",children:ye.map(we=>{var Ue;return e.jsxs("div",{className:"flex justify-between items-center p-2 bg-black/40 rounded border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-zinc-800 rounded-full flex items-center justify-center text-[10px] text-gray-400 border border-gray-700",children:we.name?we.name.charAt(0):"?"}),e.jsx("span",{className:"text-xs text-gray-300",children:we.name})]}),e.jsxs("span",{className:"text-xs text-green-400 font-mono",children:["Sales: R",(Ue=we.affiliateStats)==null?void 0:Ue.totalSalesValue.toFixed(0)]})]},we.id)})}):e.jsx("div",{className:"text-center py-4 border border-dashed border-gray-800 rounded-lg",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No recruits yet. Start building your team!"})})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 relative z-10",children:[e.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"Share your recruitment link:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("code",{className:"flex-1 bg-black p-2 rounded text-[10px] text-gray-400 truncate border border-gray-800",children:[window.location.origin,"/#/?ref=",s.affiliateCode]}),e.jsx("button",{onClick:xe,className:"text-xs text-cyan-400 hover:text-cyan-300 font-bold",children:"Copy"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Commission Tiers"}),e.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Your commission rate increases based on your all-time sales performance."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Lt.map((we,Ue)=>e.jsx("div",{className:`p-6 rounded-2xl border transition-all ${ae.name===we.name?"bg-gradient-to-br from-yellow-900/20 to-orange-900/20 border-yellow-500/50 shadow-[0_0_20px_rgba(234,179,8,0.2)]":"bg-zinc-900 border-gray-800"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full mb-3 ${ae.name===we.name?"bg-yellow-500 text-black":"bg-zinc-800 text-gray-400"}`,children:e.jsx(Br,{size:20})}),e.jsx("h3",{className:`text-lg font-bold mb-1 ${ae.name===we.name?"text-yellow-400":"text-white"}`,children:we.name}),e.jsxs("div",{className:`text-2xl font-bold mb-2 ${ae.name===we.name?"text-yellow-400":"text-gray-300"}`,children:[we.rate,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:p==="ZAR"?`R${we.min.toLocaleString()} - ${we.max===1/0?"":"R"+we.max.toLocaleString()}`:`$${we.min.toLocaleString()} - ${we.max===1/0?"":"$"+we.max.toLocaleString()}`})]})},we.name))})]}),R&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-xl",onClick:()=>!ve&&P(!1)}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-3xl w-full relative z-20 shadow-2xl h-[90vh] flex flex-col animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-800",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(jy,{size:20,className:"text-pink-500"})," Terms & Conditions"]}),e.jsx("button",{onClick:()=>P(!1),className:"text-gray-500 hover:text-white",children:e.jsx(ns,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-8 pr-4",children:[e.jsx("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-4 rounded-lg mb-6 text-yellow-200 text-sm",children:"Please read each section carefully. You must acknowledge each section to proceed."}),se.map((we,Ue)=>e.jsxs("div",{className:"bg-black/30 rounded-xl p-5 border border-gray-800 hover:border-gray-700 transition-colors",children:[e.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:we.title}),e.jsx("div",{className:"text-sm text-gray-400 leading-relaxed whitespace-pre-wrap font-sans mb-4 pl-2 border-l-2 border-gray-700",children:we.content}),e.jsxs("label",{className:`flex items-center gap-3 cursor-pointer p-3 rounded-lg transition-all ${ue[Ue]?"bg-green-900/20 border border-green-500/30":"bg-zinc-800/50 border border-gray-700 hover:bg-zinc-800"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${ue[Ue]?"bg-green-500 border-green-500 text-black":"bg-black border-gray-600 text-transparent"}`,children:e.jsx(pt,{size:14,strokeWidth:4})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:!!ue[Ue],onChange:()=>Rt(Ue)}),e.jsxs("span",{className:`text-sm font-bold ${ue[Ue]?"text-green-400":"text-gray-400"}`,children:["I have read and agree to the ",we.title]})]})]},Ue))]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[Object.values(ue).filter(Boolean).length," of ",se.length," sections agreed"]}),e.jsxs("button",{onClick:at,disabled:!ve,className:"px-8 py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg",children:[ve?e.jsx(pt,{size:18}):e.jsx(da,{size:18}),ve?"Confirm Agreement":"Agree to All Sections to Continue"]})]})]})]}),_&&e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>O(!1)}),e.jsxs("div",{className:"bg-zinc-900 border border-yellow-500/50 rounded-2xl p-8 max-w-md w-full relative z-20 shadow-[0_0_50px_rgba(234,179,8,0.2)] animate-in zoom-in-95 duration-200 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-yellow-900/20 border-2 border-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:e.jsx(gn,{size:40,className:"text-yellow-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Under Review"}),e.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed mb-6",children:["Thank you for applying to the Spoil Me Vintage Partnership Program. ",e.jsx("br",{}),e.jsx("br",{}),"Our team is currently reviewing your application details. This process typically takes ",e.jsx("strong",{children:"24-48 hours"}),"."]}),e.jsx("button",{onClick:()=>O(!1),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded-xl transition-colors",children:"Understood"})]})]}),f&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:be}),e.jsx("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-xl w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200 max-h-[95vh] overflow-y-auto",children:E?e.jsx("div",{className:"text-center py-8 px-4",children:e.jsxs("div",{className:"bg-zinc-800 border border-green-500/30 rounded-2xl p-8 shadow-[0_0_40px_rgba(34,197,94,0.1)] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-cyan-500"}),e.jsx("div",{className:"w-20 h-20 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto shadow-[0_0_20px_rgba(34,197,94,0.4)] mb-6",children:e.jsx(pt,{size:40,className:"text-green-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Received!"}),e.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["Thank you, ",e.jsx("strong",{children:L.name}),". Your application has been sent to our admin team for review."]}),e.jsx("button",{onClick:be,className:"mt-8 w-full py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg",children:"Done"})]})}):S?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center border-b border-gray-800 pb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Welcome Back"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Please log in to continue your application."})]}),C&&e.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/50 rounded-lg flex gap-2 items-center text-red-400 text-sm",children:[e.jsx(zu,{size:16})," ",C]}),e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:L.email,readOnly:!0,className:"w-full bg-zinc-800 border border-gray-700 rounded-lg p-3 text-gray-400 text-sm cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Password"}),e.jsx("input",{type:"password",value:I,onChange:we=>F(we.target.value),required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:""})]}),e.jsxs("button",{type:"submit",className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:[e.jsx(iw,{size:18})," Login & Continue Application"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>D(!1),className:"text-xs text-gray-500 hover:text-white underline",children:"Go Back"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Apply to Partner"}),e.jsx("button",{onClick:be,className:"text-gray-500 hover:text-white",children:e.jsx(ns,{size:24})})]}),w===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl",children:[e.jsxs("h3",{className:"text-purple-400 font-bold mb-2 flex items-center gap-2",children:[e.jsx(da,{size:18})," Reality Check"]}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"This is a business partnership. Inactive accounts (0 sales in 3 months) may be deactivated."})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("div",{className:`mt-1 w-5 h-5 rounded border flex items-center justify-center ${H?"bg-pink-500 border-pink-500":"border-gray-600"}`,children:H&&e.jsx(pt,{size:14,className:"text-white"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:H,onChange:we=>U(we.target.checked)}),e.jsx("span",{className:"text-sm text-gray-400 group-hover:text-white transition-colors",children:"I understand that this program requires active participation."})]}),e.jsx("button",{disabled:!H,onClick:()=>N(2),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all",children:"Continue"})]}),w===2&&e.jsxs("form",{onSubmit:Ie,className:"space-y-4",children:[!s.email&&e.jsxs("div",{className:"p-3 bg-zinc-800 rounded-lg border border-gray-700 mb-4",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Create your account to get started:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsx("input",{type:"text",placeholder:"First Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.name,onChange:we=>$({...L,name:we.target.value})}),e.jsx("input",{type:"text",placeholder:"Surname",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.surname,onChange:we=>$({...L,surname:we.target.value})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"email",placeholder:"Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.email,onChange:we=>$({...L,email:we.target.value})}),e.jsx("input",{type:"password",placeholder:"Create Password",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.password,onChange:we=>$({...L,password:we.target.value})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"date",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.dob,onChange:we=>$({...L,dob:we.target.value})}),e.jsxs("select",{className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",required:!0,value:L.gender,onChange:we=>$({...L,gender:we.target.value}),children:[e.jsx("option",{value:"",children:"Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Why do you want to join?"}),e.jsx("textarea",{required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none h-24",placeholder:"Tell us about your audience or marketing plan...",value:L.reason,onChange:we=>$({...L,reason:we.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Social Media Links"}),e.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Instagram, TikTok, Blog URL...",value:L.socials,onChange:we=>$({...L,socials:we.target.value})})]}),p==="ZAR"?e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-bold text-white",children:"Banking Details (EFT Payments)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Bank Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm"}),e.jsx("input",{type:"text",placeholder:"Account Number",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}),e.jsx("input",{type:"text",placeholder:"Branch Code",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-bold text-white",children:"PayPal Details (USD Payments)"}),e.jsx("input",{type:"email",placeholder:"PayPal Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("button",{type:"button",onClick:()=>P(!0),className:`w-full flex items-center justify-between p-4 rounded-xl border transition-all ${M?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:[e.jsxs("span",{className:"text-sm font-bold flex items-center gap-2",children:[e.jsx(jy,{size:16})," ",M?"Terms Accepted":"Read Terms & Conditions"]}),M?e.jsx(Xa,{size:18}):e.jsx(rr,{size:16})]}),!M&&e.jsx("p",{className:"text-xs text-red-400 mt-1 text-center",children:"You must accept terms to proceed."})]}),e.jsx("button",{type:"submit",disabled:!M,className:"w-full py-4 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all mt-4",children:"Submit Application"})]})]})})]}),e.jsx(b5,{isOpen:K,onClose:()=>me(!1)})]})},w5=()=>{const{user:s,register:t,login:r,processGiftVoucherPurchase:i}=vt();nr();const[o,l]=v.useState(250),[d,m]=v.useState(""),[p,f]=v.useState(""),[b,w]=v.useState(""),[N,R]=v.useState(""),[P,_]=v.useState("self"),[O,L]=v.useState(0),[$,M]=v.useState(!1),[te,H]=v.useState("register"),[U,E]=v.useState(!1),[j,S]=v.useState(""),[D,I]=v.useState(""),[F,C]=v.useState(""),[ee,ue]=v.useState(""),[Se,Pe]=v.useState(""),ce=v.useRef(null);v.useEffect(()=>{o>=250&&o<=500?L(100):L(0)},[o]);const ye=o+O,je=async()=>{await i(ye,{recipientName:d,senderName:p,message:b,whatsappNumber:N,deliveryMethod:P}),ce.current&&ce.current.submit()},K=()=>{if(!d||!p){alert("Please fill in the 'To' and 'From' fields.");return}s.email?je():M(!0)},me=async ve=>{if(ve.preventDefault(),ee!==Se){alert("Passwords do not match!");return}await t({name:j,email:D,birthday:F})&&(M(!1),setTimeout(()=>{je()},500))},se=async ve=>{ve.preventDefault(),await r(D,ee)?(M(!1),setTimeout(()=>{je()},500)):alert("Invalid Credentials")};return e.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 space-y-12 relative",children:[e.jsx(df,{ref:ce,amount:o,itemName:`Gift Voucher for ${d}`,email:s.email||D,customStr1:d,customStr2:p,customStr3:b,returnUrl:`${window.location.origin}/#/profile`,cancelUrl:`${window.location.origin}/#/gift-cards`}),$&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>M(!1)}),e.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:te==="register"?"Create Account to Pay":"Sign In to Pay"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["To secure your voucher and ensure delivery, please ",te==="register"?"create a profile":"sign in","."]})]}),te==="register"?e.jsxs("form",{onSubmit:me,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fn,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",required:!0,value:j,onChange:ve=>S(ve.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Jane Doe"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(bc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",required:!0,value:D,onChange:ve=>I(ve.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Birthday (For Birthday Vouchers)"}),e.jsxs("div",{className:"relative",children:[e.jsx(La,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"date",required:!0,value:F,onChange:ve=>C(ve.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(da,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:U?"text":"password",required:!0,value:ee,onChange:ve=>ue(ve.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Confirm"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:U?"text":"password",required:!0,value:Se,onChange:ve=>Pe(ve.target.value),className:"w-full p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),e.jsx("button",{type:"button",onClick:()=>E(!U),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:U?e.jsx(bu,{size:16}):e.jsx(il,{size:16})})]})]})]}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500 transition-colors",children:"Create Account & Pay"}),e.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",e.jsx("button",{type:"button",onClick:()=>H("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):e.jsxs("form",{onSubmit:se,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(bc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",required:!0,value:D,onChange:ve=>I(ve.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(da,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:U?"text":"password",required:!0,value:ee,onChange:ve=>ue(ve.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),e.jsx("button",{type:"button",onClick:()=>E(!U),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:U?e.jsx(bu,{size:16}):e.jsx(il,{size:16})})]})]}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500 transition-colors",children:"Sign In & Pay"}),e.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",e.jsx("button",{type:"button",onClick:()=>H("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-white drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Give the Gift of Vintage"}),e.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Create a personalized digital wish card."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl shadow-xl space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-800",children:[e.jsx("div",{className:"p-2 bg-pink-900/30 text-pink-500 rounded-lg",children:e.jsx(vs,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Customize Voucher"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enter details below"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Amount (R)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"R"}),e.jsx("input",{type:"number",value:o,onChange:ve=>l(parseFloat(ve.target.value)),className:"w-full bg-black border border-gray-700 rounded-xl py-4 pl-10 pr-4 text-white text-xl font-bold focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none transition-all",placeholder:"250",min:"50"})]}),o>=250&&o<=500?e.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-xs font-bold bg-green-900/20 p-2 rounded border border-green-500/30 animate-in fade-in slide-in-from-top-2",children:[e.jsx(As,{size:14}),"Bonus R100 added to voucher value automatically!"]}):e.jsxs("p",{className:"text-xs text-gray-500",children:["Tip: Spend between ",e.jsx("strong",{children:"R250 - R500"})," to get a ",e.jsx("span",{className:"text-pink-500 font-bold",children:"FREE R100"})," bonus!"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"To (Recipient Name)"}),e.jsx("input",{type:"text",value:d,onChange:ve=>m(ve.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. Sarah"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 flex items-center gap-2",children:[e.jsx(yp,{size:14})," From (Your Name)"]}),e.jsx("input",{type:"text",value:p,onChange:ve=>f(ve.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. John"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Personal Message"}),e.jsx("textarea",{rows:4,value:b,onChange:ve=>w(ve.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none resize-none",placeholder:"Write a sweet note...",maxLength:150}),e.jsxs("div",{className:"text-right text-[10px] text-gray-600",children:[b.length,"/150"]})]}),e.jsxs("div",{className:"space-y-4 pt-2 border-t border-gray-800",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-300",children:"How should we deliver this?"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{onClick:()=>_("self"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${P==="self"?"bg-purple-900/20 border-purple-500 ring-1 ring-purple-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[e.jsx("div",{className:`mt-1 p-1 rounded-full ${P==="self"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400"}`,children:e.jsx(Fn,{size:16})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`text-sm font-bold ${P==="self"?"text-purple-400":"text-gray-300"}`,children:"Send to Me (Higher Success Rate)"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("span",{className:"text-[10px] bg-green-900/40 text-green-400 border border-green-500/30 px-1.5 py-0.5 rounded font-bold flex items-center gap-1",children:[e.jsx(pt,{size:10})," Best Option"]})}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We send the voucher code and link to YOU via notification. You can then forward it via WhatsApp personally."}),P==="self"&&e.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:ve=>ve.stopPropagation(),children:[e.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[e.jsx(Ga,{size:12})," Your WhatsApp Number"]}),e.jsx("input",{type:"text",value:N,onChange:ve=>R(ve.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]}),e.jsxs("div",{onClick:()=>_("recipient"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${P==="recipient"?"bg-pink-900/20 border-pink-500 ring-1 ring-pink-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[e.jsx("div",{className:`mt-1 p-1 rounded-full ${P==="recipient"?"bg-pink-500 text-white":"bg-gray-800 text-gray-400"}`,children:e.jsx(Lu,{size:16})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`text-sm font-bold ${P==="recipient"?"text-pink-400":"text-gray-300"}`,children:"Send directly to Recipient"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We will email or WhatsApp the recipient directly on your behalf."}),P==="recipient"&&e.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:ve=>ve.stopPropagation(),children:[e.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[e.jsx(al,{size:12})," Recipient WhatsApp (Optional)"]}),e.jsx("input",{type:"text",value:N,onChange:ve=>R(ve.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]})]})]}),e.jsxs("button",{onClick:K,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 text-lg",children:[e.jsx(xc,{size:20})," Buy Now & Pay - R",o.toFixed(2)]}),e.jsxs("p",{className:"text-center text-xs text-gray-500 mt-2 flex items-center justify-center gap-1",children:[e.jsx(pt,{size:12,className:"text-green-500"})," Secure Payment via PayFast"]})]}),e.jsxs("div",{className:"sticky top-24",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(xc,{size:16})," Example"]}),e.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),e.jsx("div",{className:"absolute top-0 left-0 p-4 opacity-10 pointer-events-none",children:e.jsx("span",{className:"font-cherry text-8xl text-white leading-none",children:"SV"})}),e.jsxs("div",{className:"relative h-full p-6 md:p-8 flex flex-col justify-between z-20",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-cherry text-xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.3)]",children:"Spoil Me Vintage"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(As,{size:10,className:"text-cyan-400"}),e.jsx("p",{className:"text-[10px] text-gray-300 tracking-[0.2em] uppercase",children:"Exclusive Voucher"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-2xl md:text-5xl font-bold text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.5)] font-architects",children:["R",ye]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center py-2 md:py-4 relative",children:[e.jsxs("p",{className:"font-architects text-lg md:text-2xl text-gray-200 leading-relaxed text-center break-words relative drop-shadow-sm line-clamp-3",children:['"',b||"Treat yourself to something timeless...",'"']}),e.jsx("div",{className:"mx-auto mt-4 md:mt-6 cursor-pointer group w-full md:w-auto flex justify-center",children:e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-full px-6 py-3 md:px-6 md:py-2 flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(34,211,238,0.2)] hover:bg-cyan-900/30 hover:border-cyan-400 transition-all w-full md:w-auto",children:[e.jsx("span",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs md:text-xs font-bold text-white uppercase tracking-widest group-hover:text-cyan-300 transition-colors",children:"Redeem Now"}),e.jsx(rr,{size:12,className:"text-cyan-400 group-hover:translate-x-1 transition-transform"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-800 pt-3 md:pt-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"To"}),e.jsx("p",{className:"text-sm font-bold text-white truncate",children:d||"Recipient Name"})]}),e.jsxs("div",{className:"space-y-1 text-right",children:[e.jsxs("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center justify-end gap-1",children:["From ",e.jsx(yp,{size:10})]}),e.jsx("p",{className:"text-lg font-architects text-cyan-400 truncate",children:p||"Your Name"})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-zinc-900/50 border border-gray-800 rounded-xl p-5 shadow-lg",children:[e.jsxs("h4",{className:"font-bold text-white text-sm mb-3 flex items-center gap-2 border-b border-gray-800 pb-2",children:[e.jsx(pt,{size:14,className:"text-green-400"})," Verified Voucher Features"]}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-2.5",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(As,{size:12,className:"text-purple-400 mt-0.5"})," Valid for 3 years from date of purchase."]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Ga,{size:12,className:"text-cyan-400 mt-0.5"})," ",e.jsx("span",{className:"text-white font-bold",children:"Smart Link:"}),' Recipient taps "Redeem Now" to auto-apply discount in App.']}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(al,{size:12,className:"text-green-400 mt-0.5"})," ",e.jsx("span",{className:"text-white font-bold",children:"Instant Delivery"})," via Notification & WhatsApp."]})]})]})]})]})]})},j5=()=>{const{categoryName:s}=ul(),{products:t,categories:r}=vt(),i=decodeURIComponent(s||""),o=r.find(d=>d.name===i),l=t.filter(d=>d.category===i);return v.useEffect(()=>{window.scrollTo(0,0)},[s]),o?e.jsxs("div",{className:"space-y-8 pb-12",children:[e.jsxs("div",{className:"relative h-64 md:h-80 rounded-2xl overflow-hidden bg-zinc-900 border border-gray-800 shadow-2xl group",children:[e.jsx("img",{src:o.image,alt:o.name,className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"}),e.jsxs("div",{className:"absolute bottom-0 left-0 p-8 w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(We,{to:"/",className:"text-xs text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[e.jsx(vi,{size:12})," Home"]}),e.jsx("span",{className:"text-gray-600",children:"/"}),e.jsx("span",{className:"text-xs text-pink-500 font-bold tracking-wider uppercase",children:"Collection"})]}),e.jsx("h1",{className:"font-cherry text-4xl md:text-6xl text-white drop-shadow-lg mb-2",children:o.name}),o.description&&e.jsx("p",{className:"text-gray-300 max-w-2xl text-sm md:text-base font-light border-l-4 border-pink-500 pl-4",children:o.description})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(As,{size:20,className:"text-cyan-400"}),"Available Treasures (",l.length,")"]})}),l.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:l.map(d=>e.jsx(to,{product:d},d.id))}):e.jsxs("div",{className:"py-20 text-center border border-dashed border-gray-800 rounded-2xl",children:[e.jsx("p",{className:"text-gray-500",children:"No products found in this collection yet."}),e.jsx(We,{to:"/",className:"text-pink-500 text-sm mt-4 inline-block hover:underline",children:"Browse other collections"})]})]})]}):e.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Collection Not Found"}),e.jsxs(We,{to:"/",className:"text-pink-500 hover:text-pink-400 flex items-center gap-2",children:[e.jsx(vi,{size:20})," Back to Home"]})]})},N5=()=>{const{type:s}=ul(),{products:t,categories:r}=vt(),[i,o]=v.useState("newest"),[l,d]=v.useState(!1),[m,p]=v.useState(""),[f,b]=v.useState(""),[w,N]=v.useState(!1),[R,P]=v.useState(1),_=20;v.useEffect(()=>{window.scrollTo(0,0),d(!1),p(""),b(""),o("newest"),P(1)},[s]);const{title:O,baseProducts:L}=v.useMemo(()=>{let U="",E=[];switch(s){case"stud":U="Stud Earrings",E=t.filter(j=>j.type==="Stud"||j.isFeaturedStud);break;case"dangle":U="Dangle Earrings",E=t.filter(j=>j.type==="Dangle"||j.isFeaturedDangle);break;case"ring":U="Rings",E=t.filter(j=>j.type==="Ring");break;case"unique":U="Unique Pendants",E=t.filter(j=>j.isUniquePendant);break;case"bracelet":U="Bracelets",E=t.filter(j=>j.type==="Bracelet"||j.isFeaturedBracelet);break;case"watch":U="Watches",E=t.filter(j=>j.isFeaturedWatch);break;case"best":U="Best Sellers",E=t.filter(j=>j.isBestSeller);break;case"sets":U="Jewelry Sets",E=t.filter(j=>j.isJewelrySet);break;default:U="Catalog",E=t}return{title:U,baseProducts:E}},[s,t]),$=v.useMemo(()=>{const U=new Set;return L.forEach(E=>{var j;(j=E.colors)==null||j.forEach(S=>U.add(S))}),Array.from(U).sort()},[L]),M=v.useMemo(()=>{let U=[...L];if(l){const E=new Date;U=U.filter(j=>{const S=j.promoStartsAt?new Date(j.promoStartsAt):null,D=j.promoExpiresAt?new Date(j.promoExpiresAt):null;return(j.promoPrice||0)>0&&(!S||S<=E)&&(!D||D>E)})}return m&&(U=U.filter(E=>{var j;return(j=E.colors)==null?void 0:j.includes(m)})),f&&(U=U.filter(E=>E.category===f)),U.sort((E,j)=>i==="price_asc"?E.price-j.price:i==="price_desc"?j.price-E.price:new Date(j.createdAt).getTime()-new Date(E.createdAt).getTime()),U},[L,l,m,f,i]),te=v.useMemo(()=>{const U=(R-1)*_,E=U+_;return M.slice(U,E)},[M,R,_]),H=Math.ceil(M.length/_);return e.jsxs("div",{className:"space-y-8 pb-12 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 pt-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs text-gray-500",children:[e.jsxs(We,{to:"/",className:"hover:text-white flex items-center gap-1",children:[e.jsx(vi,{size:12})," Home"]}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-pink-500 font-bold",children:O})]}),e.jsx("h1",{className:"font-cherry text-3xl md:text-4xl text-white",children:O}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[M.length," Items Found"]})]}),e.jsxs("button",{className:"md:hidden flex items-center gap-2 bg-zinc-800 px-4 py-2 rounded text-white text-sm w-fit",onClick:()=>N(!w),children:[e.jsx(RA,{size:16})," Filters & Sort"]}),e.jsxs("div",{className:`flex-col md:flex-row gap-4 items-start md:items-center bg-zinc-900/80 p-4 rounded-xl border border-gray-800 ${w?"flex":"hidden md:flex"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Sort:"}),e.jsxs("select",{value:i,onChange:U=>o(U.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none",children:[e.jsx("option",{value:"newest",children:"Newest"}),e.jsx("option",{value:"price_asc",children:"Price Low-High"}),e.jsx("option",{value:"price_desc",children:"Price High-Low"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none bg-black border border-gray-700 px-3 py-1 rounded hover:border-pink-500 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:U=>d(U.target.checked),className:"hidden"}),e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${l?"bg-pink-600 border-pink-600":"border-gray-500"}`,children:l&&e.jsx(pt,{size:10,className:"text-white"})}),e.jsx("span",{className:`text-sm ${l?"text-pink-400 font-bold":"text-gray-300"}`,children:"Promotions"})]}),e.jsxs("select",{value:f,onChange:U=>b(U.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[e.jsx("option",{value:"",children:"All Collections"}),r.map(U=>e.jsx("option",{value:U.name,children:U.name},U.id))]}),$.length>0&&e.jsxs("select",{value:m,onChange:U=>p(U.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[e.jsx("option",{value:"",children:"All Colors"}),$.map(U=>e.jsx("option",{value:U,children:U},U))]}),(l||m||f)&&e.jsx("button",{onClick:()=>{d(!1),p(""),b("")},className:"text-xs text-red-400 hover:text-red-300 underline",children:"Clear"})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:te.map(U=>e.jsx(to,{product:U},U.id))}),M.length===0&&e.jsxs("div",{className:"py-20 text-center bg-zinc-900/30 rounded-xl border border-dashed border-gray-800",children:[e.jsx("p",{className:"text-gray-400",children:"No products found matching your filters."}),e.jsx("button",{onClick:()=>{d(!1),p(""),b("")},className:"mt-4 text-pink-500 font-bold hover:underline",children:"Clear Filters"})]}),H>1&&e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between text-sm text-gray-400 mt-8",children:[e.jsxs("div",{children:["Page ",R," of ",H]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>P(U=>Math.max(U-1,1)),className:"bg-black border border-gray-700 rounded px-3 py-1 hover:bg-gray-800 transition-colors disabled:opacity-50",disabled:R===1,children:"Previous"}),e.jsx("button",{onClick:()=>P(U=>Math.min(U+1,H)),className:"bg-black border border-gray-700 rounded px-3 py-1 hover:bg-gray-800 transition-colors disabled:opacity-50",disabled:R===H,children:"Next"})]})]})]})},S5=()=>{const{isDemoMode:s,resetStore:t,seedTestUsers:r,user:i}=vt(),[o,l]=v.useState(!1);if(!i||!i.isAdmin)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-zinc-900 text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-400",children:"You do not have permission to access the admin panel."})]})});const d=[{path:"/admin",label:"Dashboard"},{path:"/admin/orders",label:"Orders"},{path:"/admin/products",label:"Products"},{path:"/admin/categories",label:"Categories"},{path:"/admin/artists",label:"Artists"},{path:"/admin/members",label:"Membership"}],m=async()=>{l(!0);const p=`admin-test-${Date.now()}`;try{const f={id:p,name:"Admin Test Write",slug:`admin-test-write-${Date.now()}`,price:0,priceUSD:0,category:"System",type:"Other",status:"draft",images:[],createdAt:new Date().toISOString(),tags:[]};await ia("products",f);const b=await _c("products",p);alert(b?"Supabase write succeeded (test record created and verified). It will be removed now.":"Test write completed but verification read-back failed. Check DB permissions.")}catch(f){console.error("Admin test write failed:",f),alert("Supabase test write failed: "+((f==null?void 0:f.message)||f))}finally{try{await Rp("products",p)}catch{}l(!1)}};return e.jsxs("div",{className:"space-y-8 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Dashboard Overview"}),e.jsxs("div",{className:"flex gap-2",children:[!s&&e.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-3 py-2 rounded hover:bg-purple-900/50 transition-colors",children:[e.jsx(LA,{size:14})," Seed Test Users"]}),s&&e.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-3 py-2 rounded hover:bg-red-900/50 transition-colors",children:[e.jsx(wc,{size:14})," Reset Demo Data"]}),e.jsxs("button",{onClick:m,disabled:o,className:"flex items-center gap-2 text-xs bg-yellow-900/20 text-yellow-300 border border-yellow-500/30 px-3 py-2 rounded hover:bg-yellow-900/30 transition-colors",children:[e.jsx(DA,{size:14})," ",o?"Testing...":"Test write to Supabase"]})]})]}),e.jsx("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:d.map(p=>e.jsx(We,{to:p.path,className:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white bg-zinc-800/50 hover:bg-zinc-700 rounded-lg transition-colors",children:p.label},p.path))})}),e.jsx("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-3 rounded-lg mb-4",children:e.jsxs("p",{className:"text-yellow-400 text-sm font-medium flex items-center gap-2",children:[e.jsx(gi,{size:16}),"Reviews take up to 72 hours. Artists will be notified via email and in-app notification once their application is processed."]})}),e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsxs(We,{to:"/admin/artists",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(lw,{size:16})," Review Applications"]})})]})})]})},ci={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_VAPID_KEY:"BEZuB_F1gXmTyk47fzfgaEWXKTluRTYdB1MVSyfvQhjkueVbpPywG1vIAUeLVwUsvWcb1a4RE3aver4Ds8wcx8M",VITE_GEMINI_API_KEY:"AIzaSyAfiT5YMXQEnse-Dj0usPD8w42nfG4UMiY",VITE_PAYPAL_CLIENT_ID:"Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",VITE_PAYPAL_DELUXE_PLAN_ID:"P-5D389612KP666993XNE2N7UY",VITE_PAYPAL_GOLD_PLAN_ID:"P-4KK8219436336790HNE2N7HQ",VITE_PAYPAL_INSIDER_PLAN_ID:"P-27V6575111695415KNE2N6OI",VITE_SUPABASE_ANON_KEY:"sb_publishable_KwSUm9DTjeHvxqOSfECRFQ_4dkpCxAW",VITE_SUPABASE_URL:"https://xqcnqtrzamgzsrgbmxuk.supabase.co"},k5={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},_5=[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Black",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Silver",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Hypo-Allergic Plastic",modifier:0,description:"Plastic state bends easily"}],Fy=["Epoxy Resin","Copper","Aluminium","Sterling Silver","Glass Beads","Beads","Wood","Oxidized"],By="spv_base_materials",Vy="spv_made_by_options",Wy=["Spoil Me Vintage","Outsourced"],C5=()=>{var tt,qt,xs,xr,Zn,yn,ki,bn,io;const{products:s,addProduct:t,updateProduct:r,deleteProduct:i,categories:o,packagingPresets:l,materialPresets:d,savePackagingPreset:m,saveMaterialPreset:p,deleteMaterialPreset:f,dbConnectionError:b,login:w,manualWinner:N,setManualWinner:R,isLoading:P}=vt(),[_,O]=v.useState(!1),[L,$]=v.useState(!1),[M,te]=v.useState(!1),[H,U]=v.useState(!1),[E,j]=v.useState(!1),[S,D]=v.useState(null),I=v.useRef(null),[F,C]=v.useState(!1),[ee,ue]=v.useState("general"),[Se,Pe]=v.useState(()=>{try{const A=localStorage.getItem(By),Z=A?JSON.parse(A):null,Me=Array.isArray(Z)?Z.map(Ke=>String(Ke)).filter(Boolean):[];return Array.from(new Set([...Fy,...Me]))}catch{return Fy}}),[ce,ye]=v.useState(""),[je,K]=v.useState(()=>{try{const A=localStorage.getItem(Vy),Z=A?JSON.parse(A):null,Me=Array.isArray(Z)?Z.map(Ke=>String(Ke)).filter(Boolean):[];return Array.from(new Set([...Wy,...Me]))}catch{return Wy}}),[me,se]=v.useState("");v.useEffect(()=>{try{localStorage.setItem(By,JSON.stringify(Se))}catch{}},[Se]),v.useEffect(()=>{try{localStorage.setItem(Vy,JSON.stringify(je))}catch{}},[je]);const ve=A=>A?A.split(/[,|;]/).map(Z=>Z.trim()).filter(Boolean):[],G=()=>Array.from(new Set(ve(X.material))),Ie=A=>{const Z=Array.from(new Set(A.map(Me=>Me.trim()).filter(Boolean)));$e(Me=>({...Me,material:Z.join(", ")}))},be=A=>{const Z=A.trim();if(!Z)return;const Me=G(),Ae=Me.some(Zt=>Zt.toLowerCase()===Z.toLowerCase())?Me.filter(Zt=>Zt.toLowerCase()!==Z.toLowerCase()):[...Me,Z];Ie(Ae)},He=()=>{const A=ce.trim();A&&(Pe(Z=>Z.some(Ke=>Ke.toLowerCase()===A.toLowerCase())?Z:[...Z,A]),ye(""),be(A))},qe=()=>{const A=me.trim();A&&(K(Z=>Z.some(Ke=>Ke.toLowerCase()===A.toLowerCase())?Z:[...Z,A]),$e(Z=>({...Z,madeBy:A})),se(""))},[at,Rt]=v.useState(null),[xe,Je]=v.useState(null),[wt,Lt]=v.useState(""),[ae,ge]=v.useState(""),[ze,we]=v.useState(""),[Ue,et]=v.useState(""),[fe,nt]=v.useState(!1),[dt,_t]=v.useState(""),[xt,Kt]=v.useState(""),Bt=v.useRef(null),is=v.useRef(null),ds=v.useRef(null),De=A=>({Ring:"Rings",Rings:"Rings",Stud:"Stud Earrings","Stud Earrings":"Stud Earrings",Dangle:"Dangle Earrings","Dangle Earrings":"Dangle Earrings",Pendant:"Pendants",Pendants:"Pendants",Bracelet:"Bracelets",Bracelets:"Bracelets",Watch:"Watches",Watches:"Watches","Jewelry Box":"Jewelry Boxes","Jewelry Boxes":"Jewelry Boxes","Perfume Holder":"Perfume Holders","Perfume Holders":"Perfume Holders",Other:"Other"})[A]||A,Ns=A=>{const Z=((A==null?void 0:A.type)??"").toString().trim();if(Z)return Z;const Me=((A==null?void 0:A.productType)??"").toString().trim();if(Me)return Me;const Ke=((A==null?void 0:A.name)??"").toString().toLowerCase();return Ke?Ke.includes("perfume")?"Perfume Holder":Ke.includes("jewelry box")||Ke.includes("jewellery box")?"Jewelry Box":Ke.includes("watch")?"Watch":Ke.includes("bracelet")?"Bracelet":Ke.includes("pendant")?"Pendant":Ke.includes("necklace")?"Necklace":Ke.includes("ring")?"Ring":Ke.includes("dangle")?"Dangle":Ke.includes("stud")?"Stud":"Other":"Other"},us=A=>({general:"General",pricing:"Pricing",media:"Media",inventory:"Inventory",marketing:"Marketing",reviews:"Reviews",promotions:"Promotions",gifts:"Gifts"})[A]||A,Ms={id:"",code:"",name:"",slug:"",description:"",whenAndHowToWear:"",price:0,priceUSD:0,compareAtPrice:0,compareAtPriceUSD:0,memberPrice:0,memberPriceUSD:0,costPrice:0,shippingCost:0,packaging:[],backOfficeLink:"",madeBy:"Spoil Me Vintage",category:((tt=o[0])==null?void 0:tt.name)||"",type:"Stud",status:"draft",images:[""],stock:0,soldCount:0,tags:[],seoKeywords:[],colors:[],isNewArrival:!1,isBestSeller:!1,isFeaturedRing:!1,isFeaturedBracelet:!1,isFeaturedWatch:!1,isUniquePendant:!1,isFeaturedStud:!1,isFeaturedDangle:!1,isFeaturedJewelryBox:!1,isFeaturedPerfumeHolder:!1,isJewelrySet:!1,createdAt:new Date().toISOString(),ringStock:{5:0,6:0,7:0,8:0,9:0,10:0,11:0},earringMaterials:[],showEarringOptions:!1,pendantChainLengths:{},pendantWireWrapped:!1,chainStyles:[],material:"",reviews:[],giftProductId:"",giftValue:0,promoPrice:0,promoStartsAt:"",promoExpiresAt:"",promoBasicMemberPrice:0,promoPremiumMemberPrice:0,promoDeluxeMemberPrice:0,isSoldOut:!1},[X,$e]=v.useState(Ms),[Zs,Ls]=v.useState(""),[Wr,fr]=v.useState(""),[Ts,Ot]=v.useState(""),[gr,ir]=v.useState(0),[Rs,Pr]=v.useState(""),[Hn,ts]=v.useState(""),[Us,Ne]=v.useState(5),Ye=[..._5,...d];ra.useEffect(()=>{$e(A=>({...A,memberPrice:parseFloat((A.price*.8).toFixed(2)),memberPriceUSD:parseFloat((A.priceUSD*.8).toFixed(2))}))},[X.price,X.priceUSD]);const Ct=()=>{var A;$e({...Ms,id:`SPV-${Date.now()}`,createdAt:new Date().toISOString(),category:((A=o[0])==null?void 0:A.name)||""}),O(!0),ue("general"),ts("")},Jt=A=>{const Z={...Ms,...A,compareAtPrice:A.compareAtPrice||0,compareAtPriceUSD:A.compareAtPriceUSD||0,priceUSD:A.priceUSD||0,memberPrice:A.price?parseFloat((A.price*.8).toFixed(2)):A.memberPrice||0,memberPriceUSD:A.priceUSD?parseFloat((A.priceUSD*.8).toFixed(2)):A.memberPriceUSD||0,costPrice:A.costPrice||0,shippingCost:A.shippingCost||0,soldCount:A.soldCount||0,packaging:A.packaging||[],ringStock:A.ringStock||Ms.ringStock,pendantChainLengths:A.pendantChainLengths||{},showEarringOptions:A.showEarringOptions??!1,chainStyles:A.chainStyles||[],reviews:A.reviews||[],giftProductId:A.giftProductId||"",giftValue:A.giftValue||0,promoPrice:A.promoPrice||0,promoStartsAt:A.promoStartsAt||"",promoExpiresAt:A.promoExpiresAt||"",promoBasicMemberPrice:A.promoBasicMemberPrice||0,promoPremiumMemberPrice:A.promoPremiumMemberPrice||0,promoDeluxeMemberPrice:A.promoDeluxeMemberPrice||0,tags:A.tags||[],seoKeywords:A.seoKeywords||[],colors:A.colors||[],isFeaturedJewelryBox:A.isFeaturedJewelryBox||!1,isFeaturedPerfumeHolder:A.isFeaturedPerfumeHolder||!1};$e(Z),O(!0),ue("general"),ts("")},Pt=async()=>{if(!X.name||!X.price){alert("Name and Price are required");return}$(!0);try{let A=[];const Z=X.images.map(async(ut,Ws)=>{var yt;if(typeof ut=="string"&&ut.startsWith("data:"))try{const as=await(await fetch(ut)).blob(),Ar=((yt=as.type.split("/"))==null?void 0:yt[1])||"jpg",Tr=`products/${X.id}/img_${Date.now()}_${Ws}.${Ar}`;try{return await Ip("products",Tr,as)||""}catch(Yt){return console.warn("Supabase upload failed, falling back to base64:",Yt),ut}}catch(as){return console.error("Failed to process base64 image:",as),""}return ut});A=(await Promise.all(Z)).filter(ut=>ut&&ut.trim()!=="");const Ke=29,Ae={...X,images:A,price:Number(X.price),priceUSD:Number(X.priceUSD),stock:Number(X.stock),soldCount:Number(X.soldCount),compareAtPrice:Number(X.compareAtPrice||0),memberPrice:Number(X.memberPrice||0),memberPriceUSD:Number(X.memberPriceUSD||0),costPrice:Number(X.costPrice||0),shippingCost:Number(X.shippingCost||0),giftValue:Number(X.giftValue||0),promoPrice:Number(X.promoPrice||0),promoBasicMemberPrice:Number(X.promoBasicMemberPrice||0),promoPremiumMemberPrice:Number(X.promoPremiumMemberPrice||0),promoDeluxeMemberPrice:Number(X.promoDeluxeMemberPrice||0)};try{(Ae.price||0)>0&&!Ae.priceUSD?Ae.priceUSD=parseFloat((Ae.price/Ke).toFixed(2)):(Ae.priceUSD||0)>0&&!Ae.price&&(Ae.price=parseFloat((Ae.priceUSD*Ke).toFixed(2))),(Ae.memberPrice||0)>0&&!Ae.memberPriceUSD?Ae.memberPriceUSD=parseFloat((Ae.memberPrice/Ke).toFixed(2)):(Ae.memberPriceUSD||0)>0&&!Ae.memberPrice&&(Ae.memberPrice=parseFloat((Ae.memberPriceUSD*Ke).toFixed(2))),(Ae.compareAtPrice||0)>0&&!Ae.compareAtPriceUSD?Ae.compareAtPriceUSD=parseFloat((Ae.compareAtPrice/Ke).toFixed(2)):(Ae.compareAtPriceUSD||0)>0&&!Ae.compareAtPrice&&(Ae.compareAtPrice=parseFloat((Ae.compareAtPriceUSD*Ke).toFixed(2)))}catch(ut){console.warn("Currency conversion failed:",ut)}if(!Ae.slug||!Ae.slug.trim()){const ut=(Ae.name||"").toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");Ae.slug=ut||`product-${Ae.id||Date.now()}`,$e(Ws=>({...Ws,slug:Ae.slug}))}const Zt={packaging:Ae.packaging||[],ringStock:Ae.ringStock||{},earringMaterials:Ae.earringMaterials||[],chainStyles:Ae.chainStyles||[]};Ae.options=Zt,Ae.type==="Ring"&&Ae.ringStock&&(Ae.stock=Object.values(Ae.ringStock).reduce((ut,Ws)=>ut+Ws,0)),console.log("DEBUG: Product to save (final):",{id:Ae.id,slug:Ae.slug,price:Ae.price,stock:Ae.stock,status:Ae.status,images:Ae.images,options:Ae.options}),s.some(ut=>ut.id===Ae.id)?await r(Ae):await t(Ae);try{ls&&(await _c("products",Ae.id)||alert("Warning: Product saved locally but failed to persist to Supabase. Check DB connection or permissions."))}catch(ut){console.warn("Post-save verification failed:",ut)}O(!1)}catch(A){console.error("Failed to save product:",A),alert("Failed to save product. Please check console.")}finally{$(!1)}},At=async A=>{if(window.confirm("Are you sure?"))try{await i(A)}catch{alert("Failed to delete product.")}},Wt=async()=>{if(!X.name||!X.category){alert("Please enter a name and category first.");return}const A=await It(X.name,X.category);$e(Z=>({...Z,description:A})),U(!1)},It=async(A,Z)=>{te(!0);try{const Me=(ci==null?void 0:ci.VITE_GEMINI_PROXY_URL)||"/api/gemini-proxy",Ae=await(await fetch(`${Me}/generate-description`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:A,category:Z,keywords:"Handmade, Unique, Vintage"})})).json().catch(()=>({}));return(Ae==null?void 0:Ae.text)||(Ae==null?void 0:Ae.description)||""}catch(Me){return console.warn("Failed to generate description:",Me),""}finally{te(!1)}},en=async A=>{var Ke;const Z=(Ke=A.target.files)==null?void 0:Ke[0];if(!Z)return;j(!0);const Me=new FileReader;Me.onloadend=async()=>{const Ae=Me.result,Zt=[Ae,...X.images.filter(yt=>yt!=="")];$e(yt=>({...yt,images:Zt})),console.log("AdminProducts: Added base64 image for analysis (preview length):",Ae.slice(0,80));let ut=null;try{const{data:yt,error:as}=await Ve.functions.invoke("gemini-analyze",{body:{image:Ae,category:X.category}});as?console.warn("gemini-analyze returned error:",as):ut=yt}catch(yt){console.warn("Failed to call supabase function gemini-analyze:",yt)}if(!ut){const yt=Ni(X.category||"Jewelry");yt&&($e(as=>({...as,name:yt.name,description:yt.description,whenAndHowToWear:yt.whenAndHowToWear,tags:[...new Set([...as.tags||[],...yt.tags])],seoKeywords:[...new Set([...as.seoKeywords||[],...yt.seoKeywords])],colors:[...new Set([...as.colors||[],...yt.colors])],slug:yt.name.toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-")})),U(!0),D("Image analysis unavailable  applied local suggestions"),setTimeout(()=>D(null),5e3)),j(!1);return}$e(yt=>({...yt,name:ut.name,description:ut.description,whenAndHowToWear:ut.whenAndHowToWear,tags:[...new Set([...yt.tags||[],...ut.tags||[]])],seoKeywords:[...new Set([...yt.seoKeywords||[],...ut.seoKeywords||[]])],colors:[...new Set([...yt.colors||[],...ut.colors||[]])],slug:(ut.name||yt.name).toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-")})),U(!0);const Ws=(ut.description||"").trim();if(!Ws||Ws.length<40){const yt=await It(ut.name||X.name||"",X.category||"Jewelry");yt&&yt.trim().length>0&&($e(as=>({...as,description:yt})),D("Fields auto-filled from image analysis (description generated)"),setTimeout(()=>D(null),4e3))}setTimeout(()=>{var yt;try{(yt=I.current)==null||yt.focus()}catch{}D("Fields auto-filled from image analysis"),setTimeout(()=>D(null),4e3)},50),j(!1)},Me.readAsDataURL(Z)},qn=async A=>{const Z=A.target.files;if(!Z||Z.length===0)return;const Me=Array.from(Z).map(Ae=>new Promise(Zt=>{const ut=new FileReader;ut.onloadend=()=>Zt(ut.result),ut.readAsDataURL(Ae)})),Ke=await Promise.all(Me);$e(Ae=>({...Ae,images:[...Ae.images.filter(Zt=>Zt.trim()!==""),...Ke]})),A.target.value=""},Gn=async()=>{if(!X.name){alert("Please enter a product name first.");return}C(!0);const A=(ci==null?void 0:ci.VITE_GEMINI_PROXY_URL)||"/api/gemini-proxy",Me=await(await fetch(`${A}/generate-reviews`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:X.name,count:Us,type:"south_african"})})).json()||[];Me.length>0&&$e(Ke=>({...Ke,reviews:[...Ke.reviews||[],...Me]})),C(!1)},ar=async()=>{C(!0);const A=(ci==null?void 0:ci.VITE_GEMINI_PROXY_URL)||"/api/gemini-proxy",Me=await(await fetch(`${A}/generate-reviews`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({count:25,type:"unique_pendant"})})).json()||[];Me.length>0&&$e(Ke=>({...Ke,reviews:[...Ke.reviews||[],...Me]})),C(!1)},Kn=()=>{const A=Math.floor(1e5+Math.random()*9e5);$e(Z=>({...Z,code:`SPV-${A}`}))},ji=()=>{if(!X.name)return;const A=X.name.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");$e(Z=>({...Z,slug:A}))},Ni=A=>{try{const Z=["Timeless","Elegant","Vintage","Handmade","Artisan","Luxe","Delicate","Statement","Classic","Boho"],Me=["Gold","Silver","Sterling Silver","Resin","Bronze","Copper","Glass","Crystal","Gemstone"],Ke=["Art Deco","Vintage","Boho","Minimalist","Retro","Contemporary","Minimal"],Ae=Yt=>Yt[Math.floor(Math.random()*Yt.length)],Zt=(A||"Piece").replace(/[^a-zA-Z0-9 ]/g,""),ut=`${Ae(Z)} ${Ae(Ke)} ${Zt}`.trim(),Ws=Array.from(new Set([Ae(Me),Ae(["Ring","Pendant","Stud","Dangle","Bracelet"])])).slice(0,5),yt=`${ut} is expertly crafted and perfect for elevating everyday looks or special occasions. Hand-finished details and quality materials ensure lasting beauty.`,as=Array.from(new Set(ut.split(" ").slice(0,4).map(Yt=>Yt.toLowerCase()).concat(Ws.map(Yt=>Yt.toLowerCase())))).slice(0,6);return{name:ut,description:yt,whenAndHowToWear:"Perfect for both everyday wear and special occasions. Layer with other pieces for a curated look.",tags:Ws,seoKeywords:as,colors:[]}}catch{return null}},Si=A=>{$e(Z=>{var Me;return{...Z,reviews:(Me=Z.reviews)==null?void 0:Me.filter(Ke=>Ke.id!==A)}})},Er=(A,Z,Me)=>{if(!Z.trim())return;const Ke=Z.split(",").map(Ae=>Ae.trim()).filter(Ae=>Ae.length>0);$e(Ae=>({...Ae,[A]:Array.from(new Set([...Ae[A]||[],...Ke]))})),Me("")},Jn=(A,Z)=>{$e(Me=>{var Ke;return{...Me,[A]:(Ke=Me[A])==null?void 0:Ke.filter((Ae,Zt)=>Zt!==Z)}})},V=A=>{const Z=X.images.filter((Me,Ke)=>Ke!==A);Z.length===0&&Z.push(""),$e({...X,images:Z})},B=A=>{Rt(A.id),Je({userName:A.userName,location:A.location,content:A.content,rating:A.rating,date:A.date||new Date().toLocaleDateString()})},q=()=>{!at||!xe||($e(A=>{var Z;return{...A,reviews:(Z=A.reviews)==null?void 0:Z.map(Me=>Me.id===at?{...Me,...xe}:Me)}}),Rt(null),Je(null))},Q=(A,Z,Me)=>{var Ke;(Ke=X.earringMaterials)!=null&&Ke.some(Ae=>Ae.name===A)||$e(Ae=>({...Ae,earringMaterials:[...Ae.earringMaterials||[],{name:A,modifier:Z,description:Me}]}))},re=A=>{const Z=[...X.earringMaterials||[]];Z.splice(A,1),$e({...X,earringMaterials:Z})},ke=A=>{Ts&&(Q(Ts,gr,Rs),A&&(p({name:Ts,modifier:gr,description:Rs}),alert("Material saved to presets!")),Ot(""),ir(0),Pr(""))},Ce=(A,Z)=>{A.stopPropagation(),window.confirm(`Remove "${Z}" from presets?`)&&f(Z)},ne=()=>{(X.packaging||[]).length>=3||$e({...X,packaging:[...X.packaging||[],{id:`pack_${Date.now()}`,name:"",bulkCost:0,bulkQuantity:1,unitCost:0}]})},de=A=>{if(!A)return;const Z=l.find(Me=>Me.name===A);Z&&(X.packaging||[]).length<3&&$e({...X,packaging:[...X.packaging||[],{...Z,id:`pack_${Date.now()}`}]})},Ee=A=>{var Me;const Z=(Me=X.packaging)==null?void 0:Me[A];Z&&Z.name&&(m(Z),alert(`Saved "${Z.name}" to packaging presets!`))},ct=(A,Z,Me)=>{const Ke=[...X.packaging||[]],Ae={...Ke[A],[Z]:Me};if(Z==="bulkCost"||Z==="bulkQuantity"){const Zt=Z==="bulkCost"?parseFloat(Me):Ae.bulkCost,ut=Z==="bulkQuantity"?parseFloat(Me):Ae.bulkQuantity;Ae.unitCost=ut>0?Zt/ut:0}Ke[A]=Ae,$e({...X,packaging:Ke})},Be=A=>{const Z=[...X.packaging||[]];Z.splice(A,1),$e({...X,packaging:Z})},jt=((qt=X.packaging)==null?void 0:qt.reduce((A,Z)=>A+Z.unitCost,0))||0,St=(X.costPrice||0)+(X.shippingCost||0)+jt,Tt=X.price-St,Vt=(X.memberPrice||0)-St,bt=Array.from(new Set(s.map(A=>A.category).filter(Boolean))),gs=Array.from(new Set(s.map(A=>Ns(A)).filter(Boolean))),it=s.filter(A=>{var Me;const Z=wt.toLowerCase();return(A.name.toLowerCase().includes(Z)||A.code.toLowerCase().includes(Z))&&(ae?Ns(A)===ae:!0)&&(ze?A.category===ze:!0)&&(Ue?(Me=A.colors)==null?void 0:Me.includes(Ue):!0)&&(fe?A.promoPrice&&A.promoPrice>0:!0)&&(dt?A.status===dt:!0)&&(xt?(A.madeBy||"Spoil Me Vintage")===xt:!0)});return console.log("AdminProducts Debug:",{isLoading:P,productsCount:s.length,filteredProductsCount:it.length,dbConnectionError:b,firstProduct:s[0]?{id:s[0].id,name:s[0].name,images:s[0].images}:null}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Product Management"}),!_&&e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:Ct,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 shadow-lg transition-colors text-sm",children:[e.jsx(dr,{size:18})," Add Product"]})})]}),b&&e.jsxs("div",{className:"bg-yellow-900/20 border-l-4 border-yellow-500 text-yellow-300 p-3 rounded mb-4",children:[e.jsx("div",{className:"font-bold",children:"Supabase Warning"}),e.jsx("div",{className:"text-xs mt-1",children:b}),e.jsx("div",{className:"text-xs mt-1",children:"Changes may be saved locally only. Fix Supabase auth/permissions to persist remotely."})]}),!_&&e.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(pa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),e.jsx("input",{type:"text",placeholder:"Search by Name or SKU...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:wt,onChange:A=>Lt(A.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Jo,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),e.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:ae,onChange:A=>ge(A.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),gs.map(A=>e.jsx("option",{value:A,children:De(A)},A))]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(kA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),e.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:ze,onChange:A=>we(A.target.value),children:[e.jsx("option",{value:"",children:"All Collections"}),bt.map(A=>e.jsx("option",{value:A,children:A},A))]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Jo,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),e.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:Ue,onChange:A=>et(A.target.value),children:[e.jsx("option",{value:"",children:"All Colors"}),Array.from(new Set(s.flatMap(A=>A.colors||[]))).map(A=>e.jsx("option",{value:A,children:A},A))]})]}),e.jsxs("button",{onClick:()=>nt(!fe),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all flex items-center gap-2 ${fe?"bg-green-900/30 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-400 hover:bg-zinc-800"}`,children:[e.jsx(rc,{size:16})," ",fe?"Promotions Active":"Show Promotions"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Jo,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),e.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:dt,onChange:A=>_t(A.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Jo,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),e.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:xt,onChange:A=>Kt(A.target.value),children:[e.jsx("option",{value:"",children:"All Makers"}),je.map(A=>e.jsx("option",{value:A,children:A},A))]})]}),(wt||ae||ze||Ue||fe||dt||xt)&&e.jsx("button",{onClick:()=>{Lt(""),ge(""),we(""),et(""),nt(!1),_t(""),Kt("")},className:"px-3 py-2 text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Reset Filters"})]}),_?e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"flex border-b border-gray-800 bg-zinc-950/50 overflow-x-auto no-scrollbar",children:["general","pricing","media","inventory","marketing","reviews","promotions","gifts"].map(A=>e.jsx("button",{onClick:()=>ue(A),className:`px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${ee===A?"text-pink-500 border-b-2 border-pink-500 bg-pink-500/5":"text-gray-400 hover:text-white"}`,children:us(A)},A))}),e.jsxs("div",{className:"p-6",children:[ee==="general"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Name *"}),e.jsx("input",{ref:I,type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm focus:border-pink-500",value:X.name,onChange:A=>$e({...X,name:A.target.value})}),S&&e.jsx("p",{className:"text-xs text-green-400 mt-1",children:S})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"URL Slug"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:X.slug,onChange:A=>$e({...X,slug:A.target.value}),placeholder:"product-name-url"}),e.jsx("button",{onClick:ji,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:e.jsx(wc,{size:16})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"SKU / Code"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:X.code,onChange:A=>$e({...X,code:A.target.value}),placeholder:"SPV-001"}),e.jsx("button",{onClick:Kn,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:e.jsx(wc,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Status"}),e.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:X.status,onChange:A=>$e({...X,status:A.target.value}),children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),e.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:X.category,onChange:A=>$e({...X,category:A.target.value}),children:[e.jsx("option",{value:"",children:"Select Category"}),o.map(A=>e.jsx("option",{value:A.name,children:A.name},A.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Type"}),e.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:X.type,onChange:A=>$e({...X,type:A.target.value}),children:[e.jsx("option",{value:"Ring",children:"Rings"}),e.jsx("option",{value:"Stud",children:"Stud Earrings"}),e.jsx("option",{value:"Dangle",children:"Dangle Earrings"}),e.jsx("option",{value:"Pendant",children:"Pendants"}),e.jsx("option",{value:"Necklace",children:"Necklaces"}),e.jsx("option",{value:"Bracelet",children:"Bracelets"}),e.jsx("option",{value:"Watch",children:"Watches"}),e.jsx("option",{value:"Jewelry Box",children:"Jewelry Boxes"}),e.jsx("option",{value:"Perfume Holder",children:"Perfume Holders"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Made By"}),e.jsxs("div",{className:"bg-black/40 border border-gray-800 rounded-lg p-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:je.map(A=>{const Z=X.madeBy===A;return e.jsx("button",{type:"button",onClick:()=>$e({...X,madeBy:A}),className:Z?"px-3 py-1.5 rounded-full text-xs font-bold border bg-cyan-600/20 border-cyan-500 text-cyan-200":"px-3 py-1.5 rounded-full text-xs font-medium border bg-zinc-900 border-gray-700 text-gray-300 hover:text-white hover:border-gray-500",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[Z&&e.jsx(pt,{size:14}),A]})},A)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:me,onChange:A=>se(A.target.value),placeholder:"Add new maker (saved for future)",onKeyDown:A=>{A.key==="Enter"&&(A.preventDefault(),qe())}}),e.jsx("button",{type:"button",onClick:qe,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-200 hover:text-white hover:bg-zinc-700 transition-colors",children:"Save"})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Current: ",X.madeBy||"None selected"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Base Material"}),e.jsxs("div",{className:"bg-black/40 border border-gray-800 rounded-lg p-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:Se.map(A=>{const Z=G().some(Me=>Me.toLowerCase()===A.toLowerCase());return e.jsx("button",{type:"button",onClick:()=>be(A),className:Z?"px-3 py-1.5 rounded-full text-xs font-bold border bg-cyan-600/20 border-cyan-500 text-cyan-200":"px-3 py-1.5 rounded-full text-xs font-medium border bg-zinc-900 border-gray-700 text-gray-300 hover:text-white hover:border-gray-500",title:Z?"Remove":"Add",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[Z&&e.jsx(pt,{size:14}),A]})},A)})}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:ce,onChange:A=>ye(A.target.value),placeholder:"Add new material (saved)",onKeyDown:A=>{A.key==="Enter"&&(A.preventDefault(),He())}}),e.jsx("button",{type:"button",onClick:He,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-200 hover:text-white hover:bg-zinc-700 transition-colors",children:"Save"})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Selected: ",G().length?G().join(", "):"None"]})]})]})]})]}),ee==="pricing"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[e.jsx(Ps,{size:18,className:"text-green-400"})," South African Rand (ZAR)"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (R) *"}),e.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-green-400",value:X.price,onChange:A=>$e({...X,price:parseFloat(A.target.value)||0})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>$e({...X,priceUSD:parseFloat((X.price/29).toFixed(2))}),className:"flex-1 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded-lg",children:"Convert to USD"}),e.jsx("button",{onClick:()=>$e({...X,priceUSD:0}),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold rounded-lg",children:"Reset USD"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Member Price (R)"}),e.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-purple-400",value:X.memberPrice||"",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (R)"}),e.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:X.compareAtPrice||"",onChange:A=>$e({...X,compareAtPrice:parseFloat(A.target.value)||0})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[e.jsx(Ps,{size:18,className:"text-yellow-400"})," United States Dollar (USD)"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (USD) *"}),e.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-yellow-400",value:X.priceUSD,onChange:A=>$e({...X,priceUSD:parseFloat(A.target.value)||0})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>$e({...X,price:parseFloat((X.priceUSD*29).toFixed(2))}),className:"flex-1 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded-lg",children:"Convert to R"}),e.jsx("button",{onClick:()=>$e({...X,price:0}),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold rounded-lg",children:"Reset R"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Member Price (USD)"}),e.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-purple-400",value:X.memberPriceUSD||"",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (USD)"}),e.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:X.compareAtPriceUSD||"",onChange:A=>$e({...X,compareAtPriceUSD:parseFloat(A.target.value)||0})})]})]})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 shadow-lg",children:[e.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 mb-4",children:[e.jsx(gA,{size:18,className:"text-cyan-400"})," Profit & Margins"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[e.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-red-900/30",children:[e.jsx("span",{className:"text-gray-400 block mb-1",children:"Total Unit Cost"}),e.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["R",St.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Product:"})," ",e.jsxs("span",{children:["R",(X.costPrice||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shipping:"})," ",e.jsxs("span",{children:["R",(X.shippingCost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Packaging:"})," ",e.jsxs("span",{children:["R",jt.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-green-900/30",children:[e.jsx("span",{className:"text-gray-400 block mb-1",children:"Retail Profit"}),e.jsxs("div",{className:`text-2xl font-bold ${Tt>0?"text-green-400":"text-red-500"}`,children:["R",Tt.toFixed(2)]})]}),e.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-purple-900/30",children:[e.jsx("span",{className:"text-gray-400 block mb-1",children:"Member Profit"}),e.jsxs("div",{className:`text-2xl font-bold ${Vt>0?"text-purple-400":"text-red-500"}`,children:["R",Vt.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[e.jsx(Qa,{size:16,className:"text-pink-500"})," Packaging Breakdown"]}),e.jsxs("select",{className:"bg-zinc-800 text-xs text-gray-300 border border-gray-700 rounded px-2 py-1",onChange:A=>de(A.target.value),value:"",children:[e.jsx("option",{value:"",children:"Load Preset..."}),l.map((A,Z)=>e.jsxs("option",{value:A.name,children:[A.name," (R",A.unitCost.toFixed(2),")"]},Z))]})]}),(((xs=X.packaging)==null?void 0:xs.length)||0)<3&&e.jsxs("button",{onClick:ne,className:"text-xs flex items-center gap-1 text-cyan-400 hover:text-cyan-300",children:[e.jsx(dr,{size:12})," Add Item"]})]}),e.jsx("div",{className:"space-y-3",children:(xr=X.packaging)==null?void 0:xr.map((A,Z)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end bg-zinc-900 p-3 rounded border border-gray-800",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Item Name"}),e.jsx("input",{type:"text",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:A.name,onChange:Me=>ct(Z,"name",Me.target.value)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Cost (R)"}),e.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:A.bulkCost,onChange:Me=>ct(Z,"bulkCost",parseFloat(Me.target.value)||0)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Qty"}),e.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:A.bulkQuantity,onChange:Me=>ct(Z,"bulkQuantity",parseFloat(Me.target.value)||0)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Unit Cost"}),e.jsxs("div",{className:"w-full p-1.5 bg-zinc-800 border border-gray-700 rounded text-xs text-red-300 font-mono",children:["R",A.unitCost.toFixed(2)]})]}),e.jsxs("div",{className:"md:col-span-3 flex justify-end pb-1 gap-2",children:[e.jsx("button",{onClick:()=>Ee(Z),className:"text-blue-400 hover:text-blue-300 bg-blue-900/20 p-1 rounded hover:bg-blue-900/40 transition-colors",title:"Save as Preset",children:e.jsx(sc,{size:16})}),e.jsx("button",{onClick:()=>Be(Z),className:"text-gray-600 hover:text-red-400 p-1",children:e.jsx(zn,{size:16})})]})]},Z))})]})]}),ee==="inventory"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Current Stock"}),e.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:X.stock,onChange:A=>$e({...X,stock:parseInt(A.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sold Count"}),e.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:X.soldCount,onChange:A=>$e({...X,soldCount:parseInt(A.target.value)||0})})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 mt-2",children:[e.jsx("input",{type:"checkbox",checked:!!X.isSoldOut,onChange:A=>{const Z=A.target.checked;$e(Me=>({...Me,isSoldOut:Z,stock:Z?0:Me.stock}))},className:"form-checkbox h-4 w-4 text-red-600 bg-black border-gray-600"}),e.jsx("span",{className:"text-sm text-white font-bold",children:'Mark as "Sorry Just SOLD out!" (Persistent)'})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'When checked, this product will display a "Sorry Just SOLD out!" badge to customers regardless of stock. Only uncheck to make it available again.'})]})]}),X.type==="Ring"&&e.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[e.jsx("h3",{className:"text-sm font-bold text-white mb-3",children:"Ring Sizes"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.keys(Ms.ringStock||{}).map(A=>{var Z;return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:["Size ",A]}),e.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded text-white text-sm",value:((Z=X.ringStock)==null?void 0:Z[A])||0,onChange:Me=>$e({...X,ringStock:{...X.ringStock,[A]:parseInt(Me.target.value)||0}})})]},A)})})]}),(X.type==="Stud"||X.type==="Dangle")&&e.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("input",{type:"checkbox",id:"showEarringOptions",checked:X.showEarringOptions,onChange:A=>$e({...X,showEarringOptions:A.target.checked}),className:"rounded bg-black border-gray-600 text-pink-600 focus:ring-pink-500"}),e.jsx("label",{htmlFor:"showEarringOptions",className:"text-sm font-bold text-white",children:"Enable Material Customization"})]}),X.showEarringOptions&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2 flex-wrap",children:Ye.map(A=>e.jsxs("div",{className:"group relative inline-flex",children:[e.jsxs("button",{onClick:()=>Q(A.name,A.modifier,A.description),className:"text-xs bg-gray-800 hover:bg-gray-700 text-gray-300 px-2 py-1 rounded border border-gray-600",children:["+ ",A.name]}),d.some(Z=>Z.name===A.name)&&e.jsx("button",{onClick:Z=>Ce(Z,A.name),className:"absolute -top-1.5 -right-1.5 bg-red-600 text-white rounded-full p-0.5 w-3 h-3 flex items-center justify-center text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:"X"})]},A.name))}),e.jsx("div",{className:"space-y-2",children:(Zn=X.earringMaterials)==null?void 0:Zn.map((A,Z)=>e.jsxs("div",{className:"flex items-center gap-2 bg-black p-2 rounded border border-gray-800",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:A.name}),e.jsxs("span",{className:"text-xs text-pink-400",children:["+R",A.modifier]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:A.description})]}),e.jsx("button",{onClick:()=>re(Z),className:"text-gray-600 hover:text-red-400",children:e.jsx(zn,{size:14})})]},Z))}),e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end pt-2 border-t border-gray-700",children:[e.jsx("div",{className:"col-span-3",children:e.jsx("input",{type:"text",placeholder:"Custom Material",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Ts,onChange:A=>Ot(A.target.value)})}),e.jsx("div",{className:"col-span-2",children:e.jsx("input",{type:"number",placeholder:"Price Mod",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:gr,onChange:A=>ir(parseFloat(A.target.value)||0)})}),e.jsx("div",{className:"col-span-4",children:e.jsx("input",{type:"text",placeholder:"Description",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Rs,onChange:A=>Pr(A.target.value)})}),e.jsxs("div",{className:"col-span-3 flex gap-1",children:[e.jsx("button",{onClick:()=>ke(!1),className:"flex-1 p-1.5 bg-pink-600 text-white rounded text-xs flex items-center justify-center",title:"Add to Product",children:e.jsx(dr,{size:14})}),e.jsx("button",{onClick:()=>ke(!0),className:"flex-1 p-1.5 bg-cyan-600 text-white rounded text-xs flex items-center justify-center",title:"Add & Save Preset",children:e.jsx(sc,{size:14})})]})]})]})]}),(X.type==="Pendant"||X.type==="Necklace")&&e.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Chain Styles"}),e.jsx("div",{className:"flex gap-2",children:["Metal Chain","Leather Cord","Ribbon"].map(A=>{var Z;return e.jsx("button",{onClick:()=>{var Ae,Zt;const Ke=((Ae=X.chainStyles)==null?void 0:Ae.includes(A))?(Zt=X.chainStyles)==null?void 0:Zt.filter(ut=>ut!==A):[...X.chainStyles||[],A];$e({...X,chainStyles:Ke})},className:`px-3 py-1 rounded text-xs border ${(Z=X.chainStyles)!=null&&Z.includes(A)?"bg-cyan-900/50 border-cyan-500 text-cyan-400":"bg-black border-gray-700 text-gray-400"}`,children:A},A)})})]}),((yn=X.chainStyles)==null?void 0:yn.includes("Metal Chain"))&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Available Lengths"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(k5).map(A=>{var Z,Me;return e.jsxs("div",{onClick:()=>{const Ke=X.pendantChainLengths||{};$e({...X,pendantChainLengths:{...Ke,[A]:!Ke[A]}})},className:`p-2 rounded border cursor-pointer text-xs flex items-center justify-between ${(Z=X.pendantChainLengths)!=null&&Z[A]?"bg-green-900/20 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-500"}`,children:[e.jsx("span",{children:A}),((Me=X.pendantChainLengths)==null?void 0:Me[A])&&e.jsx(pt,{size:12})]},A)})})]})]})]}),ee==="marketing"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[e.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[e.jsx(rc,{size:18,className:"text-cyan-400"})," Product Visibility & Features"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${X.isNewArrival?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${X.isNewArrival?"bg-cyan-500 border-cyan-500":"border-gray-600"}`,children:X.isNewArrival&&e.jsx(pt,{size:14,className:"text-black"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:X.isNewArrival,onChange:A=>$e({...X,isNewArrival:A.target.checked})}),e.jsx("span",{className:"text-sm font-bold text-white",children:"New Arrival"})]}),e.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${X.isBestSeller?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${X.isBestSeller?"bg-yellow-500 border-yellow-500":"border-gray-600"}`,children:X.isBestSeller&&e.jsx(pt,{size:14,className:"text-black"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:X.isBestSeller,onChange:A=>$e({...X,isBestSeller:A.target.checked})}),e.jsx("span",{className:"text-sm font-bold text-white",children:"Best Seller"})]}),e.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${X.isJewelrySet?"bg-purple-900/20 border-purple-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${X.isJewelrySet?"bg-purple-500 border-purple-500":"border-gray-600"}`,children:X.isJewelrySet&&e.jsx(pt,{size:14,className:"text-white"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:X.isJewelrySet,onChange:A=>$e({...X,isJewelrySet:A.target.checked})}),e.jsx("span",{className:"text-sm font-bold text-white",children:"Jewelry Set"})]})]}),e.jsx("h4",{className:"text-sm text-gray-400 font-bold mt-6 mb-3 uppercase tracking-wider",children:"Category Features"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:X.isFeaturedRing,onChange:A=>$e({...X,isFeaturedRing:A.target.checked})}),e.jsx("span",{className:"text-xs text-white",children:"Featured Ring"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:X.isFeaturedBracelet,onChange:A=>$e({...X,isFeaturedBracelet:A.target.checked})}),e.jsx("span",{className:"text-xs text-white",children:"Featured Bracelet"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:X.isUniquePendant,onChange:A=>$e({...X,isUniquePendant:A.target.checked})}),e.jsx("span",{className:"text-xs text-white",children:"Unique Pendant"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:X.isFeaturedStud,onChange:A=>$e({...X,isFeaturedStud:A.target.checked})}),e.jsx("span",{className:"text-xs text-white",children:"Featured Studs"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:X.isFeaturedDangle,onChange:A=>$e({...X,isFeaturedDangle:A.target.checked})}),e.jsx("span",{className:"text-xs text-white",children:"Featured Dangles"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:X.isFeaturedWatch,onChange:A=>$e({...X,isFeaturedWatch:A.target.checked})}),e.jsx("span",{className:"text-xs text-white",children:"Featured Watch"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:X.isFeaturedJewelryBox,onChange:A=>$e({...X,isFeaturedJewelryBox:A.target.checked})}),e.jsx("span",{className:"text-xs text-white",children:"Featured Jewelry Box"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:X.isFeaturedPerfumeHolder,onChange:A=>$e({...X,isFeaturedPerfumeHolder:A.target.checked})}),e.jsx("span",{className:"text-xs text-white",children:"Featured Perfume Holder"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Tags & SEO"}),e.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:X.tags.map((A,Z)=>e.jsxs("span",{className:"bg-gray-800 text-gray-300 text-xs px-2 py-1 rounded flex items-center gap-1",children:[A,e.jsx(ns,{size:12,className:"cursor-pointer",onClick:()=>Jn("tags",Z)})]},Z))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Zs,onChange:A=>Ls(A.target.value),onKeyDown:A=>A.key==="Enter"&&Er("tags",Zs,Ls),placeholder:"Add tag..."}),e.jsx("button",{onClick:()=>Er("tags",Zs,Ls),className:"bg-gray-800 p-2 rounded text-white",children:e.jsx(dr,{size:18})})]})]})]}),ee==="reviews"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex-1 bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-500/30 p-5 rounded-xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-cyan-400 font-bold text-lg",children:[e.jsx(Um,{size:24}),e.jsx("h3",{children:"AI South African Reviewer"})]}),e.jsxs("button",{onClick:Gn,disabled:F,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[F?e.jsx(On,{className:"animate-spin",size:18}):e.jsx(As,{size:18})," Generate Standard Reviews"]})]}),(X.isUniquePendant||X.type==="Pendant"||X.type==="Necklace")&&e.jsxs("div",{className:"flex-1 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/30 p-5 rounded-xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-purple-400 font-bold text-lg",children:[e.jsx(jA,{size:24}),e.jsx("h3",{children:"Unique Piece Reviewer"})]}),e.jsxs("button",{onClick:ar,disabled:F,className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[F?e.jsx(On,{className:"animate-spin",size:18}):e.jsx(As,{size:18})," Generate Unique Reviews"]})]})]}),e.jsx("div",{className:"space-y-3",children:(ki=X.reviews)==null?void 0:ki.map(A=>e.jsx("div",{className:"bg-black p-3 rounded border border-gray-800",children:at===A.id&&xe?e.jsxs("div",{className:"space-y-3 animate-in fade-in",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:xe.userName,onChange:Z=>Je({...xe,userName:Z.target.value}),placeholder:"Name"}),e.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:xe.location,onChange:Z=>Je({...xe,location:Z.target.value}),placeholder:"Location"}),e.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white col-span-2",value:xe.date,onChange:Z=>Je({...xe,date:Z.target.value}),placeholder:"Date (YYYY-MM-DD or Text)"})]}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(Z=>e.jsx(_r,{size:16,className:"cursor-pointer",fill:Z<=xe.rating?"orange":"none",stroke:Z<=xe.rating?"orange":"gray",onClick:()=>Je({...xe,rating:Z})},Z))}),e.jsx("textarea",{className:"w-full bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",rows:3,value:xe.content,onChange:Z=>Je({...xe,content:Z.target.value})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>Rt(null),className:"px-3 py-1 bg-zinc-800 text-white text-xs rounded hover:bg-zinc-700",children:"Cancel"}),e.jsx("button",{onClick:q,className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-500",children:"Save"})]})]}):e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-300",children:[A.userName," ",e.jsxs("span",{className:"text-gray-600 font-normal",children:["from ",A.location]}),e.jsx("span",{className:"text-gray-500 font-normal ml-2",children:A.date})]}),e.jsx("div",{className:"flex text-yellow-400 gap-0.5 my-1",children:[1,2,3,4,5].map(Z=>e.jsx(_r,{size:10,fill:Z<=A.rating?"currentColor":"none"},Z))}),e.jsxs("p",{className:"text-xs text-gray-400 italic",children:['"',A.content,'"']})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>B(A),className:"p-2 text-gray-400 hover:text-cyan-400",children:e.jsx(bp,{size:16})}),e.jsx("button",{onClick:()=>Si(A.id),className:"p-2 text-gray-400 hover:text-red-400",children:e.jsx(zn,{size:16})})]})]})},A.id))})]}),ee==="promotions"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[e.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($n,{className:"text-green-400"}),e.jsx("div",{children:e.jsx("h3",{className:"text-lg font-bold text-white",children:"Retail Base Price"})})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["R",X.price.toFixed(2)]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-4",children:[e.jsx(rc,{size:18,className:"text-cyan-400"})," Non-Member Promo"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Promotional Price (R)"}),e.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:X.promoPrice||"",onChange:A=>$e({...X,promoPrice:parseFloat(A.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Discount (%)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white",value:((X.price-(X.promoPrice||0))/X.price*100).toFixed(0),readOnly:!0}),e.jsx(cw,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[e.jsx(gn,{size:12})," Start"]}),e.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((bn=X.promoStartsAt)==null?void 0:bn.slice(0,16))||"",onChange:A=>$e({...X,promoStartsAt:A.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[e.jsx(gn,{size:12})," End"]}),e.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((io=X.promoExpiresAt)==null?void 0:io.slice(0,16))||"",onChange:A=>$e({...X,promoExpiresAt:A.target.value})})]})]})]})})})]}),ee==="gifts"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(vs,{size:18,className:"text-pink-500"})," Promotional Gift"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Select Gift Product"}),e.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm",value:X.giftProductId||"",onChange:A=>$e({...X,giftProductId:A.target.value}),children:[e.jsx("option",{value:"",children:"-- No Gift --"}),s.filter(A=>A.id!==X.id).map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),X.giftProductId&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Gift Value (R)"}),e.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:X.giftValue||"",onChange:A=>$e({...X,giftValue:parseFloat(A.target.value)||0})})]})]})]})}),ee==="media"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 border border-pink-500/30 p-5 rounded-xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-pink-400 font-bold text-lg",children:[e.jsx(As,{size:20}),e.jsx("h3",{children:"AI Product Analyst"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"file",accept:"image/*",ref:Bt,className:"hidden",onChange:en}),e.jsxs("button",{onClick:()=>{var A;return(A=Bt.current)==null?void 0:A.click()},disabled:E,className:"flex-1 py-3 bg-zinc-800 hover:bg-pink-600 text-white rounded-lg border border-gray-600 hover:border-pink-400 transition-all flex items-center justify-center gap-2 text-sm font-semibold disabled:opacity-50 shadow-lg",children:[E?e.jsx(On,{className:"animate-spin",size:18}):e.jsx(bA,{size:18}),E?"Analyzing Image...":"Upload & Analyze with AI"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Description"}),e.jsxs("div",{className:"flex items-center gap-3",children:[H&&e.jsxs("button",{onClick:async()=>{if(!X.name){alert("Please enter a product name or upload an image first.");return}const A=await It(X.name,X.category);$e(Z=>({...Z,description:A})),U(!1)},disabled:M,className:"text-xs text-green-400 flex items-center gap-1 hover:text-green-300",children:[e.jsx(Um,{size:12})," ",M?"Generating...":"Generate from Image"]}),e.jsxs("button",{onClick:Wt,disabled:M,className:"text-xs text-cyan-400 flex items-center gap-1 hover:text-cyan-300",children:[e.jsx(Um,{size:12})," ",M?"Writing...":"Generate from Text"]})]})]}),e.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-32 text-white text-sm",value:X.description,onChange:A=>$e({...X,description:A.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"When & How to Wear"}),e.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-24 text-white text-sm",value:X.whenAndHowToWear,onChange:A=>$e({...X,whenAndHowToWear:A.target.value}),placeholder:"Styling advice..."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Images"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-2",children:[X.images.filter(A=>A!=="").map((A,Z)=>e.jsxs("div",{className:"relative group aspect-square rounded-lg overflow-hidden border border-gray-800 bg-black",children:[e.jsx("img",{src:A,alt:"",className:"w-full h-full object-cover",onError:eo}),e.jsx("button",{onClick:()=>V(Z),className:"absolute top-1 right-1 bg-black/60 hover:bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(ns,{size:12})})]},Z)),e.jsxs("div",{onClick:()=>{var A;return(A=is.current)==null?void 0:A.click()},className:"aspect-square rounded-lg border border-dashed border-gray-700 bg-zinc-900/30 flex flex-col items-center justify-center text-gray-500 cursor-pointer hover:bg-zinc-800 hover:border-gray-500 transition-all",children:[e.jsx(dr,{size:24}),e.jsx("span",{className:"text-[10px] mt-1",children:"Add Image"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:is,className:"hidden",onChange:qn}),e.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:ds,className:"hidden",onChange:qn}),e.jsxs("button",{onClick:()=>{var A;return(A=is.current)==null?void 0:A.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[e.jsx(NA,{size:16,className:"text-cyan-400"})," Upload"]}),e.jsxs("button",{onClick:()=>{var A;return(A=ds.current)==null?void 0:A.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[e.jsx(Ga,{size:16,className:"text-pink-500"})," Camera"]})]})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-800 bg-zinc-950 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Cancel"}),e.jsxs("button",{onClick:Pt,disabled:L,className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2 shadow transition-colors text-sm font-semibold disabled:opacity-50",children:[L?e.jsx(On,{className:"animate-spin",size:18}):e.jsx(sc,{size:18})," ",L?"Saving...":"Save Product"]})]})]}):P?e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm p-8 text-center",children:[e.jsx(On,{className:"animate-spin mx-auto mb-4",size:32}),e.jsx("p",{className:"text-gray-400",children:"Loading products..."})]}):it.length===0?e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm p-8 text-center",children:[e.jsx(Qa,{className:"mx-auto mb-4 text-gray-500",size:48}),e.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:s.length===0?"No products have been loaded from the database yet.":"No products match your current filters."}),s.length===0&&e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Check the browser console for any Supabase connection errors."}),e.jsxs("button",{onClick:Ct,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 shadow-lg transition-colors mx-auto",children:[e.jsx(dr,{size:18})," Add First Product"]})]}):e.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Product"}),e.jsx("th",{className:"p-4",children:"Type"}),e.jsx("th",{className:"p-4",children:"Made By"}),e.jsx("th",{className:"p-4",children:"SKU"}),e.jsx("th",{className:"p-4",children:"Price (R)"}),e.jsx("th",{className:"p-4",children:"Price (USD)"}),e.jsx("th",{className:"p-4",children:"Stock"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:it.map(A=>e.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[e.jsxs("td",{className:"p-4 flex items-center gap-3",children:[e.jsx("img",{src:A.images[0]||"https://via.placeholder.com/40",className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:"",onError:eo}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-200 block",children:A.name}),e.jsx("span",{className:"text-xs text-gray-500",children:A.category})]})]}),e.jsx("td",{className:"p-4 text-gray-400",children:De(Ns(A))}),e.jsx("td",{className:"p-4 text-gray-400 text-sm",children:A.madeBy||"Spoil Me Vintage"}),e.jsx("td",{className:"p-4 text-gray-500 font-mono text-xs",children:A.code}),e.jsxs("td",{className:"p-4 font-medium text-green-400",children:["R",A.price?A.price.toFixed(2):"0.00"]}),e.jsxs("td",{className:"p-4 font-medium text-yellow-400",children:["$ ",A.priceUSD?A.priceUSD.toFixed(2):"0.00"]}),e.jsx("td",{className:"p-4 text-gray-300",children:A.stock}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${A.status==="published"?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:A.status})}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>Jt(A),className:"p-2 text-gray-400 hover:text-cyan-400",children:e.jsx(bp,{size:16})}),e.jsx("button",{onClick:()=>At(A.id),className:"p-2 text-gray-400 hover:text-red-400",children:e.jsx(zn,{size:16})})]})})]},A.id))})]})}),!_&&e.jsx("div",{className:"fixed right-6 bottom-6 z-50",children:e.jsx("button",{onClick:Ct,title:"Add Product",className:"w-14 h-14 flex items-center justify-center rounded-full bg-pink-600 hover:bg-pink-500 text-white shadow-lg",children:e.jsx(dr,{size:20})})}),e.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/20 to-orange-900/20 border border-yellow-500/30 p-6 rounded-xl mt-6",children:[e.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ft,{size:18,className:"text-yellow-400"})," Manual Winner Override"]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Override the current week's winner for social proof notifications. Leave empty to use auto-generated winners."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Winner Name"}),e.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(N==null?void 0:N.name)||"",onChange:A=>R(N?{...N,name:A.target.value}:{name:A.target.value,prize:500,currency:"ZAR",rank:1}),placeholder:"e.g. John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prize Amount"}),e.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(N==null?void 0:N.prize)||"",onChange:A=>R(N?{...N,prize:parseFloat(A.target.value)||0}:{name:"",prize:parseFloat(A.target.value)||0,currency:"ZAR",rank:1}),placeholder:"500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Currency"}),e.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(N==null?void 0:N.currency)||"ZAR",onChange:A=>R(N?{...N,currency:A.target.value}:{name:"",prize:500,currency:A.target.value,rank:1}),children:[e.jsx("option",{value:"ZAR",children:"ZAR (R)"}),e.jsx("option",{value:"USD",children:"USD ($)"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Clear Override"}),e.jsx("button",{onClick:()=>alert("Manual winner set!"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-500 transition-colors text-sm",children:"Set Winner"})]})]})]})},P5=()=>{const{categories:s,addCategory:t,updateCategory:r,deleteCategory:i,replaceCategories:o}=vt(),l=v.useRef({}),[d,m]=v.useState(null),p=(w,N)=>{const R=[...s],P=N==="up"?w-1:w+1;P>=0&&P<R.length&&([R[w],R[P]]=[R[P],R[w]],o(R))},f=async(w,N)=>{if(!N)return;try{m(w);const P=Date.now(),_=`categories/${w}/${P}_${N.name}`,O=await Ip("categories",_,N),L=s.find($=>$.id===w);L&&r({...L,image:O}),m(null);return}catch(P){console.warn("Supabase upload failed, falling back to base64:",P)}const R=new FileReader;R.onloadend=()=>{const P=s.find(_=>_.id===w);P&&typeof R.result=="string"&&r({...P,image:R.result}),m(null)},R.readAsDataURL(N)},b=()=>{t({id:`cat_${Date.now()}`,name:"New Collection",image:"https://picsum.photos/400/400?grayscale",description:""})};return e.jsxs("div",{className:"space-y-6 max-w-4xl",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Category Management"}),e.jsxs("button",{onClick:b,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 transition-colors text-sm",children:[e.jsx(dr,{size:18})," Add Category"]})]}),e.jsxs("div",{className:"space-y-4",children:[s.map((w,N)=>e.jsxs("div",{className:"flex items-center gap-4 bg-zinc-900 p-4 rounded-xl border border-gray-800 shadow-sm animate-in fade-in",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>p(N,"up"),disabled:N===0,className:`p-1 rounded hover:bg-gray-800 ${N===0?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:e.jsx(fA,{size:18})}),e.jsx("button",{onClick:()=>p(N,"down"),disabled:N===s.length-1,className:`p-1 rounded hover:bg-gray-800 ${N===s.length-1?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:e.jsx(pA,{size:18})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Collection Name"}),e.jsx("input",{type:"text",value:w.name,onChange:R=>r({...w,name:R.target.value}),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm focus:border-cyan-400 focus:outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative w-12 h-12",children:[e.jsx("img",{src:w.image,alt:w.name,className:`w-12 h-12 rounded object-cover bg-zinc-800 border border-gray-700 ${d===w.id?"opacity-50":""}`}),d===w.id&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(On,{size:16,className:"animate-spin text-pink-500"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Cover Image"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{var R;return(R=l.current[w.id])==null?void 0:R.click()},disabled:d===w.id,className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-gray-200 text-xs rounded border border-gray-600 transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:d===w.id?"Uploading...":"Change Image"}),e.jsx("input",{type:"file",ref:R=>{l.current[w.id]=R},className:"hidden",accept:"image/*",onChange:R=>R.target.files&&f(w.id,R.target.files[0])})]})]})]})]}),e.jsx("div",{className:"ml-2",children:e.jsx("button",{onClick:()=>{window.confirm("Delete this category?")&&i(w.id)},className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-900/20 rounded-full transition-all",children:e.jsx(ns,{size:20})})})]},w.id)),s.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:'No categories found. Click "Add Category" to start.'})]})]})},E5=()=>{const{vouchers:s,addVoucher:t,deleteVoucher:r,cart:i,currency:o}=vt(),[l,d]=v.useState(10),[m,p]=v.useState(""),[f,b]=v.useState(""),[w,N]=v.useState(""),[R,P]=v.useState(""),[_,O]=v.useState(null),[L,$]=v.useState(!1),M=i.filter(E=>E.code==="GV-DIGITAL"),te=()=>{const E="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let j="";for(let S=0;S<12;S++)S>0&&S%4===0&&(j+="-"),j+=E.charAt(Math.floor(Math.random()*E.length));P(j)},H=async()=>{if(!l||!R)return;$(!0);const E=l*29,j={code:R,discountType:"fixed",value:E,minSpend:E,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};if(t(j),f)try{const S=await zs("users",{filters:{email:f},limit:1});if(S&&S.length>0){const D=S[0],I={id:`gift_recv_${Date.now()}`,type:"gift_received",title:"You received a Gift Voucher!",message:`Spoil Me Vintage sent you a voucher worth ${o==="ZAR"?"R":"$"}${o==="ZAR"?E:l}.`,date:new Date().toISOString(),isRead:!1,voucherData:{code:R,amount:E,meta:{recipientName:m||D.name||"Valued Customer",senderName:"Spoil Me Vintage Team",message:w||"Enjoy a little something special from us!",deliveryMethod:"recipient"}}};await ia("notifications",{user_id:D.id||D.uid,...I}),alert(`Voucher created AND sent to ${f}!`)}else alert(`Voucher created, but user with email ${f} was not found. Please send the code manually.`)}catch(S){console.error("Error sending voucher:",S),alert("Voucher created, but failed to send to user due to an error.")}P(""),p(""),b(""),N(""),$(!1)},U=E=>{navigator.clipboard.writeText(E),O(E),setTimeout(()=>O(null),2e3)};return e.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Gift Card Management"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Generate valid codes and manage active vouchers."})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[M.length>0&&e.jsxs("div",{className:"bg-pink-900/10 border border-pink-500/30 p-4 rounded-xl mb-6",children:[e.jsxs("h3",{className:"text-pink-400 font-bold flex items-center gap-2 mb-3",children:[e.jsx(pl,{size:18})," Pending Requests (",M.length,")"]}),e.jsx("div",{className:"space-y-2",children:M.map((E,j)=>e.jsxs("div",{className:"bg-zinc-900 p-3 rounded-lg border border-pink-500/20 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:E.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Value: ",o==="ZAR"?"R":"$",o==="ZAR"?E.price:(E.price/29).toFixed(0)]})]}),e.jsx("button",{onClick:()=>{d(o==="ZAR"?E.price:E.price/29),p("Customer"),te()},className:"px-3 py-1.5 bg-pink-600 text-white text-xs rounded hover:bg-pink-500",children:"Process"})]},j))})]}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl shadow-sm",children:[e.jsxs("h2",{className:"font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(dr,{size:20,className:"text-cyan-400"})," Issue New Voucher"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Voucher Value (USD)"}),e.jsx("input",{type:"number",min:"10",max:"100",value:l,onChange:E=>d(parseFloat(E.target.value)),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white font-bold focus:border-cyan-400 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Recipient Name"}),e.jsx("input",{type:"text",value:m,onChange:E=>p(E.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white focus:border-cyan-400 outline-none",placeholder:"e.g. Sarah"})]})]}),e.jsxs("div",{className:"bg-black/30 border border-gray-700 rounded-xl p-4 mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx(Lu,{size:14})," Send Directly to User (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"User Email Address"}),e.jsx("input",{type:"email",value:f,onChange:E=>b(E.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"user@example.com (Must be registered)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Custom Message"}),e.jsx("textarea",{rows:2,value:w,onChange:E=>N(E.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Enjoy your gift!"})]})]})]}),e.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 mb-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Unique Voucher Code"}),e.jsx("div",{className:"font-mono text-2xl text-cyan-400 tracking-widest break-all",children:R||"XXXX-XXXX-XXXX"})]}),e.jsxs("button",{onClick:te,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors whitespace-nowrap",children:[e.jsx(wc,{size:16})," Generate Number"]})]}),e.jsx("button",{onClick:H,disabled:!R||L,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center justify-center gap-2",children:L?"Processing...":f?"Create & Send to User":"Activate Voucher Only"})]}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[e.jsx("h2",{className:"font-bold text-white mb-4",children:"Active Vouchers"}),s.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No active vouchers."}):e.jsx("div",{className:"space-y-3",children:s.map((E,j)=>e.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-gray-600 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-mono text-cyan-400 font-bold",children:E.code}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Value: ",o==="ZAR"?"R":"$",o==="ZAR"?E.value:(E.value/29).toFixed(0),"  Expires: ",new Date(E.expiresAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>U(E.code),className:"p-2 text-gray-500 hover:text-white",children:_===E.code?e.jsx(pt,{size:16,className:"text-green-400"}):e.jsx(Mu,{size:16})}),e.jsx("button",{onClick:()=>r(E.code),className:"p-2 text-gray-500 hover:text-red-400",children:e.jsx(zn,{size:16})})]})]},j))})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"sticky top-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(xc,{size:16})," Card Preview"]}),e.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),e.jsxs("div",{className:"relative h-full p-6 flex flex-col justify-between z-10",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"font-cherry text-xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400",children:"Spoil Me Vintage"}),e.jsxs("div",{className:"text-3xl font-bold text-white font-architects",children:[o==="ZAR"?"R":"$",o==="ZAR"?(l*29).toFixed(0):l]})]}),e.jsxs("div",{className:"text-center my-auto",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-[0.3em] mb-2",children:"VOUCHER CODE"}),e.jsx("div",{className:"bg-white/5 border border-white/10 rounded px-4 py-2 inline-block backdrop-blur-sm",children:e.jsx("span",{className:"font-mono text-xl md:text-2xl font-bold text-cyan-400 tracking-wider",children:R||"--"})})]}),e.jsxs("div",{className:"flex justify-between items-end text-[10px] text-gray-500 uppercase tracking-wider",children:[e.jsxs("div",{children:["To: ",m||"Valued Customer",e.jsx("div",{className:"font-handwriting text-lg text-gray-300 normal-case mt-1",children:"Admin Team"})]}),e.jsxs("div",{className:"text-right",children:["Valid for 3 Years",e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date().toLocaleDateString()})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-zinc-900/50 p-4 rounded-xl border border-gray-800 text-sm text-gray-400",children:[e.jsx("p",{className:"mb-2 font-bold text-white",children:"Sending Instructions:"}),e.jsxs("ul",{className:"list-disc pl-4 space-y-2 text-xs",children:[e.jsx("li",{children:"Set the Value and generate a unique code."}),e.jsxs("li",{children:[e.jsx("strong",{children:"Option A (Manual):"}),' Click "Activate Voucher Only", then send the code via WhatsApp/Email manually.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Option B (Direct):"}),` Enter the user's Registered Email. The voucher will appear in their App Profile under "My Gifts".`]})]})]})]})})]})]})},Hm={},A5=[{id:"fb",name:"Facebook",icon:"facebook",isConnected:!1,accountName:"",urlTemplate:"https://www.facebook.com/sharer/sharer.php?u={url}&quote={text}"},{id:"ig",name:"Instagram",icon:"instagram",isConnected:!1,accountName:"",urlTemplate:""},{id:"tk",name:"TikTok",icon:"video",isConnected:!1,accountName:"",urlTemplate:""},{id:"x",name:"X (Twitter)",icon:"twitter",isConnected:!1,accountName:"",urlTemplate:"https://twitter.com/intent/tweet?text={text}&url={url}"}],T5={fb:["Log in to your Facebook Brand Page in your browser or app.","Enter your Page Name below for the AI context.","When you click 'Post Now', we will open the Facebook Sharer tool.","Paste the caption we generate for you."],ig:["Ensure the Instagram App is installed on this device.","Enter your Instagram Handle (@name) below.","When you click 'Post Now', we will copy the caption to your clipboard.","We will then open Instagram. Create a new post and select the downloaded photo.","Long press in the caption box and select 'Paste'."],tk:["Ensure the TikTok App is installed.","Enter your Handle below.","We will copy the text and hashtags to your clipboard.","When TikTok opens, upload the video/photo and paste the caption."],x:["Log in to X (Twitter).","Enter your handle below.","We will automatically open a 'Compose Tweet' window with your text and link pre-filled."]},R5=()=>{var D;const{products:s}=vt(),[t,r]=v.useState(A5),[i,o]=v.useState(!1),[l,d]=v.useState(null),[m,p]=v.useState(""),[f,b]=v.useState(null),[w,N]=v.useState({}),[R,P]=v.useState(null),[_,O]=v.useState(!1),[L,$]=v.useState([]),[M,te]=v.useState({posts:0,errors:0});v.useEffect(()=>{const I=localStorage.getItem("spv_social_config");I&&r(JSON.parse(I))},[]),v.useEffect(()=>{let I;return _&&(I=setInterval(()=>{if(s.length===0)return;const F=s[Math.floor(Math.random()*s.length)],C=t.filter(Se=>Se.isConnected),ee=C.length>0?C[Math.floor(Math.random()*C.length)]:t[Math.floor(Math.random()*t.length)],ue=new Date().toLocaleTimeString();$(Se=>[{time:ue,msg:`AI Worker: Analyzing "${F.name}" trends & hashtags...`,type:"process"},...Se].slice(0,6)),setTimeout(()=>{const Se=new Date().toLocaleTimeString();$(Pe=>[{time:Se,msg:`Server: Successfully scheduled post to ${ee.name} (Simulated)`,type:"success"},...Pe].slice(0,6)),te(Pe=>({...Pe,posts:Pe.posts+1}))},2e3)},5e3)),()=>clearInterval(I)},[_,s,t]);const H=I=>{d(I),p(I.accountName||"")},U=()=>{if(!l)return;const I=t.map(F=>F.id===l.id?{...F,isConnected:!0,accountName:m}:F);r(I),localStorage.setItem("spv_social_config",JSON.stringify(I)),d(null)},E=I=>{const F=t.map(C=>C.id===I?{...C,isConnected:!1,accountName:""}:C);r(F),localStorage.setItem("spv_social_config",JSON.stringify(F))},j=async()=>{if(s.length===0)return;o(!0);const I=s[Math.floor(Math.random()*s.length)];b(I);const F={},C=t.filter(ee=>ee.isConnected);if(C.length===0){alert("Please connect at least one platform first."),o(!1);return}for(const ee of C){const ue=ee.accountName?`(Account: @${ee.accountName})`:"",Se=(Hm==null?void 0:Hm.VITE_GEMINI_PROXY_URL)||"/api/gemini-proxy",ce=await(await fetch(`${Se}/generate-social`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:I.name,platform:`${ee.name} ${ue}`,price:I.price})})).json().catch(()=>({}));F[ee.id]=(ce==null?void 0:ce.text)||`Check out this amazing product: ${I.name} for R${I.price}!`}N(F),o(!1)},S=I=>{const F=w[I.id];if(!F||!f)return;const C=`${window.location.origin}/#/product/${f.id}`;if(navigator.clipboard.writeText(`${F} ${C}`).then(()=>{P(I.id),setTimeout(()=>P(null),2e3)}),I.id==="fb"||I.id==="x"){const ee=I.urlTemplate.replace("{url}",encodeURIComponent(C)).replace("{text}",encodeURIComponent(F));window.open(ee,"_blank","width=600,height=400")}else alert("Caption copied! Opening platform..."),I.id==="ig"&&window.open("https://instagram.com","_blank"),I.id==="tk"&&window.open("https://tiktok.com","_blank")};return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[l&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>d(null)}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.id==="fb"&&e.jsx(tc,{size:24,className:"text-blue-500"}),l.id==="ig"&&e.jsx($m,{size:24,className:"text-pink-500"}),l.id==="x"&&e.jsx(su,{size:24,className:"text-white"}),l.id==="tk"&&e.jsx(Ga,{size:24,className:"text-cyan-400"}),"Connect ",l.name]}),e.jsx("button",{onClick:()=>d(null),className:"text-gray-500 hover:text-white",children:e.jsx(ns,{size:20})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 uppercase mb-1",children:"Account Handle / Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"@"}),e.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 pl-8 text-white focus:border-pink-500 outline-none",value:m,onChange:I=>p(I.target.value),placeholder:"spoilmevintage"})]})]}),e.jsxs("div",{className:"bg-black/30 p-4 rounded-lg border border-gray-800",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[e.jsx(nw,{size:14})," How to connect:"]}),e.jsx("ul",{className:"space-y-2",children:(D=T5[l.id])==null?void 0:D.map((I,F)=>e.jsxs("li",{className:"text-xs text-gray-400 flex gap-2",children:[e.jsx("span",{className:"bg-gray-800 w-4 h-4 rounded-full flex items-center justify-center text-[10px] shrink-0 mt-0.5",children:F+1}),I]},F))})]}),e.jsxs("button",{onClick:U,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl flex items-center justify-center gap-2 transition-colors",children:[e.jsx(sc,{size:18})," Save & Connect"]})]})]})]}),e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Social Media Studio"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Manage accounts and automate daily content sharing."})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:t.map(I=>e.jsxs("div",{className:`p-4 rounded-xl border transition-all relative group ${I.isConnected?"bg-zinc-900 border-green-500/50 shadow-[0_0_10px_rgba(34,197,94,0.1)]":"bg-black border-gray-800 opacity-75"}`,children:[e.jsx("button",{onClick:()=>H(I),className:"absolute top-2 right-2 p-2 text-gray-500 hover:text-white hover:bg-gray-800 rounded-full transition-colors",children:e.jsx(vp,{size:16})}),e.jsxs("div",{className:"flex flex-col items-center text-center pt-4 pb-2 cursor-pointer",onClick:()=>H(I),children:[e.jsxs("div",{className:`p-3 rounded-full mb-3 transition-colors ${I.isConnected?"bg-white text-black":"bg-gray-800 text-gray-500"}`,children:[I.id==="fb"&&e.jsx(tc,{size:24}),I.id==="ig"&&e.jsx($m,{size:24}),I.id==="x"&&e.jsx(su,{size:24}),I.id==="tk"&&e.jsx(Ga,{size:24})]}),e.jsx("h3",{className:"font-bold text-white text-sm",children:I.name}),I.isConnected?e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("p",{className:"text-xs text-green-400 font-medium",children:["@",I.accountName]})]}):e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Not Connected"})]}),I.isConnected&&e.jsx("button",{onClick:F=>{F.stopPropagation(),E(I.id)},className:"w-full mt-3 py-1 text-[10px] text-red-400 hover:text-red-300 border border-red-900/30 hover:bg-red-900/20 rounded",children:"Disconnect"}),!I.isConnected&&e.jsx("button",{onClick:()=>H(I),className:"w-full mt-3 py-1 text-[10px] text-cyan-400 hover:text-cyan-300 border border-cyan-900/30 hover:bg-cyan-900/20 rounded",children:"Configure"})]},I.id))}),e.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-500/30 rounded-2xl p-6 md:p-8 shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:e.jsx(UA,{size:120,className:"text-purple-500"})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${_?"bg-green-500/20 text-green-400":"bg-gray-800 text-gray-500"}`,children:e.jsx(AA,{size:24})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Background Auto-Pilot (Demo)"})]}),e.jsx("p",{className:"text-sm text-gray-400 max-w-lg",children:"Enable this to simulate the server-side process that automatically picks products, writes captions, and schedules them to your connected accounts while you sleep."}),_&&e.jsxs("div",{className:"flex items-center gap-2 mt-4 text-xs text-green-400 font-mono bg-green-900/20 border border-green-500/30 px-3 py-1.5 rounded-lg w-fit animate-pulse",children:[e.jsx(hA,{size:14})," Service Running..."]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:M.posts}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Posts Queued"})]}),e.jsxs("button",{onClick:()=>O(!_),className:`px-6 py-4 rounded-xl font-bold flex items-center gap-2 transition-all shadow-lg ${_?"bg-red-600 hover:bg-red-500 text-white shadow-red-900/20":"bg-purple-600 hover:bg-purple-500 text-white shadow-purple-900/20"}`,children:[_?e.jsx(PA,{size:20,fill:"currentColor"}):e.jsx(EA,{size:20,fill:"currentColor"}),_?"Stop Simulation":"Start Auto-Pilot"]})]})]}),e.jsxs("div",{className:"mt-8 bg-black rounded-xl border border-gray-800 font-mono text-xs p-4 h-48 overflow-y-auto shadow-inner relative",children:[e.jsxs("div",{className:"absolute top-2 right-2 text-gray-700 flex items-center gap-1 pointer-events-none",children:[e.jsx(OA,{size:14})," Console"]}),L.length===0?e.jsx("div",{className:"h-full flex items-center justify-center text-gray-600 italic",children:"System Idle. Press Start to begin simulation."}):e.jsx("div",{className:"space-y-2",children:L.map((I,F)=>e.jsxs("div",{className:"flex gap-3 animate-in slide-in-from-left-2 fade-in duration-300",children:[e.jsxs("span",{className:"text-gray-600 shrink-0",children:["[",I.time,"]"]}),e.jsxs("span",{className:`break-all ${I.type==="success"?"text-green-400":I.type==="process"?"text-yellow-400":"text-gray-300"}`,children:[I.type==="success"&&e.jsx(pt,{size:12,className:"inline mr-1"}),I.type==="process"&&e.jsx(On,{size:12,className:"inline mr-1 animate-spin"}),I.msg]})]},F))})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 md:p-8 shadow-xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(As,{className:"text-pink-500"})," Manual Content Generator"]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"One click to pick a product and write tailored captions for all your active platforms."})]}),e.jsxs("button",{onClick:j,disabled:i,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg flex items-center gap-2 disabled:opacity-50 transition-all",children:[i?e.jsx(On,{className:"animate-spin"}):e.jsx(wc,{}),i?"Creating Strategy...":"Generate Today's Posts"]})]}),f&&e.jsxs("div",{className:"animate-in slide-in-from-bottom-4 fade-in",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6 bg-black p-4 rounded-xl border border-gray-800",children:[e.jsx("img",{src:f.images[0],alt:"",className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-pink-500 uppercase font-bold",children:"Today's Pick"}),e.jsx("h3",{className:"text-white font-bold",children:f.name}),e.jsxs("p",{className:"text-gray-400 text-xs",children:["R",f.price]})]}),e.jsx("div",{className:"ml-auto hidden md:block",children:e.jsxs("a",{href:f.images[0],download:!0,target:"_blank",rel:"noreferrer",className:"text-xs text-cyan-400 flex items-center gap-1 hover:underline",children:[e.jsx(SA,{size:14})," Download High-Res"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.filter(I=>I.isConnected).map(I=>e.jsxs("div",{className:"bg-black border border-gray-800 p-4 rounded-xl space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-300",children:[I.id==="fb"&&e.jsx(tc,{size:16,className:"text-blue-500"}),I.id==="ig"&&e.jsx($m,{size:16,className:"text-pink-500"}),I.id==="x"&&e.jsx(su,{size:16,className:"text-white"}),I.id==="tk"&&e.jsx(Ga,{size:16,className:"text-cyan-400"}),I.name," Draft"]}),e.jsxs("button",{onClick:()=>S(I),className:"text-xs bg-zinc-800 hover:bg-pink-600 text-white px-3 py-1.5 rounded-full transition-colors flex items-center gap-1",children:[R===I.id?e.jsx(pt,{size:12}):e.jsx(ol,{size:12}),R===I.id?"Copied!":"Post Now"]})]}),e.jsx("textarea",{className:"w-full h-32 bg-transparent text-sm text-gray-300 resize-none focus:outline-none",value:w[I.id]||"Generating...",readOnly:!0})]},I.id))})]}),!f&&!i&&e.jsx("div",{className:"text-center py-12 border border-dashed border-gray-800 rounded-xl",children:e.jsx("p",{className:"text-gray-500",children:'Click "Generate" to start your daily social media workflow.'})})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-blue-400 font-bold flex items-center gap-2 mb-3",children:[e.jsx(zu,{size:20})," System Capabilities Explained"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-gray-300",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"What this system CAN do:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[e.jsx("li",{children:"Use AI to generate unique, platform-specific captions for your products instantly."}),e.jsx("li",{children:"Organize your daily posting workflow into a single dashboard."}),e.jsx("li",{children:'Use "Web Intents" to open your social apps with text pre-filled (semi-automated).'}),e.jsxs("li",{children:[e.jsx("strong",{children:"Demo Simulation:"})," As seen above, we can simulate how a server-side bot would process your queue."]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"What requires Server Upgrades:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Fully Automated Background Posting:"}),' To enable the "Auto-Pilot" feature for real (posting while you sleep), a dedicated backend server (e.g., Firebase Cloud Functions) is required to run timers (Cron jobs).']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Direct API Integration:"})," Posting directly without opening the app requires expensive API approvals and secure server-side token storage which cannot run safely in a browser-only admin panel."]})]})]})]})]})]})},I5=()=>{var Je,wt,Lt;const{getAllUsers:s,approveAffiliate:t,rejectAffiliate:r,updateAffiliateTier:i,assignAffiliateParent:o}=vt(),[l,d]=v.useState([]),[m,p]=v.useState(!0),[f,b]=v.useState("applicants"),[w,N]=v.useState("overview"),[R,P]=v.useState("domestic"),[_,O]=v.useState(18.2),[L,$]=v.useState(.055),[M,te]=v.useState(""),[H,U]=v.useState("all"),[E,j]=v.useState({bronze:10,silver:11,gold:15,platinum:20,vault:1}),[S,D]=v.useState({zar:{spoilMe:2,basic:5,premium:10,deluxe:15},usd:{insider:1,gold:2,deluxe:3}}),[I,F]=v.useState({sprinter:{zar:50,usd:5},bigSpender:{zar:200,usd:15}}),[C,ee]=v.useState(null),[ue,Se]=v.useState(10),[Pe,ce]=v.useState(""),[ye,je]=v.useState(null),[K,me]=v.useState("");v.useEffect(()=>{se()},[]);const se=async()=>{p(!0);const ae=await s();d(ae),p(!1)};l.filter(ae=>{var ge;return((ge=ae.affiliateStats)==null?void 0:ge.status)==="pending"});const ve=l.filter(ae=>{var ge;return((ge=ae.affiliateStats)==null?void 0:ge.status)==="approved"}),G=async()=>{ye&&(ye.action==="approve"?await t(ye.userId,K):await r(ye.userId,K),je(null),me(""),se())},Ie=ae=>{var ge;ee(ae),Se(((ge=ae.affiliateStats)==null?void 0:ge.commissionRate)||10),ce("")},be=async()=>{if(!C)return;await i(C.id,ue);const ae={...C,affiliateStats:{...C.affiliateStats,commissionRate:ue}};ee(ae),d(ge=>ge.map(ze=>ze.id===C.id?ae:ze)),alert("Commission Tier Updated!")},He=async()=>{if(!C||!Pe)return;await o(Pe,C.id),alert("Recruit Added! This affiliate will now earn 1% commission from their sales.");const ae=await s();d(ae);const ge=ae.find(ze=>ze.id===C.id);ge&&ee(ge),ce("")},qe=C?l.filter(ae=>{var ge;return((ge=ae.affiliateStats)==null?void 0:ge.parentId)===C.id}):[],at=(Je=C==null?void 0:C.affiliateStats)!=null&&Je.parentId?l.find(ae=>{var ge;return ae.id===((ge=C.affiliateStats)==null?void 0:ge.parentId)}):null,xe=qe.reduce((ae,ge)=>{var ze;return ae+(((ze=ge.affiliateStats)==null?void 0:ze.totalSalesValue)||0)},0)*.01;return e.jsxs("div",{className:"space-y-8 relative",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Affiliate Manager"}),e.jsxs("button",{onClick:se,className:"text-xs text-gray-400 hover:text-white flex items-center gap-1",children:[e.jsx(pa,{size:14})," Refresh Data"]})]}),e.jsx("div",{className:"flex gap-2 border-b border-gray-800 pb-2 overflow-x-auto",children:[{key:"overview",label:"Dashboard Overview",icon:ll},{key:"payouts",label:"Payout Manager",icon:Ps},{key:"partners",label:"Partner List",icon:Js},{key:"settings",label:"Settings & Variables",icon:vp},{key:"validator",label:"Commission Validator",icon:gi}].map(({key:ae,label:ge,icon:ze})=>e.jsxs("button",{onClick:()=>N(ae),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors whitespace-nowrap flex items-center gap-2 ${w===ae?"border-yellow-500 text-yellow-500":"border-transparent text-gray-400 hover:text-white"}`,children:[e.jsx(ze,{size:16})," ",ge]},ae))}),w==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:e.jsx(Ps,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Pending Payouts (ZAR)"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Ready for EFT"})]})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-400",children:["R",ve.filter(ae=>{var ge;return(((ge=ae.affiliateStats)==null?void 0:ge.balance)||0)>200}).reduce((ae,ge)=>{var ze;return ae+(((ze=ge.affiliateStats)==null?void 0:ze.balance)||0)},0).toFixed(0)]})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:e.jsx(Ps,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Pending Payouts (USD)"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Ready for PayPal"})]})]}),e.jsxs("p",{className:"text-3xl font-bold text-blue-400",children:["$",ve.filter(ae=>{var ge;return(((ge=ae.affiliateStats)==null?void 0:ge.balance)||0)>50}).reduce((ae,ge)=>{var ze;return ae+(((ze=ge.affiliateStats)==null?void 0:ze.balance)||0)},0).toFixed(0)]})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:e.jsx(_r,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Top Vault Movers"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Most vault sales"})]})]}),e.jsx("p",{className:"text-3xl font-bold text-purple-400",children:ve.reduce((ae,ge)=>{var ze;return Math.max(ae,((ze=ge.affiliateStats)==null?void 0:ze.totalSalesCount)||0)},0)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Items sold"})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-cyan-900/20 rounded-lg text-cyan-400",children:e.jsx(Js,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Total Partners"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Active affiliates"})]})]}),e.jsx("p",{className:"text-3xl font-bold text-cyan-400",children:ve.length})]})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>N("payouts"),className:"p-4 bg-green-900/20 border border-green-500/30 rounded-lg hover:bg-green-900/30 transition-colors text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Ps,{size:20,className:"text-green-400"}),e.jsx("span",{className:"text-green-400 font-bold",children:"Process Payouts"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Manage EFT and PayPal payments"})]}),e.jsxs("button",{onClick:()=>N("partners"),className:"p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg hover:bg-blue-900/30 transition-colors text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Js,{size:20,className:"text-blue-400"}),e.jsx("span",{className:"text-blue-400 font-bold",children:"Manage Partners"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Review applications and tiers"})]}),e.jsxs("button",{onClick:()=>N("validator"),className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg hover:bg-red-900/30 transition-colors text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(gi,{size:20,className:"text-red-400"}),e.jsx("span",{className:"text-red-400 font-bold",children:"Validate Commissions"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Check for errors and anomalies"})]})]})]})]}),w==="payouts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4 border-b border-gray-800 pb-2",children:[e.jsxs("button",{onClick:()=>P("domestic"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${R==="domestic"?"border-green-500 text-green-500":"border-transparent text-gray-400 hover:text-white"}`,children:[e.jsx(tw,{size:16})," Domestic EFT (ZAR)"]}),e.jsxs("button",{onClick:()=>P("international"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${R==="international"?"border-blue-500 text-blue-500":"border-transparent text-gray-400 hover:text-white"}`,children:[e.jsx(Ps,{size:16})," International PayPal (USD)"]})]}),R==="domestic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Exchange Rate Settings"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"USD to ZAR Rate:"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:ae=>O(parseFloat(ae.target.value)),className:"bg-black border border-gray-600 rounded p-2 text-white text-sm w-24"}),e.jsx("span",{className:"text-gray-500",children:"(Today's rate for conversion)"})]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Domestic Payout Queue"}),e.jsx("p",{className:"text-sm text-gray-400",children:"South African affiliates with balances > R200"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-black/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Bank"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"ZAR Earned"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"USD Earned"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Final Payout (ZAR)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:ve.filter(ae=>{var ge;return(((ge=ae.affiliateStats)==null?void 0:ge.balance)||0)>200}).map(ae=>{var Ue;const ge=((Ue=ae.affiliateStats)==null?void 0:Ue.balance)||0,ze=0,we=ge+ze*_;return e.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold",children:ae.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:ae.email})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-300",children:"FNB"}),e.jsxs("td",{className:"px-6 py-4 text-green-400 font-bold",children:["R",ge.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-blue-400",children:["$",ze.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-yellow-400 font-bold",children:["R",we.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-500",children:"Mark Paid"})})]},ae.id)})})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:[ve.filter(ae=>{var ge;return(((ge=ae.affiliateStats)==null?void 0:ge.balance)||0)>200}).length," partners ready for payout"]}),e.jsxs("button",{className:"px-6 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-500 flex items-center gap-2",children:[e.jsx(yc,{size:18})," Download FNB/STD Bank Batch File"]})]})]})]}),R==="international"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Exchange Rate Settings"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"ZAR to USD Rate:"}),e.jsx("input",{type:"number",step:"0.0001",value:L,onChange:ae=>$(parseFloat(ae.target.value)),className:"bg-black border border-gray-600 rounded p-2 text-white text-sm w-24"}),e.jsx("span",{className:"text-gray-500",children:"(Today's rate for conversion)"})]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"International Payout Queue"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Non-SA affiliates with balances > $50"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-black/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"PayPal Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"USD Earned"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"ZAR Earned"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Final Payout (USD)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:ve.filter(ae=>{var ge;return(((ge=ae.affiliateStats)==null?void 0:ge.balance)||0)>50}).map(ae=>{var Ue;const ge=((Ue=ae.affiliateStats)==null?void 0:Ue.balance)||0,ze=0,we=ge+ze*L;return e.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold",children:ae.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:ae.email})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-300",children:ae.email}),e.jsxs("td",{className:"px-6 py-4 text-blue-400 font-bold",children:["$",ge.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-green-400",children:["R",ze.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-yellow-400 font-bold",children:["$",we.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-500",children:"Mark Paid"})})]},ae.id)})})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:[ve.filter(ae=>{var ge;return(((ge=ae.affiliateStats)==null?void 0:ge.balance)||0)>50}).length," partners ready for payout"]}),e.jsxs("button",{className:"px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-500 flex items-center gap-2",children:[e.jsx(yc,{size:18})," Export PayPal Mass Pay CSV"]})]})]})]})]}),w==="partners"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Search Partners"}),e.jsx("input",{type:"text",placeholder:"Name, email, or code...",value:M,onChange:ae=>te(ae.target.value),className:"w-full bg-black border border-gray-600 rounded p-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Filter by Tier"}),e.jsxs("select",{value:H,onChange:ae=>U(ae.target.value),className:"bg-black border border-gray-600 rounded p-3 text-white min-w-[150px]",children:[e.jsx("option",{value:"all",children:"All Tiers"}),e.jsx("option",{value:"bronze",children:"Bronze (10%)"}),e.jsx("option",{value:"silver",children:"Silver (11%)"}),e.jsx("option",{value:"gold",children:"Gold (15%)"}),e.jsx("option",{value:"platinum",children:"Platinum (20%)"})]})]})]})}),e.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-black/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Current Tier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Sales (This Month)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Vault Sales"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:ve.filter(ae=>{var ge,ze,we,Ue;return(M===""||ae.name.toLowerCase().includes(M.toLowerCase())||ae.email.toLowerCase().includes(M.toLowerCase())||ae.affiliateCode.toLowerCase().includes(M.toLowerCase()))&&(H==="all"||H==="bronze"&&((ge=ae.affiliateStats)==null?void 0:ge.commissionRate)===10||H==="silver"&&((ze=ae.affiliateStats)==null?void 0:ze.commissionRate)===11||H==="gold"&&((we=ae.affiliateStats)==null?void 0:we.commissionRate)===15||H==="platinum"&&((Ue=ae.affiliateStats)==null?void 0:Ue.commissionRate)===20)}).map(ae=>{var ge,ze,we,Ue,et,fe,nt,dt;return e.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center text-cyan-400 font-bold",children:ae.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold",children:ae.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:ae.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${((ge=ae.affiliateStats)==null?void 0:ge.commissionRate)===20?"bg-yellow-900/30 text-yellow-400 border border-yellow-500/30":((ze=ae.affiliateStats)==null?void 0:ze.commissionRate)===15?"bg-purple-900/30 text-purple-400 border border-purple-500/30":((we=ae.affiliateStats)==null?void 0:we.commissionRate)===11?"bg-gray-900/30 text-gray-400 border border-gray-500/30":"bg-orange-900/30 text-orange-400 border border-orange-500/30"}`,children:[((Ue=ae.affiliateStats)==null?void 0:Ue.commissionRate)===20?" Gold":((et=ae.affiliateStats)==null?void 0:et.commissionRate)===15?" Silver":((fe=ae.affiliateStats)==null?void 0:fe.commissionRate)===11?" Bronze":"Starter"," - ",(nt=ae.affiliateStats)==null?void 0:nt.commissionRate,"%"]})}),e.jsxs("td",{className:"px-6 py-4 text-white font-bold",children:["R",(dt=ae.affiliateStats)==null?void 0:dt.totalSalesValue.toFixed(0)]}),e.jsxs("td",{className:"px-6 py-4 text-purple-400",children:[Math.floor(Math.random()*50)," items"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-green-900/30 text-green-400 rounded text-xs border border-green-500/30",children:"Active"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ie(ae),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-500",children:"Edit"}),e.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-500",children:"History"})]})})]},ae.id)})})]})})})]}),w==="settings"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(vp,{size:18,className:"text-yellow-400"})," Commission Rates"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Standard Products"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"text-center p-2 bg-orange-900/20 border border-orange-500/30 rounded",children:[e.jsx("p",{className:"text-xs text-orange-400",children:"Bronze"}),e.jsxs("p",{className:"text-lg font-bold text-white",children:[E.bronze,"%"]})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-900/20 border border-gray-500/30 rounded",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Silver"}),e.jsxs("p",{className:"text-lg font-bold text-white",children:[E.silver,"%"]})]}),e.jsxs("div",{className:"text-center p-2 bg-purple-900/20 border border-purple-500/30 rounded",children:[e.jsx("p",{className:"text-xs text-purple-400",children:"Gold"}),e.jsxs("p",{className:"text-lg font-bold text-white",children:[E.gold,"%"]})]}),e.jsxs("div",{className:"text-center p-2 bg-yellow-900/20 border border-yellow-500/30 rounded",children:[e.jsx("p",{className:"text-xs text-yellow-400",children:"Platinum"}),e.jsxs("p",{className:"text-lg font-bold text-white",children:[E.platinum,"%"]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(da,{size:16,className:"text-red-400"}),e.jsx("label",{className:"text-sm text-gray-400",children:"Secret Vault Items"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-900/20 border border-red-500/30 rounded",children:[e.jsxs("p",{className:"text-lg font-bold text-red-400",children:[E.vault,"%"]}),e.jsx("p",{className:"text-xs text-red-300",children:"LOCKED AT 1%"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This ensures we do not lose money on clearance stock."})]})]})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Ps,{size:18,className:"text-green-400"})," Membership Fees"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"South African (ZAR)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Spoil Me"}),e.jsxs("span",{className:"text-green-400 font-bold",children:["R",S.zar.spoilMe]})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Basic"}),e.jsxs("span",{className:"text-green-400 font-bold",children:["R",S.zar.basic]})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Premium"}),e.jsxs("span",{className:"text-green-400 font-bold",children:["R",S.zar.premium]})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Deluxe"}),e.jsxs("span",{className:"text-green-400 font-bold",children:["R",S.zar.deluxe]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"International (USD)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Insider"}),e.jsxs("span",{className:"text-blue-400 font-bold",children:["$",S.usd.insider]})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Gold"}),e.jsxs("span",{className:"text-blue-400 font-bold",children:["$",S.usd.gold]})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Deluxe"}),e.jsxs("span",{className:"text-blue-400 font-bold",children:["$",S.usd.deluxe]})]})]})]})]})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(xn,{size:18,className:"text-orange-400"})," Gamification Bonuses"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Weekly Achievements"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 bg-black/50 rounded border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Sprinter Bonus"}),e.jsxs("span",{className:"text-orange-400 font-bold",children:["R",I.sprinter.zar," / $",I.sprinter.usd]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"5 memberships in a week"})]}),e.jsxs("div",{className:"p-3 bg-black/50 rounded border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Big Spender Bonus"}),e.jsxs("span",{className:"text-orange-400 font-bold",children:["R",I.bigSpender.zar," / $",I.bigSpender.usd]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"R5,000 / $300 sales volume"})]})]})]})})]})]})}),w==="validator"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(gi,{size:18,className:"text-red-400"})," Commission Validator"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Monitor recent commissions for errors and anomalies. Green = Standard, Yellow = Vault, Red = Error."}),e.jsx("div",{className:"space-y-2",children:[{id:1,type:"standard",partner:"Sarah J.",amount:450,product:"Gold Hoops",status:"approved"},{id:2,type:"vault",partner:"Mike T.",amount:10,product:"Clearance Studs",status:"approved"},{id:3,type:"standard",partner:"Lerato K.",amount:1200,product:"Necklace Set",status:"approved"},{id:4,type:"error",partner:"Jessica L.",amount:5e3,product:"Diamond Ring",status:"flagged"}].map(ae=>e.jsx("div",{className:`p-4 rounded-lg border ${ae.type==="standard"?"bg-green-900/10 border-green-500/30":ae.type==="vault"?"bg-yellow-900/10 border-yellow-500/30":"bg-red-900/10 border-red-500/30"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-bold",children:[ae.partner," - ",ae.product]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Commission: R",ae.amount]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${ae.type==="standard"?"bg-green-900/50 text-green-400":ae.type==="vault"?"bg-yellow-900/50 text-yellow-400":"bg-red-900/50 text-red-400"}`,children:ae.type==="standard"?"Standard":ae.type==="vault"?"Vault (1%)":"ERROR"}),ae.status==="flagged"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-500",children:"Void"}),e.jsx("button",{className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-500",children:"Approve"})]})]})]})},ae.id))})]})}),ye&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>je(null)}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-6 max-w-sm w-full relative z-10 shadow-2xl",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-2 capitalize",children:[ye.action," Application"]}),e.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["For ",ye.name]}),e.jsx("textarea",{className:"w-full bg-black border border-gray-700 rounded p-3 text-white text-sm mb-4",placeholder:"Add a note (optional)...",rows:3,value:K,onChange:ae=>me(ae.target.value)}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>je(null),className:"flex-1 py-2 bg-zinc-800 text-gray-300 rounded hover:bg-zinc-700",children:"Cancel"}),e.jsx("button",{onClick:G,className:`flex-1 py-2 text-white font-bold rounded ${ye.action==="approve"?"bg-green-600 hover:bg-green-500":"bg-red-600 hover:bg-red-500"}`,children:"Confirm"})]})]})]}),C&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>ee(null)}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-4xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg border-2 border-white/10",children:C.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:C.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:C.email}),e.jsx("span",{className:"text-gray-600",children:""}),e.jsx("span",{className:"font-mono text-cyan-400 bg-cyan-900/20 px-2 py-0.5 rounded text-xs border border-cyan-500/30",children:C.affiliateCode})]})]})]}),e.jsx("button",{onClick:()=>ee(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white transition-colors",children:e.jsx(ns,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[e.jsx(Ps,{size:16,className:"text-green-500"}),e.jsx("span",{className:"text-xs uppercase",children:"Direct Sales"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",(wt=C.affiliateStats)==null?void 0:wt.totalSalesValue.toFixed(2)]})]}),e.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[e.jsx(ll,{size:16,className:"text-purple-500"}),e.jsx("span",{className:"text-xs uppercase",children:"Total Earned"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["R",(Lt=C.affiliateStats)==null?void 0:Lt.balance.toFixed(2)]})]}),e.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[e.jsx(Js,{size:16,className:"text-cyan-500"}),e.jsx("span",{className:"text-xs uppercase",children:"Network"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[qe.length," ",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"Recruits"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(TA,{size:18,className:"text-yellow-400"})," Commission Settings"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Direct Commission Tier (%)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"number",value:ue,onChange:ae=>Se(parseFloat(ae.target.value)),className:"w-full bg-black border border-gray-600 rounded-lg p-3 text-white text-sm font-bold focus:border-pink-500 outline-none"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),e.jsx("button",{onClick:be,className:"bg-pink-600 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 shadow-lg",children:"Update"})]}),e.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:["Standard Tiers: ",e.jsx("span",{className:"text-gray-300",children:"10%, 11%, 15%, 20%"}),". This setting overrides automatic tier progression."]})]})})]}),at&&e.jsxs("div",{className:"bg-blue-900/10 p-4 rounded-xl border border-blue-500/30 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-full text-blue-400",children:e.jsx(nw,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-300 uppercase font-bold mb-1",children:"Recruited By (Upline)"}),e.jsx("p",{className:"text-white font-bold text-sm",children:at.name}),e.jsx("p",{className:"text-[10px] text-gray-400",children:at.affiliateCode})]})]})]}),e.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700 h-full flex flex-col",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(ow,{size:18,className:"text-cyan-400"})," Network & Downline"]}),e.jsxs("div",{className:"mb-4 p-4 bg-black/40 rounded-xl border border-gray-700",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Add Recruit to Downline"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"flex-1 bg-zinc-900 border border-gray-600 rounded-lg p-2 text-xs text-white focus:border-cyan-500 outline-none",value:Pe,onChange:ae=>ce(ae.target.value),children:[e.jsx("option",{value:"",children:"Select User to Link..."}),l.filter(ae=>{var ge,ze;return ae.id!==C.id&&((ge=ae.affiliateStats)==null?void 0:ge.parentId)!==C.id&&((ze=ae.affiliateStats)==null?void 0:ze.status)==="approved"}).sort((ae,ge)=>ae.name.localeCompare(ge.name)).map(ae=>e.jsxs("option",{value:ae.id,children:[ae.name," (",ae.affiliateCode,")"]},ae.id))]}),e.jsxs("button",{onClick:He,disabled:!Pe,className:"bg-cyan-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center gap-1",children:[e.jsx(dr,{size:14})," Add"]})]}),e.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:[C.name," will earn ",e.jsx("strong",{children:"1%"})," from sales made by users added here."]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 max-h-[300px] custom-scrollbar",children:qe.length===0?e.jsx("div",{className:"text-center py-8 border border-dashed border-gray-800 rounded-xl",children:e.jsx("p",{className:"text-gray-500 text-xs",children:"No recruits in downline yet."})}):qe.map(ae=>{var ge,ze;return e.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-zinc-900 rounded-full flex items-center justify-center text-xs font-bold text-gray-400 border border-gray-700",children:ae.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white font-bold",children:ae.name}),e.jsx("p",{className:"text-[10px] text-gray-500",children:ae.affiliateCode})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-[10px] text-gray-500",children:["Sales: R",(ge=ae.affiliateStats)==null?void 0:ge.totalSalesValue.toFixed(0)]}),e.jsxs("p",{className:"text-xs text-green-400 font-bold",children:["+R",(((ze=ae.affiliateStats)==null?void 0:ze.totalSalesValue)||0*.01).toFixed(2)]})]})]},ae.id)})}),qe.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold",children:"Passive Income Generated"}),e.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",xe.toFixed(2)]})]})]})]})]})]})]})]})},O5=()=>/iP(ad|hone|od)/.test(navigator.userAgent)&&!("standalone"in navigator&&navigator.standalone);function D5(){const[s,t]=v.useState(null),[r,i]=v.useState(!1),[o,l]=v.useState(!1),[d,m]=v.useState(()=>!!localStorage.getItem("spv_install_dismissed"));if(v.useEffect(()=>{(()=>{const R=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;if(i(!!R),R)try{const P=window.__SPV_USER_ID;P&&gp({userId:P})}catch{}})(),window.addEventListener("appinstalled",()=>i(!0));const N=R=>{R.preventDefault(),t(R)};return window.addEventListener("beforeinstallprompt",N),()=>{window.removeEventListener("beforeinstallprompt",N),window.removeEventListener("appinstalled",()=>i(!0))}},[]),r||d)return null;const p=async()=>{if(s){s.prompt();const w=await s.userChoice;w&&w.outcome==="accepted"&&t(null)}else l(!0)},f=()=>{try{localStorage.setItem("spv_install_dismissed","1"),m(!0),l(!1)}catch{m(!0)}},b=async()=>{try{const w=window.__SPV_USER_ID;w?await gp({userId:w}):Notification.requestPermission()}catch(w){console.warn("request notification permission failed",w)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:e.jsxs("div",{className:"bg-white text-black rounded-lg max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Install Spoil Me"}),e.jsx("p",{className:"mb-4",children:"For the best experience please install the app to your device."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn btn-primary flex-1",onClick:p,children:"Download App"}),e.jsx("button",{className:"btn",onClick:()=>{l(!0)},children:"How to install"}),e.jsx("button",{className:"btn-ghost",onClick:f,children:"Dismiss"})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"text-sm text-gray-600",onClick:b,children:"Enable Notifications"})}),o&&e.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded",children:O5()?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"iOS Install Instructions"}),e.jsxs("ol",{className:"list-decimal list-inside mt-2",children:[e.jsxs("li",{children:["Tap the ",e.jsx("strong",{children:"Share"})," button (the square with an arrow)."]}),e.jsxs("li",{children:["Select ",e.jsx("strong",{children:"Add to Home Screen"}),"."]})]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Install"}),e.jsxs("p",{className:"mt-2",children:["If the system install card is available, press ",e.jsx("strong",{children:"Download App"})," above."]})]})})]})})}const z5=()=>{const{weeklyWinners:s}=vt(),[t,r]=v.useState(new Date),[i,o]=v.useState("");return v.useEffect(()=>{const l=()=>{const m=new Date,p=new Date(m);p.setUTCDate(m.getUTCDate()+(7-m.getUTCDay())),p.setUTCHours(8,0,0,0),p<m&&p.setUTCDate(p.getUTCDate()+7),r(p)};l();const d=setInterval(l,6e4);return()=>clearInterval(d)},[]),v.useEffect(()=>{const l=setInterval(()=>{const d=new Date,m=t.getTime()-d.getTime();if(m>0){const p=Math.floor(m/864e5),f=Math.floor(m/(1e3*60*60)%24),b=Math.floor(m/1e3/60%60);o(`${p}d ${f}h ${b}m`)}else o("Drawing new winners...")},1e3);return()=>clearInterval(l)},[t]),e.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-12",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"inline-block bg-gradient-to-br from-yellow-500 to-orange-500 p-5 rounded-full shadow-[0_0_30px_rgba(250,204,21,0.5)]",children:e.jsx(xn,{size:48,className:"text-white"})}),e.jsx("h1",{className:"font-cherry text-5xl text-white",children:"This Week's Winners!"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Congratulations to the lucky members of our R19 Spoil Me Package!"})]}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:[e.jsx(gn,{size:20,className:"text-cyan-400"}),"Next Draw"]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"A new set of winners is drawn every Sunday at 08:00 AM."})]}),e.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:i}),e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Time Remaining"})]})]}),e.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/20 p-5 rounded-xl flex items-start gap-4",children:[e.jsx(vs,{size:24,className:"text-purple-400 shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-purple-300",children:"How to Claim Your Prize"}),e.jsx("p",{className:"text-sm text-gray-300/80 mt-1",children:"If you're a winner, a notification has been sent to your profile's inbox containing your unique voucher code. Simply apply it at checkout to claim your winnings!"})]})]}),e.jsx("div",{className:"bg-zinc-900 rounded-2xl border border-gray-800 overflow-hidden",children:e.jsx("div",{className:"divide-y divide-gray-800",children:s.map(l=>e.jsxs("div",{className:`p-4 flex items-center justify-between gap-4 transition-colors ${l.rank<=3?"bg-yellow-900/10":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm border-2 ${l.rank===1?"bg-yellow-500 border-yellow-300 text-black shadow-[0_0_10px_rgba(250,204,21,0.5)]":l.rank===2?"bg-gray-400 border-gray-200 text-black":l.rank===3?"bg-orange-600 border-orange-400 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:["#",l.rank]}),e.jsx("span",{className:"font-medium text-white",children:l.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"font-bold text-lg text-green-400",children:["R",l.prize.toFixed(2)]}),e.jsx("span",{className:"text-xs text-gray-500 block",children:"Voucher"})]})]},l.rank))})}),e.jsxs("div",{className:"mt-12 bg-gradient-to-r from-pink-600 to-purple-600 p-8 rounded-2xl text-center shadow-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Want to be on this list?"}),e.jsx("p",{className:"text-pink-100 mb-6 max-w-lg mx-auto",children:"Join the Spoil Me Package for just R19/month for your chance to win weekly vouchers and get exclusive member perks!"}),e.jsxs(We,{to:"/membership",className:"inline-flex items-center gap-2 px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-lg text-lg",children:["Join Now ",e.jsx(rr,{size:20})]})]})]})},M5=()=>{const{weeklyWinners:s}=vt();return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[e.jsx(xn,{size:24,className:"text-yellow-400"}),' Weekly "Spoil Me" Winners']}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Review and manage the simulated weekly prize draw."})]})}),e.jsxs("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-5 rounded-xl flex items-start gap-4",children:[e.jsx(gi,{size:24,className:"text-yellow-500 shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-yellow-400",children:"Simulation Mode Active"}),e.jsxs("p",{className:"text-sm text-yellow-200/80 mt-1",children:["This panel displays a ",e.jsx("strong",{className:"text-white",children:"simulated list of winners"})," for demonstration. In a live production environment, this page would be connected to your database to:"]}),e.jsxs("ul",{className:"list-disc pl-5 mt-3 text-xs text-yellow-200/70 space-y-1",children:[e.jsx("li",{children:'Show a list of all users subscribed to the "Spoil Me Package".'}),e.jsxs("li",{children:["Allow you to run the draw, which would randomly select ",e.jsx("strong",{children:"real users"})," from that list."]}),e.jsx("li",{children:"Automatically generate unique voucher codes and assign them to the winning user accounts."}),e.jsx("li",{children:"Send a notification to the winners' in-app inbox."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 rounded-lg bg-cyan-900/30 text-cyan-400 border border-cyan-500/20",children:e.jsx(Js,{size:20})})}),e.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Winners This Week"}),e.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:s.length})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 rounded-lg bg-green-900/30 text-green-400 border border-green-500/20",children:e.jsx(xA,{size:20})})}),e.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Prize Value"}),e.jsxs("p",{className:"text-[22px] font-bold text-white mt-1",children:["R",s.reduce((t,r)=>t+r.prize,0).toFixed(2)]})]})]}),e.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 w-20",children:"Rank"}),e.jsx("th",{className:"p-4",children:"Winner Name"}),e.jsx("th",{className:"p-4 text-right",children:"Prize Value"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:s.map(t=>e.jsxs("tr",{className:`group transition-colors ${t.rank<=3?"bg-yellow-900/10":"hover:bg-zinc-800/50"}`,children:[e.jsx("td",{className:"p-4",children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold border ${t.rank===1?"bg-yellow-500 border-yellow-400 text-black":t.rank===2?"bg-gray-400 border-gray-300 text-black":t.rank===3?"bg-orange-600 border-orange-500 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:t.rank})}),e.jsx("td",{className:"p-4 font-medium text-gray-200",children:t.name}),e.jsxs("td",{className:"p-4 text-right font-bold text-lg text-green-400",children:["R",t.prize.toFixed(2)]})]},t.rank))})]})})]})},Sw=()=>{const[s,t]=v.useState([]),[r,i]=v.useState({enabled:!0,priceZAR:199,priceUSD:12,reachCount:7540}),[o,l]=v.useState(!0);v.useEffect(()=>{d()},[]);const d=async()=>{try{const b=await _c("settings","ad_config");b&&(t(b.packages||[]),i(b.socialAddon||r))}catch(b){console.error("Error loading ad config:",b)}finally{l(!1)}},m=async()=>{try{try{await ta("settings","ad_config",{packages:s,socialAddon:r})}catch{await ia("settings",{id:"ad_config",packages:s,socialAddon:r})}alert("Configuration saved successfully!")}catch(b){console.error("Error saving ad config:",b),alert("Failed to save configuration.")}},p=(b,w,N)=>{const R=[...s];R[b]={...R[b],[w]:N},t(R)},f=(b,w)=>{i({...r,[b]:w})};return o?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6 bg-gray-900 text-white min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-yellow-400",children:"Marketing Settings"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ad Packages"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full bg-gray-800 rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"p-4 text-left",children:"Name"}),e.jsx("th",{className:"p-4 text-left",children:"Duration (Days)"}),e.jsx("th",{className:"p-4 text-left",children:"Price (ZAR)"}),e.jsx("th",{className:"p-4 text-left",children:"Price (USD)"}),e.jsx("th",{className:"p-4 text-left",children:"Benefit"}),e.jsx("th",{className:"p-4 text-left",children:"Active"})]})}),e.jsx("tbody",{children:s.map((b,w)=>e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"text",value:b.name,onChange:N=>p(w,"name",N.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"number",value:b.durationDays,onChange:N=>p(w,"durationDays",parseInt(N.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"number",step:"0.01",value:b.priceZAR,onChange:N=>p(w,"priceZAR",parseFloat(N.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"number",step:"0.01",value:b.priceUSD,onChange:N=>p(w,"priceUSD",parseFloat(N.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"text",value:b.benefit,onChange:N=>p(w,"benefit",N.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",checked:b.active,onChange:N=>p(w,"active",N.target.checked),className:"w-4 h-4"})})]},b.id))})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Social Media Add-on"}),e.jsx("div",{className:"bg-gray-800 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Enabled"}),e.jsx("input",{type:"checkbox",checked:r.enabled,onChange:b=>f("enabled",b.target.checked),className:"w-4 h-4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (ZAR)"}),e.jsx("input",{type:"number",step:"0.01",value:r.priceZAR,onChange:b=>f("priceZAR",parseFloat(b.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (USD)"}),e.jsx("input",{type:"number",step:"0.01",value:r.priceUSD,onChange:b=>f("priceUSD",parseFloat(b.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Network Reach"}),e.jsx("input",{type:"number",value:r.reachCount,onChange:b=>f("reachCount",parseInt(b.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]})]})})]}),e.jsx("button",{onClick:m,className:"bg-yellow-400 text-black font-bold py-2 px-6 rounded-lg hover:bg-yellow-500 transition-colors",children:"Save Changes"})]})},L5=()=>{const s={totalRevenue:5400,topSpenders:[{artist:"Artist A",amount:1200},{artist:"Artist B",amount:950},{artist:"Artist C",amount:700}],slotUtilization:{homepageSlots:8,totalHomepageSlots:10,categorySlots:45}};return e.jsxs("div",{className:"p-4 md:p-6 bg-zinc-900 rounded-lg border border-gray-800",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Ad Revenue & Performance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-black/30 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"Total Ad Revenue"}),e.jsxs("p",{className:"text-4xl font-bold text-white",children:["R",s.totalRevenue.toLocaleString()]}),e.jsx("p",{className:"text-gray-400",children:"this month"})]}),e.jsxs("div",{className:"bg-black/30 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Homepage Slot Utilization"}),e.jsxs("p",{className:"text-4xl font-bold text-white",children:[s.slotUtilization.homepageSlots," / ",s.slotUtilization.totalHomepageSlots]}),e.jsx("p",{className:"text-gray-400",children:"slots filled"})]}),e.jsxs("div",{className:"bg-black/30 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"Active Category Ads"}),e.jsx("p",{className:"text-4xl font-bold text-white",children:s.slotUtilization.categorySlots}),e.jsx("p",{className:"text-gray-400",children:"promotions running"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-yellow-400 mb-4",children:"Top Spenders"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-300",children:[e.jsx("thead",{className:"bg-zinc-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Artist"}),e.jsx("th",{className:"px-4 py-2",children:"Total Spent"})]})}),e.jsx("tbody",{children:s.topSpenders.map((t,r)=>e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("td",{className:"px-4 py-2 font-medium text-white",children:t.artist}),e.jsxs("td",{className:"px-4 py-2 text-green-400",children:["R",t.amount.toLocaleString()]})]},r))})]})})]})]})},U5=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],$5={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:10},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:10}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:10},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:10}]},F5=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],B5=()=>{const[s,t]=v.useState("shipping"),[r,i]=v.useState(()=>{const P=localStorage.getItem("spv_pudo_costs");return P?JSON.parse(P):U5}),[o,l]=v.useState(()=>{const P=localStorage.getItem("spv_paxi_costs");return P?JSON.parse(P):$5}),[d,m]=v.useState(()=>{const P=localStorage.getItem("spv_door_to_door_costs");return P?JSON.parse(P):F5}),[p,f]=v.useState({}),b=P=>{f(_=>({..._,[P]:"Saved!"})),setTimeout(()=>{f(_=>({..._,[P]:""}))},2e3)};v.useEffect(()=>{},[]),v.useEffect(()=>{try{localStorage.setItem("spv_paxi_costs",JSON.stringify(o))}catch(P){console.error("Failed to save PAXI costs to storage",P)}},[o]),v.useEffect(()=>{},[]),v.useEffect(()=>{try{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(d))}catch(P){console.error("Failed to save Door to Door costs to storage",P)}},[d]);const w=(P,_,O)=>{const L=[...r],$=parseFloat(O)||0;L[P][_]=$,i(L)},N=(P,_,O,L)=>{const $={...o},M=parseFloat(L)||0;$[P][_][O]=M,l($)},R=(P,_,O)=>{m(L=>L.map((M,te)=>{if(te!==P)return M;let H={...M};if(_==="initialCharge"||_==="ratePerKg"||_==="handleFee"||_==="boxFee"){const U=parseFloat(O);_==="ratePerKg"&&(isNaN(U)||O==="")?H[_]=null:H[_]=isNaN(U)?0:U}else H[_]=O;return H}))};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[e.jsx(Ps,{size:24,className:"text-green-400"})," Shipping Expenses & Supplies"]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Reference for PUDO & PAXI costs and supplies."})]}),e.jsxs("div",{className:"rounded-xl border border-gray-700 bg-zinc-900",children:[e.jsxs("div",{className:"grid w-full grid-cols-3",children:[e.jsx("button",{onClick:()=>t("shipping"),className:`py-3 px-4 text-sm font-medium transition-colors ${s==="shipping"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Shipping Costs"}),e.jsx("button",{onClick:()=>t("ads"),className:`py-3 px-4 text-sm font-medium transition-colors ${s==="ads"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Ad Revenue"}),e.jsx("button",{onClick:()=>t("marketing"),className:`py-3 px-4 text-sm font-medium transition-colors ${s==="marketing"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Marketing Settings"})]}),e.jsxs("div",{className:"p-6",children:[s==="shipping"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[e.jsx(yA,{size:20,className:"text-cyan-400"})," PUDO Box & Service Pricing"]}),e.jsxs("a",{href:"https://stationery.thecourierguy.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Order Stationery ",e.jsx(Ua,{size:16})]})]}),e.jsx("div",{className:"space-y-4 md:hidden",children:r.map((P,_)=>{const O=P.boxCost+(P.lockerToLockerCost||0)+P.lockerHandleFee;return P.boxCost+(P.doorToLockerCost||0)+P.doorHandleFee,e.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-800",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:P.name}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[e.jsxs("p",{children:["Dimensions: ",P.dimensions]}),e.jsxs("p",{children:["Max Weight: ",P.maxWeight]}),e.jsxs("p",{children:["Box Cost: R",P.boxCost]}),P.lockerToLockerCost&&e.jsxs("p",{children:["Locker to Locker: R",P.lockerToLockerCost]}),P.doorToLockerCost&&e.jsxs("p",{children:["Door to Locker: R",P.doorToLockerCost]}),e.jsxs("p",{className:"font-bold text-cyan-400",children:["Total: R",O.toFixed(2)]})]})]},_)})}),e.jsxs("div",{className:"hidden md:block mt-8",children:[e.jsx("h4",{className:"font-bold text-cyan-400 mb-2 mt-6",children:"Locker to Locker"}),e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[e.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Box"}),e.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),e.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),e.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),e.jsx("th",{className:"px-4 py-2",children:"Locker to Locker"}),e.jsx("th",{className:"px-4 py-2",children:"Locker Handle Fee"}),e.jsx("th",{className:"px-4 py-2",children:"Total"}),e.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),e.jsx("tbody",{children:r.map((P,_)=>{if(P.lockerToLockerCost===null)return null;const O=P.boxCost+(P.lockerToLockerCost||0)+P.lockerHandleFee;return e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("td",{className:"px-4 py-2 font-bold text-white",children:P.name}),e.jsx("td",{className:"px-4 py-2",children:P.dimensions}),e.jsx("td",{className:"px-4 py-2",children:P.maxWeight}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:P.boxCost,onChange:L=>w(_,"boxCost",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:P.lockerToLockerCost||0,onChange:L=>w(_,"lockerToLockerCost",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:P.lockerHandleFee,onChange:L=>w(_,"lockerHandleFee",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),e.jsxs("td",{className:"px-4 py-2 font-bold text-cyan-400",children:["R",O.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("button",{className:"px-2 py-1 bg-cyan-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(r)),b(`pudo-lockerToLockerCost-${_}`)},children:""}),e.jsx("span",{className:"text-green-400 text-xs",children:p[`pudo-lockerToLockerCost-${_}`]})]})]},_)})})]}),e.jsx("h4",{className:"font-bold text-purple-400 mb-2 mt-6",children:"Door to Locker"}),e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400",children:[e.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Box"}),e.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),e.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),e.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),e.jsx("th",{className:"px-4 py-2",children:"Door to Locker"}),e.jsx("th",{className:"px-4 py-2",children:"Door Handle Fee"}),e.jsx("th",{className:"px-4 py-2",children:"Total"}),e.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),e.jsx("tbody",{children:r.map((P,_)=>{if(P.doorToLockerCost===null)return null;const O=P.boxCost+(P.doorToLockerCost||0)+P.doorHandleFee;return e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("td",{className:"px-4 py-2 font-bold text-white",children:P.name}),e.jsx("td",{className:"px-4 py-2",children:P.dimensions}),e.jsx("td",{className:"px-4 py-2",children:P.maxWeight}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:P.boxCost,onChange:L=>w(_,"boxCost",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:P.doorToLockerCost||0,onChange:L=>w(_,"doorToLockerCost",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:P.doorHandleFee,onChange:L=>w(_,"doorHandleFee",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),e.jsxs("td",{className:"px-4 py-2 font-bold text-purple-400",children:["R",O.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("button",{className:"px-2 py-1 bg-purple-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(r)),b(`pudo-doorToLockerCost-${_}`)},children:""}),e.jsx("span",{className:"text-green-400 text-xs",children:p[`pudo-doorToLockerCost-${_}`]})]})]},_)})})]})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[e.jsx(Qa,{size:20,className:"text-pink-400"})," PAXI Bag & Service Pricing"]}),e.jsxs("a",{href:"https://www.paxi.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["PAXI Website ",e.jsx(Ua,{size:16})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:Object.entries(o).map(([P,_])=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-pink-400 mb-2",children:P}),e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[e.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Bag"}),e.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),e.jsx("th",{className:"px-4 py-2",children:"Service Cost"}),e.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),e.jsx("th",{className:"px-4 py-2",children:"Total"}),e.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),e.jsx("tbody",{children:_.map((O,L)=>{let $=O.bag.includes("Small")?6:15;const M=$+O.serviceCost+O.handleFee;return e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("td",{className:"px-4 py-2 font-bold text-white",children:O.bag}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:$,onChange:te=>{},className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right",disabled:!0})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:O.serviceCost,onChange:te=>N(P,L,"serviceCost",te.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:O.handleFee,onChange:te=>N(P,L,"handleFee",te.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),e.jsxs("td",{className:"px-4 py-2 font-bold text-pink-400",children:["R",M.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("button",{className:"px-2 py-1 bg-pink-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_paxi_costs",JSON.stringify(o)),b(`paxi-${P}-${L}`)},children:""}),e.jsx("span",{className:"text-green-400 text-xs",children:p[`paxi-${P}-${L}`]})]})]},L)})})]})]},P))})]}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:e.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[e.jsx($n,{size:20,className:"text-yellow-400"})," Door-to-Door Courier Pricing"]})}),e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[e.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Service"}),e.jsx("th",{className:"px-4 py-2",children:"Initial Weight"}),e.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),e.jsx("th",{className:"px-4 py-2",children:"Initial Charge"}),e.jsx("th",{className:"px-4 py-2",children:"Rate per Kg"}),e.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),e.jsx("th",{className:"px-4 py-2",children:"Total"}),e.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),e.jsx("tbody",{children:d.map((P,_)=>{const O=P.boxFee+P.initialCharge+(P.ratePerKg!==null?P.ratePerKg:0)+P.handleFee;return e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("td",{className:"px-4 py-2 font-bold text-white",children:P.service}),e.jsx("td",{className:"px-4 py-2",children:P.initialWeight}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:P.boxFee,onChange:L=>R(_,"boxFee",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:P.initialCharge,onChange:L=>R(_,"initialCharge",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),e.jsx("td",{className:"px-4 py-2",children:P.ratePerKg!==null?e.jsx("input",{type:"number",value:P.ratePerKg,onChange:L=>R(_,"ratePerKg",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"}):"-"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:P.handleFee,onChange:L=>R(_,"handleFee",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),e.jsxs("td",{className:"px-4 py-2 font-bold text-yellow-400",children:["R",O.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("button",{className:"px-2 py-1 bg-yellow-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(d)),b(`doorToDoor-${_}`)},children:""}),e.jsx("span",{className:"text-green-400 text-xs",children:p[`doorToDoor-${_}`]})]})]},_)})})]})]})]}),s==="ads"&&e.jsx(L5,{}),s==="marketing"&&e.jsx(Sw,{})]})]})]})},Hy=s=>{switch(s){case"Pending":return"bg-yellow-900/30 text-yellow-400 border-yellow-500/30";case"Processing":return"bg-blue-900/30 text-blue-400 border-blue-500/30";case"Shipped":return"bg-cyan-900/30 text-cyan-400 border-cyan-500/30";case"Delivered":return"bg-green-900/30 text-green-400 border-green-500/30";case"Cancelled":return"bg-red-900/30 text-red-400 border-red-500/30";default:return"bg-gray-800 text-gray-400"}},V5=()=>{const{orders:s,updateOrder:t,deleteOrder:r}=vt(),[i,o]=v.useState(""),[l,d]=v.useState(""),[m,p]=v.useState(null),[f,b]=v.useState(""),w=v.useMemo(()=>s.filter(_=>{const O=i.toLowerCase();return _.orderNumber.toLowerCase().includes(O)||_.customerName.toLowerCase().includes(O)||_.customerEmail.toLowerCase().includes(O)}).filter(_=>l?_.status===l:!0),[s,i,l]),N=_=>{p(_),b(_.status)},R=async()=>{m&&f&&(await t({...m,status:f}),p(null),b(""))},P=async _=>{window.confirm("Are you sure you want to delete this order? This action cannot be undone.")&&(await r(_),p(null))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Order Management"}),e.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(pa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),e.jsx("input",{type:"text",placeholder:"Search by Order #, Name, or Email...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:i,onChange:_=>o(_.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Jo,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),e.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none appearance-none",value:l,onChange:_=>d(_.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Processing",children:"Processing"}),e.jsx("option",{value:"Shipped",children:"Shipped"}),e.jsx("option",{value:"Delivered",children:"Delivered"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"hidden md:block bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Order #"}),e.jsx("th",{className:"p-4",children:"Date"}),e.jsx("th",{className:"p-4",children:"Customer"}),e.jsx("th",{className:"p-4 text-right",children:"Total"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:w.map(_=>e.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[e.jsx("td",{className:"p-4 font-mono text-cyan-400",children:_.orderNumber}),e.jsx("td",{className:"p-4 text-gray-400",children:new Date(_.date).toLocaleDateString()}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-medium text-gray-200",children:_.customerName}),e.jsx("div",{className:"text-xs text-gray-500",children:_.customerEmail})]}),e.jsxs("td",{className:"p-4 text-right font-bold text-green-400",children:["R",_.total.toFixed(2)]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${Hy(_.status)}`,children:_.status})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{onClick:()=>N(_),className:"text-xs text-gray-400 hover:text-white underline opacity-0 group-hover:opacity-100 transition-opacity",children:"View Details"})})]},_.id))})]}),w.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),e.jsxs("div",{className:"md:hidden space-y-4",children:[w.map(_=>e.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-cyan-400 text-sm",children:_.orderNumber}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(_.date).toLocaleString()})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${Hy(_.status)}`,children:_.status})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-200 text-sm",children:_.customerName}),e.jsx("div",{className:"text-xs text-gray-500",children:_.customerEmail})]}),e.jsxs("div",{className:"flex justify-between items-end pt-2 border-t border-gray-800",children:[e.jsx("button",{onClick:()=>N(_),className:"text-xs text-gray-400 hover:text-white underline",children:"View Details"}),e.jsxs("div",{className:"font-bold text-green-400 text-lg",children:["R",_.total.toFixed(2)]})]})]},_.id)),w.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),m&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>p(null)}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-2xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Order Details"}),e.jsx("p",{className:"font-mono text-cyan-400",children:m.orderNumber})]}),e.jsx("button",{onClick:()=>p(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white",children:e.jsx(ns,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[e.jsx(Fn,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-gray-300",children:m.customerName})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[e.jsx(bc,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-gray-300",children:m.customerEmail})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[e.jsx(La,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-gray-300",children:new Date(m.date).toLocaleString()})]})]}),e.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800",children:[e.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx($n,{size:18,className:"text-cyan-400"}),"Shipping Information"]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-400",children:"Method:"})," ",e.jsx("span",{className:"text-gray-200",children:m.shippingMethod})]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-400",children:"Details:"})," ",e.jsx("span",{className:"text-gray-200",children:m.shippingDetails})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(pl,{size:18,className:"text-pink-400"}),"Items (",m.items.reduce((_,O)=>_+O.quantity,0),")"]}),m.items.map((_,O)=>e.jsxs("div",{className:"flex items-center gap-4 bg-black/40 p-3 rounded-lg border border-gray-800",children:[e.jsx("img",{src:_.images[0],alt:_.name,className:"w-12 h-12 rounded object-cover border border-gray-700"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-white",children:_.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[_.selectedSize&&`Size: ${_.selectedSize}`,_.selectedMaterial&&`Material: ${_.selectedMaterial}`]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["x",_.quantity]}),e.jsxs("div",{className:"text-sm font-bold text-white",children:["R",(_.price*_.quantity).toFixed(2)]})]},O))]}),e.jsxs("div",{className:"pt-4 border-t border-gray-800 text-sm text-right space-y-2",children:[e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("span",{className:"text-gray-400",children:"Subtotal:"})," ",e.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",(m.total-m.shippingCost).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("span",{className:"text-gray-400",children:"Shipping:"})," ",e.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",m.shippingCost.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-end gap-4 font-bold text-lg",children:[e.jsx("span",{className:"text-white",children:"Total:"})," ",e.jsxs("span",{className:"text-green-400 w-24 text-left",children:["R",m.total.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-800 bg-zinc-950/50 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx("label",{className:"text-sm font-bold text-white",children:"Status:"}),e.jsxs("select",{value:f,onChange:_=>b(_.target.value),className:"flex-1 bg-black border border-gray-700 rounded-lg p-2 text-white text-sm focus:border-pink-500 outline-none",children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Processing",children:"Processing"}),e.jsx("option",{value:"Shipped",children:"Shipped"}),e.jsx("option",{value:"Delivered",children:"Delivered"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),e.jsx("button",{onClick:R,className:"px-4 py-2 bg-pink-600 text-white font-bold rounded-lg text-sm hover:bg-pink-500",children:"Save"})]}),e.jsxs("button",{onClick:()=>P(m.id),className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 text-red-400 text-sm font-bold hover:bg-red-900/20 rounded-lg border border-red-900/0 hover:border-red-900/30 transition-colors",children:[e.jsx(zn,{size:16})," Delete Order"]})]})]})]})]})},W5=()=>e.jsx("div",{className:"bg-gray-900 text-white min-h-screen p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6 text-cyan-400",children:"Terms and Conditions"}),e.jsxs("div",{className:"space-y-6 text-gray-300",children:[e.jsx("p",{children:"Welcome to Spoil Me. These terms and conditions outline the rules and regulations for the use of Spoil Me's Website, located at spoilme.com."}),e.jsx("p",{children:"By accessing this website we assume you accept these terms and conditions. Do not continue to use Spoil Me if you do not agree to take all of the terms and conditions stated on this page."}),e.jsx("h2",{className:"text-2xl font-semibold text-cyan-400 mt-4",children:"Cookies"}),e.jsx("p",{children:"We employ the use of cookies. By accessing Spoil Me, you agreed to use cookies in agreement with the Spoil Me's Privacy Policy."}),e.jsx("h2",{className:"text-2xl font-semibold text-cyan-400 mt-4",children:"License"}),e.jsx("p",{children:"Unless otherwise stated, Spoil Me and/or its licensors own the intellectual property rights for all material on Spoil Me. All intellectual property rights are reserved. You may access this from Spoil Me for your own personal use subjected to restrictions set in these terms and conditions."})]})]})}),H5="modulepreload",q5=function(s){return"/"+s},qy={},uf=function(t,r,i){let o=Promise.resolve();if(r&&r.length>0){let d=function(f){return Promise.all(f.map(b=>Promise.resolve(b).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=d(r.map(f=>{if(f=q5(f),f in qy)return;qy[f]=!0;const b=f.endsWith(".css"),w=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${w}`))return;const N=document.createElement("link");if(N.rel=b?"stylesheet":H5,b||(N.as="script"),N.crossOrigin="",N.href=f,p&&N.setAttribute("nonce",p),document.head.appendChild(N),b)return new Promise((R,P)=>{N.addEventListener("load",R),N.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&l(m.reason);return t().catch(l)})},G5=gl("App",{web:()=>uf(()=>import("./web-CVv8JMad.js"),[]).then(s=>new s.AppWeb)});function K5(s){s.CapacitorUtils.Synapse=new Proxy({},{get(t,r){return new Proxy({},{get(i,o){return(l,d,m)=>{const p=s.Capacitor.Plugins[r];if(p===void 0){m(new Error(`Capacitor plugin ${r} not found`));return}if(typeof p[o]!="function"){m(new Error(`Method ${o} not found in Capacitor plugin ${r}`));return}(async()=>{try{const f=await p[o](l);d(f)}catch(f){m(f)}})()}}})}})}function J5(s){s.CapacitorUtils.Synapse=new Proxy({},{get(t,r){return s.cordova.plugins[r]}})}function Z5(s=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!s?K5(window):window.cordova!==void 0&&J5(window))}var Nu;(function(s){s.Documents="DOCUMENTS",s.Data="DATA",s.Library="LIBRARY",s.Cache="CACHE",s.External="EXTERNAL",s.ExternalStorage="EXTERNAL_STORAGE",s.ExternalCache="EXTERNAL_CACHE",s.LibraryNoCloud="LIBRARY_NO_CLOUD",s.Temporary="TEMPORARY"})(Nu||(Nu={}));var Gy;(function(s){s.UTF8="utf8",s.ASCII="ascii",s.UTF16="utf16"})(Gy||(Gy={}));const Ky=gl("Filesystem",{web:()=>uf(()=>import("./web-DK6UngA0.js"),[]).then(s=>new s.FilesystemWeb)});Z5();const Y5=gl("FileOpener"),X5=()=>{const[s,t]=v.useState(null),[r,i]=v.useState(!1),o=v.useCallback(async()=>{if(vu.isNativePlatform())try{const d=await fetch("https://spoilme-edee0.web.app/version.json",{cache:"no-store"});if(!d.ok)throw new Error("Failed to fetch version.json");const m=await d.json(),f=(await G5.getInfo()).version;m.version&&m.version!==f&&t(m)}catch(d){console.error("Error checking for app update:",d)}},[]),l=v.useCallback(async()=>{if(s){i(!0);try{if(s.apkUrl===""){alert("Update downloaded. Please restart the app.");return}const d=`Spoil-Me-Vintage-${s.version}.apk`,m=await fetch(s.apkUrl);if(!m.ok)throw new Error("Failed to download APK");const p=await m.arrayBuffer(),f=await new Promise((w,N)=>{const R=new FileReader;R.onload=()=>w(R.result.split(",")[1]),R.onerror=N,R.readAsDataURL(new Blob([p]))});await Ky.writeFile({path:d,data:f,directory:Nu.External});const b=await Ky.getUri({directory:Nu.External,path:d});await Y5.open({filePath:b.uri,contentType:"application/vnd.android.package-archive"})}catch(d){console.error("Error performing app update:",d)}finally{i(!1),t(null)}}},[s]);return v.useEffect(()=>{o()},[o]),{updateAvailable:s,isDownloading:r,performUpdate:l,dismissUpdate:()=>t(null)}},Q5=({version:s,isDownloading:t,onUpdate:r,onDismiss:i})=>e.jsx("div",{className:"fixed bottom-4 right-4 z-[100] w-full max-w-sm",children:e.jsx("div",{className:"bg-zinc-800 border-2 border-pink-500 rounded-2xl p-6 shadow-[0_0_40px_rgba(236,72,153,0.3)] animate-in slide-in-from-bottom-10 duration-500",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(yc,{size:24,className:"text-white"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"New Update Available!"}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Version ",s," is ready to be installed."]}),e.jsxs("div",{className:"mt-4 flex space-x-3",children:[e.jsx("button",{onClick:r,disabled:t,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-white text-black font-bold rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?e.jsxs(e.Fragment,{children:[e.jsx(_A,{size:18,className:"animate-spin mr-2"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yc,{size:18,className:"mr-2"}),"Update Now"]})}),e.jsx("button",{onClick:i,disabled:t,className:"px-3 py-2 text-gray-400 hover:text-white transition-colors",children:"Later"})]})]}),e.jsx("div",{className:"ml-3 flex-shrink-0",children:e.jsx("button",{onClick:i,disabled:t,className:"text-gray-500 hover:text-gray-300",children:e.jsx(ns,{size:20})})})]})})});function e3(s={}){const{immediate:t=!1,onNeedRefresh:r,onOfflineReady:i,onRegistered:o,onRegisteredSW:l,onRegisterError:d}=s;let m,p;const f=async(w=!0)=>{await p};async function b(){if("serviceWorker"in navigator){if(m=await uf(async()=>{const{Workbox:w}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:w}},[]).then(({Workbox:w})=>new w("/service-worker.js",{scope:"/",type:"classic"})).catch(w=>{d==null||d(w)}),!m)return;m.addEventListener("activated",w=>{(w.isUpdate||w.isExternal)&&window.location.reload()}),m.addEventListener("installed",w=>{w.isUpdate||i==null||i()}),m.register({immediate:t}).then(w=>{l?l("/service-worker.js",w):o==null||o(w)}).catch(w=>{d==null||d(w)})}}return p=b(),f}function t3(s={}){const{immediate:t=!0,onNeedRefresh:r,onOfflineReady:i,onRegistered:o,onRegisteredSW:l,onRegisterError:d}=s,[m,p]=v.useState(!1),[f,b]=v.useState(!1),[w]=v.useState(()=>e3({immediate:t,onOfflineReady(){b(!0),i==null||i()},onNeedRefresh(){p(!0),r==null||r()},onRegistered:o,onRegisteredSW:l,onRegisterError:d}));return{needRefresh:[m,p],offlineReady:[f,b],updateServiceWorker:w}}const s3=()=>{const{needRefresh:s,updateServiceWorker:t,offlineReady:r}=t3(),[i,o]=v.useState(!1);return v.useEffect(()=>{if(r){console.debug("[UpdatePrompt] Service worker offlineReady (fresh install)"),o(!1);return}s&&o(!0)},[s,r]),i?e.jsx("div",{style:{bottom:"env(safe-area-inset-bottom, 16px)"},className:"fixed left-4 right-4 md:left-auto md:right-6 md:bottom-6 z-60 flex justify-center",children:e.jsxs("div",{className:"max-w-xl w-full bg-zinc-900 border border-pink-500 text-white rounded-xl p-3 flex items-center justify-between gap-4 shadow-lg",children:[e.jsx("div",{className:"text-sm",children:"New version available!"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"bg-pink-600 hover:bg-pink-500 text-white px-3 py-2 rounded-md text-sm font-semibold",onClick:async()=>{try{await t(!0)}catch(l){console.warn("[UpdatePrompt] updateServiceWorker failed",l)}o(!1)},children:"Refresh"}),e.jsx("button",{className:"bg-transparent border border-white/10 text-white px-3 py-2 rounded-md text-sm",onClick:()=>o(!1),children:"Later"})]})]})}):null},r3=()=>/iP(ad|hone|od)/.test(navigator.userAgent)&&!("standalone"in navigator&&navigator.standalone),n3=()=>{const[s,t]=v.useState(!1);if(v.useEffect(()=>{try{const i=!!localStorage.getItem("spv_install_dismissed"),o=!!localStorage.getItem("spv_install_banner_dismissed"),l=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;r3()&&i&&!o&&!l&&t(!0)}catch{}},[]),!s)return null;const r=()=>{try{localStorage.setItem("spv_install_banner_dismissed","1")}catch{}t(!1)};return e.jsxs("div",{className:"fixed left-4 right-4 bottom-4 z-50 flex items-center justify-between bg-white/10 backdrop-blur-sm border border-white/10 rounded-xl p-3 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/8 rounded flex items-center justify-center",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Install app for the best experience"}),e.jsx("div",{className:"text-xs text-gray-300",children:"Tap Share  Add to Home Screen"})]})]}),e.jsx("div",{children:e.jsx("button",{onClick:r,className:"text-sm text-gray-200 px-2 py-1 rounded",children:"X"})})]})},i3=()=>{const{products:s}=vt(),[t,r]=v.useState(""),[i,o]=v.useState(null),[l,d]=v.useState(""),[m,p]=v.useState(""),[f,b]=v.useState(""),[w,N]=v.useState(""),[R,P]=v.useState([]);v.useEffect(()=>{const M=localStorage.getItem("vaultItems");M&&P(JSON.parse(M))},[]);const _=s.filter(M=>M.name.toLowerCase().includes(t.toLowerCase())),O=()=>{if(!i||!l||!m||!f)return;const M={id:Date.now().toString(),productId:i.id,productName:i.name,productImage:i.images[0],vaultPriceZAR:parseFloat(l),vaultPriceUSD:parseFloat(m),vaultStock:parseInt(f),goLiveDate:w||new Date().toISOString().split("T")[0],isActive:!1},te=[...R,M];P(te),localStorage.setItem("vaultItems",JSON.stringify(te)),o(null),d(""),p(""),b(""),N("")},L=M=>{const te=R.map(H=>H.id===M?{...H,isActive:!H.isActive}:H);P(te),localStorage.setItem("vaultItems",JSON.stringify(te))},$=M=>{const te=R.filter(H=>H.id!==M);P(te),localStorage.setItem("vaultItems",JSON.stringify(te))};return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-3",children:[e.jsx(Ft,{className:"text-yellow-400",size:28}),"Vault Management"]})}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[e.jsxs("h3",{className:"font-bold text-white text-lg mb-6 flex items-center gap-3",children:[e.jsx(dr,{size:20,className:"text-green-400"}),"Add Product to Vault"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Search & Select Product"}),e.jsxs("div",{className:"relative",children:[e.jsx(pa,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 pl-10 text-white",value:t,onChange:M=>r(M.target.value)})]})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto bg-zinc-800 rounded border border-gray-600",children:_.map(M=>e.jsx("div",{className:`p-3 border-b border-gray-700 cursor-pointer hover:bg-zinc-700 ${(i==null?void 0:i.id)===M.id?"bg-cyan-900/30 border-cyan-500":""}`,onClick:()=>o(M),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:M.images[0],className:"w-12 h-12 rounded object-cover",alt:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:M.name}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Stock: ",M.stock]})]})]})},M.id))})]}),e.jsxs("div",{className:"space-y-4",children:[i&&e.jsxs("div",{className:"bg-zinc-800 p-4 rounded border border-cyan-500/30",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Selected Product"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("img",{src:i.images[0],className:"w-16 h-16 rounded object-cover",alt:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:i.name}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Stock: ",i.stock]})]})]}),e.jsxs("div",{className:"bg-zinc-700 p-3 rounded border border-gray-600",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Current Product Price"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("p",{className:"text-green-400 font-bold",children:["R",i.price]}),e.jsxs("p",{className:"text-blue-400 font-bold",children:["$",i.priceUSD]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Price (ZAR)"}),e.jsx("input",{type:"number",placeholder:"e.g., 10",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:l,onChange:M=>d(M.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Price (USD)"}),e.jsx("input",{type:"number",placeholder:"e.g., 1",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:m,onChange:M=>p(M.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Stock Quantity"}),e.jsx("input",{type:"number",placeholder:"e.g., 50",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:f,onChange:M=>b(M.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Go Live Date"}),e.jsx("input",{type:"date",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:w,onChange:M=>N(M.target.value)})]}),e.jsxs("button",{onClick:O,disabled:!i||!l||!m||!f,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-gray-600 text-white font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(dr,{size:16}),"Add to Vault Batch"]})]})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[e.jsxs("h3",{className:"font-bold text-white text-lg mb-6 flex items-center gap-3",children:[e.jsx(Qa,{size:20,className:"text-purple-400"}),"Vault Items (",R.length,")"]}),e.jsxs("div",{className:"space-y-4",children:[R.map(M=>e.jsx("div",{className:"bg-zinc-800 p-4 rounded border border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:M.productImage,className:"w-16 h-16 rounded object-cover",alt:""}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:M.productName}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Vault: R",M.vaultPriceZAR," / $",M.vaultPriceUSD," | Stock: ",M.vaultStock]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Go Live: ",M.goLiveDate]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${M.isActive?"bg-green-900/30 text-green-400":"bg-gray-700 text-gray-400"}`,children:M.isActive?"ACTIVE":"INACTIVE"})}),e.jsx("button",{onClick:()=>L(M.id),className:`px-3 py-1 rounded text-xs font-bold transition-colors ${M.isActive?"bg-red-600 hover:bg-red-500 text-white":"bg-green-600 hover:bg-green-500 text-white"}`,children:M.isActive?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>$(M.id),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors",children:"Remove"})]})]})},M.id)),R.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Ft,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No items in the vault yet. Add some products above!"})]})]})]})]})},a3=()=>{const{user:s,currency:t,addToCart:r,products:i}=vt(),o=nr(),[l,d]=v.useState([]),[m,p]=v.useState([]),[f,b]=v.useState(""),[w,N]=v.useState(""),[R,P]=v.useState("newest"),[_,O]=v.useState(!1),[L,$]=v.useState(!1),[M,te]=v.useState(null);v.useEffect(()=>{const j=localStorage.getItem("vaultItems");if(j){const S=JSON.parse(j).filter(D=>D.isActive);d(S),p(S)}},[]),v.useEffect(()=>{let j=l;f&&(j=j.filter(S=>S.productName.toLowerCase().includes(f.toLowerCase()))),w&&(j=j.filter(S=>S.productName.toLowerCase().includes(w.toLowerCase()))),j.sort((S,D)=>{switch(R){case"price-low":return(t==="ZAR"?S.vaultPriceZAR:S.vaultPriceUSD)-(t==="ZAR"?D.vaultPriceZAR:D.vaultPriceUSD);case"price-high":return(t==="ZAR"?D.vaultPriceZAR:D.vaultPriceUSD)-(t==="ZAR"?S.vaultPriceZAR:S.vaultPriceUSD);case"newest":default:return new Date(D.goLiveDate).getTime()-new Date(S.goLiveDate).getTime()}}),p(j)},[l,f,w,R,t]);const H=s.membershipTier==="deluxe"||s.membershipTier==="Deluxe Boss"||s.membershipTier==="Deluxe Vault",U=j=>{if(!H){te(j),$(!0);return}const S=s.membershipMonths||0;let D=5;S>=3?D=10:S>=2&&(D=7);const I=JSON.parse(localStorage.getItem(`vaultPurchases_${s.id}_${new Date().getMonth()}`)||"[]");if(I.length>=D){const F=S>=3?"You have reached your monthly limit of 10 Vault items. Keep your subscription active for unlimited access!":`You have reached your limit of ${D} Vault items this month. Keep your subscription to unlock ${S>=2?"unlimited":"7"} items next month!`;alert(F);return}r({id:j.id,code:`VAULT-${j.id}`,name:j.productName,slug:`vault-${j.id}`,description:j.productName,price:t==="ZAR"?j.vaultPriceZAR:j.vaultPriceUSD,priceUSD:t==="USD"?j.vaultPriceUSD:j.vaultPriceZAR/18,costPrice:t==="ZAR"?j.vaultPriceZAR:j.vaultPriceUSD,category:"Vault",type:"Other",status:"published",stock:1,images:[j.productImage],tags:["vault"],createdAt:new Date().toISOString()},{quantity:1}),I.push(j.id),localStorage.setItem(`vaultPurchases_${s.id}_${new Date().getMonth()}`,JSON.stringify(I)),alert("Added to cart!")},E=j=>{$(!1),j==="subscribe"?o("/membership"):alert("Redirecting to regular product page...")};return e.jsxs("div",{className:"py-8 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(Ft,{className:"text-yellow-400",size:40}),e.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"THE SECRET VAULT"}),e.jsx("button",{onClick:()=>O(!_),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(tu,{size:20})})]}),e.jsx("p",{className:"font-architects text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"Exclusive Clearance & Samples for Deluxe Members."}),_&&e.jsxs("div",{className:"bg-zinc-900 border border-cyan-500/30 p-4 rounded-lg max-w-md mx-auto text-left",children:[e.jsx("h4",{className:"text-cyan-400 font-bold mb-2",children:"How The Vault Works:"}),e.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{className:"text-white",children:"Exclusive Access:"})," Only Deluxe Members can purchase."]}),e.jsxs("li",{children:[" ",e.jsx("strong",{className:"text-white",children:"Loyalty Limits:"})," Month 1 members can buy 5 items. Limits increase every month."]}),e.jsxs("li",{children:[" ",e.jsx("strong",{className:"text-white",children:"First Come, First Serve:"})," Stock is limited. Once it's gone, it's gone."]}),e.jsxs("li",{children:[" ",e.jsx("strong",{className:"text-white",children:"As-Is:"})," Items may be samples or have minor imperfections."]})]})]})]}),e.jsx("div",{className:"bg-zinc-900 border border-gray-700 p-4 rounded-xl sticky top-4 z-10",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Type"}),e.jsxs("select",{value:f,onChange:j=>b(j.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"earring",children:"Earrings"}),e.jsx("option",{value:"ring",children:"Rings"}),e.jsx("option",{value:"necklace",children:"Necklaces"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Color"}),e.jsxs("select",{value:w,onChange:j=>N(j.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[e.jsx("option",{value:"",children:"All Colors"}),e.jsx("option",{value:"silver",children:"Silver"}),e.jsx("option",{value:"gold",children:"Gold"}),e.jsx("option",{value:"rose",children:"Rose Gold"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Sort By"}),e.jsxs("select",{value:R,onChange:j=>P(j.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[e.jsx("option",{value:"newest",children:"Newest Added"}),e.jsx("option",{value:"price-low",children:"Price: Low to High"}),e.jsx("option",{value:"price-high",children:"Price: High to Low"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:m.map(j=>e.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-4 hover:border-cyan-500/50 transition-colors",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:j.productImage,className:"w-full h-48 object-cover rounded-lg mb-4",alt:""}),j.vaultStock<5&&e.jsx("div",{className:"absolute top-2 right-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded",children:"Almost Gone!"})]}),e.jsx("h3",{className:"text-white font-medium mb-2",children:j.productName}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-2xl font-bold text-green-400",children:t==="ZAR"?`R${j.vaultPriceZAR}`:`$${j.vaultPriceUSD}`}),e.jsx("span",{className:"text-gray-500 line-through text-sm",children:(()=>{const S=i.find(D=>D.id===j.productId);return S?t==="ZAR"?`R${S.price}`:`$${S.priceUSD}`:t==="ZAR"?`R${j.vaultPriceZAR*10}`:`$${j.vaultPriceUSD*10}`})()})]}),e.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:["Stock: ",j.vaultStock," left"]}),e.jsx("button",{onClick:()=>U(j),className:`w-full py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2 ${H?"bg-cyan-600 hover:bg-cyan-500 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:H?e.jsxs(e.Fragment,{children:[e.jsx(fl,{size:16}),"ADD TO CART"]}):e.jsxs(e.Fragment,{children:[e.jsx(da,{size:16})," UNLOCK PRICE"]})})]},j.id))}),m.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Ft,{size:64,className:"mx-auto mb-4 text-gray-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-400 mb-2",children:"The Vault is Empty"}),e.jsx("p",{className:"text-gray-500",children:"Check back later for exclusive deals!"})]}),L&&M&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>$(!1)}),e.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-md w-full shadow-[0_0_50px_rgba(236,72,153,0.4)]",children:[e.jsx("button",{onClick:()=>$(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:""}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(da,{size:48,className:"mx-auto mb-4 text-yellow-400"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Access Denied"}),e.jsx("p",{className:"text-gray-300",children:"You have found The Secret Vault, but you don't have the key!"})]}),e.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("img",{src:M.productImage,className:"w-16 h-16 rounded object-cover",alt:""}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:M.productName}),e.jsxs("p",{className:"text-green-400 font-bold",children:["Vault Price: ",t==="ZAR"?`R${M.vaultPriceZAR}`:`$${M.vaultPriceUSD}`]})]})]}),e.jsxs("p",{className:"text-sm text-gray-300",children:["This ",e.jsx("strong",{children:t==="ZAR"?`R${M.vaultPriceZAR}`:`$${M.vaultPriceUSD}`})," deal is reserved exclusively for Deluxe Members."]})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"Want this item? Subscribe to the Deluxe Package today and get instant access to the Vault, plus R150 monthly store credit."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>E("subscribe"),className:"w-full py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-lg transition-colors",children:"BECOME A DELUXE MEMBER - R199 / $25"}),e.jsx("button",{onClick:()=>E("payfull"),className:"w-full py-2 text-gray-400 hover:text-white text-sm underline",children:"No thanks, I'll pay full price"})]})]})]})]})},o3=()=>{const{user:s}=vt(),[t,r]=v.useState(""),[i,o]=v.useState([]),[l,d]=v.useState(null),[m,p]=v.useState(!1),[f,b]=v.useState(!1),[w,N]=v.useState(""),[R,P]=v.useState(7),[_,O]=v.useState(""),[L,$]=v.useState(!1),[M,te]=v.useState(0),[H,U]=v.useState([]),[E,j]=v.useState(null),[S,D]=v.useState(!1),[I,F]=v.useState(!0),[C,ee]=v.useState([]),ue=v.useRef(null),[Se,Pe]=v.useState(20),[ce,ye]=v.useState("all"),[je,K]=v.useState("all"),me=["Spoil Me","Basic","Premium","Deluxe Boss","Insider Club","Gold Member","Deluxe Vault"],se=async()=>{if(!l&&!_||!w||!R)return;let xe=l==null?void 0:l.id;if(!xe&&_)try{const Je=await zs("users",{filters:{email:_},limit:1});if(!Je||Je.length===0){alert("User not found with that email.");return}xe=Je[0].id}catch(Je){console.error("Error finding user:",Je),alert("Error finding user.");return}try{await sa("grantTrial",{userId:xe,plan:w,days:R}),alert("Trial granted successfully!"),b(!1),d(null),N(""),P(7),O("")}catch(Je){console.error("Error granting trial:",Je),alert("Failed to grant trial")}},ve=async()=>{if(l)try{await sa("adjustStoreCredit",{userId:l.id,amount:M}),alert("Store credit adjusted successfully!"),$(!1),d(null),te(0)}catch(xe){console.error("Error adjusting credit:",xe),alert("Failed to adjust credit")}},G=xe=>{switch(xe){case"active":return"text-green-400";case"trial":return"text-blue-400";case"expired":return"text-red-400";case"cancelled":return"text-gray-400";default:return"text-gray-400"}},Ie=xe=>{switch(xe){case"active":return e.jsx(Xa,{className:"w-4 h-4"});case"trial":return e.jsx(gn,{className:"w-4 h-4"});case"expired":return e.jsx(xp,{className:"w-4 h-4"});default:return e.jsx(xp,{className:"w-4 h-4"})}},be=async()=>{D(!0);try{const xe=await zs("users",{orderBy:{column:"created_at",ascending:!1},limit:20});U(xe||[]),F(((xe==null?void 0:xe.length)||0)===20)}catch(xe){console.error("Error loading users:",xe)}finally{D(!1)}},He=async()=>{if(!(!E||S)){D(!0);try{const xe=H.length,Je=await zs("users",{orderBy:{column:"created_at",ascending:!1},limit:20,offset:xe});U(wt=>[...wt,...Je||[]]),F(((Je==null?void 0:Je.length)||0)===20)}catch(xe){console.error("Error loading more:",xe)}finally{D(!1)}}},qe=async xe=>{if(r(xe),!xe){be();return}const Je=await zs("users",{filters:{email:xe},limit:20});U(Je||[]),F(!1)},at=xe=>{if(r(xe),!xe.trim()){ee([]);return}ue.current&&clearTimeout(ue.current),ue.current=setTimeout(()=>{(async()=>{try{const Lt=(await zs("users",{orderBy:{column:"created_at",ascending:!1},limit:50})||[]).map(ae=>ae.email).filter(ae=>ae&&ae.toLowerCase().includes(xe.toLowerCase())).slice(0,10);ee(Lt)}catch(wt){console.error("Failed to fetch suggestions:",wt),ee([])}})()},300)},Rt=async()=>{D(!0),ee([]);try{if(t){const Je=(await zs("users",{filters:{email:t},limit:Se})||[]).filter(wt=>!(ce==="ZA"&&(wt.country||"").toLowerCase()!=="south africa"||ce==="other"&&(wt.country||"").toLowerCase()==="south africa"||je==="buyers"&&(wt.ordersCount||0)<=0));U(Je),F(!1),Je.length===0&&alert("No users found matching these filters.")}else{const xe=await zs("users",{orderBy:{column:"created_at",ascending:!1},limit:Se}),Je=(xe||[]).filter(wt=>!(ce==="ZA"&&(wt.country||"").toLowerCase()!=="south africa"||ce==="other"&&(wt.country||"").toLowerCase()==="south africa"||je==="buyers"&&(wt.ordersCount||0)<=0));U(Je),F(((xe==null?void 0:xe.length)||0)===Se),Je.length===0&&alert("No users found matching these filters.")}}catch(xe){console.error("Error applying filters:",xe),xe.message.includes("requires an index")?alert("System Warning: This specific filter combination requires a new Database Index. Open Console (F12) and click the Firebase link."):alert("Failed to fetch. "+xe.message)}finally{D(!1)}};return v.useEffect(()=>{be()},[]),e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Member Management"}),e.jsx("p",{className:"text-gray-400",children:"Search users and manage their membership benefits"})]}),e.jsx("div",{className:"bg-zinc-900 p-6 rounded-lg border border-zinc-800 mb-8",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Search Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Start typing email...",value:t,onChange:xe=>at(xe.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white outline-none focus:border-gold"}),C.length>0&&e.jsx("div",{className:"absolute top-full left-0 w-full bg-zinc-800 border border-zinc-700 rounded-b shadow-xl z-50 max-h-40 overflow-y-auto",children:C.map(xe=>e.jsx("div",{onClick:()=>{r(xe),ee([]),qe(xe)},className:"p-2 hover:bg-zinc-700 cursor-pointer text-sm text-gray-300 border-b border-zinc-700/50",children:xe},xe))})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Region"}),e.jsxs("select",{value:ce,onChange:xe=>ye(xe.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white",children:[e.jsx("option",{value:"all",children:" All Regions"}),e.jsx("option",{value:"ZA",children:" South Africa"}),e.jsx("option",{value:"other",children:" International"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Activity"}),e.jsxs("select",{value:je,onChange:xe=>K(xe.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white",children:[e.jsx("option",{value:"all",children:"Everyone"}),e.jsx("option",{value:"buyers",children:" Buyers Only"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:Rt,disabled:S,className:"w-full bg-gold hover:bg-yellow-600 text-black font-bold p-3 rounded flex items-center justify-center gap-2 transition-all",children:S?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(pa,{size:18})," RUN SEARCH"]})})})]})}),i.length>0&&e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Search Results"}),e.jsx("div",{className:"space-y-3",children:i.map(xe=>e.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors cursor-pointer",onClick:()=>d(xe),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fn,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:xe.email}),e.jsx("p",{className:"text-gray-400 text-sm",children:xe.displayName||"No display name"})]})]}),e.jsxs("div",{className:`flex items-center gap-2 ${G(xe.membershipStatus||"none")}`,children:[Ie(xe.membershipStatus||"none"),e.jsx("span",{className:"text-sm capitalize",children:xe.membershipStatus||"None"})]})]}),xe.membershipTier&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(Ft,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-gray-300 text-sm",children:xe.membershipTier})]})]},xe.id))})]}),l&&e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-zinc-800 border border-cyan-500 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"User Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"User Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-300",children:[e.jsx("span",{className:"text-gray-400",children:"Email:"})," ",l.email]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("span",{className:"text-gray-400",children:"Name:"})," ",l.displayName||"N/A"]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:`ml-2 ${G(l.membershipStatus||"none")}`,children:l.membershipStatus||"None"})]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("span",{className:"text-gray-400",children:"Plan:"})," ",l.membershipTier||"None"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Store Credit"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-300",children:[e.jsx("span",{className:"text-gray-400",children:"Balance:"}),l.creditCurrency==="USD"?"$":"R",l.storeCredit||0]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("span",{className:"text-gray-400",children:"Currency:"})," ",l.creditCurrency||"ZAR"]})]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),e.jsx("button",{onClick:()=>$(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Adjust Credit"})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Grant Trial Membership"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Select Plan"}),e.jsxs("select",{value:w,onChange:xe=>N(xe.target.value),className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[e.jsx("option",{value:"",children:"Choose a plan..."}),me.map(xe=>e.jsx("option",{value:xe,children:xe},xe))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Trial Duration (Days)"}),e.jsx("input",{type:"number",value:R,onChange:xe=>P(parseInt(xe.target.value)),min:"1",max:"365",className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"User Email"}),e.jsx("input",{type:"email",value:_,onChange:xe=>O(xe.target.value),className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",placeholder:"Enter user email"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:se,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),e.jsx("button",{onClick:()=>b(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Adjust Store Credit"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Amount (use negative for deduction)"}),e.jsx("input",{type:"number",value:M,onChange:xe=>te(parseFloat(xe.target.value)),step:"0.01",className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500"})]})}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:ve,className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Adjust Credit"}),e.jsx("button",{onClick:()=>$(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[e.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[e.jsx(Ft,{size:20,className:"text-purple-400"}),"Membership Tiers & Benefits"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:"Spoil Me Package"}),e.jsx("span",{className:"text-xs bg-pink-900/30 text-pink-400 border border-pink-500/30 px-2 py-1 rounded",children:"Popular"})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Ultimate luxury experience with exclusive perks"}),e.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Monthly:"}),e.jsx("span",{className:"text-white",children:"R19"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),e.jsx("span",{className:"text-white",children:"R25/month"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Discount:"}),e.jsx("span",{className:"text-white",children:"5% OFF"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Weekly Giveaway:"}),e.jsx("span",{className:"text-white",children:"Win R500"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Spots:"}),e.jsx("span",{className:"text-green-400",children:"412/500 (88 left)"})]})]}),e.jsx("button",{onClick:()=>{N("Spoil Me"),b(!0)},className:"w-full py-2 bg-pink-600 hover:bg-pink-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),e.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:"Basic Package"}),e.jsx("span",{className:"text-xs bg-blue-900/30 text-blue-400 border border-blue-500/30 px-2 py-1 rounded",children:"Standard"})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Essential benefits for regular shoppers"}),e.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Monthly:"}),e.jsx("span",{className:"text-white",children:"R49"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),e.jsx("span",{className:"text-white",children:"R50/month"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Discount:"}),e.jsx("span",{className:"text-white",children:"20% OFF"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),e.jsx("span",{className:"text-white",children:"R100"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Weekly Drop:"}),e.jsx("span",{className:"text-white",children:"2x Entries"})]})]}),e.jsx("button",{onClick:()=>{N("Basic"),b(!0)},className:"w-full py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),e.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:"Premium Package"}),e.jsx("span",{className:"text-xs bg-green-900/30 text-green-400 border border-green-500/30 px-2 py-1 rounded",children:"Popular"})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Enhanced shopping experience"}),e.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Monthly:"}),e.jsx("span",{className:"text-white",children:"R99"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),e.jsx("span",{className:"text-white",children:"R100/month"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Discount:"}),e.jsx("span",{className:"text-white",children:"20% OFF"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Holiday Gifts:"}),e.jsx("span",{className:"text-white",children:"Free small gift"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),e.jsx("span",{className:"text-white",children:"R150"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),e.jsx("span",{className:"text-white",children:"Yes"})]})]}),e.jsx("button",{onClick:()=>{N("Premium"),b(!0)},className:"w-full py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),e.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:'Deluxe "Boss" Package'}),e.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-400 border border-yellow-500/30 px-2 py-1 rounded",children:"Elite"})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"VIP treatment with maximum benefits"}),e.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Monthly:"}),e.jsx("span",{className:"text-white",children:"R199"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),e.jsx("span",{className:"text-white",children:"R150/month"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Discount:"}),e.jsx("span",{className:"text-white",children:"20% OFF"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),e.jsx("span",{className:"text-white",children:"R300"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),e.jsx("span",{className:"text-white",children:"Yes"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Vault Access:"}),e.jsx("span",{className:"text-white",children:"Limited"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Spots:"}),e.jsx("span",{className:"text-green-400",children:"498/750 (252 left)"})]})]}),e.jsx("button",{onClick:()=>{N("Deluxe Boss"),b(!0)},className:"w-full py-2 bg-yellow-600 hover:bg-yellow-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),e.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:"Insider Club"}),e.jsx("span",{className:"text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-2 py-1 rounded",children:"High Demand"})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Early access to new products and promotions"}),e.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Monthly:"}),e.jsx("span",{className:"text-white",children:"$5.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),e.jsx("span",{className:"text-white",children:"$5.00/month"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Discount:"}),e.jsx("span",{className:"text-white",children:"5% OFF"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Weekly Giveaway:"}),e.jsx("span",{className:"text-white",children:"Win $50"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Spots:"}),e.jsx("span",{className:"text-green-400",children:"412/500 (88 left)"})]})]}),e.jsx("button",{onClick:()=>{N("Insider Club"),b(!0)},className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),e.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:"Gold Member"}),e.jsx("span",{className:"text-xs bg-orange-900/30 text-orange-400 border border-orange-500/30 px-2 py-1 rounded",children:"Critical"})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Gold standard benefits and rewards"}),e.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Monthly:"}),e.jsx("span",{className:"text-white",children:"$12.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),e.jsx("span",{className:"text-white",children:"$12.00/month"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Discount:"}),e.jsx("span",{className:"text-white",children:"20% OFF"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),e.jsx("span",{className:"text-white",children:"$20"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),e.jsx("span",{className:"text-white",children:"Yes"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Spots:"}),e.jsx("span",{className:"text-green-400",children:"485/500 (15 left)"})]})]}),e.jsx("button",{onClick:()=>{N("Gold Member"),b(!0)},className:"w-full py-2 bg-orange-600 hover:bg-orange-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),e.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700 col-span-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:'Deluxe "Vault" Access'}),e.jsx("span",{className:"text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-2 py-1 rounded",children:"Ultimate"})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Access to exclusive vault items with maximum benefits"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Monthly:"}),e.jsx("span",{className:"text-white",children:"$25.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),e.jsx("span",{className:"text-white",children:"$15.00/month"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Discount:"}),e.jsx("span",{className:"text-white",children:"20% OFF"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),e.jsx("span",{className:"text-white",children:"$40"})]})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),e.jsx("span",{className:"text-white",children:"Yes"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Vault Access:"}),e.jsx("span",{className:"text-white",children:"24hrs Early"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Monthly Giveaways:"}),e.jsx("span",{className:"text-white",children:"Entry"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Weekly Winners:"}),e.jsx("span",{className:"text-white",children:"Eligible"})]})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Loyalty Ladder:"}),e.jsx("span",{className:"text-white",children:"Month 1: 5 items"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400"}),e.jsx("span",{className:"text-white",children:"Month 2: 7 items"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400"}),e.jsx("span",{className:"text-white",children:"Month 3: 10 items"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400"}),e.jsx("span",{className:"text-white",children:"Month 4+: Unlimited"})]})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Spots:"}),e.jsx("span",{className:"text-green-400",children:"498/750 (252 left)"})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Shop clearance, samples, and slight imperfections starting at R10. Sold as-is."})]})]}),e.jsx("button",{onClick:()=>{N("Deluxe Vault"),b(!0)},className:"w-full py-2 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]})]})]}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:["All Members (",H.length,")"]}),e.jsx("div",{className:"space-y-3",children:H.map(xe=>e.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors cursor-pointer",onClick:()=>d(xe),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fn,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:xe.email}),e.jsx("p",{className:"text-gray-400 text-sm",children:xe.displayName||xe.name||"No display name"})]})]}),e.jsxs("div",{className:`flex items-center gap-2 ${G(xe.membershipStatus||"none")}`,children:[Ie(xe.membershipStatus||"none"),e.jsx("span",{className:"text-sm capitalize",children:xe.membershipStatus||"None"})]})]}),xe.membershipTier&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(Ft,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-gray-300 text-sm",children:xe.membershipTier})]})]},xe.id))}),e.jsx("div",{className:"mt-6 flex justify-center",children:S?e.jsx("div",{className:"text-gold animate-pulse",children:"Loading members..."}):I&&!t&&e.jsx("button",{onClick:He,className:"px-6 py-2 bg-zinc-800 border border-zinc-700 hover:border-gold text-white rounded-full text-sm transition-all",children:"Load More Members"})})]})]})},Lr=({checked:s,onChange:t,className:r,children:i})=>e.jsx("button",{type:"button",onClick:t,className:`${r} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:i}),l3=()=>{const{user:s}=vt(),[t,r]=v.useState([]),[i,o]=v.useState([]),[l,d]=v.useState(!0),[m,p]=v.useState(""),[f,b]=v.useState([]),w=v.useRef(null),[N,R]=v.useState(null),[P,_]=v.useState(!1),[O,L]=v.useState(null),[$,M]=v.useState({dashboard:!0,products:!1,orders:!1,categories:!1,members:!1,users:!1,giftCards:!1,social:!1,affiliates:!1,winners:!1,expenses:!1,vault:!1,artists:!1}),[te,H]=v.useState("all"),[U,E]=v.useState("all"),[j,S]=v.useState(""),[D,I]=v.useState(!1),[F,C]=v.useState(null),[ee,ue]=v.useState("basic"),[Se,Pe]=v.useState(7),[ce,ye]=v.useState(1),[je,K]=v.useState(1),me=10,[se,ve]=v.useState(!1),[G,Ie]=v.useState(null),[be,He]=v.useState("none"),[qe,at]=v.useState(!1),[Rt,xe]=v.useState(null),[Je,wt]=v.useState("basic");v.useEffect(()=>{(async()=>{d(!0);try{try{const nt=await fetch("/api/users");if(nt.ok){const dt=await nt.json(),_t=dt.users||dt;r(_t),o(_t)}else{const dt=await zs("users",{orderBy:{column:"created_at",ascending:!1},limit:500});r(dt||[]),o(dt||[])}}catch(nt){console.warn("Failed to fetch users via API, falling back to supabase users table:",nt);const dt=await zs("users",{orderBy:{column:"created_at",ascending:!1},limit:500});r(dt||[]),o(dt||[])}}catch(nt){console.error("Error loading users:",nt)}finally{d(!1)}})()},[]),v.useEffect(()=>{let fe=t;m.trim()&&(fe=fe.filter(xt=>{var Kt,Bt,is,ds;return((Kt=xt.email)==null?void 0:Kt.toLowerCase().includes(m.toLowerCase()))||((Bt=xt.displayName)==null?void 0:Bt.toLowerCase().includes(m.toLowerCase()))||((is=xt.firstName)==null?void 0:is.toLowerCase().includes(m.toLowerCase()))||((ds=xt.lastName)==null?void 0:ds.toLowerCase().includes(m.toLowerCase()))})),te==="ZA"?fe=fe.filter(xt=>xt.country==="South Africa"):te==="other"&&(fe=fe.filter(xt=>xt.country!=="South Africa")),U==="buyers"&&(fe=fe.filter(xt=>(xt.totalOrders||0)>0)),j&&(fe=fe.filter(xt=>xt.membershipStatus===j)),fe.sort((xt,Kt)=>{var ds,De;if(xt.isActive===!1&&Kt.isActive!==!1)return-1;if(Kt.isActive===!1&&xt.isActive!==!1)return 1;const Bt=((ds=xt.createdAt)==null?void 0:ds.seconds)||0;return(((De=Kt.createdAt)==null?void 0:De.seconds)||0)-Bt});const nt=(ce-1)*me,dt=nt+me,_t=fe.slice(nt,dt);o(_t),K(Math.ceil(fe.length/me))},[m,te,U,j,t,ce]);const Lt=async fe=>{try{await sa("deleteUser",{userId:fe,should_soft_delete:!1});const nt=t.filter(dt=>dt.id!==fe);r(nt),o(nt.filter(dt=>{var _t,xt,Kt,Bt;return!m.trim()||((_t=dt.email)==null?void 0:_t.toLowerCase().includes(m.toLowerCase()))||((xt=dt.displayName)==null?void 0:xt.toLowerCase().includes(m.toLowerCase()))||((Kt=dt.firstName)==null?void 0:Kt.toLowerCase().includes(m.toLowerCase()))||((Bt=dt.lastName)==null?void 0:Bt.toLowerCase().includes(m.toLowerCase()))})),alert("User permanently deleted successfully!"),R(null)}catch(nt){console.error("Error deleting user:",nt),alert("Failed to delete user. Please try again.")}},ae=fe=>{switch(fe){case"active":return"text-green-400";case"trial":return"text-blue-400";case"expired":return"text-red-400";case"cancelled":return"text-gray-400";default:return"text-gray-400"}},ge=fe=>{switch(fe){case"active":return"";case"trial":return"";case"expired":return"";case"cancelled":return"";default:return""}},ze=fe=>{M(nt=>({...nt,[fe]:!nt[fe]}))},we=fe=>{L(fe);const nt=fe.adminPermissions||{dashboard:!0,products:!1,orders:!1,categories:!1,members:!1,users:!1,giftCards:!1,social:!1,affiliates:!1,winners:!1,expenses:!1,vault:!1,artists:!1};M(nt),_(!0)},Ue=async()=>{if(O)try{await ta("users",O.id,{adminPermissions:$}),alert("Admin permissions updated successfully!"),_(!1),L(null)}catch(fe){console.error("Error updating admin permissions:",fe),alert("Failed to update permissions. Please try again.")}},et=fe=>{p(fe),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{ye(1)},300)};return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Users Management"}),e.jsx("p",{className:"text-gray-400",children:"Manage all registered users and their accounts"}),(s==null?void 0:s.email)==="spoilmevintagediy@gmail.com"&&e.jsxs("button",{onClick:()=>window.location.href="/#/artist-partnership",className:"mt-4 px-6 py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(Zo,{size:16}),"Apply as Artist (Test Flow)"]})]}),e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsx(pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:m,onChange:fe=>et(fe.target.value),className:"w-full pl-10 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(sw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsxs("select",{value:te,onChange:fe=>H(fe.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[e.jsx("option",{value:"all",children:"All Regions"}),e.jsx("option",{value:"ZA",children:"South Africa"}),e.jsx("option",{value:"other",children:"Other Regions"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsxs("select",{value:U,onChange:fe=>E(fe.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"buyers",children:"Buyers"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(La,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsxs("select",{value:j,onChange:fe=>S(fe.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"trial",children:"Trial"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(m||te!=="all"||U!=="all"||j)&&e.jsx("div",{className:"mt-2 text-center",children:e.jsx("button",{onClick:()=>{p(""),H("all"),E("all"),S("")},className:"text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Clear all filters"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 rounded-lg border bg-blue-900/30 text-blue-400 border-blue-500/20",children:e.jsx(Js,{size:20})})}),e.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Users"}),e.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:t.length})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 rounded-lg border bg-green-900/30 text-green-400 border-green-500/20",children:e.jsx(Ft,{size:20})})}),e.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Active Members"}),e.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:t.filter(fe=>fe.membershipStatus==="active").length})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 rounded-lg border bg-blue-900/30 text-blue-400 border-blue-500/20",children:e.jsx(La,{size:20})})}),e.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Trial Users"}),e.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:t.filter(fe=>fe.membershipStatus==="trial").length})]}),e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 rounded-lg border bg-gray-900/30 text-gray-400 border-gray-500/20",children:e.jsx(Fn,{size:20})})}),e.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Free Users"}),e.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:t.filter(fe=>!fe.membershipTier).length})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[e.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[e.jsx(Js,{size:20,className:"text-blue-400"}),"All Users (",i.length,")"]}),l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Loading users..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.map(fe=>e.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:fe.firstName&&fe.lastName?`${fe.firstName.charAt(0)}${fe.lastName.charAt(0)}`.toUpperCase():fe.displayName?fe.displayName.charAt(0).toUpperCase():fe.email.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-white flex items-center gap-2",children:[fe.firstName&&fe.lastName?`${fe.firstName} ${fe.lastName}`:fe.displayName||"No Name",fe.isActive===!1&&e.jsx(gi,{size:16,className:"text-red-500"}),fe.membershipTier&&e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-yellow-900/30 text-yellow-400",children:fe.membershipTier}),fe.email==="spoilmevintagediy@gmail.com"&&e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-red-900/30 text-red-400 font-bold",children:"OWNER"})]}),e.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-1",children:[e.jsx(bc,{size:12}),fe.email]}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[fe.country&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(vc,{size:10}),fe.country]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{children:ge(fe.membershipStatus||"none")}),e.jsx("span",{className:ae(fe.membershipStatus||"none"),children:fe.membershipStatus||"Free User"})]}),fe.createdAt&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(La,{size:10}),new Date(fe.createdAt.seconds*1e3).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[fe.email==="spoilmevintagediy@gmail.com"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{Ie(fe),He(fe.artistStatus||"none"),ve(!0)},className:"px-3 py-1 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[e.jsx(Zo,{size:12}),"Artist"]}),e.jsxs("button",{onClick:()=>{xe(fe),wt(fe.membershipTier||"basic"),at(!0)},className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[e.jsx(Ft,{size:12}),"Membership"]})]}),e.jsxs("button",{onClick:()=>{C(fe),ue("basic"),Pe(7),I(!0)},className:"px-3 py-1 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[e.jsx(La,{size:12}),"Grant Trial"]}),e.jsxs("button",{onClick:()=>we(fe),className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[e.jsx(Ft,{size:12}),"Admin"]}),e.jsxs("button",{onClick:()=>R(fe.id),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[e.jsx(zn,{size:12}),"Delete"]})]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[e.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[e.jsx("div",{className:"text-gray-400",children:"Store Credit"}),e.jsxs("div",{className:"text-white font-bold",children:[fe.creditCurrency==="USD"?"$":"R",fe.storeCredit||0]})]}),e.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[e.jsx("div",{className:"text-gray-400",children:"Loyalty Points"}),e.jsx("div",{className:"text-white font-bold",children:fe.loyaltyPoints||0})]}),e.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[e.jsx("div",{className:"text-gray-400",children:"Orders"}),e.jsx("div",{className:"text-white font-bold",children:fe.totalOrders||0})]}),e.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[e.jsx("div",{className:"text-gray-400",children:"Gender"}),e.jsx("div",{className:"text-white font-bold",children:fe.gender||"Not set"})]})]})]},fe.id))}),i.length===0&&!l&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:m?"No users found matching your search.":"No users found in the system."})]})]}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{onClick:()=>ye(fe=>Math.max(fe-1,1)),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-l-lg",disabled:ce===1,children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 bg-gray-800 text-white",children:["Page ",ce," of ",je]}),e.jsx("button",{onClick:()=>ye(fe=>Math.min(fe+1,je)),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-r-lg",disabled:ce===je,children:"Next"})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-900/50 text-red-500 rounded-lg",children:e.jsx(gi,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Delete User"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"This action cannot be undone."})]})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to delete this user? This will permanently remove their account and all associated data."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Lt(N),className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white font-medium rounded-lg transition-colors",children:"Delete User"}),e.jsx("button",{onClick:()=>R(null),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),P&&O&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-900/50 text-blue-500 rounded-lg",children:e.jsx(Ft,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Admin Permissions"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Manage user permissions"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Dashboard Access"}),e.jsxs(Lr,{checked:$.dashboard,onChange:()=>ze("dashboard"),className:`${$.dashboard?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable dashboard access"}),e.jsx("span",{className:`${$.dashboard?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Products Management"}),e.jsxs(Lr,{checked:$.products,onChange:()=>ze("products"),className:`${$.products?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable products management"}),e.jsx("span",{className:`${$.products?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Orders Management"}),e.jsxs(Lr,{checked:$.orders,onChange:()=>ze("orders"),className:`${$.orders?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable orders management"}),e.jsx("span",{className:`${$.orders?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Categories Management"}),e.jsxs(Lr,{checked:$.categories,onChange:()=>ze("categories"),className:`${$.categories?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable categories management"}),e.jsx("span",{className:`${$.categories?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Members Management"}),e.jsxs(Lr,{checked:$.members,onChange:()=>ze("members"),className:`${$.members?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable members management"}),e.jsx("span",{className:`${$.members?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Users Management"}),e.jsxs(Lr,{checked:$.users,onChange:()=>ze("users"),className:`${$.users?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable users management"}),e.jsx("span",{className:`${$.users?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Gift Cards Management"}),e.jsxs(Lr,{checked:$.giftCards,onChange:()=>ze("giftCards"),className:`${$.giftCards?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable gift cards management"}),e.jsx("span",{className:`${$.giftCards?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Social Media Management"}),e.jsxs(Lr,{checked:$.social,onChange:()=>ze("social"),className:`${$.social?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable social media management"}),e.jsx("span",{className:`${$.social?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Affiliates Management"}),e.jsxs(Lr,{checked:$.affiliates,onChange:()=>ze("affiliates"),className:`${$.affiliates?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable affiliates management"}),e.jsx("span",{className:`${$.affiliates?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Winners Management"}),e.jsxs(Lr,{checked:$.winners,onChange:()=>ze("winners"),className:`${$.winners?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable winners management"}),e.jsx("span",{className:`${$.winners?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Expenses Management"}),e.jsxs(Lr,{checked:$.expenses,onChange:()=>ze("expenses"),className:`${$.expenses?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable expenses management"}),e.jsx("span",{className:`${$.expenses?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Vault Access"}),e.jsxs(Lr,{checked:$.vault,onChange:()=>ze("vault"),className:`${$.vault?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable vault access"}),e.jsx("span",{className:`${$.vault?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Artists Management"}),e.jsxs(Lr,{checked:$.artists,onChange:()=>ze("artists"),className:`${$.artists?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[e.jsx("span",{className:"sr-only",children:"Enable artists management"}),e.jsx("span",{className:`${$.artists?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:Ue,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Permissions"}),e.jsx("button",{onClick:()=>_(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),D&&F&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-900/50 text-green-500 rounded-lg",children:e.jsx(La,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Trial User Settings"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Manage trial user details"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Trial Plan"}),e.jsxs("select",{value:ee,onChange:fe=>ue(fe.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500",children:[e.jsx("option",{value:"basic",children:"Basic Plan"}),e.jsx("option",{value:"premium",children:"Premium Plan"}),e.jsx("option",{value:"deluxe",children:"Deluxe Plan"}),e.jsx("option",{value:"insider",children:"Insider Club"}),e.jsx("option",{value:"gold",children:"Gold Member"}),e.jsx("option",{value:"spoilme",children:"Spoil Me"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Trial Duration (days)"}),e.jsx("input",{type:"number",min:"1",value:Se,onChange:fe=>Pe(Number(fe.target.value)),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500"})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:async()=>{try{await sa("grantTrial",{userId:F.id,plan:ee,days:Se}),alert("Trial granted successfully!"),I(!1),C(null),window.location.reload()}catch(fe){console.error("Error granting trial:",fe),alert("Failed to grant trial. Please try again.")}},className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),e.jsx("button",{onClick:()=>I(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),se&&G&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-900/50 text-purple-500 rounded-lg",children:e.jsx(Zo,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Artist Status"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Manage artist approval status"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Current Status"}),e.jsx("span",{className:`text-sm font-medium ${be==="approved"?"text-green-400":be==="rejected"?"text-red-400":"text-yellow-400"}`,children:be.charAt(0).toUpperCase()+be.slice(1)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>He("approved"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${be==="approved"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[e.jsx(Zo,{size:16}),"Approve Artist"]}),e.jsxs("button",{onClick:()=>He("rejected"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${be==="rejected"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[e.jsx(zn,{size:16}),"Reject Artist"]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:async()=>{try{await sa("updateArtistStatus",{userId:G.id,status:be}),alert("Artist status updated successfully!"),ve(!1),Ie(null),window.location.reload()}catch(fe){console.error("Error updating artist status:",fe),alert("Failed to update artist status. Please try again.")}},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Changes"}),e.jsx("button",{onClick:()=>ve(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),qe&&Rt&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-yellow-900/50 text-yellow-500 rounded-lg",children:e.jsx(Ft,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Membership Tier"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Manage user membership tier"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Current Tier"}),e.jsx("span",{className:"text-sm font-medium text-yellow-400",children:Je.charAt(0).toUpperCase()+Je.slice(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Change to"}),e.jsxs("select",{value:Je,onChange:fe=>wt(fe.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500",children:[e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"premium",children:"Premium"}),e.jsx("option",{value:"deluxe",children:"Deluxe"})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:async()=>{try{await sa("updateMembershipTier",{userId:Rt.id,tier:Je}),alert("Membership tier updated successfully!"),at(!1),xe(null),window.location.reload()}catch(fe){console.error("Error updating membership tier:",fe),alert("Failed to update membership tier. Please try again.")}},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Changes"}),e.jsx("button",{onClick:()=>at(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})})]})},c3=()=>{const{affiliateCode:s}=ul(),{products:t,currency:r,addToCart:i,toggleWishlist:o}=vt(),[l,d]=v.useState(null),[m,p]=v.useState([]),[f,b]=v.useState(!0);v.useEffect(()=>{s&&(async()=>{try{const _={code:s,name:"Sarah Johnson",currency:"ZAR",storeConfig:{products:["product1","product2","product3","product4","product5"],strategy:{discount:10,commission:15},currency:"ZAR"}};d(_);const O=t.filter($=>_.storeConfig.products.includes($.id));p(O);const L={code:_.code,discountPercent:_.storeConfig.strategy.discount,commissionPercent:_.storeConfig.strategy.commission,currency:_.currency,expires:Date.now()+720*60*60*1e3};localStorage.setItem("spoilme_referral",JSON.stringify(L))}catch(_){console.error("Error loading affiliate store:",_)}finally{b(!1)}})()},[s,t]);const w=P=>{var O;if(!((O=l==null?void 0:l.storeConfig)!=null&&O.strategy))return P.price;const _=P.price*(l.storeConfig.strategy.discount/100);return P.price-_},N=P=>{var O;if(!((O=l==null?void 0:l.storeConfig)!=null&&O.strategy))return P.priceUSD;const _=P.priceUSD*(l.storeConfig.strategy.discount/100);return P.priceUSD-_},R=P=>{i(P,{quantity:1,price:w(P),priceUSD:N(P)})};return f?e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-pink-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading VIP store..."})]})}):!l||m.length===0?e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"VIP Store Not Found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"This affiliate store is not available or has been deactivated."}),e.jsx(We,{to:"/",className:"px-6 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg",children:"Shop Regular Store"})]})}):e.jsxs("div",{className:"min-h-screen bg-zinc-950",children:[e.jsx("div",{className:"bg-gradient-to-r from-pink-900/20 to-purple-900/20 border-b border-gray-800",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-2 rounded-full text-sm font-bold mb-4",children:[e.jsx(jc,{size:16})," VIP ACCESS"]}),e.jsxs("h1",{className:"text-4xl md:text-6xl font-cherry text-white mb-4",children:["Welcome to ",l.name,"'s VIP Collection"]}),e.jsxs("p",{className:"text-xl text-gray-300 mb-6",children:["Exclusive ",l.storeConfig.strategy.discount,"% OFF everything in this curated collection"]}),e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-xl p-4 inline-block",children:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[e.jsx(cw,{size:20}),e.jsxs("span",{className:"font-bold",children:[l.storeConfig.strategy.discount,"% Discount Applied Automatically"]})]})})]})})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:m.map(P=>e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl overflow-hidden hover:border-pink-500/50 transition-all group",children:[e.jsxs("div",{className:"relative",children:[e.jsx(We,{to:`/product/${P.slug}`,children:e.jsx("img",{src:P.images[0],alt:P.name,className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs("div",{className:"bg-pink-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:[l.storeConfig.strategy.discount,"% OFF"]})}),e.jsx("button",{onClick:()=>o(P.id),className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(of,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx(We,{to:`/product/${P.slug}`,children:e.jsx("h3",{className:"text-lg font-bold text-white mb-2 hover:text-pink-400 transition-colors",children:P.name})}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:P.category}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((_,O)=>e.jsx(_r,{size:14,fill:"currentColor"},O))}),e.jsx("span",{className:"text-sm text-gray-400",children:"(4.8)"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("span",{className:"text-lg font-bold text-green-400",children:r==="ZAR"?`R${w(P)}`:`$${N(P)}`}),e.jsx("span",{className:"text-sm text-gray-500 line-through",children:r==="ZAR"?`R${P.price}`:`$${P.priceUSD}`})]}),e.jsxs("button",{onClick:()=>R(P),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(fl,{size:18}),"Add to Cart"]})]})]},P.id))}),e.jsx("div",{className:"mt-16 text-center",children:e.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-2xl p-8 max-w-2xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Didn't find what you love?"}),e.jsxs("p",{className:"text-gray-400 mb-6",children:["Browse our full collection and enjoy ",l.storeConfig.strategy.discount,"% OFF on everything!"]}),e.jsxs(We,{to:"/",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl transition-all shadow-lg",children:["Browse Full Catalog ",e.jsx(rr,{size:20})]})]})})]})]})},d3={bronze:{max:15,options:[{d:5,c:10},{d:10,c:5}]},silver:{max:20,options:[{d:10,c:10},{d:15,c:5}]},gold:{max:25,options:[{d:10,c:15},{d:15,c:10},{d:20,c:5}]},platinum:{max:30,options:[{d:10,c:20},{d:15,c:15},{d:20,c:10},{d:25,c:5}]}},u3=s=>s>=10001?"platinum":s>=5001?"gold":s>=2001?"silver":"bronze",h3=()=>{var te,H;const{user:s,products:t,currency:r,updateUser:i}=vt(),[o,l]=v.useState([]),[d,m]=v.useState(""),[p,f]=v.useState(null),[b,w]=v.useState(!1),N=u3(((te=s.affiliateStats)==null?void 0:te.totalSalesValue)||0),R=d3[N],P=t.filter(U=>U.name.toLowerCase().includes(d.toLowerCase())||U.category.toLowerCase().includes(d.toLowerCase())),_=U=>{o.length<5&&!o.find(E=>E.id===U.id)&&l([...o,U])},O=U=>{l(o.filter(E=>E.id!==U))},L=async()=>{if(!(o.length!==5||!p)){w(!0);try{const U={products:o.map(E=>E.id),strategy:p,currency:s.affiliateCurrency,lastUpdated:new Date().toISOString()};await i({affiliateStoreConfig:U}),alert("Store configuration saved successfully!")}catch(U){console.error("Error saving store config:",U),alert("Failed to save store configuration.")}finally{w(!1)}}},$=U=>{if(!p)return U.price;const E=U.price*(p.d/100);return U.price-E},M=U=>{if(!p)return U.priceUSD;const E=U.priceUSD*(p.d/100);return U.priceUSD-E};return((H=s.affiliateStats)==null?void 0:H.status)!=="approved"?e.jsxs("div",{className:"max-w-4xl mx-auto py-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-400",children:"You need to be an approved affiliate to access this page."}),e.jsx(We,{to:"/affiliate",className:"inline-block mt-4 px-6 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg",children:"Go to Affiliate Program"})]}):e.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(We,{to:"/affiliate",className:"p-2 bg-zinc-800 hover:bg-zinc-700 rounded-lg",children:e.jsx(vi,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"VIP Store Builder"}),e.jsx("p",{className:"text-gray-400",children:"Create your personalized affiliate storefront with 5 curated products."})]})]}),e.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-yellow-900/20 rounded-lg text-yellow-400",children:e.jsx(jc,{size:24})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-white",children:["Your Current Tier: ",N.toUpperCase()]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Max Commission: ",R.max,"% | Available Strategies: ",R.options.length]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:R.options.map((U,E)=>e.jsx("button",{onClick:()=>f(U),className:`p-4 rounded-lg border transition-all ${(p==null?void 0:p.d)===U.d&&(p==null?void 0:p.c)===U.c?"bg-pink-900/20 border-pink-500 text-pink-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold mb-1",children:[U.d,"% OFF / ",U.c,"% Commission"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Give customers ",U.d,"% discount, earn ",U.c,"% commission"]})]})},E))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["Select 5 Products (",o.length,"/5)"]}),e.jsxs("div",{className:"relative",children:[e.jsx(pa,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:d,onChange:U=>m(U.target.value),className:"w-full bg-zinc-900 border border-gray-700 rounded-lg pl-10 pr-4 py-3 text-white focus:border-pink-500 outline-none"})]})]}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto space-y-3 custom-scrollbar",children:P.slice(0,20).map(U=>{const E=o.find(j=>j.id===U.id);return e.jsx("div",{className:`p-4 rounded-lg border transition-all ${E?"bg-pink-900/10 border-pink-500":"bg-zinc-900 border-gray-800"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:U.images[0],alt:U.name,className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-white text-sm",children:U.name}),e.jsx("p",{className:"text-xs text-gray-400",children:U.category}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-sm font-bold text-green-400",children:r==="ZAR"?`R${U.price}`:`$${U.priceUSD}`}),p&&e.jsxs("span",{className:"text-xs text-pink-400",children:[" ",r==="ZAR"?`R${$(U)}`:`$${M(U)}`]})]})]}),e.jsx("button",{onClick:()=>E?O(U.id):_(U),className:`p-2 rounded-lg transition-all ${E?"bg-red-600 hover:bg-red-500 text-white":o.length>=5?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-pink-600 hover:bg-pink-500 text-white"}`,disabled:!E&&o.length>=5,children:E?e.jsx(aw,{size:16}):e.jsx(dr,{size:16})})]})},U.id)})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Your VIP Store Preview"}),e.jsx("p",{className:"text-sm text-gray-400",children:"This is how your storefront will appear to customers visiting your affiliate link."})]}),o.length===0?e.jsxs("div",{className:"bg-zinc-900/50 border border-dashed border-gray-700 rounded-xl p-8 text-center",children:[e.jsx(jc,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:"No Products Selected"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Choose 5 products from the left to build your VIP store."})]}):e.jsxs("div",{className:"space-y-4",children:[o.map(U=>e.jsx("div",{className:"bg-zinc-900 border border-gray-800 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:U.images[0],alt:U.name,className:"w-20 h-20 rounded-lg object-cover border border-gray-700"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-white",children:U.name}),e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:U.category}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500 line-through",children:r==="ZAR"?`R${U.price}`:`$${U.priceUSD}`}),e.jsx("span",{className:"text-green-400 font-bold ml-2",children:r==="ZAR"?`R${$(U)}`:`$${M(U)}`})]}),p&&e.jsxs("div",{className:"text-xs bg-pink-900/20 text-pink-400 px-2 py-1 rounded",children:[p.d,"% OFF"]})]})]})]})},U.id)),o.length===5&&p&&e.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-full",children:e.jsx(il,{size:20,className:"text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-green-400",children:"Store Ready!"}),e.jsxs("p",{className:"text-sm text-green-300",children:["Your VIP store is configured. Customers will see ",p.d,"% off these products and you'll earn ",p.c,"% commission."]})]})]}),e.jsx("button",{onClick:L,disabled:b,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:opacity-50 text-white font-bold rounded-lg transition-all",children:b?"Saving...":"Save Store Configuration"})]})]})]})]})]})},m3=()=>{const{user:s,products:t,logout:r,submitReview:i,currency:o}=vt(),l=nr(),[d,m]=v.useState(null),[p,f]=v.useState(5),[b,w]=v.useState(""),N=(s.notifications||[]).filter(j=>j.type==="review_request"&&!j.isRead),R=(s.notifications||[]).filter(j=>j.type==="gift_ready"),P=(s.notifications||[]).filter(j=>j.type==="gift_received"),_=(s.notifications||[]).filter(j=>(j.type==="system"||j.type==="affiliate_msg")&&!j.isRead),O=(s.notifications||[]).filter(j=>j.type==="credit_received"||j.type==="credit_adjusted"),L=(s.notifications||[]).filter(j=>j.type==="trial_ended"),$=[...N,...R,...P,..._,...O,...L].sort((j,S)=>new Date(S.date).getTime()-new Date(j.date).getTime()),M=async()=>{!d||!d.productId||(await i(d.productId,p,b,d.id),w(""),f(5),m(null),alert("Review submitted! You earned 100 Loyalty Points."))},te=j=>{if(!j.voucherData)return;const{code:S,amount:D,meta:I}=j.voucherData,F=`${window.location.origin}/#/?voucher=${S}`,C=`Hey ${I.recipientName}! 

${I.senderName} sent you a Spoil Me Vintage Gift Voucher worth R${D}!

"${I.message}"

Redeem it here:
${F}`,ee=I.whatsappNumber?I.whatsappNumber.replace(/[^0-9]/g,""):"",ue=ee?`https://wa.me/${ee}?text=${encodeURIComponent(C)}`:`https://wa.me/?text=${encodeURIComponent(C)}`;window.open(ue,"_blank")},H=j=>{window.location.href=`/#/?voucher=${j}`};if(!s.email)return l("/login"),null;const U=j=>{switch(j){case"review_request":return e.jsx(_r,{className:"text-yellow-500",size:20});case"gift_ready":return e.jsx(vs,{className:"text-pink-500",size:20});case"gift_received":return e.jsx(vs,{className:"text-green-500",size:20});case"system":return e.jsx(Qi,{className:"text-blue-500",size:20});case"affiliate_msg":return e.jsx(al,{className:"text-purple-500",size:20});case"credit_received":return e.jsx(Ps,{className:"text-green-500",size:20});case"credit_adjusted":return e.jsx(Ps,{className:"text-cyan-500",size:20});case"trial_ended":return e.jsx(zu,{className:"text-red-500",size:20});default:return e.jsx(Qi,{className:"text-gray-500",size:20})}},E=j=>{switch(j){case"review_request":return"border-yellow-500/30 bg-yellow-900/20";case"gift_ready":return"border-pink-500/30 bg-pink-900/20";case"gift_received":return"border-green-500/30 bg-green-900/20";case"system":return"border-blue-500/30 bg-blue-900/20";case"affiliate_msg":return"border-purple-500/30 bg-purple-900/20";case"credit_received":return"border-green-500/30 bg-green-900/20";case"credit_adjusted":return"border-cyan-500/30 bg-cyan-900/20";case"trial_ended":return"border-red-500/30 bg-red-900/20";default:return"border-gray-500/30 bg-gray-900/20"}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-[28px] font-cherry text-white",children:["Welcome, ",s.name||s.firstName||"Valued Customer"]}),e.jsx("p",{className:"text-[14px] font-architects text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-yellow-400 italic mb-8",children:"This is where we communicate with you, deliver your gift vouchers, and share all important notifications and updates."})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx(Qi,{size:32,className:"text-blue-500"}),"Your Notifications Center"]}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Stay updated with your account activity, rewards, and exclusive offers"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:$.length}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Notifications"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_r,{className:"text-yellow-500",size:16}),e.jsx("span",{className:"text-sm text-gray-400",children:"Pending Reviews"})]}),e.jsx("div",{className:"text-xl font-bold text-white",children:N.length})]}),e.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(vs,{className:"text-pink-500",size:16}),e.jsx("span",{className:"text-sm text-gray-400",children:"Gifts"})]}),e.jsx("div",{className:"text-xl font-bold text-white",children:R.length+P.length})]}),e.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ps,{className:"text-green-500",size:16}),e.jsx("span",{className:"text-sm text-gray-400",children:"Credits"})]}),e.jsx("div",{className:"text-xl font-bold text-white",children:O.length})]}),e.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qi,{className:"text-blue-500",size:16}),e.jsx("span",{className:"text-sm text-gray-400",children:"System"})]}),e.jsx("div",{className:"text-xl font-bold text-white",children:_.length})]})]}),e.jsx("div",{className:"space-y-4",children:$.length===0?e.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-8 text-center",children:[e.jsx(Qi,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No notifications yet"}),e.jsx("p",{className:"text-gray-400",children:"When you have activity on your account, you'll see it here."})]}):$.map((j,S)=>e.jsx("div",{className:`p-6 rounded-xl border ${E(j.type)}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"shrink-0 mt-1",children:U(j.type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-white text-lg mb-1",children:j.title}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-3",children:j.message}),j.type==="review_request"&&j.productId&&e.jsxs("button",{onClick:()=>m(j),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(yp,{size:16})," Write Review"]}),j.type==="gift_ready"&&j.voucherData&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>te(j),className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(Lu,{size:16})," Send via WhatsApp"]}),e.jsxs("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/#/?voucher=${j.voucherData.code}`),className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(Mu,{size:16})," Copy Link"]})]}),j.type==="gift_received"&&j.voucherData&&e.jsxs("button",{onClick:()=>H(j.voucherData.code),className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(vs,{size:16})," Redeem Gift"]}),j.type==="trial_ended"&&e.jsxs(We,{to:"/membership",className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(rr,{size:16})," Renew Membership"]})]}),e.jsx("div",{className:"text-right text-xs text-gray-500 shrink-0",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gn,{size:12}),new Date(j.date).toLocaleDateString()]})})]})})]})},j.id||S))}),d&&d.type==="review_request"&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>m(null)}),e.jsxs("div",{className:"bg-zinc-900 border border-yellow-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(234,179,8,0.3)] animate-in zoom-in-95 duration-200",children:[e.jsx("button",{onClick:()=>m(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:e.jsx(ns,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-yellow-900/50 rounded-full border border-yellow-500 text-yellow-300",children:e.jsx(_r,{size:24})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Write a Review"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Rating"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(j=>e.jsx("button",{onClick:()=>f(j),className:`text-2xl ${j<=p?"text-yellow-500":"text-gray-600"}`,children:""},j))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Your Review"}),e.jsx("textarea",{value:b,onChange:j=>w(j.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-yellow-500 outline-none h-24",placeholder:"Share your thoughts about this product..."})]}),e.jsx("button",{onClick:M,disabled:!b.trim(),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold rounded-xl transition-all shadow-lg",children:"Submit Review (+100 Points)"})]})]})]})]})},p3=()=>{const[s,t]=v.useState(!1),[r,i]=v.useState("all"),[o,l]=v.useState(""),[d,m]=v.useState({title:"",body:"",imageUrl:"",link:"/#/vault"}),[p,f]=v.useState(""),b=async w=>{var N,R,P;if(w.preventDefault(),!!confirm("Are you sure you want to send this notification?")){t(!0);try{const _=await sa("send-push",{title:d.title,body:d.body,targetGroup:r,targetId:r==="individual"?o:null,image:d.imageUrl||null,url:d.link||"/"});if(_!=null&&_.success||(N=_==null?void 0:_.data)!=null&&N.success){const O=_.sentCount||((R=_.data)==null?void 0:R.sentCount)||0;alert(` Success! Sent to ${O} devices.`),m({...d,title:"",body:""})}else{const O=(_==null?void 0:_.message)||((P=_==null?void 0:_.data)==null?void 0:P.message)||"Unknown error";alert(` ${O}`)}}catch(_){console.error(_),alert(`Error: ${_.message}`)}finally{t(!1)}}};return e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg border border-zinc-800 max-w-2xl mx-auto mt-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-zinc-800 pb-4",children:[e.jsx(Qi,{className:"text-yellow-500",size:24}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Push Notification Center"})]}),e.jsxs("div",{className:"mt-6 p-4 border-t border-zinc-800",children:[e.jsx("label",{className:"text-gray-400 text-sm",children:"Test Notification (send to specific User ID)"}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Paste User UID here...",className:"flex-1 bg-black border border-zinc-700 text-white p-3 rounded",value:p,onChange:w=>f(w.target.value)}),e.jsx("button",{onClick:async()=>{if(!p){alert("Please enter a User ID");return}if(confirm(`Send test notification to ${p}?`))try{const w={user_id:p,type:"general",title:d.title||"Test Notification",message:d.body||"This is a test notification sent from Admin panel",link:d.link||"/"},{error:N}=await Ve.from("notifications").insert([w]);if(N){console.error("Insert notification failed:",N),alert("Failed to enqueue notification. See console.");return}alert("Test notification enqueued (server webhook will send it)")}catch(w){console.error("Send test notification error:",w),alert("Failed to send test notification. See console for details.")}},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:"Send Test Notification"})]})]}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm",children:"Target Group"}),e.jsx("div",{className:"mt-2 grid grid-cols-2 gap-3",children:[{key:"all",label:"Everyone",icon:e.jsx(sw,{size:18})},{key:"south_africa",label:"South Africa",icon:e.jsx(Js,{size:18})},{key:"international",label:"International",icon:e.jsx(Js,{size:18})},{key:"non_members",label:"Non-Members",icon:e.jsx(Js,{size:18})},{key:"affiliates",label:"Affiliates",icon:e.jsx(Js,{size:18})},{key:"artists",label:"Artists",icon:e.jsx(Js,{size:18})},{key:"individual",label:"Individual",icon:e.jsx(Fn,{size:18})}].map(w=>e.jsxs("button",{type:"button",onClick:()=>i(w.key),className:`p-3 rounded border flex items-center gap-2 ${r===w.key?"border-yellow-500 bg-yellow-900/20 text-white":"border-zinc-700 text-gray-400"}`,children:[w.icon,e.jsx("span",{className:"text-sm font-bold",children:w.label})]},w.key))})]}),r==="individual"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm",children:"User ID (UID)"}),e.jsx("input",{type:"text",placeholder:"Paste User UID here...",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:o,onChange:w=>l(w.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm",children:"Notification Title"}),e.jsx("input",{type:"text",placeholder:"e.g.  The Vault is Open!",required:!0,className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1 font-bold",value:d.title,onChange:w=>m({...d,title:w.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm",children:"Message Body"}),e.jsx("textarea",{placeholder:"e.g. New vintage stock just added. Tap to shop now.",required:!0,rows:3,className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:d.body,onChange:w=>m({...d,body:w.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm",children:"Deep Link (Optional)"}),e.jsx("input",{type:"text",placeholder:"e.g. /#/vault or /#/membership",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:d.link,onChange:w=>m({...d,link:w.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm",children:"Image URL (Optional)"}),e.jsx("input",{type:"text",placeholder:"https://...",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:d.imageUrl,onChange:w=>m({...d,imageUrl:w.target.value})})]})]}),e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-yellow-600 hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold py-4 rounded flex items-center justify-center gap-2 transition-colors",children:s?"Sending...":e.jsxs(e.Fragment,{children:[e.jsx(Lu,{size:20})," SEND NOTIFICATION"]})})]})]})},f3=()=>{const s=nr(),[t,r]=v.useState([]),[i,o]=v.useState(!0);v.useEffect(()=>{l()},[]);const l=async()=>{try{const d=await zs("custom_templates",{orderBy:{column:"created_at",ascending:!1}});r((d||[]).filter(m=>m.isActive!==!1))}catch(d){console.error("Error fetching templates:",d)}finally{o(!1)}};return i?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx("div",{className:"text-gold text-xl",children:"Loading custom pendants..."})}):e.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("button",{onClick:()=>s("/"),className:"p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700",children:e.jsx(vi,{size:24})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gold flex items-center gap-2",children:[e.jsx(As,{size:32}),"Customized Wire Wrapped Pendants"]}),e.jsx("p",{className:"text-gray-400",children:"Design your own unique wire-wrapped pendant"})]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create Your Perfect Pendant"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Choose from our selection of premium wire-wrapped pendant templates. Customize with your choice of stones, wire styles, and chain lengths to create a truly unique piece of jewelry."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ft,{size:16,className:"text-gold"}),e.jsx("span",{children:"Premium Materials"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(As,{size:16,className:"text-gold"}),e.jsx("span",{children:"Custom Design"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ft,{size:16,className:"text-gold"}),e.jsx("span",{children:"Handcrafted Quality"})]})]})]}),t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(As,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No Custom Templates Available"}),e.jsx("p",{className:"text-gray-500",children:"Check back soon for new designs!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(d=>e.jsxs("div",{className:"bg-zinc-900 rounded-lg overflow-hidden hover:bg-zinc-800 transition-colors cursor-pointer group",onClick:()=>s(`/customized-wire-wrapped-pendants/${d.id}`),children:[e.jsx("div",{className:"aspect-square bg-zinc-800 overflow-hidden",children:e.jsx("img",{src:d.mainImage,alt:d.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gold mb-2",children:d.name}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:d.description}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-lg font-semibold text-white",children:["From R",d.basePrice]}),e.jsx("button",{className:"px-4 py-2 bg-gold text-black font-bold rounded-lg hover:bg-yellow-500 transition-colors",children:"Customize"})]})]})]},d.id))})]})})},g3=()=>{var I,F,C;const{user:s}=vt(),[t,r]=v.useState([]),[i,o]=v.useState(!0),[l,d]=v.useState(!1),[m,p]=v.useState(!1),[f,b]=v.useState({name:"",basePrice:0,description:"",mainImage:"",stones:[],wireStyles:[],chainOptions:[],isActive:!0});v.useEffect(()=>{w()},[]);const w=async()=>{try{const ee=await zs("custom_templates",{orderBy:{column:"created_at",ascending:!1}});r(ee||[])}catch(ee){console.error("Error loading templates:",ee)}finally{o(!1)}},N=async()=>{if(!(!f.name||!f.description)){p(!0);try{const ee={...f,stones:f.stones||[],wireStyles:f.wireStyles||[],chainOptions:f.chainOptions||[]};f.id?await ta("custom_templates",f.id,ee):await ia("custom_templates",ee),await w(),d(!1),b({name:"",basePrice:0,description:"",mainImage:"",stones:[],wireStyles:[],chainOptions:[],isActive:!0})}catch(ee){console.error("Error saving template:",ee)}finally{p(!1)}}},R=async ee=>{if(confirm("Are you sure you want to delete this template?"))try{await Rp("custom_templates",ee),await w()}catch(ue){console.error("Error deleting template:",ue)}},P=async ee=>{const ue=`custom-templates/${Date.now()}-${ee.name}`;return await Ip("custom-templates",ue,ee)},_=async ee=>{var Se;const ue=(Se=ee.target.files)==null?void 0:Se[0];if(ue)try{const Pe=await P(ue);b(ce=>({...ce,mainImage:Pe}))}catch(Pe){console.error("Error uploading image:",Pe)}},O=()=>{b(ee=>({...ee,stones:[...ee.stones||[],{id:Date.now().toString(),name:"",image:"",priceModifier:0}]}))},L=(ee,ue,Se)=>{b(Pe=>{var ce;return{...Pe,stones:(ce=Pe.stones)==null?void 0:ce.map((ye,je)=>je===ee?{...ye,[ue]:Se}:ye)}})},$=ee=>{b(ue=>{var Se;return{...ue,stones:(Se=ue.stones)==null?void 0:Se.filter((Pe,ce)=>ce!==ee)}})},M=async(ee,ue)=>{var Pe;const Se=(Pe=ue.target.files)==null?void 0:Pe[0];if(Se)try{const ce=await P(Se);L(ee,"image",ce)}catch(ce){console.error("Error uploading stone image:",ce)}},te=()=>{b(ee=>({...ee,wireStyles:[...ee.wireStyles||[],{id:Date.now().toString(),name:"",imageFrameOnly:"",imageWithExample:"",priceModifier:0}]}))},H=(ee,ue,Se)=>{b(Pe=>{var ce;return{...Pe,wireStyles:(ce=Pe.wireStyles)==null?void 0:ce.map((ye,je)=>je===ee?{...ye,[ue]:Se}:ye)}})},U=ee=>{b(ue=>{var Se;return{...ue,wireStyles:(Se=ue.wireStyles)==null?void 0:Se.filter((Pe,ce)=>ce!==ee)}})},E=async(ee,ue,Se)=>{var ce;const Pe=(ce=Se.target.files)==null?void 0:ce[0];if(Pe)try{const ye=await P(Pe);H(ee,ue==="frame"?"imageFrameOnly":"imageWithExample",ye)}catch(ye){console.error("Error uploading wire image:",ye)}},j=()=>{b(ee=>({...ee,chainOptions:[...ee.chainOptions||[],""]}))},S=(ee,ue)=>{b(Se=>{var Pe;return{...Se,chainOptions:(Pe=Se.chainOptions)==null?void 0:Pe.map((ce,ye)=>ye===ee?ue:ce)}})},D=ee=>{b(ue=>{var Se;return{...ue,chainOptions:(Se=ue.chainOptions)==null?void 0:Se.filter((Pe,ce)=>ce!==ee)}})};return s!=null&&s.isAdmin?i?e.jsx("div",{className:"p-6 text-center",children:e.jsx(On,{className:"animate-spin mx-auto",size:24})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Custom Pendant Templates"}),e.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2",children:[e.jsx(dr,{size:20})," New Template"]})]}),e.jsx("div",{className:"grid gap-4",children:t.map(ee=>e.jsx("div",{className:"bg-zinc-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:ee.name}),e.jsx("p",{className:"text-gray-400",children:ee.description}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Base Price: R",ee.basePrice]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{b(ee),d(!0)},className:"p-2 text-blue-400 hover:text-blue-300",children:e.jsx(bp,{size:20})}),e.jsx("button",{onClick:()=>R(ee.id),className:"p-2 text-red-400 hover:text-red-300",children:e.jsx(zn,{size:20})})]})]})},ee.id))}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:f.id?"Edit Template":"New Template"}),e.jsx("button",{onClick:()=>d(!1),className:"p-2",children:e.jsx(ns,{size:24})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Template Name",value:f.name||"",onChange:ee=>b(ue=>({...ue,name:ee.target.value})),className:"p-2 bg-zinc-800 rounded"}),e.jsx("input",{type:"number",placeholder:"Base Price",value:f.basePrice||0,onChange:ee=>b(ue=>({...ue,basePrice:parseFloat(ee.target.value)})),className:"p-2 bg-zinc-800 rounded"})]}),e.jsx("textarea",{placeholder:"Description",value:f.description||"",onChange:ee=>b(ue=>({...ue,description:ee.target.value})),className:"w-full p-2 bg-zinc-800 rounded h-20"}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Main Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:_}),f.mainImage&&e.jsx("img",{src:f.mainImage,alt:"Main",className:"w-32 h-32 object-cover mt-2 rounded"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Stones"}),e.jsx("button",{onClick:O,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Stone"})]}),e.jsx("div",{className:"space-y-4",children:(I=f.stones)==null?void 0:I.map((ee,ue)=>e.jsxs("div",{className:"bg-zinc-800 p-4 rounded flex gap-4 items-center",children:[e.jsx("input",{type:"text",placeholder:"Stone Name",value:ee.name,onChange:Se=>L(ue,"name",Se.target.value),className:"flex-1 p-2 bg-zinc-700 rounded"}),e.jsx("input",{type:"number",placeholder:"Price Modifier",value:ee.priceModifier,onChange:Se=>L(ue,"priceModifier",parseFloat(Se.target.value)),className:"w-24 p-2 bg-zinc-700 rounded"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Se=>M(ue,Se)}),ee.image&&e.jsx("img",{src:ee.image,alt:ee.name,className:"w-16 h-16 object-cover rounded"}),e.jsx("button",{onClick:()=>$(ue),className:"p-2 text-red-400",children:e.jsx(ns,{size:20})})]},ee.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Wire Styles"}),e.jsx("button",{onClick:te,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Wire Style"})]}),e.jsx("div",{className:"space-y-4",children:(F=f.wireStyles)==null?void 0:F.map((ee,ue)=>e.jsxs("div",{className:"bg-zinc-800 p-4 rounded space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Wire Style Name",value:ee.name,onChange:Se=>H(ue,"name",Se.target.value),className:"w-full p-2 bg-zinc-700 rounded"}),e.jsx("input",{type:"number",placeholder:"Price Modifier",value:ee.priceModifier,onChange:Se=>H(ue,"priceModifier",parseFloat(Se.target.value)),className:"w-24 p-2 bg-zinc-700 rounded"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Frame Only Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Se=>E(ue,"frame",Se)}),ee.imageFrameOnly&&e.jsx("img",{src:ee.imageFrameOnly,alt:"Frame",className:"w-16 h-16 object-cover mt-2 rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"With Example Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Se=>E(ue,"example",Se)}),ee.imageWithExample&&e.jsx("img",{src:ee.imageWithExample,alt:"Example",className:"w-16 h-16 object-cover mt-2 rounded"})]})]}),e.jsx("button",{onClick:()=>U(ue),className:"p-2 text-red-400",children:e.jsx(ns,{size:20})})]},ee.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Chain Options"}),e.jsx("button",{onClick:j,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Chain"})]}),e.jsx("div",{className:"space-y-2",children:(C=f.chainOptions)==null?void 0:C.map((ee,ue)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Chain Length",value:ee,onChange:Se=>S(ue,Se.target.value),className:"flex-1 p-2 bg-zinc-700 rounded"}),e.jsx("button",{onClick:()=>D(ue),className:"p-2 text-red-400",children:e.jsx(ns,{size:20})})]},ue))})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gray-600 text-white rounded",children:"Cancel"}),e.jsxs("button",{onClick:N,disabled:m,className:"px-4 py-2 bg-pink-600 text-white rounded disabled:opacity-50 flex items-center gap-2",children:[m?e.jsx(On,{className:"animate-spin",size:16}):e.jsx(sc,{size:16}),"Save"]})]})]})]})})]}):e.jsx("div",{className:"p-6 text-center",children:"Access denied. Admin only."})},x3=()=>{const{id:s}=ul(),t=nr(),{user:r,addToCart:i}=vt(),[o,l]=v.useState(null),[d,m]=v.useState(!0),[p,f]=v.useState({stone:"",wireStyle:"",chainLength:""}),[b,w]=v.useState(!1);v.useEffect(()=>{s&&N()},[s]);const N=async()=>{try{const _=await _c("custom_templates",s);_?l(_):t("/customized-wire-wrapped-pendants")}catch(_){console.error("Error fetching template:",_),t("/customized-wire-wrapped-pendants")}finally{m(!1)}},R=()=>{if(!o)return 0;let _=o.basePrice;if(p.stone){const O=o.stones.find(L=>L.id===p.stone);O&&(_+=O.priceModifier)}if(p.wireStyle){const O=o.wireStyles.find(L=>L.id===p.wireStyle);O&&(_+=O.priceModifier)}return _},P=async()=>{if(!(!r||!o)){if(!p.stone||!p.wireStyle||!p.chainLength){alert("Please select all options before adding to cart.");return}w(!0);try{const _=o.stones.find($=>$.id===p.stone),O=o.wireStyles.find($=>$.id===p.wireStyle),L={id:`custom-${Date.now()}`,code:`CUSTOM-${Date.now()}`,name:`${o.name} - Custom`,slug:`custom-pendant-${Date.now()}`,description:`Custom pendant with ${_==null?void 0:_.name} stone, ${O==null?void 0:O.name} wire style, ${p.chainLength} chain`,price:R(),priceUSD:R()/18,costPrice:o.basePrice+((_==null?void 0:_.priceModifier)||0)+((O==null?void 0:O.priceModifier)||0),category:"Custom Pendants",type:"Pendant",status:"published",stock:1,images:[o.mainImage],tags:["custom","pendant","wire-wrapped"],createdAt:new Date().toISOString(),quantity:1,customOptions:{templateId:o.id,stone:_,wireStyle:O,chainLength:p.chainLength},isCustom:!0};await ia("cart_items",{user_id:r.uid,product_id:L.id,...L,added_at:new Date().toISOString()}),i(L),alert("Custom pendant added to cart!"),t("/cart")}catch(_){console.error("Error adding to cart:",_),alert("Failed to add to cart. Please try again.")}finally{w(!1)}}};return d?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx("div",{className:"text-gold text-xl",children:"Loading custom builder..."})}):o?e.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("button",{onClick:()=>t("/customized-wire-wrapped-pendants"),className:"p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700",children:e.jsx(vi,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gold",children:o.name}),e.jsx("p",{className:"text-gray-400",children:o.description})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square bg-zinc-900 rounded-2xl overflow-hidden",children:e.jsx("img",{src:o.mainImage,alt:o.name,className:"w-full h-full object-cover"})}),p.wireStyle&&e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Wire Style Preview"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:(()=>{const _=o.wireStyles.find(O=>O.id===p.wireStyle);return _?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Frame Only"}),e.jsx("img",{src:_.imageFrameOnly,alt:"Frame",className:"w-full aspect-square object-cover rounded"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"With Example"}),e.jsx("img",{src:_.imageWithExample,alt:"Example",className:"w-full aspect-square object-cover rounded"})]})]}):null})()})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(As,{size:20,className:"text-gold"}),"Choose Your Stone"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:o.stones.map(_=>e.jsxs("button",{onClick:()=>f(O=>({...O,stone:_.id})),className:`p-4 rounded-lg border-2 transition-colors ${p.stone===_.id?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:[e.jsx("img",{src:_.image,alt:_.name,className:"w-full aspect-square object-cover rounded mb-2"}),e.jsx("h4",{className:"font-semibold",children:_.name}),e.jsx("p",{className:"text-sm text-gray-400",children:_.priceModifier>0?`+R${_.priceModifier}`:"No extra cost"})]},_.id))})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ft,{size:20,className:"text-gold"}),"Choose Wire Style"]}),e.jsx("div",{className:"space-y-4",children:o.wireStyles.map(_=>e.jsx("button",{onClick:()=>f(O=>({...O,wireStyle:_.id})),className:`w-full p-4 rounded-lg border-2 transition-colors ${p.wireStyle===_.id?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-left",children:_.name}),e.jsx("p",{className:"text-sm text-gray-400",children:_.priceModifier>0?`+R${_.priceModifier}`:"No extra cost"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{src:_.imageFrameOnly,alt:"Frame",className:"w-16 h-16 object-cover rounded"}),e.jsx("img",{src:_.imageWithExample,alt:"Example",className:"w-16 h-16 object-cover rounded"})]})]})},_.id))})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Chain Length"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:o.chainOptions.map((_,O)=>e.jsx("button",{onClick:()=>f(L=>({...L,chainLength:_})),className:`p-4 rounded-lg border-2 transition-colors ${p.chainLength===_?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:e.jsx("span",{className:"font-semibold",children:_})},O))})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-lg",children:"Total Price:"}),e.jsxs("span",{className:"text-2xl font-bold text-gold",children:["R",R()]})]}),e.jsxs("button",{onClick:P,disabled:b||!p.stone||!p.wireStyle||!p.chainLength,className:"w-full bg-gold text-black font-bold py-4 rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(fl,{size:20}),b?"Adding to Cart...":"Add to Cart"]}),(!p.stone||!p.wireStyle||!p.chainLength)&&e.jsx("p",{className:"text-sm text-gray-400 mt-2 text-center",children:"Please select all options to continue"})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx("div",{className:"text-white text-xl",children:"Template not found"})})},y3=()=>{const{makerName:s}=ul(),{products:t}=vt(),r=s?decodeURIComponent(s):"",i=v.useMemo(()=>t.filter(b=>(b.madeBy||"Spoil Me Vintage").toLowerCase()===r.toLowerCase()),[t,r]),o=v.useMemo(()=>i.filter(b=>!b.isSoldOut&&b.stock>0&&b.status==="published"),[i]),l=v.useMemo(()=>i.reduce((b,w)=>b+(w.soldCount||0),0),[i]),{averageRating:d,totalReviews:m}=v.useMemo(()=>{let b=0,w=0;return i.forEach(R=>{R.reviews&&R.reviews.length>0&&R.reviews.forEach(P=>{b+=P.rating,w++})}),{averageRating:(w>0?b/w:0).toFixed(1),totalReviews:w}},[i]),p=i.length,f=o.length;return r?e.jsxs("div",{className:"min-h-screen pb-16",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(We,{to:"/catalog",className:"inline-flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx(vi,{size:20}),e.jsx("span",{children:"Back to Catalog"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-gray-800 rounded-2xl p-8 mb-8 shadow-xl",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-3xl shadow-lg",children:r.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-4xl font-cherry text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 mb-2",children:r}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Handcrafted jewelry and unique pieces made with love"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 mb-1",children:[e.jsx(_r,{size:16,fill:"currentColor"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Rating"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:d}),e.jsxs("div",{className:"text-xs text-gray-500",children:[m," reviews"]})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-400 mb-1",children:[e.jsx(ll,{size:16}),e.jsx("span",{className:"text-xs text-gray-400",children:"Sold"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:l}),e.jsx("div",{className:"text-xs text-gray-500",children:"items"})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-cyan-400 mb-1",children:[e.jsx(Qa,{size:16}),e.jsx("span",{className:"text-xs text-gray-400",children:"Available"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:f}),e.jsx("div",{className:"text-xs text-gray-500",children:"products"})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-400 mb-1",children:[e.jsx(Br,{size:16}),e.jsx("span",{className:"text-xs text-gray-400",children:"Total"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:p}),e.jsx("div",{className:"text-xs text-gray-500",children:"created"})]})]})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Qa,{size:24,className:"text-cyan-400"}),"Available Products"]}),o.length===0?e.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-lg p-8 text-center",children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"No products currently available from this maker."}),e.jsx(We,{to:"/catalog",className:"text-cyan-400 hover:text-cyan-300",children:"Browse All Products"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map(b=>e.jsx(to,{product:b},b.id))})]}),i.some(b=>b.isSoldOut||b.stock===0)&&e.jsxs("div",{className:"mt-12",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-400 mb-4 flex items-center gap-2",children:[e.jsx(Br,{size:20,className:"text-gray-500"}),"Previously Available"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 opacity-60",children:i.filter(b=>b.isSoldOut||b.stock===0).slice(0,8).map(b=>e.jsx(to,{product:b},b.id))})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Maker Not Found"}),e.jsx(We,{to:"/catalog",className:"text-cyan-400 hover:text-cyan-300",children:"Browse All Products"})]})})},b3=()=>{const[s,t]=v.useState("applications"),[r,i]=v.useState([]),[o,l]=v.useState({}),[d,m]=v.useState([]),[p,f]=v.useState([]),[b,w]=v.useState(!0),[N,R]=v.useState(null),P=async()=>{try{w(!0);const H=await zs("artist_applications",{orderBy:{column:"created_at",ascending:!1}});if(H){const j=H.map(S=>{const D=S.status==="approved"||S.status==="rejected"?S.status:"pending",I=S.created_at?new Date(S.created_at):S.submitted_at?new Date(S.submitted_at):new Date;return{id:S.id,uid:S.uid,name:S.name||S.first_name||"",surname:S.surname||S.last_name||"",artistTradeName:S.artistTradeName||S.shop_name||S.artist_trade_name||null,contactNumber:S.contactNumber||S.contact_number||"",email:S.email||"",productImages:S.productImages||S.product_images||[],product_images:S.product_images||void 0,id_document_url:S.id_document_url||null,country:S.country||null,website:S.website||null,status:D,submittedAt:I}});i(j),R(null)}else{R("Could not load artist applications from Supabase (table missing or schema mismatch). Falling back to local demo applications.");const j=localStorage.getItem("spv_artist_applications"),S=j?JSON.parse(j):[];i(S.map(D=>({id:D.id,...D,submittedAt:D.submittedAt?new Date(D.submittedAt):new Date(D.submitted_at||D.submitted||D.createdAt||D.created_at)})))}const U=await zs("artists");U?m(U||[]):R(j=>j||"Could not load `artists` table from Supabase.");const E=await zs("artist_products");E?f((E||[]).map(j=>({id:j.id,...j,createdAt:j.created_at?new Date(j.created_at):new Date,receivedAtHub:j.received_at_hub?new Date(j.received_at_hub):null,approvedAt:j.approved_at?new Date(j.approved_at):null}))):R(j=>j||"Could not load `artist_products` table from Supabase.")}catch(H){console.error("loadInitial failed",H),R((H==null?void 0:H.message)||String(H));const U=localStorage.getItem("spv_artist_applications"),j=(U?JSON.parse(U):[]).map(S=>({id:S.id,uid:S.uid||null,name:S.name||S.first_name||"",surname:S.surname||S.last_name||"",artistTradeName:S.artistTradeName||S.shop_name||null,contactNumber:S.contactNumber||S.contact_number||"",email:S.email||"",productImages:S.productImages||S.product_images||[],product_images:S.product_images||void 0,id_document_url:S.id_document_url||null,country:S.country||null,website:S.website||null,status:S.status==="approved"||S.status==="rejected"?S.status:"pending",submittedAt:S.submittedAt?new Date(S.submittedAt):new Date(S.submitted_at||S.submitted||S.createdAt||S.created_at)}));i(j)}finally{w(!1)}};v.useEffect(()=>{let H=null,U=null,E=null;return P(),H=Gd("artist_applications",async()=>{const S=(await zs("artist_applications",{orderBy:{column:"created_at",ascending:!1}})||[]).map(D=>{const I=D.status==="approved"||D.status==="rejected"?D.status:"pending",F=D.created_at?new Date(D.created_at):D.submitted_at?new Date(D.submitted_at):new Date;return{id:D.id,uid:D.uid,name:D.name||"",surname:D.surname||"",artistTradeName:D.artistTradeName||D.shop_name||null,contactNumber:D.contactNumber||"",email:D.email||"",productImages:D.productImages||D.product_images||[],product_images:D.product_images||void 0,id_document_url:D.id_document_url||null,country:D.country||null,website:D.website||null,status:I,submittedAt:F}});i(S)}),U=Gd("artists",async()=>{const j=await zs("artists");m(j||[])}),E=Gd("artist_products",async()=>{const j=await zs("artist_products");f((j||[]).map(S=>({id:S.id,...S,createdAt:S.created_at?new Date(S.created_at):new Date,receivedAtHub:S.received_at_hub?new Date(S.received_at_hub):null,approvedAt:S.approved_at?new Date(S.approved_at):null})))}),()=>{H&&H(),U&&U(),E&&E()}},[]),v.useEffect(()=>{let H=!0;const U=async()=>{try{const E={},j=r.filter(S=>S.id_document_url);await Promise.all(j.map(async S=>{try{const D=S.id_document_url,{data:I,error:F}=await Ve.storage.from("artist-applications").createSignedUrl(D,600);!F&&(I!=null&&I.signedUrl)&&(E[S.id]=I.signedUrl)}catch(D){console.warn("Signed URL fetch failed for",S.id,D)}})),H&&l(E)}catch(E){console.warn("Failed to fetch signed URLs",E)}};return r.length>0&&U(),()=>{H=!1}},[r]);const _=async H=>{try{const U={name:H.name||null,surname:H.surname||null,shop_name:H.artistTradeName||null,user_id:H.uid||null,country:H.country||null,website:H.website||null},{data:E,error:j}=await Ve.from("artists").insert([U]).select("*").single();j&&console.warn("Artist insert warning",j.message||j);const{error:S}=await Ve.from("artist_applications").update({status:"approved"}).eq("id",H.id);S&&console.warn("Application status update warning",S.message||S);try{await fetch("/.netlify/functions/send-push",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Artist Approved",body:`${H.name||""} ${H.surname||""} was approved.`})})}catch(D){console.warn("Notification send failed",D)}i(D=>D.filter(I=>I.id!==H.id)),console.log("Application approved",E||null)}catch(U){console.error("Approve failed, falling back to local update",U);const E=r.map(j=>j.id===H.id?{...j,status:"approved"}:j);i(E),localStorage.setItem("demo_artist_applications",JSON.stringify(E))}},O=async H=>{try{await ta("artist_applications",H.id,{status:"rejected"}),await ia("notifications",{userId:H.uid,type:"system",title:"Artist Application Update",message:"We regret to inform you that your artist application has been declined.",date:new Date().toISOString(),isRead:!1}),alert("Application rejected.")}catch(U){console.error("Error rejecting application:",U);try{const E=localStorage.getItem("spv_artist_applications");if(E){const j=JSON.parse(E).map(S=>S.id===H.id?{...S,status:"rejected",rejectedAt:new Date().toISOString()}:S);localStorage.setItem("spv_artist_applications",JSON.stringify(j)),i(j.map(S=>({...S,submittedAt:S.submittedAt?new Date(S.submittedAt):new Date(S.submitted_at||S.submitted||S.createdAt||S.created_at)}))),alert("Application rejected in local/demo storage (Supabase unavailable).");return}}catch(E){console.warn("Local fallback failed",E)}alert("Failed to reject application.")}},L=async H=>{try{await ta("artist_products",H.id,{status:"approved",approved_at:new Date().toISOString()});const U=d.find(E=>E.uid===H.artistId);U&&await ia("notifications",{userId:U.uid,type:"system",title:"Product Approved",message:`Your product "${H.name}" has been approved and is now live.`,date:new Date().toISOString(),isRead:!1}),alert("Product approved successfully!")}catch(U){console.error("Error approving product:",U),alert("Failed to approve product.")}},$=async H=>{try{await ta("artist_products",H.id,{status:"rejected"});const U=d.find(E=>E.uid===H.artistId);U&&await ia("notifications",{userId:U.uid,type:"system",title:"Product Rejected",message:`Your product "${H.name}" has been rejected. Please check the quality standards and re-submit.`,date:new Date().toISOString(),isRead:!1}),alert("Product rejected.")}catch(U){console.error("Error rejecting product:",U),alert("Failed to reject product.")}},M=async H=>{try{await ta("artist_products",H.id,{stock_level:(H.stockLevel||0)+1,status:"live",received_at_hub:new Date().toISOString()}),alert("Stock received and product updated.")}catch(U){console.error("Error updating stock:",U),alert("Failed to update stock.")}},te=async H=>{if(window.confirm("Are you sure you want to delete this product?"))try{await Rp("artist_products",H),alert("Product deleted successfully.")}catch(U){console.error("Error deleting product:",U),alert("Failed to delete product.")}};return b?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-white",children:"Loading artist data..."})}):e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Artist Hub"}),e.jsxs("div",{className:"flex space-x-1 mb-6 bg-zinc-900 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>t("applications"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="applications"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:["Applications (",r.filter(H=>H.status==="pending").length,")"]}),e.jsx("button",{onClick:()=>t("pricing"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="pricing"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Pricing Room"}),e.jsx("button",{onClick:()=>t("quality"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="quality"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Quality Control"}),e.jsx("button",{onClick:()=>t("stock"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="stock"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Stock Management"})]}),s==="applications"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-yellow-400",children:"Pending Applications"}),e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-3 rounded-lg",children:e.jsxs("p",{className:"text-yellow-400 text-sm font-medium flex items-center gap-2",children:[e.jsx(gi,{size:16}),"Reviews take up to 72 hours. Artists will be notified via email and in-app notification once their application is processed."]})}),r.filter(H=>H.status==="pending").length===0?e.jsx("div",{className:"text-gray-400",children:"No pending applications."}):r.filter(H=>H.status==="pending").map(H=>e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:H.artistTradeName||`${H.name||""} ${H.surname||""}`}),e.jsxs("p",{className:"text-gray-300",children:[H.email," ",H.contactNumber?`| ${H.contactNumber}`:""]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Applied: ",H.submittedAt?H.submittedAt.toLocaleString():""]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:async()=>{if(confirm("Approve this application? This will create an artist record."))try{await _(H)}catch(U){console.error("Approve action failed",U),alert("Failed to approve application.")}},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-500 transition-colors flex items-center gap-2",children:[e.jsx(Xa,{size:16})," Approve"]}),e.jsxs("button",{onClick:async()=>{if(confirm("Reject this application?"))try{await O(H)}catch(U){console.error("Reject action failed",U),alert("Failed to reject application.")}},className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-500 transition-colors flex items-center gap-2",children:[e.jsx(xp,{size:16})," Reject"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2",children:[H.id_document_url?e.jsx("div",{className:"col-span-1",children:o[H.id]?e.jsx("img",{src:o[H.id],alt:"ID document",className:"w-full h-40 object-contain rounded border border-zinc-700"}):e.jsx("div",{className:"w-full h-40 flex items-center justify-center bg-zinc-800 rounded border border-zinc-700 text-sm text-zinc-400",children:"No preview available"})}):null,Array.isArray(H.product_images||H.productImages)&&(H.product_images||H.productImages).slice(0,4).map((U,E)=>e.jsx("img",{src:U,alt:`Product ${E+1}`,className:"w-full h-40 object-cover rounded border border-zinc-700"},E))]})]},H.id)),e.jsx("h2",{className:"text-xl font-bold text-yellow-400 mt-8",children:"All Applications"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(H=>e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"font-bold text-white",children:[H.name," ",H.surname]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${H.status==="approved"?"bg-green-600":H.status==="rejected"?"bg-red-600":"bg-yellow-600"}`,children:H.status})]}),e.jsx("p",{className:"text-sm text-gray-400",children:H.email}),e.jsx("p",{className:"text-xs text-gray-500",children:H.submittedAt.toLocaleDateString()})]},H.id))})]}),s==="pricing"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-yellow-400 mb-4",children:"Pricing Room"}),e.jsx("div",{className:"text-gray-400",children:"Product pricing interface will be implemented here. Artists upload products, admin sets selling prices and RRP."})]}),s==="quality"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-yellow-400 mb-4",children:"Quality Control Hub"}),e.jsx("div",{className:"text-gray-400",children:"Quality inspection interface will be implemented here. Scan order IDs, pass/fail inspections."})]}),s==="stock"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-yellow-400",children:"Artist Stock Management"}),p.length===0?e.jsx("div",{className:"text-gray-400",children:"No products found. Encourage artists to upload products."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(H=>{var U;return e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-bold text-white",children:H.name}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${H.status==="approved"?"bg-green-600":H.status==="rejected"?"bg-red-600":"bg-yellow-600"}`,children:H.status})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Artist: ",(U=d.find(E=>E.uid===H.artistId))==null?void 0:U.shopName]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Stock Level: ",H.stockLevel]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{onClick:()=>L(H),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex-1",children:"Approve Product"}),e.jsx("button",{onClick:()=>$(H),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex-1",children:"Reject Product"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-white text-sm font-semibold mb-2",children:"Product Images"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:H.images.map((E,j)=>e.jsx("img",{src:E,alt:`Product Image ${j+1}`,className:"w-full h-20 object-cover rounded border border-zinc-700"},j))})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>M(H),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex-1",children:[e.jsx($n,{className:"w-5 h-5 mr-2"})," Receive Stock"]}),e.jsxs("button",{onClick:()=>te(H.id),className:"bg-red-800 text-white px-4 py-2 rounded-lg hover:bg-red-900 transition-colors flex-1",children:[e.jsx(MA,{className:"w-5 h-5 mr-2"})," Delete Product"]})]})]},H.id)})})]})]})},v3=()=>{const{currency:s,toggleCurrency:t,applyForArtist:r,user:i,isSupabaseConfigured:o,resendVerificationEmail:l,isDemoMode:d}=vt(),m=nr(),[p,f]=v.useState(!1),[b,w]=v.useState(null),[N,R]=v.useState(!1),[P,_]=v.useState(null),O=ra.useRef(!1);v.useEffect(()=>{O.current=N,N&&_(null)},[N]);const L=s==="USD",[$,M]=v.useState(""),[te,H]=v.useState([]),[U,E]=v.useState([]),[j,S]=v.useState(!1),[D,I]=v.useState(!1),[F,C]=v.useState(!1),[ee,ue]=v.useState(!1),[Se,Pe]=v.useState(""),[ce,ye]=v.useState(""),[je,K]=v.useState(!1),[me,se]=v.useState(!1),[ve,G]=v.useState(""),Ie=ge=>{M((i==null?void 0:i.artistTradeName)||""),w(ge||null),f(!0)},be=!i||i.id==="guest",He=async ge=>{ge.preventDefault(),C(!0);try{const{data:{user:ze}}=await Ve.auth.getUser();if(!ze){if(i&&i.id&&i.id!=="guest"&&i.email){if(console.warn("No Supabase auth session but user is logged in locally. Email not confirmed."),window.confirm(`Please verify your email (${i.email}) before applying.

Check your inbox for the verification link, or click OK to resend the verification email.`)){const fe=await l(i.email);alert(fe?"Verification email sent! Please check your inbox and click the link to verify, then try applying again.":"Failed to resend verification email. Please contact support.")}C(!1);return}if(d||!o){if(!j){alert("You must agree to the Terms and Conditions to apply."),C(!1);return}const et={id:`demo-${Date.now()}`,user_id:(i==null?void 0:i.id)||"demo-user",shop_name:$||`${(i==null?void 0:i.name)||"Demo Artist"}`,product_images:te.map(nt=>URL.createObjectURL(nt)),status:"pending",created_at:new Date().toISOString()},fe=JSON.parse(localStorage.getItem("spv_artist_applications")||"[]");fe.push(et),localStorage.setItem("spv_artist_applications",JSON.stringify(fe)),alert("DEMO MODE: Application saved locally (not sent to server)."),I(!0),f(!1),M(""),H([]),U.forEach(nt=>URL.revokeObjectURL(nt)),E([]),S(!1),C(!1);return}alert("Please login first"),C(!1);return}if(!j){alert("You must agree to the Terms and Conditions to apply."),C(!1);return}const we=[],Ue=te.slice(0,5);for(const et of Ue){const{data:fe,error:nt}=await Ve.storage.from("artist-applications").upload(`${ze.id}/${Date.now()}_${et.name}`,et);if(fe&&we.push(fe.path),nt){console.error("Upload error:",nt),alert("Upload failed: "+nt.message),C(!1);return}}try{await r({shop_name:$||`${(i==null?void 0:i.name)||"Artist"}`,product_images:we,terms_agreed:!0,plan:b}),alert("SUCCESS! Application sent."),I(!0),f(!1),M(""),H([]),U.forEach(et=>URL.revokeObjectURL(et)),E([]),S(!1)}catch(et){console.error("DATABASE ERROR (applyForArtist):",et),alert("Failed to submit application: "+((et==null?void 0:et.message)||(et==null?void 0:et.error)||String(et)))}}catch(ze){console.error("Error submitting application:",ze),alert("Failed to submit application. Please try again.")}finally{C(!1)}},[qe,at]=v.useState(null),[Rt,xe]=v.useState(!1),[Je,wt]=v.useState(!1);v.useEffect(()=>{xe(!1),wt(!1)},[qe]);const Lt=ge=>({title:"",body:null}),ae=[{name:"Tester",slots:5,priceZAR:19,priceUSD:1.5,features:["5 Product Slots","Basic Support"],locked:!1,lockReason:""},{name:"Hobbyist",slots:20,priceZAR:49,priceUSD:4,features:["20 Product Slots","Email Support"],locked:!1,lockReason:""},{name:"Creator",slots:50,priceZAR:99,priceUSD:8,features:["50 Product Slots","Priority Support","Access to Analytics"],locked:!1,lockReason:"",mostPopular:!0},{name:"Boutique",slots:100,priceZAR:189,priceUSD:15,features:["100 Product Slots","Dedicated Support","Advanced Analytics"],locked:!0,lockReason:"Requires 100+ sales to unlock"},{name:"Gallery",slots:250,priceZAR:399,priceUSD:32,features:["250 Product Slots","24/7 Support","Full Analytics Suite"],locked:!0,lockReason:"Invitation Only"}];return e.jsx("div",{className:"bg-gradient-to-b from-gray-900 to-black text-white min-h-screen p-4 sm:p-8 font-sans overflow-x-hidden",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("header",{className:"mb-8 text-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-cherry text-3xl sm:text-4xl md:text-4xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_8px_rgba(236,72,153,0.45)]",children:"Your Art. Global Stage. 1% Fees."}),e.jsxs("p",{className:"font-architects text-lg sm:text-xl md:text-xl text-gray-300 max-w-2xl mt-2 mx-auto",children:["Join a curated marketplace trusted by 176 small artists  over ",e.jsx("strong",{children:"50,000"})," app downloads, ",e.jsx("strong",{children:"6,000+"})," members, and ",e.jsx("strong",{children:"7,000+"})," regular buyers. Limited spots available."]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-3xl font-bold text-amber-400 font-cherry",children:"Premium Artist Program"}),e.jsx("p",{className:"text-sm sm:text-lg text-zinc-300 mt-2",children:"Curated, vetted, and shipped with care."}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-3",children:[e.jsx("div",{className:"text-xs text-zinc-400",children:"Currency"}),e.jsxs("div",{role:"button","aria-label":"Toggle currency",onClick:()=>t(),className:`relative inline-flex items-center h-8 w-36 rounded-full p-1 cursor-pointer transition-colors ${L?"bg-amber-600/20":"bg-zinc-800"}`,children:[e.jsx("div",{className:`absolute left-1 top-1 bottom-1 w-16 rounded-full bg-white/5 flex items-center justify-center text-xs font-bold ${L?"translate-x-16":"translate-x-0"} transition-transform`,children:"R"}),e.jsx("div",{className:`absolute left-1 top-1 bottom-1 w-16 rounded-full bg-white/5 flex items-center justify-center text-xs font-bold ${L?"translate-x-16":"translate-x-0"} transition-transform`,children:"$"}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-2 text-xs text-zinc-400",children:[e.jsx("span",{className:`mr-2 ${L?"":"text-amber-400 font-semibold"}`,children:"ZAR (R)"}),e.jsx("span",{className:`${L?"text-amber-400 font-semibold":""}`,children:"USD ($)"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"inline-block text-center",children:[e.jsx("div",{className:"font-cherry text-2xl sm:text-3xl md:text-3xl text-white",style:{textShadow:"0 12px 40px rgba(236,72,153,0.95)"},children:"START YOUR SHOP"}),e.jsx("div",{className:"text-xs text-zinc-300 mt-1",children:"As little as"}),e.jsx("div",{className:"text-2xl sm:text-3xl md:text-3xl font-cherry text-white mt-1",children:L?"$1.50":"R19"}),e.jsx("div",{className:"text-sm text-zinc-400",children:"/ Month"})]})})]})]}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h3",{className:"text-xl font-semibold text-purple-400 text-center mb-6",children:"The Trust Timeline"}),e.jsx("div",{className:"flex flex-col md:flex-row items-stretch gap-4 md:gap-6",children:[{key:"sold",icon:"",title:"Sold",body:"Funds held securely in escrow."},{key:"hub",icon:"",title:"Hub Check",body:"Piece inspected at our Worcester hub."},{key:"delivered",icon:"",title:"Delivered",body:"Collector receives your art."},{key:"day30",icon:"",title:"Day 30",body:"Funds released to your wallet."}].map(({key:ge,icon:ze,title:we,body:Ue})=>e.jsxs("div",{className:"flex-1 bg-zinc-900 border-4 border-green-500 rounded-2xl p-4 text-center relative",style:{boxShadow:"0 16px 48px rgba(16,185,129,0.14)"},children:[e.jsx("div",{className:"text-3xl mb-2",children:ze}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("h4",{className:"font-bold text-white",children:we}),e.jsx("button",{"aria-label":`More info about ${we}`,onClick:()=>at(ge),className:"p-1 rounded-full bg-zinc-800/40 hover:bg-zinc-800 text-zinc-300",children:e.jsx(Ic,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-zinc-400 mt-1",children:Ue})]},ge))})]}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h3",{className:"text-xl font-semibold text-amber-400 text-center mb-6",children:"Choose Your Plan"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6",children:ae.map(ge=>{const ze=L?`$${ge.priceUSD}`:`R${ge.priceZAR}`,Ue={Tester:{border:"border-4 border-cyan-500",title:"text-cyan-400",btn:"bg-cyan-600 hover:bg-cyan-500",shadow:"0 0 25px 5px rgba(34,211,238,0.14)"},Hobbyist:{border:"border-4 border-purple-800",title:"text-purple-500",btn:"bg-purple-600 hover:bg-purple-500",shadow:"0 0 25px 5px rgba(124,58,237,0.14)"},Creator:{border:"border-4 border-amber-600",title:"text-amber-400",btn:"bg-amber-600 hover:bg-amber-500",shadow:"0 0 25px 5px rgba(250,204,21,0.14)"},Boutique:{border:"border-4 border-pink-500",title:"text-pink-400",btn:"bg-pink-600 hover:bg-pink-500",shadow:"0 0 25px 5px rgba(219,39,119,0.12)"},Gallery:{border:"border-4 border-green-500",title:"text-green-400",btn:"bg-green-600 hover:bg-green-500",shadow:"0 0 25px 5px rgba(34,197,94,0.12)"}}[ge.name]||{border:"border border-zinc-800",title:"text-amber-400",shadow:"none"},fe={Tester:{capacity:50,taken:45},Hobbyist:{capacity:50,taken:46},Creator:{capacity:50,taken:46},Boutique:{capacity:30,taken:21},Gallery:{capacity:20,taken:18}}[ge.name]||{capacity:50,taken:0},nt=Math.round(fe.taken/fe.capacity*100),dt=ge.locked||!1;return e.jsxs("div",{className:`bg-zinc-900/40 rounded-2xl p-5 text-center flex flex-col justify-between ${Ue.border} ${b===ge.name?"border-4 border-pink-500 shadow-[0_0_20px_rgba(236,72,153,0.18)]":""} ${dt?"opacity-60":""}`,style:{boxShadow:Ue.shadow},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("h4",{className:`text-2xl font-bold ${Ue.title}`,children:ge.name}),ge.mostPopular&&e.jsx("span",{className:"text-xs bg-amber-600 text-black px-2 py-1 rounded-full font-bold",children:"MOST POPULAR"})]}),e.jsxs("p",{className:"text-3xl font-bold my-4 text-white",children:[ze,e.jsx("span",{className:"text-sm text-zinc-400 ml-1",children:"/month"})]}),e.jsxs("p",{className:"text-zinc-400 mb-4",children:[ge.slots," Slots"]}),e.jsx("ul",{className:"text-sm text-zinc-400 mb-4 space-y-1",children:ge.features.map(_t=>e.jsxs("li",{children:[" ",_t]},_t))})]}),e.jsx("div",{children:dt?e.jsxs("div",{children:[e.jsxs("div",{className:"w-full bg-zinc-800 text-zinc-400 font-bold py-2 px-4 rounded-md mb-2 border border-zinc-700 flex items-center justify-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"LOCKED"})]}),e.jsx("div",{className:"text-xs text-amber-400 font-semibold",children:ge.lockReason})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>Ie(ge.name),className:`w-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)] ${b===ge.name?"ring-4 ring-pink-400/30":""}`,children:"Apply Now"}),e.jsxs("div",{className:"mt-4 text-sm text-zinc-400",children:[fe.taken," / ",fe.capacity," spots taken"]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2 mt-2 overflow-hidden",children:e.jsx("div",{className:"h-2 rounded-full bg-pink-500 shadow-[0_0_10px_rgba(236,72,153,0.4)]",style:{width:`${nt}%`}})})]})})]},ge.name)})})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-semibold text-amber-400 text-center mb-6",children:"How It Works"}),e.jsx("div",{className:"max-w-3xl mx-auto text-lg text-zinc-300 space-y-4",children:e.jsxs("ol",{className:"list-decimal list-inside space-y-3",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Apply:"})," Submit your application to join our curated artist program."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Approved / Upload:"})," Once approved, upload your product images and details."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ship to Hub:"})," Ship sold items to our Worcester hub for inspection."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Quality Check:"})," We inspect and package items for the collector."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Escrow Release:"})," Funds held in escrow are released on day 30 to your wallet."]})]})})]}),e.jsxs("section",{className:"mt-10",children:[e.jsx("h3",{className:"text-xl font-semibold text-amber-400 text-center mb-2",children:"What Artists Say"}),e.jsx("p",{className:"text-center text-zinc-400 mb-4",children:"Real feedback from our first few months of operation."}),e.jsx("div",{className:"overflow-x-auto md:overflow-visible snap-x snap-mandatory md:snap-none gap-4 flex md:grid md:grid-cols-3 lg:grid-cols-5",children:[{author:"Sarah J. (Small Batch Smith)",text:"I honestly didn't believe the 1% fee was real at first. I'm a small-time artist, but since joining 3 months ago, my customer base has tripled."},{author:"David K.",text:"The escrow system is a lifesaver. I used to worry about scams, but the Worcester hub check makes the buyer feel safe, which makes them buy more."},{author:"Elena M.",text:"Finally, a platform that doesn't eat 20% of my profits. The $4 hobbyist plan is cheaper than a cup of coffee. It's only been live a few months but the traffic is great."},{author:"Jabu N.",text:"I was skeptical about shipping to a hub first, but it actually saves me headache dealing with international customs. They handle the hard part."},{author:"Chloe R.",text:"I switched from Etsy. The global reach here for such a low monthly fee is unbeatable. I love that it's curated so I'm not competing with mass-produced junk."}].map((ge,ze)=>e.jsxs("div",{className:"snap-start min-w-[260px] md:min-w-0 bg-zinc-900/40 border border-zinc-800 rounded-lg p-4 m-2 md:m-0",children:[e.jsxs("p",{className:"text-sm text-zinc-300",children:['"',ge.text,'"']}),e.jsxs("p",{className:"mt-3 text-xs text-zinc-400 font-semibold",children:[" ",ge.author]})]},ze))})]}),p&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>f(!1)}),e.jsxs("form",{onSubmit:He,className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 w-full max-w-md z-10 mx-auto",children:[e.jsx("div",{className:"w-full flex items-center justify-center md:hidden mb-2",children:e.jsx("div",{className:"w-14 h-1.5 bg-zinc-800 rounded-full"})}),e.jsx("button",{type:"button",onClick:()=>f(!1),"aria-label":"Close application form",className:"absolute top-3 right-3 p-2 rounded bg-zinc-800/40 text-zinc-300 hover:bg-zinc-800",children:e.jsx(ns,{className:"w-4 h-4"})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsx("h4",{className:"text-lg font-bold text-white",children:"Artist Application"})}),be?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-zinc-900 border border-zinc-800 rounded text-center",children:e.jsx("p",{className:"text-sm text-zinc-300",children:"Application for Artist Shop needs an account. Please create one to continue."})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>m("/login"),className:"flex-1 bg-zinc-800 text-white py-2 rounded",children:"Login"}),e.jsx("button",{type:"button",onClick:()=>{f(!1),_("Opening registration"),setTimeout(()=>{w(null),R(!0),setTimeout(()=>{O.current?_(null):_("Could not open inline register. Click below to open the full registration page.")},250)},80)},className:"flex-1 bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Create Account"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"mb-3 p-3 bg-zinc-900 border-2 border-cyan-500 rounded-xl text-sm text-zinc-300",children:[e.jsxs("div",{className:"font-semibold text-white",children:["Welcome back, ",(i.name||"").split(" ")[0]||"Artist","!"]}),e.jsxs("div",{className:"mt-2 text-sm",children:["Your email: ",e.jsx("strong",{className:"text-amber-300",children:i.email})]})]}),e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Shop Name"}),e.jsx("input",{value:$,onChange:ge=>M(ge.target.value),placeholder:"Shop Name",className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Upload images (max 5)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:ge=>{const ze=ge.target.files;if(!ze)return;const we=Array.from(ze).slice(0,5);H(we),U.forEach(Ue=>{try{URL.revokeObjectURL(Ue)}catch{}}),E(we.map(Ue=>URL.createObjectURL(Ue)))},className:"w-full mt-1"}),e.jsx("div",{className:"mt-2 text-xs text-zinc-400",children:U.length===0?"No file chosen":`${U.length} / 5 images selected`}),U.length>0&&e.jsx("div",{className:"mt-2 flex gap-2 flex-wrap",children:U.map((ge,ze)=>e.jsxs("div",{className:"relative w-20 h-20 rounded overflow-hidden border border-zinc-800",children:[e.jsx("img",{src:ge,alt:`preview-${ze}`,className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>{try{URL.revokeObjectURL(ge)}catch{}H(we=>we.filter((Ue,et)=>et!==ze)),E(we=>we.filter((Ue,et)=>et!==ze))},className:"absolute top-1 right-1 p-1 rounded bg-black/60 text-zinc-200",children:""})]},ze))})]}),e.jsxs("div",{className:"mt-4 border-t border-zinc-800 pt-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm text-zinc-300",children:[e.jsx("input",{type:"checkbox",checked:j||ee,onChange:ge=>{ge.target.checked?ue(!0):(S(!1),ue(!1))},className:"w-4 h-4"}),e.jsxs("span",{children:["I agree to the ",e.jsx("strong",{className:"text-amber-300",children:"Artist Terms & Conditions"})]})]})}),ee&&e.jsxs("div",{className:"mt-3 bg-zinc-900 border border-pink-500 p-4 rounded-xl shadow-lg text-sm text-zinc-300",children:[e.jsx("div",{className:"mb-3 text-center",children:e.jsx("h4",{className:"font-cherry text-lg text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400",children:"Artist Terms & Conditions"})}),e.jsxs("div",{className:"max-h-40 overflow-y-auto pr-2 space-y-3",children:[e.jsx("p",{className:"text-zinc-300",children:"Please read these terms carefully. You must agree to proceed with your application."}),e.jsxs("section",{children:[e.jsx("h5",{className:"font-semibold text-white",children:"1. Enrollment & Eligibility"}),e.jsx("p",{className:"mt-1 text-zinc-300",children:"By applying you confirm that you own the rights to the items listed and that all information provided is accurate. We reserve the right to accept or reject applications."})]}),e.jsxs("section",{children:[e.jsx("h5",{className:"font-semibold text-white",children:"2. Hub Inventory & Storage"}),e.jsxs("p",{className:"mt-1 text-zinc-300",children:["Each product must have at least one physical stock item recorded in our Worcester hub ",e.jsx("strong",{className:"text-amber-300",children:"before the product goes live"}),". Storage is free for one physical stock item. Additional identical items are subject to a once-off fee."]})]}),e.jsxs("section",{children:[e.jsx("h5",{className:"font-semibold text-white",children:"3. Inspection, Delivery & Escrow"}),e.jsx("p",{className:"mt-1 text-zinc-300",children:"All sold items are inspected at our Worcester hub. Funds are held in escrow until delivery is confirmed and the buyer's inspection period passes."})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{S(!0),ue(!1)},className:"bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Agree & Close"}),e.jsx("button",{type:"button",onClick:()=>{ue(!1),S(!1)},className:"bg-zinc-800 text-zinc-300 py-2 px-4 rounded",children:"Close"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{type:"submit",disabled:F||!j||te.length===0||!$.trim(),className:"w-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 disabled:bg-gray-600 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)] disabled:opacity-50 disabled:cursor-not-allowed",children:F?"Applying":"Apply"}),e.jsx("button",{type:"button",onClick:()=>{f(!1),M(""),H([]),U.forEach(ge=>URL.revokeObjectURL(ge)),E([]),S(!1)},className:"w-full sm:w-auto bg-zinc-800 text-zinc-300 py-2 px-4 rounded",children:"Cancel"})]}),D&&e.jsx("div",{className:"mt-3 p-3 bg-green-900/20 border border-green-500 rounded text-green-300",children:"Thank you! Your shop is being reviewed."})]})]})]}),N&&e.jsxs("div",{className:"fixed inset-0 z-60 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>R(!1)}),e.jsxs("div",{className:"relative w-full max-w-md bg-zinc-900 border border-gray-800 rounded-2xl p-6 z-20 shadow-2xl",children:[e.jsx("button",{onClick:()=>R(!1),"aria-label":"Close register",className:"absolute top-3 right-3 p-2 rounded bg-zinc-800/40 text-zinc-300 hover:bg-zinc-800",children:e.jsx(ns,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"font-cherry text-2xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400",children:"Create Account"}),e.jsx("p",{className:"text-sm text-zinc-400",children:"Create an account to finish your Artist application."})]}),P&&e.jsxs("div",{role:"status","aria-live":"polite",className:"mb-3 text-sm text-center text-amber-300",children:[e.jsx("div",{className:"mb-2",children:P}),e.jsx("div",{children:e.jsx("button",{onClick:()=>m("/register?source=artist"),className:"bg-pink-600 text-white px-3 py-1 rounded",children:"Open full register page"})})]}),e.jsx("div",{children:e.jsx(Nw,{onSuccess:()=>{R(!1),f(!0),setTimeout(()=>{M((i==null?void 0:i.artistTradeName)||"")},50)}})})]})]}),qe&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>at(null)}),e.jsxs("div",{role:"dialog","aria-modal":"true","aria-label":"Timeline info",onClick:ge=>ge.stopPropagation(),className:"relative w-full max-w-md bg-zinc-900 border border-zinc-800 rounded-xl p-4 md:p-6 z-10 ring-amber-600/30 shadow-[0_20px_60px_rgba(250,204,21,0.16)] text-center",children:[e.jsx("button",{"aria-label":"Close",onClick:()=>at(null),className:"absolute top-3 right-3 p-2 rounded-md bg-zinc-800/40 hover:bg-zinc-800 text-zinc-300",children:e.jsx(ns,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:Lt().title}),e.jsx("div",{className:"text-sm text-zinc-400 mt-3 space-y-3",children:Lt().body})]})]})]}),e.jsx("footer",{className:"mt-12 text-center text-sm text-zinc-500",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:e.jsxs("div",{children:[" ",new Date().getFullYear()," Spoil Me Vintage  Artists: 1% fee, curated marketplace."]})})]})})},w3=({onClose:s})=>e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:s}),e.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-sm w-full shadow-[0_0_50px_rgba(236,72,153,0.4)] animate-in zoom-in-95 duration-300 text-center",children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(ns,{size:20})}),e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600 to-purple-600 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg transform rotate-3",children:e.jsx(zA,{size:32,className:"text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Voucher Redeemed!"}),e.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"To ensure your discount applies correctly and for the best shopping experience, please use our App."}),e.jsxs("button",{className:"w-full py-3 bg-white text-black font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors mb-3 shadow-lg",onClick:()=>alert("Please use the Install button at the bottom of the screen."),children:[e.jsx(yc,{size:20})," Install App"]}),e.jsx("button",{onClick:s,className:"text-xs text-gray-500 hover:text-gray-300 underline",children:"Continue in Browser"})]})]}),j3=()=>{const s=ha(),t=nr(),{applyExternalVoucher:r}=vt(),[i,o]=v.useState(!1);return v.useEffect(()=>{const d=new URLSearchParams(s.search).get("voucher");d&&r(d)&&(o(!0),t("/cart",{replace:!0}))},[s,r,t]),i?e.jsx(w3,{onClose:()=>o(!1)}):null},N3=()=>e.jsx(cA,{children:e.jsx(S3,{})}),S3=()=>{const{isLoading:s,user:t}=vt(),{updateAvailable:r,isDownloading:i,performUpdate:o,dismissUpdate:l}=X5();return v.useEffect(()=>{t!=null&&t.id&&Qv(t.id)},[t==null?void 0:t.id]),s?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):e.jsxs(HN,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[e.jsx(j3,{}),e.jsx(D5,{}),e.jsx(n3,{}),e.jsx(s3,{}),r&&e.jsx(Q5,{version:r.version,isDownloading:i,onUpdate:o,onDismiss:l}),e.jsxs(LN,{children:[e.jsxs(kt,{path:"/",element:e.jsx(tT,{}),children:[e.jsx(kt,{index:!0,element:e.jsx(iT,{})}),e.jsx(kt,{path:"collections/:categoryName",element:e.jsx(j5,{})}),e.jsx(kt,{path:"catalog/:type",element:e.jsx(N5,{})}),e.jsx(kt,{path:"product/:id",element:e.jsx(BT,{})}),e.jsx(kt,{path:"cart",element:e.jsx(GT,{})}),e.jsx(kt,{path:"profile",element:e.jsx(KT,{})}),e.jsx(kt,{path:"membership",element:e.jsx(x5,{})}),e.jsx(kt,{path:"earn-rewards",element:e.jsx(y5,{})}),e.jsx(kt,{path:"affiliate-program",element:e.jsx(v5,{})}),e.jsx(kt,{path:"gift-cards",element:e.jsx(w5,{})}),e.jsx(kt,{path:"weekly-winners",element:e.jsx(z5,{})})," ",e.jsx(kt,{path:"login",element:e.jsx(JT,{})}),e.jsx(kt,{path:"terms",element:e.jsx(W5,{})})," ",e.jsx(kt,{path:"vault",element:e.jsx(a3,{})})," ",e.jsx(kt,{path:"vip/:affiliateCode",element:e.jsx(c3,{})}),e.jsx(kt,{path:"notifications",element:e.jsx(m3,{})})," ",e.jsx(kt,{path:"customized-wire-wrapped-pendants",element:e.jsx(f3,{})}),e.jsx(kt,{path:"customized-wire-wrapped-pendants/:id",element:e.jsx(x3,{})})," ",e.jsx(kt,{path:"maker/:makerName",element:e.jsx(y3,{})})," ",e.jsx(kt,{path:"artist-partnership",element:e.jsx(v3,{})})," "]}),e.jsxs(kt,{path:"/admin",element:e.jsx(sT,{}),children:[e.jsx(kt,{index:!0,element:e.jsx(S5,{})}),e.jsx(kt,{path:"products",element:e.jsx(C5,{})}),e.jsx(kt,{path:"orders",element:e.jsx(V5,{})}),e.jsx(kt,{path:"categories",element:e.jsx(P5,{})}),e.jsx(kt,{path:"gift-cards",element:e.jsx(E5,{})}),e.jsx(kt,{path:"social",element:e.jsx(R5,{})}),e.jsx(kt,{path:"affiliates",element:e.jsx(I5,{})}),e.jsx(kt,{path:"winners",element:e.jsx(M5,{})}),e.jsx(kt,{path:"expenses",element:e.jsx(B5,{})})," ",e.jsx(kt,{path:"vault",element:e.jsx(i3,{})})," ",e.jsx(kt,{path:"members",element:e.jsx(o3,{})})," ",e.jsx(kt,{path:"users",element:e.jsx(l3,{})})," ",e.jsx(kt,{path:"affiliate/store-builder",element:e.jsx(h3,{})}),e.jsx(kt,{path:"notifications",element:e.jsx(p3,{})})," ",e.jsx(kt,{path:"custom-pendant-manager",element:e.jsx(g3,{})})," ",e.jsx(kt,{path:"artists",element:e.jsx(b3,{})}),e.jsx(kt,{path:"ad-pricing",element:e.jsx(Sw,{})})]}),e.jsx(kt,{path:"*",element:e.jsx(zN,{to:"/"})})]})]})};"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").catch(s=>{console.warn("Service worker registration failed:",s)});const kw=document.getElementById("root");if(!kw)throw new Error("Could not find root element to mount to");const k3=Vj.createRoot(kw);k3.render(e.jsx(ra.StrictMode,{children:e.jsx(N3,{})}));export{Gy as E,uw as W,JA as b};
