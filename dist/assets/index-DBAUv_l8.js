function PS(n,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();function Pv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Af={exports:{}},Zl={},If={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx;function AS(){if(Xx)return wt;Xx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function j(Z){return Z===null||typeof Z!="object"?null:(Z=v&&Z[v]||Z["@@iterator"],typeof Z=="function"?Z:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,_={};function P(Z,ce,W){this.props=Z,this.context=ce,this.refs=_,this.updater=W||E}P.prototype.isReactComponent={},P.prototype.setState=function(Z,ce){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,ce,"setState")},P.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function L(){}L.prototype=P.prototype;function U(Z,ce,W){this.props=Z,this.context=ce,this.refs=_,this.updater=W||E}var F=U.prototype=new L;F.constructor=U,k(F,P.prototype),F.isPureReactComponent=!0;var J=Array.isArray,te=Object.prototype.hasOwnProperty,H={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function C(Z,ce,W){var ue,B={},Ce=null,Pe=null;if(ce!=null)for(ue in ce.ref!==void 0&&(Pe=ce.ref),ce.key!==void 0&&(Ce=""+ce.key),ce)te.call(ce,ue)&&!M.hasOwnProperty(ue)&&(B[ue]=ce[ue]);var Ue=arguments.length-2;if(Ue===1)B.children=W;else if(1<Ue){for(var Qe=Array(Ue),lt=0;lt<Ue;lt++)Qe[lt]=arguments[lt+2];B.children=Qe}if(Z&&Z.defaultProps)for(ue in Ue=Z.defaultProps,Ue)B[ue]===void 0&&(B[ue]=Ue[ue]);return{$$typeof:n,type:Z,key:Ce,ref:Pe,props:B,_owner:H.current}}function I(Z,ce){return{$$typeof:n,type:Z.type,key:ce,ref:Z.ref,props:Z.props,_owner:Z._owner}}function $(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===n}function O(Z){var ce={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(W){return ce[W]})}var V=/\/+/g;function A(Z,ce){return typeof Z=="object"&&Z!==null&&Z.key!=null?O(""+Z.key):ce.toString(36)}function se(Z,ce,W,ue,B){var Ce=typeof Z;(Ce==="undefined"||Ce==="boolean")&&(Z=null);var Pe=!1;if(Z===null)Pe=!0;else switch(Ce){case"string":case"number":Pe=!0;break;case"object":switch(Z.$$typeof){case n:case e:Pe=!0}}if(Pe)return Pe=Z,B=B(Pe),Z=ue===""?"."+A(Pe,0):ue,J(B)?(W="",Z!=null&&(W=Z.replace(V,"$&/")+"/"),se(B,ce,W,"",function(lt){return lt})):B!=null&&($(B)&&(B=I(B,W+(!B.key||Pe&&Pe.key===B.key?"":(""+B.key).replace(V,"$&/")+"/")+Z)),ce.push(B)),1;if(Pe=0,ue=ue===""?".":ue+":",J(Z))for(var Ue=0;Ue<Z.length;Ue++){Ce=Z[Ue];var Qe=ue+A(Ce,Ue);Pe+=se(Ce,ce,W,Qe,B)}else if(Qe=j(Z),typeof Qe=="function")for(Z=Qe.call(Z),Ue=0;!(Ce=Z.next()).done;)Ce=Ce.value,Qe=ue+A(Ce,Ue++),Pe+=se(Ce,ce,W,Qe,B);else if(Ce==="object")throw ce=String(Z),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.");return Pe}function fe(Z,ce,W){if(Z==null)return Z;var ue=[],B=0;return se(Z,ue,"","",function(Ce){return ce.call(W,Ce,B++)}),ue}function je(Z){if(Z._status===-1){var ce=Z._result;ce=ce(),ce.then(function(W){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=W)},function(W){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=W)}),Z._status===-1&&(Z._status=0,Z._result=ce)}if(Z._status===1)return Z._result.default;throw Z._result}var Ie={current:null},le={transition:null},be={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:le,ReactCurrentOwner:H};function we(){throw Error("act(...) is not supported in production builds of React.")}return wt.Children={map:fe,forEach:function(Z,ce,W){fe(Z,function(){ce.apply(this,arguments)},W)},count:function(Z){var ce=0;return fe(Z,function(){ce++}),ce},toArray:function(Z){return fe(Z,function(ce){return ce})||[]},only:function(Z){if(!$(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},wt.Component=P,wt.Fragment=s,wt.Profiler=i,wt.PureComponent=U,wt.StrictMode=r,wt.Suspense=f,wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=be,wt.act=we,wt.cloneElement=function(Z,ce,W){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var ue=k({},Z.props),B=Z.key,Ce=Z.ref,Pe=Z._owner;if(ce!=null){if(ce.ref!==void 0&&(Ce=ce.ref,Pe=H.current),ce.key!==void 0&&(B=""+ce.key),Z.type&&Z.type.defaultProps)var Ue=Z.type.defaultProps;for(Qe in ce)te.call(ce,Qe)&&!M.hasOwnProperty(Qe)&&(ue[Qe]=ce[Qe]===void 0&&Ue!==void 0?Ue[Qe]:ce[Qe])}var Qe=arguments.length-2;if(Qe===1)ue.children=W;else if(1<Qe){Ue=Array(Qe);for(var lt=0;lt<Qe;lt++)Ue[lt]=arguments[lt+2];ue.children=Ue}return{$$typeof:n,type:Z.type,key:B,ref:Ce,props:ue,_owner:Pe}},wt.createContext=function(Z){return Z={$$typeof:c,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:o,_context:Z},Z.Consumer=Z},wt.createElement=C,wt.createFactory=function(Z){var ce=C.bind(null,Z);return ce.type=Z,ce},wt.createRef=function(){return{current:null}},wt.forwardRef=function(Z){return{$$typeof:u,render:Z}},wt.isValidElement=$,wt.lazy=function(Z){return{$$typeof:y,_payload:{_status:-1,_result:Z},_init:je}},wt.memo=function(Z,ce){return{$$typeof:h,type:Z,compare:ce===void 0?null:ce}},wt.startTransition=function(Z){var ce=le.transition;le.transition={};try{Z()}finally{le.transition=ce}},wt.unstable_act=we,wt.useCallback=function(Z,ce){return Ie.current.useCallback(Z,ce)},wt.useContext=function(Z){return Ie.current.useContext(Z)},wt.useDebugValue=function(){},wt.useDeferredValue=function(Z){return Ie.current.useDeferredValue(Z)},wt.useEffect=function(Z,ce){return Ie.current.useEffect(Z,ce)},wt.useId=function(){return Ie.current.useId()},wt.useImperativeHandle=function(Z,ce,W){return Ie.current.useImperativeHandle(Z,ce,W)},wt.useInsertionEffect=function(Z,ce){return Ie.current.useInsertionEffect(Z,ce)},wt.useLayoutEffect=function(Z,ce){return Ie.current.useLayoutEffect(Z,ce)},wt.useMemo=function(Z,ce){return Ie.current.useMemo(Z,ce)},wt.useReducer=function(Z,ce,W){return Ie.current.useReducer(Z,ce,W)},wt.useRef=function(Z){return Ie.current.useRef(Z)},wt.useState=function(Z){return Ie.current.useState(Z)},wt.useSyncExternalStore=function(Z,ce,W){return Ie.current.useSyncExternalStore(Z,ce,W)},wt.useTransition=function(){return Ie.current.useTransition()},wt.version="18.3.1",wt}var Qx;function ep(){return Qx||(Qx=1,If.exports=AS()),If.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function IS(){if(e0)return Zl;e0=1;var n=ep(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(u,f,h){var y,v={},j=null,E=null;h!==void 0&&(j=""+h),f.key!==void 0&&(j=""+f.key),f.ref!==void 0&&(E=f.ref);for(y in f)r.call(f,y)&&!o.hasOwnProperty(y)&&(v[y]=f[y]);if(u&&u.defaultProps)for(y in f=u.defaultProps,f)v[y]===void 0&&(v[y]=f[y]);return{$$typeof:e,type:u,key:j,ref:E,props:v,_owner:i.current}}return Zl.Fragment=s,Zl.jsx=c,Zl.jsxs=c,Zl}var t0;function RS(){return t0||(t0=1,Af.exports=IS()),Af.exports}var t=RS(),S=ep();const Ha=Pv(S),MS=PS({__proto__:null,default:Ha},[S]);var Hd={},Rf={exports:{}},bn={},Mf={exports:{}},Df={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function DS(){return s0||(s0=1,(function(n){function e(le,be){var we=le.length;le.push(be);e:for(;0<we;){var Z=we-1>>>1,ce=le[Z];if(0<i(ce,be))le[Z]=be,le[we]=ce,we=Z;else break e}}function s(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var be=le[0],we=le.pop();if(we!==be){le[0]=we;e:for(var Z=0,ce=le.length,W=ce>>>1;Z<W;){var ue=2*(Z+1)-1,B=le[ue],Ce=ue+1,Pe=le[Ce];if(0>i(B,we))Ce<ce&&0>i(Pe,B)?(le[Z]=Pe,le[Ce]=we,Z=Ce):(le[Z]=B,le[ue]=we,Z=ue);else if(Ce<ce&&0>i(Pe,we))le[Z]=Pe,le[Ce]=we,Z=Ce;else break e}}return be}function i(le,be){var we=le.sortIndex-be.sortIndex;return we!==0?we:le.id-be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var f=[],h=[],y=1,v=null,j=3,E=!1,k=!1,_=!1,P=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(le){for(var be=s(h);be!==null;){if(be.callback===null)r(h);else if(be.startTime<=le)r(h),be.sortIndex=be.expirationTime,e(f,be);else break;be=s(h)}}function J(le){if(_=!1,F(le),!k)if(s(f)!==null)k=!0,je(te);else{var be=s(h);be!==null&&Ie(J,be.startTime-le)}}function te(le,be){k=!1,_&&(_=!1,L(C),C=-1),E=!0;var we=j;try{for(F(be),v=s(f);v!==null&&(!(v.expirationTime>be)||le&&!O());){var Z=v.callback;if(typeof Z=="function"){v.callback=null,j=v.priorityLevel;var ce=Z(v.expirationTime<=be);be=n.unstable_now(),typeof ce=="function"?v.callback=ce:v===s(f)&&r(f),F(be)}else r(f);v=s(f)}if(v!==null)var W=!0;else{var ue=s(h);ue!==null&&Ie(J,ue.startTime-be),W=!1}return W}finally{v=null,j=we,E=!1}}var H=!1,M=null,C=-1,I=5,$=-1;function O(){return!(n.unstable_now()-$<I)}function V(){if(M!==null){var le=n.unstable_now();$=le;var be=!0;try{be=M(!0,le)}finally{be?A():(H=!1,M=null)}}else H=!1}var A;if(typeof U=="function")A=function(){U(V)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,fe=se.port2;se.port1.onmessage=V,A=function(){fe.postMessage(null)}}else A=function(){P(V,0)};function je(le){M=le,H||(H=!0,A())}function Ie(le,be){C=P(function(){le(n.unstable_now())},be)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){k||E||(k=!0,je(te))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return j},n.unstable_getFirstCallbackNode=function(){return s(f)},n.unstable_next=function(le){switch(j){case 1:case 2:case 3:var be=3;break;default:be=j}var we=j;j=be;try{return le()}finally{j=we}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,be){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var we=j;j=le;try{return be()}finally{j=we}},n.unstable_scheduleCallback=function(le,be,we){var Z=n.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Z+we:Z):we=Z,le){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=we+ce,le={id:y++,callback:be,priorityLevel:le,startTime:we,expirationTime:ce,sortIndex:-1},we>Z?(le.sortIndex=we,e(h,le),s(f)===null&&le===s(h)&&(_?(L(C),C=-1):_=!0,Ie(J,we-Z))):(le.sortIndex=ce,e(f,le),k||E||(k=!0,je(te))),le},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(le){var be=j;return function(){var we=j;j=be;try{return le.apply(this,arguments)}finally{j=we}}}})(Df)),Df}var n0;function OS(){return n0||(n0=1,Mf.exports=DS()),Mf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function LS(){if(r0)return bn;r0=1;var n=ep(),e=OS();function s(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,l){c(a,l),c(a+"Capture",l)}function c(a,l){for(i[a]=l,a=0;a<l.length;a++)r.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},v={};function j(a){return f.call(v,a)?!0:f.call(y,a)?!1:h.test(a)?v[a]=!0:(y[a]=!0,!1)}function E(a,l,d,p){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:d!==null?!d.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function k(a,l,d,p){if(l===null||typeof l>"u"||E(a,l,d,p))return!0;if(p)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function _(a,l,d,p,b,w,D){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=b,this.mustUseProperty=d,this.propertyName=a,this.type=l,this.sanitizeURL=w,this.removeEmptyString=D}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){P[a]=new _(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];P[l]=new _(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){P[a]=new _(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){P[a]=new _(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){P[a]=new _(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){P[a]=new _(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){P[a]=new _(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){P[a]=new _(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){P[a]=new _(a,5,!1,a.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function U(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(L,U);P[l]=new _(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(L,U);P[l]=new _(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(L,U);P[l]=new _(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){P[a]=new _(a,1,!1,a.toLowerCase(),null,!1,!1)}),P.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){P[a]=new _(a,1,!1,a.toLowerCase(),null,!0,!0)});function F(a,l,d,p){var b=P.hasOwnProperty(l)?P[l]:null;(b!==null?b.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(k(l,d,b,p)&&(d=null),p||b===null?j(l)&&(d===null?a.removeAttribute(l):a.setAttribute(l,""+d)):b.mustUseProperty?a[b.propertyName]=d===null?b.type===3?!1:"":d:(l=b.attributeName,p=b.attributeNamespace,d===null?a.removeAttribute(l):(b=b.type,d=b===3||b===4&&d===!0?"":""+d,p?a.setAttributeNS(p,l,d):a.setAttribute(l,d))))}var J=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,te=Symbol.for("react.element"),H=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),O=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),le=Symbol.iterator;function be(a){return a===null||typeof a!="object"?null:(a=le&&a[le]||a["@@iterator"],typeof a=="function"?a:null)}var we=Object.assign,Z;function ce(a){if(Z===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Z=l&&l[1]||""}return`
`+Z+a}var W=!1;function ue(a,l){if(!a||W)return"";W=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(me){var p=me}Reflect.construct(a,[],l)}else{try{l.call()}catch(me){p=me}a.call(l.prototype)}else{try{throw Error()}catch(me){p=me}a()}}catch(me){if(me&&p&&typeof me.stack=="string"){for(var b=me.stack.split(`
`),w=p.stack.split(`
`),D=b.length-1,q=w.length-1;1<=D&&0<=q&&b[D]!==w[q];)q--;for(;1<=D&&0<=q;D--,q--)if(b[D]!==w[q]){if(D!==1||q!==1)do if(D--,q--,0>q||b[D]!==w[q]){var Q=`
`+b[D].replace(" at new "," at ");return a.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",a.displayName)),Q}while(1<=D&&0<=q);break}}}finally{W=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?ce(a):""}function B(a){switch(a.tag){case 5:return ce(a.type);case 16:return ce("Lazy");case 13:return ce("Suspense");case 19:return ce("SuspenseList");case 0:case 2:case 15:return a=ue(a.type,!1),a;case 11:return a=ue(a.type.render,!1),a;case 1:return a=ue(a.type,!0),a;default:return""}}function Ce(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case M:return"Fragment";case H:return"Portal";case I:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case se:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case O:return(a.displayName||"Context")+".Consumer";case $:return(a._context.displayName||"Context")+".Provider";case V:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case fe:return l=a.displayName||null,l!==null?l:Ce(a.type)||"Memo";case je:l=a._payload,a=a._init;try{return Ce(a(l))}catch{}}return null}function Pe(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(l);case 8:return l===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ue(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Qe(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function lt(a){var l=Qe(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),p=""+a[l];if(!a.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,w=d.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return b.call(this)},set:function(D){p=""+D,w.call(this,D)}}),Object.defineProperty(a,l,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(D){p=""+D},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function St(a){a._valueTracker||(a._valueTracker=lt(a))}function ye(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),p="";return a&&(p=Qe(a)?a.checked?"true":"false":a.value),a=p,a!==d?(l.setValue(a),!0):!1}function Xe(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function nt(a,l){var d=l.checked;return we({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??a._wrapperState.initialChecked})}function Ut(a,l){var d=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;d=Ue(l.value!=null?l.value:d),a._wrapperState={initialChecked:p,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function oe(a,l){l=l.checked,l!=null&&F(a,"checked",l,!1)}function Me(a,l){oe(a,l);var d=Ue(l.value),p=l.type;if(d!=null)p==="number"?(d===0&&a.value===""||a.value!=d)&&(a.value=""+d):a.value!==""+d&&(a.value=""+d);else if(p==="submit"||p==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?ke(a,l.type,d):l.hasOwnProperty("defaultValue")&&ke(a,l.type,Ue(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function Be(a,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,d||l===a.value||(a.value=l),a.defaultValue=l}d=a.name,d!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,d!==""&&(a.name=d)}function ke(a,l,d){(l!=="number"||Xe(a.ownerDocument)!==a)&&(d==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+d&&(a.defaultValue=""+d))}var We=Array.isArray;function Nt(a,l,d,p){if(a=a.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<a.length;d++)b=l.hasOwnProperty("$"+a[d].value),a[d].selected!==b&&(a[d].selected=b),b&&p&&(a[d].defaultSelected=!0)}else{for(d=""+Ue(d),l=null,b=0;b<a.length;b++){if(a[b].value===d){a[b].selected=!0,p&&(a[b].defaultSelected=!0);return}l!==null||a[b].disabled||(l=a[b])}l!==null&&(l.selected=!0)}}function ve(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(s(91));return we({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Y(a,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(s(92));if(We(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),d=l}a._wrapperState={initialValue:Ue(d)}}function Se(a,l){var d=Ue(l.value),p=Ue(l.defaultValue);d!=null&&(d=""+d,d!==a.value&&(a.value=d),l.defaultValue==null&&a.defaultValue!==d&&(a.defaultValue=d)),p!=null&&(a.defaultValue=""+p)}function jt(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function mt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wt(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?mt(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var $t,ks=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,p,b){MSApp.execUnsafeLocalFunction(function(){return a(l,d,p,b)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for($t=$t||document.createElement("div"),$t.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=$t.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function ds(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var De={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ps=["Webkit","ms","Moz","O"];Object.keys(De).forEach(function(a){ps.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),De[l]=De[a]})});function us(a,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||De.hasOwnProperty(a)&&De[a]?(""+l).trim():l+"px"}function Ws(a,l){a=a.style;for(var d in l)if(l.hasOwnProperty(d)){var p=d.indexOf("--")===0,b=us(d,l[d],p);d==="float"&&(d="cssFloat"),p?a.setProperty(d,b):a[d]=b}}var fr=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Os(a,l){if(l){if(fr[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(s(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(s(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(s(61))}if(l.style!=null&&typeof l.style!="object")throw Error(s(62))}}function Ls(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dn=null;function On(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var gs=null,zs=null,Vt=null;function _s(a){if(a=Ol(a)){if(typeof gs!="function")throw Error(s(280));var l=a.stateNode;l&&(l=od(l),gs(a.stateNode,a.type,l))}}function ss(a){zs?Vt?Vt.push(a):Vt=[a]:zs=a}function Ne(){if(zs){var a=zs,l=Vt;if(Vt=zs=null,_s(a),l)for(a=0;a<l.length;a++)_s(l[a])}}function Je(a,l){return a(l)}function Et(){}var Tt=!1;function Rt(a,l,d){if(Tt)return a(l,d);Tt=!0;try{return Je(a,l,d)}finally{Tt=!1,(zs!==null||Vt!==null)&&(Et(),Ne())}}function Ot(a,l){var d=a.stateNode;if(d===null)return null;var p=od(d);if(p===null)return null;d=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(s(231,l,typeof d));return d}var zt=!1;if(u)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch{zt=!1}function Yn(a,l,d,p,b,w,D,q,Q){var me=Array.prototype.slice.call(arguments,3);try{l.apply(d,me)}catch(Ae){this.onError(Ae)}}var un=!1,hn=null,mr=!1,Us=null,vi={onError:function(a){un=!0,hn=a}};function Wr(a,l,d,p,b,w,D,q,Q){un=!1,hn=null,Yn.apply(vi,arguments)}function Hr(a,l,d,p,b,w,D,q,Q){if(Wr.apply(this,arguments),un){if(un){var me=hn;un=!1,hn=null}else throw Error(s(198));mr||(mr=!0,Us=me)}}function en(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function Gr(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function wi(a){if(en(a)!==a)throw Error(s(188))}function pr(a){var l=a.alternate;if(!l){if(l=en(a),l===null)throw Error(s(188));return l!==a?null:a}for(var d=a,p=l;;){var b=d.return;if(b===null)break;var w=b.alternate;if(w===null){if(p=b.return,p!==null){d=p;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===d)return wi(b),a;if(w===p)return wi(b),l;w=w.sibling}throw Error(s(188))}if(d.return!==p.return)d=b,p=w;else{for(var D=!1,q=b.child;q;){if(q===d){D=!0,d=b,p=w;break}if(q===p){D=!0,p=b,d=w;break}q=q.sibling}if(!D){for(q=w.child;q;){if(q===d){D=!0,d=w,p=b;break}if(q===p){D=!0,p=w,d=b;break}q=q.sibling}if(!D)throw Error(s(189))}}if(d.alternate!==p)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?a:l}function Kr(a){return a=pr(a),a!==null?Ln(a):null}function Ln(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Ln(a);if(l!==null)return l;a=a.sibling}return null}var G=e.unstable_scheduleCallback,K=e.unstable_cancelCallback,X=e.unstable_shouldYield,re=e.unstable_requestPaint,xe=e.unstable_now,Ke=e.unstable_getCurrentPriorityLevel,ct=e.unstable_ImmediatePriority,he=e.unstable_UserBlockingPriority,ge=e.unstable_NormalPriority,Le=e.unstable_LowPriority,kt=e.unstable_IdlePriority,dt=null,gt=null;function Jt(a){if(gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(dt,a,void 0,(a.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:Fe,R=Math.log,ne=Math.LN2;function Fe(a){return a>>>=0,a===0?32:31-(R(a)/ne|0)|0}var _e=64,$e=4194304;function He(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function xt(a,l){var d=a.pendingLanes;if(d===0)return 0;var p=0,b=a.suspendedLanes,w=a.pingedLanes,D=d&268435455;if(D!==0){var q=D&~b;q!==0?p=He(q):(w&=D,w!==0&&(p=He(w)))}else D=d&~b,D!==0?p=He(D):w!==0&&(p=He(w));if(p===0)return 0;if(l!==0&&l!==p&&(l&b)===0&&(b=p&-p,w=l&-l,b>=w||b===16&&(w&4194240)!==0))return l;if((p&4)!==0&&(p|=d&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=p;0<l;)d=31-_t(l),b=1<<d,p|=a[d],l&=~b;return p}function Yt(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gr(a,l){for(var d=a.suspendedLanes,p=a.pingedLanes,b=a.expirationTimes,w=a.pendingLanes;0<w;){var D=31-_t(w),q=1<<D,Q=b[D];Q===-1?((q&d)===0||(q&p)!==0)&&(b[D]=Yt(q,l)):Q<=l&&(a.expiredLanes|=q),w&=~q}}function Jr(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Ni(){var a=_e;return _e<<=1,(_e&4194240)===0&&(_e=64),a}function xl(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function xa(a,l,d){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-_t(l),a[l]=d}function lh(a,l){var d=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var p=a.eventTimes;for(a=a.expirationTimes;0<d;){var b=31-_t(d),w=1<<b;l[b]=0,p[b]=-1,a[b]=-1,d&=~w}}function yl(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var p=31-_t(d),b=1<<p;b&l|a[p]&l&&(a[p]|=l),d&=~b}}var Ct=0;function xr(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var bl,oo,vl,wl,Nl,yr=!1,lo=[],br=null,vr=null,Fs=null,ya=new Map,Yr=new Map,jn=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ji(a,l){switch(a){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":ya.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(l.pointerId)}}function Zn(a,l,d,p,b,w){return a===null||a.nativeEvent!==w?(a={blockedOn:l,domEventName:d,eventSystemFlags:p,nativeEvent:w,targetContainers:[b]},l!==null&&(l=Ol(l),l!==null&&oo(l)),a):(a.eventSystemFlags|=p,l=a.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),a)}function Gc(a,l,d,p,b){switch(l){case"focusin":return br=Zn(br,a,l,d,p,b),!0;case"dragenter":return vr=Zn(vr,a,l,d,p,b),!0;case"mouseover":return Fs=Zn(Fs,a,l,d,p,b),!0;case"pointerover":var w=b.pointerId;return ya.set(w,Zn(ya.get(w)||null,a,l,d,p,b)),!0;case"gotpointercapture":return w=b.pointerId,Yr.set(w,Zn(Yr.get(w)||null,a,l,d,p,b)),!0}return!1}function co(a){var l=Na(a.target);if(l!==null){var d=en(l);if(d!==null){if(l=d.tag,l===13){if(l=Gr(d),l!==null){a.blockedOn=l,Nl(a.priority,function(){vl(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ht(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=uo(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(d===null){d=a.nativeEvent;var p=new d.constructor(d.type,d);Dn=p,d.target.dispatchEvent(p),Dn=null}else return l=Ol(d),l!==null&&oo(l),a.blockedOn=d,!1;l.shift()}return!0}function Kc(a,l,d){Ht(a)&&d.delete(l)}function ch(){yr=!1,br!==null&&Ht(br)&&(br=null),vr!==null&&Ht(vr)&&(vr=null),Fs!==null&&Ht(Fs)&&(Fs=null),ya.forEach(Kc),Yr.forEach(Kc)}function Si(a,l){a.blockedOn===l&&(a.blockedOn=null,yr||(yr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ch)))}function ki(a){function l(b){return Si(b,a)}if(0<lo.length){Si(lo[0],a);for(var d=1;d<lo.length;d++){var p=lo[d];p.blockedOn===a&&(p.blockedOn=null)}}for(br!==null&&Si(br,a),vr!==null&&Si(vr,a),Fs!==null&&Si(Fs,a),ya.forEach(l),Yr.forEach(l),d=0;d<jn.length;d++)p=jn[d],p.blockedOn===a&&(p.blockedOn=null);for(;0<jn.length&&(d=jn[0],d.blockedOn===null);)co(d),d.blockedOn===null&&jn.shift()}var Zr=J.ReactCurrentBatchConfig,Xr=!0;function wr(a,l,d,p){var b=Ct,w=Zr.transition;Zr.transition=null;try{Ct=1,jl(a,l,d,p)}finally{Ct=b,Zr.transition=w}}function Jc(a,l,d,p){var b=Ct,w=Zr.transition;Zr.transition=null;try{Ct=4,jl(a,l,d,p)}finally{Ct=b,Zr.transition=w}}function jl(a,l,d,p){if(Xr){var b=uo(a,l,d,p);if(b===null)vh(a,l,p,Nr,d),ji(a,p);else if(Gc(b,a,l,d,p))p.stopPropagation();else if(ji(a,p),l&4&&-1<Hc.indexOf(a)){for(;b!==null;){var w=Ol(b);if(w!==null&&bl(w),w=uo(a,l,d,p),w===null&&vh(a,l,p,Nr,d),w===b)break;b=w}b!==null&&p.stopPropagation()}else vh(a,l,p,null,d)}}var Nr=null;function uo(a,l,d,p){if(Nr=null,a=On(p),a=Na(a),a!==null)if(l=en(a),l===null)a=null;else if(d=l.tag,d===13){if(a=Gr(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return Nr=a,null}function ho(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case ct:return 1;case he:return 4;case ge:case Le:return 16;case kt:return 536870912;default:return 16}default:return 16}}var Sn=null,fo=null,Qr=null;function Yc(){if(Qr)return Qr;var a,l=fo,d=l.length,p,b="value"in Sn?Sn.value:Sn.textContent,w=b.length;for(a=0;a<d&&l[a]===b[a];a++);var D=d-a;for(p=1;p<=D&&l[d-p]===b[w-p];p++);return Qr=b.slice(a,1<p?1-p:void 0)}function ba(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function jr(){return!0}function Sl(){return!1}function Hs(a){function l(d,p,b,w,D){this._reactName=d,this._targetInst=b,this.type=p,this.nativeEvent=w,this.target=D,this.currentTarget=null;for(var q in a)a.hasOwnProperty(q)&&(d=a[q],this[q]=d?d(w):w[q]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?jr:Sl,this.isPropagationStopped=Sl,this}return we(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=jr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=jr)},persist:function(){},isPersistent:jr}),l}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=Hs(Sr),_i=we({},Sr,{view:0,detail:0}),mo=Hs(_i),po,go,kn,wa=we({},_i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ns,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==kn&&(kn&&a.type==="mousemove"?(po=a.screenX-kn.screenX,go=a.screenY-kn.screenY):go=po=0,kn=a),po)},movementY:function(a){return"movementY"in a?a.movementY:go}}),kl=Hs(wa),Zc=we({},wa,{dataTransfer:0}),Xc=Hs(Zc),fn=we({},_i,{relatedTarget:0}),xo=Hs(fn),Qc=we({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ci=Hs(Qc),m=we({},Sr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),N=Hs(m),T=we({},Sr,{data:0}),z=Hs(T),ae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ze={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yt(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=ze[a])?!!l[a]:!1}function ns(){return yt}var qt=we({},_i,{key:function(a){if(a.key){var l=ae[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=ba(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?pe[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ns,charCode:function(a){return a.type==="keypress"?ba(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ba(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),vs=Hs(qt),zn=we({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kr=Hs(zn),_r=we({},_i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ns}),Cr=Hs(_r),yo=we({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),_l=Hs(yo),jj=we({},wa,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Sj=Hs(jj),kj=[9,13,27,32],dh=u&&"CompositionEvent"in window,Cl=null;u&&"documentMode"in document&&(Cl=document.documentMode);var _j=u&&"TextEvent"in window&&!Cl,qp=u&&(!dh||Cl&&8<Cl&&11>=Cl),Wp=" ",Hp=!1;function Gp(a,l){switch(a){case"keyup":return kj.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kp(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var bo=!1;function Cj(a,l){switch(a){case"compositionend":return Kp(l);case"keypress":return l.which!==32?null:(Hp=!0,Wp);case"textInput":return a=l.data,a===Wp&&Hp?null:a;default:return null}}function Ej(a,l){if(bo)return a==="compositionend"||!dh&&Gp(a,l)?(a=Yc(),Qr=fo=Sn=null,bo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return qp&&l.locale!=="ko"?null:l.data;default:return null}}var Tj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jp(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!Tj[a.type]:l==="textarea"}function Yp(a,l,d,p){ss(p),l=rd(l,"onChange"),0<l.length&&(d=new va("onChange","change",null,d,p),a.push({event:d,listeners:l}))}var El=null,Tl=null;function Pj(a){mg(a,0)}function ed(a){var l=So(a);if(ye(l))return a}function Aj(a,l){if(a==="change")return l}var Zp=!1;if(u){var uh;if(u){var hh="oninput"in document;if(!hh){var Xp=document.createElement("div");Xp.setAttribute("oninput","return;"),hh=typeof Xp.oninput=="function"}uh=hh}else uh=!1;Zp=uh&&(!document.documentMode||9<document.documentMode)}function Qp(){El&&(El.detachEvent("onpropertychange",eg),Tl=El=null)}function eg(a){if(a.propertyName==="value"&&ed(Tl)){var l=[];Yp(l,Tl,a,On(a)),Rt(Pj,l)}}function Ij(a,l,d){a==="focusin"?(Qp(),El=l,Tl=d,El.attachEvent("onpropertychange",eg)):a==="focusout"&&Qp()}function Rj(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ed(Tl)}function Mj(a,l){if(a==="click")return ed(l)}function Dj(a,l){if(a==="input"||a==="change")return ed(l)}function Oj(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Xn=typeof Object.is=="function"?Object.is:Oj;function Pl(a,l){if(Xn(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),p=Object.keys(l);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var b=d[p];if(!f.call(l,b)||!Xn(a[b],l[b]))return!1}return!0}function tg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function sg(a,l){var d=tg(a);a=0;for(var p;d;){if(d.nodeType===3){if(p=a+d.textContent.length,a<=l&&p>=l)return{node:d,offset:l-a};a=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=tg(d)}}function ng(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?ng(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function rg(){for(var a=window,l=Xe();l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=Xe(a.document)}return l}function fh(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function Lj(a){var l=rg(),d=a.focusedElem,p=a.selectionRange;if(l!==d&&d&&d.ownerDocument&&ng(d.ownerDocument.documentElement,d)){if(p!==null&&fh(d)){if(l=p.start,a=p.end,a===void 0&&(a=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(a,d.value.length);else if(a=(l=d.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var b=d.textContent.length,w=Math.min(p.start,b);p=p.end===void 0?w:Math.min(p.end,b),!a.extend&&w>p&&(b=p,p=w,w=b),b=sg(d,w);var D=sg(d,p);b&&D&&(a.rangeCount!==1||a.anchorNode!==b.node||a.anchorOffset!==b.offset||a.focusNode!==D.node||a.focusOffset!==D.offset)&&(l=l.createRange(),l.setStart(b.node,b.offset),a.removeAllRanges(),w>p?(a.addRange(l),a.extend(D.node,D.offset)):(l.setEnd(D.node,D.offset),a.addRange(l)))}}for(l=[],a=d;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)a=l[d],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var zj=u&&"documentMode"in document&&11>=document.documentMode,vo=null,mh=null,Al=null,ph=!1;function ig(a,l,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ph||vo==null||vo!==Xe(p)||(p=vo,"selectionStart"in p&&fh(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Al&&Pl(Al,p)||(Al=p,p=rd(mh,"onSelect"),0<p.length&&(l=new va("onSelect","select",null,l,d),a.push({event:l,listeners:p}),l.target=vo)))}function td(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var wo={animationend:td("Animation","AnimationEnd"),animationiteration:td("Animation","AnimationIteration"),animationstart:td("Animation","AnimationStart"),transitionend:td("Transition","TransitionEnd")},gh={},ag={};u&&(ag=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function sd(a){if(gh[a])return gh[a];if(!wo[a])return a;var l=wo[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in ag)return gh[a]=l[d];return a}var og=sd("animationend"),lg=sd("animationiteration"),cg=sd("animationstart"),dg=sd("transitionend"),ug=new Map,hg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(a,l){ug.set(a,l),o(l,[a])}for(var xh=0;xh<hg.length;xh++){var yh=hg[xh],Uj=yh.toLowerCase(),Fj=yh[0].toUpperCase()+yh.slice(1);Ei(Uj,"on"+Fj)}Ei(og,"onAnimationEnd"),Ei(lg,"onAnimationIteration"),Ei(cg,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(dg,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$j=new Set("cancel close invalid load scroll toggle".split(" ").concat(Il));function fg(a,l,d){var p=a.type||"unknown-event";a.currentTarget=d,Hr(p,l,void 0,a),a.currentTarget=null}function mg(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var p=a[d],b=p.event;p=p.listeners;e:{var w=void 0;if(l)for(var D=p.length-1;0<=D;D--){var q=p[D],Q=q.instance,me=q.currentTarget;if(q=q.listener,Q!==w&&b.isPropagationStopped())break e;fg(b,q,me),w=Q}else for(D=0;D<p.length;D++){if(q=p[D],Q=q.instance,me=q.currentTarget,q=q.listener,Q!==w&&b.isPropagationStopped())break e;fg(b,q,me),w=Q}}}if(mr)throw a=Us,mr=!1,Us=null,a}function Zt(a,l){var d=l[_h];d===void 0&&(d=l[_h]=new Set);var p=a+"__bubble";d.has(p)||(pg(l,a,2,!1),d.add(p))}function bh(a,l,d){var p=0;l&&(p|=4),pg(d,a,p,l)}var nd="_reactListening"+Math.random().toString(36).slice(2);function Rl(a){if(!a[nd]){a[nd]=!0,r.forEach(function(d){d!=="selectionchange"&&($j.has(d)||bh(d,!1,a),bh(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[nd]||(l[nd]=!0,bh("selectionchange",!1,l))}}function pg(a,l,d,p){switch(ho(l)){case 1:var b=wr;break;case 4:b=Jc;break;default:b=jl}d=b.bind(null,l,d,a),b=void 0,!zt||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),p?b!==void 0?a.addEventListener(l,d,{capture:!0,passive:b}):a.addEventListener(l,d,!0):b!==void 0?a.addEventListener(l,d,{passive:b}):a.addEventListener(l,d,!1)}function vh(a,l,d,p,b){var w=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var D=p.tag;if(D===3||D===4){var q=p.stateNode.containerInfo;if(q===b||q.nodeType===8&&q.parentNode===b)break;if(D===4)for(D=p.return;D!==null;){var Q=D.tag;if((Q===3||Q===4)&&(Q=D.stateNode.containerInfo,Q===b||Q.nodeType===8&&Q.parentNode===b))return;D=D.return}for(;q!==null;){if(D=Na(q),D===null)return;if(Q=D.tag,Q===5||Q===6){p=w=D;continue e}q=q.parentNode}}p=p.return}Rt(function(){var me=w,Ae=On(d),Re=[];e:{var Ee=ug.get(a);if(Ee!==void 0){var qe=va,Ze=a;switch(a){case"keypress":if(ba(d)===0)break e;case"keydown":case"keyup":qe=vs;break;case"focusin":Ze="focus",qe=xo;break;case"focusout":Ze="blur",qe=xo;break;case"beforeblur":case"afterblur":qe=xo;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=Xc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=Cr;break;case og:case lg:case cg:qe=Ci;break;case dg:qe=_l;break;case"scroll":qe=mo;break;case"wheel":qe=Sj;break;case"copy":case"cut":case"paste":qe=N;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=kr}var et=(l&4)!==0,xs=!et&&a==="scroll",ie=et?Ee!==null?Ee+"Capture":null:Ee;et=[];for(var ee=me,de;ee!==null;){de=ee;var Oe=de.stateNode;if(de.tag===5&&Oe!==null&&(de=Oe,ie!==null&&(Oe=Ot(ee,ie),Oe!=null&&et.push(Ml(ee,Oe,de)))),xs)break;ee=ee.return}0<et.length&&(Ee=new qe(Ee,Ze,null,d,Ae),Re.push({event:Ee,listeners:et}))}}if((l&7)===0){e:{if(Ee=a==="mouseover"||a==="pointerover",qe=a==="mouseout"||a==="pointerout",Ee&&d!==Dn&&(Ze=d.relatedTarget||d.fromElement)&&(Na(Ze)||Ze[ei]))break e;if((qe||Ee)&&(Ee=Ae.window===Ae?Ae:(Ee=Ae.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,qe?(Ze=d.relatedTarget||d.toElement,qe=me,Ze=Ze?Na(Ze):null,Ze!==null&&(xs=en(Ze),Ze!==xs||Ze.tag!==5&&Ze.tag!==6)&&(Ze=null)):(qe=null,Ze=me),qe!==Ze)){if(et=kl,Oe="onMouseLeave",ie="onMouseEnter",ee="mouse",(a==="pointerout"||a==="pointerover")&&(et=kr,Oe="onPointerLeave",ie="onPointerEnter",ee="pointer"),xs=qe==null?Ee:So(qe),de=Ze==null?Ee:So(Ze),Ee=new et(Oe,ee+"leave",qe,d,Ae),Ee.target=xs,Ee.relatedTarget=de,Oe=null,Na(Ae)===me&&(et=new et(ie,ee+"enter",Ze,d,Ae),et.target=de,et.relatedTarget=xs,Oe=et),xs=Oe,qe&&Ze)t:{for(et=qe,ie=Ze,ee=0,de=et;de;de=No(de))ee++;for(de=0,Oe=ie;Oe;Oe=No(Oe))de++;for(;0<ee-de;)et=No(et),ee--;for(;0<de-ee;)ie=No(ie),de--;for(;ee--;){if(et===ie||ie!==null&&et===ie.alternate)break t;et=No(et),ie=No(ie)}et=null}else et=null;qe!==null&&gg(Re,Ee,qe,et,!1),Ze!==null&&xs!==null&&gg(Re,xs,Ze,et,!0)}}e:{if(Ee=me?So(me):window,qe=Ee.nodeName&&Ee.nodeName.toLowerCase(),qe==="select"||qe==="input"&&Ee.type==="file")var tt=Aj;else if(Jp(Ee))if(Zp)tt=Dj;else{tt=Rj;var rt=Ij}else(qe=Ee.nodeName)&&qe.toLowerCase()==="input"&&(Ee.type==="checkbox"||Ee.type==="radio")&&(tt=Mj);if(tt&&(tt=tt(a,me))){Yp(Re,tt,d,Ae);break e}rt&&rt(a,Ee,me),a==="focusout"&&(rt=Ee._wrapperState)&&rt.controlled&&Ee.type==="number"&&ke(Ee,"number",Ee.value)}switch(rt=me?So(me):window,a){case"focusin":(Jp(rt)||rt.contentEditable==="true")&&(vo=rt,mh=me,Al=null);break;case"focusout":Al=mh=vo=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,ig(Re,d,Ae);break;case"selectionchange":if(zj)break;case"keydown":case"keyup":ig(Re,d,Ae)}var it;if(dh)e:{switch(a){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else bo?Gp(a,d)&&(ht="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(ht="onCompositionStart");ht&&(qp&&d.locale!=="ko"&&(bo||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&bo&&(it=Yc()):(Sn=Ae,fo="value"in Sn?Sn.value:Sn.textContent,bo=!0)),rt=rd(me,ht),0<rt.length&&(ht=new z(ht,a,null,d,Ae),Re.push({event:ht,listeners:rt}),it?ht.data=it:(it=Kp(d),it!==null&&(ht.data=it)))),(it=_j?Cj(a,d):Ej(a,d))&&(me=rd(me,"onBeforeInput"),0<me.length&&(Ae=new z("onBeforeInput","beforeinput",null,d,Ae),Re.push({event:Ae,listeners:me}),Ae.data=it))}mg(Re,l)})}function Ml(a,l,d){return{instance:a,listener:l,currentTarget:d}}function rd(a,l){for(var d=l+"Capture",p=[];a!==null;){var b=a,w=b.stateNode;b.tag===5&&w!==null&&(b=w,w=Ot(a,d),w!=null&&p.unshift(Ml(a,w,b)),w=Ot(a,l),w!=null&&p.push(Ml(a,w,b))),a=a.return}return p}function No(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function gg(a,l,d,p,b){for(var w=l._reactName,D=[];d!==null&&d!==p;){var q=d,Q=q.alternate,me=q.stateNode;if(Q!==null&&Q===p)break;q.tag===5&&me!==null&&(q=me,b?(Q=Ot(d,w),Q!=null&&D.unshift(Ml(d,Q,q))):b||(Q=Ot(d,w),Q!=null&&D.push(Ml(d,Q,q)))),d=d.return}D.length!==0&&a.push({event:l,listeners:D})}var Vj=/\r\n?/g,Bj=/\u0000|\uFFFD/g;function xg(a){return(typeof a=="string"?a:""+a).replace(Vj,`
`).replace(Bj,"")}function id(a,l,d){if(l=xg(l),xg(a)!==l&&d)throw Error(s(425))}function ad(){}var wh=null,Nh=null;function jh(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Sh=typeof setTimeout=="function"?setTimeout:void 0,qj=typeof clearTimeout=="function"?clearTimeout:void 0,yg=typeof Promise=="function"?Promise:void 0,Wj=typeof queueMicrotask=="function"?queueMicrotask:typeof yg<"u"?function(a){return yg.resolve(null).then(a).catch(Hj)}:Sh;function Hj(a){setTimeout(function(){throw a})}function kh(a,l){var d=l,p=0;do{var b=d.nextSibling;if(a.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(p===0){a.removeChild(b),ki(l);return}p--}else d!=="$"&&d!=="$?"&&d!=="$!"||p++;d=b}while(d);ki(l)}function Ti(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function bg(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}var jo=Math.random().toString(36).slice(2),Er="__reactFiber$"+jo,Dl="__reactProps$"+jo,ei="__reactContainer$"+jo,_h="__reactEvents$"+jo,Gj="__reactListeners$"+jo,Kj="__reactHandles$"+jo;function Na(a){var l=a[Er];if(l)return l;for(var d=a.parentNode;d;){if(l=d[ei]||d[Er]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=bg(a);a!==null;){if(d=a[Er])return d;a=bg(a)}return l}a=d,d=a.parentNode}return null}function Ol(a){return a=a[Er]||a[ei],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function So(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(s(33))}function od(a){return a[Dl]||null}var Ch=[],ko=-1;function Pi(a){return{current:a}}function Xt(a){0>ko||(a.current=Ch[ko],Ch[ko]=null,ko--)}function Gt(a,l){ko++,Ch[ko]=a.current,a.current=l}var Ai={},Gs=Pi(Ai),mn=Pi(!1),ja=Ai;function _o(a,l){var d=a.type.contextTypes;if(!d)return Ai;var p=a.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var b={},w;for(w in d)b[w]=l[w];return p&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=b),b}function pn(a){return a=a.childContextTypes,a!=null}function ld(){Xt(mn),Xt(Gs)}function vg(a,l,d){if(Gs.current!==Ai)throw Error(s(168));Gt(Gs,l),Gt(mn,d)}function wg(a,l,d){var p=a.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return d;p=p.getChildContext();for(var b in p)if(!(b in l))throw Error(s(108,Pe(a)||"Unknown",b));return we({},d,p)}function cd(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ai,ja=Gs.current,Gt(Gs,a),Gt(mn,mn.current),!0}function Ng(a,l,d){var p=a.stateNode;if(!p)throw Error(s(169));d?(a=wg(a,l,ja),p.__reactInternalMemoizedMergedChildContext=a,Xt(mn),Xt(Gs),Gt(Gs,a)):Xt(mn),Gt(mn,d)}var ti=null,dd=!1,Eh=!1;function jg(a){ti===null?ti=[a]:ti.push(a)}function Jj(a){dd=!0,jg(a)}function Ii(){if(!Eh&&ti!==null){Eh=!0;var a=0,l=Ct;try{var d=ti;for(Ct=1;a<d.length;a++){var p=d[a];do p=p(!0);while(p!==null)}ti=null,dd=!1}catch(b){throw ti!==null&&(ti=ti.slice(a+1)),G(ct,Ii),b}finally{Ct=l,Eh=!1}}return null}var Co=[],Eo=0,ud=null,hd=0,Un=[],Fn=0,Sa=null,si=1,ni="";function ka(a,l){Co[Eo++]=hd,Co[Eo++]=ud,ud=a,hd=l}function Sg(a,l,d){Un[Fn++]=si,Un[Fn++]=ni,Un[Fn++]=Sa,Sa=a;var p=si;a=ni;var b=32-_t(p)-1;p&=~(1<<b),d+=1;var w=32-_t(l)+b;if(30<w){var D=b-b%5;w=(p&(1<<D)-1).toString(32),p>>=D,b-=D,si=1<<32-_t(l)+b|d<<b|p,ni=w+a}else si=1<<w|d<<b|p,ni=a}function Th(a){a.return!==null&&(ka(a,1),Sg(a,1,0))}function Ph(a){for(;a===ud;)ud=Co[--Eo],Co[Eo]=null,hd=Co[--Eo],Co[Eo]=null;for(;a===Sa;)Sa=Un[--Fn],Un[Fn]=null,ni=Un[--Fn],Un[Fn]=null,si=Un[--Fn],Un[Fn]=null}var _n=null,Cn=null,es=!1,Qn=null;function kg(a,l){var d=qn(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=a,l=a.deletions,l===null?(a.deletions=[d],a.flags|=16):l.push(d)}function _g(a,l){switch(a.tag){case 5:var d=a.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,_n=a,Cn=Ti(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,_n=a,Cn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Sa!==null?{id:si,overflow:ni}:null,a.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=qn(18,null,null,0),d.stateNode=l,d.return=a,a.child=d,_n=a,Cn=null,!0):!1;default:return!1}}function Ah(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Ih(a){if(es){var l=Cn;if(l){var d=l;if(!_g(a,l)){if(Ah(a))throw Error(s(418));l=Ti(d.nextSibling);var p=_n;l&&_g(a,l)?kg(p,d):(a.flags=a.flags&-4097|2,es=!1,_n=a)}}else{if(Ah(a))throw Error(s(418));a.flags=a.flags&-4097|2,es=!1,_n=a}}}function Cg(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;_n=a}function fd(a){if(a!==_n)return!1;if(!es)return Cg(a),es=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!jh(a.type,a.memoizedProps)),l&&(l=Cn)){if(Ah(a))throw Eg(),Error(s(418));for(;l;)kg(a,l),l=Ti(l.nextSibling)}if(Cg(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"){if(l===0){Cn=Ti(a.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}a=a.nextSibling}Cn=null}}else Cn=_n?Ti(a.stateNode.nextSibling):null;return!0}function Eg(){for(var a=Cn;a;)a=Ti(a.nextSibling)}function To(){Cn=_n=null,es=!1}function Rh(a){Qn===null?Qn=[a]:Qn.push(a)}var Yj=J.ReactCurrentBatchConfig;function Ll(a,l,d){if(a=d.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(s(309));var p=d.stateNode}if(!p)throw Error(s(147,a));var b=p,w=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===w?l.ref:(l=function(D){var q=b.refs;D===null?delete q[w]:q[w]=D},l._stringRef=w,l)}if(typeof a!="string")throw Error(s(284));if(!d._owner)throw Error(s(290,a))}return a}function md(a,l){throw a=Object.prototype.toString.call(l),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function Tg(a){var l=a._init;return l(a._payload)}function Pg(a){function l(ie,ee){if(a){var de=ie.deletions;de===null?(ie.deletions=[ee],ie.flags|=16):de.push(ee)}}function d(ie,ee){if(!a)return null;for(;ee!==null;)l(ie,ee),ee=ee.sibling;return null}function p(ie,ee){for(ie=new Map;ee!==null;)ee.key!==null?ie.set(ee.key,ee):ie.set(ee.index,ee),ee=ee.sibling;return ie}function b(ie,ee){return ie=Fi(ie,ee),ie.index=0,ie.sibling=null,ie}function w(ie,ee,de){return ie.index=de,a?(de=ie.alternate,de!==null?(de=de.index,de<ee?(ie.flags|=2,ee):de):(ie.flags|=2,ee)):(ie.flags|=1048576,ee)}function D(ie){return a&&ie.alternate===null&&(ie.flags|=2),ie}function q(ie,ee,de,Oe){return ee===null||ee.tag!==6?(ee=kf(de,ie.mode,Oe),ee.return=ie,ee):(ee=b(ee,de),ee.return=ie,ee)}function Q(ie,ee,de,Oe){var tt=de.type;return tt===M?Ae(ie,ee,de.props.children,Oe,de.key):ee!==null&&(ee.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===je&&Tg(tt)===ee.type)?(Oe=b(ee,de.props),Oe.ref=Ll(ie,ee,de),Oe.return=ie,Oe):(Oe=zd(de.type,de.key,de.props,null,ie.mode,Oe),Oe.ref=Ll(ie,ee,de),Oe.return=ie,Oe)}function me(ie,ee,de,Oe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==de.containerInfo||ee.stateNode.implementation!==de.implementation?(ee=_f(de,ie.mode,Oe),ee.return=ie,ee):(ee=b(ee,de.children||[]),ee.return=ie,ee)}function Ae(ie,ee,de,Oe,tt){return ee===null||ee.tag!==7?(ee=Ra(de,ie.mode,Oe,tt),ee.return=ie,ee):(ee=b(ee,de),ee.return=ie,ee)}function Re(ie,ee,de){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=kf(""+ee,ie.mode,de),ee.return=ie,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case te:return de=zd(ee.type,ee.key,ee.props,null,ie.mode,de),de.ref=Ll(ie,null,ee),de.return=ie,de;case H:return ee=_f(ee,ie.mode,de),ee.return=ie,ee;case je:var Oe=ee._init;return Re(ie,Oe(ee._payload),de)}if(We(ee)||be(ee))return ee=Ra(ee,ie.mode,de,null),ee.return=ie,ee;md(ie,ee)}return null}function Ee(ie,ee,de,Oe){var tt=ee!==null?ee.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return tt!==null?null:q(ie,ee,""+de,Oe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case te:return de.key===tt?Q(ie,ee,de,Oe):null;case H:return de.key===tt?me(ie,ee,de,Oe):null;case je:return tt=de._init,Ee(ie,ee,tt(de._payload),Oe)}if(We(de)||be(de))return tt!==null?null:Ae(ie,ee,de,Oe,null);md(ie,de)}return null}function qe(ie,ee,de,Oe,tt){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return ie=ie.get(de)||null,q(ee,ie,""+Oe,tt);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case te:return ie=ie.get(Oe.key===null?de:Oe.key)||null,Q(ee,ie,Oe,tt);case H:return ie=ie.get(Oe.key===null?de:Oe.key)||null,me(ee,ie,Oe,tt);case je:var rt=Oe._init;return qe(ie,ee,de,rt(Oe._payload),tt)}if(We(Oe)||be(Oe))return ie=ie.get(de)||null,Ae(ee,ie,Oe,tt,null);md(ee,Oe)}return null}function Ze(ie,ee,de,Oe){for(var tt=null,rt=null,it=ee,ht=ee=0,Rs=null;it!==null&&ht<de.length;ht++){it.index>ht?(Rs=it,it=null):Rs=it.sibling;var Lt=Ee(ie,it,de[ht],Oe);if(Lt===null){it===null&&(it=Rs);break}a&&it&&Lt.alternate===null&&l(ie,it),ee=w(Lt,ee,ht),rt===null?tt=Lt:rt.sibling=Lt,rt=Lt,it=Rs}if(ht===de.length)return d(ie,it),es&&ka(ie,ht),tt;if(it===null){for(;ht<de.length;ht++)it=Re(ie,de[ht],Oe),it!==null&&(ee=w(it,ee,ht),rt===null?tt=it:rt.sibling=it,rt=it);return es&&ka(ie,ht),tt}for(it=p(ie,it);ht<de.length;ht++)Rs=qe(it,ie,ht,de[ht],Oe),Rs!==null&&(a&&Rs.alternate!==null&&it.delete(Rs.key===null?ht:Rs.key),ee=w(Rs,ee,ht),rt===null?tt=Rs:rt.sibling=Rs,rt=Rs);return a&&it.forEach(function($i){return l(ie,$i)}),es&&ka(ie,ht),tt}function et(ie,ee,de,Oe){var tt=be(de);if(typeof tt!="function")throw Error(s(150));if(de=tt.call(de),de==null)throw Error(s(151));for(var rt=tt=null,it=ee,ht=ee=0,Rs=null,Lt=de.next();it!==null&&!Lt.done;ht++,Lt=de.next()){it.index>ht?(Rs=it,it=null):Rs=it.sibling;var $i=Ee(ie,it,Lt.value,Oe);if($i===null){it===null&&(it=Rs);break}a&&it&&$i.alternate===null&&l(ie,it),ee=w($i,ee,ht),rt===null?tt=$i:rt.sibling=$i,rt=$i,it=Rs}if(Lt.done)return d(ie,it),es&&ka(ie,ht),tt;if(it===null){for(;!Lt.done;ht++,Lt=de.next())Lt=Re(ie,Lt.value,Oe),Lt!==null&&(ee=w(Lt,ee,ht),rt===null?tt=Lt:rt.sibling=Lt,rt=Lt);return es&&ka(ie,ht),tt}for(it=p(ie,it);!Lt.done;ht++,Lt=de.next())Lt=qe(it,ie,ht,Lt.value,Oe),Lt!==null&&(a&&Lt.alternate!==null&&it.delete(Lt.key===null?ht:Lt.key),ee=w(Lt,ee,ht),rt===null?tt=Lt:rt.sibling=Lt,rt=Lt);return a&&it.forEach(function(TS){return l(ie,TS)}),es&&ka(ie,ht),tt}function xs(ie,ee,de,Oe){if(typeof de=="object"&&de!==null&&de.type===M&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case te:e:{for(var tt=de.key,rt=ee;rt!==null;){if(rt.key===tt){if(tt=de.type,tt===M){if(rt.tag===7){d(ie,rt.sibling),ee=b(rt,de.props.children),ee.return=ie,ie=ee;break e}}else if(rt.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===je&&Tg(tt)===rt.type){d(ie,rt.sibling),ee=b(rt,de.props),ee.ref=Ll(ie,rt,de),ee.return=ie,ie=ee;break e}d(ie,rt);break}else l(ie,rt);rt=rt.sibling}de.type===M?(ee=Ra(de.props.children,ie.mode,Oe,de.key),ee.return=ie,ie=ee):(Oe=zd(de.type,de.key,de.props,null,ie.mode,Oe),Oe.ref=Ll(ie,ee,de),Oe.return=ie,ie=Oe)}return D(ie);case H:e:{for(rt=de.key;ee!==null;){if(ee.key===rt)if(ee.tag===4&&ee.stateNode.containerInfo===de.containerInfo&&ee.stateNode.implementation===de.implementation){d(ie,ee.sibling),ee=b(ee,de.children||[]),ee.return=ie,ie=ee;break e}else{d(ie,ee);break}else l(ie,ee);ee=ee.sibling}ee=_f(de,ie.mode,Oe),ee.return=ie,ie=ee}return D(ie);case je:return rt=de._init,xs(ie,ee,rt(de._payload),Oe)}if(We(de))return Ze(ie,ee,de,Oe);if(be(de))return et(ie,ee,de,Oe);md(ie,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,ee!==null&&ee.tag===6?(d(ie,ee.sibling),ee=b(ee,de),ee.return=ie,ie=ee):(d(ie,ee),ee=kf(de,ie.mode,Oe),ee.return=ie,ie=ee),D(ie)):d(ie,ee)}return xs}var Po=Pg(!0),Ag=Pg(!1),pd=Pi(null),gd=null,Ao=null,Mh=null;function Dh(){Mh=Ao=gd=null}function Oh(a){var l=pd.current;Xt(pd),a._currentValue=l}function Lh(a,l,d){for(;a!==null;){var p=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),a===d)break;a=a.return}}function Io(a,l){gd=a,Mh=Ao=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(gn=!0),a.firstContext=null)}function $n(a){var l=a._currentValue;if(Mh!==a)if(a={context:a,memoizedValue:l,next:null},Ao===null){if(gd===null)throw Error(s(308));Ao=a,gd.dependencies={lanes:0,firstContext:a}}else Ao=Ao.next=a;return l}var _a=null;function zh(a){_a===null?_a=[a]:_a.push(a)}function Ig(a,l,d,p){var b=l.interleaved;return b===null?(d.next=d,zh(l)):(d.next=b.next,b.next=d),l.interleaved=d,ri(a,p)}function ri(a,l){a.lanes|=l;var d=a.alternate;for(d!==null&&(d.lanes|=l),d=a,a=a.return;a!==null;)a.childLanes|=l,d=a.alternate,d!==null&&(d.childLanes|=l),d=a,a=a.return;return d.tag===3?d.stateNode:null}var Ri=!1;function Uh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rg(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ii(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Mi(a,l,d){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(Mt&2)!==0){var b=p.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),p.pending=l,ri(a,d)}return b=p.interleaved,b===null?(l.next=l,zh(p)):(l.next=b.next,b.next=l),p.interleaved=l,ri(a,d)}function xd(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var p=l.lanes;p&=a.pendingLanes,d|=p,l.lanes=d,yl(a,d)}}function Mg(a,l){var d=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var b=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var D={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};w===null?b=w=D:w=w.next=D,d=d.next}while(d!==null);w===null?b=w=l:w=w.next=l}else b=w=l;d={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:p.shared,effects:p.effects},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}function yd(a,l,d,p){var b=a.updateQueue;Ri=!1;var w=b.firstBaseUpdate,D=b.lastBaseUpdate,q=b.shared.pending;if(q!==null){b.shared.pending=null;var Q=q,me=Q.next;Q.next=null,D===null?w=me:D.next=me,D=Q;var Ae=a.alternate;Ae!==null&&(Ae=Ae.updateQueue,q=Ae.lastBaseUpdate,q!==D&&(q===null?Ae.firstBaseUpdate=me:q.next=me,Ae.lastBaseUpdate=Q))}if(w!==null){var Re=b.baseState;D=0,Ae=me=Q=null,q=w;do{var Ee=q.lane,qe=q.eventTime;if((p&Ee)===Ee){Ae!==null&&(Ae=Ae.next={eventTime:qe,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Ze=a,et=q;switch(Ee=l,qe=d,et.tag){case 1:if(Ze=et.payload,typeof Ze=="function"){Re=Ze.call(qe,Re,Ee);break e}Re=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=et.payload,Ee=typeof Ze=="function"?Ze.call(qe,Re,Ee):Ze,Ee==null)break e;Re=we({},Re,Ee);break e;case 2:Ri=!0}}q.callback!==null&&q.lane!==0&&(a.flags|=64,Ee=b.effects,Ee===null?b.effects=[q]:Ee.push(q))}else qe={eventTime:qe,lane:Ee,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Ae===null?(me=Ae=qe,Q=Re):Ae=Ae.next=qe,D|=Ee;if(q=q.next,q===null){if(q=b.shared.pending,q===null)break;Ee=q,q=Ee.next,Ee.next=null,b.lastBaseUpdate=Ee,b.shared.pending=null}}while(!0);if(Ae===null&&(Q=Re),b.baseState=Q,b.firstBaseUpdate=me,b.lastBaseUpdate=Ae,l=b.shared.interleaved,l!==null){b=l;do D|=b.lane,b=b.next;while(b!==l)}else w===null&&(b.shared.lanes=0);Ta|=D,a.lanes=D,a.memoizedState=Re}}function Dg(a,l,d){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var p=a[l],b=p.callback;if(b!==null){if(p.callback=null,p=d,typeof b!="function")throw Error(s(191,b));b.call(p)}}}var zl={},Tr=Pi(zl),Ul=Pi(zl),Fl=Pi(zl);function Ca(a){if(a===zl)throw Error(s(174));return a}function Fh(a,l){switch(Gt(Fl,l),Gt(Ul,a),Gt(Tr,zl),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Wt(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=Wt(l,a)}Xt(Tr),Gt(Tr,l)}function Ro(){Xt(Tr),Xt(Ul),Xt(Fl)}function Og(a){Ca(Fl.current);var l=Ca(Tr.current),d=Wt(l,a.type);l!==d&&(Gt(Ul,a),Gt(Tr,d))}function $h(a){Ul.current===a&&(Xt(Tr),Xt(Ul))}var rs=Pi(0);function bd(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Vh=[];function Bh(){for(var a=0;a<Vh.length;a++)Vh[a]._workInProgressVersionPrimary=null;Vh.length=0}var vd=J.ReactCurrentDispatcher,qh=J.ReactCurrentBatchConfig,Ea=0,is=null,Cs=null,As=null,wd=!1,$l=!1,Vl=0,Zj=0;function Ks(){throw Error(s(321))}function Wh(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!Xn(a[d],l[d]))return!1;return!0}function Hh(a,l,d,p,b,w){if(Ea=w,is=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,vd.current=a===null||a.memoizedState===null?tS:sS,a=d(p,b),$l){w=0;do{if($l=!1,Vl=0,25<=w)throw Error(s(301));w+=1,As=Cs=null,l.updateQueue=null,vd.current=nS,a=d(p,b)}while($l)}if(vd.current=Sd,l=Cs!==null&&Cs.next!==null,Ea=0,As=Cs=is=null,wd=!1,l)throw Error(s(300));return a}function Gh(){var a=Vl!==0;return Vl=0,a}function Pr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return As===null?is.memoizedState=As=a:As=As.next=a,As}function Vn(){if(Cs===null){var a=is.alternate;a=a!==null?a.memoizedState:null}else a=Cs.next;var l=As===null?is.memoizedState:As.next;if(l!==null)As=l,Cs=a;else{if(a===null)throw Error(s(310));Cs=a,a={memoizedState:Cs.memoizedState,baseState:Cs.baseState,baseQueue:Cs.baseQueue,queue:Cs.queue,next:null},As===null?is.memoizedState=As=a:As=As.next=a}return As}function Bl(a,l){return typeof l=="function"?l(a):l}function Kh(a){var l=Vn(),d=l.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var p=Cs,b=p.baseQueue,w=d.pending;if(w!==null){if(b!==null){var D=b.next;b.next=w.next,w.next=D}p.baseQueue=b=w,d.pending=null}if(b!==null){w=b.next,p=p.baseState;var q=D=null,Q=null,me=w;do{var Ae=me.lane;if((Ea&Ae)===Ae)Q!==null&&(Q=Q.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),p=me.hasEagerState?me.eagerState:a(p,me.action);else{var Re={lane:Ae,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};Q===null?(q=Q=Re,D=p):Q=Q.next=Re,is.lanes|=Ae,Ta|=Ae}me=me.next}while(me!==null&&me!==w);Q===null?D=p:Q.next=q,Xn(p,l.memoizedState)||(gn=!0),l.memoizedState=p,l.baseState=D,l.baseQueue=Q,d.lastRenderedState=p}if(a=d.interleaved,a!==null){b=a;do w=b.lane,is.lanes|=w,Ta|=w,b=b.next;while(b!==a)}else b===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Jh(a){var l=Vn(),d=l.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var p=d.dispatch,b=d.pending,w=l.memoizedState;if(b!==null){d.pending=null;var D=b=b.next;do w=a(w,D.action),D=D.next;while(D!==b);Xn(w,l.memoizedState)||(gn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,p]}function Lg(){}function zg(a,l){var d=is,p=Vn(),b=l(),w=!Xn(p.memoizedState,b);if(w&&(p.memoizedState=b,gn=!0),p=p.queue,Yh($g.bind(null,d,p,a),[a]),p.getSnapshot!==l||w||As!==null&&As.memoizedState.tag&1){if(d.flags|=2048,ql(9,Fg.bind(null,d,p,b,l),void 0,null),Is===null)throw Error(s(349));(Ea&30)!==0||Ug(d,l,b)}return b}function Ug(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=is.updateQueue,l===null?(l={lastEffect:null,stores:null},is.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function Fg(a,l,d,p){l.value=d,l.getSnapshot=p,Vg(l)&&Bg(a)}function $g(a,l,d){return d(function(){Vg(l)&&Bg(a)})}function Vg(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!Xn(a,d)}catch{return!0}}function Bg(a){var l=ri(a,1);l!==null&&nr(l,a,1,-1)}function qg(a){var l=Pr();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:a},l.queue=a,a=a.dispatch=eS.bind(null,is,a),[l.memoizedState,a]}function ql(a,l,d,p){return a={tag:a,create:l,destroy:d,deps:p,next:null},l=is.updateQueue,l===null?(l={lastEffect:null,stores:null},is.updateQueue=l,l.lastEffect=a.next=a):(d=l.lastEffect,d===null?l.lastEffect=a.next=a:(p=d.next,d.next=a,a.next=p,l.lastEffect=a)),a}function Wg(){return Vn().memoizedState}function Nd(a,l,d,p){var b=Pr();is.flags|=a,b.memoizedState=ql(1|l,d,void 0,p===void 0?null:p)}function jd(a,l,d,p){var b=Vn();p=p===void 0?null:p;var w=void 0;if(Cs!==null){var D=Cs.memoizedState;if(w=D.destroy,p!==null&&Wh(p,D.deps)){b.memoizedState=ql(l,d,w,p);return}}is.flags|=a,b.memoizedState=ql(1|l,d,w,p)}function Hg(a,l){return Nd(8390656,8,a,l)}function Yh(a,l){return jd(2048,8,a,l)}function Gg(a,l){return jd(4,2,a,l)}function Kg(a,l){return jd(4,4,a,l)}function Jg(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Yg(a,l,d){return d=d!=null?d.concat([a]):null,jd(4,4,Jg.bind(null,l,a),d)}function Zh(){}function Zg(a,l){var d=Vn();l=l===void 0?null:l;var p=d.memoizedState;return p!==null&&l!==null&&Wh(l,p[1])?p[0]:(d.memoizedState=[a,l],a)}function Xg(a,l){var d=Vn();l=l===void 0?null:l;var p=d.memoizedState;return p!==null&&l!==null&&Wh(l,p[1])?p[0]:(a=a(),d.memoizedState=[a,l],a)}function Qg(a,l,d){return(Ea&21)===0?(a.baseState&&(a.baseState=!1,gn=!0),a.memoizedState=d):(Xn(d,l)||(d=Ni(),is.lanes|=d,Ta|=d,a.baseState=!0),l)}function Xj(a,l){var d=Ct;Ct=d!==0&&4>d?d:4,a(!0);var p=qh.transition;qh.transition={};try{a(!1),l()}finally{Ct=d,qh.transition=p}}function ex(){return Vn().memoizedState}function Qj(a,l,d){var p=zi(a);if(d={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null},tx(a))sx(l,d);else if(d=Ig(a,l,d,p),d!==null){var b=sn();nr(d,a,p,b),nx(d,l,p)}}function eS(a,l,d){var p=zi(a),b={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null};if(tx(a))sx(l,b);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var D=l.lastRenderedState,q=w(D,d);if(b.hasEagerState=!0,b.eagerState=q,Xn(q,D)){var Q=l.interleaved;Q===null?(b.next=b,zh(l)):(b.next=Q.next,Q.next=b),l.interleaved=b;return}}catch{}finally{}d=Ig(a,l,b,p),d!==null&&(b=sn(),nr(d,a,p,b),nx(d,l,p))}}function tx(a){var l=a.alternate;return a===is||l!==null&&l===is}function sx(a,l){$l=wd=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function nx(a,l,d){if((d&4194240)!==0){var p=l.lanes;p&=a.pendingLanes,d|=p,l.lanes=d,yl(a,d)}}var Sd={readContext:$n,useCallback:Ks,useContext:Ks,useEffect:Ks,useImperativeHandle:Ks,useInsertionEffect:Ks,useLayoutEffect:Ks,useMemo:Ks,useReducer:Ks,useRef:Ks,useState:Ks,useDebugValue:Ks,useDeferredValue:Ks,useTransition:Ks,useMutableSource:Ks,useSyncExternalStore:Ks,useId:Ks,unstable_isNewReconciler:!1},tS={readContext:$n,useCallback:function(a,l){return Pr().memoizedState=[a,l===void 0?null:l],a},useContext:$n,useEffect:Hg,useImperativeHandle:function(a,l,d){return d=d!=null?d.concat([a]):null,Nd(4194308,4,Jg.bind(null,l,a),d)},useLayoutEffect:function(a,l){return Nd(4194308,4,a,l)},useInsertionEffect:function(a,l){return Nd(4,2,a,l)},useMemo:function(a,l){var d=Pr();return l=l===void 0?null:l,a=a(),d.memoizedState=[a,l],a},useReducer:function(a,l,d){var p=Pr();return l=d!==void 0?d(l):l,p.memoizedState=p.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},p.queue=a,a=a.dispatch=Qj.bind(null,is,a),[p.memoizedState,a]},useRef:function(a){var l=Pr();return a={current:a},l.memoizedState=a},useState:qg,useDebugValue:Zh,useDeferredValue:function(a){return Pr().memoizedState=a},useTransition:function(){var a=qg(!1),l=a[0];return a=Xj.bind(null,a[1]),Pr().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,d){var p=is,b=Pr();if(es){if(d===void 0)throw Error(s(407));d=d()}else{if(d=l(),Is===null)throw Error(s(349));(Ea&30)!==0||Ug(p,l,d)}b.memoizedState=d;var w={value:d,getSnapshot:l};return b.queue=w,Hg($g.bind(null,p,w,a),[a]),p.flags|=2048,ql(9,Fg.bind(null,p,w,d,l),void 0,null),d},useId:function(){var a=Pr(),l=Is.identifierPrefix;if(es){var d=ni,p=si;d=(p&~(1<<32-_t(p)-1)).toString(32)+d,l=":"+l+"R"+d,d=Vl++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=Zj++,l=":"+l+"r"+d.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},sS={readContext:$n,useCallback:Zg,useContext:$n,useEffect:Yh,useImperativeHandle:Yg,useInsertionEffect:Gg,useLayoutEffect:Kg,useMemo:Xg,useReducer:Kh,useRef:Wg,useState:function(){return Kh(Bl)},useDebugValue:Zh,useDeferredValue:function(a){var l=Vn();return Qg(l,Cs.memoizedState,a)},useTransition:function(){var a=Kh(Bl)[0],l=Vn().memoizedState;return[a,l]},useMutableSource:Lg,useSyncExternalStore:zg,useId:ex,unstable_isNewReconciler:!1},nS={readContext:$n,useCallback:Zg,useContext:$n,useEffect:Yh,useImperativeHandle:Yg,useInsertionEffect:Gg,useLayoutEffect:Kg,useMemo:Xg,useReducer:Jh,useRef:Wg,useState:function(){return Jh(Bl)},useDebugValue:Zh,useDeferredValue:function(a){var l=Vn();return Cs===null?l.memoizedState=a:Qg(l,Cs.memoizedState,a)},useTransition:function(){var a=Jh(Bl)[0],l=Vn().memoizedState;return[a,l]},useMutableSource:Lg,useSyncExternalStore:zg,useId:ex,unstable_isNewReconciler:!1};function er(a,l){if(a&&a.defaultProps){l=we({},l),a=a.defaultProps;for(var d in a)l[d]===void 0&&(l[d]=a[d]);return l}return l}function Xh(a,l,d,p){l=a.memoizedState,d=d(p,l),d=d==null?l:we({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var kd={isMounted:function(a){return(a=a._reactInternals)?en(a)===a:!1},enqueueSetState:function(a,l,d){a=a._reactInternals;var p=sn(),b=zi(a),w=ii(p,b);w.payload=l,d!=null&&(w.callback=d),l=Mi(a,w,b),l!==null&&(nr(l,a,b,p),xd(l,a,b))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var p=sn(),b=zi(a),w=ii(p,b);w.tag=1,w.payload=l,d!=null&&(w.callback=d),l=Mi(a,w,b),l!==null&&(nr(l,a,b,p),xd(l,a,b))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=sn(),p=zi(a),b=ii(d,p);b.tag=2,l!=null&&(b.callback=l),l=Mi(a,b,p),l!==null&&(nr(l,a,p,d),xd(l,a,p))}};function rx(a,l,d,p,b,w,D){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,w,D):l.prototype&&l.prototype.isPureReactComponent?!Pl(d,p)||!Pl(b,w):!0}function ix(a,l,d){var p=!1,b=Ai,w=l.contextType;return typeof w=="object"&&w!==null?w=$n(w):(b=pn(l)?ja:Gs.current,p=l.contextTypes,w=(p=p!=null)?_o(a,b):Ai),l=new l(d,w),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=kd,a.stateNode=l,l._reactInternals=a,p&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=w),l}function ax(a,l,d,p){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,p),l.state!==a&&kd.enqueueReplaceState(l,l.state,null)}function Qh(a,l,d,p){var b=a.stateNode;b.props=d,b.state=a.memoizedState,b.refs={},Uh(a);var w=l.contextType;typeof w=="object"&&w!==null?b.context=$n(w):(w=pn(l)?ja:Gs.current,b.context=_o(a,w)),b.state=a.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Xh(a,l,w,d),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(l=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),l!==b.state&&kd.enqueueReplaceState(b,b.state,null),yd(a,d,b,p),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308)}function Mo(a,l){try{var d="",p=l;do d+=B(p),p=p.return;while(p);var b=d}catch(w){b=`
Error generating stack: `+w.message+`
`+w.stack}return{value:a,source:l,stack:b,digest:null}}function ef(a,l,d){return{value:a,source:null,stack:d??null,digest:l??null}}function tf(a,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var rS=typeof WeakMap=="function"?WeakMap:Map;function ox(a,l,d){d=ii(-1,d),d.tag=3,d.payload={element:null};var p=l.value;return d.callback=function(){Id||(Id=!0,xf=p),tf(a,l)},d}function lx(a,l,d){d=ii(-1,d),d.tag=3;var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var b=l.value;d.payload=function(){return p(b)},d.callback=function(){tf(a,l)}}var w=a.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(d.callback=function(){tf(a,l),typeof p!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var D=l.stack;this.componentDidCatch(l.value,{componentStack:D!==null?D:""})}),d}function cx(a,l,d){var p=a.pingCache;if(p===null){p=a.pingCache=new rS;var b=new Set;p.set(l,b)}else b=p.get(l),b===void 0&&(b=new Set,p.set(l,b));b.has(d)||(b.add(d),a=yS.bind(null,a,l,d),l.then(a,a))}function dx(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function ux(a,l,d,p,b){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=ii(-1,1),l.tag=2,Mi(d,l,1))),d.lanes|=1),a):(a.flags|=65536,a.lanes=b,a)}var iS=J.ReactCurrentOwner,gn=!1;function tn(a,l,d,p){l.child=a===null?Ag(l,null,d,p):Po(l,a.child,d,p)}function hx(a,l,d,p,b){d=d.render;var w=l.ref;return Io(l,b),p=Hh(a,l,d,p,w,b),d=Gh(),a!==null&&!gn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~b,ai(a,l,b)):(es&&d&&Th(l),l.flags|=1,tn(a,l,p,b),l.child)}function fx(a,l,d,p,b){if(a===null){var w=d.type;return typeof w=="function"&&!Sf(w)&&w.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=w,mx(a,l,w,p,b)):(a=zd(d.type,null,p,l,l.mode,b),a.ref=l.ref,a.return=l,l.child=a)}if(w=a.child,(a.lanes&b)===0){var D=w.memoizedProps;if(d=d.compare,d=d!==null?d:Pl,d(D,p)&&a.ref===l.ref)return ai(a,l,b)}return l.flags|=1,a=Fi(w,p),a.ref=l.ref,a.return=l,l.child=a}function mx(a,l,d,p,b){if(a!==null){var w=a.memoizedProps;if(Pl(w,p)&&a.ref===l.ref)if(gn=!1,l.pendingProps=p=w,(a.lanes&b)!==0)(a.flags&131072)!==0&&(gn=!0);else return l.lanes=a.lanes,ai(a,l,b)}return sf(a,l,d,p,b)}function px(a,l,d){var p=l.pendingProps,b=p.children,w=a!==null?a.memoizedState:null;if(p.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(Oo,En),En|=d;else{if((d&1073741824)===0)return a=w!==null?w.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Gt(Oo,En),En|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:d,Gt(Oo,En),En|=p}else w!==null?(p=w.baseLanes|d,l.memoizedState=null):p=d,Gt(Oo,En),En|=p;return tn(a,l,b,d),l.child}function gx(a,l){var d=l.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function sf(a,l,d,p,b){var w=pn(d)?ja:Gs.current;return w=_o(l,w),Io(l,b),d=Hh(a,l,d,p,w,b),p=Gh(),a!==null&&!gn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~b,ai(a,l,b)):(es&&p&&Th(l),l.flags|=1,tn(a,l,d,b),l.child)}function xx(a,l,d,p,b){if(pn(d)){var w=!0;cd(l)}else w=!1;if(Io(l,b),l.stateNode===null)Cd(a,l),ix(l,d,p),Qh(l,d,p,b),p=!0;else if(a===null){var D=l.stateNode,q=l.memoizedProps;D.props=q;var Q=D.context,me=d.contextType;typeof me=="object"&&me!==null?me=$n(me):(me=pn(d)?ja:Gs.current,me=_o(l,me));var Ae=d.getDerivedStateFromProps,Re=typeof Ae=="function"||typeof D.getSnapshotBeforeUpdate=="function";Re||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(q!==p||Q!==me)&&ax(l,D,p,me),Ri=!1;var Ee=l.memoizedState;D.state=Ee,yd(l,p,D,b),Q=l.memoizedState,q!==p||Ee!==Q||mn.current||Ri?(typeof Ae=="function"&&(Xh(l,d,Ae,p),Q=l.memoizedState),(q=Ri||rx(l,d,q,p,Ee,Q,me))?(Re||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(l.flags|=4194308)):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=Q),D.props=p,D.state=Q,D.context=me,p=q):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{D=l.stateNode,Rg(a,l),q=l.memoizedProps,me=l.type===l.elementType?q:er(l.type,q),D.props=me,Re=l.pendingProps,Ee=D.context,Q=d.contextType,typeof Q=="object"&&Q!==null?Q=$n(Q):(Q=pn(d)?ja:Gs.current,Q=_o(l,Q));var qe=d.getDerivedStateFromProps;(Ae=typeof qe=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(q!==Re||Ee!==Q)&&ax(l,D,p,Q),Ri=!1,Ee=l.memoizedState,D.state=Ee,yd(l,p,D,b);var Ze=l.memoizedState;q!==Re||Ee!==Ze||mn.current||Ri?(typeof qe=="function"&&(Xh(l,d,qe,p),Ze=l.memoizedState),(me=Ri||rx(l,d,me,p,Ee,Ze,Q)||!1)?(Ae||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(p,Ze,Q),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(p,Ze,Q)),typeof D.componentDidUpdate=="function"&&(l.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof D.componentDidUpdate!="function"||q===a.memoizedProps&&Ee===a.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||q===a.memoizedProps&&Ee===a.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=Ze),D.props=p,D.state=Ze,D.context=Q,p=me):(typeof D.componentDidUpdate!="function"||q===a.memoizedProps&&Ee===a.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||q===a.memoizedProps&&Ee===a.memoizedState||(l.flags|=1024),p=!1)}return nf(a,l,d,p,w,b)}function nf(a,l,d,p,b,w){gx(a,l);var D=(l.flags&128)!==0;if(!p&&!D)return b&&Ng(l,d,!1),ai(a,l,w);p=l.stateNode,iS.current=l;var q=D&&typeof d.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,a!==null&&D?(l.child=Po(l,a.child,null,w),l.child=Po(l,null,q,w)):tn(a,l,q,w),l.memoizedState=p.state,b&&Ng(l,d,!0),l.child}function yx(a){var l=a.stateNode;l.pendingContext?vg(a,l.pendingContext,l.pendingContext!==l.context):l.context&&vg(a,l.context,!1),Fh(a,l.containerInfo)}function bx(a,l,d,p,b){return To(),Rh(b),l.flags|=256,tn(a,l,d,p),l.child}var rf={dehydrated:null,treeContext:null,retryLane:0};function af(a){return{baseLanes:a,cachePool:null,transitions:null}}function vx(a,l,d){var p=l.pendingProps,b=rs.current,w=!1,D=(l.flags&128)!==0,q;if((q=D)||(q=a!==null&&a.memoizedState===null?!1:(b&2)!==0),q?(w=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(b|=1),Gt(rs,b&1),a===null)return Ih(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(D=p.children,a=p.fallback,w?(p=l.mode,w=l.child,D={mode:"hidden",children:D},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=D):w=Ud(D,p,0,null),a=Ra(a,p,d,null),w.return=l,a.return=l,w.sibling=a,l.child=w,l.child.memoizedState=af(d),l.memoizedState=rf,a):of(l,D));if(b=a.memoizedState,b!==null&&(q=b.dehydrated,q!==null))return aS(a,l,D,p,q,b,d);if(w){w=p.fallback,D=l.mode,b=a.child,q=b.sibling;var Q={mode:"hidden",children:p.children};return(D&1)===0&&l.child!==b?(p=l.child,p.childLanes=0,p.pendingProps=Q,l.deletions=null):(p=Fi(b,Q),p.subtreeFlags=b.subtreeFlags&14680064),q!==null?w=Fi(q,w):(w=Ra(w,D,d,null),w.flags|=2),w.return=l,p.return=l,p.sibling=w,l.child=p,p=w,w=l.child,D=a.child.memoizedState,D=D===null?af(d):{baseLanes:D.baseLanes|d,cachePool:null,transitions:D.transitions},w.memoizedState=D,w.childLanes=a.childLanes&~d,l.memoizedState=rf,p}return w=a.child,a=w.sibling,p=Fi(w,{mode:"visible",children:p.children}),(l.mode&1)===0&&(p.lanes=d),p.return=l,p.sibling=null,a!==null&&(d=l.deletions,d===null?(l.deletions=[a],l.flags|=16):d.push(a)),l.child=p,l.memoizedState=null,p}function of(a,l){return l=Ud({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function _d(a,l,d,p){return p!==null&&Rh(p),Po(l,a.child,null,d),a=of(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function aS(a,l,d,p,b,w,D){if(d)return l.flags&256?(l.flags&=-257,p=ef(Error(s(422))),_d(a,l,D,p)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(w=p.fallback,b=l.mode,p=Ud({mode:"visible",children:p.children},b,0,null),w=Ra(w,b,D,null),w.flags|=2,p.return=l,w.return=l,p.sibling=w,l.child=p,(l.mode&1)!==0&&Po(l,a.child,null,D),l.child.memoizedState=af(D),l.memoizedState=rf,w);if((l.mode&1)===0)return _d(a,l,D,null);if(b.data==="$!"){if(p=b.nextSibling&&b.nextSibling.dataset,p)var q=p.dgst;return p=q,w=Error(s(419)),p=ef(w,p,void 0),_d(a,l,D,p)}if(q=(D&a.childLanes)!==0,gn||q){if(p=Is,p!==null){switch(D&-D){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(p.suspendedLanes|D))!==0?0:b,b!==0&&b!==w.retryLane&&(w.retryLane=b,ri(a,b),nr(p,a,b,-1))}return jf(),p=ef(Error(s(421))),_d(a,l,D,p)}return b.data==="$?"?(l.flags|=128,l.child=a.child,l=bS.bind(null,a),b._reactRetry=l,null):(a=w.treeContext,Cn=Ti(b.nextSibling),_n=l,es=!0,Qn=null,a!==null&&(Un[Fn++]=si,Un[Fn++]=ni,Un[Fn++]=Sa,si=a.id,ni=a.overflow,Sa=l),l=of(l,p.children),l.flags|=4096,l)}function wx(a,l,d){a.lanes|=l;var p=a.alternate;p!==null&&(p.lanes|=l),Lh(a.return,l,d)}function lf(a,l,d,p,b){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:b}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=d,w.tailMode=b)}function Nx(a,l,d){var p=l.pendingProps,b=p.revealOrder,w=p.tail;if(tn(a,l,p.children,d),p=rs.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&wx(a,d,l);else if(a.tag===19)wx(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}p&=1}if(Gt(rs,p),(l.mode&1)===0)l.memoizedState=null;else switch(b){case"forwards":for(d=l.child,b=null;d!==null;)a=d.alternate,a!==null&&bd(a)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),lf(l,!1,b,d,w);break;case"backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(a=b.alternate,a!==null&&bd(a)===null){l.child=b;break}a=b.sibling,b.sibling=d,d=b,b=a}lf(l,!0,d,null,w);break;case"together":lf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Cd(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function ai(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),Ta|=l.lanes,(d&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(s(153));if(l.child!==null){for(a=l.child,d=Fi(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=Fi(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function oS(a,l,d){switch(l.tag){case 3:yx(l),To();break;case 5:Og(l);break;case 1:pn(l.type)&&cd(l);break;case 4:Fh(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,b=l.memoizedProps.value;Gt(pd,p._currentValue),p._currentValue=b;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(Gt(rs,rs.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?vx(a,l,d):(Gt(rs,rs.current&1),a=ai(a,l,d),a!==null?a.sibling:null);Gt(rs,rs.current&1);break;case 19:if(p=(d&l.childLanes)!==0,(a.flags&128)!==0){if(p)return Nx(a,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Gt(rs,rs.current),p)break;return null;case 22:case 23:return l.lanes=0,px(a,l,d)}return ai(a,l,d)}var jx,cf,Sx,kx;jx=function(a,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)a.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},cf=function(){},Sx=function(a,l,d,p){var b=a.memoizedProps;if(b!==p){a=l.stateNode,Ca(Tr.current);var w=null;switch(d){case"input":b=nt(a,b),p=nt(a,p),w=[];break;case"select":b=we({},b,{value:void 0}),p=we({},p,{value:void 0}),w=[];break;case"textarea":b=ve(a,b),p=ve(a,p),w=[];break;default:typeof b.onClick!="function"&&typeof p.onClick=="function"&&(a.onclick=ad)}Os(d,p);var D;d=null;for(me in b)if(!p.hasOwnProperty(me)&&b.hasOwnProperty(me)&&b[me]!=null)if(me==="style"){var q=b[me];for(D in q)q.hasOwnProperty(D)&&(d||(d={}),d[D]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(i.hasOwnProperty(me)?w||(w=[]):(w=w||[]).push(me,null));for(me in p){var Q=p[me];if(q=b!=null?b[me]:void 0,p.hasOwnProperty(me)&&Q!==q&&(Q!=null||q!=null))if(me==="style")if(q){for(D in q)!q.hasOwnProperty(D)||Q&&Q.hasOwnProperty(D)||(d||(d={}),d[D]="");for(D in Q)Q.hasOwnProperty(D)&&q[D]!==Q[D]&&(d||(d={}),d[D]=Q[D])}else d||(w||(w=[]),w.push(me,d)),d=Q;else me==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,q=q?q.__html:void 0,Q!=null&&q!==Q&&(w=w||[]).push(me,Q)):me==="children"?typeof Q!="string"&&typeof Q!="number"||(w=w||[]).push(me,""+Q):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(i.hasOwnProperty(me)?(Q!=null&&me==="onScroll"&&Zt("scroll",a),w||q===Q||(w=[])):(w=w||[]).push(me,Q))}d&&(w=w||[]).push("style",d);var me=w;(l.updateQueue=me)&&(l.flags|=4)}},kx=function(a,l,d,p){d!==p&&(l.flags|=4)};function Wl(a,l){if(!es)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function Js(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,p=0;if(l)for(var b=a.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags&14680064,p|=b.flags&14680064,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=p,a.childLanes=d,l}function lS(a,l,d){var p=l.pendingProps;switch(Ph(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Js(l),null;case 1:return pn(l.type)&&ld(),Js(l),null;case 3:return p=l.stateNode,Ro(),Xt(mn),Xt(Gs),Bh(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(a===null||a.child===null)&&(fd(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Qn!==null&&(vf(Qn),Qn=null))),cf(a,l),Js(l),null;case 5:$h(l);var b=Ca(Fl.current);if(d=l.type,a!==null&&l.stateNode!=null)Sx(a,l,d,p,b),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(s(166));return Js(l),null}if(a=Ca(Tr.current),fd(l)){p=l.stateNode,d=l.type;var w=l.memoizedProps;switch(p[Er]=l,p[Dl]=w,a=(l.mode&1)!==0,d){case"dialog":Zt("cancel",p),Zt("close",p);break;case"iframe":case"object":case"embed":Zt("load",p);break;case"video":case"audio":for(b=0;b<Il.length;b++)Zt(Il[b],p);break;case"source":Zt("error",p);break;case"img":case"image":case"link":Zt("error",p),Zt("load",p);break;case"details":Zt("toggle",p);break;case"input":Ut(p,w),Zt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},Zt("invalid",p);break;case"textarea":Y(p,w),Zt("invalid",p)}Os(d,w),b=null;for(var D in w)if(w.hasOwnProperty(D)){var q=w[D];D==="children"?typeof q=="string"?p.textContent!==q&&(w.suppressHydrationWarning!==!0&&id(p.textContent,q,a),b=["children",q]):typeof q=="number"&&p.textContent!==""+q&&(w.suppressHydrationWarning!==!0&&id(p.textContent,q,a),b=["children",""+q]):i.hasOwnProperty(D)&&q!=null&&D==="onScroll"&&Zt("scroll",p)}switch(d){case"input":St(p),Be(p,w,!0);break;case"textarea":St(p),jt(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=ad)}p=b,l.updateQueue=p,p!==null&&(l.flags|=4)}else{D=b.nodeType===9?b:b.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=mt(d)),a==="http://www.w3.org/1999/xhtml"?d==="script"?(a=D.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof p.is=="string"?a=D.createElement(d,{is:p.is}):(a=D.createElement(d),d==="select"&&(D=a,p.multiple?D.multiple=!0:p.size&&(D.size=p.size))):a=D.createElementNS(a,d),a[Er]=l,a[Dl]=p,jx(a,l,!1,!1),l.stateNode=a;e:{switch(D=Ls(d,p),d){case"dialog":Zt("cancel",a),Zt("close",a),b=p;break;case"iframe":case"object":case"embed":Zt("load",a),b=p;break;case"video":case"audio":for(b=0;b<Il.length;b++)Zt(Il[b],a);b=p;break;case"source":Zt("error",a),b=p;break;case"img":case"image":case"link":Zt("error",a),Zt("load",a),b=p;break;case"details":Zt("toggle",a),b=p;break;case"input":Ut(a,p),b=nt(a,p),Zt("invalid",a);break;case"option":b=p;break;case"select":a._wrapperState={wasMultiple:!!p.multiple},b=we({},p,{value:void 0}),Zt("invalid",a);break;case"textarea":Y(a,p),b=ve(a,p),Zt("invalid",a);break;default:b=p}Os(d,b),q=b;for(w in q)if(q.hasOwnProperty(w)){var Q=q[w];w==="style"?Ws(a,Q):w==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&ks(a,Q)):w==="children"?typeof Q=="string"?(d!=="textarea"||Q!=="")&&ds(a,Q):typeof Q=="number"&&ds(a,""+Q):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?Q!=null&&w==="onScroll"&&Zt("scroll",a):Q!=null&&F(a,w,Q,D))}switch(d){case"input":St(a),Be(a,p,!1);break;case"textarea":St(a),jt(a);break;case"option":p.value!=null&&a.setAttribute("value",""+Ue(p.value));break;case"select":a.multiple=!!p.multiple,w=p.value,w!=null?Nt(a,!!p.multiple,w,!1):p.defaultValue!=null&&Nt(a,!!p.multiple,p.defaultValue,!0);break;default:typeof b.onClick=="function"&&(a.onclick=ad)}switch(d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Js(l),null;case 6:if(a&&l.stateNode!=null)kx(a,l,a.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(s(166));if(d=Ca(Fl.current),Ca(Tr.current),fd(l)){if(p=l.stateNode,d=l.memoizedProps,p[Er]=l,(w=p.nodeValue!==d)&&(a=_n,a!==null))switch(a.tag){case 3:id(p.nodeValue,d,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&id(p.nodeValue,d,(a.mode&1)!==0)}w&&(l.flags|=4)}else p=(d.nodeType===9?d:d.ownerDocument).createTextNode(p),p[Er]=l,l.stateNode=p}return Js(l),null;case 13:if(Xt(rs),p=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(es&&Cn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Eg(),To(),l.flags|=98560,w=!1;else if(w=fd(l),p!==null&&p.dehydrated!==null){if(a===null){if(!w)throw Error(s(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(s(317));w[Er]=l}else To(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Js(l),w=!1}else Qn!==null&&(vf(Qn),Qn=null),w=!0;if(!w)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(p=p!==null,p!==(a!==null&&a.memoizedState!==null)&&p&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(rs.current&1)!==0?Es===0&&(Es=3):jf())),l.updateQueue!==null&&(l.flags|=4),Js(l),null);case 4:return Ro(),cf(a,l),a===null&&Rl(l.stateNode.containerInfo),Js(l),null;case 10:return Oh(l.type._context),Js(l),null;case 17:return pn(l.type)&&ld(),Js(l),null;case 19:if(Xt(rs),w=l.memoizedState,w===null)return Js(l),null;if(p=(l.flags&128)!==0,D=w.rendering,D===null)if(p)Wl(w,!1);else{if(Es!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(D=bd(a),D!==null){for(l.flags|=128,Wl(w,!1),p=D.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=d,d=l.child;d!==null;)w=d,a=p,w.flags&=14680066,D=w.alternate,D===null?(w.childLanes=0,w.lanes=a,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=D.childLanes,w.lanes=D.lanes,w.child=D.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=D.memoizedProps,w.memoizedState=D.memoizedState,w.updateQueue=D.updateQueue,w.type=D.type,a=D.dependencies,w.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),d=d.sibling;return Gt(rs,rs.current&1|2),l.child}a=a.sibling}w.tail!==null&&xe()>Lo&&(l.flags|=128,p=!0,Wl(w,!1),l.lanes=4194304)}else{if(!p)if(a=bd(D),a!==null){if(l.flags|=128,p=!0,d=a.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Wl(w,!0),w.tail===null&&w.tailMode==="hidden"&&!D.alternate&&!es)return Js(l),null}else 2*xe()-w.renderingStartTime>Lo&&d!==1073741824&&(l.flags|=128,p=!0,Wl(w,!1),l.lanes=4194304);w.isBackwards?(D.sibling=l.child,l.child=D):(d=w.last,d!==null?d.sibling=D:l.child=D,w.last=D)}return w.tail!==null?(l=w.tail,w.rendering=l,w.tail=l.sibling,w.renderingStartTime=xe(),l.sibling=null,d=rs.current,Gt(rs,p?d&1|2:d&1),l):(Js(l),null);case 22:case 23:return Nf(),p=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==p&&(l.flags|=8192),p&&(l.mode&1)!==0?(En&1073741824)!==0&&(Js(l),l.subtreeFlags&6&&(l.flags|=8192)):Js(l),null;case 24:return null;case 25:return null}throw Error(s(156,l.tag))}function cS(a,l){switch(Ph(l),l.tag){case 1:return pn(l.type)&&ld(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Ro(),Xt(mn),Xt(Gs),Bh(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return $h(l),null;case 13:if(Xt(rs),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(s(340));To()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Xt(rs),null;case 4:return Ro(),null;case 10:return Oh(l.type._context),null;case 22:case 23:return Nf(),null;case 24:return null;default:return null}}var Ed=!1,Ys=!1,dS=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Do(a,l){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(p){hs(a,l,p)}else d.current=null}function df(a,l,d){try{d()}catch(p){hs(a,l,p)}}var _x=!1;function uS(a,l){if(wh=Xr,a=rg(),fh(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var b=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var D=0,q=-1,Q=-1,me=0,Ae=0,Re=a,Ee=null;t:for(;;){for(var qe;Re!==d||b!==0&&Re.nodeType!==3||(q=D+b),Re!==w||p!==0&&Re.nodeType!==3||(Q=D+p),Re.nodeType===3&&(D+=Re.nodeValue.length),(qe=Re.firstChild)!==null;)Ee=Re,Re=qe;for(;;){if(Re===a)break t;if(Ee===d&&++me===b&&(q=D),Ee===w&&++Ae===p&&(Q=D),(qe=Re.nextSibling)!==null)break;Re=Ee,Ee=Re.parentNode}Re=qe}d=q===-1||Q===-1?null:{start:q,end:Q}}else d=null}d=d||{start:0,end:0}}else d=null;for(Nh={focusedElem:a,selectionRange:d},Xr=!1,Ye=l;Ye!==null;)if(l=Ye,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Ye=a;else for(;Ye!==null;){l=Ye;try{var Ze=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Ze!==null){var et=Ze.memoizedProps,xs=Ze.memoizedState,ie=l.stateNode,ee=ie.getSnapshotBeforeUpdate(l.elementType===l.type?et:er(l.type,et),xs);ie.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var de=l.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Oe){hs(l,l.return,Oe)}if(a=l.sibling,a!==null){a.return=l.return,Ye=a;break}Ye=l.return}return Ze=_x,_x=!1,Ze}function Hl(a,l,d){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&a)===a){var w=b.destroy;b.destroy=void 0,w!==void 0&&df(l,d,w)}b=b.next}while(b!==p)}}function Td(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&a)===a){var p=d.create;d.destroy=p()}d=d.next}while(d!==l)}}function uf(a){var l=a.ref;if(l!==null){var d=a.stateNode;switch(a.tag){case 5:a=d;break;default:a=d}typeof l=="function"?l(a):l.current=a}}function Cx(a){var l=a.alternate;l!==null&&(a.alternate=null,Cx(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[Er],delete l[Dl],delete l[_h],delete l[Gj],delete l[Kj])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Ex(a){return a.tag===5||a.tag===3||a.tag===4}function Tx(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Ex(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function hf(a,l,d){var p=a.tag;if(p===5||p===6)a=a.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(a,l):d.insertBefore(a,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(a,d)):(l=d,l.appendChild(a)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=ad));else if(p!==4&&(a=a.child,a!==null))for(hf(a,l,d),a=a.sibling;a!==null;)hf(a,l,d),a=a.sibling}function ff(a,l,d){var p=a.tag;if(p===5||p===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(p!==4&&(a=a.child,a!==null))for(ff(a,l,d),a=a.sibling;a!==null;)ff(a,l,d),a=a.sibling}var $s=null,tr=!1;function Di(a,l,d){for(d=d.child;d!==null;)Px(a,l,d),d=d.sibling}function Px(a,l,d){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(dt,d)}catch{}switch(d.tag){case 5:Ys||Do(d,l);case 6:var p=$s,b=tr;$s=null,Di(a,l,d),$s=p,tr=b,$s!==null&&(tr?(a=$s,d=d.stateNode,a.nodeType===8?a.parentNode.removeChild(d):a.removeChild(d)):$s.removeChild(d.stateNode));break;case 18:$s!==null&&(tr?(a=$s,d=d.stateNode,a.nodeType===8?kh(a.parentNode,d):a.nodeType===1&&kh(a,d),ki(a)):kh($s,d.stateNode));break;case 4:p=$s,b=tr,$s=d.stateNode.containerInfo,tr=!0,Di(a,l,d),$s=p,tr=b;break;case 0:case 11:case 14:case 15:if(!Ys&&(p=d.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){b=p=p.next;do{var w=b,D=w.destroy;w=w.tag,D!==void 0&&((w&2)!==0||(w&4)!==0)&&df(d,l,D),b=b.next}while(b!==p)}Di(a,l,d);break;case 1:if(!Ys&&(Do(d,l),p=d.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=d.memoizedProps,p.state=d.memoizedState,p.componentWillUnmount()}catch(q){hs(d,l,q)}Di(a,l,d);break;case 21:Di(a,l,d);break;case 22:d.mode&1?(Ys=(p=Ys)||d.memoizedState!==null,Di(a,l,d),Ys=p):Di(a,l,d);break;default:Di(a,l,d)}}function Ax(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new dS),l.forEach(function(p){var b=vS.bind(null,a,p);d.has(p)||(d.add(p),p.then(b,b))})}}function sr(a,l){var d=l.deletions;if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];try{var w=a,D=l,q=D;e:for(;q!==null;){switch(q.tag){case 5:$s=q.stateNode,tr=!1;break e;case 3:$s=q.stateNode.containerInfo,tr=!0;break e;case 4:$s=q.stateNode.containerInfo,tr=!0;break e}q=q.return}if($s===null)throw Error(s(160));Px(w,D,b),$s=null,tr=!1;var Q=b.alternate;Q!==null&&(Q.return=null),b.return=null}catch(me){hs(b,l,me)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Ix(l,a),l=l.sibling}function Ix(a,l){var d=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(sr(l,a),Ar(a),p&4){try{Hl(3,a,a.return),Td(3,a)}catch(et){hs(a,a.return,et)}try{Hl(5,a,a.return)}catch(et){hs(a,a.return,et)}}break;case 1:sr(l,a),Ar(a),p&512&&d!==null&&Do(d,d.return);break;case 5:if(sr(l,a),Ar(a),p&512&&d!==null&&Do(d,d.return),a.flags&32){var b=a.stateNode;try{ds(b,"")}catch(et){hs(a,a.return,et)}}if(p&4&&(b=a.stateNode,b!=null)){var w=a.memoizedProps,D=d!==null?d.memoizedProps:w,q=a.type,Q=a.updateQueue;if(a.updateQueue=null,Q!==null)try{q==="input"&&w.type==="radio"&&w.name!=null&&oe(b,w),Ls(q,D);var me=Ls(q,w);for(D=0;D<Q.length;D+=2){var Ae=Q[D],Re=Q[D+1];Ae==="style"?Ws(b,Re):Ae==="dangerouslySetInnerHTML"?ks(b,Re):Ae==="children"?ds(b,Re):F(b,Ae,Re,me)}switch(q){case"input":Me(b,w);break;case"textarea":Se(b,w);break;case"select":var Ee=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!w.multiple;var qe=w.value;qe!=null?Nt(b,!!w.multiple,qe,!1):Ee!==!!w.multiple&&(w.defaultValue!=null?Nt(b,!!w.multiple,w.defaultValue,!0):Nt(b,!!w.multiple,w.multiple?[]:"",!1))}b[Dl]=w}catch(et){hs(a,a.return,et)}}break;case 6:if(sr(l,a),Ar(a),p&4){if(a.stateNode===null)throw Error(s(162));b=a.stateNode,w=a.memoizedProps;try{b.nodeValue=w}catch(et){hs(a,a.return,et)}}break;case 3:if(sr(l,a),Ar(a),p&4&&d!==null&&d.memoizedState.isDehydrated)try{ki(l.containerInfo)}catch(et){hs(a,a.return,et)}break;case 4:sr(l,a),Ar(a);break;case 13:sr(l,a),Ar(a),b=a.child,b.flags&8192&&(w=b.memoizedState!==null,b.stateNode.isHidden=w,!w||b.alternate!==null&&b.alternate.memoizedState!==null||(gf=xe())),p&4&&Ax(a);break;case 22:if(Ae=d!==null&&d.memoizedState!==null,a.mode&1?(Ys=(me=Ys)||Ae,sr(l,a),Ys=me):sr(l,a),Ar(a),p&8192){if(me=a.memoizedState!==null,(a.stateNode.isHidden=me)&&!Ae&&(a.mode&1)!==0)for(Ye=a,Ae=a.child;Ae!==null;){for(Re=Ye=Ae;Ye!==null;){switch(Ee=Ye,qe=Ee.child,Ee.tag){case 0:case 11:case 14:case 15:Hl(4,Ee,Ee.return);break;case 1:Do(Ee,Ee.return);var Ze=Ee.stateNode;if(typeof Ze.componentWillUnmount=="function"){p=Ee,d=Ee.return;try{l=p,Ze.props=l.memoizedProps,Ze.state=l.memoizedState,Ze.componentWillUnmount()}catch(et){hs(p,d,et)}}break;case 5:Do(Ee,Ee.return);break;case 22:if(Ee.memoizedState!==null){Dx(Re);continue}}qe!==null?(qe.return=Ee,Ye=qe):Dx(Re)}Ae=Ae.sibling}e:for(Ae=null,Re=a;;){if(Re.tag===5){if(Ae===null){Ae=Re;try{b=Re.stateNode,me?(w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(q=Re.stateNode,Q=Re.memoizedProps.style,D=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,q.style.display=us("display",D))}catch(et){hs(a,a.return,et)}}}else if(Re.tag===6){if(Ae===null)try{Re.stateNode.nodeValue=me?"":Re.memoizedProps}catch(et){hs(a,a.return,et)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===a)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===a)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===a)break e;Ae===Re&&(Ae=null),Re=Re.return}Ae===Re&&(Ae=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:sr(l,a),Ar(a),p&4&&Ax(a);break;case 21:break;default:sr(l,a),Ar(a)}}function Ar(a){var l=a.flags;if(l&2){try{e:{for(var d=a.return;d!==null;){if(Ex(d)){var p=d;break e}d=d.return}throw Error(s(160))}switch(p.tag){case 5:var b=p.stateNode;p.flags&32&&(ds(b,""),p.flags&=-33);var w=Tx(a);ff(a,w,b);break;case 3:case 4:var D=p.stateNode.containerInfo,q=Tx(a);hf(a,q,D);break;default:throw Error(s(161))}}catch(Q){hs(a,a.return,Q)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function hS(a,l,d){Ye=a,Rx(a)}function Rx(a,l,d){for(var p=(a.mode&1)!==0;Ye!==null;){var b=Ye,w=b.child;if(b.tag===22&&p){var D=b.memoizedState!==null||Ed;if(!D){var q=b.alternate,Q=q!==null&&q.memoizedState!==null||Ys;q=Ed;var me=Ys;if(Ed=D,(Ys=Q)&&!me)for(Ye=b;Ye!==null;)D=Ye,Q=D.child,D.tag===22&&D.memoizedState!==null?Ox(b):Q!==null?(Q.return=D,Ye=Q):Ox(b);for(;w!==null;)Ye=w,Rx(w),w=w.sibling;Ye=b,Ed=q,Ys=me}Mx(a)}else(b.subtreeFlags&8772)!==0&&w!==null?(w.return=b,Ye=w):Mx(a)}}function Mx(a){for(;Ye!==null;){var l=Ye;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Ys||Td(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!Ys)if(d===null)p.componentDidMount();else{var b=l.elementType===l.type?d.memoizedProps:er(l.type,d.memoizedProps);p.componentDidUpdate(b,d.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=l.updateQueue;w!==null&&Dg(l,w,p);break;case 3:var D=l.updateQueue;if(D!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}Dg(l,D,d)}break;case 5:var q=l.stateNode;if(d===null&&l.flags&4){d=q;var Q=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&d.focus();break;case"img":Q.src&&(d.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var me=l.alternate;if(me!==null){var Ae=me.memoizedState;if(Ae!==null){var Re=Ae.dehydrated;Re!==null&&ki(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Ys||l.flags&512&&uf(l)}catch(Ee){hs(l,l.return,Ee)}}if(l===a){Ye=null;break}if(d=l.sibling,d!==null){d.return=l.return,Ye=d;break}Ye=l.return}}function Dx(a){for(;Ye!==null;){var l=Ye;if(l===a){Ye=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Ye=d;break}Ye=l.return}}function Ox(a){for(;Ye!==null;){var l=Ye;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{Td(4,l)}catch(Q){hs(l,d,Q)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var b=l.return;try{p.componentDidMount()}catch(Q){hs(l,b,Q)}}var w=l.return;try{uf(l)}catch(Q){hs(l,w,Q)}break;case 5:var D=l.return;try{uf(l)}catch(Q){hs(l,D,Q)}}}catch(Q){hs(l,l.return,Q)}if(l===a){Ye=null;break}var q=l.sibling;if(q!==null){q.return=l.return,Ye=q;break}Ye=l.return}}var fS=Math.ceil,Pd=J.ReactCurrentDispatcher,mf=J.ReactCurrentOwner,Bn=J.ReactCurrentBatchConfig,Mt=0,Is=null,ws=null,Vs=0,En=0,Oo=Pi(0),Es=0,Gl=null,Ta=0,Ad=0,pf=0,Kl=null,xn=null,gf=0,Lo=1/0,oi=null,Id=!1,xf=null,Oi=null,Rd=!1,Li=null,Md=0,Jl=0,yf=null,Dd=-1,Od=0;function sn(){return(Mt&6)!==0?xe():Dd!==-1?Dd:Dd=xe()}function zi(a){return(a.mode&1)===0?1:(Mt&2)!==0&&Vs!==0?Vs&-Vs:Yj.transition!==null?(Od===0&&(Od=Ni()),Od):(a=Ct,a!==0||(a=window.event,a=a===void 0?16:ho(a.type)),a)}function nr(a,l,d,p){if(50<Jl)throw Jl=0,yf=null,Error(s(185));xa(a,d,p),((Mt&2)===0||a!==Is)&&(a===Is&&((Mt&2)===0&&(Ad|=d),Es===4&&Ui(a,Vs)),yn(a,p),d===1&&Mt===0&&(l.mode&1)===0&&(Lo=xe()+500,dd&&Ii()))}function yn(a,l){var d=a.callbackNode;gr(a,l);var p=xt(a,a===Is?Vs:0);if(p===0)d!==null&&K(d),a.callbackNode=null,a.callbackPriority=0;else if(l=p&-p,a.callbackPriority!==l){if(d!=null&&K(d),l===1)a.tag===0?Jj(zx.bind(null,a)):jg(zx.bind(null,a)),Wj(function(){(Mt&6)===0&&Ii()}),d=null;else{switch(xr(p)){case 1:d=ct;break;case 4:d=he;break;case 16:d=ge;break;case 536870912:d=kt;break;default:d=ge}d=Hx(d,Lx.bind(null,a))}a.callbackPriority=l,a.callbackNode=d}}function Lx(a,l){if(Dd=-1,Od=0,(Mt&6)!==0)throw Error(s(327));var d=a.callbackNode;if(zo()&&a.callbackNode!==d)return null;var p=xt(a,a===Is?Vs:0);if(p===0)return null;if((p&30)!==0||(p&a.expiredLanes)!==0||l)l=Ld(a,p);else{l=p;var b=Mt;Mt|=2;var w=Fx();(Is!==a||Vs!==l)&&(oi=null,Lo=xe()+500,Aa(a,l));do try{gS();break}catch(q){Ux(a,q)}while(!0);Dh(),Pd.current=w,Mt=b,ws!==null?l=0:(Is=null,Vs=0,l=Es)}if(l!==0){if(l===2&&(b=Jr(a),b!==0&&(p=b,l=bf(a,b))),l===1)throw d=Gl,Aa(a,0),Ui(a,p),yn(a,xe()),d;if(l===6)Ui(a,p);else{if(b=a.current.alternate,(p&30)===0&&!mS(b)&&(l=Ld(a,p),l===2&&(w=Jr(a),w!==0&&(p=w,l=bf(a,w))),l===1))throw d=Gl,Aa(a,0),Ui(a,p),yn(a,xe()),d;switch(a.finishedWork=b,a.finishedLanes=p,l){case 0:case 1:throw Error(s(345));case 2:Ia(a,xn,oi);break;case 3:if(Ui(a,p),(p&130023424)===p&&(l=gf+500-xe(),10<l)){if(xt(a,0)!==0)break;if(b=a.suspendedLanes,(b&p)!==p){sn(),a.pingedLanes|=a.suspendedLanes&b;break}a.timeoutHandle=Sh(Ia.bind(null,a,xn,oi),l);break}Ia(a,xn,oi);break;case 4:if(Ui(a,p),(p&4194240)===p)break;for(l=a.eventTimes,b=-1;0<p;){var D=31-_t(p);w=1<<D,D=l[D],D>b&&(b=D),p&=~w}if(p=b,p=xe()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*fS(p/1960))-p,10<p){a.timeoutHandle=Sh(Ia.bind(null,a,xn,oi),p);break}Ia(a,xn,oi);break;case 5:Ia(a,xn,oi);break;default:throw Error(s(329))}}}return yn(a,xe()),a.callbackNode===d?Lx.bind(null,a):null}function bf(a,l){var d=Kl;return a.current.memoizedState.isDehydrated&&(Aa(a,l).flags|=256),a=Ld(a,l),a!==2&&(l=xn,xn=d,l!==null&&vf(l)),a}function vf(a){xn===null?xn=a:xn.push.apply(xn,a)}function mS(a){for(var l=a;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var p=0;p<d.length;p++){var b=d[p],w=b.getSnapshot;b=b.value;try{if(!Xn(w(),b))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ui(a,l){for(l&=~pf,l&=~Ad,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var d=31-_t(l),p=1<<d;a[d]=-1,l&=~p}}function zx(a){if((Mt&6)!==0)throw Error(s(327));zo();var l=xt(a,0);if((l&1)===0)return yn(a,xe()),null;var d=Ld(a,l);if(a.tag!==0&&d===2){var p=Jr(a);p!==0&&(l=p,d=bf(a,p))}if(d===1)throw d=Gl,Aa(a,0),Ui(a,l),yn(a,xe()),d;if(d===6)throw Error(s(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,Ia(a,xn,oi),yn(a,xe()),null}function wf(a,l){var d=Mt;Mt|=1;try{return a(l)}finally{Mt=d,Mt===0&&(Lo=xe()+500,dd&&Ii())}}function Pa(a){Li!==null&&Li.tag===0&&(Mt&6)===0&&zo();var l=Mt;Mt|=1;var d=Bn.transition,p=Ct;try{if(Bn.transition=null,Ct=1,a)return a()}finally{Ct=p,Bn.transition=d,Mt=l,(Mt&6)===0&&Ii()}}function Nf(){En=Oo.current,Xt(Oo)}function Aa(a,l){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==-1&&(a.timeoutHandle=-1,qj(d)),ws!==null)for(d=ws.return;d!==null;){var p=d;switch(Ph(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&ld();break;case 3:Ro(),Xt(mn),Xt(Gs),Bh();break;case 5:$h(p);break;case 4:Ro();break;case 13:Xt(rs);break;case 19:Xt(rs);break;case 10:Oh(p.type._context);break;case 22:case 23:Nf()}d=d.return}if(Is=a,ws=a=Fi(a.current,null),Vs=En=l,Es=0,Gl=null,pf=Ad=Ta=0,xn=Kl=null,_a!==null){for(l=0;l<_a.length;l++)if(d=_a[l],p=d.interleaved,p!==null){d.interleaved=null;var b=p.next,w=d.pending;if(w!==null){var D=w.next;w.next=b,p.next=D}d.pending=p}_a=null}return a}function Ux(a,l){do{var d=ws;try{if(Dh(),vd.current=Sd,wd){for(var p=is.memoizedState;p!==null;){var b=p.queue;b!==null&&(b.pending=null),p=p.next}wd=!1}if(Ea=0,As=Cs=is=null,$l=!1,Vl=0,mf.current=null,d===null||d.return===null){Es=1,Gl=l,ws=null;break}e:{var w=a,D=d.return,q=d,Q=l;if(l=Vs,q.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var me=Q,Ae=q,Re=Ae.tag;if((Ae.mode&1)===0&&(Re===0||Re===11||Re===15)){var Ee=Ae.alternate;Ee?(Ae.updateQueue=Ee.updateQueue,Ae.memoizedState=Ee.memoizedState,Ae.lanes=Ee.lanes):(Ae.updateQueue=null,Ae.memoizedState=null)}var qe=dx(D);if(qe!==null){qe.flags&=-257,ux(qe,D,q,w,l),qe.mode&1&&cx(w,me,l),l=qe,Q=me;var Ze=l.updateQueue;if(Ze===null){var et=new Set;et.add(Q),l.updateQueue=et}else Ze.add(Q);break e}else{if((l&1)===0){cx(w,me,l),jf();break e}Q=Error(s(426))}}else if(es&&q.mode&1){var xs=dx(D);if(xs!==null){(xs.flags&65536)===0&&(xs.flags|=256),ux(xs,D,q,w,l),Rh(Mo(Q,q));break e}}w=Q=Mo(Q,q),Es!==4&&(Es=2),Kl===null?Kl=[w]:Kl.push(w),w=D;do{switch(w.tag){case 3:w.flags|=65536,l&=-l,w.lanes|=l;var ie=ox(w,Q,l);Mg(w,ie);break e;case 1:q=Q;var ee=w.type,de=w.stateNode;if((w.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(Oi===null||!Oi.has(de)))){w.flags|=65536,l&=-l,w.lanes|=l;var Oe=lx(w,q,l);Mg(w,Oe);break e}}w=w.return}while(w!==null)}Vx(d)}catch(tt){l=tt,ws===d&&d!==null&&(ws=d=d.return);continue}break}while(!0)}function Fx(){var a=Pd.current;return Pd.current=Sd,a===null?Sd:a}function jf(){(Es===0||Es===3||Es===2)&&(Es=4),Is===null||(Ta&268435455)===0&&(Ad&268435455)===0||Ui(Is,Vs)}function Ld(a,l){var d=Mt;Mt|=2;var p=Fx();(Is!==a||Vs!==l)&&(oi=null,Aa(a,l));do try{pS();break}catch(b){Ux(a,b)}while(!0);if(Dh(),Mt=d,Pd.current=p,ws!==null)throw Error(s(261));return Is=null,Vs=0,Es}function pS(){for(;ws!==null;)$x(ws)}function gS(){for(;ws!==null&&!X();)$x(ws)}function $x(a){var l=Wx(a.alternate,a,En);a.memoizedProps=a.pendingProps,l===null?Vx(a):ws=l,mf.current=null}function Vx(a){var l=a;do{var d=l.alternate;if(a=l.return,(l.flags&32768)===0){if(d=lS(d,l,En),d!==null){ws=d;return}}else{if(d=cS(d,l),d!==null){d.flags&=32767,ws=d;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Es=6,ws=null;return}}if(l=l.sibling,l!==null){ws=l;return}ws=l=a}while(l!==null);Es===0&&(Es=5)}function Ia(a,l,d){var p=Ct,b=Bn.transition;try{Bn.transition=null,Ct=1,xS(a,l,d,p)}finally{Bn.transition=b,Ct=p}return null}function xS(a,l,d,p){do zo();while(Li!==null);if((Mt&6)!==0)throw Error(s(327));d=a.finishedWork;var b=a.finishedLanes;if(d===null)return null;if(a.finishedWork=null,a.finishedLanes=0,d===a.current)throw Error(s(177));a.callbackNode=null,a.callbackPriority=0;var w=d.lanes|d.childLanes;if(lh(a,w),a===Is&&(ws=Is=null,Vs=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Rd||(Rd=!0,Hx(ge,function(){return zo(),null})),w=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||w){w=Bn.transition,Bn.transition=null;var D=Ct;Ct=1;var q=Mt;Mt|=4,mf.current=null,uS(a,d),Ix(d,a),Lj(Nh),Xr=!!wh,Nh=wh=null,a.current=d,hS(d),re(),Mt=q,Ct=D,Bn.transition=w}else a.current=d;if(Rd&&(Rd=!1,Li=a,Md=b),w=a.pendingLanes,w===0&&(Oi=null),Jt(d.stateNode),yn(a,xe()),l!==null)for(p=a.onRecoverableError,d=0;d<l.length;d++)b=l[d],p(b.value,{componentStack:b.stack,digest:b.digest});if(Id)throw Id=!1,a=xf,xf=null,a;return(Md&1)!==0&&a.tag!==0&&zo(),w=a.pendingLanes,(w&1)!==0?a===yf?Jl++:(Jl=0,yf=a):Jl=0,Ii(),null}function zo(){if(Li!==null){var a=xr(Md),l=Bn.transition,d=Ct;try{if(Bn.transition=null,Ct=16>a?16:a,Li===null)var p=!1;else{if(a=Li,Li=null,Md=0,(Mt&6)!==0)throw Error(s(331));var b=Mt;for(Mt|=4,Ye=a.current;Ye!==null;){var w=Ye,D=w.child;if((Ye.flags&16)!==0){var q=w.deletions;if(q!==null){for(var Q=0;Q<q.length;Q++){var me=q[Q];for(Ye=me;Ye!==null;){var Ae=Ye;switch(Ae.tag){case 0:case 11:case 15:Hl(8,Ae,w)}var Re=Ae.child;if(Re!==null)Re.return=Ae,Ye=Re;else for(;Ye!==null;){Ae=Ye;var Ee=Ae.sibling,qe=Ae.return;if(Cx(Ae),Ae===me){Ye=null;break}if(Ee!==null){Ee.return=qe,Ye=Ee;break}Ye=qe}}}var Ze=w.alternate;if(Ze!==null){var et=Ze.child;if(et!==null){Ze.child=null;do{var xs=et.sibling;et.sibling=null,et=xs}while(et!==null)}}Ye=w}}if((w.subtreeFlags&2064)!==0&&D!==null)D.return=w,Ye=D;else e:for(;Ye!==null;){if(w=Ye,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Hl(9,w,w.return)}var ie=w.sibling;if(ie!==null){ie.return=w.return,Ye=ie;break e}Ye=w.return}}var ee=a.current;for(Ye=ee;Ye!==null;){D=Ye;var de=D.child;if((D.subtreeFlags&2064)!==0&&de!==null)de.return=D,Ye=de;else e:for(D=ee;Ye!==null;){if(q=Ye,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:Td(9,q)}}catch(tt){hs(q,q.return,tt)}if(q===D){Ye=null;break e}var Oe=q.sibling;if(Oe!==null){Oe.return=q.return,Ye=Oe;break e}Ye=q.return}}if(Mt=b,Ii(),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(dt,a)}catch{}p=!0}return p}finally{Ct=d,Bn.transition=l}}return!1}function Bx(a,l,d){l=Mo(d,l),l=ox(a,l,1),a=Mi(a,l,1),l=sn(),a!==null&&(xa(a,1,l),yn(a,l))}function hs(a,l,d){if(a.tag===3)Bx(a,a,d);else for(;l!==null;){if(l.tag===3){Bx(l,a,d);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Oi===null||!Oi.has(p))){a=Mo(d,a),a=lx(l,a,1),l=Mi(l,a,1),a=sn(),l!==null&&(xa(l,1,a),yn(l,a));break}}l=l.return}}function yS(a,l,d){var p=a.pingCache;p!==null&&p.delete(l),l=sn(),a.pingedLanes|=a.suspendedLanes&d,Is===a&&(Vs&d)===d&&(Es===4||Es===3&&(Vs&130023424)===Vs&&500>xe()-gf?Aa(a,0):pf|=d),yn(a,l)}function qx(a,l){l===0&&((a.mode&1)===0?l=1:(l=$e,$e<<=1,($e&130023424)===0&&($e=4194304)));var d=sn();a=ri(a,l),a!==null&&(xa(a,l,d),yn(a,d))}function bS(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),qx(a,d)}function vS(a,l){var d=0;switch(a.tag){case 13:var p=a.stateNode,b=a.memoizedState;b!==null&&(d=b.retryLane);break;case 19:p=a.stateNode;break;default:throw Error(s(314))}p!==null&&p.delete(l),qx(a,d)}var Wx;Wx=function(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps||mn.current)gn=!0;else{if((a.lanes&d)===0&&(l.flags&128)===0)return gn=!1,oS(a,l,d);gn=(a.flags&131072)!==0}else gn=!1,es&&(l.flags&1048576)!==0&&Sg(l,hd,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;Cd(a,l),a=l.pendingProps;var b=_o(l,Gs.current);Io(l,d),b=Hh(null,l,p,a,b,d);var w=Gh();return l.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,pn(p)?(w=!0,cd(l)):w=!1,l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Uh(l),b.updater=kd,l.stateNode=b,b._reactInternals=l,Qh(l,p,a,d),l=nf(null,l,p,!0,w,d)):(l.tag=0,es&&w&&Th(l),tn(null,l,b,d),l=l.child),l;case 16:p=l.elementType;e:{switch(Cd(a,l),a=l.pendingProps,b=p._init,p=b(p._payload),l.type=p,b=l.tag=NS(p),a=er(p,a),b){case 0:l=sf(null,l,p,a,d);break e;case 1:l=xx(null,l,p,a,d);break e;case 11:l=hx(null,l,p,a,d);break e;case 14:l=fx(null,l,p,er(p.type,a),d);break e}throw Error(s(306,p,""))}return l;case 0:return p=l.type,b=l.pendingProps,b=l.elementType===p?b:er(p,b),sf(a,l,p,b,d);case 1:return p=l.type,b=l.pendingProps,b=l.elementType===p?b:er(p,b),xx(a,l,p,b,d);case 3:e:{if(yx(l),a===null)throw Error(s(387));p=l.pendingProps,w=l.memoizedState,b=w.element,Rg(a,l),yd(l,p,null,d);var D=l.memoizedState;if(p=D.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){b=Mo(Error(s(423)),l),l=bx(a,l,p,d,b);break e}else if(p!==b){b=Mo(Error(s(424)),l),l=bx(a,l,p,d,b);break e}else for(Cn=Ti(l.stateNode.containerInfo.firstChild),_n=l,es=!0,Qn=null,d=Ag(l,null,p,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(To(),p===b){l=ai(a,l,d);break e}tn(a,l,p,d)}l=l.child}return l;case 5:return Og(l),a===null&&Ih(l),p=l.type,b=l.pendingProps,w=a!==null?a.memoizedProps:null,D=b.children,jh(p,b)?D=null:w!==null&&jh(p,w)&&(l.flags|=32),gx(a,l),tn(a,l,D,d),l.child;case 6:return a===null&&Ih(l),null;case 13:return vx(a,l,d);case 4:return Fh(l,l.stateNode.containerInfo),p=l.pendingProps,a===null?l.child=Po(l,null,p,d):tn(a,l,p,d),l.child;case 11:return p=l.type,b=l.pendingProps,b=l.elementType===p?b:er(p,b),hx(a,l,p,b,d);case 7:return tn(a,l,l.pendingProps,d),l.child;case 8:return tn(a,l,l.pendingProps.children,d),l.child;case 12:return tn(a,l,l.pendingProps.children,d),l.child;case 10:e:{if(p=l.type._context,b=l.pendingProps,w=l.memoizedProps,D=b.value,Gt(pd,p._currentValue),p._currentValue=D,w!==null)if(Xn(w.value,D)){if(w.children===b.children&&!mn.current){l=ai(a,l,d);break e}}else for(w=l.child,w!==null&&(w.return=l);w!==null;){var q=w.dependencies;if(q!==null){D=w.child;for(var Q=q.firstContext;Q!==null;){if(Q.context===p){if(w.tag===1){Q=ii(-1,d&-d),Q.tag=2;var me=w.updateQueue;if(me!==null){me=me.shared;var Ae=me.pending;Ae===null?Q.next=Q:(Q.next=Ae.next,Ae.next=Q),me.pending=Q}}w.lanes|=d,Q=w.alternate,Q!==null&&(Q.lanes|=d),Lh(w.return,d,l),q.lanes|=d;break}Q=Q.next}}else if(w.tag===10)D=w.type===l.type?null:w.child;else if(w.tag===18){if(D=w.return,D===null)throw Error(s(341));D.lanes|=d,q=D.alternate,q!==null&&(q.lanes|=d),Lh(D,d,l),D=w.sibling}else D=w.child;if(D!==null)D.return=w;else for(D=w;D!==null;){if(D===l){D=null;break}if(w=D.sibling,w!==null){w.return=D.return,D=w;break}D=D.return}w=D}tn(a,l,b.children,d),l=l.child}return l;case 9:return b=l.type,p=l.pendingProps.children,Io(l,d),b=$n(b),p=p(b),l.flags|=1,tn(a,l,p,d),l.child;case 14:return p=l.type,b=er(p,l.pendingProps),b=er(p.type,b),fx(a,l,p,b,d);case 15:return mx(a,l,l.type,l.pendingProps,d);case 17:return p=l.type,b=l.pendingProps,b=l.elementType===p?b:er(p,b),Cd(a,l),l.tag=1,pn(p)?(a=!0,cd(l)):a=!1,Io(l,d),ix(l,p,b),Qh(l,p,b,d),nf(null,l,p,!0,a,d);case 19:return Nx(a,l,d);case 22:return px(a,l,d)}throw Error(s(156,l.tag))};function Hx(a,l){return G(a,l)}function wS(a,l,d,p){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(a,l,d,p){return new wS(a,l,d,p)}function Sf(a){return a=a.prototype,!(!a||!a.isReactComponent)}function NS(a){if(typeof a=="function")return Sf(a)?1:0;if(a!=null){if(a=a.$$typeof,a===V)return 11;if(a===fe)return 14}return 2}function Fi(a,l){var d=a.alternate;return d===null?(d=qn(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&14680064,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function zd(a,l,d,p,b,w){var D=2;if(p=a,typeof a=="function")Sf(a)&&(D=1);else if(typeof a=="string")D=5;else e:switch(a){case M:return Ra(d.children,b,w,l);case C:D=8,b|=8;break;case I:return a=qn(12,d,l,b|2),a.elementType=I,a.lanes=w,a;case A:return a=qn(13,d,l,b),a.elementType=A,a.lanes=w,a;case se:return a=qn(19,d,l,b),a.elementType=se,a.lanes=w,a;case Ie:return Ud(d,b,w,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case $:D=10;break e;case O:D=9;break e;case V:D=11;break e;case fe:D=14;break e;case je:D=16,p=null;break e}throw Error(s(130,a==null?a:typeof a,""))}return l=qn(D,d,l,b),l.elementType=a,l.type=p,l.lanes=w,l}function Ra(a,l,d,p){return a=qn(7,a,p,l),a.lanes=d,a}function Ud(a,l,d,p){return a=qn(22,a,p,l),a.elementType=Ie,a.lanes=d,a.stateNode={isHidden:!1},a}function kf(a,l,d){return a=qn(6,a,null,l),a.lanes=d,a}function _f(a,l,d){return l=qn(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function jS(a,l,d,p,b){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xl(0),this.expirationTimes=xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xl(0),this.identifierPrefix=p,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Cf(a,l,d,p,b,w,D,q,Q){return a=new jS(a,l,d,q,Q),l===1?(l=1,w===!0&&(l|=8)):l=0,w=qn(3,null,null,l),a.current=w,w.stateNode=a,w.memoizedState={element:p,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uh(w),a}function SS(a,l,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:p==null?null:""+p,children:a,containerInfo:l,implementation:d}}function Gx(a){if(!a)return Ai;a=a._reactInternals;e:{if(en(a)!==a||a.tag!==1)throw Error(s(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(pn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(s(171))}if(a.tag===1){var d=a.type;if(pn(d))return wg(a,d,l)}return l}function Kx(a,l,d,p,b,w,D,q,Q){return a=Cf(d,p,!0,a,b,w,D,q,Q),a.context=Gx(null),d=a.current,p=sn(),b=zi(d),w=ii(p,b),w.callback=l??null,Mi(d,w,b),a.current.lanes=b,xa(a,b,p),yn(a,p),a}function Fd(a,l,d,p){var b=l.current,w=sn(),D=zi(b);return d=Gx(d),l.context===null?l.context=d:l.pendingContext=d,l=ii(w,D),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=Mi(b,l,D),a!==null&&(nr(a,b,D,w),xd(a,b,D)),D}function $d(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Jx(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function Ef(a,l){Jx(a,l),(a=a.alternate)&&Jx(a,l)}function kS(){return null}var Yx=typeof reportError=="function"?reportError:function(a){console.error(a)};function Tf(a){this._internalRoot=a}Vd.prototype.render=Tf.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(s(409));Fd(a,l,null,null)},Vd.prototype.unmount=Tf.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Pa(function(){Fd(null,a,null,null)}),l[ei]=null}};function Vd(a){this._internalRoot=a}Vd.prototype.unstable_scheduleHydration=function(a){if(a){var l=wl();a={blockedOn:null,target:a,priority:l};for(var d=0;d<jn.length&&l!==0&&l<jn[d].priority;d++);jn.splice(d,0,a),d===0&&co(a)}};function Pf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Bd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Zx(){}function _S(a,l,d,p,b){if(b){if(typeof p=="function"){var w=p;p=function(){var me=$d(D);w.call(me)}}var D=Kx(l,p,a,0,null,!1,!1,"",Zx);return a._reactRootContainer=D,a[ei]=D.current,Rl(a.nodeType===8?a.parentNode:a),Pa(),D}for(;b=a.lastChild;)a.removeChild(b);if(typeof p=="function"){var q=p;p=function(){var me=$d(Q);q.call(me)}}var Q=Cf(a,0,!1,null,null,!1,!1,"",Zx);return a._reactRootContainer=Q,a[ei]=Q.current,Rl(a.nodeType===8?a.parentNode:a),Pa(function(){Fd(l,Q,d,p)}),Q}function qd(a,l,d,p,b){var w=d._reactRootContainer;if(w){var D=w;if(typeof b=="function"){var q=b;b=function(){var Q=$d(D);q.call(Q)}}Fd(l,D,a,b)}else D=_S(d,l,a,b,p);return $d(D)}bl=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var d=He(l.pendingLanes);d!==0&&(yl(l,d|1),yn(l,xe()),(Mt&6)===0&&(Lo=xe()+500,Ii()))}break;case 13:Pa(function(){var p=ri(a,1);if(p!==null){var b=sn();nr(p,a,1,b)}}),Ef(a,1)}},oo=function(a){if(a.tag===13){var l=ri(a,134217728);if(l!==null){var d=sn();nr(l,a,134217728,d)}Ef(a,134217728)}},vl=function(a){if(a.tag===13){var l=zi(a),d=ri(a,l);if(d!==null){var p=sn();nr(d,a,l,p)}Ef(a,l)}},wl=function(){return Ct},Nl=function(a,l){var d=Ct;try{return Ct=a,l()}finally{Ct=d}},gs=function(a,l,d){switch(l){case"input":if(Me(a,d),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var p=d[l];if(p!==a&&p.form===a.form){var b=od(p);if(!b)throw Error(s(90));ye(p),Me(p,b)}}}break;case"textarea":Se(a,d);break;case"select":l=d.value,l!=null&&Nt(a,!!d.multiple,l,!1)}},Je=wf,Et=Pa;var CS={usingClientEntryPoint:!1,Events:[Ol,So,od,ss,Ne,wf]},Yl={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ES={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Kr(a),a===null?null:a.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||kS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{dt=Wd.inject(ES),gt=Wd}catch{}}return bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CS,bn.createPortal=function(a,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pf(l))throw Error(s(200));return SS(a,l,null,d)},bn.createRoot=function(a,l){if(!Pf(a))throw Error(s(299));var d=!1,p="",b=Yx;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),l=Cf(a,1,!1,null,null,d,!1,p,b),a[ei]=l.current,Rl(a.nodeType===8?a.parentNode:a),new Tf(l)},bn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=Kr(l),a=a===null?null:a.stateNode,a},bn.flushSync=function(a){return Pa(a)},bn.hydrate=function(a,l,d){if(!Bd(l))throw Error(s(200));return qd(null,a,l,!0,d)},bn.hydrateRoot=function(a,l,d){if(!Pf(a))throw Error(s(405));var p=d!=null&&d.hydratedSources||null,b=!1,w="",D=Yx;if(d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onRecoverableError!==void 0&&(D=d.onRecoverableError)),l=Kx(l,null,a,1,d??null,b,!1,w,D),a[ei]=l.current,Rl(a),p)for(a=0;a<p.length;a++)d=p[a],b=d._getVersion,b=b(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,b]:l.mutableSourceEagerHydrationData.push(d,b);return new Vd(l)},bn.render=function(a,l,d){if(!Bd(l))throw Error(s(200));return qd(null,a,l,!1,d)},bn.unmountComponentAtNode=function(a){if(!Bd(a))throw Error(s(40));return a._reactRootContainer?(Pa(function(){qd(null,null,a,!1,function(){a._reactRootContainer=null,a[ei]=null})}),!0):!1},bn.unstable_batchedUpdates=wf,bn.unstable_renderSubtreeIntoContainer=function(a,l,d,p){if(!Bd(d))throw Error(s(200));if(a==null||a._reactInternals===void 0)throw Error(s(38));return qd(a,l,d,!1,p)},bn.version="18.3.1-next-f1338f8080-20240426",bn}var i0;function Av(){if(i0)return Rf.exports;i0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rf.exports=LS(),Rf.exports}var a0;function zS(){if(a0)return Hd;a0=1;var n=Av();return Hd.createRoot=n.createRoot,Hd.hydrateRoot=n.hydrateRoot,Hd}var US=zS();const FS=Pv(US);Av();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hc(){return hc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},hc.apply(this,arguments)}var Xi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Xi||(Xi={}));const o0="popstate";function $S(n){n===void 0&&(n={});function e(i,o){let{pathname:c="/",search:u="",hash:f=""}=ro(i.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),mm("",{pathname:c,search:u,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(i,o){let c=i.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let f=i.location.href,h=f.indexOf("#");u=h===-1?f:f.slice(0,h)}return u+"#"+(typeof o=="string"?o:yu(o))}function r(i,o){Bu(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return BS(e,s,r,n)}function bs(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Bu(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VS(){return Math.random().toString(36).substr(2,8)}function l0(n,e){return{usr:n.state,key:n.key,idx:e}}function mm(n,e,s,r){return s===void 0&&(s=null),hc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ro(e):e,{state:s,key:e&&e.key||r||VS()})}function yu(n){let{pathname:e="/",search:s="",hash:r=""}=n;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ro(n){let e={};if(n){let s=n.indexOf("#");s>=0&&(e.hash=n.substr(s),n=n.substr(0,s));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function BS(n,e,s,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,u=Xi.Pop,f=null,h=y();h==null&&(h=0,c.replaceState(hc({},c.state,{idx:h}),""));function y(){return(c.state||{idx:null}).idx}function v(){u=Xi.Pop;let P=y(),L=P==null?null:P-h;h=P,f&&f({action:u,location:_.location,delta:L})}function j(P,L){u=Xi.Push;let U=mm(_.location,P,L);s&&s(U,P),h=y()+1;let F=l0(U,h),J=_.createHref(U);try{c.pushState(F,"",J)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;i.location.assign(J)}o&&f&&f({action:u,location:_.location,delta:1})}function E(P,L){u=Xi.Replace;let U=mm(_.location,P,L);s&&s(U,P),h=y();let F=l0(U,h),J=_.createHref(U);c.replaceState(F,"",J),o&&f&&f({action:u,location:_.location,delta:0})}function k(P){let L=i.location.origin!=="null"?i.location.origin:i.location.href,U=typeof P=="string"?P:yu(P);return U=U.replace(/ $/,"%20"),bs(L,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,L)}let _={get action(){return u},get location(){return n(i,c)},listen(P){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(o0,v),f=P,()=>{i.removeEventListener(o0,v),f=null}},createHref(P){return e(i,P)},createURL:k,encodeLocation(P){let L=k(P);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:j,replace:E,go(P){return c.go(P)}};return _}var c0;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(c0||(c0={}));function qS(n,e,s){return s===void 0&&(s="/"),WS(n,e,s)}function WS(n,e,s,r){let i=typeof e=="string"?ro(e):e,o=tp(i.pathname||"/",s);if(o==null)return null;let c=Iv(n);HS(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let h=r1(o);u=t1(c[f],h)}return u}function Iv(n,e,s,r){e===void 0&&(e=[]),s===void 0&&(s=[]),r===void 0&&(r="");let i=(o,c,u)=>{let f={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};f.relativePath.startsWith("/")&&(bs(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let h=ta([r,f.relativePath]),y=s.concat(f);o.children&&o.children.length>0&&(bs(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Iv(o.children,e,y,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:QS(h,o.index),routesMeta:y})};return n.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let f of Rv(o.path))i(o,c,f)}),e}function Rv(n){let e=n.split("/");if(e.length===0)return[];let[s,...r]=e,i=s.endsWith("?"),o=s.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=Rv(r.join("/")),u=[];return u.push(...c.map(f=>f===""?o:[o,f].join("/"))),i&&u.push(...c),u.map(f=>n.startsWith("/")&&f===""?"/":f)}function HS(n){n.sort((e,s)=>e.score!==s.score?s.score-e.score:e1(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const GS=/^:[\w-]+$/,KS=3,JS=2,YS=1,ZS=10,XS=-2,d0=n=>n==="*";function QS(n,e){let s=n.split("/"),r=s.length;return s.some(d0)&&(r+=XS),e&&(r+=JS),s.filter(i=>!d0(i)).reduce((i,o)=>i+(GS.test(o)?KS:o===""?YS:ZS),r)}function e1(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function t1(n,e,s){let{routesMeta:r}=n,i={},o="/",c=[];for(let u=0;u<r.length;++u){let f=r[u],h=u===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=s1({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},y),j=f.route;if(!v)return null;Object.assign(i,v.params),c.push({params:i,pathname:ta([o,v.pathname]),pathnameBase:c1(ta([o,v.pathnameBase])),route:j}),v.pathnameBase!=="/"&&(o=ta([o,v.pathnameBase]))}return c}function s1(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[s,r]=n1(n.path,n.caseSensitive,n.end),i=e.match(s);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,y,v)=>{let{paramName:j,isOptional:E}=y;if(j==="*"){let _=u[v]||"";c=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const k=u[v];return E&&!k?h[j]=void 0:h[j]=(k||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:c,pattern:n}}function n1(n,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Bu(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function r1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bu(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function tp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=n.charAt(s);return r&&r!=="/"?null:n.slice(s)||"/"}const i1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a1=n=>i1.test(n);function o1(n,e){e===void 0&&(e="/");let{pathname:s,search:r="",hash:i=""}=typeof n=="string"?ro(n):n,o;if(s)if(a1(s))o=s;else{if(s.includes("//")){let c=s;s=s.replace(/\/\/+/g,"/"),Bu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+s))}s.startsWith("/")?o=u0(s.substring(1),"/"):o=u0(s,e)}else o=e;return{pathname:o,search:d1(r),hash:u1(i)}}function u0(n,e){let s=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Of(n,e,s,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function l1(n){return n.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function sp(n,e){let s=l1(n);return e?s.map((r,i)=>i===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function np(n,e,s,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=ro(n):(i=hc({},n),bs(!i.pathname||!i.pathname.includes("?"),Of("?","pathname","search",i)),bs(!i.pathname||!i.pathname.includes("#"),Of("#","pathname","hash",i)),bs(!i.search||!i.search.includes("#"),Of("#","search","hash",i)));let o=n===""||i.pathname==="",c=o?"/":i.pathname,u;if(c==null)u=s;else{let v=e.length-1;if(!r&&c.startsWith("..")){let j=c.split("/");for(;j[0]==="..";)j.shift(),v-=1;i.pathname=j.join("/")}u=v>=0?e[v]:"/"}let f=o1(i,u),h=c&&c!=="/"&&c.endsWith("/"),y=(o||c===".")&&s.endsWith("/");return!f.pathname.endsWith("/")&&(h||y)&&(f.pathname+="/"),f}const ta=n=>n.join("/").replace(/\/\/+/g,"/"),c1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),d1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,u1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function h1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Mv=["post","put","patch","delete"];new Set(Mv);const f1=["get",...Mv];new Set(f1);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fc(){return fc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},fc.apply(this,arguments)}const rp=S.createContext(null),m1=S.createContext(null),da=S.createContext(null),qu=S.createContext(null),Vr=S.createContext({outlet:null,matches:[],isDataRoute:!1}),Dv=S.createContext(null);function p1(n,e){let{relative:s}=e===void 0?{}:e;dl()||bs(!1);let{basename:r,navigator:i}=S.useContext(da),{hash:o,pathname:c,search:u}=Lv(n,{relative:s}),f=c;return r!=="/"&&(f=c==="/"?r:ta([r,c])),i.createHref({pathname:f,search:u,hash:o})}function dl(){return S.useContext(qu)!=null}function ua(){return dl()||bs(!1),S.useContext(qu).location}function Ov(n){S.useContext(da).static||S.useLayoutEffect(n)}function cn(){let{isDataRoute:n}=S.useContext(Vr);return n?P1():g1()}function g1(){dl()||bs(!1);let n=S.useContext(rp),{basename:e,future:s,navigator:r}=S.useContext(da),{matches:i}=S.useContext(Vr),{pathname:o}=ua(),c=JSON.stringify(sp(i,s.v7_relativeSplatPath)),u=S.useRef(!1);return Ov(()=>{u.current=!0}),S.useCallback(function(h,y){if(y===void 0&&(y={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let v=np(h,JSON.parse(c),o,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ta([e,v.pathname])),(y.replace?r.replace:r.push)(v,y.state,y)},[e,r,c,o,n])}const x1=S.createContext(null);function y1(n){let e=S.useContext(Vr).outlet;return e&&S.createElement(x1.Provider,{value:n},e)}function Dc(){let{matches:n}=S.useContext(Vr),e=n[n.length-1];return e?e.params:{}}function Lv(n,e){let{relative:s}=e===void 0?{}:e,{future:r}=S.useContext(da),{matches:i}=S.useContext(Vr),{pathname:o}=ua(),c=JSON.stringify(sp(i,r.v7_relativeSplatPath));return S.useMemo(()=>np(n,JSON.parse(c),o,s==="path"),[n,c,o,s])}function b1(n,e){return v1(n,e)}function v1(n,e,s,r){dl()||bs(!1);let{navigator:i}=S.useContext(da),{matches:o}=S.useContext(Vr),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let h=ua(),y;if(e){var v;let P=typeof e=="string"?ro(e):e;f==="/"||(v=P.pathname)!=null&&v.startsWith(f)||bs(!1),y=P}else y=h;let j=y.pathname||"/",E=j;if(f!=="/"){let P=f.replace(/^\//,"").split("/");E="/"+j.replace(/^\//,"").split("/").slice(P.length).join("/")}let k=qS(n,{pathname:E}),_=k1(k&&k.map(P=>Object.assign({},P,{params:Object.assign({},u,P.params),pathname:ta([f,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?f:ta([f,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),o,s,r);return e&&_?S.createElement(qu.Provider,{value:{location:fc({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Xi.Pop}},_):_}function w1(){let n=T1(),e=h1(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),s=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),s?S.createElement("pre",{style:i},s):null,null)}const N1=S.createElement(w1,null);class j1 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?S.createElement(Vr.Provider,{value:this.props.routeContext},S.createElement(Dv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function S1(n){let{routeContext:e,match:s,children:r}=n,i=S.useContext(rp);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),S.createElement(Vr.Provider,{value:e},r)}function k1(n,e,s,r){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),r===void 0&&(r=null),n==null){var o;if(!s)return null;if(s.errors)n=s.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)n=s.matches;else return null}let c=n,u=(i=s)==null?void 0:i.errors;if(u!=null){let y=c.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);y>=0||bs(!1),c=c.slice(0,Math.min(c.length,y+1))}let f=!1,h=-1;if(s&&r&&r.v7_partialHydration)for(let y=0;y<c.length;y++){let v=c[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(h=y),v.route.id){let{loaderData:j,errors:E}=s,k=v.route.loader&&j[v.route.id]===void 0&&(!E||E[v.route.id]===void 0);if(v.route.lazy||k){f=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((y,v,j)=>{let E,k=!1,_=null,P=null;s&&(E=u&&v.route.id?u[v.route.id]:void 0,_=v.route.errorElement||N1,f&&(h<0&&j===0?(A1("route-fallback"),k=!0,P=null):h===j&&(k=!0,P=v.route.hydrateFallbackElement||null)));let L=e.concat(c.slice(0,j+1)),U=()=>{let F;return E?F=_:k?F=P:v.route.Component?F=S.createElement(v.route.Component,null):v.route.element?F=v.route.element:F=y,S.createElement(S1,{match:v,routeContext:{outlet:y,matches:L,isDataRoute:s!=null},children:F})};return s&&(v.route.ErrorBoundary||v.route.errorElement||j===0)?S.createElement(j1,{location:s.location,revalidation:s.revalidation,component:_,error:E,children:U(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):U()},null)}var zv=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(zv||{}),Uv=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Uv||{});function _1(n){let e=S.useContext(rp);return e||bs(!1),e}function C1(n){let e=S.useContext(m1);return e||bs(!1),e}function E1(n){let e=S.useContext(Vr);return e||bs(!1),e}function Fv(n){let e=E1(),s=e.matches[e.matches.length-1];return s.route.id||bs(!1),s.route.id}function T1(){var n;let e=S.useContext(Dv),s=C1(),r=Fv();return e!==void 0?e:(n=s.errors)==null?void 0:n[r]}function P1(){let{router:n}=_1(zv.UseNavigateStable),e=Fv(Uv.UseNavigateStable),s=S.useRef(!1);return Ov(()=>{s.current=!0}),S.useCallback(function(i,o){o===void 0&&(o={}),s.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,fc({fromRouteId:e},o)))},[n,e])}const h0={};function A1(n,e,s){h0[n]||(h0[n]=!0)}function I1(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function R1(n){let{to:e,replace:s,state:r,relative:i}=n;dl()||bs(!1);let{future:o,static:c}=S.useContext(da),{matches:u}=S.useContext(Vr),{pathname:f}=ua(),h=cn(),y=np(e,sp(u,o.v7_relativeSplatPath),f,i==="path"),v=JSON.stringify(y);return S.useEffect(()=>h(JSON.parse(v),{replace:s,state:r,relative:i}),[h,v,i,s,r]),null}function $v(n){return y1(n.context)}function bt(n){bs(!1)}function M1(n){let{basename:e="/",children:s=null,location:r,navigationType:i=Xi.Pop,navigator:o,static:c=!1,future:u}=n;dl()&&bs(!1);let f=e.replace(/^\/*/,"/"),h=S.useMemo(()=>({basename:f,navigator:o,static:c,future:fc({v7_relativeSplatPath:!1},u)}),[f,u,o,c]);typeof r=="string"&&(r=ro(r));let{pathname:y="/",search:v="",hash:j="",state:E=null,key:k="default"}=r,_=S.useMemo(()=>{let P=tp(y,f);return P==null?null:{location:{pathname:P,search:v,hash:j,state:E,key:k},navigationType:i}},[f,y,v,j,E,k,i]);return _==null?null:S.createElement(da.Provider,{value:h},S.createElement(qu.Provider,{children:s,value:_}))}function D1(n){let{children:e,location:s}=n;return b1(pm(e),s)}new Promise(()=>{});function pm(n,e){e===void 0&&(e=[]);let s=[];return S.Children.forEach(n,(r,i)=>{if(!S.isValidElement(r))return;let o=[...e,i];if(r.type===S.Fragment){s.push.apply(s,pm(r.props.children,o));return}r.type!==bt&&bs(!1),!r.props.index||!r.props.children||bs(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=pm(r.props.children,o)),s.push(c)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gm(){return gm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},gm.apply(this,arguments)}function O1(n,e){if(n==null)return{};var s={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(s[i]=n[i]);return s}function L1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function z1(n,e){return n.button===0&&(!e||e==="_self")&&!L1(n)}const U1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],F1="6";try{window.__reactRouterVersion=F1}catch{}const $1="startTransition",f0=MS[$1];function V1(n){let{basename:e,children:s,future:r,window:i}=n,o=S.useRef();o.current==null&&(o.current=$S({window:i,v5Compat:!0}));let c=o.current,[u,f]=S.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},y=S.useCallback(v=>{h&&f0?f0(()=>f(v)):f(v)},[f,h]);return S.useLayoutEffect(()=>c.listen(y),[c,y]),S.useEffect(()=>I1(r),[r]),S.createElement(M1,{basename:e,children:s,location:u.location,navigationType:u.action,navigator:c,future:r})}const B1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",q1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=S.forwardRef(function(e,s){let{onClick:r,relative:i,reloadDocument:o,replace:c,state:u,target:f,to:h,preventScrollReset:y,viewTransition:v}=e,j=O1(e,U1),{basename:E}=S.useContext(da),k,_=!1;if(typeof h=="string"&&q1.test(h)&&(k=h,B1))try{let F=new URL(window.location.href),J=h.startsWith("//")?new URL(F.protocol+h):new URL(h),te=tp(J.pathname,E);J.origin===F.origin&&te!=null?h=te+J.search+J.hash:_=!0}catch{}let P=p1(h,{relative:i}),L=W1(h,{replace:c,state:u,target:f,preventScrollReset:y,relative:i,viewTransition:v});function U(F){r&&r(F),F.defaultPrevented||L(F)}return S.createElement("a",gm({},j,{href:k||P,onClick:_||o?r:U,ref:s,target:f}))});var m0;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(m0||(m0={}));var p0;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(p0||(p0={}));function W1(n,e){let{target:s,replace:r,state:i,preventScrollReset:o,relative:c,viewTransition:u}=e===void 0?{}:e,f=cn(),h=ua(),y=Lv(n,{relative:c});return S.useCallback(v=>{if(z1(v,s)){v.preventDefault();let j=r!==void 0?r:yu(h)===yu(y);f(n,{replace:j,state:i,preventScrollReset:o,relative:c,viewTransition:u})}},[h,f,y,r,i,s,n,o,c,u])}const g0=[{id:"bc0ef8b5-e4b9-4bc8-aedd-d677391d74c0",name:"Red Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763528572144%2F1763528976141_red%20model.png?alt=media&token=1deef60f-3c4f-4e3e-beae-763d1b39621e",description:"Passion & Energy"},{id:"23bcfca6-5735-4481-ab25-9d61ac83bc3f",name:"Pink Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763716235698%2F1763716259515_pink%20model.png?alt=media&token=c41510b1-9946-49d0-8b19-f679f24d392b",description:"Love & Softness"},{id:"3427e08d-f82c-47c7-b5e7-2b8567733f38",name:"Silver Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732069765%2F1763732089246_silver%20model.png?alt=media&token=eb30db54-99d1-4c3f-ba97-0f2b34934d79",description:"Sleek & Modern"},{id:"3efca09b-07d8-40f2-8b6e-104049593cb3",name:"Colorfull",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763849326772%2F1763849625346_colorfull.jpg?alt=media&token=41d78666-4aa1-47a0-935f-c5361b4538ac",description:"Vibrant & Fun"},{id:"530b80f1-ac27-4ab4-ac10-f093d9d48dde",name:"Green Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732028982%2F1763732064239_download%20(1).png?alt=media&token=1b184b78-799f-4d79-9e55-8d122c2c07eb",description:"Nature & Harmony"},{id:"5fa9457f-3d9b-421c-9746-6bffbee4d4da",name:"Yellow Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732120801%2F1763732142964_download.png?alt=media&token=49c0be99-48b2-47ba-9cb4-38628d2876fe",description:"Joy & Sunshine"},{id:"6e673b67-9dd3-44b8-8797-51cc7e4ddf07",name:"Orange Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732327301%2F1763732349258_orange%20model.png?alt=media&token=78d402fc-e0f7-4b73-b0d3-a7502f7bc6d3",description:"Warmth & Creativity"},{id:"80da52b5-5130-462c-8f27-bdf7ff1c6564",name:"Black Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732028102%2F1763732058240_1.jpg?alt=media&token=6458bde4-9255-4c11-9015-ec738b79a8cb",description:"Bold & Mysterious"},{id:"8e8e275a-98fb-42b9-8551-ffeff03fb92a",name:"Purple Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763529047916%2F1763529076550_purple%20model.png?alt=media&token=10fa0811-7c4c-4c41-9165-262addea89f3",description:"Royalty & Spirit"},{id:"9667b780-6f85-48ad-a19e-da0951efc590",name:"Bronze and Brown Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732005647%2F1763732023012_copper%20model.png?alt=media&token=72619e26-b086-4913-a97f-ed8bea238d23",description:"Earthy & Ancient"},{id:"9d24210c-eb1c-4273-8f6d-beebe2016fc4",name:"Blue Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763529024900%2F1763529043293_2.jpg?alt=media&token=29dcba53-1264-45a2-9b68-a661a277cc91",description:"Calm & Ocean"},{id:"9d9fff97-3b25-409e-9e39-4a3b6412bb57",name:"Girls",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1764232246395%2F1764232265823_girls%20color%20background.jpg?alt=media&token=13860e81-a2e7-48fc-a6b3-42d0763c8d41",description:"Fun & Playful"},{id:"b40795f0-5b04-4e95-8e84-40ca3c9561d1",name:"White & Pearl Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763731966302%2F1763731995895_white%20model.png?alt=media&token=56bdfed9-00c4-4442-ac6a-358d1223e04c",description:"Elegance & Purity"},{id:"1ef06240-10e5-4bdf-9286-84d355991e95",name:"Gold Collection",image:"https://firebasestorage.googleapis.com/v0/b/spoilme-edee0.firebasestorage.app/o/categories%2Fcat_1763732095040%2F1763732116711_gold%20model.png?alt=media&token=25b5331b-6bf1-4ecc-94c8-1ceb31ccdcc7",description:"Luxury & Wealth"}],H1=[{id:"1761729812469",code:"SPV-003",name:"Sweetheart Red Resin Stud Earrings",slug:"sweetheart-red-resin-studs",description:"Embrace a touch of whimsy with these adorable sweetheart stud earrings, meticulously crafted from vibrant epoxy resin. Each glossy red heart reflects light beautifully.",whenAndHowToWear:"Perfect for date nights or adding a pop of color to a monochrome outfit.",price:29,priceUSD:2,compareAtPrice:45,memberPrice:14.5,costPrice:5,category:"Red Collection",type:"Stud",status:"published",images:[],stock:58,tags:["Red heart earrings","stud earrings","resin jewelry","handmade"],seoKeywords:["heart earrings","red studs"],earringMaterials:[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal"},{name:"Stainless Steel",modifier:0,description:"Hypo-allergenic"}],isNewArrival:!1,isBestSeller:!0,reviews:[{id:"rev1",userName:"Amelia Thompson",location:"London, UK",content:"The sparkle of these earrings is absolutely mesmerizing, perfect for adding elegance to any outfit.",rating:5,date:"2024-11-15T10:30:00Z"},{id:"rev2",userName:"Carlos Ramirez",location:"Mexico City, Mexico",content:"Good quality, but the durability could be better for everyday wear.",rating:4,date:"2024-12-20T14:45:00Z"},{id:"rev3",userName:"Yuki Tanaka",location:"Tokyo, Japan",content:"These arrived faster than expected and the craftsmanship is impeccable. Highly recommend for special occasions.",rating:5,date:"2025-01-22T09:15:00Z"},{id:"rev4",userName:"Fatima Al-Zahra",location:"Dubai, UAE",content:"Beautiful design, though the price feels a bit high for the materials used.",rating:4,date:"2025-02-25T16:20:00Z"},{id:"rev5",userName:"Liam O'Sullivan",location:"Dublin, Ireland",content:"The color is vibrant and the design is unique. Perfect for everyday wear.",rating:4,date:"2025-03-28T11:00:00Z"},{id:"rev6",userName:"Priya Sharma",location:"Mumbai, India",content:"Nice piece, but I wish it sparkled more under different lights.",rating:3,date:"2025-04-01T13:30:00Z"},{id:"rev7",userName:"Hans Mueller",location:"Berlin, Germany",content:"Exceeded my expectations in terms of quality and style. The opal shines beautifully under light.",rating:5,date:"2025-05-03T08:45:00Z"},{id:"rev8",userName:"Isabella Rossi",location:"Rome, Italy",content:"Elegant design, but the durability is questionable after a few wears.",rating:3,date:"2025-06-05T17:10:00Z"},{id:"rev9",userName:"Ahmed Hassan",location:"Cairo, Egypt",content:"The ring fits perfectly and the stone has amazing play of colors. Worth every penny.",rating:5,date:"2025-07-07T12:25:00Z"},{id:"rev10",userName:"Sophie Dubois",location:"Paris, France",content:"Charming, and the price is reasonable for the sparkle it provides.",rating:4,date:"2025-08-09T15:50:00Z"},{id:"rev11",userName:"Raj Patel",location:"Sydney, Australia",content:"Fast shipping and the product is as described. Very satisfied with the purchase.",rating:5,date:"2025-09-11T10:05:00Z"},{id:"rev12",userName:"Elena Petrova",location:"Moscow, Russia",content:"Unique style, but the durability leaves much to be desired.",rating:3,date:"2025-10-13T14:30:00Z"},{id:"rev13",userName:"Miguel Santos",location:"So Paulo, Brazil",content:"The earrings are lightweight and comfortable to wear all day. Love the red color.",rating:4,date:"2025-11-15T09:20:00Z"}],createdAt:new Date().toISOString()},{id:"1762477248818",code:"SPV-052",name:"Ethereal Aurora Oval Opal Ring",slug:"ethereal-aurora-oval-opal-ring",description:"Experience the captivating play of color in this unique oval opal ring, meticulously set in gleaming sterling silver.",price:129,priceUSD:7,costPrice:50,memberPrice:60,backOfficeLink:"https://www.temu.com/example-ring-link",madeBy:"Outsourced",category:"White or Pearl Collection",type:"Ring",status:"published",images:[],stock:7,ringStock:{5:1,6:1,7:1,8:1,9:1,10:1,11:1},tags:["Opal ring","sterling silver","statement ring"],isNewArrival:!0,isFeaturedRing:!0,reviews:[{id:"rev14",userName:"Aisha Khan",location:"Karachi, Pakistan",content:"Gorgeous sparkle, but the price is a bit steep for what you get.",rating:4,date:"2024-11-17T16:45:00Z"},{id:"rev15",userName:"Oliver Jensen",location:"Copenhagen, Denmark",content:"High-quality materials and excellent customer service. The ring is a standout piece.",rating:5,date:"2024-12-19T11:15:00Z"},{id:"rev16",userName:"Nina Kowalski",location:"Warsaw, Poland",content:"Decent value, though durability could be improved.",rating:3,date:"2025-01-21T13:40:00Z"},{id:"rev17",userName:"Diego Fernandez",location:"Buenos Aires, Argentina",content:"The opal's iridescence is mesmerizing. Arrived well-packaged and on time.",rating:5,date:"2025-02-23T08:55:00Z"},{id:"rev18",userName:"Layla Al-Farsi",location:"Riyadh, Saudi Arabia",content:"Stylish accessory with great sparkle, worth the investment.",rating:5,date:"2025-03-25T17:25:00Z"},{id:"rev19",userName:"Finn Larsen",location:"Oslo, Norway",content:"Great attention to detail in the craftsmanship. Perfect for gifting.",rating:4,date:"2025-04-27T12:10:00Z"},{id:"rev20",userName:"Zara Ahmed",location:"Lagos, Nigeria",content:"Impressive quality, but the durability is not as expected.",rating:3,date:"2025-05-29T15:35:00Z"},{id:"rev21",userName:"Luca Bianchi",location:"Milan, Italy",content:"The earrings sparkle just right and the resin is smooth. Very happy with this buy.",rating:5,date:"2025-06-31T10:50:00Z"},{id:"rev22",userName:"Anika Gupta",location:"Delhi, India",content:"Solid choice, and the price matches the sparkle and quality.",rating:4,date:"2025-07-02T14:15:00Z"},{id:"rev23",userName:"Victor Nguyen",location:"Ho Chi Minh City, Vietnam",content:"Beautiful design and the silver setting enhances the opal perfectly. Highly recommended.",rating:5,date:"2025-08-04T09:30:00Z"},{id:"rev24",userName:"Maya Cohen",location:"Tel Aviv, Israel",content:"Lovely item with excellent durability for daily use.",rating:4,date:"2025-09-06T16:55:00Z"},{id:"rev25",userName:"Johan Svensson",location:"Stockholm, Sweden",content:"The product exceeded my expectations. The color and fit are spot on.",rating:5,date:"2025-10-08T11:40:00Z"}],createdAt:new Date().toISOString()}],Ir={id:"guest",name:"Guest",email:"",isMember:!1,membershipTier:"none",loyaltyPoints:0,affiliateCode:"",affiliateEarnings:0,wishlist:[],notifications:[],isAdmin:!1,socialRewards:{},shippingAddress:{street:"",suburb:"",city:"",province:"",postalCode:""}},G1=[{id:"s1",title:"Summer Tech Sale",products:["1761729812469"],discountPercentage:15,endsAt:new Date(Date.now()+864e5*2).toISOString(),image:"https://picsum.photos/800/400?random=20"}];function Wu(n,e){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(s[r[i]]=n[r[i]]);return s}function K1(n,e,s,r){function i(o){return o instanceof s?o:new s(function(c){c(o)})}return new(s||(s=Promise))(function(o,c){function u(y){try{h(r.next(y))}catch(v){c(v)}}function f(y){try{h(r.throw(y))}catch(v){c(v)}}function h(y){y.done?o(y.value):i(y.value).then(u,f)}h((r=r.apply(n,e||[])).next())})}const J1=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class ip extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class Y1 extends ip{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class x0 extends ip{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class y0 extends ip{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xm;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(xm||(xm={}));class Z1{constructor(e,{headers:s={},customFetch:r,region:i=xm.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=J1(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return K1(this,arguments,void 0,function*(s,r={}){var i;let o,c;try{const{headers:u,method:f,body:h,signal:y,timeout:v}=r;let j={},{region:E}=r;E||(E=this.region);const k=new URL(`${this.url}/${s}`);E&&E!=="any"&&(j["x-region"]=E,k.searchParams.set("forceFunctionRegion",E));let _;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(j["Content-Type"]="application/octet-stream",_=h):typeof h=="string"?(j["Content-Type"]="text/plain",_=h):typeof FormData<"u"&&h instanceof FormData?_=h:(j["Content-Type"]="application/json",_=JSON.stringify(h)):_=h;let P=y;v&&(c=new AbortController,o=setTimeout(()=>c.abort(),v),y?(P=c.signal,y.addEventListener("abort",()=>c.abort())):P=c.signal);const L=yield this.fetch(k.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},j),this.headers),u),body:_,signal:P}).catch(te=>{throw new Y1(te)}),U=L.headers.get("x-relay-error");if(U&&U==="true")throw new x0(L);if(!L.ok)throw new y0(L);let F=((i=L.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),J;return F==="application/json"?J=yield L.json():F==="application/octet-stream"||F==="application/pdf"?J=yield L.blob():F==="text/event-stream"?J=L:F==="multipart/form-data"?J=yield L.formData():J=yield L.text(),{data:J,error:null,response:L}}catch(u){return{data:null,error:u,response:u instanceof y0||u instanceof x0?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var X1=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},Q1=class{constructor(n){var e,s;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(s=n.isMaybeSingle)!==null&&s!==void 0?s:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let c=null,u=null,f=null,h=o.status,y=o.statusText;if(o.ok){var v,j;if(s.method!=="HEAD"){var E;const L=await o.text();L===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((E=s.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?u=L:u=JSON.parse(L))}const _=(v=s.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),P=(j=o.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");_&&P&&P.length>1&&(f=parseInt(P[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,y="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var k;const _=await o.text();try{c=JSON.parse(_),Array.isArray(c)&&o.status===404&&(u=[],c=null,h=200,y="OK")}catch{o.status===404&&_===""?(h=204,y="No Content"):c={message:_}}if(c&&s.isMaybeSingle&&(!(c==null||(k=c.details)===null||k===void 0)&&k.includes("0 rows"))&&(c=null,h=200,y="OK"),c&&s.shouldThrowOnError)throw new X1(c)}return{error:c,data:u,count:f,status:h,statusText:y}});return this.shouldThrowOnError||(i=i.catch(o=>{var c;let u="";const f=o==null?void 0:o.cause;if(f){var h,y,v,j;const k=(h=f==null?void 0:f.message)!==null&&h!==void 0?h:"",_=(y=f==null?void 0:f.code)!==null&&y!==void 0?y:"";u=`${(v=o==null?void 0:o.name)!==null&&v!==void 0?v:"FetchError"}: ${o==null?void 0:o.message}`,u+=`

Caused by: ${(j=f==null?void 0:f.name)!==null&&j!==void 0?j:"Error"}: ${k}`,_&&(u+=` (${_})`),f!=null&&f.stack&&(u+=`
${f.stack}`)}else{var E;u=(E=o==null?void 0:o.stack)!==null&&E!==void 0?E:""}return{error:{message:`${(c=o==null?void 0:o.name)!==null&&c!==void 0?c:"FetchError"}: ${o==null?void 0:o.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(n,e)}returns(){return this}overrideTypes(){return this}},e2=class extends Q1{select(n){let e=!1;const s=(n??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${n}.${e?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:s=e}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${n}`),this}range(n,e,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${n}`),this.url.searchParams.set(o,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var c;const u=[n?"analyze":null,e?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${f}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const b0=new RegExp("[,()]");var Go=class extends e2{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const s=Array.from(new Set(e)).map(r=>typeof r=="string"&&b0.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`in.(${s})`),this}notIn(n,e){const s=Array.from(new Set(e)).map(r=>typeof r=="string"&&b0.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`not.in.(${s})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:s,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(n,`${i}fts${o}.${e}`),this}match(n){return Object.entries(n).forEach(([e,s])=>{this.url.searchParams.append(e,`eq.${s}`)}),this}not(n,e,s){return this.url.searchParams.append(n,`not.${e}.${s}`),this}or(n,{foreignTable:e,referencedTable:s=e}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${n})`),this}filter(n,e,s){return this.url.searchParams.append(n,`${e}.${s}`),this}},t2=class{constructor(n,{headers:e={},schema:s,fetch:r}){this.url=n,this.headers=new Headers(e),this.schema=s,this.fetch=r}select(n,e){const{head:s=!1,count:r}=e??{},i=s?"HEAD":"GET";let o=!1;const c=(n??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",c),r&&this.headers.append("Prefer",`count=${r}`),new Go({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:e,defaultToNull:s=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const o=n.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Go({method:i,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(n,{onConflict:e,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){var o;const c="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const u=n.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(u.length>0){const f=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new Go({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(n,{count:e}={}){var s;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Go({method:r,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:n}={}){var e;const s="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new Go({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},s2=class Vv{constructor(e,{headers:s={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(s),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new t2(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Vv(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:i=!1,count:o}={}){var c;let u;const f=new URL(`${this.url}/rpc/${e}`);let h;r||i?(u=r?"HEAD":"GET",Object.entries(s).filter(([v,j])=>j!==void 0).map(([v,j])=>[v,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([v,j])=>{f.searchParams.append(v,j)})):(u="POST",h=s);const y=new Headers(this.headers);return o&&y.set("Prefer",`count=${o}`),new Go({method:u,url:f,headers:y,schema:this.schemaName,body:h,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class n2{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const r=s.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const r=this.getWebSocketConstructor();return new r(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const r2="2.89.0",i2=`realtime-js/${r2}`,Bv="1.0.0",a2="2.0.0",v0=Bv,ym=1e4,o2=1e3,l2=100;var qi;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(qi||(qi={}));var Ts;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ts||(Ts={}));var ar;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ar||(ar={}));var bm;(function(n){n.websocket="websocket"})(bm||(bm={}));var za;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(za||(za={}));class c2{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,s){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return s(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var s;return this._isArrayBuffer((s=e.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var s,r;const i=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var s,r;const i=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,s,r){var i,o;const c=e.topic,u=(i=e.ref)!==null&&i!==void 0?i:"",f=(o=e.join_ref)!==null&&o!==void 0?o:"",h=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},v=Object.keys(y).length===0?"":JSON.stringify(y);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const j=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+u.length+c.length+h.length+v.length,E=new ArrayBuffer(this.HEADER_LENGTH+j);let k=new DataView(E),_=0;k.setUint8(_++,this.KINDS.userBroadcastPush),k.setUint8(_++,f.length),k.setUint8(_++,u.length),k.setUint8(_++,c.length),k.setUint8(_++,h.length),k.setUint8(_++,v.length),k.setUint8(_++,s),Array.from(f,L=>k.setUint8(_++,L.charCodeAt(0))),Array.from(u,L=>k.setUint8(_++,L.charCodeAt(0))),Array.from(c,L=>k.setUint8(_++,L.charCodeAt(0))),Array.from(h,L=>k.setUint8(_++,L.charCodeAt(0))),Array.from(v,L=>k.setUint8(_++,L.charCodeAt(0)));var P=new Uint8Array(E.byteLength+r.byteLength);return P.set(new Uint8Array(E),0),P.set(new Uint8Array(r),E.byteLength),P.buffer}decode(e,s){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return s(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,c,u,f]=r;return s({join_ref:i,ref:o,topic:c,event:u,payload:f})}return s({})}_binaryDecode(e){const s=new DataView(e),r=s.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,s,i)}}_decodeUserBroadcast(e,s,r){const i=s.getUint8(1),o=s.getUint8(2),c=s.getUint8(3),u=s.getUint8(4);let f=this.HEADER_LENGTH+4;const h=r.decode(e.slice(f,f+i));f=f+i;const y=r.decode(e.slice(f,f+o));f=f+o;const v=r.decode(e.slice(f,f+c));f=f+c;const j=e.slice(f,e.byteLength),E=u===this.JSON_ENCODING?JSON.parse(r.decode(j)):j,k={type:this.BROADCAST_EVENT,event:y,payload:E};return c>0&&(k.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(e){var s;return e instanceof ArrayBuffer||((s=e==null?void 0:e.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(e,s){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>s.includes(r)))}}class qv{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Kt||(Kt={}));const w0=(n,e,s={})=>{var r;const i=(r=s.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=d2(c,n,e,i),o),{}):{}},d2=(n,e,s,r)=>{const i=e.find(u=>u.name===n),o=i==null?void 0:i.type,c=s[n];return o&&!r.includes(o)?Wv(o,c):vm(c)},Wv=(n,e)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return m2(e,s)}switch(n){case Kt.bool:return u2(e);case Kt.float4:case Kt.float8:case Kt.int2:case Kt.int4:case Kt.int8:case Kt.numeric:case Kt.oid:return h2(e);case Kt.json:case Kt.jsonb:return f2(e);case Kt.timestamp:return p2(e);case Kt.abstime:case Kt.date:case Kt.daterange:case Kt.int4range:case Kt.int8range:case Kt.money:case Kt.reltime:case Kt.text:case Kt.time:case Kt.timestamptz:case Kt.timetz:case Kt.tsrange:case Kt.tstzrange:return vm(e);default:return vm(e)}},vm=n=>n,u2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},h2=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},f2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},m2=(n,e)=>{if(typeof n!="string")return n;const s=n.length-1,r=n[s];if(n[0]==="{"&&r==="}"){let o;const c=n.slice(1,s);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(u=>Wv(e,u))}return n},p2=n=>typeof n=="string"?n.replace(" ","T"):n,Hv=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Lf{constructor(e,s,r={},i=ym){this.channel=e,this.event=s,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var N0;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(N0||(N0={}));class ec{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:c,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ec.syncState(this.state,i,o,c),this.pendingDiffs.forEach(f=>{this.state=ec.syncDiff(this.state,f,o,c)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:c,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ec.syncDiff(this.state,i,o,c),u())}),this.onJoin((i,o,c)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:c})}),this.onLeave((i,o,c)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,i){const o=this.cloneDeep(e),c=this.transformState(s),u={},f={};return this.map(o,(h,y)=>{c[h]||(f[h]=y)}),this.map(c,(h,y)=>{const v=o[h];if(v){const j=y.map(P=>P.presence_ref),E=v.map(P=>P.presence_ref),k=y.filter(P=>E.indexOf(P.presence_ref)<0),_=v.filter(P=>j.indexOf(P.presence_ref)<0);k.length>0&&(u[h]=k),_.length>0&&(f[h]=_)}else u[h]=y}),this.syncDiff(o,{joins:u,leaves:f},r,i)}static syncDiff(e,s,r,i){const{joins:o,leaves:c}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,f)=>{var h;const y=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(f),y.length>0){const v=e[u].map(E=>E.presence_ref),j=y.filter(E=>v.indexOf(E.presence_ref)<0);e[u].unshift(...j)}r(u,y,f)}),this.map(c,(u,f)=>{let h=e[u];if(!h)return;const y=f.map(v=>v.presence_ref);h=h.filter(v=>y.indexOf(v.presence_ref)<0),e[u]=h,i(u,h,f),h.length===0&&delete e[u]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const i=e[r];return"metas"in i?s[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[r]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var j0;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(j0||(j0={}));var tc;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(tc||(tc={}));var li;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(li||(li={}));class Yo{constructor(e,s={config:{}},r){var i,o;if(this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Ts.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Lf(this,ar.join,this.params,this.timeout),this.rejoinTimer=new qv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ts.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ts.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ar.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new ec(this),this.broadcastEndpointURL=Hv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ts.closed){const{config:{broadcast:c,presence:u,private:f}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(E=>E.filter))!==null&&i!==void 0?i:[],y=!!this.bindings[tc.PRESENCE]&&this.bindings[tc.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,v={},j={broadcast:c,presence:Object.assign(Object.assign({},u),{enabled:y}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(E=>e==null?void 0:e(li.CHANNEL_ERROR,E)),this._onClose(()=>e==null?void 0:e(li.CLOSED)),this.updateJoinPayload(Object.assign({config:j},v)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:E})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){e==null||e(li.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,P=(k=_==null?void 0:_.length)!==null&&k!==void 0?k:0,L=[];for(let U=0;U<P;U++){const F=_[U],{filter:{event:J,schema:te,table:H,filter:M}}=F,C=E&&E[U];if(C&&C.event===J&&Yo.isFilterValueEqual(C.schema,te)&&Yo.isFilterValueEqual(C.table,H)&&Yo.isFilterValueEqual(C.filter,M))L.push(Object.assign(Object.assign({},F),{id:C.id}));else{this.unsubscribe(),this.state=Ts.errored,e==null||e(li.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,e&&e(li.SUBSCRIBED);return}}).receive("error",E=>{this.state=Ts.errored,e==null||e(li.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(li.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this.state===Ts.joined&&e===tc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,s,r)}async httpSend(e,s,r={}){var i;if(s==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let f=u.statusText;try{const h=await u.json();f=h.error||h.message||f}catch{}return Promise.reject(new Error(f))}async send(e,s={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,u,f;const h=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(c=this.params)===null||c===void 0?void 0:c.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ts.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ar.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Lf(this,ar.leave,{},e),r.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ts.closed,this.bindings={}}async _fetchWithTimeout(e,s,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(o),c}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Lf(this,e,s,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>l2){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var i,o;const c=e.toLocaleLowerCase(),{close:u,error:f,leave:h,join:y}=ar;if(r&&[u,f,h,y].indexOf(c)>=0&&r!==this._joinRef())return;let j=this._onMessage(c,s,r);if(s&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(E=>{var k,_,P;return((k=E.filter)===null||k===void 0?void 0:k.event)==="*"||((P=(_=E.filter)===null||_===void 0?void 0:_.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===c}).map(E=>E.callback(j,r)):(o=this.bindings[c])===null||o===void 0||o.filter(E=>{var k,_,P,L,U,F;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in E){const J=E.id,te=(k=E.filter)===null||k===void 0?void 0:k.event;return J&&((_=s.ids)===null||_===void 0?void 0:_.includes(J))&&(te==="*"||(te==null?void 0:te.toLocaleLowerCase())===((P=s.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const J=(U=(L=E==null?void 0:E.filter)===null||L===void 0?void 0:L.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return J==="*"||J===((F=s==null?void 0:s.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===c}).map(E=>{if(typeof j=="object"&&"ids"in j){const k=j.data,{schema:_,table:P,commit_timestamp:L,type:U,errors:F}=k;j=Object.assign(Object.assign({},{schema:_,table:P,commit_timestamp:L,eventType:U,new:{},old:{},errors:F}),this._getPayloadRecords(k))}E.callback(j,r)})}_isClosed(){return this.state===Ts.closed}_isJoined(){return this.state===Ts.joined}_isJoining(){return this.state===Ts.joining}_isLeaving(){return this.state===Ts.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const i=e.toLocaleLowerCase(),o={type:i,filter:s,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Yo.isEqual(i.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}static isFilterValueEqual(e,s){return(e??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ar.close,{},e)}_onError(e){this._on(ar.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ts.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=w0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=w0(e.columns,e.old_record)),s}}const zf=()=>{},Gd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},g2=[1e3,2e3,5e3,1e4],x2=1e4,y2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class b2{constructor(e,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ym,this.transport=null,this.heartbeatIntervalMs=Gd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zf,this.ref=0,this.reconnectTimer=null,this.vsn=v0,this.logger=zf,this.conn=null,this.sendBuffer=[],this.serializer=new c2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=s==null?void 0:s.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${bm.websocket}`,this.httpEndpoint=Hv(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=n2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case qi.connecting:return za.Connecting;case qi.open:return za.Open;case qi.closing:return za.Closing;default:return za.Closed}}isConnected(){return this.connectionState()===za.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Yo(`realtime:${e}`,s,this);return this.channels.push(o),o}}push(e){const{topic:s,event:r,payload:i,ref:o}=e,c=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${s} ${r} (${o})`,i),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(o2,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Gd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:c}=s,u=c?`(${c})`:"",f=o.status||"";this.log("receive",`${f} ${r} ${i} ${u}`.trim(),o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,o,c)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===qi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===qi.open||this.conn.readyState===qi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ar.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${r}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([y2],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s,r=!1;if(e)s=e,r=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),s=this.accessTokenValue}else s=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(i=>{const o={access_token:s,version:i2};s&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(ar.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(s)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new qv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,r,i,o,c,u,f,h,y,v,j,E;switch(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:ym,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Gd.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:zf,this.vsn=(f=e==null?void 0:e.vsn)!==null&&f!==void 0?f:v0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(k=>g2[k-1]||x2),this.vsn){case Bv:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:((k,_)=>_(JSON.stringify(k))),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:((k,_)=>_(JSON.parse(k)));break;case a2:this.encode=(j=e==null?void 0:e.encode)!==null&&j!==void 0?j:this.serializer.encode.bind(this.serializer),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var mc=class extends Error{constructor(n,e){var s;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((s=e.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function v2(n,e,s){const r=new URL(e,n);if(s)for(const[i,o]of Object.entries(s))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function w2(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function N2(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:s,path:r,query:i,body:o,headers:c}){const u=v2(n.baseUrl,r,i),f=await w2(n.auth),h=await e(u,{method:s,headers:{...o?{"Content-Type":"application/json"}:{},...f,...c},body:o?JSON.stringify(o):void 0}),y=await h.text(),v=(h.headers.get("content-type")||"").includes("application/json"),j=v&&y?JSON.parse(y):y;if(!h.ok){const E=v?j:void 0,k=E==null?void 0:E.error;throw new mc((k==null?void 0:k.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:E})}return{status:h.status,headers:h.headers,data:j}}}}function Kd(n){return n.join("")}var j2=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:Kd(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const s={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Kd(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Kd(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Kd(n.namespace)}`}),!0}catch(e){if(e instanceof mc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(s){if(s instanceof mc&&s.status===409)return;throw s}}};function Uo(n){return n.join("")}var S2=class{constructor(n,e="",s){this.client=n,this.prefix=e,this.accessDelegation=s}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Uo(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Uo(n.namespace)}/tables`,body:e,headers:s})).data.metadata}async updateTable(n,e){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Uo(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Uo(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Uo(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Uo(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(s){if(s instanceof mc&&s.status===404)return!1;throw s}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(s){if(s instanceof mc&&s.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw s}}},k2=class{constructor(n){var r;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const s=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=N2({baseUrl:s,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new j2(this.client,e),this.tableOps=new S2(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},Hu=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function as(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var _2=class extends Hu{constructor(n,e,s){super(n),this.name="StorageApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},wm=class extends Hu{constructor(n,e){super(n),this.name="StorageUnknownError",this.originalError=e}};const ap=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),C2=()=>Response,Nm=n=>{if(Array.isArray(n))return n.map(s=>Nm(s));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([s,r])=>{const i=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Nm(r)}),e},E2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},T2=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function pc(n){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pc(n)}function P2(n,e){if(pc(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var r=s.call(n,e);if(pc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function A2(n){var e=P2(n,"string");return pc(e)=="symbol"?e:e+""}function I2(n,e,s){return(e=A2(e))in n?Object.defineProperty(n,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[e]=s,n}function S0(n,e){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),s.push.apply(s,r)}return s}function ot(n){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?S0(Object(s),!0).forEach(function(r){I2(n,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):S0(Object(s)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(s,r))})}return n}const Uf=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},R2=async(n,e,s)=>{n instanceof await C2()&&!(s!=null&&s.noResolveJson)?n.json().then(r=>{const i=n.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new _2(Uf(r),i,o))}).catch(r=>{e(new wm(Uf(r),r))}):e(new wm(Uf(n),n))},M2=(n,e,s,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(E2(r)?(i.headers=ot({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),ot(ot({},i),s))};async function Oc(n,e,s,r,i,o){return new Promise((c,u)=>{n(s,M2(e,r,i,o)).then(f=>{if(!f.ok)throw f;return r!=null&&r.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>R2(f,u,r))})}async function gc(n,e,s,r){return Oc(n,"GET",e,s,r)}async function ir(n,e,s,r,i){return Oc(n,"POST",e,r,i,s)}async function jm(n,e,s,r,i){return Oc(n,"PUT",e,r,i,s)}async function D2(n,e,s,r){return Oc(n,"HEAD",e,ot(ot({},s),{},{noResolveJson:!0}),r)}async function op(n,e,s,r,i){return Oc(n,"DELETE",e,r,i,s)}var O2=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(as(e))return{data:null,error:e};throw e}}};let Gv;Gv=Symbol.toStringTag;var L2=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[Gv]="BlobDownloadBuilder",this.promise=null}asStream(){return new O2(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(as(e))return{data:null,error:e};throw e}}};const z2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},k0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var U2=class{constructor(n,e={},s,r){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.bucketId=s,this.fetch=ap(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,e,s,r){var i=this;try{let o;const c=ot(ot({},k0),r);let u=ot(ot({},i.headers),n==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",i.encodeMetadata(f)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),f&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(f))):(o=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType,f&&(u["x-metadata"]=i.toBase64(i.encodeMetadata(f))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),r!=null&&r.headers&&(u=ot(ot({},u),r.headers));const h=i._removeEmptyFolders(e),y=i._getFinalPath(h),v=await(n=="PUT"?jm:ir)(i.fetch,`${i.url}/object/${y}`,o,ot({headers:u},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:h,id:v.Id,fullPath:v.Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(as(o))return{data:null,error:o};throw o}}async upload(n,e,s){return this.uploadOrUpdate("POST",n,e,s)}async uploadToSignedUrl(n,e,s,r){var i=this;const o=i._removeEmptyFolders(n),c=i._getFinalPath(o),u=new URL(i.url+`/object/upload/sign/${c}`);u.searchParams.set("token",e);try{let f;const h=ot({upsert:k0.upsert},r),y=ot(ot({},i.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",h.cacheControl)):(f=s,y["cache-control"]=`max-age=${h.cacheControl}`,y["content-type"]=h.contentType),{data:{path:o,fullPath:(await jm(i.fetch,u.toString(),f,{headers:y})).Key},error:null}}catch(f){if(i.shouldThrowOnError)throw f;if(as(f))return{data:null,error:f};throw f}}async createSignedUploadUrl(n,e){var s=this;try{let r=s._getFinalPath(n);const i=ot({},s.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const o=await ir(s.fetch,`${s.url}/object/upload/sign/${r}`,{},{headers:i}),c=new URL(s.url+o.url),u=c.searchParams.get("token");if(!u)throw new Hu("No token returned by API");return{data:{signedUrl:c.toString(),path:n,token:u},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(as(r))return{data:null,error:r};throw r}}async update(n,e,s){return this.uploadOrUpdate("PUT",n,e,s)}async move(n,e,s){var r=this;try{return{data:await ir(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:s==null?void 0:s.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(as(i))return{data:null,error:i};throw i}}async copy(n,e,s){var r=this;try{return{data:{path:(await ir(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:s==null?void 0:s.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(as(i))return{data:null,error:i};throw i}}async createSignedUrl(n,e,s){var r=this;try{let i=r._getFinalPath(n),o=await ir(r.fetch,`${r.url}/object/sign/${i}`,ot({expiresIn:e},s!=null&&s.transform?{transform:s.transform}:{}),{headers:r.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(as(i))return{data:null,error:i};throw i}}async createSignedUrls(n,e,s){var r=this;try{const i=await ir(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:n},{headers:r.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(c=>ot(ot({},c),{},{signedUrl:c.signedURL?encodeURI(`${r.url}${c.signedURL}${o}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(as(i))return{data:null,error:i};throw i}}download(n,e){const s=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",o=this._getFinalPath(n),c=()=>gc(this.fetch,`${this.url}/${s}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new L2(c,this.shouldThrowOnError)}async info(n){var e=this;const s=e._getFinalPath(n);try{return{data:Nm(await gc(e.fetch,`${e.url}/object/info/${s}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(as(r))return{data:null,error:r};throw r}}async exists(n){var e=this;const s=e._getFinalPath(n);try{return await D2(e.fetch,`${e.url}/object/${s}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(as(r)&&r instanceof wm){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(n,e){const s=this._getFinalPath(n),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${u}`)}}}async remove(n){var e=this;try{return{data:await op(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}}async list(n,e,s){var r=this;try{const i=ot(ot(ot({},z2),e),{},{prefix:n||""});return{data:await ir(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},s),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(as(i))return{data:null,error:i};throw i}}async listV2(n,e){var s=this;try{const r=ot({},n);return{data:await ir(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,r,{headers:s.headers},e),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(as(r))return{data:null,error:r};throw r}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const Kv="2.89.0",Jv={"X-Client-Info":`storage-js/${Kv}`};var F2=class{constructor(n,e={},s,r){this.shouldThrowOnError=!1;const i=new URL(n);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=ot(ot({},Jv),e),this.fetch=ap(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var e=this;try{const s=e.listBucketOptionsToQueryString(n);return{data:await gc(e.fetch,`${e.url}/bucket${s}`,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}}async getBucket(n){var e=this;try{return{data:await gc(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}}async createBucket(n,e={public:!1}){var s=this;try{return{data:await ir(s.fetch,`${s.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(as(r))return{data:null,error:r};throw r}}async updateBucket(n,e){var s=this;try{return{data:await jm(s.fetch,`${s.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(as(r))return{data:null,error:r};throw r}}async emptyBucket(n){var e=this;try{return{data:await ir(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}}async deleteBucket(n){var e=this;try{return{data:await op(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},$2=class{constructor(n,e={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ot(ot({},Jv),e),this.fetch=ap(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await ir(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}}async listBuckets(n){var e=this;try{const s=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&s.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&s.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&s.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&s.set("sortOrder",n.sortOrder),n!=null&&n.search&&s.set("search",n.search);const r=s.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await gc(e.fetch,i,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}}async deleteBucket(n){var e=this;try{return{data:await op(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}}from(n){var e=this;if(!T2(n))throw new Hu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new k2({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(s,{get(i,o){const c=i[o];return typeof c!="function"?c:async(...u)=>{try{return{data:await c.apply(i,u),error:null}}catch(f){if(r)throw f;return{data:null,error:f}}}}})}};const lp={"X-Client-Info":`storage-js/${Kv}`,"Content-Type":"application/json"};var Yv=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function An(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var Ff=class extends Yv{constructor(n,e,s){super(n),this.name="StorageVectorsApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},V2=class extends Yv{constructor(n,e){super(n),this.name="StorageVectorsUnknownError",this.originalError=e}};const cp=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),B2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},_0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),q2=async(n,e,s)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(s!=null&&s.noResolveJson)){const r=n.status||500,i=n;if(typeof i.json=="function")i.json().then(o=>{const c=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||r+"";e(new Ff(_0(o),r,c))}).catch(()=>{const o=r+"";e(new Ff(i.statusText||`HTTP ${r} error`,r,o))});else{const o=r+"";e(new Ff(i.statusText||`HTTP ${r} error`,r,o))}}else e(new V2(_0(n),n))},W2=(n,e,s,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(B2(r)?(i.headers=ot({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,ot(ot({},i),s)):i};async function H2(n,e,s,r,i,o){return new Promise((c,u)=>{n(s,W2(e,r,i,o)).then(f=>{if(!f.ok)throw f;if(r!=null&&r.noResolveJson)return f;const h=f.headers.get("content-type");return!h||!h.includes("application/json")?{}:f.json()}).then(f=>c(f)).catch(f=>q2(f,u,r))})}async function In(n,e,s,r,i){return H2(n,"POST",e,r,i,s)}var G2=class{constructor(n,e={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ot(ot({},lp),e),this.fetch=cp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async getIndex(n,e){var s=this;try{return{data:await In(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}}async listIndexes(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async deleteIndex(n,e){var s=this;try{return{data:await In(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:s.headers})||{},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}}},K2=class{constructor(n,e={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ot(ot({},lp),e),this.fetch=cp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var e=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await In(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async getVectors(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async listVectors(n){var e=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await In(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async queryVectors(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async deleteVectors(n){var e=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await In(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}},J2=class{constructor(n,e={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ot(ot({},lp),e),this.fetch=cp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async getBucket(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async listBuckets(n={}){var e=this;try{return{data:await In(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}async deleteBucket(n){var e=this;try{return{data:await In(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}}},Y2=class extends J2{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new Z2(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,s=this;return e().call(s,n)}async getBucket(n){var e=()=>super.getBucket,s=this;return e().call(s,n)}async listBuckets(n={}){var e=()=>super.listBuckets,s=this;return e().call(s,n)}async deleteBucket(n){var e=()=>super.deleteBucket,s=this;return e().call(s,n)}},Z2=class extends G2{constructor(n,e,s,r){super(n,e,r),this.vectorBucketName=s}async createIndex(n){var e=()=>super.createIndex,s=this;return e().call(s,ot(ot({},n),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,s=this;return e().call(s,ot(ot({},n),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,s=this;return e().call(s,s.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,s=this;return e().call(s,s.vectorBucketName,n)}index(n){return new X2(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},X2=class extends K2{constructor(n,e,s,r,i){super(n,e,i),this.vectorBucketName=s,this.indexName=r}async putVectors(n){var e=()=>super.putVectors,s=this;return e().call(s,ot(ot({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(n){var e=()=>super.getVectors,s=this;return e().call(s,ot(ot({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,s=this;return e().call(s,ot(ot({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,s=this;return e().call(s,ot(ot({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,s=this;return e().call(s,ot(ot({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},Q2=class extends F2{constructor(n,e={},s,r){super(n,e,s,r)}from(n){return new U2(this.url,this.headers,n,this.fetch)}get vectors(){return new Y2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $2(this.url+"/iceberg",this.headers,this.fetch)}};const Zv="2.89.0",Ko=30*1e3,Sm=3,$f=Sm*Ko,ek="http://localhost:9999",tk="supabase.auth.token",sk={"X-Client-Info":`gotrue-js/${Zv}`},km="X-Supabase-Api-Version",Xv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rk=600*1e3;class xc extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function st(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class ik extends xc{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function ak(n){return st(n)&&n.name==="AuthApiError"}class Ua extends xc{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class bi extends xc{constructor(e,s,r,i){super(e,r,i),this.name=s,this.status=r}}class Pn extends bi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ok(n){return st(n)&&n.name==="AuthSessionMissingError"}class Fo extends bi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jd extends bi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Yd extends bi{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lk(n){return st(n)&&n.name==="AuthImplicitGrantRedirectError"}class C0 extends bi{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ck extends bi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class _m extends bi{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Vf(n){return st(n)&&n.name==="AuthRetryableFetchError"}class E0 extends bi{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class Cm extends bi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const bu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),T0=` 	
\r=`.split(""),dk=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<T0.length;e+=1)n[T0[e].charCodeAt(0)]=-2;for(let e=0;e<bu.length;e+=1)n[bu[e].charCodeAt(0)]=e;return n})();function P0(n,e,s){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(bu[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(bu[r]),e.queuedBits-=6}}function Qv(n,e,s){const r=dk[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function A0(n){const e=[],s=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=c=>{fk(c,r,s)};for(let c=0;c<n.length;c+=1)Qv(n.charCodeAt(c),i,o);return e.join("")}function uk(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function hk(n,e){for(let s=0;s<n.length;s+=1){let r=n.charCodeAt(s);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}uk(r,e)}}function fk(n,e,s){if(e.utf8seq===0){if(n<=127){s(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Xo(n){const e=[],s={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)Qv(n.charCodeAt(i),s,r);return new Uint8Array(e)}function mk(n){const e=[];return hk(n,s=>e.push(s)),new Uint8Array(e)}function Va(n){const e=[],s={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>P0(i,s,r)),P0(null,s,r),e.join("")}function pk(n){return Math.round(Date.now()/1e3)+n}function gk(){return Symbol("auth-callback")}const qs=()=>typeof window<"u"&&typeof document<"u",Ma={tested:!1,writable:!1},ew=()=>{if(!qs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ma.tested)return Ma.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ma.tested=!0,Ma.writable=!0}catch{Ma.tested=!0,Ma.writable=!1}return Ma.writable};function xk(n){const e={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return s.searchParams.forEach((r,i)=>{e[i]=r}),e}const tw=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),yk=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Jo=async(n,e,s)=>{await n.setItem(e,JSON.stringify(s))},Da=async(n,e)=>{const s=await n.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Bs=async(n,e)=>{await n.removeItem(e)};let sw=class nw{constructor(){this.promise=new nw.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}};sw.promiseConstructor=Promise;function Bf(n){const e=n.split(".");if(e.length!==3)throw new Cm("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!nk.test(e[r]))throw new Cm("JWT not in base64url format");return{header:JSON.parse(A0(e[0])),payload:JSON.parse(A0(e[1])),signature:Xo(e[2]),raw:{header:e[0],payload:e[1]}}}async function bk(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function vk(n,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await n(o);if(!e(o,null,c)){r(c);return}}catch(c){if(!e(o,c)){i(c);return}}})()})}function wk(n){return("0"+n.toString(16)).substr(-2)}function Nk(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let i="";for(let o=0;o<56;o++)i+=s.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,wk).join("")}async function jk(n){const s=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function Sk(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=await jk(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $o(n,e,s=!1){const r=Nk();let i=r;s&&(i+="/PASSWORD_RECOVERY"),await Jo(n,`${e}-code-verifier`,i);const o=await Sk(r);return[o,r===o?"plain":"s256"]}const kk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _k(n){const e=n.headers.get(km);if(!e||!e.match(kk))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ck(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Ek(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Tk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vo(n){if(!Tk.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qf(){const n={};return new Proxy(n,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Pk(n,e){return new Proxy(n,{get:(s,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(s,r,i)}})}function I0(n){return JSON.parse(JSON.stringify(n))}const Oa=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Ak=[502,503,504];async function R0(n){var e;if(!yk(n))throw new _m(Oa(n),0);if(Ak.includes(n.status))throw new _m(Oa(n),n.status);let s;try{s=await n.json()}catch(o){throw new Ua(Oa(o),o)}let r;const i=_k(n);if(i&&i.getTime()>=Xv["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new E0(Oa(s),n.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Pn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new E0(Oa(s),n.status,s.weak_password.reasons);throw new ik(Oa(s),n.status||500,r)}const Ik=(n,e,s,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),s))};async function at(n,e,s,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[km]||(o[km]=Xv["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const c=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await Rk(n,e,s+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function Rk(n,e,s,r,i,o){const c=Ik(e,r,i,o);let u;try{u=await n(s,Object.assign({},c))}catch(f){throw console.error(f),new _m(Oa(f),0)}if(u.ok||await R0(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(f){await R0(f)}}function rr(n){var e;let s=null;Ok(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=pk(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:s,user:r},error:null}}function M0(n){const e=rr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Wi(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Mk(n){return{data:n,error:null}}function Dk(n){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:o}=n,c=Wu(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:o},f=Object.assign({},c);return{data:{properties:u,user:f},error:null}}function D0(n){return n}function Ok(n){return n.access_token&&n.refresh_token&&n.expires_in}const Wf=["global","local","others"];class Lk{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=tw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=Wf[0]){if(Wf.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wf.join(", ")}`);try{return await at(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await at(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Wi})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=Wu(e,["options"]),i=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await at(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Dk,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(st(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await at(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wi})}catch(s){if(st(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,i,o,c,u,f;try{const h={nextPage:null,lastPage:0,total:0},y=await at(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:D0});if(y.error)throw y.error;const v=await y.json(),j=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,E=(f=(u=y.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return E.length>0&&(E.forEach(k=>{const _=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);h[`${P}Page`]=_}),h.total=parseInt(j)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(st(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Vo(e);try{return await at(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wi})}catch(s){if(st(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Vo(e);try{return await at(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Wi})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){Vo(e);try{return await at(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Wi})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Vo(e.userId);try{const{data:s,error:r}=await at(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:r}}catch(s){if(st(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Vo(e.userId),Vo(e.id);try{return{data:await at(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(st(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,r,i,o,c,u,f;try{const h={nextPage:null,lastPage:0,total:0},y=await at(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:D0});if(y.error)throw y.error;const v=await y.json(),j=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,E=(f=(u=y.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return E.length>0&&(E.forEach(k=>{const _=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);h[`${P}Page`]=_}),h.total=parseInt(j)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(st(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await at(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(st(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await at(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(st(s))return{data:null,error:s};throw s}}async _updateOAuthClient(e,s){try{return await at(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(st(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await at(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(st(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await at(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(st(s))return{data:null,error:s};throw s}}}function O0(n={}){return{getItem:e=>n[e]||null,setItem:(e,s)=>{n[e]=s},removeItem:e=>{delete n[e]}}}const Bo={debug:!!(globalThis&&ew()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zk extends rw{}async function Uk(n,e,s){Bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Bo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await s()}finally{Bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new zk(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Bo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Fk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function iw(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function $k(n){return parseInt(n,16)}function Vk(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Bk(n){var e;const{chainId:s,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:c,notBefore:u,requestId:f,resources:h,scheme:y,uri:v,version:j}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(j!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${j}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const E=iw(n.address),k=y?`${y}://${r}`:r,_=n.statement?`${n.statement}
`:"",P=`${k} wants you to sign in with your Ethereum account:
${E}

${_}`;let L=`URI: ${v}
Version: ${j}
Chain ID: ${s}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(i&&(L+=`
Expiration Time: ${i.toISOString()}`),u&&(L+=`
Not Before: ${u.toISOString()}`),f&&(L+=`
Request ID: ${f}`),h){let U=`
Resources:`;for(const F of h){if(!F||typeof F!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${F}`);U+=`
- ${F}`}L+=U}return`${P}
${L}`}class Ns extends Error{constructor({message:e,code:s,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=s}}class vu extends Ns{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function qk({error:n,options:e}){var s,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ns({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Ns({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ns({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ns({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ns({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ns({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Ns({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ns({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(aw(c)){if(o.rp.id!==c)return new Ns({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ns({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ns({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ns({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ns({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Wk({error:n,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ns({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ns({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(aw(r)){if(s.rpId!==r)return new Ns({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ns({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ns({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ns({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Hk{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Gk=new Hk;function Kk(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:s,excludeCredentials:r}=n,i=Wu(n,["challenge","user","excludeCredentials"]),o=Xo(e).buffer,c=Object.assign(Object.assign({},s),{id:Xo(s.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:c});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const h=r[f];u.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:Xo(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function Jk(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:s}=n,r=Wu(n,["challenge","allowCredentials"]),i=Xo(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(s&&s.length>0){o.allowCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const u=s[c];o.allowCredentials[c]=Object.assign(Object.assign({},u),{id:Xo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function Yk(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:Va(new Uint8Array(n.response.attestationObject)),clientDataJSON:Va(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Zk(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Va(new Uint8Array(i.authenticatorData)),clientDataJSON:Va(new Uint8Array(i.clientDataJSON)),signature:Va(new Uint8Array(i.signature)),userHandle:i.userHandle?Va(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function aw(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function L0(){var n,e;return!!(qs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Xk(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vu("Browser returned unexpected credential type",e)}:{data:null,error:new vu("Empty credential response",e)}}catch(e){return{data:null,error:qk({error:e,options:n})}}}async function Qk(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vu("Browser returned unexpected credential type",e)}:{data:null,error:new vu("Empty credential response",e)}}catch(e){return{data:null,error:Wk({error:e,options:n})}}}const e_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},t_={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wu(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),s=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const o in i){const c=i[o];if(c!==void 0)if(Array.isArray(c))r[o]=c;else if(s(c))r[o]=c;else if(e(c)){const u=r[o];e(u)?r[o]=wu(u,c):r[o]=wu(c)}else r[o]=c}return r}function s_(n,e){return wu(e_,n,e||{})}function n_(n,e){return wu(t_,n,e||{})}class r_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:r,signal:i},o){try{const{data:c,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!c)return{data:null,error:u};const f=i??Gk.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=s_(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:y,error:v}=await Xk({publicKey:h,signal:f});return y?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const h=n_(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:y,error:v}=await Qk(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:f}));return y?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(c){return st(c)?{data:null,error:c}:{data:null,error:new Ua("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:s,webauthn:r}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!s)return{data:null,error:new xc("rpId is required for WebAuthn authentication")};try{if(!L0())return{data:null,error:new Ua("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:r},signal:i},{request:o});if(!c)return{data:null,error:u};const{webauthn:f}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:f.type,rpId:s,rpOrigins:r,credential_response:f.credential_response}})}catch(c){return st(c)?{data:null,error:c}:{data:null,error:new Ua("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!s)return{data:null,error:new xc("rpId is required for WebAuthn registration")};try{if(!L0())return{data:null,error:new Ua("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(y=>{var v;return(v=y.data)===null||v===void 0?void 0:v.all.find(j=>j.factor_type==="webauthn"&&j.friendly_name===e&&j.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:u};const{data:f,error:h}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:s,rpOrigins:r},signal:i},{create:o});return f?this._verify({factorId:c.id,challengeId:f.challengeId,webauthn:{rpId:s,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(c){return st(c)?{data:null,error:c}:{data:null,error:new Ua("Unexpected error in register",c)}}}}Fk();const i_={url:ek,storageKey:tk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function z0(n,e,s){return await s()}const qo={};class yc{get jwks(){var e,s;return(s=(e=qo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){qo[this.storageKey]=Object.assign(Object.assign({},qo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=qo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){qo[this.storageKey]=Object.assign(Object.assign({},qo[this.storageKey]),{cachedAt:e})}constructor(e){var s,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},i_),e);if(this.storageKey=o.storageKey,this.instanceID=(s=yc.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,yc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&qs()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Lk({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=tw(o.fetch),this.lock=o.lock||z0,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&qs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Uk:this.lock=z0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new r_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:ew()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=O0(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=O0(this.memoryStorage)),qs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Zv}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let s={},r="none";if(qs()&&(s=xk(window.location.href),this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce")),qs()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(s,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),lk(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",c,"redirect type",u),await this._saveSession(c),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return st(s)?this._returnResult({error:s}):this._returnResult({error:new Ua("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,i;try{const o=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:rr}),{data:c,error:u}=o;if(u||!c)return this._returnResult({data:{user:null,session:null},error:u});const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(o){if(st(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var s,r,i;try{let o;if("email"in e){const{email:y,password:v,options:j}=e;let E=null,k=null;this.flowType==="pkce"&&([E,k]=await $o(this.storage,this.storageKey)),o=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j==null?void 0:j.emailRedirectTo,body:{email:y,password:v,data:(s=j==null?void 0:j.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken},code_challenge:E,code_challenge_method:k},xform:rr})}else if("phone"in e){const{phone:y,password:v,options:j}=e;o=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(r=j==null?void 0:j.data)!==null&&r!==void 0?r:{},channel:(i=j==null?void 0:j.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken}},xform:rr})}else throw new Jd("You must provide either an email or phone number and a password");const{data:c,error:u}=o;if(u||!c)return await Bs(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(o){if(await Bs(this.storage,`${this.storageKey}-code-verifier`),st(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let s;if("email"in e){const{email:o,password:c,options:u}=e;s=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:M0})}else if("phone"in e){const{phone:o,password:c,options:u}=e;s=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:M0})}else throw new Jd("You must provide either an email or phone number and a password");const{data:r,error:i}=s;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new Fo;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(s){if(st(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(e){var s,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,r,i,o,c,u,f,h,y,v,j;let E,k;if("message"in e)E=e.message,k=e.signature;else{const{chain:_,wallet:P,statement:L,options:U}=e;let F;if(qs())if(typeof P=="object")F=P;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")F=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=P}const J=new URL((s=U==null?void 0:U.url)!==null&&s!==void 0?s:window.location.href),te=await F.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!te||te.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const H=iw(te[0]);let M=(r=U==null?void 0:U.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!M){const I=await F.request({method:"eth_chainId"});M=$k(I)}const C={domain:J.host,address:H,statement:L,uri:J.href,version:"1",chainId:M,nonce:(i=U==null?void 0:U.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(c=(o=U==null?void 0:U.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(u=U==null?void 0:U.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=U==null?void 0:U.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=U==null?void 0:U.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(y=U==null?void 0:U.signInWithEthereum)===null||y===void 0?void 0:y.resources};E=Bk(C),k=await F.request({method:"personal_sign",params:[Vk(E),H]})}try{const{data:_,error:P}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:k},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(j=e.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:rr});if(P)throw P;if(!_||!_.session||!_.user){const L=new Fo;return this._returnResult({data:{user:null,session:null},error:L})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:P})}catch(_){if(st(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(e){var s,r,i,o,c,u,f,h,y,v,j,E;let k,_;if("message"in e)k=e.message,_=e.signature;else{const{chain:P,wallet:L,statement:U,options:F}=e;let J;if(qs())if(typeof L=="object")J=L;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))J=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!(F!=null&&F.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");J=L}const te=new URL((s=F==null?void 0:F.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in J&&J.signIn){const H=await J.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},F==null?void 0:F.signInWithSolana),{version:"1",domain:te.host,uri:te.href}),U?{statement:U}:null));let M;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")M=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)M=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)k=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),_=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in J)||typeof J.signMessage!="function"||!("publicKey"in J)||typeof J!="object"||!J.publicKey||!("toBase58"in J.publicKey)||typeof J.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${te.host} wants you to sign in with your Solana account:`,J.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${te.href}`,`Issued At: ${(i=(r=F==null?void 0:F.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=F==null?void 0:F.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...!((c=F==null?void 0:F.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...!((u=F==null?void 0:F.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...!((f=F==null?void 0:F.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...!((h=F==null?void 0:F.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...!((v=(y=F==null?void 0:F.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...F.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const H=await J.signMessage(new TextEncoder().encode(k),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=H}}try{const{data:P,error:L}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Va(_)},!((j=e.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:rr});if(L)throw L;if(!P||!P.session||!P.user){const U=new Fo;return this._returnResult({data:{user:null,session:null},error:U})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:L})}catch(P){if(st(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async _exchangeCodeForSession(e){const s=await Da(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(s??"").split("/");try{if(!r&&this.flowType==="pkce")throw new ck;const{data:o,error:c}=await at(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:rr});if(await Bs(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const u=new Fo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:c})}catch(o){if(await Bs(this.storage,`${this.storageKey}-code-verifier`),st(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:s,provider:r,token:i,access_token:o,nonce:c}=e,u=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:rr}),{data:f,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f||!f.session||!f.user){const y=new Fo;return this._returnResult({data:{user:null,session:null},error:y})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:h})}catch(s){if(st(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(e){var s,r,i,o,c;try{if("email"in e){const{email:u,options:f}=e;let h=null,y=null;this.flowType==="pkce"&&([h,y]=await $o(this.storage,this.storageKey));const{error:v}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:y},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:u,options:f}=e,{data:h,error:y}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},create_user:(o=f==null?void 0:f.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(c=f==null?void 0:f.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:y})}throw new Jd("You must provide either an email or phone number.")}catch(u){if(await Bs(this.storage,`${this.storageKey}-code-verifier`),st(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var s,r;try{let i,o;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:u}=await at(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:rr});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,h=c.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(i){if(st(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var s,r,i,o,c;try{let u=null,f=null;this.flowType==="pkce"&&([u,f]=await $o(this.storage,this.storageKey));const h=await at(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:Mk});return!((o=h.data)===null||o===void 0)&&o.url&&qs()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await Bs(this.storage,`${this.storageKey}-code-verifier`),st(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Pn;const{error:i}=await at(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(st(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:c}=await at(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:c,error:u}=await at(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new Jd("You must provide either an email or phone number and a type")}catch(s){if(st(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Da(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<$f:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await Da(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=qf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=Pk(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const s=await this._acquireLock(-1,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(e){try{return e?await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wi}):await this._useSession(async s=>{var r,i,o;const{data:c,error:u}=s;if(u)throw u;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pn}:await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Wi})})}catch(s){if(st(s))return ok(s)&&(await this._removeSession(),await Bs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Pn;const c=i.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await $o(this.storage,this.storageKey));const{data:h,error:y}=await at(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:c.access_token,xform:Wi});if(y)throw y;return c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(await Bs(this.storage,`${this.storageKey}-code-verifier`),st(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pn;const s=Date.now()/1e3;let r=s,i=!0,o=null;const{payload:c}=Bf(e.access_token);if(c.exp&&(r=c.exp,i=r<=s),i){const{data:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(s){if(st(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:c,error:u}=s;if(u)throw u;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Pn;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(st(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(e,s){try{if(!qs())throw new Yd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Yd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new C0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yd("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new C0("No code detected.");const{data:U,error:F}=await this._exchangeCodeForSession(e.code);if(F)throw F;const J=new URL(window.location.href);return J.searchParams.delete("code"),window.history.replaceState(window.history.state,"",J.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:c,expires_in:u,expires_at:f,token_type:h}=e;if(!o||!u||!c||!h)throw new Yd("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(u);let j=y+v;f&&(j=parseInt(f));const E=j-y;E*1e3<=Ko&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${v}s`);const k=j-v;y-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,j,y):y-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,j,y);const{data:_,error:P}=await this._getUser(o);if(P)throw P;const L={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:v,expires_at:j,refresh_token:c,token_type:h,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:e.type},error:null})}catch(r){if(st(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Da(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:i,error:o}=s;if(o)return this._returnResult({error:o});const c=(r=i.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:u}=await this.admin.signOut(c,e);if(u&&!(ak(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Bs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const s=gk(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,i;try{const{data:{session:o},error:c}=s;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,s={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await $o(this.storage,this.storageKey,!0));try{return await at(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(await Bs(this.storage,`${this.storageKey}-code-verifier`),st(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:r,error:i}=await this._useSession(async o=>{var c,u,f,h,y;const{data:v,error:j}=o;if(j)throw j;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await at(this.fetch,"GET",E,{headers:this.headers,jwt:(y=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&y!==void 0?y:void 0})});if(i)throw i;return qs()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(st(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var r;try{const{error:i,data:{session:o}}=s;if(i)throw i;const{options:c,provider:u,token:f,access_token:h,nonce:y}=e,v=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:f,access_token:h,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:rr}),{data:j,error:E}=v;return E?this._returnResult({data:{user:null,session:null},error:E}):!j||!j.session||!j.user?this._returnResult({data:{user:null,session:null},error:new Fo}):(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("USER_UPDATED",j.session)),this._returnResult({data:j,error:E}))}catch(i){if(await Bs(this.storage,`${this.storageKey}-code-verifier`),st(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,i;const{data:o,error:c}=s;if(c)throw c;return await at(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await vk(async i=>(i>0&&await bk(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await at(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rr})),(i,o)=>{const c=200*Math.pow(2,i);return o&&Vf(o)&&Date.now()+c-r<Ko})}catch(r){if(this._debug(s,"error",r),st(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),qs()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Da(this.storage,this.storageKey);if(i&&this.userStorage){let c=await Da(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:i.user},await Jo(this.userStorage,this.storageKey+"-user",c)),i.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:qf()}else if(i&&!i.user&&!i.user){const c=await Da(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(i.user=c.user,await Bs(this.storage,this.storageKey+"-user"),await Jo(this.storage,this.storageKey,i)):i.user=qf()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<$f;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${$f}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:c}=await this._callRefreshToken(i.refresh_token);c&&(console.error(c),Vf(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:u}=await this._getUser(i.access_token);!u&&(c!=null&&c.user)?(i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new sw;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new Pn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),st(o)){const c={data:null,error:o};return Vf(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,s)}catch(f){o.push(f)}});if(await Promise.all(c),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Bs(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await Jo(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const o=I0(i);await Jo(this.storage,this.storageKey,o)}else{const i=I0(s);await Jo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Bs(this.storage,this.storageKey),await Bs(this.storage,this.storageKey+"-code-verifier"),await Bs(this.storage,this.storageKey+"-user"),this.userStorage&&await Bs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ko);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ko);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ko}ms, refresh threshold is ${Sm} ticks`),i<=Sm&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const i=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,c]=await $o(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;return o?this._returnResult({data:null,error:o}):await at(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,i;const{data:o,error:c}=s;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:h}=await at(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&f.type==="totp"&&(!((i=f==null?void 0:f.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Yk(e.webauthn.credential_response):Zk(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:f}=await at(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:f}))})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const c=await at(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:u}=c;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Kk(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Jk(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=s==null?void 0:s.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,s;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Bf(r.access_token);let c=null;o.aal&&(c=o.aal);let u=c;((s=(e=r.user.factors)===null||e===void 0?void 0:e.filter(y=>y.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(u="aal2");const h=o.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;return i?this._returnResult({data:null,error:i}):r?await at(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Pn})})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Pn});const c=await at(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return c.data&&c.data.redirect_url&&qs()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Pn});const c=await at(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return c.data&&c.data.redirect_url&&qs()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;return r?this._returnResult({data:null,error:r}):s?await at(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Pn})})}catch(e){if(st(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;return i?this._returnResult({data:null,error:i}):r?(await at(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Pn})})}catch(s){if(st(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+rk>i)return r;const{data:o,error:c}=await at(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:E,error:k}=await this.getSession();if(k||!E.session)return this._returnResult({data:null,error:k});r=E.session.access_token}const{header:i,payload:o,signature:c,raw:{header:u,payload:f}}=Bf(r);s!=null&&s.allowExpired||Ck(o.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!h){const{error:E}=await this.getUser(r);if(E)throw E;return{data:{claims:o,header:i,signature:c},error:null}}const y=Ek(i.alg),v=await crypto.subtle.importKey("jwk",h,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,c,mk(`${u}.${f}`)))throw new Cm("Invalid JWT signature");return{data:{claims:o,header:i,signature:c},error:null}}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}}}yc.nextInstanceID={};const a_=yc,o_="2.89.0";let Xl="";typeof Deno<"u"?Xl="deno":typeof document<"u"?Xl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xl="react-native":Xl="node";const l_={"X-Client-Info":`supabase-js-${Xl}/${o_}`},c_={headers:l_},d_={schema:"public"},u_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},h_={};function bc(n){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(n)}function f_(n,e){if(bc(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var r=s.call(n,e);if(bc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function m_(n){var e=f_(n,"string");return bc(e)=="symbol"?e:e+""}function p_(n,e,s){return(e=m_(e))in n?Object.defineProperty(n,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[e]=s,n}function U0(n,e){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),s.push.apply(s,r)}return s}function fs(n){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?U0(Object(s),!0).forEach(function(r){p_(n,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):U0(Object(s)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(s,r))})}return n}const g_=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),x_=()=>Headers,y_=(n,e,s)=>{const r=g_(s),i=x_();return async(o,c)=>{var u;const f=(u=await e())!==null&&u!==void 0?u:n;let h=new i(c==null?void 0:c.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),r(o,fs(fs({},c),{},{headers:h}))}};function b_(n){return n.endsWith("/")?n:n+"/"}function v_(n,e){var s,r;const{db:i,auth:o,realtime:c,global:u}=n,{db:f,auth:h,realtime:y,global:v}=e,j={db:fs(fs({},f),i),auth:fs(fs({},h),o),realtime:fs(fs({},y),c),storage:{},global:fs(fs(fs({},v),u),{},{headers:fs(fs({},(s=v==null?void 0:v.headers)!==null&&s!==void 0?s:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?j.accessToken=n.accessToken:delete j.accessToken,j}function w_(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(b_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var N_=class extends a_{constructor(n){super(n)}},j_=class{constructor(n,e,s){var r,i;this.supabaseUrl=n,this.supabaseKey=e;const o=w_(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:d_,realtime:h_,auth:fs(fs({},u_),{},{storageKey:c}),global:c_},f=v_(s??{},u);if(this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=f.auth)!==null&&h!==void 0?h:{},this.headers,f.global.fetch)}this.fetch=y_(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(fs({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new s2(new URL("rest/v1",o).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Q2(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new Z1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,s)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,s;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return(e=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:s,storage:r,userStorage:i,storageKey:o,flowType:c,lock:u,debug:f,throwOnError:h},y,v){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new N_({url:this.authUrl.href,headers:fs(fs({},j),y),storageKey:o,autoRefreshToken:n,persistSession:e,detectSessionInUrl:s,storage:r,userStorage:i,flowType:c,lock:u,debug:f,throwOnError:h,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new b2(this.realtimeUrl.href,fs(fs({},n),{},{params:fs(fs({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(n,e,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const S_=(n,e,s)=>new j_(n,e,s);function k_(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}k_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const __="https://xqcnqtrzamgzsrgbmxuk.supabase.co",C_="sb_publishable_KwSUm9DTjeHvxqOSfECRFQ_4dkpCxAW",E_=!0;console.log(" Supabase Client initialized successfully");const Ge=S_(__,C_),Ms=E_;async function T_(n,e){return Ge.auth.signInWithPassword({email:n,password:e})}async function P_(n,e,s){var i,o,c;const r=await Ge.auth.signUp({email:n,password:e});if(r.error)throw r.error;try{const u=((o=(i=r==null?void 0:r.data)==null?void 0:i.user)==null?void 0:o.id)||((c=r==null?void 0:r.user)==null?void 0:c.id);u&&s&&await Ge.from("users").upsert([{id:u,email:n,...s}])}catch(u){console.warn("Failed to write signup metadata to users table:",u)}return r}async function os(n,e={}){try{let s=Ge.from(n).select(e.select||"*");if(e.filters)for(const i of Object.keys(e.filters))s=s.eq(i,e.filters[i]);e.orderBy&&(s=s.order(e.orderBy.column,{ascending:!!e.orderBy.ascending})),typeof e.limit=="number"&&(s=s.limit(e.limit)),typeof e.offset=="number"&&(s=s.range(e.offset,(e.offset||0)+(e.limit||0)-1));const r=await s;if(r.error)throw r.error;return r.data}catch(s){return console.warn("queryDocuments failed:",s),null}}async function dp(n,e){try{const{data:s,error:r}=await Ge.from(n).select("*").eq("id",e).maybeSingle();if(r)throw r;return s}catch(s){return console.warn("getDocument failed:",s),null}}async function di(n,e){const{data:s,error:r}=await Ge.from(n).insert([e]);if(r)throw r;return s}async function ui(n,e,s){const{data:r,error:i}=await Ge.from(n).update(s).eq("id",e);if(i)throw i;return r}async function ow(n,e){const{data:s,error:r}=await Ge.from(n).delete().eq("id",e);if(r)throw r;return s}function Qo(n,e){try{const s=Ge.channel(`${n}_realtime`).on("postgres_changes",{event:"*",schema:"public",table:n},r=>e(r)).subscribe();return()=>{try{s.unsubscribe()}catch(r){console.warn("unsubscribe failed:",r)}}}catch(s){return console.warn("subscribeToTable failed:",s),()=>{}}}async function up(n,e,s){try{const{error:r}=await Ge.storage.from(n).upload(e,s,{upsert:!0});if(r)throw r;const{data:i}=Ge.storage.from(n).getPublicUrl(e);return(i==null?void 0:i.publicUrl)||null}catch(r){throw console.error("uploadFile failed:",r),r}}async function Qi(n,e){var s;try{let r=null;try{const{data:o}=await Ge.auth.getSession();r=((s=o==null?void 0:o.session)==null?void 0:s.access_token)||null}catch{r=null}const i=await fetch(`/api/functions/${n}`,{method:"POST",headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{}},body:JSON.stringify(e||{})});if(!i.ok){const o=await i.text();throw new Error(o||`Function ${n} failed with status ${i.status}`)}return await i.json()}catch(r){throw console.warn("callServerFunction failed:",n,r),r}}const A_=()=>{};var F0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=function(n){const e=[];let s=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},I_=function(n){const e=[];let s=0,r=0;for(;s<n.length;){const i=n[s++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[s++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[s++],c=n[s++],u=n[s++],f=((i&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=n[s++],c=n[s++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},cw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],c=i+1<n.length,u=c?n[i+1]:0,f=i+2<n.length,h=f?n[i+2]:0,y=o>>2,v=(o&3)<<4|u>>4;let j=(u&15)<<2|h>>6,E=h&63;f||(E=64,c||(j=64)),r.push(s[y],s[v],s[j],s[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(lw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):I_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=s[n.charAt(i++)],u=i<n.length?s[n.charAt(i)]:0;++i;const h=i<n.length?s[n.charAt(i)]:64;++i;const v=i<n.length?s[n.charAt(i)]:64;if(++i,o==null||u==null||h==null||v==null)throw new R_;const j=o<<2|u>>4;if(r.push(j),h!==64){const E=u<<4&240|h>>2;if(r.push(E),v!==64){const k=h<<6&192|v;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class R_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M_=function(n){const e=lw(n);return cw.encodeByteArray(e,!0)},Nu=function(n){return M_(n).replace(/\./g,"")},dw=function(n){try{return cw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=()=>D_().__FIREBASE_DEFAULTS__,L_=()=>{if(typeof process>"u"||typeof F0>"u")return;const n=F0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},z_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&dw(n[1]);return e&&JSON.parse(e)},hp=()=>{try{return A_()||O_()||L_()||z_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uw=n=>{var e,s;return(s=(e=hp())==null?void 0:e.emulatorHosts)==null?void 0:s[n]},fp=n=>{const e=uw(n);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},hw=()=>{var n;return(n=hp())==null?void 0:n.config},fw=n=>{var e;return(e=hp())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gu(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Nu(JSON.stringify(s)),Nu(JSON.stringify(c)),""].join(".")}const sc={};function F_(){const n={prod:[],emulator:[]};for(const e of Object.keys(sc))sc[e]?n.emulator.push(e):n.prod.push(e);return n}function $_(n){let e=document.getElementById(n),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),s=!0),{created:s,element:e}}let $0=!1;function Ku(n,e){if(typeof window>"u"||typeof document>"u"||!io(window.location.host)||sc[n]===e||sc[n]||$0)return;sc[n]=e;function s(j){return`__firebase__banner__${j}`}const r="__firebase__banner",o=F_().prod.length>0;function c(){const j=document.getElementById(r);j&&j.remove()}function u(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function f(j,E){j.setAttribute("width","24"),j.setAttribute("id",E),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function h(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{$0=!0,c()},j}function y(j,E){j.setAttribute("id",E),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function v(){const j=$_(r),E=s("text"),k=document.getElementById(E)||document.createElement("span"),_=s("learnmore"),P=document.getElementById(_)||document.createElement("a"),L=s("preprendIcon"),U=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const F=j.element;u(F),y(P,_);const J=h();f(U,L),F.append(U,k,P,J),document.body.appendChild(F)}o?(k.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function V_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function B_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function q_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function W_(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function mp(){try{return typeof indexedDB=="object"}catch{return!1}}function pp(){return new Promise((n,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(s){e(s)}})}function gw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="FirebaseError";class Jn extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=H_,Object.setPrototypeOf(this,Jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ha.prototype.create)}}class ha{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?G_(o,r):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new Jn(i,u,r)}}function G_(n,e){return n.replace(K_,(s,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const K_=/\{\$([^}]+)}/g;function J_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ia(n,e){if(n===e)return!0;const s=Object.keys(n),r=Object.keys(e);for(const i of s){if(!r.includes(i))return!1;const o=n[i],c=e[i];if(V0(o)&&V0(c)){if(!ia(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!s.includes(i))return!1;return!0}function V0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(n){const e=[];for(const[s,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Y_(n,e){const s=new Z_(n,e);return s.subscribe.bind(s)}class Z_{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let i;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");X_(e,["next","error","complete"])?i=e:i={next:e,error:s,complete:r},i.next===void 0&&(i.next=Hf),i.error===void 0&&(i.error=Hf),i.complete===void 0&&(i.complete=Hf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X_(n,e){if(typeof n!="object"||n===null)return!1;for(const s of e)if(s in n&&typeof n[s]=="function")return!0;return!1}function Hf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=1e3,eC=2,tC=14400*1e3,sC=.5;function B0(n,e=Q_,s=eC){const r=e*Math.pow(s,n),i=Math.round(sC*r*(Math.random()-.5)*2);return Math.min(tC,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(n){return n&&n._delegate?n._delegate:n}class ln{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new U_;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iC(e))try{this.getOrInitializeService({instanceIdentifier:La})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=La){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=La){return this.instances.has(e)}getOptions(e=La){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&c.resolve(i)}return i}onInit(e,s){const r=this.normalizeInstanceIdentifier(s),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const i of r)try{i(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rC(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=La){return this.component?this.component.multipleInstances?e:La:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rC(n){return n===La?void 0:n}function iC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new nC(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ft||(Ft={}));const oC={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},lC=Ft.INFO,cC={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},dC=(n,e,...s)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=cC[e];if(i)console[i](`[${r}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ju{constructor(e){this.name=e,this._logLevel=lC,this._logHandler=dC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const uC=(n,e)=>e.some(s=>n instanceof s);let q0,W0;function hC(){return q0||(q0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fC(){return W0||(W0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xw=new WeakMap,Em=new WeakMap,yw=new WeakMap,Gf=new WeakMap,gp=new WeakMap;function mC(n){const e=new Promise((s,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{s(pi(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(s=>{s instanceof IDBCursor&&xw.set(s,n)}).catch(()=>{}),gp.set(e,n),e}function pC(n){if(Em.has(n))return;const e=new Promise((s,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{s(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Em.set(n,e)}let Tm={get(n,e,s){if(n instanceof IDBTransaction){if(e==="done")return Em.get(n);if(e==="objectStoreNames")return n.objectStoreNames||yw.get(n);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return pi(n[e])},set(n,e,s){return n[e]=s,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function gC(n){Tm=n(Tm)}function xC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=n.call(Kf(this),e,...s);return yw.set(r,e.sort?e.sort():[e]),pi(r)}:fC().includes(n)?function(...e){return n.apply(Kf(this),e),pi(xw.get(this))}:function(...e){return pi(n.apply(Kf(this),e))}}function yC(n){return typeof n=="function"?xC(n):(n instanceof IDBTransaction&&pC(n),uC(n,hC())?new Proxy(n,Tm):n)}function pi(n){if(n instanceof IDBRequest)return mC(n);if(Gf.has(n))return Gf.get(n);const e=yC(n);return e!==n&&(Gf.set(n,e),gp.set(e,n)),e}const Kf=n=>gp.get(n);function Yu(n,e,{blocked:s,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(n,e),u=pi(c);return r&&c.addEventListener("upgradeneeded",f=>{r(pi(c.result),f.oldVersion,f.newVersion,pi(c.transaction),f)}),s&&c.addEventListener("blocked",f=>s(f.oldVersion,f.newVersion,f)),u.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}function Jf(n,{blocked:e}={}){const s=indexedDB.deleteDatabase(n);return e&&s.addEventListener("blocked",r=>e(r.oldVersion,r)),pi(s).then(()=>{})}const bC=["get","getKey","getAll","getAllKeys","count"],vC=["put","add","delete","clear"],Yf=new Map;function H0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yf.get(e))return Yf.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,i=vC.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bC.includes(s)))return;const o=async function(c,...u){const f=this.transaction(c,i?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[s](...u),i&&f.done]))[0]};return Yf.set(e,o),o}gC(n=>({...n,get:(e,s,r)=>H0(e,s)||n.get(e,s,r),has:(e,s)=>!!H0(e,s)||n.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(NC(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function NC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pm="@firebase/app",G0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new Ju("@firebase/app"),jC="@firebase/app-compat",SC="@firebase/analytics-compat",kC="@firebase/analytics",_C="@firebase/app-check-compat",CC="@firebase/app-check",EC="@firebase/auth",TC="@firebase/auth-compat",PC="@firebase/database",AC="@firebase/data-connect",IC="@firebase/database-compat",RC="@firebase/functions",MC="@firebase/functions-compat",DC="@firebase/installations",OC="@firebase/installations-compat",LC="@firebase/messaging",zC="@firebase/messaging-compat",UC="@firebase/performance",FC="@firebase/performance-compat",$C="@firebase/remote-config",VC="@firebase/remote-config-compat",BC="@firebase/storage",qC="@firebase/storage-compat",WC="@firebase/firestore",HC="@firebase/ai",GC="@firebase/firestore-compat",KC="firebase",JC="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="[DEFAULT]",YC={[Pm]:"fire-core",[jC]:"fire-core-compat",[kC]:"fire-analytics",[SC]:"fire-analytics-compat",[CC]:"fire-app-check",[_C]:"fire-app-check-compat",[EC]:"fire-auth",[TC]:"fire-auth-compat",[PC]:"fire-rtdb",[AC]:"fire-data-connect",[IC]:"fire-rtdb-compat",[RC]:"fire-fn",[MC]:"fire-fn-compat",[DC]:"fire-iid",[OC]:"fire-iid-compat",[LC]:"fire-fcm",[zC]:"fire-fcm-compat",[UC]:"fire-perf",[FC]:"fire-perf-compat",[$C]:"fire-rc",[VC]:"fire-rc-compat",[BC]:"fire-gcs",[qC]:"fire-gcs-compat",[WC]:"fire-fst",[GC]:"fire-fst-compat",[HC]:"fire-vertex","fire-js":"fire-js",[KC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new Map,ZC=new Map,Im=new Map;function K0(n,e){try{n.container.addComponent(e)}catch(s){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,s)}}function Nn(n){const e=n.name;if(Im.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;Im.set(e,n);for(const s of ju.values())K0(s,n);for(const s of ZC.values())K0(s,n);return!0}function Br(n,e){const s=n.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),n.container.getProvider(e)}function Wn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sa=new ha("app","Firebase",XC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,s,r){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=JC;function bw(n,e={}){let s=n;typeof e!="object"&&(e={name:e});const r={name:Am,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw sa.create("bad-app-name",{appName:String(i)});if(s||(s=hw()),!s)throw sa.create("no-options");const o=ju.get(i);if(o){if(ia(s,o.options)&&ia(r,o.config))return o;throw sa.create("duplicate-app",{appName:i})}const c=new aC(i);for(const f of Im.values())c.addComponent(f);const u=new QC(s,r,c);return ju.set(i,u),u}function ul(n=Am){const e=ju.get(n);if(!e&&n===Am&&hw())return bw();if(!e)throw sa.create("no-app",{appName:n});return e}function Ds(n,e,s){let r=YC[n]??n;s&&(r+=`-${s}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(c.join(" "));return}Nn(new ln(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="firebase-heartbeat-database",tE=1,vc="firebase-heartbeat-store";let Zf=null;function vw(){return Zf||(Zf=Yu(eE,tE,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vc)}catch(s){console.warn(s)}}}}).catch(n=>{throw sa.create("idb-open",{originalErrorMessage:n.message})})),Zf}async function sE(n){try{const s=(await vw()).transaction(vc),r=await s.objectStore(vc).get(ww(n));return await s.done,r}catch(e){if(e instanceof Jn)gi.warn(e.message);else{const s=sa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(s.message)}}}async function J0(n,e){try{const r=(await vw()).transaction(vc,"readwrite");await r.objectStore(vc).put(e,ww(n)),await r.done}catch(s){if(s instanceof Jn)gi.warn(s.message);else{const r=sa.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});gi.warn(r.message)}}}function ww(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=1024,rE=30;class iE{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new oE(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Y0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>rE){const c=lE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=Y0(),{heartbeatsToSend:r,unsentEntries:i}=aE(this._heartbeatsCache.heartbeats),o=Nu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(s){return gi.warn(s),""}}}function Y0(){return new Date().toISOString().substring(0,10)}function aE(n,e=nE){const s=[];let r=n.slice();for(const i of n){const o=s.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),Z0(s)>e){o.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),Z0(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class oE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mp()?pp().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await sE(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return J0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return J0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Z0(n){return Nu(JSON.stringify({version:2,heartbeats:n})).length}function lE(n){if(n.length===0)return-1;let e=0,s=n[0].date;for(let r=1;r<n.length;r++)n[r].date<s&&(s=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(n){Nn(new ln("platform-logger",e=>new wC(e),"PRIVATE")),Nn(new ln("heartbeat",e=>new iE(e),"PRIVATE")),Ds(Pm,G0,n),Ds(Pm,G0,"esm2020"),Ds("fire-js","")}cE("");var dE="firebase",uE="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ds(dE,uE,"app");var X0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xp;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,C){function I(){}I.prototype=C.prototype,M.F=C.prototype,M.prototype=new I,M.prototype.constructor=M,M.D=function($,O,V){for(var A=Array(arguments.length-2),se=2;se<arguments.length;se++)A[se-2]=arguments[se];return C.prototype[O].apply($,A)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,C,I){I||(I=0);const $=Array(16);if(typeof C=="string")for(var O=0;O<16;++O)$[O]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(O=0;O<16;++O)$[O]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=M.g[0],I=M.g[1],O=M.g[2];let V=M.g[3],A;A=C+(V^I&(O^V))+$[0]+3614090360&4294967295,C=I+(A<<7&4294967295|A>>>25),A=V+(O^C&(I^O))+$[1]+3905402710&4294967295,V=C+(A<<12&4294967295|A>>>20),A=O+(I^V&(C^I))+$[2]+606105819&4294967295,O=V+(A<<17&4294967295|A>>>15),A=I+(C^O&(V^C))+$[3]+3250441966&4294967295,I=O+(A<<22&4294967295|A>>>10),A=C+(V^I&(O^V))+$[4]+4118548399&4294967295,C=I+(A<<7&4294967295|A>>>25),A=V+(O^C&(I^O))+$[5]+1200080426&4294967295,V=C+(A<<12&4294967295|A>>>20),A=O+(I^V&(C^I))+$[6]+2821735955&4294967295,O=V+(A<<17&4294967295|A>>>15),A=I+(C^O&(V^C))+$[7]+4249261313&4294967295,I=O+(A<<22&4294967295|A>>>10),A=C+(V^I&(O^V))+$[8]+1770035416&4294967295,C=I+(A<<7&4294967295|A>>>25),A=V+(O^C&(I^O))+$[9]+2336552879&4294967295,V=C+(A<<12&4294967295|A>>>20),A=O+(I^V&(C^I))+$[10]+4294925233&4294967295,O=V+(A<<17&4294967295|A>>>15),A=I+(C^O&(V^C))+$[11]+2304563134&4294967295,I=O+(A<<22&4294967295|A>>>10),A=C+(V^I&(O^V))+$[12]+1804603682&4294967295,C=I+(A<<7&4294967295|A>>>25),A=V+(O^C&(I^O))+$[13]+4254626195&4294967295,V=C+(A<<12&4294967295|A>>>20),A=O+(I^V&(C^I))+$[14]+2792965006&4294967295,O=V+(A<<17&4294967295|A>>>15),A=I+(C^O&(V^C))+$[15]+1236535329&4294967295,I=O+(A<<22&4294967295|A>>>10),A=C+(O^V&(I^O))+$[1]+4129170786&4294967295,C=I+(A<<5&4294967295|A>>>27),A=V+(I^O&(C^I))+$[6]+3225465664&4294967295,V=C+(A<<9&4294967295|A>>>23),A=O+(C^I&(V^C))+$[11]+643717713&4294967295,O=V+(A<<14&4294967295|A>>>18),A=I+(V^C&(O^V))+$[0]+3921069994&4294967295,I=O+(A<<20&4294967295|A>>>12),A=C+(O^V&(I^O))+$[5]+3593408605&4294967295,C=I+(A<<5&4294967295|A>>>27),A=V+(I^O&(C^I))+$[10]+38016083&4294967295,V=C+(A<<9&4294967295|A>>>23),A=O+(C^I&(V^C))+$[15]+3634488961&4294967295,O=V+(A<<14&4294967295|A>>>18),A=I+(V^C&(O^V))+$[4]+3889429448&4294967295,I=O+(A<<20&4294967295|A>>>12),A=C+(O^V&(I^O))+$[9]+568446438&4294967295,C=I+(A<<5&4294967295|A>>>27),A=V+(I^O&(C^I))+$[14]+3275163606&4294967295,V=C+(A<<9&4294967295|A>>>23),A=O+(C^I&(V^C))+$[3]+4107603335&4294967295,O=V+(A<<14&4294967295|A>>>18),A=I+(V^C&(O^V))+$[8]+1163531501&4294967295,I=O+(A<<20&4294967295|A>>>12),A=C+(O^V&(I^O))+$[13]+2850285829&4294967295,C=I+(A<<5&4294967295|A>>>27),A=V+(I^O&(C^I))+$[2]+4243563512&4294967295,V=C+(A<<9&4294967295|A>>>23),A=O+(C^I&(V^C))+$[7]+1735328473&4294967295,O=V+(A<<14&4294967295|A>>>18),A=I+(V^C&(O^V))+$[12]+2368359562&4294967295,I=O+(A<<20&4294967295|A>>>12),A=C+(I^O^V)+$[5]+4294588738&4294967295,C=I+(A<<4&4294967295|A>>>28),A=V+(C^I^O)+$[8]+2272392833&4294967295,V=C+(A<<11&4294967295|A>>>21),A=O+(V^C^I)+$[11]+1839030562&4294967295,O=V+(A<<16&4294967295|A>>>16),A=I+(O^V^C)+$[14]+4259657740&4294967295,I=O+(A<<23&4294967295|A>>>9),A=C+(I^O^V)+$[1]+2763975236&4294967295,C=I+(A<<4&4294967295|A>>>28),A=V+(C^I^O)+$[4]+1272893353&4294967295,V=C+(A<<11&4294967295|A>>>21),A=O+(V^C^I)+$[7]+4139469664&4294967295,O=V+(A<<16&4294967295|A>>>16),A=I+(O^V^C)+$[10]+3200236656&4294967295,I=O+(A<<23&4294967295|A>>>9),A=C+(I^O^V)+$[13]+681279174&4294967295,C=I+(A<<4&4294967295|A>>>28),A=V+(C^I^O)+$[0]+3936430074&4294967295,V=C+(A<<11&4294967295|A>>>21),A=O+(V^C^I)+$[3]+3572445317&4294967295,O=V+(A<<16&4294967295|A>>>16),A=I+(O^V^C)+$[6]+76029189&4294967295,I=O+(A<<23&4294967295|A>>>9),A=C+(I^O^V)+$[9]+3654602809&4294967295,C=I+(A<<4&4294967295|A>>>28),A=V+(C^I^O)+$[12]+3873151461&4294967295,V=C+(A<<11&4294967295|A>>>21),A=O+(V^C^I)+$[15]+530742520&4294967295,O=V+(A<<16&4294967295|A>>>16),A=I+(O^V^C)+$[2]+3299628645&4294967295,I=O+(A<<23&4294967295|A>>>9),A=C+(O^(I|~V))+$[0]+4096336452&4294967295,C=I+(A<<6&4294967295|A>>>26),A=V+(I^(C|~O))+$[7]+1126891415&4294967295,V=C+(A<<10&4294967295|A>>>22),A=O+(C^(V|~I))+$[14]+2878612391&4294967295,O=V+(A<<15&4294967295|A>>>17),A=I+(V^(O|~C))+$[5]+4237533241&4294967295,I=O+(A<<21&4294967295|A>>>11),A=C+(O^(I|~V))+$[12]+1700485571&4294967295,C=I+(A<<6&4294967295|A>>>26),A=V+(I^(C|~O))+$[3]+2399980690&4294967295,V=C+(A<<10&4294967295|A>>>22),A=O+(C^(V|~I))+$[10]+4293915773&4294967295,O=V+(A<<15&4294967295|A>>>17),A=I+(V^(O|~C))+$[1]+2240044497&4294967295,I=O+(A<<21&4294967295|A>>>11),A=C+(O^(I|~V))+$[8]+1873313359&4294967295,C=I+(A<<6&4294967295|A>>>26),A=V+(I^(C|~O))+$[15]+4264355552&4294967295,V=C+(A<<10&4294967295|A>>>22),A=O+(C^(V|~I))+$[6]+2734768916&4294967295,O=V+(A<<15&4294967295|A>>>17),A=I+(V^(O|~C))+$[13]+1309151649&4294967295,I=O+(A<<21&4294967295|A>>>11),A=C+(O^(I|~V))+$[4]+4149444226&4294967295,C=I+(A<<6&4294967295|A>>>26),A=V+(I^(C|~O))+$[11]+3174756917&4294967295,V=C+(A<<10&4294967295|A>>>22),A=O+(C^(V|~I))+$[2]+718787259&4294967295,O=V+(A<<15&4294967295|A>>>17),A=I+(V^(O|~C))+$[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(O+(A<<21&4294967295|A>>>11))&4294967295,M.g[2]=M.g[2]+O&4294967295,M.g[3]=M.g[3]+V&4294967295}r.prototype.v=function(M,C){C===void 0&&(C=M.length);const I=C-this.blockSize,$=this.C;let O=this.h,V=0;for(;V<C;){if(O==0)for(;V<=I;)i(this,M,V),V+=this.blockSize;if(typeof M=="string"){for(;V<C;)if($[O++]=M.charCodeAt(V++),O==this.blockSize){i(this,$),O=0;break}}else for(;V<C;)if($[O++]=M[V++],O==this.blockSize){i(this,$),O=0;break}}this.h=O,this.o+=C},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;C=this.o*8;for(var I=M.length-8;I<M.length;++I)M[I]=C&255,C/=256;for(this.v(M),M=Array(16),C=0,I=0;I<4;++I)for(let $=0;$<32;$+=8)M[C++]=this.g[I]>>>$&255;return M};function o(M,C){var I=u;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=C(M)}function c(M,C){this.h=C;const I=[];let $=!0;for(let O=M.length-1;O>=0;O--){const V=M[O]|0;$&&V==C||(I[O]=V,$=!1)}this.g=I}var u={};function f(M){return-128<=M&&M<128?o(M,function(C){return new c([C|0],C<0?-1:0)}):new c([M|0],M<0?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return v;if(M<0)return P(h(-M));const C=[];let I=1;for(let $=0;M>=I;$++)C[$]=M/I|0,I*=4294967296;return new c(C,0)}function y(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return P(y(M.substring(1),C));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(C,8));let $=v;for(let V=0;V<M.length;V+=8){var O=Math.min(8,M.length-V);const A=parseInt(M.substring(V,V+O),C);O<8?(O=h(Math.pow(C,O)),$=$.j(O).add(h(A))):($=$.j(I),$=$.add(h(A)))}return $}var v=f(0),j=f(1),E=f(16777216);n=c.prototype,n.m=function(){if(_(this))return-P(this).m();let M=0,C=1;for(let I=0;I<this.g.length;I++){const $=this.i(I);M+=($>=0?$:4294967296+$)*C,C*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(_(this))return"-"+P(this).toString(M);const C=h(Math.pow(M,6));var I=this;let $="";for(;;){const O=J(I,C).g;I=L(I,O.j(C));let V=((I.g.length>0?I.g[0]:I.h)>>>0).toString(M);if(I=O,k(I))return V+$;for(;V.length<6;)V="0"+V;$=V+$}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(let C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function _(M){return M.h==-1}n.l=function(M){return M=L(this,M),_(M)?-1:k(M)?0:1};function P(M){const C=M.g.length,I=[];for(let $=0;$<C;$++)I[$]=~M.g[$];return new c(I,~M.h).add(j)}n.abs=function(){return _(this)?P(this):this},n.add=function(M){const C=Math.max(this.g.length,M.g.length),I=[];let $=0;for(let O=0;O<=C;O++){let V=$+(this.i(O)&65535)+(M.i(O)&65535),A=(V>>>16)+(this.i(O)>>>16)+(M.i(O)>>>16);$=A>>>16,V&=65535,A&=65535,I[O]=A<<16|V}return new c(I,I[I.length-1]&-2147483648?-1:0)};function L(M,C){return M.add(P(C))}n.j=function(M){if(k(this)||k(M))return v;if(_(this))return _(M)?P(this).j(P(M)):P(P(this).j(M));if(_(M))return P(this.j(P(M)));if(this.l(E)<0&&M.l(E)<0)return h(this.m()*M.m());const C=this.g.length+M.g.length,I=[];for(var $=0;$<2*C;$++)I[$]=0;for($=0;$<this.g.length;$++)for(let O=0;O<M.g.length;O++){const V=this.i($)>>>16,A=this.i($)&65535,se=M.i(O)>>>16,fe=M.i(O)&65535;I[2*$+2*O]+=A*fe,U(I,2*$+2*O),I[2*$+2*O+1]+=V*fe,U(I,2*$+2*O+1),I[2*$+2*O+1]+=A*se,U(I,2*$+2*O+1),I[2*$+2*O+2]+=V*se,U(I,2*$+2*O+2)}for(M=0;M<C;M++)I[M]=I[2*M+1]<<16|I[2*M];for(M=C;M<2*C;M++)I[M]=0;return new c(I,0)};function U(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function F(M,C){this.g=M,this.h=C}function J(M,C){if(k(C))throw Error("division by zero");if(k(M))return new F(v,v);if(_(M))return C=J(P(M),C),new F(P(C.g),P(C.h));if(_(C))return C=J(M,P(C)),new F(P(C.g),C.h);if(M.g.length>30){if(_(M)||_(C))throw Error("slowDivide_ only works with positive integers.");for(var I=j,$=C;$.l(M)<=0;)I=te(I),$=te($);var O=H(I,1),V=H($,1);for($=H($,2),I=H(I,2);!k($);){var A=V.add($);A.l(M)<=0&&(O=O.add(I),V=A),$=H($,1),I=H(I,1)}return C=L(M,O.j(C)),new F(O,C)}for(O=v;M.l(C)>=0;){for(I=Math.max(1,Math.floor(M.m()/C.m())),$=Math.ceil(Math.log(I)/Math.LN2),$=$<=48?1:Math.pow(2,$-48),V=h(I),A=V.j(C);_(A)||A.l(M)>0;)I-=$,V=h(I),A=V.j(C);k(V)&&(V=j),O=O.add(V),M=L(M,A)}return new F(O,M)}n.B=function(M){return J(this,M).h},n.and=function(M){const C=Math.max(this.g.length,M.g.length),I=[];for(let $=0;$<C;$++)I[$]=this.i($)&M.i($);return new c(I,this.h&M.h)},n.or=function(M){const C=Math.max(this.g.length,M.g.length),I=[];for(let $=0;$<C;$++)I[$]=this.i($)|M.i($);return new c(I,this.h|M.h)},n.xor=function(M){const C=Math.max(this.g.length,M.g.length),I=[];for(let $=0;$<C;$++)I[$]=this.i($)^M.i($);return new c(I,this.h^M.h)};function te(M){const C=M.g.length+1,I=[];for(let $=0;$<C;$++)I[$]=M.i($)<<1|M.i($-1)>>>31;return new c(I,M.h)}function H(M,C){const I=C>>5;C%=32;const $=M.g.length-I,O=[];for(let V=0;V<$;V++)O[V]=C>0?M.i(V+I)>>>C|M.i(V+I+1)<<32-C:M.i(V+I);return new c(O,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=y,xp=c}).apply(typeof X0<"u"?X0:typeof self<"u"?self:typeof window<"u"?window:{});var Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var n,e=Object.defineProperty;function s(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zd=="object"&&Zd];for(var N=0;N<m.length;++N){var T=m[N];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=s(this);function i(m,N){if(N)e:{var T=r;m=m.split(".");for(var z=0;z<m.length-1;z++){var ae=m[z];if(!(ae in T))break e;T=T[ae]}m=m[m.length-1],z=T[m],N=N(z),N!=z&&N!=null&&e(T,m,{configurable:!0,writable:!0,value:N})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(N){var T=[],z;for(z in N)Object.prototype.hasOwnProperty.call(N,z)&&T.push([z,N[z]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(m){var N=typeof m;return N=="object"&&m!=null||N=="function"}function f(m,N,T){return m.call.apply(m.bind,arguments)}function h(m,N,T){return h=f,h.apply(null,arguments)}function y(m,N){var T=Array.prototype.slice.call(arguments,1);return function(){var z=T.slice();return z.push.apply(z,arguments),m.apply(this,z)}}function v(m,N){function T(){}T.prototype=N.prototype,m.Z=N.prototype,m.prototype=new T,m.prototype.constructor=m,m.Ob=function(z,ae,pe){for(var ze=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)ze[yt-2]=arguments[yt];return N.prototype[ae].apply(z,ze)}}var j=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function E(m){const N=m.length;if(N>0){const T=Array(N);for(let z=0;z<N;z++)T[z]=m[z];return T}return[]}function k(m,N){for(let z=1;z<arguments.length;z++){const ae=arguments[z];var T=typeof ae;if(T=T!="object"?T:ae?Array.isArray(ae)?"array":T:"null",T=="array"||T=="object"&&typeof ae.length=="number"){T=m.length||0;const pe=ae.length||0;m.length=T+pe;for(let ze=0;ze<pe;ze++)m[T+ze]=ae[ze]}else m.push(ae)}}class _{constructor(N,T){this.i=N,this.j=T,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function P(m){c.setTimeout(()=>{throw m},0)}function L(){var m=M;let N=null;return m.g&&(N=m.g,m.g=m.g.next,m.g||(m.h=null),N.next=null),N}class U{constructor(){this.h=this.g=null}add(N,T){const z=F.get();z.set(N,T),this.h?this.h.next=z:this.g=z,this.h=z}}var F=new _(()=>new J,m=>m.reset());class J{constructor(){this.next=this.g=this.h=null}set(N,T){this.h=N,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let te,H=!1,M=new U,C=()=>{const m=Promise.resolve(void 0);te=()=>{m.then(I)}};function I(){for(var m;m=L();){try{m.h.call(m.g)}catch(T){P(T)}var N=F;N.j(m),N.h<100&&(N.h++,m.next=N.g,N.g=m)}H=!1}function $(){this.u=this.u,this.C=this.C}$.prototype.u=!1,$.prototype.dispose=function(){this.u||(this.u=!0,this.N())},$.prototype[Symbol.dispose]=function(){this.dispose()},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(m,N){this.type=m,this.g=this.target=N,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,N=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const T=()=>{};c.addEventListener("test",T,N),c.removeEventListener("test",T,N)}catch{}return m})();function A(m){return/^[\s\xa0]*$/.test(m)}function se(m,N){O.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,N)}v(se,O),se.prototype.init=function(m,N){const T=this.type=m.type,z=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=N,N=m.relatedTarget,N||(T=="mouseover"?N=m.fromElement:T=="mouseout"&&(N=m.toElement)),this.relatedTarget=N,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),je=0;function Ie(m,N,T,z,ae){this.listener=m,this.proxy=null,this.src=N,this.type=T,this.capture=!!z,this.ha=ae,this.key=++je,this.da=this.fa=!1}function le(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function be(m,N,T){for(const z in m)N.call(T,m[z],z,m)}function we(m,N){for(const T in m)N.call(void 0,m[T],T,m)}function Z(m){const N={};for(const T in m)N[T]=m[T];return N}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(m,N){let T,z;for(let ae=1;ae<arguments.length;ae++){z=arguments[ae];for(T in z)m[T]=z[T];for(let pe=0;pe<ce.length;pe++)T=ce[pe],Object.prototype.hasOwnProperty.call(z,T)&&(m[T]=z[T])}}function ue(m){this.src=m,this.g={},this.h=0}ue.prototype.add=function(m,N,T,z,ae){const pe=m.toString();m=this.g[pe],m||(m=this.g[pe]=[],this.h++);const ze=Ce(m,N,z,ae);return ze>-1?(N=m[ze],T||(N.fa=!1)):(N=new Ie(N,this.src,pe,!!z,ae),N.fa=T,m.push(N)),N};function B(m,N){const T=N.type;if(T in m.g){var z=m.g[T],ae=Array.prototype.indexOf.call(z,N,void 0),pe;(pe=ae>=0)&&Array.prototype.splice.call(z,ae,1),pe&&(le(N),m.g[T].length==0&&(delete m.g[T],m.h--))}}function Ce(m,N,T,z){for(let ae=0;ae<m.length;++ae){const pe=m[ae];if(!pe.da&&pe.listener==N&&pe.capture==!!T&&pe.ha==z)return ae}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),Ue={};function Qe(m,N,T,z,ae){if(Array.isArray(N)){for(let pe=0;pe<N.length;pe++)Qe(m,N[pe],T,z,ae);return null}return T=Be(T),m&&m[fe]?m.J(N,T,u(z)?!!z.capture:!1,ae):lt(m,N,T,!1,z,ae)}function lt(m,N,T,z,ae,pe){if(!N)throw Error("Invalid event type");const ze=u(ae)?!!ae.capture:!!ae;let yt=oe(m);if(yt||(m[Pe]=yt=new ue(m)),T=yt.add(N,T,z,ze,pe),T.proxy)return T;if(z=St(),T.proxy=z,z.src=m,z.listener=T,m.addEventListener)V||(ae=ze),ae===void 0&&(ae=!1),m.addEventListener(N.toString(),z,ae);else if(m.attachEvent)m.attachEvent(nt(N.toString()),z);else if(m.addListener&&m.removeListener)m.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return T}function St(){function m(T){return N.call(m.src,m.listener,T)}const N=Ut;return m}function ye(m,N,T,z,ae){if(Array.isArray(N))for(var pe=0;pe<N.length;pe++)ye(m,N[pe],T,z,ae);else z=u(z)?!!z.capture:!!z,T=Be(T),m&&m[fe]?(m=m.i,pe=String(N).toString(),pe in m.g&&(N=m.g[pe],T=Ce(N,T,z,ae),T>-1&&(le(N[T]),Array.prototype.splice.call(N,T,1),N.length==0&&(delete m.g[pe],m.h--)))):m&&(m=oe(m))&&(N=m.g[N.toString()],m=-1,N&&(m=Ce(N,T,z,ae)),(T=m>-1?N[m]:null)&&Xe(T))}function Xe(m){if(typeof m!="number"&&m&&!m.da){var N=m.src;if(N&&N[fe])B(N.i,m);else{var T=m.type,z=m.proxy;N.removeEventListener?N.removeEventListener(T,z,m.capture):N.detachEvent?N.detachEvent(nt(T),z):N.addListener&&N.removeListener&&N.removeListener(z),(T=oe(N))?(B(T,m),T.h==0&&(T.src=null,N[Pe]=null)):le(m)}}}function nt(m){return m in Ue?Ue[m]:Ue[m]="on"+m}function Ut(m,N){if(m.da)m=!0;else{N=new se(N,this);const T=m.listener,z=m.ha||m.src;m.fa&&Xe(m),m=T.call(z,N)}return m}function oe(m){return m=m[Pe],m instanceof ue?m:null}var Me="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(m){return typeof m=="function"?m:(m[Me]||(m[Me]=function(N){return m.handleEvent(N)}),m[Me])}function ke(){$.call(this),this.i=new ue(this),this.M=this,this.G=null}v(ke,$),ke.prototype[fe]=!0,ke.prototype.removeEventListener=function(m,N,T,z){ye(this,m,N,T,z)};function We(m,N){var T,z=m.G;if(z)for(T=[];z;z=z.G)T.push(z);if(m=m.M,z=N.type||N,typeof N=="string")N=new O(N,m);else if(N instanceof O)N.target=N.target||m;else{var ae=N;N=new O(z,m),W(N,ae)}ae=!0;let pe,ze;if(T)for(ze=T.length-1;ze>=0;ze--)pe=N.g=T[ze],ae=Nt(pe,z,!0,N)&&ae;if(pe=N.g=m,ae=Nt(pe,z,!0,N)&&ae,ae=Nt(pe,z,!1,N)&&ae,T)for(ze=0;ze<T.length;ze++)pe=N.g=T[ze],ae=Nt(pe,z,!1,N)&&ae}ke.prototype.N=function(){if(ke.Z.N.call(this),this.i){var m=this.i;for(const N in m.g){const T=m.g[N];for(let z=0;z<T.length;z++)le(T[z]);delete m.g[N],m.h--}}this.G=null},ke.prototype.J=function(m,N,T,z){return this.i.add(String(m),N,!1,T,z)},ke.prototype.K=function(m,N,T,z){return this.i.add(String(m),N,!0,T,z)};function Nt(m,N,T,z){if(N=m.i.g[String(N)],!N)return!0;N=N.concat();let ae=!0;for(let pe=0;pe<N.length;++pe){const ze=N[pe];if(ze&&!ze.da&&ze.capture==T){const yt=ze.listener,ns=ze.ha||ze.src;ze.fa&&B(m.i,ze),ae=yt.call(ns,z)!==!1&&ae}}return ae&&!z.defaultPrevented}function ve(m,N){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:c.setTimeout(m,N||0)}function Y(m){m.g=ve(()=>{m.g=null,m.i&&(m.i=!1,Y(m))},m.l);const N=m.h;m.h=null,m.m.apply(null,N)}class Se extends ${constructor(N,T){super(),this.m=N,this.l=T,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Y(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jt(m){$.call(this),this.h=m,this.g={}}v(jt,$);var mt=[];function Wt(m){be(m.g,function(N,T){this.g.hasOwnProperty(T)&&Xe(N)},m),m.g={}}jt.prototype.N=function(){jt.Z.N.call(this),Wt(this)},jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=c.JSON.stringify,ks=c.JSON.parse,ds=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function De(){}function ps(){}var us={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ws(){O.call(this,"d")}v(Ws,O);function fr(){O.call(this,"c")}v(fr,O);var Os={},Ls=null;function Dn(){return Ls=Ls||new ke}Os.Ia="serverreachability";function On(m){O.call(this,Os.Ia,m)}v(On,O);function gs(m){const N=Dn();We(N,new On(N))}Os.STAT_EVENT="statevent";function zs(m,N){O.call(this,Os.STAT_EVENT,m),this.stat=N}v(zs,O);function Vt(m){const N=Dn();We(N,new zs(N,m))}Os.Ja="timingevent";function _s(m,N){O.call(this,Os.Ja,m),this.size=N}v(_s,O);function ss(m,N){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},N)}function Ne(){this.g=!0}Ne.prototype.ua=function(){this.g=!1};function Je(m,N,T,z,ae,pe){m.info(function(){if(m.g)if(pe){var ze="",yt=pe.split("&");for(let qt=0;qt<yt.length;qt++){var ns=yt[qt].split("=");if(ns.length>1){const vs=ns[0];ns=ns[1];const zn=vs.split("_");ze=zn.length>=2&&zn[1]=="type"?ze+(vs+"="+ns+"&"):ze+(vs+"=redacted&")}}}else ze=null;else ze=pe;return"XMLHTTP REQ ("+z+") [attempt "+ae+"]: "+N+`
`+T+`
`+ze})}function Et(m,N,T,z,ae,pe,ze){m.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ae+"]: "+N+`
`+T+`
`+pe+" "+ze})}function Tt(m,N,T,z){m.info(function(){return"XMLHTTP TEXT ("+N+"): "+Ot(m,T)+(z?" "+z:"")})}function Rt(m,N){m.info(function(){return"TIMEOUT: "+N})}Ne.prototype.info=function(){};function Ot(m,N){if(!m.g)return N;if(!N)return null;try{const pe=JSON.parse(N);if(pe){for(m=0;m<pe.length;m++)if(Array.isArray(pe[m])){var T=pe[m];if(!(T.length<2)){var z=T[1];if(Array.isArray(z)&&!(z.length<1)){var ae=z[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let ze=1;ze<z.length;ze++)z[ze]=""}}}}return $t(pe)}catch{return N}}var zt={NO_ERROR:0,TIMEOUT:8},Bt={},Yn;function un(){}v(un,De),un.prototype.g=function(){return new XMLHttpRequest},Yn=new un;function hn(m){return encodeURIComponent(String(m))}function mr(m){var N=1;m=m.split(":");const T=[];for(;N>0&&m.length;)T.push(m.shift()),N--;return m.length&&T.push(m.join(":")),T}function Us(m,N,T,z){this.j=m,this.i=N,this.l=T,this.S=z||1,this.V=new jt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vi}function vi(){this.i=null,this.g="",this.h=!1}var Wr={},Hr={};function en(m,N,T){m.M=1,m.A=xt(ne(N)),m.u=T,m.R=!0,Gr(m,null)}function Gr(m,N){m.F=Date.now(),Ln(m),m.B=ne(m.A);var T=m.B,z=m.S;Array.isArray(z)||(z=[String(z)]),wl(T.i,"t",z),m.C=0,T=m.j.L,m.h=new vi,m.g=Zc(m.j,T?N:null,!m.u),m.P>0&&(m.O=new Se(h(m.Y,m,m.g),m.P)),N=m.V,T=m.g,z=m.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(mt[0]=ae.toString()),ae=mt);for(let pe=0;pe<ae.length;pe++){const ze=Qe(T,ae[pe],z||N.handleEvent,!1,N.h||N);if(!ze)break;N.g[ze.key]=ze}N=m.J?Z(m.J):{},m.u?(m.v||(m.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,N)):(m.v="GET",m.g.ea(m.B,m.v,null,N)),gs(),Je(m.i,m.v,m.B,m.l,m.S,m.u)}Us.prototype.ba=function(m){m=m.target;const N=this.O;N&&wr(m)==3?N.j():this.Y(m)},Us.prototype.Y=function(m){try{if(m==this.g)e:{const yt=wr(this.g),ns=this.g.ya(),qt=this.g.ca();if(!(yt<3)&&(yt!=3||this.g&&(this.h.h||this.g.la()||Jc(this.g)))){this.K||yt!=4||ns==7||(ns==8||qt<=0?gs(3):gs(2)),K(this);var N=this.g.ca();this.X=N;var T=wi(this);if(this.o=N==200,Et(this.i,this.v,this.B,this.l,this.S,yt,N),this.o){if(this.U&&!this.L){t:{if(this.g){var z,ae=this.g;if((z=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(z)){var pe=z;break t}}pe=null}if(m=pe)Tt(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xe(this,m);else{this.o=!1,this.m=3,Vt(12),re(this),X(this);break e}}if(this.R){m=!0;let vs;for(;!this.K&&this.C<T.length;)if(vs=Kr(this,T),vs==Hr){yt==4&&(this.m=4,Vt(14),m=!1),Tt(this.i,this.l,null,"[Incomplete Response]");break}else if(vs==Wr){this.m=4,Vt(15),Tt(this.i,this.l,T,"[Invalid Chunk]"),m=!1;break}else Tt(this.i,this.l,vs,null),xe(this,vs);if(pr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||T.length!=0||this.h.h||(this.m=1,Vt(16),m=!1),this.o=this.o&&m,!m)Tt(this.i,this.l,T,"[Invalid Chunked Response]"),re(this),X(this);else if(T.length>0&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.aa&&!ze.P&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),va(ze),ze.P=!0,Vt(11))}}else Tt(this.i,this.l,T,null),xe(this,T);yt==4&&re(this),this.o&&!this.K&&(yt==4?po(this.j,this):(this.o=!1,Ln(this)))}else jl(this.g),N==400&&T.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),re(this),X(this)}}}catch{}finally{}};function wi(m){if(!pr(m))return m.g.la();const N=Jc(m.g);if(N==="")return"";let T="";const z=N.length,ae=wr(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return re(m),X(m),"";m.h.i=new c.TextDecoder}for(let pe=0;pe<z;pe++)m.h.h=!0,T+=m.h.i.decode(N[pe],{stream:!(ae&&pe==z-1)});return N.length=0,m.h.g+=T,m.C=0,m.h.g}function pr(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Kr(m,N){var T=m.C,z=N.indexOf(`
`,T);return z==-1?Hr:(T=Number(N.substring(T,z)),isNaN(T)?Wr:(z+=1,z+T>N.length?Hr:(N=N.slice(z,z+T),m.C=z+T,N)))}Us.prototype.cancel=function(){this.K=!0,re(this)};function Ln(m){m.T=Date.now()+m.H,G(m,m.H)}function G(m,N){if(m.D!=null)throw Error("WatchDog timer not null");m.D=ss(h(m.aa,m),N)}function K(m){m.D&&(c.clearTimeout(m.D),m.D=null)}Us.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Rt(this.i,this.B),this.M!=2&&(gs(),Vt(17)),re(this),this.m=2,X(this)):G(this,this.T-m)};function X(m){m.j.I==0||m.K||po(m.j,m)}function re(m){K(m);var N=m.O;N&&typeof N.dispose=="function"&&N.dispose(),m.O=null,Wt(m.V),m.g&&(N=m.g,m.g=null,N.abort(),N.dispose())}function xe(m,N){try{var T=m.j;if(T.I!=0&&(T.g==m||Le(T.h,m))){if(!m.L&&Le(T.h,m)&&T.I==3){try{var z=T.Ba.g.parse(N)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ae=z;if(ae[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<m.F)mo(T),Sn(T);else break e;Sr(T),Vt(18)}}else T.xa=ae[1],0<T.xa-T.K&&ae[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ss(h(T.Va,T),6e3));ge(T.h)<=1&&T.ta&&(T.ta=void 0)}else kn(T,11)}else if((m.L||T.g==m)&&mo(T),!A(N))for(ae=T.Ba.g.parse(N),N=0;N<ae.length;N++){let qt=ae[N];const vs=qt[0];if(!(vs<=T.K))if(T.K=vs,qt=qt[1],T.I==2)if(qt[0]=="c"){T.M=qt[1],T.ba=qt[2];const zn=qt[3];zn!=null&&(T.ka=zn,T.j.info("VER="+T.ka));const kr=qt[4];kr!=null&&(T.za=kr,T.j.info("SVER="+T.za));const _r=qt[5];_r!=null&&typeof _r=="number"&&_r>0&&(z=1.5*_r,T.O=z,T.j.info("backChannelRequestTimeoutMs_="+z)),z=T;const Cr=m.g;if(Cr){const yo=Cr.g?Cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yo){var pe=z.h;pe.g||yo.indexOf("spdy")==-1&&yo.indexOf("quic")==-1&&yo.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&(kt(pe,pe.h),pe.h=null))}if(z.G){const _l=Cr.g?Cr.g.getResponseHeader("X-HTTP-Session-Id"):null;_l&&(z.wa=_l,He(z.J,z.G,_l))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-m.F,T.j.info("Handshake RTT: "+T.T+"ms")),z=T;var ze=m;if(z.na=kl(z,z.L?z.ba:null,z.W),ze.L){dt(z.h,ze);var yt=ze,ns=z.O;ns&&(yt.H=ns),yt.D&&(K(yt),Ln(yt)),z.g=ze}else Hs(z);T.i.length>0&&Qr(T)}else qt[0]!="stop"&&qt[0]!="close"||kn(T,7);else T.I==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?kn(T,7):ho(T):qt[0]!="noop"&&T.l&&T.l.qa(qt),T.A=0)}}gs(4)}catch{}}var Ke=class{constructor(m,N){this.g=m,this.map=N}};function ct(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function he(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ge(m){return m.h?1:m.g?m.g.size:0}function Le(m,N){return m.h?m.h==N:m.g?m.g.has(N):!1}function kt(m,N){m.g?m.g.add(N):m.h=N}function dt(m,N){m.h&&m.h==N?m.h=null:m.g&&m.g.has(N)&&m.g.delete(N)}ct.prototype.cancel=function(){if(this.i=gt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function gt(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let N=m.i;for(const T of m.g.values())N=N.concat(T.G);return N}return E(m.i)}var Jt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _t(m,N){if(m){m=m.split("&");for(let T=0;T<m.length;T++){const z=m[T].indexOf("=");let ae,pe=null;z>=0?(ae=m[T].substring(0,z),pe=m[T].substring(z+1)):ae=m[T],N(ae,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function R(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;m instanceof R?(this.l=m.l,Fe(this,m.j),this.o=m.o,this.g=m.g,_e(this,m.u),this.h=m.h,$e(this,Nl(m.i)),this.m=m.m):m&&(N=String(m).match(Jt))?(this.l=!1,Fe(this,N[1]||"",!0),this.o=Yt(N[2]||""),this.g=Yt(N[3]||"",!0),_e(this,N[4]),this.h=Yt(N[5]||"",!0),$e(this,N[6]||"",!0),this.m=Yt(N[7]||"")):(this.l=!1,this.i=new Ct(null,this.l))}R.prototype.toString=function(){const m=[];var N=this.j;N&&m.push(gr(N,Ni,!0),":");var T=this.g;return(T||N=="file")&&(m.push("//"),(N=this.o)&&m.push(gr(N,Ni,!0),"@"),m.push(hn(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&m.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&m.push("/"),m.push(gr(T,T.charAt(0)=="/"?xa:xl,!0))),(T=this.i.toString())&&m.push("?",T),(T=this.m)&&m.push("#",gr(T,yl)),m.join("")},R.prototype.resolve=function(m){const N=ne(this);let T=!!m.j;T?Fe(N,m.j):T=!!m.o,T?N.o=m.o:T=!!m.g,T?N.g=m.g:T=m.u!=null;var z=m.h;if(T)_e(N,m.u);else if(T=!!m.h){if(z.charAt(0)!="/")if(this.g&&!this.h)z="/"+z;else{var ae=N.h.lastIndexOf("/");ae!=-1&&(z=N.h.slice(0,ae+1)+z)}if(ae=z,ae==".."||ae==".")z="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){z=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const pe=[];for(let ze=0;ze<ae.length;){const yt=ae[ze++];yt=="."?z&&ze==ae.length&&pe.push(""):yt==".."?((pe.length>1||pe.length==1&&pe[0]!="")&&pe.pop(),z&&ze==ae.length&&pe.push("")):(pe.push(yt),z=!0)}z=pe.join("/")}else z=ae}return T?N.h=z:T=m.i.toString()!=="",T?$e(N,Nl(m.i)):T=!!m.m,T&&(N.m=m.m),N};function ne(m){return new R(m)}function Fe(m,N,T){m.j=T?Yt(N,!0):N,m.j&&(m.j=m.j.replace(/:$/,""))}function _e(m,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);m.u=N}else m.u=null}function $e(m,N,T){N instanceof Ct?(m.i=N,lo(m.i,m.l)):(T||(N=gr(N,lh)),m.i=new Ct(N,m.l))}function He(m,N,T){m.i.set(N,T)}function xt(m){return He(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Yt(m,N){return m?N?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function gr(m,N,T){return typeof m=="string"?(m=encodeURI(m).replace(N,Jr),T&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Jr(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ni=/[#\/\?@]/g,xl=/[#\?:]/g,xa=/[#\?]/g,lh=/[#\?@]/g,yl=/#/g;function Ct(m,N){this.h=this.g=null,this.i=m||null,this.j=!!N}function xr(m){m.g||(m.g=new Map,m.h=0,m.i&&_t(m.i,function(N,T){m.add(decodeURIComponent(N.replace(/\+/g," ")),T)}))}n=Ct.prototype,n.add=function(m,N){xr(this),this.i=null,m=yr(this,m);let T=this.g.get(m);return T||this.g.set(m,T=[]),T.push(N),this.h+=1,this};function bl(m,N){xr(m),N=yr(m,N),m.g.has(N)&&(m.i=null,m.h-=m.g.get(N).length,m.g.delete(N))}function oo(m,N){return xr(m),N=yr(m,N),m.g.has(N)}n.forEach=function(m,N){xr(this),this.g.forEach(function(T,z){T.forEach(function(ae){m.call(N,ae,z,this)},this)},this)};function vl(m,N){xr(m);let T=[];if(typeof N=="string")oo(m,N)&&(T=T.concat(m.g.get(yr(m,N))));else for(m=Array.from(m.g.values()),N=0;N<m.length;N++)T=T.concat(m[N]);return T}n.set=function(m,N){return xr(this),this.i=null,m=yr(this,m),oo(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[N]),this.h+=1,this},n.get=function(m,N){return m?(m=vl(this,m),m.length>0?String(m[0]):N):N};function wl(m,N,T){bl(m,N),T.length>0&&(m.i=null,m.g.set(yr(m,N),E(T)),m.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],N=Array.from(this.g.keys());for(let z=0;z<N.length;z++){var T=N[z];const ae=hn(T);T=vl(this,T);for(let pe=0;pe<T.length;pe++){let ze=ae;T[pe]!==""&&(ze+="="+hn(T[pe])),m.push(ze)}}return this.i=m.join("&")};function Nl(m){const N=new Ct;return N.i=m.i,m.g&&(N.g=new Map(m.g),N.h=m.h),N}function yr(m,N){return N=String(N),m.j&&(N=N.toLowerCase()),N}function lo(m,N){N&&!m.j&&(xr(m),m.i=null,m.g.forEach(function(T,z){const ae=z.toLowerCase();z!=ae&&(bl(this,z),wl(this,ae,T))},m)),m.j=N}function br(m,N){const T=new Ne;if(c.Image){const z=new Image;z.onload=y(Fs,T,"TestLoadImage: loaded",!0,N,z),z.onerror=y(Fs,T,"TestLoadImage: error",!1,N,z),z.onabort=y(Fs,T,"TestLoadImage: abort",!1,N,z),z.ontimeout=y(Fs,T,"TestLoadImage: timeout",!1,N,z),c.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=m}else N(!1)}function vr(m,N){const T=new Ne,z=new AbortController,ae=setTimeout(()=>{z.abort(),Fs(T,"TestPingServer: timeout",!1,N)},1e4);fetch(m,{signal:z.signal}).then(pe=>{clearTimeout(ae),pe.ok?Fs(T,"TestPingServer: ok",!0,N):Fs(T,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ae),Fs(T,"TestPingServer: error",!1,N)})}function Fs(m,N,T,z,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),z(T)}catch{}}function ya(){this.g=new ds}function Yr(m){this.i=m.Sb||null,this.h=m.ab||!1}v(Yr,De),Yr.prototype.g=function(){return new jn(this.i,this.h)};function jn(m,N){ke.call(this),this.H=m,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(jn,ke),n=jn.prototype,n.open=function(m,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=N,this.readyState=1,Zn(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(N.body=m),(this.H||c).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ji(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hc(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hc(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var N=m.value?m.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!m.done}))&&(this.response=this.responseText+=N)}m.done?ji(this):Zn(this),this.readyState==3&&Hc(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,ji(this))},n.Na=function(m){this.g&&(this.response=m,ji(this))},n.ga=function(){this.g&&ji(this)};function ji(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Zn(m)}n.setRequestHeader=function(m,N){this.A.append(m,N)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],N=this.h.entries();for(var T=N.next();!T.done;)T=T.value,m.push(T[0]+": "+T[1]),T=N.next();return m.join(`\r
`)};function Zn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Gc(m){let N="";return be(m,function(T,z){N+=z,N+=":",N+=T,N+=`\r
`}),N}function co(m,N,T){e:{for(z in T){var z=!1;break e}z=!0}z||(T=Gc(T),typeof m=="string"?T!=null&&hn(T):He(m,N,T))}function Ht(m){ke.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Ht,ke);var Kc=/^https?$/i,ch=["POST","PUT"];n=Ht.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,N,T,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);N=N?N.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yn.g(),this.g.onreadystatechange=j(h(this.Ca,this));try{this.B=!0,this.g.open(N,String(m),!0),this.B=!1}catch(pe){Si(this,pe);return}if(m=T||"",T=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ae in z)T.set(ae,z[ae]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const pe of z.keys())T.set(pe,z.get(pe));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(T.keys()).find(pe=>pe.toLowerCase()=="content-type"),ae=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(ch,N,void 0)>=0)||z||ae||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pe,ze]of T)this.g.setRequestHeader(pe,ze);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(pe){Si(this,pe)}};function Si(m,N){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=N,m.o=5,ki(m),Xr(m)}function ki(m){m.A||(m.A=!0,We(m,"complete"),We(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,We(this,"complete"),We(this,"abort"),Xr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xr(this,!0)),Ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Zr(this):this.Xa())},n.Xa=function(){Zr(this)};function Zr(m){if(m.h&&typeof o<"u"){if(m.v&&wr(m)==4)setTimeout(m.Ca.bind(m),0);else if(We(m,"readystatechange"),wr(m)==4){m.h=!1;try{const pe=m.ca();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var T;if(!(T=N)){var z;if(z=pe===0){let ze=String(m.D).match(Jt)[1]||null;!ze&&c.self&&c.self.location&&(ze=c.self.location.protocol.slice(0,-1)),z=!Kc.test(ze?ze.toLowerCase():"")}T=z}if(T)We(m,"complete"),We(m,"success");else{m.o=6;try{var ae=wr(m)>2?m.g.statusText:""}catch{ae=""}m.l=ae+" ["+m.ca()+"]",ki(m)}}finally{Xr(m)}}}}function Xr(m,N){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const T=m.g;m.g=null,N||We(m,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function wr(m){return m.g?m.g.readyState:0}n.ca=function(){try{return wr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var N=this.g.responseText;return m&&N.indexOf(m)==0&&(N=N.substring(m.length)),ks(N)}};function Jc(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function jl(m){const N={};m=(m.g&&wr(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<m.length;z++){if(A(m[z]))continue;var T=mr(m[z]);const ae=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const pe=N[ae]||[];N[ae]=pe,pe.push(T)}we(N,function(z){return z.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nr(m,N,T){return T&&T.internalChannelParams&&T.internalChannelParams[m]||N}function uo(m){this.za=0,this.i=[],this.j=new Ne,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nr("baseRetryDelayMs",5e3,m),this.Za=Nr("retryDelaySeedMs",1e4,m),this.Ta=Nr("forwardChannelMaxRetries",2,m),this.va=Nr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new ct(m&&m.concurrentRequestLimit),this.Ba=new ya,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=uo.prototype,n.ka=8,n.I=1,n.connect=function(m,N,T,z){Vt(0),this.W=m,this.H=N||{},T&&z!==void 0&&(this.H.OSID=T,this.H.OAID=z),this.F=this.X,this.J=kl(this,null,this.W),Qr(this)};function ho(m){if(fo(m),m.I==3){var N=m.V++,T=ne(m.J);if(He(T,"SID",m.M),He(T,"RID",N),He(T,"TYPE","terminate"),jr(m,T),N=new Us(m,m.j,N),N.M=2,N.A=xt(ne(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(N.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=N.A,T=!0),T||(N.g=Zc(N.j,null),N.g.ea(N.A)),N.F=Date.now(),Ln(N)}wa(m)}function Sn(m){m.g&&(va(m),m.g.cancel(),m.g=null)}function fo(m){Sn(m),m.v&&(c.clearTimeout(m.v),m.v=null),mo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Qr(m){if(!he(m.h)&&!m.m){m.m=!0;var N=m.Ea;te||C(),H||(te(),H=!0),M.add(N,m),m.D=0}}function Yc(m,N){return ge(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=N.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=ss(h(m.Ea,m,N),go(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ae=new Us(this,this.j,m);let pe=this.o;if(this.U&&(pe?(pe=Z(pe),W(pe,this.U)):pe=this.U),this.u!==null||this.R||(ae.J=pe,pe=null),this.S)e:{for(var N=0,T=0;T<this.i.length;T++){t:{var z=this.i[T];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(N+=z,N>4096){N=T;break e}if(N===4096||T===this.i.length-1){N=T+1;break e}}N=1e3}else N=1e3;N=Sl(this,ae,N),T=ne(this.J),He(T,"RID",m),He(T,"CVER",22),this.G&&He(T,"X-HTTP-Session-Id",this.G),jr(this,T),pe&&(this.R?N="headers="+hn(Gc(pe))+"&"+N:this.u&&co(T,this.u,pe)),kt(this.h,ae),this.Ra&&He(T,"TYPE","init"),this.S?(He(T,"$req",N),He(T,"SID","null"),ae.U=!0,en(ae,T,null)):en(ae,T,N),this.I=2}}else this.I==3&&(m?ba(this,m):this.i.length==0||he(this.h)||ba(this))};function ba(m,N){var T;N?T=N.l:T=m.V++;const z=ne(m.J);He(z,"SID",m.M),He(z,"RID",T),He(z,"AID",m.K),jr(m,z),m.u&&m.o&&co(z,m.u,m.o),T=new Us(m,m.j,T,m.D+1),m.u===null&&(T.J=m.o),N&&(m.i=N.G.concat(m.i)),N=Sl(m,T,1e3),T.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),kt(m.h,T),en(T,z,N)}function jr(m,N){m.H&&be(m.H,function(T,z){He(N,z,T)}),m.l&&be({},function(T,z){He(N,z,T)})}function Sl(m,N,T){T=Math.min(m.i.length,T);const z=m.l?h(m.l.Ka,m.l,m):null;e:{var ae=m.i;let yt=-1;for(;;){const ns=["count="+T];yt==-1?T>0?(yt=ae[0].g,ns.push("ofs="+yt)):yt=0:ns.push("ofs="+yt);let qt=!0;for(let vs=0;vs<T;vs++){var pe=ae[vs].g;const zn=ae[vs].map;if(pe-=yt,pe<0)yt=Math.max(0,ae[vs].g-100),qt=!1;else try{pe="req"+pe+"_"||"";try{var ze=zn instanceof Map?zn:Object.entries(zn);for(const[kr,_r]of ze){let Cr=_r;u(_r)&&(Cr=$t(_r)),ns.push(pe+kr+"="+encodeURIComponent(Cr))}}catch(kr){throw ns.push(pe+"type="+encodeURIComponent("_badmap")),kr}}catch{z&&z(zn)}}if(qt){ze=ns.join("&");break e}}ze=void 0}return m=m.i.splice(0,T),N.G=m,ze}function Hs(m){if(!m.g&&!m.v){m.Y=1;var N=m.Da;te||C(),H||(te(),H=!0),M.add(N,m),m.A=0}}function Sr(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=ss(h(m.Da,m),go(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,_i(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=ss(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),Sn(this),_i(this))};function va(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function _i(m){m.g=new Us(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var N=ne(m.na);He(N,"RID","rpc"),He(N,"SID",m.M),He(N,"AID",m.K),He(N,"CI",m.F?"0":"1"),!m.F&&m.ia&&He(N,"TO",m.ia),He(N,"TYPE","xmlhttp"),jr(m,N),m.u&&m.o&&co(N,m.u,m.o),m.O&&(m.g.H=m.O);var T=m.g;m=m.ba,T.M=1,T.A=xt(ne(N)),T.u=null,T.R=!0,Gr(T,m)}n.Va=function(){this.C!=null&&(this.C=null,Sn(this),Sr(this),Vt(19))};function mo(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function po(m,N){var T=null;if(m.g==N){mo(m),va(m),m.g=null;var z=2}else if(Le(m.h,N))T=N.G,dt(m.h,N),z=1;else return;if(m.I!=0){if(N.o)if(z==1){T=N.u?N.u.length:0,N=Date.now()-N.F;var ae=m.D;z=Dn(),We(z,new _s(z,T)),Qr(m)}else Hs(m);else if(ae=N.m,ae==3||ae==0&&N.X>0||!(z==1&&Yc(m,N)||z==2&&Sr(m)))switch(T&&T.length>0&&(N=m.h,N.i=N.i.concat(T)),ae){case 1:kn(m,5);break;case 4:kn(m,10);break;case 3:kn(m,6);break;default:kn(m,2)}}}function go(m,N){let T=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(T*=2),T*N}function kn(m,N){if(m.j.info("Error code "+N),N==2){var T=h(m.bb,m),z=m.Ua;const ae=!z;z=new R(z||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Fe(z,"https"),xt(z),ae?br(z.toString(),T):vr(z.toString(),T)}else Vt(2);m.I=0,m.l&&m.l.pa(N),wa(m),fo(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function wa(m){if(m.I=0,m.ja=[],m.l){const N=gt(m.h);(N.length!=0||m.i.length!=0)&&(k(m.ja,N),k(m.ja,m.i),m.h.i.length=0,E(m.i),m.i.length=0),m.l.oa()}}function kl(m,N,T){var z=T instanceof R?ne(T):new R(T);if(z.g!="")N&&(z.g=N+"."+z.g),_e(z,z.u);else{var ae=c.location;z=ae.protocol,N=N?N+"."+ae.hostname:ae.hostname,ae=+ae.port;const pe=new R(null);z&&Fe(pe,z),N&&(pe.g=N),ae&&_e(pe,ae),T&&(pe.h=T),z=pe}return T=m.G,N=m.wa,T&&N&&He(z,T,N),He(z,"VER",m.ka),jr(m,z),z}function Zc(m,N,T){if(N&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=m.Aa&&!m.ma?new Ht(new Yr({ab:T})):new Ht(m.ma),N.Fa(m.L),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xc(){}n=Xc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function fn(m,N){ke.call(this),this.g=new uo(N),this.l=m,this.h=N&&N.messageUrlParams||null,m=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(m?m["X-WebChannel-Content-Type"]=N.messageContentType:m={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(m?m["X-WebChannel-Client-Profile"]=N.sa:m={"X-WebChannel-Client-Profile":N.sa}),this.g.U=m,(m=N&&N.Qb)&&!A(m)&&(this.g.u=m),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!A(N)&&(this.g.G=N,m=this.h,m!==null&&N in m&&(m=this.h,N in m&&delete m[N])),this.j=new Ci(this)}v(fn,ke),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){ho(this.g)},fn.prototype.o=function(m){var N=this.g;if(typeof m=="string"){var T={};T.__data__=m,m=T}else this.v&&(T={},T.__data__=$t(m),m=T);N.i.push(new Ke(N.Ya++,m)),N.I==3&&Qr(N)},fn.prototype.N=function(){this.g.l=null,delete this.j,ho(this.g),delete this.g,fn.Z.N.call(this)};function xo(m){Ws.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var N=m.__sm__;if(N){e:{for(const T in N){m=T;break e}m=void 0}(this.i=m)&&(m=this.i,N=N!==null&&m in N?N[m]:void 0),this.data=N}else this.data=m}v(xo,Ws);function Qc(){fr.call(this),this.status=1}v(Qc,fr);function Ci(m){this.g=m}v(Ci,Xc),Ci.prototype.ra=function(){We(this.g,"a")},Ci.prototype.qa=function(m){We(this.g,new xo(m))},Ci.prototype.pa=function(m){We(this.g,new Qc)},Ci.prototype.oa=function(){We(this.g,"b")},fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,zt.NO_ERROR=0,zt.TIMEOUT=8,zt.HTTP_ERROR=6,Bt.COMPLETE="complete",ps.EventType=us,us.OPEN="a",us.CLOSE="b",us.ERROR="c",us.MESSAGE="d",ke.prototype.listen=ke.prototype.J,Ht.prototype.listenOnce=Ht.prototype.K,Ht.prototype.getLastError=Ht.prototype.Ha,Ht.prototype.getLastErrorCode=Ht.prototype.ya,Ht.prototype.getStatus=Ht.prototype.ca,Ht.prototype.getResponseJson=Ht.prototype.La,Ht.prototype.getResponseText=Ht.prototype.la,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Fa}).apply(typeof Zd<"u"?Zd:typeof self<"u"?self:typeof window<"u"?window:{});const Q0="@firebase/firestore",ey="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=new Ju("@firebase/firestore");function lr(n,...e){if(il.logLevel<=Ft.DEBUG){const s=e.map(yp);il.debug(`Firestore (${zc}): ${n}`,...s)}}function Nw(n,...e){if(il.logLevel<=Ft.ERROR){const s=e.map(yp);il.error(`Firestore (${zc}): ${n}`,...s)}}function hE(n,...e){if(il.logLevel<=Ft.WARN){const s=e.map(yp);il.warn(`Firestore (${zc}): ${n}`,...s)}}function yp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,jw(n,r,s)}function jw(n,e,s){let r=`FIRESTORE (${zc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw Nw(r),new Error(r)}function nc(n,e,s,r){let i="Unexpected state";typeof s=="string"?i=s:r=s,n||jw(e,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class It extends Jn{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(nn.UNAUTHENTICATED)))}shutdown(){}}class mE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class pE{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){nc(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,s(f)):Promise.resolve();let o=new rc;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rc,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},u=f=>{lr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(lr("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rc)}}),0),c()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(lr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nc(typeof r.accessToken=="string",31837,{l:r}),new Sw(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nc(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class gE{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xE{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new gE(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ty{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yE{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){nc(this.o===void 0,3512);const r=o=>{o.error!=null&&lr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,lr("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?s(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{lr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):lr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ty(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(nc(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new ty(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<n;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=bE(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<s&&(r+=e.charAt(i[o]%62))}return r}}function aa(n,e){return n<e?-1:n>e?1:0}function wE(n,e){const s=Math.min(n.length,e.length);for(let r=0;r<s;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return Xf(i)===Xf(o)?aa(i,o):Xf(i)?1:-1}return aa(n.length,e.length)}const NE=55296,jE=57343;function Xf(n){const e=n.charCodeAt(0);return e>=NE&&e<=jE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="__name__";class Rr{constructor(e,s,r){s===void 0?s=0:s>e.length&&wc(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&wc(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return Rr.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Rr?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let i=0;i<r;i++){const o=Rr.compareSegments(e.get(i),s.get(i));if(o!==0)return o}return aa(e.length,s.length)}static compareSegments(e,s){const r=Rr.isNumericId(e),i=Rr.isNumericId(s);return r&&!i?-1:!r&&i?1:r&&i?Rr.extractNumericId(e).compare(Rr.extractNumericId(s)):wE(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xp.fromString(e.substring(4,e.length-2))}}class or extends Rr{construct(e,s,r){return new or(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new It(At.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((i=>i.length>0)))}return new or(s)}static emptyPath(){return new or([])}}const SE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fa extends Rr{construct(e,s,r){return new Fa(e,s,r)}static isValidIdentifier(e){return SE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sy}static keyField(){return new Fa([sy])}static fromServerFormat(e){const s=[];let r="",i=0;const o=()=>{if(r.length===0)throw new It(At.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new It(At.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new It(At.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(r+=u,i++):(o(),i++)}if(o(),c)throw new It(At.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fa(s)}static emptyPath(){return new Fa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.path=e}static fromPath(e){return new Ba(or.fromString(e))}static fromName(e){return new Ba(or.fromString(e).popFirst(5))}static empty(){return new Ba(or.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&or.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return or.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ba(new or(e.slice()))}}function kE(n,e,s,r){if(e===!0&&r===!0)throw new It(At.INVALID_ARGUMENT,`${n} and ${s} cannot be used together.`)}function _E(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function CE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":wc(12329,{type:typeof n})}function EE(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new It(At.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=CE(n);throw new It(At.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(n,e){const s={typeString:n};return e&&(s.value=e),s}function Uc(n,e){if(!_E(n))throw new It(At.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){s=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){s=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){s=`Expected '${r}' field to equal '${o.value}'`;break}}if(s)throw new It(At.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=-62135596800,ry=1e6;class Mr{static now(){return Mr.fromMillis(Date.now())}static fromDate(e){return Mr.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*ry);return new Mr(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new It(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new It(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<ny)throw new It(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ry}_compareTo(e){return this.seconds===e.seconds?aa(this.nanoseconds,e.nanoseconds):aa(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Uc(e,Mr._jsonSchema))return new Mr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ny;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mr._jsonSchemaVersion="firestore/timestamp/1.0",Mr._jsonSchema={type:Ss("string",Mr._jsonSchemaVersion),seconds:Ss("number"),nanoseconds:Ss("number")};function TE(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new PE("Invalid base64 string: "+o):o}})(e);return new Ya(s)}static fromUint8Array(e){const s=(function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o})(e);return new Ya(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let i=0;i<s.length;i++)r[i]=s.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return aa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ya.EMPTY_BYTE_STRING=new Ya("");const iy="(default)";class Su{constructor(e,s){this.projectId=e,this.database=s||iy}static empty(){return new Su("","")}get isDefaultDatabase(){return this.database===iy}isEqual(e){return e instanceof Su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,s=null,r=[],i=[],o=null,c="F",u=null,f=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IE(n){return new AE(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ay,Pt;(Pt=ay||(ay={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new xp([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=1048576;function Qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,s,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=s,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,s-r);i>0&&lr("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,s,r,i,o){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,i,o){const c=Date.now()+r,u=new bp(e,s,c,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new It(At.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var oy,ly;(ly=oy||(oy={})).Ma="default",ly.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="firestore.googleapis.com",dy=!0;class uy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new It(At.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kw,this.ssl=dy}else this.host=e.host,this.ssl=e.ssl??dy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ME)throw new It(At.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new It(At.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new It(At.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new It(At.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _w{constructor(e,s,r,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new It(At.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new It(At.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fE;switch(r.type){case"firstParty":return new xE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new It(At.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=cy.get(s);r&&(lr("ComponentProvider","Removing Datastore"),cy.delete(s),r.terminate())})(this),Promise.resolve()}}function LE(n,e,s,r={}){var h;n=EE(n,_w);const i=io(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${s}`;i&&(Gu(`https://${u}`),Ku("Firestore",!0)),o.host!==kw&&o.host!==u&&hE("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:u,ssl:i,emulatorOptions:r};if(!ia(f,c)&&(n._setSettings(f),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=nn.MOCK_USER;else{y=mw(r.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const j=r.mockUserToken.sub||r.mockUserToken.user_id;if(!j)throw new It(At.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new nn(j)}n._authCredentials=new mE(new Sw(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vp(this.firestore,e,this._query)}}class Or{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Or(this.firestore,e,this._key)}toJSON(){return{type:Or._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,r){if(Uc(s,Or._jsonSchema))return new Or(e,r||null,new Ba(or.fromString(s.referencePath)))}}Or._jsonSchemaVersion="firestore/documentReference/1.0",Or._jsonSchema={type:Ss("string",Or._jsonSchemaVersion),referencePath:Ss("string")};class wp extends vp{constructor(e,s,r){super(e,s,IE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Or(this.firestore,null,new Ba(e))}withConverter(e){return new wp(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="AsyncQueue";class fy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new DE(this,"async_queue_retry"),this._c=()=>{const r=Qf();r&&lr(hy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const s=Qf();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=Qf();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new rc;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!TE(e))throw e;lr(hy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Nw("INTERNAL UNHANDLED ERROR: ",my(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(e,s,r){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const i=bp.createAndSchedule(this,e,s,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&wc(47125,{Pc:my(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function my(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class zE extends _w{constructor(e,s,r,i){super(e,s,r,i),this.type="firestore",this._queue=new fy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fy(e),this._firestoreClient=void 0,await e}}}function UE(n,e){const s=typeof n=="object"?n:ul(),r=typeof n=="string"?n:e,i=Br(s,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=fp("firestore");o&&LE(i,...o)}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hi(Ya.fromBase64String(e))}catch(s){throw new It(At.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new hi(Ya.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Uc(e,hi._jsonSchema))return hi.fromBase64String(e.bytes)}}hi._jsonSchemaVersion="firestore/bytes/1.0",hi._jsonSchema={type:Ss("string",hi._jsonSchemaVersion),bytes:Ss("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new It(At.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new It(At.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new It(At.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return aa(this._lat,e._lat)||aa(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ga._jsonSchemaVersion}}static fromJSON(e){if(Uc(e,Ga._jsonSchema))return new Ga(e.latitude,e.longitude)}}Ga._jsonSchemaVersion="firestore/geoPoint/1.0",Ga._jsonSchema={type:Ss("string",Ga._jsonSchemaVersion),latitude:Ss("number"),longitude:Ss("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ka._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Uc(e,Ka._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new Ka(e.vectorValues);throw new It(At.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ka._jsonSchemaVersion="firestore/vectorValue/1.0",Ka._jsonSchema={type:Ss("string",Ka._jsonSchemaVersion),vectorValues:Ss("object")};const FE=new RegExp("[~\\*/\\[\\]]");function $E(n,e,s){if(e.search(FE)>=0)throw py(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new Cw(...e.split("."))._internalPath}catch{throw py(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function py(n,e,s,r,i){let o=`Function ${e}() called with invalid data`;o+=". ";let c="";return new It(At.INVALID_ARGUMENT,o+n+c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,s,r,i,o){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Tw("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class VE extends Ew{data(){return super.data()}}function Tw(n,e){return typeof e=="string"?$E(n,e):e instanceof Cw?e._internalPath:e._delegate._internalPath}class Xd{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class el extends Ew{constructor(e,s,r,i,o,c){super(e,s,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(Tw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new It(At.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=el._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}el._jsonSchemaVersion="firestore/documentSnapshot/1.0",el._jsonSchema={type:Ss("string",el._jsonSchemaVersion),bundleSource:Ss("string","DocumentSnapshot"),bundleName:Ss("string"),bundle:Ss("string")};class ou extends el{data(e={}){return super.data(e)}}class ic{constructor(e,s,r,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new Xd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new ou(this._firestore,this._userDataWriter,r.key,r,new Xd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new It(At.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((u=>{const f=new ou(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Xd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const f=new ou(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Xd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,y=-1;return u.type!==0&&(h=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),y=c.indexOf(u.doc.key)),{type:BE(u.type),doc:f,oldIndex:h,newIndex:y}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new It(At.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ic._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(s.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function BE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wc(61501,{type:n})}}ic._jsonSchemaVersion="firestore/querySnapshot/1.0",ic._jsonSchema={type:Ss("string",ic._jsonSchemaVersion),bundleSource:Ss("string","QuerySnapshot"),bundleName:Ss("string"),bundle:Ss("string")};(function(e,s=!0){(function(i){zc=i})(ao),Nn(new ln("firestore",((r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),u=new zE(new pE(r.getProvider("auth-internal")),new yE(c,r.getProvider("app-check-internal")),(function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new It(At.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Su(h.options.projectId,y)})(c,i),c);return o={useFetchStreams:s,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Ds(Q0,ey,e),Ds(Q0,ey,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="firebasestorage.googleapis.com",qE="storageBucket",WE=120*1e3,HE=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Jn{constructor(e,s,r=0){super(em(e),`Firebase Storage: ${s} (${em(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return em(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fr||(Fr={}));function em(n){return"storage/"+n}function GE(){const n="An unknown error occurred, please check the error payload for server response.";return new qr(Fr.UNKNOWN,n)}function KE(){return new qr(Fr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function JE(){return new qr(Fr.CANCELED,"User canceled the upload/download.")}function YE(n){return new qr(Fr.INVALID_URL,"Invalid URL '"+n+"'.")}function ZE(n){return new qr(Fr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function gy(n){return new qr(Fr.INVALID_ARGUMENT,n)}function Aw(){return new qr(Fr.APP_DELETED,"The Firebase app was deleted.")}function XE(n){return new qr(Fr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let r;try{r=cr.makeFromUrl(e,s)}catch{return new cr(e,"")}if(r.path==="")return r;throw ZE(e)}static makeFromUrl(e,s){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+i+c,"i"),f={bucket:1,path:3};function h(J){J.path_=decodeURIComponent(J.path)}const y="v[A-Za-z0-9_]+",v=s.replace(/[.]/g,"\\."),j="(/([^?#]*).*)?$",E=new RegExp(`^https?://${v}/${y}/b/${i}/o${j}`,"i"),k={bucket:1,path:3},_=s===Pw?"(?:storage.googleapis.com|storage.cloud.google.com)":s,P="([^?#]*)",L=new RegExp(`^https?://${_}/${i}/${P}`,"i"),F=[{regex:u,indices:f,postModify:o},{regex:E,indices:k,postModify:h},{regex:L,indices:{bucket:1,path:2},postModify:h}];for(let J=0;J<F.length;J++){const te=F[J],H=te.regex.exec(e);if(H){const M=H[te.indices.bucket];let C=H[te.indices.path];C||(C=""),r=new cr(M,C),te.postModify(r);break}}if(r==null)throw YE(e);return r}}class QE{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(n,e,s){let r=1,i=null,o=null,c=!1,u=0;function f(){return u===2}let h=!1;function y(...P){h||(h=!0,e.apply(null,P))}function v(P){i=setTimeout(()=>{i=null,n(E,f())},P)}function j(){o&&clearTimeout(o)}function E(P,...L){if(h){j();return}if(P){j(),y.call(null,P,...L);return}if(f()||c){j(),y.call(null,P,...L);return}r<64&&(r*=2);let F;u===1?(u=2,F=0):F=(r+Math.random())*1e3,v(F)}let k=!1;function _(P){k||(k=!0,j(),!h&&(i!==null?(P||(u=2),clearTimeout(i),v(0)):P||(u=1)))}return v(0),o=setTimeout(()=>{c=!0,_(!0)},s),_}function t4(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(n){return n!==void 0}function xy(n,e,s,r){if(r<e)throw gy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>s)throw gy(`Invalid value for '${n}'. Expected ${s} or less.`)}function n4(n){const e=encodeURIComponent;let s="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);s=s+i+"&"}return s=s.slice(0,-1),s}var ku;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ku||(ku={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(n,e){const s=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return s||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,s,r,i,o,c,u,f,h,y,v,j=!0,E=!1){this.url_=e,this.method_=s,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=y,this.connectionFactory_=v,this.retry=j,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,_)=>{this.resolve_=k,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Qd(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const f=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===ku.NO_ERROR,f=o.getStatus();if(!u||r4(f,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===ku.ABORT;r(!1,new Qd(!1,null,y));return}const h=this.successCodes_.indexOf(f)!==-1;r(!0,new Qd(h,o))})},s=(r,i)=>{const o=this.resolve_,c=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(u,u.getResponse());s4(f)?o(f):o()}catch(f){c(f)}else if(u!==null){const f=GE();f.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,f)):c(f)}else if(i.canceled){const f=this.appDelete_?Aw():JE();c(f)}else{const f=KE();c(f)}};this.canceled_?s(!1,new Qd(!1,null,!0)):this.backoffId_=e4(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qd{constructor(e,s,r){this.wasSuccessCode=e,this.connection=s,this.canceled=!!r}}function a4(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function o4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function c4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function d4(n,e,s,r,i,o,c=!0,u=!1){const f=n4(n.urlParams),h=n.url+f,y=Object.assign({},n.headers);return l4(y,e),a4(y,s),o4(y,o),c4(y,r),new i4(h,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function h4(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,s){this._service=e,s instanceof cr?this._location=s:this._location=cr.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new _u(e,s)}get root(){const e=new cr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return h4(this._location.path)}get storage(){return this._service}get parent(){const e=u4(this._location.path);if(e===null)return null;const s=new cr(this._location.bucket,e);return new _u(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw XE(e)}}function yy(n,e){const s=e==null?void 0:e[qE];return s==null?null:cr.makeFromBucketSpec(s,n)}function f4(n,e,s,r={}){n.host=`${e}:${s}`;const i=io(e);i&&(Gu(`https://${n.host}/b`),Ku("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:mw(o,n.app.options.projectId))}class m4{constructor(e,s,r,i,o,c=!1){this.app=e,this._authProvider=s,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=Pw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WE,this._maxUploadRetryTime=HE,this._requests=new Set,i!=null?this._bucket=cr.makeFromBucketSpec(i,this._host):this._bucket=yy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cr.makeFromBucketSpec(this._url,e):this._bucket=yy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=await e.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _u(this,e)}_makeRequest(e,s,r,i,o=!0){if(this._deleted)return new QE(Aw());{const c=d4(e,this._appId,r,i,s,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,s){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,r,i).getPromise()}}const by="@firebase/storage",vy="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="storage";function p4(n=ul(),e){n=dn(n);const r=Br(n,Iw).getImmediate({identifier:e}),i=fp("storage");return i&&g4(r,...i),r}function g4(n,e,s,r={}){f4(n,e,s,r)}function x4(n,{instanceIdentifier:e}){const s=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new m4(s,r,i,e,ao)}function y4(){Nn(new ln(Iw,x4,"PUBLIC").setMultipleInstances(!0)),Ds(by,vy,""),Ds(by,vy,"esm2020")}y4();function Rw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const b4=Rw,Mw=new ha("auth","Firebase",Rw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=new Ju("@firebase/auth");function v4(n,...e){Cu.logLevel<=Ft.WARN&&Cu.warn(`Auth (${ao}): ${n}`,...e)}function lu(n,...e){Cu.logLevel<=Ft.ERROR&&Cu.error(`Auth (${ao}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(n,...e){throw Np(n,...e)}function zr(n,...e){return Np(n,...e)}function Dw(n,e,s){const r={...b4(),[e]:s};return new ha("auth","Firebase",r).create(e,{appName:n.name})}function Ja(n){return Dw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Np(n,...e){if(typeof n!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(s,...r)}return Mw.create(n,...e)}function ft(n,e,...s){if(!n)throw Np(e,...s)}function fi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw lu(e),new Error(e)}function yi(n,e){n||fi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function w4(){return wy()==="http:"||wy()==="https:"}function wy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w4()||pw()||"connection"in navigator)?navigator.onLine:!0}function j4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,s){this.shortDelay=e,this.longDelay=s,yi(s>e,"Short delay should be less than long delay!"),this.isMobile=V_()||q_()}get(){return N4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(n,e){yi(n.emulator,"Emulator should always be set here");const{url:s}=n.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_4=new Fc(3e4,6e4);function Sp(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function hl(n,e,s,r,i={}){return Lw(n,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const u=Lc({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:f,...o};return B_()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&io(n.emulatorConfig.host)&&(h.credentials="include"),Ow.fetch()(await zw(n,n.config.apiHost,s,u),h)})}async function Lw(n,e,s){n._canInitEmulator=!1;const r={...S4,...e};try{const i=new E4(n),o=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw eu(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[f,h]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw eu(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw eu(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw eu(n,"user-disabled",c);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Dw(n,y,h);xi(n,y)}}catch(i){if(i instanceof Jn)throw i;xi(n,"network-request-failed",{message:String(i)})}}async function C4(n,e,s,r,i={}){const o=await hl(n,e,s,r,i);return"mfaPendingCredential"in o&&xi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function zw(n,e,s,r){const i=`${e}${s}?${r}`,o=n,c=o.config.emulator?jp(n.config,i):`${n.config.apiScheme}://${i}`;return k4.includes(s)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}class E4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(zr(this.auth,"network-request-failed")),_4.get())})}}function eu(n,e,s){const r={appName:n.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const i=zr(n,e,r);return i.customData._tokenResponse=s,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(n,e){return hl(n,"POST","/v1/accounts:delete",e)}async function Eu(n,e){return hl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function P4(n,e=!1){const s=dn(n),r=await s.getIdToken(e),i=kp(r);ft(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ac(tm(i.auth_time)),issuedAtTime:ac(tm(i.iat)),expirationTime:ac(tm(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function tm(n){return Number(n)*1e3}function kp(n){const[e,s,r]=n.split(".");if(e===void 0||s===void 0||r===void 0)return lu("JWT malformed, contained fewer than 3 sections"),null;try{const i=dw(s);return i?JSON.parse(i):(lu("Failed to decode base64 JWT payload"),null)}catch(i){return lu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ny(n){const e=kp(n);return ft(e,"internal-error"),ft(typeof e.exp<"u","internal-error"),ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(n,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Jn&&A4(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function A4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=ac(this.lastLoginAt),this.creationTime=ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(n){var v;const e=n.auth,s=await n.getIdToken(),r=await Nc(n,Eu(e,{idToken:s}));ft(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=(v=i.providerUserInfo)!=null&&v.length?Uw(i.providerUserInfo):[],c=M4(n.providerData,o),u=n.isAnonymous,f=!(n.email&&i.passwordHash)&&!(c!=null&&c.length),h=u?f:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Mm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,y)}async function R4(n){const e=dn(n);await Tu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function M4(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Uw(n){return n.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(n,e){const s=await Lw(n,{},async()=>{const r=Lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=await zw(n,i,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:r};return n.emulatorConfig&&io(n.emulatorConfig.host)&&(f.credentials="include"),Ow.fetch()(c,f)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function O4(n,e){return hl(n,"POST","/v2/accounts:revokeToken",Sp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ft(e.idToken,"internal-error"),ft(typeof e.idToken<"u","internal-error"),ft(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ny(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){ft(e.length!==0,"internal-error");const s=Ny(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:i,expiresIn:o}=await D4(e,s);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:i,expirationTime:o}=s,c=new tl;return r&&(ft(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(ft(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(ft(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tl,this.toJSON())}_performRefresh(){return fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(n,e){ft(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class dr{constructor({uid:e,auth:s,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new I4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Mm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const s=await Nc(this,this.stsTokenManager.getToken(this.auth,e));return ft(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return P4(this,e)}reload(){return R4(this)}_assign(e){this!==e&&(ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new dr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await Tu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(Ja(this.auth));const e=await this.getIdToken();return await Nc(this,T4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const r=s.displayName??void 0,i=s.email??void 0,o=s.phoneNumber??void 0,c=s.photoURL??void 0,u=s.tenantId??void 0,f=s._redirectEventId??void 0,h=s.createdAt??void 0,y=s.lastLoginAt??void 0,{uid:v,emailVerified:j,isAnonymous:E,providerData:k,stsTokenManager:_}=s;ft(v&&_,e,"internal-error");const P=tl.fromJSON(this.name,_);ft(typeof v=="string",e,"internal-error"),Vi(r,e.name),Vi(i,e.name),ft(typeof j=="boolean",e,"internal-error"),ft(typeof E=="boolean",e,"internal-error"),Vi(o,e.name),Vi(c,e.name),Vi(u,e.name),Vi(f,e.name),Vi(h,e.name),Vi(y,e.name);const L=new dr({uid:v,auth:e,email:i,emailVerified:j,displayName:r,isAnonymous:E,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:P,createdAt:h,lastLoginAt:y});return k&&Array.isArray(k)&&(L.providerData=k.map(U=>({...U}))),f&&(L._redirectEventId=f),L}static async _fromIdTokenResponse(e,s,r=!1){const i=new tl;i.updateFromServerResponse(s);const o=new dr({uid:s.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Tu(o),o}static async _fromGetAccountInfoResponse(e,s,r){const i=s.users[0];ft(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Uw(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new tl;u.updateFromIdToken(r);const f=new dr({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:c}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Mm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=new Map;function mi(n){yi(n instanceof Function,"Expected a class definition");let e=jy.get(n);return e?(yi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Fw.type="NONE";const Sy=Fw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n,e,s){return`firebase:${n}:${e}:${s}`}class sl{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=cu(this.userKey,i.apiKey,o),this.fullPersistenceKey=cu("persistence",i.apiKey,o),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await Eu(this.auth,{idToken:e}).catch(()=>{});return s?dr._fromGetAccountInfoResponse(this.auth,s,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new sl(mi(Sy),e,r);const i=(await Promise.all(s.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=i[0]||mi(Sy);const c=cu(r,e.config.apiKey,e.name);let u=null;for(const h of s)try{const y=await h._get(c);if(y){let v;if(typeof y=="string"){const j=await Eu(e,{idToken:y}).catch(()=>{});if(!j)break;v=await dr._fromGetAccountInfoResponse(e,j,y)}else v=dr._fromJSON(e,y);h!==o&&(u=v),o=h;break}}catch{}const f=i.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new sl(o,e,r):(o=f[0],u&&await o._set(c,u.toJSON()),await Promise.all(s.map(async h=>{if(h!==o)try{await h._remove(c)}catch{}})),new sl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($w(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hw(e))return"Blackberry";if(Gw(e))return"Webos";if(Vw(e))return"Safari";if((e.includes("chrome/")||Bw(e))&&!e.includes("edge/"))return"Chrome";if(Ww(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $w(n=on()){return/firefox\//i.test(n)}function Vw(n=on()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bw(n=on()){return/crios\//i.test(n)}function qw(n=on()){return/iemobile/i.test(n)}function Ww(n=on()){return/android/i.test(n)}function Hw(n=on()){return/blackberry/i.test(n)}function Gw(n=on()){return/webos/i.test(n)}function _p(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function L4(n=on()){var e;return _p(n)&&!!((e=window.navigator)!=null&&e.standalone)}function z4(){return W_()&&document.documentMode===10}function Kw(n=on()){return _p(n)||Ww(n)||Gw(n)||Hw(n)||/windows phone/i.test(n)||qw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(n,e=[]){let s;switch(n){case"Browser":s=ky(on());break;case"Worker":s=`${ky(on())}-${n}`;break;default:s=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=o=>new Promise((c,u)=>{try{const f=e(o);c(f)}catch(f){u(f)}});r.onAbort=s,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const i of s)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4(n,e={}){return hl(n,"GET","/v2/passwordPolicy",Sp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=6;class V4{constructor(e){var r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??$4,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),i&&(s.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,s,r,i){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _y(this),this.idTokenSubscription=new _y(this),this.beforeStateQueue=new U4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=mi(s)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await sl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await Eu(this,{idToken:e}),r=await dr._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Wn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===u)&&(f!=null&&f.user)&&(r=f.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await Tu(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=j4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(Ja(this));const s=e?dn(e):null;return s&&ft(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(Ja(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(Ja(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F4(this),s=new V4(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ha("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await O4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&mi(e)||this._popupRedirectResolver;ft(s,this,"argument-error"),this.redirectPersistenceManager=await sl.create(this,[mi(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)==null?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((s=this.currentUser)==null?void 0:s.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,i){if(this._deleted)return()=>{};const o=typeof s=="function"?s:s.next.bind(s);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof s=="function"){const f=e.addObserver(s,r,i);return()=>{c=!0,f()}}else{const f=e.addObserver(s);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());s&&(e["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var s;if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((s=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getToken());return e!=null&&e.error&&v4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Cp(n){return dn(n)}class _y{constructor(e){this.auth=e,this.observer=null,this.addObserver=Y_(s=>this.observer=s)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function q4(n){Ep=n}function W4(n){return Ep.loadJS(n)}function H4(){return Ep.gapiScript}function G4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(n,e){const s=Br(n,"auth");if(s.isInitialized()){const i=s.getImmediate(),o=s.getOptions();if(ia(o,e??{}))return i;xi(i,"already-initialized")}return s.initialize({options:e})}function J4(n,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(mi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Y4(n,e,s){const r=Cp(n);ft(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=Yw(e),{host:c,port:u}=Z4(e),f=u===null?"":`:${u}`,h={url:`${o}//${c}${f}/`},y=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ft(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ft(ia(h,r.config.emulator)&&ia(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,io(c)?(Gu(`${o}//${c}${f}`),Ku("Auth",!0)):X4()}function Yw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Z4(n){const e=Yw(n),s=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Cy(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:Cy(c)}}}function Cy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function X4(){function n(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return fi("not implemented")}_getIdTokenResponse(e){return fi("not implemented")}_linkToIdToken(e,s){return fi("not implemented")}_getReauthenticationResolver(e){return fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(n,e){return C4(n,"POST","/v1/accounts:signInWithIdp",Sp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="http://localhost";class Za extends Zw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new Za(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):xi("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=s;if(!r||!i)return null;const c=new Za(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const s=this.buildRequest();return nl(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,nl(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,nl(e,s)}buildRequest(){const e={requestUri:Q4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Lc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Xw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends $c{constructor(){super("facebook.com")}static credential(e){return Za._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends $c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return Za._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return Gi.credential(s,r)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends $c{constructor(){super("github.com")}static credential(e){return Za._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.GITHUB_SIGN_IN_METHOD="github.com";Ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends $c{constructor(){super("twitter.com")}static credential(e,s){return Za._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return Ji.credential(s,r)}catch{return null}}}Ji.TWITTER_SIGN_IN_METHOD="twitter.com";Ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,i=!1){const o=await dr._fromIdTokenResponse(e,r,i),c=Ey(r);return new al({user:o,providerId:c,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const i=Ey(r);return new al({user:e,providerId:i,_tokenResponse:r,operationType:s})}}function Ey(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends Jn{constructor(e,s,r,i){super(s.code,s.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Pu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,i){return new Pu(e,s,r,i)}}function Qw(n,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(n):s._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Pu._fromErrorAndOperation(n,o,e,r):o})}async function eT(n,e,s=!1){const r=await Nc(n,e._linkToIdToken(n.auth,await n.getIdToken()),s);return al._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(n,e,s=!1){const{auth:r}=n;if(Wn(r.app))return Promise.reject(Ja(r));const i="reauthenticate";try{const o=await Nc(n,Qw(r,i,e,n),s);ft(o.idToken,r,"internal-error");const c=kp(o.idToken);ft(c,r,"internal-error");const{sub:u}=c;return ft(n.uid===u,r,"user-mismatch"),al._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&xi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(n,e,s=!1){if(Wn(n.app))return Promise.reject(Ja(n));const r="signIn",i=await Qw(n,r,e),o=await al._fromIdTokenResponse(n,r,i);return s||await n._updateCurrentUser(o.user),o}function nT(n,e,s,r){return dn(n).onIdTokenChanged(e,s,r)}function rT(n,e,s){return dn(n).beforeAuthStateChanged(e,s)}const Au="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Au,"1"),this.storage.removeItem(Au),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=1e3,aT=10;class tN extends eN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Kw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),i=this.localCache[s];r!==i&&e(s,i,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const r=e.key;s?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!s&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);z4()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,aT):i()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},iT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}tN.type="LOCAL";const oT=tN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN extends eN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}sN.type="SESSION";const nN=sN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(i=>i.isListeningto(e));if(s)return s;const r=new Zu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:i,data:o}=s.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(c).map(async h=>h(s.origin,o)),f=await lT(u);s.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(n="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return n+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((u,f)=>{const h=Tp("",20);i.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(v){const j=v;if(j.data.eventId===h)switch(j.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(j.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:s},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return window}function dT(n){Ur().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function uT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hT(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function fT(){return rN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="firebaseLocalStorageDb",mT=1,Iu="firebaseLocalStorage",aN="fbase_key";class Vc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Xu(n,e){return n.transaction([Iu],e?"readwrite":"readonly").objectStore(Iu)}function pT(){const n=indexedDB.deleteDatabase(iN);return new Vc(n).toPromise()}function Dm(){const n=indexedDB.open(iN,mT);return new Promise((e,s)=>{n.addEventListener("error",()=>{s(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Iu,{keyPath:aN})}catch(i){s(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Iu)?e(r):(r.close(),await pT(),e(await Dm()))})})}async function Ty(n,e,s){const r=Xu(n,!0).put({[aN]:e,value:s});return new Vc(r).toPromise()}async function gT(n,e){const s=Xu(n,!1).get(e),r=await new Vc(s).toPromise();return r===void 0?null:r.value}function Py(n,e){const s=Xu(n,!0).delete(e);return new Vc(s).toPromise()}const xT=800,yT=3;class oN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dm(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>yT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zu._getInstance(fT()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var s,r;if(this.activeServiceWorker=await uT(),!this.activeServiceWorker)return;this.sender=new cT(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(s=e[0])!=null&&s.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dm();return await Ty(e,Au,"1"),await Py(e,Au),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ty(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>gT(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Py(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Xu(i,!1).getAll();return new Vc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oN.type="LOCAL";const bT=oN;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(n,e){return e?mi(e):(ft(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends Zw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nl(e,this._buildIdpRequest())}_linkToIdToken(e,s){return nl(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function wT(n){return sT(n.auth,new Pp(n),n.bypassAuthState)}function NT(n){const{auth:e,user:s}=n;return ft(s,e,"internal-error"),tT(s,new Pp(n),n.bypassAuthState)}async function jT(n){const{auth:e,user:s}=n;return ft(s,e,"internal-error"),eT(s,new Pp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,s,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:i,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:s,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wT;case"linkViaPopup":case"linkViaRedirect":return jT;case"reauthViaPopup":case"reauthViaRedirect":return NT;default:xi(this.auth,"internal-error")}}resolve(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=new Fc(2e3,1e4);class Zo extends lN{constructor(e,s,r,i,o){super(e,s,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Zo.currentPopupAction&&Zo.currentPopupAction.cancel(),Zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ft(e,this.auth,"internal-error"),e}async onExecution(){yi(this.filter.length===1,"Popup operations only handle one event");const e=Tp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if((r=(s=this.authWindow)==null?void 0:s.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ST.get())};e()}}Zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="pendingRedirect",du=new Map;class _T extends lN{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=du.get(this.auth._key());if(!e){try{const r=await CT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}du.set(this.auth._key(),e)}return this.bypassAuthState||du.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CT(n,e){const s=PT(e),r=TT(n);if(!await r._isAvailable())return!1;const i=await r._get(s)==="true";return await r._remove(s),i}function ET(n,e){du.set(n._key(),e)}function TT(n){return mi(n._redirectPersistence)}function PT(n){return cu(kT,n.config.apiKey,n.name)}async function AT(n,e,s=!1){if(Wn(n.app))return Promise.reject(Ja(n));const r=Cp(n),i=vT(r,e),c=await new _T(r,i,s).execute();return c&&!s&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=600*1e3;class RT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MT(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!cN(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";s.onError(zr(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IT&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ay(e))}saveEventToCache(e){this.cachedEventUids.add(Ay(e)),this.lastProcessedEventTime=Date.now()}}function Ay(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function cN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MT(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT(n,e={}){return hl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LT=/^https?/;async function zT(n){if(n.config.emulator)return;const{authorizedDomains:e}=await DT(n);for(const s of e)try{if(UT(s))return}catch{}xi(n,"unauthorized-domain")}function UT(n){const e=Rm(),{protocol:s,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?s==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&c.hostname===r}if(!LT.test(s))return!1;if(OT.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=new Fc(3e4,6e4);function Iy(){const n=Ur().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let s=0;s<n.CP.length;s++)n.CP[s]=null}}function $T(n){return new Promise((e,s)=>{var i,o,c;function r(){Iy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Iy(),s(zr(n,"network-request-failed"))},timeout:FT.get()})}if((o=(i=Ur().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=Ur().gapi)!=null&&c.load)r();else{const u=G4("iframefcb");return Ur()[u]=()=>{gapi.load?r():s(zr(n,"network-request-failed"))},W4(`${H4()}?onload=${u}`).catch(f=>s(f))}}).catch(e=>{throw uu=null,e})}let uu=null;function VT(n){return uu=uu||$T(n),uu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=new Fc(5e3,15e3),qT="__/auth/iframe",WT="emulator/auth/iframe",HT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KT(n){const e=n.config;ft(e.authDomain,n,"auth-domain-config-required");const s=e.emulator?jp(e,WT):`https://${n.config.authDomain}/${qT}`,r={apiKey:e.apiKey,appName:n.name,v:ao},i=GT.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${s}?${Lc(r).slice(1)}`}async function JT(n){const e=await VT(n),s=Ur().gapi;return ft(s,n,"internal-error"),e.open({where:document.body,url:KT(n),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HT,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=zr(n,"network-request-failed"),u=Ur().setTimeout(()=>{o(c)},BT.get());function f(){Ur().clearTimeout(u),i(r)}r.ping(f).then(f,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZT=500,XT=600,QT="_blank",eP="http://localhost";class Ry{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tP(n,e,s,r=ZT,i=XT){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const f={...YT,width:r.toString(),height:i.toString(),top:o,left:c},h=on().toLowerCase();s&&(u=Bw(h)?QT:s),$w(h)&&(e=e||eP,f.scrollbars="yes");const y=Object.entries(f).reduce((j,[E,k])=>`${j}${E}=${k},`,"");if(L4(h)&&u!=="_self")return sP(e||"",u),new Ry(null);const v=window.open(e||"",u,y);ft(v,n,"popup-blocked");try{v.focus()}catch{}return new Ry(v)}function sP(n,e){const s=document.createElement("a");s.href=n,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="__/auth/handler",rP="emulator/auth/handler",iP=encodeURIComponent("fac");async function My(n,e,s,r,i,o){ft(n.config.authDomain,n,"auth-domain-config-required"),ft(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:s,redirectUrl:r,v:ao,eventId:i};if(e instanceof Xw){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",J_(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(e instanceof $c){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const f=await n._getAppCheckToken(),h=f?`#${iP}=${encodeURIComponent(f)}`:"";return`${aP(n)}?${Lc(u).slice(1)}${h}`}function aP({config:n}){return n.emulator?jp(n,rP):`https://${n.authDomain}/${nP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="webStorageSupport";class oP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nN,this._completeRedirectFn=AT,this._overrideRedirectResult=ET}async _openPopup(e,s,r,i){var c;yi((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await My(e,s,r,Rm(),i);return tP(e,o,Tp())}async _openRedirect(e,s,r,i){await this._originValidation(e);const o=await My(e,s,r,Rm(),i);return dT(o),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:i,promise:o}=this.eventManagers[s];return i?Promise.resolve(i):(yi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await JT(e),r=new RT(e);return s.register("authEvent",i=>(ft(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(sm,{type:sm},i=>{var c;const o=(c=i==null?void 0:i[0])==null?void 0:c[sm];o!==void 0&&s(!!o),xi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=zT(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Kw()||Vw()||_p()}}const lP=oP;var Dy="@firebase/auth",Oy="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uP(n){Nn(new ln("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;ft(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jw(n)},h=new B4(r,i,o,f);return J4(h,s),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),Nn(new ln("auth-internal",e=>{const s=Cp(e.getProvider("auth").getImmediate());return(r=>new cP(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(Dy,Oy,dP(n)),Ds(Dy,Oy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=300,fP=fw("authIdTokenMaxAge")||hP;let Ly=null;const mP=n=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>fP)return;const i=s==null?void 0:s.token;Ly!==i&&(Ly=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pP(n=ul()){const e=Br(n,"auth");if(e.isInitialized())return e.getImmediate();const s=K4(n,{popupRedirectResolver:lP,persistence:[bT,oT,nN]}),r=fw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=mP(o.toString());rT(s,c,()=>c(s.currentUser)),nT(s,u=>c(u))}}const i=uw("auth");return i&&Y4(s,`http://${i}`),s}function gP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}q4({loadJS(n){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=zr("internal-error");o.customData=i,s(o)},r.type="text/javascript",r.charset="UTF-8",gP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uP("Browser");const dN="@firebase/installations",Ap="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=1e4,hN=`w:${Ap}`,fN="FIS_v2",xP="https://firebaseinstallations.googleapis.com/v1",yP=3600*1e3,bP="installations",vP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Xa=new ha(bP,vP,wP);function mN(n){return n instanceof Jn&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN({projectId:n}){return`${xP}/projects/${n}/installations`}function gN(n){return{token:n.token,requestStatus:2,expiresIn:jP(n.expiresIn),creationTime:Date.now()}}async function xN(n,e){const r=(await e.json()).error;return Xa.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function yN({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function NP(n,{refreshToken:e}){const s=yN(n);return s.append("Authorization",SP(e)),s}async function bN(n){const e=await n();return e.status>=500&&e.status<600?n():e}function jP(n){return Number(n.replace("s","000"))}function SP(n){return`${fN} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP({appConfig:n,heartbeatServiceProvider:e},{fid:s}){const r=pN(n),i=yN(n),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const c={fid:s,authVersion:fN,appId:n.appId,sdkVersion:hN},u={method:"POST",headers:i,body:JSON.stringify(c)},f=await bN(()=>fetch(r,u));if(f.ok){const h=await f.json();return{fid:h.fid||s,registrationStatus:2,refreshToken:h.refreshToken,authToken:gN(h.authToken)}}else throw await xN("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=/^[cdef][\w-]{21}$/,Om="";function EP(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const s=TP(n);return CP.test(s)?s:Om}catch{return Om}}function TP(n){return _P(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=new Map;function NN(n,e){const s=Qu(n);jN(s,e),PP(s,e)}function jN(n,e){const s=wN.get(n);if(s)for(const r of s)r(e)}function PP(n,e){const s=AP();s&&s.postMessage({key:n,fid:e}),IP()}let qa=null;function AP(){return!qa&&"BroadcastChannel"in self&&(qa=new BroadcastChannel("[Firebase] FID Change"),qa.onmessage=n=>{jN(n.data.key,n.data.fid)}),qa}function IP(){wN.size===0&&qa&&(qa.close(),qa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="firebase-installations-database",MP=1,Qa="firebase-installations-store";let nm=null;function Ip(){return nm||(nm=Yu(RP,MP,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Qa)}}})),nm}async function Ru(n,e){const s=Qu(n),i=(await Ip()).transaction(Qa,"readwrite"),o=i.objectStore(Qa),c=await o.get(s);return await o.put(e,s),await i.done,(!c||c.fid!==e.fid)&&NN(n,e.fid),e}async function SN(n){const e=Qu(n),r=(await Ip()).transaction(Qa,"readwrite");await r.objectStore(Qa).delete(e),await r.done}async function eh(n,e){const s=Qu(n),i=(await Ip()).transaction(Qa,"readwrite"),o=i.objectStore(Qa),c=await o.get(s),u=e(c);return u===void 0?await o.delete(s):await o.put(u,s),await i.done,u&&(!c||c.fid!==u.fid)&&NN(n,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rp(n){let e;const s=await eh(n.appConfig,r=>{const i=DP(r),o=OP(n,i);return e=o.registrationPromise,o.installationEntry});return s.fid===Om?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function DP(n){const e=n||{fid:EP(),registrationStatus:0};return kN(e)}function OP(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Xa.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=LP(n,s);return{installationEntry:s,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:zP(n)}:{installationEntry:e}}async function LP(n,e){try{const s=await kP(n,e);return Ru(n.appConfig,s)}catch(s){throw mN(s)&&s.customData.serverCode===409?await SN(n.appConfig):await Ru(n.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function zP(n){let e=await zy(n.appConfig);for(;e.registrationStatus===1;)await vN(100),e=await zy(n.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:r}=await Rp(n);return r||s}return e}function zy(n){return eh(n,e=>{if(!e)throw Xa.create("installation-not-found");return kN(e)})}function kN(n){return UP(n)?{fid:n.fid,registrationStatus:0}:n}function UP(n){return n.registrationStatus===1&&n.registrationTime+uN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP({appConfig:n,heartbeatServiceProvider:e},s){const r=$P(n,s),i=NP(n,s),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const c={installation:{sdkVersion:hN,appId:n.appId}},u={method:"POST",headers:i,body:JSON.stringify(c)},f=await bN(()=>fetch(r,u));if(f.ok){const h=await f.json();return gN(h)}else throw await xN("Generate Auth Token",f)}function $P(n,{fid:e}){return`${pN(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mp(n,e=!1){let s;const r=await eh(n.appConfig,o=>{if(!_N(o))throw Xa.create("not-registered");const c=o.authToken;if(!e&&qP(c))return o;if(c.requestStatus===1)return s=VP(n,e),o;{if(!navigator.onLine)throw Xa.create("app-offline");const u=HP(o);return s=BP(n,u),u}});return s?await s:r.authToken}async function VP(n,e){let s=await Uy(n.appConfig);for(;s.authToken.requestStatus===1;)await vN(100),s=await Uy(n.appConfig);const r=s.authToken;return r.requestStatus===0?Mp(n,e):r}function Uy(n){return eh(n,e=>{if(!_N(e))throw Xa.create("not-registered");const s=e.authToken;return GP(s)?{...e,authToken:{requestStatus:0}}:e})}async function BP(n,e){try{const s=await FP(n,e),r={...e,authToken:s};return await Ru(n.appConfig,r),s}catch(s){if(mN(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await SN(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Ru(n.appConfig,r)}throw s}}function _N(n){return n!==void 0&&n.registrationStatus===2}function qP(n){return n.requestStatus===2&&!WP(n)}function WP(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+yP}function HP(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function GP(n){return n.requestStatus===1&&n.requestTime+uN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(n){const e=n,{installationEntry:s,registrationPromise:r}=await Rp(e);return r?r.catch(console.error):Mp(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JP(n,e=!1){const s=n;return await YP(s),(await Mp(s,e)).token}async function YP(n){const{registrationPromise:e}=await Rp(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(n){if(!n||!n.options)throw rm("App Configuration");if(!n.name)throw rm("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!n.options[s])throw rm(s);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function rm(n){return Xa.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="installations",XP="installations-internal",QP=n=>{const e=n.getProvider("app").getImmediate(),s=ZP(e),r=Br(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},eA=n=>{const e=n.getProvider("app").getImmediate(),s=Br(e,CN).getImmediate();return{getId:()=>KP(s),getToken:i=>JP(s,i)}};function tA(){Nn(new ln(CN,QP,"PUBLIC")),Nn(new ln(XP,eA,"PRIVATE"))}tA();Ds(dN,Ap);Ds(dN,Ap,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="/firebase-messaging-sw.js",nA="/firebase-cloud-messaging-push-scope",EN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",rA="https://fcmregistrations.googleapis.com/v1",TN="google.c.a.c_id",iA="google.c.a.c_l",aA="google.c.a.ts",oA="google.c.a.e",Fy=1e4;var $y;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})($y||($y={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var jc;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(jc||(jc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lA(n){const e="=".repeat((4-n.length%4)%4),s=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(s),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="fcm_token_details_db",cA=5,Vy="fcm_token_object_Store";async function dA(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(im))return null;let e=null;return(await Yu(im,cA,{upgrade:async(r,i,o,c)=>{if(i<2||!r.objectStoreNames.contains(Vy))return;const u=c.objectStore(Vy),f=await u.index("fcmSenderId").get(n);if(await u.clear(),!!f){if(i===2){const h=f;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:h.createTime??Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:ci(h.vapidKey)}}}else if(i===3){const h=f;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ci(h.auth),p256dh:ci(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ci(h.vapidKey)}}}else if(i===4){const h=f;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ci(h.auth),p256dh:ci(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ci(h.vapidKey)}}}}}})).close(),await Jf(im),await Jf("fcm_vapid_details_db"),await Jf("undefined"),uA(e)?e:null}function uA(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="firebase-messaging-database",fA=1,Sc="firebase-messaging-store";let am=null;function PN(){return am||(am=Yu(hA,fA,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Sc)}}})),am}async function mA(n){const e=AN(n),r=await(await PN()).transaction(Sc).objectStore(Sc).get(e);if(r)return r;{const i=await dA(n.appConfig.senderId);if(i)return await Dp(n,i),i}}async function Dp(n,e){const s=AN(n),i=(await PN()).transaction(Sc,"readwrite");return await i.objectStore(Sc).put(e,s),await i.done,e}function AN({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Xs=new ha("messaging","Messaging",pA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(n,e){const s=await Lp(n),r=IN(e),i={method:"POST",headers:s,body:JSON.stringify(r)};let o;try{o=await(await fetch(Op(n.appConfig),i)).json()}catch(c){throw Xs.create("token-subscribe-failed",{errorInfo:c==null?void 0:c.toString()})}if(o.error){const c=o.error.message;throw Xs.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw Xs.create("token-subscribe-no-token");return o.token}async function xA(n,e){const s=await Lp(n),r=IN(e.subscriptionOptions),i={method:"PATCH",headers:s,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${Op(n.appConfig)}/${e.token}`,i)).json()}catch(c){throw Xs.create("token-update-failed",{errorInfo:c==null?void 0:c.toString()})}if(o.error){const c=o.error.message;throw Xs.create("token-update-failed",{errorInfo:c})}if(!o.token)throw Xs.create("token-update-no-token");return o.token}async function yA(n,e){const r={method:"DELETE",headers:await Lp(n)};try{const o=await(await fetch(`${Op(n.appConfig)}/${e}`,r)).json();if(o.error){const c=o.error.message;throw Xs.create("token-unsubscribe-failed",{errorInfo:c})}}catch(i){throw Xs.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Op({projectId:n}){return`${rA}/projects/${n}/registrations`}async function Lp({appConfig:n,installations:e}){const s=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${s}`})}function IN({p256dh:n,auth:e,endpoint:s,vapidKey:r}){const i={web:{endpoint:s,auth:e,p256dh:n}};return r!==EN&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=10080*60*1e3;async function vA(n){const e=await NA(n.swRegistration,n.vapidKey),s={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:ci(e.getKey("auth")),p256dh:ci(e.getKey("p256dh"))},r=await mA(n.firebaseDependencies);if(r){if(jA(r.subscriptionOptions,s))return Date.now()>=r.createTime+bA?wA(n,{token:r.token,createTime:Date.now(),subscriptionOptions:s}):r.token;try{await yA(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return By(n.firebaseDependencies,s)}else return By(n.firebaseDependencies,s)}async function wA(n,e){try{const s=await xA(n.firebaseDependencies,e),r={...e,token:s,createTime:Date.now()};return await Dp(n.firebaseDependencies,r),s}catch(s){throw s}}async function By(n,e){const r={token:await gA(n,e),createTime:Date.now(),subscriptionOptions:e};return await Dp(n,r),r.token}async function NA(n,e){const s=await n.pushManager.getSubscription();return s||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:lA(e)})}function jA(n,e){const s=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,o=e.p256dh===n.p256dh;return s&&r&&i&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return SA(e,n),kA(e,n),_A(e,n),e}function SA(n,e){if(!e.notification)return;n.notification={};const s=e.notification.title;s&&(n.notification.title=s);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const o=e.notification.icon;o&&(n.notification.icon=o)}function kA(n,e){e.data&&(n.data=e.data)}function _A(n,e){var i,o,c,u;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;n.fcmOptions={};const s=((o=e.fcmOptions)==null?void 0:o.link)??((c=e.notification)==null?void 0:c.click_action);s&&(n.fcmOptions.link=s);const r=(u=e.fcmOptions)==null?void 0:u.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(n){return typeof n=="object"&&!!n&&TN in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(n){if(!n||!n.options)throw om("App Configuration Object");if(!n.name)throw om("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:s}=n;for(const r of e)if(!s[r])throw om(r);return{appName:n.name,projectId:s.projectId,apiKey:s.apiKey,appId:s.appId,senderId:s.messagingSenderId}}function om(n){return Xs.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,s,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=EA(e);this.firebaseDependencies={app:e,appConfig:i,installations:s,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(n){try{n.swRegistration=await navigator.serviceWorker.register(sA,{scope:nA}),n.swRegistration.update().catch(()=>{}),await AA(n.swRegistration)}catch(e){throw Xs.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function AA(n){return new Promise((e,s)=>{const r=setTimeout(()=>s(new Error(`Service worker not registered after ${Fy} ms`)),Fy),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var c;((c=o.target)==null?void 0:c.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),s(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(n,e){if(!e&&!n.swRegistration&&await PA(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Xs.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=EN)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(n,e){if(!navigator)throw Xs.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Xs.create("permission-blocked");return await RA(n,e==null?void 0:e.vapidKey),await IA(n,e==null?void 0:e.serviceWorkerRegistration),vA(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(n,e,s){const r=DA(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:s[TN],message_name:s[iA],message_time:s[aA],message_device_time:Math.floor(Date.now()/1e3)})}function DA(n){switch(n){case jc.NOTIFICATION_CLICKED:return"notification_open";case jc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(n,e){const s=e.data;if(!s.isFirebaseMessaging)return;n.onMessageHandler&&s.messageType===jc.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(qy(s)):n.onMessageHandler.next(qy(s)));const r=s.data;CA(r)&&r[oA]==="1"&&await MA(n,s.messageType,r)}const Wy="@firebase/messaging",Hy="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=n=>{const e=new TA(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",s=>OA(e,s)),e},zA=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>RN(e,r)}};function UA(){Nn(new ln("messaging",LA,"PUBLIC")),Nn(new ln("messaging-internal",zA,"PRIVATE")),Ds(Wy,Hy),Ds(Wy,Hy,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(){try{await pp()}catch{return!1}return typeof window<"u"&&mp()&&gw()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(n,e){if(!navigator)throw Xs.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(n=ul()){return FA().then(e=>{if(!e)throw Xs.create("unsupported-browser")},e=>{throw Xs.create("indexed-db-unsupported")}),Br(dn(n),"messaging").getImmediate()}async function BA(n,e){return n=dn(n),RN(n,e)}function qA(n,e){return n=dn(n),$A(n,e)}UA();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,s,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Wn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=s.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||s.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i==null||i.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const s=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return s.error?null:s.token}return null}async getContext(e){const s=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:s,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="us-central1";class HA{constructor(e,s,r,i,o=Lm,c=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new WA(e,s,r,i),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(o);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Lm}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const s=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${s}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${s}.cloudfunctions.net/${e}`}}function GA(n,e,s){const r=io(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${s}`,r&&(Gu(n.emulatorOrigin+"/backends"),Ku("Functions",!0))}const Gy="@firebase/functions",Ky="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="auth-internal",JA="app-check-internal",YA="messaging-internal";function ZA(n){const e=(s,{instanceIdentifier:r})=>{const i=s.getProvider("app").getImmediate(),o=s.getProvider(KA),c=s.getProvider(YA),u=s.getProvider(JA);return new HA(i,o,c,u,r)};Nn(new ln(MN,e,"PUBLIC").setMultipleInstances(!0)),Ds(Gy,Ky,n),Ds(Gy,Ky,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(n=ul(),e=Lm){const r=Br(dn(n),MN).getImmediate({identifier:e}),i=fp("functions");return i&&QA(r,...i),r}function QA(n,e,s){GA(dn(n),e,s)}ZA();const hu={apiKey:"AIzaSyCFi4LIpQBzs9QGnn4QQdNJtCvMOi_-VF8",authDomain:"spoilme-edee0.firebaseapp.com",projectId:"spoilme-edee0",storageBucket:"spoilme-edee0.appspot.com",messagingSenderId:"744288044885",appId:"1:744288044885:web:24614b67ffe485446151dc",measurementId:"G-H9VG45QVZR"},eI=hu.apiKey&&hu.projectId&&hu.projectId!=="your-app-id";let tI=null,sI=null,nI=null,fu=null,rI=null,Wo=null;if(eI)try{Wo=bw(hu),tI=UE(Wo,"spoilme");try{sI=p4(Wo),console.log("Firebase Storage initialized")}catch(n){console.error("Firebase Storage init failed:",n)}try{nI=pP(Wo),console.log("Firebase Auth initialized")}catch(n){console.error("Firebase Auth init failed:",n)}try{fu=VA(Wo),console.log("Firebase Messaging initialized")}catch(n){console.error("Firebase Messaging init failed:",n)}try{rI=XA(Wo),console.log("Firebase Functions initialized")}catch(n){console.error("Firebase Functions init failed:",n)}console.log("Firebase initialized successfully")}catch(n){console.error("Firebase initialization error:",n)}else console.warn("Firebase keys missing or invalid. Application running in Demo Mode (Local Storage).");const Jy="spv_fcm_token";async function zm(n){var e,s,r,i,o,c,u,f;try{if(typeof window>"u")return{ok:!1,reason:"not_in_browser"};if(!(n!=null&&n.userId))return{ok:!1,reason:"missing_userId"};if(!("Notification"in window))return{ok:!1,reason:"notifications_unsupported"};if(!("serviceWorker"in navigator))return{ok:!1,reason:"sw_unsupported"};if(!fu)return{ok:!1,reason:"firebase_messaging_not_configured"};const h=((s=(e=import.meta)==null?void 0:e.env)==null?void 0:s.VITE_FIREBASE_VAPID_KEY)||((i=(r=import.meta)==null?void 0:r.env)==null?void 0:i.VITE_FCM_VAPID_KEY)||((c=(o=import.meta)==null?void 0:o.env)==null?void 0:c.VITE_VAPID_KEY)||"";if(!h)return{ok:!1,reason:"missing_vapid_key"};if(await Notification.requestPermission()!=="granted")return{ok:!1,reason:"permission_not_granted"};const v=await navigator.serviceWorker.register("/firebase-messaging-sw.js");try{const k=n.userName||"valued customer";navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"USER_DATA",name:k}):(f=(u=(await navigator.serviceWorker.ready).active)==null?void 0:u.postMessage)==null||f.call(u,{type:"USER_DATA",name:k})}catch{}const j=await BA(fu,{vapidKey:h,serviceWorkerRegistration:v});if(!j)return{ok:!1,reason:"no_token"};localStorage.getItem(Jy)!==j&&(localStorage.setItem(Jy,j),await Ge.from("users").update({fcm_token:j}).eq("id",n.userId));try{qA(fu,k=>{var L,U;const _=(L=k==null?void 0:k.notification)==null?void 0:L.title,P=(U=k==null?void 0:k.notification)==null?void 0:U.body;_&&P&&Notification.permission==="granted"&&new Notification(_,{body:P})})}catch{}return{ok:!0,token:j}}catch(h){return console.warn("ensureFcmTokenRegistered failed:",h),{ok:!1,reason:(h==null?void 0:h.message)||String(h)}}}const DN=async(n,e)=>{n&&await zm({userId:n,userName:e})};var iI={};const ON=S.createContext(void 0),Qt=(n,e=new WeakSet)=>{if(n==null)return null;if(typeof n!="object")return n;if(e.has(n))return null;if(e.add(n),n instanceof Date)return n.toISOString();if(typeof n.toDate=="function")try{return n.toDate().toISOString()}catch{return null}if(n.path&&typeof n.path=="string"&&(n.firestore||n._key))return n.path;if(Array.isArray(n))return n.map(r=>Qt(r,e));if(n.seconds!==void 0&&n.nanoseconds!==void 0&&Object.keys(n).length<=4)return new Date(n.seconds*1e3+n.nanoseconds/1e6).toISOString();const s={};for(const r in n)if(!(r.startsWith("_")||r==="auth"||r==="firestore"||r==="proactiveRefresh"||r==="providerData")&&Object.prototype.hasOwnProperty.call(n,r)){const i=Qt(n[r],e);i!=null&&(s[r]=i)}return s},Yy=n=>{if(!n)return null;const e={...n};return e.is_admin!==void 0&&(e.isAdmin=!!e.is_admin),e.isAdmin===void 0&&(e.isAdmin=!1),e.created_at&&!e.createdAt&&(e.createdAt=typeof e.created_at=="string"?e.created_at:e.created_at.toISOString?e.created_at.toISOString():String(e.created_at)),e},aI=()=>{const n=["Thandiwe Zulu","Jessica Nel","Precious Khumalo","Sarah Van Der Merwe","Amahle Dlamini","Chloe Naidoo","Nicole Botha","Zanele Mthembu","Ashley Smith","Bianca Fourie"],e=new Date,s=e.getFullYear()*100+e.getMonth(),r=c=>{let u=c+=1831565813;return u=Math.imul(u^u>>>15,u|1),u^=u+Math.imul(u^u>>>7,u|61),((u^u>>>14)>>>0)/4294967296},i=n.map((c,u)=>({id:`aff_${u}`,name:c,sales:0,rank:0,change:"same"}));i[0].sales=28561.68;let o=28561.68;for(let c=1;c<i.length;c++){const f=1500+r(s+c)*3500,h=Math.floor(r(s+c+50)*99)/100;o=Math.max(1e3,o-f);const y=Math.floor(o)+h;i[c].sales=parseFloat(y.toFixed(2))}return i.forEach((c,u)=>{c.rank=u+1;const f=r(s+u+200);c.change=f>.6?"up":f<.3?"down":"same",u===0&&(c.change="same")}),i},Zy=n=>{const e=new Date,s=new Date(e.getFullYear(),0,1),r=Math.ceil(((e.getTime()-s.getTime())/864e5+s.getDay()+1)/7);if(n){const o=[];for(let c=3;c>=1;c--){const u=(r-1-c+52)%52;o.push(Xy[u])}return[n,...o.map((c,u)=>({rank:u+2,name:c.name,prize:c.currency==="ZAR"?500:30,currency:c.currency}))]}const i=[];for(let o=3;o>=0;o--){const c=(r-1-o+52)%52;i.push(Xy[c])}return i.map((o,c)=>({rank:c+1,name:o.name,prize:o.currency==="ZAR"?500:30,currency:o.currency}))},Xy=[{name:"Anja P.",location:"Pretoria, SA",currency:"ZAR"},{name:"Sarah Jenkins",location:"Texas, USA",currency:"USD"},{name:"Thandi M.",location:"Sandton, SA",currency:"ZAR"},{name:"Sophie Clarke",location:"London, UK",currency:"USD"},{name:"Johan V.",location:"Bloemfontein, SA",currency:"ZAR"},{name:"Emily R.",location:"New York, USA",currency:"USD"},{name:"Priya N.",location:"Durban, SA",currency:"ZAR"},{name:"Isabella G.",location:"Toronto, Canada",currency:"USD"},{name:"Bianca S.",location:"Cape Town, SA",currency:"ZAR"},{name:"Madison L.",location:"Chicago, USA",currency:"USD"},{name:"Lerato K.",location:"Soweto, SA",currency:"ZAR"},{name:"Charlotte B.",location:"Manchester, UK",currency:"USD"},{name:"David W.",location:"Port Elizabeth, SA",currency:"ZAR"},{name:"Jessica H.",location:"Florida, USA",currency:"USD"},{name:"Zanele T.",location:"Polokwane, SA",currency:"ZAR"},{name:"Olivia M.",location:"Dublin, Ireland",currency:"USD"},{name:"Riaan O.",location:"Paarl, SA",currency:"ZAR"},{name:"Ashley T.",location:"California, USA",currency:"USD"},{name:"Fatima A.",location:"Lenasia, SA",currency:"ZAR"},{name:"Emma W.",location:"Sydney, Australia",currency:"USD"},{name:"Michelle D.",location:"George, SA",currency:"ZAR"},{name:"Grace P.",location:"Ohio, USA",currency:"USD"},{name:"Nandi Z.",location:"East London, SA",currency:"ZAR"},{name:"Mia S.",location:"Berlin, Germany",currency:"USD"},{name:"Chantelle V.",location:"Boksburg, SA",currency:"ZAR"},{name:"Harper C.",location:"Arizona, USA",currency:"USD"},{name:"Sipho M.",location:"Johannesburg, SA",currency:"ZAR"},{name:"Chloe F.",location:"Bristol, UK",currency:"USD"},{name:"Elize B.",location:"Stellenbosch, SA",currency:"ZAR"},{name:"Samantha K.",location:"Nevada, USA",currency:"USD"},{name:"Yusuf E.",location:"Cape Town, SA",currency:"ZAR"},{name:"Lily J.",location:"Auckland, NZ",currency:"USD"},{name:"Monique L.",location:"Centurion, SA",currency:"ZAR"},{name:"Ava R.",location:"Washington, USA",currency:"USD"},{name:"Karabo P.",location:"Rustenburg, SA",currency:"ZAR"},{name:"Zoe T.",location:"Liverpool, UK",currency:"USD"},{name:"Andre F.",location:"Nelspruit, SA",currency:"ZAR"},{name:"Elizabeth N.",location:"Virginia, USA",currency:"USD"},{name:"Ts hepo G.",location:"Midrand, SA",currency:"ZAR"},{name:"Amelia H.",location:"Edinburgh, Scotland",currency:"USD"},{name:"Marlize J.",location:"Upington, SA",currency:"ZAR"},{name:"Victoria B.",location:"Georgia, USA",currency:"USD"},{name:"Keshav R.",location:"Chatsworth, SA",currency:"ZAR"},{name:"Hannah D.",location:"Leeds, UK",currency:"USD"},{name:"Angelique S.",location:"Krugersdorp, SA",currency:"ZAR"},{name:"Natalie M.",location:"Oregon, USA",currency:"USD"},{name:"Vusi K.",location:"Pietermaritzburg, SA",currency:"ZAR"},{name:"Layla O.",location:"Dubai, UAE",currency:"USD"},{name:"Sunette W.",location:"Mossel Bay, SA",currency:"ZAR"},{name:"Ella F.",location:"Colorado, USA",currency:"USD"},{name:"Bongani N.",location:"Soweto, SA",currency:"ZAR"},{name:"Scarlet V.",location:"Melbourne, Australia",currency:"USD"}],oI=({children:n})=>{const[e,s]=S.useState([]),[r,i]=S.useState([]),[o,c]=S.useState([]),[u,f]=S.useState(()=>{try{const G=localStorage.getItem("spv_cart");return G?JSON.parse(G):[]}catch(G){return console.error("Failed to load cart",G),[]}}),[h,y]=S.useState(Ir),[v,j]=S.useState(G1),[E,k]=S.useState([]),[_,P]=S.useState(!0),[L,U]=S.useState(null),[F,J]=S.useState(null),[te,H]=S.useState([]),[M,C]=S.useState(0),[I,$]=S.useState([]),[O,V]=S.useState("local"),[A,se]=S.useState(!Ms),[fe,je]=S.useState(null),[Ie,le]=S.useState(!1),[be,we]=S.useState([]),[Z,ce]=S.useState([]),[W,ue]=S.useState("ZAR"),[B,Ce]=S.useState(null);S.useEffect(()=>{const G=localStorage.getItem("spv_active_user");if(G)try{const xe=JSON.parse(G);y(xe)}catch(xe){console.error("Error parsing stored user",xe),y(Ir)}H(aI()),$(Zy(B));const K=new Date,X=K.getFullYear()*100+K.getMonth();C(780+Math.floor((xe=>{let Ke=xe+=1831565813;return Ke=Math.imul(Ke^Ke>>>15,Ke|1),Ke^=Ke+Math.imul(Ke^Ke>>>7,Ke|61),(Ke>>>0)/4294967296})(X)*15));try{const xe=localStorage.getItem("spv_packaging_presets");xe&&we(JSON.parse(xe));const Ke=localStorage.getItem("spv_material_presets");Ke&&ce(JSON.parse(Ke))}catch(xe){console.error("Error loading presets",xe)}},[]),S.useEffect(()=>{localStorage.setItem("spv_cart",JSON.stringify(u))},[u]),S.useEffect(()=>{A&&localStorage.setItem("spv_orders",JSON.stringify(o))},[o,A]);const Pe=G=>{try{const K=Qt(G);localStorage.setItem("spv_active_user",JSON.stringify(K))}catch(K){console.error("Error saving user to localStorage",K)}},Ue=async(G,K)=>{if(!A)try{await Ge.from("users").update(Qt(K)).eq("id",G)}catch(X){console.error("Failed to update user fields in Supabase:",X)}},Qe=async(G,K,X,re="/#/notifications")=>{if(!(A||!Ms))try{await Qi("send-push",{title:K,body:X,targetGroup:"individual",targetId:G,url:re})}catch(xe){console.warn("pushToIndividual failed:",xe)}},lt=async(G,K)=>{if(!A)try{const{data:X}=await Ge.from("users").select("notifications").eq("id",G).maybeSingle(),re=X&&X.notifications||[],xe=[K,...re];await Ge.from("users").update({notifications:xe}).eq("id",G)}catch(X){console.error("Failed to append notification to user:",X)}},St=async G=>{const K={...h,...G};y(K),Pe(K),!A&&h.id&&h.id!=="guest"&&await Ue(h.id,Qt(K))},ye=async()=>{try{if(typeof window>"u")return{ok:!1,message:"Not in browser"};const G=localStorage.getItem("spv_dev_admin");if(!G)return{ok:!1,message:"No local dev admin found"};const K=JSON.parse(G),X={...Ir,...K,id:K.id||"admin_local",email:K.email};return y(X),Pe(X),console.log("signInWithLocalDevAdmin: signed in as local dev admin",X.email),{ok:!0,message:"Signed in as local dev admin"}}catch(G){return console.warn("signInWithLocalDevAdmin failed:",G),{ok:!1,message:(G==null?void 0:G.message)||String(G)}}},Xe=()=>je(null);S.useEffect(()=>{if(A||!h.id||h.id==="guest"||!Ms)return;let G=!1;(async()=>{try{const{data:X,error:re}=await Ge.from("users").select("*").eq("id",h.id).maybeSingle();if(!G&&!re&&X){const xe={...h,...X};y(xe),Pe(xe)}}catch(X){console.warn("Failed to fetch user from Supabase:",X)}})();const K=Ge.channel(`users:${h.id}`).on("postgres_changes",{event:"*",schema:"public",table:"users",filter:`id=eq.${h.id}`},X=>{const re=X.new;if(re){const xe={...h,...re};y(xe),Pe(xe)}}).subscribe();return()=>{G=!0;try{K.unsubscribe()}catch{}}},[h.id,A]),S.useEffect(()=>{A||!Ms||!(h!=null&&h.id)||h.id==="guest"||DN(h.id,h.name||(h.firstName?`${h.firstName} ${h.lastName||""}`.trim():void 0))},[h.id,A]);const nt=G=>{we(K=>{const re=K.find(xe=>xe.name===G.name)?K.map(xe=>xe.name===G.name?G:xe):[...K,G];return localStorage.setItem("spv_packaging_presets",JSON.stringify(re)),re})},Ut=G=>{we(K=>{const X=K.filter(re=>re.name!==G);return localStorage.setItem("spv_packaging_presets",JSON.stringify(X)),X})},oe=G=>{ce(K=>{const re=K.find(xe=>xe.name===G.name)?K.map(xe=>xe.name===G.name?G:xe):[...K,G];return localStorage.setItem("spv_material_presets",JSON.stringify(re)),re})},Me=G=>{ce(K=>{const X=K.filter(re=>re.name!==G);return localStorage.setItem("spv_material_presets",JSON.stringify(X)),X})},Be=async(G,K)=>{var re;const X=G.trim().toLowerCase();je(null);try{const{data:xe,error:Ke}=await Ge.auth.signInWithPassword({email:X,password:K});if(Ke)return console.warn("Supabase signInWithPassword failed:",Ke.message),je(Ke.message||"Sign-in failed."),!1;if(!(xe!=null&&xe.user))return je("Authentication failed - no user data returned."),!1;const ct=xe.user.id,{data:he,error:ge}=await Ge.from("users").select("*").eq("id",ct).single();if(ge){console.warn("Failed to fetch user profile:",ge);const kt={...Ir,id:ct,email:X,name:((re=xe.user.user_metadata)==null?void 0:re.full_name)||""};try{await Ge.from("users").upsert([Qt(kt)])}catch(gt){console.warn("Failed to create basic user profile:",gt)}let dt=Yy(kt);return X==="spoilmevintagediy@gmail.com"&&(dt.isAdmin=!0),dt.isActive===!1?(je("Account is deactivated."),!1):(y(dt),Pe(dt),Kr(dt),!0)}let Le=Yy({...he,id:ct});return X==="spoilmevintagediy@gmail.com"&&(Le.isAdmin=!0),Le.isActive===!1?(je("Account is deactivated."),!1):(y(Le),Pe(Le),Kr(Le),!0)}catch(xe){return console.warn("Login error:",xe),je((xe==null?void 0:xe.message)||String(xe)),!1}},ke=async G=>{const K={...Ir,...G,id:`user_${Date.now()}`,affiliateCode:`Spoilme-${Date.now().toString().slice(-6)}`,affiliateStats:G.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1}};try{if(!A){if(G.password&&G.email){const{data:X,error:re}=await Ge.auth.signUp({email:G.email,password:G.password});re?console.warn("Supabase signUp failed:",re.message):X!=null&&X.user&&(K.id=X.user.id)}await Ge.from("users").upsert([Qt(K)])}return y(K),Pe(K),!0}catch(X){return console.error("Registration Failed",X),y(K),Pe(K),!0}},We=()=>{y(Ir),localStorage.removeItem("spv_active_user");try{Ge.auth.signOut()}catch{}},Nt=async G=>{const K={...h,shippingAddress:G};if(y(K),Pe(K),!A&&h.id!=="guest")try{await Ge.from("users").update({shippingAddress:G}).eq("id",h.id)}catch(X){console.error("Error saving address to DB",X)}},ve=async()=>{if(A){alert("Cannot seed users in Demo Mode.");return}const G=[{...Ir,id:"u1",name:"Elize Test 1",email:"eliz@gmail.com",password:"test",isMember:!1,membershipTier:"none",affiliateCode:"Spoilme-ELIZ01",affiliateStats:{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...Ir,id:"u2",name:"Anna Test 2",email:"anna@gmail.com",password:"test",isMember:!0,membershipTier:"basic",loyaltyPoints:100,affiliateCode:"Spoilme-ANNA02",affiliateStats:{status:"pending",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...Ir,id:"u3",name:"Fay Test 3",email:"fay@gmail.com",password:"test",isMember:!0,membershipTier:"premium",loyaltyPoints:500,affiliateCode:"Spoilme-FAY003",affiliateStats:{status:"approved",totalSalesCount:45,totalSalesValue:4500,commissionRate:10,balance:450,recurringBalance:50}},{...Ir,id:"u4",name:"Debs Test 4",email:"debs@gmail.com",password:"test",isMember:!0,membershipTier:"deluxe",loyaltyPoints:1e3,affiliateCode:"Spoilme-DEBS04",affiliateStats:{status:"approved",totalSalesCount:150,totalSalesValue:15e3,commissionRate:15,balance:2250,recurringBalance:300}}];try{for(const K of G)try{const{error:X}=await Ge.from("users").upsert([Qt(K)]);if(X)throw X}catch(X){console.error("Failed to upsert test user into Supabase:",X)}alert("Test Users Created!")}catch(K){console.error("Error seeding users:",K)}};S.useEffect(()=>{if(console.log("Loading products, isDemoMode:",A,"isSupabaseConfigured:",Ms),console.log("Loading products, isDemoMode:",A,"isSupabaseConfigured:",Ms),A||!Ms){V(A?"demo":"local");const K=localStorage.getItem("spv_products"),re=(K?JSON.parse(K):H1).filter(he=>he.status==="published");s(re);const xe=localStorage.getItem("spv_categories");i(xe?JSON.parse(xe):g0);const Ke=localStorage.getItem("spv_vouchers");Ke&&k(JSON.parse(Ke));const ct=localStorage.getItem("spv_orders");c(ct?JSON.parse(ct):[]),P(!1);return}const G=setTimeout(()=>{_&&(U("Connection timed out"),P(!1))},5e3);try{const K=new Map,X=async he=>{if(!he)return null;if(typeof he=="string"){if(he.startsWith("http")||he.startsWith("data:")||he.startsWith("blob:")||he.startsWith("/"))return he;if(he.startsWith("gs://"))try{const ge=he.match(/^gs:\/\/([^/]+)\/(.+)$/);if(ge){const Le=ge[1],kt=ge[2],dt=`https://firebasestorage.googleapis.com/v0/b/${Le}/o/${encodeURIComponent(kt)}?alt=media`;return K.set(he,dt),dt}}catch(ge){return console.error("Failed to convert gs:// URL to a public URL",he,ge),null}if(!he.startsWith("http"))try{if(K.has(he))return K.get(he);const ge=["public","products","images","spoilme"];for(const Le of ge)try{const{data:kt}=Ge.storage.from(Le).getPublicUrl(he);if(kt&&kt.publicUrl)return K.set(he,kt.publicUrl),kt.publicUrl}catch{}}catch{}return he}else if(typeof he=="object"&&(he.fullPath||he.path))try{const ge=he.fullPath||he.path,Le=ge+"::path";if(K.has(Le))return K.get(Le);const kt=["public","products","images","spoilme"];for(const dt of kt)try{const{data:gt}=Ge.storage.from(dt).getPublicUrl(ge);if(gt&&gt.publicUrl)return K.set(Le,gt.publicUrl),gt.publicUrl}catch{}}catch(ge){return console.error("Failed to convert storage object path to public URL",he,ge),null}return null},re=he=>{if(typeof he!="string")return he;const ge=he.trim();if(!ge||!(ge.startsWith("{")&&ge.endsWith("}")||ge.startsWith("[")&&ge.endsWith("]")))return he;try{return JSON.parse(ge)}catch{return he}},xe=(...he)=>{for(const ge of he)if(ge!=null&&(typeof ge!="string"||ge.trim()!==""))return ge},Ke=async he=>{var _e,$e;const ge={};Object.entries(he||{}).forEach(([He,xt])=>{const Yt=He.replace(/_([a-z])/g,(gr,Jr)=>Jr.toUpperCase());ge[Yt]=xt}),ge.options=re(ge.options);const Le=ge.options&&typeof ge.options=="object"&&!Array.isArray(ge.options)?ge.options:{};ge.id=xe(ge.id,he==null?void 0:he.id),ge.code=xe(ge.code,ge.sku,he==null?void 0:he.sku,he==null?void 0:he.code,Le==null?void 0:Le.sku,Le==null?void 0:Le.code);const kt=xe(ge.priceUSD,ge.priceUsd,he==null?void 0:he.price_usd,he==null?void 0:he.priceUSD,Le==null?void 0:Le.priceUSD,Le==null?void 0:Le.priceUsd);kt!==void 0&&(ge.priceUSD=typeof kt=="number"?kt:parseFloat(String(kt))||0);const dt=xe(ge.compareAtPriceUSD,ge.compareAtPriceUsd,he==null?void 0:he.compare_at_price_usd,he==null?void 0:he.compareAtPriceUSD,Le==null?void 0:Le.compareAtPriceUSD,Le==null?void 0:Le.compareAtPriceUsd);dt!==void 0&&(ge.compareAtPriceUSD=typeof dt=="number"?dt:parseFloat(String(dt))||0);const gt=xe(ge.memberPriceUSD,ge.memberPriceUsd,he==null?void 0:he.member_price_usd,he==null?void 0:he.memberPriceUSD,Le==null?void 0:Le.memberPriceUSD,Le==null?void 0:Le.memberPriceUsd);if(gt!==void 0&&(ge.memberPriceUSD=typeof gt=="number"?gt:parseFloat(String(gt))||0),!ge.type&&(Le!=null&&Le.type)&&(ge.type=Le.type),(!ge.colors||Array.isArray(ge.colors)&&ge.colors.length===0)&&(Le!=null&&Le.colors)&&(ge.colors=Le.colors),(!ge.tags||Array.isArray(ge.tags)&&ge.tags.length===0)&&(Le!=null&&Le.tags)&&(ge.tags=Le.tags),!ge.material&&(Le!=null&&Le.material)&&(ge.material=Le.material),!ge.description&&(Le!=null&&Le.description)&&(ge.description=Le.description),!ge.name&&(Le!=null&&Le.name)&&(ge.name=Le.name),!ge.createdAt&&(he!=null&&he.created_at))try{ge.createdAt=typeof he.created_at=="string"?he.created_at:(_e=he.created_at)!=null&&_e.toISOString?he.created_at.toISOString():String(he.created_at)}catch{ge.createdAt=String(he.created_at)}if(!ge.updatedAt&&(he!=null&&he.updated_at))try{ge.updatedAt=typeof he.updated_at=="string"?he.updated_at:($e=he.updated_at)!=null&&$e.toISOString?he.updated_at.toISOString():String(he.updated_at)}catch{ge.updatedAt=String(he.updated_at)}const Jt=re(ge.images);ge.images=Array.isArray(Jt)?Jt:Jt?[Jt]:[];const _t=re(ge.tags);ge.tags=Array.isArray(_t)?_t:_t?[_t]:[];const R=re(ge.colors);ge.colors=Array.isArray(R)?R:R?[R]:[];const ne=re(ge.seoKeywords);ge.seoKeywords=Array.isArray(ne)?ne:ne?[ne]:[];const Fe=re(ge.reviews);ge.reviews=Array.isArray(Fe)?Fe:Fe?[Fe]:[];try{if(ge.images&&Array.isArray(ge.images)){const He=await Promise.all(ge.images.map(async xt=>await X(xt)));ge.images=He.filter(Boolean)}}catch(He){console.error("Failed resolving product images for",ge.id||(he==null?void 0:he.id),He)}return ge},ct=async()=>{try{const{data:he,error:ge}=await Ge.from("products").select("*").eq("status","published").order("created_at",{ascending:!1});if(console.log(" SUPABASE ERROR:",ge),console.log(" SUPABASE DATA:",he),!ge&&he){const dt=await Promise.all(he.map(async gt=>await Ke(gt)));if(console.log("Loaded products from Supabase:",dt.length),V("supabase"),dt.length===0)try{const{data:gt}=await Ge.from("products").select("*").limit(5);console.warn("No published products found  sample rows from products table:",gt)}catch(gt){console.warn("Failed to fetch sample products for debug:",gt)}s(dt)}else if(ge&&String((ge==null?void 0:ge.message)||(ge==null?void 0:ge.code)||"").toLowerCase().includes("permission"))try{const gt=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?`http://${window.location.hostname}:3001/api`:iI.REACT_APP_API_URL||"/api",Jt=await fetch(`${gt}/products?limit=100`);if(Jt.ok){const _t=await Jt.json(),R=Array.isArray(_t.products)?_t.products:[],ne=await Promise.all(R.map(async Fe=>await Ke(Fe)));console.log("Loaded products from server endpoint:",ne.length),V("supabase"),s(ne)}}catch(dt){console.warn("Fallback to /api/products failed:",dt)}const{data:Le,error:kt}=await Ge.from("categories").select("*").order("created_at",{ascending:!1});if(!kt&&Le&&Le.length>0){const dt=await Promise.all(Le.map(async gt=>{const Jt={};Object.entries(gt).forEach(([_t,R])=>{const ne=_t.replace(/_([a-z])/g,(Fe,_e)=>_e.toUpperCase());Jt[ne]=R});try{if(Jt.image){const _t=await X(Jt.image);_t&&(Jt.image=_t)}}catch{}return Jt}));i(dt)}else i(g0);if(h!=null&&h.isAdmin){const{data:dt}=await Ge.from("orders").select("*").order("created_at",{ascending:!1});dt&&c(dt)}else if(h!=null&&h.email){const{data:dt}=await Ge.from("orders").select("*").eq("customer_email",h.email).order("created_at",{ascending:!1});dt&&c(dt)}clearTimeout(G),P(!1)}catch(he){console.warn("Supabase fetch failed, falling back to Firestore where available:",he)}};if(Ms){ct();const he=Ge.channel("public:products").on("postgres_changes",{event:"*",schema:"public",table:"products"},()=>ct()).subscribe(),ge=Ge.channel("public:categories").on("postgres_changes",{event:"*",schema:"public",table:"categories"},()=>ct()).subscribe(),Le=Ge.channel("public:orders").on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>ct()).subscribe();return()=>{clearTimeout(G);try{he.unsubscribe()}catch{}try{ge.unsubscribe()}catch{}try{Le.unsubscribe()}catch{}}}}catch(K){console.log("Try-catch error in products useEffect:",K),clearTimeout(G),P(!1)}},[A,h.isAdmin,h.email]);const Y=(G,K={})=>{f(X=>{const re=X.findIndex(he=>he.id===G.id&&he.selectedSize===K.selectedSize&&he.selectedMaterial===K.selectedMaterial&&he.selectedChainStyle===K.selectedChainStyle&&he.selectedChainLength===K.selectedChainLength),xe=re>-1?X[re]:null,Ke=xe?xe.quantity:0;let ct=G.stock;if(G.type==="Ring"&&K.selectedSize&&G.ringStock&&(ct=G.ringStock[K.selectedSize]||0),Ke>=ct)return alert(`Sorry, you can't add more of this item. We only have ${ct} in stock.`),X;if(re>-1){const he=[...X];return he[re]={...he[re],quantity:he[re].quantity+1},he}return[...X,{...G,quantity:1,...K}]})},Se=(G,K={})=>{f(X=>X.filter(re=>!(re.id===G&&re.selectedSize===K.selectedSize&&re.selectedMaterial===K.selectedMaterial&&re.selectedChainStyle===K.selectedChainStyle&&re.selectedChainLength===K.selectedChainLength)))},jt=(G,K,X={})=>{if(K<=0){Se(G,X);return}const re=e.find(ct=>ct.id===G);if(!re)return;let xe=re.stock;re.type==="Ring"&&X.selectedSize&&re.ringStock&&(xe=re.ringStock[X.selectedSize]||0);const Ke=Math.min(K,xe);K>xe&&alert(`Sorry, we only have ${xe} of this item in stock. Quantity has been adjusted.`),f(ct=>ct.map(he=>he.id===G&&he.selectedSize===X.selectedSize&&he.selectedMaterial===X.selectedMaterial&&he.selectedChainStyle===X.selectedChainStyle&&he.selectedChainLength===X.selectedChainLength?{...he,quantity:Ke}:he))},mt=()=>{f([]),J(null)},Wt=G=>{y(K=>{const re=K.wishlist.includes(G)?K.wishlist.filter(Ke=>Ke!==G):[...K.wishlist,G],xe={...K,wishlist:re};return Pe(xe),xe})},$t=async G=>{if(!h.id||h.id==="guest"){console.error("Cannot apply for affiliate as guest user directly.");return}const K={userId:h.id,status:"pending",appliedAt:new Date().toISOString(),autoApproveAt:new Date(Date.now()+3600*1e3),userEmail:h.email,userName:`${G.name} ${G.surname}`,gender:G.gender,reason:G.reason,socials:G.socials};if(!A)try{await Ge.from("affiliate_applications").insert([K])}catch(xe){throw console.error("Error submitting affiliate application to Supabase:",xe),xe}const X={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},re={...h,name:`${G.name} ${G.surname}`,birthday:G.dob,notifications:[X,...h.notifications],affiliateStats:{...h.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1},status:"pending",gender:G.gender,joinReason:`${G.reason} | Socials: ${G.socials}`}};y(re),Pe(re),!A&&h.id!=="guest"&&await Ue(h.id,Qt(re))},ks=async(G,K)=>{if(A)return;const X={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Welcome to the Partnership Program!",message:`Welcome to Spoil Me Vintage Partnership Program! We are thrilled to have you on the team.${K?` Note from admin: ${K}`:""}`,date:new Date().toISOString(),isRead:!1};try{const{data:re}=await Ge.from("users").select("notifications").eq("id",G).maybeSingle(),xe=re&&re.notifications||[];await Ge.from("users").update({affiliateStats:{status:"approved",commissionRate:10,adminNote:K||""},notifications:[X,...xe]}).eq("id",G),await Qe(G,X.title,X.message,"/#/affiliate-program")}catch(re){console.error("approveAffiliate failed:",re)}},ds=async(G,K)=>{if(A)return;const X={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Partnership Application Update",message:`We regret to inform you that your application has been declined.${K?` Note: ${K}`:""}`,date:new Date().toISOString(),isRead:!1};try{const{data:re}=await Ge.from("users").select("notifications").eq("id",G).maybeSingle(),xe=re&&re.notifications||[];await Ge.from("users").update({affiliateStats:{status:"rejected",adminNote:K||""},notifications:[X,...xe]}).eq("id",G),await Qe(G,X.title,X.message,"/#/notifications")}catch(re){console.error("rejectAffiliate failed:",re)}},De=async(G,K)=>{if(A)return;const X={id:`aff_msg_${Date.now()}`,type:"affiliate_msg",title:"Partnership Update",message:K,date:new Date().toISOString(),isRead:!1};await lt(G,X),await Qe(G,X.title,X.message,"/#/notifications")},ps=async(G,K)=>{A||await Ue(G,{affiliateStats:{...h.affiliateStats||{},commissionRate:K}})},us=async(G,K)=>{A||await Ue(G,{affiliateStats:{...h.affiliateStats||{},parentId:K}})},Ws=async()=>{const G={...h,affiliateStats:{...h.affiliateStats,hasContentAccess:!0}};y(G),Pe(G),!A&&h.id!=="guest"&&await Ue(h.id,Qt(G))},fr=async()=>{const G={...h,affiliateStats:{...h.affiliateStats,isElite:!0}};y(G),Pe(G),!A&&h.id!=="guest"&&await Ue(h.id,Qt(G))},Os=async(G,K)=>{var ct;if(!A&&!Ge)return{success:!1,message:"Database not ready"};let X=null;if(A)if(h.affiliateCode===G)X=h;else return{success:!1,message:"In Demo Mode, only your own code works."};else{const{data:he,error:ge}=await Ge.from("users").select("*").eq("affiliateCode",G).limit(1).maybeSingle();he&&!ge&&(X=he)}if(!X)return{success:!1,message:"Affiliate code not found."};if(((ct=X.affiliateStats)==null?void 0:ct.status)!=="approved"&&!A)return{success:!1,message:"Affiliate not approved."};const re=X.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0},xe=K*re.commissionRate/100,Ke={...re,totalSalesCount:re.totalSalesCount+1,totalSalesValue:re.totalSalesValue+K,balance:re.balance+xe};if(Ke.totalSalesCount>=500?Ke.commissionRate=20:Ke.totalSalesCount>=100?Ke.commissionRate=15:Ke.totalSalesCount>=50&&(Ke.commissionRate=11),A)y({...X,affiliateStats:Ke});else{const he={id:`sale_${Date.now()}`,type:"system",title:"New Partnership Sale!",message:`You earned R${xe.toFixed(2)} commission!`,date:new Date().toISOString(),isRead:!1};try{await Ge.from("users").update({affiliateStats:Ke,notifications:[he,...X.notifications||[]]}).eq("id",X.id)}catch(ge){console.error("Failed to update affiliate user after sale:",ge)}}return{success:!0,message:`Sale simulated! Added R${xe.toFixed(2)}.`}},Ls=async(G,K)=>{if(A){if(h.id===G){const X={...h,loyaltyPoints:h.loyaltyPoints+K};y(X),Pe(X)}return}if(h.id===G){const X={...h,loyaltyPoints:h.loyaltyPoints+K};y(X),Pe(X),await Ge.from("users").update({loyaltyPoints:X.loyaltyPoints}).eq("id",G)}else try{const{data:X}=await Ge.from("users").select("loyaltyPoints").eq("id",G).maybeSingle(),re=(X&&X.loyaltyPoints||0)+K;await Ge.from("users").update({loyaltyPoints:re}).eq("id",G)}catch(X){console.error("adminAdjustPoints failed:",X)}},Dn=async()=>{if(A)return[];try{const{data:G,error:K}=await Ge.from("users").select("*");if(K)throw K;return(G||[]).map(X=>Qt(X))}catch(G){return console.error("getAllUsers failed:",G),[]}},On=async G=>{const K=Qt(G),X=[K,...e];if(s(X),!A&&Ms)try{console.log("DEBUG: Final Product Data to Firestore (Add):",JSON.stringify(K,null,2));try{const{error:re}=await Ge.from("products").upsert([K]);if(re)throw re;U(null)}catch(re){console.warn("Supabase addProduct failed, saving to local storage instead:",re);try{const xe=JSON.parse(localStorage.getItem("spv_products")||"[]");localStorage.setItem("spv_products",JSON.stringify([K,...xe]))}catch{}}U(null)}catch(re){console.error("CRITICAL FIRESTORE ERROR (addProduct):",re,"Product:",K);try{localStorage.setItem("spv_products",JSON.stringify(X)),U(`Failed to add product: ${re.code||"Unknown Error"}. Changes saved locally.`),console.warn("Firestore write failed  product saved to localStorage instead.")}catch(xe){throw console.error("Fallback localStorage save also failed:",xe),new Error(`Critical Save Failure. Firestore and LocalStorage failed. (Details: ${xe.message})`)}throw new Error(re.message||"Failed to add product.")}else try{localStorage.setItem("spv_products",JSON.stringify(X))}catch(re){throw console.error("Failed to save products to localStorage on addProduct:",re),new Error("Failed to add product in Demo Mode: LocalStorage error.")}},gs=async G=>{const K=Qt(G),X=e.map(re=>re.id===K.id?K:re);if(s(X),!A&&Ms)try{console.log("DEBUG: Final Product Data to Firestore (Update):",JSON.stringify(K,null,2));try{const{error:re}=await Ge.from("products").update(K).eq("id",K.id);if(re)throw re;U(null)}catch(re){console.warn("Supabase updateProduct failed, saving to local storage instead:",re);try{const Ke=JSON.parse(localStorage.getItem("spv_products")||"[]").map(ct=>ct.id===K.id?K:ct);localStorage.setItem("spv_products",JSON.stringify(Ke))}catch{}}}catch(re){console.error("CRITICAL FIRESTORE ERROR (updateProduct):",re,"Product:",K);try{localStorage.setItem("spv_products",JSON.stringify(X)),U(`Failed to update product: ${re.code||"Unknown Error"}. Changes saved locally.`),console.warn("Firestore write failed  update saved to localStorage instead.")}catch(xe){throw console.error("Fallback localStorage save also failed:",xe),new Error(`Critical Save Failure. Firestore and LocalStorage failed. (Details: ${xe.message})`)}throw new Error(re.message||"Failed to update product.")}else try{localStorage.setItem("spv_products",JSON.stringify(X))}catch(re){throw console.error("Failed to save products to localStorage on updateProduct:",re),new Error("Failed to update product in Demo Mode: LocalStorage error.")}},zs=async G=>{const K=e.filter(X=>X.id!==G);if(s(K),!A&&Ms)try{console.log("DEBUG: Final Product Delete to Supabase/Firestore:",G);try{const{error:X}=await Ge.from("products").delete().eq("id",G);if(X)throw X}catch(X){console.warn("Supabase deleteProduct failed, removing from local storage instead:",X);try{const re=JSON.parse(localStorage.getItem("spv_products")||"[]");localStorage.setItem("spv_products",JSON.stringify(re.filter(xe=>xe.id!==G)))}catch{}}U(null)}catch(X){console.error("CRITICAL FIRESTORE ERROR (deleteProduct):",X,"productId:",G);try{localStorage.setItem("spv_products",JSON.stringify(K)),U(`Failed to delete product: ${X.code||"Unknown Error"}. Change saved locally.`),console.warn("Firestore delete failed  delete reflected locally.")}catch(re){throw console.error("Fallback localStorage save also failed:",re),new Error(`Critical Delete Failure. Firestore and LocalStorage failed. (Details: ${re.message})`)}throw new Error(X.message||"Failed to delete product.")}else try{localStorage.setItem("spv_products",JSON.stringify(K))}catch(X){console.error("Failed to save products to localStorage on deleteProduct:",X)}},Vt=async G=>{const K=Qt(G);if(c(X=>[K,...X]),!A&&Ms)try{const{error:X}=await Ge.from("orders").upsert([K]);if(X)throw X}catch(X){console.error("Failed to addOrder to Supabase, saving to local storage instead:",X);try{const re=JSON.parse(localStorage.getItem("spv_orders")||"[]");localStorage.setItem("spv_orders",JSON.stringify([K,...re]))}catch{}}},_s=async G=>{const K=Qt(G);if(c(X=>X.map(re=>re.id===K.id?K:re)),!A&&Ms)try{const{error:X}=await Ge.from("orders").update(K).eq("id",K.id);if(X)throw X}catch(X){console.error("Failed to updateOrder in Supabase, saving to local storage instead:",X);try{const xe=JSON.parse(localStorage.getItem("spv_orders")||"[]").map(Ke=>Ke.id===K.id?K:Ke);localStorage.setItem("spv_orders",JSON.stringify(xe))}catch{}}},ss=async G=>{if(c(K=>K.filter(X=>X.id!==G)),!A&&Ms)try{const{error:K}=await Ge.from("orders").delete().eq("id",G);if(K)throw K}catch(K){console.error("Failed to deleteOrder in Supabase, removing from local storage instead:",K);try{const X=JSON.parse(localStorage.getItem("spv_orders")||"[]");localStorage.setItem("spv_orders",JSON.stringify(X.filter(re=>re.id!==G)))}catch{}}},Ne=async G=>{const K=Qt(G);if(i(X=>[...X,K]),!A&&Ms)try{const{error:X}=await Ge.from("categories").upsert([K]);if(X)throw X}catch(X){console.error("Supabase addCategory error, saving to local storage instead:",X);try{const re=JSON.parse(localStorage.getItem("spv_categories")||"[]");localStorage.setItem("spv_categories",JSON.stringify([K,...re]))}catch{}}else localStorage.setItem("spv_categories",JSON.stringify([...r,K]))},Je=async G=>{const K=Qt(G);if(i(X=>X.map(re=>re.id===K.id?K:re)),!A&&Ms)try{const{error:X}=await Ge.from("categories").update(K).eq("id",K.id);if(X)throw X}catch(X){console.error("Supabase updateCategory error, saving to local storage instead:",X);try{const xe=JSON.parse(localStorage.getItem("spv_categories")||"[]").map(Ke=>Ke.id===K.id?K:Ke);localStorage.setItem("spv_categories",JSON.stringify(xe))}catch{}}else{const X=r.map(re=>re.id===K.id?K:re);localStorage.setItem("spv_categories",JSON.stringify(X))}},Et=async G=>{if(i(K=>K.filter(X=>X.id!==G)),!A&&Ms)try{const{error:K}=await Ge.from("categories").delete().eq("id",G);if(K)throw K}catch(K){console.error("Supabase deleteCategory error, removing from local storage instead:",K);try{const X=JSON.parse(localStorage.getItem("spv_categories")||"[]");localStorage.setItem("spv_categories",JSON.stringify(X.filter(re=>re.id!==G)))}catch{}}else{const K=r.filter(X=>X.id!==G);localStorage.setItem("spv_categories",JSON.stringify(K))}},Tt=async G=>{const K=Qt(G);i(K),A&&localStorage.setItem("spv_categories",JSON.stringify(K))},Rt=G=>j(K=>[...K,G]),Ot=G=>{const K=Qt(G);k(re=>[...re,K]);const X=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify([...X,K]))},zt=G=>{k(X=>X.filter(re=>re.code!==G));const K=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify(K.filter(X=>X.code!==G)))},Bt=G=>{const K=E.find(X=>X.code===G);return K?(J(K),!0):!1},Yn=()=>{localStorage.clear(),window.location.reload()},un=()=>u.reduce((G,K)=>G+(K.price+(K.selectedMaterialModifier||0))*K.quantity,0),hn=async G=>{var he;if(!h.email)throw new Error("User must be logged in to checkout.");const K={...G,id:`ord_${Date.now()}`,orderNumber:`#SMV-${Date.now().toString().slice(-6)}`,date:new Date().toISOString(),customerName:h.name,customerEmail:h.email,status:"Pending"};await Vt(K),h.affiliateCode&&h.affiliateCode!=="none"&&await wi(u,K.id,h.affiliateCode);const X=[];for(const ge of u)(he=ge.tags)!=null&&he.includes("Voucher")||X.push({id:`notif_${Date.now()}_${ge.id}`,type:"review_request",title:"How was your purchase?",message:`Review ${ge.name} to earn 100 Points!`,productId:ge.id,productName:ge.name,date:new Date().toISOString(),isRead:!1});let re=0;const xe=un();h!=null&&h.storeCredit&&h.storeCredit>0&&h.creditCurrency===W&&(re=Math.min(xe,h.storeCredit));const Ke=Math.floor(W==="ZAR"?G.total/10:G.total/3),ct={...h,loyaltyPoints:Math.max(0,h.loyaltyPoints+Ke-(G.pointsToRedeem||0)),storeCredit:Math.max(0,(h.storeCredit||0)-re),notifications:[...X,...h.notifications]};return y(ct),Pe(ct),!A&&h.id!=="guest"&&await Ue(h.id,Qt(ct)),K},mr=async(G,K)=>{const X="GV-"+Math.random().toString(36).substr(2,9).toUpperCase(),re={code:X,discountType:"fixed",value:G,minSpend:G,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};Ot(re);const xe={id:`gift_${Date.now()}`,type:"gift_ready",title:"Gift Ready",message:"Your voucher is ready.",date:new Date().toISOString(),isRead:!1,voucherData:{code:X,amount:G,meta:K}},Ke={...h,notifications:[xe,...h.notifications]};y(Ke),Pe(Ke),!A&&h.id!=="guest"&&await Ue(h.id,Qt(Ke))},Us=async(G,K,X,re)=>{if(h.id==="guest")return;const xe=e.find(ct=>ct.id===G);if(xe){const ct={id:`rev_${Date.now()}`,userName:h.name,location:"Verified Buyer",content:X,rating:K,date:new Date().toLocaleDateString()};await gs({...xe,reviews:[ct,...xe.reviews||[]]})}const Ke={...h,loyaltyPoints:h.loyaltyPoints+100,notifications:h.notifications.filter(ct=>ct.id!==re)};y(Ke),Pe(Ke),!A&&h.id!=="guest"&&await Ue(h.id,Qt(Ke))},vi=async G=>{const K={...h,loyaltyPoints:h.loyaltyPoints+50};y(K),Pe(K),!A&&h.id!=="guest"&&await Ue(h.id,{loyaltyPoints:K.loyaltyPoints})},Wr=async(G,K)=>{if(h.id==="guest")return;const X=h.socialRewards||{};if(X[G])return;const re={...h,loyaltyPoints:h.loyaltyPoints+100,socialRewards:{...X,[G]:!0},socialHandles:{...h.socialHandles,[G]:K}};y(re),Pe(re),!A&&h.id!=="guest"&&await Ue(h.id,Qt(re))},Hr=(G,K,X="system")=>{const re={id:`sys_${Date.now()}`,type:X,title:G,message:K,date:new Date().toISOString(),isRead:!1},xe={...h,notifications:[re,...h.notifications]};y(xe),Pe(xe)},en=()=>{try{const G=JSON.stringify(e);return G.length>0?{status:"success",details:`Serialization OK. Size: ${(G.length/1024).toFixed(2)} KB`}:{status:"warning",details:"Empty products."}}catch(G){return{status:"error",details:`Error: ${G.message}`}}},Gr=()=>{ue(G=>G==="ZAR"?"USD":"ZAR")};S.useEffect(()=>{$(Zy(B))},[B]);const wi=async(G,K,X)=>{var re,xe,Ke,ct;if(A){if(h.affiliateCode===X){const he=h.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,weeklyMilestones:{membershipsSold:0,salesValue:0,vaultItemsSold:0,weekStart:""}},ge=G.reduce((kt,dt)=>kt+(W==="ZAR"?dt.price:dt.priceUSD)*dt.quantity,0),Le={...he,totalSalesCount:he.totalSalesCount+G.length,totalSalesValue:he.totalSalesValue+ge,balance:he.balance+ge*(he.commissionRate/100)};y({...h,affiliateStats:Le}),Pe({...h,affiliateStats:Le})}return}try{const{data:he}=await Ge.from("users").select("*").eq("affiliateCode",X).limit(1).maybeSingle();if(!he||((re=he.affiliateStats)==null?void 0:re.status)!=="approved")return;const ge=he.affiliateStats,Le=G.filter(_e=>!_e.vaultItem),kt=G.filter(_e=>_e.vaultItem);let dt=0,gt=0,Jt=0;const _t=[];for(const _e of Le){const $e=W==="ZAR"?_e.price:_e.priceUSD,He=ge.commissionRate/100,xt=$e*_e.quantity*He;dt+=xt,_t.push({id:`comm_${Date.now()}_${_e.id}`,affiliateId:he.id,orderId:K,itemId:_e.id,itemName:_e.name,itemType:"standard",basePrice:$e,commissionRate:ge.commissionRate,commissionAmount:xt,currency:W,date:new Date().toISOString()})}for(const _e of kt){const $e=W==="ZAR"?_e.price:_e.priceUSD,He=$e*_e.quantity*.01;gt+=He,Jt+=_e.quantity,_t.push({id:`comm_${Date.now()}_${_e.id}`,affiliateId:he.id,orderId:K,itemId:_e.id,itemName:_e.name,itemType:"vault",basePrice:$e,commissionRate:1,commissionAmount:He,currency:W,date:new Date().toISOString()})}const R=dt+gt,ne={...ge,totalSalesCount:ge.totalSalesCount+G.length,totalSalesValue:ge.totalSalesValue+G.reduce((_e,$e)=>_e+(W==="ZAR"?$e.price:$e.priceUSD)*$e.quantity,0),balance:(ge.balance||0)+R,vaultPurchasesThisMonth:(ge.vaultPurchasesThisMonth||0)+Jt,weeklyMilestones:{...ge.weeklyMilestones,salesValue:(((xe=ge.weeklyMilestones)==null?void 0:xe.salesValue)||0)+G.reduce((_e,$e)=>_e+(W==="ZAR"?$e.price:$e.priceUSD)*$e.quantity,0),vaultItemsSold:(((Ke=ge.weeklyMilestones)==null?void 0:Ke.vaultItemsSold)||0)+Jt}};ne.totalSalesValue>=5e4?ne.commissionRate=20:ne.totalSalesValue>=15e3?ne.commissionRate=15:ne.totalSalesValue>=5e3&&(ne.commissionRate=11);const Fe={id:`commission_${Date.now()}`,type:"system",title:"New Commission Earned!",message:`You earned ${W==="ZAR"?"R":"$"}${R.toFixed(2)} from this sale!`,date:new Date().toISOString(),isRead:!1};if(await Ge.from("users").update({affiliateStats:ne,notifications:[Fe,...he.notifications||[]]}).eq("id",he.id),ge.parentId)try{const{data:_e}=await Ge.from("users").select("*").eq("id",ge.parentId).maybeSingle();if(_e&&((ct=_e.affiliateStats)==null?void 0:ct.status)==="approved"){const $e=_e.affiliateStats,He=R*.01,xt={...$e,balance:($e.balance||0)+He},Yt={id:`team_bonus_${Date.now()}`,type:"system",title:"Team Leader Bonus",message:`You earned ${W==="ZAR"?"R":"$"}${He.toFixed(2)} from a recruit's sale!`,date:new Date().toISOString(),isRead:!1};await Ge.from("users").update({affiliateStats:xt,notifications:[Yt,..._e.notifications||[]]}).eq("id",_e.id)}}catch(_e){console.error("Failed to process parent commission",_e)}try{_t.length>0&&await Ge.from("commission_records").insert(_t)}catch(_e){console.error("Failed to persist commission_records to Supabase:",_e);const $e=JSON.parse(localStorage.getItem("commission_records")||"[]");localStorage.setItem("commission_records",JSON.stringify([...$e,..._t]))}try{const _e=[],$e=new Date().toISOString().split("T")[0];if(ne.weeklyMilestones.membershipsSold>=5&&!localStorage.getItem(`milestone_${he.id}_sprinter_${$e}`)){const xt=W==="ZAR"?50:5;ne.balance+=xt,_e.push({id:`milestone_${Date.now()}`,affiliateId:he.id,type:"sprinter",achievedAt:new Date().toISOString(),bonusAmount:xt,currency:W,weekStart:$e}),localStorage.setItem(`milestone_${he.id}_sprinter_${$e}`,"true")}if(_e.length>0){const He=JSON.parse(localStorage.getItem("affiliate_milestones")||"[]");localStorage.setItem("affiliate_milestones",JSON.stringify([...He,..._e]))}}catch(_e){console.warn("Failed processing affiliate milestones locally",_e)}}catch(he){console.error("Failed to process affiliate commissions",he)}},pr=async G=>{if(!(A||h.id==="guest"))try{const K={id:`acct_close_admin_${Date.now()}`,type:"system",title:"Account Closure Request",message:`${h.name} (${h.email}) has requested account closure. Reason: ${G}`,date:new Date().toISOString(),isRead:!1};await Ge.from("users").update({isActive:!1,closureReason:G,closureRequestedAt:new Date().toISOString(),scheduledDeletionAt:new Date(Date.now()+1440*60*1e3).toISOString()}).eq("id",h.id);const{data:X}=await Ge.from("users").select("notifications").eq("email","spoilmevintagediy@gmail.com").limit(1).maybeSingle();if(X){const xe=X.notifications||[];await Ge.from("users").update({notifications:[K,...xe]}).eq("email","spoilmevintagediy@gmail.com")}const re={id:`acct_close_user_${Date.now()}`,type:"system",title:"Account Closure Requested",message:"Your account closure has been requested. Your account and all data will be permanently deleted within 24 hours.",date:new Date().toISOString(),isRead:!1};await lt(h.id,re),await Qe(h.id,re.title,re.message,"/#/profile")}catch(K){throw console.error("Error closing account:",K),K}},Kr=G=>{"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"USER_DATA",name:G.name||G.firstName+" "+G.lastName||"valued customer"})},Ln=async G=>{if(!h.id||h.id==="guest"){console.error("Cannot apply for artist as guest user.");return}const K={uid:h.id,name:G.name,surname:G.surname,artistTradeName:G.artistTradeName,contactNumber:G.contactNumber,email:G.email,productImages:G.productImages,status:"pending",submittedAt:new Date().toISOString()};if(!A)try{await Ge.from("artist_applications").insert([K])}catch(xe){throw console.error("Error submitting artist application:",xe),xe}const X={id:`artist_app_${Date.now()}`,type:"system",title:"Artist Partnership Application Received",message:"Your application to become an artist partner is pending review. We will contact you soon!",date:new Date().toISOString(),isRead:!1},re={...h,notifications:[X,...h.notifications]};y(re),Pe(re),!A&&h.id!=="guest"&&await Ue(h.id,Qt(re))};return t.jsx(ON.Provider,{value:{products:e,categories:r,cart:u,user:h,currentUser:h,specials:v,vouchers:E,appliedVoucher:F,affiliateLeaderboard:te,memberCount:M,weeklyWinners:I,isDemoMode:A,isLoading:_,dbConnectionError:L,db:Ge,orders:o,isStickyProgressBarVisible:Ie,setIsStickyProgressBarVisible:le,currency:W,setCurrency:ue,toggleCurrency:Gr,packagingPresets:be,materialPresets:Z,savePackagingPreset:nt,deletePackagingPreset:Ut,saveMaterialPreset:oe,deleteMaterialPreset:Me,login:Be,logout:We,register:ke,addToCart:Y,removeFromCart:Se,updateCartQuantity:jt,clearCart:mt,toggleWishlist:Wt,checkout:hn,submitReview:Us,addSystemNotification:Hr,processGiftVoucherPurchase:mr,applyForAffiliate:$t,approveAffiliate:ks,rejectAffiliate:ds,sendAffiliateMessage:De,buyAffiliateContent:Ws,joinAffiliateElite:fr,simulateAffiliateSale:Os,updateAffiliateTier:ps,assignAffiliateParent:us,applyForArtist:Ln,addProduct:On,updateProduct:gs,deleteProduct:zs,addOrder:Vt,updateOrder:_s,deleteOrder:ss,addCategory:Ne,updateCategory:Je,deleteCategory:Et,replaceCategories:Tt,addSpecial:Rt,resetStore:Yn,seedTestUsers:ve,getAllUsers:Dn,runDataDiagnostics:en,adminAdjustPoints:Ls,getCartTotal:un,addVoucher:Ot,deleteVoucher:zt,applyExternalVoucher:Bt,setAppliedVoucher:J,shareProduct:vi,claimSocialReward:Wr,updateUserAddress:Nt,updateUser:St,manualWinner:B,setManualWinner:Ce,auth:Ge.auth,authErrorMessage:fe,clearAuthError:Xe,signInWithLocalDevAdmin:ye,isSupabaseConfigured:Ms,dataSource:O,closeAccount:pr},children:n})},vt=()=>{const n=S.useContext(ON);if(!n)throw new Error("useStore must be used within StoreProvider");return n};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(n,e)=>{const s=S.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:f,...h},y)=>S.createElement("svg",{ref:y,...lI,width:i,height:i,stroke:r,strokeWidth:c?Number(o)*24/Number(i):o,className:["lucide",`lucide-${cI(n)}`,u].join(" "),...h},[...e.map(([v,j])=>S.createElement(v,j)),...Array.isArray(f)?f:[f]]));return s.displayName=`${n}`,s};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Te("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=Te("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=Te("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=Te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=Te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=Te("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=Te("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=Te("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=Te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=Te("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=Te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=Te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=Te("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=Te("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=Te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=Te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=Te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=Te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=Te("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=Te("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=Te("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=Te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=Te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=Te("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=Te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=Te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=Te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=Te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=Te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=Te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=Te("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=Te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=Te("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Te("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=Te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=Te("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=Te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=Te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=Te("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=Te("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=Te("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=Te("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=Te("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=Te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=Te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=Te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=Te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=Te("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=Te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=Te("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=Te("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=Te("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=Te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=Te("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=Te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=Te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=Te("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=Te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=Te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=Te("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=Te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=Te("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=Te("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=Te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=Te("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=Te("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=Te("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=Te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=Te("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=Te("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=Te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=Te("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=Te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=Te("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=Te("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=Te("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=Te("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=Te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Te("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=Te("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=Te("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Te("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=Te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=Te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=Te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=Te("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),nb=["Lerato in Sandton just unlocked The Secret Vault.","Thandi in Durban just unlocked The Secret Vault.","Johan in Cape Town just unlocked The Secret Vault.","Bianca in Pretoria just unlocked The Secret Vault.","Jessica in New York just unlocked The Secret Vault.","Emily in Texas just unlocked The Secret Vault.","Ashley in California just unlocked The Secret Vault.","Sarah in Florida just unlocked The Secret Vault.","Sophie in London just unlocked The Secret Vault.","Emma in Manchester just unlocked The Secret Vault."],LI=()=>{const{weeklyWinners:n,currency:e}=vt(),[s,r]=S.useState(!1),[i,o]=S.useState(""),[c,u]=S.useState("winner");return S.useEffect(()=>{let f;const h=()=>{if(Math.random()<.6&&n.length>0){const E=n[Math.floor(Math.random()*n.length)],k=E.currency==="ZAR"?`R${E.prize}`:`$${E.prize}`,_=`${E.name} just won ${k} in the Weekly Draw!`;o(_),u("winner")}else{const E=nb[Math.floor(Math.random()*nb.length)];o(E),u("vault")}r(!0),setTimeout(()=>{r(!1)},6e3);const j=Math.floor(Math.random()*20001+2e4);f=setTimeout(h,j)};return f=setTimeout(h,5e3),()=>clearTimeout(f)},[n,e]),i?t.jsx("div",{className:`fixed bottom-4 left-4 z-50 max-w-xs w-full transition-all duration-700 transform ${s?"translate-y-0 opacity-100":"translate-y-20 opacity-0 pointer-events-none"}`,children:t.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md border border-gray-800 p-3 rounded-xl shadow-2xl flex items-center gap-3 relative overflow-hidden group",children:[t.jsx("button",{onClick:()=>r(!1),className:"absolute top-1 right-1 text-gray-500 hover:text-white p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(cs,{size:12})}),t.jsx("div",{className:`w-8 h-8 shrink-0 rounded-full border flex items-center justify-center ${c==="winner"?"border-yellow-500/30 bg-yellow-900/20":"border-purple-500/30 bg-purple-900/20"}`,children:c==="winner"?t.jsx(Kn,{size:16,className:"text-yellow-400"}):t.jsx(Dt,{size:16,className:"text-purple-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-xs text-gray-200 leading-tight",children:i}),t.jsx("div",{className:"text-[9px] text-gray-500 mt-1",children:"Just now"})]})]})}):null},zI=500,GN=({subtotal:n,isSticky:e=!1,onContinueShopping:s,onClose:r})=>{const{currency:i}=vt();if(i==="USD")return null;const o=()=>i==="ZAR"?"R":"$",c=(j,E)=>i==="ZAR"?j:i==="USD"?0:j,u=c(zI),f=u-n,h=Math.min(n/u*100,100),y=n>=u,v=y?"Congratulations! You've unlocked FREE shipping!":`You're ${o()}${c(f).toFixed(2)} away from free shipping!`;return e?t.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[t.jsx("div",{className:"p-2 bg-pink-900/20 text-pink-500 rounded-full border border-pink-500/30",children:t.jsx(hr,{size:20})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:`text-sm font-bold ${y?"text-green-400":"text-white"}`,children:v}),t.jsx("div",{className:"w-full bg-black/50 rounded-full h-2 mt-1 overflow-hidden border border-gray-700",children:t.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${y?"bg-green-500":"bg-pink-500"}`,style:{width:`${h}%`}})})]}),t.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-white",children:t.jsx(cs,{size:18})})]})}):t.jsx("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-pink-500/30 rounded-2xl p-6 shadow-lg mb-8",children:t.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[t.jsx("div",{className:"p-3 bg-pink-900/30 text-pink-400 rounded-full border border-pink-500/30",children:t.jsx(hr,{size:28})}),t.jsxs("div",{className:"flex-1 text-center md:text-left",children:[t.jsx("h3",{className:`text-lg font-bold ${y?"text-green-400":"text-white"}`,children:v}),t.jsx("div",{className:"w-full bg-black rounded-full h-2.5 mt-2 overflow-hidden border border-gray-700 shadow-inner",children:t.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${y?"bg-green-500":"bg-pink-500"} shadow-[inset_0_1px_1px_rgba(255,255,255,0.2)]`,style:{width:`${h}%`}})})]}),!y&&t.jsxs("button",{onClick:s,className:"w-full md:w-auto mt-2 md:mt-0 px-6 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:["Continue Shopping ",t.jsx(Qs,{size:18})]})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var cl;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(cl||(cl={}));class dm extends Error{constructor(e,s,r){super(e),this.message=e,this.code=s,this.data=r}}const UI=n=>{var e,s;return n!=null&&n.androidBridge?"android":!((s=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||s===void 0)&&s.bridge?"ios":"web"},FI=n=>{const e=n.CapacitorCustomPlatform||null,s=n.Capacitor||{},r=s.Plugins=s.Plugins||{},i=()=>e!==null?e.name:UI(n),o=()=>i()!=="web",c=v=>{const j=h.get(v);return!!(j!=null&&j.platforms.has(i())||u(v))},u=v=>{var j;return(j=s.PluginHeaders)===null||j===void 0?void 0:j.find(E=>E.name===v)},f=v=>n.console.error(v),h=new Map,y=(v,j={})=>{const E=h.get(v);if(E)return console.warn(`Capacitor plugin "${v}" already registered. Cannot register plugins twice.`),E.proxy;const k=i(),_=u(v);let P;const L=async()=>(!P&&k in j?P=typeof j[k]=="function"?P=await j[k]():P=j[k]:e!==null&&!P&&"web"in j&&(P=typeof j.web=="function"?P=await j.web():P=j.web),P),U=(C,I)=>{var $,O;if(_){const V=_==null?void 0:_.methods.find(A=>I===A.name);if(V)return V.rtype==="promise"?A=>s.nativePromise(v,I.toString(),A):(A,se)=>s.nativeCallback(v,I.toString(),A,se);if(C)return($=C[I])===null||$===void 0?void 0:$.bind(C)}else{if(C)return(O=C[I])===null||O===void 0?void 0:O.bind(C);throw new dm(`"${v}" plugin is not implemented on ${k}`,cl.Unimplemented)}},F=C=>{let I;const $=(...O)=>{const V=L().then(A=>{const se=U(A,C);if(se){const fe=se(...O);return I=fe==null?void 0:fe.remove,fe}else throw new dm(`"${v}.${C}()" is not implemented on ${k}`,cl.Unimplemented)});return C==="addListener"&&(V.remove=async()=>I()),V};return $.toString=()=>`${C.toString()}() { [capacitor code] }`,Object.defineProperty($,"name",{value:C,writable:!1,configurable:!1}),$},J=F("addListener"),te=F("removeListener"),H=(C,I)=>{const $=J({eventName:C},I),O=async()=>{const A=await $;te({eventName:C,callbackId:A},I)},V=new Promise(A=>$.then(()=>A({remove:O})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await O()},V},M=new Proxy({},{get(C,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return _?H:J;case"removeListener":return te;default:return F(I)}}});return r[v]=M,h.set(v,{name:v,proxy:M,platforms:new Set([...Object.keys(j),..._?[k]:[]])}),M};return s.convertFileSrc||(s.convertFileSrc=v=>v),s.getPlatform=i,s.handleError=f,s.isNativePlatform=o,s.isPluginAvailable=c,s.registerPlugin=y,s.Exception=dm,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},$I=n=>n.Capacitor=FI(n),Du=$I(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ml=Du.registerPlugin;class KN{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,s){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(s);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,s);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,s,r){const i=this.listeners[e];if(!i){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(s),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(s))}hasListeners(e){var s;return!!(!((s=this.listeners[e])===null||s===void 0)&&s.length)}registerWindowListener(e,s){this.windowListeners[s]={registered:!1,windowEventName:e,pluginEventName:s,handler:r=>{this.notifyListeners(s,r)}}}unimplemented(e="not implemented"){return new Du.Exception(e,cl.Unimplemented)}unavailable(e="not available"){return new Du.Exception(e,cl.Unavailable)}async removeListener(e,s){const r=this.listeners[e];if(!r)return;const i=r.indexOf(s);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const s=this.retainedEventArguments[e];s&&(delete this.retainedEventArguments[e],s.forEach(r=>{this.notifyListeners(e,r)}))}}const rb=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ib=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class VI extends KN{async getCookies(){const e=document.cookie,s={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=ib(i).trim(),o=ib(o).trim(),s[i]=o}),s}async setCookie(e){try{const s=rb(e.key),r=rb(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${s}=${r||""}${i}; path=${o}; ${c};`}catch(s){return Promise.reject(s)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(s){return Promise.reject(s)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const s of e)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}ml("CapacitorCookies",{web:()=>new VI});const BI=async n=>new Promise((e,s)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>s(i),r.readAsDataURL(n)}),qI=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,o,c)=>(i[o]=n[e[c]],i),{})},WI=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[o,c]=i;let u,f;return Array.isArray(c)?(f="",c.forEach(h=>{u=e?encodeURIComponent(h):h,f+=`${o}=${u}&`}),f.slice(0,-1)):(u=e?encodeURIComponent(c):c,f=`${o}=${u}`),`${r}&${f}`},"").substr(1):null,HI=(n,e={})=>{const s=Object.assign({method:n.method||"GET",headers:n.headers},e),i=qI(n.headers)["content-type"]||"";if(typeof n.data=="string")s.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[c,u]of Object.entries(n.data||{}))o.set(c,u);s.body=o.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const o=new FormData;if(n.data instanceof FormData)n.data.forEach((u,f)=>{o.append(f,u)});else for(const u of Object.keys(n.data))o.append(u,n.data[u]);s.body=o;const c=new Headers(s.headers);c.delete("content-type"),s.headers=c}else(i.includes("application/json")||typeof n.data=="object")&&(s.body=JSON.stringify(n.data));return s};class GI extends KN{async request(e){const s=HI(e,e.webFetchExtra),r=WI(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,s),c=o.headers.get("content-type")||"";let{responseType:u="text"}=o.ok?e:{};c.includes("application/json")&&(u="json");let f,h;switch(u){case"arraybuffer":case"blob":h=await o.blob(),f=await BI(h);break;case"json":f=await o.json();break;case"document":case"text":default:f=await o.text()}const y={};return o.headers.forEach((v,j)=>{y[j]=v}),{data:f,headers:y,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}ml("CapacitorHttp",{web:()=>new GI});async function KI(n){try{const e=globalThis.Capacitor||window.Capacitor,s=e&&e.Plugins&&e.Plugins.UpdaterPlugin;if(s&&s.downloadAndInstall){await s.downloadAndInstall({url:n});return}}catch{}throw new Error("UpdaterPlugin not available")}ml("UpdaterPlugin",{web:()=>({openUrl:async()=>{console.warn("UpdaterPlugin not available on web")}})});const JI="https://spoilme-edee0.web.app/version.json",YI=()=>{if(typeof navigator>"u")return!1;const n=navigator.userAgent||navigator.vendor||"";return/Android|iPhone|iPad|iPod/i.test(n)};function ZI({apkUrl:n="",playStoreUrl:e}){const[s,r]=S.useState(!1),[i,o]=S.useState(!1),[c,u]=S.useState(n);if(S.useEffect(()=>{var j,E;if(!YI())return;const y=(E=(j=window.Capacitor)==null?void 0:j.isNativePlatform)==null?void 0:E.call(j);o(y),(async()=>{try{console.log("Checking for update...");const _=await(await fetch(JI)).json();console.log("Fetched data:",_);const P=_.version,L=localStorage.getItem("appVersion")||"0.1";console.log("Latest version:",P,"Stored version:",L),P!==L?(console.log("New version detected, showing update banner"),u(_.apkUrl),r(!0),localStorage.setItem("appVersion",P)):(console.log("No new version"),(y?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))||r(!0))}catch(k){console.error("Failed to check for update:",k),(y?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))||r(!0)}})()},[]),!s)return null;const f=()=>{const y=i?"updatePromptDismissed":"installPromptDismissed";localStorage.setItem(y,String(Date.now())),r(!1)},h=async()=>{try{window.Capacitor&&window.Capacitor.isNativePlatform&&window.Capacitor.isNativePlatform()?await KI(c):window.open(c,"_blank")}catch(y){console.error("Updater error",y),window.open(c,"_blank")}i||f()};return t.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[t.jsx("div",{className:"p-2 bg-cyan-900/20 text-cyan-500 rounded-full border border-cyan-500/30",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z",clipRule:"evenodd"})})}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-sm font-bold text-white",children:"Update available - Get the latest features!"})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:h,className:"px-4 py-2 bg-green-500 text-black rounded font-semibold text-sm",children:"Install Update"}),t.jsx("button",{onClick:f,className:"px-4 py-2 ring-1 ring-gray-700 rounded text-gray-300 text-sm",children:"Later"})]})]})})}const XI=()=>{const[n,e]=S.useState(!1),[s,r]=S.useState("https://spoilme-edee0.web.app/Spoil-Me-Vintage-0.4.apk"),[i,o]=S.useState("0.4"),{cart:c,user:u,isStickyProgressBarVisible:f,setIsStickyProgressBarVisible:h,getCartTotal:y,currency:v,toggleCurrency:j}=vt(),E=ua();S.useEffect(()=>{window.scrollTo(0,0)},[E.pathname]),S.useEffect(()=>{(async()=>{try{const F=await(await fetch("https://spoilme-edee0.web.app/version.json")).json();r(F.apkUrl),o(F.version)}catch(U){console.error("Failed to fetch latest APK URL:",U)}})()},[]);const k=c.reduce((L,U)=>L+U.quantity,0),_=y();u.wishlist&&u.wishlist.length;const P=u.notifications?u.notifications.filter(L=>!L.isRead).length:0;return t.jsxs("div",{className:"min-h-screen flex flex-col safe-area text-gray-100",children:[t.jsx("style",{children:`
        @keyframes marquee {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
        .animate-marquee {
          animation: marquee 10s linear infinite;
        }
        .animate-marquee:hover {
          animation-play-state: paused;
        }
      `}),t.jsx("div",{className:"w-full bg-zinc-900 border-b border-white/5 overflow-hidden py-2 relative z-[60]",children:t.jsxs("div",{className:"flex animate-marquee whitespace-nowrap",children:[t.jsxs("div",{className:"flex items-center gap-8 px-4",children:[t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(Ps,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(ys,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(hr,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[t.jsx(ls,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[t.jsx(dc,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[t.jsx(Hn,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(eo,{size:14,className:"text-green-500"})," And lots more!"]})]}),t.jsxs("div",{className:"flex items-center gap-8 px-4",children:[t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(Ps,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(ys,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(hr,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[t.jsx(ls,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[t.jsx(dc,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[t.jsx(Hn,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),t.jsx("span",{className:"text-gray-700",children:""}),t.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[t.jsx(eo,{size:14,className:"text-green-500"})," And lots more!"]})]})]})}),t.jsxs("header",{className:"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800 transition-all",children:[t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"relative flex flex-col lg:flex-row items-center justify-center lg:justify-between h-auto lg:h-20 py-4 lg:py-0 gap-3",children:[t.jsx("button",{className:"absolute top-1/2 -translate-y-1/2 left-4 lg:hidden p-2 rounded-md text-gray-400 hover:text-white",onClick:()=>e(!n),children:n?t.jsx(cs,{size:24}):t.jsx(SI,{size:24})}),t.jsxs(Ve,{to:"/",className:"flex-shrink-0 group flex flex-col items-center leading-none",children:[t.jsx("span",{className:"font-cherry text-[24px] font-bold text-pink-500 group-hover:text-pink-400 transition-colors drop-shadow-[0_0_5px_rgba(236,72,153,0.5)]",children:"Spoil Me"}),t.jsx("span",{className:"font-cherry text-[24px] font-bold text-cyan-400 group-hover:text-cyan-300 transition-colors drop-shadow-[0_0_5px_rgba(34,211,238,0.5)] ml-7 -mt-1",children:"Vintage"})]}),t.jsxs("nav",{className:"hidden lg:flex absolute left-1/2 -translate-x-1/2 space-x-8",children:[t.jsx(Ve,{to:"/",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${E.pathname==="/"?"text-cyan-400":"text-gray-300"}`,children:"Home"}),t.jsx(Ve,{to:"/#catalog",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Catalog"}),t.jsx(Ve,{to:"/customized-wire-wrapped-pendants",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${E.pathname==="/customized-wire-wrapped-pendants"?"text-cyan-400":"text-gray-300"}`,children:"Custom Pendants"}),t.jsxs(Ve,{to:"/membership",className:`text-sm font-medium flex items-center gap-1 hover:text-purple-400 transition-colors ${E.pathname==="/membership"?"text-purple-400 font-bold":"text-gray-300"}`,children:[t.jsx(Dt,{size:14})," Membership"]}),t.jsx(Ve,{to:"/#specials",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Specials"})]}),t.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-3 w-full lg:w-auto justify-center lg:justify-end",children:[t.jsx("button",{onClick:j,className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors text-xs font-bold",title:`Switch to ${v==="ZAR"?"USD":"ZAR"}`,children:v}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors",children:t.jsx(fa,{size:20})}),u.email?t.jsx(Ve,{to:"/earn-rewards",className:"group flex items-center justify-center p-2 relative",title:"Your Loyalty Rewards",children:t.jsxs("div",{className:"flex items-center gap-1.5 hover:bg-purple-900/50 px-2 py-1 rounded-full transition-colors border border-transparent hover:border-purple-500/30",children:[t.jsx(Hn,{size:20,className:"text-purple-400 group-hover:text-pink-400"}),t.jsx("span",{className:"hidden md:inline-block text-xs font-bold text-purple-200 group-hover:text-white",children:u.loyaltyPoints})]})}):t.jsx(Ve,{to:"/earn-rewards",className:"p-2 text-gray-400 hover:text-purple-400 transition-colors relative",title:"Earn Rewards",children:t.jsx(Hn,{size:20})}),u.email&&t.jsxs(Ve,{to:"/notifications",className:"p-2 text-gray-400 hover:text-yellow-400 transition-colors relative group",children:[t.jsx(Yi,{size:20}),P>0&&t.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-yellow-400 rounded-full shadow-[0_0_5px_rgba(250,204,21,0.8)]",children:P})]}),u.email?t.jsx(Ve,{to:"/profile",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative",children:t.jsx($r,{size:20})}):t.jsx(Ve,{to:"/login",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative flex items-center gap-1",children:t.jsx(VN,{size:20})}),t.jsxs(Ve,{to:"/cart",className:"p-2 text-gray-400 hover:text-pink-500 transition-colors relative group",children:[t.jsx(fl,{size:20}),k>0&&t.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-green-400 rounded-full shadow-[0_0_5px_rgba(74,222,128,0.8)]",children:k})]})]})]})}),n&&t.jsx("div",{className:"lg:hidden absolute top-full left-0 w-full bg-zinc-900 border-b border-gray-800 shadow-lg animate-in slide-in-from-top-5 duration-200 z-40",children:t.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[t.jsx(Ve,{to:"/",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Home"}),t.jsxs(Ve,{to:"/customized-wire-wrapped-pendants",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[t.jsx(ys,{size:16,className:"text-gold"})," Custom Pendants"]}),t.jsxs(Ve,{to:"/membership",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-purple-400 hover:bg-zinc-800 hover:text-purple-300 flex items-center gap-2",children:[t.jsx(Dt,{size:16})," Membership Perks"]}),t.jsxs(Ve,{to:"/earn-rewards",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[t.jsx(Hn,{size:16,className:"text-purple-400"}),u.email?"My Rewards":"Earn Rewards",u.email&&t.jsxs("span",{className:"bg-purple-900/50 text-purple-200 text-[10px] px-2 py-0.5 rounded-full font-bold ml-auto",children:[u.loyaltyPoints," Pts"]})]}),t.jsxs(Ve,{to:"/affiliate-program",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-green-400 flex items-center gap-2",children:[t.jsx(Ac,{size:16,className:"text-green-500"})," Partnership Program"]}),t.jsxs(Ve,{to:"/artist-partnership",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-yellow-400 flex items-center gap-2",children:[t.jsx(ys,{size:16,className:"text-yellow-400"})," Artist Partnership"]}),u.email?t.jsxs(Ve,{to:"/profile",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center justify-between",children:["My Profile",P>0&&t.jsxs("span",{className:"bg-yellow-400 text-black text-xs px-2 py-0.5 rounded-full font-bold",children:[P," New"]})]}):t.jsx(Ve,{to:"/login",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Login / Register"})]})})]}),t.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsx($v,{})}),t.jsx(LI,{}),f&&_>0&&t.jsx(GN,{subtotal:_,isSticky:!0,onClose:()=>h(!1)}),t.jsx(ZI,{}),t.jsx("footer",{className:"bg-zinc-950 border-t border-gray-800 py-12",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"About"}),t.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[t.jsx("li",{children:t.jsx(Ve,{to:"/",className:"hover:text-white",children:"Our Story"})}),t.jsx("li",{children:t.jsx(Ve,{to:"/",className:"hover:text-white",children:"Careers"})}),t.jsx("li",{children:t.jsx(Ve,{to:"/",className:"hover:text-white",children:"Press"})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"Support"}),t.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[t.jsx("li",{children:t.jsx(Ve,{to:"/terms",className:"hover:text-white",children:"Contact Us"})}),t.jsx("li",{children:t.jsx(Ve,{to:"/terms",className:"hover:text-white",children:"Shipping"})}),t.jsx("li",{children:t.jsx(Ve,{to:"/terms",className:"hover:text-white",children:"Returns"})}),t.jsx("li",{children:t.jsx(Ve,{to:"/artist-partnership",className:"hover:text-white",children:"Artist Partnership"})}),t.jsxs("li",{className:"hover:text-green-400 cursor-pointer flex items-center gap-2 text-gray-300 font-medium",onClick:()=>window.open(s,"_blank"),children:[t.jsx(na,{size:14})," Download App v",i]})]})]})]}),u.isAdmin&&t.jsx("div",{className:"mt-12 pt-8 border-t border-gray-900 flex justify-center",children:t.jsxs(Ve,{to:"/admin",className:"flex items-center gap-2 text-xs text-red-400 hover:text-red-300 uppercase tracking-widest font-bold transition-colors bg-red-900/10 px-4 py-2 rounded border border-red-900/30",children:[t.jsx(FN,{size:14})," Admin Dashboard"]})})]})})]})},QI=()=>{const n=ua(),e=cn(),{user:s}=vt();S.useEffect(()=>{if(!s){e("/login");return}if(!s.isAdmin){try{localStorage.setItem("spv_admin_denied",'Your account does not have admin rights. If this is a local dev machine use "Ensure Admin (dev)" on the Login page, or set is_admin=true for your user in the database.')}catch{}e("/login")}},[s,e]);const i=[{path:"/admin",icon:FN,label:"Dashboard",permission:"dashboard"},{path:"/admin/orders",icon:ca,label:"Orders",permission:"orders"},{path:"/admin/products",icon:to,label:"Products",permission:"products"},{path:"/admin/categories",icon:HN,label:"Categories",permission:"categories"},{path:"/admin/artists",icon:Ql,label:"Artists",permission:"artists"},{path:"/admin/gift-cards",icon:ls,label:"Gift Cards",permission:"giftCards"},{path:"/admin/social",icon:so,label:"Social Studio",permission:"social"},{path:"/admin/affiliates",icon:Ps,label:"Affiliates",permission:"affiliates"},{path:"/admin/affiliate-requests",icon:ea,label:"Requests",permission:"affiliates"},{path:"/admin/notifications",icon:Yi,label:"Push Notify",permission:"notifications"},{path:"/admin/winners",icon:Kn,label:"Weekly Winners",permission:"winners"},{path:"/admin/expenses",icon:ts,label:"Expenses",permission:"expenses"},{path:"/admin/members",icon:ea,label:"Membership",permission:"members"},{path:"/admin/vault",icon:dI,label:"Vault",permission:"vault"},{path:"/admin/custom-pendant-manager",icon:ys,label:"Custom Pendants",permission:"products"},{path:"/admin/ad-pricing",icon:ts,label:"Ad Pricing",permission:"admin"}].filter(o=>{var c;return(s==null?void 0:s.email)==="spoilmevintagediy@gmail.com"?!0:((c=s==null?void 0:s.adminPermissions)==null?void 0:c[o.permission])===!0});return s!=null&&s.isAdmin?t.jsxs("div",{className:"min-h-screen bg-black flex text-gray-100",children:[t.jsxs("aside",{className:"w-64 bg-zinc-900 border-r border-gray-800 hidden md:flex flex-col fixed h-full",children:[t.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-gray-800",children:[t.jsx("span",{className:"text-xl font-bold text-pink-500",children:"Spoil Me Vintage"}),t.jsx("span",{className:"ml-2 text-xs bg-purple-900/50 border border-purple-500/50 text-purple-300 px-2 py-0.5 rounded",children:"ADMIN"})]}),t.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[t.jsxs(Ve,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-gray-400 hover:bg-zinc-800 hover:text-white rounded-lg mb-4 transition-colors",children:[t.jsx(oa,{size:18})," Back to Store"]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-2",children:"Management"}),i.slice(0,5).map(o=>t.jsx(um,{item:o,location:n},o.path)),t.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Marketing"}),i.slice(5,10).map(o=>t.jsx(um,{item:o,location:n},o.path)),t.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Operations"}),i.slice(10).map(o=>t.jsx(um,{item:o,location:n},o.path))]})]}),t.jsx("main",{className:"flex-1 md:ml-64 p-8 overflow-y-auto bg-black h-screen",children:t.jsx("div",{className:"max-w-6xl mx-auto pb-20 md:pb-0",children:t.jsx($v,{})})}),t.jsx("div",{className:"md:hidden fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 flex justify-between px-4 py-3 z-50 overflow-x-auto gap-4",children:i.map(o=>t.jsx(Ve,{to:o.path,className:`p-2 rounded-lg ${n.pathname===o.path?"text-pink-400 bg-pink-900/20":"text-gray-400 hover:text-white"}`,children:t.jsx(o.icon,{size:24})},o.path))})]}):null},um=({item:n,location:e})=>{const s=e.pathname===n.path;return t.jsxs(Ve,{to:n.path,className:`flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-colors ${s?"bg-pink-900/20 text-pink-400 border border-pink-500/20":"text-gray-400 hover:bg-zinc-800 hover:text-white"}`,children:[t.jsx(n.icon,{size:18})," ",n.label]})},Ou=({src:n,fallback:e,alt:s,className:r,onError:i,...o})=>{const c=JN(n||void 0,e);return t.jsx("img",{src:c||e||pl(),alt:s,className:r,onError:u=>{try{no(u)}catch{}i&&i(u)},...o})};function no(n){const e=n==null?void 0:n.target;e&&(e.src=pl())}function pl(n=600,e=600,s){const i=`<?xml version="1.0" encoding="UTF-8"?><svg xmlns='http://www.w3.org/2000/svg' width='${n}' height='${e}' viewBox='0 0 ${n} ${e}'><rect width='100%' height='100%' fill='%23222' /><text x='50%' y='50%' font-family='Arial, Helvetica, sans-serif' font-size='20' fill='%23ccc' dominant-baseline='middle' text-anchor='middle'>${eR(s||"Image")}</text></svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(i)}`}function eR(n){return String(n).replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}function JN(n,e){const[s,r]=S.useState(null);return S.useEffect(()=>{if(!n){r(e||pl());return}r(n)},[n,e]),s}const Bc=({product:n})=>{var Z,ce;const{addToCart:e,toggleWishlist:s,user:r,cart:i,currency:o}=vt(),[c,u]=S.useState(!1),f=((Z=r.wishlist)==null?void 0:Z.includes(n.id))||!1,h=cn(),y=new Date,v=n.promoStartsAt?new Date(n.promoStartsAt):null,j=n.promoExpiresAt?new Date(n.promoExpiresAt):null,E=v&&!isNaN(v.getTime()),k=j&&!isNaN(j.getTime()),_=(n.promoPrice||0)>0&&(!E||v<=y)&&(!k||j>y),P=o==="ZAR"?n.price:n.priceUSD||n.price,L=o==="ZAR"?n.memberPrice||P*.8:n.memberPriceUSD||P*.8;let U=P,F=!1,J="none";r.isMember?(F=!0,_?r.membershipTier==="deluxe"&&n.promoDeluxeMemberPrice&&n.promoDeluxeMemberPrice>0?(U=n.promoDeluxeMemberPrice,J="deluxe"):r.membershipTier==="premium"&&n.promoPremiumMemberPrice&&n.promoPremiumMemberPrice>0?(U=n.promoPremiumMemberPrice,J="premium"):r.membershipTier==="basic"&&n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0?(U=n.promoBasicMemberPrice,J="basic"):U=Math.min(L,n.promoPrice||1/0):U=L):_&&(U=n.promoPrice);const te=_&&n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0?n.promoBasicMemberPrice:L,M=n.reviews&&n.reviews.length>0?(n.reviews.reduce((W,ue)=>W+ue.rating,0)/n.reviews.length).toFixed(1):"5.0",C=n.reviews?n.reviews.length:0,I=n.soldCount||0,O=_?(()=>{if(!k||!j)return null;const W=j.getTime()-y.getTime();if(W<=0)return null;const ue=Math.floor(W/(1e3*60*60*24)),B=Math.floor(W%(1e3*60*60*24)/(1e3*60*60)),Ce=Math.floor(W%(1e3*60*60)/(1e3*60));return ue>0?`${ue}d ${B}h`:`${B}h ${Ce}m`})():null,V=n.type==="Ring"||n.showEarringOptions&&n.earringMaterials&&n.earringMaterials.length>1||n.type==="Pendant"&&n.chainStyles&&n.chainStyles.length>1,A=!!n.isSoldOut||n.stock<=0,se=i.filter(W=>W.id===n.id).reduce((W,ue)=>W+ue.quantity,0),fe=!V&&se>=n.stock,je=()=>{A||fe||(V?h(`/product/${n.id}`):e({...n,price:U}))},Ie=_&&(n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0||n.promoDeluxeMemberPrice&&n.promoDeluxeMemberPrice>0),le=()=>o==="ZAR"?"R":"$",be=(W,ue)=>o==="ZAR"?W:o==="USD"?ue!==void 0?ue:0:W,we=o==="ZAR"?n.compareAtPrice:n.compareAtPriceUSD||n.compareAtPrice;return o==="ZAR"?n.memberPrice||n.price*.8:n.memberPriceUSD||(n.priceUSD||n.price)*.8,t.jsxs("div",{className:"group relative bg-zinc-900 rounded-lg shadow-[0_0_30px_rgba(255,255,255,0.15)] hover:shadow-pink-500/20 transition-all duration-300 border border-gray-800 hover:border-pink-500/50 z-0 flex flex-col h-full",children:[t.jsxs(Ve,{to:`/product/${n.id}`,className:"block relative overflow-hidden aspect-square rounded-t-lg",children:[t.jsx(Ou,{src:n.image_url||n.imageUrl||((ce=n.images)==null?void 0:ce[0]),alt:n.name,className:`w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500 ${n.stock<=0?"opacity-50 grayscale":"opacity-90 group-hover:opacity-100"}`,fallback:pl(600),onError:no}),t.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1 z-10",children:[F&&t.jsxs("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-purple-400/30 flex items-center gap-1",children:[t.jsx(Dt,{size:10,fill:"currentColor"}),J!=="none"?`${J.toUpperCase()} PRICE`:"MEMBER"]}),!F&&_&&t.jsx("span",{className:"bg-green-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-green-500/30",children:"PROMO"}),n.isNewArrival&&t.jsx("span",{className:"bg-cyan-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-cyan-500/30",children:"NEW"})]}),_&&O&&!A&&t.jsxs("div",{className:"absolute bottom-0 left-0 w-full bg-black/80 backdrop-blur-md py-1 px-2 flex items-center justify-center gap-1.5 text-[10px] text-green-400 font-bold border-t border-green-500/30",children:[t.jsx(ur,{size:10})," Ends in: ",O]})]}),t.jsx("button",{onClick:W=>{W.preventDefault(),s(n.id)},className:`absolute top-2 right-2 p-2 rounded-full bg-black/50 backdrop-blur-md shadow-md transition-colors border border-transparent hover:border-pink-500 z-20 ${f?"text-pink-500":"text-gray-300 hover:text-white"}`,children:t.jsx(zp,{size:18,fill:f?"currentColor":"none"})}),t.jsxs("div",{className:"p-4 rounded-b-lg flex flex-col flex-1 space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("p",{className:"text-xs text-cyan-400 font-medium uppercase tracking-wider truncate pr-2",children:n.category}),t.jsx("button",{onClick:je,disabled:A||fe,className:`p-1.5 rounded-full transition-all flex-shrink-0 -mt-1 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed ${r.isMember?"bg-purple-600/20 text-purple-400 hover:bg-purple-600 hover:text-white border border-purple-500/30":"bg-zinc-800 text-gray-300 hover:bg-cyan-500 hover:text-black border border-gray-700"}`,title:V?"View Options":A?"Sold Out":fe?"Stock limit in cart":"Add to Cart",children:V?t.jsx(ol,{size:16}):t.jsx(ca,{size:16})})]}),t.jsx(Ve,{to:`/product/${n.id}`,children:t.jsx("h3",{className:"text-sm font-bold text-gray-100 leading-tight group-hover:text-pink-500 transition-colors line-clamp-2 h-10",children:n.name})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[t.jsx(Rn,{size:12,fill:"currentColor"}),t.jsx("span",{className:"text-xs font-bold text-gray-300",children:M}),t.jsxs("span",{className:"text-[10px] text-gray-500",children:["(",C,")"]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[I>0&&t.jsxs("div",{className:"text-gray-500 font-medium flex items-center gap-1",children:[I," sold"]}),n.stock>0&&n.stock<=5&&t.jsx("div",{className:"text-orange-400 font-medium flex items-center gap-1",children:"Low Stock"})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 min-h-[20px]",children:[we&&t.jsxs("div",{className:"flex items-center gap-1 relative",children:[t.jsxs("span",{className:"text-[10px] text-gray-500 line-through",children:["RRP ",le(),we.toFixed(2)]}),t.jsx("button",{onClick:W=>{W.preventDefault(),u(!c)},className:"text-gray-600 hover:text-gray-400 focus:outline-none",children:t.jsx(sh,{size:10})}),c&&t.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 p-2 bg-zinc-950 border border-gray-700 rounded shadow-xl text-[10px] text-gray-300 z-50",children:"Recommended retail price."})]}),t.jsxs("span",{className:"text-sm font-bold text-green-400",children:["Retail ",le(),P.toFixed(2)]})]}),t.jsx("div",{className:"mt-auto pt-2 border-t border-gray-800/50",children:r.isMember?t.jsx("div",{className:"flex items-end justify-between",children:t.jsxs("div",{className:"flex flex-col w-full",children:[t.jsxs("span",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-wide flex items-center gap-1",children:[t.jsx(Dt,{size:10})," ",J!=="none"?J:"Member"," Price"]}),t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsxs("span",{className:"text-2xl font-bold text-white drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",children:[le(),be(U).toFixed(2)]}),U<n.price&&t.jsxs("span",{className:"text-xs text-gray-500 line-through",children:[le(),be(n.price).toFixed(2)]})]})]})}):t.jsx("div",{className:"flex items-end justify-between",children:t.jsxs("div",{className:"flex flex-col w-full",children:[_?t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsxs("span",{className:"text-2xl font-bold text-green-400",children:[le(),be(U).toFixed(2)]}),t.jsxs("span",{className:"text-xs text-gray-400 line-through",children:[le(),be(n.price).toFixed(2)]})]}):null,Ie?t.jsxs("div",{className:"flex flex-col gap-0.5 mt-1",children:[t.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[t.jsx("span",{children:"Basic & Premium:"}),t.jsxs("span",{className:"text-purple-400 font-bold",children:[le(),be(n.promoBasicMemberPrice||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[t.jsx("span",{children:"Deluxe:"}),t.jsxs("span",{className:"text-purple-400 font-bold",children:[le(),be(n.promoDeluxeMemberPrice||0).toFixed(2)]})]})]}):t.jsxs("div",{className:"text-[10px] text-gray-400 flex items-center gap-1 mt-0.5",children:["Members: ",t.jsxs("span",{className:"text-purple-400 font-bold",children:[le(),be(te).toFixed(2)]})]})]})})})]})]})},tR=()=>{const[n,e]=S.useState(0),s=[" THIS WEEK'S WINNER: Anja P. from Pretoria just won a R500 Voucher!"," LAST WEEK'S WINNER: Sarah Jenkins from Texas just won a $30 Gift Box!"," PREVIOUS WINNER: Thandi M. from Joburg just won a R500 Voucher!"];return S.useEffect(()=>{const r=setInterval(()=>{e(i=>(i+1)%s.length)},3e3);return()=>clearInterval(r)},[]),t.jsx("div",{className:"flex items-center justify-center bg-yellow-400 p-2 rounded",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Kn,{size:16,className:"text-amber-700 mr-3 shrink-0"}),t.jsx("span",{className:"text-sm text-black font-bold tracking-wide",children:s[n]})]})})},sR=()=>{const{products:n,categories:e,user:s,currency:r}=vt(),i=S.useRef(null),o=S.useRef(null),c=S.useRef(null),u=S.useRef(null),f=S.useRef(null),h=S.useRef(null),[y,v]=S.useState(!1);S.useEffect(()=>{const A=setInterval(()=>v(se=>!se),5e3);return()=>clearInterval(A)},[]);const j=new Date,k=23+(j.getMonth()+j.getFullYear()*12)%3,_=j.getDate(),P=new Date(j.getFullYear(),j.getMonth()+1,0).getDate(),L=(_-1)/(P-1),U=Math.max(2,Math.floor(k-L*(k-2))),F=(A,se)=>{const fe=`${A.category||""} ${A.name||""} ${A.tags?A.tags.join(" "):""}`.toLowerCase();return se.some(je=>fe.includes(je.toLowerCase()))},J=n.filter(A=>F(A,["best seller","featured"])),te=(J.length>0?J:n).slice(0,16),H=n.filter(A=>F(A,["stud","studs"])).slice(0,11),M=n.filter(A=>F(A,["dangle","drop","hook"])).slice(0,2),C=n.filter(A=>F(A,["pendant","necklace","unique"])).slice(0,23),I=n.filter(A=>F(A,["bracelet","bangle"])).slice(0,6),$=n.filter(A=>F(A,["set","combo","suite"])).slice(0,2),O=(A,se)=>{if(A.current){const fe=A.current.clientWidth*.8;A.current.scrollBy({left:se==="right"?fe:-fe,behavior:"smooth"})}},V=({title:A,items:se,reference:fe,linkTo:je,icon:Ie,variant:le="standard"})=>{if(!se||se.length===0)return null;const be=le==="single"?"min-w-[90vw] md:min-w-[90vw] snap-center px-2":"min-w-[40vw] md:min-w-[200px] snap-start px-2";return t.jsxs("section",{className:"py-4",children:[t.jsxs("div",{className:"flex justify-between items-end mb-4 px-4",children:[t.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-white/20 pb-1 inline-block flex items-center gap-2",children:[Ie&&t.jsx(Ie,{size:20,className:"text-pink-400"})," ",A]}),t.jsxs(Ve,{to:je,className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors bg-white/5 px-3 py-1 rounded-full border border-white/10",children:["View All ",t.jsx(Qs,{size:14})]})]}),t.jsxs("div",{className:"relative group/slider",children:[t.jsx("button",{onClick:()=>O(fe,"left"),className:"block absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg hover:bg-pink-600 transition-colors",children:t.jsx(gI,{size:20})}),t.jsx("button",{onClick:()=>O(fe,"right"),className:"block absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg hover:bg-pink-600 transition-colors",children:t.jsx(xI,{size:20})}),t.jsxs("div",{ref:fe,className:"flex overflow-x-auto snap-x snap-mandatory pb-6 px-2 no-scrollbar scroll-smooth",children:[se.map(we=>t.jsx("div",{className:be,children:t.jsx(Bc,{product:we})},we.id)),t.jsxs("div",{className:`${le==="single"?"min-w-[90vw]":"min-w-[40vw]"} snap-center flex flex-col items-center justify-center p-4`,children:[t.jsx(Ve,{to:je,className:"w-16 h-16 rounded-full bg-zinc-800 border border-gray-600 flex items-center justify-center text-white mb-2 shadow-lg",children:t.jsx(Qs,{})}),t.jsx("span",{className:"text-gray-400 text-xs",children:"View All"})]})]})]})]})};return t.jsxs("div",{className:"space-y-8 pb-20",children:[t.jsx("div",{className:"px-4 mt-4",children:t.jsxs("section",{className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-pink-900 via-purple-900 to-indigo-900 border border-pink-500/30 shadow-lg",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-full bg-white/5 skew-x-12 translate-x-10"}),t.jsxs("div",{className:"flex flex-col p-6 relative z-10 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-white/10 backdrop-blur-md rounded-full border border-white/20",children:t.jsx(kc,{size:24,className:"text-pink-300"})}),t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center gap-2 mb-1",children:t.jsx("span",{className:"bg-green-500 text-white text-[10px] font-bold px-2 py-0.5 rounded shadow animate-pulse",children:"LIMITED OFFER"})}),t.jsx("h2",{className:"text-xl font-bold text-white leading-tight",children:"Buy a Gift Voucher"})]})]}),t.jsxs("p",{className:"text-sm text-gray-200",children:["Buy ",t.jsx("strong",{className:"text-white",children:"R250-R500"}),", get ",t.jsx("span",{className:"text-yellow-300 font-bold",children:"R100 EXTRA"}),"!"]}),t.jsxs(Ve,{to:"/gift-cards",className:"w-full text-center py-3 bg-white text-purple-900 font-bold rounded-full shadow-lg flex items-center justify-center gap-2",children:["Create Voucher ",t.jsx(Qs,{size:16})]})]})]})}),t.jsx("div",{className:"px-4",children:t.jsxs("div",{className:"relative rounded-2xl overflow-hidden border-4 border-cyan-500 shadow-[0_0_15px_rgba(34,211,238,0.3)]",children:[t.jsxs("section",{className:"relative bg-zinc-900 text-white p-6",children:[t.jsxs("div",{className:`absolute top-3 right-3 text-[10px] font-bold px-2 py-1 rounded-full bg-red-600 text-white border border-red-400 z-20 ${y?"animate-pulse":""}`,children:[U," spots left"]}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-900/20 via-black to-zinc-900"}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center space-y-4",children:[t.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-cyan-400 drop-shadow-lg",children:" The Spoil Me Club"}),t.jsxs("p",{className:"text-sm text-gray-300",children:["Join for just ",r==="ZAR"?"R19":"$2"," / month."]}),t.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[t.jsxs("p",{children:[" Get a ",r==="ZAR"?"R25":"$3"," Voucher instantly."]}),t.jsx("p",{children:" Auto-entry into Weekly R500 Drop."})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full pt-2",children:[t.jsx(Ve,{to:"/membership",className:"py-2.5 bg-pink-600 hover:bg-pink-500 text-white rounded-lg font-bold text-xs flex items-center justify-center",children:"JOIN CLUB"}),t.jsxs(Ve,{to:"/weekly-winners",className:"py-2.5 border border-gray-600 text-gray-300 rounded-lg font-bold text-xs flex items-center justify-center gap-1",children:["WINNERS ",t.jsx(Kn,{size:12})]})]})]})]}),t.jsx(tR,{})]})}),t.jsx(V,{title:"Best Sellers",items:te,reference:i,linkTo:"/catalog",icon:Ac}),t.jsxs("section",{className:"px-4",children:[t.jsx("div",{className:"flex justify-between items-end mb-4",children:t.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-purple-500 pb-1",children:"Shop Categories"})}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.map(A=>t.jsxs(Ve,{to:`/collections/${encodeURIComponent(A.name)}`,className:"relative aspect-square rounded-lg overflow-hidden border border-gray-800 bg-zinc-900 group",children:[t.jsx(Ou,{src:A.image,alt:A.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",fallback:pl(400),onError:no}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent flex flex-col justify-end p-2",children:t.jsx("span",{className:"font-handwriting text-xs md:text-sm font-bold text-white leading-none truncate",children:A.name})})]},A.id))})]}),t.jsx("section",{className:"px-4",children:t.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-900 via-pink-900 to-purple-900 rounded-2xl p-6 border-2 border-yellow-400 shadow-lg text-center",children:[t.jsx(Dt,{className:"absolute top-2 left-2 text-yellow-400/20 w-24 h-24 rotate-[-15deg]"}),t.jsxs("div",{className:"relative z-10 space-y-3",children:[t.jsx("h2",{className:"font-cherry text-3xl text-yellow-400 drop-shadow-md",children:"THE SECRET VAULT"}),t.jsx("p",{className:"font-architects text-sm text-gray-200 leading-relaxed",children:"Clearance & Samples. Massive discounts for Deluxe Members!"}),t.jsx(Ve,{to:"/vault",className:"inline-block w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-black font-bold rounded-full shadow-lg",children:"Enter The Vault"})]})]})}),t.jsx(V,{title:"Stud Earrings",items:H,reference:o,linkTo:"/catalog/stud"}),t.jsx(V,{title:"Dangle Earrings",items:M,reference:c,linkTo:"/catalog/dangle"}),t.jsx("section",{className:"px-4",children:t.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur rounded-xl border border-white/10 p-4 space-y-4 divide-y divide-white/10",children:[t.jsxs(Ve,{to:"/earn-rewards",className:"flex items-center gap-4 pt-1",children:[t.jsx("div",{className:"p-2 bg-pink-900/30 rounded-full text-pink-400",children:t.jsx(ls,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:s.email?`Points: ${s.loyaltyPoints}`:"Loyalty Rewards"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Redeem points for discounts."})]})]}),t.jsxs(Ve,{to:"/affiliate-program",className:"flex items-center gap-4 pt-4",children:[t.jsx("div",{className:"p-2 bg-green-900/30 rounded-full text-green-400",children:t.jsx(Ac,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Partnership Program"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Earn 20% commission."})]})]}),t.jsxs("div",{className:"flex items-center gap-4 pt-4",children:[t.jsx("div",{className:"p-2 bg-cyan-900/30 rounded-full text-cyan-400",children:t.jsx(ur,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Flash Sales"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Daily limited-time offers."})]})]})]})}),t.jsx(V,{title:"Unique Pendants",items:C,reference:u,linkTo:"/catalog/unique",variant:"single"}),t.jsx(V,{title:"Bracelets",items:I,reference:f,linkTo:"/catalog/bracelet"}),t.jsx("section",{className:"px-4",children:t.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-900 to-pink-900 p-6 text-center border border-purple-500/30",children:[t.jsx(ys,{className:"absolute top-2 left-2 text-white/20 w-16 h-16 animate-pulse"}),t.jsxs("div",{className:"relative z-10 space-y-3",children:[t.jsx("h2",{className:"font-cherry text-2xl text-white",children:"Unlock VIP Pricing"}),t.jsxs("p",{className:"text-xs text-gray-200",children:["Save up to ",t.jsx("span",{className:"text-yellow-300 font-bold",children:"50% OFF"})," retail & get monthly free gifts."]}),t.jsx(Ve,{to:"/membership",className:"inline-block w-full py-3 bg-white text-purple-900 font-bold rounded-full shadow-lg mt-2",children:"View Perks"})]})]})}),t.jsx(V,{title:"Jewelry Sets",items:$,reference:h,linkTo:"/catalog/sets"}),t.jsx("section",{className:"px-4 mb-8",children:t.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border-2 border-yellow-600/50 text-center relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-yellow-900/10"}),t.jsxs("div",{className:"relative z-10 space-y-3",children:[t.jsx("h2",{className:"font-cherry text-2xl text-yellow-500",children:"JOIN OUR ARTIST NETWORK"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Jewelry artist? Showcase to 7,000+ collectors. Only 1% commission!"}),t.jsx(Ve,{to:"/artist-partnership",className:"inline-block w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-white font-bold rounded-full shadow-lg",children:"Start Your Shop"}),t.jsxs("p",{className:"text-[10px] text-gray-500",children:["From ",r==="ZAR"?"R19":"$1.50"," / month"]})]})]})})]})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="analytics",nR="firebase_id",rR="origin",iR=60*1e3,aR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Up="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new Ju("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Mn=new ha("analytics","Analytics",oR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(n){if(!n.startsWith(Up)){const e=Mn.create("invalid-gtag-resource",{gtagURL:n});return an.warn(e.message),""}return n}function YN(n){return Promise.all(n.map(e=>e.catch(s=>s)))}function cR(n,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(n,e)),s}function dR(n,e){const s=cR("firebase-js-sdk-policy",{createScriptURL:lR}),r=document.createElement("script"),i=`${Up}?l=${n}&id=${e}`;r.src=s?s==null?void 0:s.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function uR(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function hR(n,e,s,r,i,o){const c=r[i];try{if(c)await e[c];else{const f=(await YN(s)).find(h=>h.measurementId===i);f&&await e[f.appId]}}catch(u){an.error(u)}n("config",i,o)}async function fR(n,e,s,r,i){try{let o=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const u=await YN(s);for(const f of c){const h=u.find(v=>v.measurementId===f),y=h&&e[h.appId];if(y)o.push(y);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,i||{})}catch(o){an.error(o)}}function mR(n,e,s,r){async function i(o,...c){try{if(o==="event"){const[u,f]=c;await fR(n,e,s,u,f)}else if(o==="config"){const[u,f]=c;await hR(n,e,s,r,u,f)}else if(o==="consent"){const[u,f]=c;n("consent",u,f)}else if(o==="get"){const[u,f,h]=c;n("get",u,f,h)}else if(o==="set"){const[u]=c;n("set",u)}else n(o,...c)}catch(u){an.error(u)}}return i}function pR(n,e,s,r,i){let o=function(...c){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=mR(o,n,e,s),{gtagCore:o,wrappedGtag:window[i]}}function gR(n){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(Up)&&s.src.includes(n))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=30,yR=1e3;class bR{constructor(e={},s=yR){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ZN=new bR;function vR(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function wR(n){var c;const{appId:e,apiKey:s}=n,r={method:"GET",headers:vR(s)},i=aR.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let u="";try{const f=await o.json();(c=f.error)!=null&&c.message&&(u=f.error.message)}catch{}throw Mn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:u})}return o.json()}async function NR(n,e=ZN,s){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw Mn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Mn.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new kR;return setTimeout(async()=>{u.abort()},iR),XN({appId:r,apiKey:i,measurementId:o},c,u,e)}async function XN(n,{throttleEndTimeMillis:e,backoffCount:s},r,i=ZN){var u;const{appId:o,measurementId:c}=n;try{await jR(r,e)}catch(f){if(c)return an.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:o,measurementId:c};throw f}try{const f=await wR(n);return i.deleteThrottleMetadata(o),f}catch(f){const h=f;if(!SR(h)){if(i.deleteThrottleMetadata(o),c)return an.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:c};throw f}const y=Number((u=h==null?void 0:h.customData)==null?void 0:u.httpStatus)===503?B0(s,i.intervalMillis,xR):B0(s,i.intervalMillis),v={throttleEndTimeMillis:Date.now()+y,backoffCount:s+1};return i.setThrottleMetadata(o,v),an.debug(`Calling attemptFetch again in ${y} millis`),XN(n,v,r,i)}}function jR(n,e){return new Promise((s,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(s,i);n.addEventListener(()=>{clearTimeout(o),r(Mn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function SR(n){if(!(n instanceof Jn)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class kR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function _R(n,e,s,r,i){if(i&&i.global){n("event",s,r);return}else{const o=await e,c={...r,send_to:o};n("event",s,c)}}async function CR(n,e,s,r){if(r&&r.global){const i={};for(const o of Object.keys(s))i[`user_properties.${o}`]=s[o];return n("set",i),Promise.resolve()}else{const i=await e;n("config",i,{update:!0,user_properties:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(){if(mp())try{await pp()}catch(n){return an.warn(Mn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return an.warn(Mn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function TR(n,e,s,r,i,o,c){const u=NR(n);u.then(j=>{s[j.measurementId]=j.appId,n.options.measurementId&&j.measurementId!==n.options.measurementId&&an.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${j.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(j=>an.error(j)),e.push(u);const f=ER().then(j=>{if(j)return r.getId()}),[h,y]=await Promise.all([u,f]);gR(o)||dR(o,h.measurementId),i("js",new Date);const v=(c==null?void 0:c.config)??{};return v[rR]="firebase",v.update=!0,y!=null&&(v[nR]=y),i("config",h.measurementId,v),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.app=e}_delete(){return delete rl[this.app.options.appId],Promise.resolve()}}let rl={},ab=[];const ob={};let hm="dataLayer",AR="gtag",lb,Fp,cb=!1;function IR(){const n=[];if(pw()&&n.push("This is a browser extension environment."),gw()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),s=Mn.create("invalid-analytics-context",{errorInfo:e});an.warn(s.message)}}function RR(n,e,s){IR();const r=n.options.appId;if(!r)throw Mn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)an.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Mn.create("no-api-key");if(rl[r]!=null)throw Mn.create("already-exists",{id:r});if(!cb){uR(hm);const{wrappedGtag:o,gtagCore:c}=pR(rl,ab,ob,hm,AR);Fp=o,lb=c,cb=!0}return rl[r]=TR(n,ab,ob,e,lb,hm,s),new PR(n)}function MR(n=ul()){n=dn(n);const e=Br(n,Lu);return e.isInitialized()?e.getImmediate():DR(n)}function DR(n,e={}){const s=Br(n,Lu);if(s.isInitialized()){const i=s.getImmediate();if(ia(e,s.getOptions()))return i;throw Mn.create("already-initialized")}return s.initialize({options:e})}function OR(n,e,s){n=dn(n),CR(Fp,rl[n.app.options.appId],e,s).catch(r=>an.error(r))}function QN(n,e,s,r){n=dn(n),_R(Fp,rl[n.app.options.appId],e,s,r).catch(i=>an.error(i))}const db="@firebase/analytics",ub="0.10.19";function LR(){Nn(new ln(Lu,(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return RR(r,i,s)},"PUBLIC")),Nn(new ln("analytics-internal",n,"PRIVATE")),Ds(db,ub),Ds(db,ub,"esm2020");function n(e){try{const s=e.getProvider(Lu).getImmediate();return{logEvent:(r,i,o)=>QN(s,r,i,o),setUserProperties:(r,i)=>OR(s,r,i)}}catch(s){throw Mn.create("interop-component-reg-failed",{reason:s})}}}LR();const zR={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},Ho=[{size:5,mm:49.3},{size:6,mm:51.9},{size:7,mm:54.4},{size:8,mm:57},{size:9,mm:59.5},{size:10,mm:62.1},{size:11,mm:64.6},{size:12,mm:67.2},{size:13,mm:69.7}],UR=()=>{const{id:n}=Dc(),{products:e,addToCart:s,toggleWishlist:r,user:i,shareProduct:o,cart:c,currency:u}=vt(),f=cn(),[h,y]=S.useState(0),[v,j]=S.useState(!1),[E,k]=S.useState(!1),[_,P]=S.useState(!1),[L,U]=S.useState(!1),[F,J]=S.useState(1),[te,H]=S.useState(""),[M,C]=S.useState("Ring Finger"),[I,$]=S.useState(null),[O,V]=S.useState(""),[A,se]=S.useState(null),[fe,je]=S.useState(""),[Ie,le]=S.useState(""),[be,we]=S.useState([]),Z=5,ce=10,[W,ue]=S.useState(Z),B=e.find(Ne=>Ne.id===n),Ce=B?e.filter(Ne=>Ne.category===B.category&&Ne.id!==B.id).slice(0,4):[];S.useEffect(()=>{window.scrollTo(0,0),P(!1)},[n]),S.useEffect(()=>{if(B){const Ne=ss(Wt),Je=MR();QN(Je,"view_item",{currency:u,value:Ne,items:[{item_id:B.id,item_name:B.name,price:Ne}]})}},[B,u]),S.useEffect(()=>{(async()=>{if(B)try{const Je=await os("reviews",{filters:{productId:B.id},orderBy:{column:"created_at",ascending:!1},limit:Math.min(W,ce)});we(Je.map(Et=>({id:Et.id,...Et})))}catch(Je){console.error("Review fetch error:",Je)}})()},[B,W]);const Pe=B!=null&&B.reviews&&Array.isArray(B.reviews)?B.reviews:[],Ue=S.useMemo(()=>{const Ne=[...Pe,...be],Je=new Set,Et=[];for(const zt of Ne){const Bt=((zt==null?void 0:zt.id)??"").toString();if(Bt){if(Je.has(Bt))continue;Je.add(Bt)}Et.push(zt)}const Tt=zt=>{const Bt=(zt==null?void 0:zt.created_at)??(zt==null?void 0:zt.createdAt)??(zt==null?void 0:zt.date);if(!Bt)return 0;if(typeof Bt=="string"){const Yn=Date.parse(Bt);return Number.isFinite(Yn)?Yn:0}if(Bt!=null&&Bt.toDate&&typeof Bt.toDate=="function")try{return Bt.toDate().getTime()}catch{return 0}return Bt instanceof Date?Bt.getTime():0},Ot=Et.sort((zt,Bt)=>Tt(Bt)-Tt(zt)).slice(0,ce);return Ot.slice(0,Math.min(W,Ot.length))},[Pe,be,W]),Qe=S.useMemo(()=>{const Ne=[...Pe,...be],Je=Rt=>{const Ot=(Rt==null?void 0:Rt.created_at)??(Rt==null?void 0:Rt.createdAt)??(Rt==null?void 0:Rt.date);if(!Ot)return 0;if(typeof Ot=="string"){const zt=Date.parse(Ot);return Number.isFinite(zt)?zt:0}if(Ot!=null&&Ot.toDate&&typeof Ot.toDate=="function")try{return Ot.toDate().getTime()}catch{return 0}return Ot instanceof Date?Ot.getTime():0},Et=new Set,Tt=[];for(const Rt of Ne){const Ot=((Rt==null?void 0:Rt.id)??"").toString();if(Ot){if(Et.has(Ot))continue;Et.add(Ot)}Tt.push(Rt)}return Tt.sort((Rt,Ot)=>Je(Ot)-Je(Rt)).slice(0,ce).length},[Pe,be]);S.useEffect(()=>{if(B){if(B.type==="Ring"&&B.ringStock){const Ne=Object.entries(B.ringStock).filter(([Je,Et])=>Et>0).map(([Je])=>Je);Ne.length>0&&V(Ne[0])}(B.type==="Stud"||B.type==="Dangle")&&B.showEarringOptions&&B.earringMaterials&&B.earringMaterials.length>0&&se(B.earringMaterials[0]),B.type==="Pendant"&&B.chainStyles&&B.chainStyles.length>0&&(B.chainStyles.includes("Metal Chain")?je("Metal Chain"):je(B.chainStyles[0]))}},[B]),S.useEffect(()=>{if(fe==="Leather Cord")le("45cm");else if(fe==="Metal Chain"&&(B!=null&&B.pendantChainLengths)){const Ne=Object.keys(B.pendantChainLengths).find(Je=>B.pendantChainLengths[Je]);Ne&&le(Ne)}},[fe,B]);const lt=S.useMemo(()=>{var Ne;return((Ne=c.find(Je=>Je.id===(B==null?void 0:B.id)&&Je.selectedSize===O&&Je.selectedMaterial===(A==null?void 0:A.name)&&Je.selectedChainStyle===fe&&Je.selectedChainLength===Ie))==null?void 0:Ne.quantity)||0},[c,B==null?void 0:B.id,O,A,fe,Ie]),{availableStock:St,isOutOfStock:ye,isStockLimitInCart:Xe,buttonText:nt}=S.useMemo(()=>{var Rt;if(!B)return{availableStock:0,isOutOfStock:!0,isStockLimitInCart:!0,buttonText:"Product not found"};let Ne=B.stock,Je=Ne<=0,Et="Add to Cart";B.type==="Ring"&&(O?(Ne=((Rt=B.ringStock)==null?void 0:Rt[O])||0,Ne<=0&&(Je=!0,Et="Out of Stock")):(Je=!0,Et="Select a Size")),B.isSoldOut&&(Je=!0);const Tt=Ne>0&&lt>=Ne;return!Je&&Tt&&(Et="Stock limit in cart"),{availableStock:Ne,isOutOfStock:Je,isStockLimitInCart:Tt,buttonText:Et}},[B,O,lt]);if(!B)return t.jsx("div",{className:"text-center py-20 text-gray-400",children:"Product not found"});const Ut=i.wishlist.includes(B.id),oe=new Date,Me=B.promoStartsAt?new Date(B.promoStartsAt):null,Be=B.promoExpiresAt?new Date(B.promoExpiresAt):null,ke=Me&&!isNaN(Me.getTime()),We=Be&&!isNaN(Be.getTime()),Nt=(B.promoPrice||0)>0&&(!ke||Me<=oe)&&(!We||Be>oe),ve=u==="ZAR"?B.price:B.priceUSD!==void 0?B.priceUSD:0,Y=u==="ZAR"?B.memberPrice||ve*.8:B.memberPriceUSD!==void 0?B.memberPriceUSD:ve*.8;let Se=ve,jt="none";i.isMember?(Se=Y,Nt&&(i.membershipTier==="deluxe"&&B.promoDeluxeMemberPrice&&B.promoDeluxeMemberPrice>0?(Se=B.promoDeluxeMemberPrice,jt="deluxe"):i.membershipTier==="premium"&&B.promoPremiumMemberPrice&&B.promoPremiumMemberPrice>0?(Se=B.promoPremiumMemberPrice,jt="premium"):i.membershipTier==="basic"&&B.promoBasicMemberPrice&&B.promoBasicMemberPrice>0?(Se=B.promoBasicMemberPrice,jt="basic"):(B.promoPrice||1/0)<Y&&(Se=B.promoPrice))):Nt&&(Se=B.promoPrice);const mt=Nt&&B.promoBasicMemberPrice&&B.promoBasicMemberPrice>0?B.promoBasicMemberPrice:Y;let Wt=Se;A&&(Wt+=A.modifier);const $t=ve+((A==null?void 0:A.modifier)||0),ks=$t-mt,ds=Math.round(ks/$t*100),De=Nt&&(B.promoBasicMemberPrice&&B.promoBasicMemberPrice>0||B.promoDeluxeMemberPrice&&B.promoDeluxeMemberPrice>0),ps=Ne=>Math.round(($t-Ne)/$t*100),us=S.useMemo(()=>[...Pe,...be].filter(Je=>typeof(Je==null?void 0:Je.rating)=="number"&&!Number.isNaN(Je.rating)),[Pe,be]),Ws=us.length>0,fr=Ws?(us.reduce((Ne,Je)=>Ne+Je.rating,0)/us.length).toFixed(1):"4.9",Os=Ws?us.length:128,Ls=B.giftProductId?e.find(Ne=>Ne.id===B.giftProductId):null,Dn=()=>{ye||Xe||(s({...B,price:ve},{selectedSize:O,selectedMaterial:A==null?void 0:A.name,selectedMaterialModifier:A==null?void 0:A.modifier,selectedChainStyle:fe,selectedChainLength:Ie}),Ls&&s(Ls,{}))},On=()=>{const Ne=parseFloat(te);if(!Ne||isNaN(Ne))return;let Je=Ho[0],Et=Math.abs(Ne-Je.mm);for(let Tt=1;Tt<Ho.length;Tt++){const Rt=Math.abs(Ne-Ho[Tt].mm);Rt<Et&&(Et=Rt,Je=Ho[Tt])}Ne>Ho[Ho.length-1].mm+1.5?$(13):$(Je.size),J(4)},gs=()=>{U(!1),J(1),H(""),$(null)},zs=async Ne=>{const Je=window.location.href,Et="Look at this I just bought or saw this isn't it beautiful!",Tt=`${Et} ${Je}`;if(i.id&&!_?(o(B.id),P(!0),alert("You earned 50 Loyalty Points for sharing!")):i.id,Ne==="native"&&navigator.share)try{await navigator.share({title:B.name,text:Et,url:Je})}catch{console.log("Native share cancelled")}else Ne==="whatsapp"?window.open(`https://wa.me/?text=${encodeURIComponent(Tt)}`,"_blank"):Ne==="facebook"&&window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(Je)}&quote=${encodeURIComponent(Et)}`,"_blank")},Vt=JN(B.images[h]||B.images[0]||"",pl(800,800,"Spoil Me Vintage")),_s=()=>u==="ZAR"?"R":"$",ss=(Ne,Je)=>u==="ZAR"?Ne:u==="USD"?Je!==void 0?Je:0:Ne;return t.jsxs("div",{className:"space-y-16 pt-4 pb-16 relative",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-4",children:[t.jsx(Ve,{to:"/",className:"hover:text-white",children:"Home"}),t.jsx("span",{children:"/"}),t.jsx(Ve,{to:`/collections/${encodeURIComponent(B.category)}`,className:"hover:text-white",children:B.category}),t.jsx("span",{children:"/"}),t.jsx("span",{className:"text-gray-300 truncate max-w-[200px]",children:B.name})]}),E&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>k(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-400",children:[t.jsx(lm,{size:32}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"Verified Purchases Only"})]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-4",children:"To maintain the integrity of our reviews, we only accept feedback from verified customers who have purchased this specific item."}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800 mb-6",children:[t.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"How it works:"}),t.jsxs("ul",{className:"text-xs text-gray-400 space-y-3",children:[t.jsxs("li",{className:"flex gap-2 items-start",children:[t.jsx(ur,{size:14,className:"text-cyan-400 shrink-0 mt-0.5"})," ",t.jsxs("span",{children:["A secure review link will be sent to you ",t.jsx("strong",{children:"25 days after purchase"}),"."]})]}),t.jsxs("li",{className:"flex gap-2 items-start",children:[t.jsx(Rn,{size:14,className:"text-yellow-400 shrink-0 mt-0.5"})," ",t.jsxs("span",{children:["Review honestly and earn ",t.jsx("strong",{children:"100 Loyalty Points"}),"!"]})]}),t.jsxs("li",{className:"flex gap-2 items-start",children:[t.jsx(ls,{size:14,className:"text-pink-500 shrink-0 mt-0.5"})," ",t.jsx("span",{children:"Use points (1000 pts = R10) for discounts on your next order."})]})]})]}),t.jsx("button",{onClick:()=>k(!1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-xl font-semibold transition-colors",children:"Understood"})]})]}),L&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:gs}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[t.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[t.jsx(sb,{className:"text-pink-500",size:20})," Find Your Ring Size"]}),t.jsx("button",{onClick:gs,className:"text-gray-500 hover:text-white",children:t.jsx(mu,{size:16})})]}),t.jsxs("div",{className:"min-h-[250px] flex flex-col",children:[F===1&&t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsxs("div",{className:"bg-pink-900/20 p-4 rounded-xl border border-pink-500/20 text-center",children:[t.jsx("span",{className:"text-3xl block mb-2",children:""}),t.jsx("p",{className:"text-sm text-pink-200 font-semibold",children:"Step 1"})]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Take a flexible measuring tape or a piece of string and wrap it around the base of the finger you want to wear the ring on."}),t.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/20 rounded-lg",children:[t.jsxs("p",{className:"text-xs text-yellow-400 font-bold flex items-center gap-2",children:[t.jsx(mu,{size:14})," Important:"]}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Please read your measurement in Millimeters (MM), not CM."})]})]}),F===2&&t.jsxs("div",{className:"flex-1 space-y-6 text-center flex flex-col justify-center",children:[t.jsx("p",{className:"text-white font-semibold",children:"Did you measure your finger with a tape or string?"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>J(3),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-xl font-bold transition-all",children:"Yes, I measured my finger"}),t.jsx("button",{onClick:()=>J(1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-gray-300 rounded-xl font-medium transition-all",children:"Back to Instructions"})]})]}),F===3&&t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Which finger?"}),t.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-sm",value:M,onChange:Ne=>C(Ne.target.value),children:[t.jsx("option",{children:"Thumb"}),t.jsx("option",{children:"Index Finger"}),t.jsx("option",{children:"Middle Finger"}),t.jsx("option",{children:"Ring Finger"}),t.jsx("option",{children:"Pinky Finger"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Measured Length (MM)"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",placeholder:"e.g. 54.5",className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-lg font-bold focus:border-pink-500 focus:outline-none",value:te,onChange:Ne=>H(Ne.target.value)}),t.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-bold",children:"mm"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please enter the exact circumference."})]})]}),F===4&&t.jsxs("div",{className:"flex-1 text-center flex flex-col justify-center space-y-6",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Based on your ",M," measurement:"]}),t.jsxs("div",{className:"inline-block p-6 bg-zinc-800 rounded-full border-4 border-pink-500 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[t.jsx("span",{className:"block text-xs text-gray-400 uppercase tracking-wide",children:"US Size"}),t.jsx("span",{className:"text-4xl font-black text-white",children:I})]})]}),B.ringStock&&B.ringStock[(I==null?void 0:I.toString())||""]>0?t.jsxs("button",{onClick:()=>{V((I==null?void 0:I.toString())||""),gs()},className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold transition-all flex items-center justify-center gap-2",children:[t.jsx(ut,{size:18})," Select Size ",I]}):t.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/20 rounded-lg text-red-300 text-sm",children:["Sorry, Size ",I," is currently out of stock."]})]})]}),t.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-800",children:[F>1&&F<4?t.jsxs("button",{onClick:()=>J(Ne=>Ne-1),className:"text-gray-400 hover:text-white text-sm flex items-center gap-1",children:[t.jsx(oa,{size:14})," Back"]}):t.jsx("div",{}),F===1&&t.jsxs("button",{onClick:()=>J(2),className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500",children:["Next Step ",t.jsx(Qs,{size:14,className:"inline"})]}),F===3&&t.jsx("button",{onClick:On,disabled:!te,className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Get My Size"}),F===4&&t.jsx("button",{onClick:gs,className:"text-gray-400 hover:text-white text-sm",children:"Close"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden bg-zinc-900 shadow-lg border border-gray-800 relative group",children:[t.jsx(Ou,{src:Vt,alt:B.name,className:"w-full h-full object-cover opacity-95",onError:no}),t.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[B.isNewArrival&&t.jsx("span",{className:"bg-cyan-600/90 text-white text-xs font-bold px-3 py-1 rounded-full w-fit",children:"NEW"}),i.isMember&&t.jsxs("span",{className:"bg-purple-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-purple-400 flex items-center gap-1 w-fit",children:[t.jsx(Dt,{size:12,fill:"currentColor"}),jt!=="none"?`${jt.toUpperCase()} PRICE`:"MEMBER DEAL"]})]}),Nt&&!i.isMember&&t.jsx("span",{className:"absolute top-4 right-4 bg-green-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-[0_0_10px_rgba(74,222,128,0.5)]",children:"PROMO"})]}),t.jsx("div",{className:"grid grid-cols-4 gap-4",children:B.images.map((Ne,Je)=>t.jsx("button",{onClick:()=>y(Je),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${h===Je?"border-pink-500 opacity-100 shadow-[0_0_10px_rgba(236,72,153,0.4)]":"border-gray-800 opacity-60 hover:opacity-100"}`,children:t.jsx(Ou,{src:Ne,alt:`View ${Je}`,className:"w-full h-full object-cover",onError:no})},Je))})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[t.jsx("span",{className:"uppercase tracking-wider font-semibold text-cyan-400",children:B.category}),t.jsx("span",{children:""}),t.jsxs("div",{className:"flex items-center text-yellow-400 gap-1",children:[t.jsx(Rn,{size:14,fill:"currentColor"})," ",fr," (",Os," reviews)"]})]}),t.jsx("h1",{className:"text-[26px] font-bold text-white mb-4",children:B.name}),t.jsxs("div",{className:"flex flex-col gap-1",children:[B.compareAtPrice&&B.compareAtPrice>Wt&&t.jsxs("div",{className:"flex items-center gap-2 relative",children:[t.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["RRP ",_s(),ss(B.compareAtPrice,B.compareAtPriceUSD).toFixed(2)]}),t.jsx("button",{onClick:()=>j(!v),className:"text-gray-500 hover:text-cyan-400",children:t.jsx(sh,{size:14})}),v&&t.jsx("div",{className:"absolute top-6 left-0 z-10 bg-zinc-950 border border-gray-700 p-3 rounded-lg shadow-xl w-64 text-xs text-gray-300 leading-relaxed",children:"Recommended retail price (RRP) set by the manufacturer and used for price comparison purposes."})]}),t.jsxs("div",{className:"flex items-baseline gap-3",children:[t.jsxs("span",{className:`text-[32px] font-bold drop-shadow-sm ${i.isMember?"text-purple-400":"text-green-400"}`,children:[_s(),ss(Wt).toFixed(2)]}),$t>Wt+.01&&t.jsxs("span",{className:"text-lg text-gray-600 line-through",children:[_s(),ss($t).toFixed(2)]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[Nt&&t.jsxs("div",{className:"flex items-center gap-2 text-xs bg-green-900/30 border border-green-500/30 text-green-400 px-2 py-1 rounded w-fit",children:[t.jsx(ur,{size:12})," Ends: ",new Date(B.promoExpiresAt).toLocaleDateString()]}),i.isMember&&t.jsxs("div",{className:"flex items-center gap-2 text-xs bg-purple-900/30 border border-purple-500/30 text-purple-400 px-2 py-1 rounded w-fit font-bold",children:[t.jsx(Dt,{size:12})," ",jt!=="none"?jt:"Member"," Pricing Applied"]})]}),t.jsx("div",{className:"mt-3 flex items-center gap-2 text-sm",children:ye?t.jsx("span",{className:"bg-red-600 text-white font-black px-3 py-1 rounded-lg shadow-[0_0_10px_rgba(220,38,38,0.8)] border-2 border-red-400 animate-pulse",children:"Just SOLD"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${St>0?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.8)]":"bg-red-500"}`}),t.jsx("span",{className:`${St>0?St<=5?"text-orange-400":"text-green-400":"text-red-400"} font-bold`,children:St>0?St<=5?`Only ${St} left!`:"In Stock":"Out of Stock"})]})})]})]}),!i.isMember&&t.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-900/50 rounded-xl p-5 relative overflow-hidden group",children:[t.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:t.jsx(Dt,{size:80,className:"text-purple-500 transform rotate-12"})}),t.jsxs("h3",{className:"text-purple-400 font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2",children:[t.jsx(Dt,{size:16,fill:"currentColor"})," Unlock Membership Savings"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-zinc-800/50 border border-zinc-700/50",children:[t.jsx("span",{className:"text-gray-400",children:"Retail Price"}),t.jsxs("span",{className:"text-gray-300 font-medium",children:[_s(),ss($t).toFixed(2)]})]}),De?t.jsxs("div",{className:"space-y-2",children:[B.promoBasicMemberPrice&&B.promoBasicMemberPrice>0&&t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Basic Member"}),t.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[ps(B.promoBasicMemberPrice),"% Off"]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[_s(),ss(B.promoBasicMemberPrice).toFixed(0)]})})]}),B.promoPremiumMemberPrice&&B.promoPremiumMemberPrice>0&&B.promoPremiumMemberPrice!==B.promoBasicMemberPrice&&t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Premium Member"}),t.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[ps(B.promoPremiumMemberPrice),"% Off"]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[_s(),ss(B.promoPremiumMemberPrice).toFixed(0)]})})]}),B.promoDeluxeMemberPrice&&B.promoDeluxeMemberPrice>0&&t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-lime-900/20 border border-lime-500/40",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-lime-200 font-bold text-xs",children:"Deluxe Member"}),t.jsxs("span",{className:"text-xs text-lime-300 uppercase font-bold",children:[ps(B.promoDeluxeMemberPrice),"% Off"]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("span",{className:"block text-lime-400 font-bold text-lg",children:[_s(),ss(B.promoDeluxeMemberPrice).toFixed(0)]})})]})]}):t.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[t.jsx("span",{className:"text-purple-200 font-bold",children:"Member Price"}),t.jsxs("div",{className:"text-right",children:[t.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[_s(),ss(mt).toFixed(2)]}),t.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:["Save ",ds,"%"]})]})]})]}),t.jsxs("div",{className:"mt-4 text-center",children:[t.jsx("button",{onClick:()=>f("/membership"),className:"w-full py-3 text-sm font-bold uppercase tracking-widest text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded hover:shadow-[0_0_15px_rgba(168,85,247,0.4)] transition-all",children:"Join Now"}),t.jsx("p",{className:"text-[10px] text-red-400 font-bold mt-2 uppercase tracking-wide animate-pulse",children:"LIMITED places Available"})]})]}),t.jsxs("div",{className:"space-y-6 mt-6 border-t border-gray-800 pt-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-cherry text-2xl text-pink-500 mb-2 tracking-wide",children:"Description"}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:B.description})]}),B.whenAndHowToWear&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-cherry text-2xl text-cyan-400 mb-2 tracking-wide",children:"Stylish Suggestions"}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:B.whenAndHowToWear})]}),B.material&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-cherry text-2xl text-purple-400 mb-2 tracking-wide",children:"Materials"}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:B.material})]}),B.isUniquePendant&&t.jsxs("div",{className:"bg-orange-900/10 border border-orange-500/20 rounded-xl p-5 mt-4",children:[t.jsxs("h3",{className:"font-cherry text-xl text-orange-400 mb-3 tracking-wide flex items-center gap-2",children:[t.jsx(mu,{size:20})," Oxidized Jewelry Care"]}),t.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"This unique pendant features a deliberate oxidized finish (darkened patina) to enhance the vintage detail."}),t.jsxs("ul",{className:"text-xs text-gray-400 space-y-2 list-disc pl-4",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Do NOT use liquid silver cleaner or dips:"})," These will strip the antique finish instantly."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Avoid polishing cloths:"})," Aggressive rubbing can remove the darkened details."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Keep it dry:"})," Remove before swimming or showering to preserve the wire wrapping."]}),t.jsx("li",{children:"To clean, simply wipe gently with a soft, dry cotton cloth."})]})]})]}),Ls&&t.jsxs("div",{className:"bg-gradient-to-r from-purple-900/40 to-pink-900/40 border border-purple-500/30 rounded-xl p-4 flex items-center gap-4 shadow-[0_0_15px_rgba(168,85,247,0.1)]",children:[t.jsx("div",{className:"p-3 bg-black/50 rounded-full text-pink-400 border border-pink-500/30",children:t.jsx(ls,{size:24})}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-pink-400 uppercase tracking-wider mb-1",children:"Free Gift Included"}),t.jsx("h4",{className:"font-bold text-white",children:Ls.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:["Value: R",B.giftValue||Ls.price]})]}),t.jsx("div",{className:"ml-auto",children:t.jsx("img",{src:Ls.images[0],alt:"Gift",className:"w-12 h-12 rounded object-cover border border-gray-700"})})]}),t.jsxs("div",{className:"space-y-6 py-4 border-t border-gray-800",children:[B.type==="Ring"&&B.ringStock&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Size"}),t.jsxs("button",{onClick:()=>{U(!0),J(1)},className:"text-xs text-pink-400 hover:text-pink-300 flex items-center gap-1 underline decoration-dotted underline-offset-4",children:[t.jsx(sb,{size:14})," Find My Ring Size"]})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(B.ringStock).map(([Ne,Je])=>t.jsx("button",{disabled:Je===0,onClick:()=>V(Ne),className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium border transition-all ${O===Ne?"bg-pink-600 border-pink-600 text-white shadow-[0_0_10px_rgba(236,72,153,0.5)]":Je===0?"bg-zinc-900 border-gray-800 text-gray-600 cursor-not-allowed decoration-slice line-through":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:Ne},Ne))}),O&&B.ringStock[O]>0&&t.jsxs("p",{className:`text-xs mt-2 flex items-center gap-1 ${B.ringStock[O]<=5?"text-orange-400 font-bold":"text-green-400"}`,children:[t.jsx(ut,{size:12}),B.ringStock[O]<=5?`Only ${B.ringStock[O]} left in stock!`:"In Stock"]}),O&&B.ringStock[O]===0&&t.jsx("p",{className:"text-xs text-red-500 mt-2 font-bold",children:"Out of stock for this size."})]}),(B.type==="Stud"||B.type==="Dangle")&&B.showEarringOptions&&B.earringMaterials&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Material"}),t.jsx("div",{className:"grid gap-3",children:B.earringMaterials.map(Ne=>t.jsxs("div",{onClick:()=>se(Ne),className:`relative p-4 rounded-xl border cursor-pointer transition-all ${(A==null?void 0:A.name)===Ne.name?"bg-pink-900/10 border-pink-500 shadow-[0_0_10px_rgba(236,72,153,0.2)]":"bg-zinc-900 border-gray-800 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`font-medium text-sm ${(A==null?void 0:A.name)===Ne.name?"text-white":"text-gray-300"}`,children:Ne.name}),t.jsx("span",{className:"text-xs font-bold text-pink-400",children:Ne.modifier>0?`+${_s()}${ss(Ne.modifier).toFixed(0)}`:""})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Ne.description}),(A==null?void 0:A.name)===Ne.name&&t.jsx("div",{className:"absolute top-3 right-3 w-4 h-4 bg-pink-500 rounded-full flex items-center justify-center",children:t.jsx(ut,{size:10,className:"text-white"})})]},Ne.name))})]}),B.type==="Pendant"&&B.chainStyles&&B.chainStyles.length>0&&t.jsxs("div",{className:"space-y-6",children:[B.chainStyles.length>1&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Chain Style"}),t.jsx("div",{className:"flex gap-4",children:B.chainStyles.map(Ne=>t.jsx("button",{onClick:()=>je(Ne),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all ${fe===Ne?"bg-pink-600 border-pink-600 text-white":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:Ne},Ne))})]}),fe==="Metal Chain"&&B.pendantChainLengths&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Length"}),t.jsx("div",{className:"grid gap-2",children:Object.keys(B.pendantChainLengths).filter(Ne=>B.pendantChainLengths[Ne]).map(Ne=>t.jsxs("button",{onClick:()=>le(Ne),className:`text-left p-3 rounded-lg border transition-all ${Ie===Ne?"bg-cyan-900/20 border-cyan-500":"bg-zinc-900 border-gray-800 hover:bg-zinc-800"}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:`text-sm font-medium ${Ie===Ne?"text-cyan-400":"text-gray-200"}`,children:Ne}),Ie===Ne&&t.jsx(ut,{size:14,className:"text-cyan-400"})]}),t.jsx("p",{className:"text-xs text-gray-500",children:zR[Ne]||""})]},Ne))})]}),fe==="Leather Cord"&&t.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded-lg border border-gray-700 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gray-700 rounded-full",children:t.jsx(ut,{size:14,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-white",children:"Fixed Length: 45cm"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Standard leather cord length."})]})]})]})]}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsxs("button",{onClick:Dn,disabled:ye||Xe,className:"flex-1 bg-pink-600 text-white py-4 rounded-xl font-semibold hover:bg-pink-500 transition-all flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(236,72,153,0.4)] text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(ca,{size:20})," ",nt]}),t.jsx("button",{onClick:()=>r(B.id),className:`p-4 rounded-xl border transition-colors ${Ut?"border-pink-500 bg-pink-500/10 text-pink-500":"border-gray-700 hover:bg-zinc-800 text-gray-400 hover:text-white"}`,children:t.jsx(zp,{size:24,fill:Ut?"currentColor":"none"})})]}),t.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/20 to-purple-900/20 border border-cyan-500/30 rounded-xl p-5 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 pointer-events-none",children:t.jsx(so,{size:60})}),t.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-2",children:[t.jsx(ls,{size:18,className:"text-pink-500"})," Share & Earn"]}),t.jsxs("p",{className:"text-xs text-gray-300 mb-4 max-w-sm",children:["Share this treasure with friends and earn ",t.jsx("strong",{className:"text-green-400",children:"50 Loyalty Points"})," instantly!"]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>zs("whatsapp"),className:"flex-1 py-2 bg-[#25D366] hover:bg-[#1ebc57] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(37,211,102,0.4)]",children:[t.jsx(ll,{size:16})," WhatsApp"]}),t.jsxs("button",{onClick:()=>zs("facebook"),className:"flex-1 py-2 bg-[#1877F2] hover:bg-[#166fe5] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(24,119,242,0.4)]",children:[t.jsx(oc,{size:16})," Facebook"]}),navigator.share&&t.jsxs("button",{onClick:()=>zs("native"),className:"flex-1 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all",children:[t.jsx(so,{size:16})," More"]})]}),_&&t.jsxs("div",{className:"mt-3 text-xs text-green-400 font-bold flex items-center gap-1 justify-center animate-in fade-in zoom-in",children:[t.jsx(ut,{size:12})," 50 Points Awarded!"]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4 pt-8 border-t border-gray-800",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(hr,{className:"text-cyan-400 mt-1",size:20}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-sm text-gray-200",children:"Free Delivery"}),t.jsx("p",{className:"text-xs text-gray-500",children:"On orders over R500 (PUDO/PAXI only)"})]})]})})]})]}),t.jsxs("div",{className:"pt-12 border-t border-gray-800 animate-in fade-in slide-in-from-bottom-10 duration-700",children:[B.isUniquePendant&&t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl mb-8 flex gap-3 items-start",children:[t.jsx(th,{className:"text-purple-400 shrink-0 mt-1",size:20}),t.jsxs("p",{className:"text-sm text-gray-300",children:[t.jsx("strong",{children:"Please note:"})," As this is a one-of-a-kind treasure, these reviews reflect experiences from customers who have purchased similar unique pendants from our collection."]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"font-cherry text-[26px] font-bold text-white flex items-center gap-3",children:["Customer Reviews",t.jsx("span",{className:"text-sm font-sans font-normal text-gray-500 bg-zinc-900 px-3 py-1 rounded-full",children:Qe})]}),t.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[t.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-green-900/20 border border-green-500/30 text-green-400 px-2 py-1 rounded text-xs font-bold w-fit",children:[t.jsx(lm,{size:14,fill:"currentColor",className:"text-green-500"})," Verified Purchases Only"]}),t.jsx("p",{className:"text-xs text-gray-500 max-w-md",children:"To ensure authenticity, only customers who have purchased this item can leave a review."})]})]}),t.jsx("button",{onClick:()=>k(!0),className:"px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg border border-gray-700 hover:border-gray-600 transition-all flex items-center gap-2 text-sm font-semibold shadow-lg",children:"Write a review"})]}),Qe>0?t.jsxs("div",{className:"space-y-8",children:[Ue.map((Ne,Je)=>{var Et;return t.jsxs("div",{className:"flex flex-col md:flex-row gap-6 border-b border-gray-800 pb-8 last:border-0",children:[t.jsxs("div",{className:"md:w-48 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-white font-bold text-xs",children:(Ne.userName||Ne.name||"Verified Buyer").charAt(0)}),t.jsx("span",{className:"font-bold text-gray-200 text-sm",children:Ne.userName||Ne.name||"Verified Buyer"})]}),t.jsxs("div",{className:"flex items-center gap-1 ml-10 mb-1",children:[t.jsx(lm,{size:12,className:"text-green-500"}),t.jsx("span",{className:"text--[10px] text-green-500 font-medium",children:"Verified Buyer"})]}),t.jsx("p",{className:"text-xs text-gray-500 ml-10 mb-2",children:Ne.location||"Unknown"}),t.jsxs("div",{className:"flex items-center gap-1 ml-10",children:[t.jsx("div",{className:"flex text-yellow-400",children:[1,2,3,4,5].map(Tt=>t.jsx(Rn,{size:12,fill:Tt<=Math.round(Ne.rating||5)?"currentColor":"none",className:Tt<=Math.round(Ne.rating||5)?"text-yellow-400":"text-gray-700"},Tt))}),t.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["(",Ne.rating||5,")"]})]})]}),t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl rounded-tl-none border border-gray-800/50",children:[t.jsxs("p",{className:"text-gray-300 text-sm italic mb-3 leading-relaxed",children:['"',Ne.content||Ne.comment||Ne.text,'"']}),t.jsx("p",{className:"text-xs text-gray-500 font-medium text-right",children:Ne.date||((Et=Ne.createdAt)!=null&&Et.toDate?Ne.createdAt.toDate().toLocaleDateString():"Recent")})]})})]},Ne.id||`legacy-${Je}`)}),Ue.length<Qe&&Ue.length<ce&&t.jsx("div",{className:"text-center pt-4",children:t.jsx("button",{onClick:()=>ue(Ne=>Math.min(Ne+Z,ce)),className:"w-full py-2 text-gold text-sm underline hover:text-white transition-colors",children:"Load More Customer Reviews"})})]}):t.jsx("div",{className:"bg-zinc-900/30 border border-dashed border-gray-800 rounded-xl p-8 text-center",children:t.jsx("p",{className:"text-gray-500 text-sm",children:"No reviews yet. Be the first to own and review this treasure!"})})]}),Ce.length>0&&t.jsxs("div",{className:"pt-12 border-t border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-end mb-6",children:[t.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white flex items-center gap-2",children:[t.jsx(ys,{size:20,className:"text-pink-500"})," More from ",B.category]}),t.jsxs(Ve,{to:`/collections/${encodeURIComponent(B.category)}`,className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View Collection ",t.jsx(Qs,{size:14})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Ce.map(Ne=>t.jsx(Bc,{product:Ne},Ne.id))})]})]})},su={IS_SANDBOX:!1,MERCHANT_ID:"113371222",MERCHANT_KEY:"cbhnt80ljkt7g",getProcessUrl:()=>"https://www.payfast.co.za/eng/process",getUrls:()=>{const n=window.location.origin;return{return_url:`${n}/#/profile`,cancel_url:`${n}/#/cart`,notify_url:`${n}/api/notify`}}},$p=S.forwardRef(({amount:n,itemName:e,email:s,returnUrl:r,cancelUrl:i,notifyUrl:o,customStr1:c,customStr2:u,customStr3:f,customInt1:h,isSubscription:y=!1,frequency:v=3,cycles:j=0},E)=>{const k=S.useRef(null);S.useImperativeHandle(E,()=>({submit:()=>{k.current&&k.current.submit()}}));const _=su.getUrls(),P=su.MERCHANT_ID,L=su.MERCHANT_KEY,U=new Date;U.setDate(U.getDate()+1);const F=U.toISOString().split("T")[0];return t.jsxs("form",{ref:k,action:su.getProcessUrl(),method:"POST",className:"hidden",children:[t.jsx("input",{type:"hidden",name:"merchant_id",value:P}),t.jsx("input",{type:"hidden",name:"merchant_key",value:L}),t.jsx("input",{type:"hidden",name:"return_url",value:r||_.return_url}),t.jsx("input",{type:"hidden",name:"cancel_url",value:i||_.cancel_url}),t.jsx("input",{type:"hidden",name:"notify_url",value:o||_.notify_url}),t.jsx("input",{type:"hidden",name:"amount",value:n.toFixed(2)}),t.jsx("input",{type:"hidden",name:"item_name",value:e}),t.jsx("input",{type:"hidden",name:"email_address",value:s||""}),c&&t.jsx("input",{type:"hidden",name:"custom_str1",value:c}),u&&t.jsx("input",{type:"hidden",name:"custom_str2",value:u}),f&&t.jsx("input",{type:"hidden",name:"custom_str3",value:f}),h&&t.jsx("input",{type:"hidden",name:"custom_int1",value:h}),y&&t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"hidden",name:"subscription_type",value:"1"}),t.jsx("input",{type:"hidden",name:"billing_date",value:F}),t.jsx("input",{type:"hidden",name:"recurring_amount",value:n.toFixed(2)}),t.jsx("input",{type:"hidden",name:"frequency",value:v}),t.jsx("input",{type:"hidden",name:"cycles",value:j})]})]})}),nu={"Eastern Cape":{"Gqeberha (Port Elizabeth)":["PEP Pier 14 (Ground Floor, 444 Govan Mbeki Ave)","PEP Home Walmer Park (Shop 87A, Walmer Park Shopping Centre)","PEP Greenacres","PEP Newton Park","PEP Summerstrand"],"East London":["PEP EL CBD (32 Oxford St)","PEP Hemingways Mall (Shop UG54, Hemingways Mall)","PEP Vincent Park","PEP Beacon Bay","PEP Gonubie"],Mthatha:["PEP Mthatha BT Ngebs City (Shop 89, BT Ngebs City)","PEP Mthatha Circus Triangle (Shop 7, Circus Triangle)","PEP Mthatha Plaza"],"Makhanda (Grahamstown)":["PEP Grahamstown High Street (48 High St)","PEP Market Square"],"Queenstown (Komani)":["PEP Queenstown Lukhanji Mall (Shop 45, Lukhanji Mall)"],Uitenhage:["PEP Uitenhage Mall","PEP Corkwood Square"],"Jeffreys Bay":["PEP Fountains Mall","PEP Jeffrey's Bay CBD"],"King William's Town":["PEP King William's Town CBD","PEP Metlife Mall"]},"Free State":{Bloemfontein:["PEP BFN St Andrew St (45 St Andrew St)","PEP Home Mimosa Mall (Mimosa Mall, 131 Kellner St)","PEP Loch Logan","PEP Fleurdal","PEP Northridge Mall"],Welkom:["PEP Welkom Bok Street (Shop 22A, Bok Street)","PEP Welkom Goldfields Mall (Shop U5, Goldfields Mall)","PEP Boitumelo Junction"],Bethlehem:["PEP Bethlehem Dihlabeng Mall (Shop 52, Dihlabeng Mall)","PEP Bethlehem CBD"],Sasolburg:["PEP Sasolburg (Shop 9 Sake Complex, Wandellaan Street)","PEP Sasolburg Mall"],Parys:["PEP Parys (Cnr Kort Street & Middle Street)"],Kroonstad:["PEP Kroonstad Reitz Street (21 Reitz St)","PEP Maokeng Mall"]},Gauteng:{Johannesburg:["PEP JHB Carlton Centre (C/O Commissioner St & Kruis Sts)","PEP Home Jabulani Mall (Shop 84, Jabulani Mall, Soweto)","PEP Sandton City (Shop U12, Sandton City, Rivonia Rd)","PEP Jozi CBD","PEP Braamfontein","PEP Rosebank Mall","PEP Mellville","PEP Cresta","PEP Clearwater Mall"],Pretoria:["PEP PTA Central (Cnr Paul Kruger & Pretorius St)","PEP Home Menlyn Park (Menlyn Park, Garsfontein Road)","PEP Centurion Mall (Shop 15, Centurion Mall, Heuwel Ave)","PEP Sunnyside","PEP Brooklyn","PEP Kolonnade","PEP Wonderpark"],Soweto:["PEP Maponya Mall","PEP Jabulani Mall","PEP Bara Mall","PEP Dobsonville"],Centurion:["PEP Centurion Mall","PEP Lyttelton","PEP Mall @ Reds","PEP Forest Hill"],Midrand:["PEP Mall of Africa","PEP Boulders","PEP Midrand CBD"],Benoni:["PEP Benoni Lakeside Mall (Shop L20, Lakeside Mall, Tom Jones St)","PEP Northmead Square"],Boksburg:["PEP East Rand Mall","PEP Sunward Park"],Krugersdorp:["PEP Krugersdorp Cnr Ockerse (Cnr Ockerse & Human Street)","PEP Krugersdorp Westgate (Shop 30, Westgate Shopping Centre)"],Alberton:["PEP Alberton City (SHOP L106, Alberton City, Voortrekker Street)"],Vereeniging:["PEP Vereeniging Arcon Park (Arcon Park Shopping Centre)","PEP Vereeniging CBD (12 Joubert Street)"]},"KwaZulu-Natal":{Durban:["PEP Durban Dr Pixley Kaseme St (442 Dr Pixley Kaseme Street)","PEP Bluff Towers (Shop 94 Bluff Twrs, 15 Tara Rd)","PEP Home Pavilion (Shop L94, The Pavilion Shopping Centre)","PEP Durban Workshop","PEP Musgrave","PEP Berea","PEP South Beach","PEP Ushaka"],Umhlanga:["PEP Gateway","PEP Crescent","PEP Cornubia"],Pietermaritzburg:["PEP PMB Liberty Mall (Shop 15, Liberty Midlands Mall)","PEP PMB CBD (335 Church Street)","PEP Greater Edendale"],"Richards Bay":["PEP Cell Richards Bay Boardwalk (Shop U004, Boardwalk Inkwazi)","PEP Richards Bay Checkers (Shop 17A, Checkers Centre)"],Ballito:["PEP Ballito Junction","PEP Lifestyle Centre"],Newcastle:["PEP Newcastle Mall","PEP Amajuba Mall"],"Port Shepstone":["PEP Port Shepstone (Cnr Escombe & Wooley St)","PEP South Coast Mall"],Ladysmith:["PEP Ladysmith Murchison Mall (Shop LG11, Murchison Mall)"],Kokstad:["PEP Kokstad Main Street (Shop 1 Spargs Building, 40 Main Street)"]},Limpopo:{Hoedspruit:["PEP Hoedspruit (Wildlife Shop 12)","PEP Hoedspruit Centre"],Ohrigstad:["PEP Ohrigstad (Potgieter St)"],Metz:["PEP Metz Mahlakung Shopping Centre (Shop 7)","PEP Cell Metz (Shop 11)"],Phalaborwa:["PEP Home Ba-phalaborwa Eden Square (Shop 13)","PEP Phalaborwa Shoprite Centre (Shop 8)","PEP Phalaborwa Mall (Shop 5)","PEP Cell Ba-phalaborwa (Shop 7C)","PEP Ba-phalaborwa Checkers (Shop 9)","PEP Phalaborwa Standard Bank Centre (Shop B1)","PEP Ba-phalaborwa Namakwale Crossing (Shop 7)","PEP Cell Phalaborwa Namakgale Crossing (Shop 26)","PEP Lulekani Spar Centre (Shop A3)"],Burgersfort:["PEP Home Burgersfort Tubatse (Shop L50)","PEP Cell Burgersfort Morone Centre (Shop 23A)","PEP Burgersfort Morone Shopping Centre (Shop 5 & 6)","PEP Burgersfort Twin City Mall (Shop 17)","PEP Cell Burgersfort Twin City (Shop 5)","PEP Cell Burgersfort Twin City Shop 41","PEP Burgersfort Platinum Place (Shop 1-3)","PEP Cell Burgersfort Castle Square (Shop 10)","PEP Burgersfort Castle Square (Shop 8)","PEP Burgersfort Burgersfort Mall (Shop 18)","PEP Cell Burgersfort Mall (Shop 28)","PEP Burgersfort Tubatse Mall (Shop L87)","PEP Cell Burgersfort Tubatse Crossing (Shop L57)"],Steelpoort:["PEP Home Steelpoort (Steelpoort Centre)","PEP Steelpoort (Shop 5)","PEP Cell Steelpoort Shopping Centre (Shop 19)"],Polokwane:["PEP Polokwane CBD (Cnr Grobler & Thabo Mbeki St)","PEP Mall of the North (Shop 10, Mall of the North)","PEP Savanna Mall","PEP Limpopo Mall"],Tzaneen:["PEP Tzaneen Tzaneng Mall (Shop B5, Tzaneng Mall, Danie Joubert St)","PEP Tzaneen CBD","PEP Tzaneen Crossing"],Thohoyandou:["PEP Thohoyandou Venda Plaza (Shop B1, Venda Plaza)","PEP Home Thohoyandou (Next to Shoprite, Thohoyandou)","PEP Thavhani Mall","PEP Mvyu"],Mokopane:["PEP Mokopane Mall","PEP Crossing"],"Makhado (Louis Trichardt)":["PEP Louis Trichardt Burger Str (Cnr Burger St & Songozwi Rd)"]},Mpumalanga:{Acornhoek:["PEP Home Acornhoek Mall (Shop 27)","PEP Acornhoek Plaza Extension (Shop 75)","PEP Cell Acornhoek Plaza (Shop 71)","PEP Cell Acornhoek Mall (Shop 3)","PEP Acornhoek Mall (Shop 10)","PEP Cell Acornhoek Mall (Shop 33B)","PEP Acornhoek Shopping Centre (Station Centre)","PEP Cell Acornhoek Shopping Centre"],Thulamahashe:["PEP Cell Thulamahashe (Thula Mall)","PEP Thulamahashe Thula Mall (Shop 17)","PEP Cell Thulamahashe Plaza (Shop 103)","PEP Thulamahashe (Plaza Shop 7)","PEP Cell Thulamahashe Plaza (Shop 14)"],Dwarsloop:["PEP Home Dwarsloop Mall (Shop 208)","PEP Dwarsloop Mall (Shop 66)","PEP Cell Dwarsloop Mall (Shop 48)"],Bushbuckridge:["PEP Bushbuckridge Twin City Mall (Shop 9)","PEP Cell Bushbuckridge Twin City Mall (Shop 2A)","PEP Cell Bushbuckridge Shopping Centre (Shop 1B)","PEP Bushbuckridge Shopping Centre (Shop 6)"],Graskop:["PEP Graskop (Spar Centre)"],Mkhuhlu:["PEP Cell Mkhuhlu (Plaza Shop 12)","PEP Mkhuhlu (Plaza Shop 7)"],Hazyview:["PEP Home Hazyview Junction (Shop 5A)","PEP Home Numbi Gate Dayizenza (Shop 7)","PEP Hazyview Junction (Shop 14B)","PEP Cell Lowveld Mall PNP (Shop 168)","PEP Cell Lowveld Mall Spar (Shop 12)","PEP Hazyview Blue Haze (Shop 304)","PEP Hazyview Lowveld Mall (Shop 232)","PEP Hazyview Lowveld Mall (Shop 155)","PEP Numbigate Dayizenza Plaza (Shop 38A)","PEP Cell Numbigate Dayizenza Plaza (Shop 12)"],Sabie:["PEP Sabie (Shopping Centre)"],"White River":["PEP Home White River Square (Shop 20)","PEP White River (Square Shop 17)","PEP Whiteriver Square 1 (Shop 17)","PEP White River Crossing (Shop 15)","PEP White River Kabokweni (Plaza Shop 10)","PEP Cell White River Kabokweni Plaza (Shop 205A)"],"Lydenburg (Mashishing)":["PEP Home Lydenburg Lt Centre (Shop 5)","PEP Lydenburg Highland Centre (Shop 6A)","PEP Lydenburg (Tamarisk Building)","PEP Cell Mashishing Shoprite Centre"],"Mbombela (Nelspruit)":["PEP Home Riverside Mall Nelspruit (Shop G241)","PEP Home Nelspruit Promenade (Shop 41 & 42)","PEP Home Nelspruit Ilanga Mall (Shop LG36)","PEP Home Nelspruit The Square (Shop 7)","PEP Nelspruit The Grove (Shop 18)","PEP Cell Nelspruit Plaza (Shop 28)","PEP Nelspruit Plaza (Shop 17-20)","PEP Cell Nelspruit Ekukhanyeni (Shop 5)","PEP Nelspruit Brown & Henshall Street","PEP Cell Nelspruit Promenade (Shop 49)","PEP Nelspruit Brown Street (Prorom Building)","PEP Nelspruit (Bester Brown Building)","PEP Nelspruit The Square (Shop 10)","PEP Nelspruit CBD","PEP Riverside Mall (Shop U40)"],Kanyamazane:["PEP Kanyamazane (Shopping Centre Shop 11)"],Emoyeni:["PEP Emoyeni Mall (Shop 22)","PEP Cell Emoyeni Mall (Shop 8)"],"eMalahleni (Witbank)":["PEP Witbank Taxi Rank (Shop 1, 3 Escombe St)","PEP Highveld Mall (Shop U03, Highveld Mall)","PEP Witbank CBD","PEP Saveways Crescent"],Middelburg:["PEP Home Middelburg Mall (Shop 97, Middelburg Mall)","PEP Middelburg CBD (28 Cowen Ntuli Street)","PEP Midwater"],Secunda:["PEP Secunda Mall (Shop 160, Secunda Mall)","PEP Secunda CBD"]},"North West":{Rustenburg:["PEP Rustenburg Mall (Shop 73 Rustenburg Mall)","PEP Waterfall Mall (Shop 12, Waterfall Mall)","PEP Rustenburg CBD","PEP Rustenburg Plaza","PEP Platinum Square"],Potchefstroom:["PEP Potch Walter Sisulu Lane (149 Walter Sisulu Lane)","PEP Home Mooirivier Mall (Shop 16, Mooirivier Mall)","PEP Potch CBD"],"Mahikeng (Mafikeng)":["PEP Mafikeng City Mall (Shop G10, Mafikeng City Mall)","PEP Mmabatho Crossing (Shop 25, Mmabatho Crossing)","PEP Mahikeng CBD","PEP Mega City"],Klerksdorp:["PEP Klerksdorp Terminus (Shop 19, The Terminus Centre)","PEP Klerksdorp CBD","PEP Matlosana Mall","PEP City Mall"],Brits:["PEP Brits Town Centre (Shop G2, Brits Town Centre)","PEP Brits Mall"]},"Northern Cape":{Kimberley:["PEP North Cape Mall (Shop 60, North Cape Mall)","PEP Home Diamond Pavilion Mall (Shop 93, Diamond Pavilion Mall)","PEP Kimberley CBD","PEP New Park"],Upington:["PEP Upington Mall (Shop 12, Upington Mall)","PEP Upington CBD (20 Schroder Street)","PEP Kalahari Mall"],Kuruman:["PEP Kuruman Beare Street (Shop 28B, Beare Street)","PEP Kuruman Mall","PEP The Eye"],"De Aar":["PEP De Aar Main Road (35 Main Road, De Aar)"],Springbok:["PEP Springbok (62 Main Street, Springbok)"]},"Western Cape":{"Cape Town":["PEP CPT Station (Cape Town Station Concourse)","PEP Golden Acre (Shop 10, Golden Acre Mall)","PEP Home Parow Centre (Shop G6, Parow Centre, Voortrekker Rd)","PEP Gardens","PEP V&A Waterfront","PEP Canal Walk","PEP Blue Route"],Stellenbosch:["PEP Eikestad Mall (Shop E4, Eikestad Mall, 43 Andringa Rd)","PEP Kayamandi (Shop 11, Kayamandi Shopping Centre)","PEP Stellenbosch Central"],George:["PEP George Garden Route Mall (Shop 2, Garden Route Mall)","PEP George CBD (82 Hibernia Street)","PEP York Street"],Paarl:["PEP Paarl Mall (Shop 12, Paarl Mall, Cnr Newvlei & Jones St)","PEP Lady Grey","PEP Rembrandt Mall"],Hermanus:["PEP Hermanus Whale Coast Mall (Shop 15, Whale Coast Mall)"],Knysna:["PEP Knysna Long Street (13 Long Street, Knysna)","PEP Knysna Mall","PEP Woodmill Lane"],"Somerset West":["PEP Somerset Mall","PEP Main Road","PEP Waterstone"],"Mossel Bay":["PEP Mossel Bay Mall","PEP Langeberg Mall"],Worcester:["PEP Mountain Mill","PEP Worcester CBD"]}},FR=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm  8cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],$R={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:0}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:0}]},VR=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],BR=({cartItemCount:n,onShippingChange:e,subtotal:s})=>{var le,be,we,Z,ce;const{user:r,currency:i}=vt(),[o,c]=S.useState("pudo"),[u,f]=S.useState(""),[h,y]=S.useState(""),[v,j]=S.useState(""),[E,k]=S.useState(""),[_,P]=S.useState(""),[L,U]=S.useState(""),[F,J]=S.useState(""),[te,H]=S.useState("economy"),[M,C]=S.useState({street:((le=r.shippingAddress)==null?void 0:le.street)||"",suburb:((be=r.shippingAddress)==null?void 0:be.suburb)||"",city:((we=r.shippingAddress)==null?void 0:we.city)||"",province:((Z=r.shippingAddress)==null?void 0:Z.province)||"",postalCode:((ce=r.shippingAddress)==null?void 0:ce.postalCode)||""}),[I,$]=S.useState({street:"",suburb:"",city:"",province:"",postalCode:"",country:"",email:""}),[O,V]=S.useState(FR),[A,se]=S.useState($R),[fe,je]=S.useState(VR),Ie=s>=500;return S.useEffect(()=>{Ie&&o==="door"&&c("pudo")},[Ie,o]),S.useEffect(()=>{i==="USD"?c("international"):o==="international"&&c("pudo")},[i]),S.useEffect(()=>{try{const W=localStorage.getItem("spv_pudo_costs");W&&V(JSON.parse(W));const ue=localStorage.getItem("spv_paxi_costs");ue&&se(JSON.parse(ue));const B=localStorage.getItem("spv_door_to_door_costs");B&&je(JSON.parse(B))}catch(W){console.error("Failed to load shipping costs from storage",W)}},[]),S.useEffect(()=>{let W=0,ue="";if(o==="pudo"){const B=n<=20?"Extra-Small (XS)":"Small (S)",Ce=O.find(Ue=>Ue.name===B);let Pe="locker";Ce?Ce.lockerToLockerCost!==null?W=Ce.boxCost+Ce.lockerToLockerCost+Ce.lockerHandleFee:Ce.doorToLockerCost!==null?(W=Ce.boxCost+Ce.doorToLockerCost+Ce.doorHandleFee,Pe="door"):W=Ce.boxCost:W=60,_&&L&&F&&(ue=`${_} | ${L} | ${F} | ${Pe}`)}else if(o==="paxi"){let B="7-9 Days Service";s>1e3&&(B="3-5 Days Service");const Ce=A[B],Pe=n<=20?"Small":"Large",Ue=Ce.find(lt=>lt.bag.includes(Pe));Ue?W=(Pe==="Small"?6:15)+Ue.serviceCost+Ue.handleFee:W=60,u&&h&&v&&E&&(ue=`${u} | ${h} | ${v} | ${E} | ${B}`)}else if(o==="door"){const B=te==="overnight"?"Overnight":"Economy",Ce=fe.find(Pe=>Pe.service.includes(B));Ce?W=Ce.boxFee+Ce.initialCharge+(Ce.ratePerKg!==null?Ce.ratePerKg:0)+Ce.handleFee:W=120,M.street&&M.city&&M.postalCode&&(ue=JSON.stringify({...M,service:te}))}else o==="international"&&(W=60,I.street&&I.city&&I.postalCode?ue=`International Shipping | ${I.street}, ${I.suburb?I.suburb+", ":""}${I.city}, ${I.province?I.province+", ":""}${I.postalCode}${I.country?", "+I.country:""}${I.email?" | Email: "+I.email:""}`:ue="International Shipping");e({method:o,cost:W,details:ue})},[o,n,O,A,fe,te,_,L,F,u,h,v,E,M,I,e]),S.useEffect(()=>{U("")},[_]),S.useEffect(()=>{y(""),j(""),k("")},[u]),S.useEffect(()=>{j(""),k("")},[h]),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[t.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(hr,{size:18,className:"text-cyan-400"})," Shipping Method"]}),t.jsx("div",{className:"space-y-3",children:i==="USD"?t.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="international"?"bg-green-900/20 border-green-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="international"?"border-green-500 bg-green-500":"border-gray-500"}`,children:o==="international"&&t.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),t.jsx("span",{className:"text-sm text-gray-300",children:"International Shipping $60"})]}),t.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="international",onChange:()=>c("international")})]}):t.jsxs(t.Fragment,{children:[t.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="pudo"?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="pudo"?"border-cyan-500 bg-cyan-500":"border-gray-500"}`,children:o==="pudo"&&t.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),t.jsx("span",{className:"text-sm text-gray-300",children:"PUDO Locker to Locker"})]}),t.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="pudo",onChange:()=>c("pudo")})]}),t.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="paxi"?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="paxi"?"border-yellow-500 bg-yellow-500":"border-gray-500"}`,children:o==="paxi"&&t.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),t.jsx("span",{className:"text-sm text-gray-300",children:"PAXI (PEP Store - 7-9 Days)"})]}),t.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="paxi",onChange:()=>c("paxi")})]}),t.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${o==="door"?"bg-purple-900/20 border-purple-500 cursor-pointer":Ie?"bg-zinc-900 border-gray-800 opacity-50 cursor-not-allowed":"bg-black border-gray-700 hover:border-gray-600 cursor-pointer"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="door"?"border-purple-500 bg-purple-500":Ie?"border-gray-700":"border-gray-500"}`,children:o==="door"&&t.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),t.jsxs("div",{children:[t.jsx("span",{className:`text-sm ${Ie?"text-gray-500":"text-gray-300"}`,children:"PUDO Door to Door"}),Ie&&t.jsx("span",{className:"text-xs text-gray-500 block",children:"Not available for free shipping"})]})]}),t.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="door",onChange:()=>c("door"),disabled:Ie})]})]})}),o==="pudo"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-cyan-500/20",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("label",{className:"text-[10px] text-cyan-400 uppercase font-bold",children:"Select PUDO Locker Location"}),t.jsxs("a",{href:"https://thecourierguy.co.za/locations/",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[t.jsx(Ec,{size:10})," Find PUDO Locker Location Click Here"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:_,onChange:W=>P(W.target.value),children:[t.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(nu).sort().map(W=>t.jsx("option",{value:W,children:W},W))]}),t.jsx(tu,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),_&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:L,onChange:W=>U(W.target.value),children:[t.jsx("option",{value:"",children:"-- Select Town --"}),Object.keys(nu[_]||{}).sort().map(W=>t.jsx("option",{value:W,children:W},W))]}),t.jsx(tu,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),L&&t.jsx("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Locker Name / Address"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none",placeholder:"e.g. PUDO Locker @ Sandton City",value:F,onChange:W=>J(W.target.value)})]})})]}),o==="paxi"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-yellow-500/20",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("label",{className:"text-[10px] text-yellow-400 uppercase font-bold",children:"Select PEP Store"}),t.jsxs("a",{href:"https://www.paxi.co.za/paxi-points",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[t.jsx(Ec,{size:10})," Find PAXI Point"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:u,onChange:W=>f(W.target.value),children:[t.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(nu).sort().map(W=>t.jsx("option",{value:W,children:W},W))]}),t.jsx(tu,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),u&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:h,onChange:W=>y(W.target.value),children:[t.jsx("option",{value:"",children:"-- Select Town --"}),Object.keys(nu[u]||{}).sort().map(W=>t.jsx("option",{value:W,children:W},W))]}),t.jsx(tu,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),h&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Store Name (or P-Code)"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. PEP Home Acornhoek Mall",value:v,onChange:W=>j(W.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Store Street Address"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. Shop 27, Acornhoek Mall, R40 Main Rd",value:E,onChange:W=>k(W.target.value)})]})]})]}),o==="door"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-purple-500/20",children:[t.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block",children:"Select Service"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${te==="economy"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[t.jsx("input",{type:"radio",name:"doorService",value:"economy",checked:te==="economy",onChange:()=>H("economy"),className:"hidden"}),"Economy Road"]}),t.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${te==="overnight"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[t.jsx("input",{type:"radio",name:"doorService",value:"overnight",checked:te==="overnight",onChange:()=>H("overnight"),className:"hidden"}),"Overnight Courier"]})]}),t.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block pt-2 border-t border-gray-700/50",children:"Delivery Address"}),t.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:M.street,onChange:W=>C({...M,street:W.target.value})}),t.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:M.suburb,onChange:W=>C({...M,suburb:W.target.value})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:M.city,onChange:W=>C({...M,city:W.target.value})}),t.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:M.postalCode,onChange:W=>C({...M,postalCode:W.target.value})})]}),t.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:M.province,onChange:W=>C({...M,province:W.target.value})})]}),o==="international"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-green-500/20",children:[t.jsx("label",{className:"text-[10px] text-green-400 uppercase font-bold block",children:"International Shipping Address"}),t.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.street,onChange:W=>$({...I,street:W.target.value})}),t.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.suburb,onChange:W=>$({...I,suburb:W.target.value})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.city,onChange:W=>$({...I,city:W.target.value})}),t.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.postalCode,onChange:W=>$({...I,postalCode:W.target.value})})]}),t.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.province,onChange:W=>$({...I,province:W.target.value})}),t.jsx("input",{type:"text",placeholder:"Country",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.country||"",onChange:W=>$({...I,country:W.target.value})}),t.jsx("input",{type:"email",placeholder:"Email",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.email||"",onChange:W=>$({...I,email:W.target.value})}),t.jsx("p",{className:"text-xs text-yellow-400 mt-2",children:"You are liable for any import taxes if any arises."})]})]})},qR=()=>{const{cart:n,removeFromCart:e,updateCartQuantity:s,getCartTotal:r,user:i,appliedVoucher:o,setAppliedVoucher:c,applyExternalVoucher:u,updateUserAddress:f,setIsStickyProgressBarVisible:h,checkout:y,clearCart:v,register:j,login:E,currency:k}=vt(),_=cn(),[P,L]=S.useState({method:"pudo",cost:60,details:""}),[U,F]=S.useState(""),[J,te]=S.useState(""),[H,M]=S.useState(0),C=S.useRef(null),[I,$]=S.useState(null),[O,V]=S.useState(!1),[A,se]=S.useState("register"),[fe,je]=S.useState(!1),[Ie,le]=S.useState(!1),[be,we]=S.useState(""),[Z,ce]=S.useState(""),[W,ue]=S.useState(""),[B,Ce]=S.useState(""),[Pe,Ue]=S.useState(""),[Qe,lt]=S.useState("");S.useEffect(()=>{h(!1)},[h]),S.useEffect(()=>{Ie&&i.email&&(Y(),le(!1))},[Ie,i.email]),S.useEffect(()=>{I&&C.current&&(C.current.submit(),v())},[I,v]);const St=()=>{h(!0),_("/")},ye=r(),Xe=n.reduce((De,ps)=>De+ps.quantity,0),nt=ye>=500&&(P.method==="pudo"||P.method==="paxi"),Ut=nt?0:P.cost;let oe=0;o&&(o.minSpend&&ye<o.minSpend||(o.discountType==="percentage"?oe=ye*o.value/100:oe=o.value)),oe>ye&&(oe=ye);let Me=0;const Be=ye-oe;i!=null&&i.storeCredit&&i.storeCredit>0&&i.creditCurrency===k&&(Me=Math.min(Be,i.storeCredit));let ke=0;if(H>0){const De=k==="ZAR"?1:.5;ke=H/100*De}const We=ye+Ut-oe-Me-ke,Nt=()=>{if(te(""),!U.trim())return;u(U.trim())?F(""):te("Invalid or expired voucher code.")},ve=async()=>{if(!P.details){alert("Please complete all shipping details.");return}if(!i.email){V(!0);return}await Y()},Y=async()=>{P.method==="door"&&await f(JSON.parse(P.details));try{const De=await y({items:n,total:We,shippingMethod:P.method,shippingDetails:P.details,shippingCost:Ut,pointsToRedeem:H});$(De)}catch(De){console.error("Order creation failed",De),alert("Could not create your order. Please try again.")}},Se=async De=>{if(De.preventDefault(),we(""),Pe!==Qe){we("Passwords do not match!");return}await j({name:Z,email:W,birthday:B,password:Pe})?(V(!1),le(!0)):we("Registration failed. Please try again.")},jt=async De=>{De.preventDefault(),we(""),await E(W,Pe)?(V(!1),le(!0)):we("Invalid credentials.")},mt=()=>k==="ZAR"?"R":"$",Wt=(De,ps)=>k==="ZAR"?De:k==="USD"?ps!==void 0?ps:0:De,$t=k==="ZAR"?"R1.00":"$0.50",ks=k==="ZAR"?"R10":"$5",ds=k==="ZAR"?"R100":"$50";return n.length===0?t.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[t.jsx("div",{className:"w-20 h-20 bg-zinc-900 rounded-full flex items-center justify-center text-gray-600",children:t.jsx(kc,{size:40})}),t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Cart is Empty"}),t.jsx("p",{className:"text-gray-400",children:"Looks like you haven't added any treasures yet."}),t.jsx(Ve,{to:"/",className:"px-6 py-3 bg-pink-600 text-white font-bold rounded-full hover:bg-pink-500 transition-colors",children:"Start Shopping"})]}):t.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[t.jsx(GN,{subtotal:ye,onContinueShopping:St}),O&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>V(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-2xl font-bold text-white",children:A==="register"?"Create an Account":"Sign In"}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"An account is required to track your order history and status."})]}),A==="register"?t.jsxs("form",{onSubmit:Se,className:"space-y-4",children:[t.jsx("input",{type:"text",required:!0,value:Z,onChange:De=>ce(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Full Name"}),t.jsx("input",{type:"email",required:!0,value:W,onChange:De=>ue(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),t.jsx("input",{type:"date",required:!0,value:B,onChange:De=>Ce(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"}),t.jsx("input",{type:fe?"text":"password",required:!0,value:Pe,onChange:De=>Ue(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Create Password"}),t.jsx("input",{type:fe?"text":"password",required:!0,value:Qe,onChange:De=>lt(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Confirm Password"}),be&&t.jsx("p",{className:"text-xs text-red-400 text-center",children:be}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500",children:"Create Account & Continue"}),t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",t.jsx("button",{type:"button",onClick:()=>se("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):t.jsxs("form",{onSubmit:jt,className:"space-y-4",children:[t.jsx("input",{type:"email",required:!0,value:W,onChange:De=>ue(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),t.jsx("input",{type:fe?"text":"password",required:!0,value:Pe,onChange:De=>Ue(De.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Password"}),be&&t.jsx("p",{className:"text-xs text-red-400 text-center",children:be}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500",children:"Sign In & Continue"}),t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",t.jsx("button",{type:"button",onClick:()=>se("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsx($p,{ref:C,amount:(I==null?void 0:I.total)??We,itemName:I?`Order ${I.orderNumber}`:"Spoil Me Vintage Order",email:i.email,customStr1:(I==null?void 0:I.id)??"",customStr2:P.method,customStr3:(o==null?void 0:o.code)||""}),t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs("h1",{className:"text-2xl font-bold text-white mb-4",children:["Shopping Cart (",Xe,")"]}),t.jsx("div",{className:"space-y-4",children:n.map((De,ps)=>{let us=De.stock;De.type==="Ring"&&De.selectedSize&&De.ringStock&&(us=De.ringStock[De.selectedSize]||0);const Ws=De.quantity>=us;return t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-4 rounded-xl flex gap-4 items-start",children:[t.jsx("div",{className:"w-20 h-20 bg-black rounded-lg overflow-hidden border border-gray-700 shrink-0",children:t.jsx("img",{src:De.images[0],alt:De.name,className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("h3",{className:"font-bold text-white text-sm line-clamp-2",children:De.name}),t.jsx("button",{onClick:()=>e(De.id,{selectedSize:De.selectedSize,selectedMaterial:De.selectedMaterial,selectedChainStyle:De.selectedChainStyle,selectedChainLength:De.selectedChainLength}),className:"text-gray-500 hover:text-red-400 p-1",children:t.jsx(Lr,{size:16})})]}),t.jsxs("div",{className:"text-xs text-gray-400 mt-1 space-y-0.5",children:[De.selectedSize&&t.jsxs("div",{children:["Size: ",t.jsx("span",{className:"text-gray-300",children:De.selectedSize})]}),De.selectedMaterial&&t.jsxs("div",{children:["Material: ",t.jsx("span",{className:"text-gray-300",children:De.selectedMaterial})]}),De.selectedChainStyle&&t.jsxs("div",{children:["Chain: ",t.jsxs("span",{className:"text-gray-300",children:[De.selectedChainStyle," ",De.selectedChainLength?`(${De.selectedChainLength})`:""]})]})]}),t.jsxs("div",{className:"flex justify-between items-end mt-3",children:[t.jsxs("div",{className:"flex items-center gap-3 bg-black rounded-lg border border-gray-700 px-2 py-1",children:[t.jsx("button",{onClick:()=>s(De.id,De.quantity-1,De),className:"text-gray-400 hover:text-white",children:t.jsx(BN,{size:14})}),t.jsx("span",{className:"text-sm font-bold text-white w-4 text-center",children:De.quantity}),t.jsx("button",{onClick:()=>s(De.id,De.quantity+1,De),className:"text-gray-400 hover:text-white disabled:text-gray-700 disabled:cursor-not-allowed",disabled:Ws,children:t.jsx(rn,{size:14})})]}),t.jsxs("div",{className:"font-bold text-white",children:[mt(),((Wt(De.price,De.priceUSD||De.price)+(De.selectedMaterialModifier||0))*De.quantity).toFixed(2)]})]})]})]},`${De.id}_${ps}`)})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(BR,{cartItemCount:Xe,onShippingChange:L,subtotal:ye}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[t.jsx("h3",{className:"font-bold text-white mb-4",children:"Summary"}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-400 mb-4 pb-4 border-b border-gray-800",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Subtotal"}),t.jsxs("span",{className:"text-white",children:[mt(),ye.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Shipping"}),t.jsx("span",{className:"text-white",children:nt?t.jsx("span",{className:"text-green-400",children:"FREE"}):`${mt()}${Ut.toFixed(2)}`})]}),oe>0&&t.jsxs("div",{className:"flex justify-between text-green-400",children:[t.jsx("span",{children:"Discount"}),t.jsxs("span",{children:["-",mt(),oe.toFixed(2)]})]}),Me>0&&t.jsxs("div",{className:"flex justify-between text-green-400",children:[t.jsx("span",{children:"Store Credit"}),t.jsxs("span",{children:["-",mt(),Me.toFixed(2)]})]}),ke>0&&t.jsxs("div",{className:"flex justify-between text-purple-400",children:[t.jsx("span",{children:"Loyalty Discount"}),t.jsxs("span",{children:["-",mt(),ke.toFixed(2)]})]})]}),t.jsxs("div",{className:"flex justify-between items-end mb-6",children:[t.jsx("span",{className:"text-gray-300 font-bold",children:"Total"}),t.jsxs("span",{className:"text-2xl font-bold text-white",children:[mt(),We.toFixed(2)]})]}),o?t.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 p-3 rounded-lg mb-4 flex justify-between items-center text-xs",children:[t.jsxs("span",{className:"text-green-400 font-bold flex items-center gap-1",children:[t.jsx(ut,{size:12})," Code ",o.code," Applied"]}),t.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:"Remove"})]}):t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsx("input",{type:"text",placeholder:"Promo Code",className:"flex-1 bg-black border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-pink-500 outline-none",value:U,onChange:De=>F(De.target.value)}),t.jsx("button",{onClick:Nt,className:"bg-zinc-800 hover:bg-zinc-700 text-white px-3 py-2 rounded-lg text-sm border border-gray-600",children:"Apply"})]}),J&&t.jsx("p",{className:"text-xs text-red-400 mb-4",children:J}),i.email&&i.loyaltyPoints>=1e3&&t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-lg mb-4",children:[t.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-2",children:"Redeem Loyalty Points"}),t.jsxs("p",{className:"text-xs text-gray-400 mb-3",children:["100 points = ",$t," discount. Min 1000 points (",ks,"). ",i.isMember?"":`Non-members: max ${ds} per order.`]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",min:"0",max:Math.min(i.loyaltyPoints,i.isMember?i.loyaltyPoints:1e4),step:"100",value:H,onChange:De=>M(Math.max(0,parseInt(De.target.value)||0)),className:"flex-1 bg-black border border-gray-700 rounded px-3 py-2 text-white text-sm",placeholder:"Points to redeem"}),t.jsx("button",{onClick:()=>M(Math.min(i.loyaltyPoints,i.isMember?i.loyaltyPoints:1e4)),className:"bg-purple-600 hover:bg-purple-500 text-white px-3 py-2 rounded text-sm",children:"Max"})]}),H>0&&t.jsxs("p",{className:"text-xs text-purple-400 mt-2",children:["Discount: ",mt(),(H/100).toFixed(2)]})]}),t.jsxs("button",{onClick:ve,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:["Pay Now ",t.jsx(Qs,{size:20})]}),t.jsxs("div",{className:"text-center mt-3 text-xs text-gray-500 flex justify-center gap-2",children:[t.jsx(Bi,{size:14})," Secure Payment via PayFast"]})]})]})]})]})},WR=()=>{const{user:n,products:e,logout:s,currency:r,closeAccount:i}=vt(),o=cn(),[c,u]=S.useState(!1),[f,h]=S.useState(!1),[y,v]=S.useState(""),j=e.filter(F=>(n.wishlist||[]).includes(F.id));if(!n.email)return o("/login"),null;const E=r==="ZAR"?"R10":"$3",k=r==="ZAR"?"R1.00":"$0.50",_=r==="ZAR"?"R10":"$5",P=r==="ZAR"?"R100 (10,000 pts)":"$50 (10,000 pts)",L=r==="ZAR"?"R100":"$50",U=async()=>{try{await i(y),h(!1),alert("Sorry to see you go. Your account will be deleted within 24 hours."),s(),o("/")}catch(F){console.error("Error closing account:",F),alert("Failed to close account. Please try again.")}};return t.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[c&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>u(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[t.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(cs,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:t.jsx(Hn,{size:24})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),t.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsxs("span",{className:"text-green-400",children:["1 Point for every ",E]})," spent on products."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"100 Points"})," for every verified review."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing products on social media."]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",t.jsxs("span",{className:"text-white font-bold",children:[k," Discount"]}),"."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum redemption is 1000 Points (",_,")."]})]})]}),t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[t.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[t.jsx(Hn,{size:14})," Membership Rule"]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",t.jsx("strong",{children:P})," per order. To redeem more than ",L," at once, you must be a ",t.jsx(Ve,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),t.jsx("button",{onClick:()=>u(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),f&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>h(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-red-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(239,68,68,0.3)] animate-in zoom-in-95 duration-200",children:[t.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(cs,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-red-900/50 rounded-full border border-red-500 text-red-300",children:t.jsx(tb,{size:24})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"Close Account"})]}),t.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[t.jsx("p",{className:"text-red-400 font-semibold",children:"Are you sure you want to close your account?"}),t.jsx("p",{className:"text-gray-400",children:"This action cannot be undone. Your account and all associated data will be permanently deleted within 24 hours."}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Please tell us why you're leaving (optional)"}),t.jsx("textarea",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-red-500 outline-none resize-none",rows:3,placeholder:"Help us improve our service...",value:y,onChange:F=>v(F.target.value)})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white font-bold rounded-xl transition-colors",children:"Cancel"}),t.jsx("button",{onClick:U,className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-xl transition-colors",children:"Close Account"})]})]})]}),t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsx("div",{className:"flex-1"}),t.jsxs("div",{className:"text-center flex-1",children:[t.jsxs("h1",{className:"text-[28px] font-cherry text-white",children:["Welcome, ",n.name||n.firstName||"User"]}),t.jsx("p",{className:"text-[14px] font-architects text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-yellow-400 italic",children:"Your personal vault of timeless treasuresbecause ordinary is not your style."})]}),t.jsx("div",{className:"flex-1 flex justify-end",children:t.jsx("button",{onClick:()=>{s(),o("/")},className:"p-3 bg-zinc-800 hover:bg-zinc-700 border border-gray-700 rounded-full transition-colors text-gray-400 hover:text-red-400",title:"Logout",children:t.jsx(tb,{size:20})})})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 border border-purple-700 rounded-2xl p-6 text-white shadow-[0_0_20px_rgba(168,85,247,0.2)] relative overflow-hidden mb-8",children:[t.jsx("button",{onClick:()=>u(!0),className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors text-white/80 hover:text-white z-10",children:t.jsx(sh,{size:18})}),t.jsxs("div",{className:"flex justify-between items-start mb-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Loyalty Balance"}),t.jsxs("p",{className:"text-xs text-white flex items-center gap-1 mt-1",children:[t.jsx(fl,{size:10})," 1 pt per ",E," spent"]}),t.jsxs("p",{className:"text-xs text-white flex items-center gap-1",children:[t.jsx(ll,{size:10})," 100 pts per review"]}),t.jsxs("p",{className:"text-xs text-white flex items-center gap-1",children:[t.jsx(so,{size:10})," 50 pts per share"]})]}),t.jsx(Hn,{size:28,className:"text-pink-300 drop-shadow-[0_0_5px_rgba(236,72,153,0.8)] mr-8"})]}),t.jsxs("div",{className:"text-[22px] font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-white to-pink-200",children:[n.loyaltyPoints||0," ",t.jsx("span",{className:"text-lg font-normal opacity-80 text-white",children:"Points"})]}),t.jsx("div",{className:"mt-4 text-xs bg-black/30 p-3 rounded-lg border border-white/10",children:(n.loyaltyPoints||0)>=1e3?`You have ${r==="ZAR"?"R":"$"}${(Math.floor((n.loyaltyPoints||0)/1e3)*(r==="ZAR"?10:5)).toFixed(2)} off available for your next order!`:`${1e3-(n.loyaltyPoints||0)} more points needed for a ${r==="ZAR"?"R10":"$5"} voucher.`})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Partnership Program"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Earn 20% commission on referrals"})]}),t.jsx(ts,{size:28,className:"text-green-400 drop-shadow-[0_0_5px_rgba(74,222,128,0.6)]"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-black p-3 rounded-lg flex justify-between items-center border border-gray-700",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Your Referral Code"}),t.jsx("span",{className:"font-mono font-bold text-base text-cyan-400 tracking-wider",children:n.affiliateCode||"N/A"})]}),t.jsx("button",{className:"p-2 text-gray-500 hover:text-cyan-400 transition-colors",children:t.jsx(nh,{size:18})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-400 text-sm",children:"Total Earnings"}),t.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",(n.affiliateEarnings||0).toFixed(2)]})]}),t.jsx(Ve,{to:"/affiliate-program",className:"block w-full py-2 border border-cyan-500/50 text-cyan-400 rounded-lg font-semibold hover:bg-cyan-900/30 transition-colors text-sm text-center",children:"View Dashboard"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Account Management"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Manage your account settings"})]}),t.jsx($r,{size:28,className:"text-blue-400 drop-shadow-[0_0_5px_rgba(59,130,246,0.6)]"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-black p-3 rounded-lg border border-gray-700",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Account Status"}),t.jsx("span",{className:"font-medium text-green-400",children:"Active"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-xs text-gray-500 block",children:"Member Since"}),t.jsx("span",{className:"text-sm text-white",children:new Date(n.createdAt||Date.now()).toLocaleDateString()})]})]})}),t.jsx("button",{onClick:()=>h(!0),className:"w-full py-3 border border-red-500/50 text-red-400 rounded-lg font-semibold hover:bg-red-900/30 transition-colors text-sm",children:"Close Account"})]})]})]}),t.jsxs("div",{className:"pt-8 border-t border-gray-800",children:[t.jsxs("h2",{className:"text-[20px] font-bold text-white mb-6 flex items-center gap-2",children:[t.jsx(ca,{size:20,className:"text-pink-500"})," Wishlist (",j.length,")"]}),j.length>0?t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:j.map(F=>t.jsx(Bc,{product:F},F.id))}):t.jsx("p",{className:"text-gray-500 text-sm",children:"Your wishlist is empty."})]})]})},HR=()=>{const[n,e]=S.useState(""),[s,r]=S.useState(""),[i,o]=S.useState(""),[c,u]=S.useState(""),{login:f,authErrorMessage:h,clearAuthError:y}=vt(),v=cn(),j=async E=>{E.preventDefault(),o(""),y(),await f(n,s)?v(n==="spoilmevintagediy@gmail.com"?"/admin":"/"):o(h||"Invalid credentials. Please check your email and password.")};return S.useEffect(()=>{try{const E=localStorage.getItem("spv_admin_denied");E&&(u(E),localStorage.removeItem("spv_admin_denied"))}catch{}},[]),t.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:t.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-zinc-900 rounded-2xl border border-gray-800 shadow-xl",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-handwriting font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Welcome Back"}),t.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Sign in to access your account"})]}),t.jsxs("form",{className:"space-y-6",onSubmit:j,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Cc,{size:18,className:"text-gray-500"})}),t.jsx("input",{type:"email",name:"email",autoComplete:"email",required:!0,value:n,onChange:E=>{e(E.target.value),y(),o("")},className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:"name@example.com"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(la,{size:18,className:"text-gray-500"})}),t.jsx("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,value:s,onChange:E=>{r(E.target.value),y(),o("")},className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:""})]})]})]}),i&&t.jsx("div",{className:"p-3 bg-red-900/20 border border-red-900/50 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-400 text-center",children:i})}),c&&t.jsx("div",{className:"p-3 bg-yellow-900/20 border border-yellow-800 rounded-lg mt-2",children:t.jsx("p",{className:"text-sm text-yellow-200 text-center",children:c})}),t.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-pink-600 hover:bg-pink-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition-all hover:shadow-[0_0_15px_rgba(236,72,153,0.4)]",children:["Sign In ",t.jsx(Qs,{size:16})]})]}),t.jsx("div",{className:"text-center pt-4 border-t border-gray-800",children:t.jsxs("p",{className:"text-xs text-gray-500",children:["Don't have an account? ",t.jsx("span",{className:"text-gray-400",children:"Registration is currently invite only."})]})})]})})};/*!
 * react-paypal-js v8.9.2 (2025-10-02T20:17:55.069Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn;(function(n){n.INITIAL="initial",n.PENDING="pending",n.REJECTED="rejected",n.RESOLVED="resolved"})(vn||(vn={}));var ra;(function(n){n.LOADING_STATUS="setLoadingStatus",n.RESET_OPTIONS="resetOptions",n.SET_BRAINTREE_INSTANCE="braintreeInstance"})(ra||(ra={}));var hb;(function(n){n.NUMBER="number",n.CVV="cvv",n.EXPIRATION_DATE="expirationDate",n.EXPIRATION_MONTH="expirationMonth",n.EXPIRATION_YEAR="expirationYear",n.POSTAL_CODE="postalCode"})(hb||(hb={}));var js=function(){return js=Object.assign||function(e){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},js.apply(this,arguments)};function ej(n,e){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(s[r[i]]=n[r[i]]);return s}function fb(n,e,s){if(s||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var Ic="data-react-paypal-script-id",Wa={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},GR="Failed to load the PayPal JS SDK script.",tj="paypal",KR="usePayPalScriptReducer must be used within a PayPalScriptProvider";function JR(n){return n===void 0&&(n=tj),window[n]}function YR(n){for(var e="",s=0;s<n.length;s++){var r=n[s].charCodeAt(0)*s;n[s+1]&&(r+=n[s+1].charCodeAt(0)*(s-1)),e+=String.fromCharCode(97+Math.abs(r)%26)}return e}function ZR(n){var e=n.reactComponentName,s=n.sdkComponentKey,r=n.sdkRequestedComponents,i=r===void 0?"":r,o=n.sdkDataNamespace,c=o===void 0?tj:o,u=s.charAt(0).toUpperCase().concat(s.substring(1)),f="Unable to render <".concat(e," /> because window.").concat(c,".").concat(u," is undefined."),h=typeof i=="string"?i:i.join(",");if(!h.includes(s)){var y=[h,s].filter(Boolean).join();f+=`
To fix the issue, add '`.concat(s,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(y,"'}}>`.")}return f}function sj(n){var e=n,s=Ic;e[s];var r=ej(e,[s+""]);return"react-paypal-js-".concat(YR(JSON.stringify(r)))}function XR(n){var e=self.document.querySelector("script[".concat(Ic,'="').concat(n,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function QR(n,e){var s,r;switch(e.type){case ra.LOADING_STATUS:return typeof e.value=="object"?js(js({},n),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):js(js({},n),{loadingStatus:e.value});case ra.RESET_OPTIONS:return XR(n.options[Ic]),js(js({},n),{loadingStatus:vn.PENDING,options:js(js((s={},s[Wa.DATA_SDK_INTEGRATION_SOURCE]=Wa.DATA_LIBRARY_VALUE,s),e.value),(r={},r[Ic]="".concat(sj(e.value)),r))});case ra.SET_BRAINTREE_INSTANCE:return js(js({},n),{braintreePayPalCheckoutInstance:e.value});default:return n}}var nj=S.createContext(null);function e5(n){if(typeof(n==null?void 0:n.dispatch)=="function"&&n.dispatch.length!==0)return n;throw new Error(KR)}function t5(){var n=e5(S.useContext(nj)),e=js(js({},n),{isInitial:n.loadingStatus===vn.INITIAL,isPending:n.loadingStatus===vn.PENDING,isResolved:n.loadingStatus===vn.RESOLVED,isRejected:n.loadingStatus===vn.REJECTED});return[e,n.dispatch]}S.createContext({});function s5(n){var e=S.useRef(new Proxy({},{get:function(s,r,i){return typeof s[r]=="function"?function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return s[r].apply(s,o)}:Reflect.get(s,r,i)}}));return e.current=Object.assign(e.current,n),e.current}var Rc=function(n){var e,s=n.className,r=s===void 0?"":s,i=n.disabled,o=i===void 0?!1:i,c=n.children,u=n.forceReRender,f=u===void 0?[]:u,h=ej(n,["className","disabled","children","forceReRender"]),y=o?{opacity:.38}:{},v="".concat(r," ").concat(o?"paypal-buttons-disabled":"").trim(),j=S.useRef(null),E=S.useRef(null),k=s5(h),_=t5()[0],P=_.isResolved,L=_.options,U=S.useState(null),F=U[0],J=U[1],te=S.useState(!0),H=te[0],M=te[1],C=S.useState(null),I=C[1];function $(){E.current!==null&&E.current.close().catch(function(){})}return!((e=E.current)===null||e===void 0)&&e.updateProps&&E.current.updateProps({message:h.message}),S.useEffect(function(){if(P===!1)return $;var O=JR(L.dataNamespace);if(O===void 0||O.Buttons===void 0)return I(function(){throw new Error(ZR({reactComponentName:Rc.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:L.components,sdkDataNamespace:L[Wa.DATA_NAMESPACE]}))}),$;var V=function(A,se){J(se),typeof h.onInit=="function"&&h.onInit(A,se)};try{E.current=O.Buttons(js(js({},k),{onInit:V}))}catch(A){return I(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(A))})}return E.current.isEligible()===!1?(M(!1),$):(j.current&&E.current.render(j.current).catch(function(A){j.current===null||j.current.children.length===0||I(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(A))})}),$)},fb(fb([P],f,!0),[h.fundingSource],!1)),S.useEffect(function(){F!==null&&(o===!0?F.disable().catch(function(){}):F.enable().catch(function(){}))},[o,F]),Ha.createElement(Ha.Fragment,null,H?Ha.createElement("div",{ref:j,style:y,className:v}):c)};Rc.displayName="PayPalButtons";function n5(n,e){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(s[r[i]]=n[r[i]]);return s}function r5(n,e){var s=document.querySelector('script[src="'.concat(n,'"]'));if(s===null)return null;var r=rj(n,e),i=s.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(r.dataset).length)return null;var o=!0;return Object.keys(i.dataset).forEach(function(c){i.dataset[c]!==r.dataset[c]&&(o=!1)}),o?s:null}function i5(n){var e=n.url,s=n.attributes,r=n.onSuccess,i=n.onError,o=rj(e,s);o.onerror=i,o.onload=r,document.head.insertBefore(o,document.head.firstElementChild)}function a5(n){var e=n.sdkBaseUrl,s=n.environment,r=n5(n,["sdkBaseUrl","environment"]),i=e||c5(s),o=r,c=Object.keys(o).filter(function(h){return typeof o[h]<"u"&&o[h]!==null&&o[h]!==""}).reduce(function(h,y){var v=o[y].toString();return y=o5(y),y.substring(0,4)==="data"||y==="crossorigin"?h.attributes[y]=v:h.queryParams[y]=v,h},{queryParams:{},attributes:{}}),u=c.queryParams,f=c.attributes;return u["merchant-id"]&&u["merchant-id"].indexOf(",")!==-1&&(f["data-merchant-id"]=u["merchant-id"],u["merchant-id"]="*"),{url:"".concat(i,"?").concat(l5(u)),attributes:f}}function o5(n){var e=function(s,r){return(r?"-":"")+s.toLowerCase()};return n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function l5(n){var e="";return Object.keys(n).forEach(function(s){e.length!==0&&(e+="&"),e+=s+"="+n[s]}),e}function c5(n){return n==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function rj(n,e){e===void 0&&(e={});var s=document.createElement("script");return s.src=n,Object.keys(e).forEach(function(r){s.setAttribute(r,e[r]),r==="data-csp-nonce"&&s.setAttribute("nonce",e["data-csp-nonce"])}),s}function d5(n,e){if(e===void 0&&(e=Promise),ij(n,e),typeof document>"u")return e.resolve(null);var s=a5(n),r=s.url,i=s.attributes,o=i["data-namespace"]||"paypal",c=mb(o);return i["data-js-sdk-library"]||(i["data-js-sdk-library"]="paypal-js"),r5(r,i)&&c?e.resolve(c):u5({url:r,attributes:i},e).then(function(){var u=mb(o);if(u)return u;throw new Error("The window.".concat(o," global variable is not available."))})}function u5(n,e){e===void 0&&(e=Promise),ij(n,e);var s=n.url,r=n.attributes;if(typeof s!="string"||s.length===0)throw new Error("Invalid url.");if(typeof r<"u"&&typeof r!="object")throw new Error("Expected attributes to be an object.");return new e(function(i,o){if(typeof document>"u")return i();i5({url:s,attributes:r,onSuccess:function(){return i()},onError:function(){var c=new Error('The script "'.concat(s,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return o(c)}})})}function mb(n){return window[n]}function ij(n,e){if(typeof n!="object"||n===null)throw new Error("Expected an options object.");var s=n.environment;if(s&&s!=="production"&&s!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var qm=function(n){var e,s=n.options,r=s===void 0?{clientId:"test"}:s,i=n.children,o=n.deferLoading,c=o===void 0?!1:o,u=S.useReducer(QR,{options:js(js({},r),(e={},e[Wa.DATA_JS_SDK_LIBRARY]=Wa.DATA_LIBRARY_VALUE,e[Wa.DATA_SDK_INTEGRATION_SOURCE]=Wa.DATA_LIBRARY_VALUE,e[Ic]="".concat(sj(r)),e)),loadingStatus:c?vn.INITIAL:vn.PENDING}),f=u[0],h=u[1];return S.useEffect(function(){if(c===!1&&f.loadingStatus===vn.INITIAL)return h({type:ra.LOADING_STATUS,value:vn.PENDING});if(f.loadingStatus===vn.PENDING){var y=!0;return d5(f.options).then(function(){y&&h({type:ra.LOADING_STATUS,value:vn.RESOLVED})}).catch(function(v){console.error("".concat(GR," ").concat(v)),y&&h({type:ra.LOADING_STATUS,value:{state:vn.REJECTED,message:String(v)}})}),function(){y=!1}}},[f.options,c,f.loadingStatus]),Ha.createElement(nj.Provider,{value:js(js({},f),{dispatch:h})},i)};function pb(){}S.createContext({cardFieldsForm:null,fields:{},registerField:pb,unregisterField:pb});const h5=({planId:n,userId:e,onApprove:s,onError:r})=>{const i="Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",o={clientId:i,"client-id":i,currency:"USD",intent:"subscription",vault:!0,components:"buttons"},c=u=>{const f=u.toLowerCase();return f.includes("insider")?"P-27V6575111695415KNE2N6OI":f.includes("gold")?"P-4KK8219436336790HNE2N7HQ":f.includes("deluxe")?"P-5D389612KP666993XNE2N7UY":(console.error("Plan ID not found for:",u),null)};return t.jsx(qm,{options:o,children:t.jsx(Rc,{createSubscription:(u,f)=>{const h=c(n);if(!h||h.includes("YOUR_")||h.includes("P-INSIDER"))throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID in .env file");return f.subscription.create({plan_id:h})},onApprove:async(u,f)=>{console.log("PayPal subscription approved:",u),await Promise.resolve(s(u))},onError:u=>{console.error("PayPal subscription error:",u),r(u)},style:{shape:"pill",color:"silver",layout:"vertical",label:"subscribe"}})})},f5=({onSuccess:n})=>{const[e,s]=S.useState(!1),[r,i]=S.useState(!1),[o,c]=S.useState({email:"",password:""}),u=(h,y)=>{c(v=>({...v,[h]:y}))},f=async h=>{if(h.preventDefault(),!o.email||!o.password){alert("Please fill in all fields.");return}i(!0);try{await T_(o.email,o.password),n()}catch(y){console.error("Login Error",y),alert(y.message||"Login failed. Please check your credentials.")}finally{i(!1)}};return t.jsxs("form",{onSubmit:f,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),t.jsx("input",{type:"email",value:o.email,onChange:h=>u("email",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your email",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:e?"text":"password",value:o.password,onChange:h=>u("password",h.target.value),className:"w-full px-3 py-2 pr-10 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your password",required:!0}),t.jsx("button",{type:"button",onClick:()=>s(!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-yellow-400",children:e?t.jsx(Mu,{size:20}):t.jsx(ol,{size:20})})]})]}),t.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 disabled:bg-gray-600 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:r?"Signing In...":"Sign In"})]})},m5=({onSuccess:n})=>{const[e,s]=S.useState(!1),[r,i]=S.useState(!1),[o,c]=S.useState({firstName:"",lastName:"",email:"",dob:"",gender:"",favoriteColor:"",country:"",password:""}),u=(h,y)=>{c(v=>({...v,[h]:y}))},f=async h=>{if(h.preventDefault(),!o.firstName||!o.lastName||!o.email||!o.password||!o.dob||!o.gender||!o.favoriteColor||!o.country){alert("Please fill in all fields.");return}if(o.password.length<6){alert("Password must be at least 6 characters long.");return}i(!0);try{await P_(o.email,o.password,{firstName:o.firstName,lastName:o.lastName,dob:o.dob,gender:o.gender,favoriteColor:o.favoriteColor,country:o.country,email:o.email,createdAt:new Date().toISOString(),membershipTier:"none",role:"user",wishlist:[]}),n()}catch(y){console.error("Registration Error",y),alert(y.message||"Registration failed. Please try again.")}finally{i(!1)}};return t.jsxs("form",{onSubmit:f,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"First Name"}),t.jsx("input",{type:"text",value:o.firstName,onChange:h=>u("firstName",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"First name",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Last Name"}),t.jsx("input",{type:"text",value:o.lastName,onChange:h=>u("lastName",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Last name",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),t.jsx("input",{type:"email",value:o.email,onChange:h=>u("email",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your email",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date of Birth"}),t.jsx("input",{type:"date",value:o.dob,onChange:h=>u("dob",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Gender"}),t.jsxs("select",{value:o.gender,onChange:h=>u("gender",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0,children:[t.jsx("option",{value:"",children:"Select gender"}),t.jsx("option",{value:"male",children:"Male"}),t.jsx("option",{value:"female",children:"Female"}),t.jsx("option",{value:"other",children:"Other"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Favorite Color"}),t.jsxs("select",{value:o.favoriteColor,onChange:h=>u("favoriteColor",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0,children:[t.jsx("option",{value:"",children:"Select favorite color"}),t.jsx("option",{value:"red",children:"Red"}),t.jsx("option",{value:"blue",children:"Blue"}),t.jsx("option",{value:"green",children:"Green"}),t.jsx("option",{value:"yellow",children:"Yellow"}),t.jsx("option",{value:"purple",children:"Purple"}),t.jsx("option",{value:"pink",children:"Pink"}),t.jsx("option",{value:"orange",children:"Orange"}),t.jsx("option",{value:"black",children:"Black"}),t.jsx("option",{value:"white",children:"White"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Country"}),t.jsx("input",{type:"text",value:o.country,onChange:h=>u("country",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your country",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:e?"text":"password",value:o.password,onChange:h=>u("password",h.target.value),className:"w-full px-3 py-2 pr-10 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Create a password",required:!0}),t.jsx("button",{type:"button",onClick:()=>s(!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-yellow-400",children:e?t.jsx(Mu,{size:20}):t.jsx(ol,{size:20})})]})]}),t.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 disabled:bg-gray-600 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:r?"Creating Account...":"Create Account"})]})},fm={insider:"P-27V6575111695415KNE2N6OI",gold:"P-4KK8219436336790HNE2N7HQ",deluxe:"P-5D389612KP666993XNE2N7UY"},gb=n=>{const e=n.toLowerCase();return e.includes("insider")?fm.insider:e.includes("gold")?fm.gold:e.includes("deluxe")?fm.deluxe:(console.error("Plan ID not found for:",n),null)},xb=async(n,e)=>{try{if(n){const r=await dp("users",n),i={...r||{},acceptedPlans:{...r&&r.acceptedPlans||{},[e]:!0}};await ui("users",n,i);return}}catch(r){console.warn("Supabase accept save failed, falling back to localStorage",r)}const s=`accepted_terms_${n||"guest"}_${e}`;localStorage.setItem(s,"1")},yb=({plan:n,isOpen:e,onClose:s,initialView:r})=>{const{currentUser:i}=vt(),[o,c]=S.useState(r==="auth"?"auth":"terms"),[u,f]=S.useState("register"),[h,y]=S.useState(!1),j=(P=>{const L=P.toLowerCase();return L.includes("insider")?"text-cyan-400":L.includes("gold")?"text-purple-400":L.includes("deluxe")?"text-lime-400":L.includes("spoiler")||L.includes("spoil me")?"text-cyan-400":L.includes("basic")?"text-purple-400":L.includes("premium")?"text-pink-400":"text-gold"})(n.name);S.useEffect(()=>{c(r==="auth"?"auth":"terms")},[r]),S.useEffect(()=>{c(i?"payment":"auth")},[i]),S.useEffect(()=>{i&&o==="auth"&&(console.log("User detected during auth - Auto-switching to Payment"),c("payment"))},[i,o]);const E=()=>{console.log("Auth Success Triggered - Switching to Payment"),c("payment")},k=S.useCallback(async()=>{await xb((i==null?void 0:i.id)||(i==null?void 0:i.uid)||null,n.id),y(!0),c("payment")},[i,n.id]),_=async(P,L)=>{await xb((i==null?void 0:i.uid)||null,n.id),s()};return e?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",children:t.jsxs("div",{className:"bg-zinc-900 border border-gold p-6 rounded-lg max-w-md w-full relative shadow-[0_0_20px_rgba(236,72,153,0.3)]",children:[t.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:""}),!i&&o==="auth"&&t.jsxs("div",{children:[t.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] mb-4 text-center",children:u==="login"?"Welcome Back":"Create Account"}),t.jsxs("p",{className:"text-gray-400 text-sm text-center mb-4",children:["You must be logged in to subscribe to the ",t.jsx("strong",{className:j,children:n.name}),"."]}),t.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[t.jsx("button",{onClick:()=>f("login"),className:`px-4 py-2 rounded-md font-bold transition-colors ${u==="login"?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Log In"}),t.jsx("button",{onClick:()=>f("register"),className:`px-4 py-2 rounded-md font-bold transition-colors ${u==="register"?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Create Account"})]}),u==="login"?t.jsx(f5,{onSuccess:E}):t.jsx(m5,{onSuccess:E})]}),o==="welcome"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl text-gold mb-4 text-center",children:"Welcome to the Club!"}),t.jsxs("p",{className:"text-gray-400 text-sm text-center mb-4",children:["Thank you for choosing to subscribe to the ",t.jsx("strong",{className:j,children:n.name})," plan."]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 mb-6",children:[t.jsxs("div",{className:"text-center mb-2",children:[t.jsxs("span",{className:"text-3xl font-bold text-white",children:[n.currency==="USD"?"$":"R",n.amount]}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Cancel anytime"})]}),t.jsx("div",{className:"mb-4",children:t.jsx(qm,{options:{clientId:"Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",currency:"USD",intent:"subscription",vault:!0,components:"buttons"},children:t.jsx(Rc,{style:{shape:"pill",color:"gold",layout:"vertical"},fundingSource:"paypal",createSubscription:(P,L)=>{const U=gb(n.name);if(!U)throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID configuration");return L.subscription.create({plan_id:U})},onApprove:_,onCancel:()=>{},onError:P=>{console.error("PayPal error",P)}})})}),t.jsx("div",{className:"text-xs text-gray-400 text-center",children:"By completing payment you accept the Terms and Conditions."})]}),o==="terms"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl text-gold mb-2 text-center",children:"Confirm Subscription"}),i&&t.jsxs("div",{className:"text-center mb-4 text-green-400 text-sm",children:["Logged in as: ",i.email]}),t.jsxs("div",{className:"bg-black p-4 rounded border border-gray-800 h-48 overflow-y-auto mb-4 text-sm text-gray-300",children:[t.jsx("p",{children:"1. Membership fees are billed monthly..."}),t.jsx("p",{children:"2. You may cancel anytime..."})]}),t.jsx("div",{className:"flex flex-col gap-3",children:t.jsx("button",{onClick:k,className:"bg-gold text-black font-bold py-3 rounded hover:brightness-110",children:"I AGREE - PROCEED TO PAYMENT"})})]}),o==="payment"&&t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] mb-4 text-center",children:" Welcome to Spoil Me Vintage"}),t.jsx("p",{className:"text-gray-400 text-sm text-center mb-6",children:'"You deserve to be celebrated every single day."'}),t.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 mb-6 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[t.jsxs("p",{className:"text-gray-300 italic text-sm mb-2",children:["You are taking a beautiful step towards self-love. By joining the ",t.jsx("strong",{className:j,children:n.name}),", you aren't just buying jewelry; you are investing in your own happiness and confidence."]}),t.jsx("div",{className:"text-gold text-xs uppercase tracking-wider font-bold mt-2",children:" The Spoil Me Team"})]}),t.jsxs("div",{className:"mb-6 text-sm text-gray-400",children:[t.jsxs("p",{children:["You are subscribing to the ",t.jsx("strong",{className:j,children:n.name}),"."]}),t.jsxs("p",{children:["Price: ",t.jsxs("strong",{children:[n.currency==="USD"?"$":"R",n.amount," / month"]})]}),t.jsx("p",{className:"text-xs mt-1",children:"(Cancel at anytime. No hidden fees.)"})]}),t.jsx("div",{className:"w-full relative z-10",children:t.jsx(qm,{options:{clientId:"Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",currency:"USD",intent:"subscription",vault:!0,components:"buttons"},children:t.jsx(Rc,{style:{shape:"pill",color:"gold",layout:"vertical",label:"subscribe"},fundingSource:"paypal",createSubscription:(P,L)=>{const U=gb(n.name);if(!U)throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID configuration");return L.subscription.create({plan_id:U})},onApprove:_})})})]})]})}):null},p5=()=>{const{addSystemNotification:n,user:e,memberCount:s,currency:r}=vt();cn();const i=S.useRef(null),[o,c]=S.useState(null),[u,f]=S.useState(!1),[h,y]=S.useState(!1),[v,j]=S.useState(""),[E,k]=S.useState(!1),[_,P]=S.useState(null),[L,U]=S.useState(null),[F,J]=S.useState(!1),[te,H]=S.useState(412),[M,C]=S.useState(500),[I,$]=S.useState(485),[O,V]=S.useState(500),[A,se]=S.useState(498),[fe,je]=S.useState(500),Ie=Ce=>Ce===500?750:Ce===750?1e3:Ce===1e3?1250:Ce+250;S.useEffect(()=>{te>=M-5&&C(Ie(M))},[te,M]),S.useEffect(()=>{I>=O-5&&V(Ie(O))},[I,O]),S.useEffect(()=>{A>=fe-5&&je(Ie(fe))},[A,fe]);const le=(Ce,Pe)=>{const Ue=Ce/Pe*100;let Qe="bg-green-500",lt=" OPEN";return Ue>=95?(Qe="bg-red-500 animate-pulse",lt=" CRITICAL"):Ue>=80&&(Qe="bg-orange-500",lt=" HIGH DEMAND"),{percentage:Ue,color:Qe,status:lt}},be=le(te,M),we=le(I,O),Z=le(A,fe),ce=new Date,W=ce.getMonth(),ue=ce.getFullYear();ce.getDate(),new Date(ue,W+1,0).getDate();const B=(Ce,Pe)=>{U({id:Ce,name:Ce,amount:Pe,currency:r}),J(!0)};return t.jsxs("div",{className:"py-8 space-y-12",children:[o&&t.jsx($p,{ref:i,amount:o.amount,itemName:`${o.name} Membership`,email:e.email,isSubscription:!0,frequency:3,cycles:0,customStr1:e.id,customStr2:"MEMBERSHIP_SIGNUP"}),h&&v&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-8 rounded-xl max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Complete Your Subscription"}),t.jsx(h5,{planId:v,userId:e.id,onApprove:async Ce=>{console.log("PayPal subscription approved:",Ce),alert(` Subscription successful! Welcome to ${_==null?void 0:_.name}!`),window.location.reload()},onError:Ce=>{console.error("PayPal error:",Ce),alert("Payment failed. Please try again."),y(!1)}}),t.jsx("button",{onClick:()=>y(!1),className:"mt-4 w-full py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg",children:"Cancel"})]})}),E&&_&&t.jsx(yb,{isOpen:E,onClose:()=>k(!1),plan:_,initialView:e?"terms":"auth"}),"%       ",F&&L&&t.jsx(yb,{plan:L,isOpen:F,onClose:()=>J(!1),initialView:e?"terms":"auth"}),t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("h1",{className:"font-cherry text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Membership Perks"}),t.jsx("p",{className:"font-architects text-xl md:text-2xl text-gray-300 max-w-2xl mx-auto",children:"Join the Spoil Me Vintage family and unlock a world of exclusive benefits, discounts, and special gifts!"})]}),t.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 ${r==="ZAR"?"xl:grid-cols-4":"xl:grid-cols-3"} gap-8`,children:r==="ZAR"?t.jsxs(t.Fragment,{children:[t.jsxs(Ve,{to:"/weekly-winners",className:"block relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[t.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-cyan-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Popular"}),t.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"Spoil Me Package"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"R19"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[t.jsxs("span",{children:[te," / ",M," Spots Taken"]}),t.jsxs("span",{className:`${be.percentage>=95?"text-red-500 animate-pulse":be.percentage>=80?"text-orange-500":"text-green-500"}`,children:[M-te," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${be.color}`,style:{width:`${be.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Join now before the monthly International Draw!"})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Get ",t.jsx("strong",{className:"text-white",children:"R25 Store Credit"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"5% OFF"})," everything in store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(Kn,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Fun: Entry into ",t.jsx("strong",{className:"text-white",children:"Weekly Giveaway"})," (Win R500 Gift Card)."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:Ce=>{Ce.preventDefault(),Ce.stopPropagation(),B("Spoil Me",19)},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayFast Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[t.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"Basic Package"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"R49"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Receive a ",t.jsx("strong",{className:"text-white",children:"R50 Voucher"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," entire store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ls,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"R100 Birthday Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ys,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Bonus: ",t.jsx("strong",{className:"text-white",children:"2x Entries"})," into the Weekly Drop."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>B("Basic",49),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayFast Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-pink-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(236, 72, 153, 0.4)"},children:[t.jsx("h2",{className:"text-2xl font-bold text-pink-500 text-center mt-4 mb-2",children:"Premium Package"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"R99"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-pink-500 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Receive a ",t.jsx("strong",{className:"text-white",children:"R100 Voucher"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-pink-500 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," entire store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ls,{className:"text-pink-500 shrink-0",size:16}),t.jsx("span",{children:"Holidays: Free small gift added to orders (Valentine's Day, Mother's Day, Festive)."})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ls,{className:"text-pink-500 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"R150 Birthday Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-pink-500 shrink-0",size:16}),t.jsxs("span",{children:["Priority: ",t.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>B("Premium",99),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayFast Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[t.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[t.jsx(Dt,{size:14})," The Ultimate"]}),t.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:'The Deluxe "Boss" Package'}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"R199"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[t.jsxs("span",{children:[A," / ",fe," Spots Taken"]}),t.jsxs("span",{className:`${Z.percentage>=95?"text-red-500 animate-pulse":Z.percentage>=80?"text-orange-500":"text-green-500"}`,children:[fe-A," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)] ${Z.color}`,style:{width:`${Z.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Warning: We strictly limit Vault access to ensure stock availability. 2 spots remaining."})]}),t.jsxs("div",{className:"bg-lime-900/20 border border-lime-500/30 rounded-xl p-4 mb-6",children:[t.jsxs("h3",{className:"text-lime-400 font-bold text-sm uppercase tracking-wide mb-2 flex items-center gap-2",children:[t.jsx(Dt,{size:16}),' ACCESS TO "THE SECRET VAULT"']}),t.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:["Shop clearance, samples, and slight imperfections starting at ",t.jsx("strong",{className:"text-white",children:"R10"}),"."]}),t.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[t.jsx("p",{children:t.jsx("strong",{children:"The Loyalty Ladder:"})}),t.jsx("p",{children:"Month 1: Buy 5 Vault items."}),t.jsx("p",{children:"Month 2: Buy 7 Vault items."}),t.jsx("p",{children:"Month 3: Buy 10 Vault items."}),t.jsxs("p",{children:["Month 4+: ",t.jsx("strong",{className:"text-lime-400",children:"UNLIMITED ACCESS"}),"."]}),t.jsx("p",{className:"text-red-400 italic",children:"Subscription reset? Start back at Month 1."})]})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: ",t.jsx("strong",{className:"text-white",children:"R150 Store Credit"})," every month (Rolls over)."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," normal retail items."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ls,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"R300 Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Priority: ",t.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),t.jsx("p",{className:"text-xs text-yellow-400 mb-4 italic",children:"Secret Vault items may include factory rejects or slight imperfections. Sold as-is."}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>B("Deluxe Vault",199),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayFast Secure Subscription"]})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[t.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"The Insider Club"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"$5.00"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("p",{className:"text-[10px] text-cyan-300 text-center mb-6 font-semibold uppercase tracking-wide border border-cyan-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:[be.status," (Batch 3)"]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[t.jsxs("span",{children:[te," / ",M," Spots Taken"]}),t.jsxs("span",{className:`${be.percentage>=95?"text-red-500 animate-pulse":be.percentage>=80?"text-orange-500":"text-green-500"}`,children:[M-te," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${be.color}`,style:{width:`${be.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Join now before the monthly International Draw!"})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Get ",t.jsx("strong",{className:"text-white",children:"$5.00 Store Credit"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"5% OFF"})," everything in store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(Kn,{className:"text-cyan-400 shrink-0",size:16}),t.jsxs("span",{children:["Fun: Entry into ",t.jsx("strong",{className:"text-white",children:"Weekly Giveaway"})," (Win $50 Gift Card)."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>B("Insider Club",5),className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayPal Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[t.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"The Gold Member"}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"$12.00"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsx("p",{className:"text-[10px] text-purple-300 text-center mb-6 font-semibold uppercase tracking-wide border border-purple-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:we.status}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-purple-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-purple-400 mb-1",children:[t.jsxs("span",{children:[I," / ",O," Spots Taken"]}),t.jsxs("span",{className:`${we.percentage>=95?"text-red-500 animate-pulse":we.percentage>=80?"text-orange-500":"text-green-500"}`,children:[O-I," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(168,85,247,0.8)] ${we.color}`,style:{width:`${we.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Only 15 spots left at this price."})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: Get ",t.jsx("strong",{className:"text-white",children:"$12.00 Store Credit"})," every month."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," everything in store."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ls,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"$20 Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-purple-500 shrink-0",size:16}),t.jsxs("span",{children:["Priority: ",t.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>B("Gold Member",12),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayPal Secure Subscription"]})]})]}),t.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[t.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[t.jsx(Dt,{size:14})," Top Tier"]}),t.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:'Deluxe "Vault" Access'}),t.jsxs("div",{className:"text-center mb-2",children:[t.jsx("span",{className:"text-4xl font-bold text-white",children:"$25.00"}),t.jsx("span",{className:"text-gray-400",children:"/month"})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6 relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[t.jsxs("span",{children:[A," / ",fe," Spots Taken"]}),t.jsxs("span",{className:`${Z.percentage>=95?"text-red-500 animate-pulse":Z.percentage>=80?"text-orange-500":"text-green-500"}`,children:[fe-A," spots left"]})]}),t.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)] ${Z.color}`,style:{width:`${Z.percentage}%`,transition:"width 1s ease-in-out"}})}),t.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Warning: We strictly limit Vault access to ensure stock availability. 2 spots remaining."})]}),t.jsxs("div",{className:"bg-lime-900/20 border border-lime-500/30 rounded-xl p-4 mb-6",children:[t.jsxs("h3",{className:"text-lime-400 font-bold text-sm uppercase tracking-wide mb-2 flex items-center gap-2",children:[t.jsx(Dt,{size:16}),' ACCESS TO "THE SECRET VAULT"']}),t.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:["Shop clearance, samples, and slight imperfections starting at ",t.jsx("strong",{className:"text-white",children:"R10"}),"."]}),t.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[t.jsx("p",{children:t.jsx("strong",{children:"The Loyalty Ladder:"})}),t.jsx("p",{children:"Month 1: Buy 5 Vault items."}),t.jsx("p",{children:"Month 2: Buy 7 Vault items."}),t.jsx("p",{children:"Month 3: Buy 10 Vault items."}),t.jsxs("p",{children:["Month 4+: ",t.jsx("strong",{className:"text-lime-400",children:"UNLIMITED ACCESS"}),"."]}),t.jsx("p",{className:"text-red-400 italic",children:"Subscription reset? Start back at Month 1."})]})]}),t.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Guaranteed: ",t.jsx("strong",{className:"text-white",children:"$15.00 Store Credit"})," every month (Rolls over)."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Discount: ",t.jsx("strong",{className:"text-white",children:"20% OFF"})," normal retail items."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ls,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Birthday: Receive a ",t.jsx("strong",{className:"text-white",children:"$40 Voucher"}),"."]})]}),t.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[t.jsx(ut,{className:"text-lime-400 shrink-0",size:16}),t.jsxs("span",{children:["Priority: ",t.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),t.jsx("p",{className:"text-xs text-yellow-400 mb-4 italic",children:"Secret Vault items may include factory rejects or slight imperfections. Sold as-is."}),t.jsxs("div",{className:"mt-auto",children:[t.jsx("button",{onClick:()=>B("Deluxe Vault",25),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[t.jsx(Bi,{size:12})," PayPal Secure Subscription"]})]})]})]})}),t.jsxs("div",{className:"mt-16 border-t border-gray-800 pt-12 text-center",children:[t.jsxs("h2",{className:"font-cherry text-3xl text-white flex items-center justify-center gap-3 mb-4",children:[t.jsx(ls,{className:"text-yellow-400",size:32})," Want to Earn Rewards for Free?"]}),t.jsx("p",{className:"text-gray-400 max-w-lg mx-auto mb-8",children:"You don't have to be a member to start earning. Join our social channels, leave reviews, and shop to earn points."}),t.jsxs(Ve,{to:"/earn-rewards",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105",children:["Go to Rewards Hub ",t.jsx(Qs,{size:20})]}),t.jsx("br",{}),t.jsxs(Ve,{to:"/vault",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105 mt-4",children:[t.jsx(Dt,{size:20})," Explore The Secret Vault"]}),t.jsx("div",{className:"mt-8 text-center",children:t.jsx(Ve,{to:"/terms",className:"text-gray-400 hover:text-white text-sm underline",children:"View Terms & Conditions"})})]})]})},g5=()=>{var y,v,j,E,k;const{user:n,claimSocialReward:e}=vt(),[s,r]=S.useState(!1),[i,o]=S.useState(null),[c,u]=S.useState(""),f=(_,P)=>{o({platform:_,name:P}),u("")},h=()=>{if(i){if(i.platform!=="whatsapp"&&!c.trim()){alert(`Please enter your ${i.name} username to verify.`);return}e(i.platform,c),o(null)}};return t.jsxs("div",{className:"max-w-5xl mx-auto py-8 space-y-12 relative",children:[i&&t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>o(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"One Last Step!"}),t.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"To prevent fraud and secure your points, please enter your username. This allows us to verify your follow."}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:["Your ",i.name," Username"]}),t.jsxs("div",{className:"relative",children:[t.jsx($r,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"text",value:c,onChange:_=>u(_.target.value),className:"w-full pl-10 p-3 bg-black border border-gray-700 rounded-xl text-white text-sm focus:border-pink-500 outline-none",placeholder:"@username"})]})]}),t.jsx("button",{onClick:h,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all",children:"Verify & Claim Points"})]}),t.jsx("button",{onClick:()=>o(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(cs,{size:20})})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 border-b border-gray-800 pb-8",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h1",{className:"font-cherry text-4xl text-white",children:"Loyalty Rewards"}),t.jsx("button",{onClick:()=>r(!0),className:"text-gray-500 hover:text-cyan-400 transition-colors",title:"How it works",children:t.jsx(sh,{size:24})})]}),t.jsx("p",{className:"text-gray-400 text-lg max-w-xl",children:"Complete simple tasks to earn points and unlock discounts on your next vintage treasure."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-purple-500/30 min-w-[250px] text-center shadow-[0_0_20px_rgba(168,85,247,0.15)] relative group",children:[t.jsx("div",{className:"absolute inset-0 bg-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"text-sm text-gray-400 uppercase tracking-wider mb-1 font-semibold",children:"Your Balance"}),t.jsx("div",{className:"text-5xl font-bold text-white mb-2 font-mono tracking-tight",children:n.loyaltyPoints}),t.jsx("div",{className:"text-xs text-purple-400 font-bold bg-purple-900/20 py-1 px-3 rounded-full w-fit mx-auto",children:"Points Available"})]})]})]}),s&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>r(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[t.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(cs,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:t.jsx(Hn,{size:24})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),t.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"1 Point for every R10"})," spent."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"100 Points"})," for verified reviews."]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",t.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing."]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",t.jsx("span",{className:"text-white font-bold",children:"R1.00 Discount"}),"."]}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum redemption is 1000 Points (R10)."})]})]}),t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[t.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[t.jsx(Hn,{size:14})," Membership Rule"]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",t.jsx("strong",{children:"R100 (10,000 pts)"})," per order. To redeem more, you must be a ",t.jsx(Ve,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),t.jsx("button",{onClick:()=>r(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[t.jsx(ls,{className:"text-yellow-400"})," Quick Earn: Social Media"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-pink-500 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-pink-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-pink-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(236,72,153,0.4)] relative z-10",children:t.jsx(na,{size:32,className:"text-pink-500"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"TikTok"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Get exclusive clips & flash sales."}),(y=n.socialRewards)!=null&&y.tiktok?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(ut,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>f("tiktok","TikTok"),className:"mt-auto w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Zi,{size:16})," Join & Earn 100"]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-blue-500 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-blue-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(59,130,246,0.4)] relative z-10",children:t.jsx(oc,{size:32,className:"text-blue-500"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Facebook"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Join our community group."}),(v=n.socialRewards)!=null&&v.facebook?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(ut,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>f("facebook","Facebook"),className:"mt-auto w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(59,130,246,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Zi,{size:16})," Join & Earn 100"]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-white/20 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:t.jsx(pu,{size:32,className:"text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Twitter"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"News and polls."}),(j=n.socialRewards)!=null&&j.twitter?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(ut,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>f("twitter","Twitter"),className:"mt-auto w-full py-3 bg-gray-700 hover:bg-gray-600 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(255,255,255,0.2)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Zi,{size:16})," Join & Earn 100"]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-green-500/30 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-green-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:t.jsx(ll,{size:32,className:"text-green-500"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"WhatsApp"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Instant drop notifications."}),(E=n.socialRewards)!=null&&E.whatsapp?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(ut,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>e("whatsapp"),className:"mt-auto w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(34,197,94,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Zi,{size:16})," Join & Earn 100"]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-red-500/30 transition-all",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-red-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:t.jsx("svg",{width:32,height:32,className:"text-red-500",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,children:t.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.75.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.747-1.378 0 0-.599 2.282-.744 2.84-.282 1.084-1.064 2.456-1.549 3.235C9.584 23.815 10.77 24.001 12.017 24.001c6.624 0 11.99-5.367 11.99-11.987C24.007 5.367 18.641.001 12.017.001z"})})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Pinterest"}),t.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Visual inspiration board."}),(k=n.socialRewards)!=null&&k.pinterest?t.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[t.jsx(ut,{size:18})," 100 Pts Claimed"]}):t.jsxs("button",{onClick:()=>f("pinterest","Pinterest"),className:"mt-auto w-full py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(239,68,68,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[t.jsx(Zi,{size:16})," Join & Earn 100"]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-8 border-t border-gray-800",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[t.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:t.jsx(fl,{className:"text-cyan-400",size:24})}),t.jsx("h3",{className:"text-lg font-bold text-white",children:"Shop & Earn"}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 1 point for every R10 you spend on any purchase automatically."}),t.jsx(Ve,{to:"/",className:"text-cyan-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Start Shopping"})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-yellow-500/30 transition-colors",children:[t.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:t.jsx(Rn,{className:"text-yellow-400",size:24})}),t.jsx("h3",{className:"text-lg font-bold text-white",children:"Review Products"}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 100 points for every verified review you leave on items you've bought."}),t.jsx(Ve,{to:"/profile",className:"text-yellow-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Check Pending Reviews"})]})]})]})},x5=({isOpen:n,onClose:e})=>{const{user:s,updateUser:r}=vt(),[i,o]=S.useState(null),[c,u]=S.useState(!1),f=async()=>{if(i){u(!0);try{await r({affiliateCurrency:i,currencyLocked:!0}),e()}catch(h){console.error("Error saving currency:",h)}finally{u(!1)}}};return n?t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/95 backdrop-blur-xl",children:t.jsxs("div",{className:"bg-zinc-900 border border-pink-500/50 rounded-2xl p-8 max-w-md w-full shadow-[0_0_50px_rgba(236,72,153,0.3)] animate-in zoom-in-95 duration-300",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"w-16 h-16 bg-pink-900/20 border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(ts,{size:32,className:"text-pink-400"})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Choose Your Earning Currency"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"This choice determines how you receive commissions and cannot be changed later."})]}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsx("button",{onClick:()=>o("ZAR"),className:`w-full p-4 rounded-xl border transition-all ${i==="ZAR"?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-green-900/20 rounded-full flex items-center justify-center",children:t.jsx(Ec,{size:16,className:"text-green-400"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:" South African Rand (ZAR)"}),t.jsx("div",{className:"text-xs text-gray-400",children:"EFT Bank Transfer Payouts"})]}),i==="ZAR"&&t.jsx(eo,{size:20,className:"text-green-400 ml-auto"})]})}),t.jsx("button",{onClick:()=>o("USD"),className:`w-full p-4 rounded-xl border transition-all ${i==="USD"?"bg-blue-900/20 border-blue-500 text-blue-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-900/20 rounded-full flex items-center justify-center",children:t.jsx(Ec,{size:16,className:"text-blue-400"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:" US Dollar (USD)"}),t.jsx("div",{className:"text-xs text-gray-400",children:"PayPal Payouts"})]}),i==="USD"&&t.jsx(eo,{size:20,className:"text-blue-400 ml-auto"})]})})]}),t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-4 rounded-lg mb-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Gn,{size:20,className:"text-yellow-500 shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-yellow-400 font-bold text-sm mb-1",children:"Permanent Choice"}),t.jsx("p",{className:"text-yellow-300 text-xs",children:"Once selected, your currency cannot be changed. Choose based on your payout preferences."})]})]})}),t.jsx("button",{onClick:f,disabled:!i||c,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all shadow-lg",children:c?"Saving...":"Confirm Currency Choice"})]})}):null},y5=()=>{const{user:n,affiliateLeaderboard:e,applyForAffiliate:s,buyAffiliateContent:r,joinAffiliateElite:i,register:o,login:c,getAllUsers:u,currency:f}=vt(),[h,y]=S.useState(!1),[v,j]=S.useState(1),[E,k]=S.useState(!1),[_,P]=S.useState(!1),[L,U]=S.useState({name:n&&n.name&&n.name!=="Guest"?n.name.split(" ")[0]:"",surname:n&&n.name&&n.name!=="Guest"?n.name.split(" ").slice(1).join(" "):"",email:(n==null?void 0:n.email)||"",dob:(n==null?void 0:n.birthday)||"",gender:"",reason:"",socials:"",password:""}),[F,J]=S.useState(!1),[te,H]=S.useState(!1),[M,C]=S.useState(!1),[I,$]=S.useState(!1),[O,V]=S.useState(""),[A,se]=S.useState(""),[fe,je]=S.useState({}),[Ie,le]=S.useState(!1),[be,we]=S.useState([]),[Z,ce]=S.useState(!1);S.useEffect(()=>{var ke,We,Nt;((ke=n.affiliateStats)==null?void 0:ke.status)==="pending"&&P(!0),((We=n.affiliateStats)==null?void 0:We.status)==="approved"&&u().then(ve=>{const Y=ve.filter(Se=>{var jt;return((jt=Se.affiliateStats)==null?void 0:jt.parentId)===n.id});we(Y)}),((Nt=n.affiliateStats)==null?void 0:Nt.status)==="approved"&&!n.currencyLocked&&ce(!0)},[n.affiliateStats,n.id,n.currencyLocked,u]);const W=S.useMemo(()=>[{title:"1. Introduction",content:'These Terms and Conditions ("Agreement") govern your participation in the Spoil Me Vintage Partnership Program ("Program"). By enrolling in the Program, you agree to be bound by these terms.'},{title:"2. Definitions",content:'"Partner", "You", and "Your" refer to the individual or entity applying for or participating in the Program. "We", "Us", and "Our" refer to Spoil Me Vintage. "Commission" refers to the amount paid for a successful referral. "Net Sales" refers to the final sale price of a product EXCLUDING shipping costs, customs duties, taxes (VAT), and any refunds.'},{title:"3. Enrollment",content:"To begin the enrollment process, you must submit a complete Partnership Application. We will evaluate your application and notify you of your acceptance or rejection. We reserve the right to reject applications from sites or profiles that do not meet our brand standards."},{title:"4. Affiliate Links",content:"You will be issued a unique Affiliate URL or code. Sales must be tracked via these links to generate commission. We use a 30-day cookie window. It is your responsibility to ensure that these links are correctly formatted and used on your site."},{title:"5. Commissions & Earnings",content:'You will earn commissions based on the specific product category sold: 5.1. Standard Jewelry: Earn 10% to 20% on Net Sales based on your monthly performance tier. 5.2. "Secret Vault" Items: Due to the clearance pricing of Vault items, these sales earn a flat 1% Commission regardless of your tier. 5.3. Memberships: Earn a fixed monthly recurring commission (ZAR R2-R15 or USD $1-$3) for active, paid subscriptions. 5.4. Override: Earn a 1% bonus on Net Sales generated by partners you directly recruit.'},{title:"6. Payment Terms & Currency",content:"Commissions are paid once a month. 6.1. South African Partners: Paid via EFT to a valid SA Bank Account. International earnings (USD) are converted to ZAR at the bank rate. Minimum payout: R200. 6.2. International Partners: Paid via PayPal in USD. South African earnings (ZAR) are converted to USD at the bank rate. Minimum payout: $50."},{title:'7. "Secret Vault" Items',content:'This section strictly governs the purchase of discounted items from the "Secret Vault." 7.1. Nature of Goods ("Sold As-Is"): Items listed in "The Secret Vault" (priced from R10 / $1) may include: Factory overstock, Sample items, Items with minor cosmetic imperfections ("Rejects" or "Seconds"). ALL SALES FROM THE SECRET VAULT ARE FINAL. NO RETURNS, REFUNDS, OR EXCHANGES ARE PERMITTED ON THESE ITEMS. 7.2. The "Loyalty Ladder" & Purchase Limits: To prevent resale abuse, purchase limits apply to The Secret Vault based on consecutive months of membership: Month 1: Maximum 5 items, Month 2: Maximum 7 items, Month 3: Maximum 10 items, Month 4+: Unlimited. 7.3. The "Reset Rule" (Strict Enforcement): Membership continuity is required to maintain your "Loyalty Ladder" status. If you cancel your subscription or if your payment fails and is not rectified within 48 hours, your Loyalty Ladder status RESETS TO MONTH 1.'},{title:"8. Competitions & Weekly Drops",content:'8.1. Promotional Competition: The "Spoil Me" package (R19) includes entry into giveaways. This is a promotional competition under the South African Consumer Protection Act (CPA), not a lottery. You are paying for the Membership Services (Sales alerts, Vouchers), and the entry is a complimentary benefit. 8.2. International Winners: If a winner is selected from outside South Africa: Physical prizes may be converted to Store Credit of equivalent value to avoid shipping fees. If the winner requests the physical item, the winner is responsible for all international shipping costs and customs duties.'},{title:"9. International Orders & Shipping",content:"9.1. Customs, Duties, and Taxes: DDU (Delivered Duty Unpaid): For all international orders (outside South Africa), Spoil Me Vintage is NOT responsible for any customs fees, import duties, or local taxes. These fees are the sole responsibility of the customer. If you refuse to pay customs fees and the package is returned to us, we will deduct the return shipping costs from any potential refund. 9.2. Shipping Times: International shipping times are estimates (typically 10-25 business days). We are not liable for delays caused by customs departments or global logistics strikes."},{title:"10. Returns and Refunds",content:"10.1. Standard Products (Non-Vault): South Africa: You may return unused, undamaged standard jewelry within 7 days of receipt for a store credit or exchange, in accordance with the CPA. International: Due to high shipping costs, international returns are generally not accepted unless the item arrived damaged. Evidence (photos) must be provided within 24 hours of delivery. 10.2. Non-Returnable Items: The following items are final sale and cannot be returned: Earrings (for hygiene reasons), Secret Vault Items, Customized or personalized jewelry."},{title:"11. Limitation of Liability",content:"To the fullest extent permitted by law, Spoil Me Vintage shall not be liable for: Allergic Reactions: Our jewelry materials are listed on the product page. It is the customer's responsibility to verify they are not allergic to metals (e.g., nickel, copper, alloys) before wearing. We are not liable for skin reactions. Indirect Damages: Any indirect, incidental, or consequential damages arising from the use of our products or website. Maximum Liability: In no event shall our total liability to you exceed the amount you paid to us in the 3 months preceding the claim."},{title:"12. Payment Terms",content:"Payments are processed securely via third-party providers (e.g., PayFast, Stripe, Yoco). Spoil Me Vintage does not store your full credit card details. By subscribing, you authorize us to charge your payment method automatically every month until you cancel."},{title:"13. Governing Law and Dispute Resolution",content:"These Terms are governed by the laws of the Republic of South Africa. Any disputes arising from these Terms shall be subject to the exclusive jurisdiction of the Magistrate's Court in Worcester, Western Cape. For International customers, you agree to waive any right to class action lawsuits and agree to resolve disputes through binding arbitration in South Africa, or via amicable email resolution."},{title:"14. Commission Rates & Exceptions",content:'14.1. Standard Products: Commission rates (10% - 20%) apply to all full-priced, standard retail jewelry items based on your monthly performance tier. 14.2. "Secret Vault" Items: Items purchased from "The Secret Vault" (Clearance/Sample stock) are sold at near-cost prices. Therefore, all Vault items earn a flat 1% commission, regardless of your current Tier status. 14.3. Shipping & Taxes: Commissions are calculated on the Net Product Price only. Shipping fees, taxes, and duties are excluded from all calculations. 14.4. Payouts: South Africa: Paid via EFT (ZAR). International earnings converted to ZAR. International: Paid via PayPal (USD). South African earnings converted to USD.'},{title:"15. CONTACT US",content:"For questions regarding these Terms, please contact us at: Email: spoilmevintagediy@gmail.com WhatsApp: +27 71858 9370"}],[]),ue=W.length>0&&W.every((ke,We)=>fe[We]),B=async ke=>{var Nt;if(ke.preventDefault(),se(""),await c(L.email,O)){$(!1),j(2);const Y=(await u()).find(Se=>Se.email.toLowerCase()===L.email.toLowerCase());((Nt=Y==null?void 0:Y.affiliateStats)==null?void 0:Nt.status)==="approved"&&(y(!1),setTimeout(()=>{var Se;return(Se=document.getElementById("affiliate-dashboard"))==null?void 0:Se.scrollIntoView({behavior:"smooth"})},500))}else se("Invalid password. Please try again.")},Ce=async ke=>{if(ke.preventDefault(),!L.reason.trim()||!F)return;const We={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},Nt={status:"pending",gender:L.gender,joinReason:`${L.reason} | Socials: ${L.socials}`,totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1};if(n.email)await s(L),C(!0);else{if(!L.email||!L.password){alert("Please provide email and password to create your account.");return}if((await u()).find(jt=>jt.email.toLowerCase()===L.email.toLowerCase())){$(!0),se("This email address is already associated with an account. Please Log In to continue your application.");return}if(!await o({name:`${L.name} ${L.surname}`,email:L.email,password:L.password,birthday:L.dob,notifications:[We],affiliateStats:Nt})){alert("Failed to create account. Please try again.");return}C(!0)}},Pe=()=>{y(!1),C(!1),j(1),H(!1),J(!1),je({}),$(!1),V(""),se("")},Ue=async()=>{window.confirm("Purchase the Partner Content Pack for R250?")&&(await r(),alert("Content Unlocked!"))},Qe=async()=>{window.confirm("Upgrade to Elite Partner Status? A fee applies.")&&(await i(),alert("Welcome to the Elite Squad!"))},lt=()=>{J(!0),k(!1)},St=ke=>{je(We=>({...We,[ke]:!We[ke]}))},ye=()=>{const ke=`${window.location.origin}/#/?ref=${n.affiliateCode}`;navigator.clipboard.writeText(ke),le(!0),setTimeout(()=>le(!1),2e3)},Xe=n.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,isElite:!1},nt=Xe.status==="approved",Ut=[{name:"Bronze",rate:10,min:0,max:f==="ZAR"?2e3:200},{name:"Silver",rate:11,min:f==="ZAR"?2001:201,max:f==="ZAR"?5e3:500},{name:"Gold",rate:15,min:f==="ZAR"?5001:501,max:f==="ZAR"?1e4:1e3},{name:"Platinum",rate:20,min:f==="ZAR"?10001:1001,max:f==="ZAR"?25e3:2500}],oe=Ut.find(ke=>Xe.totalSalesValue>=ke.min&&Xe.totalSalesValue<=ke.max)||Ut[0],Me=Ut.indexOf(oe);let Be=null;return Me<Ut.length-1&&(Be=Ut[Me+1],Be.min-oe.min,Xe.totalSalesValue-oe.min),t.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-16",children:[t.jsx("style",{children:`
            @keyframes marquee {
                0% { transform: translateX(100%); }
                100% { transform: translateX(-100%); }
            }
            .animate-marquee {
                animation: marquee 20s linear infinite;
            }
        `}),t.jsxs("div",{className:"relative rounded-3xl overflow-hidden bg-zinc-900 border border-pink-500/30 min-h-[400px] flex items-center",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-zinc-900/90 to-transparent z-10"}),t.jsx("div",{className:"absolute right-0 top-0 h-full w-1/2 bg-[url('https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80')] bg-cover bg-center opacity-40 grayscale mix-blend-luminosity"}),t.jsxs("div",{className:"relative z-20 p-8 md:p-16 max-w-2xl space-y-6",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-1.5 rounded-full text-sm font-bold uppercase tracking-wider",children:[t.jsx(Pc,{size:16})," Join the Team"]}),t.jsx("h1",{className:"font-cherry text-5xl md:text-7xl text-white leading-none drop-shadow-[0_0_15px_rgba(236,72,153,0.6)]",children:"Turn Passion into Profit"}),t.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:f==="ZAR"?"Join the Spoil Me Team. Earn up to 20% Commission + Monthly Recurring Rands.":"Join the Spoil Me Team. Earn up to 20% Commission + Monthly Recurring Cash."}),!nt&&Xe.status!=="pending"&&t.jsxs("button",{onClick:()=>y(!0),className:"px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.4)] flex items-center gap-2",children:[f==="ZAR"?"JOIN THE TEAM (ZA)":"JOIN THE TEAM (GLOBAL)"," ",t.jsx(Qs,{size:20})]}),Xe.status==="pending"&&t.jsxs("button",{onClick:()=>P(!0),className:"inline-flex items-center gap-2 bg-yellow-900/20 border border-yellow-500/30 text-yellow-400 px-6 py-3 rounded-lg font-bold hover:bg-yellow-900/40 transition-colors",children:[t.jsx(ur,{size:18})," Check Application Status"]}),nt&&t.jsxs("button",{onClick:()=>{var ke;return(ke=document.getElementById("affiliate-dashboard"))==null?void 0:ke.scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 bg-green-600 text-white font-bold rounded-full hover:bg-green-500 transition-all shadow-[0_0_20px_rgba(34,197,94,0.4)] flex items-center gap-2",children:["Go to Dashboard ",t.jsx(Qs,{size:20})]})]})]}),t.jsxs("div",{className:`overflow-hidden bg-zinc-900/50 border border-gray-800 rounded-2xl p-4 ${f==="ZAR"?"view-zar":"view-usd"}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Kn,{className:"text-yellow-500",size:20}),t.jsx("span",{className:"text-sm font-bold text-white",children:"Recent Partner Success"})]}),t.jsx("div",{className:"overflow-hidden",children:t.jsx("div",{className:"animate-marquee whitespace-nowrap",children:f==="ZAR"?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Sarah J. (Pretoria) earned R450..."}),t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Thandi M. (JHB) hit Gold Tier..."}),t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Lerato K. (Durban) earned R2,000..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Emily R. (Texas) earned $50..."}),t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Mike T. (London) hit Gold Tier..."}),t.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Jessica L. (NY) earned $120..."})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[t.jsx("div",{className:"w-16 h-16 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto mb-4 text-green-500 font-bold text-xl shadow-[0_0_15px_rgba(34,197,94,0.3)]",children:"1"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sign Up & Share"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Apply to become a partner. Once approved, share your unique code to start earning."})]}),t.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[t.jsx("div",{className:"w-16 h-16 bg-black border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 text-pink-500 font-bold text-xl shadow-[0_0_15px_rgba(236,72,153,0.3)]",children:"2"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Recruit & Earn"}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Invite others to join your team. You earn a ",t.jsx("strong",{children:"1% commission"})," on their sales forever!"]})]}),t.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[t.jsx("div",{className:"w-16 h-16 bg-black border-2 border-purple-500 rounded-full flex items-center justify-center mx-auto mb-4 text-purple-500 font-bold text-xl shadow-[0_0_15px_rgba(168,85,247,0.3)]",children:"3"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Get Paid"}),t.jsx("p",{className:"text-gray-400 text-sm",children:f==="ZAR"?"We payout commissions monthly via EFT to your South African bank account.":"We pay you monthly in USD via PayPal. Fast and secure."})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Earning Potential"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"See what successful partners are earning with our tiered commission structure."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:t.jsx(ts,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Passive Income"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Recruit 10 Deluxe Members"})]})]}),t.jsx("div",{className:"text-2xl font-bold text-green-400 mb-2",children:f==="ZAR"?"R150/month":"$30/month"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Earn recurring commissions on their monthly subscriptions forever."})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-yellow-900/20 rounded-lg text-yellow-400",children:t.jsx(Kn,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Weekly Bonus"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Hit the milestone"})]})]}),t.jsx("div",{className:"text-2xl font-bold text-yellow-400 mb-2",children:f==="ZAR"?"R200 Cash":"$15 Cash"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Weekly cash bonuses for reaching sales targets."})]})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Partner Success Stories"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Real partners sharing their experiences with the Spoil Me program."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-pink-900/20 rounded-full flex items-center justify-center text-pink-400 font-bold",children:"L"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Lerato, Johannesburg"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Started 6 months ago"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:'"I shared my link on WhatsApp status. My first month I made R2,000 extra cash. The EFT was on time and easy to receive."'})]}),t.jsxs("div",{className:`bg-zinc-900 p-6 rounded-2xl border border-gray-800 ${f==="USD"?"block":"hidden"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-cyan-900/20 rounded-full flex items-center justify-center text-cyan-400 font-bold",children:"J"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white",children:"Jessica, Texas"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Active partner"})]})]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:'"The recurring commission covers my own jewelry addiction! I love getting paid in USD via PayPal."'})]})]})]}),nt&&t.jsxs("div",{id:"affiliate-dashboard",className:"space-y-8 animate-in slide-in-from-bottom-10 duration-700 pt-8 border-t border-gray-800",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Your Partnership Dashboard"}),t.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",n&&n.name?n.name.split(" ")[0]:"Partner","! Manage your links and earnings."]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(Ve,{to:"/affiliate/store-builder",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white rounded-lg text-sm font-bold flex items-center gap-2",children:[t.jsx(Pc,{size:16})," Build Store"]}),t.jsxs("button",{onClick:Ue,className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg text-sm border border-gray-700 flex items-center gap-2",children:[t.jsx(zN,{size:16})," Content Assets"]}),!Xe.isElite&&t.jsxs("button",{onClick:Qe,className:"px-4 py-2 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:brightness-110",children:[t.jsx(Dt,{size:16})," Go Elite"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:t.jsx(ts,{size:24})}),t.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Total Earnings"})]}),t.jsxs("div",{className:"text-3xl font-bold text-white",children:["R",Xe.balance.toFixed(2)]}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Next payout date: 1st of month"})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:t.jsx(Ps,{size:24})}),t.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Direct Sales"})]}),t.jsx("div",{className:"text-3xl font-bold text-white",children:Xe.totalSalesCount}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Value: R",Xe.totalSalesValue.toFixed(0)]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:t.jsx(Rn,{size:24})}),t.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Current Rate"})]}),t.jsxs("div",{className:"text-3xl font-bold text-white",children:[Xe.commissionRate,"%"]}),t.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:["Tier: ",oe.name]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(so,{size:20,className:"text-pink-500"})," Your Referral Link"]}),t.jsx("div",{className:"bg-black p-4 rounded-xl border border-gray-700 flex flex-col gap-3",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[t.jsxs("code",{className:"flex-1 text-cyan-400 text-sm break-all font-mono bg-zinc-900/50 p-3 rounded border border-gray-800 w-full",children:[window.location.origin,"/#/?ref=",n.affiliateCode]}),t.jsxs("button",{onClick:ye,className:"w-full md:w-auto px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg transition-colors flex items-center justify-center gap-2 border border-gray-600",children:[Ie?t.jsx(ut,{size:14}):t.jsx(nh,{size:14}),Ie?"Copied!":"Copy Link"]})]})}),t.jsx("div",{className:"mt-4 bg-pink-900/20 p-3 rounded-lg border border-pink-500/20",children:t.jsxs("p",{className:"text-xs text-pink-300",children:[t.jsx("strong",{children:"Tip:"})," Customers get ",t.jsx("strong",{children:"5% OFF"})," when using your code ",t.jsx("code",{children:n.affiliateCode})," at checkout!"]})})]}),t.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-cyan-500/30 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:t.jsx(qN,{size:80,className:"text-cyan-500"})}),t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 relative z-10",children:[t.jsx(Ps,{size:20,className:"text-cyan-400"})," Recruitment Center"]}),t.jsx("div",{className:"bg-cyan-900/20 border border-cyan-500/30 p-4 rounded-xl mb-6 relative z-10",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-full text-cyan-400 shrink-0",children:t.jsx(ts,{size:16})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-bold text-white",children:"Earn 1% Override Commission"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Recruit new affiliates and earn 1% of their sales volume forever. No impact on their earnings!"})]})]})}),t.jsxs("div",{className:"space-y-3 relative z-10",children:[t.jsxs("h4",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:["My Recruits (",be.length,")"]}),be.length>0?t.jsx("div",{className:"max-h-[150px] overflow-y-auto pr-2 space-y-2 custom-scrollbar",children:be.map(ke=>{var We;return t.jsxs("div",{className:"flex justify-between items-center p-2 bg-black/40 rounded border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-6 h-6 bg-zinc-800 rounded-full flex items-center justify-center text-[10px] text-gray-400 border border-gray-700",children:ke.name?ke.name.charAt(0):"?"}),t.jsx("span",{className:"text-xs text-gray-300",children:ke.name})]}),t.jsxs("span",{className:"text-xs text-green-400 font-mono",children:["Sales: R",(We=ke.affiliateStats)==null?void 0:We.totalSalesValue.toFixed(0)]})]},ke.id)})}):t.jsx("div",{className:"text-center py-4 border border-dashed border-gray-800 rounded-lg",children:t.jsx("p",{className:"text-xs text-gray-500",children:"No recruits yet. Start building your team!"})})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 relative z-10",children:[t.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"Share your recruitment link:"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("code",{className:"flex-1 bg-black p-2 rounded text-[10px] text-gray-400 truncate border border-gray-800",children:[window.location.origin,"/#/?ref=",n.affiliateCode]}),t.jsx("button",{onClick:ye,className:"text-xs text-cyan-400 hover:text-cyan-300 font-bold",children:"Copy"})]})]})]})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Commission Tiers"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Your commission rate increases based on your all-time sales performance."})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Ut.map((ke,We)=>t.jsx("div",{className:`p-6 rounded-2xl border transition-all ${oe.name===ke.name?"bg-gradient-to-br from-yellow-900/20 to-orange-900/20 border-yellow-500/50 shadow-[0_0_20px_rgba(234,179,8,0.2)]":"bg-zinc-900 border-gray-800"}`,children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full mb-3 ${oe.name===ke.name?"bg-yellow-500 text-black":"bg-zinc-800 text-gray-400"}`,children:t.jsx(Hn,{size:20})}),t.jsx("h3",{className:`text-lg font-bold mb-1 ${oe.name===ke.name?"text-yellow-400":"text-white"}`,children:ke.name}),t.jsxs("div",{className:`text-2xl font-bold mb-2 ${oe.name===ke.name?"text-yellow-400":"text-gray-300"}`,children:[ke.rate,"%"]}),t.jsx("p",{className:"text-xs text-gray-500",children:f==="ZAR"?`R${ke.min.toLocaleString()} - ${ke.max===1/0?"":"R"+ke.max.toLocaleString()}`:`$${ke.min.toLocaleString()} - ${ke.max===1/0?"":"$"+ke.max.toLocaleString()}`})]})},ke.name))})]}),E&&t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-xl",onClick:()=>!ue&&k(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-3xl w-full relative z-20 shadow-2xl h-[90vh] flex flex-col animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-800",children:[t.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(Qy,{size:20,className:"text-pink-500"})," Terms & Conditions"]}),t.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-white",children:t.jsx(cs,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-8 pr-4",children:[t.jsx("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-4 rounded-lg mb-6 text-yellow-200 text-sm",children:"Please read each section carefully. You must acknowledge each section to proceed."}),W.map((ke,We)=>t.jsxs("div",{className:"bg-black/30 rounded-xl p-5 border border-gray-800 hover:border-gray-700 transition-colors",children:[t.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:ke.title}),t.jsx("div",{className:"text-sm text-gray-400 leading-relaxed whitespace-pre-wrap font-sans mb-4 pl-2 border-l-2 border-gray-700",children:ke.content}),t.jsxs("label",{className:`flex items-center gap-3 cursor-pointer p-3 rounded-lg transition-all ${fe[We]?"bg-green-900/20 border border-green-500/30":"bg-zinc-800/50 border border-gray-700 hover:bg-zinc-800"}`,children:[t.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${fe[We]?"bg-green-500 border-green-500 text-black":"bg-black border-gray-600 text-transparent"}`,children:t.jsx(ut,{size:14,strokeWidth:4})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:!!fe[We],onChange:()=>St(We)}),t.jsxs("span",{className:`text-sm font-bold ${fe[We]?"text-green-400":"text-gray-400"}`,children:["I have read and agree to the ",ke.title]})]})]},We))]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 flex justify-between items-center",children:[t.jsxs("div",{className:"text-xs text-gray-500",children:[Object.values(fe).filter(Boolean).length," of ",W.length," sections agreed"]}),t.jsxs("button",{onClick:lt,disabled:!ue,className:"px-8 py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg",children:[ue?t.jsx(ut,{size:18}):t.jsx(la,{size:18}),ue?"Confirm Agreement":"Agree to All Sections to Continue"]})]})]})]}),_&&t.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>P(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-yellow-500/50 rounded-2xl p-8 max-w-md w-full relative z-20 shadow-[0_0_50px_rgba(234,179,8,0.2)] animate-in zoom-in-95 duration-200 text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-yellow-900/20 border-2 border-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:t.jsx(ur,{size:40,className:"text-yellow-500"})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Under Review"}),t.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed mb-6",children:["Thank you for applying to the Spoil Me Vintage Partnership Program. ",t.jsx("br",{}),t.jsx("br",{}),"Our team is currently reviewing your application details. This process typically takes ",t.jsx("strong",{children:"24-48 hours"}),"."]}),t.jsx("button",{onClick:()=>P(!1),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded-xl transition-colors",children:"Understood"})]})]}),h&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:Pe}),t.jsx("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-xl w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200 max-h-[95vh] overflow-y-auto",children:M?t.jsx("div",{className:"text-center py-8 px-4",children:t.jsxs("div",{className:"bg-zinc-800 border border-green-500/30 rounded-2xl p-8 shadow-[0_0_40px_rgba(34,197,94,0.1)] relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-cyan-500"}),t.jsx("div",{className:"w-20 h-20 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto shadow-[0_0_20px_rgba(34,197,94,0.4)] mb-6",children:t.jsx(ut,{size:40,className:"text-green-500"})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Received!"}),t.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["Thank you, ",t.jsx("strong",{children:L.name}),". Your application has been sent to our admin team for review."]}),t.jsx("button",{onClick:Pe,className:"mt-8 w-full py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg",children:"Done"})]})}):I?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center border-b border-gray-800 pb-4",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Welcome Back"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Please log in to continue your application."})]}),A&&t.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/50 rounded-lg flex gap-2 items-center text-red-400 text-sm",children:[t.jsx(th,{size:16})," ",A]}),t.jsxs("form",{onSubmit:B,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Email Address"}),t.jsx("input",{type:"email",value:L.email,readOnly:!0,className:"w-full bg-zinc-800 border border-gray-700 rounded-lg p-3 text-gray-400 text-sm cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Password"}),t.jsx("input",{type:"password",value:O,onChange:ke=>V(ke.target.value),required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:""})]}),t.jsxs("button",{type:"submit",className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:[t.jsx(VN,{size:18})," Login & Continue Application"]})]}),t.jsx("div",{className:"text-center",children:t.jsx("button",{onClick:()=>$(!1),className:"text-xs text-gray-500 hover:text-white underline",children:"Go Back"})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Apply to Partner"}),t.jsx("button",{onClick:Pe,className:"text-gray-500 hover:text-white",children:t.jsx(cs,{size:24})})]}),v===1&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl",children:[t.jsxs("h3",{className:"text-purple-400 font-bold mb-2 flex items-center gap-2",children:[t.jsx(la,{size:18})," Reality Check"]}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"This is a business partnership. Inactive accounts (0 sales in 3 months) may be deactivated."})]}),t.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[t.jsx("div",{className:`mt-1 w-5 h-5 rounded border flex items-center justify-center ${te?"bg-pink-500 border-pink-500":"border-gray-600"}`,children:te&&t.jsx(ut,{size:14,className:"text-white"})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:te,onChange:ke=>H(ke.target.checked)}),t.jsx("span",{className:"text-sm text-gray-400 group-hover:text-white transition-colors",children:"I understand that this program requires active participation."})]}),t.jsx("button",{disabled:!te,onClick:()=>j(2),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all",children:"Continue"})]}),v===2&&t.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[!n.email&&t.jsxs("div",{className:"p-3 bg-zinc-800 rounded-lg border border-gray-700 mb-4",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Create your account to get started:"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[t.jsx("input",{type:"text",placeholder:"First Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.name,onChange:ke=>U({...L,name:ke.target.value})}),t.jsx("input",{type:"text",placeholder:"Surname",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.surname,onChange:ke=>U({...L,surname:ke.target.value})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"email",placeholder:"Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.email,onChange:ke=>U({...L,email:ke.target.value})}),t.jsx("input",{type:"password",placeholder:"Create Password",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.password,onChange:ke=>U({...L,password:ke.target.value})}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("input",{type:"date",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:L.dob,onChange:ke=>U({...L,dob:ke.target.value})}),t.jsxs("select",{className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",required:!0,value:L.gender,onChange:ke=>U({...L,gender:ke.target.value}),children:[t.jsx("option",{value:"",children:"Gender"}),t.jsx("option",{value:"Male",children:"Male"}),t.jsx("option",{value:"Female",children:"Female"}),t.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Why do you want to join?"}),t.jsx("textarea",{required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none h-24",placeholder:"Tell us about your audience or marketing plan...",value:L.reason,onChange:ke=>U({...L,reason:ke.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Social Media Links"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Instagram, TikTok, Blog URL...",value:L.socials,onChange:ke=>U({...L,socials:ke.target.value})})]}),f==="ZAR"?t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"text-sm font-bold text-white",children:"Banking Details (EFT Payments)"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("input",{type:"text",placeholder:"Bank Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm"}),t.jsx("input",{type:"text",placeholder:"Account Number",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}),t.jsx("input",{type:"text",placeholder:"Branch Code",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"text-sm font-bold text-white",children:"PayPal Details (USD Payments)"}),t.jsx("input",{type:"email",placeholder:"PayPal Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}),t.jsxs("div",{className:"pt-2",children:[t.jsxs("button",{type:"button",onClick:()=>k(!0),className:`w-full flex items-center justify-between p-4 rounded-xl border transition-all ${F?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:[t.jsxs("span",{className:"text-sm font-bold flex items-center gap-2",children:[t.jsx(Qy,{size:16})," ",F?"Terms Accepted":"Read Terms & Conditions"]}),F?t.jsx(eo,{size:18}):t.jsx(Qs,{size:16})]}),!F&&t.jsx("p",{className:"text-xs text-red-400 mt-1 text-center",children:"You must accept terms to proceed."})]}),t.jsx("button",{type:"submit",disabled:!F,className:"w-full py-4 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all mt-4",children:"Submit Application"})]})]})})]}),t.jsx(x5,{isOpen:Z,onClose:()=>ce(!1)})]})},b5=()=>{const{user:n,register:e,login:s,processGiftVoucherPurchase:r}=vt();cn();const[i,o]=S.useState(250),[c,u]=S.useState(""),[f,h]=S.useState(""),[y,v]=S.useState(""),[j,E]=S.useState(""),[k,_]=S.useState("self"),[P,L]=S.useState(0),[U,F]=S.useState(!1),[J,te]=S.useState("register"),[H,M]=S.useState(!1),[C,I]=S.useState(""),[$,O]=S.useState(""),[V,A]=S.useState(""),[se,fe]=S.useState(""),[je,Ie]=S.useState(""),le=S.useRef(null);S.useEffect(()=>{i>=250&&i<=500?L(100):L(0)},[i]);const be=i+P,we=async()=>{await r(be,{recipientName:c,senderName:f,message:y,whatsappNumber:j,deliveryMethod:k}),le.current&&le.current.submit()},Z=()=>{if(!c||!f){alert("Please fill in the 'To' and 'From' fields.");return}n.email?we():F(!0)},ce=async ue=>{if(ue.preventDefault(),se!==je){alert("Passwords do not match!");return}await e({name:C,email:$,birthday:V})&&(F(!1),setTimeout(()=>{we()},500))},W=async ue=>{ue.preventDefault(),await s($,se)?(F(!1),setTimeout(()=>{we()},500)):alert("Invalid Credentials")};return t.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 space-y-12 relative",children:[t.jsx($p,{ref:le,amount:i,itemName:`Gift Voucher for ${c}`,email:n.email||$,customStr1:c,customStr2:f,customStr3:y,returnUrl:`${window.location.origin}/#/profile`,cancelUrl:`${window.location.origin}/#/gift-cards`}),U&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>F(!1)}),t.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-2xl font-bold text-white",children:J==="register"?"Create Account to Pay":"Sign In to Pay"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["To secure your voucher and ensure delivery, please ",J==="register"?"create a profile":"sign in","."]})]}),J==="register"?t.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Full Name"}),t.jsxs("div",{className:"relative",children:[t.jsx($r,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"text",required:!0,value:C,onChange:ue=>I(ue.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Jane Doe"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(Cc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"email",required:!0,value:$,onChange:ue=>O(ue.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Birthday (For Birthday Vouchers)"}),t.jsxs("div",{className:"relative",children:[t.jsx($a,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"date",required:!0,value:V,onChange:ue=>A(ue.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(la,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:H?"text":"password",required:!0,value:se,onChange:ue=>fe(ue.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Confirm"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:H?"text":"password",required:!0,value:je,onChange:ue=>Ie(ue.target.value),className:"w-full p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),t.jsx("button",{type:"button",onClick:()=>M(!H),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:H?t.jsx(Mu,{size:16}):t.jsx(ol,{size:16})})]})]})]}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500 transition-colors",children:"Create Account & Pay"}),t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",t.jsx("button",{type:"button",onClick:()=>te("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):t.jsxs("form",{onSubmit:W,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(Cc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"email",required:!0,value:$,onChange:ue=>O(ue.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(la,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:H?"text":"password",required:!0,value:se,onChange:ue=>fe(ue.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),t.jsx("button",{type:"button",onClick:()=>M(!H),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:H?t.jsx(Mu,{size:16}):t.jsx(ol,{size:16})})]})]}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500 transition-colors",children:"Sign In & Pay"}),t.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",t.jsx("button",{type:"button",onClick:()=>te("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-white drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Give the Gift of Vintage"}),t.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Create a personalized digital wish card."})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl shadow-xl space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-800",children:[t.jsx("div",{className:"p-2 bg-pink-900/30 text-pink-500 rounded-lg",children:t.jsx(ls,{size:24})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:"Customize Voucher"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Enter details below"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Amount (R)"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"R"}),t.jsx("input",{type:"number",value:i,onChange:ue=>o(parseFloat(ue.target.value)),className:"w-full bg-black border border-gray-700 rounded-xl py-4 pl-10 pr-4 text-white text-xl font-bold focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none transition-all",placeholder:"250",min:"50"})]}),i>=250&&i<=500?t.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-xs font-bold bg-green-900/20 p-2 rounded border border-green-500/30 animate-in fade-in slide-in-from-top-2",children:[t.jsx(ys,{size:14}),"Bonus R100 added to voucher value automatically!"]}):t.jsxs("p",{className:"text-xs text-gray-500",children:["Tip: Spend between ",t.jsx("strong",{children:"R250 - R500"})," to get a ",t.jsx("span",{className:"text-pink-500 font-bold",children:"FREE R100"})," bonus!"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"To (Recipient Name)"}),t.jsx("input",{type:"text",value:c,onChange:ue=>u(ue.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. Sarah"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-300 flex items-center gap-2",children:[t.jsx($m,{size:14})," From (Your Name)"]}),t.jsx("input",{type:"text",value:f,onChange:ue=>h(ue.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. John"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Personal Message"}),t.jsx("textarea",{rows:4,value:y,onChange:ue=>v(ue.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none resize-none",placeholder:"Write a sweet note...",maxLength:150}),t.jsxs("div",{className:"text-right text-[10px] text-gray-600",children:[y.length,"/150"]})]}),t.jsxs("div",{className:"space-y-4 pt-2 border-t border-gray-800",children:[t.jsx("label",{className:"block text-sm font-bold text-gray-300",children:"How should we deliver this?"}),t.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[t.jsxs("div",{onClick:()=>_("self"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${k==="self"?"bg-purple-900/20 border-purple-500 ring-1 ring-purple-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[t.jsx("div",{className:`mt-1 p-1 rounded-full ${k==="self"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400"}`,children:t.jsx($r,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:`text-sm font-bold ${k==="self"?"text-purple-400":"text-gray-300"}`,children:"Send to Me (Higher Success Rate)"}),t.jsx("div",{className:"flex items-center gap-2 mt-1",children:t.jsxs("span",{className:"text-[10px] bg-green-900/40 text-green-400 border border-green-500/30 px-1.5 py-0.5 rounded font-bold flex items-center gap-1",children:[t.jsx(ut,{size:10})," Best Option"]})}),t.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We send the voucher code and link to YOU via notification. You can then forward it via WhatsApp personally."}),k==="self"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:ue=>ue.stopPropagation(),children:[t.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[t.jsx(na,{size:12})," Your WhatsApp Number"]}),t.jsx("input",{type:"text",value:j,onChange:ue=>E(ue.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]}),t.jsxs("div",{onClick:()=>_("recipient"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${k==="recipient"?"bg-pink-900/20 border-pink-500 ring-1 ring-pink-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[t.jsx("div",{className:`mt-1 p-1 rounded-full ${k==="recipient"?"bg-pink-500 text-white":"bg-gray-800 text-gray-400"}`,children:t.jsx(rh,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:`text-sm font-bold ${k==="recipient"?"text-pink-400":"text-gray-300"}`,children:"Send directly to Recipient"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We will email or WhatsApp the recipient directly on your behalf."}),k==="recipient"&&t.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:ue=>ue.stopPropagation(),children:[t.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[t.jsx(ll,{size:12})," Recipient WhatsApp (Optional)"]}),t.jsx("input",{type:"text",value:j,onChange:ue=>E(ue.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]})]})]}),t.jsxs("button",{onClick:Z,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 text-lg",children:[t.jsx(kc,{size:20})," Buy Now & Pay - R",i.toFixed(2)]}),t.jsxs("p",{className:"text-center text-xs text-gray-500 mt-2 flex items-center justify-center gap-1",children:[t.jsx(ut,{size:12,className:"text-green-500"})," Secure Payment via PayFast"]})]}),t.jsxs("div",{className:"sticky top-24",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[t.jsx(kc,{size:16})," Example"]}),t.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),t.jsx("div",{className:"absolute top-0 left-0 p-4 opacity-10 pointer-events-none",children:t.jsx("span",{className:"font-cherry text-8xl text-white leading-none",children:"SV"})}),t.jsxs("div",{className:"relative h-full p-6 md:p-8 flex flex-col justify-between z-20",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-cherry text-xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.3)]",children:"Spoil Me Vintage"}),t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx(ys,{size:10,className:"text-cyan-400"}),t.jsx("p",{className:"text-[10px] text-gray-300 tracking-[0.2em] uppercase",children:"Exclusive Voucher"})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("div",{className:"text-2xl md:text-5xl font-bold text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.5)] font-architects",children:["R",be]})})]}),t.jsxs("div",{className:"flex-1 flex flex-col justify-center py-2 md:py-4 relative",children:[t.jsxs("p",{className:"font-architects text-lg md:text-2xl text-gray-200 leading-relaxed text-center break-words relative drop-shadow-sm line-clamp-3",children:['"',y||"Treat yourself to something timeless...",'"']}),t.jsx("div",{className:"mx-auto mt-4 md:mt-6 cursor-pointer group w-full md:w-auto flex justify-center",children:t.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-full px-6 py-3 md:px-6 md:py-2 flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(34,211,238,0.2)] hover:bg-cyan-900/30 hover:border-cyan-400 transition-all w-full md:w-auto",children:[t.jsx("span",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs md:text-xs font-bold text-white uppercase tracking-widest group-hover:text-cyan-300 transition-colors",children:"Redeem Now"}),t.jsx(Qs,{size:12,className:"text-cyan-400 group-hover:translate-x-1 transition-transform"})]})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-800 pt-3 md:pt-4",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"To"}),t.jsx("p",{className:"text-sm font-bold text-white truncate",children:c||"Recipient Name"})]}),t.jsxs("div",{className:"space-y-1 text-right",children:[t.jsxs("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center justify-end gap-1",children:["From ",t.jsx($m,{size:10})]}),t.jsx("p",{className:"text-lg font-architects text-cyan-400 truncate",children:f||"Your Name"})]})]})]})]}),t.jsxs("div",{className:"mt-6 bg-zinc-900/50 border border-gray-800 rounded-xl p-5 shadow-lg",children:[t.jsxs("h4",{className:"font-bold text-white text-sm mb-3 flex items-center gap-2 border-b border-gray-800 pb-2",children:[t.jsx(ut,{size:14,className:"text-green-400"})," Verified Voucher Features"]}),t.jsxs("ul",{className:"text-xs text-gray-400 space-y-2.5",children:[t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(ys,{size:12,className:"text-purple-400 mt-0.5"})," Valid for 3 years from date of purchase."]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(na,{size:12,className:"text-cyan-400 mt-0.5"})," ",t.jsx("span",{className:"text-white font-bold",children:"Smart Link:"}),' Recipient taps "Redeem Now" to auto-apply discount in App.']}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(ll,{size:12,className:"text-green-400 mt-0.5"})," ",t.jsx("span",{className:"text-white font-bold",children:"Instant Delivery"})," via Notification & WhatsApp."]})]})]})]})]})]})},v5=()=>{const{categoryName:n}=Dc(),{products:e,categories:s}=vt(),r=decodeURIComponent(n||""),i=s.find(c=>c.name===r),o=e.filter(c=>c.category===r);return S.useEffect(()=>{window.scrollTo(0,0)},[n]),i?t.jsxs("div",{className:"space-y-8 pb-12",children:[t.jsxs("div",{className:"relative h-64 md:h-80 rounded-2xl overflow-hidden bg-zinc-900 border border-gray-800 shadow-2xl group",children:[t.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"}),t.jsxs("div",{className:"absolute bottom-0 left-0 p-8 w-full",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsxs(Ve,{to:"/",className:"text-xs text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[t.jsx(oa,{size:12})," Home"]}),t.jsx("span",{className:"text-gray-600",children:"/"}),t.jsx("span",{className:"text-xs text-pink-500 font-bold tracking-wider uppercase",children:"Collection"})]}),t.jsx("h1",{className:"font-cherry text-4xl md:text-6xl text-white drop-shadow-lg mb-2",children:i.name}),i.description&&t.jsx("p",{className:"text-gray-300 max-w-2xl text-sm md:text-base font-light border-l-4 border-pink-500 pl-4",children:i.description})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(ys,{size:20,className:"text-cyan-400"}),"Available Treasures (",o.length,")"]})}),o.length>0?t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map(c=>t.jsx(Bc,{product:c},c.id))}):t.jsxs("div",{className:"py-20 text-center border border-dashed border-gray-800 rounded-2xl",children:[t.jsx("p",{className:"text-gray-500",children:"No products found in this collection yet."}),t.jsx(Ve,{to:"/",className:"text-pink-500 text-sm mt-4 inline-block hover:underline",children:"Browse other collections"})]})]})]}):t.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Collection Not Found"}),t.jsxs(Ve,{to:"/",className:"text-pink-500 hover:text-pink-400 flex items-center gap-2",children:[t.jsx(oa,{size:20})," Back to Home"]})]})},w5=()=>{const{type:n}=Dc(),{products:e,categories:s}=vt(),[r,i]=S.useState("newest"),[o,c]=S.useState(!1),[u,f]=S.useState(""),[h,y]=S.useState(""),[v,j]=S.useState(!1),[E,k]=S.useState(1),_=20;S.useEffect(()=>{window.scrollTo(0,0),c(!1),f(""),y(""),i("newest"),k(1)},[n]);const{title:P,baseProducts:L}=S.useMemo(()=>{let H="",M=[];switch(n){case"stud":H="Stud Earrings",M=e.filter(C=>C.type==="Stud"||C.isFeaturedStud);break;case"dangle":H="Dangle Earrings",M=e.filter(C=>C.type==="Dangle"||C.isFeaturedDangle);break;case"ring":H="Rings",M=e.filter(C=>C.type==="Ring");break;case"unique":H="Unique Pendants",M=e.filter(C=>C.isUniquePendant);break;case"bracelet":H="Bracelets",M=e.filter(C=>C.type==="Bracelet"||C.isFeaturedBracelet);break;case"watch":H="Watches",M=e.filter(C=>C.isFeaturedWatch);break;case"best":H="Best Sellers",M=e.filter(C=>C.isBestSeller);break;case"sets":H="Jewelry Sets",M=e.filter(C=>C.isJewelrySet);break;default:H="Catalog",M=e}return{title:H,baseProducts:M}},[n,e]),U=S.useMemo(()=>{const H=new Set;return L.forEach(M=>{var C;(C=M.colors)==null||C.forEach(I=>H.add(I))}),Array.from(H).sort()},[L]),F=S.useMemo(()=>{let H=[...L];if(o){const M=new Date;H=H.filter(C=>{const I=C.promoStartsAt?new Date(C.promoStartsAt):null,$=C.promoExpiresAt?new Date(C.promoExpiresAt):null;return(C.promoPrice||0)>0&&(!I||I<=M)&&(!$||$>M)})}return u&&(H=H.filter(M=>{var C;return(C=M.colors)==null?void 0:C.includes(u)})),h&&(H=H.filter(M=>M.category===h)),H.sort((M,C)=>r==="price_asc"?M.price-C.price:r==="price_desc"?C.price-M.price:new Date(C.createdAt).getTime()-new Date(M.createdAt).getTime()),H},[L,o,u,h,r]),J=S.useMemo(()=>{const H=(E-1)*_,M=H+_;return F.slice(H,M)},[F,E,_]),te=Math.ceil(F.length/_);return t.jsxs("div",{className:"space-y-8 pb-12 min-h-screen",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 pt-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs text-gray-500",children:[t.jsxs(Ve,{to:"/",className:"hover:text-white flex items-center gap-1",children:[t.jsx(oa,{size:12})," Home"]}),t.jsx("span",{children:"/"}),t.jsx("span",{className:"text-pink-500 font-bold",children:P})]}),t.jsx("h1",{className:"font-cherry text-3xl md:text-4xl text-white",children:P}),t.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[F.length," Items Found"]})]}),t.jsxs("button",{className:"md:hidden flex items-center gap-2 bg-zinc-800 px-4 py-2 rounded text-white text-sm w-fit",onClick:()=>j(!v),children:[t.jsx(TI,{size:16})," Filters & Sort"]}),t.jsxs("div",{className:`flex-col md:flex-row gap-4 items-start md:items-center bg-zinc-900/80 p-4 rounded-xl border border-gray-800 ${v?"flex":"hidden md:flex"}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Sort:"}),t.jsxs("select",{value:r,onChange:H=>i(H.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none",children:[t.jsx("option",{value:"newest",children:"Newest"}),t.jsx("option",{value:"price_asc",children:"Price Low-High"}),t.jsx("option",{value:"price_desc",children:"Price High-Low"})]})]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none bg-black border border-gray-700 px-3 py-1 rounded hover:border-pink-500 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:H=>c(H.target.checked),className:"hidden"}),t.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${o?"bg-pink-600 border-pink-600":"border-gray-500"}`,children:o&&t.jsx(ut,{size:10,className:"text-white"})}),t.jsx("span",{className:`text-sm ${o?"text-pink-400 font-bold":"text-gray-300"}`,children:"Promotions"})]}),t.jsxs("select",{value:h,onChange:H=>y(H.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[t.jsx("option",{value:"",children:"All Collections"}),s.map(H=>t.jsx("option",{value:H.name,children:H.name},H.id))]}),U.length>0&&t.jsxs("select",{value:u,onChange:H=>f(H.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[t.jsx("option",{value:"",children:"All Colors"}),U.map(H=>t.jsx("option",{value:H,children:H},H))]}),(o||u||h)&&t.jsx("button",{onClick:()=>{c(!1),f(""),y("")},className:"text-xs text-red-400 hover:text-red-300 underline",children:"Clear"})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:J.map(H=>t.jsx(Bc,{product:H},H.id))}),F.length===0&&t.jsxs("div",{className:"py-20 text-center bg-zinc-900/30 rounded-xl border border-dashed border-gray-800",children:[t.jsx("p",{className:"text-gray-400",children:"No products found matching your filters."}),t.jsx("button",{onClick:()=>{c(!1),f(""),y("")},className:"mt-4 text-pink-500 font-bold hover:underline",children:"Clear Filters"})]}),te>1&&t.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between text-sm text-gray-400 mt-8",children:[t.jsxs("div",{children:["Page ",E," of ",te]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>k(H=>Math.max(H-1,1)),className:"bg-black border border-gray-700 rounded px-3 py-1 hover:bg-gray-800 transition-colors disabled:opacity-50",disabled:E===1,children:"Previous"}),t.jsx("button",{onClick:()=>k(H=>Math.min(H+1,te)),className:"bg-black border border-gray-700 rounded px-3 py-1 hover:bg-gray-800 transition-colors disabled:opacity-50",disabled:E===te,children:"Next"})]})]})]})},N5=()=>{const{products:n,isDemoMode:e,resetStore:s,dbConnectionError:r,seedTestUsers:i,runDataDiagnostics:o,simulateAffiliateSale:c,getAllUsers:u,adminAdjustPoints:f,auth:h,user:y}=vt();if(!y||!y.isAdmin)return t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-zinc-900 text-white",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),t.jsx("p",{className:"text-gray-400",children:"You do not have permission to access the admin panel."})]})});const[v,j]=S.useState(null),[E,k]=S.useState(""),[_,P]=S.useState(100),[L,U]=S.useState(null),[F,J]=S.useState([]),[te,H]=S.useState(""),[M,C]=S.useState(null),[I,$]=S.useState([]),[O,V]=S.useState([]),[A,se]=S.useState([]),[fe,je]=S.useState(!0);S.useEffect(()=>{(async()=>{const ue=await u();J(ue),ue.length>0&&H(ue[0].id)})()},[u]),S.useEffect(()=>{let W=0;const ue=3,B=()=>{W++,W>=ue&&je(!1)};(async()=>{const St=await os("artist_applications",{orderBy:{column:"submitted_at",ascending:!1}});$((St||[]).map(nt=>({id:nt.id,...nt,submittedAt:nt.submitted_at?new Date(nt.submitted_at):new Date}))),B();const ye=await os("artists");V(ye||[]),B();const Xe=await os("artist_products");se((Xe||[]).map(nt=>({id:nt.id,...nt,createdAt:nt.created_at?new Date(nt.created_at):new Date,receivedAtHub:nt.received_at_hub?new Date(nt.received_at_hub):null,approvedAt:nt.approved_at?new Date(nt.approved_at):null}))),B()})();const Pe=Qo("artist_applications",async()=>{const St=await os("artist_applications",{orderBy:{column:"submitted_at",ascending:!1}});$((St||[]).map(ye=>({id:ye.id,...ye,submittedAt:ye.submitted_at?new Date(ye.submitted_at):new Date})))}),Ue=Qo("artists",async()=>{const St=await os("artists");V(St||[])}),Qe=Qo("artist_products",async()=>{const St=await os("artist_products");se((St||[]).map(ye=>({id:ye.id,...ye,createdAt:ye.created_at?new Date(ye.created_at):new Date,receivedAtHub:ye.received_at_hub?new Date(ye.received_at_hub):null,approvedAt:ye.approved_at?new Date(ye.approved_at):null})))}),lt=setTimeout(()=>{fe&&(console.warn("Artist data loading timed out, setting loading to false"),je(!1))},5e3);return()=>{clearTimeout(lt),Pe&&Pe(),Ue&&Ue(),Qe&&Qe()}},[]);const Ie=[{title:"Total Revenue",value:"R12,450",change:"+12%",icon:ts,color:"bg-green-900/30 text-green-400 border-green-500/20"},{title:"Total Orders",value:"154",change:"+8%",icon:ca,color:"bg-cyan-900/30 text-cyan-400 border-cyan-500/20"},{title:"Active Users",value:"1,203",change:"+24%",icon:Ps,color:"bg-purple-900/30 text-purple-400 border-purple-500/20"},{title:"Products",value:n.length,change:"0%",icon:Um,color:"bg-pink-900/30 text-pink-400 border-pink-500/20"}],le=()=>{const W=o();j(W)},be=async()=>{if(!E)return;U("Processing...");const W=await c(E,_);U(W.message)},we=async()=>{te&&(await f(te,1e3),C(`Added 1000 Points to user ID: ${te}`),setTimeout(()=>C(null),3e3))},Z=async()=>{if(!te){alert("Please select a user");return}await f(te,100),C(`Simulated Review: Awarded 100 Points to ${te}`),setTimeout(()=>C(null),3e3)},ce=[{path:"/admin",icon:Um,label:"Dashboard"},{path:"/admin/orders",icon:ca,label:"Orders"},{path:"/admin/products",icon:to,label:"Products"},{path:"/admin/categories",icon:HN,label:"Categories"},{path:"/admin/custom-pendant-manager",icon:ys,label:"Custom Pendants"},{path:"/admin/gift-cards",icon:ls,label:"Gift Cards"},{path:"/admin/social",icon:so,label:"Social Studio"},{path:"/admin/affiliates",icon:Ps,label:"Affiliates"},{path:"/admin/winners",icon:Kn,label:"Weekly Winners"},{path:"/admin/expenses",icon:ts,label:"Expenses"},{path:"/admin/vault",icon:Dt,label:"Vault Management"},{path:"/admin/members",icon:ea,label:"Membership"},{path:"/admin/artists",icon:Ql,label:"Artists"}];return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Dashboard Overview"}),t.jsxs("div",{className:"flex gap-2",children:[!e&&t.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-3 py-2 rounded hover:bg-purple-900/50 transition-colors",children:[t.jsx(DI,{size:14})," Seed Test Users to DB"]}),e&&t.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-3 py-2 rounded hover:bg-red-900/50 transition-colors",children:[t.jsx(Tc,{size:14})," Reset Demo Data"]})]})]}),t.jsx("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-4",children:t.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:ce.map(W=>t.jsxs(Ve,{to:W.path,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-400 hover:text-white bg-zinc-800/50 hover:bg-zinc-700 rounded-lg transition-colors",children:[t.jsx(W.icon,{size:16})," ",W.label]},W.path))})}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[t.jsx(ea,{size:20,className:"text-purple-400"}),"Membership Overview"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Spoil Me"}),t.jsx("span",{className:"text-xs bg-pink-900/30 text-pink-400 border border-pink-500/30 px-2 py-1 rounded",children:"Premium"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Ultimate luxury experience with exclusive perks"}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),t.jsx("span",{className:"text-white",children:"R25"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"5%"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Active Members:"}),t.jsx("span",{className:"text-green-400",children:"127"})]})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Basic"}),t.jsx("span",{className:"text-xs bg-blue-900/30 text-blue-400 border border-blue-500/30 px-2 py-1 rounded",children:"Standard"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Essential benefits for regular shoppers"}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),t.jsx("span",{className:"text-white",children:"R50"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20%"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Active Members:"}),t.jsx("span",{className:"text-green-400",children:"342"})]})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Premium"}),t.jsx("span",{className:"text-xs bg-green-900/30 text-green-400 border border-green-500/30 px-2 py-1 rounded",children:"Popular"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Enhanced shopping experience"}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),t.jsx("span",{className:"text-white",children:"R12"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20%"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Active Members:"}),t.jsx("span",{className:"text-green-400",children:"289"})]})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Deluxe Boss"}),t.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-400 border border-yellow-500/30 px-2 py-1 rounded",children:"Elite"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"VIP treatment with maximum benefits"}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),t.jsx("span",{className:"text-white",children:"R25"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"30%"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Active Members:"}),t.jsx("span",{className:"text-green-400",children:"156"})]})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Insider Club"}),t.jsx("span",{className:"text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-2 py-1 rounded",children:"Exclusive"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Early access to new products and promotions"}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),t.jsx("span",{className:"text-white",children:"R5"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20%"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Active Members:"}),t.jsx("span",{className:"text-green-400",children:"98"})]})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Gold Member"}),t.jsx("span",{className:"text-xs bg-orange-900/30 text-orange-400 border border-orange-500/30 px-2 py-1 rounded",children:"Premium"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Gold standard benefits and rewards"}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),t.jsx("span",{className:"text-white",children:"R5"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20%"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Active Members:"}),t.jsx("span",{className:"text-green-400",children:"203"})]})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700 col-span-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Deluxe Vault"}),t.jsx("span",{className:"text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-2 py-1 rounded",children:"Ultimate"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Access to exclusive vault items with maximum benefits"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),t.jsx("span",{className:"text-white",children:"R25"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"30%"})]})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Active Members:"}),t.jsx("span",{className:"text-green-400",children:"87"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Vault Access:"}),t.jsx("span",{className:"text-white",children:"24hrs Early"})]})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Priority Support:"}),t.jsx("span",{className:"text-white",children:"WhatsApp"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Free Shipping:"}),t.jsx("span",{className:"text-white",children:"Always"})]})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly Giveaways:"}),t.jsx("span",{className:"text-white",children:"Entry"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Winners:"}),t.jsx("span",{className:"text-white",children:"Eligible"})]})]})]})]})]})]}),t.jsxs("div",{className:"bg-zinc-900/50 border-2 border-amber-500/30 p-6 rounded-xl relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 bg-amber-500/20 text-amber-400 px-3 py-1 text-xs font-bold rounded-bl-lg border-l border-b border-amber-500/30",children:"TESTING LAB"}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-amber-900/30 text-amber-400 rounded-lg border border-amber-500/30",children:t.jsx(II,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-white text-lg",children:"Feature Verification Lab"}),t.jsx("p",{className:"text-gray-400 text-xs",children:"Manually trigger logic to verify Affiliate & Loyalty systems."})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2 text-sm",children:[t.jsx(ts,{size:14,className:"text-green-400"})," Affiliate Sale Simulator"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Affiliate Code"}),t.jsx("input",{type:"text",className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:E,onChange:W=>k(W.target.value),placeholder:"e.g. Spoilme-FAY003"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Sale Amount (R)"}),t.jsx("input",{type:"number",className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:_,onChange:W=>P(parseFloat(W.target.value))})]}),t.jsx("button",{onClick:be,className:"w-full py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors",children:"Simulate Sale & Commission"}),L&&t.jsx("div",{className:"p-2 bg-zinc-800 rounded text-xs text-green-300 border border-green-500/30 mt-2",children:L})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2 text-sm",children:[t.jsx(Hn,{size:14,className:"text-purple-400"})," Loyalty System Tester"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Select User"}),t.jsxs("select",{className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:te,onChange:W=>H(W.target.value),children:[t.jsx("option",{value:"",children:"-- Select User --"}),F.map(W=>t.jsxs("option",{value:W.id,children:[W.name," (",W.email,")"]},W.id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{onClick:we,className:"py-2 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors",children:"+1000 Points"}),t.jsx("button",{onClick:Z,className:"py-2 bg-zinc-700 hover:bg-zinc-600 text-white text-xs font-bold rounded transition-colors",children:"Simulate Review"})]}),M&&t.jsx("div",{className:"p-2 bg-zinc-800 rounded text-xs text-purple-300 border border-purple-500/30 mt-2 animate-pulse",children:M})]})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[t.jsx(hr,{size:20,className:"text-cyan-400"}),"Shipping & Logistics"]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center bg-black/40 p-4 rounded-lg border border-gray-800",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-bold text-white",children:"PUDO Locker Management"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Access your PUDO dashboard to manage locker shipments, track parcels, and view your account details."})]}),t.jsxs("a",{href:"https://customer.pudo.co.za/dashboard",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Open PUDO Dashboard ",t.jsx(Zi,{size:16})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-900/30 text-blue-400 rounded-lg border border-blue-500/30",children:t.jsx(PI,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-white text-lg",children:"System Doctor"}),t.jsx("p",{className:"text-gray-400 text-xs",children:"Verify database integrity and save functionality."})]})]}),t.jsxs("button",{onClick:le,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded-lg flex items-center gap-2 transition-colors",children:[t.jsx(LN,{size:14})," Run Integrity Check"]})]}),v&&t.jsxs("div",{className:`p-4 rounded-lg border flex items-start gap-3 animate-in slide-in-from-top-2 ${v.status==="success"?"bg-green-900/20 border-green-500/30 text-green-300":"bg-red-900/20 border-red-500/30 text-red-300"}`,children:[v.status==="success"?t.jsx(ut,{size:18,className:"shrink-0 mt-0.5"}):t.jsx(cs,{size:18,className:"shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-sm",children:v.status==="success"?"System Healthy":"Issue Detected"}),t.jsx("p",{className:"text-xs opacity-80",children:v.details})]})]})]}),r&&t.jsxs("div",{className:"bg-red-900/20 border border-red-600/30 p-4 rounded-xl flex items-start gap-4",children:[t.jsx("div",{className:"p-2 bg-red-900/50 text-red-500 rounded-lg",children:t.jsx(Gn,{size:20})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold text-red-500",children:"Firestore Connection Failed"}),t.jsxs("p",{className:"text-xs text-red-200/70 mt-1",children:["Error: ",r,".",t.jsx("br",{}),"Please ensure you have created the ",t.jsx("strong",{children:"Firestore Database"})," in your Firebase Console. Until then, the app is running in ",t.jsx("strong",{children:"Demo Mode"}),"."]})]})]}),e&&!r&&t.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-600/30 p-4 rounded-xl flex items-start gap-4",children:[t.jsx("div",{className:"p-2 bg-yellow-900/50 text-yellow-500 rounded-lg",children:t.jsx(yI,{size:20})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold text-yellow-500",children:"Running in Demo Mode"}),t.jsx("p",{className:"text-xs text-yellow-200/70 mt-1",children:"Firebase is not configured or unavailable. All changes (Products, Categories) are saved to your browser's Local Storage. Uploading large images might fill your storage limit."})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:Ie.map((W,ue)=>t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("div",{className:`p-3 rounded-lg border ${W.color}`,children:t.jsx(W.icon,{size:20})}),t.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${W.change.startsWith("+")?"bg-green-900/30 text-green-400":"bg-gray-800 text-gray-400"}`,children:W.change})]}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:W.title}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:W.value})]},ue))}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-red-900/30 text-red-400 rounded-lg border border-red-500/30",children:t.jsx(Gn,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-white text-lg",children:"Inventory Danger Zone"}),t.jsx("p",{className:"text-gray-400 text-xs",children:"Monitor Secret Vault stock levels for Deluxe members."})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsx("h4",{className:"font-bold text-white mb-3 text-sm",children:"Current Vault Stock"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Total Vault Items in Stock"}),t.jsx("input",{type:"number",className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-sm",placeholder:"e.g., 3000",defaultValue:"2500"})]}),t.jsx("button",{className:"w-full py-2 bg-red-600 hover:bg-red-500 text-white text-sm font-bold rounded transition-colors",children:"Update Stock Count"})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsx("h4",{className:"font-bold text-white mb-3 text-sm",children:"Stock Health Check"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Active Deluxe Members:"}),t.jsx("span",{className:"text-white font-bold",children:"600"})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Avg Items/Member:"}),t.jsx("span",{className:"text-white font-bold",children:"5"})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Required Monthly Stock:"}),t.jsx("span",{className:"text-white font-bold",children:"3,000"})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-400",children:"Current Stock:"}),t.jsx("span",{className:"text-red-400 font-bold",children:"2,500"})]})]})]})]}),t.jsx("div",{className:"mt-6 bg-red-900/20 border border-red-600/50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Gn,{size:20,className:"text-red-500 shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-red-400 font-bold text-sm mb-1",children:"CRITICAL WARNING: Stock Shortage Detected"}),t.jsxs("p",{className:"text-red-300 text-xs",children:["You have ",t.jsx("strong",{children:"600 Deluxe Members"})," requiring ~3,000 items, but only ",t.jsx("strong",{children:"2,500 items"})," in stock. Stop ads or add stock immediately!"]})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("h3",{className:"font-bold text-white mb-4 text-lg",children:"Recent Activity"}),t.jsx("div",{className:"space-y-4",children:[1,2,3].map((W,ue)=>t.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-800 last:border-0",children:[t.jsx("div",{className:"w-10 h-10 bg-black border border-gray-800 rounded-full flex items-center justify-center text-xs font-bold text-gray-500",children:"OR"}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-gray-200",children:["Order #492",ue," placed"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"2 minutes ago"})]}),t.jsx("div",{className:"ml-auto font-bold text-green-400 text-sm",children:"R129.00"})]},ue))})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("h3",{className:"font-bold text-white mb-4 text-lg",children:"Inventory Status"}),t.jsx("div",{className:"space-y-4",children:n.slice(0,4).map(W=>t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:W.images[0],className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:""}),t.jsx("span",{className:"text-sm text-gray-300 truncate w-40",children:W.name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-24 h-2 bg-gray-800 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-pink-500",style:{width:`${Math.min(W.stock,100)}%`}})}),t.jsxs("span",{className:"text-xs font-mono text-gray-500",children:[W.stock," left"]})]})]},W.id))})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[t.jsx(Ql,{size:20,className:"text-pink-400"}),"Artists Overview"]}),t.jsxs(Ve,{to:"/admin/artists",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:["Manage Artists ",t.jsx(Ql,{size:16})]})]}),fe?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"text-gray-400",children:"Loading artist data..."})}):t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Pending Applications"}),t.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-400 border border-yellow-500/30 px-2 py-1 rounded",children:I.filter(W=>W.status==="pending").length})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Applications awaiting review"}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Total:"}),t.jsx("span",{className:"text-white",children:I.length})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Approved:"}),t.jsx("span",{className:"text-green-400",children:I.filter(W=>W.status==="approved").length})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Rejected:"}),t.jsx("span",{className:"text-red-400",children:I.filter(W=>W.status==="rejected").length})]})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Active Artists"}),t.jsx("span",{className:"text-xs bg-green-900/30 text-green-400 border border-green-500/30 px-2 py-1 rounded",children:O.filter(W=>W.status==="active").length})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Artists with live products"}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Total Artists:"}),t.jsx("span",{className:"text-white",children:O.length})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Suspended:"}),t.jsx("span",{className:"text-red-400",children:O.filter(W=>W.status==="suspended").length})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Avg Slots Used:"}),t.jsx("span",{className:"text-white",children:O.length>0?Math.round(O.reduce((W,ue)=>W+(ue.slotsUsed||0),0)/O.length):0})]})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Products in Review"}),t.jsx("span",{className:"text-xs bg-blue-900/30 text-blue-400 border border-blue-500/30 px-2 py-1 rounded",children:A.filter(W=>W.status==="pending_approval").length})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Products awaiting approval"}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Total Products:"}),t.jsx("span",{className:"text-white",children:A.length})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Live:"}),t.jsx("span",{className:"text-green-400",children:A.filter(W=>W.status==="live").length})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Rejected:"}),t.jsx("span",{className:"text-red-400",children:A.filter(W=>W.status==="rejected").length})]})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Revenue Generated"}),t.jsxs("span",{className:"text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-2 py-1 rounded",children:["R",O.reduce((W,ue)=>{var B,Ce;return W+((((B=ue.wallet)==null?void 0:B.available)||0)+(((Ce=ue.wallet)==null?void 0:Ce.pending)||0))},0).toFixed(0)]})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Total artist earnings"}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Available:"}),t.jsxs("span",{className:"text-green-400",children:["R",O.reduce((W,ue)=>{var B;return W+(((B=ue.wallet)==null?void 0:B.available)||0)},0).toFixed(0)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Pending:"}),t.jsxs("span",{className:"text-yellow-400",children:["R",O.reduce((W,ue)=>{var B;return W+(((B=ue.wallet)==null?void 0:B.pending)||0)},0).toFixed(0)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Avg per Artist:"}),t.jsxs("span",{className:"text-white",children:["R",O.length>0?Math.round(O.reduce((W,ue)=>{var B,Ce;return W+((((B=ue.wallet)==null?void 0:B.available)||0)+(((Ce=ue.wallet)==null?void 0:Ce.pending)||0))},0)/O.length):0]})]})]})]})]}),t.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-800",children:[t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-3 rounded-lg mb-4",children:t.jsxs("p",{className:"text-yellow-400 text-sm font-medium flex items-center gap-2",children:[t.jsx(Gn,{size:16}),"Reviews take up to 72 hours. Artists will be notified via email and in-app notification once their application is processed."]})}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs(Ve,{to:"/admin/artists",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(Ql,{size:16})," Review Applications"]}),t.jsxs(Ve,{to:"/admin/artists",className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(to,{size:16})," Approve Products"]}),t.jsxs(Ve,{to:"/admin/artists",className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(ts,{size:16})," Process Payments"]})]})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let j5,S5;function k5(){return{geminiUrl:j5,vertexUrl:S5}}function _5(n,e,s){var r,i,o;if(!(!((r=n.httpOptions)===null||r===void 0)&&r.baseUrl)){const c=k5();return n.vertexai?(i=c.vertexUrl)!==null&&i!==void 0?i:e:(o=c.geminiUrl)!==null&&o!==void 0?o:s}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qc{}function pt(n,e){const s=/\{([^}]+)\}/g;return n.replace(s,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function x(n,e,s){for(let o=0;o<e.length-1;o++){const c=e[o];if(c.endsWith("[]")){const u=c.slice(0,-2);if(!(u in n))if(Array.isArray(s))n[u]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[u])){const f=n[u];if(Array.isArray(s))for(let h=0;h<f.length;h++){const y=f[h];x(y,e.slice(o+1),s[h])}else for(const h of f)x(h,e.slice(o+1),s)}return}else if(c.endsWith("[0]")){const u=c.slice(0,-3);u in n||(n[u]=[{}]);const f=n[u];x(f[0],e.slice(o+1),s);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===i)return;if(typeof i=="object"&&typeof s=="object"&&i!==null&&s!==null)Object.assign(i,s);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else n[r]=s}function g(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return;const r=e[s];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in n){const o=n[i];return Array.isArray(o)?o.map(c=>g(c,e.slice(s+1))):void 0}else return}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return;throw s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ms(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const s=e.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function aj(n,e){const s=ms(n,e);return s?s.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${s}`:s.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${s}`:s:""}function oj(n,e){return Array.isArray(e)?e.map(s=>zu(n,s)):[zu(n,e)]}function zu(n,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function C5(n,e){const s=zu(n,e);if(s.mimeType&&s.mimeType.startsWith("image/"))return s;throw new Error(`Unsupported mime type: ${s.mimeType}`)}function E5(n,e){const s=zu(n,e);if(s.mimeType&&s.mimeType.startsWith("audio/"))return s;throw new Error(`Unsupported mime type: ${s.mimeType}`)}function bb(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function lj(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(s=>bb(n,s)):[bb(n,e)]}function Wm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function vb(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function wb(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function wn(n,e){if(e==null)throw new Error("ContentUnion is required");return Wm(e)?e:{role:"user",parts:lj(n,e)}}function cj(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(s=>{const r=wn(n,s);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const s=wn(n,e);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(e)?e.map(s=>wn(n,s)):[wn(n,e)]}function ma(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(vb(e)||wb(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wn(n,e)]}const s=[],r=[],i=Wm(e[0]);for(const o of e){const c=Wm(o);if(c!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)s.push(o);else{if(vb(o)||wb(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(o)}}return i||s.push({role:"user",parts:lj(n,r)}),s}function dj(n,e){return e}function uj(n,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function ih(n,e){return e}function ah(n,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function T5(n,e,s,r=1){const i=!e.startsWith(`${s}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${s}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${s}/${e}`:e:i?`${s}/${e}`:e}function pa(n,e){if(typeof e!="string")throw new Error("name must be a string");return T5(n,e,"cachedContents")}function hj(n,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function ga(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function fj(n,e){if(typeof e!="string")throw new Error("fromName must be a string");return e.startsWith("files/")?e.split("files/")[1]:e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P5(n,e){const s={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&x(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&x(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&x(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&x(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&x(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&x(s,["inlineData"],h);const y=g(e,["text"]);return y!=null&&x(s,["text"],y),s}function Nb(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>P5(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function A5(){return{}}function I5(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(s,["dynamicThreshold"],i),s}function R5(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(s,["dynamicRetrievalConfig"],I5(n,r)),s}function M5(n,e){const s={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(s,["googleSearch"],A5());const i=g(e,["googleSearchRetrieval"]);i!=null&&x(s,["googleSearchRetrieval"],R5(n,i));const o=g(e,["codeExecution"]);o!=null&&x(s,["codeExecution"],o);const c=g(e,["functionDeclarations"]);return c!=null&&x(s,["functionDeclarations"],c),s}function D5(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(s,["allowedFunctionNames"],i),s}function O5(n,e){const s={},r=g(e,["functionCallingConfig"]);return r!=null&&x(s,["functionCallingConfig"],D5(n,r)),s}function L5(n,e,s){const r={},i=g(e,["ttl"]);s!==void 0&&i!=null&&x(s,["ttl"],i);const o=g(e,["expireTime"]);s!==void 0&&o!=null&&x(s,["expireTime"],o);const c=g(e,["displayName"]);s!==void 0&&c!=null&&x(s,["displayName"],c);const u=g(e,["contents"]);if(s!==void 0&&u!=null){let v=ma(n,u);Array.isArray(v)&&(v=v.map(j=>Nb(n,j))),x(s,["contents"],v)}const f=g(e,["systemInstruction"]);s!==void 0&&f!=null&&x(s,["systemInstruction"],Nb(n,wn(n,f)));const h=g(e,["tools"]);if(s!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(j=>M5(n,j))),x(s,["tools"],v)}const y=g(e,["toolConfig"]);return s!==void 0&&y!=null&&x(s,["toolConfig"],O5(n,y)),r}function z5(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["model"],aj(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],L5(n,i,s)),s}function U5(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],pa(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function F5(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],pa(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function $5(n,e,s){const r={},i=g(e,["ttl"]);s!==void 0&&i!=null&&x(s,["ttl"],i);const o=g(e,["expireTime"]);return s!==void 0&&o!=null&&x(s,["expireTime"],o),r}function V5(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],pa(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],$5(n,i,s)),s}function B5(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&x(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);return s!==void 0&&o!=null&&x(s,["_query","pageToken"],o),r}function q5(n,e){const s={},r=g(e,["config"]);return r!=null&&x(s,["config"],B5(n,r,s)),s}function W5(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&x(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&x(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&x(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&x(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&x(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&x(s,["functionResponse"],h);const y=g(e,["inlineData"]);y!=null&&x(s,["inlineData"],y);const v=g(e,["text"]);return v!=null&&x(s,["text"],v),s}function jb(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>W5(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function H5(){return{}}function G5(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(s,["dynamicThreshold"],i),s}function K5(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(s,["dynamicRetrievalConfig"],G5(n,r)),s}function J5(n,e){const s={},r=g(e,["retrieval"]);r!=null&&x(s,["retrieval"],r),g(e,["googleSearch"])!=null&&x(s,["googleSearch"],H5());const o=g(e,["googleSearchRetrieval"]);o!=null&&x(s,["googleSearchRetrieval"],K5(n,o));const c=g(e,["codeExecution"]);c!=null&&x(s,["codeExecution"],c);const u=g(e,["functionDeclarations"]);return u!=null&&x(s,["functionDeclarations"],u),s}function Y5(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(s,["allowedFunctionNames"],i),s}function Z5(n,e){const s={},r=g(e,["functionCallingConfig"]);return r!=null&&x(s,["functionCallingConfig"],Y5(n,r)),s}function X5(n,e,s){const r={},i=g(e,["ttl"]);s!==void 0&&i!=null&&x(s,["ttl"],i);const o=g(e,["expireTime"]);s!==void 0&&o!=null&&x(s,["expireTime"],o);const c=g(e,["displayName"]);s!==void 0&&c!=null&&x(s,["displayName"],c);const u=g(e,["contents"]);if(s!==void 0&&u!=null){let v=ma(n,u);Array.isArray(v)&&(v=v.map(j=>jb(n,j))),x(s,["contents"],v)}const f=g(e,["systemInstruction"]);s!==void 0&&f!=null&&x(s,["systemInstruction"],jb(n,wn(n,f)));const h=g(e,["tools"]);if(s!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(j=>J5(n,j))),x(s,["tools"],v)}const y=g(e,["toolConfig"]);return s!==void 0&&y!=null&&x(s,["toolConfig"],Z5(n,y)),r}function Q5(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["model"],aj(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],X5(n,i,s)),s}function e3(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],pa(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function t3(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],pa(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function s3(n,e,s){const r={},i=g(e,["ttl"]);s!==void 0&&i!=null&&x(s,["ttl"],i);const o=g(e,["expireTime"]);return s!==void 0&&o!=null&&x(s,["expireTime"],o),r}function n3(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],pa(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],s3(n,i,s)),s}function r3(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&x(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);return s!==void 0&&o!=null&&x(s,["_query","pageToken"],o),r}function i3(n,e){const s={},r=g(e,["config"]);return r!=null&&x(s,["config"],r3(n,r,s)),s}function gu(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["displayName"]);i!=null&&x(s,["displayName"],i);const o=g(e,["model"]);o!=null&&x(s,["model"],o);const c=g(e,["createTime"]);c!=null&&x(s,["createTime"],c);const u=g(e,["updateTime"]);u!=null&&x(s,["updateTime"],u);const f=g(e,["expireTime"]);f!=null&&x(s,["expireTime"],f);const h=g(e,["usageMetadata"]);return h!=null&&x(s,["usageMetadata"],h),s}function a3(){return{}}function o3(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>gu(n,c))),x(s,["cachedContents"],o)}return s}function xu(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["displayName"]);i!=null&&x(s,["displayName"],i);const o=g(e,["model"]);o!=null&&x(s,["model"],o);const c=g(e,["createTime"]);c!=null&&x(s,["createTime"],c);const u=g(e,["updateTime"]);u!=null&&x(s,["updateTime"],u);const f=g(e,["expireTime"]);f!=null&&x(s,["expireTime"],f);const h=g(e,["usageMetadata"]);return h!=null&&x(s,["usageMetadata"],h),s}function l3(){return{}}function c3(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>xu(n,c))),x(s,["cachedContents"],o)}return s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Mc;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Mc||(Mc={}));class Vp{constructor(e,s,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(e,r,i)}init(e,s,r){var i,o;this.nameInternal=e,this.pageInternal=s[this.nameInternal]||[],this.idxInternal=0;let c={config:{}};r?typeof r=="object"?c=Object.assign({},r):c=r:c={config:{}},c.config&&(c.config.pageToken=s.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(o=(i=c.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Sb;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Sb||(Sb={}));var kb;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(kb||(kb={}));var _b;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(_b||(_b={}));var Cb;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Cb||(Cb={}));var Eb;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Eb||(Eb={}));var Tb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Tb||(Tb={}));var Pb;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(Pb||(Pb={}));var Ab;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Ab||(Ab={}));var Ib;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Ib||(Ib={}));var Rb;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Rb||(Rb={}));var Mb;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Mb||(Mb={}));var Db;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Db||(Db={}));var Uu;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Uu||(Uu={}));var Ob;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ob||(Ob={}));var Hm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Hm||(Hm={}));var Lb;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Lb||(Lb={}));var zb;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(zb||(zb={}));var Ub;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Ub||(Ub={}));var Fb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Fb||(Fb={}));var $b;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})($b||($b={}));var Vb;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Vb||(Vb={}));var Bb;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(Bb||(Bb={}));var qb;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(qb||(qb={}));var Wb;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Wb||(Wb={}));var Hb;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Hb||(Hb={}));var Gb;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Gb||(Gb={}));var Kb;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Kb||(Kb={}));var Jb;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Jb||(Jb={}));var Yb;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Yb||(Yb={}));var Zb;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Zb||(Zb={}));var Xb;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Xb||(Xb={}));var Qb;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Qb||(Qb={}));class ru{get text(){var e,s,r,i,o,c,u,f;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const v=[];for(const j of(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[E,k]of Object.entries(j))E!=="text"&&E!=="thought"&&(k!==null||k!==void 0)&&v.push(E);if(typeof j.text=="string"){if(typeof j.thought=="boolean"&&j.thought)continue;y=!0,h+=j.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,s,r,i,o,c,u,f;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const v of(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[j,E]of Object.entries(v))j!=="inlineData"&&(E!==null||E!==void 0)&&y.push(j);v.inlineData&&typeof v.inlineData.data=="string"&&(h+=atob(v.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,s,r,i,o,c,u,f;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,s,r,i,o,c,u,f,h;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,s,r,i,o,c,u,f,h;if(((i=(r=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(f=(u=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class ev{}class tv{}class sv{}class nv{}class d3{}class rv{}class iv{}class av{}class u3{}class Gm{constructor(e){const s={};for(const r of e.headers.entries())s[r[0]]=r[1];this.headers=s,this.responseInternal=e}json(){return this.responseInternal.json()}}class h3{}class f3{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m3 extends qc{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new Vp(Mc.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(s),s)}async create(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=Q5(this.apiClient,e);return u=pt("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>xu(this.apiClient,y))}else{const h=z5(this.apiClient,e);return u=pt("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>gu(this.apiClient,y))}}async get(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=e3(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>xu(this.apiClient,y))}else{const h=U5(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>gu(this.apiClient,y))}}async delete(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=t3(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(()=>{const y=l3(),v=new iv;return Object.assign(v,y),v})}else{const h=F5(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(()=>{const y=a3(),v=new iv;return Object.assign(v,y),v})}}async update(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=n3(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>xu(this.apiClient,y))}else{const h=V5(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>gu(this.apiClient,y))}}async listInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=i3(this.apiClient,e);return u=pt("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const v=c3(this.apiClient,y),j=new av;return Object.assign(j,v),j})}else{const h=q5(this.apiClient,e);return u=pt("cachedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const v=o3(this.apiClient,y),j=new av;return Object.assign(j,v),j})}}}function ov(n){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&n[e],r=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zs(n){return this instanceof Zs?(this.v=n,this):new Zs(n)}function Fu(n,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=s.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(E){return function(k){return Promise.resolve(k).then(E,v)}}function u(E,k){r[E]&&(i[E]=function(_){return new Promise(function(P,L){o.push([E,_,P,L])>1||f(E,_)})},k&&(i[E]=k(i[E])))}function f(E,k){try{h(r[E](k))}catch(_){j(o[0][3],_)}}function h(E){E.value instanceof Zs?Promise.resolve(E.value.v).then(y,v):j(o[0][2],E)}function y(E){f("next",E)}function v(E){f("throw",E)}function j(E,k){E(k),o.shift(),o.length&&f(o[0][0],o[0][1])}}function Km(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],s;return e?e.call(n):(n=typeof ov=="function"?ov(n):n[Symbol.iterator](),s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s);function r(o){s[o]=n[o]&&function(c){return new Promise(function(u,f){c=n[o](c),i(u,f,c.done,c.value)})}}function i(o,c,u,f){Promise.resolve(f).then(function(h){o({value:h,done:u})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p3(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const s=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return s===void 0?!1:mj(s)}function mj(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function g3(n){if(n.length!==0){if(n[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function x3(n){if(n===void 0||n.length===0)return[];const e=[],s=n.length;let r=0,i=n[0];for(;r<s;)if(n[r].role==="user")i=n[r],r++;else{const o=[];let c=!0;for(;r<s&&n[r].role==="model";)o.push(n[r]),c&&!mj(n[r])&&(c=!1),r++;c&&(e.push(i),e.push(...o))}return e}class y3{constructor(e,s){this.modelsModule=e,this.apiClient=s}create(e){return new b3(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class b3{constructor(e,s,r,i={},o=[]){this.apiClient=e,this.modelsModule=s,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),g3(o)}async sendMessage(e){var s;await this.sendPromise;const r=wn(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(s=e.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var o,c;const f=(c=(o=(await i).candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content,h=f?[f]:[];this.recordHistory(r,h)})(),await this.sendPromise,i}async sendMessageStream(e){var s;await this.sendPromise;const r=wn(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(s=e.config)!==null&&s!==void 0?s:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){return e?x3(this.history):this.history}processStreamResponse(e,s){var r,i;return Fu(this,arguments,function*(){var c,u,f,h;const y=[];try{for(var v=!0,j=Km(e),E;E=yield Zs(j.next()),c=E.done,!c;v=!0){h=E.value,v=!1;const k=h;if(p3(k)){const _=(i=(r=k.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;_!==void 0&&y.push(_)}yield yield Zs(k)}}catch(k){u={error:k}}finally{try{!v&&!c&&(f=j.return)&&(yield Zs(f.call(j)))}finally{if(u)throw u.error}}this.recordHistory(s,y)})}recordHistory(e,s){let r=[];s.length>0&&s.every(i=>i.role==="model")?r=s:r.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v3(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&x(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);return s!==void 0&&o!=null&&x(s,["_query","pageToken"],o),r}function w3(n,e){const s={},r=g(e,["config"]);return r!=null&&x(s,["config"],v3(n,r,s)),s}function N3(n,e){const s={},r=g(e,["details"]);r!=null&&x(s,["details"],r);const i=g(e,["message"]);i!=null&&x(s,["message"],i);const o=g(e,["code"]);return o!=null&&x(s,["code"],o),s}function j3(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["displayName"]);i!=null&&x(s,["displayName"],i);const o=g(e,["mimeType"]);o!=null&&x(s,["mimeType"],o);const c=g(e,["sizeBytes"]);c!=null&&x(s,["sizeBytes"],c);const u=g(e,["createTime"]);u!=null&&x(s,["createTime"],u);const f=g(e,["expirationTime"]);f!=null&&x(s,["expirationTime"],f);const h=g(e,["updateTime"]);h!=null&&x(s,["updateTime"],h);const y=g(e,["sha256Hash"]);y!=null&&x(s,["sha256Hash"],y);const v=g(e,["uri"]);v!=null&&x(s,["uri"],v);const j=g(e,["downloadUri"]);j!=null&&x(s,["downloadUri"],j);const E=g(e,["state"]);E!=null&&x(s,["state"],E);const k=g(e,["source"]);k!=null&&x(s,["source"],k);const _=g(e,["videoMetadata"]);_!=null&&x(s,["videoMetadata"],_);const P=g(e,["error"]);return P!=null&&x(s,["error"],N3(n,P)),s}function S3(n,e){const s={},r=g(e,["file"]);r!=null&&x(s,["file"],j3(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function k3(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","file"],fj(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function _3(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","file"],fj(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function C3(n,e){const s={},r=g(e,["details"]);r!=null&&x(s,["details"],r);const i=g(e,["message"]);i!=null&&x(s,["message"],i);const o=g(e,["code"]);return o!=null&&x(s,["code"],o),s}function Jm(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["displayName"]);i!=null&&x(s,["displayName"],i);const o=g(e,["mimeType"]);o!=null&&x(s,["mimeType"],o);const c=g(e,["sizeBytes"]);c!=null&&x(s,["sizeBytes"],c);const u=g(e,["createTime"]);u!=null&&x(s,["createTime"],u);const f=g(e,["expirationTime"]);f!=null&&x(s,["expirationTime"],f);const h=g(e,["updateTime"]);h!=null&&x(s,["updateTime"],h);const y=g(e,["sha256Hash"]);y!=null&&x(s,["sha256Hash"],y);const v=g(e,["uri"]);v!=null&&x(s,["uri"],v);const j=g(e,["downloadUri"]);j!=null&&x(s,["downloadUri"],j);const E=g(e,["state"]);E!=null&&x(s,["state"],E);const k=g(e,["source"]);k!=null&&x(s,["source"],k);const _=g(e,["videoMetadata"]);_!=null&&x(s,["videoMetadata"],_);const P=g(e,["error"]);return P!=null&&x(s,["error"],C3(n,P)),s}function E3(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const i=g(e,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Jm(n,c))),x(s,["files"],o)}return s}function T3(){return{}}function P3(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A3 extends qc{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new Vp(Mc.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(s),s)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(s=>Jm(this.apiClient,s))}async listInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=w3(this.apiClient,e);return o=pt("files",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const h=E3(this.apiClient,f),y=new u3;return Object.assign(y,h),y})}}async createInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=S3(this.apiClient,e);return o=pt("upload/v1beta/files",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(()=>{const f=T3(),h=new h3;return Object.assign(h,f),h})}}async get(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=k3(this.apiClient,e);return o=pt("files/{file}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>Jm(this.apiClient,f))}}async delete(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_3(this.apiClient,e);return o=pt("files/{file}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(()=>{const f=P3(),h=new f3;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I3(n,e){const s={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&x(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&x(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&x(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&x(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&x(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&x(s,["inlineData"],h);const y=g(e,["text"]);return y!=null&&x(s,["text"],y),s}function R3(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&x(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&x(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&x(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&x(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&x(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&x(s,["functionResponse"],h);const y=g(e,["inlineData"]);y!=null&&x(s,["inlineData"],y);const v=g(e,["text"]);return v!=null&&x(s,["text"],v),s}function M3(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>I3(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function D3(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>R3(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function O3(){return{}}function L3(){return{}}function z3(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(s,["dynamicThreshold"],i),s}function U3(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(s,["dynamicThreshold"],i),s}function F3(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(s,["dynamicRetrievalConfig"],z3(n,r)),s}function $3(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(s,["dynamicRetrievalConfig"],U3(n,r)),s}function V3(n,e){const s={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(s,["googleSearch"],O3());const i=g(e,["googleSearchRetrieval"]);i!=null&&x(s,["googleSearchRetrieval"],F3(n,i));const o=g(e,["codeExecution"]);o!=null&&x(s,["codeExecution"],o);const c=g(e,["functionDeclarations"]);return c!=null&&x(s,["functionDeclarations"],c),s}function B3(n,e){const s={},r=g(e,["retrieval"]);r!=null&&x(s,["retrieval"],r),g(e,["googleSearch"])!=null&&x(s,["googleSearch"],L3());const o=g(e,["googleSearchRetrieval"]);o!=null&&x(s,["googleSearchRetrieval"],$3(n,o));const c=g(e,["codeExecution"]);c!=null&&x(s,["codeExecution"],c);const u=g(e,["functionDeclarations"]);return u!=null&&x(s,["functionDeclarations"],u),s}function q3(n,e){const s={},r=g(e,["handle"]);if(r!=null&&x(s,["handle"],r),g(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return s}function W3(n,e){const s={},r=g(e,["handle"]);r!=null&&x(s,["handle"],r);const i=g(e,["transparent"]);return i!=null&&x(s,["transparent"],i),s}function H3(){return{}}function lv(){return{}}function G3(n,e){const s={},r=g(e,["disabled"]);r!=null&&x(s,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&x(s,["startOfSpeechSensitivity"],i);const o=g(e,["endOfSpeechSensitivity"]);o!=null&&x(s,["endOfSpeechSensitivity"],o);const c=g(e,["prefixPaddingMs"]);c!=null&&x(s,["prefixPaddingMs"],c);const u=g(e,["silenceDurationMs"]);return u!=null&&x(s,["silenceDurationMs"],u),s}function K3(n,e){const s={},r=g(e,["disabled"]);r!=null&&x(s,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&x(s,["startOfSpeechSensitivity"],i);const o=g(e,["endOfSpeechSensitivity"]);o!=null&&x(s,["endOfSpeechSensitivity"],o);const c=g(e,["prefixPaddingMs"]);c!=null&&x(s,["prefixPaddingMs"],c);const u=g(e,["silenceDurationMs"]);return u!=null&&x(s,["silenceDurationMs"],u),s}function J3(n,e){const s={},r=g(e,["automaticActivityDetection"]);r!=null&&x(s,["automaticActivityDetection"],G3(n,r));const i=g(e,["activityHandling"]);i!=null&&x(s,["activityHandling"],i);const o=g(e,["turnCoverage"]);return o!=null&&x(s,["turnCoverage"],o),s}function Y3(n,e){const s={},r=g(e,["automaticActivityDetection"]);r!=null&&x(s,["automaticActivityDetection"],K3(n,r));const i=g(e,["activityHandling"]);i!=null&&x(s,["activityHandling"],i);const o=g(e,["turnCoverage"]);return o!=null&&x(s,["turnCoverage"],o),s}function Z3(n,e){const s={},r=g(e,["targetTokens"]);return r!=null&&x(s,["targetTokens"],r),s}function X3(n,e){const s={},r=g(e,["targetTokens"]);return r!=null&&x(s,["targetTokens"],r),s}function Q3(n,e){const s={},r=g(e,["triggerTokens"]);r!=null&&x(s,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&x(s,["slidingWindow"],Z3(n,i)),s}function eM(n,e){const s={},r=g(e,["triggerTokens"]);r!=null&&x(s,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&x(s,["slidingWindow"],X3(n,i)),s}function tM(n,e,s){const r={},i=g(e,["generationConfig"]);s!==void 0&&i!=null&&x(s,["setup","generationConfig"],i);const o=g(e,["responseModalities"]);s!==void 0&&o!=null&&x(s,["setup","generationConfig","responseModalities"],o);const c=g(e,["temperature"]);s!==void 0&&c!=null&&x(s,["setup","generationConfig","temperature"],c);const u=g(e,["topP"]);s!==void 0&&u!=null&&x(s,["setup","generationConfig","topP"],u);const f=g(e,["topK"]);s!==void 0&&f!=null&&x(s,["setup","generationConfig","topK"],f);const h=g(e,["maxOutputTokens"]);s!==void 0&&h!=null&&x(s,["setup","generationConfig","maxOutputTokens"],h);const y=g(e,["mediaResolution"]);s!==void 0&&y!=null&&x(s,["setup","generationConfig","mediaResolution"],y);const v=g(e,["seed"]);s!==void 0&&v!=null&&x(s,["setup","generationConfig","seed"],v);const j=g(e,["speechConfig"]);s!==void 0&&j!=null&&x(s,["setup","generationConfig","speechConfig"],j);const E=g(e,["systemInstruction"]);s!==void 0&&E!=null&&x(s,["setup","systemInstruction"],M3(n,wn(n,E)));const k=g(e,["tools"]);if(s!==void 0&&k!=null){let F=ah(n,k);Array.isArray(F)&&(F=F.map(J=>V3(n,ih(n,J)))),x(s,["setup","tools"],F)}const _=g(e,["sessionResumption"]);if(s!==void 0&&_!=null&&x(s,["setup","sessionResumption"],q3(n,_)),g(e,["inputAudioTranscription"])!==void 0)throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");const P=g(e,["outputAudioTranscription"]);s!==void 0&&P!=null&&x(s,["setup","outputAudioTranscription"],H3());const L=g(e,["realtimeInputConfig"]);s!==void 0&&L!=null&&x(s,["setup","realtimeInputConfig"],J3(n,L));const U=g(e,["contextWindowCompression"]);return s!==void 0&&U!=null&&x(s,["setup","contextWindowCompression"],Q3(n,U)),r}function sM(n,e,s){const r={},i=g(e,["generationConfig"]);s!==void 0&&i!=null&&x(s,["setup","generationConfig"],i);const o=g(e,["responseModalities"]);s!==void 0&&o!=null&&x(s,["setup","generationConfig","responseModalities"],o);const c=g(e,["temperature"]);s!==void 0&&c!=null&&x(s,["setup","generationConfig","temperature"],c);const u=g(e,["topP"]);s!==void 0&&u!=null&&x(s,["setup","generationConfig","topP"],u);const f=g(e,["topK"]);s!==void 0&&f!=null&&x(s,["setup","generationConfig","topK"],f);const h=g(e,["maxOutputTokens"]);s!==void 0&&h!=null&&x(s,["setup","generationConfig","maxOutputTokens"],h);const y=g(e,["mediaResolution"]);s!==void 0&&y!=null&&x(s,["setup","generationConfig","mediaResolution"],y);const v=g(e,["seed"]);s!==void 0&&v!=null&&x(s,["setup","generationConfig","seed"],v);const j=g(e,["speechConfig"]);s!==void 0&&j!=null&&x(s,["setup","generationConfig","speechConfig"],j);const E=g(e,["systemInstruction"]);s!==void 0&&E!=null&&x(s,["setup","systemInstruction"],D3(n,wn(n,E)));const k=g(e,["tools"]);if(s!==void 0&&k!=null){let J=ah(n,k);Array.isArray(J)&&(J=J.map(te=>B3(n,ih(n,te)))),x(s,["setup","tools"],J)}const _=g(e,["sessionResumption"]);s!==void 0&&_!=null&&x(s,["setup","sessionResumption"],W3(n,_));const P=g(e,["inputAudioTranscription"]);s!==void 0&&P!=null&&x(s,["setup","inputAudioTranscription"],lv());const L=g(e,["outputAudioTranscription"]);s!==void 0&&L!=null&&x(s,["setup","outputAudioTranscription"],lv());const U=g(e,["realtimeInputConfig"]);s!==void 0&&U!=null&&x(s,["setup","realtimeInputConfig"],Y3(n,U));const F=g(e,["contextWindowCompression"]);return s!==void 0&&F!=null&&x(s,["setup","contextWindowCompression"],eM(n,F)),r}function nM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["setup","model"],ms(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],tM(n,i,s)),s}function rM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["setup","model"],ms(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],sM(n,i,s)),s}function iM(){return{}}function aM(){return{}}function oM(){return{}}function lM(){return{}}function cM(n,e){const s={},r=g(e,["media"]);r!=null&&x(s,["mediaChunks"],oj(n,r));const i=g(e,["audio"]);i!=null&&x(s,["audio"],E5(n,i));const o=g(e,["audioStreamEnd"]);o!=null&&x(s,["audioStreamEnd"],o);const c=g(e,["video"]);c!=null&&x(s,["video"],C5(n,c));const u=g(e,["text"]);return u!=null&&x(s,["text"],u),g(e,["activityStart"])!=null&&x(s,["activityStart"],iM()),g(e,["activityEnd"])!=null&&x(s,["activityEnd"],oM()),s}function dM(n,e){const s={},r=g(e,["media"]);if(r!=null&&x(s,["mediaChunks"],oj(n,r)),g(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=g(e,["audioStreamEnd"]);if(i!=null&&x(s,["audioStreamEnd"],i),g(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(g(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return g(e,["activityStart"])!=null&&x(s,["activityStart"],aM()),g(e,["activityEnd"])!=null&&x(s,["activityEnd"],lM()),s}function uM(){return{}}function hM(){return{}}function fM(n,e){const s={},r=g(e,["thought"]);r!=null&&x(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&x(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&x(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&x(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&x(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&x(s,["inlineData"],h);const y=g(e,["text"]);return y!=null&&x(s,["text"],y),s}function mM(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&x(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&x(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&x(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&x(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&x(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&x(s,["functionResponse"],h);const y=g(e,["inlineData"]);y!=null&&x(s,["inlineData"],y);const v=g(e,["text"]);return v!=null&&x(s,["text"],v),s}function pM(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>fM(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function gM(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>mM(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function cv(n,e){const s={},r=g(e,["text"]);r!=null&&x(s,["text"],r);const i=g(e,["finished"]);return i!=null&&x(s,["finished"],i),s}function dv(n,e){const s={},r=g(e,["text"]);r!=null&&x(s,["text"],r);const i=g(e,["finished"]);return i!=null&&x(s,["finished"],i),s}function xM(n,e){const s={},r=g(e,["modelTurn"]);r!=null&&x(s,["modelTurn"],pM(n,r));const i=g(e,["turnComplete"]);i!=null&&x(s,["turnComplete"],i);const o=g(e,["interrupted"]);o!=null&&x(s,["interrupted"],o);const c=g(e,["groundingMetadata"]);c!=null&&x(s,["groundingMetadata"],c);const u=g(e,["generationComplete"]);u!=null&&x(s,["generationComplete"],u);const f=g(e,["inputTranscription"]);f!=null&&x(s,["inputTranscription"],cv(n,f));const h=g(e,["outputTranscription"]);return h!=null&&x(s,["outputTranscription"],cv(n,h)),s}function yM(n,e){const s={},r=g(e,["modelTurn"]);r!=null&&x(s,["modelTurn"],gM(n,r));const i=g(e,["turnComplete"]);i!=null&&x(s,["turnComplete"],i);const o=g(e,["interrupted"]);o!=null&&x(s,["interrupted"],o);const c=g(e,["groundingMetadata"]);c!=null&&x(s,["groundingMetadata"],c);const u=g(e,["generationComplete"]);u!=null&&x(s,["generationComplete"],u);const f=g(e,["inputTranscription"]);f!=null&&x(s,["inputTranscription"],dv(n,f));const h=g(e,["outputTranscription"]);return h!=null&&x(s,["outputTranscription"],dv(n,h)),s}function bM(n,e){const s={},r=g(e,["id"]);r!=null&&x(s,["id"],r);const i=g(e,["args"]);i!=null&&x(s,["args"],i);const o=g(e,["name"]);return o!=null&&x(s,["name"],o),s}function vM(n,e){const s={},r=g(e,["args"]);r!=null&&x(s,["args"],r);const i=g(e,["name"]);return i!=null&&x(s,["name"],i),s}function wM(n,e){const s={},r=g(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>bM(n,o))),x(s,["functionCalls"],i)}return s}function NM(n,e){const s={},r=g(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>vM(n,o))),x(s,["functionCalls"],i)}return s}function jM(n,e){const s={},r=g(e,["ids"]);return r!=null&&x(s,["ids"],r),s}function SM(n,e){const s={},r=g(e,["ids"]);return r!=null&&x(s,["ids"],r),s}function iu(n,e){const s={},r=g(e,["modality"]);r!=null&&x(s,["modality"],r);const i=g(e,["tokenCount"]);return i!=null&&x(s,["tokenCount"],i),s}function au(n,e){const s={},r=g(e,["modality"]);r!=null&&x(s,["modality"],r);const i=g(e,["tokenCount"]);return i!=null&&x(s,["tokenCount"],i),s}function kM(n,e){const s={},r=g(e,["promptTokenCount"]);r!=null&&x(s,["promptTokenCount"],r);const i=g(e,["cachedContentTokenCount"]);i!=null&&x(s,["cachedContentTokenCount"],i);const o=g(e,["responseTokenCount"]);o!=null&&x(s,["responseTokenCount"],o);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&x(s,["toolUsePromptTokenCount"],c);const u=g(e,["thoughtsTokenCount"]);u!=null&&x(s,["thoughtsTokenCount"],u);const f=g(e,["totalTokenCount"]);f!=null&&x(s,["totalTokenCount"],f);const h=g(e,["promptTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(k=>iu(n,k))),x(s,["promptTokensDetails"],E)}const y=g(e,["cacheTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(k=>iu(n,k))),x(s,["cacheTokensDetails"],E)}const v=g(e,["responseTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(k=>iu(n,k))),x(s,["responseTokensDetails"],E)}const j=g(e,["toolUsePromptTokensDetails"]);if(j!=null){let E=j;Array.isArray(E)&&(E=E.map(k=>iu(n,k))),x(s,["toolUsePromptTokensDetails"],E)}return s}function _M(n,e){const s={},r=g(e,["promptTokenCount"]);r!=null&&x(s,["promptTokenCount"],r);const i=g(e,["cachedContentTokenCount"]);i!=null&&x(s,["cachedContentTokenCount"],i);const o=g(e,["candidatesTokenCount"]);o!=null&&x(s,["responseTokenCount"],o);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&x(s,["toolUsePromptTokenCount"],c);const u=g(e,["thoughtsTokenCount"]);u!=null&&x(s,["thoughtsTokenCount"],u);const f=g(e,["totalTokenCount"]);f!=null&&x(s,["totalTokenCount"],f);const h=g(e,["promptTokensDetails"]);if(h!=null){let k=h;Array.isArray(k)&&(k=k.map(_=>au(n,_))),x(s,["promptTokensDetails"],k)}const y=g(e,["cacheTokensDetails"]);if(y!=null){let k=y;Array.isArray(k)&&(k=k.map(_=>au(n,_))),x(s,["cacheTokensDetails"],k)}const v=g(e,["candidatesTokensDetails"]);if(v!=null){let k=v;Array.isArray(k)&&(k=k.map(_=>au(n,_))),x(s,["responseTokensDetails"],k)}const j=g(e,["toolUsePromptTokensDetails"]);if(j!=null){let k=j;Array.isArray(k)&&(k=k.map(_=>au(n,_))),x(s,["toolUsePromptTokensDetails"],k)}const E=g(e,["trafficType"]);return E!=null&&x(s,["trafficType"],E),s}function CM(n,e){const s={},r=g(e,["timeLeft"]);return r!=null&&x(s,["timeLeft"],r),s}function EM(n,e){const s={},r=g(e,["timeLeft"]);return r!=null&&x(s,["timeLeft"],r),s}function TM(n,e){const s={},r=g(e,["newHandle"]);r!=null&&x(s,["newHandle"],r);const i=g(e,["resumable"]);i!=null&&x(s,["resumable"],i);const o=g(e,["lastConsumedClientMessageIndex"]);return o!=null&&x(s,["lastConsumedClientMessageIndex"],o),s}function PM(n,e){const s={},r=g(e,["newHandle"]);r!=null&&x(s,["newHandle"],r);const i=g(e,["resumable"]);i!=null&&x(s,["resumable"],i);const o=g(e,["lastConsumedClientMessageIndex"]);return o!=null&&x(s,["lastConsumedClientMessageIndex"],o),s}function AM(n,e){const s={};g(e,["setupComplete"])!=null&&x(s,["setupComplete"],uM());const i=g(e,["serverContent"]);i!=null&&x(s,["serverContent"],xM(n,i));const o=g(e,["toolCall"]);o!=null&&x(s,["toolCall"],wM(n,o));const c=g(e,["toolCallCancellation"]);c!=null&&x(s,["toolCallCancellation"],jM(n,c));const u=g(e,["usageMetadata"]);u!=null&&x(s,["usageMetadata"],kM(n,u));const f=g(e,["goAway"]);f!=null&&x(s,["goAway"],CM(n,f));const h=g(e,["sessionResumptionUpdate"]);return h!=null&&x(s,["sessionResumptionUpdate"],TM(n,h)),s}function IM(n,e){const s={};g(e,["setupComplete"])!=null&&x(s,["setupComplete"],hM());const i=g(e,["serverContent"]);i!=null&&x(s,["serverContent"],yM(n,i));const o=g(e,["toolCall"]);o!=null&&x(s,["toolCall"],NM(n,o));const c=g(e,["toolCallCancellation"]);c!=null&&x(s,["toolCallCancellation"],SM(n,c));const u=g(e,["usageMetadata"]);u!=null&&x(s,["usageMetadata"],_M(n,u));const f=g(e,["goAway"]);f!=null&&x(s,["goAway"],EM(n,f));const h=g(e,["sessionResumptionUpdate"]);return h!=null&&x(s,["sessionResumptionUpdate"],PM(n,h)),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RM(n,e){const s={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&x(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&x(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&x(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&x(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&x(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&x(s,["inlineData"],h);const y=g(e,["text"]);return y!=null&&x(s,["text"],y),s}function oh(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>RM(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function MM(n,e){const s={};if(g(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=g(e,["category"]);r!=null&&x(s,["category"],r);const i=g(e,["threshold"]);return i!=null&&x(s,["threshold"],i),s}function DM(){return{}}function OM(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(s,["dynamicThreshold"],i),s}function LM(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(s,["dynamicRetrievalConfig"],OM(n,r)),s}function zM(n,e){const s={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(s,["googleSearch"],DM());const i=g(e,["googleSearchRetrieval"]);i!=null&&x(s,["googleSearchRetrieval"],LM(n,i));const o=g(e,["codeExecution"]);o!=null&&x(s,["codeExecution"],o);const c=g(e,["functionDeclarations"]);return c!=null&&x(s,["functionDeclarations"],c),s}function UM(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(s,["allowedFunctionNames"],i),s}function FM(n,e){const s={},r=g(e,["functionCallingConfig"]);return r!=null&&x(s,["functionCallingConfig"],UM(n,r)),s}function $M(n,e){const s={},r=g(e,["voiceName"]);return r!=null&&x(s,["voiceName"],r),s}function VM(n,e){const s={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&x(s,["prebuiltVoiceConfig"],$M(n,r)),s}function BM(n,e){const s={},r=g(e,["voiceConfig"]);r!=null&&x(s,["voiceConfig"],VM(n,r));const i=g(e,["languageCode"]);return i!=null&&x(s,["languageCode"],i),s}function qM(n,e){const s={},r=g(e,["includeThoughts"]);r!=null&&x(s,["includeThoughts"],r);const i=g(e,["thinkingBudget"]);return i!=null&&x(s,["thinkingBudget"],i),s}function WM(n,e,s){const r={},i=g(e,["systemInstruction"]);s!==void 0&&i!=null&&x(s,["systemInstruction"],oh(n,wn(n,i)));const o=g(e,["temperature"]);o!=null&&x(r,["temperature"],o);const c=g(e,["topP"]);c!=null&&x(r,["topP"],c);const u=g(e,["topK"]);u!=null&&x(r,["topK"],u);const f=g(e,["candidateCount"]);f!=null&&x(r,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&x(r,["maxOutputTokens"],h);const y=g(e,["stopSequences"]);y!=null&&x(r,["stopSequences"],y);const v=g(e,["responseLogprobs"]);v!=null&&x(r,["responseLogprobs"],v);const j=g(e,["logprobs"]);j!=null&&x(r,["logprobs"],j);const E=g(e,["presencePenalty"]);E!=null&&x(r,["presencePenalty"],E);const k=g(e,["frequencyPenalty"]);k!=null&&x(r,["frequencyPenalty"],k);const _=g(e,["seed"]);_!=null&&x(r,["seed"],_);const P=g(e,["responseMimeType"]);P!=null&&x(r,["responseMimeType"],P);const L=g(e,["responseSchema"]);if(L!=null&&x(r,["responseSchema"],dj(n,L)),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=g(e,["safetySettings"]);if(s!==void 0&&U!=null){let $=U;Array.isArray($)&&($=$.map(O=>MM(n,O))),x(s,["safetySettings"],$)}const F=g(e,["tools"]);if(s!==void 0&&F!=null){let $=ah(n,F);Array.isArray($)&&($=$.map(O=>zM(n,ih(n,O)))),x(s,["tools"],$)}const J=g(e,["toolConfig"]);if(s!==void 0&&J!=null&&x(s,["toolConfig"],FM(n,J)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const te=g(e,["cachedContent"]);s!==void 0&&te!=null&&x(s,["cachedContent"],pa(n,te));const H=g(e,["responseModalities"]);H!=null&&x(r,["responseModalities"],H);const M=g(e,["mediaResolution"]);M!=null&&x(r,["mediaResolution"],M);const C=g(e,["speechConfig"]);if(C!=null&&x(r,["speechConfig"],BM(n,uj(n,C))),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=g(e,["thinkingConfig"]);return I!=null&&x(r,["thinkingConfig"],qM(n,I)),r}function uv(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],ms(n,r));const i=g(e,["contents"]);if(i!=null){let c=ma(n,i);Array.isArray(c)&&(c=c.map(u=>oh(n,u))),x(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&x(s,["generationConfig"],WM(n,o,s)),s}function HM(n,e,s){const r={},i=g(e,["taskType"]);s!==void 0&&i!=null&&x(s,["requests[]","taskType"],i);const o=g(e,["title"]);s!==void 0&&o!=null&&x(s,["requests[]","title"],o);const c=g(e,["outputDimensionality"]);if(s!==void 0&&c!=null&&x(s,["requests[]","outputDimensionality"],c),g(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function GM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],ms(n,r));const i=g(e,["contents"]);i!=null&&x(s,["requests[]","content"],cj(n,i));const o=g(e,["config"]);o!=null&&x(s,["config"],HM(n,o,s));const c=g(e,["model"]);return c!==void 0&&x(s,["requests[]","model"],ms(n,c)),s}function KM(n,e,s){const r={};if(g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=g(e,["numberOfImages"]);s!==void 0&&i!=null&&x(s,["parameters","sampleCount"],i);const o=g(e,["aspectRatio"]);s!==void 0&&o!=null&&x(s,["parameters","aspectRatio"],o);const c=g(e,["guidanceScale"]);if(s!==void 0&&c!=null&&x(s,["parameters","guidanceScale"],c),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=g(e,["safetyFilterLevel"]);s!==void 0&&u!=null&&x(s,["parameters","safetySetting"],u);const f=g(e,["personGeneration"]);s!==void 0&&f!=null&&x(s,["parameters","personGeneration"],f);const h=g(e,["includeSafetyAttributes"]);s!==void 0&&h!=null&&x(s,["parameters","includeSafetyAttributes"],h);const y=g(e,["includeRaiReason"]);s!==void 0&&y!=null&&x(s,["parameters","includeRaiReason"],y);const v=g(e,["language"]);s!==void 0&&v!=null&&x(s,["parameters","language"],v);const j=g(e,["outputMimeType"]);s!==void 0&&j!=null&&x(s,["parameters","outputOptions","mimeType"],j);const E=g(e,["outputCompressionQuality"]);if(s!==void 0&&E!=null&&x(s,["parameters","outputOptions","compressionQuality"],E),g(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function JM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],ms(n,r));const i=g(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const o=g(e,["config"]);return o!=null&&x(s,["config"],KM(n,o,s)),s}function YM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","name"],ms(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function ZM(n,e,s){const r={},i=g(e,["displayName"]);s!==void 0&&i!=null&&x(s,["displayName"],i);const o=g(e,["description"]);return s!==void 0&&o!=null&&x(s,["description"],o),r}function XM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","name"],ms(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],ZM(n,i,s)),s}function QM(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","name"],ms(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function eD(n,e){const s={};if(g(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return s}function tD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],ms(n,r));const i=g(e,["contents"]);if(i!=null){let c=ma(n,i);Array.isArray(c)&&(c=c.map(u=>oh(n,u))),x(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&x(s,["config"],eD(n,o)),s}function sD(n,e){const s={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(e,["imageBytes"]);r!=null&&x(s,["bytesBase64Encoded"],ga(n,r));const i=g(e,["mimeType"]);return i!=null&&x(s,["mimeType"],i),s}function nD(n,e,s){const r={},i=g(e,["numberOfVideos"]);if(s!==void 0&&i!=null&&x(s,["parameters","sampleCount"],i),g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=g(e,["durationSeconds"]);if(s!==void 0&&o!=null&&x(s,["parameters","durationSeconds"],o),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=g(e,["aspectRatio"]);if(s!==void 0&&c!=null&&x(s,["parameters","aspectRatio"],c),g(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=g(e,["personGeneration"]);if(s!==void 0&&u!=null&&x(s,["parameters","personGeneration"],u),g(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=g(e,["negativePrompt"]);if(s!==void 0&&f!=null&&x(s,["parameters","negativePrompt"],f),g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function rD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],ms(n,r));const i=g(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const o=g(e,["image"]);o!=null&&x(s,["instances[0]","image"],sD(n,o));const c=g(e,["config"]);return c!=null&&x(s,["config"],nD(n,c,s)),s}function iD(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&x(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&x(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&x(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&x(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&x(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&x(s,["functionResponse"],h);const y=g(e,["inlineData"]);y!=null&&x(s,["inlineData"],y);const v=g(e,["text"]);return v!=null&&x(s,["text"],v),s}function gl(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>iD(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function aD(n,e){const s={},r=g(e,["featureSelectionPreference"]);return r!=null&&x(s,["featureSelectionPreference"],r),s}function oD(n,e){const s={},r=g(e,["method"]);r!=null&&x(s,["method"],r);const i=g(e,["category"]);i!=null&&x(s,["category"],i);const o=g(e,["threshold"]);return o!=null&&x(s,["threshold"],o),s}function lD(){return{}}function cD(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(s,["dynamicThreshold"],i),s}function dD(n,e){const s={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(s,["dynamicRetrievalConfig"],cD(n,r)),s}function pj(n,e){const s={},r=g(e,["retrieval"]);r!=null&&x(s,["retrieval"],r),g(e,["googleSearch"])!=null&&x(s,["googleSearch"],lD());const o=g(e,["googleSearchRetrieval"]);o!=null&&x(s,["googleSearchRetrieval"],dD(n,o));const c=g(e,["codeExecution"]);c!=null&&x(s,["codeExecution"],c);const u=g(e,["functionDeclarations"]);return u!=null&&x(s,["functionDeclarations"],u),s}function uD(n,e){const s={},r=g(e,["mode"]);r!=null&&x(s,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(s,["allowedFunctionNames"],i),s}function hD(n,e){const s={},r=g(e,["functionCallingConfig"]);return r!=null&&x(s,["functionCallingConfig"],uD(n,r)),s}function fD(n,e){const s={},r=g(e,["voiceName"]);return r!=null&&x(s,["voiceName"],r),s}function mD(n,e){const s={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&x(s,["prebuiltVoiceConfig"],fD(n,r)),s}function pD(n,e){const s={},r=g(e,["voiceConfig"]);r!=null&&x(s,["voiceConfig"],mD(n,r));const i=g(e,["languageCode"]);return i!=null&&x(s,["languageCode"],i),s}function gD(n,e){const s={},r=g(e,["includeThoughts"]);r!=null&&x(s,["includeThoughts"],r);const i=g(e,["thinkingBudget"]);return i!=null&&x(s,["thinkingBudget"],i),s}function xD(n,e,s){const r={},i=g(e,["systemInstruction"]);s!==void 0&&i!=null&&x(s,["systemInstruction"],gl(n,wn(n,i)));const o=g(e,["temperature"]);o!=null&&x(r,["temperature"],o);const c=g(e,["topP"]);c!=null&&x(r,["topP"],c);const u=g(e,["topK"]);u!=null&&x(r,["topK"],u);const f=g(e,["candidateCount"]);f!=null&&x(r,["candidateCount"],f);const h=g(e,["maxOutputTokens"]);h!=null&&x(r,["maxOutputTokens"],h);const y=g(e,["stopSequences"]);y!=null&&x(r,["stopSequences"],y);const v=g(e,["responseLogprobs"]);v!=null&&x(r,["responseLogprobs"],v);const j=g(e,["logprobs"]);j!=null&&x(r,["logprobs"],j);const E=g(e,["presencePenalty"]);E!=null&&x(r,["presencePenalty"],E);const k=g(e,["frequencyPenalty"]);k!=null&&x(r,["frequencyPenalty"],k);const _=g(e,["seed"]);_!=null&&x(r,["seed"],_);const P=g(e,["responseMimeType"]);P!=null&&x(r,["responseMimeType"],P);const L=g(e,["responseSchema"]);L!=null&&x(r,["responseSchema"],dj(n,L));const U=g(e,["routingConfig"]);U!=null&&x(r,["routingConfig"],U);const F=g(e,["modelSelectionConfig"]);F!=null&&x(r,["modelConfig"],aD(n,F));const J=g(e,["safetySettings"]);if(s!==void 0&&J!=null){let se=J;Array.isArray(se)&&(se=se.map(fe=>oD(n,fe))),x(s,["safetySettings"],se)}const te=g(e,["tools"]);if(s!==void 0&&te!=null){let se=ah(n,te);Array.isArray(se)&&(se=se.map(fe=>pj(n,ih(n,fe)))),x(s,["tools"],se)}const H=g(e,["toolConfig"]);s!==void 0&&H!=null&&x(s,["toolConfig"],hD(n,H));const M=g(e,["labels"]);s!==void 0&&M!=null&&x(s,["labels"],M);const C=g(e,["cachedContent"]);s!==void 0&&C!=null&&x(s,["cachedContent"],pa(n,C));const I=g(e,["responseModalities"]);I!=null&&x(r,["responseModalities"],I);const $=g(e,["mediaResolution"]);$!=null&&x(r,["mediaResolution"],$);const O=g(e,["speechConfig"]);O!=null&&x(r,["speechConfig"],pD(n,uj(n,O)));const V=g(e,["audioTimestamp"]);V!=null&&x(r,["audioTimestamp"],V);const A=g(e,["thinkingConfig"]);return A!=null&&x(r,["thinkingConfig"],gD(n,A)),r}function hv(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],ms(n,r));const i=g(e,["contents"]);if(i!=null){let c=ma(n,i);Array.isArray(c)&&(c=c.map(u=>gl(n,u))),x(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&x(s,["generationConfig"],xD(n,o,s)),s}function yD(n,e,s){const r={},i=g(e,["taskType"]);s!==void 0&&i!=null&&x(s,["instances[]","task_type"],i);const o=g(e,["title"]);s!==void 0&&o!=null&&x(s,["instances[]","title"],o);const c=g(e,["outputDimensionality"]);s!==void 0&&c!=null&&x(s,["parameters","outputDimensionality"],c);const u=g(e,["mimeType"]);s!==void 0&&u!=null&&x(s,["instances[]","mimeType"],u);const f=g(e,["autoTruncate"]);return s!==void 0&&f!=null&&x(s,["parameters","autoTruncate"],f),r}function bD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],ms(n,r));const i=g(e,["contents"]);i!=null&&x(s,["instances[]","content"],cj(n,i));const o=g(e,["config"]);return o!=null&&x(s,["config"],yD(n,o,s)),s}function vD(n,e,s){const r={},i=g(e,["outputGcsUri"]);s!==void 0&&i!=null&&x(s,["parameters","storageUri"],i);const o=g(e,["negativePrompt"]);s!==void 0&&o!=null&&x(s,["parameters","negativePrompt"],o);const c=g(e,["numberOfImages"]);s!==void 0&&c!=null&&x(s,["parameters","sampleCount"],c);const u=g(e,["aspectRatio"]);s!==void 0&&u!=null&&x(s,["parameters","aspectRatio"],u);const f=g(e,["guidanceScale"]);s!==void 0&&f!=null&&x(s,["parameters","guidanceScale"],f);const h=g(e,["seed"]);s!==void 0&&h!=null&&x(s,["parameters","seed"],h);const y=g(e,["safetyFilterLevel"]);s!==void 0&&y!=null&&x(s,["parameters","safetySetting"],y);const v=g(e,["personGeneration"]);s!==void 0&&v!=null&&x(s,["parameters","personGeneration"],v);const j=g(e,["includeSafetyAttributes"]);s!==void 0&&j!=null&&x(s,["parameters","includeSafetyAttributes"],j);const E=g(e,["includeRaiReason"]);s!==void 0&&E!=null&&x(s,["parameters","includeRaiReason"],E);const k=g(e,["language"]);s!==void 0&&k!=null&&x(s,["parameters","language"],k);const _=g(e,["outputMimeType"]);s!==void 0&&_!=null&&x(s,["parameters","outputOptions","mimeType"],_);const P=g(e,["outputCompressionQuality"]);s!==void 0&&P!=null&&x(s,["parameters","outputOptions","compressionQuality"],P);const L=g(e,["addWatermark"]);s!==void 0&&L!=null&&x(s,["parameters","addWatermark"],L);const U=g(e,["enhancePrompt"]);return s!==void 0&&U!=null&&x(s,["parameters","enhancePrompt"],U),r}function wD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],ms(n,r));const i=g(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const o=g(e,["config"]);return o!=null&&x(s,["config"],vD(n,o,s)),s}function ND(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","name"],ms(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function jD(n,e,s){const r={},i=g(e,["displayName"]);s!==void 0&&i!=null&&x(s,["displayName"],i);const o=g(e,["description"]);return s!==void 0&&o!=null&&x(s,["description"],o),r}function SD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],ms(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],jD(n,i,s)),s}function kD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","name"],ms(n,r));const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function _D(n,e,s){const r={},i=g(e,["systemInstruction"]);s!==void 0&&i!=null&&x(s,["systemInstruction"],gl(n,wn(n,i)));const o=g(e,["tools"]);if(s!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>pj(n,f))),x(s,["tools"],u)}const c=g(e,["generationConfig"]);return s!==void 0&&c!=null&&x(s,["generationConfig"],c),r}function CD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],ms(n,r));const i=g(e,["contents"]);if(i!=null){let c=ma(n,i);Array.isArray(c)&&(c=c.map(u=>gl(n,u))),x(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&x(s,["config"],_D(n,o,s)),s}function ED(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],ms(n,r));const i=g(e,["contents"]);if(i!=null){let c=ma(n,i);Array.isArray(c)&&(c=c.map(u=>gl(n,u))),x(s,["contents"],c)}const o=g(e,["config"]);return o!=null&&x(s,["config"],o),s}function TD(n,e){const s={},r=g(e,["gcsUri"]);r!=null&&x(s,["gcsUri"],r);const i=g(e,["imageBytes"]);i!=null&&x(s,["bytesBase64Encoded"],ga(n,i));const o=g(e,["mimeType"]);return o!=null&&x(s,["mimeType"],o),s}function PD(n,e,s){const r={},i=g(e,["numberOfVideos"]);s!==void 0&&i!=null&&x(s,["parameters","sampleCount"],i);const o=g(e,["outputGcsUri"]);s!==void 0&&o!=null&&x(s,["parameters","storageUri"],o);const c=g(e,["fps"]);s!==void 0&&c!=null&&x(s,["parameters","fps"],c);const u=g(e,["durationSeconds"]);s!==void 0&&u!=null&&x(s,["parameters","durationSeconds"],u);const f=g(e,["seed"]);s!==void 0&&f!=null&&x(s,["parameters","seed"],f);const h=g(e,["aspectRatio"]);s!==void 0&&h!=null&&x(s,["parameters","aspectRatio"],h);const y=g(e,["resolution"]);s!==void 0&&y!=null&&x(s,["parameters","resolution"],y);const v=g(e,["personGeneration"]);s!==void 0&&v!=null&&x(s,["parameters","personGeneration"],v);const j=g(e,["pubsubTopic"]);s!==void 0&&j!=null&&x(s,["parameters","pubsubTopic"],j);const E=g(e,["negativePrompt"]);s!==void 0&&E!=null&&x(s,["parameters","negativePrompt"],E);const k=g(e,["enhancePrompt"]);return s!==void 0&&k!=null&&x(s,["parameters","enhancePrompt"],k),r}function AD(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["_url","model"],ms(n,r));const i=g(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const o=g(e,["image"]);o!=null&&x(s,["instances[0]","image"],TD(n,o));const c=g(e,["config"]);return c!=null&&x(s,["config"],PD(n,c,s)),s}function ID(n,e){const s={},r=g(e,["thought"]);r!=null&&x(s,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(s,["codeExecutionResult"],i);const o=g(e,["executableCode"]);o!=null&&x(s,["executableCode"],o);const c=g(e,["fileData"]);c!=null&&x(s,["fileData"],c);const u=g(e,["functionCall"]);u!=null&&x(s,["functionCall"],u);const f=g(e,["functionResponse"]);f!=null&&x(s,["functionResponse"],f);const h=g(e,["inlineData"]);h!=null&&x(s,["inlineData"],h);const y=g(e,["text"]);return y!=null&&x(s,["text"],y),s}function RD(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>ID(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function MD(n,e){const s={},r=g(e,["citationSources"]);return r!=null&&x(s,["citations"],r),s}function DD(n,e){const s={},r=g(e,["content"]);r!=null&&x(s,["content"],RD(n,r));const i=g(e,["citationMetadata"]);i!=null&&x(s,["citationMetadata"],MD(n,i));const o=g(e,["tokenCount"]);o!=null&&x(s,["tokenCount"],o);const c=g(e,["finishReason"]);c!=null&&x(s,["finishReason"],c);const u=g(e,["avgLogprobs"]);u!=null&&x(s,["avgLogprobs"],u);const f=g(e,["groundingMetadata"]);f!=null&&x(s,["groundingMetadata"],f);const h=g(e,["index"]);h!=null&&x(s,["index"],h);const y=g(e,["logprobsResult"]);y!=null&&x(s,["logprobsResult"],y);const v=g(e,["safetyRatings"]);return v!=null&&x(s,["safetyRatings"],v),s}function fv(n,e){const s={},r=g(e,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>DD(n,f))),x(s,["candidates"],u)}const i=g(e,["modelVersion"]);i!=null&&x(s,["modelVersion"],i);const o=g(e,["promptFeedback"]);o!=null&&x(s,["promptFeedback"],o);const c=g(e,["usageMetadata"]);return c!=null&&x(s,["usageMetadata"],c),s}function OD(n,e){const s={},r=g(e,["values"]);return r!=null&&x(s,["values"],r),s}function LD(){return{}}function zD(n,e){const s={},r=g(e,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>OD(n,c))),x(s,["embeddings"],o)}return g(e,["metadata"])!=null&&x(s,["metadata"],LD()),s}function UD(n,e){const s={},r=g(e,["bytesBase64Encoded"]);r!=null&&x(s,["imageBytes"],ga(n,r));const i=g(e,["mimeType"]);return i!=null&&x(s,["mimeType"],i),s}function gj(n,e){const s={},r=g(e,["safetyAttributes","categories"]);r!=null&&x(s,["categories"],r);const i=g(e,["safetyAttributes","scores"]);i!=null&&x(s,["scores"],i);const o=g(e,["contentType"]);return o!=null&&x(s,["contentType"],o),s}function FD(n,e){const s={},r=g(e,["_self"]);r!=null&&x(s,["image"],UD(n,r));const i=g(e,["raiFilteredReason"]);i!=null&&x(s,["raiFilteredReason"],i);const o=g(e,["_self"]);return o!=null&&x(s,["safetyAttributes"],gj(n,o)),s}function $D(n,e){const s={},r=g(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>FD(n,c))),x(s,["generatedImages"],o)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&x(s,["positivePromptSafetyAttributes"],gj(n,i)),s}function VD(n,e){const s={},r=g(e,["baseModel"]);r!=null&&x(s,["baseModel"],r);const i=g(e,["createTime"]);i!=null&&x(s,["createTime"],i);const o=g(e,["updateTime"]);return o!=null&&x(s,["updateTime"],o),s}function mv(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["displayName"]);i!=null&&x(s,["displayName"],i);const o=g(e,["description"]);o!=null&&x(s,["description"],o);const c=g(e,["version"]);c!=null&&x(s,["version"],c);const u=g(e,["_self"]);u!=null&&x(s,["tunedModelInfo"],VD(n,u));const f=g(e,["inputTokenLimit"]);f!=null&&x(s,["inputTokenLimit"],f);const h=g(e,["outputTokenLimit"]);h!=null&&x(s,["outputTokenLimit"],h);const y=g(e,["supportedGenerationMethods"]);return y!=null&&x(s,["supportedActions"],y),s}function BD(){return{}}function qD(n,e){const s={},r=g(e,["totalTokens"]);r!=null&&x(s,["totalTokens"],r);const i=g(e,["cachedContentTokenCount"]);return i!=null&&x(s,["cachedContentTokenCount"],i),s}function WD(n,e){const s={},r=g(e,["video","uri"]);r!=null&&x(s,["uri"],r);const i=g(e,["video","encodedVideo"]);i!=null&&x(s,["videoBytes"],ga(n,i));const o=g(e,["encoding"]);return o!=null&&x(s,["mimeType"],o),s}function HD(n,e){const s={},r=g(e,["_self"]);return r!=null&&x(s,["video"],WD(n,r)),s}function GD(n,e){const s={},r=g(e,["generatedSamples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>HD(n,u))),x(s,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(s,["raiMediaFilteredCount"],i);const o=g(e,["raiMediaFilteredReasons"]);return o!=null&&x(s,["raiMediaFilteredReasons"],o),s}function KD(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["metadata"]);i!=null&&x(s,["metadata"],i);const o=g(e,["done"]);o!=null&&x(s,["done"],o);const c=g(e,["error"]);c!=null&&x(s,["error"],c);const u=g(e,["response","generateVideoResponse"]);return u!=null&&x(s,["response"],GD(n,u)),s}function JD(n,e){const s={},r=g(e,["videoMetadata"]);r!=null&&x(s,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(s,["thought"],i);const o=g(e,["codeExecutionResult"]);o!=null&&x(s,["codeExecutionResult"],o);const c=g(e,["executableCode"]);c!=null&&x(s,["executableCode"],c);const u=g(e,["fileData"]);u!=null&&x(s,["fileData"],u);const f=g(e,["functionCall"]);f!=null&&x(s,["functionCall"],f);const h=g(e,["functionResponse"]);h!=null&&x(s,["functionResponse"],h);const y=g(e,["inlineData"]);y!=null&&x(s,["inlineData"],y);const v=g(e,["text"]);return v!=null&&x(s,["text"],v),s}function YD(n,e){const s={},r=g(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>JD(n,c))),x(s,["parts"],o)}const i=g(e,["role"]);return i!=null&&x(s,["role"],i),s}function ZD(n,e){const s={},r=g(e,["citations"]);return r!=null&&x(s,["citations"],r),s}function XD(n,e){const s={},r=g(e,["content"]);r!=null&&x(s,["content"],YD(n,r));const i=g(e,["citationMetadata"]);i!=null&&x(s,["citationMetadata"],ZD(n,i));const o=g(e,["finishMessage"]);o!=null&&x(s,["finishMessage"],o);const c=g(e,["finishReason"]);c!=null&&x(s,["finishReason"],c);const u=g(e,["avgLogprobs"]);u!=null&&x(s,["avgLogprobs"],u);const f=g(e,["groundingMetadata"]);f!=null&&x(s,["groundingMetadata"],f);const h=g(e,["index"]);h!=null&&x(s,["index"],h);const y=g(e,["logprobsResult"]);y!=null&&x(s,["logprobsResult"],y);const v=g(e,["safetyRatings"]);return v!=null&&x(s,["safetyRatings"],v),s}function pv(n,e){const s={},r=g(e,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(y=>XD(n,y))),x(s,["candidates"],h)}const i=g(e,["createTime"]);i!=null&&x(s,["createTime"],i);const o=g(e,["responseId"]);o!=null&&x(s,["responseId"],o);const c=g(e,["modelVersion"]);c!=null&&x(s,["modelVersion"],c);const u=g(e,["promptFeedback"]);u!=null&&x(s,["promptFeedback"],u);const f=g(e,["usageMetadata"]);return f!=null&&x(s,["usageMetadata"],f),s}function QD(n,e){const s={},r=g(e,["truncated"]);r!=null&&x(s,["truncated"],r);const i=g(e,["token_count"]);return i!=null&&x(s,["tokenCount"],i),s}function e6(n,e){const s={},r=g(e,["values"]);r!=null&&x(s,["values"],r);const i=g(e,["statistics"]);return i!=null&&x(s,["statistics"],QD(n,i)),s}function t6(n,e){const s={},r=g(e,["billableCharacterCount"]);return r!=null&&x(s,["billableCharacterCount"],r),s}function s6(n,e){const s={},r=g(e,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>e6(n,c))),x(s,["embeddings"],o)}const i=g(e,["metadata"]);return i!=null&&x(s,["metadata"],t6(n,i)),s}function n6(n,e){const s={},r=g(e,["gcsUri"]);r!=null&&x(s,["gcsUri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&x(s,["imageBytes"],ga(n,i));const o=g(e,["mimeType"]);return o!=null&&x(s,["mimeType"],o),s}function xj(n,e){const s={},r=g(e,["safetyAttributes","categories"]);r!=null&&x(s,["categories"],r);const i=g(e,["safetyAttributes","scores"]);i!=null&&x(s,["scores"],i);const o=g(e,["contentType"]);return o!=null&&x(s,["contentType"],o),s}function r6(n,e){const s={},r=g(e,["_self"]);r!=null&&x(s,["image"],n6(n,r));const i=g(e,["raiFilteredReason"]);i!=null&&x(s,["raiFilteredReason"],i);const o=g(e,["_self"]);o!=null&&x(s,["safetyAttributes"],xj(n,o));const c=g(e,["prompt"]);return c!=null&&x(s,["enhancedPrompt"],c),s}function i6(n,e){const s={},r=g(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>r6(n,c))),x(s,["generatedImages"],o)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&x(s,["positivePromptSafetyAttributes"],xj(n,i)),s}function a6(n,e){const s={},r=g(e,["endpoint"]);r!=null&&x(s,["name"],r);const i=g(e,["deployedModelId"]);return i!=null&&x(s,["deployedModelId"],i),s}function o6(n,e){const s={},r=g(e,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&x(s,["baseModel"],r);const i=g(e,["createTime"]);i!=null&&x(s,["createTime"],i);const o=g(e,["updateTime"]);return o!=null&&x(s,["updateTime"],o),s}function gv(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["displayName"]);i!=null&&x(s,["displayName"],i);const o=g(e,["description"]);o!=null&&x(s,["description"],o);const c=g(e,["versionId"]);c!=null&&x(s,["version"],c);const u=g(e,["deployedModels"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(v=>a6(n,v))),x(s,["endpoints"],y)}const f=g(e,["labels"]);f!=null&&x(s,["labels"],f);const h=g(e,["_self"]);return h!=null&&x(s,["tunedModelInfo"],o6(n,h)),s}function l6(){return{}}function c6(n,e){const s={},r=g(e,["totalTokens"]);return r!=null&&x(s,["totalTokens"],r),s}function d6(n,e){const s={},r=g(e,["tokensInfo"]);return r!=null&&x(s,["tokensInfo"],r),s}function u6(n,e){const s={},r=g(e,["gcsUri"]);r!=null&&x(s,["uri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&x(s,["videoBytes"],ga(n,i));const o=g(e,["mimeType"]);return o!=null&&x(s,["mimeType"],o),s}function h6(n,e){const s={},r=g(e,["_self"]);return r!=null&&x(s,["video"],u6(n,r)),s}function f6(n,e){const s={},r=g(e,["videos"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>h6(n,u))),x(s,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(s,["raiMediaFilteredCount"],i);const o=g(e,["raiMediaFilteredReasons"]);return o!=null&&x(s,["raiMediaFilteredReasons"],o),s}function m6(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["metadata"]);i!=null&&x(s,["metadata"],i);const o=g(e,["done"]);o!=null&&x(s,["done"],o);const c=g(e,["error"]);c!=null&&x(s,["error"],c);const u=g(e,["response"]);return u!=null&&x(s,["response"],f6(n,u)),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p6="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function g6(n,e,s){let r,i;s.data instanceof Blob?i=JSON.parse(await s.data.text()):i=JSON.parse(s.data),n.isVertexAI()?r=IM(n,i):r=AM(n,i),e(r)}class x6{constructor(e,s,r){this.apiClient=e,this.auth=s,this.webSocketFactory=r}async connect(e){var s,r,i,o;const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let f;const h=w6(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h);else{const J=this.apiClient.getApiKey();f=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateContent?key=${J}`}let y=()=>{};const v=new Promise(J=>{y=J}),j=e.callbacks,E=function(){var J;(J=j==null?void 0:j.onopen)===null||J===void 0||J.call(j),y({})},k=this.apiClient,_={onopen:E,onmessage:J=>{g6(k,j.onmessage,J)},onerror:(s=j==null?void 0:j.onerror)!==null&&s!==void 0?s:function(J){},onclose:(r=j==null?void 0:j.onclose)!==null&&r!==void 0?r:function(J){}},P=this.webSocketFactory.create(f,v6(h),_);P.connect(),await v;let L=ms(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const J=this.apiClient.getProject(),te=this.apiClient.getLocation();L=`projects/${J}/locations/${te}/`+L}let U={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Uu.AUDIO]}:e.config.responseModalities=[Uu.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F={model:L,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=rM(this.apiClient,F):U=nM(this.apiClient,F),delete U.config,P.send(JSON.stringify(U)),new b6(P,this.apiClient)}}const y6={turnComplete:!0};class b6{constructor(e,s){this.conn=e,this.apiClient=s}tLiveClientContent(e,s){if(s.turns!==null&&s.turns!==void 0){let r=[];try{r=ma(e,s.turns),e.isVertexAI()?r=r.map(i=>gl(e,i)):r=r.map(i=>oh(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:r,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(e,s){let r=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?r=s.functionResponses:r=[s.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(p6)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},y6),e);const s=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(s))}sendRealtimeInput(e){let s={};this.apiClient.isVertexAI()?s={realtimeInput:dM(this.apiClient,e)}:s={realtimeInput:cM(this.apiClient,e)},this.conn.send(JSON.stringify(s))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function v6(n){const e={};return n.forEach((s,r)=>{e[r]=s}),e}function w6(n){const e=new Headers;for(const[s,r]of Object.entries(n))e.append(s,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N6 extends qc{constructor(e){super(),this.apiClient=e,this.generateContent=async s=>await this.generateContentInternal(s),this.generateContentStream=async s=>await this.generateContentStreamInternal(s),this.generateImages=async s=>await this.generateImagesInternal(s).then(r=>{var i;let o;const c=[];if(r!=null&&r.generatedImages)for(const f of r.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((i=f==null?void 0:f.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=f==null?void 0:f.safetyAttributes:c.push(f);let u;return o?u={generatedImages:c,positivePromptSafetyAttributes:o}:u={generatedImages:c},u})}async generateContentInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=hv(this.apiClient,e);return u=pt("{model}:generateContent",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const v=pv(this.apiClient,y),j=new ru;return Object.assign(j,v),j})}else{const h=uv(this.apiClient,e);return u=pt("{model}:generateContent",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const v=fv(this.apiClient,y),j=new ru;return Object.assign(j,v),j})}}async generateContentStreamInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=hv(this.apiClient,e);u=pt("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h.config,delete h._url,delete h._query;const y=this.apiClient;return c=y.requestStream({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),c.then(function(v){return Fu(this,arguments,function*(){var j,E,k,_;try{for(var P=!0,L=Km(v),U;U=yield Zs(L.next()),j=U.done,!j;P=!0){_=U.value,P=!1;const J=pv(y,yield Zs(_.json())),te=new ru;Object.assign(te,J),yield yield Zs(te)}}catch(F){E={error:F}}finally{try{!P&&!j&&(k=L.return)&&(yield Zs(k.call(L)))}finally{if(E)throw E.error}}})})}else{const h=uv(this.apiClient,e);u=pt("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h.config,delete h._url,delete h._query;const y=this.apiClient;return c=y.requestStream({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(v){return Fu(this,arguments,function*(){var j,E,k,_;try{for(var P=!0,L=Km(v),U;U=yield Zs(L.next()),j=U.done,!j;P=!0){_=U.value,P=!1;const J=fv(y,yield Zs(_.json())),te=new ru;Object.assign(te,J),yield yield Zs(te)}}catch(F){E={error:F}}finally{try{!P&&!j&&(k=L.return)&&(yield Zs(k.call(L)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=bD(this.apiClient,e);return u=pt("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const v=s6(this.apiClient,y),j=new ev;return Object.assign(j,v),j})}else{const h=GM(this.apiClient,e);return u=pt("{model}:batchEmbedContents",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const v=zD(this.apiClient,y),j=new ev;return Object.assign(j,v),j})}}async generateImagesInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=wD(this.apiClient,e);return u=pt("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const v=i6(this.apiClient,y),j=new tv;return Object.assign(j,v),j})}else{const h=JM(this.apiClient,e);return u=pt("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const v=$D(this.apiClient,y),j=new tv;return Object.assign(j,v),j})}}async get(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=ND(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>gv(this.apiClient,y))}else{const h=YM(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>mv(this.apiClient,y))}}async update(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=SD(this.apiClient,e);return u=pt("{model}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>gv(this.apiClient,y))}else{const h=XM(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>mv(this.apiClient,y))}}async delete(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=kD(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(()=>{const y=l6(),v=new sv;return Object.assign(v,y),v})}else{const h=QM(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(()=>{const y=BD(),v=new sv;return Object.assign(v,y),v})}}async countTokens(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=CD(this.apiClient,e);return u=pt("{model}:countTokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const v=c6(this.apiClient,y),j=new nv;return Object.assign(j,v),j})}else{const h=tD(this.apiClient,e);return u=pt("{model}:countTokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const v=qD(this.apiClient,y),j=new nv;return Object.assign(j,v),j})}}async computeTokens(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=ED(this.apiClient,e);return o=pt("{model}:computeTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const h=d6(this.apiClient,f),y=new d3;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=AD(this.apiClient,e);return u=pt("{model}:predictLongRunning",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>m6(this.apiClient,y))}else{const h=rD(this.apiClient,e);return u=pt("{model}:predictLongRunning",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>KD(this.apiClient,y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j6(n,e){const s={},r=g(e,["operationName"]);r!=null&&x(s,["_url","operationName"],r);const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function S6(n,e){const s={},r=g(e,["operationName"]);r!=null&&x(s,["_url","operationName"],r);const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function k6(n,e){const s={},r=g(e,["operationName"]);r!=null&&x(s,["operationName"],r);const i=g(e,["resourceName"]);i!=null&&x(s,["_url","resourceName"],i);const o=g(e,["config"]);return o!=null&&x(s,["config"],o),s}function _6(n,e){const s={},r=g(e,["video","uri"]);r!=null&&x(s,["uri"],r);const i=g(e,["video","encodedVideo"]);i!=null&&x(s,["videoBytes"],ga(n,i));const o=g(e,["encoding"]);return o!=null&&x(s,["mimeType"],o),s}function C6(n,e){const s={},r=g(e,["_self"]);return r!=null&&x(s,["video"],_6(n,r)),s}function E6(n,e){const s={},r=g(e,["generatedSamples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>C6(n,u))),x(s,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(s,["raiMediaFilteredCount"],i);const o=g(e,["raiMediaFilteredReasons"]);return o!=null&&x(s,["raiMediaFilteredReasons"],o),s}function T6(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["metadata"]);i!=null&&x(s,["metadata"],i);const o=g(e,["done"]);o!=null&&x(s,["done"],o);const c=g(e,["error"]);c!=null&&x(s,["error"],c);const u=g(e,["response","generateVideoResponse"]);return u!=null&&x(s,["response"],E6(n,u)),s}function P6(n,e){const s={},r=g(e,["gcsUri"]);r!=null&&x(s,["uri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&x(s,["videoBytes"],ga(n,i));const o=g(e,["mimeType"]);return o!=null&&x(s,["mimeType"],o),s}function A6(n,e){const s={},r=g(e,["_self"]);return r!=null&&x(s,["video"],P6(n,r)),s}function I6(n,e){const s={},r=g(e,["videos"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>A6(n,u))),x(s,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(s,["raiMediaFilteredCount"],i);const o=g(e,["raiMediaFilteredReasons"]);return o!=null&&x(s,["raiMediaFilteredReasons"],o),s}function xv(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["metadata"]);i!=null&&x(s,["metadata"],i);const o=g(e,["done"]);o!=null&&x(s,["done"],o);const c=g(e,["error"]);c!=null&&x(s,["error"],c);const u=g(e,["response"]);return u!=null&&x(s,["response"],I6(n,u)),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R6 extends qc{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const s=e.operation,r=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=s.name.split("/operations/")[0];let o;return r&&"httpOptions"in r&&(o=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:i,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:s.name,config:r})}async getVideosOperationInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=S6(this.apiClient,e);return u=pt("{operationName}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>xv(this.apiClient,y))}else{const h=j6(this.apiClient,e);return u=pt("{operationName}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>T6(this.apiClient,y))}}async fetchPredictVideosOperationInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=k6(this.apiClient,e);return o=pt("{resourceName}:fetchPredictOperation",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>xv(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M6="Content-Type",D6="X-Server-Timeout",O6="User-Agent",L6="x-goog-api-client",z6="0.12.0",U6=`google-genai-sdk/${z6}`,F6="v1beta1",$6="v1beta",yv=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class yj extends Error{constructor(e,s){s?super(e,{cause:s}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class Ym extends Error{constructor(e,s){s?super(e,{cause:s}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class V6{constructor(e){var s,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:F6,this.getProject()||this.getLocation()?(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(i.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:$6,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),s=new URL(e);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,s,r){const i=[this.getRequestUrlInternal(s)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,s,r);if(e.queryParams)for(const[c,u]of Object.entries(e.queryParams))i.searchParams.append(c,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,s,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,s){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(s))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,s,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,s,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,s,r){if(s&&s.timeout||r){const i=new AbortController,o=i.signal;s.timeout&&(s==null?void 0:s.timeout)>0&&setTimeout(()=>i.abort(),s.timeout),r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return e.headers=await this.getHeadersInternal(s),e}async unaryApiCall(e,s,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:r})).then(async i=>(await bv(i),new Gm(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,s,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:r})).then(async i=>(await bv(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var s;return Fu(this,arguments,function*(){const i=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let c="";for(;;){const{done:u,value:f}=yield Zs(i.read());if(u){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=o.decode(f);try{const v=JSON.parse(h);if("error"in v){const j=JSON.parse(JSON.stringify(v.error)),E=j.status,k=j.code,_=`got status: ${E}. ${JSON.stringify(v)}`;if(k>=400&&k<500)throw new yj(_);if(k>=500&&k<600)throw new Ym(_)}}catch(v){const j=v;if(j.name==="ClientError"||j.name==="ServerError")throw v}c+=h;let y=c.match(yv);for(;y;){const v=y[1];try{const j=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Zs(new Gm(j)),c=c.slice(y[0].length),y=c.match(yv)}catch(j){throw new Error(`exception parsing stream chunk ${v}. ${j}`)}}}}finally{i.releaseLock()}})}async apiCall(e,s){return fetch(e,s).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},s=U6+" "+this.clientOptions.userAgentExtra;return e[O6]=s,e[L6]=s,e[M6]="application/json",e}async getHeadersInternal(e){const s=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))s.append(r,i);e.timeout&&e.timeout>0&&s.append(D6,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s),s}async uploadFile(e,s){var r;const i={};s!=null&&(i.mimeType=s.mimeType,i.name=s.name,i.displayName=s.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,c=await o.stat(e);i.sizeBytes=String(c.size);const u=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const f=await this.fetchUploadUrl(i,s);return o.upload(e,f,this)}async fetchUploadUrl(e,s){var r;let i={};s!=null&&s.httpOptions?i=s.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},c=await this.request({path:pt("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(r=c==null?void 0:c.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function bv(n){var e;if(n===void 0)throw new Ym("response is undefined");if(!n.ok){const s=n.status,r=n.statusText;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=`got status: ${s} ${r}. ${JSON.stringify(i)}`;throw s>=400&&s<500?new yj(o):s>=500&&s<600?new Ym(o):new Error(o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B6(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],r);const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function q6(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&x(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);s!==void 0&&o!=null&&x(s,["_query","pageToken"],o);const c=g(e,["filter"]);return s!==void 0&&c!=null&&x(s,["_query","filter"],c),r}function W6(n,e){const s={},r=g(e,["config"]);return r!=null&&x(s,["config"],q6(n,r,s)),s}function H6(n,e){const s={},r=g(e,["textInput"]);r!=null&&x(s,["textInput"],r);const i=g(e,["output"]);return i!=null&&x(s,["output"],i),s}function G6(n,e){const s={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(e,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>H6(n,o))),x(s,["examples","examples"],i)}return s}function K6(n,e,s){const r={};if(g(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=g(e,["tunedModelDisplayName"]);if(s!==void 0&&i!=null&&x(s,["displayName"],i),g(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=g(e,["epochCount"]);s!==void 0&&o!=null&&x(s,["tuningTask","hyperparameters","epochCount"],o);const c=g(e,["learningRateMultiplier"]);if(c!=null&&x(r,["tuningTask","hyperparameters","learningRateMultiplier"],c),g(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=g(e,["batchSize"]);s!==void 0&&u!=null&&x(s,["tuningTask","hyperparameters","batchSize"],u);const f=g(e,["learningRate"]);return s!==void 0&&f!=null&&x(s,["tuningTask","hyperparameters","learningRate"],f),r}function J6(n,e){const s={},r=g(e,["baseModel"]);r!=null&&x(s,["baseModel"],r);const i=g(e,["trainingDataset"]);i!=null&&x(s,["tuningTask","trainingData"],G6(n,i));const o=g(e,["config"]);return o!=null&&x(s,["config"],K6(n,o,s)),s}function Y6(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["_url","name"],r);const i=g(e,["config"]);return i!=null&&x(s,["config"],i),s}function Z6(n,e,s){const r={},i=g(e,["pageSize"]);s!==void 0&&i!=null&&x(s,["_query","pageSize"],i);const o=g(e,["pageToken"]);s!==void 0&&o!=null&&x(s,["_query","pageToken"],o);const c=g(e,["filter"]);return s!==void 0&&c!=null&&x(s,["_query","filter"],c),r}function X6(n,e){const s={},r=g(e,["config"]);return r!=null&&x(s,["config"],Z6(n,r,s)),s}function Q6(n,e,s){const r={},i=g(e,["gcsUri"]);if(s!==void 0&&i!=null&&x(s,["supervisedTuningSpec","trainingDatasetUri"],i),g(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function eO(n,e){const s={},r=g(e,["gcsUri"]);return r!=null&&x(s,["validationDatasetUri"],r),s}function tO(n,e,s){const r={},i=g(e,["validationDataset"]);s!==void 0&&i!=null&&x(s,["supervisedTuningSpec"],eO(n,i));const o=g(e,["tunedModelDisplayName"]);s!==void 0&&o!=null&&x(s,["tunedModelDisplayName"],o);const c=g(e,["description"]);s!==void 0&&c!=null&&x(s,["description"],c);const u=g(e,["epochCount"]);s!==void 0&&u!=null&&x(s,["supervisedTuningSpec","hyperParameters","epochCount"],u);const f=g(e,["learningRateMultiplier"]);s!==void 0&&f!=null&&x(s,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const h=g(e,["adapterSize"]);if(s!==void 0&&h!=null&&x(s,["supervisedTuningSpec","hyperParameters","adapterSize"],h),g(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function sO(n,e){const s={},r=g(e,["baseModel"]);r!=null&&x(s,["baseModel"],r);const i=g(e,["trainingDataset"]);i!=null&&x(s,["supervisedTuningSpec","trainingDatasetUri"],Q6(n,i,s));const o=g(e,["config"]);return o!=null&&x(s,["config"],tO(n,o,s)),s}function nO(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["model"],r);const i=g(e,["name"]);return i!=null&&x(s,["endpoint"],i),s}function bj(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["state"]);i!=null&&x(s,["state"],hj(n,i));const o=g(e,["createTime"]);o!=null&&x(s,["createTime"],o);const c=g(e,["tuningTask","startTime"]);c!=null&&x(s,["startTime"],c);const u=g(e,["tuningTask","completeTime"]);u!=null&&x(s,["endTime"],u);const f=g(e,["updateTime"]);f!=null&&x(s,["updateTime"],f);const h=g(e,["description"]);h!=null&&x(s,["description"],h);const y=g(e,["baseModel"]);y!=null&&x(s,["baseModel"],y);const v=g(e,["_self"]);v!=null&&x(s,["tunedModel"],nO(n,v));const j=g(e,["distillationSpec"]);j!=null&&x(s,["distillationSpec"],j);const E=g(e,["experiment"]);E!=null&&x(s,["experiment"],E);const k=g(e,["labels"]);k!=null&&x(s,["labels"],k);const _=g(e,["pipelineJob"]);_!=null&&x(s,["pipelineJob"],_);const P=g(e,["tunedModelDisplayName"]);return P!=null&&x(s,["tunedModelDisplayName"],P),s}function rO(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const i=g(e,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>bj(n,c))),x(s,["tuningJobs"],o)}return s}function iO(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["metadata"]);i!=null&&x(s,["metadata"],i);const o=g(e,["done"]);o!=null&&x(s,["done"],o);const c=g(e,["error"]);return c!=null&&x(s,["error"],c),s}function aO(n,e){const s={},r=g(e,["model"]);r!=null&&x(s,["model"],r);const i=g(e,["endpoint"]);return i!=null&&x(s,["endpoint"],i),s}function Zm(n,e){const s={},r=g(e,["name"]);r!=null&&x(s,["name"],r);const i=g(e,["state"]);i!=null&&x(s,["state"],hj(n,i));const o=g(e,["createTime"]);o!=null&&x(s,["createTime"],o);const c=g(e,["startTime"]);c!=null&&x(s,["startTime"],c);const u=g(e,["endTime"]);u!=null&&x(s,["endTime"],u);const f=g(e,["updateTime"]);f!=null&&x(s,["updateTime"],f);const h=g(e,["error"]);h!=null&&x(s,["error"],h);const y=g(e,["description"]);y!=null&&x(s,["description"],y);const v=g(e,["baseModel"]);v!=null&&x(s,["baseModel"],v);const j=g(e,["tunedModel"]);j!=null&&x(s,["tunedModel"],aO(n,j));const E=g(e,["supervisedTuningSpec"]);E!=null&&x(s,["supervisedTuningSpec"],E);const k=g(e,["tuningDataStats"]);k!=null&&x(s,["tuningDataStats"],k);const _=g(e,["encryptionSpec"]);_!=null&&x(s,["encryptionSpec"],_);const P=g(e,["partnerModelTuningSpec"]);P!=null&&x(s,["partnerModelTuningSpec"],P);const L=g(e,["distillationSpec"]);L!=null&&x(s,["distillationSpec"],L);const U=g(e,["experiment"]);U!=null&&x(s,["experiment"],U);const F=g(e,["labels"]);F!=null&&x(s,["labels"],F);const J=g(e,["pipelineJob"]);J!=null&&x(s,["pipelineJob"],J);const te=g(e,["tunedModelDisplayName"]);return te!=null&&x(s,["tunedModelDisplayName"],te),s}function oO(n,e){const s={},r=g(e,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const i=g(e,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Zm(n,c))),x(s,["tuningJobs"],o)}return s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lO extends qc{constructor(e){super(),this.apiClient=e,this.get=async s=>await this.getInternal(s),this.list=async(s={})=>new Vp(Mc.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(s),s),this.tune=async s=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(s);{const r=await this.tuneMldevInternal(s);let i="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?i=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(i=r.name.split("/operations/")[0]),{name:i,state:Hm.JOB_STATE_QUEUED}}}}async getInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=Y6(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>Zm(this.apiClient,y))}else{const h=B6(this.apiClient,e);return u=pt("{name}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>bj(this.apiClient,y))}}async listInternal(e){var s,r,i,o;let c,u="",f={};if(this.apiClient.isVertexAI()){const h=X6(this.apiClient,e);return u=pt("tuningJobs",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const v=oO(this.apiClient,y),j=new rv;return Object.assign(j,v),j})}else{const h=W6(this.apiClient,e);return u=pt("tunedModels",h._url),f=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const v=rO(this.apiClient,y),j=new rv;return Object.assign(j,v),j})}}async tuneInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI()){const u=sO(this.apiClient,e);return o=pt("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>Zm(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var s,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=J6(this.apiClient,e);return o=pt("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>iO(this.apiClient,f))}}}const cO=1024*1024*8;async function dO(n,e,s){var r,i;let o=0,c=0,u=new Gm(new Response),f="upload";for(o=n.size;c<o;){const y=Math.min(cO,o-c),v=n.slice(c,c+y);if(c+y>=o&&(f+=", finalize"),u=await s.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(c),"Content-Length":String(y)}}}),c+=y,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r["x-goog-upload-status"])!=="active")break;if(o<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(u==null?void 0:u.json());if(((i=u==null?void 0:u.headers)===null||i===void 0?void 0:i["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function uO(n){return{size:n.size,type:n.type}}class hO{async upload(e,s,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dO(e,s,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fO{create(e,s,r){return new mO(e,s,r)}}class mO{constructor(e,s,r){this.url=e,this.headers=s,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vv="x-goog-api-key";class pO{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(vv)===null&&e.append(vv,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gO="gl-node/";class xO{constructor(e){var s;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=e.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=e.apiKey;const r=_5(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new pO(this.apiKey);this.apiClient=new V6({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:gO+"web",uploader:new hO}),this.models=new N6(this.apiClient),this.live=new x6(this.apiClient,i,new fO),this.chats=new y3(this.models,this.apiClient),this.caches=new m3(this.apiClient),this.files=new A3(this.apiClient),this.operations=new R6(this.apiClient),this.tunings=new lO(this.apiClient)}}const yO={};var bO={};const vO=typeof import.meta<"u"&&yO?"AIzaSyDhB9FyniBmMSJJAP_t_mNq1uILG5rZcQI":void 0,wO=typeof process<"u"?bO.VITE_GEMINI_API_KEY:void 0,Xm=vO||wO||"";typeof window<"u"&&Xm&&console.warn("Warning: Gemini API key is present in the frontend build (VITE_GEMINI_API_KEY). This exposes the key to users. Consider proxying requests through a server or using a server-side function to keep keys secret.");const Wc=()=>Xm?new xO({apiKey:Xm}):(console.warn("API Key is missing. AI features will not work."),null),NO=["Timeless","Elegant","Vintage","Handmade","Artisan","Luxe","Delicate","Statement","Classic","Boho"],jO=["Gold","Silver","Sterling Silver","Resin","Bronze","Copper","Glass","Crystal","Gemstone"],SO=["Art Deco","Vintage","Boho","Minimalist","Retro","Contemporary","Minimal"],$u=n=>n[Math.floor(Math.random()*n.length)],Qm=(n,e)=>{const s=$u(NO),r=$u(SO),i=n?n.replace(/[^a-zA-Z0-9 ]/g,""):"Piece";return`${s} ${r} ${i}`.trim()},wv=n=>{const e=(n||"").toLowerCase(),s=[];return e.includes("ring")&&s.push("Ring"),(e.includes("neck")||e.includes("pendant")||e.includes("choker"))&&s.push("Pendant"),e.includes("ear")&&s.push("Stud"),e.includes("bracelet")&&s.push("Bracelet"),s.length===0&&s.push($u(["Pendant","Ring","Stud","Dangle"])),s.push($u(jO)),Array.from(new Set(s)).slice(0,5)},uc=(n,e,s)=>{const r=s?`Features: ${s}. `:"";return`${n} is a ${e.toLowerCase()} crafted with care. ${r}Perfect for elevating everyday looks or adding a special touch for events. Hand-finished details and quality materials make it a timeless addition to any collection.`},Nv=(n,e)=>{const s=n.split(" ").slice(0,4).map(r=>r.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()).filter(Boolean);return Array.from(new Set([...s,...e.map(r=>r.toLowerCase())])).slice(0,6)},kO=async(n,e,s)=>{const r=Wc();if(!r)return uc(n||Qm(e||""),e||"Jewelry",s);try{return(await r.models.generateContent({model:"gemini-2.5-flash",contents:`Write a compelling, SEO-friendly product description for an e-commerce product.
      
      Product Name: ${n}
      Category: ${e}
      Keywords/Features: ${s}
      
      Tone: Professional, persuasive, and enthusiastic. 
      Keep it under 150 words.`})).text||uc(n,e,s)||"Could not generate description."}catch(i){return console.error("Gemini API Error:",i),uc(n,e,s)}},_O=async(n,e)=>{const s=Wc();if(!s)try{const i=Qm(e),o=wv(e),c=uc(i,e||"Jewelry","Handmade, Unique"),u=Nv(i,o);return{name:i,description:c,whenAndHowToWear:"Perfect for both everyday wear and special occasions. Layer with other pieces for a curated look.",tags:o,seoKeywords:u,colors:[]}}catch(i){return console.error("Local fallback for product metadata failed:",i),null}const r=n.replace(/^data:image\/\w+;base64,/,"");try{const o=(await s.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:r}},{text:`You are a fashion merchandising expert for a specialized jewelry store. Analyze this image of a ${e||"jewelry product"}.
            
            Generate the following JSON object:
            {
              "name": "A short, catchy, premium product name",
              "description": "A short, powerful, attractive description (max 3 sentences) that sells the product emotionally.",
              "whenAndHowToWear": "Short, powerful advice on when and how to wear this item (max 2 sentences).",
              "tags": ["Array", "of", "5", "jewelry-specific", "tags"],
              "seoKeywords": ["Array", "of", "5", "strong", "SEO", "keywords"],
              "colors": ["List", "of", "dominant", "product", "colors"]
            }
            
            CRITICAL INSTRUCTIONS:
            1. **Tags**: STRICTLY JEWELRY ONLY. Allowed: Materials (Gold, Resin, Silver, Gemstone), Types (Ring, Stud, Choker, Pendant), Styles (Art Deco, Vintage, Boho, Minimalist), Techniques (Filigree, Wire Wrap). 
               FORBIDDEN: "Fashion", "Style", "Woman", "Girl", "Cute", "Gift", "Love", "Trend", "Beautiful", "Accessory".
            2. **Colors**: STRICTLY PRODUCT ONLY. Ignore background, skin, or prop colors. If the ring is silver and the stone is red, output ["Silver", "Red"]. Do not output "White" if the background is white.
            
            Return ONLY raw JSON.`}]},config:{responseMimeType:"application/json"}})).text;return o?JSON.parse(o):null}catch(i){console.error("Gemini Image Analysis Error:",i);try{const o=Qm(e),c=wv(e),u=uc(o,e||"Jewelry","Handmade, Unique"),f=Nv(o,c);return{name:o,description:u,whenAndHowToWear:"Perfect for both everyday wear and special occasions. Layer with other pieces for a curated look.",tags:c,seoKeywords:f,colors:[]}}catch(o){return console.error("Local fallback for product metadata failed:",o),null}}},CO=async(n,e)=>{const s=Wc();if(!s)return[];try{const i=(await s.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${e} unique South African product reviews for a jewelry item named "${n}".
      
      CRITICAL INSTRUCTIONS:
      1. **Persona**: Use ONLY Female names.
      2. **Diversity**: Mix names from Zulu, Xhosa, Afrikaans, English, and Coloured backgrounds.
      3. **Locations**: Use specific South African towns (e.g., Paarl, Benoni, Mthatha, Umlazi, George, Soweto, Ballito, Bloemfontein), NOT just "Cape Town" or "JHB".
      4. **Language Mixing**: 
         - Some reviews must mix English with Afrikaans (e.g., "Baie nice", "Lekker", "Te oulik").
         - Some reviews must mix English with Xhosa/Zulu slang (e.g., "Yho", "Shame", "Stunning shem", "Haikona").
         - Keep it natural.
      5. **Realism**: Include occasional spelling mistakes (e.g., "realy", "awsome") and casual grammar.
      6. **Rating**: Randomly between 3.5 and 5.0 stars.
      7. **Content**: Short, punchy comments about quality, delivery, or how it looks.
         - **Price Mentions**: When mentioning price, ALWAYS portray it as cheap and good quality (e.g., "So affordable for such good quality", "Worth every cent").
         - **Delivery/Waiting**: If any negative sentiment about waiting time, turn it positive (e.g., "Waited a bit but worth the wait", "Delivery took time but totally worth it").
      8. **Dates**: Random dates strictly between January 1st, 2025 and today (Format: YYYY-MM-DD). Do NOT generate 2024 dates.

      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return i?JSON.parse(i).map(c=>({...c,id:`rev_ai_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(r){return console.error("Gemini Review Generation Error:",r),[]}},EO=async n=>{const e=Wc();if(!e)return[];try{const r=(await e.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${n} unique South African reviews specifically for "One of a Kind" handmade wire-wrapped pendants.
      
      CRITICAL INSTRUCTIONS:
      1. **Context**: These are unique, single items. The reviews should NOT mention specific colors or stones (like "love the blue stone") because every piece is different.
      2. **Focus**: Focus on the "surprise" element, the uniqueness, the wire-wrapping craftsmanship, the packaging, and the fact that nobody else has this exact piece.
      3. **Persona**: Female names, South African diversity (Zulu, Xhosa, Afrikaans, English).
      4. **Locations**: Specific SA towns.
      5. **Language**: Mix in SA slang (Lekker, Mooi, Pragtig, Yho, Stunning).
      6. **Rating**: 4.0 to 5.0 stars.
      7. **Content**: Short, punchy comments about quality, delivery, or how it looks.
         - **Price Mentions**: When mentioning price, ALWAYS portray it as cheap and good quality (e.g., "So affordable for such good quality", "Worth every cent").
         - **Delivery/Waiting**: If any negative sentiment about waiting time, turn it positive (e.g., "Waited a bit but worth the wait", "Delivery took time but totally worth it").
      8. **Dates**: Random dates between Jan 2025 and now.

      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return r?JSON.parse(r).map(o=>({...o,id:`rev_unique_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(s){return console.error("Gemini Unique Review Generation Error:",s),[]}},TO=async(n,e,s)=>{const r=Wc();if(!r)return`Check out this amazing product: ${n} for R${s}! #SpoilMeVintage #vintage #jewelry`;try{let i=`Write a single social media post for a jewelry product named "${n}". Price: R${s}.`;return e==="Instagram"||e==="TikTok"?i+=' Style: High energy, visually descriptive, lots of emojis, include 10 relevant hashtags. Focus on "Unique", "Handmade", "South Africa". Keep it under 200 characters + hashtags.':e==="Facebook"?i+=' Style: Friendly, community-focused, engaging question at the end. Mention "Spoil Me Vintage". Include link placeholder [Link].':e==="Twitter"||e==="X"?i+=" Style: Short, punchy, urgent. Max 280 characters. Include 3 hashtags.":i+=" Style: Professional yet inviting.",(await r.models.generateContent({model:"gemini-2.5-flash",contents:i})).text||""}catch(i){return console.error("Gemini Social Post Error:",i),`New arrival: ${n} for only R${s}! Get it before it's gone. #SpoilMeVintage`}},PO={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},AO=[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Black",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Silver",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Hypo-Allergic Plastic",modifier:0,description:"Plastic state bends easily"}],jv=["Epoxy Resin","Copper","Aluminium","Sterling Silver","Glass Beads","Beads","Wood","Oxidized"],Sv="spv_base_materials",IO=()=>{var ct,he,ge,Le,kt,dt,gt,Jt,_t;const{products:n,addProduct:e,updateProduct:s,deleteProduct:r,categories:i,packagingPresets:o,materialPresets:c,savePackagingPreset:u,saveMaterialPreset:f,deleteMaterialPreset:h,dbConnectionError:y,login:v,manualWinner:j,setManualWinner:E,isLoading:k}=vt(),[_,P]=S.useState(!1),[L,U]=S.useState(!1),[F,J]=S.useState(!1),[te,H]=S.useState(!1),[M,C]=S.useState(!1),[I,$]=S.useState("general"),[O,V]=S.useState(()=>{try{const R=localStorage.getItem(Sv),ne=R?JSON.parse(R):null,Fe=Array.isArray(ne)?ne.map(_e=>String(_e)).filter(Boolean):[];return Array.from(new Set([...jv,...Fe]))}catch{return jv}}),[A,se]=S.useState("");S.useEffect(()=>{try{localStorage.setItem(Sv,JSON.stringify(O))}catch{}},[O]);const fe=R=>R?R.split(/[,|;]/).map(ne=>ne.trim()).filter(Boolean):[],je=()=>Array.from(new Set(fe(Y.material))),Ie=R=>{const ne=Array.from(new Set(R.map(Fe=>Fe.trim()).filter(Boolean)));Se(Fe=>({...Fe,material:ne.join(", ")}))},le=R=>{const ne=R.trim();if(!ne)return;const Fe=je(),$e=Fe.some(He=>He.toLowerCase()===ne.toLowerCase())?Fe.filter(He=>He.toLowerCase()!==ne.toLowerCase()):[...Fe,ne];Ie($e)},be=()=>{const R=A.trim();R&&(V(ne=>ne.some(_e=>_e.toLowerCase()===R.toLowerCase())?ne:[...ne,R]),se(""),le(R))},[we,Z]=S.useState(null),[ce,W]=S.useState(null),[ue,B]=S.useState(""),[Ce,Pe]=S.useState(""),[Ue,Qe]=S.useState(""),[lt,St]=S.useState(""),[ye,Xe]=S.useState(!1),[nt,Ut]=S.useState(""),oe=S.useRef(null),Me=S.useRef(null),Be=S.useRef(null),ke=R=>({Ring:"Rings",Rings:"Rings",Stud:"Stud Earrings","Stud Earrings":"Stud Earrings",Dangle:"Dangle Earrings","Dangle Earrings":"Dangle Earrings",Pendant:"Pendants",Pendants:"Pendants",Bracelet:"Bracelets",Bracelets:"Bracelets",Watch:"Watches",Watches:"Watches","Jewelry Box":"Jewelry Boxes","Jewelry Boxes":"Jewelry Boxes","Perfume Holder":"Perfume Holders","Perfume Holders":"Perfume Holders",Other:"Other"})[R]||R,We=R=>{const ne=((R==null?void 0:R.type)??"").toString().trim();if(ne)return ne;const Fe=((R==null?void 0:R.productType)??"").toString().trim();if(Fe)return Fe;const _e=((R==null?void 0:R.name)??"").toString().toLowerCase();return _e?_e.includes("perfume")?"Perfume Holder":_e.includes("jewelry box")||_e.includes("jewellery box")?"Jewelry Box":_e.includes("watch")?"Watch":_e.includes("bracelet")?"Bracelet":_e.includes("pendant")||_e.includes("necklace")?"Pendant":_e.includes("ring")?"Ring":_e.includes("dangle")?"Dangle":_e.includes("stud")?"Stud":"Other":"Other"},Nt=R=>({general:"General",pricing:"Pricing",media:"Media",inventory:"Inventory",marketing:"Marketing",reviews:"Reviews",promotions:"Promotions",gifts:"Gifts"})[R]||R,ve={id:"",code:"",name:"",slug:"",description:"",whenAndHowToWear:"",price:0,priceUSD:0,compareAtPrice:0,compareAtPriceUSD:0,memberPrice:0,memberPriceUSD:0,costPrice:0,shippingCost:0,packaging:[],backOfficeLink:"",madeBy:"Spoil Me Vintage",category:((ct=i[0])==null?void 0:ct.name)||"",type:"Stud",status:"draft",images:[""],stock:0,soldCount:0,tags:[],seoKeywords:[],colors:[],isNewArrival:!1,isBestSeller:!1,isFeaturedRing:!1,isFeaturedBracelet:!1,isFeaturedWatch:!1,isUniquePendant:!1,isFeaturedStud:!1,isFeaturedDangle:!1,isFeaturedJewelryBox:!1,isFeaturedPerfumeHolder:!1,isJewelrySet:!1,createdAt:new Date().toISOString(),ringStock:{5:0,6:0,7:0,8:0,9:0,10:0,11:0},earringMaterials:[],showEarringOptions:!1,pendantChainLengths:{},pendantWireWrapped:!1,chainStyles:[],material:"",reviews:[],giftProductId:"",giftValue:0,promoPrice:0,promoStartsAt:"",promoExpiresAt:"",promoBasicMemberPrice:0,promoPremiumMemberPrice:0,promoDeluxeMemberPrice:0,isSoldOut:!1},[Y,Se]=S.useState(ve),[jt,mt]=S.useState(""),[Wt,$t]=S.useState(""),[ks,ds]=S.useState(""),[De,ps]=S.useState(0),[us,Ws]=S.useState(""),[fr,Os]=S.useState(""),[Ls,Dn]=S.useState(5),On=[...AO,...c];Ha.useEffect(()=>{Se(R=>({...R,memberPrice:parseFloat((R.price*.8).toFixed(2)),memberPriceUSD:parseFloat((R.priceUSD*.8).toFixed(2))}))},[Y.price,Y.priceUSD]);const gs=()=>{var R;Se({...ve,id:`SPV-${Date.now()}`,createdAt:new Date().toISOString(),category:((R=i[0])==null?void 0:R.name)||""}),P(!0),$("general"),Os("")},zs=R=>{const ne={...ve,...R,compareAtPrice:R.compareAtPrice||0,compareAtPriceUSD:R.compareAtPriceUSD||0,priceUSD:R.priceUSD||0,memberPrice:R.price?parseFloat((R.price*.8).toFixed(2)):R.memberPrice||0,memberPriceUSD:R.priceUSD?parseFloat((R.priceUSD*.8).toFixed(2)):R.memberPriceUSD||0,costPrice:R.costPrice||0,shippingCost:R.shippingCost||0,soldCount:R.soldCount||0,packaging:R.packaging||[],ringStock:R.ringStock||ve.ringStock,pendantChainLengths:R.pendantChainLengths||{},showEarringOptions:R.showEarringOptions??!1,chainStyles:R.chainStyles||[],reviews:R.reviews||[],giftProductId:R.giftProductId||"",giftValue:R.giftValue||0,promoPrice:R.promoPrice||0,promoStartsAt:R.promoStartsAt||"",promoExpiresAt:R.promoExpiresAt||"",promoBasicMemberPrice:R.promoBasicMemberPrice||0,promoPremiumMemberPrice:R.promoPremiumMemberPrice||0,promoDeluxeMemberPrice:R.promoDeluxeMemberPrice||0,tags:R.tags||[],seoKeywords:R.seoKeywords||[],colors:R.colors||[],isFeaturedJewelryBox:R.isFeaturedJewelryBox||!1,isFeaturedPerfumeHolder:R.isFeaturedPerfumeHolder||!1};Se(ne),P(!0),$("general"),Os("")},Vt=async()=>{if(!Y.name||!Y.price){alert("Name and Price are required");return}U(!0);try{let R=[];const ne=Y.images.map(async($e,He)=>{var xt;if(typeof $e=="string"&&$e.startsWith("data:"))try{const Yt=await(await fetch($e)).blob(),gr=((xt=Yt.type.split("/"))==null?void 0:xt[1])||"jpg",Jr=`products/${Y.id}/img_${Date.now()}_${He}.${gr}`;try{return await up("products",Jr,Yt)||""}catch(Ni){return console.warn("Supabase upload failed, falling back to base64:",Ni),$e}}catch(Yt){return console.error("Failed to process base64 image:",Yt),""}return $e});R=(await Promise.all(ne)).filter($e=>$e&&$e.trim()!=="");const _e={...Y,images:R,price:Number(Y.price),priceUSD:Number(Y.priceUSD),stock:Number(Y.stock),soldCount:Number(Y.soldCount),compareAtPrice:Number(Y.compareAtPrice||0),memberPrice:Number(Y.memberPrice||0),memberPriceUSD:Number(Y.memberPriceUSD||0),costPrice:Number(Y.costPrice||0),shippingCost:Number(Y.shippingCost||0),giftValue:Number(Y.giftValue||0),promoPrice:Number(Y.promoPrice||0),promoBasicMemberPrice:Number(Y.promoBasicMemberPrice||0),promoPremiumMemberPrice:Number(Y.promoPremiumMemberPrice||0),promoDeluxeMemberPrice:Number(Y.promoDeluxeMemberPrice||0)};_e.type==="Ring"&&_e.ringStock&&(_e.stock=Object.values(_e.ringStock).reduce(($e,He)=>$e+He,0)),n.some($e=>$e.id===_e.id)?await s(_e):await e(_e),P(!1)}catch(R){console.error("Failed to save product:",R),alert("Failed to save product. Please check console.")}finally{U(!1)}},_s=async R=>{if(window.confirm("Are you sure?"))try{await r(R)}catch{alert("Failed to delete product.")}},ss=async()=>{if(!Y.name||!Y.category){alert("Please enter a name and category first.");return}J(!0);const R=await kO(Y.name,Y.category,"Handmade, Unique, Vintage");Se(ne=>({...ne,description:R})),J(!1)},Ne=async R=>{var _e;const ne=(_e=R.target.files)==null?void 0:_e[0];if(!ne)return;H(!0);const Fe=new FileReader;Fe.onloadend=async()=>{const $e=Fe.result,He=[$e,...Y.images.filter(Yt=>Yt!=="")];Se(Yt=>({...Yt,images:He})),console.log("AdminProducts: Added base64 image for analysis (preview length):",$e.slice(0,80));const xt=await _O($e,Y.category);xt&&Se(Yt=>({...Yt,name:xt.name,description:xt.description,whenAndHowToWear:xt.whenAndHowToWear,tags:[...new Set([...Yt.tags,...xt.tags])],seoKeywords:[...new Set([...Yt.seoKeywords||[],...xt.seoKeywords])],colors:[...new Set([...Yt.colors||[],...xt.colors])],slug:xt.name.toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-")})),H(!1)},Fe.readAsDataURL(ne)},Je=async R=>{const ne=R.target.files;if(!ne||ne.length===0)return;const Fe=Array.from(ne).map($e=>new Promise(He=>{const xt=new FileReader;xt.onloadend=()=>He(xt.result),xt.readAsDataURL($e)})),_e=await Promise.all(Fe);Se($e=>({...$e,images:[...$e.images.filter(He=>He.trim()!==""),..._e]})),R.target.value=""},Et=async()=>{if(!Y.name){alert("Please enter a product name first.");return}C(!0);const R=await CO(Y.name,Ls);R.length>0&&Se(ne=>({...ne,reviews:[...ne.reviews||[],...R]})),C(!1)},Tt=async()=>{C(!0);const R=await EO(25);R.length>0&&Se(ne=>({...ne,reviews:[...ne.reviews||[],...R]})),C(!1)},Rt=()=>{const R=Math.floor(1e5+Math.random()*9e5);Se(ne=>({...ne,code:`SPV-${R}`}))},Ot=()=>{if(!Y.name)return;const R=Y.name.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");Se(ne=>({...ne,slug:R}))},zt=R=>{Se(ne=>{var Fe;return{...ne,reviews:(Fe=ne.reviews)==null?void 0:Fe.filter(_e=>_e.id!==R)}})},Bt=(R,ne,Fe)=>{if(!ne.trim())return;const _e=ne.split(",").map($e=>$e.trim()).filter($e=>$e.length>0);Se($e=>({...$e,[R]:Array.from(new Set([...$e[R]||[],..._e]))})),Fe("")},Yn=(R,ne)=>{Se(Fe=>{var _e;return{...Fe,[R]:(_e=Fe[R])==null?void 0:_e.filter(($e,He)=>He!==ne)}})},un=R=>{const ne=Y.images.filter((Fe,_e)=>_e!==R);ne.length===0&&ne.push(""),Se({...Y,images:ne})},hn=R=>{Z(R.id),W({userName:R.userName,location:R.location,content:R.content,rating:R.rating,date:R.date||new Date().toLocaleDateString()})},mr=()=>{!we||!ce||(Se(R=>{var ne;return{...R,reviews:(ne=R.reviews)==null?void 0:ne.map(Fe=>Fe.id===we?{...Fe,...ce}:Fe)}}),Z(null),W(null))},Us=(R,ne,Fe)=>{var _e;(_e=Y.earringMaterials)!=null&&_e.some($e=>$e.name===R)||Se($e=>({...$e,earringMaterials:[...$e.earringMaterials||[],{name:R,modifier:ne,description:Fe}]}))},vi=R=>{const ne=[...Y.earringMaterials||[]];ne.splice(R,1),Se({...Y,earringMaterials:ne})},Wr=R=>{ks&&(Us(ks,De,us),R&&(f({name:ks,modifier:De,description:us}),alert("Material saved to presets!")),ds(""),ps(0),Ws(""))},Hr=(R,ne)=>{R.stopPropagation(),window.confirm(`Remove "${ne}" from presets?`)&&h(ne)},en=()=>{(Y.packaging||[]).length>=3||Se({...Y,packaging:[...Y.packaging||[],{id:`pack_${Date.now()}`,name:"",bulkCost:0,bulkQuantity:1,unitCost:0}]})},Gr=R=>{if(!R)return;const ne=o.find(Fe=>Fe.name===R);ne&&(Y.packaging||[]).length<3&&Se({...Y,packaging:[...Y.packaging||[],{...ne,id:`pack_${Date.now()}`}]})},wi=R=>{var Fe;const ne=(Fe=Y.packaging)==null?void 0:Fe[R];ne&&ne.name&&(u(ne),alert(`Saved "${ne.name}" to packaging presets!`))},pr=(R,ne,Fe)=>{const _e=[...Y.packaging||[]],$e={..._e[R],[ne]:Fe};if(ne==="bulkCost"||ne==="bulkQuantity"){const He=ne==="bulkCost"?parseFloat(Fe):$e.bulkCost,xt=ne==="bulkQuantity"?parseFloat(Fe):$e.bulkQuantity;$e.unitCost=xt>0?He/xt:0}_e[R]=$e,Se({...Y,packaging:_e})},Kr=R=>{const ne=[...Y.packaging||[]];ne.splice(R,1),Se({...Y,packaging:ne})},Ln=((he=Y.packaging)==null?void 0:he.reduce((R,ne)=>R+ne.unitCost,0))||0,G=(Y.costPrice||0)+(Y.shippingCost||0)+Ln,K=Y.price-G,X=(Y.memberPrice||0)-G,re=Array.from(new Set(n.map(R=>R.category).filter(Boolean))),xe=Array.from(new Set(n.map(R=>We(R)).filter(Boolean))),Ke=n.filter(R=>{var Fe;const ne=ue.toLowerCase();return(R.name.toLowerCase().includes(ne)||R.code.toLowerCase().includes(ne))&&(Ce?We(R)===Ce:!0)&&(Ue?R.category===Ue:!0)&&(lt?(Fe=R.colors)==null?void 0:Fe.includes(lt):!0)&&(ye?R.promoPrice&&R.promoPrice>0:!0)&&(nt?R.status===nt:!0)});return console.log("AdminProducts Debug:",{isLoading:k,productsCount:n.length,filteredProductsCount:Ke.length,dbConnectionError:y,firstProduct:n[0]?{id:n[0].id,name:n[0].name,images:n[0].images}:null}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Product Management"}),!_&&t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("button",{onClick:gs,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 shadow-lg transition-colors text-sm",children:[t.jsx(rn,{size:18})," Add Product"]})})]}),y&&t.jsxs("div",{className:"bg-yellow-900/20 border-l-4 border-yellow-500 text-yellow-300 p-3 rounded mb-4",children:[t.jsx("div",{className:"font-bold",children:"Supabase Warning"}),t.jsx("div",{className:"text-xs mt-1",children:y}),t.jsx("div",{className:"text-xs mt-1",children:"Changes may be saved locally only. Fix Supabase auth/permissions to persist remotely."})]}),!_&&t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[t.jsx(fa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsx("input",{type:"text",placeholder:"Search by Name or SKU...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:ue,onChange:R=>B(R.target.value)})]}),t.jsxs("div",{className:"relative",children:[t.jsx(lc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:Ce,onChange:R=>Pe(R.target.value),children:[t.jsx("option",{value:"",children:"All Types"}),xe.map(R=>t.jsx("option",{value:R,children:ke(R)},R))]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(NI,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:Ue,onChange:R=>Qe(R.target.value),children:[t.jsx("option",{value:"",children:"All Collections"}),re.map(R=>t.jsx("option",{value:R,children:R},R))]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(lc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:lt,onChange:R=>St(R.target.value),children:[t.jsx("option",{value:"",children:"All Colors"}),Array.from(new Set(n.flatMap(R=>R.colors||[]))).map(R=>t.jsx("option",{value:R,children:R},R))]})]}),t.jsxs("button",{onClick:()=>Xe(!ye),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all flex items-center gap-2 ${ye?"bg-green-900/30 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-400 hover:bg-zinc-800"}`,children:[t.jsx(dc,{size:16})," ",ye?"Promotions Active":"Show Promotions"]}),t.jsxs("div",{className:"relative",children:[t.jsx(lc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:nt,onChange:R=>Ut(R.target.value),children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"draft",children:"Draft"}),t.jsx("option",{value:"published",children:"Published"})]})]}),(ue||Ce||Ue||lt||ye||nt)&&t.jsx("button",{onClick:()=>{B(""),Pe(""),Qe(""),St(""),Xe(!1),Ut("")},className:"px-3 py-2 text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Reset Filters"})]}),_?t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:[t.jsx("div",{className:"flex border-b border-gray-800 bg-zinc-950/50 overflow-x-auto no-scrollbar",children:["general","pricing","media","inventory","marketing","reviews","promotions","gifts"].map(R=>t.jsx("button",{onClick:()=>$(R),className:`px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${I===R?"text-pink-500 border-b-2 border-pink-500 bg-pink-500/5":"text-gray-400 hover:text-white"}`,children:Nt(R)},R))}),t.jsxs("div",{className:"p-6",children:[I==="general"&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Name *"}),t.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm focus:border-pink-500",value:Y.name,onChange:R=>Se({...Y,name:R.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"URL Slug"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Y.slug,onChange:R=>Se({...Y,slug:R.target.value}),placeholder:"product-name-url"}),t.jsx("button",{onClick:Ot,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:t.jsx(Tc,{size:16})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"SKU / Code"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Y.code,onChange:R=>Se({...Y,code:R.target.value}),placeholder:"SPV-001"}),t.jsx("button",{onClick:Rt,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:t.jsx(Tc,{size:16})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Status"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Y.status,onChange:R=>Se({...Y,status:R.target.value}),children:[t.jsx("option",{value:"draft",children:"Draft"}),t.jsx("option",{value:"published",children:"Published"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Y.category,onChange:R=>Se({...Y,category:R.target.value}),children:[t.jsx("option",{value:"",children:"Select Category"}),i.map(R=>t.jsx("option",{value:R.name,children:R.name},R.id))]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Type"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Y.type,onChange:R=>Se({...Y,type:R.target.value}),children:[t.jsx("option",{value:"Ring",children:"Rings"}),t.jsx("option",{value:"Stud",children:"Stud Earrings"}),t.jsx("option",{value:"Dangle",children:"Dangle Earrings"}),t.jsx("option",{value:"Pendant",children:"Pendants"}),t.jsx("option",{value:"Bracelet",children:"Bracelets"}),t.jsx("option",{value:"Watch",children:"Watches"}),t.jsx("option",{value:"Jewelry Box",children:"Jewelry Boxes"}),t.jsx("option",{value:"Perfume Holder",children:"Perfume Holders"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Made By"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Y.madeBy,onChange:R=>Se({...Y,madeBy:R.target.value}),children:[t.jsx("option",{value:"Spoil Me Vintage",children:"Spoil Me Vintage (Handmade)"}),t.jsx("option",{value:"Outsourced",children:"Outsourced"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Base Material"}),t.jsxs("div",{className:"bg-black/40 border border-gray-800 rounded-lg p-3",children:[t.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(R=>{const ne=je().some(Fe=>Fe.toLowerCase()===R.toLowerCase());return t.jsx("button",{type:"button",onClick:()=>le(R),className:ne?"px-3 py-1.5 rounded-full text-xs font-bold border bg-cyan-600/20 border-cyan-500 text-cyan-200":"px-3 py-1.5 rounded-full text-xs font-medium border bg-zinc-900 border-gray-700 text-gray-300 hover:text-white hover:border-gray-500",title:ne?"Remove":"Add",children:t.jsxs("span",{className:"inline-flex items-center gap-1",children:[ne&&t.jsx(ut,{size:14}),R]})},R)})}),t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:A,onChange:R=>se(R.target.value),placeholder:"Add new material (saved)",onKeyDown:R=>{R.key==="Enter"&&(R.preventDefault(),be())}}),t.jsx("button",{type:"button",onClick:be,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-200 hover:text-white hover:bg-zinc-700 transition-colors",children:"Save"})]}),t.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Selected: ",je().length?je().join(", "):"None"]})]})]})]})]}),I==="pricing"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[t.jsx(ts,{size:18,className:"text-green-400"})," South African Rand (ZAR)"]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (R) *"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-green-400",value:Y.price,onChange:R=>Se({...Y,price:parseFloat(R.target.value)||0})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Se({...Y,priceUSD:parseFloat((Y.price/29).toFixed(2))}),className:"flex-1 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded-lg",children:"Convert to USD"}),t.jsx("button",{onClick:()=>Se({...Y,priceUSD:0}),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold rounded-lg",children:"Reset USD"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Member Price (R)"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-purple-400",value:Y.memberPrice||"",readOnly:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (R)"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Y.compareAtPrice||"",onChange:R=>Se({...Y,compareAtPrice:parseFloat(R.target.value)||0})})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[t.jsx(ts,{size:18,className:"text-yellow-400"})," United States Dollar (USD)"]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (USD) *"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-yellow-400",value:Y.priceUSD,onChange:R=>Se({...Y,priceUSD:parseFloat(R.target.value)||0})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Se({...Y,price:parseFloat((Y.priceUSD*29).toFixed(2))}),className:"flex-1 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded-lg",children:"Convert to R"}),t.jsx("button",{onClick:()=>Se({...Y,price:0}),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold rounded-lg",children:"Reset R"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Member Price (USD)"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-purple-400",value:Y.memberPriceUSD||"",readOnly:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (USD)"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Y.compareAtPriceUSD||"",onChange:R=>Se({...Y,compareAtPriceUSD:parseFloat(R.target.value)||0})})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 shadow-lg",children:[t.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 mb-4",children:[t.jsx(fI,{size:18,className:"text-cyan-400"})," Profit & Margins"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[t.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-red-900/30",children:[t.jsx("span",{className:"text-gray-400 block mb-1",children:"Total Unit Cost"}),t.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["R",G.toFixed(2)]}),t.jsxs("div",{className:"text-xs text-gray-500 mt-2 space-y-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Product:"})," ",t.jsxs("span",{children:["R",(Y.costPrice||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Shipping:"})," ",t.jsxs("span",{children:["R",(Y.shippingCost||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Packaging:"})," ",t.jsxs("span",{children:["R",Ln.toFixed(2)]})]})]})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-green-900/30",children:[t.jsx("span",{className:"text-gray-400 block mb-1",children:"Retail Profit"}),t.jsxs("div",{className:`text-2xl font-bold ${K>0?"text-green-400":"text-red-500"}`,children:["R",K.toFixed(2)]})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-purple-900/30",children:[t.jsx("span",{className:"text-gray-400 block mb-1",children:"Member Profit"}),t.jsxs("div",{className:`text-2xl font-bold ${X>0?"text-purple-400":"text-red-500"}`,children:["R",X.toFixed(2)]})]})]})]}),t.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[t.jsx(to,{size:16,className:"text-pink-500"})," Packaging Breakdown"]}),t.jsxs("select",{className:"bg-zinc-800 text-xs text-gray-300 border border-gray-700 rounded px-2 py-1",onChange:R=>Gr(R.target.value),value:"",children:[t.jsx("option",{value:"",children:"Load Preset..."}),o.map((R,ne)=>t.jsxs("option",{value:R.name,children:[R.name," (R",R.unitCost.toFixed(2),")"]},ne))]})]}),(((ge=Y.packaging)==null?void 0:ge.length)||0)<3&&t.jsxs("button",{onClick:en,className:"text-xs flex items-center gap-1 text-cyan-400 hover:text-cyan-300",children:[t.jsx(rn,{size:12})," Add Item"]})]}),t.jsx("div",{className:"space-y-3",children:(Le=Y.packaging)==null?void 0:Le.map((R,ne)=>t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end bg-zinc-900 p-3 rounded border border-gray-800",children:[t.jsxs("div",{className:"md:col-span-3",children:[t.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Item Name"}),t.jsx("input",{type:"text",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:R.name,onChange:Fe=>pr(ne,"name",Fe.target.value)})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Cost (R)"}),t.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:R.bulkCost,onChange:Fe=>pr(ne,"bulkCost",parseFloat(Fe.target.value)||0)})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Qty"}),t.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:R.bulkQuantity,onChange:Fe=>pr(ne,"bulkQuantity",parseFloat(Fe.target.value)||0)})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Unit Cost"}),t.jsxs("div",{className:"w-full p-1.5 bg-zinc-800 border border-gray-700 rounded text-xs text-red-300 font-mono",children:["R",R.unitCost.toFixed(2)]})]}),t.jsxs("div",{className:"md:col-span-3 flex justify-end pb-1 gap-2",children:[t.jsx("button",{onClick:()=>wi(ne),className:"text-blue-400 hover:text-blue-300 bg-blue-900/20 p-1 rounded hover:bg-blue-900/40 transition-colors",title:"Save as Preset",children:t.jsx(cc,{size:16})}),t.jsx("button",{onClick:()=>Kr(ne),className:"text-gray-600 hover:text-red-400 p-1",children:t.jsx(Lr,{size:16})})]})]},ne))})]})]}),I==="inventory"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Current Stock"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Y.stock,onChange:R=>Se({...Y,stock:parseInt(R.target.value)||0})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sold Count"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Y.soldCount,onChange:R=>Se({...Y,soldCount:parseInt(R.target.value)||0})})]}),t.jsxs("div",{className:"col-span-3",children:[t.jsxs("label",{className:"inline-flex items-center gap-2 mt-2",children:[t.jsx("input",{type:"checkbox",checked:!!Y.isSoldOut,onChange:R=>{const ne=R.target.checked;Se(Fe=>({...Fe,isSoldOut:ne,stock:ne?0:Fe.stock}))},className:"form-checkbox h-4 w-4 text-red-600 bg-black border-gray-600"}),t.jsx("span",{className:"text-sm text-white font-bold",children:'Mark as "Sorry Just SOLD out!" (Persistent)'})]}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'When checked, this product will display a "Sorry Just SOLD out!" badge to customers regardless of stock. Only uncheck to make it available again.'})]})]}),Y.type==="Ring"&&t.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[t.jsx("h3",{className:"text-sm font-bold text-white mb-3",children:"Ring Sizes"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.keys(ve.ringStock||{}).map(R=>{var ne;return t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:["Size ",R]}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded text-white text-sm",value:((ne=Y.ringStock)==null?void 0:ne[R])||0,onChange:Fe=>Se({...Y,ringStock:{...Y.ringStock,[R]:parseInt(Fe.target.value)||0}})})]},R)})})]}),(Y.type==="Stud"||Y.type==="Dangle")&&t.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("input",{type:"checkbox",id:"showEarringOptions",checked:Y.showEarringOptions,onChange:R=>Se({...Y,showEarringOptions:R.target.checked}),className:"rounded bg-black border-gray-600 text-pink-600 focus:ring-pink-500"}),t.jsx("label",{htmlFor:"showEarringOptions",className:"text-sm font-bold text-white",children:"Enable Material Customization"})]}),Y.showEarringOptions&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex gap-2 flex-wrap",children:On.map(R=>t.jsxs("div",{className:"group relative inline-flex",children:[t.jsxs("button",{onClick:()=>Us(R.name,R.modifier,R.description),className:"text-xs bg-gray-800 hover:bg-gray-700 text-gray-300 px-2 py-1 rounded border border-gray-600",children:["+ ",R.name]}),c.some(ne=>ne.name===R.name)&&t.jsx("button",{onClick:ne=>Hr(ne,R.name),className:"absolute -top-1.5 -right-1.5 bg-red-600 text-white rounded-full p-0.5 w-3 h-3 flex items-center justify-center text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:"X"})]},R.name))}),t.jsx("div",{className:"space-y-2",children:(kt=Y.earringMaterials)==null?void 0:kt.map((R,ne)=>t.jsxs("div",{className:"flex items-center gap-2 bg-black p-2 rounded border border-gray-800",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-white",children:R.name}),t.jsxs("span",{className:"text-xs text-pink-400",children:["+R",R.modifier]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:R.description})]}),t.jsx("button",{onClick:()=>vi(ne),className:"text-gray-600 hover:text-red-400",children:t.jsx(Lr,{size:14})})]},ne))}),t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end pt-2 border-t border-gray-700",children:[t.jsx("div",{className:"col-span-3",children:t.jsx("input",{type:"text",placeholder:"Custom Material",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:ks,onChange:R=>ds(R.target.value)})}),t.jsx("div",{className:"col-span-2",children:t.jsx("input",{type:"number",placeholder:"Price Mod",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:De,onChange:R=>ps(parseFloat(R.target.value)||0)})}),t.jsx("div",{className:"col-span-4",children:t.jsx("input",{type:"text",placeholder:"Description",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:us,onChange:R=>Ws(R.target.value)})}),t.jsxs("div",{className:"col-span-3 flex gap-1",children:[t.jsx("button",{onClick:()=>Wr(!1),className:"flex-1 p-1.5 bg-pink-600 text-white rounded text-xs flex items-center justify-center",title:"Add to Product",children:t.jsx(rn,{size:14})}),t.jsx("button",{onClick:()=>Wr(!0),className:"flex-1 p-1.5 bg-cyan-600 text-white rounded text-xs flex items-center justify-center",title:"Add & Save Preset",children:t.jsx(cc,{size:14})})]})]})]})]}),Y.type==="Pendant"&&t.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Chain Styles"}),t.jsx("div",{className:"flex gap-2",children:["Metal Chain","Leather Cord","Ribbon"].map(R=>{var ne;return t.jsx("button",{onClick:()=>{var $e,He;const _e=(($e=Y.chainStyles)==null?void 0:$e.includes(R))?(He=Y.chainStyles)==null?void 0:He.filter(xt=>xt!==R):[...Y.chainStyles||[],R];Se({...Y,chainStyles:_e})},className:`px-3 py-1 rounded text-xs border ${(ne=Y.chainStyles)!=null&&ne.includes(R)?"bg-cyan-900/50 border-cyan-500 text-cyan-400":"bg-black border-gray-700 text-gray-400"}`,children:R},R)})})]}),((dt=Y.chainStyles)==null?void 0:dt.includes("Metal Chain"))&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Available Lengths"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(PO).map(R=>{var ne,Fe;return t.jsxs("div",{onClick:()=>{const _e=Y.pendantChainLengths||{};Se({...Y,pendantChainLengths:{..._e,[R]:!_e[R]}})},className:`p-2 rounded border cursor-pointer text-xs flex items-center justify-between ${(ne=Y.pendantChainLengths)!=null&&ne[R]?"bg-green-900/20 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-500"}`,children:[t.jsx("span",{children:R}),((Fe=Y.pendantChainLengths)==null?void 0:Fe[R])&&t.jsx(ut,{size:12})]},R)})})]})]})]}),I==="marketing"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[t.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[t.jsx(dc,{size:18,className:"text-cyan-400"})," Product Visibility & Features"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${Y.isNewArrival?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[t.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${Y.isNewArrival?"bg-cyan-500 border-cyan-500":"border-gray-600"}`,children:Y.isNewArrival&&t.jsx(ut,{size:14,className:"text-black"})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:Y.isNewArrival,onChange:R=>Se({...Y,isNewArrival:R.target.checked})}),t.jsx("span",{className:"text-sm font-bold text-white",children:"New Arrival"})]}),t.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${Y.isBestSeller?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[t.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${Y.isBestSeller?"bg-yellow-500 border-yellow-500":"border-gray-600"}`,children:Y.isBestSeller&&t.jsx(ut,{size:14,className:"text-black"})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:Y.isBestSeller,onChange:R=>Se({...Y,isBestSeller:R.target.checked})}),t.jsx("span",{className:"text-sm font-bold text-white",children:"Best Seller"})]}),t.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${Y.isJewelrySet?"bg-purple-900/20 border-purple-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[t.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${Y.isJewelrySet?"bg-purple-500 border-purple-500":"border-gray-600"}`,children:Y.isJewelrySet&&t.jsx(ut,{size:14,className:"text-white"})}),t.jsx("input",{type:"checkbox",className:"hidden",checked:Y.isJewelrySet,onChange:R=>Se({...Y,isJewelrySet:R.target.checked})}),t.jsx("span",{className:"text-sm font-bold text-white",children:"Jewelry Set"})]})]}),t.jsx("h4",{className:"text-sm text-gray-400 font-bold mt-6 mb-3 uppercase tracking-wider",children:"Category Features"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:Y.isFeaturedRing,onChange:R=>Se({...Y,isFeaturedRing:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Ring"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:Y.isFeaturedBracelet,onChange:R=>Se({...Y,isFeaturedBracelet:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Bracelet"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:Y.isUniquePendant,onChange:R=>Se({...Y,isUniquePendant:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Unique Pendant"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:Y.isFeaturedStud,onChange:R=>Se({...Y,isFeaturedStud:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Studs"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:Y.isFeaturedDangle,onChange:R=>Se({...Y,isFeaturedDangle:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Dangles"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:Y.isFeaturedWatch,onChange:R=>Se({...Y,isFeaturedWatch:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Watch"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:Y.isFeaturedJewelryBox,onChange:R=>Se({...Y,isFeaturedJewelryBox:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Jewelry Box"})]}),t.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:Y.isFeaturedPerfumeHolder,onChange:R=>Se({...Y,isFeaturedPerfumeHolder:R.target.checked})}),t.jsx("span",{className:"text-xs text-white",children:"Featured Perfume Holder"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Tags & SEO"}),t.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:Y.tags.map((R,ne)=>t.jsxs("span",{className:"bg-gray-800 text-gray-300 text-xs px-2 py-1 rounded flex items-center gap-1",children:[R,t.jsx(cs,{size:12,className:"cursor-pointer",onClick:()=>Yn("tags",ne)})]},ne))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:jt,onChange:R=>mt(R.target.value),onKeyDown:R=>R.key==="Enter"&&Bt("tags",jt,mt),placeholder:"Add tag..."}),t.jsx("button",{onClick:()=>Bt("tags",jt,mt),className:"bg-gray-800 p-2 rounded text-white",children:t.jsx(rn,{size:18})})]})]})]}),I==="reviews"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsxs("div",{className:"flex gap-4 flex-wrap",children:[t.jsxs("div",{className:"flex-1 bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-500/30 p-5 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3 text-cyan-400 font-bold text-lg",children:[t.jsx(eb,{size:24}),t.jsx("h3",{children:"AI South African Reviewer"})]}),t.jsxs("button",{onClick:Et,disabled:M,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[M?t.jsx(Dr,{className:"animate-spin",size:18}):t.jsx(ys,{size:18})," Generate Standard Reviews"]})]}),(Y.isUniquePendant||Y.type==="Pendant")&&t.jsxs("div",{className:"flex-1 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/30 p-5 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3 text-purple-400 font-bold text-lg",children:[t.jsx(bI,{size:24}),t.jsx("h3",{children:"Unique Piece Reviewer"})]}),t.jsxs("button",{onClick:Tt,disabled:M,className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[M?t.jsx(Dr,{className:"animate-spin",size:18}):t.jsx(ys,{size:18})," Generate Unique Reviews"]})]})]}),t.jsx("div",{className:"space-y-3",children:(gt=Y.reviews)==null?void 0:gt.map(R=>t.jsx("div",{className:"bg-black p-3 rounded border border-gray-800",children:we===R.id&&ce?t.jsxs("div",{className:"space-y-3 animate-in fade-in",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:ce.userName,onChange:ne=>W({...ce,userName:ne.target.value}),placeholder:"Name"}),t.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:ce.location,onChange:ne=>W({...ce,location:ne.target.value}),placeholder:"Location"}),t.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white col-span-2",value:ce.date,onChange:ne=>W({...ce,date:ne.target.value}),placeholder:"Date (YYYY-MM-DD or Text)"})]}),t.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(ne=>t.jsx(Rn,{size:16,className:"cursor-pointer",fill:ne<=ce.rating?"orange":"none",stroke:ne<=ce.rating?"orange":"gray",onClick:()=>W({...ce,rating:ne})},ne))}),t.jsx("textarea",{className:"w-full bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",rows:3,value:ce.content,onChange:ne=>W({...ce,content:ne.target.value})}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>Z(null),className:"px-3 py-1 bg-zinc-800 text-white text-xs rounded hover:bg-zinc-700",children:"Cancel"}),t.jsx("button",{onClick:mr,className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-500",children:"Save"})]})]}):t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-300",children:[R.userName," ",t.jsxs("span",{className:"text-gray-600 font-normal",children:["from ",R.location]}),t.jsx("span",{className:"text-gray-500 font-normal ml-2",children:R.date})]}),t.jsx("div",{className:"flex text-yellow-400 gap-0.5 my-1",children:[1,2,3,4,5].map(ne=>t.jsx(Rn,{size:10,fill:ne<=R.rating?"currentColor":"none"},ne))}),t.jsxs("p",{className:"text-xs text-gray-400 italic",children:['"',R.content,'"']})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>hn(R),className:"p-2 text-gray-400 hover:text-cyan-400",children:t.jsx(Vm,{size:16})}),t.jsx("button",{onClick:()=>zt(R.id),className:"p-2 text-gray-400 hover:text-red-400",children:t.jsx(Lr,{size:16})})]})]})},R.id))})]}),I==="promotions"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[t.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(hr,{className:"text-green-400"}),t.jsx("div",{children:t.jsx("h3",{className:"text-lg font-bold text-white",children:"Retail Base Price"})})]}),t.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["R",Y.price.toFixed(2)]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.jsx("div",{className:"space-y-8",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-4",children:[t.jsx(dc,{size:18,className:"text-cyan-400"})," Non-Member Promo"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Promotional Price (R)"}),t.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:Y.promoPrice||"",onChange:R=>Se({...Y,promoPrice:parseFloat(R.target.value)||0})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Discount (%)"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white",value:((Y.price-(Y.promoPrice||0))/Y.price*100).toFixed(0),readOnly:!0}),t.jsx(WN,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[t.jsx(ur,{size:12})," Start"]}),t.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((Jt=Y.promoStartsAt)==null?void 0:Jt.slice(0,16))||"",onChange:R=>Se({...Y,promoStartsAt:R.target.value})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[t.jsx(ur,{size:12})," End"]}),t.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((_t=Y.promoExpiresAt)==null?void 0:_t.slice(0,16))||"",onChange:R=>Se({...Y,promoExpiresAt:R.target.value})})]})]})]})})})]}),I==="gifts"&&t.jsx("div",{className:"space-y-6 animate-in fade-in",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(ls,{size:18,className:"text-pink-500"})," Promotional Gift"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Select Gift Product"}),t.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm",value:Y.giftProductId||"",onChange:R=>Se({...Y,giftProductId:R.target.value}),children:[t.jsx("option",{value:"",children:"-- No Gift --"}),n.filter(R=>R.id!==Y.id).map(R=>t.jsx("option",{value:R.id,children:R.name},R.id))]})]}),Y.giftProductId&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Gift Value (R)"}),t.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:Y.giftValue||"",onChange:R=>Se({...Y,giftValue:parseFloat(R.target.value)||0})})]})]})]})}),I==="media"&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 border border-pink-500/30 p-5 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3 text-pink-400 font-bold text-lg",children:[t.jsx(ys,{size:20}),t.jsx("h3",{children:"AI Product Analyst"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("input",{type:"file",accept:"image/*",ref:oe,className:"hidden",onChange:Ne}),t.jsxs("button",{onClick:()=>{var R;return(R=oe.current)==null?void 0:R.click()},disabled:te,className:"flex-1 py-3 bg-zinc-800 hover:bg-pink-600 text-white rounded-lg border border-gray-600 hover:border-pink-400 transition-all flex items-center justify-center gap-2 text-sm font-semibold disabled:opacity-50 shadow-lg",children:[te?t.jsx(Dr,{className:"animate-spin",size:18}):t.jsx(pI,{size:18}),te?"Analyzing Image...":"Upload & Analyze with AI"]})]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Description"}),t.jsxs("button",{onClick:ss,disabled:F,className:"text-xs text-cyan-400 flex items-center gap-1 hover:text-cyan-300",children:[t.jsx(eb,{size:12})," ",F?"Writing...":"Generate from Text"]})]}),t.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-32 text-white text-sm",value:Y.description,onChange:R=>Se({...Y,description:R.target.value})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"When & How to Wear"}),t.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-24 text-white text-sm",value:Y.whenAndHowToWear,onChange:R=>Se({...Y,whenAndHowToWear:R.target.value}),placeholder:"Styling advice..."})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Images"}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-2",children:[Y.images.filter(R=>R!=="").map((R,ne)=>t.jsxs("div",{className:"relative group aspect-square rounded-lg overflow-hidden border border-gray-800 bg-black",children:[t.jsx("img",{src:R,alt:"",className:"w-full h-full object-cover",onError:no}),t.jsx("button",{onClick:()=>un(ne),className:"absolute top-1 right-1 bg-black/60 hover:bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-all",children:t.jsx(cs,{size:12})})]},ne)),t.jsxs("div",{onClick:()=>{var R;return(R=Me.current)==null?void 0:R.click()},className:"aspect-square rounded-lg border border-dashed border-gray-700 bg-zinc-900/30 flex flex-col items-center justify-center text-gray-500 cursor-pointer hover:bg-zinc-800 hover:border-gray-500 transition-all",children:[t.jsx(rn,{size:24}),t.jsx("span",{className:"text-[10px] mt-1",children:"Add Image"})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:Me,className:"hidden",onChange:Je}),t.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:Be,className:"hidden",onChange:Je}),t.jsxs("button",{onClick:()=>{var R;return(R=Me.current)==null?void 0:R.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[t.jsx(vI,{size:16,className:"text-cyan-400"})," Upload"]}),t.jsxs("button",{onClick:()=>{var R;return(R=Be.current)==null?void 0:R.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[t.jsx(na,{size:16,className:"text-pink-500"})," Camera"]})]})]})]})]}),t.jsxs("div",{className:"p-4 border-t border-gray-800 bg-zinc-950 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Cancel"}),t.jsxs("button",{onClick:Vt,disabled:L,className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2 shadow transition-colors text-sm font-semibold disabled:opacity-50",children:[L?t.jsx(Dr,{className:"animate-spin",size:18}):t.jsx(cc,{size:18})," ",L?"Saving...":"Save Product"]})]})]}):k?t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm p-8 text-center",children:[t.jsx(Dr,{className:"animate-spin mx-auto mb-4",size:32}),t.jsx("p",{className:"text-gray-400",children:"Loading products..."})]}):Ke.length===0?t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm p-8 text-center",children:[t.jsx(to,{className:"mx-auto mb-4 text-gray-500",size:48}),t.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No products found"}),t.jsx("p",{className:"text-gray-500 mb-4",children:n.length===0?"No products have been loaded from the database yet.":"No products match your current filters."}),n.length===0&&t.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Check the browser console for any Supabase connection errors."}),t.jsxs("button",{onClick:gs,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 shadow-lg transition-colors mx-auto",children:[t.jsx(rn,{size:18})," Add First Product"]})]}):t.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:t.jsxs("table",{className:"w-full text-left text-sm",children:[t.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:"Product"}),t.jsx("th",{className:"p-4",children:"Type"}),t.jsx("th",{className:"p-4",children:"SKU"}),t.jsx("th",{className:"p-4",children:"Price (R)"}),t.jsx("th",{className:"p-4",children:"Price (USD)"}),t.jsx("th",{className:"p-4",children:"Stock"}),t.jsx("th",{className:"p-4",children:"Status"}),t.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:Ke.map(R=>t.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[t.jsxs("td",{className:"p-4 flex items-center gap-3",children:[t.jsx("img",{src:R.images[0]||"https://via.placeholder.com/40",className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:"",onError:no}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-200 block",children:R.name}),t.jsx("span",{className:"text-xs text-gray-500",children:R.category})]})]}),t.jsx("td",{className:"p-4 text-gray-400",children:ke(We(R))}),t.jsx("td",{className:"p-4 text-gray-500 font-mono text-xs",children:R.code}),t.jsxs("td",{className:"p-4 font-medium text-green-400",children:["R",R.price?R.price.toFixed(2):"0.00"]}),t.jsxs("td",{className:"p-4 font-medium text-yellow-400",children:["$ ",R.priceUSD?R.priceUSD.toFixed(2):"0.00"]}),t.jsx("td",{className:"p-4 text-gray-300",children:R.stock}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${R.status==="published"?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:R.status})}),t.jsx("td",{className:"p-4 text-right",children:t.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx("button",{onClick:()=>zs(R),className:"p-2 text-gray-400 hover:text-cyan-400",children:t.jsx(Vm,{size:16})}),t.jsx("button",{onClick:()=>_s(R.id),className:"p-2 text-gray-400 hover:text-red-400",children:t.jsx(Lr,{size:16})})]})})]},R.id))})]})}),!_&&t.jsx("div",{className:"fixed right-6 bottom-6 z-50",children:t.jsx("button",{onClick:gs,title:"Add Product",className:"w-14 h-14 flex items-center justify-center rounded-full bg-pink-600 hover:bg-pink-500 text-white shadow-lg",children:t.jsx(rn,{size:20})})}),t.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/20 to-orange-900/20 border border-yellow-500/30 p-6 rounded-xl mt-6",children:[t.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[t.jsx(Dt,{size:18,className:"text-yellow-400"})," Manual Winner Override"]}),t.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Override the current week's winner for social proof notifications. Leave empty to use auto-generated winners."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Winner Name"}),t.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(j==null?void 0:j.name)||"",onChange:R=>E(j?{...j,name:R.target.value}:{name:R.target.value,prize:500,currency:"ZAR",rank:1}),placeholder:"e.g. John Doe"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prize Amount"}),t.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(j==null?void 0:j.prize)||"",onChange:R=>E(j?{...j,prize:parseFloat(R.target.value)||0}:{name:"",prize:parseFloat(R.target.value)||0,currency:"ZAR",rank:1}),placeholder:"500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Currency"}),t.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(j==null?void 0:j.currency)||"ZAR",onChange:R=>E(j?{...j,currency:R.target.value}:{name:"",prize:500,currency:R.target.value,rank:1}),children:[t.jsx("option",{value:"ZAR",children:"ZAR (R)"}),t.jsx("option",{value:"USD",children:"USD ($)"})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[t.jsx("button",{onClick:()=>E(null),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Clear Override"}),t.jsx("button",{onClick:()=>alert("Manual winner set!"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-500 transition-colors text-sm",children:"Set Winner"})]})]})]})},RO=()=>{const{categories:n,addCategory:e,updateCategory:s,deleteCategory:r,replaceCategories:i}=vt(),o=S.useRef({}),[c,u]=S.useState(null),f=(v,j)=>{const E=[...n],k=j==="up"?v-1:v+1;k>=0&&k<E.length&&([E[v],E[k]]=[E[k],E[v]],i(E))},h=async(v,j)=>{if(!j)return;try{u(v);const k=Date.now(),_=`categories/${v}/${k}_${j.name}`,P=await up("categories",_,j),L=n.find(U=>U.id===v);L&&s({...L,image:P}),u(null);return}catch(k){console.warn("Supabase upload failed, falling back to base64:",k)}const E=new FileReader;E.onloadend=()=>{const k=n.find(_=>_.id===v);k&&typeof E.result=="string"&&s({...k,image:E.result}),u(null)},E.readAsDataURL(j)},y=()=>{e({id:`cat_${Date.now()}`,name:"New Collection",image:"https://picsum.photos/400/400?grayscale",description:""})};return t.jsxs("div",{className:"space-y-6 max-w-4xl",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Category Management"}),t.jsxs("button",{onClick:y,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 transition-colors text-sm",children:[t.jsx(rn,{size:18})," Add Category"]})]}),t.jsxs("div",{className:"space-y-4",children:[n.map((v,j)=>t.jsxs("div",{className:"flex items-center gap-4 bg-zinc-900 p-4 rounded-xl border border-gray-800 shadow-sm animate-in fade-in",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("button",{onClick:()=>f(j,"up"),disabled:j===0,className:`p-1 rounded hover:bg-gray-800 ${j===0?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:t.jsx(hI,{size:18})}),t.jsx("button",{onClick:()=>f(j,"down"),disabled:j===n.length-1,className:`p-1 rounded hover:bg-gray-800 ${j===n.length-1?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:t.jsx(uI,{size:18})})]}),t.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Collection Name"}),t.jsx("input",{type:"text",value:v.name,onChange:E=>s({...v,name:E.target.value}),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm focus:border-cyan-400 focus:outline-none"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative w-12 h-12",children:[t.jsx("img",{src:v.image,alt:v.name,className:`w-12 h-12 rounded object-cover bg-zinc-800 border border-gray-700 ${c===v.id?"opacity-50":""}`}),c===v.id&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(Dr,{size:16,className:"animate-spin text-pink-500"})})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Cover Image"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>{var E;return(E=o.current[v.id])==null?void 0:E.click()},disabled:c===v.id,className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-gray-200 text-xs rounded border border-gray-600 transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:c===v.id?"Uploading...":"Change Image"}),t.jsx("input",{type:"file",ref:E=>{o.current[v.id]=E},className:"hidden",accept:"image/*",onChange:E=>E.target.files&&h(v.id,E.target.files[0])})]})]})]})]}),t.jsx("div",{className:"ml-2",children:t.jsx("button",{onClick:()=>{window.confirm("Delete this category?")&&r(v.id)},className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-900/20 rounded-full transition-all",children:t.jsx(cs,{size:20})})})]},v.id)),n.length===0&&t.jsx("div",{className:"text-center py-12 text-gray-500",children:'No categories found. Click "Add Category" to start.'})]})]})},MO=()=>{const{vouchers:n,addVoucher:e,deleteVoucher:s,cart:r,currency:i}=vt(),[o,c]=S.useState(10),[u,f]=S.useState(""),[h,y]=S.useState(""),[v,j]=S.useState(""),[E,k]=S.useState(""),[_,P]=S.useState(null),[L,U]=S.useState(!1),F=r.filter(M=>M.code==="GV-DIGITAL"),J=()=>{const M="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let C="";for(let I=0;I<12;I++)I>0&&I%4===0&&(C+="-"),C+=M.charAt(Math.floor(Math.random()*M.length));k(C)},te=async()=>{if(!o||!E)return;U(!0);const M=o*29,C={code:E,discountType:"fixed",value:M,minSpend:M,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};if(e(C),h)try{const I=await os("users",{filters:{email:h},limit:1});if(I&&I.length>0){const $=I[0],O={id:`gift_recv_${Date.now()}`,type:"gift_received",title:"You received a Gift Voucher!",message:`Spoil Me Vintage sent you a voucher worth ${i==="ZAR"?"R":"$"}${i==="ZAR"?M:o}.`,date:new Date().toISOString(),isRead:!1,voucherData:{code:E,amount:M,meta:{recipientName:u||$.name||"Valued Customer",senderName:"Spoil Me Vintage Team",message:v||"Enjoy a little something special from us!",deliveryMethod:"recipient"}}};await di("notifications",{user_id:$.id||$.uid,...O}),alert(`Voucher created AND sent to ${h}!`)}else alert(`Voucher created, but user with email ${h} was not found. Please send the code manually.`)}catch(I){console.error("Error sending voucher:",I),alert("Voucher created, but failed to send to user due to an error.")}k(""),f(""),y(""),j(""),U(!1)},H=M=>{navigator.clipboard.writeText(M),P(M),setTimeout(()=>P(null),2e3)};return t.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Gift Card Management"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Generate valid codes and manage active vouchers."})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[F.length>0&&t.jsxs("div",{className:"bg-pink-900/10 border border-pink-500/30 p-4 rounded-xl mb-6",children:[t.jsxs("h3",{className:"text-pink-400 font-bold flex items-center gap-2 mb-3",children:[t.jsx(ca,{size:18})," Pending Requests (",F.length,")"]}),t.jsx("div",{className:"space-y-2",children:F.map((M,C)=>t.jsxs("div",{className:"bg-zinc-900 p-3 rounded-lg border border-pink-500/20 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-white text-sm font-medium",children:M.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Value: ",i==="ZAR"?"R":"$",i==="ZAR"?M.price:(M.price/29).toFixed(0)]})]}),t.jsx("button",{onClick:()=>{c(i==="ZAR"?M.price:M.price/29),f("Customer"),J()},className:"px-3 py-1.5 bg-pink-600 text-white text-xs rounded hover:bg-pink-500",children:"Process"})]},C))})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl shadow-sm",children:[t.jsxs("h2",{className:"font-bold text-white mb-6 flex items-center gap-2",children:[t.jsx(rn,{size:20,className:"text-cyan-400"})," Issue New Voucher"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Voucher Value (USD)"}),t.jsx("input",{type:"number",min:"10",max:"100",value:o,onChange:M=>c(parseFloat(M.target.value)),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white font-bold focus:border-cyan-400 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Recipient Name"}),t.jsx("input",{type:"text",value:u,onChange:M=>f(M.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white focus:border-cyan-400 outline-none",placeholder:"e.g. Sarah"})]})]}),t.jsxs("div",{className:"bg-black/30 border border-gray-700 rounded-xl p-4 mb-6",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(rh,{size:14})," Send Directly to User (Optional)"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"User Email Address"}),t.jsx("input",{type:"email",value:h,onChange:M=>y(M.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"user@example.com (Must be registered)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Custom Message"}),t.jsx("textarea",{rows:2,value:v,onChange:M=>j(M.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Enjoy your gift!"})]})]})]}),t.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 mb-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 w-full",children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Unique Voucher Code"}),t.jsx("div",{className:"font-mono text-2xl text-cyan-400 tracking-widest break-all",children:E||"XXXX-XXXX-XXXX"})]}),t.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors whitespace-nowrap",children:[t.jsx(Tc,{size:16})," Generate Number"]})]}),t.jsx("button",{onClick:te,disabled:!E||L,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center justify-center gap-2",children:L?"Processing...":h?"Create & Send to User":"Activate Voucher Only"})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[t.jsx("h2",{className:"font-bold text-white mb-4",children:"Active Vouchers"}),n.length===0?t.jsx("p",{className:"text-gray-500 text-sm",children:"No active vouchers."}):t.jsx("div",{className:"space-y-3",children:n.map((M,C)=>t.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-gray-600 transition-colors",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-mono text-cyan-400 font-bold",children:M.code}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Value: ",i==="ZAR"?"R":"$",i==="ZAR"?M.value:(M.value/29).toFixed(0),"  Expires: ",new Date(M.expiresAt).toLocaleDateString()]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>H(M.code),className:"p-2 text-gray-500 hover:text-white",children:_===M.code?t.jsx(ut,{size:16,className:"text-green-400"}):t.jsx(nh,{size:16})}),t.jsx("button",{onClick:()=>s(M.code),className:"p-2 text-gray-500 hover:text-red-400",children:t.jsx(Lr,{size:16})})]})]},C))})]})]}),t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"sticky top-6",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[t.jsx(kc,{size:16})," Card Preview"]}),t.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),t.jsxs("div",{className:"relative h-full p-6 flex flex-col justify-between z-10",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("div",{className:"font-cherry text-xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400",children:"Spoil Me Vintage"}),t.jsxs("div",{className:"text-3xl font-bold text-white font-architects",children:[i==="ZAR"?"R":"$",i==="ZAR"?(o*29).toFixed(0):o]})]}),t.jsxs("div",{className:"text-center my-auto",children:[t.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-[0.3em] mb-2",children:"VOUCHER CODE"}),t.jsx("div",{className:"bg-white/5 border border-white/10 rounded px-4 py-2 inline-block backdrop-blur-sm",children:t.jsx("span",{className:"font-mono text-xl md:text-2xl font-bold text-cyan-400 tracking-wider",children:E||"--"})})]}),t.jsxs("div",{className:"flex justify-between items-end text-[10px] text-gray-500 uppercase tracking-wider",children:[t.jsxs("div",{children:["To: ",u||"Valued Customer",t.jsx("div",{className:"font-handwriting text-lg text-gray-300 normal-case mt-1",children:"Admin Team"})]}),t.jsxs("div",{className:"text-right",children:["Valid for 3 Years",t.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date().toLocaleDateString()})]})]})]})]}),t.jsxs("div",{className:"mt-6 bg-zinc-900/50 p-4 rounded-xl border border-gray-800 text-sm text-gray-400",children:[t.jsx("p",{className:"mb-2 font-bold text-white",children:"Sending Instructions:"}),t.jsxs("ul",{className:"list-disc pl-4 space-y-2 text-xs",children:[t.jsx("li",{children:"Set the Value and generate a unique code."}),t.jsxs("li",{children:[t.jsx("strong",{children:"Option A (Manual):"}),' Click "Activate Voucher Only", then send the code via WhatsApp/Email manually.']}),t.jsxs("li",{children:[t.jsx("strong",{children:"Option B (Direct):"}),` Enter the user's Registered Email. The voucher will appear in their App Profile under "My Gifts".`]})]})]})]})})]})]})},DO=[{id:"fb",name:"Facebook",icon:"facebook",isConnected:!1,accountName:"",urlTemplate:"https://www.facebook.com/sharer/sharer.php?u={url}&quote={text}"},{id:"ig",name:"Instagram",icon:"instagram",isConnected:!1,accountName:"",urlTemplate:""},{id:"tk",name:"TikTok",icon:"video",isConnected:!1,accountName:"",urlTemplate:""},{id:"x",name:"X (Twitter)",icon:"twitter",isConnected:!1,accountName:"",urlTemplate:"https://twitter.com/intent/tweet?text={text}&url={url}"}],OO={fb:["Log in to your Facebook Brand Page in your browser or app.","Enter your Page Name below for the AI context.","When you click 'Post Now', we will open the Facebook Sharer tool.","Paste the caption we generate for you."],ig:["Ensure the Instagram App is installed on this device.","Enter your Instagram Handle (@name) below.","When you click 'Post Now', we will copy the caption to your clipboard.","We will then open Instagram. Create a new post and select the downloaded photo.","Long press in the caption box and select 'Paste'."],tk:["Ensure the TikTok App is installed.","Enter your Handle below.","We will copy the text and hashtags to your clipboard.","When TikTok opens, upload the video/photo and paste the caption."],x:["Log in to X (Twitter).","Enter your handle below.","We will automatically open a 'Compose Tweet' window with your text and link pre-filled."]},LO=()=>{var $;const{products:n}=vt(),[e,s]=S.useState(DO),[r,i]=S.useState(!1),[o,c]=S.useState(null),[u,f]=S.useState(""),[h,y]=S.useState(null),[v,j]=S.useState({}),[E,k]=S.useState(null),[_,P]=S.useState(!1),[L,U]=S.useState([]),[F,J]=S.useState({posts:0,errors:0});S.useEffect(()=>{const O=localStorage.getItem("spv_social_config");O&&s(JSON.parse(O))},[]),S.useEffect(()=>{let O;return _&&(O=setInterval(()=>{if(n.length===0)return;const V=n[Math.floor(Math.random()*n.length)],A=e.filter(je=>je.isConnected),se=A.length>0?A[Math.floor(Math.random()*A.length)]:e[Math.floor(Math.random()*e.length)],fe=new Date().toLocaleTimeString();U(je=>[{time:fe,msg:`AI Worker: Analyzing "${V.name}" trends & hashtags...`,type:"process"},...je].slice(0,6)),setTimeout(()=>{const je=new Date().toLocaleTimeString();U(Ie=>[{time:je,msg:`Server: Successfully scheduled post to ${se.name} (Simulated)`,type:"success"},...Ie].slice(0,6)),J(Ie=>({...Ie,posts:Ie.posts+1}))},2e3)},5e3)),()=>clearInterval(O)},[_,n,e]);const te=O=>{c(O),f(O.accountName||"")},H=()=>{if(!o)return;const O=e.map(V=>V.id===o.id?{...V,isConnected:!0,accountName:u}:V);s(O),localStorage.setItem("spv_social_config",JSON.stringify(O)),c(null)},M=O=>{const V=e.map(A=>A.id===O?{...A,isConnected:!1,accountName:""}:A);s(V),localStorage.setItem("spv_social_config",JSON.stringify(V))},C=async()=>{if(n.length===0)return;i(!0);const O=n[Math.floor(Math.random()*n.length)];y(O);const V={},A=e.filter(se=>se.isConnected);if(A.length===0){alert("Please connect at least one platform first."),i(!1);return}for(const se of A){const fe=se.accountName?`(Account: @${se.accountName})`:"";V[se.id]=await TO(O.name,`${se.name} ${fe}`,O.price)}j(V),i(!1)},I=O=>{const V=v[O.id];if(!V||!h)return;const A=`${window.location.origin}/#/product/${h.id}`;if(navigator.clipboard.writeText(`${V} ${A}`).then(()=>{k(O.id),setTimeout(()=>k(null),2e3)}),O.id==="fb"||O.id==="x"){const se=O.urlTemplate.replace("{url}",encodeURIComponent(A)).replace("{text}",encodeURIComponent(V));window.open(se,"_blank","width=600,height=400")}else alert("Caption copied! Opening platform..."),O.id==="ig"&&window.open("https://instagram.com","_blank"),O.id==="tk"&&window.open("https://tiktok.com","_blank")};return t.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[o&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>c(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[t.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.id==="fb"&&t.jsx(oc,{size:24,className:"text-blue-500"}),o.id==="ig"&&t.jsx(cm,{size:24,className:"text-pink-500"}),o.id==="x"&&t.jsx(pu,{size:24,className:"text-white"}),o.id==="tk"&&t.jsx(na,{size:24,className:"text-cyan-400"}),"Connect ",o.name]}),t.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:t.jsx(cs,{size:20})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 uppercase mb-1",children:"Account Handle / Name"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"@"}),t.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 pl-8 text-white focus:border-pink-500 outline-none",value:u,onChange:O=>f(O.target.value),placeholder:"spoilmevintage"})]})]}),t.jsxs("div",{className:"bg-black/30 p-4 rounded-lg border border-gray-800",children:[t.jsxs("h4",{className:"text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[t.jsx($N,{size:14})," How to connect:"]}),t.jsx("ul",{className:"space-y-2",children:($=OO[o.id])==null?void 0:$.map((O,V)=>t.jsxs("li",{className:"text-xs text-gray-400 flex gap-2",children:[t.jsx("span",{className:"bg-gray-800 w-4 h-4 rounded-full flex items-center justify-center text-[10px] shrink-0 mt-0.5",children:V+1}),O]},V))})]}),t.jsxs("button",{onClick:H,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl flex items-center justify-center gap-2 transition-colors",children:[t.jsx(cc,{size:18})," Save & Connect"]})]})]})]}),t.jsx("div",{className:"flex justify-between items-start",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Social Media Studio"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage accounts and automate daily content sharing."})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:e.map(O=>t.jsxs("div",{className:`p-4 rounded-xl border transition-all relative group ${O.isConnected?"bg-zinc-900 border-green-500/50 shadow-[0_0_10px_rgba(34,197,94,0.1)]":"bg-black border-gray-800 opacity-75"}`,children:[t.jsx("button",{onClick:()=>te(O),className:"absolute top-2 right-2 p-2 text-gray-500 hover:text-white hover:bg-gray-800 rounded-full transition-colors",children:t.jsx(Bm,{size:16})}),t.jsxs("div",{className:"flex flex-col items-center text-center pt-4 pb-2 cursor-pointer",onClick:()=>te(O),children:[t.jsxs("div",{className:`p-3 rounded-full mb-3 transition-colors ${O.isConnected?"bg-white text-black":"bg-gray-800 text-gray-500"}`,children:[O.id==="fb"&&t.jsx(oc,{size:24}),O.id==="ig"&&t.jsx(cm,{size:24}),O.id==="x"&&t.jsx(pu,{size:24}),O.id==="tk"&&t.jsx(na,{size:24})]}),t.jsx("h3",{className:"font-bold text-white text-sm",children:O.name}),O.isConnected?t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t.jsxs("p",{className:"text-xs text-green-400 font-medium",children:["@",O.accountName]})]}):t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Not Connected"})]}),O.isConnected&&t.jsx("button",{onClick:V=>{V.stopPropagation(),M(O.id)},className:"w-full mt-3 py-1 text-[10px] text-red-400 hover:text-red-300 border border-red-900/30 hover:bg-red-900/20 rounded",children:"Disconnect"}),!O.isConnected&&t.jsx("button",{onClick:()=>te(O),className:"w-full mt-3 py-1 text-[10px] text-cyan-400 hover:text-cyan-300 border border-cyan-900/30 hover:bg-cyan-900/20 rounded",children:"Configure"})]},O.id))}),t.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-500/30 rounded-2xl p-6 md:p-8 shadow-xl relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:t.jsx(OI,{size:120,className:"text-purple-500"})}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 relative z-10",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:`p-2 rounded-lg ${_?"bg-green-500/20 text-green-400":"bg-gray-800 text-gray-500"}`,children:t.jsx(CI,{size:24})}),t.jsx("h2",{className:"text-xl font-bold text-white",children:"Background Auto-Pilot (Demo)"})]}),t.jsx("p",{className:"text-sm text-gray-400 max-w-lg",children:"Enable this to simulate the server-side process that automatically picks products, writes captions, and schedules them to your connected accounts while you sleep."}),_&&t.jsxs("div",{className:"flex items-center gap-2 mt-4 text-xs text-green-400 font-mono bg-green-900/20 border border-green-500/30 px-3 py-1.5 rounded-lg w-fit animate-pulse",children:[t.jsx(LN,{size:14})," Service Running..."]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right hidden md:block",children:[t.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:F.posts}),t.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Posts Queued"})]}),t.jsxs("button",{onClick:()=>P(!_),className:`px-6 py-4 rounded-xl font-bold flex items-center gap-2 transition-all shadow-lg ${_?"bg-red-600 hover:bg-red-500 text-white shadow-red-900/20":"bg-purple-600 hover:bg-purple-500 text-white shadow-purple-900/20"}`,children:[_?t.jsx(kI,{size:20,fill:"currentColor"}):t.jsx(_I,{size:20,fill:"currentColor"}),_?"Stop Simulation":"Start Auto-Pilot"]})]})]}),t.jsxs("div",{className:"mt-8 bg-black rounded-xl border border-gray-800 font-mono text-xs p-4 h-48 overflow-y-auto shadow-inner relative",children:[t.jsxs("div",{className:"absolute top-2 right-2 text-gray-700 flex items-center gap-1 pointer-events-none",children:[t.jsx(AI,{size:14})," Console"]}),L.length===0?t.jsx("div",{className:"h-full flex items-center justify-center text-gray-600 italic",children:"System Idle. Press Start to begin simulation."}):t.jsx("div",{className:"space-y-2",children:L.map((O,V)=>t.jsxs("div",{className:"flex gap-3 animate-in slide-in-from-left-2 fade-in duration-300",children:[t.jsxs("span",{className:"text-gray-600 shrink-0",children:["[",O.time,"]"]}),t.jsxs("span",{className:`break-all ${O.type==="success"?"text-green-400":O.type==="process"?"text-yellow-400":"text-gray-300"}`,children:[O.type==="success"&&t.jsx(ut,{size:12,className:"inline mr-1"}),O.type==="process"&&t.jsx(Dr,{size:12,className:"inline mr-1 animate-spin"}),O.msg]})]},V))})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 md:p-8 shadow-xl",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 mb-8",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(ys,{className:"text-pink-500"})," Manual Content Generator"]}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"One click to pick a product and write tailored captions for all your active platforms."})]}),t.jsxs("button",{onClick:C,disabled:r,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg flex items-center gap-2 disabled:opacity-50 transition-all",children:[r?t.jsx(Dr,{className:"animate-spin"}):t.jsx(Tc,{}),r?"Creating Strategy...":"Generate Today's Posts"]})]}),h&&t.jsxs("div",{className:"animate-in slide-in-from-bottom-4 fade-in",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6 bg-black p-4 rounded-xl border border-gray-800",children:[t.jsx("img",{src:h.images[0],alt:"",className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-pink-500 uppercase font-bold",children:"Today's Pick"}),t.jsx("h3",{className:"text-white font-bold",children:h.name}),t.jsxs("p",{className:"text-gray-400 text-xs",children:["R",h.price]})]}),t.jsx("div",{className:"ml-auto hidden md:block",children:t.jsxs("a",{href:h.images[0],download:!0,target:"_blank",rel:"noreferrer",className:"text-xs text-cyan-400 flex items-center gap-1 hover:underline",children:[t.jsx(wI,{size:14})," Download High-Res"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.filter(O=>O.isConnected).map(O=>t.jsxs("div",{className:"bg-black border border-gray-800 p-4 rounded-xl space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800 pb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-300",children:[O.id==="fb"&&t.jsx(oc,{size:16,className:"text-blue-500"}),O.id==="ig"&&t.jsx(cm,{size:16,className:"text-pink-500"}),O.id==="x"&&t.jsx(pu,{size:16,className:"text-white"}),O.id==="tk"&&t.jsx(na,{size:16,className:"text-cyan-400"}),O.name," Draft"]}),t.jsxs("button",{onClick:()=>I(O),className:"text-xs bg-zinc-800 hover:bg-pink-600 text-white px-3 py-1.5 rounded-full transition-colors flex items-center gap-1",children:[E===O.id?t.jsx(ut,{size:12}):t.jsx(so,{size:12}),E===O.id?"Copied!":"Post Now"]})]}),t.jsx("textarea",{className:"w-full h-32 bg-transparent text-sm text-gray-300 resize-none focus:outline-none",value:v[O.id]||"Generating...",readOnly:!0})]},O.id))})]}),!h&&!r&&t.jsx("div",{className:"text-center py-12 border border-dashed border-gray-800 rounded-xl",children:t.jsx("p",{className:"text-gray-500",children:'Click "Generate" to start your daily social media workflow.'})})]}),t.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-xl p-6",children:[t.jsxs("h3",{className:"text-blue-400 font-bold flex items-center gap-2 mb-3",children:[t.jsx(th,{size:20})," System Capabilities Explained"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-gray-300",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white mb-2",children:"What this system CAN do:"}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[t.jsx("li",{children:"Use AI to generate unique, platform-specific captions for your products instantly."}),t.jsx("li",{children:"Organize your daily posting workflow into a single dashboard."}),t.jsx("li",{children:'Use "Web Intents" to open your social apps with text pre-filled (semi-automated).'}),t.jsxs("li",{children:[t.jsx("strong",{children:"Demo Simulation:"})," As seen above, we can simulate how a server-side bot would process your queue."]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-white mb-2",children:"What requires Server Upgrades:"}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Fully Automated Background Posting:"}),' To enable the "Auto-Pilot" feature for real (posting while you sleep), a dedicated backend server (e.g., Firebase Cloud Functions) is required to run timers (Cron jobs).']}),t.jsxs("li",{children:[t.jsx("strong",{children:"Direct API Integration:"})," Posting directly without opening the app requires expensive API approvals and secure server-side token storage which cannot run safely in a browser-only admin panel."]})]})]})]})]})]})},zO=()=>{var Xe,nt,Ut;const{getAllUsers:n,approveAffiliate:e,rejectAffiliate:s,updateAffiliateTier:r,assignAffiliateParent:i}=vt(),[o,c]=S.useState([]),[u,f]=S.useState(!0),[h,y]=S.useState("applicants"),[v,j]=S.useState("overview"),[E,k]=S.useState("domestic"),[_,P]=S.useState(18.2),[L,U]=S.useState(.055),[F,J]=S.useState(""),[te,H]=S.useState("all"),[M,C]=S.useState({bronze:10,silver:11,gold:15,platinum:20,vault:1}),[I,$]=S.useState({zar:{spoilMe:2,basic:5,premium:10,deluxe:15},usd:{insider:1,gold:2,deluxe:3}}),[O,V]=S.useState({sprinter:{zar:50,usd:5},bigSpender:{zar:200,usd:15}}),[A,se]=S.useState(null),[fe,je]=S.useState(10),[Ie,le]=S.useState(""),[be,we]=S.useState(null),[Z,ce]=S.useState("");S.useEffect(()=>{W()},[]);const W=async()=>{f(!0);const oe=await n();c(oe),f(!1)};o.filter(oe=>{var Me;return((Me=oe.affiliateStats)==null?void 0:Me.status)==="pending"});const ue=o.filter(oe=>{var Me;return((Me=oe.affiliateStats)==null?void 0:Me.status)==="approved"}),B=async()=>{be&&(be.action==="approve"?await e(be.userId,Z):await s(be.userId,Z),we(null),ce(""),W())},Ce=oe=>{var Me;se(oe),je(((Me=oe.affiliateStats)==null?void 0:Me.commissionRate)||10),le("")},Pe=async()=>{if(!A)return;await r(A.id,fe);const oe={...A,affiliateStats:{...A.affiliateStats,commissionRate:fe}};se(oe),c(Me=>Me.map(Be=>Be.id===A.id?oe:Be)),alert("Commission Tier Updated!")},Ue=async()=>{if(!A||!Ie)return;await i(Ie,A.id),alert("Recruit Added! This affiliate will now earn 1% commission from their sales.");const oe=await n();c(oe);const Me=oe.find(Be=>Be.id===A.id);Me&&se(Me),le("")},Qe=A?o.filter(oe=>{var Me;return((Me=oe.affiliateStats)==null?void 0:Me.parentId)===A.id}):[],lt=(Xe=A==null?void 0:A.affiliateStats)!=null&&Xe.parentId?o.find(oe=>{var Me;return oe.id===((Me=A.affiliateStats)==null?void 0:Me.parentId)}):null,ye=Qe.reduce((oe,Me)=>{var Be;return oe+(((Be=Me.affiliateStats)==null?void 0:Be.totalSalesValue)||0)},0)*.01;return t.jsxs("div",{className:"space-y-8 relative",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Affiliate Manager"}),t.jsxs("button",{onClick:W,className:"text-xs text-gray-400 hover:text-white flex items-center gap-1",children:[t.jsx(fa,{size:14})," Refresh Data"]})]}),t.jsx("div",{className:"flex gap-2 border-b border-gray-800 pb-2 overflow-x-auto",children:[{key:"overview",label:"Dashboard Overview",icon:Ac},{key:"payouts",label:"Payout Manager",icon:ts},{key:"partners",label:"Partner List",icon:Ps},{key:"settings",label:"Settings & Variables",icon:Bm},{key:"validator",label:"Commission Validator",icon:Gn}].map(({key:oe,label:Me,icon:Be})=>t.jsxs("button",{onClick:()=>j(oe),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors whitespace-nowrap flex items-center gap-2 ${v===oe?"border-yellow-500 text-yellow-500":"border-transparent text-gray-400 hover:text-white"}`,children:[t.jsx(Be,{size:16})," ",Me]},oe))}),v==="overview"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:t.jsx(ts,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Pending Payouts (ZAR)"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Ready for EFT"})]})]}),t.jsxs("p",{className:"text-3xl font-bold text-green-400",children:["R",ue.filter(oe=>{var Me;return(((Me=oe.affiliateStats)==null?void 0:Me.balance)||0)>200}).reduce((oe,Me)=>{var Be;return oe+(((Be=Me.affiliateStats)==null?void 0:Be.balance)||0)},0).toFixed(0)]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:t.jsx(ts,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Pending Payouts (USD)"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Ready for PayPal"})]})]}),t.jsxs("p",{className:"text-3xl font-bold text-blue-400",children:["$",ue.filter(oe=>{var Me;return(((Me=oe.affiliateStats)==null?void 0:Me.balance)||0)>50}).reduce((oe,Me)=>{var Be;return oe+(((Be=Me.affiliateStats)==null?void 0:Be.balance)||0)},0).toFixed(0)]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:t.jsx(Rn,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Top Vault Movers"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Most vault sales"})]})]}),t.jsx("p",{className:"text-3xl font-bold text-purple-400",children:ue.reduce((oe,Me)=>{var Be;return Math.max(oe,((Be=Me.affiliateStats)==null?void 0:Be.totalSalesCount)||0)},0)}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Items sold"})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-cyan-900/20 rounded-lg text-cyan-400",children:t.jsx(Ps,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Total Partners"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Active affiliates"})]})]}),t.jsx("p",{className:"text-3xl font-bold text-cyan-400",children:ue.length})]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("button",{onClick:()=>j("payouts"),className:"p-4 bg-green-900/20 border border-green-500/30 rounded-lg hover:bg-green-900/30 transition-colors text-left",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(ts,{size:20,className:"text-green-400"}),t.jsx("span",{className:"text-green-400 font-bold",children:"Process Payouts"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:"Manage EFT and PayPal payments"})]}),t.jsxs("button",{onClick:()=>j("partners"),className:"p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg hover:bg-blue-900/30 transition-colors text-left",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(Ps,{size:20,className:"text-blue-400"}),t.jsx("span",{className:"text-blue-400 font-bold",children:"Manage Partners"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:"Review applications and tiers"})]}),t.jsxs("button",{onClick:()=>j("validator"),className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg hover:bg-red-900/30 transition-colors text-left",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(Gn,{size:20,className:"text-red-400"}),t.jsx("span",{className:"text-red-400 font-bold",children:"Validate Commissions"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:"Check for errors and anomalies"})]})]})]})]}),v==="payouts"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex gap-4 border-b border-gray-800 pb-2",children:[t.jsxs("button",{onClick:()=>k("domestic"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${E==="domestic"?"border-green-500 text-green-500":"border-transparent text-gray-400 hover:text-white"}`,children:[t.jsx(zN,{size:16})," Domestic EFT (ZAR)"]}),t.jsxs("button",{onClick:()=>k("international"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${E==="international"?"border-blue-500 text-blue-500":"border-transparent text-gray-400 hover:text-white"}`,children:[t.jsx(ts,{size:16})," International PayPal (USD)"]})]}),E==="domestic"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Exchange Rate Settings"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("label",{className:"text-sm text-gray-400",children:"USD to ZAR Rate:"}),t.jsx("input",{type:"number",step:"0.01",value:_,onChange:oe=>P(parseFloat(oe.target.value)),className:"bg-black border border-gray-600 rounded p-2 text-white text-sm w-24"}),t.jsx("span",{className:"text-gray-500",children:"(Today's rate for conversion)"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Domestic Payout Queue"}),t.jsx("p",{className:"text-sm text-gray-400",children:"South African affiliates with balances > R200"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-black/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Bank"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"ZAR Earned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"USD Earned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Final Payout (ZAR)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Action"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:ue.filter(oe=>{var Me;return(((Me=oe.affiliateStats)==null?void 0:Me.balance)||0)>200}).map(oe=>{var We;const Me=((We=oe.affiliateStats)==null?void 0:We.balance)||0,Be=0,ke=Me+Be*_;return t.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold",children:oe.name}),t.jsx("p",{className:"text-gray-400 text-sm",children:oe.email})]})}),t.jsx("td",{className:"px-6 py-4 text-gray-300",children:"FNB"}),t.jsxs("td",{className:"px-6 py-4 text-green-400 font-bold",children:["R",Me.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 text-blue-400",children:["$",Be.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 text-yellow-400 font-bold",children:["R",ke.toFixed(2)]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("button",{className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-500",children:"Mark Paid"})})]},oe.id)})})]})}),t.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-between items-center",children:[t.jsxs("div",{className:"text-sm text-gray-400",children:[ue.filter(oe=>{var Me;return(((Me=oe.affiliateStats)==null?void 0:Me.balance)||0)>200}).length," partners ready for payout"]}),t.jsxs("button",{className:"px-6 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-500 flex items-center gap-2",children:[t.jsx(_c,{size:18})," Download FNB/STD Bank Batch File"]})]})]})]}),E==="international"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Exchange Rate Settings"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("label",{className:"text-sm text-gray-400",children:"ZAR to USD Rate:"}),t.jsx("input",{type:"number",step:"0.0001",value:L,onChange:oe=>U(parseFloat(oe.target.value)),className:"bg-black border border-gray-600 rounded p-2 text-white text-sm w-24"}),t.jsx("span",{className:"text-gray-500",children:"(Today's rate for conversion)"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-gray-800",children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"International Payout Queue"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Non-SA affiliates with balances > $50"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-black/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"PayPal Email"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"USD Earned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"ZAR Earned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Final Payout (USD)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Action"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:ue.filter(oe=>{var Me;return(((Me=oe.affiliateStats)==null?void 0:Me.balance)||0)>50}).map(oe=>{var We;const Me=((We=oe.affiliateStats)==null?void 0:We.balance)||0,Be=0,ke=Me+Be*L;return t.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold",children:oe.name}),t.jsx("p",{className:"text-gray-400 text-sm",children:oe.email})]})}),t.jsx("td",{className:"px-6 py-4 text-gray-300",children:oe.email}),t.jsxs("td",{className:"px-6 py-4 text-blue-400 font-bold",children:["$",Me.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 text-green-400",children:["R",Be.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4 text-yellow-400 font-bold",children:["$",ke.toFixed(2)]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-500",children:"Mark Paid"})})]},oe.id)})})]})}),t.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-between items-center",children:[t.jsxs("div",{className:"text-sm text-gray-400",children:[ue.filter(oe=>{var Me;return(((Me=oe.affiliateStats)==null?void 0:Me.balance)||0)>50}).length," partners ready for payout"]}),t.jsxs("button",{className:"px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-500 flex items-center gap-2",children:[t.jsx(_c,{size:18})," Export PayPal Mass Pay CSV"]})]})]})]})]}),v==="partners"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Search Partners"}),t.jsx("input",{type:"text",placeholder:"Name, email, or code...",value:F,onChange:oe=>J(oe.target.value),className:"w-full bg-black border border-gray-600 rounded p-3 text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Filter by Tier"}),t.jsxs("select",{value:te,onChange:oe=>H(oe.target.value),className:"bg-black border border-gray-600 rounded p-3 text-white min-w-[150px]",children:[t.jsx("option",{value:"all",children:"All Tiers"}),t.jsx("option",{value:"bronze",children:"Bronze (10%)"}),t.jsx("option",{value:"silver",children:"Silver (11%)"}),t.jsx("option",{value:"gold",children:"Gold (15%)"}),t.jsx("option",{value:"platinum",children:"Platinum (20%)"})]})]})]})}),t.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-black/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Current Tier"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Sales (This Month)"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Vault Sales"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:ue.filter(oe=>{var Me,Be,ke,We;return(F===""||oe.name.toLowerCase().includes(F.toLowerCase())||oe.email.toLowerCase().includes(F.toLowerCase())||oe.affiliateCode.toLowerCase().includes(F.toLowerCase()))&&(te==="all"||te==="bronze"&&((Me=oe.affiliateStats)==null?void 0:Me.commissionRate)===10||te==="silver"&&((Be=oe.affiliateStats)==null?void 0:Be.commissionRate)===11||te==="gold"&&((ke=oe.affiliateStats)==null?void 0:ke.commissionRate)===15||te==="platinum"&&((We=oe.affiliateStats)==null?void 0:We.commissionRate)===20)}).map(oe=>{var Me,Be,ke,We,Nt,ve,Y,Se;return t.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center text-cyan-400 font-bold",children:oe.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold",children:oe.name}),t.jsx("p",{className:"text-gray-400 text-sm",children:oe.email})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${((Me=oe.affiliateStats)==null?void 0:Me.commissionRate)===20?"bg-yellow-900/30 text-yellow-400 border border-yellow-500/30":((Be=oe.affiliateStats)==null?void 0:Be.commissionRate)===15?"bg-purple-900/30 text-purple-400 border border-purple-500/30":((ke=oe.affiliateStats)==null?void 0:ke.commissionRate)===11?"bg-gray-900/30 text-gray-400 border border-gray-500/30":"bg-orange-900/30 text-orange-400 border border-orange-500/30"}`,children:[((We=oe.affiliateStats)==null?void 0:We.commissionRate)===20?" Gold":((Nt=oe.affiliateStats)==null?void 0:Nt.commissionRate)===15?" Silver":((ve=oe.affiliateStats)==null?void 0:ve.commissionRate)===11?" Bronze":"Starter"," - ",(Y=oe.affiliateStats)==null?void 0:Y.commissionRate,"%"]})}),t.jsxs("td",{className:"px-6 py-4 text-white font-bold",children:["R",(Se=oe.affiliateStats)==null?void 0:Se.totalSalesValue.toFixed(0)]}),t.jsxs("td",{className:"px-6 py-4 text-purple-400",children:[Math.floor(Math.random()*50)," items"]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"px-2 py-1 bg-green-900/30 text-green-400 rounded text-xs border border-green-500/30",children:"Active"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Ce(oe),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-500",children:"Edit"}),t.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-500",children:"History"})]})})]},oe.id)})})]})})})]}),v==="settings"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(Bm,{size:18,className:"text-yellow-400"})," Commission Rates"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Standard Products"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"text-center p-2 bg-orange-900/20 border border-orange-500/30 rounded",children:[t.jsx("p",{className:"text-xs text-orange-400",children:"Bronze"}),t.jsxs("p",{className:"text-lg font-bold text-white",children:[M.bronze,"%"]})]}),t.jsxs("div",{className:"text-center p-2 bg-gray-900/20 border border-gray-500/30 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Silver"}),t.jsxs("p",{className:"text-lg font-bold text-white",children:[M.silver,"%"]})]}),t.jsxs("div",{className:"text-center p-2 bg-purple-900/20 border border-purple-500/30 rounded",children:[t.jsx("p",{className:"text-xs text-purple-400",children:"Gold"}),t.jsxs("p",{className:"text-lg font-bold text-white",children:[M.gold,"%"]})]}),t.jsxs("div",{className:"text-center p-2 bg-yellow-900/20 border border-yellow-500/30 rounded",children:[t.jsx("p",{className:"text-xs text-yellow-400",children:"Platinum"}),t.jsxs("p",{className:"text-lg font-bold text-white",children:[M.platinum,"%"]})]})]})]}),t.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(la,{size:16,className:"text-red-400"}),t.jsx("label",{className:"text-sm text-gray-400",children:"Secret Vault Items"})]}),t.jsxs("div",{className:"text-center p-3 bg-red-900/20 border border-red-500/30 rounded",children:[t.jsxs("p",{className:"text-lg font-bold text-red-400",children:[M.vault,"%"]}),t.jsx("p",{className:"text-xs text-red-300",children:"LOCKED AT 1%"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This ensures we do not lose money on clearance stock."})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(ts,{size:18,className:"text-green-400"})," Membership Fees"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"South African (ZAR)"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Spoil Me"}),t.jsxs("span",{className:"text-green-400 font-bold",children:["R",I.zar.spoilMe]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Basic"}),t.jsxs("span",{className:"text-green-400 font-bold",children:["R",I.zar.basic]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Premium"}),t.jsxs("span",{className:"text-green-400 font-bold",children:["R",I.zar.premium]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Deluxe"}),t.jsxs("span",{className:"text-green-400 font-bold",children:["R",I.zar.deluxe]})]})]})]}),t.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"International (USD)"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Insider"}),t.jsxs("span",{className:"text-blue-400 font-bold",children:["$",I.usd.insider]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Gold"}),t.jsxs("span",{className:"text-blue-400 font-bold",children:["$",I.usd.gold]})]}),t.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Deluxe"}),t.jsxs("span",{className:"text-blue-400 font-bold",children:["$",I.usd.deluxe]})]})]})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(Kn,{size:18,className:"text-orange-400"})," Gamification Bonuses"]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Weekly Achievements"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"p-3 bg-black/50 rounded border border-gray-700",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Sprinter Bonus"}),t.jsxs("span",{className:"text-orange-400 font-bold",children:["R",O.sprinter.zar," / $",O.sprinter.usd]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"5 memberships in a week"})]}),t.jsxs("div",{className:"p-3 bg-black/50 rounded border border-gray-700",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"text-sm text-gray-300",children:"Big Spender Bonus"}),t.jsxs("span",{className:"text-orange-400 font-bold",children:["R",O.bigSpender.zar," / $",O.bigSpender.usd]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"R5,000 / $300 sales volume"})]})]})]})})]})]})}),v==="validator"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(Gn,{size:18,className:"text-red-400"})," Commission Validator"]}),t.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Monitor recent commissions for errors and anomalies. Green = Standard, Yellow = Vault, Red = Error."}),t.jsx("div",{className:"space-y-2",children:[{id:1,type:"standard",partner:"Sarah J.",amount:450,product:"Gold Hoops",status:"approved"},{id:2,type:"vault",partner:"Mike T.",amount:10,product:"Clearance Studs",status:"approved"},{id:3,type:"standard",partner:"Lerato K.",amount:1200,product:"Necklace Set",status:"approved"},{id:4,type:"error",partner:"Jessica L.",amount:5e3,product:"Diamond Ring",status:"flagged"}].map(oe=>t.jsx("div",{className:`p-4 rounded-lg border ${oe.type==="standard"?"bg-green-900/10 border-green-500/30":oe.type==="vault"?"bg-yellow-900/10 border-yellow-500/30":"bg-red-900/10 border-red-500/30"}`,children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-white font-bold",children:[oe.partner," - ",oe.product]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Commission: R",oe.amount]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${oe.type==="standard"?"bg-green-900/50 text-green-400":oe.type==="vault"?"bg-yellow-900/50 text-yellow-400":"bg-red-900/50 text-red-400"}`,children:oe.type==="standard"?"Standard":oe.type==="vault"?"Vault (1%)":"ERROR"}),oe.status==="flagged"&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-500",children:"Void"}),t.jsx("button",{className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-500",children:"Approve"})]})]})]})},oe.id))})]})}),be&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>we(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-6 max-w-sm w-full relative z-10 shadow-2xl",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-2 capitalize",children:[be.action," Application"]}),t.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["For ",be.name]}),t.jsx("textarea",{className:"w-full bg-black border border-gray-700 rounded p-3 text-white text-sm mb-4",placeholder:"Add a note (optional)...",rows:3,value:Z,onChange:oe=>ce(oe.target.value)}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>we(null),className:"flex-1 py-2 bg-zinc-800 text-gray-300 rounded hover:bg-zinc-700",children:"Cancel"}),t.jsx("button",{onClick:B,className:`flex-1 py-2 text-white font-bold rounded ${be.action==="approve"?"bg-green-600 hover:bg-green-500":"bg-red-600 hover:bg-red-500"}`,children:"Confirm"})]})]})]}),A&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>se(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-4xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg border-2 border-white/10",children:A.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:A.name}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("span",{className:"text-gray-400",children:A.email}),t.jsx("span",{className:"text-gray-600",children:""}),t.jsx("span",{className:"font-mono text-cyan-400 bg-cyan-900/20 px-2 py-0.5 rounded text-xs border border-cyan-500/30",children:A.affiliateCode})]})]})]}),t.jsx("button",{onClick:()=>se(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white transition-colors",children:t.jsx(cs,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(ts,{size:16,className:"text-green-500"}),t.jsx("span",{className:"text-xs uppercase",children:"Direct Sales"})]}),t.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",(nt=A.affiliateStats)==null?void 0:nt.totalSalesValue.toFixed(2)]})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(Ac,{size:16,className:"text-purple-500"}),t.jsx("span",{className:"text-xs uppercase",children:"Total Earned"})]}),t.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["R",(Ut=A.affiliateStats)==null?void 0:Ut.balance.toFixed(2)]})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[t.jsx(Ps,{size:16,className:"text-cyan-500"}),t.jsx("span",{className:"text-xs uppercase",children:"Network"})]}),t.jsxs("p",{className:"text-2xl font-bold text-white",children:[Qe.length," ",t.jsx("span",{className:"text-sm font-normal text-gray-500",children:"Recruits"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(EI,{size:18,className:"text-yellow-400"})," Commission Settings"]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Direct Commission Tier (%)"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx("input",{type:"number",value:fe,onChange:oe=>je(parseFloat(oe.target.value)),className:"w-full bg-black border border-gray-600 rounded-lg p-3 text-white text-sm font-bold focus:border-pink-500 outline-none"}),t.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),t.jsx("button",{onClick:Pe,className:"bg-pink-600 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 shadow-lg",children:"Update"})]}),t.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:["Standard Tiers: ",t.jsx("span",{className:"text-gray-300",children:"10%, 11%, 15%, 20%"}),". This setting overrides automatic tier progression."]})]})})]}),lt&&t.jsxs("div",{className:"bg-blue-900/10 p-4 rounded-xl border border-blue-500/30 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-500/20 rounded-full text-blue-400",children:t.jsx($N,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-blue-300 uppercase font-bold mb-1",children:"Recruited By (Upline)"}),t.jsx("p",{className:"text-white font-bold text-sm",children:lt.name}),t.jsx("p",{className:"text-[10px] text-gray-400",children:lt.affiliateCode})]})]})]}),t.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700 h-full flex flex-col",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(qN,{size:18,className:"text-cyan-400"})," Network & Downline"]}),t.jsxs("div",{className:"mb-4 p-4 bg-black/40 rounded-xl border border-gray-700",children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Add Recruit to Downline"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{className:"flex-1 bg-zinc-900 border border-gray-600 rounded-lg p-2 text-xs text-white focus:border-cyan-500 outline-none",value:Ie,onChange:oe=>le(oe.target.value),children:[t.jsx("option",{value:"",children:"Select User to Link..."}),o.filter(oe=>{var Me,Be;return oe.id!==A.id&&((Me=oe.affiliateStats)==null?void 0:Me.parentId)!==A.id&&((Be=oe.affiliateStats)==null?void 0:Be.status)==="approved"}).sort((oe,Me)=>oe.name.localeCompare(Me.name)).map(oe=>t.jsxs("option",{value:oe.id,children:[oe.name," (",oe.affiliateCode,")"]},oe.id))]}),t.jsxs("button",{onClick:Ue,disabled:!Ie,className:"bg-cyan-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center gap-1",children:[t.jsx(rn,{size:14})," Add"]})]}),t.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:[A.name," will earn ",t.jsx("strong",{children:"1%"})," from sales made by users added here."]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 max-h-[300px] custom-scrollbar",children:Qe.length===0?t.jsx("div",{className:"text-center py-8 border border-dashed border-gray-800 rounded-xl",children:t.jsx("p",{className:"text-gray-500 text-xs",children:"No recruits in downline yet."})}):Qe.map(oe=>{var Me,Be;return t.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-zinc-900 rounded-full flex items-center justify-center text-xs font-bold text-gray-400 border border-gray-700",children:oe.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-white font-bold",children:oe.name}),t.jsx("p",{className:"text-[10px] text-gray-500",children:oe.affiliateCode})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-[10px] text-gray-500",children:["Sales: R",(Me=oe.affiliateStats)==null?void 0:Me.totalSalesValue.toFixed(0)]}),t.jsxs("p",{className:"text-xs text-green-400 font-bold",children:["+R",(((Be=oe.affiliateStats)==null?void 0:Be.totalSalesValue)||0*.01).toFixed(2)]})]})]},oe.id)})}),Qe.length>0&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold",children:"Passive Income Generated"}),t.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",ye.toFixed(2)]})]})]})]})]})]})]})]})},UO=()=>/iP(ad|hone|od)/.test(navigator.userAgent)&&!("standalone"in navigator&&navigator.standalone);function FO(){const[n,e]=S.useState(null),[s,r]=S.useState(!1),[i,o]=S.useState(!1),[c,u]=S.useState(()=>!!localStorage.getItem("spv_install_dismissed"));if(S.useEffect(()=>{(()=>{const E=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;if(r(!!E),E)try{const k=window.__SPV_USER_ID;k&&zm({userId:k})}catch{}})(),window.addEventListener("appinstalled",()=>r(!0));const j=E=>{E.preventDefault(),e(E)};return window.addEventListener("beforeinstallprompt",j),()=>{window.removeEventListener("beforeinstallprompt",j),window.removeEventListener("appinstalled",()=>r(!0))}},[]),s||c)return null;const f=async()=>{if(n){n.prompt();const v=await n.userChoice;v&&v.outcome==="accepted"&&e(null)}else o(!0)},h=()=>{try{localStorage.setItem("spv_install_dismissed","1"),u(!0),o(!1)}catch{u(!0)}},y=async()=>{try{const v=window.__SPV_USER_ID;v?await zm({userId:v}):Notification.requestPermission()}catch(v){console.warn("request notification permission failed",v)}};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:t.jsxs("div",{className:"bg-white text-black rounded-lg max-w-md w-full p-6",children:[t.jsx("h2",{className:"text-lg font-bold mb-4",children:"Install Spoil Me"}),t.jsx("p",{className:"mb-4",children:"For the best experience please install the app to your device."}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"btn btn-primary flex-1",onClick:f,children:"Download App"}),t.jsx("button",{className:"btn",onClick:()=>{o(!0)},children:"How to install"}),t.jsx("button",{className:"btn-ghost",onClick:h,children:"Dismiss"})]}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{className:"text-sm text-gray-600",onClick:y,children:"Enable Notifications"})}),i&&t.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded",children:UO()?t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"iOS Install Instructions"}),t.jsxs("ol",{className:"list-decimal list-inside mt-2",children:[t.jsxs("li",{children:["Tap the ",t.jsx("strong",{children:"Share"})," button (the square with an arrow)."]}),t.jsxs("li",{children:["Select ",t.jsx("strong",{children:"Add to Home Screen"}),"."]})]})]}):t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Install"}),t.jsxs("p",{className:"mt-2",children:["If the system install card is available, press ",t.jsx("strong",{children:"Download App"})," above."]})]})})]})})}const $O=()=>{const{weeklyWinners:n}=vt(),[e,s]=S.useState(new Date),[r,i]=S.useState("");return S.useEffect(()=>{const o=()=>{const u=new Date,f=new Date(u);f.setUTCDate(u.getUTCDate()+(7-u.getUTCDay())),f.setUTCHours(8,0,0,0),f<u&&f.setUTCDate(f.getUTCDate()+7),s(f)};o();const c=setInterval(o,6e4);return()=>clearInterval(c)},[]),S.useEffect(()=>{const o=setInterval(()=>{const c=new Date,u=e.getTime()-c.getTime();if(u>0){const f=Math.floor(u/864e5),h=Math.floor(u/(1e3*60*60)%24),y=Math.floor(u/1e3/60%60);i(`${f}d ${h}h ${y}m`)}else i("Drawing new winners...")},1e3);return()=>clearInterval(o)},[e]),t.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-12",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"inline-block bg-gradient-to-br from-yellow-500 to-orange-500 p-5 rounded-full shadow-[0_0_30px_rgba(250,204,21,0.5)]",children:t.jsx(Kn,{size:48,className:"text-white"})}),t.jsx("h1",{className:"font-cherry text-5xl text-white",children:"This Week's Winners!"}),t.jsx("p",{className:"text-gray-300 text-lg",children:"Congratulations to the lucky members of our R19 Spoil Me Package!"})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"text-center md:text-left",children:[t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:[t.jsx(ur,{size:20,className:"text-cyan-400"}),"Next Draw"]}),t.jsx("p",{className:"text-gray-400 text-sm",children:"A new set of winners is drawn every Sunday at 08:00 AM."})]}),t.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:r}),t.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Time Remaining"})]})]}),t.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/20 p-5 rounded-xl flex items-start gap-4",children:[t.jsx(ls,{size:24,className:"text-purple-400 shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-purple-300",children:"How to Claim Your Prize"}),t.jsx("p",{className:"text-sm text-gray-300/80 mt-1",children:"If you're a winner, a notification has been sent to your profile's inbox containing your unique voucher code. Simply apply it at checkout to claim your winnings!"})]})]}),t.jsx("div",{className:"bg-zinc-900 rounded-2xl border border-gray-800 overflow-hidden",children:t.jsx("div",{className:"divide-y divide-gray-800",children:n.map(o=>t.jsxs("div",{className:`p-4 flex items-center justify-between gap-4 transition-colors ${o.rank<=3?"bg-yellow-900/10":""}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm border-2 ${o.rank===1?"bg-yellow-500 border-yellow-300 text-black shadow-[0_0_10px_rgba(250,204,21,0.5)]":o.rank===2?"bg-gray-400 border-gray-200 text-black":o.rank===3?"bg-orange-600 border-orange-400 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:["#",o.rank]}),t.jsx("span",{className:"font-medium text-white",children:o.name})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("span",{className:"font-bold text-lg text-green-400",children:["R",o.prize.toFixed(2)]}),t.jsx("span",{className:"text-xs text-gray-500 block",children:"Voucher"})]})]},o.rank))})}),t.jsxs("div",{className:"mt-12 bg-gradient-to-r from-pink-600 to-purple-600 p-8 rounded-2xl text-center shadow-2xl",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Want to be on this list?"}),t.jsx("p",{className:"text-pink-100 mb-6 max-w-lg mx-auto",children:"Join the Spoil Me Package for just R19/month for your chance to win weekly vouchers and get exclusive member perks!"}),t.jsxs(Ve,{to:"/membership",className:"inline-flex items-center gap-2 px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-lg text-lg",children:["Join Now ",t.jsx(Qs,{size:20})]})]})]})},VO=()=>{const{weeklyWinners:n}=vt();return t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[t.jsx(Kn,{size:24,className:"text-yellow-400"}),' Weekly "Spoil Me" Winners']}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Review and manage the simulated weekly prize draw."})]})}),t.jsxs("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-5 rounded-xl flex items-start gap-4",children:[t.jsx(Gn,{size:24,className:"text-yellow-500 shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-yellow-400",children:"Simulation Mode Active"}),t.jsxs("p",{className:"text-sm text-yellow-200/80 mt-1",children:["This panel displays a ",t.jsx("strong",{className:"text-white",children:"simulated list of winners"})," for demonstration. In a live production environment, this page would be connected to your database to:"]}),t.jsxs("ul",{className:"list-disc pl-5 mt-3 text-xs text-yellow-200/70 space-y-1",children:[t.jsx("li",{children:'Show a list of all users subscribed to the "Spoil Me Package".'}),t.jsxs("li",{children:["Allow you to run the draw, which would randomly select ",t.jsx("strong",{children:"real users"})," from that list."]}),t.jsx("li",{children:"Automatically generate unique voucher codes and assign them to the winning user accounts."}),t.jsx("li",{children:"Send a notification to the winners' in-app inbox."})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg bg-cyan-900/30 text-cyan-400 border border-cyan-500/20",children:t.jsx(Ps,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Winners This Week"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:n.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg bg-green-900/30 text-green-400 border border-green-500/20",children:t.jsx(Um,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Prize Value"}),t.jsxs("p",{className:"text-[22px] font-bold text-white mt-1",children:["R",n.reduce((e,s)=>e+s.prize,0).toFixed(2)]})]})]}),t.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:t.jsxs("table",{className:"w-full text-left text-sm",children:[t.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4 w-20",children:"Rank"}),t.jsx("th",{className:"p-4",children:"Winner Name"}),t.jsx("th",{className:"p-4 text-right",children:"Prize Value"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:n.map(e=>t.jsxs("tr",{className:`group transition-colors ${e.rank<=3?"bg-yellow-900/10":"hover:bg-zinc-800/50"}`,children:[t.jsx("td",{className:"p-4",children:t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold border ${e.rank===1?"bg-yellow-500 border-yellow-400 text-black":e.rank===2?"bg-gray-400 border-gray-300 text-black":e.rank===3?"bg-orange-600 border-orange-500 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:e.rank})}),t.jsx("td",{className:"p-4 font-medium text-gray-200",children:e.name}),t.jsxs("td",{className:"p-4 text-right font-bold text-lg text-green-400",children:["R",e.prize.toFixed(2)]})]},e.rank))})]})})]})},vj=()=>{const[n,e]=S.useState([]),[s,r]=S.useState({enabled:!0,priceZAR:199,priceUSD:12,reachCount:7540}),[i,o]=S.useState(!0);S.useEffect(()=>{c()},[]);const c=async()=>{try{const y=await dp("settings","ad_config");y&&(e(y.packages||[]),r(y.socialAddon||s))}catch(y){console.error("Error loading ad config:",y)}finally{o(!1)}},u=async()=>{try{try{await ui("settings","ad_config",{packages:n,socialAddon:s})}catch{await di("settings",{id:"ad_config",packages:n,socialAddon:s})}alert("Configuration saved successfully!")}catch(y){console.error("Error saving ad config:",y),alert("Failed to save configuration.")}},f=(y,v,j)=>{const E=[...n];E[y]={...E[y],[v]:j},e(E)},h=(y,v)=>{r({...s,[y]:v})};return i?t.jsx("div",{className:"p-6",children:"Loading..."}):t.jsxs("div",{className:"p-6 bg-gray-900 text-white min-h-screen",children:[t.jsx("h1",{className:"text-3xl font-bold mb-8 text-yellow-400",children:"Marketing Settings"}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ad Packages"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full bg-gray-800 rounded-lg",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("th",{className:"p-4 text-left",children:"Name"}),t.jsx("th",{className:"p-4 text-left",children:"Duration (Days)"}),t.jsx("th",{className:"p-4 text-left",children:"Price (ZAR)"}),t.jsx("th",{className:"p-4 text-left",children:"Price (USD)"}),t.jsx("th",{className:"p-4 text-left",children:"Benefit"}),t.jsx("th",{className:"p-4 text-left",children:"Active"})]})}),t.jsx("tbody",{children:n.map((y,v)=>t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"text",value:y.name,onChange:j=>f(v,"name",j.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"number",value:y.durationDays,onChange:j=>f(v,"durationDays",parseInt(j.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"number",step:"0.01",value:y.priceZAR,onChange:j=>f(v,"priceZAR",parseFloat(j.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"number",step:"0.01",value:y.priceUSD,onChange:j=>f(v,"priceUSD",parseFloat(j.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"text",value:y.benefit,onChange:j=>f(v,"benefit",j.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),t.jsx("td",{className:"p-4",children:t.jsx("input",{type:"checkbox",checked:y.active,onChange:j=>f(v,"active",j.target.checked),className:"w-4 h-4"})})]},y.id))})]})})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Social Media Add-on"}),t.jsx("div",{className:"bg-gray-800 p-4 rounded-lg",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Enabled"}),t.jsx("input",{type:"checkbox",checked:s.enabled,onChange:y=>h("enabled",y.target.checked),className:"w-4 h-4"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (ZAR)"}),t.jsx("input",{type:"number",step:"0.01",value:s.priceZAR,onChange:y=>h("priceZAR",parseFloat(y.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (USD)"}),t.jsx("input",{type:"number",step:"0.01",value:s.priceUSD,onChange:y=>h("priceUSD",parseFloat(y.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Network Reach"}),t.jsx("input",{type:"number",value:s.reachCount,onChange:y=>h("reachCount",parseInt(y.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]})]})})]}),t.jsx("button",{onClick:u,className:"bg-yellow-400 text-black font-bold py-2 px-6 rounded-lg hover:bg-yellow-500 transition-colors",children:"Save Changes"})]})},BO=()=>{const n={totalRevenue:5400,topSpenders:[{artist:"Artist A",amount:1200},{artist:"Artist B",amount:950},{artist:"Artist C",amount:700}],slotUtilization:{homepageSlots:8,totalHomepageSlots:10,categorySlots:45}};return t.jsxs("div",{className:"p-4 md:p-6 bg-zinc-900 rounded-lg border border-gray-800",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Ad Revenue & Performance"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-black/30 p-6 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"Total Ad Revenue"}),t.jsxs("p",{className:"text-4xl font-bold text-white",children:["R",n.totalRevenue.toLocaleString()]}),t.jsx("p",{className:"text-gray-400",children:"this month"})]}),t.jsxs("div",{className:"bg-black/30 p-6 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"Homepage Slot Utilization"}),t.jsxs("p",{className:"text-4xl font-bold text-white",children:[n.slotUtilization.homepageSlots," / ",n.slotUtilization.totalHomepageSlots]}),t.jsx("p",{className:"text-gray-400",children:"slots filled"})]}),t.jsxs("div",{className:"bg-black/30 p-6 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-400 mb-2",children:"Active Category Ads"}),t.jsx("p",{className:"text-4xl font-bold text-white",children:n.slotUtilization.categorySlots}),t.jsx("p",{className:"text-gray-400",children:"promotions running"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-yellow-400 mb-4",children:"Top Spenders"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-300",children:[t.jsx("thead",{className:"bg-zinc-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Artist"}),t.jsx("th",{className:"px-4 py-2",children:"Total Spent"})]})}),t.jsx("tbody",{children:n.topSpenders.map((e,s)=>t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-medium text-white",children:e.artist}),t.jsxs("td",{className:"px-4 py-2 text-green-400",children:["R",e.amount.toLocaleString()]})]},s))})]})})]})]})},qO=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],WO={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:10},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:10}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:10},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:10}]},HO=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],GO=()=>{const[n,e]=S.useState("shipping"),[s,r]=S.useState(()=>{const k=localStorage.getItem("spv_pudo_costs");return k?JSON.parse(k):qO}),[i,o]=S.useState(()=>{const k=localStorage.getItem("spv_paxi_costs");return k?JSON.parse(k):WO}),[c,u]=S.useState(()=>{const k=localStorage.getItem("spv_door_to_door_costs");return k?JSON.parse(k):HO}),[f,h]=S.useState({}),y=k=>{h(_=>({..._,[k]:"Saved!"})),setTimeout(()=>{h(_=>({..._,[k]:""}))},2e3)};S.useEffect(()=>{},[]),S.useEffect(()=>{try{localStorage.setItem("spv_paxi_costs",JSON.stringify(i))}catch(k){console.error("Failed to save PAXI costs to storage",k)}},[i]),S.useEffect(()=>{},[]),S.useEffect(()=>{try{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(c))}catch(k){console.error("Failed to save Door to Door costs to storage",k)}},[c]);const v=(k,_,P)=>{const L=[...s],U=parseFloat(P)||0;L[k][_]=U,r(L)},j=(k,_,P,L)=>{const U={...i},F=parseFloat(L)||0;U[k][_][P]=F,o(U)},E=(k,_,P)=>{u(L=>L.map((F,J)=>{if(J!==k)return F;let te={...F};if(_==="initialCharge"||_==="ratePerKg"||_==="handleFee"||_==="boxFee"){const H=parseFloat(P);_==="ratePerKg"&&(isNaN(H)||P==="")?te[_]=null:te[_]=isNaN(H)?0:H}else te[_]=P;return te}))};return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[t.jsx(ts,{size:24,className:"text-green-400"})," Shipping Expenses & Supplies"]}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Reference for PUDO & PAXI costs and supplies."})]}),t.jsxs("div",{className:"rounded-xl border border-gray-700 bg-zinc-900",children:[t.jsxs("div",{className:"grid w-full grid-cols-3",children:[t.jsx("button",{onClick:()=>e("shipping"),className:`py-3 px-4 text-sm font-medium transition-colors ${n==="shipping"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Shipping Costs"}),t.jsx("button",{onClick:()=>e("ads"),className:`py-3 px-4 text-sm font-medium transition-colors ${n==="ads"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Ad Revenue"}),t.jsx("button",{onClick:()=>e("marketing"),className:`py-3 px-4 text-sm font-medium transition-colors ${n==="marketing"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Marketing Settings"})]}),t.jsxs("div",{className:"p-6",children:[n==="shipping"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg mb-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[t.jsx(mI,{size:20,className:"text-cyan-400"})," PUDO Box & Service Pricing"]}),t.jsxs("a",{href:"https://stationery.thecourierguy.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Order Stationery ",t.jsx(Zi,{size:16})]})]}),t.jsx("div",{className:"space-y-4 md:hidden",children:s.map((k,_)=>{const P=k.boxCost+(k.lockerToLockerCost||0)+k.lockerHandleFee;return k.boxCost+(k.doorToLockerCost||0)+k.doorHandleFee,t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-800",children:[t.jsx("h4",{className:"font-bold text-white mb-2",children:k.name}),t.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[t.jsxs("p",{children:["Dimensions: ",k.dimensions]}),t.jsxs("p",{children:["Max Weight: ",k.maxWeight]}),t.jsxs("p",{children:["Box Cost: R",k.boxCost]}),k.lockerToLockerCost&&t.jsxs("p",{children:["Locker to Locker: R",k.lockerToLockerCost]}),k.doorToLockerCost&&t.jsxs("p",{children:["Door to Locker: R",k.doorToLockerCost]}),t.jsxs("p",{className:"font-bold text-cyan-400",children:["Total: R",P.toFixed(2)]})]})]},_)})}),t.jsxs("div",{className:"hidden md:block mt-8",children:[t.jsx("h4",{className:"font-bold text-cyan-400 mb-2 mt-6",children:"Locker to Locker"}),t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[t.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Box"}),t.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),t.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),t.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),t.jsx("th",{className:"px-4 py-2",children:"Locker to Locker"}),t.jsx("th",{className:"px-4 py-2",children:"Locker Handle Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Total"}),t.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),t.jsx("tbody",{children:s.map((k,_)=>{if(k.lockerToLockerCost===null)return null;const P=k.boxCost+(k.lockerToLockerCost||0)+k.lockerHandleFee;return t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-bold text-white",children:k.name}),t.jsx("td",{className:"px-4 py-2",children:k.dimensions}),t.jsx("td",{className:"px-4 py-2",children:k.maxWeight}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.boxCost,onChange:L=>v(_,"boxCost",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.lockerToLockerCost||0,onChange:L=>v(_,"lockerToLockerCost",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.lockerHandleFee,onChange:L=>v(_,"lockerHandleFee",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsxs("td",{className:"px-4 py-2 font-bold text-cyan-400",children:["R",P.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2",children:[t.jsx("button",{className:"px-2 py-1 bg-cyan-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(s)),y(`pudo-lockerToLockerCost-${_}`)},children:""}),t.jsx("span",{className:"text-green-400 text-xs",children:f[`pudo-lockerToLockerCost-${_}`]})]})]},_)})})]}),t.jsx("h4",{className:"font-bold text-purple-400 mb-2 mt-6",children:"Door to Locker"}),t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400",children:[t.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Box"}),t.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),t.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),t.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),t.jsx("th",{className:"px-4 py-2",children:"Door to Locker"}),t.jsx("th",{className:"px-4 py-2",children:"Door Handle Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Total"}),t.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),t.jsx("tbody",{children:s.map((k,_)=>{if(k.doorToLockerCost===null)return null;const P=k.boxCost+(k.doorToLockerCost||0)+k.doorHandleFee;return t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-bold text-white",children:k.name}),t.jsx("td",{className:"px-4 py-2",children:k.dimensions}),t.jsx("td",{className:"px-4 py-2",children:k.maxWeight}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.boxCost,onChange:L=>v(_,"boxCost",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.doorToLockerCost||0,onChange:L=>v(_,"doorToLockerCost",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.doorHandleFee,onChange:L=>v(_,"doorHandleFee",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsxs("td",{className:"px-4 py-2 font-bold text-purple-400",children:["R",P.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2",children:[t.jsx("button",{className:"px-2 py-1 bg-purple-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(s)),y(`pudo-doorToLockerCost-${_}`)},children:""}),t.jsx("span",{className:"text-green-400 text-xs",children:f[`pudo-doorToLockerCost-${_}`]})]})]},_)})})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg mb-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[t.jsx(to,{size:20,className:"text-pink-400"})," PAXI Bag & Service Pricing"]}),t.jsxs("a",{href:"https://www.paxi.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["PAXI Website ",t.jsx(Zi,{size:16})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:Object.entries(i).map(([k,_])=>t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-pink-400 mb-2",children:k}),t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[t.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Bag"}),t.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Service Cost"}),t.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Total"}),t.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),t.jsx("tbody",{children:_.map((P,L)=>{let U=P.bag.includes("Small")?6:15;const F=U+P.serviceCost+P.handleFee;return t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-bold text-white",children:P.bag}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:U,onChange:J=>{},className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right",disabled:!0})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:P.serviceCost,onChange:J=>j(k,L,"serviceCost",J.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:P.handleFee,onChange:J=>j(k,L,"handleFee",J.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsxs("td",{className:"px-4 py-2 font-bold text-pink-400",children:["R",F.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2",children:[t.jsx("button",{className:"px-2 py-1 bg-pink-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_paxi_costs",JSON.stringify(i)),y(`paxi-${k}-${L}`)},children:""}),t.jsx("span",{className:"text-green-400 text-xs",children:f[`paxi-${k}-${L}`]})]})]},L)})})]})]},k))})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:t.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[t.jsx(hr,{size:20,className:"text-yellow-400"})," Door-to-Door Courier Pricing"]})}),t.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[t.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Service"}),t.jsx("th",{className:"px-4 py-2",children:"Initial Weight"}),t.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Initial Charge"}),t.jsx("th",{className:"px-4 py-2",children:"Rate per Kg"}),t.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),t.jsx("th",{className:"px-4 py-2",children:"Total"}),t.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),t.jsx("tbody",{children:c.map((k,_)=>{const P=k.boxFee+k.initialCharge+(k.ratePerKg!==null?k.ratePerKg:0)+k.handleFee;return t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{className:"px-4 py-2 font-bold text-white",children:k.service}),t.jsx("td",{className:"px-4 py-2",children:k.initialWeight}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.boxFee,onChange:L=>E(_,"boxFee",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.initialCharge,onChange:L=>E(_,"initialCharge",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsx("td",{className:"px-4 py-2",children:k.ratePerKg!==null?t.jsx("input",{type:"number",value:k.ratePerKg,onChange:L=>E(_,"ratePerKg",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"}):"-"}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("input",{type:"number",value:k.handleFee,onChange:L=>E(_,"handleFee",L.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),t.jsxs("td",{className:"px-4 py-2 font-bold text-yellow-400",children:["R",P.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2",children:[t.jsx("button",{className:"px-2 py-1 bg-yellow-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(c)),y(`doorToDoor-${_}`)},children:""}),t.jsx("span",{className:"text-green-400 text-xs",children:f[`doorToDoor-${_}`]})]})]},_)})})]})]})]}),n==="ads"&&t.jsx(BO,{}),n==="marketing"&&t.jsx(vj,{})]})]})]})},kv=n=>{switch(n){case"Pending":return"bg-yellow-900/30 text-yellow-400 border-yellow-500/30";case"Processing":return"bg-blue-900/30 text-blue-400 border-blue-500/30";case"Shipped":return"bg-cyan-900/30 text-cyan-400 border-cyan-500/30";case"Delivered":return"bg-green-900/30 text-green-400 border-green-500/30";case"Cancelled":return"bg-red-900/30 text-red-400 border-red-500/30";default:return"bg-gray-800 text-gray-400"}},KO=()=>{const{orders:n,updateOrder:e,deleteOrder:s}=vt(),[r,i]=S.useState(""),[o,c]=S.useState(""),[u,f]=S.useState(null),[h,y]=S.useState(""),v=S.useMemo(()=>n.filter(_=>{const P=r.toLowerCase();return _.orderNumber.toLowerCase().includes(P)||_.customerName.toLowerCase().includes(P)||_.customerEmail.toLowerCase().includes(P)}).filter(_=>o?_.status===o:!0),[n,r,o]),j=_=>{f(_),y(_.status)},E=async()=>{u&&h&&(await e({...u,status:h}),f(null),y(""))},k=async _=>{window.confirm("Are you sure you want to delete this order? This action cannot be undone.")&&(await s(_),f(null))};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Order Management"}),t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[t.jsx(fa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsx("input",{type:"text",placeholder:"Search by Order #, Name, or Email...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:r,onChange:_=>i(_.target.value)})]}),t.jsxs("div",{className:"relative",children:[t.jsx(lc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),t.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none appearance-none",value:o,onChange:_=>c(_.target.value),children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"Processing",children:"Processing"}),t.jsx("option",{value:"Shipped",children:"Shipped"}),t.jsx("option",{value:"Delivered",children:"Delivered"}),t.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),t.jsxs("div",{className:"hidden md:block bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[t.jsxs("table",{className:"w-full text-left text-sm",children:[t.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:"Order #"}),t.jsx("th",{className:"p-4",children:"Date"}),t.jsx("th",{className:"p-4",children:"Customer"}),t.jsx("th",{className:"p-4 text-right",children:"Total"}),t.jsx("th",{className:"p-4",children:"Status"}),t.jsx("th",{className:"p-4"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-800",children:v.map(_=>t.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[t.jsx("td",{className:"p-4 font-mono text-cyan-400",children:_.orderNumber}),t.jsx("td",{className:"p-4 text-gray-400",children:new Date(_.date).toLocaleDateString()}),t.jsxs("td",{className:"p-4",children:[t.jsx("div",{className:"font-medium text-gray-200",children:_.customerName}),t.jsx("div",{className:"text-xs text-gray-500",children:_.customerEmail})]}),t.jsxs("td",{className:"p-4 text-right font-bold text-green-400",children:["R",_.total.toFixed(2)]}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${kv(_.status)}`,children:_.status})}),t.jsx("td",{className:"p-4 text-right",children:t.jsx("button",{onClick:()=>j(_),className:"text-xs text-gray-400 hover:text-white underline opacity-0 group-hover:opacity-100 transition-opacity",children:"View Details"})})]},_.id))})]}),v.length===0&&t.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),t.jsxs("div",{className:"md:hidden space-y-4",children:[v.map(_=>t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-mono text-cyan-400 text-sm",children:_.orderNumber}),t.jsx("div",{className:"text-xs text-gray-500",children:new Date(_.date).toLocaleString()})]}),t.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${kv(_.status)}`,children:_.status})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-200 text-sm",children:_.customerName}),t.jsx("div",{className:"text-xs text-gray-500",children:_.customerEmail})]}),t.jsxs("div",{className:"flex justify-between items-end pt-2 border-t border-gray-800",children:[t.jsx("button",{onClick:()=>j(_),className:"text-xs text-gray-400 hover:text-white underline",children:"View Details"}),t.jsxs("div",{className:"font-bold text-green-400 text-lg",children:["R",_.total.toFixed(2)]})]})]},_.id)),v.length===0&&t.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),u&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>f(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-2xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:"Order Details"}),t.jsx("p",{className:"font-mono text-cyan-400",children:u.orderNumber})]}),t.jsx("button",{onClick:()=>f(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white",children:t.jsx(cs,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[t.jsx($r,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-gray-300",children:u.customerName})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[t.jsx(Cc,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-gray-300",children:u.customerEmail})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[t.jsx($a,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-gray-300",children:new Date(u.date).toLocaleString()})]})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800",children:[t.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[t.jsx(hr,{size:18,className:"text-cyan-400"}),"Shipping Information"]}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("p",{children:[t.jsx("strong",{className:"text-gray-400",children:"Method:"})," ",t.jsx("span",{className:"text-gray-200",children:u.shippingMethod})]}),t.jsxs("p",{children:[t.jsx("strong",{className:"text-gray-400",children:"Details:"})," ",t.jsx("span",{className:"text-gray-200",children:u.shippingDetails})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[t.jsx(ca,{size:18,className:"text-pink-400"}),"Items (",u.items.reduce((_,P)=>_+P.quantity,0),")"]}),u.items.map((_,P)=>t.jsxs("div",{className:"flex items-center gap-4 bg-black/40 p-3 rounded-lg border border-gray-800",children:[t.jsx("img",{src:_.images[0],alt:_.name,className:"w-12 h-12 rounded object-cover border border-gray-700"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-bold text-white",children:_.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[_.selectedSize&&`Size: ${_.selectedSize}`,_.selectedMaterial&&`Material: ${_.selectedMaterial}`]})]}),t.jsxs("div",{className:"text-sm text-gray-400",children:["x",_.quantity]}),t.jsxs("div",{className:"text-sm font-bold text-white",children:["R",(_.price*_.quantity).toFixed(2)]})]},P))]}),t.jsxs("div",{className:"pt-4 border-t border-gray-800 text-sm text-right space-y-2",children:[t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("span",{className:"text-gray-400",children:"Subtotal:"})," ",t.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",(u.total-u.shippingCost).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("span",{className:"text-gray-400",children:"Shipping:"})," ",t.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",u.shippingCost.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-end gap-4 font-bold text-lg",children:[t.jsx("span",{className:"text-white",children:"Total:"})," ",t.jsxs("span",{className:"text-green-400 w-24 text-left",children:["R",u.total.toFixed(2)]})]})]})]}),t.jsxs("div",{className:"p-6 border-t border-gray-800 bg-zinc-950/50 flex flex-col md:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.jsx("label",{className:"text-sm font-bold text-white",children:"Status:"}),t.jsxs("select",{value:h,onChange:_=>y(_.target.value),className:"flex-1 bg-black border border-gray-700 rounded-lg p-2 text-white text-sm focus:border-pink-500 outline-none",children:[t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"Processing",children:"Processing"}),t.jsx("option",{value:"Shipped",children:"Shipped"}),t.jsx("option",{value:"Delivered",children:"Delivered"}),t.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),t.jsx("button",{onClick:E,className:"px-4 py-2 bg-pink-600 text-white font-bold rounded-lg text-sm hover:bg-pink-500",children:"Save"})]}),t.jsxs("button",{onClick:()=>k(u.id),className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 text-red-400 text-sm font-bold hover:bg-red-900/20 rounded-lg border border-red-900/0 hover:border-red-900/30 transition-colors",children:[t.jsx(Lr,{size:16})," Delete Order"]})]})]})]})]})},JO=()=>t.jsx("div",{className:"bg-gray-900 text-white min-h-screen p-8",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("h1",{className:"text-4xl font-bold mb-6 text-cyan-400",children:"Terms and Conditions"}),t.jsxs("div",{className:"space-y-6 text-gray-300",children:[t.jsx("p",{children:"Welcome to Spoil Me. These terms and conditions outline the rules and regulations for the use of Spoil Me's Website, located at spoilme.com."}),t.jsx("p",{children:"By accessing this website we assume you accept these terms and conditions. Do not continue to use Spoil Me if you do not agree to take all of the terms and conditions stated on this page."}),t.jsx("h2",{className:"text-2xl font-semibold text-cyan-400 mt-4",children:"Cookies"}),t.jsx("p",{children:"We employ the use of cookies. By accessing Spoil Me, you agreed to use cookies in agreement with the Spoil Me's Privacy Policy."}),t.jsx("h2",{className:"text-2xl font-semibold text-cyan-400 mt-4",children:"License"}),t.jsx("p",{children:"Unless otherwise stated, Spoil Me and/or its licensors own the intellectual property rights for all material on Spoil Me. All intellectual property rights are reserved. You may access this from Spoil Me for your own personal use subjected to restrictions set in these terms and conditions."})]})]})}),YO="modulepreload",ZO=function(n){return"/"+n},_v={},Bp=function(e,s,r){let i=Promise.resolve();if(s&&s.length>0){let c=function(h){return Promise.all(h.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=c(s.map(h=>{if(h=ZO(h),h in _v)return;_v[h]=!0;const y=h.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const j=document.createElement("link");if(j.rel=y?"stylesheet":YO,y||(j.as="script"),j.crossOrigin="",j.href=h,f&&j.setAttribute("nonce",f),document.head.appendChild(j),y)return new Promise((E,k)=>{j.addEventListener("load",E),j.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},XO=ml("App",{web:()=>Bp(()=>import("./web-BhjcrdAj.js"),[]).then(n=>new n.AppWeb)});function QO(n){n.CapacitorUtils.Synapse=new Proxy({},{get(e,s){return new Proxy({},{get(r,i){return(o,c,u)=>{const f=n.Capacitor.Plugins[s];if(f===void 0){u(new Error(`Capacitor plugin ${s} not found`));return}if(typeof f[i]!="function"){u(new Error(`Method ${i} not found in Capacitor plugin ${s}`));return}(async()=>{try{const h=await f[i](o);c(h)}catch(h){u(h)}})()}}})}})}function eL(n){n.CapacitorUtils.Synapse=new Proxy({},{get(e,s){return n.cordova.plugins[s]}})}function tL(n=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!n?QO(window):window.cordova!==void 0&&eL(window))}var Vu;(function(n){n.Documents="DOCUMENTS",n.Data="DATA",n.Library="LIBRARY",n.Cache="CACHE",n.External="EXTERNAL",n.ExternalStorage="EXTERNAL_STORAGE",n.ExternalCache="EXTERNAL_CACHE",n.LibraryNoCloud="LIBRARY_NO_CLOUD",n.Temporary="TEMPORARY"})(Vu||(Vu={}));var Cv;(function(n){n.UTF8="utf8",n.ASCII="ascii",n.UTF16="utf16"})(Cv||(Cv={}));const Ev=ml("Filesystem",{web:()=>Bp(()=>import("./web-Cy7ei2CY.js"),[]).then(n=>new n.FilesystemWeb)});tL();const sL=ml("FileOpener"),nL=()=>{const[n,e]=S.useState(null),[s,r]=S.useState(!1),i=S.useCallback(async()=>{if(Du.isNativePlatform())try{const c=await fetch("https://spoilme-edee0.web.app/version.json",{cache:"no-store"});if(!c.ok)throw new Error("Failed to fetch version.json");const u=await c.json(),h=(await XO.getInfo()).version;u.version&&u.version!==h&&e(u)}catch(c){console.error("Error checking for app update:",c)}},[]),o=S.useCallback(async()=>{if(n){r(!0);try{if(n.apkUrl===""){alert("Update downloaded. Please restart the app.");return}const c=`Spoil-Me-Vintage-${n.version}.apk`,u=await fetch(n.apkUrl);if(!u.ok)throw new Error("Failed to download APK");const f=await u.arrayBuffer(),h=await new Promise((v,j)=>{const E=new FileReader;E.onload=()=>v(E.result.split(",")[1]),E.onerror=j,E.readAsDataURL(new Blob([f]))});await Ev.writeFile({path:c,data:h,directory:Vu.External});const y=await Ev.getUri({directory:Vu.External,path:c});await sL.open({filePath:y.uri,contentType:"application/vnd.android.package-archive"})}catch(c){console.error("Error performing app update:",c)}finally{r(!1),e(null)}}},[n]);return S.useEffect(()=>{i()},[i]),{updateAvailable:n,isDownloading:s,performUpdate:o,dismissUpdate:()=>e(null)}},rL=({version:n,isDownloading:e,onUpdate:s,onDismiss:r})=>t.jsx("div",{className:"fixed bottom-4 right-4 z-[100] w-full max-w-sm",children:t.jsx("div",{className:"bg-zinc-800 border-2 border-pink-500 rounded-2xl p-6 shadow-[0_0_40px_rgba(236,72,153,0.3)] animate-in slide-in-from-bottom-10 duration-500",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx(_c,{size:24,className:"text-white"})})}),t.jsxs("div",{className:"ml-4 flex-1",children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"New Update Available!"}),t.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Version ",n," is ready to be installed."]}),t.jsxs("div",{className:"mt-4 flex space-x-3",children:[t.jsx("button",{onClick:s,disabled:e,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-white text-black font-bold rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e?t.jsxs(t.Fragment,{children:[t.jsx(jI,{size:18,className:"animate-spin mr-2"}),"Downloading..."]}):t.jsxs(t.Fragment,{children:[t.jsx(_c,{size:18,className:"mr-2"}),"Update Now"]})}),t.jsx("button",{onClick:r,disabled:e,className:"px-3 py-2 text-gray-400 hover:text-white transition-colors",children:"Later"})]})]}),t.jsx("div",{className:"ml-3 flex-shrink-0",children:t.jsx("button",{onClick:r,disabled:e,className:"text-gray-500 hover:text-gray-300",children:t.jsx(cs,{size:20})})})]})})});function iL(n={}){const{immediate:e=!1,onNeedRefresh:s,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:c}=n;let u,f;const h=async(v=!0)=>{await f};async function y(){if("serviceWorker"in navigator){if(u=await Bp(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/service-worker.js",{scope:"/",type:"classic"})).catch(v=>{c==null||c(v)}),!u)return;u.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),u.addEventListener("installed",v=>{v.isUpdate||r==null||r()}),u.register({immediate:e}).then(v=>{o?o("/service-worker.js",v):i==null||i(v)}).catch(v=>{c==null||c(v)})}}return f=y(),h}function aL(n={}){const{immediate:e=!0,onNeedRefresh:s,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:c}=n,[u,f]=S.useState(!1),[h,y]=S.useState(!1),[v]=S.useState(()=>iL({immediate:e,onOfflineReady(){y(!0),r==null||r()},onNeedRefresh(){f(!0),s==null||s()},onRegistered:i,onRegisteredSW:o,onRegisterError:c}));return{needRefresh:[u,f],offlineReady:[h,y],updateServiceWorker:v}}const oL=()=>{const{needRefresh:n,updateServiceWorker:e}=aL();return n?t.jsx("div",{style:{bottom:"env(safe-area-inset-bottom, 16px)"},className:"fixed left-4 right-4 md:left-auto md:right-6 md:bottom-6 z-60 flex justify-center",children:t.jsxs("div",{className:"max-w-xl w-full bg-zinc-900 border border-pink-500 text-white rounded-xl p-3 flex items-center justify-between gap-4 shadow-lg",children:[t.jsx("div",{className:"text-sm",children:"New version available!"}),t.jsx("div",{className:"flex gap-2",children:t.jsx("button",{className:"bg-pink-600 hover:bg-pink-500 text-white px-3 py-2 rounded-md text-sm font-semibold",onClick:()=>e(!0),children:"Refresh"})})]})}):null},lL=()=>/iP(ad|hone|od)/.test(navigator.userAgent)&&!("standalone"in navigator&&navigator.standalone),cL=()=>{const[n,e]=S.useState(!1);if(S.useEffect(()=>{try{const r=!!localStorage.getItem("spv_install_dismissed"),i=!!localStorage.getItem("spv_install_banner_dismissed"),o=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;lL()&&r&&!i&&!o&&e(!0)}catch{}},[]),!n)return null;const s=()=>{try{localStorage.setItem("spv_install_banner_dismissed","1")}catch{}e(!1)};return t.jsxs("div",{className:"fixed left-4 right-4 bottom-4 z-50 flex items-center justify-between bg-white/10 backdrop-blur-sm border border-white/10 rounded-xl p-3 gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-white/8 rounded flex items-center justify-center",children:""}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold",children:"Install app for the best experience"}),t.jsx("div",{className:"text-xs text-gray-300",children:"Tap Share  Add to Home Screen"})]})]}),t.jsx("div",{children:t.jsx("button",{onClick:s,className:"text-sm text-gray-200 px-2 py-1 rounded",children:"X"})})]})},dL=()=>{const{products:n}=vt(),[e,s]=S.useState(""),[r,i]=S.useState(null),[o,c]=S.useState(""),[u,f]=S.useState(""),[h,y]=S.useState(""),[v,j]=S.useState(""),[E,k]=S.useState([]);S.useEffect(()=>{const F=localStorage.getItem("vaultItems");F&&k(JSON.parse(F))},[]);const _=n.filter(F=>F.name.toLowerCase().includes(e.toLowerCase())),P=()=>{if(!r||!o||!u||!h)return;const F={id:Date.now().toString(),productId:r.id,productName:r.name,productImage:r.images[0],vaultPriceZAR:parseFloat(o),vaultPriceUSD:parseFloat(u),vaultStock:parseInt(h),goLiveDate:v||new Date().toISOString().split("T")[0],isActive:!1},J=[...E,F];k(J),localStorage.setItem("vaultItems",JSON.stringify(J)),i(null),c(""),f(""),y(""),j("")},L=F=>{const J=E.map(te=>te.id===F?{...te,isActive:!te.isActive}:te);k(J),localStorage.setItem("vaultItems",JSON.stringify(J))},U=F=>{const J=E.filter(te=>te.id!==F);k(J),localStorage.setItem("vaultItems",JSON.stringify(J))};return t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-3",children:[t.jsx(Dt,{className:"text-yellow-400",size:28}),"Vault Management"]})}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-6 flex items-center gap-3",children:[t.jsx(rn,{size:20,className:"text-green-400"}),"Add Product to Vault"]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Search & Select Product"}),t.jsxs("div",{className:"relative",children:[t.jsx(fa,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),t.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 pl-10 text-white",value:e,onChange:F=>s(F.target.value)})]})]}),t.jsx("div",{className:"max-h-64 overflow-y-auto bg-zinc-800 rounded border border-gray-600",children:_.map(F=>t.jsx("div",{className:`p-3 border-b border-gray-700 cursor-pointer hover:bg-zinc-700 ${(r==null?void 0:r.id)===F.id?"bg-cyan-900/30 border-cyan-500":""}`,onClick:()=>i(F),children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:F.images[0],className:"w-12 h-12 rounded object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-medium",children:F.name}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Stock: ",F.stock]})]})]})},F.id))})]}),t.jsxs("div",{className:"space-y-4",children:[r&&t.jsxs("div",{className:"bg-zinc-800 p-4 rounded border border-cyan-500/30",children:[t.jsx("h4",{className:"text-white font-medium mb-2",children:"Selected Product"}),t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("img",{src:r.images[0],className:"w-16 h-16 rounded object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white",children:r.name}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Stock: ",r.stock]})]})]}),t.jsxs("div",{className:"bg-zinc-700 p-3 rounded border border-gray-600",children:[t.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Current Product Price"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("p",{className:"text-green-400 font-bold",children:["R",r.price]}),t.jsxs("p",{className:"text-blue-400 font-bold",children:["$",r.priceUSD]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Price (ZAR)"}),t.jsx("input",{type:"number",placeholder:"e.g., 10",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:o,onChange:F=>c(F.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Price (USD)"}),t.jsx("input",{type:"number",placeholder:"e.g., 1",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:u,onChange:F=>f(F.target.value)})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Stock Quantity"}),t.jsx("input",{type:"number",placeholder:"e.g., 50",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:h,onChange:F=>y(F.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Go Live Date"}),t.jsx("input",{type:"date",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:v,onChange:F=>j(F.target.value)})]}),t.jsxs("button",{onClick:P,disabled:!r||!o||!u||!h,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-gray-600 text-white font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:[t.jsx(rn,{size:16}),"Add to Vault Batch"]})]})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-6 flex items-center gap-3",children:[t.jsx(to,{size:20,className:"text-purple-400"}),"Vault Items (",E.length,")"]}),t.jsxs("div",{className:"space-y-4",children:[E.map(F=>t.jsx("div",{className:"bg-zinc-800 p-4 rounded border border-gray-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:F.productImage,className:"w-16 h-16 rounded object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-medium",children:F.productName}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Vault: R",F.vaultPriceZAR," / $",F.vaultPriceUSD," | Stock: ",F.vaultStock]}),t.jsxs("p",{className:"text-gray-400 text-sm",children:["Go Live: ",F.goLiveDate]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${F.isActive?"bg-green-900/30 text-green-400":"bg-gray-700 text-gray-400"}`,children:F.isActive?"ACTIVE":"INACTIVE"})}),t.jsx("button",{onClick:()=>L(F.id),className:`px-3 py-1 rounded text-xs font-bold transition-colors ${F.isActive?"bg-red-600 hover:bg-red-500 text-white":"bg-green-600 hover:bg-green-500 text-white"}`,children:F.isActive?"Deactivate":"Activate"}),t.jsx("button",{onClick:()=>U(F.id),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors",children:"Remove"})]})]})},F.id)),E.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-400",children:[t.jsx(Dt,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No items in the vault yet. Add some products above!"})]})]})]})]})},uL=()=>{const{user:n,currency:e,addToCart:s,products:r}=vt(),i=cn(),[o,c]=S.useState([]),[u,f]=S.useState([]),[h,y]=S.useState(""),[v,j]=S.useState(""),[E,k]=S.useState("newest"),[_,P]=S.useState(!1),[L,U]=S.useState(!1),[F,J]=S.useState(null);S.useEffect(()=>{const C=localStorage.getItem("vaultItems");if(C){const I=JSON.parse(C).filter($=>$.isActive);c(I),f(I)}},[]),S.useEffect(()=>{let C=o;h&&(C=C.filter(I=>I.productName.toLowerCase().includes(h.toLowerCase()))),v&&(C=C.filter(I=>I.productName.toLowerCase().includes(v.toLowerCase()))),C.sort((I,$)=>{switch(E){case"price-low":return(e==="ZAR"?I.vaultPriceZAR:I.vaultPriceUSD)-(e==="ZAR"?$.vaultPriceZAR:$.vaultPriceUSD);case"price-high":return(e==="ZAR"?$.vaultPriceZAR:$.vaultPriceUSD)-(e==="ZAR"?I.vaultPriceZAR:I.vaultPriceUSD);case"newest":default:return new Date($.goLiveDate).getTime()-new Date(I.goLiveDate).getTime()}}),f(C)},[o,h,v,E,e]);const te=n.membershipTier==="deluxe"||n.membershipTier==="Deluxe Boss"||n.membershipTier==="Deluxe Vault",H=C=>{if(!te){J(C),U(!0);return}const I=n.membershipMonths||0;let $=5;I>=3?$=10:I>=2&&($=7);const O=JSON.parse(localStorage.getItem(`vaultPurchases_${n.id}_${new Date().getMonth()}`)||"[]");if(O.length>=$){const V=I>=3?"You have reached your monthly limit of 10 Vault items. Keep your subscription active for unlimited access!":`You have reached your limit of ${$} Vault items this month. Keep your subscription to unlock ${I>=2?"unlimited":"7"} items next month!`;alert(V);return}s({id:C.id,code:`VAULT-${C.id}`,name:C.productName,slug:`vault-${C.id}`,description:C.productName,price:e==="ZAR"?C.vaultPriceZAR:C.vaultPriceUSD,priceUSD:e==="USD"?C.vaultPriceUSD:C.vaultPriceZAR/18,costPrice:e==="ZAR"?C.vaultPriceZAR:C.vaultPriceUSD,category:"Vault",type:"Other",status:"published",stock:1,images:[C.productImage],tags:["vault"],createdAt:new Date().toISOString()},{quantity:1}),O.push(C.id),localStorage.setItem(`vaultPurchases_${n.id}_${new Date().getMonth()}`,JSON.stringify(O)),alert("Added to cart!")},M=C=>{U(!1),C==="subscribe"?i("/membership"):alert("Redirecting to regular product page...")};return t.jsxs("div",{className:"py-8 space-y-8",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-center gap-3",children:[t.jsx(Dt,{className:"text-yellow-400",size:40}),t.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"THE SECRET VAULT"}),t.jsx("button",{onClick:()=>P(!_),className:"text-gray-400 hover:text-white transition-colors",children:t.jsx(mu,{size:20})})]}),t.jsx("p",{className:"font-architects text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"Exclusive Clearance & Samples for Deluxe Members."}),_&&t.jsxs("div",{className:"bg-zinc-900 border border-cyan-500/30 p-4 rounded-lg max-w-md mx-auto text-left",children:[t.jsx("h4",{className:"text-cyan-400 font-bold mb-2",children:"How The Vault Works:"}),t.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[t.jsxs("li",{children:[" ",t.jsx("strong",{className:"text-white",children:"Exclusive Access:"})," Only Deluxe Members can purchase."]}),t.jsxs("li",{children:[" ",t.jsx("strong",{className:"text-white",children:"Loyalty Limits:"})," Month 1 members can buy 5 items. Limits increase every month."]}),t.jsxs("li",{children:[" ",t.jsx("strong",{className:"text-white",children:"First Come, First Serve:"})," Stock is limited. Once it's gone, it's gone."]}),t.jsxs("li",{children:[" ",t.jsx("strong",{className:"text-white",children:"As-Is:"})," Items may be samples or have minor imperfections."]})]})]})]}),t.jsx("div",{className:"bg-zinc-900 border border-gray-700 p-4 rounded-xl sticky top-4 z-10",children:t.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Type"}),t.jsxs("select",{value:h,onChange:C=>y(C.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[t.jsx("option",{value:"",children:"All Types"}),t.jsx("option",{value:"earring",children:"Earrings"}),t.jsx("option",{value:"ring",children:"Rings"}),t.jsx("option",{value:"necklace",children:"Necklaces"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Color"}),t.jsxs("select",{value:v,onChange:C=>j(C.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[t.jsx("option",{value:"",children:"All Colors"}),t.jsx("option",{value:"silver",children:"Silver"}),t.jsx("option",{value:"gold",children:"Gold"}),t.jsx("option",{value:"rose",children:"Rose Gold"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Sort By"}),t.jsxs("select",{value:E,onChange:C=>k(C.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[t.jsx("option",{value:"newest",children:"Newest Added"}),t.jsx("option",{value:"price-low",children:"Price: Low to High"}),t.jsx("option",{value:"price-high",children:"Price: High to Low"})]})]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:u.map(C=>t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-4 hover:border-cyan-500/50 transition-colors",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:C.productImage,className:"w-full h-48 object-cover rounded-lg mb-4",alt:""}),C.vaultStock<5&&t.jsx("div",{className:"absolute top-2 right-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded",children:"Almost Gone!"})]}),t.jsx("h3",{className:"text-white font-medium mb-2",children:C.productName}),t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("span",{className:"text-2xl font-bold text-green-400",children:e==="ZAR"?`R${C.vaultPriceZAR}`:`$${C.vaultPriceUSD}`}),t.jsx("span",{className:"text-gray-500 line-through text-sm",children:(()=>{const I=r.find($=>$.id===C.productId);return I?e==="ZAR"?`R${I.price}`:`$${I.priceUSD}`:e==="ZAR"?`R${C.vaultPriceZAR*10}`:`$${C.vaultPriceUSD*10}`})()})]}),t.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:["Stock: ",C.vaultStock," left"]}),t.jsx("button",{onClick:()=>H(C),className:`w-full py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2 ${te?"bg-cyan-600 hover:bg-cyan-500 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:te?t.jsxs(t.Fragment,{children:[t.jsx(fl,{size:16}),"ADD TO CART"]}):t.jsxs(t.Fragment,{children:[t.jsx(la,{size:16})," UNLOCK PRICE"]})})]},C.id))}),u.length===0&&t.jsxs("div",{className:"text-center py-16",children:[t.jsx(Dt,{size:64,className:"mx-auto mb-4 text-gray-600"}),t.jsx("h3",{className:"text-xl font-bold text-gray-400 mb-2",children:"The Vault is Empty"}),t.jsx("p",{className:"text-gray-500",children:"Check back later for exclusive deals!"})]}),L&&F&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>U(!1)}),t.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-md w-full shadow-[0_0_50px_rgba(236,72,153,0.4)]",children:[t.jsx("button",{onClick:()=>U(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:""}),t.jsxs("div",{className:"text-center mb-6",children:[t.jsx(la,{size:48,className:"mx-auto mb-4 text-yellow-400"}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Access Denied"}),t.jsx("p",{className:"text-gray-300",children:"You have found The Secret Vault, but you don't have the key!"})]}),t.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg mb-6",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[t.jsx("img",{src:F.productImage,className:"w-16 h-16 rounded object-cover",alt:""}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-medium",children:F.productName}),t.jsxs("p",{className:"text-green-400 font-bold",children:["Vault Price: ",e==="ZAR"?`R${F.vaultPriceZAR}`:`$${F.vaultPriceUSD}`]})]})]}),t.jsxs("p",{className:"text-sm text-gray-300",children:["This ",t.jsx("strong",{children:e==="ZAR"?`R${F.vaultPriceZAR}`:`$${F.vaultPriceUSD}`})," deal is reserved exclusively for Deluxe Members."]})]}),t.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"Want this item? Subscribe to the Deluxe Package today and get instant access to the Vault, plus R150 monthly store credit."}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>M("subscribe"),className:"w-full py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-lg transition-colors",children:"BECOME A DELUXE MEMBER - R199 / $25"}),t.jsx("button",{onClick:()=>M("payfull"),className:"w-full py-2 text-gray-400 hover:text-white text-sm underline",children:"No thanks, I'll pay full price"})]})]})]})]})},hL=()=>{const{user:n}=vt(),[e,s]=S.useState(""),[r,i]=S.useState([]),[o,c]=S.useState(null),[u,f]=S.useState(!1),[h,y]=S.useState(!1),[v,j]=S.useState(""),[E,k]=S.useState(7),[_,P]=S.useState(""),[L,U]=S.useState(!1),[F,J]=S.useState(0),[te,H]=S.useState([]),[M,C]=S.useState(null),[I,$]=S.useState(!1),[O,V]=S.useState(!0),[A,se]=S.useState([]),fe=S.useRef(null),[je,Ie]=S.useState(20),[le,be]=S.useState("all"),[we,Z]=S.useState("all"),ce=["Spoil Me","Basic","Premium","Deluxe Boss","Insider Club","Gold Member","Deluxe Vault"],W=async()=>{if(!o&&!_||!v||!E||!functions)return;let ye=o==null?void 0:o.id;if(!ye&&_)try{const Xe=await os("users",{filters:{email:_},limit:1});if(!Xe||Xe.length===0){alert("User not found with that email.");return}ye=Xe[0].id}catch(Xe){console.error("Error finding user:",Xe),alert("Error finding user.");return}try{await Qi("grantTrial",{userId:ye,plan:v,days:E}),alert("Trial granted successfully!"),y(!1),c(null),j(""),k(7),P("")}catch(Xe){console.error("Error granting trial:",Xe),alert("Failed to grant trial")}},ue=async()=>{if(!(!o||!functions))try{await Qi("adjustStoreCredit",{userId:o.id,amount:F}),alert("Store credit adjusted successfully!"),U(!1),c(null),J(0)}catch(ye){console.error("Error adjusting credit:",ye),alert("Failed to adjust credit")}},B=ye=>{switch(ye){case"active":return"text-green-400";case"trial":return"text-blue-400";case"expired":return"text-red-400";case"cancelled":return"text-gray-400";default:return"text-gray-400"}},Ce=ye=>{switch(ye){case"active":return t.jsx(eo,{className:"w-4 h-4"});case"trial":return t.jsx(ur,{className:"w-4 h-4"});case"expired":return t.jsx(Fm,{className:"w-4 h-4"});default:return t.jsx(Fm,{className:"w-4 h-4"})}},Pe=async()=>{$(!0);try{const ye=await os("users",{orderBy:{column:"created_at",ascending:!1},limit:20});H(ye||[]),V(((ye==null?void 0:ye.length)||0)===20)}catch(ye){console.error("Error loading users:",ye)}finally{$(!1)}},Ue=async()=>{if(!(!M||I)){$(!0);try{const ye=te.length,Xe=await os("users",{orderBy:{column:"created_at",ascending:!1},limit:20,offset:ye});H(nt=>[...nt,...Xe||[]]),V(((Xe==null?void 0:Xe.length)||0)===20)}catch(ye){console.error("Error loading more:",ye)}finally{$(!1)}}},Qe=async ye=>{if(s(ye),!ye){Pe();return}const Xe=await os("users",{filters:{email:ye},limit:20});H(Xe||[]),V(!1)},lt=ye=>{if(s(ye),!ye.trim()){se([]);return}fe.current&&clearTimeout(fe.current),fe.current=setTimeout(()=>{(async()=>{try{const Ut=(await os("users",{orderBy:{column:"created_at",ascending:!1},limit:50})||[]).map(oe=>oe.email).filter(oe=>oe&&oe.toLowerCase().includes(ye.toLowerCase())).slice(0,10);se(Ut)}catch(nt){console.error("Failed to fetch suggestions:",nt),se([])}})()},300)},St=async()=>{$(!0),se([]);try{if(e){const Xe=(await os("users",{filters:{email:e},limit:je})||[]).filter(nt=>!(le==="ZA"&&(nt.country||"").toLowerCase()!=="south africa"||le==="other"&&(nt.country||"").toLowerCase()==="south africa"||we==="buyers"&&(nt.ordersCount||0)<=0));H(Xe),V(!1),Xe.length===0&&alert("No users found matching these filters.")}else{const ye=await os("users",{orderBy:{column:"created_at",ascending:!1},limit:je}),Xe=(ye||[]).filter(nt=>!(le==="ZA"&&(nt.country||"").toLowerCase()!=="south africa"||le==="other"&&(nt.country||"").toLowerCase()==="south africa"||we==="buyers"&&(nt.ordersCount||0)<=0));H(Xe),V(((ye==null?void 0:ye.length)||0)===je),Xe.length===0&&alert("No users found matching these filters.")}}catch(ye){console.error("Error applying filters:",ye),ye.message.includes("requires an index")?alert("System Warning: This specific filter combination requires a new Database Index. Open Console (F12) and click the Firebase link."):alert("Failed to fetch. "+ye.message)}finally{$(!1)}};return S.useEffect(()=>{Pe()},[]),t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Member Management"}),t.jsx("p",{className:"text-gray-400",children:"Search users and manage their membership benefits"})]}),t.jsx("div",{className:"bg-zinc-900 p-6 rounded-lg border border-zinc-800 mb-8",children:t.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Search Email"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Start typing email...",value:e,onChange:ye=>lt(ye.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white outline-none focus:border-gold"}),A.length>0&&t.jsx("div",{className:"absolute top-full left-0 w-full bg-zinc-800 border border-zinc-700 rounded-b shadow-xl z-50 max-h-40 overflow-y-auto",children:A.map(ye=>t.jsx("div",{onClick:()=>{s(ye),se([]),Qe(ye)},className:"p-2 hover:bg-zinc-700 cursor-pointer text-sm text-gray-300 border-b border-zinc-700/50",children:ye},ye))})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Region"}),t.jsxs("select",{value:le,onChange:ye=>be(ye.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white",children:[t.jsx("option",{value:"all",children:" All Regions"}),t.jsx("option",{value:"ZA",children:" South Africa"}),t.jsx("option",{value:"other",children:" International"})]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Activity"}),t.jsxs("select",{value:we,onChange:ye=>Z(ye.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white",children:[t.jsx("option",{value:"all",children:"Everyone"}),t.jsx("option",{value:"buyers",children:" Buyers Only"})]})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:St,disabled:I,className:"w-full bg-gold hover:bg-yellow-600 text-black font-bold p-3 rounded flex items-center justify-center gap-2 transition-all",children:I?"Processing...":t.jsxs(t.Fragment,{children:[t.jsx(fa,{size:18})," RUN SEARCH"]})})})]})}),r.length>0&&t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Search Results"}),t.jsx("div",{className:"space-y-3",children:r.map(ye=>t.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors cursor-pointer",onClick:()=>c(ye),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx($r,{className:"w-5 h-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-medium",children:ye.email}),t.jsx("p",{className:"text-gray-400 text-sm",children:ye.displayName||"No display name"})]})]}),t.jsxs("div",{className:`flex items-center gap-2 ${B(ye.membershipStatus||"none")}`,children:[Ce(ye.membershipStatus||"none"),t.jsx("span",{className:"text-sm capitalize",children:ye.membershipStatus||"None"})]})]}),ye.membershipTier&&t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsx(Dt,{className:"w-4 h-4 text-yellow-400"}),t.jsx("span",{className:"text-gray-300 text-sm",children:ye.membershipTier})]})]},ye.id))})]}),o&&t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"bg-zinc-800 border border-cyan-500 rounded-lg p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"User Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"User Information"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Email:"})," ",o.email]}),t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Name:"})," ",o.displayName||"N/A"]}),t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Status:"}),t.jsx("span",{className:`ml-2 ${B(o.membershipStatus||"none")}`,children:o.membershipStatus||"None"})]}),t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Plan:"})," ",o.membershipTier||"None"]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Store Credit"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Balance:"}),o.creditCurrency==="USD"?"$":"R",o.storeCredit||0]}),t.jsxs("p",{className:"text-gray-300",children:[t.jsx("span",{className:"text-gray-400",children:"Currency:"})," ",o.creditCurrency||"ZAR"]})]})]})]}),t.jsxs("div",{className:"flex gap-4 mt-6",children:[t.jsx("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),t.jsx("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Adjust Credit"})]})]})}),h&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Grant Trial Membership"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-300 mb-2",children:"Select Plan"}),t.jsxs("select",{value:v,onChange:ye=>j(ye.target.value),className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"",children:"Choose a plan..."}),ce.map(ye=>t.jsx("option",{value:ye,children:ye},ye))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-300 mb-2",children:"Trial Duration (Days)"}),t.jsx("input",{type:"number",value:E,onChange:ye=>k(parseInt(ye.target.value)),min:"1",max:"365",className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-300 mb-2",children:"User Email"}),t.jsx("input",{type:"email",value:_,onChange:ye=>P(ye.target.value),className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",placeholder:"Enter user email"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:W,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),t.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),L&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Adjust Store Credit"}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-300 mb-2",children:"Amount (use negative for deduction)"}),t.jsx("input",{type:"number",value:F,onChange:ye=>J(parseFloat(ye.target.value)),step:"0.01",className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500"})]})}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:ue,className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Adjust Credit"}),t.jsx("button",{onClick:()=>U(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[t.jsx(Dt,{size:20,className:"text-purple-400"}),"Membership Tiers & Benefits"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Spoil Me Package"}),t.jsx("span",{className:"text-xs bg-pink-900/30 text-pink-400 border border-pink-500/30 px-2 py-1 rounded",children:"Popular"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Ultimate luxury experience with exclusive perks"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"R19"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"R25/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"5% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Giveaway:"}),t.jsx("span",{className:"text-white",children:"Win R500"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"412/500 (88 left)"})]})]}),t.jsx("button",{onClick:()=>{j("Spoil Me"),y(!0)},className:"w-full py-2 bg-pink-600 hover:bg-pink-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Basic Package"}),t.jsx("span",{className:"text-xs bg-blue-900/30 text-blue-400 border border-blue-500/30 px-2 py-1 rounded",children:"Standard"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Essential benefits for regular shoppers"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"R49"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"R50/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"R100"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Drop:"}),t.jsx("span",{className:"text-white",children:"2x Entries"})]})]}),t.jsx("button",{onClick:()=>{j("Basic"),y(!0)},className:"w-full py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Premium Package"}),t.jsx("span",{className:"text-xs bg-green-900/30 text-green-400 border border-green-500/30 px-2 py-1 rounded",children:"Popular"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Enhanced shopping experience"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"R99"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"R100/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Holiday Gifts:"}),t.jsx("span",{className:"text-white",children:"Free small gift"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"R150"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),t.jsx("span",{className:"text-white",children:"Yes"})]})]}),t.jsx("button",{onClick:()=>{j("Premium"),y(!0)},className:"w-full py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:'Deluxe "Boss" Package'}),t.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-400 border border-yellow-500/30 px-2 py-1 rounded",children:"Elite"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"VIP treatment with maximum benefits"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"R199"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"R150/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"R300"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),t.jsx("span",{className:"text-white",children:"Yes"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Vault Access:"}),t.jsx("span",{className:"text-white",children:"Limited"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"498/750 (252 left)"})]})]}),t.jsx("button",{onClick:()=>{j("Deluxe Boss"),y(!0)},className:"w-full py-2 bg-yellow-600 hover:bg-yellow-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Insider Club"}),t.jsx("span",{className:"text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-2 py-1 rounded",children:"High Demand"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Early access to new products and promotions"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"$5.00"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"$5.00/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"5% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Giveaway:"}),t.jsx("span",{className:"text-white",children:"Win $50"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"412/500 (88 left)"})]})]}),t.jsx("button",{onClick:()=>{j("Insider Club"),y(!0)},className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:"Gold Member"}),t.jsx("span",{className:"text-xs bg-orange-900/30 text-orange-400 border border-orange-500/30 px-2 py-1 rounded",children:"Critical"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Gold standard benefits and rewards"}),t.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"$12.00"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"$12.00/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"$20"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),t.jsx("span",{className:"text-white",children:"Yes"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"485/500 (15 left)"})]})]}),t.jsx("button",{onClick:()=>{j("Gold Member"),y(!0)},className:"w-full py-2 bg-orange-600 hover:bg-orange-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),t.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700 col-span-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-bold text-white text-sm",children:'Deluxe "Vault" Access'}),t.jsx("span",{className:"text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-2 py-1 rounded",children:"Ultimate"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Access to exclusive vault items with maximum benefits"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3",children:[t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly:"}),t.jsx("span",{className:"text-white",children:"$25.00"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),t.jsx("span",{className:"text-white",children:"$15.00/month"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Discount:"}),t.jsx("span",{className:"text-white",children:"20% OFF"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),t.jsx("span",{className:"text-white",children:"$40"})]})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),t.jsx("span",{className:"text-white",children:"Yes"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Vault Access:"}),t.jsx("span",{className:"text-white",children:"24hrs Early"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Monthly Giveaways:"}),t.jsx("span",{className:"text-white",children:"Entry"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Weekly Winners:"}),t.jsx("span",{className:"text-white",children:"Eligible"})]})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Loyalty Ladder:"}),t.jsx("span",{className:"text-white",children:"Month 1: 5 items"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400"}),t.jsx("span",{className:"text-white",children:"Month 2: 7 items"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400"}),t.jsx("span",{className:"text-white",children:"Month 3: 10 items"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400"}),t.jsx("span",{className:"text-white",children:"Month 4+: Unlimited"})]})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Spots:"}),t.jsx("span",{className:"text-green-400",children:"498/750 (252 left)"})]}),t.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Shop clearance, samples, and slight imperfections starting at R10. Sold as-is."})]})]}),t.jsx("button",{onClick:()=>{j("Deluxe Vault"),y(!0)},className:"w-full py-2 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]})]})]}),t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:["All Members (",te.length,")"]}),t.jsx("div",{className:"space-y-3",children:te.map(ye=>t.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors cursor-pointer",onClick:()=>c(ye),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx($r,{className:"w-5 h-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-medium",children:ye.email}),t.jsx("p",{className:"text-gray-400 text-sm",children:ye.displayName||ye.name||"No display name"})]})]}),t.jsxs("div",{className:`flex items-center gap-2 ${B(ye.membershipStatus||"none")}`,children:[Ce(ye.membershipStatus||"none"),t.jsx("span",{className:"text-sm capitalize",children:ye.membershipStatus||"None"})]})]}),ye.membershipTier&&t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsx(Dt,{className:"w-4 h-4 text-yellow-400"}),t.jsx("span",{className:"text-gray-300 text-sm",children:ye.membershipTier})]})]},ye.id))}),t.jsx("div",{className:"mt-6 flex justify-center",children:I?t.jsx("div",{className:"text-gold animate-pulse",children:"Loading members..."}):O&&!e&&t.jsx("button",{onClick:Ue,className:"px-6 py-2 bg-zinc-800 border border-zinc-700 hover:border-gold text-white rounded-full text-sm transition-all",children:"Load More Members"})})]})]})},Tn=({checked:n,onChange:e,className:s,children:r})=>t.jsx("button",{type:"button",onClick:e,className:`${s} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:r}),fL=()=>{const{user:n}=vt(),[e,s]=S.useState([]),[r,i]=S.useState([]),[o,c]=S.useState(!0),[u,f]=S.useState(""),[h,y]=S.useState([]),v=S.useRef(null),[j,E]=S.useState(null),[k,_]=S.useState(!1),[P,L]=S.useState(null),[U,F]=S.useState({dashboard:!0,products:!1,orders:!1,categories:!1,members:!1,users:!1,giftCards:!1,social:!1,affiliates:!1,winners:!1,expenses:!1,vault:!1,artists:!1}),[J,te]=S.useState("all"),[H,M]=S.useState("all"),[C,I]=S.useState(""),[$,O]=S.useState(!1),[V,A]=S.useState(null),[se,fe]=S.useState("basic"),[je,Ie]=S.useState(7),[le,be]=S.useState(1),[we,Z]=S.useState(1),ce=10,[W,ue]=S.useState(!1),[B,Ce]=S.useState(null),[Pe,Ue]=S.useState("none"),[Qe,lt]=S.useState(!1),[St,ye]=S.useState(null),[Xe,nt]=S.useState("basic");S.useEffect(()=>{(async()=>{c(!0);try{try{const Y=await fetch("/api/users");if(Y.ok){const Se=await Y.json(),jt=Se.users||Se;s(jt),i(jt)}else{const Se=await queryDocuments("users",{orderBy:{column:"created_at",ascending:!1},limit:500});s(Se||[]),i(Se||[])}}catch(Y){console.warn("Failed to fetch users via API, falling back to supabase users table:",Y);const Se=await queryDocuments("users",{orderBy:{column:"created_at",ascending:!1},limit:500});s(Se||[]),i(Se||[])}}catch(Y){console.error("Error loading users:",Y)}finally{c(!1)}})()},[]),S.useEffect(()=>{let ve=e;u.trim()&&(ve=ve.filter(mt=>{var Wt,$t,ks,ds;return((Wt=mt.email)==null?void 0:Wt.toLowerCase().includes(u.toLowerCase()))||(($t=mt.displayName)==null?void 0:$t.toLowerCase().includes(u.toLowerCase()))||((ks=mt.firstName)==null?void 0:ks.toLowerCase().includes(u.toLowerCase()))||((ds=mt.lastName)==null?void 0:ds.toLowerCase().includes(u.toLowerCase()))})),J==="ZA"?ve=ve.filter(mt=>mt.country==="South Africa"):J==="other"&&(ve=ve.filter(mt=>mt.country!=="South Africa")),H==="buyers"&&(ve=ve.filter(mt=>(mt.totalOrders||0)>0)),C&&(ve=ve.filter(mt=>mt.membershipStatus===C)),ve.sort((mt,Wt)=>{var ds,De;if(mt.isActive===!1&&Wt.isActive!==!1)return-1;if(Wt.isActive===!1&&mt.isActive!==!1)return 1;const $t=((ds=mt.createdAt)==null?void 0:ds.seconds)||0;return(((De=Wt.createdAt)==null?void 0:De.seconds)||0)-$t});const Y=(le-1)*ce,Se=Y+ce,jt=ve.slice(Y,Se);i(jt),Z(Math.ceil(ve.length/ce))},[u,J,H,C,e,le]);const Ut=async ve=>{try{await Qi("deleteUser",{userId:ve,should_soft_delete:!1});const Y=e.filter(Se=>Se.id!==ve);s(Y),i(Y.filter(Se=>{var jt,mt,Wt,$t;return!u.trim()||((jt=Se.email)==null?void 0:jt.toLowerCase().includes(u.toLowerCase()))||((mt=Se.displayName)==null?void 0:mt.toLowerCase().includes(u.toLowerCase()))||((Wt=Se.firstName)==null?void 0:Wt.toLowerCase().includes(u.toLowerCase()))||(($t=Se.lastName)==null?void 0:$t.toLowerCase().includes(u.toLowerCase()))})),alert("User permanently deleted successfully!"),E(null)}catch(Y){console.error("Error deleting user:",Y),alert("Failed to delete user. Please try again.")}},oe=ve=>{switch(ve){case"active":return"text-green-400";case"trial":return"text-blue-400";case"expired":return"text-red-400";case"cancelled":return"text-gray-400";default:return"text-gray-400"}},Me=ve=>{switch(ve){case"active":return"";case"trial":return"";case"expired":return"";case"cancelled":return"";default:return""}},Be=ve=>{F(Y=>({...Y,[ve]:!Y[ve]}))},ke=ve=>{L(ve);const Y=ve.adminPermissions||{dashboard:!0,products:!1,orders:!1,categories:!1,members:!1,users:!1,giftCards:!1,social:!1,affiliates:!1,winners:!1,expenses:!1,vault:!1,artists:!1};F(Y),_(!0)},We=async()=>{if(P)try{await ui("users",P.id,{adminPermissions:U}),alert("Admin permissions updated successfully!"),_(!1),L(null)}catch(ve){console.error("Error updating admin permissions:",ve),alert("Failed to update permissions. Please try again.")}},Nt=ve=>{f(ve),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{be(1)},300)};return t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Users Management"}),t.jsx("p",{className:"text-gray-400",children:"Manage all registered users and their accounts"}),(n==null?void 0:n.email)==="spoilmevintagediy@gmail.com"&&t.jsxs("button",{onClick:()=>window.location.href="/#/artist-partnership",className:"mt-4 px-6 py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[t.jsx(ea,{size:16}),"Apply as Artist (Test Flow)"]})]}),t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{className:"md:col-span-2 relative",children:[t.jsx(fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search by name or email...",value:u,onChange:ve=>Nt(ve.target.value),className:"w-full pl-10 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(UN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsxs("select",{value:J,onChange:ve=>te(ve.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"all",children:"All Regions"}),t.jsx("option",{value:"ZA",children:"South Africa"}),t.jsx("option",{value:"other",children:"Other Regions"})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(lc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsxs("select",{value:H,onChange:ve=>M(ve.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"all",children:"All Users"}),t.jsx("option",{value:"buyers",children:"Buyers"})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx($a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsxs("select",{value:C,onChange:ve=>I(ve.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"trial",children:"Trial"}),t.jsx("option",{value:"expired",children:"Expired"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(u||J!=="all"||H!=="all"||C)&&t.jsx("div",{className:"mt-2 text-center",children:t.jsx("button",{onClick:()=>{f(""),te("all"),M("all"),I("")},className:"text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Clear all filters"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg border bg-blue-900/30 text-blue-400 border-blue-500/20",children:t.jsx(Ps,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Users"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg border bg-green-900/30 text-green-400 border-green-500/20",children:t.jsx(Dt,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Active Members"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.filter(ve=>ve.membershipStatus==="active").length})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg border bg-blue-900/30 text-blue-400 border-blue-500/20",children:t.jsx($a,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Trial Users"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.filter(ve=>ve.membershipStatus==="trial").length})]}),t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsx("div",{className:"p-3 rounded-lg border bg-gray-900/30 text-gray-400 border-gray-500/20",children:t.jsx($r,{size:20})})}),t.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Free Users"}),t.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.filter(ve=>!ve.membershipTier).length})]})]}),t.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[t.jsx(Ps,{size:20,className:"text-blue-400"}),"All Users (",r.length,")"]}),o?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"}),t.jsx("p",{className:"text-gray-400 mt-2",children:"Loading users..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.map(ve=>t.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:ve.firstName&&ve.lastName?`${ve.firstName.charAt(0)}${ve.lastName.charAt(0)}`.toUpperCase():ve.displayName?ve.displayName.charAt(0).toUpperCase():ve.email.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium text-white flex items-center gap-2",children:[ve.firstName&&ve.lastName?`${ve.firstName} ${ve.lastName}`:ve.displayName||"No Name",ve.isActive===!1&&t.jsx(Gn,{size:16,className:"text-red-500"}),ve.membershipTier&&t.jsx("span",{className:"text-xs px-2 py-1 rounded bg-yellow-900/30 text-yellow-400",children:ve.membershipTier}),ve.email==="spoilmevintagediy@gmail.com"&&t.jsx("span",{className:"text-xs px-2 py-1 rounded bg-red-900/30 text-red-400 font-bold",children:"OWNER"})]}),t.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-1",children:[t.jsx(Cc,{size:12}),ve.email]}),t.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[ve.country&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[t.jsx(Ec,{size:10}),ve.country]}),t.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[t.jsx("span",{children:Me(ve.membershipStatus||"none")}),t.jsx("span",{className:oe(ve.membershipStatus||"none"),children:ve.membershipStatus||"Free User"})]}),ve.createdAt&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[t.jsx($a,{size:10}),new Date(ve.createdAt.seconds*1e3).toLocaleDateString()]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[ve.email==="spoilmevintagediy@gmail.com"&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>{Ce(ve),Ue(ve.artistStatus||"none"),ue(!0)},className:"px-3 py-1 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(ea,{size:12}),"Artist"]}),t.jsxs("button",{onClick:()=>{ye(ve),nt(ve.membershipTier||"basic"),lt(!0)},className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(Dt,{size:12}),"Membership"]})]}),t.jsxs("button",{onClick:()=>{A(ve),fe("basic"),Ie(7),O(!0)},className:"px-3 py-1 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx($a,{size:12}),"Grant Trial"]}),t.jsxs("button",{onClick:()=>ke(ve),className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(Dt,{size:12}),"Admin"]}),t.jsxs("button",{onClick:()=>E(ve.id),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[t.jsx(Lr,{size:12}),"Delete"]})]})]}),t.jsxs("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[t.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[t.jsx("div",{className:"text-gray-400",children:"Store Credit"}),t.jsxs("div",{className:"text-white font-bold",children:[ve.creditCurrency==="USD"?"$":"R",ve.storeCredit||0]})]}),t.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[t.jsx("div",{className:"text-gray-400",children:"Loyalty Points"}),t.jsx("div",{className:"text-white font-bold",children:ve.loyaltyPoints||0})]}),t.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[t.jsx("div",{className:"text-gray-400",children:"Orders"}),t.jsx("div",{className:"text-white font-bold",children:ve.totalOrders||0})]}),t.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[t.jsx("div",{className:"text-gray-400",children:"Gender"}),t.jsx("div",{className:"text-white font-bold",children:ve.gender||"Not set"})]})]})]},ve.id))}),r.length===0&&!o&&t.jsx("div",{className:"text-center py-8 text-gray-400",children:u?"No users found matching your search.":"No users found in the system."})]})]}),t.jsxs("div",{className:"flex justify-center mt-4",children:[t.jsx("button",{onClick:()=>be(ve=>Math.max(ve-1,1)),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-l-lg",disabled:le===1,children:"Previous"}),t.jsxs("span",{className:"px-4 py-2 bg-gray-800 text-white",children:["Page ",le," of ",we]}),t.jsx("button",{onClick:()=>be(ve=>Math.min(ve+1,we)),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-r-lg",disabled:le===we,children:"Next"})]}),j&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-red-900/50 text-red-500 rounded-lg",children:t.jsx(Gn,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Delete User"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"This action cannot be undone."})]})]}),t.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to delete this user? This will permanently remove their account and all associated data."}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>Ut(j),className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white font-medium rounded-lg transition-colors",children:"Delete User"}),t.jsx("button",{onClick:()=>E(null),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),k&&P&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-blue-900/50 text-blue-500 rounded-lg",children:t.jsx(Dt,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Admin Permissions"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage user permissions"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Dashboard Access"}),t.jsxs(Tn,{checked:U.dashboard,onChange:()=>Be("dashboard"),className:`${U.dashboard?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable dashboard access"}),t.jsx("span",{className:`${U.dashboard?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Products Management"}),t.jsxs(Tn,{checked:U.products,onChange:()=>Be("products"),className:`${U.products?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable products management"}),t.jsx("span",{className:`${U.products?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Orders Management"}),t.jsxs(Tn,{checked:U.orders,onChange:()=>Be("orders"),className:`${U.orders?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable orders management"}),t.jsx("span",{className:`${U.orders?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Categories Management"}),t.jsxs(Tn,{checked:U.categories,onChange:()=>Be("categories"),className:`${U.categories?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable categories management"}),t.jsx("span",{className:`${U.categories?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Members Management"}),t.jsxs(Tn,{checked:U.members,onChange:()=>Be("members"),className:`${U.members?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable members management"}),t.jsx("span",{className:`${U.members?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Users Management"}),t.jsxs(Tn,{checked:U.users,onChange:()=>Be("users"),className:`${U.users?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable users management"}),t.jsx("span",{className:`${U.users?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Gift Cards Management"}),t.jsxs(Tn,{checked:U.giftCards,onChange:()=>Be("giftCards"),className:`${U.giftCards?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable gift cards management"}),t.jsx("span",{className:`${U.giftCards?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Social Media Management"}),t.jsxs(Tn,{checked:U.social,onChange:()=>Be("social"),className:`${U.social?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable social media management"}),t.jsx("span",{className:`${U.social?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Affiliates Management"}),t.jsxs(Tn,{checked:U.affiliates,onChange:()=>Be("affiliates"),className:`${U.affiliates?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable affiliates management"}),t.jsx("span",{className:`${U.affiliates?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Winners Management"}),t.jsxs(Tn,{checked:U.winners,onChange:()=>Be("winners"),className:`${U.winners?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable winners management"}),t.jsx("span",{className:`${U.winners?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Expenses Management"}),t.jsxs(Tn,{checked:U.expenses,onChange:()=>Be("expenses"),className:`${U.expenses?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable expenses management"}),t.jsx("span",{className:`${U.expenses?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Vault Access"}),t.jsxs(Tn,{checked:U.vault,onChange:()=>Be("vault"),className:`${U.vault?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable vault access"}),t.jsx("span",{className:`${U.vault?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Artists Management"}),t.jsxs(Tn,{checked:U.artists,onChange:()=>Be("artists"),className:`${U.artists?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[t.jsx("span",{className:"sr-only",children:"Enable artists management"}),t.jsx("span",{className:`${U.artists?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]})]}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:We,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Permissions"}),t.jsx("button",{onClick:()=>_(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),$&&V&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-green-900/50 text-green-500 rounded-lg",children:t.jsx($a,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Trial User Settings"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage trial user details"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Trial Plan"}),t.jsxs("select",{value:se,onChange:ve=>fe(ve.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"basic",children:"Basic Plan"}),t.jsx("option",{value:"premium",children:"Premium Plan"}),t.jsx("option",{value:"deluxe",children:"Deluxe Plan"}),t.jsx("option",{value:"insider",children:"Insider Club"}),t.jsx("option",{value:"gold",children:"Gold Member"}),t.jsx("option",{value:"spoilme",children:"Spoil Me"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Trial Duration (days)"}),t.jsx("input",{type:"number",min:"1",value:je,onChange:ve=>Ie(Number(ve.target.value)),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500"})]})]}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:async()=>{try{await Qi("grantTrial",{userId:V.id,plan:se,days:je}),alert("Trial granted successfully!"),O(!1),A(null),window.location.reload()}catch(ve){console.error("Error granting trial:",ve),alert("Failed to grant trial. Please try again.")}},className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),t.jsx("button",{onClick:()=>O(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),W&&B&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-purple-900/50 text-purple-500 rounded-lg",children:t.jsx(ea,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Artist Status"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage artist approval status"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Current Status"}),t.jsx("span",{className:`text-sm font-medium ${Pe==="approved"?"text-green-400":Pe==="rejected"?"text-red-400":"text-yellow-400"}`,children:Pe.charAt(0).toUpperCase()+Pe.slice(1)})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:()=>Ue("approved"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${Pe==="approved"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[t.jsx(ea,{size:16}),"Approve Artist"]}),t.jsxs("button",{onClick:()=>Ue("rejected"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${Pe==="rejected"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[t.jsx(Lr,{size:16}),"Reject Artist"]})]})]}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:async()=>{try{await Qi("updateArtistStatus",{userId:B.id,status:Pe}),alert("Artist status updated successfully!"),ue(!1),Ce(null),window.location.reload()}catch(ve){console.error("Error updating artist status:",ve),alert("Failed to update artist status. Please try again.")}},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Changes"}),t.jsx("button",{onClick:()=>ue(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),Qe&&St&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-yellow-900/50 text-yellow-500 rounded-lg",children:t.jsx(Dt,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Membership Tier"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Manage user membership tier"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Current Tier"}),t.jsx("span",{className:"text-sm font-medium text-yellow-400",children:Xe.charAt(0).toUpperCase()+Xe.slice(1)})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Change to"}),t.jsxs("select",{value:Xe,onChange:ve=>nt(ve.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500",children:[t.jsx("option",{value:"basic",children:"Basic"}),t.jsx("option",{value:"premium",children:"Premium"}),t.jsx("option",{value:"deluxe",children:"Deluxe"})]})]})]}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:async()=>{try{await Qi("updateMembershipTier",{userId:St.id,tier:Xe}),alert("Membership tier updated successfully!"),lt(!1),ye(null),window.location.reload()}catch(ve){console.error("Error updating membership tier:",ve),alert("Failed to update membership tier. Please try again.")}},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Changes"}),t.jsx("button",{onClick:()=>lt(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})})]})},mL=()=>{const{affiliateCode:n}=Dc(),{products:e,currency:s,addToCart:r,toggleWishlist:i}=vt(),[o,c]=S.useState(null),[u,f]=S.useState([]),[h,y]=S.useState(!0);S.useEffect(()=>{n&&(async()=>{try{const _={code:n,name:"Sarah Johnson",currency:"ZAR",storeConfig:{products:["product1","product2","product3","product4","product5"],strategy:{discount:10,commission:15},currency:"ZAR"}};c(_);const P=e.filter(U=>_.storeConfig.products.includes(U.id));f(P);const L={code:_.code,discountPercent:_.storeConfig.strategy.discount,commissionPercent:_.storeConfig.strategy.commission,currency:_.currency,expires:Date.now()+720*60*60*1e3};localStorage.setItem("spoilme_referral",JSON.stringify(L))}catch(_){console.error("Error loading affiliate store:",_)}finally{y(!1)}})()},[n,e]);const v=k=>{var P;if(!((P=o==null?void 0:o.storeConfig)!=null&&P.strategy))return k.price;const _=k.price*(o.storeConfig.strategy.discount/100);return k.price-_},j=k=>{var P;if(!((P=o==null?void 0:o.storeConfig)!=null&&P.strategy))return k.priceUSD;const _=k.priceUSD*(o.storeConfig.strategy.discount/100);return k.priceUSD-_},E=k=>{r(k,{quantity:1,price:v(k),priceUSD:j(k)})};return h?t.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-pink-500 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-gray-400",children:"Loading VIP store..."})]})}):!o||u.length===0?t.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"VIP Store Not Found"}),t.jsx("p",{className:"text-gray-400 mb-6",children:"This affiliate store is not available or has been deactivated."}),t.jsx(Ve,{to:"/",className:"px-6 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg",children:"Shop Regular Store"})]})}):t.jsxs("div",{className:"min-h-screen bg-zinc-950",children:[t.jsx("div",{className:"bg-gradient-to-r from-pink-900/20 to-purple-900/20 border-b border-gray-800",children:t.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-2 rounded-full text-sm font-bold mb-4",children:[t.jsx(Pc,{size:16})," VIP ACCESS"]}),t.jsxs("h1",{className:"text-4xl md:text-6xl font-cherry text-white mb-4",children:["Welcome to ",o.name,"'s VIP Collection"]}),t.jsxs("p",{className:"text-xl text-gray-300 mb-6",children:["Exclusive ",o.storeConfig.strategy.discount,"% OFF everything in this curated collection"]}),t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-xl p-4 inline-block",children:t.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[t.jsx(WN,{size:20}),t.jsxs("span",{className:"font-bold",children:[o.storeConfig.strategy.discount,"% Discount Applied Automatically"]})]})})]})})}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(k=>t.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl overflow-hidden hover:border-pink-500/50 transition-all group",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Ve,{to:`/product/${k.slug}`,children:t.jsx("img",{src:k.images[0],alt:k.name,className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300"})}),t.jsx("div",{className:"absolute top-4 left-4",children:t.jsxs("div",{className:"bg-pink-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:[o.storeConfig.strategy.discount,"% OFF"]})}),t.jsx("button",{onClick:()=>i(k.id),className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(zp,{size:20})})]}),t.jsxs("div",{className:"p-6",children:[t.jsx(Ve,{to:`/product/${k.slug}`,children:t.jsx("h3",{className:"text-lg font-bold text-white mb-2 hover:text-pink-400 transition-colors",children:k.name})}),t.jsx("p",{className:"text-sm text-gray-400 mb-4",children:k.category}),t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((_,P)=>t.jsx(Rn,{size:14,fill:"currentColor"},P))}),t.jsx("span",{className:"text-sm text-gray-400",children:"(4.8)"})]}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("span",{className:"text-lg font-bold text-green-400",children:s==="ZAR"?`R${v(k)}`:`$${j(k)}`}),t.jsx("span",{className:"text-sm text-gray-500 line-through",children:s==="ZAR"?`R${k.price}`:`$${k.priceUSD}`})]}),t.jsxs("button",{onClick:()=>E(k),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2",children:[t.jsx(fl,{size:18}),"Add to Cart"]})]})]},k.id))}),t.jsx("div",{className:"mt-16 text-center",children:t.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-2xl p-8 max-w-2xl mx-auto",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Didn't find what you love?"}),t.jsxs("p",{className:"text-gray-400 mb-6",children:["Browse our full collection and enjoy ",o.storeConfig.strategy.discount,"% OFF on everything!"]}),t.jsxs(Ve,{to:"/",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl transition-all shadow-lg",children:["Browse Full Catalog ",t.jsx(Qs,{size:20})]})]})})]})]})},pL={bronze:{max:15,options:[{d:5,c:10},{d:10,c:5}]},silver:{max:20,options:[{d:10,c:10},{d:15,c:5}]},gold:{max:25,options:[{d:10,c:15},{d:15,c:10},{d:20,c:5}]},platinum:{max:30,options:[{d:10,c:20},{d:15,c:15},{d:20,c:10},{d:25,c:5}]}},gL=n=>n>=10001?"platinum":n>=5001?"gold":n>=2001?"silver":"bronze",xL=()=>{var J,te;const{user:n,products:e,currency:s,updateUser:r}=vt(),[i,o]=S.useState([]),[c,u]=S.useState(""),[f,h]=S.useState(null),[y,v]=S.useState(!1),j=gL(((J=n.affiliateStats)==null?void 0:J.totalSalesValue)||0),E=pL[j],k=e.filter(H=>H.name.toLowerCase().includes(c.toLowerCase())||H.category.toLowerCase().includes(c.toLowerCase())),_=H=>{i.length<5&&!i.find(M=>M.id===H.id)&&o([...i,H])},P=H=>{o(i.filter(M=>M.id!==H))},L=async()=>{if(!(i.length!==5||!f)){v(!0);try{const H={products:i.map(M=>M.id),strategy:f,currency:n.affiliateCurrency,lastUpdated:new Date().toISOString()};await r({affiliateStoreConfig:H}),alert("Store configuration saved successfully!")}catch(H){console.error("Error saving store config:",H),alert("Failed to save store configuration.")}finally{v(!1)}}},U=H=>{if(!f)return H.price;const M=H.price*(f.d/100);return H.price-M},F=H=>{if(!f)return H.priceUSD;const M=H.priceUSD*(f.d/100);return H.priceUSD-M};return((te=n.affiliateStats)==null?void 0:te.status)!=="approved"?t.jsxs("div",{className:"max-w-4xl mx-auto py-8 text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Access Denied"}),t.jsx("p",{className:"text-gray-400",children:"You need to be an approved affiliate to access this page."}),t.jsx(Ve,{to:"/affiliate",className:"inline-block mt-4 px-6 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg",children:"Go to Affiliate Program"})]}):t.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-8",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Ve,{to:"/affiliate",className:"p-2 bg-zinc-800 hover:bg-zinc-700 rounded-lg",children:t.jsx(oa,{size:20,className:"text-gray-400"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white",children:"VIP Store Builder"}),t.jsx("p",{className:"text-gray-400",children:"Create your personalized affiliate storefront with 5 curated products."})]})]}),t.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-yellow-900/20 rounded-lg text-yellow-400",children:t.jsx(Pc,{size:24})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-bold text-white",children:["Your Current Tier: ",j.toUpperCase()]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Max Commission: ",E.max,"% | Available Strategies: ",E.options.length]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:E.options.map((H,M)=>t.jsx("button",{onClick:()=>h(H),className:`p-4 rounded-lg border transition-all ${(f==null?void 0:f.d)===H.d&&(f==null?void 0:f.c)===H.c?"bg-pink-900/20 border-pink-500 text-pink-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-2xl font-bold mb-1",children:[H.d,"% OFF / ",H.c,"% Commission"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Give customers ",H.d,"% discount, earn ",H.c,"% commission"]})]})},M))})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["Select 5 Products (",i.length,"/5)"]}),t.jsxs("div",{className:"relative",children:[t.jsx(fa,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search products...",value:c,onChange:H=>u(H.target.value),className:"w-full bg-zinc-900 border border-gray-700 rounded-lg pl-10 pr-4 py-3 text-white focus:border-pink-500 outline-none"})]})]}),t.jsx("div",{className:"max-h-[600px] overflow-y-auto space-y-3 custom-scrollbar",children:k.slice(0,20).map(H=>{const M=i.find(C=>C.id===H.id);return t.jsx("div",{className:`p-4 rounded-lg border transition-all ${M?"bg-pink-900/10 border-pink-500":"bg-zinc-900 border-gray-800"}`,children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:H.images[0],alt:H.name,className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-white text-sm",children:H.name}),t.jsx("p",{className:"text-xs text-gray-400",children:H.category}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:"text-sm font-bold text-green-400",children:s==="ZAR"?`R${H.price}`:`$${H.priceUSD}`}),f&&t.jsxs("span",{className:"text-xs text-pink-400",children:[" ",s==="ZAR"?`R${U(H)}`:`$${F(H)}`]})]})]}),t.jsx("button",{onClick:()=>M?P(H.id):_(H),className:`p-2 rounded-lg transition-all ${M?"bg-red-600 hover:bg-red-500 text-white":i.length>=5?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-pink-600 hover:bg-pink-500 text-white"}`,disabled:!M&&i.length>=5,children:M?t.jsx(BN,{size:16}):t.jsx(rn,{size:16})})]})},H.id)})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Your VIP Store Preview"}),t.jsx("p",{className:"text-sm text-gray-400",children:"This is how your storefront will appear to customers visiting your affiliate link."})]}),i.length===0?t.jsxs("div",{className:"bg-zinc-900/50 border border-dashed border-gray-700 rounded-xl p-8 text-center",children:[t.jsx(Pc,{size:48,className:"text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:"No Products Selected"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Choose 5 products from the left to build your VIP store."})]}):t.jsxs("div",{className:"space-y-4",children:[i.map(H=>t.jsx("div",{className:"bg-zinc-900 border border-gray-800 rounded-xl p-4",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:H.images[0],alt:H.name,className:"w-20 h-20 rounded-lg object-cover border border-gray-700"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-white",children:H.name}),t.jsx("p",{className:"text-sm text-gray-400 mb-2",children:H.category}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 line-through",children:s==="ZAR"?`R${H.price}`:`$${H.priceUSD}`}),t.jsx("span",{className:"text-green-400 font-bold ml-2",children:s==="ZAR"?`R${U(H)}`:`$${F(H)}`})]}),f&&t.jsxs("div",{className:"text-xs bg-pink-900/20 text-pink-400 px-2 py-1 rounded",children:[f.d,"% OFF"]})]})]})]})},H.id)),i.length===5&&f&&t.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-green-500/20 rounded-full",children:t.jsx(ol,{size:20,className:"text-green-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-green-400",children:"Store Ready!"}),t.jsxs("p",{className:"text-sm text-green-300",children:["Your VIP store is configured. Customers will see ",f.d,"% off these products and you'll earn ",f.c,"% commission."]})]})]}),t.jsx("button",{onClick:L,disabled:y,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:opacity-50 text-white font-bold rounded-lg transition-all",children:y?"Saving...":"Save Store Configuration"})]})]})]})]})]})},yL=()=>{const{user:n,products:e,logout:s,submitReview:r,currency:i}=vt(),o=cn(),[c,u]=S.useState(null),[f,h]=S.useState(5),[y,v]=S.useState(""),j=(n.notifications||[]).filter(C=>C.type==="review_request"&&!C.isRead),E=(n.notifications||[]).filter(C=>C.type==="gift_ready"),k=(n.notifications||[]).filter(C=>C.type==="gift_received"),_=(n.notifications||[]).filter(C=>(C.type==="system"||C.type==="affiliate_msg")&&!C.isRead),P=(n.notifications||[]).filter(C=>C.type==="credit_received"||C.type==="credit_adjusted"),L=(n.notifications||[]).filter(C=>C.type==="trial_ended"),U=[...j,...E,...k,..._,...P,...L].sort((C,I)=>new Date(I.date).getTime()-new Date(C.date).getTime()),F=async()=>{!c||!c.productId||(await r(c.productId,f,y,c.id),v(""),h(5),u(null),alert("Review submitted! You earned 100 Loyalty Points."))},J=C=>{if(!C.voucherData)return;const{code:I,amount:$,meta:O}=C.voucherData,V=`${window.location.origin}/#/?voucher=${I}`,A=`Hey ${O.recipientName}! 

${O.senderName} sent you a Spoil Me Vintage Gift Voucher worth R${$}!

"${O.message}"

Redeem it here:
${V}`,se=O.whatsappNumber?O.whatsappNumber.replace(/[^0-9]/g,""):"",fe=se?`https://wa.me/${se}?text=${encodeURIComponent(A)}`:`https://wa.me/?text=${encodeURIComponent(A)}`;window.open(fe,"_blank")},te=C=>{window.location.href=`/#/?voucher=${C}`};if(!n.email)return o("/login"),null;const H=C=>{switch(C){case"review_request":return t.jsx(Rn,{className:"text-yellow-500",size:20});case"gift_ready":return t.jsx(ls,{className:"text-pink-500",size:20});case"gift_received":return t.jsx(ls,{className:"text-green-500",size:20});case"system":return t.jsx(Yi,{className:"text-blue-500",size:20});case"affiliate_msg":return t.jsx(ll,{className:"text-purple-500",size:20});case"credit_received":return t.jsx(ts,{className:"text-green-500",size:20});case"credit_adjusted":return t.jsx(ts,{className:"text-cyan-500",size:20});case"trial_ended":return t.jsx(th,{className:"text-red-500",size:20});default:return t.jsx(Yi,{className:"text-gray-500",size:20})}},M=C=>{switch(C){case"review_request":return"border-yellow-500/30 bg-yellow-900/20";case"gift_ready":return"border-pink-500/30 bg-pink-900/20";case"gift_received":return"border-green-500/30 bg-green-900/20";case"system":return"border-blue-500/30 bg-blue-900/20";case"affiliate_msg":return"border-purple-500/30 bg-purple-900/20";case"credit_received":return"border-green-500/30 bg-green-900/20";case"credit_adjusted":return"border-cyan-500/30 bg-cyan-900/20";case"trial_ended":return"border-red-500/30 bg-red-900/20";default:return"border-gray-500/30 bg-gray-900/20"}};return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsxs("h1",{className:"text-[28px] font-cherry text-white",children:["Welcome, ",n.name||n.firstName||"Valued Customer"]}),t.jsx("p",{className:"text-[14px] font-architects text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-yellow-400 italic mb-8",children:"This is where we communicate with you, deliver your gift vouchers, and share all important notifications and updates."})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[t.jsx(Yi,{size:32,className:"text-blue-500"}),"Your Notifications Center"]}),t.jsx("p",{className:"text-gray-400 mt-2",children:"Stay updated with your account activity, rewards, and exclusive offers"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-bold text-white",children:U.length}),t.jsx("div",{className:"text-sm text-gray-400",children:"Total Notifications"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Rn,{className:"text-yellow-500",size:16}),t.jsx("span",{className:"text-sm text-gray-400",children:"Pending Reviews"})]}),t.jsx("div",{className:"text-xl font-bold text-white",children:j.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(ls,{className:"text-pink-500",size:16}),t.jsx("span",{className:"text-sm text-gray-400",children:"Gifts"})]}),t.jsx("div",{className:"text-xl font-bold text-white",children:E.length+k.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(ts,{className:"text-green-500",size:16}),t.jsx("span",{className:"text-sm text-gray-400",children:"Credits"})]}),t.jsx("div",{className:"text-xl font-bold text-white",children:P.length})]}),t.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Yi,{className:"text-blue-500",size:16}),t.jsx("span",{className:"text-sm text-gray-400",children:"System"})]}),t.jsx("div",{className:"text-xl font-bold text-white",children:_.length})]})]}),t.jsx("div",{className:"space-y-4",children:U.length===0?t.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-8 text-center",children:[t.jsx(Yi,{size:48,className:"text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No notifications yet"}),t.jsx("p",{className:"text-gray-400",children:"When you have activity on your account, you'll see it here."})]}):U.map((C,I)=>t.jsx("div",{className:`p-6 rounded-xl border ${M(C.type)}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"shrink-0 mt-1",children:H(C.type)}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-bold text-white text-lg mb-1",children:C.title}),t.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-3",children:C.message}),C.type==="review_request"&&C.productId&&t.jsxs("button",{onClick:()=>u(C),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx($m,{size:16})," Write Review"]}),C.type==="gift_ready"&&C.voucherData&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>J(C),className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(rh,{size:16})," Send via WhatsApp"]}),t.jsxs("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/#/?voucher=${C.voucherData.code}`),className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(nh,{size:16})," Copy Link"]})]}),C.type==="gift_received"&&C.voucherData&&t.jsxs("button",{onClick:()=>te(C.voucherData.code),className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(ls,{size:16})," Redeem Gift"]}),C.type==="trial_ended"&&t.jsxs(Ve,{to:"/membership",className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[t.jsx(Qs,{size:16})," Renew Membership"]})]}),t.jsx("div",{className:"text-right text-xs text-gray-500 shrink-0",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ur,{size:12}),new Date(C.date).toLocaleDateString()]})})]})})]})},C.id||I))}),c&&c.type==="review_request"&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>u(null)}),t.jsxs("div",{className:"bg-zinc-900 border border-yellow-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(234,179,8,0.3)] animate-in zoom-in-95 duration-200",children:[t.jsx("button",{onClick:()=>u(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:t.jsx(cs,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-yellow-900/50 rounded-full border border-yellow-500 text-yellow-300",children:t.jsx(Rn,{size:24})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"Write a Review"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Rating"}),t.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(C=>t.jsx("button",{onClick:()=>h(C),className:`text-2xl ${C<=f?"text-yellow-500":"text-gray-600"}`,children:""},C))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Your Review"}),t.jsx("textarea",{value:y,onChange:C=>v(C.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-yellow-500 outline-none h-24",placeholder:"Share your thoughts about this product..."})]}),t.jsx("button",{onClick:F,disabled:!y.trim(),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold rounded-xl transition-all shadow-lg",children:"Submit Review (+100 Points)"})]})]})]})]})},bL=()=>{const[n,e]=S.useState(!1),[s,r]=S.useState("all"),[i,o]=S.useState(""),[c,u]=S.useState({title:"",body:"",imageUrl:"",link:"/#/vault"}),f=async h=>{var y,v,j;if(h.preventDefault(),!!confirm("Are you sure you want to send this notification?")){e(!0);try{const E=await Qi("send-push",{title:c.title,body:c.body,targetGroup:s,targetId:s==="individual"?i:null,image:c.imageUrl||null,url:c.link||"/"});if(E!=null&&E.success||(y=E==null?void 0:E.data)!=null&&y.success){const k=E.sentCount||((v=E.data)==null?void 0:v.sentCount)||0;alert(` Success! Sent to ${k} devices.`),u({...c,title:"",body:""})}else{const k=(E==null?void 0:E.message)||((j=E==null?void 0:E.data)==null?void 0:j.message)||"Unknown error";alert(` ${k}`)}}catch(E){console.error(E),alert(`Error: ${E.message}`)}finally{e(!1)}}};return t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg border border-zinc-800 max-w-2xl mx-auto mt-10",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-zinc-800 pb-4",children:[t.jsx(Yi,{className:"text-yellow-500",size:24}),t.jsx("h2",{className:"text-xl font-bold text-white",children:"Push Notification Center"})]}),t.jsxs("form",{onSubmit:f,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Target Group"}),t.jsx("div",{className:"mt-2 grid grid-cols-2 gap-3",children:[{key:"all",label:"Everyone",icon:t.jsx(UN,{size:18})},{key:"south_africa",label:"South Africa",icon:t.jsx(Ps,{size:18})},{key:"international",label:"International",icon:t.jsx(Ps,{size:18})},{key:"non_members",label:"Non-Members",icon:t.jsx(Ps,{size:18})},{key:"affiliates",label:"Affiliates",icon:t.jsx(Ps,{size:18})},{key:"artists",label:"Artists",icon:t.jsx(Ps,{size:18})},{key:"individual",label:"Individual",icon:t.jsx($r,{size:18})}].map(h=>t.jsxs("button",{type:"button",onClick:()=>r(h.key),className:`p-3 rounded border flex items-center gap-2 ${s===h.key?"border-yellow-500 bg-yellow-900/20 text-white":"border-zinc-700 text-gray-400"}`,children:[h.icon,t.jsx("span",{className:"text-sm font-bold",children:h.label})]},h.key))})]}),s==="individual"&&t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"User ID (UID)"}),t.jsx("input",{type:"text",placeholder:"Paste User UID here...",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:i,onChange:h=>o(h.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Notification Title"}),t.jsx("input",{type:"text",placeholder:"e.g.  The Vault is Open!",required:!0,className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1 font-bold",value:c.title,onChange:h=>u({...c,title:h.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Message Body"}),t.jsx("textarea",{placeholder:"e.g. New vintage stock just added. Tap to shop now.",required:!0,rows:3,className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:c.body,onChange:h=>u({...c,body:h.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Deep Link (Optional)"}),t.jsx("input",{type:"text",placeholder:"e.g. /#/vault or /#/membership",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:c.link,onChange:h=>u({...c,link:h.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-gray-400 text-sm",children:"Image URL (Optional)"}),t.jsx("input",{type:"text",placeholder:"https://...",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:c.imageUrl,onChange:h=>u({...c,imageUrl:h.target.value})})]})]}),t.jsx("button",{type:"submit",disabled:n,className:"w-full bg-yellow-600 hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold py-4 rounded flex items-center justify-center gap-2 transition-colors",children:n?"Sending...":t.jsxs(t.Fragment,{children:[t.jsx(rh,{size:20})," SEND NOTIFICATION"]})})]})]})},vL=()=>{const n=cn(),[e,s]=S.useState([]),[r,i]=S.useState(!0);S.useEffect(()=>{o()},[]);const o=async()=>{try{const c=await os("custom_templates",{orderBy:{column:"created_at",ascending:!1}});s((c||[]).filter(u=>u.isActive!==!1))}catch(c){console.error("Error fetching templates:",c)}finally{i(!1)}};return r?t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-gold text-xl",children:"Loading custom pendants..."})}):t.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[t.jsx("button",{onClick:()=>n("/"),className:"p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700",children:t.jsx(oa,{size:24})}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gold flex items-center gap-2",children:[t.jsx(ys,{size:32}),"Customized Wire Wrapped Pendants"]}),t.jsx("p",{className:"text-gray-400",children:"Design your own unique wire-wrapped pendant"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6 mb-8",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create Your Perfect Pendant"}),t.jsx("p",{className:"text-gray-300 mb-4",children:"Choose from our selection of premium wire-wrapped pendant templates. Customize with your choice of stones, wire styles, and chain lengths to create a truly unique piece of jewelry."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Dt,{size:16,className:"text-gold"}),t.jsx("span",{children:"Premium Materials"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ys,{size:16,className:"text-gold"}),t.jsx("span",{children:"Custom Design"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Dt,{size:16,className:"text-gold"}),t.jsx("span",{children:"Handcrafted Quality"})]})]})]}),e.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ys,{size:48,className:"text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No Custom Templates Available"}),t.jsx("p",{className:"text-gray-500",children:"Check back soon for new designs!"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(c=>t.jsxs("div",{className:"bg-zinc-900 rounded-lg overflow-hidden hover:bg-zinc-800 transition-colors cursor-pointer group",onClick:()=>n(`/customized-wire-wrapped-pendants/${c.id}`),children:[t.jsx("div",{className:"aspect-square bg-zinc-800 overflow-hidden",children:t.jsx("img",{src:c.mainImage,alt:c.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gold mb-2",children:c.name}),t.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:c.description}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-lg font-semibold text-white",children:["From R",c.basePrice]}),t.jsx("button",{className:"px-4 py-2 bg-gold text-black font-bold rounded-lg hover:bg-yellow-500 transition-colors",children:"Customize"})]})]})]},c.id))})]})})},wL=()=>{var O,V,A;const{user:n}=vt(),[e,s]=S.useState([]),[r,i]=S.useState(!0),[o,c]=S.useState(!1),[u,f]=S.useState(!1),[h,y]=S.useState({name:"",basePrice:0,description:"",mainImage:"",stones:[],wireStyles:[],chainOptions:[],isActive:!0});S.useEffect(()=>{v()},[]);const v=async()=>{try{const se=await os("custom_templates",{orderBy:{column:"created_at",ascending:!1}});s(se||[])}catch(se){console.error("Error loading templates:",se)}finally{i(!1)}},j=async()=>{if(!(!h.name||!h.description)){f(!0);try{const se={...h,stones:h.stones||[],wireStyles:h.wireStyles||[],chainOptions:h.chainOptions||[]};h.id?await ui("custom_templates",h.id,se):await di("custom_templates",se),await v(),c(!1),y({name:"",basePrice:0,description:"",mainImage:"",stones:[],wireStyles:[],chainOptions:[],isActive:!0})}catch(se){console.error("Error saving template:",se)}finally{f(!1)}}},E=async se=>{if(confirm("Are you sure you want to delete this template?"))try{await ow("custom_templates",se),await v()}catch(fe){console.error("Error deleting template:",fe)}},k=async se=>{const fe=`custom-templates/${Date.now()}-${se.name}`;return await up("custom-templates",fe,se)},_=async se=>{var je;const fe=(je=se.target.files)==null?void 0:je[0];if(fe)try{const Ie=await k(fe);y(le=>({...le,mainImage:Ie}))}catch(Ie){console.error("Error uploading image:",Ie)}},P=()=>{y(se=>({...se,stones:[...se.stones||[],{id:Date.now().toString(),name:"",image:"",priceModifier:0}]}))},L=(se,fe,je)=>{y(Ie=>{var le;return{...Ie,stones:(le=Ie.stones)==null?void 0:le.map((be,we)=>we===se?{...be,[fe]:je}:be)}})},U=se=>{y(fe=>{var je;return{...fe,stones:(je=fe.stones)==null?void 0:je.filter((Ie,le)=>le!==se)}})},F=async(se,fe)=>{var Ie;const je=(Ie=fe.target.files)==null?void 0:Ie[0];if(je)try{const le=await k(je);L(se,"image",le)}catch(le){console.error("Error uploading stone image:",le)}},J=()=>{y(se=>({...se,wireStyles:[...se.wireStyles||[],{id:Date.now().toString(),name:"",imageFrameOnly:"",imageWithExample:"",priceModifier:0}]}))},te=(se,fe,je)=>{y(Ie=>{var le;return{...Ie,wireStyles:(le=Ie.wireStyles)==null?void 0:le.map((be,we)=>we===se?{...be,[fe]:je}:be)}})},H=se=>{y(fe=>{var je;return{...fe,wireStyles:(je=fe.wireStyles)==null?void 0:je.filter((Ie,le)=>le!==se)}})},M=async(se,fe,je)=>{var le;const Ie=(le=je.target.files)==null?void 0:le[0];if(Ie)try{const be=await k(Ie);te(se,fe==="frame"?"imageFrameOnly":"imageWithExample",be)}catch(be){console.error("Error uploading wire image:",be)}},C=()=>{y(se=>({...se,chainOptions:[...se.chainOptions||[],""]}))},I=(se,fe)=>{y(je=>{var Ie;return{...je,chainOptions:(Ie=je.chainOptions)==null?void 0:Ie.map((le,be)=>be===se?fe:le)}})},$=se=>{y(fe=>{var je;return{...fe,chainOptions:(je=fe.chainOptions)==null?void 0:je.filter((Ie,le)=>le!==se)}})};return n!=null&&n.isAdmin?r?t.jsx("div",{className:"p-6 text-center",children:t.jsx(Dr,{className:"animate-spin mx-auto",size:24})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Custom Pendant Templates"}),t.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2",children:[t.jsx(rn,{size:20})," New Template"]})]}),t.jsx("div",{className:"grid gap-4",children:e.map(se=>t.jsx("div",{className:"bg-zinc-800 p-4 rounded-lg",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold",children:se.name}),t.jsx("p",{className:"text-gray-400",children:se.description}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Base Price: R",se.basePrice]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{y(se),c(!0)},className:"p-2 text-blue-400 hover:text-blue-300",children:t.jsx(Vm,{size:20})}),t.jsx("button",{onClick:()=>E(se.id),className:"p-2 text-red-400 hover:text-red-300",children:t.jsx(Lr,{size:20})})]})]})},se.id))}),o&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-xl font-bold",children:h.id?"Edit Template":"New Template"}),t.jsx("button",{onClick:()=>c(!1),className:"p-2",children:t.jsx(cs,{size:24})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Template Name",value:h.name||"",onChange:se=>y(fe=>({...fe,name:se.target.value})),className:"p-2 bg-zinc-800 rounded"}),t.jsx("input",{type:"number",placeholder:"Base Price",value:h.basePrice||0,onChange:se=>y(fe=>({...fe,basePrice:parseFloat(se.target.value)})),className:"p-2 bg-zinc-800 rounded"})]}),t.jsx("textarea",{placeholder:"Description",value:h.description||"",onChange:se=>y(fe=>({...fe,description:se.target.value})),className:"w-full p-2 bg-zinc-800 rounded h-20"}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",children:"Main Image"}),t.jsx("input",{type:"file",accept:"image/*",onChange:_}),h.mainImage&&t.jsx("img",{src:h.mainImage,alt:"Main",className:"w-32 h-32 object-cover mt-2 rounded"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Stones"}),t.jsx("button",{onClick:P,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Stone"})]}),t.jsx("div",{className:"space-y-4",children:(O=h.stones)==null?void 0:O.map((se,fe)=>t.jsxs("div",{className:"bg-zinc-800 p-4 rounded flex gap-4 items-center",children:[t.jsx("input",{type:"text",placeholder:"Stone Name",value:se.name,onChange:je=>L(fe,"name",je.target.value),className:"flex-1 p-2 bg-zinc-700 rounded"}),t.jsx("input",{type:"number",placeholder:"Price Modifier",value:se.priceModifier,onChange:je=>L(fe,"priceModifier",parseFloat(je.target.value)),className:"w-24 p-2 bg-zinc-700 rounded"}),t.jsx("input",{type:"file",accept:"image/*",onChange:je=>F(fe,je)}),se.image&&t.jsx("img",{src:se.image,alt:se.name,className:"w-16 h-16 object-cover rounded"}),t.jsx("button",{onClick:()=>U(fe),className:"p-2 text-red-400",children:t.jsx(cs,{size:20})})]},se.id))})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Wire Styles"}),t.jsx("button",{onClick:J,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Wire Style"})]}),t.jsx("div",{className:"space-y-4",children:(V=h.wireStyles)==null?void 0:V.map((se,fe)=>t.jsxs("div",{className:"bg-zinc-800 p-4 rounded space-y-4",children:[t.jsx("input",{type:"text",placeholder:"Wire Style Name",value:se.name,onChange:je=>te(fe,"name",je.target.value),className:"w-full p-2 bg-zinc-700 rounded"}),t.jsx("input",{type:"number",placeholder:"Price Modifier",value:se.priceModifier,onChange:je=>te(fe,"priceModifier",parseFloat(je.target.value)),className:"w-24 p-2 bg-zinc-700 rounded"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",children:"Frame Only Image"}),t.jsx("input",{type:"file",accept:"image/*",onChange:je=>M(fe,"frame",je)}),se.imageFrameOnly&&t.jsx("img",{src:se.imageFrameOnly,alt:"Frame",className:"w-16 h-16 object-cover mt-2 rounded"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",children:"With Example Image"}),t.jsx("input",{type:"file",accept:"image/*",onChange:je=>M(fe,"example",je)}),se.imageWithExample&&t.jsx("img",{src:se.imageWithExample,alt:"Example",className:"w-16 h-16 object-cover mt-2 rounded"})]})]}),t.jsx("button",{onClick:()=>H(fe),className:"p-2 text-red-400",children:t.jsx(cs,{size:20})})]},se.id))})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Chain Options"}),t.jsx("button",{onClick:C,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Chain"})]}),t.jsx("div",{className:"space-y-2",children:(A=h.chainOptions)==null?void 0:A.map((se,fe)=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",placeholder:"Chain Length",value:se,onChange:je=>I(fe,je.target.value),className:"flex-1 p-2 bg-zinc-700 rounded"}),t.jsx("button",{onClick:()=>$(fe),className:"p-2 text-red-400",children:t.jsx(cs,{size:20})})]},fe))})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-600 text-white rounded",children:"Cancel"}),t.jsxs("button",{onClick:j,disabled:u,className:"px-4 py-2 bg-pink-600 text-white rounded disabled:opacity-50 flex items-center gap-2",children:[u?t.jsx(Dr,{className:"animate-spin",size:16}):t.jsx(cc,{size:16}),"Save"]})]})]})]})})]}):t.jsx("div",{className:"p-6 text-center",children:"Access denied. Admin only."})},NL=()=>{const{id:n}=Dc(),e=cn(),{user:s,addToCart:r}=vt(),[i,o]=S.useState(null),[c,u]=S.useState(!0),[f,h]=S.useState({stone:"",wireStyle:"",chainLength:""}),[y,v]=S.useState(!1);S.useEffect(()=>{n&&j()},[n]);const j=async()=>{try{const _=await dp("custom_templates",n);_?o(_):e("/customized-wire-wrapped-pendants")}catch(_){console.error("Error fetching template:",_),e("/customized-wire-wrapped-pendants")}finally{u(!1)}},E=()=>{if(!i)return 0;let _=i.basePrice;if(f.stone){const P=i.stones.find(L=>L.id===f.stone);P&&(_+=P.priceModifier)}if(f.wireStyle){const P=i.wireStyles.find(L=>L.id===f.wireStyle);P&&(_+=P.priceModifier)}return _},k=async()=>{if(!(!s||!i)){if(!f.stone||!f.wireStyle||!f.chainLength){alert("Please select all options before adding to cart.");return}v(!0);try{const _=i.stones.find(U=>U.id===f.stone),P=i.wireStyles.find(U=>U.id===f.wireStyle),L={id:`custom-${Date.now()}`,code:`CUSTOM-${Date.now()}`,name:`${i.name} - Custom`,slug:`custom-pendant-${Date.now()}`,description:`Custom pendant with ${_==null?void 0:_.name} stone, ${P==null?void 0:P.name} wire style, ${f.chainLength} chain`,price:E(),priceUSD:E()/18,costPrice:i.basePrice+((_==null?void 0:_.priceModifier)||0)+((P==null?void 0:P.priceModifier)||0),category:"Custom Pendants",type:"Pendant",status:"published",stock:1,images:[i.mainImage],tags:["custom","pendant","wire-wrapped"],createdAt:new Date().toISOString(),quantity:1,customOptions:{templateId:i.id,stone:_,wireStyle:P,chainLength:f.chainLength},isCustom:!0};await di("cart_items",{user_id:s.uid,product_id:L.id,...L,added_at:new Date().toISOString()}),r(L),alert("Custom pendant added to cart!"),e("/cart")}catch(_){console.error("Error adding to cart:",_),alert("Failed to add to cart. Please try again.")}finally{v(!1)}}};return c?t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-gold text-xl",children:"Loading custom builder..."})}):i?t.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[t.jsx("button",{onClick:()=>e("/customized-wire-wrapped-pendants"),className:"p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700",children:t.jsx(oa,{size:24})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gold",children:i.name}),t.jsx("p",{className:"text-gray-400",children:i.description})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"aspect-square bg-zinc-900 rounded-2xl overflow-hidden",children:t.jsx("img",{src:i.mainImage,alt:i.name,className:"w-full h-full object-cover"})}),f.wireStyle&&t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Wire Style Preview"}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:(()=>{const _=i.wireStyles.find(P=>P.id===f.wireStyle);return _?t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Frame Only"}),t.jsx("img",{src:_.imageFrameOnly,alt:"Frame",className:"w-full aspect-square object-cover rounded"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"With Example"}),t.jsx("img",{src:_.imageWithExample,alt:"Example",className:"w-full aspect-square object-cover rounded"})]})]}):null})()})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(ys,{size:20,className:"text-gold"}),"Choose Your Stone"]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.stones.map(_=>t.jsxs("button",{onClick:()=>h(P=>({...P,stone:_.id})),className:`p-4 rounded-lg border-2 transition-colors ${f.stone===_.id?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:[t.jsx("img",{src:_.image,alt:_.name,className:"w-full aspect-square object-cover rounded mb-2"}),t.jsx("h4",{className:"font-semibold",children:_.name}),t.jsx("p",{className:"text-sm text-gray-400",children:_.priceModifier>0?`+R${_.priceModifier}`:"No extra cost"})]},_.id))})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[t.jsx(Dt,{size:20,className:"text-gold"}),"Choose Wire Style"]}),t.jsx("div",{className:"space-y-4",children:i.wireStyles.map(_=>t.jsx("button",{onClick:()=>h(P=>({...P,wireStyle:_.id})),className:`w-full p-4 rounded-lg border-2 transition-colors ${f.wireStyle===_.id?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-left",children:_.name}),t.jsx("p",{className:"text-sm text-gray-400",children:_.priceModifier>0?`+R${_.priceModifier}`:"No extra cost"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("img",{src:_.imageFrameOnly,alt:"Frame",className:"w-16 h-16 object-cover rounded"}),t.jsx("img",{src:_.imageWithExample,alt:"Example",className:"w-16 h-16 object-cover rounded"})]})]})},_.id))})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Chain Length"}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.chainOptions.map((_,P)=>t.jsx("button",{onClick:()=>h(L=>({...L,chainLength:_})),className:`p-4 rounded-lg border-2 transition-colors ${f.chainLength===_?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:t.jsx("span",{className:"font-semibold",children:_})},P))})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("span",{className:"text-lg",children:"Total Price:"}),t.jsxs("span",{className:"text-2xl font-bold text-gold",children:["R",E()]})]}),t.jsxs("button",{onClick:k,disabled:y||!f.stone||!f.wireStyle||!f.chainLength,className:"w-full bg-gold text-black font-bold py-4 rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[t.jsx(fl,{size:20}),y?"Adding to Cart...":"Add to Cart"]}),(!f.stone||!f.wireStyle||!f.chainLength)&&t.jsx("p",{className:"text-sm text-gray-400 mt-2 text-center",children:"Please select all options to continue"})]})]})]})]})}):t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-white text-xl",children:"Template not found"})})},jL=()=>{const[n,e]=S.useState("applications"),[s,r]=S.useState([]),[i,o]=S.useState([]),[c,u]=S.useState([]),[f,h]=S.useState(!0);S.useEffect(()=>{let P=null,L=null,U=null;return(async()=>{const J=await os("artist_applications",{orderBy:{column:"submitted_at",ascending:!1}});r((J||[]).map(M=>({id:M.id,...M,submittedAt:M.submitted_at?new Date(M.submitted_at):new Date})));const te=await os("artists");o(te||[]),h(!1);const H=await os("artist_products");u((H||[]).map(M=>({id:M.id,...M,createdAt:M.created_at?new Date(M.created_at):new Date,receivedAtHub:M.received_at_hub?new Date(M.received_at_hub):null,approvedAt:M.approved_at?new Date(M.approved_at):null})))})(),P=Qo("artist_applications",async()=>{const J=await os("artist_applications",{orderBy:{column:"submitted_at",ascending:!1}});r((J||[]).map(te=>({id:te.id,...te,submittedAt:te.submitted_at?new Date(te.submitted_at):new Date})))}),L=Qo("artists",async()=>{const J=await os("artists");o(J||[])}),U=Qo("artist_products",async()=>{const J=await os("artist_products");u((J||[]).map(te=>({id:te.id,...te,createdAt:te.created_at?new Date(te.created_at):new Date,receivedAtHub:te.received_at_hub?new Date(te.received_at_hub):null,approvedAt:te.approved_at?new Date(te.approved_at):null})))}),()=>{P&&P(),L&&L(),U&&U()}},[]);const y=async P=>{try{const L={uid:P.uid,shopName:P.artistTradeName||`${P.name} ${P.surname}`,slotLimit:5,slotsUsed:0,wallet:{pending:0,available:0,currency:"ZAR"},status:"active",isFirstTime:!0};await di("artists",L),await ui("artist_applications",P.id,{status:"approved"}),await di("notifications",{userId:P.uid,type:"system",title:"Artist Application Approved!",message:"Welcome to Spoil Me Vintage Artist Program! As a first-time artist, you can upload 1 product initially. Please ship it to our Worcester Hub for approval.",date:new Date().toISOString(),isRead:!1}),alert("Application approved successfully!")}catch(L){console.error("Error approving application:",L),alert("Failed to approve application.")}},v=async P=>{try{await ui("artist_applications",P.id,{status:"rejected"}),await di("notifications",{userId:P.uid,type:"system",title:"Artist Application Update",message:"We regret to inform you that your artist application has been declined.",date:new Date().toISOString(),isRead:!1}),alert("Application rejected.")}catch(L){console.error("Error rejecting application:",L),alert("Failed to reject application.")}},j=async P=>{try{await ui("artist_products",P.id,{status:"approved",approved_at:new Date().toISOString()});const L=i.find(U=>U.uid===P.artistId);L&&await di("notifications",{userId:L.uid,type:"system",title:"Product Approved",message:`Your product "${P.name}" has been approved and is now live.`,date:new Date().toISOString(),isRead:!1}),alert("Product approved successfully!")}catch(L){console.error("Error approving product:",L),alert("Failed to approve product.")}},E=async P=>{try{await ui("artist_products",P.id,{status:"rejected"});const L=i.find(U=>U.uid===P.artistId);L&&await di("notifications",{userId:L.uid,type:"system",title:"Product Rejected",message:`Your product "${P.name}" has been rejected. Please check the quality standards and re-submit.`,date:new Date().toISOString(),isRead:!1}),alert("Product rejected.")}catch(L){console.error("Error rejecting product:",L),alert("Failed to reject product.")}},k=async P=>{try{await ui("artist_products",P.id,{stock_level:(P.stockLevel||0)+1,status:"live",received_at_hub:new Date().toISOString()}),alert("Stock received and product updated.")}catch(L){console.error("Error updating stock:",L),alert("Failed to update stock.")}},_=async P=>{if(window.confirm("Are you sure you want to delete this product?"))try{await ow("artist_products",P),alert("Product deleted successfully.")}catch(L){console.error("Error deleting product:",L),alert("Failed to delete product.")}};return f?t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"text-white",children:"Loading artist data..."})}):t.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Artist Hub"}),t.jsxs("div",{className:"flex space-x-1 mb-6 bg-zinc-900 p-1 rounded-lg",children:[t.jsxs("button",{onClick:()=>e("applications"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="applications"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:["Applications (",s.filter(P=>P.status==="pending").length,")"]}),t.jsx("button",{onClick:()=>e("pricing"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="pricing"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Pricing Room"}),t.jsx("button",{onClick:()=>e("quality"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="quality"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Quality Control"}),t.jsx("button",{onClick:()=>e("stock"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="stock"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Stock Management"})]}),n==="applications"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold text-yellow-400",children:"Pending Applications"}),t.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-3 rounded-lg",children:t.jsxs("p",{className:"text-yellow-400 text-sm font-medium flex items-center gap-2",children:[t.jsx(Gn,{size:16}),"Reviews take up to 72 hours. Artists will be notified via email and in-app notification once their application is processed."]})}),s.filter(P=>P.status==="pending").length===0?t.jsx("div",{className:"text-gray-400",children:"No pending applications."}):s.filter(P=>P.status==="pending").map(P=>t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-bold text-white",children:[P.name," ",P.surname,P.artistTradeName&&t.jsxs("span",{className:"text-yellow-400",children:[" (",P.artistTradeName,")"]})]}),t.jsxs("p",{className:"text-gray-300",children:[P.email," | ",P.contactNumber]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Applied: ",P.submittedAt.toLocaleDateString()]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>y(P),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[t.jsx(eo,{size:16})," Approve"]}),t.jsxs("button",{onClick:()=>v(P),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[t.jsx(Fm,{size:16})," Reject"]})]})]}),t.jsx("div",{className:"grid grid-cols-5 gap-2",children:P.productImages.slice(0,5).map((L,U)=>t.jsx("img",{src:L,alt:`Product ${U+1}`,className:"w-full h-20 object-cover rounded border border-zinc-700"},U))})]},P.id)),t.jsx("h2",{className:"text-xl font-bold text-yellow-400 mt-8",children:"All Applications"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(P=>t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h3",{className:"font-bold text-white",children:[P.name," ",P.surname]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${P.status==="approved"?"bg-green-600":P.status==="rejected"?"bg-red-600":"bg-yellow-600"}`,children:P.status})]}),t.jsx("p",{className:"text-sm text-gray-400",children:P.email}),t.jsx("p",{className:"text-xs text-gray-500",children:P.submittedAt.toLocaleDateString()})]},P.id))})]}),n==="pricing"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-yellow-400 mb-4",children:"Pricing Room"}),t.jsx("div",{className:"text-gray-400",children:"Product pricing interface will be implemented here. Artists upload products, admin sets selling prices and RRP."})]}),n==="quality"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-yellow-400 mb-4",children:"Quality Control Hub"}),t.jsx("div",{className:"text-gray-400",children:"Quality inspection interface will be implemented here. Scan order IDs, pass/fail inspections."})]}),n==="stock"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold text-yellow-400",children:"Artist Stock Management"}),c.length===0?t.jsx("div",{className:"text-gray-400",children:"No products found. Encourage artists to upload products."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(P=>{var L;return t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-bold text-white",children:P.name}),t.jsx("span",{className:`px-2 py-1 rounded text-xs ${P.status==="approved"?"bg-green-600":P.status==="rejected"?"bg-red-600":"bg-yellow-600"}`,children:P.status})]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Artist: ",(L=i.find(U=>U.uid===P.artistId))==null?void 0:L.shopName]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Stock Level: ",P.stockLevel]}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[t.jsx("button",{onClick:()=>j(P),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex-1",children:"Approve Product"}),t.jsx("button",{onClick:()=>E(P),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex-1",children:"Reject Product"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("h4",{className:"text-white text-sm font-semibold mb-2",children:"Product Images"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:P.images.map((U,F)=>t.jsx("img",{src:U,alt:`Product Image ${F+1}`,className:"w-full h-20 object-cover rounded border border-zinc-700"},F))})]}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsxs("button",{onClick:()=>k(P),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex-1",children:[t.jsx(hr,{className:"w-5 h-5 mr-2"})," Receive Stock"]}),t.jsxs("button",{onClick:()=>_(P.id),className:"bg-red-800 text-white px-4 py-2 rounded-lg hover:bg-red-900 transition-colors flex-1",children:[t.jsx(MI,{className:"w-5 h-5 mr-2"})," Delete Product"]})]})]},P.id)})})]})]})},SL=()=>{const{currency:n,applyForArtist:e}=vt(),[s,r]=S.useState(!1),[i,o]=S.useState({name:"",surname:"",artistTradeName:"",contactNumber:"",email:"",productImages:[]}),[c,u]=S.useState(!1),f=[{name:"Tester",slots:5,priceZAR:19,priceUSD:1.5,features:["5 Product Slots","Basic Support"]},{name:"Hobbyist",slots:20,priceZAR:49,priceUSD:4,features:["20 Product Slots","Email Support"]},{name:"Creator",slots:50,priceZAR:99,priceUSD:8,features:["50 Product Slots","Priority Support","Access to Analytics"]},{name:"Boutique",slots:100,priceZAR:189,priceUSD:15,features:["100 Product Slots","Dedicated Support","Advanced Analytics"]},{name:"Gallery",slots:250,priceZAR:399,priceUSD:32,features:["250 Product Slots","24/7 Support","Full Analytics Suite"]}];return t.jsx("div",{className:"bg-black text-white min-h-screen p-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("header",{className:"text-center mb-12",children:[t.jsx("h1",{className:"text-5xl font-bold text-yellow-400",children:"Your Art. Global Stage. 1% Fees."}),t.jsx("p",{className:"text-xl mt-4 text-zinc-300",children:"Join a curated marketplace for elite jewelry artists and reach over 7,000 collectors worldwide."}),t.jsx("button",{onClick:()=>r(!0),className:"mt-8 bg-yellow-400 text-black font-bold py-3 px-8 rounded-lg text-lg hover:bg-yellow-500 transition-colors",children:n==="ZAR"?"START YOUR SHOP - R19 / Month":"START YOUR SHOP - $1.50 / Month"})]}),t.jsxs("section",{className:"mb-16",children:[t.jsx("h2",{className:"text-3xl font-bold text-center text-yellow-400 mb-8",children:"The Trust Timeline: Secure Escrow Payments"}),t.jsxs("div",{className:"flex justify-between items-center text-center",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-4xl mb-2",children:""}),t.jsx("h3",{className:"font-bold text-lg",children:"Sold"}),t.jsx("p",{className:"text-zinc-400",children:"Funds are held securely in escrow."})]}),t.jsx("div",{className:"flex-1 text-zinc-500",children:"--->"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-4xl mb-2",children:""}),t.jsx("h3",{className:"font-bold text-lg",children:"Hub Check"}),t.jsx("p",{className:"text-zinc-400",children:"Your piece is inspected at our Worcester hub."})]}),t.jsx("div",{className:"flex-1 text-zinc-500",children:"--->"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-4xl mb-2",children:""}),t.jsx("h3",{className:"font-bold text-lg",children:"Delivered"}),t.jsx("p",{className:"text-zinc-400",children:"The collector receives your art."})]}),t.jsx("div",{className:"flex-1 text-zinc-500",children:"--->"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-4xl mb-2",children:""}),t.jsx("h3",{className:"font-bold text-lg",children:"Day 30"}),t.jsx("p",{className:"text-zinc-400",children:"Funds are released to your wallet."})]})]})]}),t.jsxs("section",{className:"mb-16",children:[t.jsx("h2",{className:"text-3xl font-bold text-center text-yellow-400 mb-8",children:"Choose Your Plan"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-8",children:f.map(h=>t.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg p-6 text-center hover:border-yellow-400 transition-all",children:[t.jsx("h3",{className:"text-2xl font-bold text-yellow-400",children:h.name}),t.jsxs("p",{className:"text-4xl font-bold my-4",children:[n==="ZAR"?`R${h.priceZAR}`:`$${h.priceUSD}`,t.jsx("span",{className:"text-lg font-normal text-zinc-400",children:"/month"})]}),t.jsxs("p",{className:"text-zinc-400 mb-4",children:[h.slots," Product Slots"]}),t.jsx("button",{className:"w-full bg-yellow-400 text-black font-bold py-2 px-4 rounded-lg hover:bg-yellow-500 transition-colors",children:"Select Plan"})]},h.name))})]}),t.jsxs("section",{children:[t.jsx("h2",{className:"text-3xl font-bold text-center text-yellow-400 mb-8",children:"How It Works"}),t.jsxs("div",{className:"max-w-3xl mx-auto text-lg text-zinc-300 space-y-4",children:[t.jsx("p",{children:"1. Apply to become a partner. We review applications to maintain a high-quality, curated collection of handmade jewelry."}),t.jsx("p",{children:"2. Once approved, choose a subscription plan that fits your needs. You can upload professional photos of your products. No need to send us stock upfront!"}),t.jsx("p",{children:"3. When an item sells, you ship it to our hub in Worcester, South Africa for inspection. You are responsible for this initial shipping cost."}),t.jsx("p",{children:"4. We handle the final quality check and ship the item to the customer. If an item fails inspection, it will be returned to you at your cost, or you can opt to have it sold in our 'Vault' at a reduced price."}),t.jsx("p",{children:"5. Your funds are held in escrow and released to your artist wallet 30 days after the customer receives the item. Our commission is a flat 1% of the sale price."})]})]})]})})},kL=({onClose:n})=>t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:n}),t.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-sm w-full shadow-[0_0_50px_rgba(236,72,153,0.4)] animate-in zoom-in-95 duration-300 text-center",children:[t.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:t.jsx(cs,{size:20})}),t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600 to-purple-600 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg transform rotate-3",children:t.jsx(RI,{size:32,className:"text-white"})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Voucher Redeemed!"}),t.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"To ensure your discount applies correctly and for the best shopping experience, please use our App."}),t.jsxs("button",{className:"w-full py-3 bg-white text-black font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors mb-3 shadow-lg",onClick:()=>alert("Please use the Install button at the bottom of the screen."),children:[t.jsx(_c,{size:20})," Install App"]}),t.jsx("button",{onClick:n,className:"text-xs text-gray-500 hover:text-gray-300 underline",children:"Continue in Browser"})]})]}),_L=()=>{const n=ua(),e=cn(),{applyExternalVoucher:s}=vt(),[r,i]=S.useState(!1);return S.useEffect(()=>{const c=new URLSearchParams(n.search).get("voucher");c&&s(c)&&(i(!0),e("/cart",{replace:!0}))},[n,s,e]),r?t.jsx(kL,{onClose:()=>i(!1)}):null},CL=()=>t.jsx(oI,{children:t.jsx(EL,{})}),EL=()=>{const{isLoading:n,user:e}=vt(),{updateAvailable:s,isDownloading:r,performUpdate:i,dismissUpdate:o}=nL();return S.useEffect(()=>{e!=null&&e.id&&DN(e.id)},[e==null?void 0:e.id]),n?t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):t.jsxs(V1,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[t.jsx(_L,{}),t.jsx(FO,{}),t.jsx(cL,{}),t.jsx(oL,{}),s&&t.jsx(rL,{version:s.version,isDownloading:r,onUpdate:i,onDismiss:o}),t.jsxs(D1,{children:[t.jsxs(bt,{path:"/",element:t.jsx(XI,{}),children:[t.jsx(bt,{index:!0,element:t.jsx(sR,{})}),t.jsx(bt,{path:"collections/:categoryName",element:t.jsx(v5,{})}),t.jsx(bt,{path:"catalog/:type",element:t.jsx(w5,{})}),t.jsx(bt,{path:"product/:id",element:t.jsx(UR,{})}),t.jsx(bt,{path:"cart",element:t.jsx(qR,{})}),t.jsx(bt,{path:"profile",element:t.jsx(WR,{})}),t.jsx(bt,{path:"membership",element:t.jsx(p5,{})}),t.jsx(bt,{path:"earn-rewards",element:t.jsx(g5,{})}),t.jsx(bt,{path:"affiliate-program",element:t.jsx(y5,{})}),t.jsx(bt,{path:"gift-cards",element:t.jsx(b5,{})}),t.jsx(bt,{path:"weekly-winners",element:t.jsx($O,{})})," ",t.jsx(bt,{path:"login",element:t.jsx(HR,{})}),t.jsx(bt,{path:"terms",element:t.jsx(JO,{})})," ",t.jsx(bt,{path:"vault",element:t.jsx(uL,{})})," ",t.jsx(bt,{path:"vip/:affiliateCode",element:t.jsx(mL,{})}),t.jsx(bt,{path:"notifications",element:t.jsx(yL,{})})," ",t.jsx(bt,{path:"customized-wire-wrapped-pendants",element:t.jsx(vL,{})}),t.jsx(bt,{path:"customized-wire-wrapped-pendants/:id",element:t.jsx(NL,{})})," ",t.jsx(bt,{path:"artist-partnership",element:t.jsx(SL,{})})," "]}),t.jsxs(bt,{path:"/admin",element:t.jsx(QI,{}),children:[t.jsx(bt,{index:!0,element:t.jsx(N5,{})}),t.jsx(bt,{path:"products",element:t.jsx(IO,{})}),t.jsx(bt,{path:"orders",element:t.jsx(KO,{})}),t.jsx(bt,{path:"categories",element:t.jsx(RO,{})}),t.jsx(bt,{path:"gift-cards",element:t.jsx(MO,{})}),t.jsx(bt,{path:"social",element:t.jsx(LO,{})}),t.jsx(bt,{path:"affiliates",element:t.jsx(zO,{})}),t.jsx(bt,{path:"winners",element:t.jsx(VO,{})}),t.jsx(bt,{path:"expenses",element:t.jsx(GO,{})})," ",t.jsx(bt,{path:"vault",element:t.jsx(dL,{})})," ",t.jsx(bt,{path:"members",element:t.jsx(hL,{})})," ",t.jsx(bt,{path:"users",element:t.jsx(fL,{})})," ",t.jsx(bt,{path:"affiliate/store-builder",element:t.jsx(xL,{})}),t.jsx(bt,{path:"notifications",element:t.jsx(bL,{})})," ",t.jsx(bt,{path:"custom-pendant-manager",element:t.jsx(wL,{})})," ",t.jsx(bt,{path:"artists",element:t.jsx(jL,{})}),t.jsx(bt,{path:"ad-pricing",element:t.jsx(vj,{})})]}),t.jsx(bt,{path:"*",element:t.jsx(R1,{to:"/"})})]})]})};var Tv={},TL="@vercel/speed-insights",PL="1.3.1",AL=()=>{window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)})};function IL(){return typeof window<"u"}function RL(){try{const n="production"}catch{}return"production"}function wj(){return RL()==="development"}function ML(n){return n.scriptSrc?n.scriptSrc:wj()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":n.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":n.basePath?`${n.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function DL(n={}){var e;if(!IL()||n.route===null)return null;AL();const s=ML(n);if(document.head.querySelector(`script[src*="${s}"]`))return null;n.beforeSend&&((e=window.si)==null||e.call(window,"beforeSend",n.beforeSend));const r=document.createElement("script");return r.src=s,r.defer=!0,r.dataset.sdkn=TL+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=PL,n.sampleRate&&(r.dataset.sampleRate=n.sampleRate.toString()),n.route&&(r.dataset.route=n.route),n.endpoint?r.dataset.endpoint=n.endpoint:n.basePath&&(r.dataset.endpoint=`${n.basePath}/speed-insights/vitals`),n.dsn&&(r.dataset.dsn=n.dsn),wj()&&n.debug===!1&&(r.dataset.debug="false"),r.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${s}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(r),{setRoute:i=>{r.dataset.route=i??void 0}}}function OL(){if(!(typeof process>"u"||typeof Tv>"u"))return Tv.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function LL(n){S.useEffect(()=>{var s;n.beforeSend&&((s=window.si)==null||s.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]);const e=S.useRef(null);return S.useEffect(()=>{if(e.current)n.route&&e.current(n.route);else{const s=DL({framework:n.framework??"react",basePath:n.basePath??OL(),...n});s&&(e.current=s.setRoute)}},[n.route]),null}"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").catch(n=>{console.warn("Service worker registration failed:",n)});const Nj=document.getElementById("root");if(!Nj)throw new Error("Could not find root element to mount to");const zL=FS.createRoot(Nj);zL.render(t.jsxs(Ha.StrictMode,{children:[t.jsx(CL,{}),t.jsx(LL,{})]}));export{Cv as E,KN as W,HI as b};
