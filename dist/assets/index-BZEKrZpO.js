function ek(s,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in s)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(s,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function _j(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ef={exports:{}},Xc={},Tf={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function tk(){if(Ab)return Pt;Ab=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function w(J){return J===null||typeof J!="object"?null:(J=b&&J[b]||J["@@iterator"],typeof J=="function"?J:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,k={};function E(J,K,X){this.props=J,this.context=K,this.refs=k,this.updater=X||P}E.prototype.isReactComponent={},E.prototype.setState=function(J,K){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,K,"setState")},E.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function F(){}F.prototype=E.prototype;function U(J,K,X){this.props=J,this.context=K,this.refs=k,this.updater=X||P}var q=U.prototype=new F;q.constructor=U,C(q,E.prototype),q.isPureReactComponent=!0;var Z=Array.isArray,W=Object.prototype.hasOwnProperty,$={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function _(J,K,X){var ue,G={},se=null,Ie=null;if(K!=null)for(ue in K.ref!==void 0&&(Ie=K.ref),K.key!==void 0&&(se=""+K.key),K)W.call(K,ue)&&!R.hasOwnProperty(ue)&&(G[ue]=K[ue]);var Ae=arguments.length-2;if(Ae===1)G.children=X;else if(1<Ae){for(var He=Array(Ae),Be=0;Be<Ae;Be++)He[Be]=arguments[Be+2];G.children=He}if(J&&J.defaultProps)for(ue in Ae=J.defaultProps,Ae)G[ue]===void 0&&(G[ue]=Ae[ue]);return{$$typeof:s,type:J,key:se,ref:Ie,props:G,_owner:$.current}}function I(J,K){return{$$typeof:s,type:J.type,key:K,ref:J.ref,props:J.props,_owner:J._owner}}function V(J){return typeof J=="object"&&J!==null&&J.$$typeof===s}function A(J){var K={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(X){return K[X]})}var B=/\/+/g;function L(J,K){return typeof J=="object"&&J!==null&&J.key!=null?A(""+J.key):K.toString(36)}function ne(J,K,X,ue,G){var se=typeof J;(se==="undefined"||se==="boolean")&&(J=null);var Ie=!1;if(J===null)Ie=!0;else switch(se){case"string":case"number":Ie=!0;break;case"object":switch(J.$$typeof){case s:case e:Ie=!0}}if(Ie)return Ie=J,G=G(Ie),J=ue===""?"."+L(Ie,0):ue,Z(G)?(X="",J!=null&&(X=J.replace(B,"$&/")+"/"),ne(G,K,X,"",function(Be){return Be})):G!=null&&(V(G)&&(G=I(G,X+(!G.key||Ie&&Ie.key===G.key?"":(""+G.key).replace(B,"$&/")+"/")+J)),K.push(G)),1;if(Ie=0,ue=ue===""?".":ue+":",Z(J))for(var Ae=0;Ae<J.length;Ae++){se=J[Ae];var He=ue+L(se,Ae);Ie+=ne(se,K,X,He,G)}else if(He=w(J),typeof He=="function")for(J=He.call(J),Ae=0;!(se=J.next()).done;)se=se.value,He=ue+L(se,Ae++),Ie+=ne(se,K,X,He,G);else if(se==="object")throw K=String(J),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Ie}function pe(J,K,X){if(J==null)return J;var ue=[],G=0;return ne(J,ue,"","",function(se){return K.call(X,se,G++)}),ue}function Ne(J){if(J._status===-1){var K=J._result;K=K(),K.then(function(X){(J._status===0||J._status===-1)&&(J._status=1,J._result=X)},function(X){(J._status===0||J._status===-1)&&(J._status=2,J._result=X)}),J._status===-1&&(J._status=0,J._result=K)}if(J._status===1)return J._result.default;throw J._result}var Te={current:null},le={transition:null},fe={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:le,ReactCurrentOwner:$};function ve(){throw Error("act(...) is not supported in production builds of React.")}return Pt.Children={map:pe,forEach:function(J,K,X){pe(J,function(){K.apply(this,arguments)},X)},count:function(J){var K=0;return pe(J,function(){K++}),K},toArray:function(J){return pe(J,function(K){return K})||[]},only:function(J){if(!V(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},Pt.Component=E,Pt.Fragment=t,Pt.Profiler=i,Pt.PureComponent=U,Pt.StrictMode=r,Pt.Suspense=m,Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Pt.act=ve,Pt.cloneElement=function(J,K,X){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var ue=C({},J.props),G=J.key,se=J.ref,Ie=J._owner;if(K!=null){if(K.ref!==void 0&&(se=K.ref,Ie=$.current),K.key!==void 0&&(G=""+K.key),J.type&&J.type.defaultProps)var Ae=J.type.defaultProps;for(He in K)W.call(K,He)&&!R.hasOwnProperty(He)&&(ue[He]=K[He]===void 0&&Ae!==void 0?Ae[He]:K[He])}var He=arguments.length-2;if(He===1)ue.children=X;else if(1<He){Ae=Array(He);for(var Be=0;Be<He;Be++)Ae[Be]=arguments[Be+2];ue.children=Ae}return{$$typeof:s,type:J.type,key:G,ref:se,props:ue,_owner:Ie}},Pt.createContext=function(J){return J={$$typeof:c,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:o,_context:J},J.Consumer=J},Pt.createElement=_,Pt.createFactory=function(J){var K=_.bind(null,J);return K.type=J,K},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(J){return{$$typeof:d,render:J}},Pt.isValidElement=V,Pt.lazy=function(J){return{$$typeof:g,_payload:{_status:-1,_result:J},_init:Ne}},Pt.memo=function(J,K){return{$$typeof:h,type:J,compare:K===void 0?null:K}},Pt.startTransition=function(J){var K=le.transition;le.transition={};try{J()}finally{le.transition=K}},Pt.unstable_act=ve,Pt.useCallback=function(J,K){return Te.current.useCallback(J,K)},Pt.useContext=function(J){return Te.current.useContext(J)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(J){return Te.current.useDeferredValue(J)},Pt.useEffect=function(J,K){return Te.current.useEffect(J,K)},Pt.useId=function(){return Te.current.useId()},Pt.useImperativeHandle=function(J,K,X){return Te.current.useImperativeHandle(J,K,X)},Pt.useInsertionEffect=function(J,K){return Te.current.useInsertionEffect(J,K)},Pt.useLayoutEffect=function(J,K){return Te.current.useLayoutEffect(J,K)},Pt.useMemo=function(J,K){return Te.current.useMemo(J,K)},Pt.useReducer=function(J,K,X){return Te.current.useReducer(J,K,X)},Pt.useRef=function(J){return Te.current.useRef(J)},Pt.useState=function(J){return Te.current.useState(J)},Pt.useSyncExternalStore=function(J,K,X){return Te.current.useSyncExternalStore(J,K,X)},Pt.useTransition=function(){return Te.current.useTransition()},Pt.version="18.3.1",Pt}var Ib;function ex(){return Ib||(Ib=1,Tf.exports=tk()),Tf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function nk(){if(Rb)return Xc;Rb=1;var s=ex(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(d,m,h){var g,b={},w=null,P=null;h!==void 0&&(w=""+h),m.key!==void 0&&(w=""+m.key),m.ref!==void 0&&(P=m.ref);for(g in m)r.call(m,g)&&!o.hasOwnProperty(g)&&(b[g]=m[g]);if(d&&d.defaultProps)for(g in m=d.defaultProps,m)b[g]===void 0&&(b[g]=m[g]);return{$$typeof:e,type:d,key:w,ref:P,props:b,_owner:i.current}}return Xc.Fragment=t,Xc.jsx=c,Xc.jsxs=c,Xc}var Db;function sk(){return Db||(Db=1,Ef.exports=nk()),Ef.exports}var n=sk(),S=ex();const Do=_j(S),rk=ek({__proto__:null,default:Do},[S]);var oh={},Pf={exports:{}},Fs={},Af={exports:{}},If={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function ik(){return Mb||(Mb=1,(function(s){function e(le,fe){var ve=le.length;le.push(fe);e:for(;0<ve;){var J=ve-1>>>1,K=le[J];if(0<i(K,fe))le[J]=fe,le[ve]=K,ve=J;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var fe=le[0],ve=le.pop();if(ve!==fe){le[0]=ve;e:for(var J=0,K=le.length,X=K>>>1;J<X;){var ue=2*(J+1)-1,G=le[ue],se=ue+1,Ie=le[se];if(0>i(G,ve))se<K&&0>i(Ie,G)?(le[J]=Ie,le[se]=ve,J=se):(le[J]=G,le[ue]=ve,J=ue);else if(se<K&&0>i(Ie,ve))le[J]=Ie,le[se]=ve,J=se;else break e}}return fe}function i(le,fe){var ve=le.sortIndex-fe.sortIndex;return ve!==0?ve:le.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var m=[],h=[],g=1,b=null,w=3,P=!1,C=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(le){for(var fe=t(h);fe!==null;){if(fe.callback===null)r(h);else if(fe.startTime<=le)r(h),fe.sortIndex=fe.expirationTime,e(m,fe);else break;fe=t(h)}}function Z(le){if(k=!1,q(le),!C)if(t(m)!==null)C=!0,Ne(W);else{var fe=t(h);fe!==null&&Te(Z,fe.startTime-le)}}function W(le,fe){C=!1,k&&(k=!1,F(_),_=-1),P=!0;var ve=w;try{for(q(fe),b=t(m);b!==null&&(!(b.expirationTime>fe)||le&&!A());){var J=b.callback;if(typeof J=="function"){b.callback=null,w=b.priorityLevel;var K=J(b.expirationTime<=fe);fe=s.unstable_now(),typeof K=="function"?b.callback=K:b===t(m)&&r(m),q(fe)}else r(m);b=t(m)}if(b!==null)var X=!0;else{var ue=t(h);ue!==null&&Te(Z,ue.startTime-fe),X=!1}return X}finally{b=null,w=ve,P=!1}}var $=!1,R=null,_=-1,I=5,V=-1;function A(){return!(s.unstable_now()-V<I)}function B(){if(R!==null){var le=s.unstable_now();V=le;var fe=!0;try{fe=R(!0,le)}finally{fe?L():($=!1,R=null)}}else $=!1}var L;if(typeof U=="function")L=function(){U(B)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,pe=ne.port2;ne.port1.onmessage=B,L=function(){pe.postMessage(null)}}else L=function(){E(B,0)};function Ne(le){R=le,$||($=!0,L())}function Te(le,fe){_=E(function(){le(s.unstable_now())},fe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(le){le.callback=null},s.unstable_continueExecution=function(){C||P||(C=!0,Ne(W))},s.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<le?Math.floor(1e3/le):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_getFirstCallbackNode=function(){return t(m)},s.unstable_next=function(le){switch(w){case 1:case 2:case 3:var fe=3;break;default:fe=w}var ve=w;w=fe;try{return le()}finally{w=ve}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(le,fe){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var ve=w;w=le;try{return fe()}finally{w=ve}},s.unstable_scheduleCallback=function(le,fe,ve){var J=s.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?J+ve:J):ve=J,le){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ve+K,le={id:g++,callback:fe,priorityLevel:le,startTime:ve,expirationTime:K,sortIndex:-1},ve>J?(le.sortIndex=ve,e(h,le),t(m)===null&&le===t(h)&&(k?(F(_),_=-1):k=!0,Te(Z,ve-J))):(le.sortIndex=K,e(m,le),C||P||(C=!0,Ne(W))),le},s.unstable_shouldYield=A,s.unstable_wrapCallback=function(le){var fe=w;return function(){var ve=w;w=fe;try{return le.apply(this,arguments)}finally{w=ve}}}})(If)),If}var Lb;function ak(){return Lb||(Lb=1,Af.exports=ik()),Af.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function ok(){if(zb)return Fs;zb=1;var s=ex(),e=ak();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,u=1;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,l){c(a,l),c(a+"Capture",l)}function c(a,l){for(i[a]=l,a=0;a<l.length;a++)r.add(l[a])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},b={};function w(a){return m.call(b,a)?!0:m.call(g,a)?!1:h.test(a)?b[a]=!0:(g[a]=!0,!1)}function P(a,l,u,f){if(u!==null&&u.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function C(a,l,u,f){if(l===null||typeof l>"u"||P(a,l,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function k(a,l,u,f,v,N,D){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=f,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=a,this.type=l,this.sanitizeURL=N,this.removeEmptyString=D}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=new k(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];E[l]=new k(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new k(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new k(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=new k(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){E[a]=new k(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){E[a]=new k(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){E[a]=new k(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){E[a]=new k(a,5,!1,a.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function U(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(F,U);E[l]=new k(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(F,U);E[l]=new k(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(F,U);E[l]=new k(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){E[a]=new k(a,1,!1,a.toLowerCase(),null,!1,!1)}),E.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){E[a]=new k(a,1,!1,a.toLowerCase(),null,!0,!0)});function q(a,l,u,f){var v=E.hasOwnProperty(l)?E[l]:null;(v!==null?v.type!==0:f||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(C(l,u,v,f)&&(u=null),f||v===null?w(l)&&(u===null?a.removeAttribute(l):a.setAttribute(l,""+u)):v.mustUseProperty?a[v.propertyName]=u===null?v.type===3?!1:"":u:(l=v.attributeName,f=v.attributeNamespace,u===null?a.removeAttribute(l):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,f?a.setAttributeNS(f,l,u):a.setAttribute(l,u))))}var Z=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),$=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),A=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),le=Symbol.iterator;function fe(a){return a===null||typeof a!="object"?null:(a=le&&a[le]||a["@@iterator"],typeof a=="function"?a:null)}var ve=Object.assign,J;function K(a){if(J===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);J=l&&l[1]||""}return`
`+J+a}var X=!1;function ue(a,l){if(!a||X)return"";X=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(he){var f=he}Reflect.construct(a,[],l)}else{try{l.call()}catch(he){f=he}a.call(l.prototype)}else{try{throw Error()}catch(he){f=he}a()}}catch(he){if(he&&f&&typeof he.stack=="string"){for(var v=he.stack.split(`
`),N=f.stack.split(`
`),D=v.length-1,H=N.length-1;1<=D&&0<=H&&v[D]!==N[H];)H--;for(;1<=D&&0<=H;D--,H--)if(v[D]!==N[H]){if(D!==1||H!==1)do if(D--,H--,0>H||v[D]!==N[H]){var Y=`
`+v[D].replace(" at new "," at ");return a.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",a.displayName)),Y}while(1<=D&&0<=H);break}}}finally{X=!1,Error.prepareStackTrace=u}return(a=a?a.displayName||a.name:"")?K(a):""}function G(a){switch(a.tag){case 5:return K(a.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return a=ue(a.type,!1),a;case 11:return a=ue(a.type.render,!1),a;case 1:return a=ue(a.type,!0),a;default:return""}}function se(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case R:return"Fragment";case $:return"Portal";case I:return"Profiler";case _:return"StrictMode";case L:return"Suspense";case ne:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case A:return(a.displayName||"Context")+".Consumer";case V:return(a._context.displayName||"Context")+".Provider";case B:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case pe:return l=a.displayName||null,l!==null?l:se(a.type)||"Memo";case Ne:l=a._payload,a=a._init;try{return se(a(l))}catch{}}return null}function Ie(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(l);case 8:return l===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ae(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function He(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Be(a){var l=He(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),f=""+a[l];if(!a.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,N=u.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return v.call(this)},set:function(D){f=""+D,N.call(this,D)}}),Object.defineProperty(a,l,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(D){f=""+D},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function xt(a){a._valueTracker||(a._valueTracker=Be(a))}function we(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var u=l.getValue(),f="";return a&&(f=He(a)?a.checked?"true":"false":a.value),a=f,a!==u?(l.setValue(a),!0):!1}function We(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function at(a,l){var u=l.checked;return ve({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??a._wrapperState.initialChecked})}function bt(a,l){var u=l.defaultValue==null?"":l.defaultValue,f=l.checked!=null?l.checked:l.defaultChecked;u=Ae(l.value!=null?l.value:u),a._wrapperState={initialChecked:f,initialValue:u,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function z(a,l){l=l.checked,l!=null&&q(a,"checked",l,!1)}function re(a,l){z(a,l);var u=Ae(l.value),f=l.type;if(u!=null)f==="number"?(u===0&&a.value===""||a.value!=u)&&(a.value=""+u):a.value!==""+u&&(a.value=""+u);else if(f==="submit"||f==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?_e(a,l.type,u):l.hasOwnProperty("defaultValue")&&_e(a,l.type,Ae(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function $e(a,l,u){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var f=l.type;if(!(f!=="submit"&&f!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,u||l===a.value||(a.value=l),a.defaultValue=l}u=a.name,u!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,u!==""&&(a.name=u)}function _e(a,l,u){(l!=="number"||We(a.ownerDocument)!==a)&&(u==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+u&&(a.defaultValue=""+u))}var qe=Array.isArray;function Vt(a,l,u,f){if(a=a.options,l){l={};for(var v=0;v<u.length;v++)l["$"+u[v]]=!0;for(u=0;u<a.length;u++)v=l.hasOwnProperty("$"+a[u].value),a[u].selected!==v&&(a[u].selected=v),v&&f&&(a[u].defaultSelected=!0)}else{for(u=""+Ae(u),l=null,v=0;v<a.length;v++){if(a[v].value===u){a[v].selected=!0,f&&(a[v].defaultSelected=!0);return}l!==null||a[v].disabled||(l=a[v])}l!==null&&(l.selected=!0)}}function xe(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return ve({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function mt(a,l){var u=l.value;if(u==null){if(u=l.children,l=l.defaultValue,u!=null){if(l!=null)throw Error(t(92));if(qe(u)){if(1<u.length)throw Error(t(93));u=u[0]}l=u}l==null&&(l=""),u=l}a._wrapperState={initialValue:Ae(u)}}function kt(a,l){var u=Ae(l.value),f=Ae(l.defaultValue);u!=null&&(u=""+u,u!==a.value&&(a.value=u),l.defaultValue==null&&a.defaultValue!==u&&(a.defaultValue=u)),f!=null&&(a.defaultValue=""+f)}function Dt(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function pt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $t(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?pt(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Qt,vt=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,u,f,v){MSApp.execUnsafeLocalFunction(function(){return a(l,u,f,v)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Qt=Qt||document.createElement("div"),Qt.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Qt.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function tn(a,l){if(l){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=l;return}}a.textContent=l}var Re={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},In=["Webkit","ms","Moz","O"];Object.keys(Re).forEach(function(a){In.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Re[l]=Re[a]})});function Hn(a,l,u){return l==null||typeof l=="boolean"||l===""?"":u||typeof l!="number"||l===0||Re.hasOwnProperty(a)&&Re[a]?(""+l).trim():l+"px"}function Is(a,l){a=a.style;for(var u in l)if(l.hasOwnProperty(u)){var f=u.indexOf("--")===0,v=Hn(u,l[u],f);u==="float"&&(u="cssFloat"),f?a.setProperty(u,v):a[u]=v}}var ds=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function es(a,l){if(l){if(ds[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function mr(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ts=null;function Ns(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var us=null,fn=null,Rt=null;function je(a){if(a=Vc(a)){if(typeof us!="function")throw Error(t(280));var l=a.stateNode;l&&(l=Nu(l),us(a.stateNode,a.type,l))}}function tt(a){fn?Rt?Rt.push(a):Rt=[a]:fn=a}function Gt(){if(fn){var a=fn,l=Rt;if(Rt=fn=null,je(a),l)for(a=0;a<l.length;a++)je(l[a])}}function gn(a,l){return a(l)}function Wn(){}var ns=!1;function ea(a,l,u){if(ns)return a(l,u);ns=!0;try{return gn(a,l,u)}finally{ns=!1,(fn!==null||Rt!==null)&&(Wn(),Gt())}}function pr(a,l){var u=a.stateNode;if(u===null)return null;var f=Nu(u);if(f===null)return null;u=f[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(t(231,l,typeof u));return u}var fr=!1;if(d)try{var Ys={};Object.defineProperty(Ys,"passive",{get:function(){fr=!0}}),window.addEventListener("test",Ys,Ys),window.removeEventListener("test",Ys,Ys)}catch{fr=!1}function ta(a,l,u,f,v,N,D,H,Y){var he=Array.prototype.slice.call(arguments,3);try{l.apply(u,he)}catch(Ee){this.onError(Ee)}}var Zs=!1,Rs=null,Hr=!1,Q=null,ee={onError:function(a){Zs=!0,Rs=a}};function ie(a,l,u,f,v,N,D,H,Y){Zs=!1,Rs=null,ta.apply(ee,arguments)}function ge(a,l,u,f,v,N,D,H,Y){if(ie.apply(this,arguments),Zs){if(Zs){var he=Rs;Zs=!1,Rs=null}else throw Error(t(198));Hr||(Hr=!0,Q=he)}}function Me(a){var l=a,u=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(u=l.return),a=l.return;while(a)}return l.tag===3?u:null}function Xe(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function rt(a){if(Me(a)!==a)throw Error(t(188))}function nt(a){var l=a.alternate;if(!l){if(l=Me(a),l===null)throw Error(t(188));return l!==a?null:a}for(var u=a,f=l;;){var v=u.return;if(v===null)break;var N=v.alternate;if(N===null){if(f=v.return,f!==null){u=f;continue}break}if(v.child===N.child){for(N=v.child;N;){if(N===u)return rt(v),a;if(N===f)return rt(v),l;N=N.sibling}throw Error(t(188))}if(u.return!==f.return)u=v,f=N;else{for(var D=!1,H=v.child;H;){if(H===u){D=!0,u=v,f=N;break}if(H===f){D=!0,f=v,u=N;break}H=H.sibling}if(!D){for(H=N.child;H;){if(H===u){D=!0,u=N,f=v;break}if(H===f){D=!0,f=N,u=v;break}H=H.sibling}if(!D)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?a:l}function Fe(a){return a=nt(a),a!==null?ot(a):null}function ot(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=ot(a);if(l!==null)return l;a=a.sibling}return null}var Et=e.unstable_scheduleCallback,Jt=e.unstable_cancelCallback,un=e.unstable_shouldYield,wn=e.unstable_requestPaint,Ut=e.unstable_now,on=e.unstable_getCurrentPriorityLevel,Ds=e.unstable_ImmediatePriority,Si=e.unstable_UserBlockingPriority,Nn=e.unstable_NormalPriority,M=e.unstable_LowPriority,ce=e.unstable_IdlePriority,Ue=null,it=null;function Ve(a){if(it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Ue,a,void 0,(a.current.flags&128)===128)}catch{}}var Ye=Math.clz32?Math.clz32:Wr,St=Math.log,Tt=Math.LN2;function Wr(a){return a>>>=0,a===0?32:31-(St(a)/Tt|0)|0}var gr=64,na=4194304;function Wt(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function _i(a,l){var u=a.pendingLanes;if(u===0)return 0;var f=0,v=a.suspendedLanes,N=a.pingedLanes,D=u&268435455;if(D!==0){var H=D&~v;H!==0?f=Wt(H):(N&=D,N!==0&&(f=Wt(N)))}else D=u&~v,D!==0?f=Wt(D):N!==0&&(f=Wt(N));if(f===0)return 0;if(l!==0&&l!==f&&(l&v)===0&&(v=f&-f,N=l&-l,v>=N||v===16&&(N&4194240)!==0))return l;if((f&4)!==0&&(f|=u&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=f;0<l;)u=31-Ye(l),v=1<<u,f|=a[u],l&=~v;return f}function oo(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lo(a,l){for(var u=a.suspendedLanes,f=a.pingedLanes,v=a.expirationTimes,N=a.pendingLanes;0<N;){var D=31-Ye(N),H=1<<D,Y=v[D];Y===-1?((H&u)===0||(H&f)!==0)&&(v[D]=oo(H,l)):Y<=l&&(a.expiredLanes|=H),N&=~H}}function xc(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yc(){var a=gr;return gr<<=1,(gr&4194240)===0&&(gr=64),a}function bc(a){for(var l=[],u=0;31>u;u++)l.push(a);return l}function co(a,l,u){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-Ye(l),a[l]=u}function ip(a,l){var u=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var f=a.eventTimes;for(a=a.expirationTimes;0<u;){var v=31-Ye(u),N=1<<v;l[v]=0,f[v]=-1,a[v]=-1,u&=~N}}function vc(a,l){var u=a.entangledLanes|=l;for(a=a.entanglements;u;){var f=31-Ye(u),v=1<<f;v&l|a[f]&l&&(a[f]|=l),u&=~v}}var Ot=0;function Kr(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var wc,el,Nc,jc,Sc,Jr=!1,tl=[],Yr=null,Zr=null,ss=null,uo=new Map,Ci=new Map,Qs=[],au="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sa(a,l){switch(a){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":uo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(l.pointerId)}}function Tr(a,l,u,f,v,N){return a===null||a.nativeEvent!==N?(a={blockedOn:l,domEventName:u,eventSystemFlags:f,nativeEvent:N,targetContainers:[v]},l!==null&&(l=Vc(l),l!==null&&el(l)),a):(a.eventSystemFlags|=f,l=a.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),a)}function ou(a,l,u,f,v){switch(l){case"focusin":return Yr=Tr(Yr,a,l,u,f,v),!0;case"dragenter":return Zr=Tr(Zr,a,l,u,f,v),!0;case"mouseover":return ss=Tr(ss,a,l,u,f,v),!0;case"pointerover":var N=v.pointerId;return uo.set(N,Tr(uo.get(N)||null,a,l,u,f,v)),!0;case"gotpointercapture":return N=v.pointerId,Ci.set(N,Tr(Ci.get(N)||null,a,l,u,f,v)),!0}return!1}function nl(a){var l=fo(a.target);if(l!==null){var u=Me(l);if(u!==null){if(l=u.tag,l===13){if(l=Xe(u),l!==null){a.blockedOn=l,Sc(a.priority,function(){Nc(u)});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function nn(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var u=sl(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(u===null){u=a.nativeEvent;var f=new u.constructor(u.type,u);ts=f,u.target.dispatchEvent(f),ts=null}else return l=Vc(u),l!==null&&el(l),a.blockedOn=u,!1;l.shift()}return!0}function lu(a,l,u){nn(a)&&u.delete(l)}function ap(){Jr=!1,Yr!==null&&nn(Yr)&&(Yr=null),Zr!==null&&nn(Zr)&&(Zr=null),ss!==null&&nn(ss)&&(ss=null),uo.forEach(lu),Ci.forEach(lu)}function ra(a,l){a.blockedOn===l&&(a.blockedOn=null,Jr||(Jr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ap)))}function ia(a){function l(v){return ra(v,a)}if(0<tl.length){ra(tl[0],a);for(var u=1;u<tl.length;u++){var f=tl[u];f.blockedOn===a&&(f.blockedOn=null)}}for(Yr!==null&&ra(Yr,a),Zr!==null&&ra(Zr,a),ss!==null&&ra(ss,a),uo.forEach(l),Ci.forEach(l),u=0;u<Qs.length;u++)f=Qs[u],f.blockedOn===a&&(f.blockedOn=null);for(;0<Qs.length&&(u=Qs[0],u.blockedOn===null);)nl(u),u.blockedOn===null&&Qs.shift()}var ki=Z.ReactCurrentBatchConfig,Ei=!0;function Qr(a,l,u,f){var v=Ot,N=ki.transition;ki.transition=null;try{Ot=1,_c(a,l,u,f)}finally{Ot=v,ki.transition=N}}function cu(a,l,u,f){var v=Ot,N=ki.transition;ki.transition=null;try{Ot=4,_c(a,l,u,f)}finally{Ot=v,ki.transition=N}}function _c(a,l,u,f){if(Ei){var v=sl(a,l,u,f);if(v===null)xp(a,l,f,Xr,u),sa(a,f);else if(ou(v,a,l,u,f))f.stopPropagation();else if(sa(a,f),l&4&&-1<au.indexOf(a)){for(;v!==null;){var N=Vc(v);if(N!==null&&wc(N),N=sl(a,l,u,f),N===null&&xp(a,l,f,Xr,u),N===v)break;v=N}v!==null&&f.stopPropagation()}else xp(a,l,f,null,u)}}var Xr=null;function sl(a,l,u,f){if(Xr=null,a=Ns(f),a=fo(a),a!==null)if(l=Me(a),l===null)a=null;else if(u=l.tag,u===13){if(a=Xe(l),a!==null)return a;a=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return Xr=a,null}function rl(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(on()){case Ds:return 1;case Si:return 4;case Nn:case M:return 16;case ce:return 536870912;default:return 16}default:return 16}}var Xs=null,il=null,Ti=null;function du(){if(Ti)return Ti;var a,l=il,u=l.length,f,v="value"in Xs?Xs.value:Xs.textContent,N=v.length;for(a=0;a<u&&l[a]===v[a];a++);var D=u-a;for(f=1;f<=D&&l[u-f]===v[N-f];f++);return Ti=v.slice(a,1<f?1-f:void 0)}function ho(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function ei(){return!0}function Cc(){return!1}function hs(a){function l(u,f,v,N,D){this._reactName=u,this._targetInst=v,this.type=f,this.nativeEvent=N,this.target=D,this.currentTarget=null;for(var H in a)a.hasOwnProperty(H)&&(u=a[H],this[H]=u?u(N):N[H]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?ei:Cc,this.isPropagationStopped=Cc,this}return ve(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),l}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=hs(ti),aa=ve({},ti,{view:0,detail:0}),al=hs(aa),ol,ll,er,po=ve({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wt,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==er&&(er&&a.type==="mousemove"?(ol=a.screenX-er.screenX,ll=a.screenY-er.screenY):ll=ol=0,er=a),ol)},movementY:function(a){return"movementY"in a?a.movementY:ll}}),kc=hs(po),uu=ve({},po,{dataTransfer:0}),hu=hs(uu),cl=ve({},aa,{relatedTarget:0}),rs=hs(cl),mu=ve({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),pu=hs(mu),oa=ve({},ti,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),p=hs(oa),j=ve({},ti,{data:0}),T=hs(j),O={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},me={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ze(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=me[a])?!!l[a]:!1}function wt(){return ze}var En=ve({},aa,{key:function(a){if(a.key){var l=O[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=ho(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?oe[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wt,charCode:function(a){return a.type==="keypress"?ho(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ho(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Xt=hs(En),Rn=ve({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tr=hs(Rn),Pi=ve({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wt}),ni=hs(Pi),si=ve({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),dl=hs(si),Ec=ve({},po,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),K2=hs(Ec),J2=[9,13,27,32],op=d&&"CompositionEvent"in window,Tc=null;d&&"documentMode"in document&&(Tc=document.documentMode);var Y2=d&&"TextEvent"in window&&!Tc,j0=d&&(!op||Tc&&8<Tc&&11>=Tc),S0=" ",_0=!1;function C0(a,l){switch(a){case"keyup":return J2.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k0(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ul=!1;function Z2(a,l){switch(a){case"compositionend":return k0(l);case"keypress":return l.which!==32?null:(_0=!0,S0);case"textInput":return a=l.data,a===S0&&_0?null:a;default:return null}}function Q2(a,l){if(ul)return a==="compositionend"||!op&&C0(a,l)?(a=du(),Ti=il=Xs=null,ul=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return j0&&l.locale!=="ko"?null:l.data;default:return null}}var X2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E0(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!X2[a.type]:l==="textarea"}function T0(a,l,u,f){tt(f),l=bu(l,"onChange"),0<l.length&&(u=new mo("onChange","change",null,u,f),a.push({event:u,listeners:l}))}var Pc=null,Ac=null;function eC(a){W0(a,0)}function fu(a){var l=gl(a);if(we(l))return a}function tC(a,l){if(a==="change")return l}var P0=!1;if(d){var lp;if(d){var cp="oninput"in document;if(!cp){var A0=document.createElement("div");A0.setAttribute("oninput","return;"),cp=typeof A0.oninput=="function"}lp=cp}else lp=!1;P0=lp&&(!document.documentMode||9<document.documentMode)}function I0(){Pc&&(Pc.detachEvent("onpropertychange",R0),Ac=Pc=null)}function R0(a){if(a.propertyName==="value"&&fu(Ac)){var l=[];T0(l,Ac,a,Ns(a)),ea(eC,l)}}function nC(a,l,u){a==="focusin"?(I0(),Pc=l,Ac=u,Pc.attachEvent("onpropertychange",R0)):a==="focusout"&&I0()}function sC(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return fu(Ac)}function rC(a,l){if(a==="click")return fu(l)}function iC(a,l){if(a==="input"||a==="change")return fu(l)}function aC(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Pr=typeof Object.is=="function"?Object.is:aC;function Ic(a,l){if(Pr(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var u=Object.keys(a),f=Object.keys(l);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var v=u[f];if(!m.call(l,v)||!Pr(a[v],l[v]))return!1}return!0}function D0(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function M0(a,l){var u=D0(a);a=0;for(var f;u;){if(u.nodeType===3){if(f=a+u.textContent.length,a<=l&&f>=l)return{node:u,offset:l-a};a=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=D0(u)}}function L0(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?L0(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function z0(){for(var a=window,l=We();l instanceof a.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)a=l.contentWindow;else break;l=We(a.document)}return l}function dp(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function oC(a){var l=z0(),u=a.focusedElem,f=a.selectionRange;if(l!==u&&u&&u.ownerDocument&&L0(u.ownerDocument.documentElement,u)){if(f!==null&&dp(u)){if(l=f.start,a=f.end,a===void 0&&(a=l),"selectionStart"in u)u.selectionStart=l,u.selectionEnd=Math.min(a,u.value.length);else if(a=(l=u.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var v=u.textContent.length,N=Math.min(f.start,v);f=f.end===void 0?N:Math.min(f.end,v),!a.extend&&N>f&&(v=f,f=N,N=v),v=M0(u,N);var D=M0(u,f);v&&D&&(a.rangeCount!==1||a.anchorNode!==v.node||a.anchorOffset!==v.offset||a.focusNode!==D.node||a.focusOffset!==D.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),a.removeAllRanges(),N>f?(a.addRange(l),a.extend(D.node,D.offset)):(l.setEnd(D.node,D.offset),a.addRange(l)))}}for(l=[],a=u;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<l.length;u++)a=l[u],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var lC=d&&"documentMode"in document&&11>=document.documentMode,hl=null,up=null,Rc=null,hp=!1;function V0(a,l,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;hp||hl==null||hl!==We(f)||(f=hl,"selectionStart"in f&&dp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Rc&&Ic(Rc,f)||(Rc=f,f=bu(up,"onSelect"),0<f.length&&(l=new mo("onSelect","select",null,l,u),a.push({event:l,listeners:f}),l.target=hl)))}function gu(a,l){var u={};return u[a.toLowerCase()]=l.toLowerCase(),u["Webkit"+a]="webkit"+l,u["Moz"+a]="moz"+l,u}var ml={animationend:gu("Animation","AnimationEnd"),animationiteration:gu("Animation","AnimationIteration"),animationstart:gu("Animation","AnimationStart"),transitionend:gu("Transition","TransitionEnd")},mp={},O0={};d&&(O0=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function xu(a){if(mp[a])return mp[a];if(!ml[a])return a;var l=ml[a],u;for(u in l)if(l.hasOwnProperty(u)&&u in O0)return mp[a]=l[u];return a}var F0=xu("animationend"),U0=xu("animationiteration"),B0=xu("animationstart"),$0=xu("transitionend"),q0=new Map,G0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function la(a,l){q0.set(a,l),o(l,[a])}for(var pp=0;pp<G0.length;pp++){var fp=G0[pp],cC=fp.toLowerCase(),dC=fp[0].toUpperCase()+fp.slice(1);la(cC,"on"+dC)}la(F0,"onAnimationEnd"),la(U0,"onAnimationIteration"),la(B0,"onAnimationStart"),la("dblclick","onDoubleClick"),la("focusin","onFocus"),la("focusout","onBlur"),la($0,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dc));function H0(a,l,u){var f=a.type||"unknown-event";a.currentTarget=u,ge(f,l,void 0,a),a.currentTarget=null}function W0(a,l){l=(l&4)!==0;for(var u=0;u<a.length;u++){var f=a[u],v=f.event;f=f.listeners;e:{var N=void 0;if(l)for(var D=f.length-1;0<=D;D--){var H=f[D],Y=H.instance,he=H.currentTarget;if(H=H.listener,Y!==N&&v.isPropagationStopped())break e;H0(v,H,he),N=Y}else for(D=0;D<f.length;D++){if(H=f[D],Y=H.instance,he=H.currentTarget,H=H.listener,Y!==N&&v.isPropagationStopped())break e;H0(v,H,he),N=Y}}}if(Hr)throw a=Q,Hr=!1,Q=null,a}function ln(a,l){var u=l[jp];u===void 0&&(u=l[jp]=new Set);var f=a+"__bubble";u.has(f)||(K0(l,a,2,!1),u.add(f))}function gp(a,l,u){var f=0;l&&(f|=4),K0(u,a,f,l)}var yu="_reactListening"+Math.random().toString(36).slice(2);function Mc(a){if(!a[yu]){a[yu]=!0,r.forEach(function(u){u!=="selectionchange"&&(uC.has(u)||gp(u,!1,a),gp(u,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[yu]||(l[yu]=!0,gp("selectionchange",!1,l))}}function K0(a,l,u,f){switch(rl(l)){case 1:var v=Qr;break;case 4:v=cu;break;default:v=_c}u=v.bind(null,l,u,a),v=void 0,!fr||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),f?v!==void 0?a.addEventListener(l,u,{capture:!0,passive:v}):a.addEventListener(l,u,!0):v!==void 0?a.addEventListener(l,u,{passive:v}):a.addEventListener(l,u,!1)}function xp(a,l,u,f,v){var N=f;if((l&1)===0&&(l&2)===0&&f!==null)e:for(;;){if(f===null)return;var D=f.tag;if(D===3||D===4){var H=f.stateNode.containerInfo;if(H===v||H.nodeType===8&&H.parentNode===v)break;if(D===4)for(D=f.return;D!==null;){var Y=D.tag;if((Y===3||Y===4)&&(Y=D.stateNode.containerInfo,Y===v||Y.nodeType===8&&Y.parentNode===v))return;D=D.return}for(;H!==null;){if(D=fo(H),D===null)return;if(Y=D.tag,Y===5||Y===6){f=N=D;continue e}H=H.parentNode}}f=f.return}ea(function(){var he=N,Ee=Ns(u),Pe=[];e:{var ke=q0.get(a);if(ke!==void 0){var Ge=mo,Ze=a;switch(a){case"keypress":if(ho(u)===0)break e;case"keydown":case"keyup":Ge=Xt;break;case"focusin":Ze="focus",Ge=rs;break;case"focusout":Ze="blur",Ge=rs;break;case"beforeblur":case"afterblur":Ge=rs;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=ni;break;case F0:case U0:case B0:Ge=pu;break;case $0:Ge=dl;break;case"scroll":Ge=al;break;case"wheel":Ge=K2;break;case"copy":case"cut":case"paste":Ge=p;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=tr}var Qe=(l&4)!==0,Tn=!Qe&&a==="scroll",ae=Qe?ke!==null?ke+"Capture":null:ke;Qe=[];for(var te=he,de;te!==null;){de=te;var De=de.stateNode;if(de.tag===5&&De!==null&&(de=De,ae!==null&&(De=pr(te,ae),De!=null&&Qe.push(Lc(te,De,de)))),Tn)break;te=te.return}0<Qe.length&&(ke=new Ge(ke,Ze,null,u,Ee),Pe.push({event:ke,listeners:Qe}))}}if((l&7)===0){e:{if(ke=a==="mouseover"||a==="pointerover",Ge=a==="mouseout"||a==="pointerout",ke&&u!==ts&&(Ze=u.relatedTarget||u.fromElement)&&(fo(Ze)||Ze[Ai]))break e;if((Ge||ke)&&(ke=Ee.window===Ee?Ee:(ke=Ee.ownerDocument)?ke.defaultView||ke.parentWindow:window,Ge?(Ze=u.relatedTarget||u.toElement,Ge=he,Ze=Ze?fo(Ze):null,Ze!==null&&(Tn=Me(Ze),Ze!==Tn||Ze.tag!==5&&Ze.tag!==6)&&(Ze=null)):(Ge=null,Ze=he),Ge!==Ze)){if(Qe=kc,De="onMouseLeave",ae="onMouseEnter",te="mouse",(a==="pointerout"||a==="pointerover")&&(Qe=tr,De="onPointerLeave",ae="onPointerEnter",te="pointer"),Tn=Ge==null?ke:gl(Ge),de=Ze==null?ke:gl(Ze),ke=new Qe(De,te+"leave",Ge,u,Ee),ke.target=Tn,ke.relatedTarget=de,De=null,fo(Ee)===he&&(Qe=new Qe(ae,te+"enter",Ze,u,Ee),Qe.target=de,Qe.relatedTarget=Tn,De=Qe),Tn=De,Ge&&Ze)t:{for(Qe=Ge,ae=Ze,te=0,de=Qe;de;de=pl(de))te++;for(de=0,De=ae;De;De=pl(De))de++;for(;0<te-de;)Qe=pl(Qe),te--;for(;0<de-te;)ae=pl(ae),de--;for(;te--;){if(Qe===ae||ae!==null&&Qe===ae.alternate)break t;Qe=pl(Qe),ae=pl(ae)}Qe=null}else Qe=null;Ge!==null&&J0(Pe,ke,Ge,Qe,!1),Ze!==null&&Tn!==null&&J0(Pe,Tn,Ze,Qe,!0)}}e:{if(ke=he?gl(he):window,Ge=ke.nodeName&&ke.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&ke.type==="file")var et=tC;else if(E0(ke))if(P0)et=iC;else{et=sC;var lt=nC}else(Ge=ke.nodeName)&&Ge.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(et=rC);if(et&&(et=et(a,he))){T0(Pe,et,u,Ee);break e}lt&&lt(a,ke,he),a==="focusout"&&(lt=ke._wrapperState)&&lt.controlled&&ke.type==="number"&&_e(ke,"number",ke.value)}switch(lt=he?gl(he):window,a){case"focusin":(E0(lt)||lt.contentEditable==="true")&&(hl=lt,up=he,Rc=null);break;case"focusout":Rc=up=hl=null;break;case"mousedown":hp=!0;break;case"contextmenu":case"mouseup":case"dragend":hp=!1,V0(Pe,u,Ee);break;case"selectionchange":if(lC)break;case"keydown":case"keyup":V0(Pe,u,Ee)}var ct;if(op)e:{switch(a){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else ul?C0(a,u)&&(ft="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(ft="onCompositionStart");ft&&(j0&&u.locale!=="ko"&&(ul||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&ul&&(ct=du()):(Xs=Ee,il="value"in Xs?Xs.value:Xs.textContent,ul=!0)),lt=bu(he,ft),0<lt.length&&(ft=new T(ft,a,null,u,Ee),Pe.push({event:ft,listeners:lt}),ct?ft.data=ct:(ct=k0(u),ct!==null&&(ft.data=ct)))),(ct=Y2?Z2(a,u):Q2(a,u))&&(he=bu(he,"onBeforeInput"),0<he.length&&(Ee=new T("onBeforeInput","beforeinput",null,u,Ee),Pe.push({event:Ee,listeners:he}),Ee.data=ct))}W0(Pe,l)})}function Lc(a,l,u){return{instance:a,listener:l,currentTarget:u}}function bu(a,l){for(var u=l+"Capture",f=[];a!==null;){var v=a,N=v.stateNode;v.tag===5&&N!==null&&(v=N,N=pr(a,u),N!=null&&f.unshift(Lc(a,N,v)),N=pr(a,l),N!=null&&f.push(Lc(a,N,v))),a=a.return}return f}function pl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function J0(a,l,u,f,v){for(var N=l._reactName,D=[];u!==null&&u!==f;){var H=u,Y=H.alternate,he=H.stateNode;if(Y!==null&&Y===f)break;H.tag===5&&he!==null&&(H=he,v?(Y=pr(u,N),Y!=null&&D.unshift(Lc(u,Y,H))):v||(Y=pr(u,N),Y!=null&&D.push(Lc(u,Y,H)))),u=u.return}D.length!==0&&a.push({event:l,listeners:D})}var hC=/\r\n?/g,mC=/\u0000|\uFFFD/g;function Y0(a){return(typeof a=="string"?a:""+a).replace(hC,`
`).replace(mC,"")}function vu(a,l,u){if(l=Y0(l),Y0(a)!==l&&u)throw Error(t(425))}function wu(){}var yp=null,bp=null;function vp(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var wp=typeof setTimeout=="function"?setTimeout:void 0,pC=typeof clearTimeout=="function"?clearTimeout:void 0,Z0=typeof Promise=="function"?Promise:void 0,fC=typeof queueMicrotask=="function"?queueMicrotask:typeof Z0<"u"?function(a){return Z0.resolve(null).then(a).catch(gC)}:wp;function gC(a){setTimeout(function(){throw a})}function Np(a,l){var u=l,f=0;do{var v=u.nextSibling;if(a.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(f===0){a.removeChild(v),ia(l);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=v}while(u);ia(l)}function ca(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function Q0(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return a;l--}else u==="/$"&&l++}a=a.previousSibling}return null}var fl=Math.random().toString(36).slice(2),ri="__reactFiber$"+fl,zc="__reactProps$"+fl,Ai="__reactContainer$"+fl,jp="__reactEvents$"+fl,xC="__reactListeners$"+fl,yC="__reactHandles$"+fl;function fo(a){var l=a[ri];if(l)return l;for(var u=a.parentNode;u;){if(l=u[Ai]||u[ri]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(a=Q0(a);a!==null;){if(u=a[ri])return u;a=Q0(a)}return l}a=u,u=a.parentNode}return null}function Vc(a){return a=a[ri]||a[Ai],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function gl(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Nu(a){return a[zc]||null}var Sp=[],xl=-1;function da(a){return{current:a}}function cn(a){0>xl||(a.current=Sp[xl],Sp[xl]=null,xl--)}function an(a,l){xl++,Sp[xl]=a.current,a.current=l}var ua={},ms=da(ua),Ms=da(!1),go=ua;function yl(a,l){var u=a.type.contextTypes;if(!u)return ua;var f=a.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===l)return f.__reactInternalMemoizedMaskedChildContext;var v={},N;for(N in u)v[N]=l[N];return f&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=v),v}function Ls(a){return a=a.childContextTypes,a!=null}function ju(){cn(Ms),cn(ms)}function X0(a,l,u){if(ms.current!==ua)throw Error(t(168));an(ms,l),an(Ms,u)}function ey(a,l,u){var f=a.stateNode;if(l=l.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var v in f)if(!(v in l))throw Error(t(108,Ie(a)||"Unknown",v));return ve({},u,f)}function Su(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ua,go=ms.current,an(ms,a),an(Ms,Ms.current),!0}function ty(a,l,u){var f=a.stateNode;if(!f)throw Error(t(169));u?(a=ey(a,l,go),f.__reactInternalMemoizedMergedChildContext=a,cn(Ms),cn(ms),an(ms,a)):cn(Ms),an(Ms,u)}var Ii=null,_u=!1,_p=!1;function ny(a){Ii===null?Ii=[a]:Ii.push(a)}function bC(a){_u=!0,ny(a)}function ha(){if(!_p&&Ii!==null){_p=!0;var a=0,l=Ot;try{var u=Ii;for(Ot=1;a<u.length;a++){var f=u[a];do f=f(!0);while(f!==null)}Ii=null,_u=!1}catch(v){throw Ii!==null&&(Ii=Ii.slice(a+1)),Et(Ds,ha),v}finally{Ot=l,_p=!1}}return null}var bl=[],vl=0,Cu=null,ku=0,xr=[],yr=0,xo=null,Ri=1,Di="";function yo(a,l){bl[vl++]=ku,bl[vl++]=Cu,Cu=a,ku=l}function sy(a,l,u){xr[yr++]=Ri,xr[yr++]=Di,xr[yr++]=xo,xo=a;var f=Ri;a=Di;var v=32-Ye(f)-1;f&=~(1<<v),u+=1;var N=32-Ye(l)+v;if(30<N){var D=v-v%5;N=(f&(1<<D)-1).toString(32),f>>=D,v-=D,Ri=1<<32-Ye(l)+v|u<<v|f,Di=N+a}else Ri=1<<N|u<<v|f,Di=a}function Cp(a){a.return!==null&&(yo(a,1),sy(a,1,0))}function kp(a){for(;a===Cu;)Cu=bl[--vl],bl[vl]=null,ku=bl[--vl],bl[vl]=null;for(;a===xo;)xo=xr[--yr],xr[yr]=null,Di=xr[--yr],xr[yr]=null,Ri=xr[--yr],xr[yr]=null}var nr=null,sr=null,hn=!1,Ar=null;function ry(a,l){var u=Nr(5,null,null,0);u.elementType="DELETED",u.stateNode=l,u.return=a,l=a.deletions,l===null?(a.deletions=[u],a.flags|=16):l.push(u)}function iy(a,l){switch(a.tag){case 5:var u=a.type;return l=l.nodeType!==1||u.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,nr=a,sr=ca(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,nr=a,sr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(u=xo!==null?{id:Ri,overflow:Di}:null,a.memoizedState={dehydrated:l,treeContext:u,retryLane:1073741824},u=Nr(18,null,null,0),u.stateNode=l,u.return=a,a.child=u,nr=a,sr=null,!0):!1;default:return!1}}function Ep(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Tp(a){if(hn){var l=sr;if(l){var u=l;if(!iy(a,l)){if(Ep(a))throw Error(t(418));l=ca(u.nextSibling);var f=nr;l&&iy(a,l)?ry(f,u):(a.flags=a.flags&-4097|2,hn=!1,nr=a)}}else{if(Ep(a))throw Error(t(418));a.flags=a.flags&-4097|2,hn=!1,nr=a}}}function ay(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;nr=a}function Eu(a){if(a!==nr)return!1;if(!hn)return ay(a),hn=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!vp(a.type,a.memoizedProps)),l&&(l=sr)){if(Ep(a))throw oy(),Error(t(418));for(;l;)ry(a,l),l=ca(l.nextSibling)}if(ay(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var u=a.data;if(u==="/$"){if(l===0){sr=ca(a.nextSibling);break e}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++}a=a.nextSibling}sr=null}}else sr=nr?ca(a.stateNode.nextSibling):null;return!0}function oy(){for(var a=sr;a;)a=ca(a.nextSibling)}function wl(){sr=nr=null,hn=!1}function Pp(a){Ar===null?Ar=[a]:Ar.push(a)}var vC=Z.ReactCurrentBatchConfig;function Oc(a,l,u){if(a=u.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,a));var v=f,N=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===N?l.ref:(l=function(D){var H=v.refs;D===null?delete H[N]:H[N]=D},l._stringRef=N,l)}if(typeof a!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,a))}return a}function Tu(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function ly(a){var l=a._init;return l(a._payload)}function cy(a){function l(ae,te){if(a){var de=ae.deletions;de===null?(ae.deletions=[te],ae.flags|=16):de.push(te)}}function u(ae,te){if(!a)return null;for(;te!==null;)l(ae,te),te=te.sibling;return null}function f(ae,te){for(ae=new Map;te!==null;)te.key!==null?ae.set(te.key,te):ae.set(te.index,te),te=te.sibling;return ae}function v(ae,te){return ae=va(ae,te),ae.index=0,ae.sibling=null,ae}function N(ae,te,de){return ae.index=de,a?(de=ae.alternate,de!==null?(de=de.index,de<te?(ae.flags|=2,te):de):(ae.flags|=2,te)):(ae.flags|=1048576,te)}function D(ae){return a&&ae.alternate===null&&(ae.flags|=2),ae}function H(ae,te,de,De){return te===null||te.tag!==6?(te=Nf(de,ae.mode,De),te.return=ae,te):(te=v(te,de),te.return=ae,te)}function Y(ae,te,de,De){var et=de.type;return et===R?Ee(ae,te,de.props.children,De,de.key):te!==null&&(te.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Ne&&ly(et)===te.type)?(De=v(te,de.props),De.ref=Oc(ae,te,de),De.return=ae,De):(De=Xu(de.type,de.key,de.props,null,ae.mode,De),De.ref=Oc(ae,te,de),De.return=ae,De)}function he(ae,te,de,De){return te===null||te.tag!==4||te.stateNode.containerInfo!==de.containerInfo||te.stateNode.implementation!==de.implementation?(te=jf(de,ae.mode,De),te.return=ae,te):(te=v(te,de.children||[]),te.return=ae,te)}function Ee(ae,te,de,De,et){return te===null||te.tag!==7?(te=Co(de,ae.mode,De,et),te.return=ae,te):(te=v(te,de),te.return=ae,te)}function Pe(ae,te,de){if(typeof te=="string"&&te!==""||typeof te=="number")return te=Nf(""+te,ae.mode,de),te.return=ae,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case W:return de=Xu(te.type,te.key,te.props,null,ae.mode,de),de.ref=Oc(ae,null,te),de.return=ae,de;case $:return te=jf(te,ae.mode,de),te.return=ae,te;case Ne:var De=te._init;return Pe(ae,De(te._payload),de)}if(qe(te)||fe(te))return te=Co(te,ae.mode,de,null),te.return=ae,te;Tu(ae,te)}return null}function ke(ae,te,de,De){var et=te!==null?te.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return et!==null?null:H(ae,te,""+de,De);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case W:return de.key===et?Y(ae,te,de,De):null;case $:return de.key===et?he(ae,te,de,De):null;case Ne:return et=de._init,ke(ae,te,et(de._payload),De)}if(qe(de)||fe(de))return et!==null?null:Ee(ae,te,de,De,null);Tu(ae,de)}return null}function Ge(ae,te,de,De,et){if(typeof De=="string"&&De!==""||typeof De=="number")return ae=ae.get(de)||null,H(te,ae,""+De,et);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case W:return ae=ae.get(De.key===null?de:De.key)||null,Y(te,ae,De,et);case $:return ae=ae.get(De.key===null?de:De.key)||null,he(te,ae,De,et);case Ne:var lt=De._init;return Ge(ae,te,de,lt(De._payload),et)}if(qe(De)||fe(De))return ae=ae.get(de)||null,Ee(te,ae,De,et,null);Tu(te,De)}return null}function Ze(ae,te,de,De){for(var et=null,lt=null,ct=te,ft=te=0,Yn=null;ct!==null&&ft<de.length;ft++){ct.index>ft?(Yn=ct,ct=null):Yn=ct.sibling;var Ht=ke(ae,ct,de[ft],De);if(Ht===null){ct===null&&(ct=Yn);break}a&&ct&&Ht.alternate===null&&l(ae,ct),te=N(Ht,te,ft),lt===null?et=Ht:lt.sibling=Ht,lt=Ht,ct=Yn}if(ft===de.length)return u(ae,ct),hn&&yo(ae,ft),et;if(ct===null){for(;ft<de.length;ft++)ct=Pe(ae,de[ft],De),ct!==null&&(te=N(ct,te,ft),lt===null?et=ct:lt.sibling=ct,lt=ct);return hn&&yo(ae,ft),et}for(ct=f(ae,ct);ft<de.length;ft++)Yn=Ge(ct,ae,ft,de[ft],De),Yn!==null&&(a&&Yn.alternate!==null&&ct.delete(Yn.key===null?ft:Yn.key),te=N(Yn,te,ft),lt===null?et=Yn:lt.sibling=Yn,lt=Yn);return a&&ct.forEach(function(wa){return l(ae,wa)}),hn&&yo(ae,ft),et}function Qe(ae,te,de,De){var et=fe(de);if(typeof et!="function")throw Error(t(150));if(de=et.call(de),de==null)throw Error(t(151));for(var lt=et=null,ct=te,ft=te=0,Yn=null,Ht=de.next();ct!==null&&!Ht.done;ft++,Ht=de.next()){ct.index>ft?(Yn=ct,ct=null):Yn=ct.sibling;var wa=ke(ae,ct,Ht.value,De);if(wa===null){ct===null&&(ct=Yn);break}a&&ct&&wa.alternate===null&&l(ae,ct),te=N(wa,te,ft),lt===null?et=wa:lt.sibling=wa,lt=wa,ct=Yn}if(Ht.done)return u(ae,ct),hn&&yo(ae,ft),et;if(ct===null){for(;!Ht.done;ft++,Ht=de.next())Ht=Pe(ae,Ht.value,De),Ht!==null&&(te=N(Ht,te,ft),lt===null?et=Ht:lt.sibling=Ht,lt=Ht);return hn&&yo(ae,ft),et}for(ct=f(ae,ct);!Ht.done;ft++,Ht=de.next())Ht=Ge(ct,ae,ft,Ht.value,De),Ht!==null&&(a&&Ht.alternate!==null&&ct.delete(Ht.key===null?ft:Ht.key),te=N(Ht,te,ft),lt===null?et=Ht:lt.sibling=Ht,lt=Ht);return a&&ct.forEach(function(XC){return l(ae,XC)}),hn&&yo(ae,ft),et}function Tn(ae,te,de,De){if(typeof de=="object"&&de!==null&&de.type===R&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case W:e:{for(var et=de.key,lt=te;lt!==null;){if(lt.key===et){if(et=de.type,et===R){if(lt.tag===7){u(ae,lt.sibling),te=v(lt,de.props.children),te.return=ae,ae=te;break e}}else if(lt.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Ne&&ly(et)===lt.type){u(ae,lt.sibling),te=v(lt,de.props),te.ref=Oc(ae,lt,de),te.return=ae,ae=te;break e}u(ae,lt);break}else l(ae,lt);lt=lt.sibling}de.type===R?(te=Co(de.props.children,ae.mode,De,de.key),te.return=ae,ae=te):(De=Xu(de.type,de.key,de.props,null,ae.mode,De),De.ref=Oc(ae,te,de),De.return=ae,ae=De)}return D(ae);case $:e:{for(lt=de.key;te!==null;){if(te.key===lt)if(te.tag===4&&te.stateNode.containerInfo===de.containerInfo&&te.stateNode.implementation===de.implementation){u(ae,te.sibling),te=v(te,de.children||[]),te.return=ae,ae=te;break e}else{u(ae,te);break}else l(ae,te);te=te.sibling}te=jf(de,ae.mode,De),te.return=ae,ae=te}return D(ae);case Ne:return lt=de._init,Tn(ae,te,lt(de._payload),De)}if(qe(de))return Ze(ae,te,de,De);if(fe(de))return Qe(ae,te,de,De);Tu(ae,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,te!==null&&te.tag===6?(u(ae,te.sibling),te=v(te,de),te.return=ae,ae=te):(u(ae,te),te=Nf(de,ae.mode,De),te.return=ae,ae=te),D(ae)):u(ae,te)}return Tn}var Nl=cy(!0),dy=cy(!1),Pu=da(null),Au=null,jl=null,Ap=null;function Ip(){Ap=jl=Au=null}function Rp(a){var l=Pu.current;cn(Pu),a._currentValue=l}function Dp(a,l,u){for(;a!==null;){var f=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,f!==null&&(f.childLanes|=l)):f!==null&&(f.childLanes&l)!==l&&(f.childLanes|=l),a===u)break;a=a.return}}function Sl(a,l){Au=a,Ap=jl=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(zs=!0),a.firstContext=null)}function br(a){var l=a._currentValue;if(Ap!==a)if(a={context:a,memoizedValue:l,next:null},jl===null){if(Au===null)throw Error(t(308));jl=a,Au.dependencies={lanes:0,firstContext:a}}else jl=jl.next=a;return l}var bo=null;function Mp(a){bo===null?bo=[a]:bo.push(a)}function uy(a,l,u,f){var v=l.interleaved;return v===null?(u.next=u,Mp(l)):(u.next=v.next,v.next=u),l.interleaved=u,Mi(a,f)}function Mi(a,l){a.lanes|=l;var u=a.alternate;for(u!==null&&(u.lanes|=l),u=a,a=a.return;a!==null;)a.childLanes|=l,u=a.alternate,u!==null&&(u.childLanes|=l),u=a,a=a.return;return u.tag===3?u.stateNode:null}var ma=!1;function Lp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hy(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Li(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function pa(a,l,u){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(qt&2)!==0){var v=f.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),f.pending=l,Mi(a,u)}return v=f.interleaved,v===null?(l.next=l,Mp(f)):(l.next=v.next,v.next=l),f.interleaved=l,Mi(a,u)}function Iu(a,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194240)!==0)){var f=l.lanes;f&=a.pendingLanes,u|=f,l.lanes=u,vc(a,u)}}function my(a,l){var u=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var v=null,N=null;if(u=u.firstBaseUpdate,u!==null){do{var D={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};N===null?v=N=D:N=N.next=D,u=u.next}while(u!==null);N===null?v=N=l:N=N.next=l}else v=N=l;u={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:N,shared:f.shared,effects:f.effects},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=l}function Ru(a,l,u,f){var v=a.updateQueue;ma=!1;var N=v.firstBaseUpdate,D=v.lastBaseUpdate,H=v.shared.pending;if(H!==null){v.shared.pending=null;var Y=H,he=Y.next;Y.next=null,D===null?N=he:D.next=he,D=Y;var Ee=a.alternate;Ee!==null&&(Ee=Ee.updateQueue,H=Ee.lastBaseUpdate,H!==D&&(H===null?Ee.firstBaseUpdate=he:H.next=he,Ee.lastBaseUpdate=Y))}if(N!==null){var Pe=v.baseState;D=0,Ee=he=Y=null,H=N;do{var ke=H.lane,Ge=H.eventTime;if((f&ke)===ke){Ee!==null&&(Ee=Ee.next={eventTime:Ge,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var Ze=a,Qe=H;switch(ke=l,Ge=u,Qe.tag){case 1:if(Ze=Qe.payload,typeof Ze=="function"){Pe=Ze.call(Ge,Pe,ke);break e}Pe=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=Qe.payload,ke=typeof Ze=="function"?Ze.call(Ge,Pe,ke):Ze,ke==null)break e;Pe=ve({},Pe,ke);break e;case 2:ma=!0}}H.callback!==null&&H.lane!==0&&(a.flags|=64,ke=v.effects,ke===null?v.effects=[H]:ke.push(H))}else Ge={eventTime:Ge,lane:ke,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Ee===null?(he=Ee=Ge,Y=Pe):Ee=Ee.next=Ge,D|=ke;if(H=H.next,H===null){if(H=v.shared.pending,H===null)break;ke=H,H=ke.next,ke.next=null,v.lastBaseUpdate=ke,v.shared.pending=null}}while(!0);if(Ee===null&&(Y=Pe),v.baseState=Y,v.firstBaseUpdate=he,v.lastBaseUpdate=Ee,l=v.shared.interleaved,l!==null){v=l;do D|=v.lane,v=v.next;while(v!==l)}else N===null&&(v.shared.lanes=0);No|=D,a.lanes=D,a.memoizedState=Pe}}function py(a,l,u){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var f=a[l],v=f.callback;if(v!==null){if(f.callback=null,f=u,typeof v!="function")throw Error(t(191,v));v.call(f)}}}var Fc={},ii=da(Fc),Uc=da(Fc),Bc=da(Fc);function vo(a){if(a===Fc)throw Error(t(174));return a}function zp(a,l){switch(an(Bc,l),an(Uc,a),an(ii,Fc),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:$t(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=$t(l,a)}cn(ii),an(ii,l)}function _l(){cn(ii),cn(Uc),cn(Bc)}function fy(a){vo(Bc.current);var l=vo(ii.current),u=$t(l,a.type);l!==u&&(an(Uc,a),an(ii,u))}function Vp(a){Uc.current===a&&(cn(ii),cn(Uc))}var xn=da(0);function Du(a){for(var l=a;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Op=[];function Fp(){for(var a=0;a<Op.length;a++)Op[a]._workInProgressVersionPrimary=null;Op.length=0}var Mu=Z.ReactCurrentDispatcher,Up=Z.ReactCurrentBatchConfig,wo=0,yn=null,Bn=null,Kn=null,Lu=!1,$c=!1,qc=0,wC=0;function ps(){throw Error(t(321))}function Bp(a,l){if(l===null)return!1;for(var u=0;u<l.length&&u<a.length;u++)if(!Pr(a[u],l[u]))return!1;return!0}function $p(a,l,u,f,v,N){if(wo=N,yn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Mu.current=a===null||a.memoizedState===null?_C:CC,a=u(f,v),$c){N=0;do{if($c=!1,qc=0,25<=N)throw Error(t(301));N+=1,Kn=Bn=null,l.updateQueue=null,Mu.current=kC,a=u(f,v)}while($c)}if(Mu.current=Ou,l=Bn!==null&&Bn.next!==null,wo=0,Kn=Bn=yn=null,Lu=!1,l)throw Error(t(300));return a}function qp(){var a=qc!==0;return qc=0,a}function ai(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?yn.memoizedState=Kn=a:Kn=Kn.next=a,Kn}function vr(){if(Bn===null){var a=yn.alternate;a=a!==null?a.memoizedState:null}else a=Bn.next;var l=Kn===null?yn.memoizedState:Kn.next;if(l!==null)Kn=l,Bn=a;else{if(a===null)throw Error(t(310));Bn=a,a={memoizedState:Bn.memoizedState,baseState:Bn.baseState,baseQueue:Bn.baseQueue,queue:Bn.queue,next:null},Kn===null?yn.memoizedState=Kn=a:Kn=Kn.next=a}return Kn}function Gc(a,l){return typeof l=="function"?l(a):l}function Gp(a){var l=vr(),u=l.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=a;var f=Bn,v=f.baseQueue,N=u.pending;if(N!==null){if(v!==null){var D=v.next;v.next=N.next,N.next=D}f.baseQueue=v=N,u.pending=null}if(v!==null){N=v.next,f=f.baseState;var H=D=null,Y=null,he=N;do{var Ee=he.lane;if((wo&Ee)===Ee)Y!==null&&(Y=Y.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),f=he.hasEagerState?he.eagerState:a(f,he.action);else{var Pe={lane:Ee,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};Y===null?(H=Y=Pe,D=f):Y=Y.next=Pe,yn.lanes|=Ee,No|=Ee}he=he.next}while(he!==null&&he!==N);Y===null?D=f:Y.next=H,Pr(f,l.memoizedState)||(zs=!0),l.memoizedState=f,l.baseState=D,l.baseQueue=Y,u.lastRenderedState=f}if(a=u.interleaved,a!==null){v=a;do N=v.lane,yn.lanes|=N,No|=N,v=v.next;while(v!==a)}else v===null&&(u.lanes=0);return[l.memoizedState,u.dispatch]}function Hp(a){var l=vr(),u=l.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=a;var f=u.dispatch,v=u.pending,N=l.memoizedState;if(v!==null){u.pending=null;var D=v=v.next;do N=a(N,D.action),D=D.next;while(D!==v);Pr(N,l.memoizedState)||(zs=!0),l.memoizedState=N,l.baseQueue===null&&(l.baseState=N),u.lastRenderedState=N}return[N,f]}function gy(){}function xy(a,l){var u=yn,f=vr(),v=l(),N=!Pr(f.memoizedState,v);if(N&&(f.memoizedState=v,zs=!0),f=f.queue,Wp(vy.bind(null,u,f,a),[a]),f.getSnapshot!==l||N||Kn!==null&&Kn.memoizedState.tag&1){if(u.flags|=2048,Hc(9,by.bind(null,u,f,v,l),void 0,null),Jn===null)throw Error(t(349));(wo&30)!==0||yy(u,l,v)}return v}function yy(a,l,u){a.flags|=16384,a={getSnapshot:l,value:u},l=yn.updateQueue,l===null?(l={lastEffect:null,stores:null},yn.updateQueue=l,l.stores=[a]):(u=l.stores,u===null?l.stores=[a]:u.push(a))}function by(a,l,u,f){l.value=u,l.getSnapshot=f,wy(l)&&Ny(a)}function vy(a,l,u){return u(function(){wy(l)&&Ny(a)})}function wy(a){var l=a.getSnapshot;a=a.value;try{var u=l();return!Pr(a,u)}catch{return!0}}function Ny(a){var l=Mi(a,1);l!==null&&Mr(l,a,1,-1)}function jy(a){var l=ai();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gc,lastRenderedState:a},l.queue=a,a=a.dispatch=SC.bind(null,yn,a),[l.memoizedState,a]}function Hc(a,l,u,f){return a={tag:a,create:l,destroy:u,deps:f,next:null},l=yn.updateQueue,l===null?(l={lastEffect:null,stores:null},yn.updateQueue=l,l.lastEffect=a.next=a):(u=l.lastEffect,u===null?l.lastEffect=a.next=a:(f=u.next,u.next=a,a.next=f,l.lastEffect=a)),a}function Sy(){return vr().memoizedState}function zu(a,l,u,f){var v=ai();yn.flags|=a,v.memoizedState=Hc(1|l,u,void 0,f===void 0?null:f)}function Vu(a,l,u,f){var v=vr();f=f===void 0?null:f;var N=void 0;if(Bn!==null){var D=Bn.memoizedState;if(N=D.destroy,f!==null&&Bp(f,D.deps)){v.memoizedState=Hc(l,u,N,f);return}}yn.flags|=a,v.memoizedState=Hc(1|l,u,N,f)}function _y(a,l){return zu(8390656,8,a,l)}function Wp(a,l){return Vu(2048,8,a,l)}function Cy(a,l){return Vu(4,2,a,l)}function ky(a,l){return Vu(4,4,a,l)}function Ey(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Ty(a,l,u){return u=u!=null?u.concat([a]):null,Vu(4,4,Ey.bind(null,l,a),u)}function Kp(){}function Py(a,l){var u=vr();l=l===void 0?null:l;var f=u.memoizedState;return f!==null&&l!==null&&Bp(l,f[1])?f[0]:(u.memoizedState=[a,l],a)}function Ay(a,l){var u=vr();l=l===void 0?null:l;var f=u.memoizedState;return f!==null&&l!==null&&Bp(l,f[1])?f[0]:(a=a(),u.memoizedState=[a,l],a)}function Iy(a,l,u){return(wo&21)===0?(a.baseState&&(a.baseState=!1,zs=!0),a.memoizedState=u):(Pr(u,l)||(u=yc(),yn.lanes|=u,No|=u,a.baseState=!0),l)}function NC(a,l){var u=Ot;Ot=u!==0&&4>u?u:4,a(!0);var f=Up.transition;Up.transition={};try{a(!1),l()}finally{Ot=u,Up.transition=f}}function Ry(){return vr().memoizedState}function jC(a,l,u){var f=ya(a);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Dy(a))My(l,u);else if(u=uy(a,l,u,f),u!==null){var v=Ss();Mr(u,a,f,v),Ly(u,l,f)}}function SC(a,l,u){var f=ya(a),v={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Dy(a))My(l,v);else{var N=a.alternate;if(a.lanes===0&&(N===null||N.lanes===0)&&(N=l.lastRenderedReducer,N!==null))try{var D=l.lastRenderedState,H=N(D,u);if(v.hasEagerState=!0,v.eagerState=H,Pr(H,D)){var Y=l.interleaved;Y===null?(v.next=v,Mp(l)):(v.next=Y.next,Y.next=v),l.interleaved=v;return}}catch{}finally{}u=uy(a,l,v,f),u!==null&&(v=Ss(),Mr(u,a,f,v),Ly(u,l,f))}}function Dy(a){var l=a.alternate;return a===yn||l!==null&&l===yn}function My(a,l){$c=Lu=!0;var u=a.pending;u===null?l.next=l:(l.next=u.next,u.next=l),a.pending=l}function Ly(a,l,u){if((u&4194240)!==0){var f=l.lanes;f&=a.pendingLanes,u|=f,l.lanes=u,vc(a,u)}}var Ou={readContext:br,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},_C={readContext:br,useCallback:function(a,l){return ai().memoizedState=[a,l===void 0?null:l],a},useContext:br,useEffect:_y,useImperativeHandle:function(a,l,u){return u=u!=null?u.concat([a]):null,zu(4194308,4,Ey.bind(null,l,a),u)},useLayoutEffect:function(a,l){return zu(4194308,4,a,l)},useInsertionEffect:function(a,l){return zu(4,2,a,l)},useMemo:function(a,l){var u=ai();return l=l===void 0?null:l,a=a(),u.memoizedState=[a,l],a},useReducer:function(a,l,u){var f=ai();return l=u!==void 0?u(l):l,f.memoizedState=f.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},f.queue=a,a=a.dispatch=jC.bind(null,yn,a),[f.memoizedState,a]},useRef:function(a){var l=ai();return a={current:a},l.memoizedState=a},useState:jy,useDebugValue:Kp,useDeferredValue:function(a){return ai().memoizedState=a},useTransition:function(){var a=jy(!1),l=a[0];return a=NC.bind(null,a[1]),ai().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,u){var f=yn,v=ai();if(hn){if(u===void 0)throw Error(t(407));u=u()}else{if(u=l(),Jn===null)throw Error(t(349));(wo&30)!==0||yy(f,l,u)}v.memoizedState=u;var N={value:u,getSnapshot:l};return v.queue=N,_y(vy.bind(null,f,N,a),[a]),f.flags|=2048,Hc(9,by.bind(null,f,N,u,l),void 0,null),u},useId:function(){var a=ai(),l=Jn.identifierPrefix;if(hn){var u=Di,f=Ri;u=(f&~(1<<32-Ye(f)-1)).toString(32)+u,l=":"+l+"R"+u,u=qc++,0<u&&(l+="H"+u.toString(32)),l+=":"}else u=wC++,l=":"+l+"r"+u.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},CC={readContext:br,useCallback:Py,useContext:br,useEffect:Wp,useImperativeHandle:Ty,useInsertionEffect:Cy,useLayoutEffect:ky,useMemo:Ay,useReducer:Gp,useRef:Sy,useState:function(){return Gp(Gc)},useDebugValue:Kp,useDeferredValue:function(a){var l=vr();return Iy(l,Bn.memoizedState,a)},useTransition:function(){var a=Gp(Gc)[0],l=vr().memoizedState;return[a,l]},useMutableSource:gy,useSyncExternalStore:xy,useId:Ry,unstable_isNewReconciler:!1},kC={readContext:br,useCallback:Py,useContext:br,useEffect:Wp,useImperativeHandle:Ty,useInsertionEffect:Cy,useLayoutEffect:ky,useMemo:Ay,useReducer:Hp,useRef:Sy,useState:function(){return Hp(Gc)},useDebugValue:Kp,useDeferredValue:function(a){var l=vr();return Bn===null?l.memoizedState=a:Iy(l,Bn.memoizedState,a)},useTransition:function(){var a=Hp(Gc)[0],l=vr().memoizedState;return[a,l]},useMutableSource:gy,useSyncExternalStore:xy,useId:Ry,unstable_isNewReconciler:!1};function Ir(a,l){if(a&&a.defaultProps){l=ve({},l),a=a.defaultProps;for(var u in a)l[u]===void 0&&(l[u]=a[u]);return l}return l}function Jp(a,l,u,f){l=a.memoizedState,u=u(f,l),u=u==null?l:ve({},l,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var Fu={isMounted:function(a){return(a=a._reactInternals)?Me(a)===a:!1},enqueueSetState:function(a,l,u){a=a._reactInternals;var f=Ss(),v=ya(a),N=Li(f,v);N.payload=l,u!=null&&(N.callback=u),l=pa(a,N,v),l!==null&&(Mr(l,a,v,f),Iu(l,a,v))},enqueueReplaceState:function(a,l,u){a=a._reactInternals;var f=Ss(),v=ya(a),N=Li(f,v);N.tag=1,N.payload=l,u!=null&&(N.callback=u),l=pa(a,N,v),l!==null&&(Mr(l,a,v,f),Iu(l,a,v))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var u=Ss(),f=ya(a),v=Li(u,f);v.tag=2,l!=null&&(v.callback=l),l=pa(a,v,f),l!==null&&(Mr(l,a,f,u),Iu(l,a,f))}};function zy(a,l,u,f,v,N,D){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,N,D):l.prototype&&l.prototype.isPureReactComponent?!Ic(u,f)||!Ic(v,N):!0}function Vy(a,l,u){var f=!1,v=ua,N=l.contextType;return typeof N=="object"&&N!==null?N=br(N):(v=Ls(l)?go:ms.current,f=l.contextTypes,N=(f=f!=null)?yl(a,v):ua),l=new l(u,N),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Fu,a.stateNode=l,l._reactInternals=a,f&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=v,a.__reactInternalMemoizedMaskedChildContext=N),l}function Oy(a,l,u,f){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,f),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,f),l.state!==a&&Fu.enqueueReplaceState(l,l.state,null)}function Yp(a,l,u,f){var v=a.stateNode;v.props=u,v.state=a.memoizedState,v.refs={},Lp(a);var N=l.contextType;typeof N=="object"&&N!==null?v.context=br(N):(N=Ls(l)?go:ms.current,v.context=yl(a,N)),v.state=a.memoizedState,N=l.getDerivedStateFromProps,typeof N=="function"&&(Jp(a,l,N,u),v.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&Fu.enqueueReplaceState(v,v.state,null),Ru(a,u,v,f),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308)}function Cl(a,l){try{var u="",f=l;do u+=G(f),f=f.return;while(f);var v=u}catch(N){v=`
Error generating stack: `+N.message+`
`+N.stack}return{value:a,source:l,stack:v,digest:null}}function Zp(a,l,u){return{value:a,source:null,stack:u??null,digest:l??null}}function Qp(a,l){try{console.error(l.value)}catch(u){setTimeout(function(){throw u})}}var EC=typeof WeakMap=="function"?WeakMap:Map;function Fy(a,l,u){u=Li(-1,u),u.tag=3,u.payload={element:null};var f=l.value;return u.callback=function(){Wu||(Wu=!0,pf=f),Qp(a,l)},u}function Uy(a,l,u){u=Li(-1,u),u.tag=3;var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var v=l.value;u.payload=function(){return f(v)},u.callback=function(){Qp(a,l)}}var N=a.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(u.callback=function(){Qp(a,l),typeof f!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var D=l.stack;this.componentDidCatch(l.value,{componentStack:D!==null?D:""})}),u}function By(a,l,u){var f=a.pingCache;if(f===null){f=a.pingCache=new EC;var v=new Set;f.set(l,v)}else v=f.get(l),v===void 0&&(v=new Set,f.set(l,v));v.has(u)||(v.add(u),a=BC.bind(null,a,l,u),l.then(a,a))}function $y(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function qy(a,l,u,f,v){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(l=Li(-1,1),l.tag=2,pa(u,l,1))),u.lanes|=1),a):(a.flags|=65536,a.lanes=v,a)}var TC=Z.ReactCurrentOwner,zs=!1;function js(a,l,u,f){l.child=a===null?dy(l,null,u,f):Nl(l,a.child,u,f)}function Gy(a,l,u,f,v){u=u.render;var N=l.ref;return Sl(l,v),f=$p(a,l,u,f,N,v),u=qp(),a!==null&&!zs?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,zi(a,l,v)):(hn&&u&&Cp(l),l.flags|=1,js(a,l,f,v),l.child)}function Hy(a,l,u,f,v){if(a===null){var N=u.type;return typeof N=="function"&&!wf(N)&&N.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(l.tag=15,l.type=N,Wy(a,l,N,f,v)):(a=Xu(u.type,null,f,l,l.mode,v),a.ref=l.ref,a.return=l,l.child=a)}if(N=a.child,(a.lanes&v)===0){var D=N.memoizedProps;if(u=u.compare,u=u!==null?u:Ic,u(D,f)&&a.ref===l.ref)return zi(a,l,v)}return l.flags|=1,a=va(N,f),a.ref=l.ref,a.return=l,l.child=a}function Wy(a,l,u,f,v){if(a!==null){var N=a.memoizedProps;if(Ic(N,f)&&a.ref===l.ref)if(zs=!1,l.pendingProps=f=N,(a.lanes&v)!==0)(a.flags&131072)!==0&&(zs=!0);else return l.lanes=a.lanes,zi(a,l,v)}return Xp(a,l,u,f,v)}function Ky(a,l,u){var f=l.pendingProps,v=f.children,N=a!==null?a.memoizedState:null;if(f.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(El,rr),rr|=u;else{if((u&1073741824)===0)return a=N!==null?N.baseLanes|u:u,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,an(El,rr),rr|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=N!==null?N.baseLanes:u,an(El,rr),rr|=f}else N!==null?(f=N.baseLanes|u,l.memoizedState=null):f=u,an(El,rr),rr|=f;return js(a,l,v,u),l.child}function Jy(a,l){var u=l.ref;(a===null&&u!==null||a!==null&&a.ref!==u)&&(l.flags|=512,l.flags|=2097152)}function Xp(a,l,u,f,v){var N=Ls(u)?go:ms.current;return N=yl(l,N),Sl(l,v),u=$p(a,l,u,f,N,v),f=qp(),a!==null&&!zs?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,zi(a,l,v)):(hn&&f&&Cp(l),l.flags|=1,js(a,l,u,v),l.child)}function Yy(a,l,u,f,v){if(Ls(u)){var N=!0;Su(l)}else N=!1;if(Sl(l,v),l.stateNode===null)Bu(a,l),Vy(l,u,f),Yp(l,u,f,v),f=!0;else if(a===null){var D=l.stateNode,H=l.memoizedProps;D.props=H;var Y=D.context,he=u.contextType;typeof he=="object"&&he!==null?he=br(he):(he=Ls(u)?go:ms.current,he=yl(l,he));var Ee=u.getDerivedStateFromProps,Pe=typeof Ee=="function"||typeof D.getSnapshotBeforeUpdate=="function";Pe||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(H!==f||Y!==he)&&Oy(l,D,f,he),ma=!1;var ke=l.memoizedState;D.state=ke,Ru(l,f,D,v),Y=l.memoizedState,H!==f||ke!==Y||Ms.current||ma?(typeof Ee=="function"&&(Jp(l,u,Ee,f),Y=l.memoizedState),(H=ma||zy(l,u,H,f,ke,Y,he))?(Pe||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(l.flags|=4194308)):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=f,l.memoizedState=Y),D.props=f,D.state=Y,D.context=he,f=H):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),f=!1)}else{D=l.stateNode,hy(a,l),H=l.memoizedProps,he=l.type===l.elementType?H:Ir(l.type,H),D.props=he,Pe=l.pendingProps,ke=D.context,Y=u.contextType,typeof Y=="object"&&Y!==null?Y=br(Y):(Y=Ls(u)?go:ms.current,Y=yl(l,Y));var Ge=u.getDerivedStateFromProps;(Ee=typeof Ge=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(H!==Pe||ke!==Y)&&Oy(l,D,f,Y),ma=!1,ke=l.memoizedState,D.state=ke,Ru(l,f,D,v);var Ze=l.memoizedState;H!==Pe||ke!==Ze||Ms.current||ma?(typeof Ge=="function"&&(Jp(l,u,Ge,f),Ze=l.memoizedState),(he=ma||zy(l,u,he,f,ke,Ze,Y)||!1)?(Ee||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(f,Ze,Y),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(f,Ze,Y)),typeof D.componentDidUpdate=="function"&&(l.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof D.componentDidUpdate!="function"||H===a.memoizedProps&&ke===a.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&ke===a.memoizedState||(l.flags|=1024),l.memoizedProps=f,l.memoizedState=Ze),D.props=f,D.state=Ze,D.context=Y,f=he):(typeof D.componentDidUpdate!="function"||H===a.memoizedProps&&ke===a.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&ke===a.memoizedState||(l.flags|=1024),f=!1)}return ef(a,l,u,f,N,v)}function ef(a,l,u,f,v,N){Jy(a,l);var D=(l.flags&128)!==0;if(!f&&!D)return v&&ty(l,u,!1),zi(a,l,N);f=l.stateNode,TC.current=l;var H=D&&typeof u.getDerivedStateFromError!="function"?null:f.render();return l.flags|=1,a!==null&&D?(l.child=Nl(l,a.child,null,N),l.child=Nl(l,null,H,N)):js(a,l,H,N),l.memoizedState=f.state,v&&ty(l,u,!0),l.child}function Zy(a){var l=a.stateNode;l.pendingContext?X0(a,l.pendingContext,l.pendingContext!==l.context):l.context&&X0(a,l.context,!1),zp(a,l.containerInfo)}function Qy(a,l,u,f,v){return wl(),Pp(v),l.flags|=256,js(a,l,u,f),l.child}var tf={dehydrated:null,treeContext:null,retryLane:0};function nf(a){return{baseLanes:a,cachePool:null,transitions:null}}function Xy(a,l,u){var f=l.pendingProps,v=xn.current,N=!1,D=(l.flags&128)!==0,H;if((H=D)||(H=a!==null&&a.memoizedState===null?!1:(v&2)!==0),H?(N=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(v|=1),an(xn,v&1),a===null)return Tp(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(D=f.children,a=f.fallback,N?(f=l.mode,N=l.child,D={mode:"hidden",children:D},(f&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=D):N=eh(D,f,0,null),a=Co(a,f,u,null),N.return=l,a.return=l,N.sibling=a,l.child=N,l.child.memoizedState=nf(u),l.memoizedState=tf,a):sf(l,D));if(v=a.memoizedState,v!==null&&(H=v.dehydrated,H!==null))return PC(a,l,D,f,H,v,u);if(N){N=f.fallback,D=l.mode,v=a.child,H=v.sibling;var Y={mode:"hidden",children:f.children};return(D&1)===0&&l.child!==v?(f=l.child,f.childLanes=0,f.pendingProps=Y,l.deletions=null):(f=va(v,Y),f.subtreeFlags=v.subtreeFlags&14680064),H!==null?N=va(H,N):(N=Co(N,D,u,null),N.flags|=2),N.return=l,f.return=l,f.sibling=N,l.child=f,f=N,N=l.child,D=a.child.memoizedState,D=D===null?nf(u):{baseLanes:D.baseLanes|u,cachePool:null,transitions:D.transitions},N.memoizedState=D,N.childLanes=a.childLanes&~u,l.memoizedState=tf,f}return N=a.child,a=N.sibling,f=va(N,{mode:"visible",children:f.children}),(l.mode&1)===0&&(f.lanes=u),f.return=l,f.sibling=null,a!==null&&(u=l.deletions,u===null?(l.deletions=[a],l.flags|=16):u.push(a)),l.child=f,l.memoizedState=null,f}function sf(a,l){return l=eh({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Uu(a,l,u,f){return f!==null&&Pp(f),Nl(l,a.child,null,u),a=sf(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function PC(a,l,u,f,v,N,D){if(u)return l.flags&256?(l.flags&=-257,f=Zp(Error(t(422))),Uu(a,l,D,f)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(N=f.fallback,v=l.mode,f=eh({mode:"visible",children:f.children},v,0,null),N=Co(N,v,D,null),N.flags|=2,f.return=l,N.return=l,f.sibling=N,l.child=f,(l.mode&1)!==0&&Nl(l,a.child,null,D),l.child.memoizedState=nf(D),l.memoizedState=tf,N);if((l.mode&1)===0)return Uu(a,l,D,null);if(v.data==="$!"){if(f=v.nextSibling&&v.nextSibling.dataset,f)var H=f.dgst;return f=H,N=Error(t(419)),f=Zp(N,f,void 0),Uu(a,l,D,f)}if(H=(D&a.childLanes)!==0,zs||H){if(f=Jn,f!==null){switch(D&-D){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(f.suspendedLanes|D))!==0?0:v,v!==0&&v!==N.retryLane&&(N.retryLane=v,Mi(a,v),Mr(f,a,v,-1))}return vf(),f=Zp(Error(t(421))),Uu(a,l,D,f)}return v.data==="$?"?(l.flags|=128,l.child=a.child,l=$C.bind(null,a),v._reactRetry=l,null):(a=N.treeContext,sr=ca(v.nextSibling),nr=l,hn=!0,Ar=null,a!==null&&(xr[yr++]=Ri,xr[yr++]=Di,xr[yr++]=xo,Ri=a.id,Di=a.overflow,xo=l),l=sf(l,f.children),l.flags|=4096,l)}function eb(a,l,u){a.lanes|=l;var f=a.alternate;f!==null&&(f.lanes|=l),Dp(a.return,l,u)}function rf(a,l,u,f,v){var N=a.memoizedState;N===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:v}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=f,N.tail=u,N.tailMode=v)}function tb(a,l,u){var f=l.pendingProps,v=f.revealOrder,N=f.tail;if(js(a,l,f.children,u),f=xn.current,(f&2)!==0)f=f&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&eb(a,u,l);else if(a.tag===19)eb(a,u,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}if(an(xn,f),(l.mode&1)===0)l.memoizedState=null;else switch(v){case"forwards":for(u=l.child,v=null;u!==null;)a=u.alternate,a!==null&&Du(a)===null&&(v=u),u=u.sibling;u=v,u===null?(v=l.child,l.child=null):(v=u.sibling,u.sibling=null),rf(l,!1,v,u,N);break;case"backwards":for(u=null,v=l.child,l.child=null;v!==null;){if(a=v.alternate,a!==null&&Du(a)===null){l.child=v;break}a=v.sibling,v.sibling=u,u=v,v=a}rf(l,!0,u,null,N);break;case"together":rf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Bu(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function zi(a,l,u){if(a!==null&&(l.dependencies=a.dependencies),No|=l.lanes,(u&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,u=va(a,a.pendingProps),l.child=u,u.return=l;a.sibling!==null;)a=a.sibling,u=u.sibling=va(a,a.pendingProps),u.return=l;u.sibling=null}return l.child}function AC(a,l,u){switch(l.tag){case 3:Zy(l),wl();break;case 5:fy(l);break;case 1:Ls(l.type)&&Su(l);break;case 4:zp(l,l.stateNode.containerInfo);break;case 10:var f=l.type._context,v=l.memoizedProps.value;an(Pu,f._currentValue),f._currentValue=v;break;case 13:if(f=l.memoizedState,f!==null)return f.dehydrated!==null?(an(xn,xn.current&1),l.flags|=128,null):(u&l.child.childLanes)!==0?Xy(a,l,u):(an(xn,xn.current&1),a=zi(a,l,u),a!==null?a.sibling:null);an(xn,xn.current&1);break;case 19:if(f=(u&l.childLanes)!==0,(a.flags&128)!==0){if(f)return tb(a,l,u);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),an(xn,xn.current),f)break;return null;case 22:case 23:return l.lanes=0,Ky(a,l,u)}return zi(a,l,u)}var nb,af,sb,rb;nb=function(a,l){for(var u=l.child;u!==null;){if(u.tag===5||u.tag===6)a.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},af=function(){},sb=function(a,l,u,f){var v=a.memoizedProps;if(v!==f){a=l.stateNode,vo(ii.current);var N=null;switch(u){case"input":v=at(a,v),f=at(a,f),N=[];break;case"select":v=ve({},v,{value:void 0}),f=ve({},f,{value:void 0}),N=[];break;case"textarea":v=xe(a,v),f=xe(a,f),N=[];break;default:typeof v.onClick!="function"&&typeof f.onClick=="function"&&(a.onclick=wu)}es(u,f);var D;u=null;for(he in v)if(!f.hasOwnProperty(he)&&v.hasOwnProperty(he)&&v[he]!=null)if(he==="style"){var H=v[he];for(D in H)H.hasOwnProperty(D)&&(u||(u={}),u[D]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(i.hasOwnProperty(he)?N||(N=[]):(N=N||[]).push(he,null));for(he in f){var Y=f[he];if(H=v!=null?v[he]:void 0,f.hasOwnProperty(he)&&Y!==H&&(Y!=null||H!=null))if(he==="style")if(H){for(D in H)!H.hasOwnProperty(D)||Y&&Y.hasOwnProperty(D)||(u||(u={}),u[D]="");for(D in Y)Y.hasOwnProperty(D)&&H[D]!==Y[D]&&(u||(u={}),u[D]=Y[D])}else u||(N||(N=[]),N.push(he,u)),u=Y;else he==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,H=H?H.__html:void 0,Y!=null&&H!==Y&&(N=N||[]).push(he,Y)):he==="children"?typeof Y!="string"&&typeof Y!="number"||(N=N||[]).push(he,""+Y):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(i.hasOwnProperty(he)?(Y!=null&&he==="onScroll"&&ln("scroll",a),N||H===Y||(N=[])):(N=N||[]).push(he,Y))}u&&(N=N||[]).push("style",u);var he=N;(l.updateQueue=he)&&(l.flags|=4)}},rb=function(a,l,u,f){u!==f&&(l.flags|=4)};function Wc(a,l){if(!hn)switch(a.tailMode){case"hidden":l=a.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function fs(a){var l=a.alternate!==null&&a.alternate.child===a.child,u=0,f=0;if(l)for(var v=a.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags&14680064,f|=v.flags&14680064,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=f,a.childLanes=u,l}function IC(a,l,u){var f=l.pendingProps;switch(kp(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fs(l),null;case 1:return Ls(l.type)&&ju(),fs(l),null;case 3:return f=l.stateNode,_l(),cn(Ms),cn(ms),Fp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(Eu(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ar!==null&&(xf(Ar),Ar=null))),af(a,l),fs(l),null;case 5:Vp(l);var v=vo(Bc.current);if(u=l.type,a!==null&&l.stateNode!=null)sb(a,l,u,f,v),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!f){if(l.stateNode===null)throw Error(t(166));return fs(l),null}if(a=vo(ii.current),Eu(l)){f=l.stateNode,u=l.type;var N=l.memoizedProps;switch(f[ri]=l,f[zc]=N,a=(l.mode&1)!==0,u){case"dialog":ln("cancel",f),ln("close",f);break;case"iframe":case"object":case"embed":ln("load",f);break;case"video":case"audio":for(v=0;v<Dc.length;v++)ln(Dc[v],f);break;case"source":ln("error",f);break;case"img":case"image":case"link":ln("error",f),ln("load",f);break;case"details":ln("toggle",f);break;case"input":bt(f,N),ln("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!N.multiple},ln("invalid",f);break;case"textarea":mt(f,N),ln("invalid",f)}es(u,N),v=null;for(var D in N)if(N.hasOwnProperty(D)){var H=N[D];D==="children"?typeof H=="string"?f.textContent!==H&&(N.suppressHydrationWarning!==!0&&vu(f.textContent,H,a),v=["children",H]):typeof H=="number"&&f.textContent!==""+H&&(N.suppressHydrationWarning!==!0&&vu(f.textContent,H,a),v=["children",""+H]):i.hasOwnProperty(D)&&H!=null&&D==="onScroll"&&ln("scroll",f)}switch(u){case"input":xt(f),$e(f,N,!0);break;case"textarea":xt(f),Dt(f);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(f.onclick=wu)}f=v,l.updateQueue=f,f!==null&&(l.flags|=4)}else{D=v.nodeType===9?v:v.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=pt(u)),a==="http://www.w3.org/1999/xhtml"?u==="script"?(a=D.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof f.is=="string"?a=D.createElement(u,{is:f.is}):(a=D.createElement(u),u==="select"&&(D=a,f.multiple?D.multiple=!0:f.size&&(D.size=f.size))):a=D.createElementNS(a,u),a[ri]=l,a[zc]=f,nb(a,l,!1,!1),l.stateNode=a;e:{switch(D=mr(u,f),u){case"dialog":ln("cancel",a),ln("close",a),v=f;break;case"iframe":case"object":case"embed":ln("load",a),v=f;break;case"video":case"audio":for(v=0;v<Dc.length;v++)ln(Dc[v],a);v=f;break;case"source":ln("error",a),v=f;break;case"img":case"image":case"link":ln("error",a),ln("load",a),v=f;break;case"details":ln("toggle",a),v=f;break;case"input":bt(a,f),v=at(a,f),ln("invalid",a);break;case"option":v=f;break;case"select":a._wrapperState={wasMultiple:!!f.multiple},v=ve({},f,{value:void 0}),ln("invalid",a);break;case"textarea":mt(a,f),v=xe(a,f),ln("invalid",a);break;default:v=f}es(u,v),H=v;for(N in H)if(H.hasOwnProperty(N)){var Y=H[N];N==="style"?Is(a,Y):N==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&vt(a,Y)):N==="children"?typeof Y=="string"?(u!=="textarea"||Y!=="")&&tn(a,Y):typeof Y=="number"&&tn(a,""+Y):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(i.hasOwnProperty(N)?Y!=null&&N==="onScroll"&&ln("scroll",a):Y!=null&&q(a,N,Y,D))}switch(u){case"input":xt(a),$e(a,f,!1);break;case"textarea":xt(a),Dt(a);break;case"option":f.value!=null&&a.setAttribute("value",""+Ae(f.value));break;case"select":a.multiple=!!f.multiple,N=f.value,N!=null?Vt(a,!!f.multiple,N,!1):f.defaultValue!=null&&Vt(a,!!f.multiple,f.defaultValue,!0);break;default:typeof v.onClick=="function"&&(a.onclick=wu)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return fs(l),null;case 6:if(a&&l.stateNode!=null)rb(a,l,a.memoizedProps,f);else{if(typeof f!="string"&&l.stateNode===null)throw Error(t(166));if(u=vo(Bc.current),vo(ii.current),Eu(l)){if(f=l.stateNode,u=l.memoizedProps,f[ri]=l,(N=f.nodeValue!==u)&&(a=nr,a!==null))switch(a.tag){case 3:vu(f.nodeValue,u,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&vu(f.nodeValue,u,(a.mode&1)!==0)}N&&(l.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[ri]=l,l.stateNode=f}return fs(l),null;case 13:if(cn(xn),f=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(hn&&sr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)oy(),wl(),l.flags|=98560,N=!1;else if(N=Eu(l),f!==null&&f.dehydrated!==null){if(a===null){if(!N)throw Error(t(318));if(N=l.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(t(317));N[ri]=l}else wl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;fs(l),N=!1}else Ar!==null&&(xf(Ar),Ar=null),N=!0;if(!N)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=u,l):(f=f!==null,f!==(a!==null&&a.memoizedState!==null)&&f&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(xn.current&1)!==0?$n===0&&($n=3):vf())),l.updateQueue!==null&&(l.flags|=4),fs(l),null);case 4:return _l(),af(a,l),a===null&&Mc(l.stateNode.containerInfo),fs(l),null;case 10:return Rp(l.type._context),fs(l),null;case 17:return Ls(l.type)&&ju(),fs(l),null;case 19:if(cn(xn),N=l.memoizedState,N===null)return fs(l),null;if(f=(l.flags&128)!==0,D=N.rendering,D===null)if(f)Wc(N,!1);else{if($n!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(D=Du(a),D!==null){for(l.flags|=128,Wc(N,!1),f=D.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),l.subtreeFlags=0,f=u,u=l.child;u!==null;)N=u,a=f,N.flags&=14680066,D=N.alternate,D===null?(N.childLanes=0,N.lanes=a,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=D.childLanes,N.lanes=D.lanes,N.child=D.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=D.memoizedProps,N.memoizedState=D.memoizedState,N.updateQueue=D.updateQueue,N.type=D.type,a=D.dependencies,N.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),u=u.sibling;return an(xn,xn.current&1|2),l.child}a=a.sibling}N.tail!==null&&Ut()>Tl&&(l.flags|=128,f=!0,Wc(N,!1),l.lanes=4194304)}else{if(!f)if(a=Du(D),a!==null){if(l.flags|=128,f=!0,u=a.updateQueue,u!==null&&(l.updateQueue=u,l.flags|=4),Wc(N,!0),N.tail===null&&N.tailMode==="hidden"&&!D.alternate&&!hn)return fs(l),null}else 2*Ut()-N.renderingStartTime>Tl&&u!==1073741824&&(l.flags|=128,f=!0,Wc(N,!1),l.lanes=4194304);N.isBackwards?(D.sibling=l.child,l.child=D):(u=N.last,u!==null?u.sibling=D:l.child=D,N.last=D)}return N.tail!==null?(l=N.tail,N.rendering=l,N.tail=l.sibling,N.renderingStartTime=Ut(),l.sibling=null,u=xn.current,an(xn,f?u&1|2:u&1),l):(fs(l),null);case 22:case 23:return bf(),f=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==f&&(l.flags|=8192),f&&(l.mode&1)!==0?(rr&1073741824)!==0&&(fs(l),l.subtreeFlags&6&&(l.flags|=8192)):fs(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function RC(a,l){switch(kp(l),l.tag){case 1:return Ls(l.type)&&ju(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return _l(),cn(Ms),cn(ms),Fp(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Vp(l),null;case 13:if(cn(xn),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));wl()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return cn(xn),null;case 4:return _l(),null;case 10:return Rp(l.type._context),null;case 22:case 23:return bf(),null;case 24:return null;default:return null}}var $u=!1,gs=!1,DC=typeof WeakSet=="function"?WeakSet:Set,Je=null;function kl(a,l){var u=a.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){jn(a,l,f)}else u.current=null}function of(a,l,u){try{u()}catch(f){jn(a,l,f)}}var ib=!1;function MC(a,l){if(yp=Ei,a=z0(),dp(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var v=f.anchorOffset,N=f.focusNode;f=f.focusOffset;try{u.nodeType,N.nodeType}catch{u=null;break e}var D=0,H=-1,Y=-1,he=0,Ee=0,Pe=a,ke=null;t:for(;;){for(var Ge;Pe!==u||v!==0&&Pe.nodeType!==3||(H=D+v),Pe!==N||f!==0&&Pe.nodeType!==3||(Y=D+f),Pe.nodeType===3&&(D+=Pe.nodeValue.length),(Ge=Pe.firstChild)!==null;)ke=Pe,Pe=Ge;for(;;){if(Pe===a)break t;if(ke===u&&++he===v&&(H=D),ke===N&&++Ee===f&&(Y=D),(Ge=Pe.nextSibling)!==null)break;Pe=ke,ke=Pe.parentNode}Pe=Ge}u=H===-1||Y===-1?null:{start:H,end:Y}}else u=null}u=u||{start:0,end:0}}else u=null;for(bp={focusedElem:a,selectionRange:u},Ei=!1,Je=l;Je!==null;)if(l=Je,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Je=a;else for(;Je!==null;){l=Je;try{var Ze=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Ze!==null){var Qe=Ze.memoizedProps,Tn=Ze.memoizedState,ae=l.stateNode,te=ae.getSnapshotBeforeUpdate(l.elementType===l.type?Qe:Ir(l.type,Qe),Tn);ae.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var de=l.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(De){jn(l,l.return,De)}if(a=l.sibling,a!==null){a.return=l.return,Je=a;break}Je=l.return}return Ze=ib,ib=!1,Ze}function Kc(a,l,u){var f=l.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&a)===a){var N=v.destroy;v.destroy=void 0,N!==void 0&&of(l,u,N)}v=v.next}while(v!==f)}}function qu(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var u=l=l.next;do{if((u.tag&a)===a){var f=u.create;u.destroy=f()}u=u.next}while(u!==l)}}function lf(a){var l=a.ref;if(l!==null){var u=a.stateNode;switch(a.tag){case 5:a=u;break;default:a=u}typeof l=="function"?l(a):l.current=a}}function ab(a){var l=a.alternate;l!==null&&(a.alternate=null,ab(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[ri],delete l[zc],delete l[jp],delete l[xC],delete l[yC])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function ob(a){return a.tag===5||a.tag===3||a.tag===4}function lb(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ob(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function cf(a,l,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,l?u.nodeType===8?u.parentNode.insertBefore(a,l):u.insertBefore(a,l):(u.nodeType===8?(l=u.parentNode,l.insertBefore(a,u)):(l=u,l.appendChild(a)),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=wu));else if(f!==4&&(a=a.child,a!==null))for(cf(a,l,u),a=a.sibling;a!==null;)cf(a,l,u),a=a.sibling}function df(a,l,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,l?u.insertBefore(a,l):u.appendChild(a);else if(f!==4&&(a=a.child,a!==null))for(df(a,l,u),a=a.sibling;a!==null;)df(a,l,u),a=a.sibling}var is=null,Rr=!1;function fa(a,l,u){for(u=u.child;u!==null;)cb(a,l,u),u=u.sibling}function cb(a,l,u){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Ue,u)}catch{}switch(u.tag){case 5:gs||kl(u,l);case 6:var f=is,v=Rr;is=null,fa(a,l,u),is=f,Rr=v,is!==null&&(Rr?(a=is,u=u.stateNode,a.nodeType===8?a.parentNode.removeChild(u):a.removeChild(u)):is.removeChild(u.stateNode));break;case 18:is!==null&&(Rr?(a=is,u=u.stateNode,a.nodeType===8?Np(a.parentNode,u):a.nodeType===1&&Np(a,u),ia(a)):Np(is,u.stateNode));break;case 4:f=is,v=Rr,is=u.stateNode.containerInfo,Rr=!0,fa(a,l,u),is=f,Rr=v;break;case 0:case 11:case 14:case 15:if(!gs&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){v=f=f.next;do{var N=v,D=N.destroy;N=N.tag,D!==void 0&&((N&2)!==0||(N&4)!==0)&&of(u,l,D),v=v.next}while(v!==f)}fa(a,l,u);break;case 1:if(!gs&&(kl(u,l),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(H){jn(u,l,H)}fa(a,l,u);break;case 21:fa(a,l,u);break;case 22:u.mode&1?(gs=(f=gs)||u.memoizedState!==null,fa(a,l,u),gs=f):fa(a,l,u);break;default:fa(a,l,u)}}function db(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var u=a.stateNode;u===null&&(u=a.stateNode=new DC),l.forEach(function(f){var v=qC.bind(null,a,f);u.has(f)||(u.add(f),f.then(v,v))})}}function Dr(a,l){var u=l.deletions;if(u!==null)for(var f=0;f<u.length;f++){var v=u[f];try{var N=a,D=l,H=D;e:for(;H!==null;){switch(H.tag){case 5:is=H.stateNode,Rr=!1;break e;case 3:is=H.stateNode.containerInfo,Rr=!0;break e;case 4:is=H.stateNode.containerInfo,Rr=!0;break e}H=H.return}if(is===null)throw Error(t(160));cb(N,D,v),is=null,Rr=!1;var Y=v.alternate;Y!==null&&(Y.return=null),v.return=null}catch(he){jn(v,l,he)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)ub(l,a),l=l.sibling}function ub(a,l){var u=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Dr(l,a),oi(a),f&4){try{Kc(3,a,a.return),qu(3,a)}catch(Qe){jn(a,a.return,Qe)}try{Kc(5,a,a.return)}catch(Qe){jn(a,a.return,Qe)}}break;case 1:Dr(l,a),oi(a),f&512&&u!==null&&kl(u,u.return);break;case 5:if(Dr(l,a),oi(a),f&512&&u!==null&&kl(u,u.return),a.flags&32){var v=a.stateNode;try{tn(v,"")}catch(Qe){jn(a,a.return,Qe)}}if(f&4&&(v=a.stateNode,v!=null)){var N=a.memoizedProps,D=u!==null?u.memoizedProps:N,H=a.type,Y=a.updateQueue;if(a.updateQueue=null,Y!==null)try{H==="input"&&N.type==="radio"&&N.name!=null&&z(v,N),mr(H,D);var he=mr(H,N);for(D=0;D<Y.length;D+=2){var Ee=Y[D],Pe=Y[D+1];Ee==="style"?Is(v,Pe):Ee==="dangerouslySetInnerHTML"?vt(v,Pe):Ee==="children"?tn(v,Pe):q(v,Ee,Pe,he)}switch(H){case"input":re(v,N);break;case"textarea":kt(v,N);break;case"select":var ke=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!N.multiple;var Ge=N.value;Ge!=null?Vt(v,!!N.multiple,Ge,!1):ke!==!!N.multiple&&(N.defaultValue!=null?Vt(v,!!N.multiple,N.defaultValue,!0):Vt(v,!!N.multiple,N.multiple?[]:"",!1))}v[zc]=N}catch(Qe){jn(a,a.return,Qe)}}break;case 6:if(Dr(l,a),oi(a),f&4){if(a.stateNode===null)throw Error(t(162));v=a.stateNode,N=a.memoizedProps;try{v.nodeValue=N}catch(Qe){jn(a,a.return,Qe)}}break;case 3:if(Dr(l,a),oi(a),f&4&&u!==null&&u.memoizedState.isDehydrated)try{ia(l.containerInfo)}catch(Qe){jn(a,a.return,Qe)}break;case 4:Dr(l,a),oi(a);break;case 13:Dr(l,a),oi(a),v=a.child,v.flags&8192&&(N=v.memoizedState!==null,v.stateNode.isHidden=N,!N||v.alternate!==null&&v.alternate.memoizedState!==null||(mf=Ut())),f&4&&db(a);break;case 22:if(Ee=u!==null&&u.memoizedState!==null,a.mode&1?(gs=(he=gs)||Ee,Dr(l,a),gs=he):Dr(l,a),oi(a),f&8192){if(he=a.memoizedState!==null,(a.stateNode.isHidden=he)&&!Ee&&(a.mode&1)!==0)for(Je=a,Ee=a.child;Ee!==null;){for(Pe=Je=Ee;Je!==null;){switch(ke=Je,Ge=ke.child,ke.tag){case 0:case 11:case 14:case 15:Kc(4,ke,ke.return);break;case 1:kl(ke,ke.return);var Ze=ke.stateNode;if(typeof Ze.componentWillUnmount=="function"){f=ke,u=ke.return;try{l=f,Ze.props=l.memoizedProps,Ze.state=l.memoizedState,Ze.componentWillUnmount()}catch(Qe){jn(f,u,Qe)}}break;case 5:kl(ke,ke.return);break;case 22:if(ke.memoizedState!==null){pb(Pe);continue}}Ge!==null?(Ge.return=ke,Je=Ge):pb(Pe)}Ee=Ee.sibling}e:for(Ee=null,Pe=a;;){if(Pe.tag===5){if(Ee===null){Ee=Pe;try{v=Pe.stateNode,he?(N=v.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(H=Pe.stateNode,Y=Pe.memoizedProps.style,D=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,H.style.display=Hn("display",D))}catch(Qe){jn(a,a.return,Qe)}}}else if(Pe.tag===6){if(Ee===null)try{Pe.stateNode.nodeValue=he?"":Pe.memoizedProps}catch(Qe){jn(a,a.return,Qe)}}else if((Pe.tag!==22&&Pe.tag!==23||Pe.memoizedState===null||Pe===a)&&Pe.child!==null){Pe.child.return=Pe,Pe=Pe.child;continue}if(Pe===a)break e;for(;Pe.sibling===null;){if(Pe.return===null||Pe.return===a)break e;Ee===Pe&&(Ee=null),Pe=Pe.return}Ee===Pe&&(Ee=null),Pe.sibling.return=Pe.return,Pe=Pe.sibling}}break;case 19:Dr(l,a),oi(a),f&4&&db(a);break;case 21:break;default:Dr(l,a),oi(a)}}function oi(a){var l=a.flags;if(l&2){try{e:{for(var u=a.return;u!==null;){if(ob(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var v=f.stateNode;f.flags&32&&(tn(v,""),f.flags&=-33);var N=lb(a);df(a,N,v);break;case 3:case 4:var D=f.stateNode.containerInfo,H=lb(a);cf(a,H,D);break;default:throw Error(t(161))}}catch(Y){jn(a,a.return,Y)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function LC(a,l,u){Je=a,hb(a)}function hb(a,l,u){for(var f=(a.mode&1)!==0;Je!==null;){var v=Je,N=v.child;if(v.tag===22&&f){var D=v.memoizedState!==null||$u;if(!D){var H=v.alternate,Y=H!==null&&H.memoizedState!==null||gs;H=$u;var he=gs;if($u=D,(gs=Y)&&!he)for(Je=v;Je!==null;)D=Je,Y=D.child,D.tag===22&&D.memoizedState!==null?fb(v):Y!==null?(Y.return=D,Je=Y):fb(v);for(;N!==null;)Je=N,hb(N),N=N.sibling;Je=v,$u=H,gs=he}mb(a)}else(v.subtreeFlags&8772)!==0&&N!==null?(N.return=v,Je=N):mb(a)}}function mb(a){for(;Je!==null;){var l=Je;if((l.flags&8772)!==0){var u=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:gs||qu(5,l);break;case 1:var f=l.stateNode;if(l.flags&4&&!gs)if(u===null)f.componentDidMount();else{var v=l.elementType===l.type?u.memoizedProps:Ir(l.type,u.memoizedProps);f.componentDidUpdate(v,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var N=l.updateQueue;N!==null&&py(l,N,f);break;case 3:var D=l.updateQueue;if(D!==null){if(u=null,l.child!==null)switch(l.child.tag){case 5:u=l.child.stateNode;break;case 1:u=l.child.stateNode}py(l,D,u)}break;case 5:var H=l.stateNode;if(u===null&&l.flags&4){u=H;var Y=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&u.focus();break;case"img":Y.src&&(u.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var he=l.alternate;if(he!==null){var Ee=he.memoizedState;if(Ee!==null){var Pe=Ee.dehydrated;Pe!==null&&ia(Pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}gs||l.flags&512&&lf(l)}catch(ke){jn(l,l.return,ke)}}if(l===a){Je=null;break}if(u=l.sibling,u!==null){u.return=l.return,Je=u;break}Je=l.return}}function pb(a){for(;Je!==null;){var l=Je;if(l===a){Je=null;break}var u=l.sibling;if(u!==null){u.return=l.return,Je=u;break}Je=l.return}}function fb(a){for(;Je!==null;){var l=Je;try{switch(l.tag){case 0:case 11:case 15:var u=l.return;try{qu(4,l)}catch(Y){jn(l,u,Y)}break;case 1:var f=l.stateNode;if(typeof f.componentDidMount=="function"){var v=l.return;try{f.componentDidMount()}catch(Y){jn(l,v,Y)}}var N=l.return;try{lf(l)}catch(Y){jn(l,N,Y)}break;case 5:var D=l.return;try{lf(l)}catch(Y){jn(l,D,Y)}}}catch(Y){jn(l,l.return,Y)}if(l===a){Je=null;break}var H=l.sibling;if(H!==null){H.return=l.return,Je=H;break}Je=l.return}}var zC=Math.ceil,Gu=Z.ReactCurrentDispatcher,uf=Z.ReactCurrentOwner,wr=Z.ReactCurrentBatchConfig,qt=0,Jn=null,Dn=null,as=0,rr=0,El=da(0),$n=0,Jc=null,No=0,Hu=0,hf=0,Yc=null,Vs=null,mf=0,Tl=1/0,Vi=null,Wu=!1,pf=null,ga=null,Ku=!1,xa=null,Ju=0,Zc=0,ff=null,Yu=-1,Zu=0;function Ss(){return(qt&6)!==0?Ut():Yu!==-1?Yu:Yu=Ut()}function ya(a){return(a.mode&1)===0?1:(qt&2)!==0&&as!==0?as&-as:vC.transition!==null?(Zu===0&&(Zu=yc()),Zu):(a=Ot,a!==0||(a=window.event,a=a===void 0?16:rl(a.type)),a)}function Mr(a,l,u,f){if(50<Zc)throw Zc=0,ff=null,Error(t(185));co(a,u,f),((qt&2)===0||a!==Jn)&&(a===Jn&&((qt&2)===0&&(Hu|=u),$n===4&&ba(a,as)),Os(a,f),u===1&&qt===0&&(l.mode&1)===0&&(Tl=Ut()+500,_u&&ha()))}function Os(a,l){var u=a.callbackNode;lo(a,l);var f=_i(a,a===Jn?as:0);if(f===0)u!==null&&Jt(u),a.callbackNode=null,a.callbackPriority=0;else if(l=f&-f,a.callbackPriority!==l){if(u!=null&&Jt(u),l===1)a.tag===0?bC(xb.bind(null,a)):ny(xb.bind(null,a)),fC(function(){(qt&6)===0&&ha()}),u=null;else{switch(Kr(f)){case 1:u=Ds;break;case 4:u=Si;break;case 16:u=Nn;break;case 536870912:u=ce;break;default:u=Nn}u=_b(u,gb.bind(null,a))}a.callbackPriority=l,a.callbackNode=u}}function gb(a,l){if(Yu=-1,Zu=0,(qt&6)!==0)throw Error(t(327));var u=a.callbackNode;if(Pl()&&a.callbackNode!==u)return null;var f=_i(a,a===Jn?as:0);if(f===0)return null;if((f&30)!==0||(f&a.expiredLanes)!==0||l)l=Qu(a,f);else{l=f;var v=qt;qt|=2;var N=bb();(Jn!==a||as!==l)&&(Vi=null,Tl=Ut()+500,So(a,l));do try{FC();break}catch(H){yb(a,H)}while(!0);Ip(),Gu.current=N,qt=v,Dn!==null?l=0:(Jn=null,as=0,l=$n)}if(l!==0){if(l===2&&(v=xc(a),v!==0&&(f=v,l=gf(a,v))),l===1)throw u=Jc,So(a,0),ba(a,f),Os(a,Ut()),u;if(l===6)ba(a,f);else{if(v=a.current.alternate,(f&30)===0&&!VC(v)&&(l=Qu(a,f),l===2&&(N=xc(a),N!==0&&(f=N,l=gf(a,N))),l===1))throw u=Jc,So(a,0),ba(a,f),Os(a,Ut()),u;switch(a.finishedWork=v,a.finishedLanes=f,l){case 0:case 1:throw Error(t(345));case 2:_o(a,Vs,Vi);break;case 3:if(ba(a,f),(f&130023424)===f&&(l=mf+500-Ut(),10<l)){if(_i(a,0)!==0)break;if(v=a.suspendedLanes,(v&f)!==f){Ss(),a.pingedLanes|=a.suspendedLanes&v;break}a.timeoutHandle=wp(_o.bind(null,a,Vs,Vi),l);break}_o(a,Vs,Vi);break;case 4:if(ba(a,f),(f&4194240)===f)break;for(l=a.eventTimes,v=-1;0<f;){var D=31-Ye(f);N=1<<D,D=l[D],D>v&&(v=D),f&=~N}if(f=v,f=Ut()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*zC(f/1960))-f,10<f){a.timeoutHandle=wp(_o.bind(null,a,Vs,Vi),f);break}_o(a,Vs,Vi);break;case 5:_o(a,Vs,Vi);break;default:throw Error(t(329))}}}return Os(a,Ut()),a.callbackNode===u?gb.bind(null,a):null}function gf(a,l){var u=Yc;return a.current.memoizedState.isDehydrated&&(So(a,l).flags|=256),a=Qu(a,l),a!==2&&(l=Vs,Vs=u,l!==null&&xf(l)),a}function xf(a){Vs===null?Vs=a:Vs.push.apply(Vs,a)}function VC(a){for(var l=a;;){if(l.flags&16384){var u=l.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var v=u[f],N=v.getSnapshot;v=v.value;try{if(!Pr(N(),v))return!1}catch{return!1}}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ba(a,l){for(l&=~hf,l&=~Hu,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var u=31-Ye(l),f=1<<u;a[u]=-1,l&=~f}}function xb(a){if((qt&6)!==0)throw Error(t(327));Pl();var l=_i(a,0);if((l&1)===0)return Os(a,Ut()),null;var u=Qu(a,l);if(a.tag!==0&&u===2){var f=xc(a);f!==0&&(l=f,u=gf(a,f))}if(u===1)throw u=Jc,So(a,0),ba(a,l),Os(a,Ut()),u;if(u===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,_o(a,Vs,Vi),Os(a,Ut()),null}function yf(a,l){var u=qt;qt|=1;try{return a(l)}finally{qt=u,qt===0&&(Tl=Ut()+500,_u&&ha())}}function jo(a){xa!==null&&xa.tag===0&&(qt&6)===0&&Pl();var l=qt;qt|=1;var u=wr.transition,f=Ot;try{if(wr.transition=null,Ot=1,a)return a()}finally{Ot=f,wr.transition=u,qt=l,(qt&6)===0&&ha()}}function bf(){rr=El.current,cn(El)}function So(a,l){a.finishedWork=null,a.finishedLanes=0;var u=a.timeoutHandle;if(u!==-1&&(a.timeoutHandle=-1,pC(u)),Dn!==null)for(u=Dn.return;u!==null;){var f=u;switch(kp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&ju();break;case 3:_l(),cn(Ms),cn(ms),Fp();break;case 5:Vp(f);break;case 4:_l();break;case 13:cn(xn);break;case 19:cn(xn);break;case 10:Rp(f.type._context);break;case 22:case 23:bf()}u=u.return}if(Jn=a,Dn=a=va(a.current,null),as=rr=l,$n=0,Jc=null,hf=Hu=No=0,Vs=Yc=null,bo!==null){for(l=0;l<bo.length;l++)if(u=bo[l],f=u.interleaved,f!==null){u.interleaved=null;var v=f.next,N=u.pending;if(N!==null){var D=N.next;N.next=v,f.next=D}u.pending=f}bo=null}return a}function yb(a,l){do{var u=Dn;try{if(Ip(),Mu.current=Ou,Lu){for(var f=yn.memoizedState;f!==null;){var v=f.queue;v!==null&&(v.pending=null),f=f.next}Lu=!1}if(wo=0,Kn=Bn=yn=null,$c=!1,qc=0,uf.current=null,u===null||u.return===null){$n=1,Jc=l,Dn=null;break}e:{var N=a,D=u.return,H=u,Y=l;if(l=as,H.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var he=Y,Ee=H,Pe=Ee.tag;if((Ee.mode&1)===0&&(Pe===0||Pe===11||Pe===15)){var ke=Ee.alternate;ke?(Ee.updateQueue=ke.updateQueue,Ee.memoizedState=ke.memoizedState,Ee.lanes=ke.lanes):(Ee.updateQueue=null,Ee.memoizedState=null)}var Ge=$y(D);if(Ge!==null){Ge.flags&=-257,qy(Ge,D,H,N,l),Ge.mode&1&&By(N,he,l),l=Ge,Y=he;var Ze=l.updateQueue;if(Ze===null){var Qe=new Set;Qe.add(Y),l.updateQueue=Qe}else Ze.add(Y);break e}else{if((l&1)===0){By(N,he,l),vf();break e}Y=Error(t(426))}}else if(hn&&H.mode&1){var Tn=$y(D);if(Tn!==null){(Tn.flags&65536)===0&&(Tn.flags|=256),qy(Tn,D,H,N,l),Pp(Cl(Y,H));break e}}N=Y=Cl(Y,H),$n!==4&&($n=2),Yc===null?Yc=[N]:Yc.push(N),N=D;do{switch(N.tag){case 3:N.flags|=65536,l&=-l,N.lanes|=l;var ae=Fy(N,Y,l);my(N,ae);break e;case 1:H=Y;var te=N.type,de=N.stateNode;if((N.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(ga===null||!ga.has(de)))){N.flags|=65536,l&=-l,N.lanes|=l;var De=Uy(N,H,l);my(N,De);break e}}N=N.return}while(N!==null)}wb(u)}catch(et){l=et,Dn===u&&u!==null&&(Dn=u=u.return);continue}break}while(!0)}function bb(){var a=Gu.current;return Gu.current=Ou,a===null?Ou:a}function vf(){($n===0||$n===3||$n===2)&&($n=4),Jn===null||(No&268435455)===0&&(Hu&268435455)===0||ba(Jn,as)}function Qu(a,l){var u=qt;qt|=2;var f=bb();(Jn!==a||as!==l)&&(Vi=null,So(a,l));do try{OC();break}catch(v){yb(a,v)}while(!0);if(Ip(),qt=u,Gu.current=f,Dn!==null)throw Error(t(261));return Jn=null,as=0,$n}function OC(){for(;Dn!==null;)vb(Dn)}function FC(){for(;Dn!==null&&!un();)vb(Dn)}function vb(a){var l=Sb(a.alternate,a,rr);a.memoizedProps=a.pendingProps,l===null?wb(a):Dn=l,uf.current=null}function wb(a){var l=a;do{var u=l.alternate;if(a=l.return,(l.flags&32768)===0){if(u=IC(u,l,rr),u!==null){Dn=u;return}}else{if(u=RC(u,l),u!==null){u.flags&=32767,Dn=u;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{$n=6,Dn=null;return}}if(l=l.sibling,l!==null){Dn=l;return}Dn=l=a}while(l!==null);$n===0&&($n=5)}function _o(a,l,u){var f=Ot,v=wr.transition;try{wr.transition=null,Ot=1,UC(a,l,u,f)}finally{wr.transition=v,Ot=f}return null}function UC(a,l,u,f){do Pl();while(xa!==null);if((qt&6)!==0)throw Error(t(327));u=a.finishedWork;var v=a.finishedLanes;if(u===null)return null;if(a.finishedWork=null,a.finishedLanes=0,u===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var N=u.lanes|u.childLanes;if(ip(a,N),a===Jn&&(Dn=Jn=null,as=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Ku||(Ku=!0,_b(Nn,function(){return Pl(),null})),N=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||N){N=wr.transition,wr.transition=null;var D=Ot;Ot=1;var H=qt;qt|=4,uf.current=null,MC(a,u),ub(u,a),oC(bp),Ei=!!yp,bp=yp=null,a.current=u,LC(u),wn(),qt=H,Ot=D,wr.transition=N}else a.current=u;if(Ku&&(Ku=!1,xa=a,Ju=v),N=a.pendingLanes,N===0&&(ga=null),Ve(u.stateNode),Os(a,Ut()),l!==null)for(f=a.onRecoverableError,u=0;u<l.length;u++)v=l[u],f(v.value,{componentStack:v.stack,digest:v.digest});if(Wu)throw Wu=!1,a=pf,pf=null,a;return(Ju&1)!==0&&a.tag!==0&&Pl(),N=a.pendingLanes,(N&1)!==0?a===ff?Zc++:(Zc=0,ff=a):Zc=0,ha(),null}function Pl(){if(xa!==null){var a=Kr(Ju),l=wr.transition,u=Ot;try{if(wr.transition=null,Ot=16>a?16:a,xa===null)var f=!1;else{if(a=xa,xa=null,Ju=0,(qt&6)!==0)throw Error(t(331));var v=qt;for(qt|=4,Je=a.current;Je!==null;){var N=Je,D=N.child;if((Je.flags&16)!==0){var H=N.deletions;if(H!==null){for(var Y=0;Y<H.length;Y++){var he=H[Y];for(Je=he;Je!==null;){var Ee=Je;switch(Ee.tag){case 0:case 11:case 15:Kc(8,Ee,N)}var Pe=Ee.child;if(Pe!==null)Pe.return=Ee,Je=Pe;else for(;Je!==null;){Ee=Je;var ke=Ee.sibling,Ge=Ee.return;if(ab(Ee),Ee===he){Je=null;break}if(ke!==null){ke.return=Ge,Je=ke;break}Je=Ge}}}var Ze=N.alternate;if(Ze!==null){var Qe=Ze.child;if(Qe!==null){Ze.child=null;do{var Tn=Qe.sibling;Qe.sibling=null,Qe=Tn}while(Qe!==null)}}Je=N}}if((N.subtreeFlags&2064)!==0&&D!==null)D.return=N,Je=D;else e:for(;Je!==null;){if(N=Je,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:Kc(9,N,N.return)}var ae=N.sibling;if(ae!==null){ae.return=N.return,Je=ae;break e}Je=N.return}}var te=a.current;for(Je=te;Je!==null;){D=Je;var de=D.child;if((D.subtreeFlags&2064)!==0&&de!==null)de.return=D,Je=de;else e:for(D=te;Je!==null;){if(H=Je,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:qu(9,H)}}catch(et){jn(H,H.return,et)}if(H===D){Je=null;break e}var De=H.sibling;if(De!==null){De.return=H.return,Je=De;break e}Je=H.return}}if(qt=v,ha(),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Ue,a)}catch{}f=!0}return f}finally{Ot=u,wr.transition=l}}return!1}function Nb(a,l,u){l=Cl(u,l),l=Fy(a,l,1),a=pa(a,l,1),l=Ss(),a!==null&&(co(a,1,l),Os(a,l))}function jn(a,l,u){if(a.tag===3)Nb(a,a,u);else for(;l!==null;){if(l.tag===3){Nb(l,a,u);break}else if(l.tag===1){var f=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ga===null||!ga.has(f))){a=Cl(u,a),a=Uy(l,a,1),l=pa(l,a,1),a=Ss(),l!==null&&(co(l,1,a),Os(l,a));break}}l=l.return}}function BC(a,l,u){var f=a.pingCache;f!==null&&f.delete(l),l=Ss(),a.pingedLanes|=a.suspendedLanes&u,Jn===a&&(as&u)===u&&($n===4||$n===3&&(as&130023424)===as&&500>Ut()-mf?So(a,0):hf|=u),Os(a,l)}function jb(a,l){l===0&&((a.mode&1)===0?l=1:(l=na,na<<=1,(na&130023424)===0&&(na=4194304)));var u=Ss();a=Mi(a,l),a!==null&&(co(a,l,u),Os(a,u))}function $C(a){var l=a.memoizedState,u=0;l!==null&&(u=l.retryLane),jb(a,u)}function qC(a,l){var u=0;switch(a.tag){case 13:var f=a.stateNode,v=a.memoizedState;v!==null&&(u=v.retryLane);break;case 19:f=a.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(l),jb(a,u)}var Sb;Sb=function(a,l,u){if(a!==null)if(a.memoizedProps!==l.pendingProps||Ms.current)zs=!0;else{if((a.lanes&u)===0&&(l.flags&128)===0)return zs=!1,AC(a,l,u);zs=(a.flags&131072)!==0}else zs=!1,hn&&(l.flags&1048576)!==0&&sy(l,ku,l.index);switch(l.lanes=0,l.tag){case 2:var f=l.type;Bu(a,l),a=l.pendingProps;var v=yl(l,ms.current);Sl(l,u),v=$p(null,l,f,a,v,u);var N=qp();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Ls(f)?(N=!0,Su(l)):N=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Lp(l),v.updater=Fu,l.stateNode=v,v._reactInternals=l,Yp(l,f,a,u),l=ef(null,l,f,!0,N,u)):(l.tag=0,hn&&N&&Cp(l),js(null,l,v,u),l=l.child),l;case 16:f=l.elementType;e:{switch(Bu(a,l),a=l.pendingProps,v=f._init,f=v(f._payload),l.type=f,v=l.tag=HC(f),a=Ir(f,a),v){case 0:l=Xp(null,l,f,a,u);break e;case 1:l=Yy(null,l,f,a,u);break e;case 11:l=Gy(null,l,f,a,u);break e;case 14:l=Hy(null,l,f,Ir(f.type,a),u);break e}throw Error(t(306,f,""))}return l;case 0:return f=l.type,v=l.pendingProps,v=l.elementType===f?v:Ir(f,v),Xp(a,l,f,v,u);case 1:return f=l.type,v=l.pendingProps,v=l.elementType===f?v:Ir(f,v),Yy(a,l,f,v,u);case 3:e:{if(Zy(l),a===null)throw Error(t(387));f=l.pendingProps,N=l.memoizedState,v=N.element,hy(a,l),Ru(l,f,null,u);var D=l.memoizedState;if(f=D.element,N.isDehydrated)if(N={element:f,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},l.updateQueue.baseState=N,l.memoizedState=N,l.flags&256){v=Cl(Error(t(423)),l),l=Qy(a,l,f,u,v);break e}else if(f!==v){v=Cl(Error(t(424)),l),l=Qy(a,l,f,u,v);break e}else for(sr=ca(l.stateNode.containerInfo.firstChild),nr=l,hn=!0,Ar=null,u=dy(l,null,f,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(wl(),f===v){l=zi(a,l,u);break e}js(a,l,f,u)}l=l.child}return l;case 5:return fy(l),a===null&&Tp(l),f=l.type,v=l.pendingProps,N=a!==null?a.memoizedProps:null,D=v.children,vp(f,v)?D=null:N!==null&&vp(f,N)&&(l.flags|=32),Jy(a,l),js(a,l,D,u),l.child;case 6:return a===null&&Tp(l),null;case 13:return Xy(a,l,u);case 4:return zp(l,l.stateNode.containerInfo),f=l.pendingProps,a===null?l.child=Nl(l,null,f,u):js(a,l,f,u),l.child;case 11:return f=l.type,v=l.pendingProps,v=l.elementType===f?v:Ir(f,v),Gy(a,l,f,v,u);case 7:return js(a,l,l.pendingProps,u),l.child;case 8:return js(a,l,l.pendingProps.children,u),l.child;case 12:return js(a,l,l.pendingProps.children,u),l.child;case 10:e:{if(f=l.type._context,v=l.pendingProps,N=l.memoizedProps,D=v.value,an(Pu,f._currentValue),f._currentValue=D,N!==null)if(Pr(N.value,D)){if(N.children===v.children&&!Ms.current){l=zi(a,l,u);break e}}else for(N=l.child,N!==null&&(N.return=l);N!==null;){var H=N.dependencies;if(H!==null){D=N.child;for(var Y=H.firstContext;Y!==null;){if(Y.context===f){if(N.tag===1){Y=Li(-1,u&-u),Y.tag=2;var he=N.updateQueue;if(he!==null){he=he.shared;var Ee=he.pending;Ee===null?Y.next=Y:(Y.next=Ee.next,Ee.next=Y),he.pending=Y}}N.lanes|=u,Y=N.alternate,Y!==null&&(Y.lanes|=u),Dp(N.return,u,l),H.lanes|=u;break}Y=Y.next}}else if(N.tag===10)D=N.type===l.type?null:N.child;else if(N.tag===18){if(D=N.return,D===null)throw Error(t(341));D.lanes|=u,H=D.alternate,H!==null&&(H.lanes|=u),Dp(D,u,l),D=N.sibling}else D=N.child;if(D!==null)D.return=N;else for(D=N;D!==null;){if(D===l){D=null;break}if(N=D.sibling,N!==null){N.return=D.return,D=N;break}D=D.return}N=D}js(a,l,v.children,u),l=l.child}return l;case 9:return v=l.type,f=l.pendingProps.children,Sl(l,u),v=br(v),f=f(v),l.flags|=1,js(a,l,f,u),l.child;case 14:return f=l.type,v=Ir(f,l.pendingProps),v=Ir(f.type,v),Hy(a,l,f,v,u);case 15:return Wy(a,l,l.type,l.pendingProps,u);case 17:return f=l.type,v=l.pendingProps,v=l.elementType===f?v:Ir(f,v),Bu(a,l),l.tag=1,Ls(f)?(a=!0,Su(l)):a=!1,Sl(l,u),Vy(l,f,v),Yp(l,f,v,u),ef(null,l,f,!0,a,u);case 19:return tb(a,l,u);case 22:return Ky(a,l,u)}throw Error(t(156,l.tag))};function _b(a,l){return Et(a,l)}function GC(a,l,u,f){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(a,l,u,f){return new GC(a,l,u,f)}function wf(a){return a=a.prototype,!(!a||!a.isReactComponent)}function HC(a){if(typeof a=="function")return wf(a)?1:0;if(a!=null){if(a=a.$$typeof,a===B)return 11;if(a===pe)return 14}return 2}function va(a,l){var u=a.alternate;return u===null?(u=Nr(a.tag,l,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=l,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&14680064,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,l=a.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u}function Xu(a,l,u,f,v,N){var D=2;if(f=a,typeof a=="function")wf(a)&&(D=1);else if(typeof a=="string")D=5;else e:switch(a){case R:return Co(u.children,v,N,l);case _:D=8,v|=8;break;case I:return a=Nr(12,u,l,v|2),a.elementType=I,a.lanes=N,a;case L:return a=Nr(13,u,l,v),a.elementType=L,a.lanes=N,a;case ne:return a=Nr(19,u,l,v),a.elementType=ne,a.lanes=N,a;case Te:return eh(u,v,N,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case V:D=10;break e;case A:D=9;break e;case B:D=11;break e;case pe:D=14;break e;case Ne:D=16,f=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=Nr(D,u,l,v),l.elementType=a,l.type=f,l.lanes=N,l}function Co(a,l,u,f){return a=Nr(7,a,f,l),a.lanes=u,a}function eh(a,l,u,f){return a=Nr(22,a,f,l),a.elementType=Te,a.lanes=u,a.stateNode={isHidden:!1},a}function Nf(a,l,u){return a=Nr(6,a,null,l),a.lanes=u,a}function jf(a,l,u){return l=Nr(4,a.children!==null?a.children:[],a.key,l),l.lanes=u,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function WC(a,l,u,f,v){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bc(0),this.expirationTimes=bc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bc(0),this.identifierPrefix=f,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Sf(a,l,u,f,v,N,D,H,Y){return a=new WC(a,l,u,H,Y),l===1?(l=1,N===!0&&(l|=8)):l=0,N=Nr(3,null,null,l),a.current=N,N.stateNode=a,N.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lp(N),a}function KC(a,l,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:f==null?null:""+f,children:a,containerInfo:l,implementation:u}}function Cb(a){if(!a)return ua;a=a._reactInternals;e:{if(Me(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Ls(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var u=a.type;if(Ls(u))return ey(a,u,l)}return l}function kb(a,l,u,f,v,N,D,H,Y){return a=Sf(u,f,!0,a,v,N,D,H,Y),a.context=Cb(null),u=a.current,f=Ss(),v=ya(u),N=Li(f,v),N.callback=l??null,pa(u,N,v),a.current.lanes=v,co(a,v,f),Os(a,f),a}function th(a,l,u,f){var v=l.current,N=Ss(),D=ya(v);return u=Cb(u),l.context===null?l.context=u:l.pendingContext=u,l=Li(N,D),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=pa(v,l,D),a!==null&&(Mr(a,v,D,N),Iu(a,v,D)),D}function nh(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Eb(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<l?u:l}}function _f(a,l){Eb(a,l),(a=a.alternate)&&Eb(a,l)}function JC(){return null}var Tb=typeof reportError=="function"?reportError:function(a){console.error(a)};function Cf(a){this._internalRoot=a}sh.prototype.render=Cf.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));th(a,l,null,null)},sh.prototype.unmount=Cf.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;jo(function(){th(null,a,null,null)}),l[Ai]=null}};function sh(a){this._internalRoot=a}sh.prototype.unstable_scheduleHydration=function(a){if(a){var l=jc();a={blockedOn:null,target:a,priority:l};for(var u=0;u<Qs.length&&l!==0&&l<Qs[u].priority;u++);Qs.splice(u,0,a),u===0&&nl(a)}};function kf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function rh(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Pb(){}function YC(a,l,u,f,v){if(v){if(typeof f=="function"){var N=f;f=function(){var he=nh(D);N.call(he)}}var D=kb(l,f,a,0,null,!1,!1,"",Pb);return a._reactRootContainer=D,a[Ai]=D.current,Mc(a.nodeType===8?a.parentNode:a),jo(),D}for(;v=a.lastChild;)a.removeChild(v);if(typeof f=="function"){var H=f;f=function(){var he=nh(Y);H.call(he)}}var Y=Sf(a,0,!1,null,null,!1,!1,"",Pb);return a._reactRootContainer=Y,a[Ai]=Y.current,Mc(a.nodeType===8?a.parentNode:a),jo(function(){th(l,Y,u,f)}),Y}function ih(a,l,u,f,v){var N=u._reactRootContainer;if(N){var D=N;if(typeof v=="function"){var H=v;v=function(){var Y=nh(D);H.call(Y)}}th(l,D,a,v)}else D=YC(u,l,a,v,f);return nh(D)}wc=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var u=Wt(l.pendingLanes);u!==0&&(vc(l,u|1),Os(l,Ut()),(qt&6)===0&&(Tl=Ut()+500,ha()))}break;case 13:jo(function(){var f=Mi(a,1);if(f!==null){var v=Ss();Mr(f,a,1,v)}}),_f(a,1)}},el=function(a){if(a.tag===13){var l=Mi(a,134217728);if(l!==null){var u=Ss();Mr(l,a,134217728,u)}_f(a,134217728)}},Nc=function(a){if(a.tag===13){var l=ya(a),u=Mi(a,l);if(u!==null){var f=Ss();Mr(u,a,l,f)}_f(a,l)}},jc=function(){return Ot},Sc=function(a,l){var u=Ot;try{return Ot=a,l()}finally{Ot=u}},us=function(a,l,u){switch(l){case"input":if(re(a,u),l=u.name,u.type==="radio"&&l!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<u.length;l++){var f=u[l];if(f!==a&&f.form===a.form){var v=Nu(f);if(!v)throw Error(t(90));we(f),re(f,v)}}}break;case"textarea":kt(a,u);break;case"select":l=u.value,l!=null&&Vt(a,!!u.multiple,l,!1)}},gn=yf,Wn=jo;var ZC={usingClientEntryPoint:!1,Events:[Vc,gl,Nu,tt,Gt,yf]},Qc={findFiberByHostInstance:fo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QC={bundleType:Qc.bundleType,version:Qc.version,rendererPackageName:Qc.rendererPackageName,rendererConfig:Qc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Fe(a),a===null?null:a.stateNode},findFiberByHostInstance:Qc.findFiberByHostInstance||JC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{Ue=ah.inject(QC),it=ah}catch{}}return Fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZC,Fs.createPortal=function(a,l){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kf(l))throw Error(t(200));return KC(a,l,null,u)},Fs.createRoot=function(a,l){if(!kf(a))throw Error(t(299));var u=!1,f="",v=Tb;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=Sf(a,1,!1,null,null,u,!1,f,v),a[Ai]=l.current,Mc(a.nodeType===8?a.parentNode:a),new Cf(l)},Fs.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Fe(l),a=a===null?null:a.stateNode,a},Fs.flushSync=function(a){return jo(a)},Fs.hydrate=function(a,l,u){if(!rh(l))throw Error(t(200));return ih(null,a,l,!0,u)},Fs.hydrateRoot=function(a,l,u){if(!kf(a))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,v=!1,N="",D=Tb;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(N=u.identifierPrefix),u.onRecoverableError!==void 0&&(D=u.onRecoverableError)),l=kb(l,null,a,1,u??null,v,!1,N,D),a[Ai]=l.current,Mc(a),f)for(a=0;a<f.length;a++)u=f[a],v=u._getVersion,v=v(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,v]:l.mutableSourceEagerHydrationData.push(u,v);return new sh(l)},Fs.render=function(a,l,u){if(!rh(l))throw Error(t(200));return ih(null,a,l,!1,u)},Fs.unmountComponentAtNode=function(a){if(!rh(a))throw Error(t(40));return a._reactRootContainer?(jo(function(){ih(null,null,a,!1,function(){a._reactRootContainer=null,a[Ai]=null})}),!0):!1},Fs.unstable_batchedUpdates=yf,Fs.unstable_renderSubtreeIntoContainer=function(a,l,u,f){if(!rh(u))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return ih(a,l,u,!1,f)},Fs.version="18.3.1-next-f1338f8080-20240426",Fs}var Vb;function Cj(){if(Vb)return Pf.exports;Vb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Pf.exports=ok(),Pf.exports}var Ob;function lk(){if(Ob)return oh;Ob=1;var s=Cj();return oh.createRoot=s.createRoot,oh.hydrateRoot=s.hydrateRoot,oh}var ck=lk();const dk=_j(ck);Cj();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vd(){return vd=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},vd.apply(this,arguments)}var Ia;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Ia||(Ia={}));const Fb="popstate";function uk(s){s===void 0&&(s={});function e(i,o){let{pathname:c="/",search:d="",hash:m=""}=Ko(i.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),og("",{pathname:c,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){let c=i.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=i.location.href,h=m.indexOf("#");d=h===-1?m:m.slice(0,h)}return d+"#"+(typeof o=="string"?o:Oh(o))}function r(i,o){xm(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return mk(e,t,r,s)}function An(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function xm(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hk(){return Math.random().toString(36).substr(2,8)}function Ub(s,e){return{usr:s.state,key:s.key,idx:e}}function og(s,e,t,r){return t===void 0&&(t=null),vd({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?Ko(e):e,{state:t,key:e&&e.key||r||hk()})}function Oh(s){let{pathname:e="/",search:t="",hash:r=""}=s;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ko(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substr(t),s=s.substr(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substr(r),s=s.substr(0,r)),s&&(e.pathname=s)}return e}function mk(s,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,d=Ia.Pop,m=null,h=g();h==null&&(h=0,c.replaceState(vd({},c.state,{idx:h}),""));function g(){return(c.state||{idx:null}).idx}function b(){d=Ia.Pop;let E=g(),F=E==null?null:E-h;h=E,m&&m({action:d,location:k.location,delta:F})}function w(E,F){d=Ia.Push;let U=og(k.location,E,F);t&&t(U,E),h=g()+1;let q=Ub(U,h),Z=k.createHref(U);try{c.pushState(q,"",Z)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;i.location.assign(Z)}o&&m&&m({action:d,location:k.location,delta:1})}function P(E,F){d=Ia.Replace;let U=og(k.location,E,F);t&&t(U,E),h=g();let q=Ub(U,h),Z=k.createHref(U);c.replaceState(q,"",Z),o&&m&&m({action:d,location:k.location,delta:0})}function C(E){let F=i.location.origin!=="null"?i.location.origin:i.location.href,U=typeof E=="string"?E:Oh(E);return U=U.replace(/ $/,"%20"),An(F,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,F)}let k={get action(){return d},get location(){return s(i,c)},listen(E){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(Fb,b),m=E,()=>{i.removeEventListener(Fb,b),m=null}},createHref(E){return e(i,E)},createURL:C,encodeLocation(E){let F=C(E);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:w,replace:P,go(E){return c.go(E)}};return k}var Bb;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Bb||(Bb={}));function pk(s,e,t){return t===void 0&&(t="/"),fk(s,e,t)}function fk(s,e,t,r){let i=typeof e=="string"?Ko(e):e,o=tx(i.pathname||"/",t);if(o==null)return null;let c=kj(s);gk(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let h=Ek(o);d=_k(c[m],h)}return d}function kj(s,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(o,c,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};m.relativePath.startsWith("/")&&(An(m.relativePath.startsWith(r),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(r.length));let h=Ma([r,m.relativePath]),g=t.concat(m);o.children&&o.children.length>0&&(An(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),kj(o.children,e,g,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:jk(h,o.index),routesMeta:g})};return s.forEach((o,c)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,c);else for(let m of Ej(o.path))i(o,c,m)}),e}function Ej(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=Ej(r.join("/")),d=[];return d.push(...c.map(m=>m===""?o:[o,m].join("/"))),i&&d.push(...c),d.map(m=>s.startsWith("/")&&m===""?"/":m)}function gk(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:Sk(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const xk=/^:[\w-]+$/,yk=3,bk=2,vk=1,wk=10,Nk=-2,$b=s=>s==="*";function jk(s,e){let t=s.split("/"),r=t.length;return t.some($b)&&(r+=Nk),e&&(r+=bk),t.filter(i=>!$b(i)).reduce((i,o)=>i+(xk.test(o)?yk:o===""?vk:wk),r)}function Sk(s,e){return s.length===e.length&&s.slice(0,-1).every((r,i)=>r===e[i])?s[s.length-1]-e[e.length-1]:0}function _k(s,e,t){let{routesMeta:r}=s,i={},o="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],h=d===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",b=Ck({path:m.relativePath,caseSensitive:m.caseSensitive,end:h},g),w=m.route;if(!b)return null;Object.assign(i,b.params),c.push({params:i,pathname:Ma([o,b.pathname]),pathnameBase:Rk(Ma([o,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(o=Ma([o,b.pathnameBase]))}return c}function Ck(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=kk(s.path,s.caseSensitive,s.end),i=e.match(t);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((h,g,b)=>{let{paramName:w,isOptional:P}=g;if(w==="*"){let k=d[b]||"";c=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const C=d[b];return P&&!C?h[w]=void 0:h[w]=(C||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:c,pattern:s}}function kk(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),xm(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let r=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Ek(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xm(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function tx(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}const Tk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pk=s=>Tk.test(s);function Ak(s,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof s=="string"?Ko(s):s,o;if(t)if(Pk(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),xm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+t))}t.startsWith("/")?o=qb(t.substring(1),"/"):o=qb(t,e)}else o=e;return{pathname:o,search:Dk(r),hash:Mk(i)}}function qb(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Rf(s,e,t,r){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ik(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function nx(s,e){let t=Ik(s);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function sx(s,e,t,r){r===void 0&&(r=!1);let i;typeof s=="string"?i=Ko(s):(i=vd({},s),An(!i.pathname||!i.pathname.includes("?"),Rf("?","pathname","search",i)),An(!i.pathname||!i.pathname.includes("#"),Rf("#","pathname","hash",i)),An(!i.search||!i.search.includes("#"),Rf("#","search","hash",i)));let o=s===""||i.pathname==="",c=o?"/":i.pathname,d;if(c==null)d=t;else{let b=e.length-1;if(!r&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),b-=1;i.pathname=w.join("/")}d=b>=0?e[b]:"/"}let m=Ak(i,d),h=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(h||g)&&(m.pathname+="/"),m}const Ma=s=>s.join("/").replace(/\/\/+/g,"/"),Rk=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Dk=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Mk=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Lk(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const Tj=["post","put","patch","delete"];new Set(Tj);const zk=["get",...Tj];new Set(zk);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wd(){return wd=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},wd.apply(this,arguments)}const rx=S.createContext(null),Vk=S.createContext(null),Ja=S.createContext(null),ym=S.createContext(null),vi=S.createContext({outlet:null,matches:[],isDataRoute:!1}),Pj=S.createContext(null);function Ok(s,e){let{relative:t}=e===void 0?{}:e;oc()||An(!1);let{basename:r,navigator:i}=S.useContext(Ja),{hash:o,pathname:c,search:d}=Ij(s,{relative:t}),m=c;return r!=="/"&&(m=c==="/"?r:Ma([r,c])),i.createHref({pathname:m,search:d,hash:o})}function oc(){return S.useContext(ym)!=null}function Ya(){return oc()||An(!1),S.useContext(ym).location}function Aj(s){S.useContext(Ja).static||S.useLayoutEffect(s)}function As(){let{isDataRoute:s}=S.useContext(vi);return s?eE():Fk()}function Fk(){oc()||An(!1);let s=S.useContext(rx),{basename:e,future:t,navigator:r}=S.useContext(Ja),{matches:i}=S.useContext(vi),{pathname:o}=Ya(),c=JSON.stringify(nx(i,t.v7_relativeSplatPath)),d=S.useRef(!1);return Aj(()=>{d.current=!0}),S.useCallback(function(h,g){if(g===void 0&&(g={}),!d.current)return;if(typeof h=="number"){r.go(h);return}let b=sx(h,JSON.parse(c),o,g.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Ma([e,b.pathname])),(g.replace?r.replace:r.push)(b,g.state,g)},[e,r,c,o,s])}const Uk=S.createContext(null);function Bk(s){let e=S.useContext(vi).outlet;return e&&S.createElement(Uk.Provider,{value:s},e)}function Gd(){let{matches:s}=S.useContext(vi),e=s[s.length-1];return e?e.params:{}}function Ij(s,e){let{relative:t}=e===void 0?{}:e,{future:r}=S.useContext(Ja),{matches:i}=S.useContext(vi),{pathname:o}=Ya(),c=JSON.stringify(nx(i,r.v7_relativeSplatPath));return S.useMemo(()=>sx(s,JSON.parse(c),o,t==="path"),[s,c,o,t])}function $k(s,e){return qk(s,e)}function qk(s,e,t,r){oc()||An(!1);let{navigator:i}=S.useContext(Ja),{matches:o}=S.useContext(vi),c=o[o.length-1],d=c?c.params:{};c&&c.pathname;let m=c?c.pathnameBase:"/";c&&c.route;let h=Ya(),g;if(e){var b;let E=typeof e=="string"?Ko(e):e;m==="/"||(b=E.pathname)!=null&&b.startsWith(m)||An(!1),g=E}else g=h;let w=g.pathname||"/",P=w;if(m!=="/"){let E=m.replace(/^\//,"").split("/");P="/"+w.replace(/^\//,"").split("/").slice(E.length).join("/")}let C=pk(s,{pathname:P}),k=Jk(C&&C.map(E=>Object.assign({},E,{params:Object.assign({},d,E.params),pathname:Ma([m,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?m:Ma([m,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,t,r);return e&&k?S.createElement(ym.Provider,{value:{location:wd({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Ia.Pop}},k):k}function Gk(){let s=Xk(),e=Lk(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),t?S.createElement("pre",{style:i},t):null,null)}const Hk=S.createElement(Gk,null);class Wk extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?S.createElement(vi.Provider,{value:this.props.routeContext},S.createElement(Pj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kk(s){let{routeContext:e,match:t,children:r}=s,i=S.useContext(rx);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(vi.Provider,{value:e},r)}function Jk(s,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),s==null){var o;if(!t)return null;if(t.errors)s=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let c=s,d=(i=t)==null?void 0:i.errors;if(d!=null){let g=c.findIndex(b=>b.route.id&&(d==null?void 0:d[b.route.id])!==void 0);g>=0||An(!1),c=c.slice(0,Math.min(c.length,g+1))}let m=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let b=c[g];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(h=g),b.route.id){let{loaderData:w,errors:P}=t,C=b.route.loader&&w[b.route.id]===void 0&&(!P||P[b.route.id]===void 0);if(b.route.lazy||C){m=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((g,b,w)=>{let P,C=!1,k=null,E=null;t&&(P=d&&b.route.id?d[b.route.id]:void 0,k=b.route.errorElement||Hk,m&&(h<0&&w===0?(tE("route-fallback"),C=!0,E=null):h===w&&(C=!0,E=b.route.hydrateFallbackElement||null)));let F=e.concat(c.slice(0,w+1)),U=()=>{let q;return P?q=k:C?q=E:b.route.Component?q=S.createElement(b.route.Component,null):b.route.element?q=b.route.element:q=g,S.createElement(Kk,{match:b,routeContext:{outlet:g,matches:F,isDataRoute:t!=null},children:q})};return t&&(b.route.ErrorBoundary||b.route.errorElement||w===0)?S.createElement(Wk,{location:t.location,revalidation:t.revalidation,component:k,error:P,children:U(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):U()},null)}var Rj=(function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s})(Rj||{}),Dj=(function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s})(Dj||{});function Yk(s){let e=S.useContext(rx);return e||An(!1),e}function Zk(s){let e=S.useContext(Vk);return e||An(!1),e}function Qk(s){let e=S.useContext(vi);return e||An(!1),e}function Mj(s){let e=Qk(),t=e.matches[e.matches.length-1];return t.route.id||An(!1),t.route.id}function Xk(){var s;let e=S.useContext(Pj),t=Zk(),r=Mj();return e!==void 0?e:(s=t.errors)==null?void 0:s[r]}function eE(){let{router:s}=Yk(Rj.UseNavigateStable),e=Mj(Dj.UseNavigateStable),t=S.useRef(!1);return Aj(()=>{t.current=!0}),S.useCallback(function(i,o){o===void 0&&(o={}),t.current&&(typeof i=="number"?s.navigate(i):s.navigate(i,wd({fromRouteId:e},o)))},[s,e])}const Gb={};function tE(s,e,t){Gb[s]||(Gb[s]=!0)}function nE(s,e){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function sE(s){let{to:e,replace:t,state:r,relative:i}=s;oc()||An(!1);let{future:o,static:c}=S.useContext(Ja),{matches:d}=S.useContext(vi),{pathname:m}=Ya(),h=As(),g=sx(e,nx(d,o.v7_relativeSplatPath),m,i==="path"),b=JSON.stringify(g);return S.useEffect(()=>h(JSON.parse(b),{replace:t,state:r,relative:i}),[h,b,i,t,r]),null}function Lj(s){return Bk(s.context)}function _t(s){An(!1)}function rE(s){let{basename:e="/",children:t=null,location:r,navigationType:i=Ia.Pop,navigator:o,static:c=!1,future:d}=s;oc()&&An(!1);let m=e.replace(/^\/*/,"/"),h=S.useMemo(()=>({basename:m,navigator:o,static:c,future:wd({v7_relativeSplatPath:!1},d)}),[m,d,o,c]);typeof r=="string"&&(r=Ko(r));let{pathname:g="/",search:b="",hash:w="",state:P=null,key:C="default"}=r,k=S.useMemo(()=>{let E=tx(g,m);return E==null?null:{location:{pathname:E,search:b,hash:w,state:P,key:C},navigationType:i}},[m,g,b,w,P,C,i]);return k==null?null:S.createElement(Ja.Provider,{value:h},S.createElement(ym.Provider,{children:t,value:k}))}function iE(s){let{children:e,location:t}=s;return $k(lg(e),t)}new Promise(()=>{});function lg(s,e){e===void 0&&(e=[]);let t=[];return S.Children.forEach(s,(r,i)=>{if(!S.isValidElement(r))return;let o=[...e,i];if(r.type===S.Fragment){t.push.apply(t,lg(r.props.children,o));return}r.type!==_t&&An(!1),!r.props.index||!r.props.children||An(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=lg(r.props.children,o)),t.push(c)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cg(){return cg=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},cg.apply(this,arguments)}function aE(s,e){if(s==null)return{};var t={},r=Object.keys(s),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=s[i]);return t}function oE(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function lE(s,e){return s.button===0&&(!e||e==="_self")&&!oE(s)}const cE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dE="6";try{window.__reactRouterVersion=dE}catch{}const uE="startTransition",Hb=rk[uE];function hE(s){let{basename:e,children:t,future:r,window:i}=s,o=S.useRef();o.current==null&&(o.current=uk({window:i,v5Compat:!0}));let c=o.current,[d,m]=S.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},g=S.useCallback(b=>{h&&Hb?Hb(()=>m(b)):m(b)},[m,h]);return S.useLayoutEffect(()=>c.listen(g),[c,g]),S.useEffect(()=>nE(r),[r]),S.createElement(rE,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:c,future:r})}const mE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=S.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:o,replace:c,state:d,target:m,to:h,preventScrollReset:g,viewTransition:b}=e,w=aE(e,cE),{basename:P}=S.useContext(Ja),C,k=!1;if(typeof h=="string"&&pE.test(h)&&(C=h,mE))try{let q=new URL(window.location.href),Z=h.startsWith("//")?new URL(q.protocol+h):new URL(h),W=tx(Z.pathname,P);Z.origin===q.origin&&W!=null?h=W+Z.search+Z.hash:k=!0}catch{}let E=Ok(h,{relative:i}),F=fE(h,{replace:c,state:d,target:m,preventScrollReset:g,relative:i,viewTransition:b});function U(q){r&&r(q),q.defaultPrevented||F(q)}return S.createElement("a",cg({},w,{href:C||E,onClick:k||o?r:U,ref:t,target:m}))});var Wb;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Wb||(Wb={}));var Kb;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Kb||(Kb={}));function fE(s,e){let{target:t,replace:r,state:i,preventScrollReset:o,relative:c,viewTransition:d}=e===void 0?{}:e,m=As(),h=Ya(),g=Ij(s,{relative:c});return S.useCallback(b=>{if(lE(b,t)){b.preventDefault();let w=r!==void 0?r:Oh(h)===Oh(g);m(s,{replace:w,state:i,preventScrollReset:o,relative:c,viewTransition:d})}},[h,m,g,r,i,t,s,o,c,d])}const Jb=[{id:"c_red",name:"Red Collection",image:"https://picsum.photos/400/400?random=1",description:"Passion & Energy"},{id:"c_black",name:"Black Collection",image:"https://picsum.photos/400/400?random=2",description:"Bold & Mysterious"},{id:"c_orange",name:"Orange Collection",image:"https://picsum.photos/400/400?random=3",description:"Warmth & Creativity"},{id:"c_yellow",name:"Yellow Collection",image:"https://picsum.photos/400/400?random=4",description:"Joy & Sunshine"},{id:"c_purple",name:"Purple Collection",image:"https://picsum.photos/400/400?random=5",description:"Royalty & Spirit"},{id:"c_pink",name:"Pink Collection",image:"https://picsum.photos/400/400?random=6",description:"Love & Softness"},{id:"c_bronze",name:"Bronze Collection",image:"https://picsum.photos/400/400?random=7",description:"Earthy & Ancient"},{id:"c_white",name:"White or Pearl Collection",image:"https://picsum.photos/400/400?random=8",description:"Elegance & Purity"},{id:"c_blue",name:"Blue Collection",image:"https://picsum.photos/400/400?random=9",description:"Calm & Ocean"},{id:"c_green",name:"Green Collection",image:"https://picsum.photos/400/400?random=10",description:"Nature & Harmony"},{id:"c_gold",name:"Gold Collection",image:"https://picsum.photos/400/400?random=11",description:"Luxury & Wealth"},{id:"c_silver",name:"Silver Collection",image:"https://picsum.photos/400/400?random=12",description:"Sleek & Modern"}],gE=[{id:"1761729812469",code:"SPV-003",name:"Sweetheart Red Resin Stud Earrings",slug:"sweetheart-red-resin-studs",description:"Embrace a touch of whimsy with these adorable sweetheart stud earrings, meticulously crafted from vibrant epoxy resin. Each glossy red heart reflects light beautifully.",whenAndHowToWear:"Perfect for date nights or adding a pop of color to a monochrome outfit.",price:29,compareAtPrice:45,memberPrice:14.5,costPrice:5,category:"Red Collection",type:"Stud",status:"published",images:[],stock:58,tags:["Red heart earrings","stud earrings","resin jewelry","handmade"],seoKeywords:["heart earrings","red studs"],earringMaterials:[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal"},{name:"Stainless Steel",modifier:0,description:"Hypo-allergenic"}],isNewArrival:!1,isBestSeller:!0,reviews:[{id:"rev1",userName:"Amelia Thompson",location:"London, UK",content:"The sparkle of these earrings is absolutely mesmerizing, perfect for adding elegance to any outfit.",rating:5,date:"2024-11-15T10:30:00Z"},{id:"rev2",userName:"Carlos Ramirez",location:"Mexico City, Mexico",content:"Good quality, but the durability could be better for everyday wear.",rating:4,date:"2024-12-20T14:45:00Z"},{id:"rev3",userName:"Yuki Tanaka",location:"Tokyo, Japan",content:"These arrived faster than expected and the craftsmanship is impeccable. Highly recommend for special occasions.",rating:5,date:"2025-01-22T09:15:00Z"},{id:"rev4",userName:"Fatima Al-Zahra",location:"Dubai, UAE",content:"Beautiful design, though the price feels a bit high for the materials used.",rating:4,date:"2025-02-25T16:20:00Z"},{id:"rev5",userName:"Liam O'Sullivan",location:"Dublin, Ireland",content:"The color is vibrant and the design is unique. Perfect for everyday wear.",rating:4,date:"2025-03-28T11:00:00Z"},{id:"rev6",userName:"Priya Sharma",location:"Mumbai, India",content:"Nice piece, but I wish it sparkled more under different lights.",rating:3,date:"2025-04-01T13:30:00Z"},{id:"rev7",userName:"Hans Mueller",location:"Berlin, Germany",content:"Exceeded my expectations in terms of quality and style. The opal shines beautifully under light.",rating:5,date:"2025-05-03T08:45:00Z"},{id:"rev8",userName:"Isabella Rossi",location:"Rome, Italy",content:"Elegant design, but the durability is questionable after a few wears.",rating:3,date:"2025-06-05T17:10:00Z"},{id:"rev9",userName:"Ahmed Hassan",location:"Cairo, Egypt",content:"The ring fits perfectly and the stone has amazing play of colors. Worth every penny.",rating:5,date:"2025-07-07T12:25:00Z"},{id:"rev10",userName:"Sophie Dubois",location:"Paris, France",content:"Charming, and the price is reasonable for the sparkle it provides.",rating:4,date:"2025-08-09T15:50:00Z"},{id:"rev11",userName:"Raj Patel",location:"Sydney, Australia",content:"Fast shipping and the product is as described. Very satisfied with the purchase.",rating:5,date:"2025-09-11T10:05:00Z"},{id:"rev12",userName:"Elena Petrova",location:"Moscow, Russia",content:"Unique style, but the durability leaves much to be desired.",rating:3,date:"2025-10-13T14:30:00Z"},{id:"rev13",userName:"Miguel Santos",location:"So Paulo, Brazil",content:"The earrings are lightweight and comfortable to wear all day. Love the red color.",rating:4,date:"2025-11-15T09:20:00Z"}],createdAt:new Date().toISOString()},{id:"1762477248818",code:"SPV-052",name:"Ethereal Aurora Oval Opal Ring",slug:"ethereal-aurora-oval-opal-ring",description:"Experience the captivating play of color in this unique oval opal ring, meticulously set in gleaming sterling silver.",price:129,costPrice:50,memberPrice:60,backOfficeLink:"https://www.temu.com/example-ring-link",madeBy:"Outsourced",category:"White or Pearl Collection",type:"Ring",status:"published",images:[],stock:7,ringStock:{5:1,6:1,7:1,8:1,9:1,10:1,11:1},tags:["Opal ring","sterling silver","statement ring"],isNewArrival:!0,isFeaturedRing:!0,reviews:[{id:"rev14",userName:"Aisha Khan",location:"Karachi, Pakistan",content:"Gorgeous sparkle, but the price is a bit steep for what you get.",rating:4,date:"2024-11-17T16:45:00Z"},{id:"rev15",userName:"Oliver Jensen",location:"Copenhagen, Denmark",content:"High-quality materials and excellent customer service. The ring is a standout piece.",rating:5,date:"2024-12-19T11:15:00Z"},{id:"rev16",userName:"Nina Kowalski",location:"Warsaw, Poland",content:"Decent value, though durability could be improved.",rating:3,date:"2025-01-21T13:40:00Z"},{id:"rev17",userName:"Diego Fernandez",location:"Buenos Aires, Argentina",content:"The opal's iridescence is mesmerizing. Arrived well-packaged and on time.",rating:5,date:"2025-02-23T08:55:00Z"},{id:"rev18",userName:"Layla Al-Farsi",location:"Riyadh, Saudi Arabia",content:"Stylish accessory with great sparkle, worth the investment.",rating:5,date:"2025-03-25T17:25:00Z"},{id:"rev19",userName:"Finn Larsen",location:"Oslo, Norway",content:"Great attention to detail in the craftsmanship. Perfect for gifting.",rating:4,date:"2025-04-27T12:10:00Z"},{id:"rev20",userName:"Zara Ahmed",location:"Lagos, Nigeria",content:"Impressive quality, but the durability is not as expected.",rating:3,date:"2025-05-29T15:35:00Z"},{id:"rev21",userName:"Luca Bianchi",location:"Milan, Italy",content:"The earrings sparkle just right and the resin is smooth. Very happy with this buy.",rating:5,date:"2025-06-31T10:50:00Z"},{id:"rev22",userName:"Anika Gupta",location:"Delhi, India",content:"Solid choice, and the price matches the sparkle and quality.",rating:4,date:"2025-07-02T14:15:00Z"},{id:"rev23",userName:"Victor Nguyen",location:"Ho Chi Minh City, Vietnam",content:"Beautiful design and the silver setting enhances the opal perfectly. Highly recommended.",rating:5,date:"2025-08-04T09:30:00Z"},{id:"rev24",userName:"Maya Cohen",location:"Tel Aviv, Israel",content:"Lovely item with excellent durability for daily use.",rating:4,date:"2025-09-06T16:55:00Z"},{id:"rev25",userName:"Johan Svensson",location:"Stockholm, Sweden",content:"The product exceeded my expectations. The color and fit are spot on.",rating:5,date:"2025-10-08T11:40:00Z"}],createdAt:new Date().toISOString()}],ir={id:"guest",name:"Guest",email:"",isMember:!1,membershipTier:"none",loyaltyPoints:0,affiliateCode:"",affiliateEarnings:0,wishlist:[],notifications:[],isAdmin:!1,socialRewards:{},shippingAddress:{street:"",suburb:"",city:"",province:"",postalCode:""}},xE=[{id:"s1",title:"Summer Tech Sale",products:["1761729812469"],discountPercentage:15,endsAt:new Date(Date.now()+864e5*2).toISOString(),image:"https://picsum.photos/800/400?random=20"}];/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=()=>{};var Yb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let i=s.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},bE=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const i=s[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=s[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=s[t++],c=s[t++],d=s[t++],m=((i&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const o=s[t++],c=s[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},Vj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<s.length;i+=3){const o=s[i],c=i+1<s.length,d=c?s[i+1]:0,m=i+2<s.length,h=m?s[i+2]:0,g=o>>2,b=(o&3)<<4|d>>4;let w=(d&15)<<2|h>>6,P=h&63;m||(P=64,c||(w=64)),r.push(t[g],t[b],t[w],t[P])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(zj(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):bE(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<s.length;){const o=t[s.charAt(i++)],d=i<s.length?t[s.charAt(i)]:0;++i;const h=i<s.length?t[s.charAt(i)]:64;++i;const b=i<s.length?t[s.charAt(i)]:64;if(++i,o==null||d==null||h==null||b==null)throw new vE;const w=o<<2|d>>4;if(r.push(w),h!==64){const P=d<<4&240|h>>2;if(r.push(P),b!==64){const C=h<<6&192|b;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class vE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wE=function(s){const e=zj(s);return Vj.encodeByteArray(e,!0)},Fh=function(s){return wE(s).replace(/\./g,"")},Oj=function(s){try{return Vj.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=()=>NE().__FIREBASE_DEFAULTS__,SE=()=>{if(typeof process>"u"||typeof Yb>"u")return;const s=Yb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},_E=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Oj(s[1]);return e&&JSON.parse(e)},bm=()=>{try{return yE()||jE()||SE()||_E()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Fj=s=>{var e,t;return(t=(e=bm())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},ix=s=>{const e=Fj(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Uj=()=>{var s;return(s=bm())==null?void 0:s.config},Bj=s=>{var e;return(e=bm())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vm(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=s.iat||0,o=s.sub||s.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Fh(JSON.stringify(t)),Fh(JSON.stringify(c)),""].join(".")}const dd={};function kE(){const s={prod:[],emulator:[]};for(const e of Object.keys(dd))dd[e]?s.emulator.push(e):s.prod.push(e);return s}function EE(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Zb=!1;function wm(s,e){if(typeof window>"u"||typeof document>"u"||!wi(window.location.host)||dd[s]===e||dd[s]||Zb)return;dd[s]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=kE().prod.length>0;function c(){const w=document.getElementById(r);w&&w.remove()}function d(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function m(w,P){w.setAttribute("width","24"),w.setAttribute("id",P),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function h(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Zb=!0,c()},w}function g(w,P){w.setAttribute("id",P),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function b(){const w=EE(r),P=t("text"),C=document.getElementById(P)||document.createElement("span"),k=t("learnmore"),E=document.getElementById(k)||document.createElement("a"),F=t("preprendIcon"),U=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const q=w.element;d(q),g(E,k);const Z=h();m(U,F),q.append(U,C,E,Z),document.body.appendChild(q)}o?(C.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ws())}function PE(){var e;const s=(e=bm())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qj(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function IE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RE(){const s=ws();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function DE(){return!PE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ax(){try{return typeof indexedDB=="object"}catch{return!1}}function ox(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}function Gj(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="FirebaseError";class hr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ME,Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Za.prototype.create)}}class Za{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?LE(o,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new hr(i,d,r)}}function LE(s,e){return s.replace(zE,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zE=/\{\$([^}]+)}/g;function VE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ki(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=s[i],c=e[i];if(Qb(o)&&Qb(c)){if(!Ki(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Qb(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nd(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function sd(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function OE(s,e){const t=new FE(s,e);return t.subscribe.bind(t)}class FE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");UE(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Df),i.error===void 0&&(i.error=Df),i.complete===void 0&&(i.complete=Df);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UE(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Df(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=1e3,$E=2,qE=14400*1e3,GE=.5;function Xb(s,e=BE,t=$E){const r=e*Math.pow(t,s),i=Math.round(GE*r*(Math.random()-.5)*2);return Math.min(qE,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(s){return s&&s._delegate?s._delegate:s}class Ps{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new CE;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KE(e))try{this.getOrInitializeService({instanceIdentifier:ko})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ko){return this.instances.has(e)}getOptions(e=ko){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WE(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ko){return this.component?this.component.multipleInstances?e:ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WE(s){return s===ko?void 0:s}function KE(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new HE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Mt||(Mt={}));const YE={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},ZE=Mt.INFO,QE={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},XE=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),i=QE[e];if(i)console[i](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nm{constructor(e){this.name=e,this._logLevel=ZE,this._logHandler=XE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...e),this._logHandler(this,Mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...e),this._logHandler(this,Mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...e),this._logHandler(this,Mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...e),this._logHandler(this,Mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...e),this._logHandler(this,Mt.ERROR,...e)}}const eT=(s,e)=>e.some(t=>s instanceof t);let ev,tv;function tT(){return ev||(ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nT(){return tv||(tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hj=new WeakMap,dg=new WeakMap,Wj=new WeakMap,Mf=new WeakMap,lx=new WeakMap;function sT(s){const e=new Promise((t,r)=>{const i=()=>{s.removeEventListener("success",o),s.removeEventListener("error",c)},o=()=>{t(qi(s.result)),i()},c=()=>{r(s.error),i()};s.addEventListener("success",o),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Hj.set(t,s)}).catch(()=>{}),lx.set(e,s),e}function rT(s){if(dg.has(s))return;const e=new Promise((t,r)=>{const i=()=>{s.removeEventListener("complete",o),s.removeEventListener("error",c),s.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",o),s.addEventListener("error",c),s.addEventListener("abort",c)});dg.set(s,e)}let ug={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return dg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Wj.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qi(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function iT(s){ug=s(ug)}function aT(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Lf(this),e,...t);return Wj.set(r,e.sort?e.sort():[e]),qi(r)}:nT().includes(s)?function(...e){return s.apply(Lf(this),e),qi(Hj.get(this))}:function(...e){return qi(s.apply(Lf(this),e))}}function oT(s){return typeof s=="function"?aT(s):(s instanceof IDBTransaction&&rT(s),eT(s,tT())?new Proxy(s,ug):s)}function qi(s){if(s instanceof IDBRequest)return sT(s);if(Mf.has(s))return Mf.get(s);const e=oT(s);return e!==s&&(Mf.set(s,e),lx.set(e,s)),e}const Lf=s=>lx.get(s);function jm(s,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(s,e),d=qi(c);return r&&c.addEventListener("upgradeneeded",m=>{r(qi(c.result),m.oldVersion,m.newVersion,qi(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{o&&m.addEventListener("close",()=>o()),i&&m.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}function zf(s,{blocked:e}={}){const t=indexedDB.deleteDatabase(s);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),qi(t).then(()=>{})}const lT=["get","getKey","getAll","getAllKeys","count"],cT=["put","add","delete","clear"],Vf=new Map;function nv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Vf.get(e))return Vf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=cT.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lT.includes(t)))return;const o=async function(c,...d){const m=this.transaction(c,i?"readwrite":"readonly");let h=m.store;return r&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),i&&m.done]))[0]};return Vf.set(e,o),o}iT(s=>({...s,get:(e,t,r)=>nv(e,t)||s.get(e,t,r),has:(e,t)=>!!nv(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uT(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function uT(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hg="@firebase/app",sv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Nm("@firebase/app"),hT="@firebase/app-compat",mT="@firebase/analytics-compat",pT="@firebase/analytics",fT="@firebase/app-check-compat",gT="@firebase/app-check",xT="@firebase/auth",yT="@firebase/auth-compat",bT="@firebase/database",vT="@firebase/data-connect",wT="@firebase/database-compat",NT="@firebase/functions",jT="@firebase/functions-compat",ST="@firebase/installations",_T="@firebase/installations-compat",CT="@firebase/messaging",kT="@firebase/messaging-compat",ET="@firebase/performance",TT="@firebase/performance-compat",PT="@firebase/remote-config",AT="@firebase/remote-config-compat",IT="@firebase/storage",RT="@firebase/storage-compat",DT="@firebase/firestore",MT="@firebase/ai",LT="@firebase/firestore-compat",zT="firebase",VT="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="[DEFAULT]",OT={[hg]:"fire-core",[hT]:"fire-core-compat",[pT]:"fire-analytics",[mT]:"fire-analytics-compat",[gT]:"fire-app-check",[fT]:"fire-app-check-compat",[xT]:"fire-auth",[yT]:"fire-auth-compat",[bT]:"fire-rtdb",[vT]:"fire-data-connect",[wT]:"fire-rtdb-compat",[NT]:"fire-fn",[jT]:"fire-fn-compat",[ST]:"fire-iid",[_T]:"fire-iid-compat",[CT]:"fire-fcm",[kT]:"fire-fcm-compat",[ET]:"fire-perf",[TT]:"fire-perf-compat",[PT]:"fire-rc",[AT]:"fire-rc-compat",[IT]:"fire-gcs",[RT]:"fire-gcs-compat",[DT]:"fire-fst",[LT]:"fire-fst-compat",[MT]:"fire-vertex","fire-js":"fire-js",[zT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new Map,FT=new Map,pg=new Map;function rv(s,e){try{s.container.addComponent(e)}catch(t){Ji.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Js(s){const e=s.name;if(pg.has(e))return Ji.debug(`There were multiple attempts to register component ${e}.`),!1;pg.set(e,s);for(const t of Uh.values())rv(t,s);for(const t of FT.values())rv(t,s);return!0}function Ni(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function qs(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},La=new Za("app","Firebase",UT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw La.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=VT;function Kj(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:mg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw La.create("bad-app-name",{appName:String(i)});if(t||(t=Uj()),!t)throw La.create("no-options");const o=Uh.get(i);if(o){if(Ki(t,o.options)&&Ki(r,o.config))return o;throw La.create("duplicate-app",{appName:i})}const c=new JE(i);for(const m of pg.values())c.addComponent(m);const d=new BT(t,r,c);return Uh.set(i,d),d}function lc(s=mg){const e=Uh.get(s);if(!e&&s===mg&&Uj())return Kj();if(!e)throw La.create("no-app",{appName:s});return e}function Xn(s,e,t){let r=OT[s]??s;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ji.warn(c.join(" "));return}Js(new Ps(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="firebase-heartbeat-database",qT=1,Nd="firebase-heartbeat-store";let Of=null;function Jj(){return Of||(Of=jm($T,qT,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Nd)}catch(t){console.warn(t)}}}}).catch(s=>{throw La.create("idb-open",{originalErrorMessage:s.message})})),Of}async function GT(s){try{const t=(await Jj()).transaction(Nd),r=await t.objectStore(Nd).get(Yj(s));return await t.done,r}catch(e){if(e instanceof hr)Ji.warn(e.message);else{const t=La.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ji.warn(t.message)}}}async function iv(s,e){try{const r=(await Jj()).transaction(Nd,"readwrite");await r.objectStore(Nd).put(e,Yj(s)),await r.done}catch(t){if(t instanceof hr)Ji.warn(t.message);else{const r=La.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ji.warn(r.message)}}}function Yj(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=1024,WT=30;class KT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new YT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=av();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>WT){const c=ZT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ji.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=av(),{heartbeatsToSend:r,unsentEntries:i}=JT(this._heartbeatsCache.heartbeats),o=Fh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ji.warn(t),""}}}function av(){return new Date().toISOString().substring(0,10)}function JT(s,e=HT){const t=[];let r=s.slice();for(const i of s){const o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),ov(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ov(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class YT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ax()?ox().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ov(s){return Fh(JSON.stringify({version:2,heartbeats:s})).length}function ZT(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(s){Js(new Ps("platform-logger",e=>new dT(e),"PRIVATE")),Js(new Ps("heartbeat",e=>new KT(e),"PRIVATE")),Xn(hg,sv,s),Xn(hg,sv,"esm2020"),Xn("fire-js","")}QT("");var XT="firebase",eP="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn(XT,eP,"app");var lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var za,Zj;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,_){function I(){}I.prototype=_.prototype,R.F=_.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(V,A,B){for(var L=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)L[ne-2]=arguments[ne];return _.prototype[A].apply(V,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,_,I){I||(I=0);const V=Array(16);if(typeof _=="string")for(var A=0;A<16;++A)V[A]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(A=0;A<16;++A)V[A]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=R.g[0],I=R.g[1],A=R.g[2];let B=R.g[3],L;L=_+(B^I&(A^B))+V[0]+3614090360&4294967295,_=I+(L<<7&4294967295|L>>>25),L=B+(A^_&(I^A))+V[1]+3905402710&4294967295,B=_+(L<<12&4294967295|L>>>20),L=A+(I^B&(_^I))+V[2]+606105819&4294967295,A=B+(L<<17&4294967295|L>>>15),L=I+(_^A&(B^_))+V[3]+3250441966&4294967295,I=A+(L<<22&4294967295|L>>>10),L=_+(B^I&(A^B))+V[4]+4118548399&4294967295,_=I+(L<<7&4294967295|L>>>25),L=B+(A^_&(I^A))+V[5]+1200080426&4294967295,B=_+(L<<12&4294967295|L>>>20),L=A+(I^B&(_^I))+V[6]+2821735955&4294967295,A=B+(L<<17&4294967295|L>>>15),L=I+(_^A&(B^_))+V[7]+4249261313&4294967295,I=A+(L<<22&4294967295|L>>>10),L=_+(B^I&(A^B))+V[8]+1770035416&4294967295,_=I+(L<<7&4294967295|L>>>25),L=B+(A^_&(I^A))+V[9]+2336552879&4294967295,B=_+(L<<12&4294967295|L>>>20),L=A+(I^B&(_^I))+V[10]+4294925233&4294967295,A=B+(L<<17&4294967295|L>>>15),L=I+(_^A&(B^_))+V[11]+2304563134&4294967295,I=A+(L<<22&4294967295|L>>>10),L=_+(B^I&(A^B))+V[12]+1804603682&4294967295,_=I+(L<<7&4294967295|L>>>25),L=B+(A^_&(I^A))+V[13]+4254626195&4294967295,B=_+(L<<12&4294967295|L>>>20),L=A+(I^B&(_^I))+V[14]+2792965006&4294967295,A=B+(L<<17&4294967295|L>>>15),L=I+(_^A&(B^_))+V[15]+1236535329&4294967295,I=A+(L<<22&4294967295|L>>>10),L=_+(A^B&(I^A))+V[1]+4129170786&4294967295,_=I+(L<<5&4294967295|L>>>27),L=B+(I^A&(_^I))+V[6]+3225465664&4294967295,B=_+(L<<9&4294967295|L>>>23),L=A+(_^I&(B^_))+V[11]+643717713&4294967295,A=B+(L<<14&4294967295|L>>>18),L=I+(B^_&(A^B))+V[0]+3921069994&4294967295,I=A+(L<<20&4294967295|L>>>12),L=_+(A^B&(I^A))+V[5]+3593408605&4294967295,_=I+(L<<5&4294967295|L>>>27),L=B+(I^A&(_^I))+V[10]+38016083&4294967295,B=_+(L<<9&4294967295|L>>>23),L=A+(_^I&(B^_))+V[15]+3634488961&4294967295,A=B+(L<<14&4294967295|L>>>18),L=I+(B^_&(A^B))+V[4]+3889429448&4294967295,I=A+(L<<20&4294967295|L>>>12),L=_+(A^B&(I^A))+V[9]+568446438&4294967295,_=I+(L<<5&4294967295|L>>>27),L=B+(I^A&(_^I))+V[14]+3275163606&4294967295,B=_+(L<<9&4294967295|L>>>23),L=A+(_^I&(B^_))+V[3]+4107603335&4294967295,A=B+(L<<14&4294967295|L>>>18),L=I+(B^_&(A^B))+V[8]+1163531501&4294967295,I=A+(L<<20&4294967295|L>>>12),L=_+(A^B&(I^A))+V[13]+2850285829&4294967295,_=I+(L<<5&4294967295|L>>>27),L=B+(I^A&(_^I))+V[2]+4243563512&4294967295,B=_+(L<<9&4294967295|L>>>23),L=A+(_^I&(B^_))+V[7]+1735328473&4294967295,A=B+(L<<14&4294967295|L>>>18),L=I+(B^_&(A^B))+V[12]+2368359562&4294967295,I=A+(L<<20&4294967295|L>>>12),L=_+(I^A^B)+V[5]+4294588738&4294967295,_=I+(L<<4&4294967295|L>>>28),L=B+(_^I^A)+V[8]+2272392833&4294967295,B=_+(L<<11&4294967295|L>>>21),L=A+(B^_^I)+V[11]+1839030562&4294967295,A=B+(L<<16&4294967295|L>>>16),L=I+(A^B^_)+V[14]+4259657740&4294967295,I=A+(L<<23&4294967295|L>>>9),L=_+(I^A^B)+V[1]+2763975236&4294967295,_=I+(L<<4&4294967295|L>>>28),L=B+(_^I^A)+V[4]+1272893353&4294967295,B=_+(L<<11&4294967295|L>>>21),L=A+(B^_^I)+V[7]+4139469664&4294967295,A=B+(L<<16&4294967295|L>>>16),L=I+(A^B^_)+V[10]+3200236656&4294967295,I=A+(L<<23&4294967295|L>>>9),L=_+(I^A^B)+V[13]+681279174&4294967295,_=I+(L<<4&4294967295|L>>>28),L=B+(_^I^A)+V[0]+3936430074&4294967295,B=_+(L<<11&4294967295|L>>>21),L=A+(B^_^I)+V[3]+3572445317&4294967295,A=B+(L<<16&4294967295|L>>>16),L=I+(A^B^_)+V[6]+76029189&4294967295,I=A+(L<<23&4294967295|L>>>9),L=_+(I^A^B)+V[9]+3654602809&4294967295,_=I+(L<<4&4294967295|L>>>28),L=B+(_^I^A)+V[12]+3873151461&4294967295,B=_+(L<<11&4294967295|L>>>21),L=A+(B^_^I)+V[15]+530742520&4294967295,A=B+(L<<16&4294967295|L>>>16),L=I+(A^B^_)+V[2]+3299628645&4294967295,I=A+(L<<23&4294967295|L>>>9),L=_+(A^(I|~B))+V[0]+4096336452&4294967295,_=I+(L<<6&4294967295|L>>>26),L=B+(I^(_|~A))+V[7]+1126891415&4294967295,B=_+(L<<10&4294967295|L>>>22),L=A+(_^(B|~I))+V[14]+2878612391&4294967295,A=B+(L<<15&4294967295|L>>>17),L=I+(B^(A|~_))+V[5]+4237533241&4294967295,I=A+(L<<21&4294967295|L>>>11),L=_+(A^(I|~B))+V[12]+1700485571&4294967295,_=I+(L<<6&4294967295|L>>>26),L=B+(I^(_|~A))+V[3]+2399980690&4294967295,B=_+(L<<10&4294967295|L>>>22),L=A+(_^(B|~I))+V[10]+4293915773&4294967295,A=B+(L<<15&4294967295|L>>>17),L=I+(B^(A|~_))+V[1]+2240044497&4294967295,I=A+(L<<21&4294967295|L>>>11),L=_+(A^(I|~B))+V[8]+1873313359&4294967295,_=I+(L<<6&4294967295|L>>>26),L=B+(I^(_|~A))+V[15]+4264355552&4294967295,B=_+(L<<10&4294967295|L>>>22),L=A+(_^(B|~I))+V[6]+2734768916&4294967295,A=B+(L<<15&4294967295|L>>>17),L=I+(B^(A|~_))+V[13]+1309151649&4294967295,I=A+(L<<21&4294967295|L>>>11),L=_+(A^(I|~B))+V[4]+4149444226&4294967295,_=I+(L<<6&4294967295|L>>>26),L=B+(I^(_|~A))+V[11]+3174756917&4294967295,B=_+(L<<10&4294967295|L>>>22),L=A+(_^(B|~I))+V[2]+718787259&4294967295,A=B+(L<<15&4294967295|L>>>17),L=I+(B^(A|~_))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+_&4294967295,R.g[1]=R.g[1]+(A+(L<<21&4294967295|L>>>11))&4294967295,R.g[2]=R.g[2]+A&4294967295,R.g[3]=R.g[3]+B&4294967295}r.prototype.v=function(R,_){_===void 0&&(_=R.length);const I=_-this.blockSize,V=this.C;let A=this.h,B=0;for(;B<_;){if(A==0)for(;B<=I;)i(this,R,B),B+=this.blockSize;if(typeof R=="string"){for(;B<_;)if(V[A++]=R.charCodeAt(B++),A==this.blockSize){i(this,V),A=0;break}}else for(;B<_;)if(V[A++]=R[B++],A==this.blockSize){i(this,V),A=0;break}}this.h=A,this.o+=_},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var _=1;_<R.length-8;++_)R[_]=0;_=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=_&255,_/=256;for(this.v(R),R=Array(16),_=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)R[_++]=this.g[I]>>>V&255;return R};function o(R,_){var I=d;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=_(R)}function c(R,_){this.h=_;const I=[];let V=!0;for(let A=R.length-1;A>=0;A--){const B=R[A]|0;V&&B==_||(I[A]=B,V=!1)}this.g=I}var d={};function m(R){return-128<=R&&R<128?o(R,function(_){return new c([_|0],_<0?-1:0)}):new c([R|0],R<0?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return b;if(R<0)return E(h(-R));const _=[];let I=1;for(let V=0;R>=I;V++)_[V]=R/I|0,I*=4294967296;return new c(_,0)}function g(R,_){if(R.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(R.charAt(0)=="-")return E(g(R.substring(1),_));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(_,8));let V=b;for(let B=0;B<R.length;B+=8){var A=Math.min(8,R.length-B);const L=parseInt(R.substring(B,B+A),_);A<8?(A=h(Math.pow(_,A)),V=V.j(A).add(h(L))):(V=V.j(I),V=V.add(h(L)))}return V}var b=m(0),w=m(1),P=m(16777216);s=c.prototype,s.m=function(){if(k(this))return-E(this).m();let R=0,_=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);R+=(V>=0?V:4294967296+V)*_,_*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C(this))return"0";if(k(this))return"-"+E(this).toString(R);const _=h(Math.pow(R,6));var I=this;let V="";for(;;){const A=Z(I,_).g;I=F(I,A.j(_));let B=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=A,C(I))return B+V;for(;B.length<6;)B="0"+B;V=B+V}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function C(R){if(R.h!=0)return!1;for(let _=0;_<R.g.length;_++)if(R.g[_]!=0)return!1;return!0}function k(R){return R.h==-1}s.l=function(R){return R=F(this,R),k(R)?-1:C(R)?0:1};function E(R){const _=R.g.length,I=[];for(let V=0;V<_;V++)I[V]=~R.g[V];return new c(I,~R.h).add(w)}s.abs=function(){return k(this)?E(this):this},s.add=function(R){const _=Math.max(this.g.length,R.g.length),I=[];let V=0;for(let A=0;A<=_;A++){let B=V+(this.i(A)&65535)+(R.i(A)&65535),L=(B>>>16)+(this.i(A)>>>16)+(R.i(A)>>>16);V=L>>>16,B&=65535,L&=65535,I[A]=L<<16|B}return new c(I,I[I.length-1]&-2147483648?-1:0)};function F(R,_){return R.add(E(_))}s.j=function(R){if(C(this)||C(R))return b;if(k(this))return k(R)?E(this).j(E(R)):E(E(this).j(R));if(k(R))return E(this.j(E(R)));if(this.l(P)<0&&R.l(P)<0)return h(this.m()*R.m());const _=this.g.length+R.g.length,I=[];for(var V=0;V<2*_;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let A=0;A<R.g.length;A++){const B=this.i(V)>>>16,L=this.i(V)&65535,ne=R.i(A)>>>16,pe=R.i(A)&65535;I[2*V+2*A]+=L*pe,U(I,2*V+2*A),I[2*V+2*A+1]+=B*pe,U(I,2*V+2*A+1),I[2*V+2*A+1]+=L*ne,U(I,2*V+2*A+1),I[2*V+2*A+2]+=B*ne,U(I,2*V+2*A+2)}for(R=0;R<_;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=_;R<2*_;R++)I[R]=0;return new c(I,0)};function U(R,_){for(;(R[_]&65535)!=R[_];)R[_+1]+=R[_]>>>16,R[_]&=65535,_++}function q(R,_){this.g=R,this.h=_}function Z(R,_){if(C(_))throw Error("division by zero");if(C(R))return new q(b,b);if(k(R))return _=Z(E(R),_),new q(E(_.g),E(_.h));if(k(_))return _=Z(R,E(_)),new q(E(_.g),_.h);if(R.g.length>30){if(k(R)||k(_))throw Error("slowDivide_ only works with positive integers.");for(var I=w,V=_;V.l(R)<=0;)I=W(I),V=W(V);var A=$(I,1),B=$(V,1);for(V=$(V,2),I=$(I,2);!C(V);){var L=B.add(V);L.l(R)<=0&&(A=A.add(I),B=L),V=$(V,1),I=$(I,1)}return _=F(R,A.j(_)),new q(A,_)}for(A=b;R.l(_)>=0;){for(I=Math.max(1,Math.floor(R.m()/_.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),B=h(I),L=B.j(_);k(L)||L.l(R)>0;)I-=V,B=h(I),L=B.j(_);C(B)&&(B=w),A=A.add(B),R=F(R,L)}return new q(A,R)}s.B=function(R){return Z(this,R).h},s.and=function(R){const _=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<_;V++)I[V]=this.i(V)&R.i(V);return new c(I,this.h&R.h)},s.or=function(R){const _=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<_;V++)I[V]=this.i(V)|R.i(V);return new c(I,this.h|R.h)},s.xor=function(R){const _=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<_;V++)I[V]=this.i(V)^R.i(V);return new c(I,this.h^R.h)};function W(R){const _=R.g.length+1,I=[];for(let V=0;V<_;V++)I[V]=R.i(V)<<1|R.i(V-1)>>>31;return new c(I,R.h)}function $(R,_){const I=_>>5;_%=32;const V=R.g.length-I,A=[];for(let B=0;B<V;B++)A[B]=_>0?R.i(B+I)>>>_|R.i(B+I+1)<<32-_:R.i(B+I);return new c(A,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Zj=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=g,za=c}).apply(typeof lv<"u"?lv:typeof self<"u"?self:typeof window<"u"?window:{});var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qj,rd,Xj,Sh,fg,e1,t1,n1;(function(){var s,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof lh=="object"&&lh];for(var j=0;j<p.length;++j){var T=p[j];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(p,j){if(j)e:{var T=r;p=p.split(".");for(var O=0;O<p.length-1;O++){var oe=p[O];if(!(oe in T))break e;T=T[oe]}p=p[p.length-1],O=T[p],j=j(O),j!=O&&j!=null&&e(T,p,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(p){return p||function(j){var T=[],O;for(O in j)Object.prototype.hasOwnProperty.call(j,O)&&T.push([O,j[O]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(p){var j=typeof p;return j=="object"&&p!=null||j=="function"}function m(p,j,T){return p.call.apply(p.bind,arguments)}function h(p,j,T){return h=m,h.apply(null,arguments)}function g(p,j){var T=Array.prototype.slice.call(arguments,1);return function(){var O=T.slice();return O.push.apply(O,arguments),p.apply(this,O)}}function b(p,j){function T(){}T.prototype=j.prototype,p.Z=j.prototype,p.prototype=new T,p.prototype.constructor=p,p.Ob=function(O,oe,me){for(var ze=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)ze[wt-2]=arguments[wt];return j.prototype[oe].apply(O,ze)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function P(p){const j=p.length;if(j>0){const T=Array(j);for(let O=0;O<j;O++)T[O]=p[O];return T}return[]}function C(p,j){for(let O=1;O<arguments.length;O++){const oe=arguments[O];var T=typeof oe;if(T=T!="object"?T:oe?Array.isArray(oe)?"array":T:"null",T=="array"||T=="object"&&typeof oe.length=="number"){T=p.length||0;const me=oe.length||0;p.length=T+me;for(let ze=0;ze<me;ze++)p[T+ze]=oe[ze]}else p.push(oe)}}class k{constructor(j,T){this.i=j,this.j=T,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function E(p){c.setTimeout(()=>{throw p},0)}function F(){var p=R;let j=null;return p.g&&(j=p.g,p.g=p.g.next,p.g||(p.h=null),j.next=null),j}class U{constructor(){this.h=this.g=null}add(j,T){const O=q.get();O.set(j,T),this.h?this.h.next=O:this.g=O,this.h=O}}var q=new k(()=>new Z,p=>p.reset());class Z{constructor(){this.next=this.g=this.h=null}set(j,T){this.h=j,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let W,$=!1,R=new U,_=()=>{const p=Promise.resolve(void 0);W=()=>{p.then(I)}};function I(){for(var p;p=F();){try{p.h.call(p.g)}catch(T){E(T)}var j=q;j.j(p),j.h<100&&(j.h++,p.next=j.g,j.g=p)}$=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(p,j){this.type=p,this.g=this.target=j,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,j=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const T=()=>{};c.addEventListener("test",T,j),c.removeEventListener("test",T,j)}catch{}return p})();function L(p){return/^[\s\xa0]*$/.test(p)}function ne(p,j){A.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,j)}b(ne,A),ne.prototype.init=function(p,j){const T=this.type=p.type,O=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=j,j=p.relatedTarget,j||(T=="mouseover"?j=p.fromElement:T=="mouseout"&&(j=p.toElement)),this.relatedTarget=j,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var pe="closure_listenable_"+(Math.random()*1e6|0),Ne=0;function Te(p,j,T,O,oe){this.listener=p,this.proxy=null,this.src=j,this.type=T,this.capture=!!O,this.ha=oe,this.key=++Ne,this.da=this.fa=!1}function le(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function fe(p,j,T){for(const O in p)j.call(T,p[O],O,p)}function ve(p,j){for(const T in p)j.call(void 0,p[T],T,p)}function J(p){const j={};for(const T in p)j[T]=p[T];return j}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(p,j){let T,O;for(let oe=1;oe<arguments.length;oe++){O=arguments[oe];for(T in O)p[T]=O[T];for(let me=0;me<K.length;me++)T=K[me],Object.prototype.hasOwnProperty.call(O,T)&&(p[T]=O[T])}}function ue(p){this.src=p,this.g={},this.h=0}ue.prototype.add=function(p,j,T,O,oe){const me=p.toString();p=this.g[me],p||(p=this.g[me]=[],this.h++);const ze=se(p,j,O,oe);return ze>-1?(j=p[ze],T||(j.fa=!1)):(j=new Te(j,this.src,me,!!O,oe),j.fa=T,p.push(j)),j};function G(p,j){const T=j.type;if(T in p.g){var O=p.g[T],oe=Array.prototype.indexOf.call(O,j,void 0),me;(me=oe>=0)&&Array.prototype.splice.call(O,oe,1),me&&(le(j),p.g[T].length==0&&(delete p.g[T],p.h--))}}function se(p,j,T,O){for(let oe=0;oe<p.length;++oe){const me=p[oe];if(!me.da&&me.listener==j&&me.capture==!!T&&me.ha==O)return oe}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),Ae={};function He(p,j,T,O,oe){if(Array.isArray(j)){for(let me=0;me<j.length;me++)He(p,j[me],T,O,oe);return null}return T=$e(T),p&&p[pe]?p.J(j,T,d(O)?!!O.capture:!1,oe):Be(p,j,T,!1,O,oe)}function Be(p,j,T,O,oe,me){if(!j)throw Error("Invalid event type");const ze=d(oe)?!!oe.capture:!!oe;let wt=z(p);if(wt||(p[Ie]=wt=new ue(p)),T=wt.add(j,T,O,ze,me),T.proxy)return T;if(O=xt(),T.proxy=O,O.src=p,O.listener=T,p.addEventListener)B||(oe=ze),oe===void 0&&(oe=!1),p.addEventListener(j.toString(),O,oe);else if(p.attachEvent)p.attachEvent(at(j.toString()),O);else if(p.addListener&&p.removeListener)p.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return T}function xt(){function p(T){return j.call(p.src,p.listener,T)}const j=bt;return p}function we(p,j,T,O,oe){if(Array.isArray(j))for(var me=0;me<j.length;me++)we(p,j[me],T,O,oe);else O=d(O)?!!O.capture:!!O,T=$e(T),p&&p[pe]?(p=p.i,me=String(j).toString(),me in p.g&&(j=p.g[me],T=se(j,T,O,oe),T>-1&&(le(j[T]),Array.prototype.splice.call(j,T,1),j.length==0&&(delete p.g[me],p.h--)))):p&&(p=z(p))&&(j=p.g[j.toString()],p=-1,j&&(p=se(j,T,O,oe)),(T=p>-1?j[p]:null)&&We(T))}function We(p){if(typeof p!="number"&&p&&!p.da){var j=p.src;if(j&&j[pe])G(j.i,p);else{var T=p.type,O=p.proxy;j.removeEventListener?j.removeEventListener(T,O,p.capture):j.detachEvent?j.detachEvent(at(T),O):j.addListener&&j.removeListener&&j.removeListener(O),(T=z(j))?(G(T,p),T.h==0&&(T.src=null,j[Ie]=null)):le(p)}}}function at(p){return p in Ae?Ae[p]:Ae[p]="on"+p}function bt(p,j){if(p.da)p=!0;else{j=new ne(j,this);const T=p.listener,O=p.ha||p.src;p.fa&&We(p),p=T.call(O,j)}return p}function z(p){return p=p[Ie],p instanceof ue?p:null}var re="__closure_events_fn_"+(Math.random()*1e9>>>0);function $e(p){return typeof p=="function"?p:(p[re]||(p[re]=function(j){return p.handleEvent(j)}),p[re])}function _e(){V.call(this),this.i=new ue(this),this.M=this,this.G=null}b(_e,V),_e.prototype[pe]=!0,_e.prototype.removeEventListener=function(p,j,T,O){we(this,p,j,T,O)};function qe(p,j){var T,O=p.G;if(O)for(T=[];O;O=O.G)T.push(O);if(p=p.M,O=j.type||j,typeof j=="string")j=new A(j,p);else if(j instanceof A)j.target=j.target||p;else{var oe=j;j=new A(O,p),X(j,oe)}oe=!0;let me,ze;if(T)for(ze=T.length-1;ze>=0;ze--)me=j.g=T[ze],oe=Vt(me,O,!0,j)&&oe;if(me=j.g=p,oe=Vt(me,O,!0,j)&&oe,oe=Vt(me,O,!1,j)&&oe,T)for(ze=0;ze<T.length;ze++)me=j.g=T[ze],oe=Vt(me,O,!1,j)&&oe}_e.prototype.N=function(){if(_e.Z.N.call(this),this.i){var p=this.i;for(const j in p.g){const T=p.g[j];for(let O=0;O<T.length;O++)le(T[O]);delete p.g[j],p.h--}}this.G=null},_e.prototype.J=function(p,j,T,O){return this.i.add(String(p),j,!1,T,O)},_e.prototype.K=function(p,j,T,O){return this.i.add(String(p),j,!0,T,O)};function Vt(p,j,T,O){if(j=p.i.g[String(j)],!j)return!0;j=j.concat();let oe=!0;for(let me=0;me<j.length;++me){const ze=j[me];if(ze&&!ze.da&&ze.capture==T){const wt=ze.listener,En=ze.ha||ze.src;ze.fa&&G(p.i,ze),oe=wt.call(En,O)!==!1&&oe}}return oe&&!O.defaultPrevented}function xe(p,j){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=h(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:c.setTimeout(p,j||0)}function mt(p){p.g=xe(()=>{p.g=null,p.i&&(p.i=!1,mt(p))},p.l);const j=p.h;p.h=null,p.m.apply(null,j)}class kt extends V{constructor(j,T){super(),this.m=j,this.l=T,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:mt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(p){V.call(this),this.h=p,this.g={}}b(Dt,V);var pt=[];function $t(p){fe(p.g,function(j,T){this.g.hasOwnProperty(T)&&We(j)},p),p.g={}}Dt.prototype.N=function(){Dt.Z.N.call(this),$t(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qt=c.JSON.stringify,vt=c.JSON.parse,tn=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function Re(){}function In(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Is(){A.call(this,"d")}b(Is,A);function ds(){A.call(this,"c")}b(ds,A);var es={},mr=null;function ts(){return mr=mr||new _e}es.Ia="serverreachability";function Ns(p){A.call(this,es.Ia,p)}b(Ns,A);function us(p){const j=ts();qe(j,new Ns(j))}es.STAT_EVENT="statevent";function fn(p,j){A.call(this,es.STAT_EVENT,p),this.stat=j}b(fn,A);function Rt(p){const j=ts();qe(j,new fn(j,p))}es.Ja="timingevent";function je(p,j){A.call(this,es.Ja,p),this.size=j}b(je,A);function tt(p,j){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},j)}function Gt(){this.g=!0}Gt.prototype.ua=function(){this.g=!1};function gn(p,j,T,O,oe,me){p.info(function(){if(p.g)if(me){var ze="",wt=me.split("&");for(let Xt=0;Xt<wt.length;Xt++){var En=wt[Xt].split("=");if(En.length>1){const Rn=En[0];En=En[1];const tr=Rn.split("_");ze=tr.length>=2&&tr[1]=="type"?ze+(Rn+"="+En+"&"):ze+(Rn+"=redacted&")}}}else ze=null;else ze=me;return"XMLHTTP REQ ("+O+") [attempt "+oe+"]: "+j+`
`+T+`
`+ze})}function Wn(p,j,T,O,oe,me,ze){p.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+oe+"]: "+j+`
`+T+`
`+me+" "+ze})}function ns(p,j,T,O){p.info(function(){return"XMLHTTP TEXT ("+j+"): "+pr(p,T)+(O?" "+O:"")})}function ea(p,j){p.info(function(){return"TIMEOUT: "+j})}Gt.prototype.info=function(){};function pr(p,j){if(!p.g)return j;if(!j)return null;try{const me=JSON.parse(j);if(me){for(p=0;p<me.length;p++)if(Array.isArray(me[p])){var T=me[p];if(!(T.length<2)){var O=T[1];if(Array.isArray(O)&&!(O.length<1)){var oe=O[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(let ze=1;ze<O.length;ze++)O[ze]=""}}}}return Qt(me)}catch{return j}}var fr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ys={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ta;function Zs(){}b(Zs,Re),Zs.prototype.g=function(){return new XMLHttpRequest},ta=new Zs;function Rs(p){return encodeURIComponent(String(p))}function Hr(p){var j=1;p=p.split(":");const T=[];for(;j>0&&p.length;)T.push(p.shift()),j--;return p.length&&T.push(p.join(":")),T}function Q(p,j,T,O){this.j=p,this.i=j,this.l=T,this.S=O||1,this.V=new Dt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ee}function ee(){this.i=null,this.g="",this.h=!1}var ie={},ge={};function Me(p,j,T){p.M=1,p.A=_i(Tt(j)),p.u=T,p.R=!0,Xe(p,null)}function Xe(p,j){p.F=Date.now(),ot(p),p.B=Tt(p.A);var T=p.B,O=p.S;Array.isArray(O)||(O=[String(O)]),jc(T.i,"t",O),p.C=0,T=p.j.L,p.h=new ee,p.g=uu(p.j,T?j:null,!p.u),p.P>0&&(p.O=new kt(h(p.Y,p,p.g),p.P)),j=p.V,T=p.g,O=p.ba;var oe="readystatechange";Array.isArray(oe)||(oe&&(pt[0]=oe.toString()),oe=pt);for(let me=0;me<oe.length;me++){const ze=He(T,oe[me],O||j.handleEvent,!1,j.h||j);if(!ze)break;j.g[ze.key]=ze}j=p.J?J(p.J):{},p.u?(p.v||(p.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,j)):(p.v="GET",p.g.ea(p.B,p.v,null,j)),us(),gn(p.i,p.v,p.B,p.l,p.S,p.u)}Q.prototype.ba=function(p){p=p.target;const j=this.O;j&&Qr(p)==3?j.j():this.Y(p)},Q.prototype.Y=function(p){try{if(p==this.g)e:{const wt=Qr(this.g),En=this.g.ya(),Xt=this.g.ca();if(!(wt<3)&&(wt!=3||this.g&&(this.h.h||this.g.la()||cu(this.g)))){this.K||wt!=4||En==7||(En==8||Xt<=0?us(3):us(2)),Jt(this);var j=this.g.ca();this.X=j;var T=rt(this);if(this.o=j==200,Wn(this.i,this.v,this.B,this.l,this.S,wt,j),this.o){if(this.U&&!this.L){t:{if(this.g){var O,oe=this.g;if((O=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(O)){var me=O;break t}}me=null}if(p=me)ns(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ut(this,p);else{this.o=!1,this.m=3,Rt(12),wn(this),un(this);break e}}if(this.R){p=!0;let Rn;for(;!this.K&&this.C<T.length;)if(Rn=Fe(this,T),Rn==ge){wt==4&&(this.m=4,Rt(14),p=!1),ns(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==ie){this.m=4,Rt(15),ns(this.i,this.l,T,"[Invalid Chunk]"),p=!1;break}else ns(this.i,this.l,Rn,null),Ut(this,Rn);if(nt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||T.length!=0||this.h.h||(this.m=1,Rt(16),p=!1),this.o=this.o&&p,!p)ns(this.i,this.l,T,"[Invalid Chunked Response]"),wn(this),un(this);else if(T.length>0&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.aa&&!ze.P&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),mo(ze),ze.P=!0,Rt(11))}}else ns(this.i,this.l,T,null),Ut(this,T);wt==4&&wn(this),this.o&&!this.K&&(wt==4?ol(this.j,this):(this.o=!1,ot(this)))}else _c(this.g),j==400&&T.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),wn(this),un(this)}}}catch{}finally{}};function rt(p){if(!nt(p))return p.g.la();const j=cu(p.g);if(j==="")return"";let T="";const O=j.length,oe=Qr(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return wn(p),un(p),"";p.h.i=new c.TextDecoder}for(let me=0;me<O;me++)p.h.h=!0,T+=p.h.i.decode(j[me],{stream:!(oe&&me==O-1)});return j.length=0,p.h.g+=T,p.C=0,p.h.g}function nt(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Fe(p,j){var T=p.C,O=j.indexOf(`
`,T);return O==-1?ge:(T=Number(j.substring(T,O)),isNaN(T)?ie:(O+=1,O+T>j.length?ge:(j=j.slice(O,O+T),p.C=O+T,j)))}Q.prototype.cancel=function(){this.K=!0,wn(this)};function ot(p){p.T=Date.now()+p.H,Et(p,p.H)}function Et(p,j){if(p.D!=null)throw Error("WatchDog timer not null");p.D=tt(h(p.aa,p),j)}function Jt(p){p.D&&(c.clearTimeout(p.D),p.D=null)}Q.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(ea(this.i,this.B),this.M!=2&&(us(),Rt(17)),wn(this),this.m=2,un(this)):Et(this,this.T-p)};function un(p){p.j.I==0||p.K||ol(p.j,p)}function wn(p){Jt(p);var j=p.O;j&&typeof j.dispose=="function"&&j.dispose(),p.O=null,$t(p.V),p.g&&(j=p.g,p.g=null,j.abort(),j.dispose())}function Ut(p,j){try{var T=p.j;if(T.I!=0&&(T.g==p||M(T.h,p))){if(!p.L&&M(T.h,p)&&T.I==3){try{var O=T.Ba.g.parse(j)}catch{O=null}if(Array.isArray(O)&&O.length==3){var oe=O;if(oe[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<p.F)al(T),Xs(T);else break e;ti(T),Rt(18)}}else T.xa=oe[1],0<T.xa-T.K&&oe[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=tt(h(T.Va,T),6e3));Nn(T.h)<=1&&T.ta&&(T.ta=void 0)}else er(T,11)}else if((p.L||T.g==p)&&al(T),!L(j))for(oe=T.Ba.g.parse(j),j=0;j<oe.length;j++){let Xt=oe[j];const Rn=Xt[0];if(!(Rn<=T.K))if(T.K=Rn,Xt=Xt[1],T.I==2)if(Xt[0]=="c"){T.M=Xt[1],T.ba=Xt[2];const tr=Xt[3];tr!=null&&(T.ka=tr,T.j.info("VER="+T.ka));const Pi=Xt[4];Pi!=null&&(T.za=Pi,T.j.info("SVER="+T.za));const ni=Xt[5];ni!=null&&typeof ni=="number"&&ni>0&&(O=1.5*ni,T.O=O,T.j.info("backChannelRequestTimeoutMs_="+O)),O=T;const si=p.g;if(si){const dl=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dl){var me=O.h;me.g||dl.indexOf("spdy")==-1&&dl.indexOf("quic")==-1&&dl.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(ce(me,me.h),me.h=null))}if(O.G){const Ec=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;Ec&&(O.wa=Ec,Wt(O.J,O.G,Ec))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-p.F,T.j.info("Handshake RTT: "+T.T+"ms")),O=T;var ze=p;if(O.na=kc(O,O.L?O.ba:null,O.W),ze.L){Ue(O.h,ze);var wt=ze,En=O.O;En&&(wt.H=En),wt.D&&(Jt(wt),ot(wt)),O.g=ze}else hs(O);T.i.length>0&&Ti(T)}else Xt[0]!="stop"&&Xt[0]!="close"||er(T,7);else T.I==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?er(T,7):rl(T):Xt[0]!="noop"&&T.l&&T.l.qa(Xt),T.A=0)}}us(4)}catch{}}var on=class{constructor(p,j){this.g=p,this.map=j}};function Ds(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Si(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Nn(p){return p.h?1:p.g?p.g.size:0}function M(p,j){return p.h?p.h==j:p.g?p.g.has(j):!1}function ce(p,j){p.g?p.g.add(j):p.h=j}function Ue(p,j){p.h&&p.h==j?p.h=null:p.g&&p.g.has(j)&&p.g.delete(j)}Ds.prototype.cancel=function(){if(this.i=it(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function it(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let j=p.i;for(const T of p.g.values())j=j.concat(T.G);return j}return P(p.i)}var Ve=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ye(p,j){if(p){p=p.split("&");for(let T=0;T<p.length;T++){const O=p[T].indexOf("=");let oe,me=null;O>=0?(oe=p[T].substring(0,O),me=p[T].substring(O+1)):oe=p[T],j(oe,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function St(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;p instanceof St?(this.l=p.l,Wr(this,p.j),this.o=p.o,this.g=p.g,gr(this,p.u),this.h=p.h,na(this,Sc(p.i)),this.m=p.m):p&&(j=String(p).match(Ve))?(this.l=!1,Wr(this,j[1]||"",!0),this.o=oo(j[2]||""),this.g=oo(j[3]||"",!0),gr(this,j[4]),this.h=oo(j[5]||"",!0),na(this,j[6]||"",!0),this.m=oo(j[7]||"")):(this.l=!1,this.i=new Ot(null,this.l))}St.prototype.toString=function(){const p=[];var j=this.j;j&&p.push(lo(j,yc,!0),":");var T=this.g;return(T||j=="file")&&(p.push("//"),(j=this.o)&&p.push(lo(j,yc,!0),"@"),p.push(Rs(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&p.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&p.push("/"),p.push(lo(T,T.charAt(0)=="/"?co:bc,!0))),(T=this.i.toString())&&p.push("?",T),(T=this.m)&&p.push("#",lo(T,vc)),p.join("")},St.prototype.resolve=function(p){const j=Tt(this);let T=!!p.j;T?Wr(j,p.j):T=!!p.o,T?j.o=p.o:T=!!p.g,T?j.g=p.g:T=p.u!=null;var O=p.h;if(T)gr(j,p.u);else if(T=!!p.h){if(O.charAt(0)!="/")if(this.g&&!this.h)O="/"+O;else{var oe=j.h.lastIndexOf("/");oe!=-1&&(O=j.h.slice(0,oe+1)+O)}if(oe=O,oe==".."||oe==".")O="";else if(oe.indexOf("./")!=-1||oe.indexOf("/.")!=-1){O=oe.lastIndexOf("/",0)==0,oe=oe.split("/");const me=[];for(let ze=0;ze<oe.length;){const wt=oe[ze++];wt=="."?O&&ze==oe.length&&me.push(""):wt==".."?((me.length>1||me.length==1&&me[0]!="")&&me.pop(),O&&ze==oe.length&&me.push("")):(me.push(wt),O=!0)}O=me.join("/")}else O=oe}return T?j.h=O:T=p.i.toString()!=="",T?na(j,Sc(p.i)):T=!!p.m,T&&(j.m=p.m),j};function Tt(p){return new St(p)}function Wr(p,j,T){p.j=T?oo(j,!0):j,p.j&&(p.j=p.j.replace(/:$/,""))}function gr(p,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);p.u=j}else p.u=null}function na(p,j,T){j instanceof Ot?(p.i=j,tl(p.i,p.l)):(T||(j=lo(j,ip)),p.i=new Ot(j,p.l))}function Wt(p,j,T){p.i.set(j,T)}function _i(p){return Wt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function oo(p,j){return p?j?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function lo(p,j,T){return typeof p=="string"?(p=encodeURI(p).replace(j,xc),T&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function xc(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var yc=/[#\/\?@]/g,bc=/[#\?:]/g,co=/[#\?]/g,ip=/[#\?@]/g,vc=/#/g;function Ot(p,j){this.h=this.g=null,this.i=p||null,this.j=!!j}function Kr(p){p.g||(p.g=new Map,p.h=0,p.i&&Ye(p.i,function(j,T){p.add(decodeURIComponent(j.replace(/\+/g," ")),T)}))}s=Ot.prototype,s.add=function(p,j){Kr(this),this.i=null,p=Jr(this,p);let T=this.g.get(p);return T||this.g.set(p,T=[]),T.push(j),this.h+=1,this};function wc(p,j){Kr(p),j=Jr(p,j),p.g.has(j)&&(p.i=null,p.h-=p.g.get(j).length,p.g.delete(j))}function el(p,j){return Kr(p),j=Jr(p,j),p.g.has(j)}s.forEach=function(p,j){Kr(this),this.g.forEach(function(T,O){T.forEach(function(oe){p.call(j,oe,O,this)},this)},this)};function Nc(p,j){Kr(p);let T=[];if(typeof j=="string")el(p,j)&&(T=T.concat(p.g.get(Jr(p,j))));else for(p=Array.from(p.g.values()),j=0;j<p.length;j++)T=T.concat(p[j]);return T}s.set=function(p,j){return Kr(this),this.i=null,p=Jr(this,p),el(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[j]),this.h+=1,this},s.get=function(p,j){return p?(p=Nc(this,p),p.length>0?String(p[0]):j):j};function jc(p,j,T){wc(p,j),T.length>0&&(p.i=null,p.g.set(Jr(p,j),P(T)),p.h+=T.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],j=Array.from(this.g.keys());for(let O=0;O<j.length;O++){var T=j[O];const oe=Rs(T);T=Nc(this,T);for(let me=0;me<T.length;me++){let ze=oe;T[me]!==""&&(ze+="="+Rs(T[me])),p.push(ze)}}return this.i=p.join("&")};function Sc(p){const j=new Ot;return j.i=p.i,p.g&&(j.g=new Map(p.g),j.h=p.h),j}function Jr(p,j){return j=String(j),p.j&&(j=j.toLowerCase()),j}function tl(p,j){j&&!p.j&&(Kr(p),p.i=null,p.g.forEach(function(T,O){const oe=O.toLowerCase();O!=oe&&(wc(this,O),jc(this,oe,T))},p)),p.j=j}function Yr(p,j){const T=new Gt;if(c.Image){const O=new Image;O.onload=g(ss,T,"TestLoadImage: loaded",!0,j,O),O.onerror=g(ss,T,"TestLoadImage: error",!1,j,O),O.onabort=g(ss,T,"TestLoadImage: abort",!1,j,O),O.ontimeout=g(ss,T,"TestLoadImage: timeout",!1,j,O),c.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=p}else j(!1)}function Zr(p,j){const T=new Gt,O=new AbortController,oe=setTimeout(()=>{O.abort(),ss(T,"TestPingServer: timeout",!1,j)},1e4);fetch(p,{signal:O.signal}).then(me=>{clearTimeout(oe),me.ok?ss(T,"TestPingServer: ok",!0,j):ss(T,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(oe),ss(T,"TestPingServer: error",!1,j)})}function ss(p,j,T,O,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),O(T)}catch{}}function uo(){this.g=new tn}function Ci(p){this.i=p.Sb||null,this.h=p.ab||!1}b(Ci,Re),Ci.prototype.g=function(){return new Qs(this.i,this.h)};function Qs(p,j){_e.call(this),this.H=p,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Qs,_e),s=Qs.prototype,s.open=function(p,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=j,this.readyState=1,Tr(this)},s.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(j.body=p),(this.H||c).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,sa(this)),this.readyState=0},s.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;au(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function au(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}s.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var j=p.value?p.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!p.done}))&&(this.response=this.responseText+=j)}p.done?sa(this):Tr(this),this.readyState==3&&au(this)}},s.Oa=function(p){this.g&&(this.response=this.responseText=p,sa(this))},s.Na=function(p){this.g&&(this.response=p,sa(this))},s.ga=function(){this.g&&sa(this)};function sa(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Tr(p)}s.setRequestHeader=function(p,j){this.A.append(p,j)},s.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],j=this.h.entries();for(var T=j.next();!T.done;)T=T.value,p.push(T[0]+": "+T[1]),T=j.next();return p.join(`\r
`)};function Tr(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function ou(p){let j="";return fe(p,function(T,O){j+=O,j+=":",j+=T,j+=`\r
`}),j}function nl(p,j,T){e:{for(O in T){var O=!1;break e}O=!0}O||(T=ou(T),typeof p=="string"?T!=null&&Rs(T):Wt(p,j,T))}function nn(p){_e.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(nn,_e);var lu=/^https?$/i,ap=["POST","PUT"];s=nn.prototype,s.Fa=function(p){this.H=p},s.ea=function(p,j,T,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);j=j?j.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ta.g(),this.g.onreadystatechange=w(h(this.Ca,this));try{this.B=!0,this.g.open(j,String(p),!0),this.B=!1}catch(me){ra(this,me);return}if(p=T||"",T=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var oe in O)T.set(oe,O[oe]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const me of O.keys())T.set(me,O.get(me));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(T.keys()).find(me=>me.toLowerCase()=="content-type"),oe=c.FormData&&p instanceof c.FormData,!(Array.prototype.indexOf.call(ap,j,void 0)>=0)||O||oe||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,ze]of T)this.g.setRequestHeader(me,ze);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(me){ra(this,me)}};function ra(p,j){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=j,p.o=5,ia(p),Ei(p)}function ia(p){p.A||(p.A=!0,qe(p,"complete"),qe(p,"error"))}s.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,qe(this,"complete"),qe(this,"abort"),Ei(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ei(this,!0)),nn.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?ki(this):this.Xa())},s.Xa=function(){ki(this)};function ki(p){if(p.h&&typeof o<"u"){if(p.v&&Qr(p)==4)setTimeout(p.Ca.bind(p),0);else if(qe(p,"readystatechange"),Qr(p)==4){p.h=!1;try{const me=p.ca();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var T;if(!(T=j)){var O;if(O=me===0){let ze=String(p.D).match(Ve)[1]||null;!ze&&c.self&&c.self.location&&(ze=c.self.location.protocol.slice(0,-1)),O=!lu.test(ze?ze.toLowerCase():"")}T=O}if(T)qe(p,"complete"),qe(p,"success");else{p.o=6;try{var oe=Qr(p)>2?p.g.statusText:""}catch{oe=""}p.l=oe+" ["+p.ca()+"]",ia(p)}}finally{Ei(p)}}}}function Ei(p,j){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const T=p.g;p.g=null,j||qe(p,"ready");try{T.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Qr(p){return p.g?p.g.readyState:0}s.ca=function(){try{return Qr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(p){if(this.g){var j=this.g.responseText;return p&&j.indexOf(p)==0&&(j=j.substring(p.length)),vt(j)}};function cu(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function _c(p){const j={};p=(p.g&&Qr(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<p.length;O++){if(L(p[O]))continue;var T=Hr(p[O]);const oe=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const me=j[oe]||[];j[oe]=me,me.push(T)}ve(j,function(O){return O.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xr(p,j,T){return T&&T.internalChannelParams&&T.internalChannelParams[p]||j}function sl(p){this.za=0,this.i=[],this.j=new Gt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xr("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xr("baseRetryDelayMs",5e3,p),this.Za=Xr("retryDelaySeedMs",1e4,p),this.Ta=Xr("forwardChannelMaxRetries",2,p),this.va=Xr("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ds(p&&p.concurrentRequestLimit),this.Ba=new uo,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=sl.prototype,s.ka=8,s.I=1,s.connect=function(p,j,T,O){Rt(0),this.W=p,this.H=j||{},T&&O!==void 0&&(this.H.OSID=T,this.H.OAID=O),this.F=this.X,this.J=kc(this,null,this.W),Ti(this)};function rl(p){if(il(p),p.I==3){var j=p.V++,T=Tt(p.J);if(Wt(T,"SID",p.M),Wt(T,"RID",j),Wt(T,"TYPE","terminate"),ei(p,T),j=new Q(p,p.j,j),j.M=2,j.A=_i(Tt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(j.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=j.A,T=!0),T||(j.g=uu(j.j,null),j.g.ea(j.A)),j.F=Date.now(),ot(j)}po(p)}function Xs(p){p.g&&(mo(p),p.g.cancel(),p.g=null)}function il(p){Xs(p),p.v&&(c.clearTimeout(p.v),p.v=null),al(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&c.clearTimeout(p.m),p.m=null)}function Ti(p){if(!Si(p.h)&&!p.m){p.m=!0;var j=p.Ea;W||_(),$||(W(),$=!0),R.add(j,p),p.D=0}}function du(p,j){return Nn(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=j.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=tt(h(p.Ea,p,j),ll(p,p.D)),p.D++,!0)}s.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const oe=new Q(this,this.j,p);let me=this.o;if(this.U&&(me?(me=J(me),X(me,this.U)):me=this.U),this.u!==null||this.R||(oe.J=me,me=null),this.S)e:{for(var j=0,T=0;T<this.i.length;T++){t:{var O=this.i[T];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(j+=O,j>4096){j=T;break e}if(j===4096||T===this.i.length-1){j=T+1;break e}}j=1e3}else j=1e3;j=Cc(this,oe,j),T=Tt(this.J),Wt(T,"RID",p),Wt(T,"CVER",22),this.G&&Wt(T,"X-HTTP-Session-Id",this.G),ei(this,T),me&&(this.R?j="headers="+Rs(ou(me))+"&"+j:this.u&&nl(T,this.u,me)),ce(this.h,oe),this.Ra&&Wt(T,"TYPE","init"),this.S?(Wt(T,"$req",j),Wt(T,"SID","null"),oe.U=!0,Me(oe,T,null)):Me(oe,T,j),this.I=2}}else this.I==3&&(p?ho(this,p):this.i.length==0||Si(this.h)||ho(this))};function ho(p,j){var T;j?T=j.l:T=p.V++;const O=Tt(p.J);Wt(O,"SID",p.M),Wt(O,"RID",T),Wt(O,"AID",p.K),ei(p,O),p.u&&p.o&&nl(O,p.u,p.o),T=new Q(p,p.j,T,p.D+1),p.u===null&&(T.J=p.o),j&&(p.i=j.G.concat(p.i)),j=Cc(p,T,1e3),T.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),ce(p.h,T),Me(T,O,j)}function ei(p,j){p.H&&fe(p.H,function(T,O){Wt(j,O,T)}),p.l&&fe({},function(T,O){Wt(j,O,T)})}function Cc(p,j,T){T=Math.min(p.i.length,T);const O=p.l?h(p.l.Ka,p.l,p):null;e:{var oe=p.i;let wt=-1;for(;;){const En=["count="+T];wt==-1?T>0?(wt=oe[0].g,En.push("ofs="+wt)):wt=0:En.push("ofs="+wt);let Xt=!0;for(let Rn=0;Rn<T;Rn++){var me=oe[Rn].g;const tr=oe[Rn].map;if(me-=wt,me<0)wt=Math.max(0,oe[Rn].g-100),Xt=!1;else try{me="req"+me+"_"||"";try{var ze=tr instanceof Map?tr:Object.entries(tr);for(const[Pi,ni]of ze){let si=ni;d(ni)&&(si=Qt(ni)),En.push(me+Pi+"="+encodeURIComponent(si))}}catch(Pi){throw En.push(me+"type="+encodeURIComponent("_badmap")),Pi}}catch{O&&O(tr)}}if(Xt){ze=En.join("&");break e}}ze=void 0}return p=p.i.splice(0,T),j.G=p,ze}function hs(p){if(!p.g&&!p.v){p.Y=1;var j=p.Da;W||_(),$||(W(),$=!0),R.add(j,p),p.A=0}}function ti(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=tt(h(p.Da,p),ll(p,p.A)),p.A++,!0)}s.Da=function(){if(this.v=null,aa(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=tt(h(this.Wa,this),p)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Xs(this),aa(this))};function mo(p){p.B!=null&&(c.clearTimeout(p.B),p.B=null)}function aa(p){p.g=new Q(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var j=Tt(p.na);Wt(j,"RID","rpc"),Wt(j,"SID",p.M),Wt(j,"AID",p.K),Wt(j,"CI",p.F?"0":"1"),!p.F&&p.ia&&Wt(j,"TO",p.ia),Wt(j,"TYPE","xmlhttp"),ei(p,j),p.u&&p.o&&nl(j,p.u,p.o),p.O&&(p.g.H=p.O);var T=p.g;p=p.ba,T.M=1,T.A=_i(Tt(j)),T.u=null,T.R=!0,Xe(T,p)}s.Va=function(){this.C!=null&&(this.C=null,Xs(this),ti(this),Rt(19))};function al(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function ol(p,j){var T=null;if(p.g==j){al(p),mo(p),p.g=null;var O=2}else if(M(p.h,j))T=j.G,Ue(p.h,j),O=1;else return;if(p.I!=0){if(j.o)if(O==1){T=j.u?j.u.length:0,j=Date.now()-j.F;var oe=p.D;O=ts(),qe(O,new je(O,T)),Ti(p)}else hs(p);else if(oe=j.m,oe==3||oe==0&&j.X>0||!(O==1&&du(p,j)||O==2&&ti(p)))switch(T&&T.length>0&&(j=p.h,j.i=j.i.concat(T)),oe){case 1:er(p,5);break;case 4:er(p,10);break;case 3:er(p,6);break;default:er(p,2)}}}function ll(p,j){let T=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(T*=2),T*j}function er(p,j){if(p.j.info("Error code "+j),j==2){var T=h(p.bb,p),O=p.Ua;const oe=!O;O=new St(O||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Wr(O,"https"),_i(O),oe?Yr(O.toString(),T):Zr(O.toString(),T)}else Rt(2);p.I=0,p.l&&p.l.pa(j),po(p),il(p)}s.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function po(p){if(p.I=0,p.ja=[],p.l){const j=it(p.h);(j.length!=0||p.i.length!=0)&&(C(p.ja,j),C(p.ja,p.i),p.h.i.length=0,P(p.i),p.i.length=0),p.l.oa()}}function kc(p,j,T){var O=T instanceof St?Tt(T):new St(T);if(O.g!="")j&&(O.g=j+"."+O.g),gr(O,O.u);else{var oe=c.location;O=oe.protocol,j=j?j+"."+oe.hostname:oe.hostname,oe=+oe.port;const me=new St(null);O&&Wr(me,O),j&&(me.g=j),oe&&gr(me,oe),T&&(me.h=T),O=me}return T=p.G,j=p.wa,T&&j&&Wt(O,T,j),Wt(O,"VER",p.ka),ei(p,O),O}function uu(p,j,T){if(j&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=p.Aa&&!p.ma?new nn(new Ci({ab:T})):new nn(p.ma),j.Fa(p.L),j}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function hu(){}s=hu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function cl(){}cl.prototype.g=function(p,j){return new rs(p,j)};function rs(p,j){_e.call(this),this.g=new sl(j),this.l=p,this.h=j&&j.messageUrlParams||null,p=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(p?p["X-WebChannel-Content-Type"]=j.messageContentType:p={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(p?p["X-WebChannel-Client-Profile"]=j.sa:p={"X-WebChannel-Client-Profile":j.sa}),this.g.U=p,(p=j&&j.Qb)&&!L(p)&&(this.g.u=p),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!L(j)&&(this.g.G=j,p=this.h,p!==null&&j in p&&(p=this.h,j in p&&delete p[j])),this.j=new oa(this)}b(rs,_e),rs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rs.prototype.close=function(){rl(this.g)},rs.prototype.o=function(p){var j=this.g;if(typeof p=="string"){var T={};T.__data__=p,p=T}else this.v&&(T={},T.__data__=Qt(p),p=T);j.i.push(new on(j.Ya++,p)),j.I==3&&Ti(j)},rs.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,rs.Z.N.call(this)};function mu(p){Is.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var j=p.__sm__;if(j){e:{for(const T in j){p=T;break e}p=void 0}(this.i=p)&&(p=this.i,j=j!==null&&p in j?j[p]:void 0),this.data=j}else this.data=p}b(mu,Is);function pu(){ds.call(this),this.status=1}b(pu,ds);function oa(p){this.g=p}b(oa,hu),oa.prototype.ra=function(){qe(this.g,"a")},oa.prototype.qa=function(p){qe(this.g,new mu(p))},oa.prototype.pa=function(p){qe(this.g,new pu)},oa.prototype.oa=function(){qe(this.g,"b")},cl.prototype.createWebChannel=cl.prototype.g,rs.prototype.send=rs.prototype.o,rs.prototype.open=rs.prototype.m,rs.prototype.close=rs.prototype.close,n1=function(){return new cl},t1=function(){return ts()},e1=es,fg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fr.NO_ERROR=0,fr.TIMEOUT=8,fr.HTTP_ERROR=6,Sh=fr,Ys.COMPLETE="complete",Xj=Ys,In.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",_e.prototype.listen=_e.prototype.J,rd=In,nn.prototype.listenOnce=nn.prototype.K,nn.prototype.getLastError=nn.prototype.Ha,nn.prototype.getLastErrorCode=nn.prototype.ya,nn.prototype.getStatus=nn.prototype.ca,nn.prototype.getResponseJson=nn.prototype.La,nn.prototype.getResponseText=nn.prototype.la,nn.prototype.send=nn.prototype.ea,nn.prototype.setWithCredentials=nn.prototype.Fa,Qj=nn}).apply(typeof lh<"u"?lh:typeof self<"u"?self:typeof window<"u"?window:{});const cv="@firebase/firestore",dv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ys=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ys.UNAUTHENTICATED=new ys(null),ys.GOOGLE_CREDENTIALS=new ys("google-credentials-uid"),ys.FIRST_PARTY=new ys("first-party-uid"),ys.MOCK_USER=new ys("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new Nm("@firebase/firestore");function Il(){return Vo.logLevel}function Ke(s,...e){if(Vo.logLevel<=Mt.DEBUG){const t=e.map(cx);Vo.debug(`Firestore (${cc}): ${s}`,...t)}}function Yi(s,...e){if(Vo.logLevel<=Mt.ERROR){const t=e.map(cx);Vo.error(`Firestore (${cc}): ${s}`,...t)}}function Hl(s,...e){if(Vo.logLevel<=Mt.WARN){const t=e.map(cx);Vo.warn(`Firestore (${cc}): ${s}`,...t)}}function cx(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,s1(s,r,t)}function s1(s,e,t){let r=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Yi(r),new Error(r)}function Zt(s,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,s||s1(e,i,r)}function Nt(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ys.UNAUTHENTICATED)))}shutdown(){}}class nP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class sP{constructor(e){this.t=e,this.currentUser=ys.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Zt(this.o===void 0,42304);let r=this.i;const i=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let o=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Gi,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const m=o;e.enqueueRetryable((async()=>{await m.promise,await i(this.currentUser)}))},d=m=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Gi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zt(typeof r.accessToken=="string",31837,{l:r}),new r1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(e===null||typeof e=="string",2055,{h:e}),new ys(e)}}class rP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ys.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new rP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ys.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class uv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Zt(this.o===void 0,3512);const r=o=>{o.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new uv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Zt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new uv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=oP(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Lt(s,e){return s<e?-1:s>e?1:0}function gg(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const i=s.charAt(r),o=e.charAt(r);if(i!==o)return Ff(i)===Ff(o)?Lt(i,o):Ff(i)?1:-1}return Lt(s.length,e.length)}const lP=55296,cP=57343;function Ff(s){const e=s.charCodeAt(0);return e>=lP&&e<=cP}function Wl(s,e,t){return s.length===e.length&&s.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="__name__";class li{constructor(e,t,r){t===void 0?t=0:t>e.length&&ht(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ht(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return li.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof li?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=li.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Lt(e.length,t.length)}static compareSegments(e,t){const r=li.isNumericId(e),i=li.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?li.extractNumericId(e).compare(li.extractNumericId(t)):gg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return za.fromString(e.substring(4,e.length-2))}}class rn extends li{construct(e,t,r){return new rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new rn(t)}static emptyPath(){return new rn([])}}const dP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ls extends li{construct(e,t,r){return new ls(e,t,r)}static isValidIdentifier(e){return dP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ls.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hv}static keyField(){return new ls([hv])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Oe(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Oe(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Oe(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(o(),i++)}if(o(),c)throw new Oe(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ls(t)}static emptyPath(){return new ls([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.path=e}static fromPath(e){return new st(rn.fromString(e))}static fromName(e){return new st(rn.fromString(e).popFirst(5))}static empty(){return new st(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new rn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(s,e,t){if(!t)throw new Oe(be.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function uP(s,e,t,r){if(e===!0&&r===!0)throw new Oe(be.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function mv(s){if(!st.isDocumentKey(s))throw new Oe(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function pv(s){if(st.isDocumentKey(s))throw new Oe(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function a1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Sm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ht(12329,{type:typeof s})}function Ks(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Oe(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sm(s);throw new Oe(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function hP(s,e){if(e<=0)throw new Oe(be.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(s,e){const t={typeString:s};return e&&(t.value=e),t}function Wd(s,e){if(!a1(s))throw new Oe(be.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const c=s[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Oe(be.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=-62135596800,gv=1e6;class dn{static now(){return dn.fromMillis(Date.now())}static fromDate(e){return dn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*gv);return new dn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fv)throw new Oe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gv}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wd(e,dn._jsonSchema))return new dn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dn._jsonSchemaVersion="firestore/timestamp/1.0",dn._jsonSchema={type:Fn("string",dn._jsonSchemaVersion),seconds:Fn("number"),nanoseconds:Fn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(e){return new yt(e)}static min(){return new yt(new dn(0,0))}static max(){return new yt(new dn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=-1;function mP(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,i=yt.fromTimestamp(r===1e9?new dn(t+1,0):new dn(t,r));return new Fa(i,st.empty(),e)}function pP(s){return new Fa(s.readTime,s.key,jd)}class Fa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fa(yt.min(),st.empty(),jd)}static max(){return new Fa(yt.max(),st.empty(),jd)}}function fP(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=st.comparator(s.documentKey,e.documentKey),t!==0?t:Lt(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(s){if(s.code!==be.FAILED_PRECONDITION||s.message!==gP)throw s;Ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Se(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Se?t:Se.resolve(t)}catch(t){return Se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Se.reject(t)}static resolve(e){return new Se(((t,r)=>{t(e)}))}static reject(e){return new Se(((t,r)=>{r(e)}))}static waitFor(e){return new Se(((t,r)=>{let i=0,o=0,c=!1;e.forEach((d=>{++i,d.next((()=>{++o,c&&o===i&&t()}),(m=>r(m)))})),c=!0,o===i&&t()}))}static or(e){let t=Se.resolve(!1);for(const r of e)t=t.next((i=>i?Se.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new Se(((r,i)=>{const o=e.length,c=new Array(o);let d=0;for(let m=0;m<o;m++){const h=m;t(e[h]).next((g=>{c[h]=g,++d,d===o&&r(c)}),(g=>i(g)))}}))}static doWhile(e,t){return new Se(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}function yP(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function uc(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_m.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=-1;function Cm(s){return s==null}function Bh(s){return s===0&&1/s==-1/0}function bP(s){return typeof s=="number"&&Number.isInteger(s)&&!Bh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="";function vP(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=xv(e)),e=wP(s.get(t),e);return xv(e)}function wP(s,e){let t=e;const r=s.length;for(let i=0;i<r;i++){const o=s.charAt(i);switch(o){case"\0":t+="";break;case o1:t+="";break;default:t+=o}}return t}function xv(s){return s+o1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Qa(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function l1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t){this.comparator=e,this.root=t||os.EMPTY}insert(e,t){return new vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,os.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,os.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ch(this.root,e,this.comparator,!0)}}class ch{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class os{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??os.RED,this.left=i??os.EMPTY,this.right=o??os.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new os(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return os.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return os.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,os.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,os.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ht(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ht(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ht(27949);return e+(this.isRed()?0:1)}}os.EMPTY=null,os.RED=!0,os.BLACK=!1;os.EMPTY=new class{constructor(){this.size=0}get key(){throw ht(57766)}get value(){throw ht(16141)}get color(){throw ht(16727)}get left(){throw ht(29726)}get right(){throw ht(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new os(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bv(this.data.getIterator())}getIteratorFrom(e){return new bv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gn(this.comparator);return t.data=e,t}}class bv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.fields=e,e.sort(ls.comparator)}static empty(){return new lr([])}unionWith(e){let t=new Gn(ls.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new lr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new c1("Invalid base64 string: "+o):o}})(e);return new cs(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o})(e);return new cs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cs.EMPTY_BYTE_STRING=new cs("");const NP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ua(s){if(Zt(!!s,39018),typeof s=="string"){let e=0;const t=NP.exec(s);if(Zt(!!t,46558,{timestamp:s}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pn(s.seconds),nanos:Pn(s.nanos)}}function Pn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ba(s){return typeof s=="string"?cs.fromBase64String(s):cs.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="server_timestamp",u1="__type__",h1="__previous_value__",m1="__local_write_time__";function km(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[u1])==null?void 0:r.stringValue)===d1}function Em(s){const e=s.mapValue.fields[h1];return km(e)?Em(e):e}function Sd(s){const e=Ua(s.mapValue.fields[m1].timestampValue);return new dn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,t,r,i,o,c,d,m,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=h,this.isUsingEmulator=g}}const $h="(default)";class _d{constructor(e,t){this.projectId=e,this.database=t||$h}static empty(){return new _d("","")}get isDefaultDatabase(){return this.database===$h}isEqual(e){return e instanceof _d&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="__type__",SP="__max__",dh={mapValue:{}},f1="__vector__",qh="value";function $a(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?km(s)?4:CP(s)?9007199254740991:_P(s)?10:11:ht(28295,{value:s})}function yi(s,e){if(s===e)return!0;const t=$a(s);if(t!==$a(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Sd(s).isEqual(Sd(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=Ua(i.timestampValue),d=Ua(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(i,o){return Ba(i.bytesValue).isEqual(Ba(o.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(i,o){return Pn(i.geoPointValue.latitude)===Pn(o.geoPointValue.latitude)&&Pn(i.geoPointValue.longitude)===Pn(o.geoPointValue.longitude)})(s,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Pn(i.integerValue)===Pn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=Pn(i.doubleValue),d=Pn(o.doubleValue);return c===d?Bh(c)===Bh(d):isNaN(c)&&isNaN(d)}return!1})(s,e);case 9:return Wl(s.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return(function(i,o){const c=i.mapValue.fields||{},d=o.mapValue.fields||{};if(yv(c)!==yv(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!yi(c[m],d[m])))return!1;return!0})(s,e);default:return ht(52216,{left:s})}}function Cd(s,e){return(s.values||[]).find((t=>yi(t,e)))!==void 0}function Kl(s,e){if(s===e)return 0;const t=$a(s),r=$a(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(s.booleanValue,e.booleanValue);case 2:return(function(o,c){const d=Pn(o.integerValue||o.doubleValue),m=Pn(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(s,e);case 3:return vv(s.timestampValue,e.timestampValue);case 4:return vv(Sd(s),Sd(e));case 5:return gg(s.stringValue,e.stringValue);case 6:return(function(o,c){const d=Ba(o),m=Ba(c);return d.compareTo(m)})(s.bytesValue,e.bytesValue);case 7:return(function(o,c){const d=o.split("/"),m=c.split("/");for(let h=0;h<d.length&&h<m.length;h++){const g=Lt(d[h],m[h]);if(g!==0)return g}return Lt(d.length,m.length)})(s.referenceValue,e.referenceValue);case 8:return(function(o,c){const d=Lt(Pn(o.latitude),Pn(c.latitude));return d!==0?d:Lt(Pn(o.longitude),Pn(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return wv(s.arrayValue,e.arrayValue);case 10:return(function(o,c){var w,P,C,k;const d=o.fields||{},m=c.fields||{},h=(w=d[qh])==null?void 0:w.arrayValue,g=(P=m[qh])==null?void 0:P.arrayValue,b=Lt(((C=h==null?void 0:h.values)==null?void 0:C.length)||0,((k=g==null?void 0:g.values)==null?void 0:k.length)||0);return b!==0?b:wv(h,g)})(s.mapValue,e.mapValue);case 11:return(function(o,c){if(o===dh.mapValue&&c===dh.mapValue)return 0;if(o===dh.mapValue)return 1;if(c===dh.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),h=c.fields||{},g=Object.keys(h);m.sort(),g.sort();for(let b=0;b<m.length&&b<g.length;++b){const w=gg(m[b],g[b]);if(w!==0)return w;const P=Kl(d[m[b]],h[g[b]]);if(P!==0)return P}return Lt(m.length,g.length)})(s.mapValue,e.mapValue);default:throw ht(23264,{he:t})}}function vv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Lt(s,e);const t=Ua(s),r=Ua(e),i=Lt(t.seconds,r.seconds);return i!==0?i:Lt(t.nanos,r.nanos)}function wv(s,e){const t=s.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Kl(t[i],r[i]);if(o)return o}return Lt(t.length,r.length)}function Jl(s){return xg(s)}function xg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=Ua(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Ba(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return st.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=xg(o);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${xg(t.fields[c])}`;return i+"}"})(s.mapValue):ht(61005,{value:s})}function _h(s){switch($a(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Em(s);return e?16+_h(e):16;case 5:return 2*s.stringValue.length;case 6:return Ba(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+_h(o)),0)})(s.arrayValue);case 10:case 11:return(function(r){let i=0;return Qa(r.fields,((o,c)=>{i+=o.length+_h(c)})),i})(s.mapValue);default:throw ht(13486,{value:s})}}function Gh(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function yg(s){return!!s&&"integerValue"in s}function hx(s){return!!s&&"arrayValue"in s}function Nv(s){return!!s&&"nullValue"in s}function jv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ch(s){return!!s&&"mapValue"in s}function _P(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[p1])==null?void 0:r.stringValue)===f1}function ud(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Qa(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ud(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ud(s.arrayValue.values[t]);return e}return{...s}}function CP(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===SP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.value=e}static empty(){return new Gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ch(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ud(t)}setAll(e){let t=ls.emptyPath(),r={},i=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=ud(c):i.push(d.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Ch(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ch(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Qa(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new Gs(ud(this.value))}}function g1(s){const e=[];return Qa(s.fields,((t,r)=>{const i=new ls([t]);if(Ch(r)){const o=g1(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)})),new lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t,r,i,o,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new vs(e,0,yt.min(),yt.min(),yt.min(),Gs.empty(),0)}static newFoundDocument(e,t,r,i){return new vs(e,1,t,yt.min(),r,i,0)}static newNoDocument(e,t){return new vs(e,2,t,yt.min(),yt.min(),Gs.empty(),0)}static newUnknownDocument(e,t){return new vs(e,3,t,yt.min(),yt.min(),Gs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t){this.position=e,this.inclusive=t}}function Sv(s,e,t){let r=0;for(let i=0;i<s.position.length;i++){const o=e[i],c=s.position[i];if(o.field.isKeyField()?r=st.comparator(st.fromName(c.referenceValue),t.key):r=Kl(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function _v(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!yi(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,t="asc"){this.field=e,this.dir=t}}function kP(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x1=class{};class On extends x1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new TP(e,t,r):t==="array-contains"?new IP(e,r):t==="in"?new RP(e,r):t==="not-in"?new DP(e,r):t==="array-contains-any"?new MP(e,r):new On(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PP(e,r):new AP(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Kl(t,this.value)):t!==null&&$a(this.value)===$a(t)&&this.matchesComparison(Kl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ht(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Br extends x1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Br(e,t)}matches(e){return y1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function y1(s){return s.op==="and"}function b1(s){return EP(s)&&y1(s)}function EP(s){for(const e of s.filters)if(e instanceof Br)return!1;return!0}function bg(s){if(s instanceof On)return s.field.canonicalString()+s.op.toString()+Jl(s.value);if(b1(s))return s.filters.map((e=>bg(e))).join(",");{const e=s.filters.map((t=>bg(t))).join(",");return`${s.op}(${e})`}}function v1(s,e){return s instanceof On?(function(r,i){return i instanceof On&&r.op===i.op&&r.field.isEqual(i.field)&&yi(r.value,i.value)})(s,e):s instanceof Br?(function(r,i){return i instanceof Br&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,c,d)=>o&&v1(c,i.filters[d])),!0):!1})(s,e):void ht(19439)}function w1(s){return s instanceof On?(function(t){return`${t.field.canonicalString()} ${t.op} ${Jl(t.value)}`})(s):s instanceof Br?(function(t){return t.op.toString()+" {"+t.getFilters().map(w1).join(" ,")+"}"})(s):"Filter"}class TP extends On{constructor(e,t,r){super(e,t,r),this.key=st.fromName(r.referenceValue)}matches(e){const t=st.comparator(e.key,this.key);return this.matchesComparison(t)}}class PP extends On{constructor(e,t){super(e,"in",t),this.keys=N1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class AP extends On{constructor(e,t){super(e,"not-in",t),this.keys=N1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function N1(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>st.fromName(r.referenceValue)))}class IP extends On{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hx(t)&&Cd(t.arrayValue,this.value)}}class RP extends On{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cd(this.value.arrayValue,t)}}class DP extends On{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cd(this.value.arrayValue,t)}}class MP extends On{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hx(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Cd(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,t=null,r=[],i=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=d,this.Te=null}}function Cv(s,e=null,t=[],r=[],i=null,o=null,c=null){return new LP(s,e,t,r,i,o,c)}function mx(s){const e=Nt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>bg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Cm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Jl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Jl(r))).join(",")),e.Te=t}return e.Te}function px(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!kP(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!v1(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!_v(s.startAt,e.startAt)&&_v(s.endAt,e.endAt)}function vg(s){return st.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t=null,r=[],i=[],o=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zP(s,e,t,r,i,o,c,d){return new Yo(s,e,t,r,i,o,c,d)}function Tm(s){return new Yo(s)}function kv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function fx(s){return s.collectionGroup!==null}function Fl(s){const e=Nt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Gn(ls.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new kd(o,r))})),t.has(ls.keyField().canonicalString())||e.Ie.push(new kd(ls.keyField(),r))}return e.Ie}function hi(s){const e=Nt(s);return e.Ee||(e.Ee=VP(e,Fl(s))),e.Ee}function VP(s,e){if(s.limitType==="F")return Cv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new kd(i.field,o)}));const t=s.endAt?new Yl(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Yl(s.startAt.position,s.startAt.inclusive):null;return Cv(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function wg(s,e){const t=s.filters.concat([e]);return new Yo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Hh(s,e,t){return new Yo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Pm(s,e){return px(hi(s),hi(e))&&s.limitType===e.limitType}function j1(s){return`${mx(hi(s))}|lt:${s.limitType}`}function Rl(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>w1(i))).join(", ")}]`),Cm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Jl(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Jl(i))).join(",")),`Target(${r})`})(hi(s))}; limitType=${s.limitType})`}function Am(s,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):st.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(s,e)&&(function(r,i){for(const o of Fl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(s,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(s,e)&&(function(r,i){return!(r.startAt&&!(function(c,d,m){const h=Sv(c,d,m);return c.inclusive?h<=0:h<0})(r.startAt,Fl(r),i)||r.endAt&&!(function(c,d,m){const h=Sv(c,d,m);return c.inclusive?h>=0:h>0})(r.endAt,Fl(r),i))})(s,e)}function OP(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function S1(s){return(e,t)=>{let r=!1;for(const i of Fl(s)){const o=FP(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function FP(s,e,t){const r=s.field.isKeyField()?st.comparator(e.key,t.key):(function(o,c,d){const m=c.data.field(o),h=d.data.field(o);return m!==null&&h!==null?Kl(m,h):ht(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ht(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qa(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return l1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=new vn(st.comparator);function Zi(){return UP}const _1=new vn(st.comparator);function id(...s){let e=_1;for(const t of s)e=e.insert(t.key,t);return e}function C1(s){let e=_1;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Po(){return hd()}function k1(){return hd()}function hd(){return new Zo((s=>s.toString()),((s,e)=>s.isEqual(e)))}const BP=new vn(st.comparator),$P=new Gn(st.comparator);function zt(...s){let e=$P;for(const t of s)e=e.add(t);return e}const qP=new Gn(Lt);function GP(){return qP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bh(e)?"-0":e}}function E1(s){return{integerValue:""+s}}function HP(s,e){return bP(e)?E1(e):gx(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this._=void 0}}function WP(s,e,t){return s instanceof Ed?(function(i,o){const c={fields:{[u1]:{stringValue:d1},[m1]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&km(o)&&(o=Em(o)),o&&(c.fields[h1]=o),{mapValue:c}})(t,e):s instanceof Zl?P1(s,e):s instanceof Td?A1(s,e):(function(i,o){const c=T1(i,o),d=Ev(c)+Ev(i.Ae);return yg(c)&&yg(i.Ae)?E1(d):gx(i.serializer,d)})(s,e)}function KP(s,e,t){return s instanceof Zl?P1(s,e):s instanceof Td?A1(s,e):t}function T1(s,e){return s instanceof Wh?(function(r){return yg(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Ed extends Im{}class Zl extends Im{constructor(e){super(),this.elements=e}}function P1(s,e){const t=I1(e);for(const r of s.elements)t.some((i=>yi(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Td extends Im{constructor(e){super(),this.elements=e}}function A1(s,e){let t=I1(e);for(const r of s.elements)t=t.filter((i=>!yi(i,r)));return{arrayValue:{values:t}}}class Wh extends Im{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ev(s){return Pn(s.integerValue||s.doubleValue)}function I1(s){return hx(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,t){this.field=e,this.transform=t}}function JP(s,e){return s.field.isEqual(e.field)&&(function(r,i){return r instanceof Zl&&i instanceof Zl||r instanceof Td&&i instanceof Td?Wl(r.elements,i.elements,yi):r instanceof Wh&&i instanceof Wh?yi(r.Ae,i.Ae):r instanceof Ed&&i instanceof Ed})(s.transform,e.transform)}class YP{constructor(e,t){this.version=e,this.transformResults=t}}class kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Rm{}function D1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new xx(s.key,kr.none()):new Kd(s.key,s.data,kr.none());{const t=s.data,r=Gs.empty();let i=new Gn(ls.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new Xa(s.key,r,new lr(i.toArray()),kr.none())}}function ZP(s,e,t){s instanceof Kd?(function(i,o,c){const d=i.value.clone(),m=Pv(i.fieldTransforms,o,c.transformResults);d.setAll(m),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(s,e,t):s instanceof Xa?(function(i,o,c){if(!kh(i.precondition,o))return void o.convertToUnknownDocument(c.version);const d=Pv(i.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(M1(i)),m.setAll(d),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,e,t):(function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function md(s,e,t,r){return s instanceof Kd?(function(o,c,d,m){if(!kh(o.precondition,c))return d;const h=o.value.clone(),g=Av(o.fieldTransforms,m,c);return h.setAll(g),c.convertToFoundDocument(c.version,h).setHasLocalMutations(),null})(s,e,t,r):s instanceof Xa?(function(o,c,d,m){if(!kh(o.precondition,c))return d;const h=Av(o.fieldTransforms,m,c),g=c.data;return g.setAll(M1(o)),g.setAll(h),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(s,e,t,r):(function(o,c,d){return kh(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(s,e,t)}function QP(s,e){let t=null;for(const r of s.fieldTransforms){const i=e.data.field(r.field),o=T1(r.transform,i||null);o!=null&&(t===null&&(t=Gs.empty()),t.set(r.field,o))}return t||null}function Tv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wl(r,i,((o,c)=>JP(o,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Kd extends Rm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xa extends Rm{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function M1(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function Pv(s,e,t){const r=new Map;Zt(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let i=0;i<t.length;i++){const o=s[i],c=o.transform,d=e.data.field(o.field);r.set(o.field,KP(c,d,t[i]))}return r}function Av(s,e,t){const r=new Map;for(const i of s){const o=i.transform,c=t.data.field(i.field);r.set(i.field,WP(o,c,e))}return r}class xx extends Rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XP extends Rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&ZP(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=md(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=md(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=k1();return this.mutations.forEach((i=>{const o=e.get(i.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=t.has(i.key)?null:d;const m=D1(c,d);m!==null&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(yt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),zt())}isEqual(e){return this.batchId===e.batchId&&Wl(this.mutations,e.mutations,((t,r)=>Tv(t,r)))&&Wl(this.baseMutations,e.baseMutations,((t,r)=>Tv(t,r)))}}class yx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Zt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return BP})();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new yx(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn,Bt;function s4(s){switch(s){case be.OK:return ht(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return ht(15467,{code:s})}}function L1(s){if(s===void 0)return Yi("GRPC error has no .code"),be.UNKNOWN;switch(s){case Mn.OK:return be.OK;case Mn.CANCELLED:return be.CANCELLED;case Mn.UNKNOWN:return be.UNKNOWN;case Mn.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Mn.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Mn.INTERNAL:return be.INTERNAL;case Mn.UNAVAILABLE:return be.UNAVAILABLE;case Mn.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Mn.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Mn.NOT_FOUND:return be.NOT_FOUND;case Mn.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Mn.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Mn.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Mn.ABORTED:return be.ABORTED;case Mn.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Mn.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Mn.DATA_LOSS:return be.DATA_LOSS;default:return ht(39323,{code:s})}}(Bt=Mn||(Mn={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=new za([4294967295,4294967295],0);function Iv(s){const e=r4().encode(s),t=new Zj;return t.update(e),new Uint8Array(t.digest())}function Rv(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new za([t,r],0),new za([i,o],0)]}class bx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ad(`Invalid padding: ${t}`);if(r<0)throw new ad(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ad(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ad(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=za.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(za.fromNumber(r)));return i.compare(i4)===1&&(i=new za([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Iv(e),[r,i]=Rv(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new bx(o,i,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=Iv(e),[r,i]=Rv(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ad extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Jd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Dm(yt.min(),i,new vn(Lt),Zi(),zt())}}class Jd{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jd(r,t,zt(),zt(),zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class z1{constructor(e,t){this.targetId=e,this.Ce=t}}class V1{constructor(e,t,r=cs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Dv{constructor(){this.ve=0,this.Fe=Mv(),this.Me=cs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=zt(),t=zt(),r=zt();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht(38017,{changeType:o})}})),new Jd(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Mv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Zt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class a4{constructor(e){this.Ge=e,this.ze=new Map,this.je=Zi(),this.Je=uh(),this.He=uh(),this.Ye=new vn(Lt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ht(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(vg(o))if(r===0){const c=new st(o.path);this.et(t,c,vs.newNoDocument(c,yt.min()))}else Zt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const h=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let c,d;try{c=Ba(r).toUint8Array()}catch(m){if(m instanceof c1)return Hl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new bx(c,i,o)}catch(m){return Hl(m instanceof ad?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const d=this.ot(c);if(d){if(o.current&&vg(d.target)){const m=new st(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,vs.newNoDocument(m,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let r=zt();this.He.forEach(((o,c)=>{let d=!0;c.forEachWhile((m=>{const h=this.ot(m);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const i=new Dm(e,t,this.Ye,this.je,r);return this.je=Zi(),this.Je=uh(),this.He=uh(),this.Ye=new vn(Lt),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Dv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Gn(Lt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Gn(Lt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function uh(){return new vn(st.comparator)}function Mv(){return new vn(st.comparator)}const o4={asc:"ASCENDING",desc:"DESCENDING"},l4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c4={and:"AND",or:"OR"};class d4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ng(s,e){return s.useProto3Json||Cm(e)?e:{value:e}}function Kh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function u4(s,e){return Kh(s,e.toTimestamp())}function mi(s){return Zt(!!s,49232),yt.fromTimestamp((function(t){const r=Ua(t);return new dn(r.seconds,r.nanos)})(s))}function vx(s,e){return jg(s,e).canonicalString()}function jg(s,e){const t=(function(i){return new rn(["projects",i.projectId,"databases",i.database])})(s).child("documents");return e===void 0?t:t.child(e)}function F1(s){const e=rn.fromString(s);return Zt(G1(e),10190,{key:e.toString()}),e}function Sg(s,e){return vx(s.databaseId,e.path)}function Uf(s,e){const t=F1(e);if(t.get(1)!==s.databaseId.projectId)throw new Oe(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Oe(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new st(B1(t))}function U1(s,e){return vx(s.databaseId,e)}function h4(s){const e=F1(s);return e.length===4?rn.emptyPath():B1(e)}function _g(s){return new rn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function B1(s){return Zt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Lv(s,e,t){return{name:Sg(s,e),fields:t.value.mapValue.fields}}function m4(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ht(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(h,g){return h.useProto3Json?(Zt(g===void 0||typeof g=="string",58123),cs.fromBase64String(g||"")):(Zt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),cs.fromUint8Array(g||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(h){const g=h.code===void 0?be.UNKNOWN:L1(h.code);return new Oe(g,h.message||"")})(c);t=new V1(r,i,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Uf(s,r.document.name),o=mi(r.document.updateTime),c=r.document.createTime?mi(r.document.createTime):yt.min(),d=new Gs({mapValue:{fields:r.document.fields}}),m=vs.newFoundDocument(i,o,c,d),h=r.targetIds||[],g=r.removedTargetIds||[];t=new Eh(h,g,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Uf(s,r.document),o=r.readTime?mi(r.readTime):yt.min(),c=vs.newNoDocument(i,o),d=r.removedTargetIds||[];t=new Eh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Uf(s,r.document),o=r.removedTargetIds||[];t=new Eh([],o,i,null)}else{if(!("filter"in e))return ht(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new n4(i,o),d=r.targetId;t=new z1(d,c)}}return t}function p4(s,e){let t;if(e instanceof Kd)t={update:Lv(s,e.key,e.value)};else if(e instanceof xx)t={delete:Sg(s,e.key)};else if(e instanceof Xa)t={update:Lv(s,e.key,e.data),updateMask:j4(e.fieldMask)};else{if(!(e instanceof XP))return ht(16599,{Vt:e.type});t={verify:Sg(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,c){const d=c.transform;if(d instanceof Ed)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Zl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Td)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Wh)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw ht(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:u4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ht(27497)})(s,e.precondition)),t}function f4(s,e){return s&&s.length>0?(Zt(e!==void 0,14353),s.map((t=>(function(i,o){let c=i.updateTime?mi(i.updateTime):mi(o);return c.isEqual(yt.min())&&(c=mi(o)),new YP(c,i.transformResults||[])})(t,e)))):[]}function g4(s,e){return{documents:[U1(s,e.path)]}}function x4(s,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=U1(s,i);const o=(function(h){if(h.length!==0)return q1(Br.create(h,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(h){if(h.length!==0)return h.map((g=>(function(w){return{field:Dl(w.field),direction:v4(w.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Ng(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function y4(s){let e=h4(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Zt(r===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(b){const w=$1(b);return w instanceof Br&&b1(w)?w.getFilters():[w]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((w=>(function(C){return new kd(Ml(C.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(w)))})(t.orderBy));let d=null;t.limit&&(d=(function(b){let w;return w=typeof b=="object"?b.value:b,Cm(w)?null:w})(t.limit));let m=null;t.startAt&&(m=(function(b){const w=!!b.before,P=b.values||[];return new Yl(P,w)})(t.startAt));let h=null;return t.endAt&&(h=(function(b){const w=!b.before,P=b.values||[];return new Yl(P,w)})(t.endAt)),zP(e,i,c,o,d,"F",m,h)}function b4(s,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $1(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ml(t.unaryFilter.field);return On.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ml(t.unaryFilter.field);return On.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ml(t.unaryFilter.field);return On.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ml(t.unaryFilter.field);return On.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ht(61313);default:return ht(60726)}})(s):s.fieldFilter!==void 0?(function(t){return On.create(Ml(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ht(58110);default:return ht(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return Br.create(t.compositeFilter.filters.map((r=>$1(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ht(1026)}})(t.compositeFilter.op))})(s):ht(30097,{filter:s})}function v4(s){return o4[s]}function w4(s){return l4[s]}function N4(s){return c4[s]}function Dl(s){return{fieldPath:s.canonicalString()}}function Ml(s){return ls.fromServerFormat(s.fieldPath)}function q1(s){return s instanceof On?(function(t){if(t.op==="=="){if(jv(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NAN"}};if(Nv(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jv(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NOT_NAN"}};if(Nv(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dl(t.field),op:w4(t.op),value:t.value}}})(s):s instanceof Br?(function(t){const r=t.getFilters().map((i=>q1(i)));return r.length===1?r[0]:{compositeFilter:{op:N4(t.op),filters:r}}})(s):ht(54877,{filter:s})}function j4(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function G1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,t,r,i,o=yt.min(),c=yt.min(),d=cs.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Ra(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e){this.yt=e}}function _4(s){const e=y4({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Hh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.Cn=new k4}addToCollectionParentIndex(e,t){return this.Cn.add(t),Se.resolve()}getCollectionParents(e,t){return Se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Se.resolve()}deleteFieldIndex(e,t){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,t){return Se.resolve()}getDocumentsMatchingTarget(e,t){return Se.resolve(null)}getIndexType(e,t){return Se.resolve(0)}getFieldIndexes(e,t){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,t){return Se.resolve(Fa.min())}getMinOffsetFromCollectionGroup(e,t){return Se.resolve(Fa.min())}updateCollectionGroup(e,t,r){return Se.resolve()}updateIndexEntries(e,t){return Se.resolve()}}class k4{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Gn(rn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gn(rn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},H1=41943040;class Us{static withCacheSize(e){return new Us(e,Us.DEFAULT_COLLECTION_PERCENTILE,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Us.DEFAULT_COLLECTION_PERCENTILE=10,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Us.DEFAULT=new Us(H1,Us.DEFAULT_COLLECTION_PERCENTILE,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Us.DISABLED=new Us(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ql(0)}static cr(){return new Ql(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="LruGarbageCollector",E4=1048576;function Ov([s,e],[t,r]){const i=Lt(s,t);return i===0?Lt(e,r):i}class T4{constructor(e){this.Ir=e,this.buffer=new Gn(Ov),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ov(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class P4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ke(Vv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){uc(t)?Ke(Vv,"Ignoring IndexedDB error during garbage collection: ",t):await dc(t)}await this.Vr(3e5)}))}}class A4{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Se.resolve(_m.ce);const r=new T4(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(zv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,c,d,m,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,c=Date.now(),this.nthSequenceNumber(e,i)))).next((b=>(r=b,d=Date.now(),this.removeTargets(e,r,t)))).next((b=>(o=b,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(h=Date.now(),Il()<=Mt.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${o} targets in `+(m-d)+`ms
	Removed ${b} documents in `+(h-m)+`ms
Total Duration: ${h-g}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:b}))))}}function I4(s,e){return new A4(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.changes=new Zo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&md(r.mutation,i,lr.empty(),dn.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,zt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=zt()){const i=Po();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let c=id();return o.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Po();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,zt())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,i){let o=Zi();const c=hd(),d=(function(){return hd()})();return t.forEach(((m,h)=>{const g=r.get(h.key);i.has(h.key)&&(g===void 0||g.mutation instanceof Xa)?o=o.insert(h.key,h):g!==void 0?(c.set(h.key,g.mutation.getFieldMask()),md(g.mutation,h,g.mutation.getFieldMask(),dn.now())):c.set(h.key,lr.empty())})),this.recalculateAndSaveOverlays(e,o).next((m=>(m.forEach(((h,g)=>c.set(h,g))),t.forEach(((h,g)=>d.set(h,new D4(g,c.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=hd();let i=new vn(((c,d)=>c-d)),o=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const h=t.get(m);if(h===null)return;let g=r.get(m)||lr.empty();g=d.applyToLocalView(h,g),r.set(m,g);const b=(i.get(d.batchId)||zt()).add(m);i=i.insert(d.batchId,b)}))})).next((()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),h=m.key,g=m.value,b=k1();g.forEach((w=>{if(!o.has(w)){const P=D1(t.get(w),r.get(w));P!==null&&b.set(w,P),o=o.add(w)}})),c.push(this.documentOverlayCache.saveOverlays(e,h,b))}return Se.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(c){return st.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Se.resolve(Po());let d=jd,m=o;return c.next((h=>Se.forEach(h,((g,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),o.get(g)?Se.resolve():this.remoteDocumentCache.getEntry(e,g).next((w=>{m=m.insert(g,w)}))))).next((()=>this.populateOverlays(e,h,o))).next((()=>this.computeViews(e,m,h,zt()))).next((g=>({batchId:d,changes:C1(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new st(t)).next((r=>{let i=id();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let c=id();return this.indexManager.getCollectionParents(e,o).next((d=>Se.forEach(d,(m=>{const h=(function(b,w){return new Yo(w,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((g=>{g.forEach(((b,w)=>{c=c.insert(b,w)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((c=>{o.forEach(((m,h)=>{const g=h.getKey();c.get(g)===null&&(c=c.insert(g,vs.newInvalidDocument(g)))}));let d=id();return c.forEach(((m,h)=>{const g=o.get(m);g!==void 0&&md(g.mutation,h,lr.empty(),dn.now()),Am(t,h)&&(d=d.insert(m,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:mi(i.createTime)}})(t)),Se.resolve()}getNamedQuery(e,t){return Se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:_4(i.bundledQuery),readTime:mi(i.readTime)}})(t)),Se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.overlays=new vn(st.comparator),this.qr=new Map}getOverlay(e,t){return Se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Po();return Se.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.St(e,t,o)})),Se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),Se.resolve()}getOverlaysForCollection(e,t,r){const i=Po(),o=t.length+1,c=new st(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,h=m.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===o&&m.largestBatchId>r&&i.set(m.getKey(),m)}return Se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new vn(((h,g)=>h-g));const c=this.overlays.getIterator();for(;c.hasNext();){const h=c.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let g=o.get(h.largestBatchId);g===null&&(g=Po(),o=o.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const d=Po(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((h,g)=>d.set(h,g))),!(d.size()>=i)););return Se.resolve(d)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new t4(t,r));let o=this.qr.get(t);o===void 0&&(o=zt(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(){this.sessionToken=cs.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.Qr=new Gn(Zn.$r),this.Ur=new Gn(Zn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Zn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Zn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new st(new rn([])),r=new Zn(t,e),i=new Zn(t,e+1),o=[];return this.Ur.forEachInRange([r,i],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new st(new rn([])),r=new Zn(t,e),i=new Zn(t,e+1);let o=zt();return this.Ur.forEachInRange([r,i],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new Zn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Zn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return st.comparator(e.key,t.key)||Lt(e.Yr,t.Yr)}static Kr(e,t){return Lt(e.Yr,t.Yr)||st.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Gn(Zn.$r)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new e4(o,t,r,i);this.mutationQueue.push(c);for(const d of i)this.Zr=this.Zr.add(new Zn(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Se.resolve(c)}lookupMutationBatch(e,t){return Se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return Se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?ux:this.tr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Zn(t,0),i=new Zn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(c=>{const d=this.Xr(c.Yr);o.push(d)})),Se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gn(Lt);return t.forEach((i=>{const o=new Zn(i,0),c=new Zn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(d=>{r=r.add(d.Yr)}))})),Se.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;st.isDocumentKey(o)||(o=o.child(""));const c=new Zn(new st(o),0);let d=new Gn(Lt);return this.Zr.forEachWhile((m=>{const h=m.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(d=d.add(m.Yr)),!0)}),c),Se.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Zt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Se.forEach(t.mutations,(i=>{const o=new Zn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Zn(t,0),i=this.Zr.firstAfterOrEqual(r);return Se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.ri=e,this.docs=(function(){return new vn(st.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Se.resolve(r?r.document.mutableCopy():vs.newInvalidDocument(t))}getEntries(e,t){let r=Zi();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():vs.newInvalidDocument(i))})),Se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Zi();const c=t.path,d=new st(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:h,value:{document:g}}=m.getNext();if(!c.isPrefixOf(h.path))break;h.path.length>c.length+1||fP(pP(g),r)<=0||(i.has(g.key)||Am(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Se.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ht(9500)}ii(e,t){return Se.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new U4(this)}getSize(e){return Se.resolve(this.size)}}class U4 extends R4{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.persistence=e,this.si=new Zo((t=>mx(t)),px),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.oi=0,this._i=new wx,this.targetCount=0,this.ai=Ql.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ql(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Se.resolve()}updateTargetData(e,t){return this.Pr(t),Se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),Se.waitFor(o).next((()=>i))}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Se.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Se.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((c=>{o.push(i.markPotentiallyOrphaned(e,c))})),Se.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Se.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Se.resolve(r)}containsKey(e,t){return Se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,t){this.ui={},this.overlays={},this.ci=new _m(0),this.li=!1,this.li=!0,this.hi=new V4,this.referenceDelegate=e(this),this.Pi=new B4(this),this.indexManager=new C4,this.remoteDocumentCache=(function(i){return new F4(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new S4(t),this.Ii=new L4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new z4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new O4(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ke("MemoryPersistence","Starting transaction:",e);const i=new $4(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return Se.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class $4 extends xP{constructor(e){super(),this.currentSequenceNumber=e}}class Nx{constructor(e){this.persistence=e,this.Ri=new wx,this.Vi=null}static mi(e){return new Nx(e)}get fi(){if(this.Vi)return this.Vi;throw ht(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Se.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.fi,(r=>{const i=st.fromPath(r);return this.gi(e,i).next((o=>{o||t.removeEntry(i,yt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Se.or([()=>Se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Jh{constructor(e,t){this.persistence=e,this.pi=new Zo((r=>vP(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=I4(this,t)}static mi(e,t){return new Jh(e,t)}Ei(){}di(e){return Se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return Se.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?Se.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((d=>{d||(r++,o.removeEntry(c,yt.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Se.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Se.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_h(e.data.value)),t}br(e,t,r){return Se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Se.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=zt(),i=zt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new jx(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return DE()?8:yP(ws())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,i,r).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new q4;return this.Ss(e,t,c).next((d=>{if(o.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>o.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Il()<=Mt.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",Rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Se.resolve()):(Il()<=Mt.DEBUG&&Ke("QueryEngine","Query:",Rl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Il()<=Mt.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",Rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(t))):Se.resolve())}ys(e,t){if(kv(t))return Se.resolve(null);let r=hi(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Hh(t,null,"F"),r=hi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const c=zt(...o);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((m=>{const h=this.Ds(t,d);return this.Cs(t,h,c,m.readTime)?this.ys(e,Hh(t,null,"F")):this.vs(e,h,t,m)}))))})))))}ws(e,t,r,i){return kv(t)||i.isEqual(yt.min())?Se.resolve(null):this.ps.getDocuments(e,r).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,r,i)?Se.resolve(null):(Il()<=Mt.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rl(t)),this.vs(e,c,t,mP(i,jd)).next((d=>d)))}))}Ds(e,t){let r=new Gn(S1(e));return t.forEach(((i,o)=>{Am(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Il()<=Mt.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",Rl(t)),this.ps.getDocumentsMatchingQuery(e,t,Fa.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="LocalStore",H4=3e8;class W4{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new vn(Lt),this.xs=new Zo((o=>mx(o)),px),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function K4(s,e,t,r){return new W4(s,e,t,r)}async function K1(s,e){const t=Nt(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const c=[],d=[];let m=zt();for(const h of i){c.push(h.batchId);for(const g of h.mutations)m=m.add(g.key)}for(const h of o){d.push(h.batchId);for(const g of h.mutations)m=m.add(g.key)}return t.localDocuments.getDocuments(r,m).next((h=>({Ls:h,removedBatchIds:c,addedBatchIds:d})))}))}))}function J4(s,e){const t=Nt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,h,g){const b=h.batch,w=b.keys();let P=Se.resolve();return w.forEach((C=>{P=P.next((()=>g.getEntry(m,C))).next((k=>{const E=h.docVersions.get(C);Zt(E!==null,48541),k.version.compareTo(E)<0&&(b.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),g.addEntry(k)))}))})),P.next((()=>d.mutationQueue.removeMutationBatch(m,b)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let m=zt();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(m=m.add(d.batch.mutations[h].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function J1(s){const e=Nt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Y4(s,e){const t=Nt(s),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const d=[];e.targetChanges.forEach(((g,b)=>{const w=i.get(b);if(!w)return;d.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,b))));let P=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?P=P.withResumeToken(cs.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):g.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(g.resumeToken,r)),i=i.insert(b,P),(function(k,E,F){return k.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=H4?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(w,P,g)&&d.push(t.Pi.updateTargetData(o,P))}));let m=Zi(),h=zt();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),d.push(Z4(o,c,e.documentUpdates).next((g=>{m=g.ks,h=g.qs}))),!r.isEqual(yt.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((b=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));d.push(g)}return Se.waitFor(d).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,m,h))).next((()=>m))})).then((o=>(t.Ms=i,o)))}function Z4(s,e,t){let r=zt(),i=zt();return t.forEach((o=>r=r.add(o))),e.getEntries(s,r).next((o=>{let c=Zi();return t.forEach(((d,m)=>{const h=o.get(d);m.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(d)),m.isNoDocument()&&m.version.isEqual(yt.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!h.isValidDocument()||m.version.compareTo(h.version)>0||m.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):Ke(Sx,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",m.version)})),{ks:c,qs:i}}))}function Q4(s,e){const t=Nt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ux),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function X4(s,e){const t=Nt(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((o=>o?(i=o,Se.resolve(i)):t.Pi.allocateTargetId(r).next((c=>(i=new Ra(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Cg(s,e,t){const r=Nt(s),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!uc(c))throw c;Ke(Sx,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Fv(s,e,t){const r=Nt(s);let i=yt.min(),o=zt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,h,g){const b=Nt(m),w=b.xs.get(g);return w!==void 0?Se.resolve(b.Ms.get(w)):b.Pi.getTargetData(h,g)})(r,c,hi(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{o=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:yt.min(),t?o:zt()))).next((d=>(eA(r,OP(e),d),{documents:d,Qs:o})))))}function eA(s,e,t){let r=s.Os.get(e)||yt.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),s.Os.set(e,r)}class Uv{constructor(){this.activeTargetIds=GP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tA{constructor(){this.Mo=new Uv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Uv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="ConnectivityMonitor";class $v{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ke(Bv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ke(Bv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh=null;function kg(){return hh===null?hh=(function(){return 268435456+Math.round(2147483648*Math.random())})():hh++,"0x"+hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="RestConnection",sA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===$h?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const c=kg(),d=this.zo(e,t.toUriEncodedString());Ke(Bf,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,i,o);const{host:h}=new URL(d),g=wi(h);return this.Jo(e,d,m,r,g).then((b=>(Ke(Bf,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Hl(Bf,`RPC '${e}' ${c} failed with error: `,b,"url: ",d,"request:",r),b}))}Ho(e,t,r,i,o,c){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const r=sA[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="WebChannelConnection";class aA extends rA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const c=kg();return new Promise(((d,m)=>{const h=new Qj;h.setWithCredentials(!0),h.listenOnce(Xj.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Sh.NO_ERROR:const b=h.getResponseJson();Ke(xs,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),d(b);break;case Sh.TIMEOUT:Ke(xs,`RPC '${e}' ${c} timed out`),m(new Oe(be.DEADLINE_EXCEEDED,"Request time out"));break;case Sh.HTTP_ERROR:const w=h.getStatus();if(Ke(xs,`RPC '${e}' ${c} failed with status:`,w,"response text:",h.getResponseText()),w>0){let P=h.getResponseJson();Array.isArray(P)&&(P=P[0]);const C=P==null?void 0:P.error;if(C&&C.status&&C.message){const k=(function(F){const U=F.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(U)>=0?U:be.UNKNOWN})(C.status);m(new Oe(k,C.message))}else m(new Oe(be.UNKNOWN,"Server responded with status "+h.getStatus()))}else m(new Oe(be.UNAVAILABLE,"Connection failed."));break;default:ht(9055,{l_:e,streamId:c,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Ke(xs,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(i);Ke(xs,`RPC '${e}' ${c} sending request:`,i),h.send(t,"POST",g,r,15)}))}T_(e,t,r){const i=kg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=n1(),d=t1(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(m.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const g=o.join("");Ke(xs,`Creating RPC '${e}' stream ${i}: ${g}`,m);const b=c.createWebChannel(g,m);this.I_(b);let w=!1,P=!1;const C=new iA({Yo:E=>{P?Ke(xs,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(w||(Ke(xs,`Opening RPC '${e}' stream ${i} transport.`),b.open(),w=!0),Ke(xs,`RPC '${e}' stream ${i} sending:`,E),b.send(E))},Zo:()=>b.close()}),k=(E,F,U)=>{E.listen(F,(q=>{try{U(q)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return k(b,rd.EventType.OPEN,(()=>{P||(Ke(xs,`RPC '${e}' stream ${i} transport opened.`),C.o_())})),k(b,rd.EventType.CLOSE,(()=>{P||(P=!0,Ke(xs,`RPC '${e}' stream ${i} transport closed`),C.a_(),this.E_(b))})),k(b,rd.EventType.ERROR,(E=>{P||(P=!0,Hl(xs,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),C.a_(new Oe(be.UNAVAILABLE,"The operation could not be completed")))})),k(b,rd.EventType.MESSAGE,(E=>{var F;if(!P){const U=E.data[0];Zt(!!U,16349);const q=U,Z=(q==null?void 0:q.error)||((F=q[0])==null?void 0:F.error);if(Z){Ke(xs,`RPC '${e}' stream ${i} received error:`,Z);const W=Z.status;let $=(function(I){const V=Mn[I];if(V!==void 0)return L1(V)})(W),R=Z.message;$===void 0&&($=be.INTERNAL,R="Unknown error status: "+W+" with message "+Z.message),P=!0,C.a_(new Oe($,R)),b.close()}else Ke(xs,`RPC '${e}' stream ${i} received:`,U),C.u_(U)}})),k(d,e1.STAT_EVENT,(E=>{E.stat===fg.PROXY?Ke(xs,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===fg.NOPROXY&&Ke(xs,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function $f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(s){return new d4(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="PersistentStream";class Z1{constructor(e,t,r,i,o,c,d,m){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Y1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===be.RESOURCE_EXHAUSTED?(Yi(t.toString()),Yi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new Oe(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ke(qv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ke(qv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class oA extends Z1{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=m4(this.serializer,e),r=(function(o){if(!("targetChange"in o))return yt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?yt.min():c.readTime?mi(c.readTime):yt.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=_g(this.serializer),t.addTarget=(function(o,c){let d;const m=c.target;if(d=vg(m)?{documents:g4(o,m)}:{query:x4(o,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=O1(o,c.resumeToken);const h=Ng(o,c.expectedCount);h!==null&&(d.expectedCount=h)}else if(c.snapshotVersion.compareTo(yt.min())>0){d.readTime=Kh(o,c.snapshotVersion.toTimestamp());const h=Ng(o,c.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const r=b4(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=_g(this.serializer),t.removeTarget=e,this.q_(t)}}class lA extends Z1{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Zt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Zt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Zt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=f4(e.writeResults,e.commitTime),r=mi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=_g(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>p4(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{}class dA extends cA{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Oe(be.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,jg(t,r),i,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Oe(be.UNKNOWN,o.toString())}))}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,jg(t,r),i,c,d,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Oe(be.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class uA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yi(t),this.aa=!1):Ke("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="RemoteStore";class hA{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Qo(this)&&(Ke(Oo,"Restarting streams for network reachability change."),await(async function(m){const h=Nt(m);h.Ea.add(4),await Yd(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Lm(h)})(this))}))})),this.Ra=new uA(r,i)}}async function Lm(s){if(Qo(s))for(const e of s.da)await e(!0)}async function Yd(s){for(const e of s.da)await e(!1)}function Q1(s,e){const t=Nt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ex(t)?kx(t):hc(t).O_()&&Cx(t,e))}function _x(s,e){const t=Nt(s),r=hc(t);t.Ia.delete(e),r.O_()&&X1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Qo(t)&&t.Ra.set("Unknown"))}function Cx(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hc(s).Y_(e)}function X1(s,e){s.Va.Ue(e),hc(s).Z_(e)}function kx(s){s.Va=new a4({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),hc(s).start(),s.Ra.ua()}function Ex(s){return Qo(s)&&!hc(s).x_()&&s.Ia.size>0}function Qo(s){return Nt(s).Ea.size===0}function eS(s){s.Va=void 0}async function mA(s){s.Ra.set("Online")}async function pA(s){s.Ia.forEach(((e,t)=>{Cx(s,e)}))}async function fA(s,e){eS(s),Ex(s)?(s.Ra.ha(e),kx(s)):s.Ra.set("Unknown")}async function gA(s,e,t){if(s.Ra.set("Online"),e instanceof V1&&e.state===2&&e.cause)try{await(async function(i,o){const c=o.cause;for(const d of o.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ia.delete(d),i.Va.removeTarget(d))})(s,e)}catch(r){Ke(Oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yh(s,r)}else if(e instanceof Eh?s.Va.Ze(e):e instanceof z1?s.Va.st(e):s.Va.tt(e),!t.isEqual(yt.min()))try{const r=await J1(s.localStore);t.compareTo(r)>=0&&await(function(o,c){const d=o.Va.Tt(c);return d.targetChanges.forEach(((m,h)=>{if(m.resumeToken.approximateByteSize()>0){const g=o.Ia.get(h);g&&o.Ia.set(h,g.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,h)=>{const g=o.Ia.get(m);if(!g)return;o.Ia.set(m,g.withResumeToken(cs.EMPTY_BYTE_STRING,g.snapshotVersion)),X1(o,m);const b=new Ra(g.target,m,h,g.sequenceNumber);Cx(o,b)})),o.remoteSyncer.applyRemoteEvent(d)})(s,t)}catch(r){Ke(Oo,"Failed to raise snapshot:",r),await Yh(s,r)}}async function Yh(s,e,t){if(!uc(e))throw e;s.Ea.add(1),await Yd(s),s.Ra.set("Offline"),t||(t=()=>J1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Ke(Oo,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await Lm(s)}))}function tS(s,e){return e().catch((t=>Yh(s,t,e)))}async function zm(s){const e=Nt(s),t=qa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ux;for(;xA(e);)try{const i=await Q4(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,yA(e,i)}catch(i){await Yh(e,i)}nS(e)&&sS(e)}function xA(s){return Qo(s)&&s.Ta.length<10}function yA(s,e){s.Ta.push(e);const t=qa(s);t.O_()&&t.X_&&t.ea(e.mutations)}function nS(s){return Qo(s)&&!qa(s).x_()&&s.Ta.length>0}function sS(s){qa(s).start()}async function bA(s){qa(s).ra()}async function vA(s){const e=qa(s);for(const t of s.Ta)e.ea(t.mutations)}async function wA(s,e,t){const r=s.Ta.shift(),i=yx.from(r,e,t);await tS(s,(()=>s.remoteSyncer.applySuccessfulWrite(i))),await zm(s)}async function NA(s,e){e&&qa(s).X_&&await(async function(r,i){if((function(c){return s4(c)&&c!==be.ABORTED})(i.code)){const o=r.Ta.shift();qa(r).B_(),await tS(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await zm(r)}})(s,e),nS(s)&&sS(s)}async function Gv(s,e){const t=Nt(s);t.asyncQueue.verifyOperationInProgress(),Ke(Oo,"RemoteStore received new credentials");const r=Qo(t);t.Ea.add(3),await Yd(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Lm(t)}async function jA(s,e){const t=Nt(s);e?(t.Ea.delete(2),await Lm(t)):e||(t.Ea.add(2),await Yd(t),t.Ra.set("Unknown"))}function hc(s){return s.ma||(s.ma=(function(t,r,i){const o=Nt(t);return o.sa(),new oA(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(s.datastore,s.asyncQueue,{Xo:mA.bind(null,s),t_:pA.bind(null,s),r_:fA.bind(null,s),H_:gA.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Ex(s)?kx(s):s.Ra.set("Unknown")):(await s.ma.stop(),eS(s))}))),s.ma}function qa(s){return s.fa||(s.fa=(function(t,r,i){const o=Nt(t);return o.sa(),new lA(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:bA.bind(null,s),r_:NA.bind(null,s),ta:vA.bind(null,s),na:wA.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await zm(s)):(await s.fa.stop(),s.Ta.length>0&&(Ke(Oo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,d=new Tx(e,t,c,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Px(s,e){if(Yi("AsyncQueue",`${e}: ${s}`),uc(s))return new Oe(be.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{static emptySet(e){return new Ul(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||st.comparator(t.key,r.key):(t,r)=>st.comparator(t.key,r.key),this.keyedMap=id(),this.sortedSet=new vn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ul)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ul;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.ga=new vn(st.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ht(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Xl{constructor(e,t,r,i,o,c,d,m,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,o){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Xl(e,t,Ul.emptySet(t),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class _A{constructor(){this.queries=Wv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Nt(t),o=i.queries;i.queries=Wv(),o.forEach(((c,d)=>{for(const m of d.Sa)m.onError(r)}))})(this,new Oe(be.ABORTED,"Firestore shutting down"))}}function Wv(){return new Zo((s=>j1(s)),Pm)}async function Ax(s,e){const t=Nt(s);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new SA,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const d=Px(c,`Initialization of query '${Rl(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Rx(t)}async function Ix(s,e){const t=Nt(s),r=e.query;let i=3;const o=t.queries.get(r);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function CA(s,e){const t=Nt(s);let r=!1;for(const i of e){const o=i.query,c=t.queries.get(o);if(c){for(const d of c.Sa)d.Fa(i)&&(r=!0);c.wa=i}}r&&Rx(t)}function kA(s,e,t){const r=Nt(s),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function Rx(s){s.Ca.forEach((e=>{e.next()}))}var Eg,Kv;(Kv=Eg||(Eg={})).Ma="default",Kv.Cache="cache";class Dx{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Xl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.key=e}}class iS{constructor(e){this.key=e}}class EA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=zt(),this.mutatedKeys=zt(),this.eu=S1(e),this.tu=new Ul(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Hv,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((g,b)=>{const w=i.get(g),P=Am(this.query,b)?b:null,C=!!w&&this.mutatedKeys.has(w.key),k=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let E=!1;w&&P?w.data.isEqual(P.data)?C!==k&&(r.track({type:3,doc:P}),E=!0):this.su(w,P)||(r.track({type:2,doc:P}),E=!0,(m&&this.eu(P,m)>0||h&&this.eu(P,h)<0)&&(d=!0)):!w&&P?(r.track({type:0,doc:P}),E=!0):w&&!P&&(r.track({type:1,doc:w}),E=!0,(m||h)&&(d=!0)),E&&(P?(c=c.add(P),o=k?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Cs:d,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,b)=>(function(P,C){const k=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht(20277,{Rt:E})}};return k(P)-k(C)})(g.type,b.type)||this.eu(g.doc,b.doc))),this.ou(r),i=i??!1;const d=t&&!i?this._u():[],m=this.Xa.size===0&&this.current&&!i?1:0,h=m!==this.Za;return this.Za=m,c.length!==0||h?{snapshot:new Xl(this.query,e.tu,o,c,e.mutatedKeys,m===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=zt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new iS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new rS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=zt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Mx="SyncEngine";class TA{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class PA{constructor(e){this.key=e,this.hu=!1}}class AA{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Zo((d=>j1(d)),Pm),this.Iu=new Map,this.Eu=new Set,this.du=new vn(st.comparator),this.Au=new Map,this.Ru=new wx,this.Vu={},this.mu=new Map,this.fu=Ql.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function IA(s,e,t=!0){const r=uS(s);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await aS(r,e,t,!0),i}async function RA(s,e){const t=uS(s);await aS(t,e,!0,!1)}async function aS(s,e,t,r){const i=await X4(s.localStore,hi(e)),o=i.targetId,c=s.sharedClientState.addLocalQueryTarget(o,t);let d;return r&&(d=await DA(s,e,o,c==="current",i.resumeToken)),s.isPrimaryClient&&t&&Q1(s.remoteStore,i),d}async function DA(s,e,t,r,i){s.pu=(b,w,P)=>(async function(k,E,F,U){let q=E.view.ru(F);q.Cs&&(q=await Fv(k.localStore,E.query,!1).then((({documents:R})=>E.view.ru(R,q))));const Z=U&&U.targetChanges.get(E.targetId),W=U&&U.targetMismatches.get(E.targetId)!=null,$=E.view.applyChanges(q,k.isPrimaryClient,Z,W);return Yv(k,E.targetId,$.au),$.snapshot})(s,b,w,P);const o=await Fv(s.localStore,e,!0),c=new EA(e,o.Qs),d=c.ru(o.documents),m=Jd.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",i),h=c.applyChanges(d,s.isPrimaryClient,m);Yv(s,t,h.au);const g=new TA(e,t,c);return s.Tu.set(e,g),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),h.snapshot}async function MA(s,e,t){const r=Nt(s),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((c=>!Pm(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&_x(r.remoteStore,i.targetId),Tg(r,i.targetId)})).catch(dc)):(Tg(r,i.targetId),await Cg(r.localStore,i.targetId,!0))}async function LA(s,e){const t=Nt(s),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),_x(t.remoteStore,r.targetId))}async function zA(s,e,t){const r=qA(s);try{const i=await(function(c,d){const m=Nt(c),h=dn.now(),g=d.reduce(((P,C)=>P.add(C.key)),zt());let b,w;return m.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let C=Zi(),k=zt();return m.Ns.getEntries(P,g).next((E=>{C=E,C.forEach(((F,U)=>{U.isValidDocument()||(k=k.add(F))}))})).next((()=>m.localDocuments.getOverlayedDocuments(P,C))).next((E=>{b=E;const F=[];for(const U of d){const q=QP(U,b.get(U.key).overlayedDocument);q!=null&&F.push(new Xa(U.key,q,g1(q.value.mapValue),kr.exists(!0)))}return m.mutationQueue.addMutationBatch(P,h,F,d)})).next((E=>{w=E;const F=E.applyToLocalDocumentSet(b,k);return m.documentOverlayCache.saveOverlays(P,E.batchId,F)}))})).then((()=>({batchId:w.batchId,changes:C1(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,d,m){let h=c.Vu[c.currentUser.toKey()];h||(h=new vn(Lt)),h=h.insert(d,m),c.Vu[c.currentUser.toKey()]=h})(r,i.batchId,t),await Zd(r,i.changes),await zm(r.remoteStore)}catch(i){const o=Px(i,"Failed to persist write");t.reject(o)}}async function oS(s,e){const t=Nt(s);try{const r=await Y4(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const c=t.Au.get(o);c&&(Zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?Zt(c.hu,14607):i.removedDocuments.size>0&&(Zt(c.hu,42227),c.hu=!1))})),await Zd(t,r,e)}catch(r){await dc(r)}}function Jv(s,e,t){const r=Nt(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,c)=>{const d=c.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(c,d){const m=Nt(c);m.onlineState=d;let h=!1;m.queries.forEach(((g,b)=>{for(const w of b.Sa)w.va(d)&&(h=!0)})),h&&Rx(m)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VA(s,e,t){const r=Nt(s);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let c=new vn(st.comparator);c=c.insert(o,vs.newNoDocument(o,yt.min()));const d=zt().add(o),m=new Dm(yt.min(),new Map,new vn(Lt),c,d);await oS(r,m),r.du=r.du.remove(o),r.Au.delete(e),Lx(r)}else await Cg(r.localStore,e,!1).then((()=>Tg(r,e,t))).catch(dc)}async function OA(s,e){const t=Nt(s),r=e.batch.batchId;try{const i=await J4(t.localStore,e);cS(t,r,null),lS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Zd(t,i)}catch(i){await dc(i)}}async function FA(s,e,t){const r=Nt(s);try{const i=await(function(c,d){const m=Nt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let g;return m.mutationQueue.lookupMutationBatch(h,d).next((b=>(Zt(b!==null,37113),g=b.keys(),m.mutationQueue.removeMutationBatch(h,b)))).next((()=>m.mutationQueue.performConsistencyCheck(h))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(h,g,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g))).next((()=>m.localDocuments.getDocuments(h,g)))}))})(r.localStore,e);cS(r,e,t),lS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Zd(r,i)}catch(i){await dc(i)}}function lS(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function cS(s,e,t){const r=Nt(s);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Tg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||dS(s,r)}))}function dS(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(_x(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),Lx(s))}function Yv(s,e,t){for(const r of t)r instanceof rS?(s.Ru.addReference(r.key,e),UA(s,r)):r instanceof iS?(Ke(Mx,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||dS(s,r.key)):ht(19791,{wu:r})}function UA(s,e){const t=e.key,r=t.path.canonicalString();s.du.get(t)||s.Eu.has(r)||(Ke(Mx,"New document in limbo: "+t),s.Eu.add(r),Lx(s))}function Lx(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new st(rn.fromString(e)),r=s.fu.next();s.Au.set(r,new PA(t)),s.du=s.du.insert(t,r),Q1(s.remoteStore,new Ra(hi(Tm(t.path)),r,"TargetPurposeLimboResolution",_m.ce))}}async function Zd(s,e,t){const r=Nt(s),i=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,m)=>{c.push(r.pu(m,e,t).then((h=>{var g;if((h||t)&&r.isPrimaryClient){const b=h?!h.fromCache:(g=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(m.targetId,b?"current":"not-current")}if(h){i.push(h);const b=jx.As(m.targetId,h);o.push(b)}})))})),await Promise.all(c),r.Pu.H_(i),await(async function(m,h){const g=Nt(m);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>Se.forEach(h,(w=>Se.forEach(w.Es,(P=>g.persistence.referenceDelegate.addReference(b,w.targetId,P))).next((()=>Se.forEach(w.ds,(P=>g.persistence.referenceDelegate.removeReference(b,w.targetId,P)))))))))}catch(b){if(!uc(b))throw b;Ke(Sx,"Failed to update sequence numbers: "+b)}for(const b of h){const w=b.targetId;if(!b.fromCache){const P=g.Ms.get(w),C=P.snapshotVersion,k=P.withLastLimboFreeSnapshotVersion(C);g.Ms=g.Ms.insert(w,k)}}})(r.localStore,o))}async function BA(s,e){const t=Nt(s);if(!t.currentUser.isEqual(e)){Ke(Mx,"User change. New user:",e.toKey());const r=await K1(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((d=>{d.forEach((m=>{m.reject(new Oe(be.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zd(t,r.Ls)}}function $A(s,e){const t=Nt(s),r=t.Au.get(e);if(r&&r.hu)return zt().add(r.key);{let i=zt();const o=t.Iu.get(e);if(!o)return i;for(const c of o){const d=t.Tu.get(c);i=i.unionWith(d.view.nu)}return i}}function uS(s){const e=Nt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=oS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$A.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VA.bind(null,e),e.Pu.H_=CA.bind(null,e.eventManager),e.Pu.yu=kA.bind(null,e.eventManager),e}function qA(s){const e=Nt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FA.bind(null,e),e}class Zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return K4(this.persistence,new G4,e.initialUser,this.serializer)}Cu(e){return new W1(Nx.mi,this.serializer)}Du(e){return new tA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zh.provider={build:()=>new Zh};class GA extends Zh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Zt(this.persistence.referenceDelegate instanceof Jh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new P4(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Us.withCacheSize(this.cacheSizeBytes):Us.DEFAULT;return new W1((r=>Jh.mi(r,t)),this.serializer)}}class Pg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BA.bind(null,this.syncEngine),await jA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _A})()}createDatastore(e){const t=Mm(e.databaseInfo.databaseId),r=(function(o){return new aA(o)})(e.databaseInfo);return(function(o,c,d,m){return new dA(o,c,d,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,c,d){return new hA(r,i,o,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Jv(this.syncEngine,t,0)),(function(){return $v.v()?new $v:new nA})())}createSyncEngine(e,t){return(function(i,o,c,d,m,h,g){const b=new AA(i,o,c,d,m,h);return g&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const o=Nt(i);Ke(Oo,"RemoteStore shutting down."),o.Ea.add(5),await Yd(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Pg.provider={build:()=>new Pg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga="FirestoreClient";class HA{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ys.UNAUTHENTICATED,this.clientId=dx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async c=>{Ke(Ga,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Ke(Ga,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Px(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function qf(s,e){s.asyncQueue.verifyOperationInProgress(),Ke(Ga,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async i=>{r.isEqual(i)||(await K1(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Zv(s,e){s.asyncQueue.verifyOperationInProgress();const t=await WA(s);Ke(Ga,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>Gv(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,i)=>Gv(e.remoteStore,i))),s._onlineComponents=e}async function WA(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ke(Ga,"Using user provided OfflineComponentProvider");try{await qf(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Hl("Error using user provided cache. Falling back to memory cache: "+t),await qf(s,new Zh)}}else Ke(Ga,"Using default OfflineComponentProvider"),await qf(s,new GA(void 0));return s._offlineComponents}async function hS(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ke(Ga,"Using user provided OnlineComponentProvider"),await Zv(s,s._uninitializedComponentsProvider._online)):(Ke(Ga,"Using default OnlineComponentProvider"),await Zv(s,new Pg))),s._onlineComponents}function KA(s){return hS(s).then((e=>e.syncEngine))}async function Qh(s){const e=await hS(s),t=e.eventManager;return t.onListen=IA.bind(null,e.syncEngine),t.onUnlisten=MA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LA.bind(null,e.syncEngine),t}function JA(s,e,t={}){const r=new Gi;return s.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,m,h){const g=new zx({next:w=>{g.Nu(),c.enqueueAndForget((()=>Ix(o,b)));const P=w.docs.has(d);!P&&w.fromCache?h.reject(new Oe(be.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&w.fromCache&&m&&m.source==="server"?h.reject(new Oe(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),b=new Dx(Tm(d.path),g,{includeMetadataChanges:!0,qa:!0});return Ax(o,b)})(await Qh(s),s.asyncQueue,e,t,r))),r.promise}function YA(s,e,t={}){const r=new Gi;return s.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,m,h){const g=new zx({next:w=>{g.Nu(),c.enqueueAndForget((()=>Ix(o,b))),w.fromCache&&m.source==="server"?h.reject(new Oe(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),b=new Dx(d,g,{includeMetadataChanges:!0,qa:!0});return Ax(o,b)})(await Qh(s),s.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="firestore.googleapis.com",Xv=!0;class ew{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pS,this.ssl=Xv}else this.host=e.host,this.ssl=e.ssl??Xv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=H1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<E4)throw new Oe(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Oe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Oe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Oe(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ew({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ew(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new tP;switch(r.type){case"firstParty":return new iP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Oe(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Qv.get(t);r&&(Ke("ComponentProvider","Removing Datastore"),Qv.delete(t),r.terminate())})(this),Promise.resolve()}}function ZA(s,e,t,r={}){var h;s=Ks(s,Vm);const i=wi(e),o=s._getSettings(),c={...o,emulatorOptions:s._getEmulatorOptions()},d=`${e}:${t}`;i&&(vm(`https://${d}`),wm("Firestore",!0)),o.host!==pS&&o.host!==d&&Hl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:d,ssl:i,emulatorOptions:r};if(!Ki(m,c)&&(s._setSettings(m),r.mockUserToken)){let g,b;if(typeof r.mockUserToken=="string")g=r.mockUserToken,b=ys.MOCK_USER;else{g=$j(r.mockUserToken,(h=s._app)==null?void 0:h.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Oe(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new ys(w)}s._authCredentials=new nP(new r1(g,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class Sn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Va(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}toJSON(){return{type:Sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Wd(t,Sn._jsonSchema))return new Sn(e,r||null,new st(rn.fromString(t.referencePath)))}}Sn._jsonSchemaVersion="firestore/documentReference/1.0",Sn._jsonSchema={type:Fn("string",Sn._jsonSchemaVersion),referencePath:Fn("string")};class Va extends ji{constructor(e,t,r){super(e,t,Tm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new st(e))}withConverter(e){return new Va(this.firestore,e,this._path)}}function At(s,e,...t){if(s=Kt(s),i1("collection","path",e),s instanceof Vm){const r=rn.fromString(e,...t);return pv(r),new Va(s,null,r)}{if(!(s instanceof Sn||s instanceof Va))throw new Oe(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(rn.fromString(e,...t));return pv(r),new Va(s.firestore,null,r)}}function dt(s,e,...t){if(s=Kt(s),arguments.length===1&&(e=dx.newId()),i1("doc","path",e),s instanceof Vm){const r=rn.fromString(e,...t);return mv(r),new Sn(s,null,new st(r))}{if(!(s instanceof Sn||s instanceof Va))throw new Oe(be.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(rn.fromString(e,...t));return mv(r),new Sn(s.firestore,s instanceof Va?s.converter:null,new st(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="AsyncQueue";class nw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Y1(this,"async_queue_retry"),this._c=()=>{const r=$f();r&&Ke(tw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=$f();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=$f();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Gi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!uc(e))throw e;Ke(tw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Yi("INTERNAL UNHANDLED ERROR: ",sw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Tx.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&ht(47125,{Pc:sw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sw(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(s){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(s,["next","error","complete"])}class Qi extends Vm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nw(e),this._firestoreClient=void 0,await e}}}function fS(s,e){const t=typeof s=="object"?s:lc(),r=typeof s=="string"?s:e||$h,i=Ni(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=ix("firestore");o&&ZA(i,...o)}return i}function Om(s){if(s._terminated)throw new Oe(be.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||QA(s),s._firestoreClient}function QA(s){var r,i,o;const e=s._freezeSettings(),t=(function(d,m,h,g){return new jP(d,m,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,mS(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new HA(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _r(cs.fromBase64String(e))}catch(t){throw new Oe(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _r(cs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wd(e,_r._jsonSchema))return _r.fromBase64String(e.bytes)}}_r._jsonSchemaVersion="firestore/bytes/1.0",_r._jsonSchema={type:Fn("string",_r._jsonSchemaVersion),bytes:Fn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Oe(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ls(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pi._jsonSchemaVersion}}static fromJSON(e){if(Wd(e,pi._jsonSchema))return new pi(e.latitude,e.longitude)}}pi._jsonSchemaVersion="firestore/geoPoint/1.0",pi._jsonSchema={type:Fn("string",pi._jsonSchemaVersion),latitude:Fn("number"),longitude:Fn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wd(e,fi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new fi(e.vectorValues);throw new Oe(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fi._jsonSchemaVersion="firestore/vectorValue/1.0",fi._jsonSchema={type:Fn("string",fi._jsonSchemaVersion),vectorValues:Fn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=/^__.*__$/;class eI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kd(e,this.data,t,this.fieldTransforms)}}class gS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht(40011,{Ac:s})}}class Um{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Um({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(xS(this.Ac)&&XA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Mm(e)}Cc(e,t,r,i=!1){return new Um({Ac:e,methodName:t,Dc:r,path:ls.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xd(s){const e=s._freezeSettings(),t=Mm(s._databaseId);return new tI(s._databaseId,!!e.ignoreUndefinedProperties,t)}function yS(s,e,t,r,i,o={}){const c=s.Cc(o.merge||o.mergeFields?2:0,e,t,i);Fx("Data must be an object, but it was:",c,r);const d=vS(r,c);let m,h;if(o.merge)m=new lr(c.fieldMask),h=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const b of o.mergeFields){const w=Ag(e,b,t);if(!c.contains(w))throw new Oe(be.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);NS(g,w)||g.push(w)}m=new lr(g),h=c.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,h=c.fieldTransforms;return new eI(new Gs(d),m,h)}class Bm extends Qd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bm}}function nI(s,e,t){return new Um({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Vx extends Qd{_toFieldTransform(e){return new R1(e.path,new Ed)}isEqual(e){return e instanceof Vx}}class Ox extends Qd{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=nI(this,e,!0),r=this.vc.map((o=>mc(o,t))),i=new Zl(r);return new R1(e.path,i)}isEqual(e){return e instanceof Ox&&Ki(this.vc,e.vc)}}function sI(s,e,t,r){const i=s.Cc(1,e,t);Fx("Data must be an object, but it was:",i,r);const o=[],c=Gs.empty();Qa(r,((m,h)=>{const g=Ux(e,m,t);h=Kt(h);const b=i.yc(g);if(h instanceof Bm)o.push(g);else{const w=mc(h,b);w!=null&&(o.push(g),c.set(g,w))}}));const d=new lr(o);return new gS(c,d,i.fieldTransforms)}function rI(s,e,t,r,i,o){const c=s.Cc(1,e,t),d=[Ag(e,r,t)],m=[i];if(o.length%2!=0)throw new Oe(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)d.push(Ag(e,o[w])),m.push(o[w+1]);const h=[],g=Gs.empty();for(let w=d.length-1;w>=0;--w)if(!NS(h,d[w])){const P=d[w];let C=m[w];C=Kt(C);const k=c.yc(P);if(C instanceof Bm)h.push(P);else{const E=mc(C,k);E!=null&&(h.push(P),g.set(P,E))}}const b=new lr(h);return new gS(g,b,c.fieldTransforms)}function bS(s,e,t,r=!1){return mc(t,s.Cc(r?4:3,e))}function mc(s,e){if(wS(s=Kt(s)))return Fx("Unsupported field value:",e,s),vS(s,e);if(s instanceof Qd)return(function(r,i){if(!xS(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let c=0;for(const d of r){let m=mc(d,i.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}})(s,e)}return(function(r,i){if((r=Kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=dn.fromDate(r);return{timestampValue:Kh(i.serializer,o)}}if(r instanceof dn){const o=new dn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kh(i.serializer,o)}}if(r instanceof pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _r)return{bytesValue:O1(i.serializer,r._byteString)};if(r instanceof Sn){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:vx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fi)return(function(c,d){return{mapValue:{fields:{[p1]:{stringValue:f1},[qh]:{arrayValue:{values:c.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return gx(d.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Sm(r)}`)})(s,e)}function vS(s,e){const t={};return l1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qa(s,((r,i)=>{const o=mc(i,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function wS(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof dn||s instanceof pi||s instanceof _r||s instanceof Sn||s instanceof Qd||s instanceof fi)}function Fx(s,e,t){if(!wS(t)||!a1(t)){const r=Sm(t);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Ag(s,e,t){if((e=Kt(e))instanceof Fm)return e._internalPath;if(typeof e=="string")return Ux(s,e);throw Xh("Field path arguments must be of type string or ",s,!1,void 0,t)}const iI=new RegExp("[~\\*/\\[\\]]");function Ux(s,e,t){if(e.search(iI)>=0)throw Xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Fm(...e.split("."))._internalPath}catch{throw Xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Xh(s,e,t,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new Oe(be.INVALID_ARGUMENT,d+s+m)}function NS(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($m("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aI extends Bx{data(){return super.data()}}function $m(s,e){return typeof e=="string"?Ux(s,e):e instanceof Fm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Oe(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $x{}class qm extends $x{}function sn(s,e,...t){let r=[];e instanceof $x&&r.push(e),r=r.concat(t),(function(o){const c=o.filter((m=>m instanceof qx)).length,d=o.filter((m=>m instanceof Gm)).length;if(c>1||c>0&&d>0)throw new Oe(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)s=i._apply(s);return s}class Gm extends qm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Gm(e,t,r)}_apply(e){const t=this._parse(e);return SS(e._query,t),new ji(e.firestore,e.converter,wg(e._query,t))}_parse(e){const t=Xd(e.firestore);return(function(o,c,d,m,h,g,b){let w;if(h.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Oe(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){aw(b,g);const C=[];for(const k of b)C.push(iw(m,o,k));w={arrayValue:{values:C}}}else w=iw(m,o,b)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||aw(b,g),w=bS(d,c,b,g==="in"||g==="not-in");return On.create(h,g,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function zn(s,e,t){const r=e,i=$m("where",s);return Gm._create(i,r,t)}class qx extends $x{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qx(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Br.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let c=i;const d=o.getFlattenedFilters();for(const m of d)SS(c,m),c=wg(c,m)})(e._query,t),new ji(e.firestore,e.converter,wg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gx extends qm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gx(e,t)}_apply(e){const t=(function(i,o,c){if(i.startAt!==null)throw new Oe(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Oe(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kd(o,c)})(e._query,this._field,this._direction);return new ji(e.firestore,e.converter,(function(i,o){const c=i.explicitOrderBy.concat([o]);return new Yo(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function ci(s,e="asc"){const t=e,r=$m("orderBy",s);return Gx._create(r,t)}class Hx extends qm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Hx(e,t,r)}_apply(e){return new ji(e.firestore,e.converter,Hh(e._query,this._limit,this._limitType))}}function Ll(s){return hP("limit",s),Hx._create("limit",s,"F")}class Wx extends qm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Wx(e,t,r)}_apply(e){const t=lI(e,this.type,this._docOrFields,this._inclusive);return new ji(e.firestore,e.converter,(function(i,o){return new Yo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,t))}}function oI(...s){return Wx._create("startAfter",s,!1)}function lI(s,e,t,r){if(t[0]=Kt(t[0]),t[0]instanceof Bx)return(function(o,c,d,m,h){if(!m)throw new Oe(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const g=[];for(const b of Fl(o))if(b.field.isKeyField())g.push(Gh(c,m.key));else{const w=m.data.field(b.field);if(km(w))throw new Oe(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){const P=b.field.canonicalString();throw new Oe(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}g.push(w)}return new Yl(g,h)})(s._query,s.firestore._databaseId,e,t[0]._document,r);{const i=Xd(s.firestore);return(function(c,d,m,h,g,b){const w=c.explicitOrderBy;if(g.length>w.length)throw new Oe(be.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let C=0;C<g.length;C++){const k=g[C];if(w[C].field.isKeyField()){if(typeof k!="string")throw new Oe(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof k}`);if(!fx(c)&&k.indexOf("/")!==-1)throw new Oe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${k}' contains a slash.`);const E=c.path.child(rn.fromString(k));if(!st.isDocumentKey(E))throw new Oe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const F=new st(E);P.push(Gh(d,F))}else{const E=bS(m,h,k);P.push(E)}}return new Yl(P,b)})(s._query,s.firestore._databaseId,i,e,t,r)}}function iw(s,e,t){if(typeof(t=Kt(t))=="string"){if(t==="")throw new Oe(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fx(e)&&t.indexOf("/")!==-1)throw new Oe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rn.fromString(t));if(!st.isDocumentKey(r))throw new Oe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gh(s,new st(r))}if(t instanceof Sn)return Gh(s,t._key);throw new Oe(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sm(t)}.`)}function aw(s,e){if(!Array.isArray(s)||s.length===0)throw new Oe(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SS(s,e){const t=(function(i,o){for(const c of i)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(s.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Oe(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Oe(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class cI{convertValue(e,t="none"){switch($a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ht(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Qa(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){var r,i,o;const t=(o=(i=(r=e.fields)==null?void 0:r[qh].arrayValue)==null?void 0:i.values)==null?void 0:o.map((c=>Pn(c.doubleValue)));return new fi(t)}convertGeoPoint(e){return new pi(Pn(e.latitude),Pn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Em(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sd(e));default:return null}}convertTimestamp(e){const t=Ua(e);return new dn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rn.fromString(e);Zt(G1(r),9688,{name:e});const i=new _d(r.get(1),r.get(3)),o=new st(r.popFirst(5));return i.isEqual(t)||Yi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class od{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mo extends Bx{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($m("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Mo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mo._jsonSchema={type:Fn("string",Mo._jsonSchemaVersion),bundleSource:Fn("string","DocumentSnapshot"),bundleName:Fn("string"),bundle:Fn("string")};class Th extends Mo{data(e={}){return super.data(e)}}class Lo{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new od(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Th(this._firestore,this._userDataWriter,r.key,r,new od(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((d=>{const m=new Th(i._firestore,i._userDataWriter,d.doc.key,d.doc,new od(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const m=new Th(i._firestore,i._userDataWriter,d.doc.key,d.doc,new od(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,g=-1;return d.type!==0&&(h=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),g=c.indexOf(d.doc.key)),{type:dI(d.type),doc:m,oldIndex:h,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(s){s=Ks(s,Sn);const e=Ks(s.firestore,Qi);return JA(Om(e),s._key).then((t=>CS(e,s,t)))}Lo._jsonSchemaVersion="firestore/querySnapshot/1.0",Lo._jsonSchema={type:Fn("string",Lo._jsonSchemaVersion),bundleSource:Fn("string","QuerySnapshot"),bundleName:Fn("string"),bundle:Fn("string")};class Kx extends cI{constructor(e){super(),this.firestore=e}convertBytes(e){return new _r(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}function Qn(s){s=Ks(s,ji);const e=Ks(s.firestore,Qi),t=Om(e),r=new Kx(e);return jS(s._query),YA(t,s._query).then((i=>new Lo(e,r,s,i)))}function jr(s,e,t){s=Ks(s,Sn);const r=Ks(s.firestore,Qi),i=_S(s.converter,e,t);return Hm(r,[yS(Xd(r),"setDoc",s._key,i,s.converter!==null,t).toMutation(s._key,kr.none())])}function Ft(s,e,t,...r){s=Ks(s,Sn);const i=Ks(s.firestore,Qi),o=Xd(i);let c;return c=typeof(e=Kt(e))=="string"||e instanceof Fm?rI(o,"updateDoc",s._key,e,t,r):sI(o,"updateDoc",s._key,e),Hm(i,[c.toMutation(s._key,kr.exists(!0))])}function pd(s){return Hm(Ks(s.firestore,Qi),[new xx(s._key,kr.none())])}function Fi(s,e){const t=Ks(s.firestore,Qi),r=dt(s),i=_S(s.converter,e);return Hm(t,[yS(Xd(s.firestore),"addDoc",r._key,i,s.converter!==null,{}).toMutation(r._key,kr.exists(!1))]).then((()=>r))}function di(s,...e){var m,h,g;s=Kt(s);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||rw(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(rw(e[r])){const b=e[r];e[r]=(m=b.next)==null?void 0:m.bind(b),e[r+1]=(h=b.error)==null?void 0:h.bind(b),e[r+2]=(g=b.complete)==null?void 0:g.bind(b)}let o,c,d;if(s instanceof Sn)c=Ks(s.firestore,Qi),d=Tm(s._key.path),o={next:b=>{e[r]&&e[r](CS(c,s,b))},error:e[r+1],complete:e[r+2]};else{const b=Ks(s,ji);c=Ks(b.firestore,Qi),d=b._query;const w=new Kx(c);o={next:P=>{e[r]&&e[r](new Lo(c,w,b,P))},error:e[r+1],complete:e[r+2]},jS(s._query)}return(function(w,P,C,k){const E=new zx(k),F=new Dx(P,E,C);return w.asyncQueue.enqueueAndForget((async()=>Ax(await Qh(w),F))),()=>{E.Nu(),w.asyncQueue.enqueueAndForget((async()=>Ix(await Qh(w),F)))}})(Om(c),d,i,o)}function Hm(s,e){return(function(r,i){const o=new Gi;return r.asyncQueue.enqueueAndForget((async()=>zA(await KA(r),i,o))),o.promise})(Om(s),e)}function CS(s,e,t){const r=t.docs.get(e._key),i=new Kx(s);return new Mo(s,i,e._key,r,new od(t.hasPendingWrites,t.fromCache),e.converter)}function Ig(){return new Vx("serverTimestamp")}function Eo(...s){return new Ox("arrayUnion",s)}(function(e,t=!0){(function(i){cc=i})(Jo),Js(new Ps("firestore",((r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),d=new Qi(new sP(r.getProvider("auth-internal")),new aP(c,r.getProvider("app-check-internal")),(function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Oe(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _d(h.options.projectId,g)})(c,i),c);return o={useFetchStreams:t,...o},d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),Xn(cv,dv,e),Xn(cv,dv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="firebasestorage.googleapis.com",ES="storageBucket",uI=120*1e3,hI=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends hr{constructor(e,t,r=0){super(Gf(e),`Firebase Storage: ${t} (${Gf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _n;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_n||(_n={}));function Gf(s){return"storage/"+s}function Jx(){const s="An unknown error occurred, please check the error payload for server response.";return new kn(_n.UNKNOWN,s)}function mI(s){return new kn(_n.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function pI(s){return new kn(_n.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function fI(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new kn(_n.UNAUTHENTICATED,s)}function gI(){return new kn(_n.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function xI(s){return new kn(_n.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function yI(){return new kn(_n.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bI(){return new kn(_n.CANCELED,"User canceled the upload/download.")}function vI(s){return new kn(_n.INVALID_URL,"Invalid URL '"+s+"'.")}function wI(s){return new kn(_n.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function NI(){return new kn(_n.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ES+"' property when initializing the app?")}function jI(){return new kn(_n.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function SI(){return new kn(_n.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _I(s){return new kn(_n.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rg(s){return new kn(_n.INVALID_ARGUMENT,s)}function TS(){return new kn(_n.APP_DELETED,"The Firebase app was deleted.")}function CI(s){return new kn(_n.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fd(s,e){return new kn(_n.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function ed(s){throw new kn(_n.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=cr.makeFromUrl(e,t)}catch{return new cr(e,"")}if(r.path==="")return r;throw wI(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+i+c,"i"),m={bucket:1,path:3};function h(Z){Z.path_=decodeURIComponent(Z.path)}const g="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",P=new RegExp(`^https?://${b}/${g}/b/${i}/o${w}`,"i"),C={bucket:1,path:3},k=t===kS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,E="([^?#]*)",F=new RegExp(`^https?://${k}/${i}/${E}`,"i"),q=[{regex:d,indices:m,postModify:o},{regex:P,indices:C,postModify:h},{regex:F,indices:{bucket:1,path:2},postModify:h}];for(let Z=0;Z<q.length;Z++){const W=q[Z],$=W.regex.exec(e);if($){const R=$[W.indices.bucket];let _=$[W.indices.path];_||(_=""),r=new cr(R,_),W.postModify(r);break}}if(r==null)throw vI(e);return r}}class kI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(s,e,t){let r=1,i=null,o=null,c=!1,d=0;function m(){return d===2}let h=!1;function g(...E){h||(h=!0,e.apply(null,E))}function b(E){i=setTimeout(()=>{i=null,s(P,m())},E)}function w(){o&&clearTimeout(o)}function P(E,...F){if(h){w();return}if(E){w(),g.call(null,E,...F);return}if(m()||c){w(),g.call(null,E,...F);return}r<64&&(r*=2);let q;d===1?(d=2,q=0):q=(r+Math.random())*1e3,b(q)}let C=!1;function k(E){C||(C=!0,w(),!h&&(i!==null?(E||(d=2),clearTimeout(i),b(0)):E||(d=1)))}return b(0),o=setTimeout(()=>{c=!0,k(!0)},t),k}function TI(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(s){return s!==void 0}function AI(s){return typeof s=="object"&&!Array.isArray(s)}function Yx(s){return typeof s=="string"||s instanceof String}function ow(s){return Zx()&&s instanceof Blob}function Zx(){return typeof Blob<"u"}function lw(s,e,t,r){if(r<e)throw Rg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>t)throw Rg(`Invalid value for '${s}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(s,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${s}`}function PS(s){const e=encodeURIComponent;let t="?";for(const r in s)if(s.hasOwnProperty(r)){const i=e(r)+"="+e(s[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var zo;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(zo||(zo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(s,e){const t=s>=500&&s<600,i=[408,429].indexOf(s)!==-1,o=e.indexOf(s)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,t,r,i,o,c,d,m,h,g,b,w=!0,P=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=m,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=b,this.retry=w,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,k)=>{this.resolve_=C,this.reject_=k,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new mh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=d=>{const m=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,h)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const d=o.getErrorCode()===zo.NO_ERROR,m=o.getStatus();if(!d||II(m,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===zo.ABORT;r(!1,new mh(!1,null,g));return}const h=this.successCodes_.indexOf(m)!==-1;r(!0,new mh(h,o))})},t=(r,i)=>{const o=this.resolve_,c=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());PI(m)?o(m):o()}catch(m){c(m)}else if(d!==null){const m=Jx();m.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,m)):c(m)}else if(i.canceled){const m=this.appDelete_?TS():bI();c(m)}else{const m=yI();c(m)}};this.canceled_?t(!1,new mh(!1,null,!0)):this.backoffId_=EI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function DI(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function MI(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function LI(s,e){e&&(s["X-Firebase-GMPID"]=e)}function zI(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function VI(s,e,t,r,i,o,c=!0,d=!1){const m=PS(s.urlParams),h=s.url+m,g=Object.assign({},s.headers);return LI(g,e),DI(g,t),MI(g,o),zI(g,r),new RI(h,s.method,g,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,i,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function FI(...s){const e=OI();if(e!==void 0){const t=new e;for(let r=0;r<s.length;r++)t.append(s[r]);return t.getBlob()}else{if(Zx())return new Blob(s);throw new kn(_n.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function UI(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(s){if(typeof atob>"u")throw _I("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hf{constructor(e,t){this.data=e,this.contentType=t||null}}function AS(s,e){switch(s){case Fr.RAW:return new Hf(IS(e));case Fr.BASE64:case Fr.BASE64URL:return new Hf(RS(s,e));case Fr.DATA_URL:return new Hf(qI(e),GI(e))}throw Jx()}function IS(s){const e=[];for(let t=0;t<s.length;t++){let r=s.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,c=s.charCodeAt(++t);r=65536|(o&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function $I(s){let e;try{e=decodeURIComponent(s)}catch{throw fd(Fr.DATA_URL,"Malformed data URL.")}return IS(e)}function RS(s,e){switch(s){case Fr.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw fd(s,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Fr.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw fd(s,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=BI(e)}catch(i){throw i.message.includes("polyfill")?i:fd(s,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class DS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw fd(Fr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=HI(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function qI(s){const e=new DS(s);return e.base64?RS(Fr.BASE64,e.rest):$I(e.rest)}function GI(s){return new DS(s).contentType}function HI(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t){let r=0,i="";ow(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(ow(this.data_)){const r=this.data_,i=UI(r,e,t);return i===null?null:new _a(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new _a(r,!0)}}static getBlob(...e){if(Zx()){const t=e.map(r=>r instanceof _a?r.data_:r);return new _a(FI.apply(null,t))}else{const t=e.map(c=>Yx(c)?AS(Fr.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)i[o++]=c[d]}),new _a(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(s){let e;try{e=JSON.parse(s)}catch{return null}return AI(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function KI(s,e){const t=e.split("/").filter(r=>r.length>0).join("/");return s.length===0?t:s+"/"+t}function LS(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(s,e){return e}class _s{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||JI}}let ph=null;function YI(s){return!Yx(s)||s.length<2?s:LS(s)}function zS(){if(ph)return ph;const s=[];s.push(new _s("bucket")),s.push(new _s("generation")),s.push(new _s("metageneration")),s.push(new _s("name","fullPath",!0));function e(o,c){return YI(c)}const t=new _s("name");t.xform=e,s.push(t);function r(o,c){return c!==void 0?Number(c):c}const i=new _s("size");return i.xform=r,s.push(i),s.push(new _s("timeCreated")),s.push(new _s("updated")),s.push(new _s("md5Hash",null,!0)),s.push(new _s("cacheControl",null,!0)),s.push(new _s("contentDisposition",null,!0)),s.push(new _s("contentEncoding",null,!0)),s.push(new _s("contentLanguage",null,!0)),s.push(new _s("contentType",null,!0)),s.push(new _s("metadata","customMetadata",!0)),ph=s,ph}function ZI(s,e){function t(){const r=s.bucket,i=s.fullPath,o=new cr(r,i);return e._makeStorageReference(o)}Object.defineProperty(s,"ref",{get:t})}function QI(s,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const c=t[o];r[c.local]=c.xform(r,e[c.server])}return ZI(r,s),r}function VS(s,e,t){const r=MS(e);return r===null?null:QI(s,r,t)}function XI(s,e,t,r){const i=MS(e);if(i===null||!Yx(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(h=>{const g=s.bucket,b=s.fullPath,w="/b/"+c(g)+"/o/"+c(b),P=Qx(w,t,r),C=PS({alt:"media",token:h});return P+C})[0]}function eR(s,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=s[o.local])}return JSON.stringify(t)}class OS{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(s){if(!s)throw Jx()}function tR(s,e){function t(r,i){const o=VS(s,i,e);return FS(o!==null),o}return t}function nR(s,e){function t(r,i){const o=VS(s,i,e);return FS(o!==null),XI(o,i,s.host,s._protocol)}return t}function US(s){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=gI():i=fI():t.getStatus()===402?i=pI(s.bucket):t.getStatus()===403?i=xI(s.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function sR(s){const e=US(s);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=mI(s.path)),o.serverResponse=i.serverResponse,o}return t}function rR(s,e,t){const r=e.fullServerUrl(),i=Qx(r,s.host,s._protocol),o="GET",c=s.maxOperationRetryTime,d=new OS(i,o,nR(s,t),c);return d.errorHandler=sR(e),d}function iR(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function aR(s,e,t){const r=Object.assign({},t);return r.fullPath=s.path,r.size=e.size(),r.contentType||(r.contentType=iR(null,e)),r}function oR(s,e,t,r,i){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let q="";for(let Z=0;Z<2;Z++)q=q+Math.random().toString().slice(2);return q}const m=d();c["Content-Type"]="multipart/related; boundary="+m;const h=aR(e,r,i),g=eR(h,t),b="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+m+`\r
Content-Type: `+h.contentType+`\r
\r
`,w=`\r
--`+m+"--",P=_a.getBlob(b,r,w);if(P===null)throw jI();const C={name:h.fullPath},k=Qx(o,s.host,s._protocol),E="POST",F=s.maxUploadRetryTime,U=new OS(k,E,tR(s,t),F);return U.urlParams=C,U.headers=c,U.body=P.uploadData(),U.errorHandler=US(e),U}class lR{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw ed("cannot .send() more than once");if(wi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ed("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ed("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ed("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ed("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class cR extends lR{initXhr(){this.xhr_.responseType="text"}}function BS(){return new cR}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t){this._service=e,t instanceof cr?this._location=t:this._location=cr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Fo(e,t)}get root(){const e=new cr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LS(this._location.path)}get storage(){return this._service}get parent(){const e=WI(this._location.path);if(e===null)return null;const t=new cr(this._location.bucket,e);return new Fo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw CI(e)}}function $S(s,e,t){s._throwIfRoot("uploadBytes");const r=oR(s.storage,s._location,zS(),new _a(e,!0),t);return s.storage.makeRequestWithTokens(r,BS).then(i=>({metadata:i,ref:s}))}function dR(s,e,t=Fr.RAW,r){s._throwIfRoot("uploadString");const i=AS(t,e),o={...r};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),$S(s,i.data,o)}function uR(s){s._throwIfRoot("getDownloadURL");const e=rR(s.storage,s._location,zS());return s.storage.makeRequestWithTokens(e,BS).then(t=>{if(t===null)throw SI();return t})}function hR(s,e){const t=KI(s._location.path,e),r=new cr(s._location.bucket,t);return new Fo(s.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(s){return/^[A-Za-z]+:\/\//.test(s)}function pR(s,e){return new Fo(s,e)}function qS(s,e){if(s instanceof Xx){const t=s;if(t._bucket==null)throw NI();const r=new Fo(t,t._bucket);return e!=null?qS(r,e):r}else return e!==void 0?hR(s,e):s}function fR(s,e){if(e&&mR(e)){if(s instanceof Xx)return pR(s,e);throw Rg("To use ref(service, url), the first argument must be a Storage instance.")}else return qS(s,e)}function cw(s,e){const t=e==null?void 0:e[ES];return t==null?null:cr.makeFromBucketSpec(t,s)}function gR(s,e,t,r={}){s.host=`${e}:${t}`;const i=wi(e);i&&(vm(`https://${s.host}/b`),wm("Storage",!0)),s._isUsingEmulator=!0,s._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(s._overrideAuthToken=typeof o=="string"?o:$j(o,s.app.options.projectId))}class Xx{constructor(e,t,r,i,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=kS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uI,this._maxUploadRetryTime=hI,this._requests=new Set,i!=null?this._bucket=cr.makeFromBucketSpec(i,this._host):this._bucket=cw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cr.makeFromBucketSpec(this._url,e):this._bucket=cw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(qs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fo(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new kI(TS());{const c=VI(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const dw="@firebase/storage",uw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="storage";function HS(s,e,t){return s=Kt(s),$S(s,e,t)}function xR(s,e,t,r){return s=Kt(s),dR(s,e,t,r)}function Vr(s){return s=Kt(s),uR(s)}function Or(s,e){return s=Kt(s),fR(s,e)}function WS(s=lc(),e){s=Kt(s);const r=Ni(s,GS).getImmediate({identifier:e}),i=ix("storage");return i&&yR(r,...i),r}function yR(s,e,t,r={}){gR(s,e,t,r)}function bR(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),i=s.getProvider("app-check-internal");return new Xx(t,r,i,e,Jo)}function vR(){Js(new Ps(GS,bR,"PUBLIC").setMultipleInstances(!0)),Xn(dw,uw,""),Xn(dw,uw,"esm2020")}vR();function KS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wR=KS,JS=new Za("auth","Firebase",KS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=new Nm("@firebase/auth");function NR(s,...e){em.logLevel<=Mt.WARN&&em.warn(`Auth (${Jo}): ${s}`,...e)}function Ph(s,...e){em.logLevel<=Mt.ERROR&&em.error(`Auth (${Jo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(s,...e){throw e0(s,...e)}function gi(s,...e){return e0(s,...e)}function YS(s,e,t){const r={...wR(),[e]:t};return new Za("auth","Firebase",r).create(e,{appName:s.name})}function Hi(s){return YS(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e0(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return JS.create(s,...e)}function ut(s,e,...t){if(!s)throw e0(e,...t)}function Ui(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Ph(e),new Error(e)}function Xi(s,e){s||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function jR(){return hw()==="http:"||hw()==="https:"}function hw(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jR()||qj()||"connection"in navigator)?navigator.onLine:!0}function _R(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xi(t>e,"Short delay should be less than long delay!"),this.isMobile=TE()||IE()}get(){return SR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(s,e){Xi(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ER=new eu(3e4,6e4);function eo(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function to(s,e,t,r,i={}){return QS(s,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const d=Hd({key:s.config.apiKey,...c}).slice(1),m=await s._getAdditionalHeaders();m["Content-Type"]="application/json",s.languageCode&&(m["X-Firebase-Locale"]=s.languageCode);const h={method:e,headers:m,...o};return AE()||(h.referrerPolicy="no-referrer"),s.emulatorConfig&&wi(s.emulatorConfig.host)&&(h.credentials="include"),ZS.fetch()(await XS(s,s.config.apiHost,t,d),h)})}async function QS(s,e,t){s._canInitEmulator=!1;const r={...CR,...e};try{const i=new PR(s),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw fh(s,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[m,h]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw fh(s,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw fh(s,"email-already-in-use",c);if(m==="USER_DISABLED")throw fh(s,"user-disabled",c);const g=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw YS(s,g,h);$r(s,g)}}catch(i){if(i instanceof hr)throw i;$r(s,"network-request-failed",{message:String(i)})}}async function tu(s,e,t,r,i={}){const o=await to(s,e,t,r,i);return"mfaPendingCredential"in o&&$r(s,"multi-factor-auth-required",{_serverResponse:o}),o}async function XS(s,e,t,r){const i=`${e}${t}?${r}`,o=s,c=o.config.emulator?t0(s.config,i):`${s.config.apiScheme}://${i}`;return kR.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function TR(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(gi(this.auth,"network-request-failed")),ER.get())})}}function fh(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=gi(s,e,r);return i.customData._tokenResponse=t,i}function mw(s){return s!==void 0&&s.enterprise!==void 0}class AR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return TR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function IR(s,e){return to(s,"GET","/v2/recaptchaConfig",eo(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(s,e){return to(s,"POST","/v1/accounts:delete",e)}async function tm(s,e){return to(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DR(s,e=!1){const t=Kt(s),r=await t.getIdToken(e),i=n0(r);ut(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:gd(Wf(i.auth_time)),issuedAtTime:gd(Wf(i.iat)),expirationTime:gd(Wf(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Wf(s){return Number(s)*1e3}function n0(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return Ph("JWT malformed, contained fewer than 3 sections"),null;try{const i=Oj(t);return i?JSON.parse(i):(Ph("Failed to decode base64 JWT payload"),null)}catch(i){return Ph("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function pw(s){const e=n0(s);return ut(e,"internal-error"),ut(typeof e.exp<"u","internal-error"),ut(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ad(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof hr&&MR(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function MR({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gd(this.lastLoginAt),this.creationTime=gd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nm(s){var b;const e=s.auth,t=await s.getIdToken(),r=await Ad(s,tm(e,{idToken:t}));ut(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];s._notifyReloadListener(i);const o=(b=i.providerUserInfo)!=null&&b.length?e_(i.providerUserInfo):[],c=VR(s.providerData,o),d=s.isAnonymous,m=!(s.email&&i.passwordHash)&&!(c!=null&&c.length),h=d?m:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Mg(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(s,g)}async function zR(s){const e=Kt(s);await nm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VR(s,e){return[...s.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function e_(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(s,e){const t=await QS(s,{},async()=>{const r=Hd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=s.config,c=await XS(s,i,"/v1/token",`key=${o}`),d=await s._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return s.emulatorConfig&&wi(s.emulatorConfig.host)&&(m.credentials="include"),ZS.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function FR(s,e){return to(s,"POST","/v2/accounts:revokeToken",eo(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ut(e.idToken,"internal-error"),ut(typeof e.idToken<"u","internal-error"),ut(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ut(e.length!==0,"internal-error");const t=pw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ut(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await OR(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new Bl;return r&&(ut(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(ut(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(ut(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bl,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(s,e){ut(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Ur{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new LR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Mg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ad(this,this.stsTokenManager.getToken(this.auth,e));return ut(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return DR(this,e)}reload(){return zR(this)}_assign(e){this!==e&&(ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ur({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await nm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qs(this.auth.app))return Promise.reject(Hi(this.auth));const e=await this.getIdToken();return await Ad(this,RR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,h=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:b,emailVerified:w,isAnonymous:P,providerData:C,stsTokenManager:k}=t;ut(b&&k,e,"internal-error");const E=Bl.fromJSON(this.name,k);ut(typeof b=="string",e,"internal-error"),Na(r,e.name),Na(i,e.name),ut(typeof w=="boolean",e,"internal-error"),ut(typeof P=="boolean",e,"internal-error"),Na(o,e.name),Na(c,e.name),Na(d,e.name),Na(m,e.name),Na(h,e.name),Na(g,e.name);const F=new Ur({uid:b,auth:e,email:i,emailVerified:w,displayName:r,isAnonymous:P,photoURL:c,phoneNumber:o,tenantId:d,stsTokenManager:E,createdAt:h,lastLoginAt:g});return C&&Array.isArray(C)&&(F.providerData=C.map(U=>({...U}))),m&&(F._redirectEventId=m),F}static async _fromIdTokenResponse(e,t,r=!1){const i=new Bl;i.updateFromServerResponse(t);const o=new Ur({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await nm(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ut(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?e_(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),d=new Bl;d.updateFromIdToken(r);const m=new Ur({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Mg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,h),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=new Map;function Bi(s){Xi(s instanceof Function,"Expected a class definition");let e=fw.get(s);return e?(Xi(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,fw.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}t_.type="NONE";const gw=t_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(s,e,t){return`firebase:${s}:${e}:${t}`}class $l{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Ah(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ah("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await tm(this.auth,{idToken:e}).catch(()=>{});return t?Ur._fromGetAccountInfoResponse(this.auth,t,e):null}return Ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new $l(Bi(gw),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=i[0]||Bi(gw);const c=Ah(r,e.config.apiKey,e.name);let d=null;for(const h of t)try{const g=await h._get(c);if(g){let b;if(typeof g=="string"){const w=await tm(e,{idToken:g}).catch(()=>{});if(!w)break;b=await Ur._fromGetAccountInfoResponse(e,w,g)}else b=Ur._fromJSON(e,g);h!==o&&(d=b),o=h;break}}catch{}const m=i.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new $l(o,e,r):(o=m[0],d&&await o._set(c,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==o)try{await h._remove(c)}catch{}})),new $l(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(i_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(n_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(o_(e))return"Blackberry";if(l_(e))return"Webos";if(s_(e))return"Safari";if((e.includes("chrome/")||r_(e))&&!e.includes("edge/"))return"Chrome";if(a_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function n_(s=ws()){return/firefox\//i.test(s)}function s_(s=ws()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function r_(s=ws()){return/crios\//i.test(s)}function i_(s=ws()){return/iemobile/i.test(s)}function a_(s=ws()){return/android/i.test(s)}function o_(s=ws()){return/blackberry/i.test(s)}function l_(s=ws()){return/webos/i.test(s)}function s0(s=ws()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function UR(s=ws()){var e;return s0(s)&&!!((e=window.navigator)!=null&&e.standalone)}function BR(){return RE()&&document.documentMode===10}function c_(s=ws()){return s0(s)||a_(s)||l_(s)||o_(s)||/windows phone/i.test(s)||i_(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(s,e=[]){let t;switch(s){case"Browser":t=xw(ws());break;case"Worker":t=`${xw(ws())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Jo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,d)=>{try{const m=e(o);c(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(s,e={}){return to(s,"GET","/v2/passwordPolicy",eo(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=6;class HR{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??GR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yw(this),this.idTokenSubscription=new yw(this),this.beforeStateQueue=new $R(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bi(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await $l.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await tm(this,{idToken:e}),r=await Ur._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(qs(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,d=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(r=m.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_R()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qs(this.app))return Promise.reject(Hi(this));const t=e?Kt(e):null;return t&&ut(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qs(this.app)?Promise.reject(Hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qs(this.app)?Promise.reject(Hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qR(this),t=new HR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Za("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await FR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bi(e)||this._popupRedirectResolver;ut(t,this,"argument-error"),this.redirectPersistenceManager=await $l.create(this,[Bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ut(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,i);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=d_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(qs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&NR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xo(s){return Kt(s)}class yw{constructor(e){this.auth=e,this.observer=null,this.addObserver=OE(t=>this.observer=t)}get next(){return ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KR(s){Wm=s}function u_(s){return Wm.loadJS(s)}function JR(){return Wm.recaptchaEnterpriseScript}function YR(){return Wm.gapiScript}function ZR(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class QR{constructor(){this.enterprise=new XR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class XR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const e5="recaptcha-enterprise",h_="NO_RECAPTCHA";class t5{constructor(e){this.type=e5,this.auth=Xo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{IR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new AR(m);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,c(h.siteKey)}}).catch(m=>{d(m)})})}function i(o,c,d){const m=window.grecaptcha;mw(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(h=>{c(h)}).catch(()=>{c(h_)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QR().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(d=>{if(!t&&mw(window.grecaptcha))i(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=JR();m.length!==0&&(m+=d),u_(m).then(()=>{i(d,o,c)}).catch(h=>{c(h)})}}).catch(d=>{c(d)})})}}async function bw(s,e,t,r=!1,i=!1){const o=new t5(s);let c;if(i)c=h_;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Lg(s,e,t,r,i){var o;if((o=s._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await bw(s,e,t,t==="getOobCode");return r(s,c)}else return r(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await bw(s,e,t,t==="getOobCode");return r(s,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(s,e){const t=Ni(s,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Ki(o,e??{}))return i;$r(i,"already-initialized")}return t.initialize({options:e})}function s5(s,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Bi);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function r5(s,e,t){const r=Xo(s);ut(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=m_(e),{host:c,port:d}=i5(e),m=d===null?"":`:${d}`,h={url:`${o}//${c}${m}/`},g=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ut(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ut(Ki(h,r.config.emulator)&&Ki(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,wi(c)?(vm(`${o}//${c}${m}`),wm("Auth",!0)):a5()}function m_(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function i5(s){const e=m_(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:vw(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:vw(c)}}}function vw(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function a5(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,t){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}async function o5(s,e){return to(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l5(s,e){return tu(s,"POST","/v1/accounts:signInWithPassword",eo(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c5(s,e){return tu(s,"POST","/v1/accounts:signInWithEmailLink",eo(s,e))}async function d5(s,e){return tu(s,"POST","/v1/accounts:signInWithEmailLink",eo(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends r0{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Id(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Id(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lg(e,t,"signInWithPassword",l5);case"emailLink":return c5(e,{email:this._email,oobCode:this._password});default:$r(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lg(e,r,"signUpPassword",o5);case"emailLink":return d5(e,{idToken:t,email:this._email,oobCode:this._password});default:$r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(s,e){return tu(s,"POST","/v1/accounts:signInWithIdp",eo(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5="http://localhost";class Uo extends r0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$r("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const c=new Uo(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ql(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ql(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ql(e,t)}buildRequest(){const e={requestUri:u5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m5(s){const e=nd(sd(s)).link,t=e?nd(sd(e)).deep_link_id:null,r=nd(sd(s)).deep_link_id;return(r?nd(sd(r)).link:null)||r||t||e||s}class i0{constructor(e){const t=nd(sd(e)),r=t.apiKey??null,i=t.oobCode??null,o=h5(t.mode??null);ut(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=m5(e);try{return new i0(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this.providerId=pc.PROVIDER_ID}static credential(e,t){return Id._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=i0.parseLink(t);return ut(r,"argument-error"),Id._fromEmailAndCode(e,r.code,r.tenantId)}}pc.PROVIDER_ID="password";pc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends p_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends nu{constructor(){super("facebook.com")}static credential(e){return Uo._fromParams({providerId:Ca.PROVIDER_ID,signInMethod:Ca.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ca.credentialFromTaggedObject(e)}static credentialFromError(e){return Ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ca.credential(e.oauthAccessToken)}catch{return null}}}Ca.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ca.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Uo._fromParams({providerId:ka.PROVIDER_ID,signInMethod:ka.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ka.credentialFromTaggedObject(e)}static credentialFromError(e){return ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ka.credential(t,r)}catch{return null}}}ka.GOOGLE_SIGN_IN_METHOD="google.com";ka.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends nu{constructor(){super("github.com")}static credential(e){return Uo._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ea.credential(e.oauthAccessToken)}catch{return null}}}Ea.GITHUB_SIGN_IN_METHOD="github.com";Ea.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends nu{constructor(){super("twitter.com")}static credential(e,t){return Uo._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ta.credential(t,r)}catch{return null}}}Ta.TWITTER_SIGN_IN_METHOD="twitter.com";Ta.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(s,e){return tu(s,"POST","/v1/accounts:signUp",eo(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Ur._fromIdTokenResponse(e,r,i),c=ww(r);return new Bo({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=ww(r);return new Bo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function ww(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends hr{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,sm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new sm(e,t,r,i)}}function f_(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sm._fromErrorAndOperation(s,o,e,r):o})}async function f5(s,e,t=!1){const r=await Ad(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Bo._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(s,e,t=!1){const{auth:r}=s;if(qs(r.app))return Promise.reject(Hi(r));const i="reauthenticate";try{const o=await Ad(s,f_(r,i,e,s),t);ut(o.idToken,r,"internal-error");const c=n0(o.idToken);ut(c,r,"internal-error");const{sub:d}=c;return ut(s.uid===d,r,"user-mismatch"),Bo._forOperation(s,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&$r(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g_(s,e,t=!1){if(qs(s.app))return Promise.reject(Hi(s));const r="signIn",i=await f_(s,r,e),o=await Bo._fromIdTokenResponse(s,r,i);return t||await s._updateCurrentUser(o.user),o}async function x5(s,e){return g_(Xo(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x_(s){const e=Xo(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function y5(s,e,t){if(qs(s.app))return Promise.reject(Hi(s));const r=Xo(s),c=await Lg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p5).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&x_(s),m}),d=await Bo._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function y_(s,e,t){return qs(s.app)?Promise.reject(Hi(s)):x5(Kt(s),pc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&x_(s),r})}function b5(s,e,t,r){return Kt(s).onIdTokenChanged(e,t,r)}function v5(s,e,t){return Kt(s).beforeAuthStateChanged(e,t)}const rm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rm,"1"),this.storage.removeItem(rm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=1e3,N5=10;class v_ extends b_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=c_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);BR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,N5):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},w5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}v_.type="LOCAL";const j5=v_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_ extends b_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}w_.type="SESSION";const N_=w_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Km(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async h=>h(t.origin,o)),m=await S5(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Km.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((d,m)=>{const h=a0("",20);i.port1.start();const g=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(b){const w=b;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(w.data.response);break;default:clearTimeout(g),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(){return window}function C5(s){xi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){return typeof xi().WorkerGlobalScope<"u"&&typeof xi().importScripts=="function"}async function k5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function E5(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function T5(){return j_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="firebaseLocalStorageDb",P5=1,im="firebaseLocalStorage",__="fbase_key";class su{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jm(s,e){return s.transaction([im],e?"readwrite":"readonly").objectStore(im)}function A5(){const s=indexedDB.deleteDatabase(S_);return new su(s).toPromise()}function zg(){const s=indexedDB.open(S_,P5);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(im,{keyPath:__})}catch(i){t(i)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(im)?e(r):(r.close(),await A5(),e(await zg()))})})}async function Nw(s,e,t){const r=Jm(s,!0).put({[__]:e,value:t});return new su(r).toPromise()}async function I5(s,e){const t=Jm(s,!1).get(e),r=await new su(t).toPromise();return r===void 0?null:r.value}function jw(s,e){const t=Jm(s,!0).delete(e);return new su(t).toPromise()}const R5=800,D5=3;class C_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>D5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return j_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Km._getInstance(T5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await k5(),!this.activeServiceWorker)return;this.sender=new _5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||E5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zg();return await Nw(e,rm,"1"),await jw(e,rm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Nw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>I5(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>jw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Jm(i,!1).getAll();return new su(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}C_.type="LOCAL";const M5=C_;new eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(s,e){return e?Bi(e):(ut(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends r0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ql(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ql(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function z5(s){return g_(s.auth,new o0(s),s.bypassAuthState)}function V5(s){const{auth:e,user:t}=s;return ut(t,e,"internal-error"),g5(t,new o0(s),s.bypassAuthState)}async function O5(s){const{auth:e,user:t}=s;return ut(t,e,"internal-error"),f5(t,new o0(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return z5;case"linkViaPopup":case"linkViaRedirect":return O5;case"reauthViaPopup":case"reauthViaRedirect":return V5;default:$r(this.auth,"internal-error")}}resolve(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=new eu(2e3,1e4);class zl extends k_{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,zl.currentPopupAction&&zl.currentPopupAction.cancel(),zl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ut(e,this.auth,"internal-error"),e}async onExecution(){Xi(this.filter.length===1,"Popup operations only handle one event");const e=a0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(gi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,F5.get())};e()}}zl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5="pendingRedirect",Ih=new Map;class B5 extends k_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ih.get(this.auth._key());if(!e){try{const r=await $5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ih.set(this.auth._key(),e)}return this.bypassAuthState||Ih.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $5(s,e){const t=H5(e),r=G5(s);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function q5(s,e){Ih.set(s._key(),e)}function G5(s){return Bi(s._redirectPersistence)}function H5(s){return Ah(U5,s.config.apiKey,s.name)}async function W5(s,e,t=!1){if(qs(s.app))return Promise.reject(Hi(s));const r=Xo(s),i=L5(r,e),c=await new B5(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=600*1e3;class J5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Y5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!E_(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(gi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sw(e))}saveEventToCache(e){this.cachedEventUids.add(Sw(e)),this.lastProcessedEventTime=Date.now()}}function Sw(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function E_({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Y5(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return E_(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(s,e={}){return to(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,X5=/^https?/;async function e3(s){if(s.config.emulator)return;const{authorizedDomains:e}=await Z5(s);for(const t of e)try{if(t3(t))return}catch{}$r(s,"unauthorized-domain")}function t3(s){const e=Dg(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!X5.test(t))return!1;if(Q5.test(s))return r===s;const i=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=new eu(3e4,6e4);function _w(){const s=xi().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function s3(s){return new Promise((e,t)=>{var i,o,c;function r(){_w(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_w(),t(gi(s,"network-request-failed"))},timeout:n3.get()})}if((o=(i=xi().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=xi().gapi)!=null&&c.load)r();else{const d=ZR("iframefcb");return xi()[d]=()=>{gapi.load?r():t(gi(s,"network-request-failed"))},u_(`${YR()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw Rh=null,e})}let Rh=null;function r3(s){return Rh=Rh||s3(s),Rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=new eu(5e3,15e3),a3="__/auth/iframe",o3="emulator/auth/iframe",l3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},c3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d3(s){const e=s.config;ut(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?t0(e,o3):`https://${s.config.authDomain}/${a3}`,r={apiKey:e.apiKey,appName:s.name,v:Jo},i=c3.get(s.config.apiHost);i&&(r.eid=i);const o=s._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Hd(r).slice(1)}`}async function u3(s){const e=await r3(s),t=xi().gapi;return ut(t,s,"internal-error"),e.open({where:document.body,url:d3(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l3,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=gi(s,"network-request-failed"),d=xi().setTimeout(()=>{o(c)},i3.get());function m(){xi().clearTimeout(d),i(r)}r.ping(m).then(m,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},m3=500,p3=600,f3="_blank",g3="http://localhost";class Cw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x3(s,e,t,r=m3,i=p3){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m={...h3,width:r.toString(),height:i.toString(),top:o,left:c},h=ws().toLowerCase();t&&(d=r_(h)?f3:t),n_(h)&&(e=e||g3,m.scrollbars="yes");const g=Object.entries(m).reduce((w,[P,C])=>`${w}${P}=${C},`,"");if(UR(h)&&d!=="_self")return y3(e||"",d),new Cw(null);const b=window.open(e||"",d,g);ut(b,s,"popup-blocked");try{b.focus()}catch{}return new Cw(b)}function y3(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="__/auth/handler",v3="emulator/auth/handler",w3=encodeURIComponent("fac");async function kw(s,e,t,r,i,o){ut(s.config.authDomain,s,"auth-domain-config-required"),ut(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:Jo,eventId:i};if(e instanceof p_){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",VE(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,b]of Object.entries({}))c[g]=b}if(e instanceof nu){const g=e.getScopes().filter(b=>b!=="");g.length>0&&(c.scopes=g.join(","))}s.tenantId&&(c.tid=s.tenantId);const d=c;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const m=await s._getAppCheckToken(),h=m?`#${w3}=${encodeURIComponent(m)}`:"";return`${N3(s)}?${Hd(d).slice(1)}${h}`}function N3({config:s}){return s.emulator?t0(s,v3):`https://${s.authDomain}/${b3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="webStorageSupport";class j3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N_,this._completeRedirectFn=W5,this._overrideRedirectResult=q5}async _openPopup(e,t,r,i){var c;Xi((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await kw(e,t,r,Dg(),i);return x3(e,o,a0())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await kw(e,t,r,Dg(),i);return C5(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Xi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await u3(e),r=new J5(e);return t.register("authEvent",i=>(ut(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Kf,{type:Kf},i=>{var c;const o=(c=i==null?void 0:i[0])==null?void 0:c[Kf];o!==void 0&&t(!!o),$r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=e3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return c_()||s_()||s0()}}const S3=j3;var Ew="@firebase/auth",Tw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function k3(s){Js(new Ps("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;ut(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:d_(s)},h=new WR(r,i,o,m);return s5(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Js(new Ps("auth-internal",e=>{const t=Xo(e.getProvider("auth").getImmediate());return(r=>new _3(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xn(Ew,Tw,C3(s)),Xn(Ew,Tw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=300,T3=Bj("authIdTokenMaxAge")||E3;let Pw=null;const P3=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>T3)return;const i=t==null?void 0:t.token;Pw!==i&&(Pw=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function A3(s=lc()){const e=Ni(s,"auth");if(e.isInitialized())return e.getImmediate();const t=n5(s,{popupRedirectResolver:S3,persistence:[M5,j5,N_]}),r=Bj("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=P3(o.toString());v5(t,c,()=>c(t.currentUser)),b5(t,d=>c(d))}}const i=Fj("auth");return i&&r5(t,`http://${i}`),t}function I3(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}KR({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=i=>{const o=gi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",I3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});k3("Browser");const T_="@firebase/installations",l0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=1e4,A_=`w:${l0}`,I_="FIS_v2",R3="https://firebaseinstallations.googleapis.com/v1",D3=3600*1e3,M3="installations",L3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$o=new Za(M3,L3,z3);function R_(s){return s instanceof hr&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_({projectId:s}){return`${R3}/projects/${s}/installations`}function M_(s){return{token:s.token,requestStatus:2,expiresIn:O3(s.expiresIn),creationTime:Date.now()}}async function L_(s,e){const r=(await e.json()).error;return $o.create("request-failed",{requestName:s,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function z_({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function V3(s,{refreshToken:e}){const t=z_(s);return t.append("Authorization",F3(e)),t}async function V_(s){const e=await s();return e.status>=500&&e.status<600?s():e}function O3(s){return Number(s.replace("s","000"))}function F3(s){return`${I_} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U3({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const r=D_(s),i=z_(s),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const c={fid:t,authVersion:I_,appId:s.appId,sdkVersion:A_},d={method:"POST",headers:i,body:JSON.stringify(c)},m=await V_(()=>fetch(r,d));if(m.ok){const h=await m.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:M_(h.authToken)}}else throw await L_("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=/^[cdef][\w-]{21}$/,Vg="";function q3(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=G3(s);return $3.test(t)?t:Vg}catch{return Vg}}function G3(s){return B3(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;function U_(s,e){const t=Ym(s);B_(t,e),H3(t,e)}function B_(s,e){const t=F_.get(s);if(t)for(const r of t)r(e)}function H3(s,e){const t=W3();t&&t.postMessage({key:s,fid:e}),K3()}let Ao=null;function W3(){return!Ao&&"BroadcastChannel"in self&&(Ao=new BroadcastChannel("[Firebase] FID Change"),Ao.onmessage=s=>{B_(s.data.key,s.data.fid)}),Ao}function K3(){F_.size===0&&Ao&&(Ao.close(),Ao=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3="firebase-installations-database",Y3=1,qo="firebase-installations-store";let Jf=null;function c0(){return Jf||(Jf=jm(J3,Y3,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(qo)}}})),Jf}async function am(s,e){const t=Ym(s),i=(await c0()).transaction(qo,"readwrite"),o=i.objectStore(qo),c=await o.get(t);return await o.put(e,t),await i.done,(!c||c.fid!==e.fid)&&U_(s,e.fid),e}async function $_(s){const e=Ym(s),r=(await c0()).transaction(qo,"readwrite");await r.objectStore(qo).delete(e),await r.done}async function Zm(s,e){const t=Ym(s),i=(await c0()).transaction(qo,"readwrite"),o=i.objectStore(qo),c=await o.get(t),d=e(c);return d===void 0?await o.delete(t):await o.put(d,t),await i.done,d&&(!c||c.fid!==d.fid)&&U_(s,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d0(s){let e;const t=await Zm(s.appConfig,r=>{const i=Z3(r),o=Q3(s,i);return e=o.registrationPromise,o.installationEntry});return t.fid===Vg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Z3(s){const e=s||{fid:q3(),registrationStatus:0};return q_(e)}function Q3(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject($o.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=X3(s,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:eD(s)}:{installationEntry:e}}async function X3(s,e){try{const t=await U3(s,e);return am(s.appConfig,t)}catch(t){throw R_(t)&&t.customData.serverCode===409?await $_(s.appConfig):await am(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function eD(s){let e=await Aw(s.appConfig);for(;e.registrationStatus===1;)await O_(100),e=await Aw(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await d0(s);return r||t}return e}function Aw(s){return Zm(s,e=>{if(!e)throw $o.create("installation-not-found");return q_(e)})}function q_(s){return tD(s)?{fid:s.fid,registrationStatus:0}:s}function tD(s){return s.registrationStatus===1&&s.registrationTime+P_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD({appConfig:s,heartbeatServiceProvider:e},t){const r=sD(s,t),i=V3(s,t),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const c={installation:{sdkVersion:A_,appId:s.appId}},d={method:"POST",headers:i,body:JSON.stringify(c)},m=await V_(()=>fetch(r,d));if(m.ok){const h=await m.json();return M_(h)}else throw await L_("Generate Auth Token",m)}function sD(s,{fid:e}){return`${D_(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u0(s,e=!1){let t;const r=await Zm(s.appConfig,o=>{if(!G_(o))throw $o.create("not-registered");const c=o.authToken;if(!e&&aD(c))return o;if(c.requestStatus===1)return t=rD(s,e),o;{if(!navigator.onLine)throw $o.create("app-offline");const d=lD(o);return t=iD(s,d),d}});return t?await t:r.authToken}async function rD(s,e){let t=await Iw(s.appConfig);for(;t.authToken.requestStatus===1;)await O_(100),t=await Iw(s.appConfig);const r=t.authToken;return r.requestStatus===0?u0(s,e):r}function Iw(s){return Zm(s,e=>{if(!G_(e))throw $o.create("not-registered");const t=e.authToken;return cD(t)?{...e,authToken:{requestStatus:0}}:e})}async function iD(s,e){try{const t=await nD(s,e),r={...e,authToken:t};return await am(s.appConfig,r),t}catch(t){if(R_(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await $_(s.appConfig);else{const r={...e,authToken:{requestStatus:0}};await am(s.appConfig,r)}throw t}}function G_(s){return s!==void 0&&s.registrationStatus===2}function aD(s){return s.requestStatus===2&&!oD(s)}function oD(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+D3}function lD(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function cD(s){return s.requestStatus===1&&s.requestTime+P_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(s){const e=s,{installationEntry:t,registrationPromise:r}=await d0(e);return r?r.catch(console.error):u0(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(s,e=!1){const t=s;return await hD(t),(await u0(t,e)).token}async function hD(s){const{registrationPromise:e}=await d0(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(s){if(!s||!s.options)throw Yf("App Configuration");if(!s.name)throw Yf("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw Yf(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Yf(s){return $o.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="installations",pD="installations-internal",fD=s=>{const e=s.getProvider("app").getImmediate(),t=mD(e),r=Ni(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},gD=s=>{const e=s.getProvider("app").getImmediate(),t=Ni(e,H_).getImmediate();return{getId:()=>dD(t),getToken:i=>uD(t,i)}};function xD(){Js(new Ps(H_,fD,"PUBLIC")),Js(new Ps(pD,gD,"PRIVATE"))}xD();Xn(T_,l0);Xn(T_,l0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD="/firebase-messaging-sw.js",bD="/firebase-cloud-messaging-push-scope",W_="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",vD="https://fcmregistrations.googleapis.com/v1",K_="google.c.a.c_id",wD="google.c.a.c_l",ND="google.c.a.ts",jD="google.c.a.e",Rw=1e4;var Dw;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Dw||(Dw={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Rd;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(Rd||(Rd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(s){const e=new Uint8Array(s);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function SD(s){const e="=".repeat((4-s.length%4)%4),t=(s+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="fcm_token_details_db",_D=5,Mw="fcm_token_object_Store";async function CD(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(Zf))return null;let e=null;return(await jm(Zf,_D,{upgrade:async(r,i,o,c)=>{if(i<2||!r.objectStoreNames.contains(Mw))return;const d=c.objectStore(Mw),m=await d.index("fcmSenderId").get(s);if(await d.clear(),!!m){if(i===2){const h=m;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:h.createTime??Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:Oi(h.vapidKey)}}}else if(i===3){const h=m;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Oi(h.auth),p256dh:Oi(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Oi(h.vapidKey)}}}else if(i===4){const h=m;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Oi(h.auth),p256dh:Oi(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Oi(h.vapidKey)}}}}}})).close(),await zf(Zf),await zf("fcm_vapid_details_db"),await zf("undefined"),kD(e)?e:null}function kD(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:e}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="firebase-messaging-database",TD=1,Dd="firebase-messaging-store";let Qf=null;function J_(){return Qf||(Qf=jm(ED,TD,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(Dd)}}})),Qf}async function PD(s){const e=Y_(s),r=await(await J_()).transaction(Dd).objectStore(Dd).get(e);if(r)return r;{const i=await CD(s.appConfig.senderId);if(i)return await h0(s,i),i}}async function h0(s,e){const t=Y_(s),i=(await J_()).transaction(Dd,"readwrite");return await i.objectStore(Dd).put(e,t),await i.done,e}function Y_({appConfig:s}){return s.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Es=new Za("messaging","Messaging",AD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(s,e){const t=await p0(s),r=Z_(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let o;try{o=await(await fetch(m0(s.appConfig),i)).json()}catch(c){throw Es.create("token-subscribe-failed",{errorInfo:c==null?void 0:c.toString()})}if(o.error){const c=o.error.message;throw Es.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw Es.create("token-subscribe-no-token");return o.token}async function RD(s,e){const t=await p0(s),r=Z_(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${m0(s.appConfig)}/${e.token}`,i)).json()}catch(c){throw Es.create("token-update-failed",{errorInfo:c==null?void 0:c.toString()})}if(o.error){const c=o.error.message;throw Es.create("token-update-failed",{errorInfo:c})}if(!o.token)throw Es.create("token-update-no-token");return o.token}async function DD(s,e){const r={method:"DELETE",headers:await p0(s)};try{const o=await(await fetch(`${m0(s.appConfig)}/${e}`,r)).json();if(o.error){const c=o.error.message;throw Es.create("token-unsubscribe-failed",{errorInfo:c})}}catch(i){throw Es.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function m0({projectId:s}){return`${vD}/projects/${s}/registrations`}async function p0({appConfig:s,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function Z_({p256dh:s,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:s}};return r!==W_&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=10080*60*1e3;async function LD(s){const e=await VD(s.swRegistration,s.vapidKey),t={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:e.endpoint,auth:Oi(e.getKey("auth")),p256dh:Oi(e.getKey("p256dh"))},r=await PD(s.firebaseDependencies);if(r){if(OD(r.subscriptionOptions,t))return Date.now()>=r.createTime+MD?zD(s,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await DD(s.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Lw(s.firebaseDependencies,t)}else return Lw(s.firebaseDependencies,t)}async function zD(s,e){try{const t=await RD(s.firebaseDependencies,e),r={...e,token:t,createTime:Date.now()};return await h0(s.firebaseDependencies,r),t}catch(t){throw t}}async function Lw(s,e){const r={token:await ID(s,e),createTime:Date.now(),subscriptionOptions:e};return await h0(s,r),r.token}async function VD(s,e){const t=await s.pushManager.getSubscription();return t||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:SD(e)})}function OD(s,e){const t=e.vapidKey===s.vapidKey,r=e.endpoint===s.endpoint,i=e.auth===s.auth,o=e.p256dh===s.p256dh;return t&&r&&i&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(s){const e={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return FD(e,s),UD(e,s),BD(e,s),e}function FD(s,e){if(!e.notification)return;s.notification={};const t=e.notification.title;t&&(s.notification.title=t);const r=e.notification.body;r&&(s.notification.body=r);const i=e.notification.image;i&&(s.notification.image=i);const o=e.notification.icon;o&&(s.notification.icon=o)}function UD(s,e){e.data&&(s.data=e.data)}function BD(s,e){var i,o,c,d;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;s.fcmOptions={};const t=((o=e.fcmOptions)==null?void 0:o.link)??((c=e.notification)==null?void 0:c.click_action);t&&(s.fcmOptions.link=t);const r=(d=e.fcmOptions)==null?void 0:d.analytics_label;r&&(s.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(s){return typeof s=="object"&&!!s&&K_ in s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(s){if(!s||!s.options)throw Xf("App Configuration Object");if(!s.name)throw Xf("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=s;for(const r of e)if(!t[r])throw Xf(r);return{appName:s.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function Xf(s){return Es.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=qD(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(s){try{s.swRegistration=await navigator.serviceWorker.register(yD,{scope:bD}),s.swRegistration.update().catch(()=>{}),await WD(s.swRegistration)}catch(e){throw Es.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function WD(s){return new Promise((e,t)=>{const r=setTimeout(()=>t(new Error(`Service worker not registered after ${Rw} ms`)),Rw),i=s.installing||s.waiting;s.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var c;((c=o.target)==null?void 0:c.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(s,e){if(!e&&!s.swRegistration&&await HD(s),!(!e&&s.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Es.create("invalid-sw-registration");s.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(s,e){e?s.vapidKey=e:s.vapidKey||(s.vapidKey=W_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q_(s,e){if(!navigator)throw Es.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Es.create("permission-blocked");return await JD(s,e==null?void 0:e.vapidKey),await KD(s,e==null?void 0:e.serviceWorkerRegistration),LD(s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(s,e,t){const r=ZD(e);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[K_],message_name:t[wD],message_time:t[ND],message_device_time:Math.floor(Date.now()/1e3)})}function ZD(s){switch(s){case Rd.NOTIFICATION_CLICKED:return"notification_open";case Rd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(s,e){const t=e.data;if(!t.isFirebaseMessaging)return;s.onMessageHandler&&t.messageType===Rd.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(zw(t)):s.onMessageHandler.next(zw(t)));const r=t.data;$D(r)&&r[jD]==="1"&&await YD(s,t.messageType,r)}const Vw="@firebase/messaging",Ow="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=s=>{const e=new GD(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>QD(e,t)),e},eM=s=>{const e=s.getProvider("messaging").getImmediate();return{getToken:r=>Q_(e,r)}};function tM(){Js(new Ps("messaging",XD,"PUBLIC")),Js(new Ps("messaging-internal",eM,"PRIVATE")),Xn(Vw,Ow),Xn(Vw,Ow,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(){try{await ox()}catch{return!1}return typeof window<"u"&&ax()&&Gj()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(s=lc()){return nM().then(e=>{if(!e)throw Es.create("unsupported-browser")},e=>{throw Es.create("indexed-db-unsupported")}),Ni(Kt(s),"messaging").getImmediate()}async function rM(s,e){return s=Kt(s),Q_(s,e)}tM();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="type.googleapis.com/google.protobuf.Int64Value",aM="type.googleapis.com/google.protobuf.UInt64Value";function X_(s,e){const t={};for(const r in s)s.hasOwnProperty(r)&&(t[r]=e(s[r]));return t}function om(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>om(e));if(typeof s=="function"||typeof s=="object")return X_(s,e=>om(e));throw new Error("Data cannot be encoded in JSON: "+s)}function ec(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case iM:case aM:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>ec(e)):typeof s=="function"||typeof s=="object"?X_(s,e=>ec(e)):s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Hs extends hr{constructor(e,t,r){super(`${f0}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Hs.prototype)}}function oM(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function lm(s,e){let t=oM(s),r=t,i;try{const o=e&&e.error;if(o){const c=o.status;if(typeof c=="string"){if(!Fw[c])return new Hs("internal","internal");t=Fw[c],r=c}const d=o.message;typeof d=="string"&&(r=d),i=o.details,i!==void 0&&(i=ec(i))}}catch{}return t==="ok"?null:new Hs(t,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,qs(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i==null||i.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="us-central1",cM=/^data: (.*?)(?:\n|$)/;function dM(s){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Hs("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class uM{constructor(e,t,r,i,o=Og,c=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new lM(e,t,r,i),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(o);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=Og}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function hM(s,e,t){const r=wi(e);s.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(vm(s.emulatorOrigin+"/backends"),wm("Functions",!0))}function mM(s,e,t){const r=i=>fM(s,e,i,{});return r.stream=(i,o)=>xM(s,e,i,o),r}function e2(s){return s.emulatorOrigin&&wi(s.emulatorOrigin)?"include":void 0}async function pM(s,e,t,r,i){t["Content-Type"]="application/json";let o;try{o=await r(s,{method:"POST",body:JSON.stringify(e),headers:t,credentials:e2(i)})}catch{return{status:0,json:null}}let c=null;try{c=await o.json()}catch{}return{status:o.status,json:c}}async function t2(s,e){const t={},r=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function fM(s,e,t,r){const i=s._url(e);return gM(s,i,t,r)}async function gM(s,e,t,r){t=om(t);const i={data:t},o=await t2(s,r),c=r.timeout||7e4,d=dM(c),m=await Promise.race([pM(e,i,o,s.fetchImpl,s),d.promise,s.cancelAllRequests]);if(d.cancel(),!m)throw new Hs("cancelled","Firebase Functions instance was deleted.");const h=lm(m.status,m.json);if(h)throw h;if(!m.json)throw new Hs("internal","Response is not valid JSON object.");let g=m.json.data;if(typeof g>"u"&&(g=m.json.result),typeof g>"u")throw new Hs("internal","Response is missing data field.");return{data:ec(g)}}function xM(s,e,t,r){const i=s._url(e);return yM(s,i,t,r||{})}async function yM(s,e,t,r){var w;t=om(t);const i={data:t},o=await t2(s,r);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:o,signal:r==null?void 0:r.signal,credentials:e2(s)})}catch(P){if(P instanceof Error&&P.name==="AbortError"){const k=new Hs("cancelled","Request was cancelled.");return{data:Promise.reject(k),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(k)}}}}}}const C=lm(0,null);return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}let d,m;const h=new Promise((P,C)=>{d=P,m=C});(w=r==null?void 0:r.signal)==null||w.addEventListener("abort",()=>{const P=new Hs("cancelled","Request was cancelled.");m(P)});const g=c.body.getReader(),b=bM(g,d,m,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const P=b.getReader();return{async next(){const{value:C,done:k}=await P.read();return{value:C,done:k}},async return(){return await P.cancel(),{done:!0,value:void 0}}}}},data:h}}function bM(s,e,t,r){const i=(c,d)=>{const m=c.match(cM);if(!m)return;const h=m[1];try{const g=JSON.parse(h);if("result"in g){e(ec(g.result));return}if("message"in g){d.enqueue(ec(g.message));return}if("error"in g){const b=lm(0,g);d.error(b),t(b);return}}catch(g){if(g instanceof Hs){d.error(g),t(g);return}}},o=new TextDecoder;return new ReadableStream({start(c){let d="";return m();async function m(){if(r!=null&&r.aborted){const h=new Hs("cancelled","Request was cancelled");return c.error(h),t(h),Promise.resolve()}try{const{value:h,done:g}=await s.read();if(g){d.trim()&&i(d.trim(),c),c.close();return}if(r!=null&&r.aborted){const w=new Hs("cancelled","Request was cancelled");c.error(w),t(w),await s.cancel();return}d+=o.decode(h,{stream:!0});const b=d.split(`
`);d=b.pop()||"";for(const w of b)w.trim()&&i(w.trim(),c);return m()}catch(h){const g=h instanceof Hs?h:lm(0,null);c.error(g),t(g)}}},cancel(){return s.cancel()}})}const Uw="@firebase/functions",Bw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="auth-internal",wM="app-check-internal",NM="messaging-internal";function jM(s){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),o=t.getProvider(vM),c=t.getProvider(NM),d=t.getProvider(wM);return new uM(i,o,c,d,r)};Js(new Ps(f0,e,"PUBLIC").setMultipleInstances(!0)),Xn(Uw,Bw,s),Xn(Uw,Bw,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(s=lc(),e=Og){const r=Ni(Kt(s),f0).getImmediate({identifier:e}),i=ix("functions");return i&&SM(r,...i),r}function SM(s,e,t){hM(Kt(s),e,t)}function Io(s,e,t){return mM(Kt(s),e)}jM();const Dh={apiKey:"AIzaSyCFi4LIpQBzs9QGnn4QQdNJtCvMOi_-VF8",authDomain:"spoilme-edee0.firebaseapp.com",projectId:"spoilme-edee0",storageBucket:"spoilme-edee0.appspot.com",messagingSenderId:"744288044885",appId:"1:744288044885:web:24614b67ffe485446151dc",measurementId:"G-H9VG45QVZR"},_M=Dh.apiKey&&Dh.projectId&&Dh.projectId!=="your-app-id";let ye=null,Vn=null,qn=null,n2=null,s2=null,Sr=null;if(_M)try{Sr=Kj(Dh),ye=fS(Sr,"spoilme");try{Vn=WS(Sr),console.log("Firebase Storage initialized")}catch(s){console.error("Firebase Storage init failed:",s)}try{qn=A3(Sr),console.log("Firebase Auth initialized")}catch(s){console.error("Firebase Auth init failed:",s)}try{n2=sM(Sr),console.log("Firebase Messaging initialized")}catch(s){console.error("Firebase Messaging init failed:",s)}try{s2=g0(Sr),console.log("Firebase Functions initialized")}catch(s){console.error("Firebase Functions init failed:",s)}console.log("Firebase initialized successfully")}catch(s){console.error("Firebase initialization error:",s)}else console.warn("Firebase keys missing or invalid. Application running in Demo Mode (Local Storage).");const r2=S.createContext(void 0),en=(s,e=new WeakSet)=>{if(s==null)return null;if(typeof s!="object")return s;if(e.has(s))return null;if(e.add(s),s instanceof Date)return s.toISOString();if(typeof s.toDate=="function")try{return s.toDate().toISOString()}catch{return null}if(s.path&&typeof s.path=="string"&&(s.firestore||s._key))return s.path;if(Array.isArray(s))return s.map(r=>en(r,e));if(s.seconds!==void 0&&s.nanoseconds!==void 0&&Object.keys(s).length<=4)return new Date(s.seconds*1e3+s.nanoseconds/1e6).toISOString();const t={};for(const r in s)if(!(r.startsWith("_")||r==="auth"||r==="firestore"||r==="app"||r==="metadata"||r==="proactiveRefresh"||r==="providerData"||r==="stsTokenManager")&&Object.prototype.hasOwnProperty.call(s,r)){const i=en(s[r],e);i!=null&&(t[r]=i)}return t},CM=()=>{const s=["Thandiwe Zulu","Jessica Nel","Precious Khumalo","Sarah Van Der Merwe","Amahle Dlamini","Chloe Naidoo","Nicole Botha","Zanele Mthembu","Ashley Smith","Bianca Fourie"],e=new Date,t=e.getFullYear()*100+e.getMonth(),r=c=>{let d=c+=1831565813;return d=Math.imul(d^d>>>15,d|1),d^=d+Math.imul(d^d>>>7,d|61),((d^d>>>14)>>>0)/4294967296},i=s.map((c,d)=>({id:`aff_${d}`,name:c,sales:0,rank:0,change:"same"}));i[0].sales=28561.68;let o=28561.68;for(let c=1;c<i.length;c++){const m=1500+r(t+c)*3500,h=Math.floor(r(t+c+50)*99)/100;o=Math.max(1e3,o-m);const g=Math.floor(o)+h;i[c].sales=parseFloat(g.toFixed(2))}return i.forEach((c,d)=>{c.rank=d+1;const m=r(t+d+200);c.change=m>.6?"up":m<.3?"down":"same",d===0&&(c.change="same")}),i},$w=s=>{const e=new Date,t=new Date(e.getFullYear(),0,1),r=Math.ceil(((e.getTime()-t.getTime())/864e5+t.getDay()+1)/7);if(s){const o=[];for(let c=3;c>=1;c--){const d=(r-1-c+52)%52;o.push(qw[d])}return[s,...o.map((c,d)=>({rank:d+2,name:c.name,prize:c.currency==="ZAR"?500:30,currency:c.currency}))]}const i=[];for(let o=3;o>=0;o--){const c=(r-1-o+52)%52;i.push(qw[c])}return i.map((o,c)=>({rank:c+1,name:o.name,prize:o.currency==="ZAR"?500:30,currency:o.currency}))},qw=[{name:"Anja P.",location:"Pretoria, SA",currency:"ZAR"},{name:"Sarah Jenkins",location:"Texas, USA",currency:"USD"},{name:"Thandi M.",location:"Sandton, SA",currency:"ZAR"},{name:"Sophie Clarke",location:"London, UK",currency:"USD"},{name:"Johan V.",location:"Bloemfontein, SA",currency:"ZAR"},{name:"Emily R.",location:"New York, USA",currency:"USD"},{name:"Priya N.",location:"Durban, SA",currency:"ZAR"},{name:"Isabella G.",location:"Toronto, Canada",currency:"USD"},{name:"Bianca S.",location:"Cape Town, SA",currency:"ZAR"},{name:"Madison L.",location:"Chicago, USA",currency:"USD"},{name:"Lerato K.",location:"Soweto, SA",currency:"ZAR"},{name:"Charlotte B.",location:"Manchester, UK",currency:"USD"},{name:"David W.",location:"Port Elizabeth, SA",currency:"ZAR"},{name:"Jessica H.",location:"Florida, USA",currency:"USD"},{name:"Zanele T.",location:"Polokwane, SA",currency:"ZAR"},{name:"Olivia M.",location:"Dublin, Ireland",currency:"USD"},{name:"Riaan O.",location:"Paarl, SA",currency:"ZAR"},{name:"Ashley T.",location:"California, USA",currency:"USD"},{name:"Fatima A.",location:"Lenasia, SA",currency:"ZAR"},{name:"Emma W.",location:"Sydney, Australia",currency:"USD"},{name:"Michelle D.",location:"George, SA",currency:"ZAR"},{name:"Grace P.",location:"Ohio, USA",currency:"USD"},{name:"Nandi Z.",location:"East London, SA",currency:"ZAR"},{name:"Mia S.",location:"Berlin, Germany",currency:"USD"},{name:"Chantelle V.",location:"Boksburg, SA",currency:"ZAR"},{name:"Harper C.",location:"Arizona, USA",currency:"USD"},{name:"Sipho M.",location:"Johannesburg, SA",currency:"ZAR"},{name:"Chloe F.",location:"Bristol, UK",currency:"USD"},{name:"Elize B.",location:"Stellenbosch, SA",currency:"ZAR"},{name:"Samantha K.",location:"Nevada, USA",currency:"USD"},{name:"Yusuf E.",location:"Cape Town, SA",currency:"ZAR"},{name:"Lily J.",location:"Auckland, NZ",currency:"USD"},{name:"Monique L.",location:"Centurion, SA",currency:"ZAR"},{name:"Ava R.",location:"Washington, USA",currency:"USD"},{name:"Karabo P.",location:"Rustenburg, SA",currency:"ZAR"},{name:"Zoe T.",location:"Liverpool, UK",currency:"USD"},{name:"Andre F.",location:"Nelspruit, SA",currency:"ZAR"},{name:"Elizabeth N.",location:"Virginia, USA",currency:"USD"},{name:"Ts hepo G.",location:"Midrand, SA",currency:"ZAR"},{name:"Amelia H.",location:"Edinburgh, Scotland",currency:"USD"},{name:"Marlize J.",location:"Upington, SA",currency:"ZAR"},{name:"Victoria B.",location:"Georgia, USA",currency:"USD"},{name:"Keshav R.",location:"Chatsworth, SA",currency:"ZAR"},{name:"Hannah D.",location:"Leeds, UK",currency:"USD"},{name:"Angelique S.",location:"Krugersdorp, SA",currency:"ZAR"},{name:"Natalie M.",location:"Oregon, USA",currency:"USD"},{name:"Vusi K.",location:"Pietermaritzburg, SA",currency:"ZAR"},{name:"Layla O.",location:"Dubai, UAE",currency:"USD"},{name:"Sunette W.",location:"Mossel Bay, SA",currency:"ZAR"},{name:"Ella F.",location:"Colorado, USA",currency:"USD"},{name:"Bongani N.",location:"Soweto, SA",currency:"ZAR"},{name:"Scarlet V.",location:"Melbourne, Australia",currency:"USD"}],kM=({children:s})=>{const[e,t]=S.useState([]),[r,i]=S.useState([]),[o,c]=S.useState([]),[d,m]=S.useState(()=>{try{const Q=localStorage.getItem("spv_cart");return Q?JSON.parse(Q):[]}catch(Q){return console.error("Failed to load cart",Q),[]}}),[h,g]=S.useState(ir),[b,w]=S.useState(xE),[P,C]=S.useState([]),[k,E]=S.useState(!0),[F,U]=S.useState(null),[q,Z]=S.useState(null),[W,$]=S.useState([]),[R,_]=S.useState(0),[I,V]=S.useState([]),[A,B]=S.useState(!ye),[L,ne]=S.useState(!1),[pe,Ne]=S.useState([]),[Te,le]=S.useState([]),[fe,ve]=S.useState("ZAR"),[J,K]=S.useState(null);S.useEffect(()=>{const Q=localStorage.getItem("spv_active_user");if(Q)try{const ie=JSON.parse(Q);g(ie)}catch(ie){console.error("Error parsing stored user",ie),g(ir)}$(CM()),V($w(J));const ee=new Date;ee.getFullYear()*100+ee.getMonth();try{const ie=localStorage.getItem("spv_packaging_presets");ie&&Ne(JSON.parse(ie));const ge=localStorage.getItem("spv_material_presets");ge&&le(JSON.parse(ge))}catch(ie){console.error("Error loading presets",ie)}},[]),S.useEffect(()=>{localStorage.setItem("spv_cart",JSON.stringify(d))},[d]),S.useEffect(()=>{A&&localStorage.setItem("spv_orders",JSON.stringify(o))},[o,A]);const X=Q=>{try{const ee=en(Q);localStorage.setItem("spv_active_user",JSON.stringify(ee))}catch(ee){console.error("Error saving user to localStorage",ee)}};S.useEffect(()=>{if(!ye||A||!h.id||h.id==="guest")return;const Q=di(dt(ye,"users",h.id),ee=>{if(ee.exists()){const ie=ee.data();g(ge=>{const Me={...ge,...ie};return X(Me),Me})}},ee=>{ee.code==="not-found"&&ee.message.includes("default")&&U("Database ID Mismatch. Please clear browser cache.")});return()=>Q()},[h.id,A]);const ue=Q=>{Ne(ee=>{const ge=ee.find(Me=>Me.name===Q.name)?ee.map(Me=>Me.name===Q.name?Q:Me):[...ee,Q];return localStorage.setItem("spv_packaging_presets",JSON.stringify(ge)),ge})},G=Q=>{Ne(ee=>{const ie=ee.filter(ge=>ge.name!==Q);return localStorage.setItem("spv_packaging_presets",JSON.stringify(ie)),ie})},se=Q=>{le(ee=>{const ge=ee.find(Me=>Me.name===Q.name)?ee.map(Me=>Me.name===Q.name?Q:Me):[...ee,Q];return localStorage.setItem("spv_material_presets",JSON.stringify(ge)),ge})},Ie=Q=>{le(ee=>{const ie=ee.filter(ge=>ge.name!==Q);return localStorage.setItem("spv_material_presets",JSON.stringify(ie)),ie})},Ae=async(Q,ee)=>{const ie=Q.trim().toLowerCase();let ge=null;if(qn)try{const Xe=(await y_(qn,ie,ee)).user,rt=Xe.uid;if(ye)try{const nt=await Pd(dt(ye,"users",rt));nt.exists()?ge={...en(nt.data()),id:rt}:(ge={...ir,id:rt,email:ie,name:Xe.displayName||"",isAdmin:ie==="spoilmevintagediy@gmail.com"},await jr(dt(ye,"users",rt),en(ge)))}catch(nt){console.error("Error getting user from Firestore:",nt),ge={...ir,id:rt,email:ie,name:Xe.displayName||"",isAdmin:ie==="spoilmevintagediy@gmail.com"}}else ge={...ir,id:rt,email:ie,name:Xe.displayName||"",isAdmin:ie==="spoilmevintagediy@gmail.com"}}catch(Me){console.warn("Firebase Auth sign in failed:",Me)}if(!ge&&ee==="test"&&(ie==="eliz@gmail.com"?ge={...ir,id:"u1",name:"Elize Test 1",email:"eliz@gmail.com",isMember:!1,membershipTier:"none"}:ie==="anna@gmail.com"&&(ge={...ir,id:"u2",name:"Anna Test 2",email:"anna@gmail.com",isMember:!0,membershipTier:"basic",loyaltyPoints:100})),!ge&&ye)try{const Me=At(ye,"users"),Xe=sn(Me,zn("email","==",ie)),rt=await Qn(Xe);if(!rt.empty){const nt=en(rt.docs[0].data());nt.password===ee&&(ge={...nt,id:rt.docs[0].id})}}catch(Me){console.error("Error logging in via DB:",Me)}return ge?ge.isActive===!1?!1:(g(ge),X(ge),Rs(ge),!0):!1},He=async Q=>{const ee={...ir,...Q,id:`user_${Date.now()}`,affiliateCode:`Spoilme-${Date.now().toString().slice(-6)}`,affiliateStats:Q.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1}};try{return!A&&ye&&await jr(dt(ye,"users",ee.id),en(ee)),g(ee),X(ee),!0}catch(ie){return console.error("Registration Failed",ie),g(ee),X(ee),!0}},Be=()=>{g(ir),localStorage.removeItem("spv_active_user")},xt=async Q=>{const ee={...h,shippingAddress:Q};if(g(ee),X(ee),!A&&ye&&h.id!=="guest")try{await Ft(dt(ye,"users",h.id),{shippingAddress:Q})}catch(ie){console.error("Error saving address to DB",ie)}},we=async()=>{if(A||!ye){alert("Database not connected. Cannot seed users.");return}const Q=[{...ir,id:"u1",name:"Elize Test 1",email:"eliz@gmail.com",password:"test",isMember:!1,membershipTier:"none",affiliateCode:"Spoilme-ELIZ01",affiliateStats:{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...ir,id:"u2",name:"Anna Test 2",email:"anna@gmail.com",password:"test",isMember:!0,membershipTier:"basic",loyaltyPoints:100,affiliateCode:"Spoilme-ANNA02",affiliateStats:{status:"pending",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...ir,id:"u3",name:"Fay Test 3",email:"fay@gmail.com",password:"test",isMember:!0,membershipTier:"premium",loyaltyPoints:500,affiliateCode:"Spoilme-FAY003",affiliateStats:{status:"approved",totalSalesCount:45,totalSalesValue:4500,commissionRate:10,balance:450,recurringBalance:50}},{...ir,id:"u4",name:"Debs Test 4",email:"debs@gmail.com",password:"test",isMember:!0,membershipTier:"deluxe",loyaltyPoints:1e3,affiliateCode:"Spoilme-DEBS04",affiliateStats:{status:"approved",totalSalesCount:150,totalSalesValue:15e3,commissionRate:15,balance:2250,recurringBalance:300}}];try{for(const ee of Q)await jr(dt(ye,"users",ee.id),en(ee));alert("Test Users Created!")}catch(ee){console.error("Error seeding users:",ee)}};S.useEffect(()=>{if(console.log("Loading products, isDemoMode:",A,"db:",!!ye),A){const ee=localStorage.getItem("spv_products"),ie=ee?JSON.parse(ee):gE,ge=ie.filter(nt=>nt.status==="published");t(ge);const Me=localStorage.getItem("spv_categories");i(Me?JSON.parse(Me):Jb);try{localStorage.setItem("spv_products",JSON.stringify(ie))}catch{}try{localStorage.setItem("spv_categories",JSON.stringify(Me?JSON.parse(Me):Jb))}catch{}const Xe=localStorage.getItem("spv_vouchers");Xe&&C(JSON.parse(Xe));const rt=localStorage.getItem("spv_orders");c(rt?JSON.parse(rt):[]),E(!1);return}const Q=setTimeout(()=>{k&&(U("Connection timed out"),E(!1))},5e3);try{const ee=sn(At(ye,"products"),zn("status","==","published"),ci("createdAt","desc")),ie=new Map,ge=async Fe=>{if(!Fe)return null;if(typeof Fe=="string"){if(Fe.startsWith("http")||Fe.startsWith("data:")||Fe.startsWith("blob:")||Fe.startsWith("/"))return Fe;if(Fe.startsWith("gs://"))try{const ot=Fe.match(/^gs:\/\/([^/]+)\/(.+)$/);if(ot){const Et=ot[1],Jt=ot[2];if(ie.has(Fe))return ie.get(Fe);if(Et==="spoilme-edee0.firebasestorage.app"||Et==="spoilme-edee0.appspot.com"){if(Vn){const un=await Vr(Or(Vn,decodeURIComponent(Jt)));return ie.set(Fe,un),un}}else if(Sr){const un=WS(Sr,`gs://${Et}`),wn=await Vr(Or(un,decodeURIComponent(Jt)));return ie.set(Fe,wn),wn}}}catch(ot){return console.error("Failed to convert gs:// URL to downloadURL",Fe,ot),null}if(!Fe.startsWith("http")&&Vn)try{if(ie.has(Fe))return ie.get(Fe);const ot=await Vr(Or(Vn,Fe));return ie.set(Fe,ot),ot}catch{}return Fe}else if(typeof Fe=="object"){if(Fe.fullPath)try{const ot=Fe.fullPath+"::fullPath";if(ie.has(ot))return ie.get(ot);if(Vn){const Et=await Vr(Or(Vn,Fe.fullPath));return ie.set(ot,Et),Et}}catch(ot){return console.error("Failed to convert storage object fullPath to downloadURL",Fe,ot),null}if(Fe.path)try{const ot=Fe.path+"::path";if(ie.has(ot))return ie.get(ot);if(Vn){const Et=await Vr(Or(Vn,Fe.path));return ie.set(ot,Et),Et}}catch(ot){return console.error("Failed to convert storage object path to downloadURL",Fe,ot),null}}return null},Me=di(ee,async Fe=>{console.log("Firestore snapshot received, docs count:",Fe.docs.length),clearTimeout(Q);const ot=await Promise.all(Fe.docs.map(async Et=>{const Jt={...en(Et.data()),id:Et.id};console.log("Raw product:",Jt.id,"images:",Jt.images);try{if(Jt.images&&Array.isArray(Jt.images)){const un=await Promise.all(Jt.images.map(async wn=>await ge(wn)));Jt.images=un.filter(Boolean),console.log("Resolved images for",Jt.id,":",Jt.images)}}catch(un){console.error("Failed resolving product images for",Jt.id,un)}return Jt}));t(ot),console.log("Loaded products and resolved images (first 5):",ot.slice(0,5).map(Et=>({id:Et.id,images:Et.images})))},Fe=>{console.log("Firestore products error:",Fe),console.error("Detailed Firestore products error:",{message:Fe.message,code:Fe.code,stack:Fe.stack,name:Fe.name}),clearTimeout(Q),U(Fe.message),E(!1)}),Xe=di(At(ye,"categories"),Fe=>{console.log("Categories snapshot received, docs count:",Fe.docs.length);const ot=Fe.docs.map(Et=>({...en(Et.data()),id:Et.id}));i(ot)},Fe=>{console.log("Firestore categories error:",Fe)}),rt=h.isAdmin?sn(At(ye,"orders"),ci("date","desc")):sn(At(ye,"orders"),zn("customerEmail","==",h.email),ci("date","desc")),nt=di(rt,Fe=>{console.log("Orders snapshot received, docs count:",Fe.docs.length);const ot=Fe.docs.map(Et=>({...en(Et.data()),id:Et.id}));c(ot),E(!1)},()=>{E(!1)});return()=>{clearTimeout(Q),Me(),Xe(),nt()}}catch(ee){console.log("Try-catch error in products useEffect:",ee),clearTimeout(Q),E(!1)}},[A,h.isAdmin,h.email]);const We=(Q,ee={})=>{m(ie=>{const ge=ie.findIndex(nt=>nt.id===Q.id&&nt.selectedSize===ee.selectedSize&&nt.selectedMaterial===ee.selectedMaterial&&nt.selectedChainStyle===ee.selectedChainStyle&&nt.selectedChainLength===ee.selectedChainLength),Me=ge>-1?ie[ge]:null,Xe=Me?Me.quantity:0;let rt=Q.stock;if(Q.type==="Ring"&&ee.selectedSize&&Q.ringStock&&(rt=Q.ringStock[ee.selectedSize]||0),Xe>=rt)return alert(`Sorry, you can't add more of this item. We only have ${rt} in stock.`),ie;if(ge>-1){const nt=[...ie];return nt[ge]={...nt[ge],quantity:nt[ge].quantity+1},nt}return[...ie,{...Q,quantity:1,...ee}]})},at=(Q,ee={})=>{m(ie=>ie.filter(ge=>!(ge.id===Q&&ge.selectedSize===ee.selectedSize&&ge.selectedMaterial===ee.selectedMaterial&&ge.selectedChainStyle===ee.selectedChainStyle&&ge.selectedChainLength===ee.selectedChainLength)))},bt=(Q,ee,ie={})=>{if(ee<=0){at(Q,ie);return}const ge=e.find(rt=>rt.id===Q);if(!ge)return;let Me=ge.stock;ge.type==="Ring"&&ie.selectedSize&&ge.ringStock&&(Me=ge.ringStock[ie.selectedSize]||0);const Xe=Math.min(ee,Me);ee>Me&&alert(`Sorry, we only have ${Me} of this item in stock. Quantity has been adjusted.`),m(rt=>rt.map(nt=>nt.id===Q&&nt.selectedSize===ie.selectedSize&&nt.selectedMaterial===ie.selectedMaterial&&nt.selectedChainStyle===ie.selectedChainStyle&&nt.selectedChainLength===ie.selectedChainLength?{...nt,quantity:Xe}:nt))},z=()=>{m([]),Z(null)},re=Q=>{g(ee=>{const ge=ee.wishlist.includes(Q)?ee.wishlist.filter(Xe=>Xe!==Q):[...ee.wishlist,Q],Me={...ee,wishlist:ge};return X(Me),Me})},$e=async Q=>{if(!h.id||h.id==="guest"){console.error("Cannot apply for affiliate as guest user directly.");return}const ee={userId:h.id,status:"pending",appliedAt:Ig(),autoApproveAt:new Date(Date.now()+3600*1e3),userEmail:h.email,userName:`${Q.name} ${Q.surname}`,gender:Q.gender,reason:Q.reason,socials:Q.socials};if(!A&&ye)try{await Fi(At(ye,"affiliate_applications"),ee)}catch(Me){throw console.error("Error submitting affiliate application:",Me),Me}const ie={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},ge={...h,name:`${Q.name} ${Q.surname}`,birthday:Q.dob,notifications:[ie,...h.notifications],affiliateStats:{...h.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1},status:"pending",gender:Q.gender,joinReason:`${Q.reason} | Socials: ${Q.socials}`}};g(ge),X(ge),!A&&ye&&h.id!=="guest"&&await Ft(dt(ye,"users",h.id),en(ge))},_e=async(Q,ee)=>{if(A||!ye)return;const ie=dt(ye,"users",Q),ge={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Welcome to the Partnership Program!",message:`Welcome to Spoil Me Vintage Partnership Program! We are thrilled to have you on the team.${ee?` Note from admin: ${ee}`:""}`,date:new Date().toISOString(),isRead:!1};await Ft(ie,{"affiliateStats.status":"approved","affiliateStats.commissionRate":10,"affiliateStats.adminNote":ee||"",notifications:Eo(ge)})},qe=async(Q,ee)=>{if(A||!ye)return;const ie=dt(ye,"users",Q),ge={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Partnership Application Update",message:`We regret to inform you that your application has been declined.${ee?` Note: ${ee}`:""}`,date:new Date().toISOString(),isRead:!1};await Ft(ie,{"affiliateStats.status":"rejected","affiliateStats.adminNote":ee||"",notifications:Eo(ge)})},Vt=async(Q,ee)=>{if(A||!ye)return;const ie={id:`aff_msg_${Date.now()}`,type:"affiliate_msg",title:"Partnership Update",message:ee,date:new Date().toISOString(),isRead:!1},ge=await Qn(sn(At(ye,"users"),zn("id","==",Q)));ge.empty||await Ft(ge.docs[0].ref,{notifications:[ie,...ge.docs[0].data().notifications]})},xe=async(Q,ee)=>{if(A||!ye)return;const ie=dt(ye,"users",Q);await Ft(ie,{"affiliateStats.commissionRate":ee})},mt=async(Q,ee)=>{if(A||!ye)return;const ie=dt(ye,"users",Q);await Ft(ie,{"affiliateStats.parentId":ee})},kt=async()=>{const Q={...h,affiliateStats:{...h.affiliateStats,hasContentAccess:!0}};g(Q),X(Q),!A&&ye&&h.id!=="guest"&&await Ft(dt(ye,"users",h.id),en(Q))},Dt=async()=>{const Q={...h,affiliateStats:{...h.affiliateStats,isElite:!0}};g(Q),X(Q),!A&&ye&&h.id!=="guest"&&await Ft(dt(ye,"users",h.id),en(Q))},pt=async(Q,ee)=>{var nt;if(!ye&&!A)return{success:!1,message:"Database not ready"};let ie=null,ge=null;if(A)if(h.affiliateCode===Q)ie=h;else return{success:!1,message:"In Demo Mode, only your own code works."};else{const Fe=sn(At(ye,"users"),zn("affiliateCode","==",Q)),ot=await Qn(Fe);ot.empty||(ie={...ot.docs[0].data(),id:ot.docs[0].id},ge=ot.docs[0].ref)}if(!ie)return{success:!1,message:"Affiliate code not found."};if(((nt=ie.affiliateStats)==null?void 0:nt.status)!=="approved"&&!A)return{success:!1,message:"Affiliate not approved."};const Me=ie.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0},Xe=ee*Me.commissionRate/100,rt={...Me,totalSalesCount:Me.totalSalesCount+1,totalSalesValue:Me.totalSalesValue+ee,balance:Me.balance+Xe};if(rt.totalSalesCount>=500?rt.commissionRate=20:rt.totalSalesCount>=100?rt.commissionRate=15:rt.totalSalesCount>=50&&(rt.commissionRate=11),A)g({...ie,affiliateStats:rt});else if(ge){const Fe={id:`sale_${Date.now()}`,type:"system",title:"New Partnership Sale!",message:`You earned R${Xe.toFixed(2)} commission!`,date:new Date().toISOString(),isRead:!1};if(await Ft(ge,{affiliateStats:rt,notifications:[Fe,...ie.notifications||[]]}),Me.parentId)try{const ot=dt(ye,"users",Me.parentId),Et=await Pd(ot);if(Et.exists()){const Jt=Et.data(),un=Jt.affiliateStats||{status:"approved",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0},wn=ee*.01,Ut={...un,balance:(un.balance||0)+wn},on={id:`sub_sale_${Date.now()}`,type:"system",title:"Downline Sale Bonus",message:`You earned R${wn.toFixed(2)} from a recruit's sale!`,date:new Date().toISOString(),isRead:!1};await Ft(ot,{affiliateStats:Ut,notifications:[on,...Jt.notifications||[]]})}}catch(ot){console.error("Failed to process parent commission",ot)}}return{success:!0,message:`Sale simulated! Added R${Xe.toFixed(2)}.`}},$t=async(Q,ee)=>{if(A){if(h.id===Q){const ie={...h,loyaltyPoints:h.loyaltyPoints+ee};g(ie),X(ie)}return}if(ye)if(h.id===Q){const ie={...h,loyaltyPoints:h.loyaltyPoints+ee};g(ie),X(ie),await Ft(dt(ye,"users",Q),{loyaltyPoints:ie.loyaltyPoints})}else{const ie=await Qn(sn(At(ye,"users"),zn("id","==",Q)));ie.empty||await Ft(ie.docs[0].ref,{loyaltyPoints:(ie.docs[0].data().loyaltyPoints||0)+ee})}},Qt=async()=>A||!ye?[]:(await Qn(sn(At(ye,"users")))).docs.map(ee=>({...en(ee.data()),id:ee.id})),vt=async Q=>{const ee=en(Q),ie=[ee,...e];if(t(ie),!A&&ye)try{qn&&qn.currentUser&&(await qn.currentUser.getIdToken(!0),console.log("Forced fresh ID token before write.")),console.log("DEBUG: Final Product Data to Firestore (Add):",JSON.stringify(ee,null,2)),await jr(dt(ye,"products",ee.id),ee),U(null)}catch(ge){console.error("CRITICAL FIRESTORE ERROR (addProduct):",ge,"Product:",ee);try{localStorage.setItem("spv_products",JSON.stringify(ie)),U(`Failed to add product: ${ge.code||"Unknown Error"}. Changes saved locally.`),console.warn("Firestore write failed  product saved to localStorage instead.")}catch(Me){throw console.error("Fallback localStorage save also failed:",Me),new Error(`Critical Save Failure. Firestore and LocalStorage failed. (Details: ${Me.message})`)}throw new Error(ge.message||"Failed to add product.")}else try{localStorage.setItem("spv_products",JSON.stringify(ie))}catch(ge){throw console.error("Failed to save products to localStorage on addProduct:",ge),new Error("Failed to add product in Demo Mode: LocalStorage error.")}},tn=async Q=>{const ee=en(Q),ie=e.map(ge=>ge.id===ee.id?ee:ge);if(t(ie),!A&&ye)try{qn&&qn.currentUser&&(await qn.currentUser.getIdToken(!0),console.log("Forced fresh ID token before write.")),console.log("DEBUG: Final Product Data to Firestore (Update):",JSON.stringify(ee,null,2)),await jr(dt(ye,"products",ee.id),ee),U(null)}catch(ge){console.error("CRITICAL FIRESTORE ERROR (updateProduct):",ge,"Product:",ee);try{localStorage.setItem("spv_products",JSON.stringify(ie)),U(`Failed to update product: ${ge.code||"Unknown Error"}. Changes saved locally.`),console.warn("Firestore write failed  update saved to localStorage instead.")}catch(Me){throw console.error("Fallback localStorage save also failed:",Me),new Error(`Critical Save Failure. Firestore and LocalStorage failed. (Details: ${Me.message})`)}throw new Error(ge.message||"Failed to update product.")}else try{localStorage.setItem("spv_products",JSON.stringify(ie))}catch(ge){throw console.error("Failed to save products to localStorage on updateProduct:",ge),new Error("Failed to update product in Demo Mode: LocalStorage error.")}},Re=async Q=>{const ee=e.filter(ie=>ie.id!==Q);if(t(ee),!A&&ye)try{qn&&qn.currentUser&&(await qn.currentUser.getIdToken(!0),console.log("Forced fresh ID token before write.")),console.log("DEBUG: Final Product Delete to Firestore:",Q),await pd(dt(ye,"products",Q)),U(null)}catch(ie){console.error("CRITICAL FIRESTORE ERROR (deleteProduct):",ie,"productId:",Q);try{localStorage.setItem("spv_products",JSON.stringify(ee)),U(`Failed to delete product: ${ie.code||"Unknown Error"}. Change saved locally.`),console.warn("Firestore delete failed  delete reflected locally.")}catch(ge){throw console.error("Fallback localStorage save also failed:",ge),new Error(`Critical Delete Failure. Firestore and LocalStorage failed. (Details: ${ge.message})`)}throw new Error(ie.message||"Failed to delete product.")}else try{localStorage.setItem("spv_products",JSON.stringify(ee))}catch(ie){console.error("Failed to save products to localStorage on deleteProduct:",ie)}},In=async Q=>{const ee=en(Q);c(ie=>[ee,...ie]),!A&&ye&&await jr(dt(ye,"orders",ee.id),ee)},Hn=async Q=>{const ee=en(Q);c(ie=>ie.map(ge=>ge.id===ee.id?ee:ge)),!A&&ye&&await Ft(dt(ye,"orders",ee.id),ee)},Is=async Q=>{c(ee=>ee.filter(ie=>ie.id!==Q)),!A&&ye&&await pd(dt(ye,"orders",Q))},ds=async Q=>{const ee=en(Q);i(ie=>[...ie,ee]),!A&&ye?await jr(dt(ye,"categories",ee.id),ee):localStorage.setItem("spv_categories",JSON.stringify([...r,ee]))},es=async Q=>{const ee=en(Q);if(i(ie=>ie.map(ge=>ge.id===ee.id?ee:ge)),!A&&ye)await jr(dt(ye,"categories",ee.id),ee);else{const ie=r.map(ge=>ge.id===ee.id?ee:ge);localStorage.setItem("spv_categories",JSON.stringify(ie))}},mr=async Q=>{if(i(ee=>ee.filter(ie=>ie.id!==Q)),!A&&ye)await pd(dt(ye,"categories",Q));else{const ee=r.filter(ie=>ie.id!==Q);localStorage.setItem("spv_categories",JSON.stringify(ee))}},ts=async Q=>{const ee=en(Q);i(ee),A&&localStorage.setItem("spv_categories",JSON.stringify(ee))},Ns=Q=>w(ee=>[...ee,Q]),us=Q=>{const ee=en(Q);C(ge=>[...ge,ee]);const ie=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify([...ie,ee]))},fn=Q=>{C(ie=>ie.filter(ge=>ge.code!==Q));const ee=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify(ee.filter(ie=>ie.code!==Q)))},Rt=Q=>{const ee=P.find(ie=>ie.code===Q);return ee?(Z(ee),!0):!1},je=()=>{localStorage.clear(),window.location.reload()},tt=()=>d.reduce((Q,ee)=>Q+(ee.price+(ee.selectedMaterialModifier||0))*ee.quantity,0),Gt=async Q=>{var nt;if(!h.email)throw new Error("User must be logged in to checkout.");const ee={...Q,id:`ord_${Date.now()}`,orderNumber:`#SMV-${Date.now().toString().slice(-6)}`,date:new Date().toISOString(),customerName:h.name,customerEmail:h.email,status:"Pending"};await In(ee),h.affiliateCode&&h.affiliateCode!=="none"&&await ta(d,ee.id,h.affiliateCode);const ie=[];for(const Fe of d)(nt=Fe.tags)!=null&&nt.includes("Voucher")||ie.push({id:`notif_${Date.now()}_${Fe.id}`,type:"review_request",title:"How was your purchase?",message:`Review ${Fe.name} to earn 100 Points!`,productId:Fe.id,productName:Fe.name,date:new Date().toISOString(),isRead:!1});let ge=0;const Me=tt();h!=null&&h.storeCredit&&h.storeCredit>0&&h.creditCurrency===fe&&(ge=Math.min(Me,h.storeCredit));const Xe=Math.floor(fe==="ZAR"?Q.total/10:Q.total/3),rt={...h,loyaltyPoints:Math.max(0,h.loyaltyPoints+Xe-(Q.pointsToRedeem||0)),storeCredit:Math.max(0,(h.storeCredit||0)-ge),notifications:[...ie,...h.notifications]};return g(rt),X(rt),!A&&ye&&h.id!=="guest"&&await Ft(dt(ye,"users",h.id),en(rt)),ee},gn=async(Q,ee)=>{const ie="GV-"+Math.random().toString(36).substr(2,9).toUpperCase(),ge={code:ie,discountType:"fixed",value:Q,minSpend:Q,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};us(ge);const Me={id:`gift_${Date.now()}`,type:"gift_ready",title:"Gift Ready",message:"Your voucher is ready.",date:new Date().toISOString(),isRead:!1,voucherData:{code:ie,amount:Q,meta:ee}},Xe={...h,notifications:[Me,...h.notifications]};g(Xe),X(Xe),!A&&ye&&h.id!=="guest"&&await Ft(dt(ye,"users",h.id),en(Xe))},Wn=async(Q,ee,ie,ge)=>{if(h.id==="guest")return;const Me=e.find(rt=>rt.id===Q);if(Me){const rt={id:`rev_${Date.now()}`,userName:h.name,location:"Verified Buyer",content:ie,rating:ee,date:new Date().toLocaleDateString()};await tn({...Me,reviews:[rt,...Me.reviews||[]]})}const Xe={...h,loyaltyPoints:h.loyaltyPoints+100,notifications:h.notifications.filter(rt=>rt.id!==ge)};g(Xe),X(Xe),!A&&ye&&await Ft(dt(ye,"users",h.id),en(Xe))},ns=async Q=>{const ee={...h,loyaltyPoints:h.loyaltyPoints+50};g(ee),X(ee),!A&&ye&&h.id!=="guest"&&await Ft(dt(ye,"users",h.id),{loyaltyPoints:ee.loyaltyPoints})},ea=async(Q,ee)=>{if(h.id==="guest")return;const ie=h.socialRewards||{};if(ie[Q])return;const ge={...h,loyaltyPoints:h.loyaltyPoints+100,socialRewards:{...ie,[Q]:!0},socialHandles:{...h.socialHandles,[Q]:ee}};g(ge),X(ge),!A&&ye&&await Ft(dt(ye,"users",h.id),en(ge))},pr=(Q,ee,ie="system")=>{const ge={id:`sys_${Date.now()}`,type:ie,title:Q,message:ee,date:new Date().toISOString(),isRead:!1},Me={...h,notifications:[ge,...h.notifications]};g(Me),X(Me)},fr=()=>{try{const Q=JSON.stringify(e);return Q.length>0?{status:"success",details:`Serialization OK. Size: ${(Q.length/1024).toFixed(2)} KB`}:{status:"warning",details:"Empty products."}}catch(Q){return{status:"error",details:`Error: ${Q.message}`}}},Ys=()=>{ve(Q=>Q==="ZAR"?"USD":"ZAR")};S.useEffect(()=>{V($w(J))},[J]);const ta=async(Q,ee,ie)=>{var ge,Me;if(!(!ye&&!A))try{let Xe=null,rt=null;if(A)h.affiliateCode===ie&&(Xe=h);else{const Ve=sn(At(ye,"users"),zn("affiliateCode","==",ie)),Ye=await Qn(Ve);Ye.empty||(Xe={...Ye.docs[0].data(),id:Ye.docs[0].id},rt=Ye.docs[0].ref)}if(!Xe||((ge=Xe.affiliateStats)==null?void 0:ge.status)!=="approved")return;const nt=Xe.affiliateStats;let Fe=0,ot=0,Et=0;const Jt=[],un=Q.filter(Ve=>!Ve.vaultItem),wn=Q.filter(Ve=>Ve.vaultItem);for(const Ve of un){const Ye=fe==="ZAR"?Ve.price:Ve.priceUSD,St=nt.commissionRate/100,Tt=Ye*Ve.quantity*St;Fe+=Tt,Jt.push({id:`comm_${Date.now()}_${Ve.id}`,affiliateId:Xe.id,orderId:ee,itemId:Ve.id,itemName:Ve.name,itemType:"standard",basePrice:Ye,commissionRate:nt.commissionRate,commissionAmount:Tt,currency:fe,date:new Date().toISOString()})}for(const Ve of wn){const Ye=fe==="ZAR"?Ve.price:Ve.priceUSD,Tt=Ye*Ve.quantity*.01;ot+=Tt,Et+=Ve.quantity,Jt.push({id:`comm_${Date.now()}_${Ve.id}`,affiliateId:Xe.id,orderId:ee,itemId:Ve.id,itemName:Ve.name,itemType:"vault",basePrice:Ye,commissionRate:1,commissionAmount:Tt,currency:fe,date:new Date().toISOString()})}const Ut=Fe+ot,on={...nt,totalSalesCount:nt.totalSalesCount+Q.length,totalSalesValue:nt.totalSalesValue+Q.reduce((Ve,Ye)=>Ve+(fe==="ZAR"?Ye.price:Ye.priceUSD)*Ye.quantity,0),balance:nt.balance+Ut,vaultPurchasesThisMonth:nt.vaultPurchasesThisMonth+Et,weeklyMilestones:{...nt.weeklyMilestones,salesValue:nt.weeklyMilestones.salesValue+Q.reduce((Ve,Ye)=>Ve+(fe==="ZAR"?Ye.price:Ye.priceUSD)*Ye.quantity,0),vaultItemsSold:nt.weeklyMilestones.vaultItemsSold+Et}};on.totalSalesValue>=5e4?on.commissionRate=20:on.totalSalesValue>=15e3?on.commissionRate=15:on.totalSalesValue>=5e3&&(on.commissionRate=11);const Ds=new Date,Nn=new Date(Ds.getFullYear(),Ds.getMonth(),Ds.getDate()-Ds.getDay()).toISOString().split("T")[0];on.weeklyMilestones.weekStart!==Nn&&(on.weeklyMilestones={membershipsSold:0,salesValue:Q.reduce((Ve,Ye)=>Ve+(fe==="ZAR"?Ye.price:Ye.priceUSD)*Ye.quantity,0),vaultItemsSold:Et,weekStart:Nn});const M=[];if(on.weeklyMilestones.membershipsSold>=5&&!localStorage.getItem(`milestone_${Xe.id}_sprinter_${Nn}`)){const Ye=fe==="ZAR"?50:5;on.balance+=Ye,M.push({id:`milestone_${Date.now()}`,affiliateId:Xe.id,type:"sprinter",achievedAt:new Date().toISOString(),bonusAmount:Ye,currency:fe,weekStart:Nn}),localStorage.setItem(`milestone_${Xe.id}_sprinter_${Nn}`,"true")}const ce=fe==="ZAR"?5e3:300;if(on.weeklyMilestones.salesValue>=ce&&!localStorage.getItem(`milestone_${Xe.id}_big_spender_${Nn}`)){const Ye=fe==="ZAR"?200:15;on.balance+=Ye,M.push({id:`milestone_${Date.now()}`,affiliateId:Xe.id,type:"big_spender",achievedAt:new Date().toISOString(),bonusAmount:Ye,currency:fe,weekStart:Nn}),localStorage.setItem(`milestone_${Xe.id}_big_spender_${Nn}`,"true")}if(on.weeklyMilestones.vaultItemsSold>=10&&!localStorage.getItem(`milestone_${Xe.id}_vault_king_${Nn}`)){const Ye=fe==="ZAR"?100:8;on.balance+=Ye,M.push({id:`milestone_${Date.now()}`,affiliateId:Xe.id,type:"vault_king",achievedAt:new Date().toISOString(),bonusAmount:Ye,currency:fe,weekStart:Nn}),localStorage.setItem(`milestone_${Xe.id}_vault_king_${Nn}`,"true")}if(nt.parentId)try{let Ve=null,Ye=null;if(!A){const St=sn(At(ye,"users"),zn("id","==",nt.parentId)),Tt=await Qn(St);Tt.empty||(Ve={...Tt.docs[0].data(),id:Tt.docs[0].id},Ye=Tt.docs[0].ref)}if(Ve&&((Me=Ve.affiliateStats)==null?void 0:Me.status)==="approved"){const St=Ve.affiliateStats,Tt=Ut*.01,Wr={...St,balance:St.balance+Tt};if(!A&&Ye){await Ft(Ye,{affiliateStats:Wr});const gr={id:`team_bonus_${Date.now()}`,type:"system",title:"Team Leader Bonus",message:`You earned ${fe==="ZAR"?"R":"$"}${Tt.toFixed(2)} from a recruit's sale!`,date:new Date().toISOString(),isRead:!1};await Ft(Ye,{notifications:Eo(gr)})}}}catch(Ve){console.error("Failed to process team leader bonus",Ve)}const Ue={...Xe,affiliateStats:on};if(A)Xe.id===h.id&&(g(Ue),X(Ue));else if(rt){await Ft(rt,{affiliateStats:on});const Ve={id:`commission_${Date.now()}`,type:"system",title:"New Commission Earned!",message:`You earned ${fe==="ZAR"?"R":"$"}${Ut.toFixed(2)} from this sale!`,date:new Date().toISOString(),isRead:!1};await Ft(rt,{notifications:Eo(Ve)})}const it=JSON.parse(localStorage.getItem("commission_records")||"[]");if(localStorage.setItem("commission_records",JSON.stringify([...it,...Jt])),M.length>0){const Ve=JSON.parse(localStorage.getItem("affiliate_milestones")||"[]");localStorage.setItem("affiliate_milestones",JSON.stringify([...Ve,...M]))}}catch(Xe){console.error("Failed to process affiliate commissions",Xe)}},Zs=async Q=>{if(!(A||!ye||h.id==="guest"))try{const ee={id:`acct_close_admin_${Date.now()}`,type:"system",title:"Account Closure Request",message:`${h.name} (${h.email}) has requested account closure. Reason: ${Q}`,date:new Date().toISOString(),isRead:!1};await Ft(dt(ye,"users",h.id),{isActive:!1,closureReason:Q,closureRequestedAt:new Date().toISOString(),scheduledDeletionAt:new Date(Date.now()+1440*60*1e3).toISOString()});const ie=sn(At(ye,"users"),zn("email","==","spoilmevintagediy@gmail.com")),ge=await Qn(ie);ge.empty||await Ft(ge.docs[0].ref,{notifications:Eo(ee)});const Me={id:`acct_close_user_${Date.now()}`,type:"system",title:"Account Closure Requested",message:"Your account closure has been requested. Your account and all data will be permanently deleted within 24 hours.",date:new Date().toISOString(),isRead:!1};await Ft(dt(ye,"users",h.id),{notifications:Eo(Me)})}catch(ee){throw console.error("Error closing account:",ee),ee}},Rs=Q=>{"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"USER_DATA",name:Q.name||Q.firstName+" "+Q.lastName||"valued customer"})},Hr=async Q=>{if(!h.id||h.id==="guest"){console.error("Cannot apply for artist as guest user.");return}const ee={uid:h.id,name:Q.name,surname:Q.surname,artistTradeName:Q.artistTradeName,contactNumber:Q.contactNumber,email:Q.email,productImages:Q.productImages,status:"pending",submittedAt:Ig()};if(!A&&ye)try{await Fi(At(ye,"artist_applications"),ee)}catch(Me){throw console.error("Error submitting artist application:",Me),Me}const ie={id:`artist_app_${Date.now()}`,type:"system",title:"Artist Partnership Application Received",message:"Your application to become an artist partner is pending review. We will contact you soon!",date:new Date().toISOString(),isRead:!1},ge={...h,notifications:[ie,...h.notifications]};g(ge),X(ge),!A&&ye&&h.id!=="guest"&&await Ft(dt(ye,"users",h.id),en(ge))};return n.jsx(r2.Provider,{value:{products:e,categories:r,cart:d,user:h,specials:b,vouchers:P,appliedVoucher:q,affiliateLeaderboard:W,memberCount:R,weeklyWinners:I,isLoading:k,isDemoMode:A,dbConnectionError:F,orders:o,isStickyProgressBarVisible:L,setIsStickyProgressBarVisible:ne,currency:fe,setCurrency:ve,toggleCurrency:Ys,packagingPresets:pe,materialPresets:Te,savePackagingPreset:ue,deletePackagingPreset:G,saveMaterialPreset:se,deleteMaterialPreset:Ie,login:Ae,logout:Be,register:He,addToCart:We,removeFromCart:at,updateCartQuantity:bt,clearCart:z,toggleWishlist:re,checkout:Gt,submitReview:Wn,addSystemNotification:pr,processGiftVoucherPurchase:gn,applyForAffiliate:$e,approveAffiliate:_e,rejectAffiliate:qe,sendAffiliateMessage:Vt,buyAffiliateContent:kt,joinAffiliateElite:Dt,simulateAffiliateSale:pt,updateAffiliateTier:xe,assignAffiliateParent:mt,applyForArtist:Hr,addProduct:vt,updateProduct:tn,deleteProduct:Re,addOrder:In,updateOrder:Hn,deleteOrder:Is,addCategory:ds,updateCategory:es,deleteCategory:mr,replaceCategories:ts,addSpecial:Ns,resetStore:je,seedTestUsers:we,getAllUsers:Qt,runDataDiagnostics:fr,adminAdjustPoints:$t,getCartTotal:tt,addVoucher:us,deleteVoucher:fn,applyExternalVoucher:Rt,setAppliedVoucher:Z,shareProduct:ns,claimSocialReward:ea,updateUserAddress:xt,manualWinner:J,setManualWinner:K,auth:qn,closeAccount:Zs},children:s})},Ct=()=>{const s=S.useContext(r2);if(!s)throw new Error("useStore must be used within StoreProvider");return s};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(s,e)=>{const t=S.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:d="",children:m,...h},g)=>S.createElement("svg",{ref:g,...EM,width:i,height:i,stroke:r,strokeWidth:c?Number(o)*24/Number(i):o,className:["lucide",`lucide-${TM(s)}`,d].join(" "),...h},[...e.map(([b,w])=>S.createElement(b,w)),...Array.isArray(m)?m:[m]]));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=Ce("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=Ce("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=Ce("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=Ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=Ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=Ce("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=Ce("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=Ce("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=Ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=Ce("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=Ce("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=Ce("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=Ce("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=Ce("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=Ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=Ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=Ce("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=Ce("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=Ce("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=Ce("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=Ce("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=Ce("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=Ce("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=Ce("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=Ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=Ce("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=Ce("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=Ce("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=Ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=Ce("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=Ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=Ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=Ce("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=Ce("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=Ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=Ce("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=Ce("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=Ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=Ce("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=Ce("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=Ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=Ce("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=Ce("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=Ce("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=Ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=Ce("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=Ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=Ce("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=Ce("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=Ce("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Ce("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=Ce("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=Ce("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=Ce("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=Ce("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=Ce("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=Ce("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=Ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=Ce("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=Ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=Ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Ce("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=Ce("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Ce("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=Ce("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=Ce("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=Ce("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Ce("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=Ce("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=Ce("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=Ce("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=Ce("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=Ce("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=Ce("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=Ce("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=Ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=Ce("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=Ce("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=Ce("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=Ce("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=Ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=Ce("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Ce("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=Ce("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=Ce("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=Ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=Ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=Ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Jw=["Lerato in Sandton just unlocked The Secret Vault.","Thandi in Durban just unlocked The Secret Vault.","Johan in Cape Town just unlocked The Secret Vault.","Bianca in Pretoria just unlocked The Secret Vault.","Jessica in New York just unlocked The Secret Vault.","Emily in Texas just unlocked The Secret Vault.","Ashley in California just unlocked The Secret Vault.","Sarah in Florida just unlocked The Secret Vault.","Sophie in London just unlocked The Secret Vault.","Emma in Manchester just unlocked The Secret Vault."],n6=()=>{const{weeklyWinners:s,currency:e}=Ct(),[t,r]=S.useState(!1),[i,o]=S.useState(""),[c,d]=S.useState("winner");return S.useEffect(()=>{let m;const h=()=>{if(Math.random()<.6&&s.length>0){const P=s[Math.floor(Math.random()*s.length)],C=P.currency==="ZAR"?`R${P.prize}`:`$${P.prize}`,k=`${P.name} just won ${C} in the Weekly Draw!`;o(k),d("winner")}else{const P=Jw[Math.floor(Math.random()*Jw.length)];o(P),d("vault")}r(!0),setTimeout(()=>{r(!1)},6e3);const w=Math.floor(Math.random()*20001+2e4);m=setTimeout(h,w)};return m=setTimeout(h,5e3),()=>clearTimeout(m)},[s,e]),i?n.jsx("div",{className:`fixed bottom-4 left-4 z-50 max-w-xs w-full transition-all duration-700 transform ${t?"translate-y-0 opacity-100":"translate-y-20 opacity-0 pointer-events-none"}`,children:n.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md border border-gray-800 p-3 rounded-xl shadow-2xl flex items-center gap-3 relative overflow-hidden group",children:[n.jsx("button",{onClick:()=>r(!1),className:"absolute top-1 right-1 text-gray-500 hover:text-white p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(pn,{size:12})}),n.jsx("div",{className:`w-8 h-8 shrink-0 rounded-full border flex items-center justify-center ${c==="winner"?"border-yellow-500/30 bg-yellow-900/20":"border-purple-500/30 bg-purple-900/20"}`,children:c==="winner"?n.jsx(Er,{size:16,className:"text-yellow-400"}):n.jsx(It,{size:16,className:"text-purple-400"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-xs text-gray-200 leading-tight",children:i}),n.jsx("div",{className:"text-[9px] text-gray-500 mt-1",children:"Just now"})]})]})}):null},s6=500,g2=({subtotal:s,isSticky:e=!1,onContinueShopping:t,onClose:r})=>{const{currency:i}=Ct();if(i==="USD")return null;const o=()=>i==="ZAR"?"R":"$",c=(w,P)=>w,d=c(s6),m=d-s,h=Math.min(s/d*100,100),g=s>=d,b=g?"Congratulations! You've unlocked FREE shipping!":`You're ${o()}${c(m).toFixed(2)} away from free shipping!`;return e?n.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[n.jsx("div",{className:"p-2 bg-pink-900/20 text-pink-500 rounded-full border border-pink-500/30",children:n.jsx(Gr,{size:20})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`text-sm font-bold ${g?"text-green-400":"text-white"}`,children:b}),n.jsx("div",{className:"w-full bg-black/50 rounded-full h-2 mt-1 overflow-hidden border border-gray-700",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${g?"bg-green-500":"bg-pink-500"}`,style:{width:`${h}%`}})})]}),n.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-white",children:n.jsx(pn,{size:18})})]})}):n.jsx("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-pink-500/30 rounded-2xl p-6 shadow-lg mb-8",children:n.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[n.jsx("div",{className:"p-3 bg-pink-900/30 text-pink-400 rounded-full border border-pink-500/30",children:n.jsx(Gr,{size:28})}),n.jsxs("div",{className:"flex-1 text-center md:text-left",children:[n.jsx("h3",{className:`text-lg font-bold ${g?"text-green-400":"text-white"}`,children:b}),n.jsx("div",{className:"w-full bg-black rounded-full h-2.5 mt-2 overflow-hidden border border-gray-700 shadow-inner",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${g?"bg-green-500":"bg-pink-500"} shadow-[inset_0_1px_1px_rgba(255,255,255,0.2)]`,style:{width:`${h}%`}})})]}),!g&&n.jsxs("button",{onClick:t,className:"w-full md:w-auto mt-2 md:mt-0 px-6 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:["Continue Shopping ",n.jsx(Yt,{size:18})]})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var ic;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(ic||(ic={}));class ng extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const r6=s=>{var e,t;return s!=null&&s.androidBridge?"android":!((t=(e=s==null?void 0:s.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},i6=s=>{const e=s.CapacitorCustomPlatform||null,t=s.Capacitor||{},r=t.Plugins=t.Plugins||{},i=()=>e!==null?e.name:r6(s),o=()=>i()!=="web",c=b=>{const w=h.get(b);return!!(w!=null&&w.platforms.has(i())||d(b))},d=b=>{var w;return(w=t.PluginHeaders)===null||w===void 0?void 0:w.find(P=>P.name===b)},m=b=>s.console.error(b),h=new Map,g=(b,w={})=>{const P=h.get(b);if(P)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),P.proxy;const C=i(),k=d(b);let E;const F=async()=>(!E&&C in w?E=typeof w[C]=="function"?E=await w[C]():E=w[C]:e!==null&&!E&&"web"in w&&(E=typeof w.web=="function"?E=await w.web():E=w.web),E),U=(_,I)=>{var V,A;if(k){const B=k==null?void 0:k.methods.find(L=>I===L.name);if(B)return B.rtype==="promise"?L=>t.nativePromise(b,I.toString(),L):(L,ne)=>t.nativeCallback(b,I.toString(),L,ne);if(_)return(V=_[I])===null||V===void 0?void 0:V.bind(_)}else{if(_)return(A=_[I])===null||A===void 0?void 0:A.bind(_);throw new ng(`"${b}" plugin is not implemented on ${C}`,ic.Unimplemented)}},q=_=>{let I;const V=(...A)=>{const B=F().then(L=>{const ne=U(L,_);if(ne){const pe=ne(...A);return I=pe==null?void 0:pe.remove,pe}else throw new ng(`"${b}.${_}()" is not implemented on ${C}`,ic.Unimplemented)});return _==="addListener"&&(B.remove=async()=>I()),B};return V.toString=()=>`${_.toString()}() { [capacitor code] }`,Object.defineProperty(V,"name",{value:_,writable:!1,configurable:!1}),V},Z=q("addListener"),W=q("removeListener"),$=(_,I)=>{const V=Z({eventName:_},I),A=async()=>{const L=await V;W({eventName:_,callbackId:L},I)},B=new Promise(L=>V.then(()=>L({remove:A})));return B.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await A()},B},R=new Proxy({},{get(_,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return k?$:Z;case"removeListener":return W;default:return q(I)}}});return r[b]=R,h.set(b,{name:b,proxy:R,platforms:new Set([...Object.keys(w),...k?[C]:[]])}),R};return t.convertFileSrc||(t.convertFileSrc=b=>b),t.getPlatform=i,t.handleError=m,t.isNativePlatform=o,t.isPluginAvailable=c,t.registerPlugin=g,t.Exception=ng,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},a6=s=>s.Capacitor=i6(s),Fd=a6(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),so=Fd.registerPlugin;class x2{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,t);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const i=this.listeners[e];if(!i){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(t),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new Fd.Exception(e,ic.Unimplemented)}unavailable(e="not available"){return new Fd.Exception(e,ic.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const Yw=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Zw=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class o6 extends x2{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=Zw(i).trim(),o=Zw(o).trim(),t[i]=o}),t}async setCookie(e){try{const t=Yw(e.key),r=Yw(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${o}; ${c};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}so("CapacitorCookies",{web:()=>new o6});const l6=async s=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(s)}),c6=(s={})=>{const e=Object.keys(s);return Object.keys(s).map(i=>i.toLocaleLowerCase()).reduce((i,o,c)=>(i[o]=s[e[c]],i),{})},d6=(s,e=!0)=>s?Object.entries(s).reduce((r,i)=>{const[o,c]=i;let d,m;return Array.isArray(c)?(m="",c.forEach(h=>{d=e?encodeURIComponent(h):h,m+=`${o}=${d}&`}),m.slice(0,-1)):(d=e?encodeURIComponent(c):c,m=`${o}=${d}`),`${r}&${m}`},"").substr(1):null,u6=(s,e={})=>{const t=Object.assign({method:s.method||"GET",headers:s.headers},e),i=c6(s.headers)["content-type"]||"";if(typeof s.data=="string")t.body=s.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[c,d]of Object.entries(s.data||{}))o.set(c,d);t.body=o.toString()}else if(i.includes("multipart/form-data")||s.data instanceof FormData){const o=new FormData;if(s.data instanceof FormData)s.data.forEach((d,m)=>{o.append(m,d)});else for(const d of Object.keys(s.data))o.append(d,s.data[d]);t.body=o;const c=new Headers(t.headers);c.delete("content-type"),t.headers=c}else(i.includes("application/json")||typeof s.data=="object")&&(t.body=JSON.stringify(s.data));return t};class h6 extends x2{async request(e){const t=u6(e,e.webFetchExtra),r=d6(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,t),c=o.headers.get("content-type")||"";let{responseType:d="text"}=o.ok?e:{};c.includes("application/json")&&(d="json");let m,h;switch(d){case"arraybuffer":case"blob":h=await o.blob(),m=await l6(h);break;case"json":m=await o.json();break;case"document":case"text":default:m=await o.text()}const g={};return o.headers.forEach((b,w)=>{g[w]=b}),{data:m,headers:g,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}so("CapacitorHttp",{web:()=>new h6});async function m6(s){try{const e=globalThis.Capacitor||window.Capacitor,t=e&&e.Plugins&&e.Plugins.UpdaterPlugin;if(t&&t.downloadAndInstall){await t.downloadAndInstall({url:s});return}}catch{}throw new Error("UpdaterPlugin not available")}so("UpdaterPlugin",{web:()=>({openUrl:async()=>{console.warn("UpdaterPlugin not available on web")}})});const p6="https://spoilme-edee0.web.app/version.json",f6=()=>{if(typeof navigator>"u")return!1;const s=navigator.userAgent||navigator.vendor||"";return/Android|iPhone|iPad|iPod/i.test(s)};function g6({apkUrl:s="",playStoreUrl:e}){const[t,r]=S.useState(!1),[i,o]=S.useState(!1),[c,d]=S.useState(s);if(S.useEffect(()=>{var w,P;if(!f6())return;const g=(P=(w=window.Capacitor)==null?void 0:w.isNativePlatform)==null?void 0:P.call(w);o(g),(async()=>{try{console.log("Checking for update...");const k=await(await fetch(p6)).json();console.log("Fetched data:",k);const E=k.version,F=localStorage.getItem("appVersion")||"0.1";console.log("Latest version:",E,"Stored version:",F),E!==F?(console.log("New version detected, showing update banner"),d(k.apkUrl),r(!0),localStorage.setItem("appVersion",E)):(console.log("No new version"),(g?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))||r(!0))}catch(C){console.error("Failed to check for update:",C),(g?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))||r(!0)}})()},[]),!t)return null;const m=()=>{const g=i?"updatePromptDismissed":"installPromptDismissed";localStorage.setItem(g,String(Date.now())),r(!1)},h=async()=>{try{window.Capacitor&&window.Capacitor.isNativePlatform&&window.Capacitor.isNativePlatform()?await m6(c):window.open(c,"_blank")}catch(g){console.error("Updater error",g),window.open(c,"_blank")}i||m()};return n.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[n.jsx("div",{className:"p-2 bg-cyan-900/20 text-cyan-500 rounded-full border border-cyan-500/30",children:n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z",clipRule:"evenodd"})})}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm font-bold text-white",children:"Update available - Get the latest features!"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:h,className:"px-4 py-2 bg-green-500 text-black rounded font-semibold text-sm",children:"Install Update"}),n.jsx("button",{onClick:m,className:"px-4 py-2 ring-1 ring-gray-700 rounded text-gray-300 text-sm",children:"Later"})]})]})})}const x6=()=>{const[s,e]=S.useState(!1),[t,r]=S.useState("https://spoilme-edee0.web.app/Spoil-Me-Vintage-0.4.apk"),[i,o]=S.useState("0.4"),{cart:c,user:d,isStickyProgressBarVisible:m,setIsStickyProgressBarVisible:h,getCartTotal:g,currency:b,toggleCurrency:w}=Ct(),P=Ya();S.useEffect(()=>{window.scrollTo(0,0)},[P.pathname]),S.useEffect(()=>{(async()=>{try{const q=await(await fetch("https://spoilme-edee0.web.app/version.json")).json();r(q.apkUrl),o(q.version)}catch(U){console.error("Failed to fetch latest APK URL:",U)}})()},[]);const C=c.reduce((F,U)=>F+U.quantity,0),k=g();d.wishlist&&d.wishlist.length;const E=d.notifications?d.notifications.filter(F=>!F.isRead).length:0;return n.jsxs("div",{className:"min-h-screen flex flex-col bg-black text-gray-100",children:[n.jsx("style",{children:`
        @keyframes marquee {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
        .animate-marquee {
          animation: marquee 10s linear infinite;
        }
        .animate-marquee:hover {
          animation-play-state: paused;
        }
      `}),n.jsx("div",{className:"w-full bg-zinc-900 border-b border-white/5 overflow-hidden py-2 relative z-[60]",children:n.jsxs("div",{className:"flex animate-marquee whitespace-nowrap",children:[n.jsxs("div",{className:"flex items-center gap-8 px-4",children:[n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[n.jsx(ks,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[n.jsx(Un,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[n.jsx(Gr,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[n.jsx(bn,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[n.jsx(yd,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[n.jsx(or,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[n.jsx(Go,{size:14,className:"text-green-500"})," And lots more!"]})]}),n.jsxs("div",{className:"flex items-center gap-8 px-4",children:[n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[n.jsx(ks,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[n.jsx(Un,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[n.jsx(Gr,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[n.jsx(bn,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[n.jsx(yd,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[n.jsx(or,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),n.jsx("span",{className:"text-gray-700",children:""}),n.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[n.jsx(Go,{size:14,className:"text-green-500"})," And lots more!"]})]})]})}),n.jsxs("header",{className:"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800 transition-all",children:[n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"relative flex flex-col lg:flex-row items-center justify-center lg:justify-between h-auto lg:h-20 py-4 lg:py-0 gap-3",children:[n.jsx("button",{className:"absolute top-1/2 -translate-y-1/2 left-4 lg:hidden p-2 rounded-md text-gray-400 hover:text-white",onClick:()=>e(!s),children:s?n.jsx(pn,{size:24}):n.jsx(BM,{size:24})}),n.jsxs(Le,{to:"/",className:"flex-shrink-0 group flex flex-col items-center leading-none",children:[n.jsx("span",{className:"font-cherry text-[24px] font-bold text-pink-500 group-hover:text-pink-400 transition-colors drop-shadow-[0_0_5px_rgba(236,72,153,0.5)]",children:"Spoil Me"}),n.jsx("span",{className:"font-cherry text-[24px] font-bold text-cyan-400 group-hover:text-cyan-300 transition-colors drop-shadow-[0_0_5px_rgba(34,211,238,0.5)] ml-7 -mt-1",children:"Vintage"})]}),n.jsxs("nav",{className:"hidden lg:flex absolute left-1/2 -translate-x-1/2 space-x-8",children:[n.jsx(Le,{to:"/",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${P.pathname==="/"?"text-cyan-400":"text-gray-300"}`,children:"Home"}),n.jsx(Le,{to:"/#catalog",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Catalog"}),n.jsx(Le,{to:"/customized-wire-wrapped-pendants",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${P.pathname==="/customized-wire-wrapped-pendants"?"text-cyan-400":"text-gray-300"}`,children:"Custom Pendants"}),n.jsxs(Le,{to:"/membership",className:`text-sm font-medium flex items-center gap-1 hover:text-purple-400 transition-colors ${P.pathname==="/membership"?"text-purple-400 font-bold":"text-gray-300"}`,children:[n.jsx(It,{size:14})," Membership"]}),n.jsx(Le,{to:"/#specials",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Specials"})]}),n.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-3 w-full lg:w-auto justify-center lg:justify-end",children:[n.jsx("button",{onClick:w,className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors text-xs font-bold",title:`Switch to ${b==="ZAR"?"USD":"ZAR"}`,children:b}),n.jsx("button",{className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors",children:n.jsx(no,{size:20})}),d.email?n.jsx(Le,{to:"/earn-rewards",className:"group flex items-center justify-center p-2 relative",title:"Your Loyalty Rewards",children:n.jsxs("div",{className:"flex items-center gap-1.5 hover:bg-purple-900/50 px-2 py-1 rounded-full transition-colors border border-transparent hover:border-purple-500/30",children:[n.jsx(or,{size:20,className:"text-purple-400 group-hover:text-pink-400"}),n.jsx("span",{className:"hidden md:inline-block text-xs font-bold text-purple-200 group-hover:text-white",children:d.loyaltyPoints})]})}):n.jsx(Le,{to:"/earn-rewards",className:"p-2 text-gray-400 hover:text-purple-400 transition-colors relative",title:"Earn Rewards",children:n.jsx(or,{size:20})}),d.email&&n.jsxs(Le,{to:"/notifications",className:"p-2 text-gray-400 hover:text-yellow-400 transition-colors relative group",children:[n.jsx(Pa,{size:20}),E>0&&n.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-yellow-400 rounded-full shadow-[0_0_5px_rgba(250,204,21,0.8)]",children:E})]}),d.email?n.jsx(Le,{to:"/profile",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative",children:n.jsx(bi,{size:20})}):n.jsx(Le,{to:"/login",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative flex items-center gap-1",children:n.jsx(u2,{size:20})}),n.jsxs(Le,{to:"/cart",className:"p-2 text-gray-400 hover:text-pink-500 transition-colors relative group",children:[n.jsx(fc,{size:20}),C>0&&n.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-green-400 rounded-full shadow-[0_0_5px_rgba(74,222,128,0.8)]",children:C})]})]})]})}),s&&n.jsx("div",{className:"lg:hidden absolute top-full left-0 w-full bg-zinc-900 border-b border-gray-800 shadow-lg animate-in slide-in-from-top-5 duration-200 z-40",children:n.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[n.jsx(Le,{to:"/",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Home"}),n.jsxs(Le,{to:"/customized-wire-wrapped-pendants",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[n.jsx(Un,{size:16,className:"text-gold"})," Custom Pendants"]}),n.jsxs(Le,{to:"/membership",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-purple-400 hover:bg-zinc-800 hover:text-purple-300 flex items-center gap-2",children:[n.jsx(It,{size:16})," Membership Perks"]}),n.jsxs(Le,{to:"/earn-rewards",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[n.jsx(or,{size:16,className:"text-purple-400"}),d.email?"My Rewards":"Earn Rewards",d.email&&n.jsxs("span",{className:"bg-purple-900/50 text-purple-200 text-[10px] px-2 py-0.5 rounded-full font-bold ml-auto",children:[d.loyaltyPoints," Pts"]})]}),n.jsxs(Le,{to:"/affiliate-program",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-green-400 flex items-center gap-2",children:[n.jsx(dm,{size:16,className:"text-green-500"})," Partnership Program"]}),n.jsxs(Le,{to:"/artist-partnership",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-yellow-400 flex items-center gap-2",children:[n.jsx(Un,{size:16,className:"text-yellow-400"})," Artist Partnership"]}),d.email?n.jsxs(Le,{to:"/profile",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center justify-between",children:["My Profile",E>0&&n.jsxs("span",{className:"bg-yellow-400 text-black text-xs px-2 py-0.5 rounded-full font-bold",children:[E," New"]})]}):n.jsx(Le,{to:"/login",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Login / Register"})]})})]}),n.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsx(Lj,{})}),n.jsx(n6,{}),m&&k>0&&n.jsx(g2,{subtotal:k,isSticky:!0,onClose:()=>h(!1)}),n.jsx(g6,{}),n.jsx("footer",{className:"bg-zinc-950 border-t border-gray-800 py-12",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"About"}),n.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[n.jsx("li",{children:n.jsx(Le,{to:"/",className:"hover:text-white",children:"Our Story"})}),n.jsx("li",{children:n.jsx(Le,{to:"/",className:"hover:text-white",children:"Careers"})}),n.jsx("li",{children:n.jsx(Le,{to:"/",className:"hover:text-white",children:"Press"})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"Support"}),n.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[n.jsx("li",{children:n.jsx(Le,{to:"/terms",className:"hover:text-white",children:"Contact Us"})}),n.jsx("li",{children:n.jsx(Le,{to:"/terms",className:"hover:text-white",children:"Shipping"})}),n.jsx("li",{children:n.jsx(Le,{to:"/terms",className:"hover:text-white",children:"Returns"})}),n.jsx("li",{children:n.jsx(Le,{to:"/artist-partnership",className:"hover:text-white",children:"Artist Partnership"})}),n.jsxs("li",{className:"hover:text-green-400 cursor-pointer flex items-center gap-2 text-gray-300 font-medium",onClick:()=>window.open(t,"_blank"),children:[n.jsx(Wi,{size:14})," Download App v",i]})]})]})]}),d.isAdmin&&n.jsx("div",{className:"mt-12 pt-8 border-t border-gray-900 flex justify-center",children:n.jsxs(Le,{to:"/admin",className:"flex items-center gap-2 text-xs text-red-400 hover:text-red-300 uppercase tracking-widest font-bold transition-colors bg-red-900/10 px-4 py-2 rounded border border-red-900/30",children:[n.jsx(c2,{size:14})," Admin Dashboard"]})})]})})]})},y6=()=>{const s=Ya(),e=As(),{user:t}=Ct();S.useEffect(()=>{(!t||!t.isAdmin)&&e("/login")},[t,e]);const i=[{path:"/admin",icon:c2,label:"Dashboard",permission:"dashboard"},{path:"/admin/orders",icon:Ka,label:"Orders",permission:"orders"},{path:"/admin/products",icon:rc,label:"Products",permission:"products"},{path:"/admin/categories",icon:f2,label:"Categories",permission:"categories"},{path:"/admin/artists",icon:ld,label:"Artists",permission:"artists"},{path:"/admin/gift-cards",icon:bn,label:"Gift Cards",permission:"giftCards"},{path:"/admin/social",icon:Ho,label:"Social Studio",permission:"social"},{path:"/admin/affiliates",icon:ks,label:"Affiliates",permission:"affiliates"},{path:"/admin/affiliate-requests",icon:Da,label:"Requests",permission:"affiliates"},{path:"/admin/notifications",icon:Pa,label:"Push Notify",permission:"notifications"},{path:"/admin/winners",icon:Er,label:"Weekly Winners",permission:"winners"},{path:"/admin/expenses",icon:mn,label:"Expenses",permission:"expenses"},{path:"/admin/members",icon:Da,label:"Membership",permission:"members"},{path:"/admin/vault",icon:PM,label:"Vault",permission:"vault"},{path:"/admin/custom-pendant-manager",icon:Un,label:"Custom Pendants",permission:"products"},{path:"/admin/ad-pricing",icon:mn,label:"Ad Pricing",permission:"admin"}].filter(o=>{var c;return(t==null?void 0:t.email)==="spoilmevintagediy@gmail.com"?!0:((c=t==null?void 0:t.adminPermissions)==null?void 0:c[o.permission])===!0});return t!=null&&t.isAdmin?n.jsxs("div",{className:"min-h-screen bg-black flex text-gray-100",children:[n.jsxs("aside",{className:"w-64 bg-zinc-900 border-r border-gray-800 hidden md:flex flex-col fixed h-full",children:[n.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-gray-800",children:[n.jsx("span",{className:"text-xl font-bold text-pink-500",children:"Spoil Me Vintage"}),n.jsx("span",{className:"ml-2 text-xs bg-purple-900/50 border border-purple-500/50 text-purple-300 px-2 py-0.5 rounded",children:"ADMIN"})]}),n.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[n.jsxs(Le,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-gray-400 hover:bg-zinc-800 hover:text-white rounded-lg mb-4 transition-colors",children:[n.jsx(Ha,{size:18})," Back to Store"]}),n.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-2",children:"Management"}),i.slice(0,5).map(o=>n.jsx(sg,{item:o,location:s},o.path)),n.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Marketing"}),i.slice(5,10).map(o=>n.jsx(sg,{item:o,location:s},o.path)),n.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Operations"}),i.slice(10).map(o=>n.jsx(sg,{item:o,location:s},o.path))]})]}),n.jsx("main",{className:"flex-1 md:ml-64 p-8 overflow-y-auto bg-black h-screen",children:n.jsx("div",{className:"max-w-6xl mx-auto pb-20 md:pb-0",children:n.jsx(Lj,{})})}),n.jsx("div",{className:"md:hidden fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 flex justify-between px-4 py-3 z-50 overflow-x-auto gap-4",children:i.map(o=>n.jsx(Le,{to:o.path,className:`p-2 rounded-lg ${s.pathname===o.path?"text-pink-400 bg-pink-900/20":"text-gray-400 hover:text-white"}`,children:n.jsx(o.icon,{size:24})},o.path))})]}):null},sg=({item:s,location:e})=>{const t=e.pathname===s.path;return n.jsxs(Le,{to:s.path,className:`flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-colors ${t?"bg-pink-900/20 text-pink-400 border border-pink-500/20":"text-gray-400 hover:bg-zinc-800 hover:text-white"}`,children:[n.jsx(s.icon,{size:18})," ",s.label]})},y2=s=>!!s&&/^https?:\/\//i.test(s),b2=s=>!!s&&s.startsWith("data:"),v2=s=>!!s&&s.startsWith("blob:"),b6=s=>!!s&&s.startsWith("gs://");async function v6(s){if(!s)return null;if(typeof s=="string"){if(y2(s)||b2(s)||v2(s)||s.startsWith("/"))return s;if(b6(s)){const e=s.match(/^gs:\/\/[^/]+\/(.+)$/),t=e?e[1]:s;try{return Vn?await Vr(Or(Vn,decodeURIComponent(t).replace(/^\//,""))):null}catch(r){return console.warn("Failed to resolve gs:// URL",s,r),null}}try{return Vn?await Vr(Or(Vn,s.replace(/^\//,""))):s}catch{}return s}if(typeof s=="object"){const e=s.fullPath||s.path||s.name||null;if(e&&Vn)try{return await Vr(Or(Vn,e.replace(/^\//,"")))}catch(t){return console.warn("Failed to resolve storage object image path",s,t),null}}return null}function w2(s,e){const[t,r]=S.useState(e||void 0);return S.useEffect(()=>{let i=!0;if(!s){r(e);return}if(y2(s)||b2(s)||v2(s)||s.startsWith("/")){r(s);return}return(async()=>{try{const o=await v6(s);i&&r(o||e)}catch(o){console.error("Error resolving image src",o),i&&r(e)}})(),()=>{i=!1}},[s,e]),t}const Ud=({src:s,alt:e="",className:t,fallback:r,onError:i})=>{const o=w2(s,r||ac(600));return n.jsx("img",{src:o,alt:e,className:t,onError:c=>{console.warn(" Image onError triggered for:",o),i==null||i(c)}})},ac=(s=600,e,t="No Image")=>`https://placehold.co/${e?`${s}x${e}`:s.toString()}/1a1a1a/D4AF37?text=${encodeURIComponent(t)}`,Wo=s=>{const e=s.currentTarget;if(e.src.includes("placehold.co")){console.warn("Fallback image also failed. Hiding element."),e.style.display="none";return}console.warn(`Image failed to load: ${e.src}. Switching to fallback.`),e.src=ac(600,600,"Spoil Me Vintage")},Cs=({product:s})=>{var J;const{addToCart:e,toggleWishlist:t,user:r,cart:i,currency:o}=Ct(),[c,d]=S.useState(!1),m=((J=r.wishlist)==null?void 0:J.includes(s.id))||!1,h=As(),g=new Date,b=s.promoStartsAt?new Date(s.promoStartsAt):null,w=s.promoExpiresAt?new Date(s.promoExpiresAt):null,P=b&&!isNaN(b.getTime()),C=w&&!isNaN(w.getTime()),k=(s.promoPrice||0)>0&&(!P||b<=g)&&(!C||w>g),E=o==="ZAR"?s.price:s.priceUSD||s.price,F=o==="ZAR"?s.memberPrice||E*.8:s.memberPriceUSD||E*.8;let U=E,q=!1,Z="none";r.isMember?(q=!0,k?r.membershipTier==="deluxe"&&s.promoDeluxeMemberPrice&&s.promoDeluxeMemberPrice>0?(U=s.promoDeluxeMemberPrice,Z="deluxe"):r.membershipTier==="premium"&&s.promoPremiumMemberPrice&&s.promoPremiumMemberPrice>0?(U=s.promoPremiumMemberPrice,Z="premium"):r.membershipTier==="basic"&&s.promoBasicMemberPrice&&s.promoBasicMemberPrice>0?(U=s.promoBasicMemberPrice,Z="basic"):U=Math.min(F,s.promoPrice||1/0):U=F):k&&(U=s.promoPrice);const W=k&&s.promoBasicMemberPrice&&s.promoBasicMemberPrice>0?s.promoBasicMemberPrice:F,R=s.reviews&&s.reviews.length>0?(s.reviews.reduce((K,X)=>K+X.rating,0)/s.reviews.length).toFixed(1):"5.0",_=s.reviews?s.reviews.length:0,I=s.soldCount||0,A=k?(()=>{if(!C||!w)return null;const K=w.getTime()-g.getTime();if(K<=0)return null;const X=Math.floor(K/(1e3*60*60*24)),ue=Math.floor(K%(1e3*60*60*24)/(1e3*60*60)),G=Math.floor(K%(1e3*60*60)/(1e3*60));return X>0?`${X}d ${ue}h`:`${ue}h ${G}m`})():null,B=s.type==="Ring"||s.showEarringOptions&&s.earringMaterials&&s.earringMaterials.length>1||s.type==="Pendant"&&s.chainStyles&&s.chainStyles.length>1,L=!!s.isSoldOut||s.stock<=0,ne=i.filter(K=>K.id===s.id).reduce((K,X)=>K+X.quantity,0),pe=!B&&ne>=s.stock,Ne=()=>{L||pe||(B?h(`/product/${s.id}`):e({...s,price:U}))},Te=k&&(s.promoBasicMemberPrice&&s.promoBasicMemberPrice>0||s.promoDeluxeMemberPrice&&s.promoDeluxeMemberPrice>0),le=()=>o==="ZAR"?"R":"$",fe=(K,X)=>o==="ZAR"?K:X??K,ve=o==="ZAR"?s.compareAtPrice:s.compareAtPriceUSD||s.compareAtPrice;return o==="ZAR"?s.memberPrice||s.price*.8:s.memberPriceUSD||(s.priceUSD||s.price)*.8,n.jsxs("div",{className:"group relative bg-zinc-900 rounded-lg shadow-[0_0_30px_rgba(255,255,255,0.15)] hover:shadow-pink-500/20 transition-all duration-300 border border-gray-800 hover:border-pink-500/50 z-0 flex flex-col h-full",children:[n.jsxs(Le,{to:`/product/${s.id}`,className:"block relative overflow-hidden aspect-square rounded-t-lg",children:[n.jsx(Ud,{src:s.images[0],alt:s.name,className:`w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500 ${s.stock<=0?"opacity-50 grayscale":"opacity-90 group-hover:opacity-100"}`,fallback:ac(600),onError:Wo}),n.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1 z-10",children:[q&&n.jsxs("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-purple-400/30 flex items-center gap-1",children:[n.jsx(It,{size:10,fill:"currentColor"}),Z!=="none"?`${Z.toUpperCase()} PRICE`:"MEMBER"]}),!q&&k&&n.jsx("span",{className:"bg-green-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-green-500/30",children:"PROMO"}),s.isNewArrival&&n.jsx("span",{className:"bg-cyan-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-cyan-500/30",children:"NEW"})]}),k&&A&&!L&&n.jsxs("div",{className:"absolute bottom-0 left-0 w-full bg-black/80 backdrop-blur-md py-1 px-2 flex items-center justify-center gap-1.5 text-[10px] text-green-400 font-bold border-t border-green-500/30",children:[n.jsx(qr,{size:10})," Ends in: ",A]})]}),n.jsx("button",{onClick:K=>{K.preventDefault(),t(s.id)},className:`absolute top-2 right-2 p-2 rounded-full bg-black/50 backdrop-blur-md shadow-md transition-colors border border-transparent hover:border-pink-500 z-20 ${m?"text-pink-500":"text-gray-300 hover:text-white"}`,children:n.jsx(x0,{size:18,fill:m?"currentColor":"none"})}),n.jsxs("div",{className:"p-4 rounded-b-lg flex flex-col flex-1 space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx("p",{className:"text-xs text-cyan-400 font-medium uppercase tracking-wider truncate pr-2",children:s.category}),n.jsx("button",{onClick:Ne,disabled:L||pe,className:`p-1.5 rounded-full transition-all flex-shrink-0 -mt-1 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed ${r.isMember?"bg-purple-600/20 text-purple-400 hover:bg-purple-600 hover:text-white border border-purple-500/30":"bg-zinc-800 text-gray-300 hover:bg-cyan-500 hover:text-black border border-gray-700"}`,title:B?"View Options":L?"Sold Out":pe?"Stock limit in cart":"Add to Cart",children:B?n.jsx(nc,{size:16}):n.jsx(Ka,{size:16})})]}),n.jsx(Le,{to:`/product/${s.id}`,children:n.jsx("h3",{className:"text-sm font-bold text-gray-100 leading-tight group-hover:text-pink-500 transition-colors line-clamp-2 h-10",children:s.name})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[n.jsx(dr,{size:12,fill:"currentColor"}),n.jsx("span",{className:"text-xs font-bold text-gray-300",children:R}),n.jsxs("span",{className:"text-[10px] text-gray-500",children:["(",_,")"]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[I>0&&n.jsxs("div",{className:"text-gray-500 font-medium flex items-center gap-1",children:[I," sold"]}),s.stock>0&&s.stock<=5&&n.jsx("div",{className:"text-orange-400 font-medium flex items-center gap-1",children:"Low Stock"})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 min-h-[20px]",children:[ve&&n.jsxs("div",{className:"flex items-center gap-1 relative",children:[n.jsxs("span",{className:"text-[10px] text-gray-500 line-through",children:["RRP ",le(),ve.toFixed(2)]}),n.jsx("button",{onClick:K=>{K.preventDefault(),d(!c)},className:"text-gray-600 hover:text-gray-400 focus:outline-none",children:n.jsx(Xm,{size:10})}),c&&n.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 p-2 bg-zinc-950 border border-gray-700 rounded shadow-xl text-[10px] text-gray-300 z-50",children:"Recommended retail price."})]}),n.jsxs("span",{className:"text-sm font-bold text-green-400",children:["Retail ",le(),E.toFixed(2)]})]}),n.jsx("div",{className:"mt-auto pt-2 border-t border-gray-800/50",children:r.isMember?n.jsx("div",{className:"flex items-end justify-between",children:n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsxs("span",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-wide flex items-center gap-1",children:[n.jsx(It,{size:10})," ",Z!=="none"?Z:"Member"," Price"]}),n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsxs("span",{className:"text-2xl font-bold text-white drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",children:[le(),fe(U).toFixed(2)]}),U<s.price&&n.jsxs("span",{className:"text-xs text-gray-500 line-through",children:[le(),fe(s.price).toFixed(2)]})]})]})}):n.jsx("div",{className:"flex items-end justify-between",children:n.jsxs("div",{className:"flex flex-col w-full",children:[k?n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsxs("span",{className:"text-2xl font-bold text-green-400",children:[le(),fe(U).toFixed(2)]}),n.jsxs("span",{className:"text-xs text-gray-400 line-through",children:[le(),fe(s.price).toFixed(2)]})]}):null,Te?n.jsxs("div",{className:"flex flex-col gap-0.5 mt-1",children:[n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsx("span",{children:"Basic & Premium:"}),n.jsxs("span",{className:"text-purple-400 font-bold",children:[le(),fe(s.promoBasicMemberPrice||0).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsx("span",{children:"Deluxe:"}),n.jsxs("span",{className:"text-purple-400 font-bold",children:[le(),fe(s.promoDeluxeMemberPrice||0).toFixed(2)]})]})]}):n.jsxs("div",{className:"text-[10px] text-gray-400 flex items-center gap-1 mt-0.5",children:["Members: ",n.jsxs("span",{className:"text-purple-400 font-bold",children:[le(),fe(W).toFixed(2)]})]})]})})})]})]})},w6=()=>{const[s,e]=S.useState(0),t=[" THIS WEEK'S WINNER: Anja P. from Pretoria just won a R500 Voucher!"," LAST WEEK'S WINNER: Sarah Jenkins from Texas just won a $30 Gift Box!"," PREVIOUS WINNER: Thandi M. from Joburg just won a R500 Voucher!"];return S.useEffect(()=>{const r=setInterval(()=>{e(i=>(i+1)%t.length)},3e3);return()=>clearInterval(r)},[]),n.jsx("div",{className:"flex items-center justify-center bg-yellow-400 p-2 rounded",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Er,{size:16,className:"text-amber-700 mr-3 shrink-0"}),n.jsx("span",{className:"text-sm text-black font-bold tracking-wide",children:t[s]})]})})},N6=()=>{const{products:s,categories:e,specials:t,user:r,memberCount:i,weeklyWinners:o,currency:c}=Ct(),d=S.useRef(null),m=S.useRef(null),h=S.useRef(null),g=S.useRef(null),b=S.useRef(null),w=S.useRef(null),P=S.useRef(null),C=S.useRef(null),k=S.useRef(null),E=S.useRef(null),F=S.useRef(null),[U,q]=S.useState(!1);S.useEffect(()=>{const se=setInterval(()=>{q(Ie=>!Ie)},5e3);return()=>clearInterval(se)},[]);const Z=s.filter(se=>se.isBestSeller),W=s.filter(se=>se.type==="Ring"||se.isFeaturedRing),$=s.filter(se=>se.type==="Bracelet"||se.isFeaturedBracelet),R=s.filter(se=>se.isUniquePendant),_=s.filter(se=>se.type==="Stud"||se.isFeaturedStud),I=s.filter(se=>se.type==="Dangle"||se.isFeaturedDangle),V=s.filter(se=>se.isJewelrySet),A=s.filter(se=>se.type==="Watch"||se.isFeaturedWatch),B=s.filter(se=>se.type==="Jewelry Box"||se.isFeaturedJewelryBox),L=s.filter(se=>se.type==="Perfume Holder"||se.isFeaturedPerfumeHolder),ne=s.filter(se=>se.isNewArrival),pe=new Date,Ne=pe.getMonth(),Te=pe.getFullYear(),fe=23+(Ne+Te*12)%3,ve=pe.getDate(),J=new Date(Te,Ne+1,0).getDate(),K=(ve-1)/(J-1),X=fe-K*(fe-2),ue=Math.max(2,Math.floor(X)),G=(se,Ie)=>{if(se.current){const Ae=se.current.clientWidth*.8;se.current.scrollBy({left:Ie==="right"?Ae:-Ae,behavior:"smooth"})}};return n.jsxs("div",{className:"space-y-12",children:[n.jsx("div",{className:"space-y-2",children:n.jsxs("section",{className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-pink-900 via-purple-900 to-indigo-900 border border-pink-500/30 shadow-[0_0_20px_rgba(236,72,153,0.2)] group hover:shadow-[0_0_30px_rgba(236,72,153,0.4)] transition-all",children:[n.jsx("div",{className:"absolute top-0 right-0 w-64 h-full bg-white/5 skew-x-12 translate-x-20 group-hover:translate-x-10 transition-transform duration-700"}),n.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between p-6 md:p-8 relative z-10 gap-6",children:[n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsx("div",{className:"p-4 bg-white/10 backdrop-blur-md rounded-full border border-white/20 shadow-lg hidden sm:block",children:n.jsx(Md,{size:32,className:"text-pink-300"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"bg-green-500 text-white text-[10px] font-bold px-2 py-0.5 rounded shadow animate-pulse",children:"LIMITED OFFER"}),n.jsx("span",{className:"text-pink-300 text-xs font-bold uppercase tracking-wider",children:"Give the perfect gift"})]}),n.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-1",children:"Buy a Gift Voucher"}),n.jsxs("p",{className:"text-sm md:text-base text-gray-200",children:["Purchase between ",n.jsx("strong",{className:"text-white",children:"R250 - R500"})," and get an ",n.jsx("span",{className:"text-yellow-300 font-bold underline decoration-wavy",children:"EXTRA R100"})," to spend!"]})]})]}),n.jsxs(Le,{to:"/gift-cards",className:"whitespace-nowrap px-8 py-3 bg-white text-purple-900 font-bold rounded-full hover:bg-gray-100 transition-colors shadow-lg flex items-center gap-2 group/btn",children:["Create Voucher ",n.jsx(Yt,{size:18,className:"group-hover/btn:translate-x-1 transition-transform"})]})]})]})}),n.jsxs("div",{className:"relative rounded-2xl overflow-hidden border-4 border-cyan-500",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[n.jsxs("section",{className:"relative bg-zinc-900 text-white",children:[n.jsxs("div",{className:`absolute top-2 right-2 text-xs font-bold px-3 py-1 rounded-full border shadow-md z-20 bg-red-600 border-red-400 text-red-500 ${U?"animate-pulse":""}`,children:[ue," spot",ue!==1?"s":""," left"]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-900/10 via-black to-zinc-900"}),n.jsx("div",{className:"relative z-10 p-4 flex flex-col justify-center",children:n.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-cyan-400 drop-shadow-lg py-1",children:" The Spoil Me Club"}),n.jsx("p",{className:"text-sm text-gray-300",children:"Join for just R19 / $2 per month. Cancel anytime."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center text-sm text-gray-200",children:[n.jsx("span",{children:" Get a R25 / $3 Voucher instantly."}),n.jsx("span",{children:" Automatic entry into the Weekly R500 Drop."})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center pt-2",children:[n.jsxs(Le,{to:"/membership",className:"px-5 py-2.5 bg-pink-600 hover:bg-pink-500 text-white rounded-lg font-semibold transition-all hover:shadow-[0_0_20px_rgba(236,72,153,0.6)] flex items-center justify-center gap-2 text-xs",children:["[ JOIN THE CLUB ] ",n.jsx(Yt,{size:14})]}),n.jsxs(Le,{to:"/weekly-winners",className:"px-5 py-2.5 border border-gray-500 hover:border-cyan-400 hover:text-cyan-400 hover:bg-cyan-950/30 text-gray-300 rounded-lg font-semibold transition-all text-xs flex items-center justify-center gap-2",children:["[ View Past Winners ] ",n.jsx(Er,{size:14})]})]})]})})]}),n.jsx(w6,{})]}),Z.length>0&&n.jsxs("section",{children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-yellow-400 pb-1 inline-block transform -rotate-1 drop-shadow-[0_0_5px_rgba(250,204,21,0.5)]",children:"Best Sellers"}),n.jsxs(Le,{to:"/catalog/best",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",n.jsx(Yt,{size:14})]})]}),n.jsxs("div",{className:"relative group/slider",children:[n.jsx("button",{onClick:()=>G(d,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/slider:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(Lr,{size:20})}),n.jsx("button",{onClick:()=>G(d,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/slider:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(zr,{size:20})}),n.jsx("div",{ref:d,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:Z.map(se=>n.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:n.jsx(Cs,{product:se})},se.id))})]})]}),n.jsx("section",{className:"relative",children:n.jsx("div",{className:"bg-gradient-to-r from-purple-900 via-pink-900 to-purple-900 rounded-2xl p-8 border-4 border-yellow-400 shadow-[0_0_30px_rgba(250,204,21,0.3)]",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx(It,{className:"text-yellow-400 animate-pulse",size:48}),n.jsx("h2",{className:"font-cherry text-4xl md:text-5xl text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-pink-400 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"THE SECRET VAULT"}),n.jsx(It,{className:"text-yellow-400 animate-pulse",size:48})]}),n.jsx("p",{className:"font-architects text-lg md:text-xl text-gray-200 max-w-2xl mx-auto",children:"Exclusive Clearance & Samples for Deluxe Members. Unlock massive discounts on vintage treasures!"}),n.jsxs(Le,{to:"/vault",className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-400 hover:to-orange-400 text-black font-bold rounded-full shadow-lg transition-all hover:scale-105 hover:shadow-[0_0_20px_rgba(250,204,21,0.6)]",children:[n.jsx(It,{size:24}),"Enter The Vault",n.jsx(Yt,{size:20})]})]})})}),n.jsxs("section",{children:[n.jsx("div",{className:"flex justify-between items-end mb-6",children:n.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-purple-500 pb-1 inline-block transform -rotate-1 drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",children:"Shop by Category"})}),n.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-8 md:p-4",children:e.map(se=>{const Ie=se.name==="Red Collection",Ae=`/collections/${encodeURIComponent(se.name)}`;return Ie?n.jsx("div",{className:"relative aspect-[4/5] md:aspect-square group cursor-pointer z-10",children:n.jsxs(Le,{to:Ae,className:"block w-full h-full relative rounded-xl md:rounded-2xl overflow-hidden bg-zinc-900 text-white border-2 md:border-4 border-black transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 15px 3px rgba(220, 38, 38, 0.6)"},children:[n.jsx(Ud,{src:se.image,alt:se.name,className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity",fallback:ac(600),onError:Wo}),n.jsxs("div",{className:"absolute bottom-0 left-0 p-1.5 md:p-4 w-full bg-gradient-to-t from-black/80 to-transparent",children:[n.jsx("h3",{className:"font-handwriting text-xl md:text-3xl font-bold mb-0.5 md:mb-1 text-white drop-shadow-md truncate",children:se.name}),n.jsx("p",{className:"text-gray-200 text-[9px] md:text-xs drop-shadow-md line-clamp-1",children:se.description})]})]})},se.id):n.jsx("div",{className:"relative aspect-[4/5] md:aspect-square cursor-pointer overflow-hidden transition-all duration-300 rounded-lg md:rounded-xl border border-gray-800 bg-zinc-900 hover:border-gray-600 group",children:n.jsxs(Le,{to:Ae,className:"block w-full h-full relative",children:[n.jsx(Ud,{src:se.image,alt:se.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",fallback:ac(600),onError:Wo}),n.jsxs("div",{className:"absolute bottom-0 left-0 p-1.5 md:p-4 w-full bg-gradient-to-t from-black/80 to-transparent",children:[n.jsx("h3",{className:"font-handwriting text-xl md:text-3xl font-bold mb-0.5 md:mb-1 text-white drop-shadow-md truncate",children:se.name}),n.jsx("p",{className:"text-gray-200 text-[9px] md:text-xs drop-shadow-md line-clamp-1",children:se.description})]})]})},se.id)})})]}),n.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 py-8 border-y border-gray-800 bg-zinc-900/50 backdrop-blur-sm rounded-xl px-6 my-8",children:[n.jsxs(Le,{to:"/earn-rewards",className:"flex items-center gap-3 group cursor-pointer",children:[n.jsx("div",{className:"p-3 bg-zinc-800 text-pink-500 rounded-full shadow-[0_0_10px_rgba(236,72,153,0.2)] group-hover:shadow-[0_0_15px_rgba(236,72,153,0.5)] transition-all",children:r.email?n.jsx(or,{size:20}):n.jsx(bn,{size:20})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-100 text-base",children:r.email?`My Points: ${r.loyaltyPoints}`:"Loyalty Rewards"}),n.jsx("p",{className:"text-xs text-gray-400",children:r.email?"Redeem for discounts or earn more":"Earn points on every vintage find."})]})]}),n.jsxs(Le,{to:"/affiliate-program",className:"flex items-center gap-3 group cursor-pointer",children:[n.jsx("div",{className:"p-3 bg-zinc-800 text-green-400 rounded-full shadow-[0_0_10px_rgba(74,222,128,0.2)] group-hover:shadow-[0_0_15px_rgba(74,222,128,0.5)] transition-all",children:n.jsx(dm,{size:20})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-100 text-base",children:"Partnership Program"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Earn 20% commission on referrals."})]})]}),n.jsxs("div",{className:"flex items-center gap-3 group",children:[n.jsx("div",{className:"p-3 bg-zinc-800 text-cyan-400 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.2)] group-hover:shadow-[0_0_15px_rgba(34,211,238,0.5)] transition-all",children:n.jsx(qr,{size:20})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-100 text-base",children:"Flash Sales"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Daily limited-time offers."})]})]})]}),R.length>0&&n.jsxs("section",{children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-purple-500 pl-4 inline-block",children:"Unique Pendants"}),n.jsxs(Le,{to:"/catalog/unique",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",n.jsx(Yt,{size:14})]})]}),n.jsxs("div",{className:"relative group/pendants",children:[n.jsx("button",{onClick:()=>G(g,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/pendants:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(Lr,{size:20})}),n.jsx("button",{onClick:()=>G(g,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/pendants:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(zr,{size:20})}),n.jsx("div",{ref:g,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:R.map(se=>n.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:n.jsx(Cs,{product:se})},se.id))})]})]}),n.jsx("div",{className:"mb-6",children:n.jsxs(Le,{to:"/customized-wire-wrapped-pendants",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["Explore Customized Wire Wrapped Pendants ",n.jsx(Yt,{size:14})]})}),W.length>0&&n.jsxs("section",{id:"rings",children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-pink-500 pl-4 inline-block",children:"Rings"}),n.jsxs(Le,{to:"/catalog/ring",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",n.jsx(Yt,{size:14})]})]}),n.jsxs("div",{className:"relative group/rings",children:[n.jsx("button",{onClick:()=>G(m,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/rings:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(Lr,{size:20})}),n.jsx("button",{onClick:()=>G(m,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/rings:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(zr,{size:20})}),n.jsx("div",{ref:m,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:W.map(se=>n.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:n.jsx(Cs,{product:se})},se.id))})]})]}),$.length>0&&n.jsxs("section",{id:"bracelets",children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-teal-500 pl-4 inline-block",children:"Bracelets"}),n.jsxs(Le,{to:"/catalog/bracelet",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",n.jsx(Yt,{size:14})]})]}),n.jsxs("div",{className:"relative group/bracelets",children:[n.jsx("button",{onClick:()=>G(h,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/bracelets:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(Lr,{size:20})}),n.jsx("button",{onClick:()=>G(h,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/bracelets:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(zr,{size:20})}),n.jsx("div",{ref:h,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:$.map(se=>n.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:n.jsx(Cs,{product:se})},se.id))})]})]}),_.length>0&&n.jsxs("section",{id:"studs",children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-pink-400 pl-4 inline-block",children:"Stud Earrings"}),n.jsxs(Le,{to:"/catalog/stud",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",n.jsx(Yt,{size:14})]})]}),n.jsxs("div",{className:"relative group/studs",children:[n.jsx("button",{onClick:()=>G(b,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/studs:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(Lr,{size:20})}),n.jsx("button",{onClick:()=>G(b,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/studs:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(zr,{size:20})}),n.jsx("div",{ref:b,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:_.map(se=>n.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:n.jsx(Cs,{product:se})},se.id))})]})]}),I.length>0&&n.jsxs("section",{id:"dangles",children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-cyan-400 pl-4 inline-block",children:"Dangle Earrings"}),n.jsxs(Le,{to:"/catalog/dangle",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",n.jsx(Yt,{size:14})]})]}),n.jsxs("div",{className:"relative group/dangles",children:[n.jsx("button",{onClick:()=>G(w,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/dangles:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(Lr,{size:20})}),n.jsx("button",{onClick:()=>G(w,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/dangles:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(zr,{size:20})}),n.jsx("div",{ref:w,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:I.map(se=>n.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:n.jsx(Cs,{product:se})},se.id))})]})]}),n.jsxs("section",{className:"relative overflow-hidden rounded-2xl p-8 md:p-12 text-center border-2 border-purple-500 shadow-[0_0_40px_rgba(168,85,247,0.4)] group mt-12",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900 via-black to-zinc-900"}),n.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[n.jsx("div",{className:"bg-purple-600 p-4 rounded-full shadow-[0_0_20px_rgba(168,85,247,0.6)] animate-pulse",children:n.jsx(It,{size:40,className:"text-white"})}),n.jsx("h2",{className:"font-cherry text-3xl md:text-5xl text-white drop-shadow-md",children:"Unlock VIP Pricing"}),n.jsxs("p",{className:"text-gray-300 max-w-2xl text-lg leading-relaxed",children:["Join our exclusive membership club to save up to ",n.jsx("span",{className:"text-purple-400 font-bold",children:"50% OFF"})," retail prices, receive monthly free gifts, and access members-only collections."]}),n.jsxs(Le,{to:"/membership",className:"px-8 py-4 bg-white text-purple-900 font-bold rounded-full hover:scale-105 transition-transform shadow-[0_0_20px_rgba(255,255,255,0.3)] flex items-center gap-2",children:["View Membership Perks ",n.jsx(Yt,{size:20})]})]})]}),A.length>0&&n.jsxs("section",{id:"watches",className:"mt-12",children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-yellow-500 pl-4 inline-block",children:"Watches"}),n.jsxs(Le,{to:"/catalog/watch",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",n.jsx(Yt,{size:14})]})]}),n.jsxs("div",{className:"relative group/watches",children:[n.jsx("button",{onClick:()=>G(C,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/watches:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(Lr,{size:20})}),n.jsx("button",{onClick:()=>G(C,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/watches:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(zr,{size:20})}),n.jsx("div",{ref:C,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:A.map(se=>n.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:n.jsx(Cs,{product:se})},se.id))})]})]}),B.length>0&&n.jsxs("section",{id:"jewelry-boxes",className:"mt-12",children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-orange-500 pl-4 inline-block flex items-center gap-2",children:[n.jsx(a2,{size:20})," Jewelry Boxes"]}),n.jsxs(Le,{to:"/catalog/box",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",n.jsx(Yt,{size:14})]})]}),n.jsxs("div",{className:"relative group/boxes",children:[n.jsx("button",{onClick:()=>G(k,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/boxes:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(Lr,{size:20})}),n.jsx("button",{onClick:()=>G(k,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/boxes:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(zr,{size:20})}),n.jsx("div",{ref:k,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:B.map(se=>n.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:n.jsx(Cs,{product:se})},se.id))})]})]}),L.length>0&&n.jsxs("section",{id:"perfumes",className:"mt-12",children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-blue-500 pl-4 inline-block flex items-center gap-2",children:[n.jsx(LM,{size:20})," Perfume Holders"]}),n.jsxs(Le,{to:"/catalog/perfume",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",n.jsx(Yt,{size:14})]})]}),n.jsxs("div",{className:"relative group/perfumes",children:[n.jsx("button",{onClick:()=>G(E,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/perfumes:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(Lr,{size:20})}),n.jsx("button",{onClick:()=>G(E,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/perfumes:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(zr,{size:20})}),n.jsx("div",{ref:E,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:L.map(se=>n.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:n.jsx(Cs,{product:se})},se.id))})]})]}),V.length>0&&n.jsxs("section",{id:"jewelry-sets",className:"mt-12",children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-pink-500 pl-4 inline-block",children:"Jewelry Sets"}),n.jsxs(Le,{to:"/catalog/sets",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",n.jsx(Yt,{size:14})]})]}),n.jsxs("div",{className:"relative group/sets",children:[n.jsx("button",{onClick:()=>G(P,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/sets:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(Lr,{size:20})}),n.jsx("button",{onClick:()=>G(P,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/sets:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(zr,{size:20})}),n.jsx("div",{ref:P,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:V.map(se=>n.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:n.jsx(Cs,{product:se})},se.id))})]})]}),ne.length>0&&n.jsxs("section",{id:"new-arrivals",className:"mt-12",children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-green-500 pl-4 inline-block",children:"New Arrivals"}),n.jsxs(Le,{to:"/catalog/new",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",n.jsx(Yt,{size:14})]})]}),n.jsxs("div",{className:"relative group/newarrivals",children:[n.jsx("button",{onClick:()=>G(F,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/newarrivals:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(Lr,{size:20})}),n.jsx("button",{onClick:()=>G(F,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/newarrivals:opacity-100 transition-opacity focus:opacity-100",children:n.jsx(zr,{size:20})}),n.jsx("div",{ref:F,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:ne.map(se=>n.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:n.jsx(Cs,{product:se})},se.id))})]})]}),n.jsx("section",{className:"relative",children:n.jsx("div",{className:"bg-gradient-to-r from-yellow-900 via-orange-900 to-yellow-900 rounded-2xl p-8 border-4 border-yellow-400 shadow-[0_0_30px_rgba(250,204,21,0.3)]",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx(It,{className:"text-yellow-400 animate-pulse",size:48}),n.jsx("h2",{className:"font-cherry text-4xl md:text-5xl text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-pink-400 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"JOIN OUR ARTIST NETWORK"}),n.jsx(It,{className:"text-yellow-400 animate-pulse",size:48})]}),n.jsx("p",{className:"font-architects text-lg md:text-xl text-gray-200 max-w-2xl mx-auto",children:"Are you a jewelry artist? Showcase your unique creations to over 7,000 collectors worldwide. Only 1% commission on sales!"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[n.jsxs(Le,{to:"/artist-partnership",className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-400 hover:to-orange-400 text-black font-bold rounded-full shadow-lg transition-all hover:scale-105 hover:shadow-[0_0_20px_rgba(250,204,21,0.6)]",children:["Start Your Shop ",n.jsx(Yt,{size:18})]}),n.jsxs("p",{className:"text-sm text-gray-300",children:["Starting from ",c==="ZAR"?"R19":"$1.50"," / month"]})]})]})})})]})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="analytics",j6="firebase_id",S6="origin",_6=60*1e3,C6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",y0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new Nm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ur=new Za("analytics","Analytics",k6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(s){if(!s.startsWith(y0)){const e=ur.create("invalid-gtag-resource",{gtagURL:s});return Ts.warn(e.message),""}return s}function N2(s){return Promise.all(s.map(e=>e.catch(t=>t)))}function T6(s,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(s,e)),t}function P6(s,e){const t=T6("firebase-js-sdk-policy",{createScriptURL:E6}),r=document.createElement("script"),i=`${y0}?l=${s}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function A6(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function I6(s,e,t,r,i,o){const c=r[i];try{if(c)await e[c];else{const m=(await N2(t)).find(h=>h.measurementId===i);m&&await e[m.appId]}}catch(d){Ts.error(d)}s("config",i,o)}async function R6(s,e,t,r,i){try{let o=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const d=await N2(t);for(const m of c){const h=d.find(b=>b.measurementId===m),g=h&&e[h.appId];if(g)o.push(g);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),s("event",r,i||{})}catch(o){Ts.error(o)}}function D6(s,e,t,r){async function i(o,...c){try{if(o==="event"){const[d,m]=c;await R6(s,e,t,d,m)}else if(o==="config"){const[d,m]=c;await I6(s,e,t,r,d,m)}else if(o==="consent"){const[d,m]=c;s("consent",d,m)}else if(o==="get"){const[d,m,h]=c;s("get",d,m,h)}else if(o==="set"){const[d]=c;s("set",d)}else s(o,...c)}catch(d){Ts.error(d)}}return i}function M6(s,e,t,r,i){let o=function(...c){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=D6(o,s,e,t),{gtagCore:o,wrappedGtag:window[i]}}function L6(s){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(y0)&&t.src.includes(s))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=30,V6=1e3;class O6{constructor(e={},t=V6){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const j2=new O6;function F6(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function U6(s){var c;const{appId:e,apiKey:t}=s,r={method:"GET",headers:F6(t)},i=C6.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let d="";try{const m=await o.json();(c=m.error)!=null&&c.message&&(d=m.error.message)}catch{}throw ur.create("config-fetch-failed",{httpStatus:o.status,responseMessage:d})}return o.json()}async function B6(s,e=j2,t){const{appId:r,apiKey:i,measurementId:o}=s.options;if(!r)throw ur.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw ur.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new G6;return setTimeout(async()=>{d.abort()},_6),S2({appId:r,apiKey:i,measurementId:o},c,d,e)}async function S2(s,{throttleEndTimeMillis:e,backoffCount:t},r,i=j2){var d;const{appId:o,measurementId:c}=s;try{await $6(r,e)}catch(m){if(c)return Ts.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:o,measurementId:c};throw m}try{const m=await U6(s);return i.deleteThrottleMetadata(o),m}catch(m){const h=m;if(!q6(h)){if(i.deleteThrottleMetadata(o),c)return Ts.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:c};throw m}const g=Number((d=h==null?void 0:h.customData)==null?void 0:d.httpStatus)===503?Xb(t,i.intervalMillis,z6):Xb(t,i.intervalMillis),b={throttleEndTimeMillis:Date.now()+g,backoffCount:t+1};return i.setThrottleMetadata(o,b),Ts.debug(`Calling attemptFetch again in ${g} millis`),S2(s,b,r,i)}}function $6(s,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);s.addEventListener(()=>{clearTimeout(o),r(ur.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function q6(s){if(!(s instanceof hr)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class G6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function H6(s,e,t,r,i){if(i&&i.global){s("event",t,r);return}else{const o=await e,c={...r,send_to:o};s("event",t,c)}}async function W6(s,e,t,r){if(r&&r.global){const i={};for(const o of Object.keys(t))i[`user_properties.${o}`]=t[o];return s("set",i),Promise.resolve()}else{const i=await e;s("config",i,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K6(){if(ax())try{await ox()}catch(s){return Ts.warn(ur.create("indexeddb-unavailable",{errorInfo:s==null?void 0:s.toString()}).message),!1}else return Ts.warn(ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function J6(s,e,t,r,i,o,c){const d=B6(s);d.then(w=>{t[w.measurementId]=w.appId,s.options.measurementId&&w.measurementId!==s.options.measurementId&&Ts.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Ts.error(w)),e.push(d);const m=K6().then(w=>{if(w)return r.getId()}),[h,g]=await Promise.all([d,m]);L6(o)||P6(o,h.measurementId),i("js",new Date);const b=(c==null?void 0:c.config)??{};return b[S6]="firebase",b.update=!0,g!=null&&(b[j6]=g),i("config",h.measurementId,b),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.app=e}_delete(){return delete Gl[this.app.options.appId],Promise.resolve()}}let Gl={},Qw=[];const Xw={};let rg="dataLayer",Z6="gtag",eN,b0,tN=!1;function Q6(){const s=[];if(qj()&&s.push("This is a browser extension environment."),Gj()||s.push("Cookies are not available."),s.length>0){const e=s.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ur.create("invalid-analytics-context",{errorInfo:e});Ts.warn(t.message)}}function X6(s,e,t){Q6();const r=s.options.appId;if(!r)throw ur.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)Ts.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ur.create("no-api-key");if(Gl[r]!=null)throw ur.create("already-exists",{id:r});if(!tN){A6(rg);const{wrappedGtag:o,gtagCore:c}=M6(Gl,Qw,Xw,rg,Z6);b0=o,eN=c,tN=!0}return Gl[r]=J6(s,Qw,Xw,e,eN,rg,t),new Y6(s)}function eL(s=lc()){s=Kt(s);const e=Ni(s,um);return e.isInitialized()?e.getImmediate():tL(s)}function tL(s,e={}){const t=Ni(s,um);if(t.isInitialized()){const i=t.getImmediate();if(Ki(e,t.getOptions()))return i;throw ur.create("already-initialized")}return t.initialize({options:e})}function nL(s,e,t){s=Kt(s),W6(b0,Gl[s.app.options.appId],e,t).catch(r=>Ts.error(r))}function _2(s,e,t,r){s=Kt(s),H6(b0,Gl[s.app.options.appId],e,t,r).catch(i=>Ts.error(i))}const nN="@firebase/analytics",sN="0.10.19";function sL(){Js(new Ps(um,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return X6(r,i,t)},"PUBLIC")),Js(new Ps("analytics-internal",s,"PRIVATE")),Xn(nN,sN),Xn(nN,sN,"esm2020");function s(e){try{const t=e.getProvider(um).getImmediate();return{logEvent:(r,i,o)=>_2(t,r,i,o),setUserProperties:(r,i)=>nL(t,r,i)}}catch(t){throw ur.create("interop-component-reg-failed",{reason:t})}}}sL();const rL={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},Al=[{size:5,mm:49.3},{size:6,mm:51.9},{size:7,mm:54.4},{size:8,mm:57},{size:9,mm:59.5},{size:10,mm:62.1},{size:11,mm:64.6},{size:12,mm:67.2},{size:13,mm:69.7}],iL=()=>{const{id:s}=Gd(),{products:e,addToCart:t,toggleWishlist:r,user:i,shareProduct:o,cart:c,currency:d}=Ct(),m=As(),[h,g]=S.useState(0),[b,w]=S.useState(!1),[P,C]=S.useState(!1),[k,E]=S.useState(!1),[F,U]=S.useState(!1),[q,Z]=S.useState(1),[W,$]=S.useState(""),[R,_]=S.useState("Ring Finger"),[I,V]=S.useState(null),[A,B]=S.useState(""),[L,ne]=S.useState(null),[pe,Ne]=S.useState(""),[Te,le]=S.useState(""),[fe,ve]=S.useState([]),[J,K]=S.useState(5),[X,ue]=S.useState(!1),G=e.find(je=>je.id===s),se=G?e.filter(je=>je.category===G.category&&je.id!==G.id).slice(0,4):[];S.useEffect(()=>{window.scrollTo(0,0),E(!1)},[s]),S.useEffect(()=>{if(G){const je=Rt(pt),tt=eL();_2(tt,"view_item",{currency:d,value:je,items:[{item_id:G.id,item_name:G.name,price:je}]})}},[G,d]),S.useEffect(()=>{(async()=>{if(G)try{const tt=At(ye,"reviews"),Gt=sn(tt,zn("productId","==",G.id),ci("createdAt","desc"),Ll(J)),Wn=(await Qn(Gt)).docs.map(ns=>({id:ns.id,...ns.data()}));ve(Wn),ue(Wn.length===J)}catch(tt){console.error("Review fetch error:",tt),tt.code==="failed-precondition"&&console.warn(" INDEX MISSING: Click the link in console to build index.")}})()},[G,J]);const Ae=[...G!=null&&G.reviews&&Array.isArray(G.reviews)?G.reviews:[],...fe];S.useEffect(()=>{if(G){if(G.type==="Ring"&&G.ringStock){const je=Object.entries(G.ringStock).filter(([tt,Gt])=>Gt>0).map(([tt])=>tt);je.length>0&&B(je[0])}(G.type==="Stud"||G.type==="Dangle")&&G.showEarringOptions&&G.earringMaterials&&G.earringMaterials.length>0&&ne(G.earringMaterials[0]),G.type==="Pendant"&&G.chainStyles&&G.chainStyles.length>0&&(G.chainStyles.includes("Metal Chain")?Ne("Metal Chain"):Ne(G.chainStyles[0]))}},[G]),S.useEffect(()=>{if(pe==="Leather Cord")le("45cm");else if(pe==="Metal Chain"&&(G!=null&&G.pendantChainLengths)){const je=Object.keys(G.pendantChainLengths).find(tt=>G.pendantChainLengths[tt]);je&&le(je)}},[pe,G]);const He=S.useMemo(()=>{var je;return((je=c.find(tt=>tt.id===(G==null?void 0:G.id)&&tt.selectedSize===A&&tt.selectedMaterial===(L==null?void 0:L.name)&&tt.selectedChainStyle===pe&&tt.selectedChainLength===Te))==null?void 0:je.quantity)||0},[c,G==null?void 0:G.id,A,L,pe,Te]),{availableStock:Be,isOutOfStock:xt,isStockLimitInCart:we,buttonText:We}=S.useMemo(()=>{var Wn;if(!G)return{availableStock:0,isOutOfStock:!0,isStockLimitInCart:!0,buttonText:"Product not found"};let je=G.stock,tt=je<=0,Gt="Add to Cart";G.type==="Ring"&&(A?(je=((Wn=G.ringStock)==null?void 0:Wn[A])||0,je<=0&&(tt=!0,Gt="Out of Stock")):(tt=!0,Gt="Select a Size")),G.isSoldOut&&(tt=!0);const gn=je>0&&He>=je;return!tt&&gn&&(Gt="Stock limit in cart"),{availableStock:je,isOutOfStock:tt,isStockLimitInCart:gn,buttonText:Gt}},[G,A,He]);if(!G)return n.jsx("div",{className:"text-center py-20 text-gray-400",children:"Product not found"});const at=i.wishlist.includes(G.id),bt=new Date,z=G.promoStartsAt?new Date(G.promoStartsAt):null,re=G.promoExpiresAt?new Date(G.promoExpiresAt):null,$e=z&&!isNaN(z.getTime()),_e=re&&!isNaN(re.getTime()),qe=(G.promoPrice||0)>0&&(!$e||z<=bt)&&(!_e||re>bt),Vt=d==="ZAR"?G.price:G.priceUSD||G.price,xe=d==="ZAR"?G.memberPrice||Vt*.8:G.memberPriceUSD||Vt*.8;let mt=Vt,kt="none";i.isMember?(mt=xe,qe&&(i.membershipTier==="deluxe"&&G.promoDeluxeMemberPrice&&G.promoDeluxeMemberPrice>0?(mt=G.promoDeluxeMemberPrice,kt="deluxe"):i.membershipTier==="premium"&&G.promoPremiumMemberPrice&&G.promoPremiumMemberPrice>0?(mt=G.promoPremiumMemberPrice,kt="premium"):i.membershipTier==="basic"&&G.promoBasicMemberPrice&&G.promoBasicMemberPrice>0?(mt=G.promoBasicMemberPrice,kt="basic"):(G.promoPrice||1/0)<xe&&(mt=G.promoPrice))):qe&&(mt=G.promoPrice);const Dt=qe&&G.promoBasicMemberPrice&&G.promoBasicMemberPrice>0?G.promoBasicMemberPrice:xe;let pt=mt;L&&(pt+=L.modifier);const $t=Vt+((L==null?void 0:L.modifier)||0),Qt=$t-Dt,vt=Math.round(Qt/$t*100),tn=qe&&(G.promoBasicMemberPrice&&G.promoBasicMemberPrice>0||G.promoDeluxeMemberPrice&&G.promoDeluxeMemberPrice>0),Re=je=>Math.round(($t-je)/$t*100),In=G.reviews&&G.reviews.length>0,Hn=In?(G.reviews.reduce((je,tt)=>je+tt.rating,0)/G.reviews.length).toFixed(1):"4.9",Is=In?G.reviews.length:128,ds=G.giftProductId?e.find(je=>je.id===G.giftProductId):null,es=()=>{xt||we||(t({...G,price:Vt},{selectedSize:A,selectedMaterial:L==null?void 0:L.name,selectedMaterialModifier:L==null?void 0:L.modifier,selectedChainStyle:pe,selectedChainLength:Te}),ds&&t(ds,{}))},mr=()=>{const je=parseFloat(W);if(!je||isNaN(je))return;let tt=Al[0],Gt=Math.abs(je-tt.mm);for(let gn=1;gn<Al.length;gn++){const Wn=Math.abs(je-Al[gn].mm);Wn<Gt&&(Gt=Wn,tt=Al[gn])}je>Al[Al.length-1].mm+1.5?V(13):V(tt.size),Z(4)},ts=()=>{U(!1),Z(1),$(""),V(null)},Ns=async je=>{const tt=window.location.href,Gt="Look at this I just bought or saw this isn't it beautiful!",gn=`${Gt} ${tt}`;if(i.id&&!k?(o(G.id),E(!0),alert("You earned 50 Loyalty Points for sharing!")):i.id,je==="native"&&navigator.share)try{await navigator.share({title:G.name,text:Gt,url:tt})}catch{console.log("Native share cancelled")}else je==="whatsapp"?window.open(`https://wa.me/?text=${encodeURIComponent(gn)}`,"_blank"):je==="facebook"&&window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(tt)}&quote=${encodeURIComponent(Gt)}`,"_blank")},us=w2(G.images[h]||G.images[0]||"",ac(800,800,"Spoil Me Vintage")),fn=()=>d==="ZAR"?"R":"$",Rt=(je,tt)=>d==="ZAR"?je:tt??je;return n.jsxs("div",{className:"space-y-16 pt-4 pb-16 relative",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-4",children:[n.jsx(Le,{to:"/",className:"hover:text-white",children:"Home"}),n.jsx("span",{children:"/"}),n.jsx(Le,{to:`/collections/${encodeURIComponent(G.category)}`,className:"hover:text-white",children:G.category}),n.jsx("span",{children:"/"}),n.jsx("span",{className:"text-gray-300 truncate max-w-[200px]",children:G.name})]}),P&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>C(!1)}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-400",children:[n.jsx(eg,{size:32}),n.jsx("h3",{className:"text-xl font-bold text-white",children:"Verified Purchases Only"})]}),n.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-4",children:"To maintain the integrity of our reviews, we only accept feedback from verified customers who have purchased this specific item."}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800 mb-6",children:[n.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"How it works:"}),n.jsxs("ul",{className:"text-xs text-gray-400 space-y-3",children:[n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(qr,{size:14,className:"text-cyan-400 shrink-0 mt-0.5"})," ",n.jsxs("span",{children:["A secure review link will be sent to you ",n.jsx("strong",{children:"25 days after purchase"}),"."]})]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(dr,{size:14,className:"text-yellow-400 shrink-0 mt-0.5"})," ",n.jsxs("span",{children:["Review honestly and earn ",n.jsx("strong",{children:"100 Loyalty Points"}),"!"]})]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(bn,{size:14,className:"text-pink-500 shrink-0 mt-0.5"})," ",n.jsx("span",{children:"Use points (1000 pts = R10) for discounts on your next order."})]})]})]}),n.jsx("button",{onClick:()=>C(!1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-xl font-semibold transition-colors",children:"Understood"})]})]}),F&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:ts}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[n.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[n.jsx(Kw,{className:"text-pink-500",size:20})," Find Your Ring Size"]}),n.jsx("button",{onClick:ts,className:"text-gray-500 hover:text-white",children:n.jsx(Mh,{size:16})})]}),n.jsxs("div",{className:"min-h-[250px] flex flex-col",children:[q===1&&n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsxs("div",{className:"bg-pink-900/20 p-4 rounded-xl border border-pink-500/20 text-center",children:[n.jsx("span",{className:"text-3xl block mb-2",children:""}),n.jsx("p",{className:"text-sm text-pink-200 font-semibold",children:"Step 1"})]}),n.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Take a flexible measuring tape or a piece of string and wrap it around the base of the finger you want to wear the ring on."}),n.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/20 rounded-lg",children:[n.jsxs("p",{className:"text-xs text-yellow-400 font-bold flex items-center gap-2",children:[n.jsx(Mh,{size:14})," Important:"]}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Please read your measurement in Millimeters (MM), not CM."})]})]}),q===2&&n.jsxs("div",{className:"flex-1 space-y-6 text-center flex flex-col justify-center",children:[n.jsx("p",{className:"text-white font-semibold",children:"Did you measure your finger with a tape or string?"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:()=>Z(3),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-xl font-bold transition-all",children:"Yes, I measured my finger"}),n.jsx("button",{onClick:()=>Z(1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-gray-300 rounded-xl font-medium transition-all",children:"Back to Instructions"})]})]}),q===3&&n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Which finger?"}),n.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-sm",value:R,onChange:je=>_(je.target.value),children:[n.jsx("option",{children:"Thumb"}),n.jsx("option",{children:"Index Finger"}),n.jsx("option",{children:"Middle Finger"}),n.jsx("option",{children:"Ring Finger"}),n.jsx("option",{children:"Pinky Finger"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Measured Length (MM)"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",placeholder:"e.g. 54.5",className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-lg font-bold focus:border-pink-500 focus:outline-none",value:W,onChange:je=>$(je.target.value)}),n.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-bold",children:"mm"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please enter the exact circumference."})]})]}),q===4&&n.jsxs("div",{className:"flex-1 text-center flex flex-col justify-center space-y-6",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Based on your ",R," measurement:"]}),n.jsxs("div",{className:"inline-block p-6 bg-zinc-800 rounded-full border-4 border-pink-500 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[n.jsx("span",{className:"block text-xs text-gray-400 uppercase tracking-wide",children:"US Size"}),n.jsx("span",{className:"text-4xl font-black text-white",children:I})]})]}),G.ringStock&&G.ringStock[(I==null?void 0:I.toString())||""]>0?n.jsxs("button",{onClick:()=>{B((I==null?void 0:I.toString())||""),ts()},className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold transition-all flex items-center justify-center gap-2",children:[n.jsx(gt,{size:18})," Select Size ",I]}):n.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/20 rounded-lg text-red-300 text-sm",children:["Sorry, Size ",I," is currently out of stock."]})]})]}),n.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-800",children:[q>1&&q<4?n.jsxs("button",{onClick:()=>Z(je=>je-1),className:"text-gray-400 hover:text-white text-sm flex items-center gap-1",children:[n.jsx(Ha,{size:14})," Back"]}):n.jsx("div",{}),q===1&&n.jsxs("button",{onClick:()=>Z(2),className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500",children:["Next Step ",n.jsx(Yt,{size:14,className:"inline"})]}),q===3&&n.jsx("button",{onClick:mr,disabled:!W,className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Get My Size"}),q===4&&n.jsx("button",{onClick:ts,className:"text-gray-400 hover:text-white text-sm",children:"Close"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden bg-zinc-900 shadow-lg border border-gray-800 relative group",children:[n.jsx(Ud,{src:us,alt:G.name,className:"w-full h-full object-cover opacity-95",onError:Wo}),n.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[G.isNewArrival&&n.jsx("span",{className:"bg-cyan-600/90 text-white text-xs font-bold px-3 py-1 rounded-full w-fit",children:"NEW"}),i.isMember&&n.jsxs("span",{className:"bg-purple-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-purple-400 flex items-center gap-1 w-fit",children:[n.jsx(It,{size:12,fill:"currentColor"}),kt!=="none"?`${kt.toUpperCASE()} PRICE`:"MEMBER DEAL"]})]}),qe&&!i.isMember&&n.jsx("span",{className:"absolute top-4 right-4 bg-green-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-[0_0_10px_rgba(74,222,128,0.5)]",children:"PROMO"})]}),n.jsx("div",{className:"grid grid-cols-4 gap-4",children:G.images.map((je,tt)=>n.jsx("button",{onClick:()=>g(tt),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${h===tt?"border-pink-500 opacity-100 shadow-[0_0_10px_rgba(236,72,153,0.4)]":"border-gray-800 opacity-60 hover:opacity-100"}`,children:n.jsx(Ud,{src:je,alt:`View ${tt}`,className:"w-full h-full object-cover",onError:Wo})},tt))})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[n.jsx("span",{className:"uppercase tracking-wider font-semibold text-cyan-400",children:G.category}),n.jsx("span",{children:""}),n.jsxs("div",{className:"flex items-center text-yellow-400 gap-1",children:[n.jsx(dr,{size:14,fill:"currentColor"})," ",Hn," (",Is," reviews)"]})]}),n.jsx("h1",{className:"text-[26px] font-bold text-white mb-4",children:G.name}),n.jsxs("div",{className:"flex flex-col gap-1",children:[G.compareAtPrice&&G.compareAtPrice>pt&&n.jsxs("div",{className:"flex items-center gap-2 relative",children:[n.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["RRP ",fn(),Rt(G.compareAtPrice,G.compareAtPriceUSD).toFixed(2)]}),n.jsx("button",{onClick:()=>w(!b),className:"text-gray-500 hover:text-cyan-400",children:n.jsx(Xm,{size:14})}),b&&n.jsx("div",{className:"absolute top-6 left-0 z-10 bg-zinc-950 border border-gray-700 p-3 rounded-lg shadow-xl w-64 text-xs text-gray-300 leading-relaxed",children:"Recommended retail price (RRP) set by the manufacturer and used for price comparison purposes."})]}),n.jsxs("div",{className:"flex items-baseline gap-3",children:[n.jsxs("span",{className:`text-[32px] font-bold drop-shadow-sm ${i.isMember?"text-purple-400":"text-green-400"}`,children:[fn(),Rt(pt).toFixed(2)]}),$t>pt+.01&&n.jsxs("span",{className:"text-lg text-gray-600 line-through",children:[fn(),Rt($t).toFixed(2)]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[qe&&n.jsxs("div",{className:"flex items-center gap-2 text-xs bg-green-900/30 border border-green-500/30 text-green-400 px-2 py-1 rounded w-fit",children:[n.jsx(qr,{size:12})," Ends: ",new Date(G.promoExpiresAt).toLocaleDateString()]}),i.isMember&&n.jsxs("div",{className:"flex items-center gap-2 text-xs bg-purple-900/30 border border-purple-500/30 text-purple-400 px-2 py-1 rounded w-fit font-bold",children:[n.jsx(It,{size:12})," ",kt!=="none"?kt:"Member"," Pricing Applied"]})]}),n.jsx("div",{className:"mt-3 flex items-center gap-2 text-sm",children:xt?n.jsx("span",{className:"bg-red-600 text-white font-black px-3 py-1 rounded-lg shadow-[0_0_10px_rgba(220,38,38,0.8)] border-2 border-red-400 animate-pulse",children:"Just SOLD"}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${Be>0?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.8)]":"bg-red-500"}`}),n.jsx("span",{className:`${Be>0?Be<=5?"text-orange-400":"text-green-400":"text-red-400"} font-bold`,children:Be>0?Be<=5?`Only ${Be} left!`:"In Stock":"Out of Stock"})]})})]})]}),!i.isMember&&n.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-900/50 rounded-xl p-5 relative overflow-hidden group",children:[n.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:n.jsx(It,{size:80,className:"text-purple-500 transform rotate-12"})}),n.jsxs("h3",{className:"text-purple-400 font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2",children:[n.jsx(It,{size:16,fill:"currentColor"})," Unlock Membership Savings"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-zinc-800/50 border border-zinc-700/50",children:[n.jsx("span",{className:"text-gray-400",children:"Retail Price"}),n.jsxs("span",{className:"text-gray-300 font-medium",children:[fn(),Rt($t).toFixed(2)]})]}),tn?n.jsxs("div",{className:"space-y-2",children:[G.promoBasicMemberPrice&&G.promoBasicMemberPrice>0&&n.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Basic Member"}),n.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[Re(G.promoBasicMemberPrice),"% Off"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[fn(),Rt(G.promoBasicMemberPrice).toFixed(0)]})})]}),G.promoPremiumMemberPrice&&G.promoPremiumMemberPrice>0&&G.promoPremiumMemberPrice!==G.promoBasicMemberPrice&&n.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Premium Member"}),n.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[Re(G.promoPremiumMemberPrice),"% Off"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[fn(),Rt(G.promoPremiumMemberPrice).toFixed(0)]})})]}),G.promoDeluxeMemberPrice&&G.promoDeluxeMemberPrice>0&&n.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-lime-900/20 border border-lime-500/40",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-lime-200 font-bold text-xs",children:"Deluxe Member"}),n.jsxs("span",{className:"text-xs text-lime-300 uppercase font-bold",children:[Re(G.promoDeluxeMemberPrice),"% Off"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"block text-lime-400 font-bold text-lg",children:[fn(),Rt(G.promoDeluxeMemberPrice).toFixed(0)]})})]})]}):n.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[n.jsx("span",{className:"text-purple-200 font-bold",children:"Member Price"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:[fn(),Rt(Dt).toFixed(2)]}),n.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:["Save ",vt,"%"]})]})]})]}),n.jsxs("div",{className:"mt-4 text-center",children:[n.jsx("button",{onClick:()=>m("/membership"),className:"w-full py-3 text-sm font-bold uppercase tracking-widest text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded hover:shadow-[0_0_15px_rgba(168,85,247,0.4)] transition-all",children:"Join Now"}),n.jsx("p",{className:"text-[10px] text-red-400 font-bold mt-2 uppercase tracking-wide animate-pulse",children:"LIMITED places Available"})]})]}),n.jsxs("div",{className:"space-y-6 mt-6 border-t border-gray-800 pt-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-cherry text-2xl text-pink-500 mb-2 tracking-wide",children:"Description"}),n.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:G.description})]}),G.whenAndHowToWear&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-cherry text-2xl text-cyan-400 mb-2 tracking-wide",children:"Stylish Suggestions"}),n.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:G.whenAndHowToWear})]}),G.material&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-cherry text-2xl text-purple-400 mb-2 tracking-wide",children:"Materials"}),n.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:G.material})]}),G.isUniquePendant&&n.jsxs("div",{className:"bg-orange-900/10 border border-orange-500/20 rounded-xl p-5 mt-4",children:[n.jsxs("h3",{className:"font-cherry text-xl text-orange-400 mb-3 tracking-wide flex items-center gap-2",children:[n.jsx(Mh,{size:20})," Oxidized Jewelry Care"]}),n.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"This unique pendant features a deliberate oxidized finish (darkened patina) to enhance the vintage detail."}),n.jsxs("ul",{className:"text-xs text-gray-400 space-y-2 list-disc pl-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Do NOT use liquid silver cleaner or dips:"})," These will strip the antique finish instantly."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Avoid polishing cloths:"})," Aggressive rubbing can remove the darkened details."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Keep it dry:"})," Remove before swimming or showering to preserve the wire wrapping."]}),n.jsx("li",{children:"To clean, simply wipe gently with a soft, dry cotton cloth."})]})]})]}),ds&&n.jsxs("div",{className:"bg-gradient-to-r from-purple-900/40 to-pink-900/40 border border-purple-500/30 rounded-xl p-4 flex items-center gap-4 shadow-[0_0_15px_rgba(168,85,247,0.1)]",children:[n.jsx("div",{className:"p-3 bg-black/50 rounded-full text-pink-400 border border-pink-500/30",children:n.jsx(bn,{size:24})}),n.jsxs("div",{children:[n.jsx("span",{className:"block text-xs font-bold text-pink-400 uppercase tracking-wider mb-1",children:"Free Gift Included"}),n.jsx("h4",{className:"font-bold text-white",children:ds.name}),n.jsxs("p",{className:"text-xs text-gray-400",children:["Value: R",G.giftValue||ds.price]})]}),n.jsx("div",{className:"ml-auto",children:n.jsx("img",{src:ds.images[0],alt:"Gift",className:"w-12 h-12 rounded object-cover border border-gray-700"})})]}),n.jsxs("div",{className:"space-y-6 py-4 border-t border-gray-800",children:[G.type==="Ring"&&G.ringStock&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Size"}),n.jsxs("button",{onClick:()=>{U(!0),Z(1)},className:"text-xs text-pink-400 hover:text-pink-300 flex items-center gap-1 underline decoration-dotted underline-offset-4",children:[n.jsx(Kw,{size:14})," Find My Ring Size"]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(G.ringStock).map(([je,tt])=>n.jsx("button",{disabled:tt===0,onClick:()=>B(je),className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium border transition-all ${A===je?"bg-pink-600 border-pink-600 text-white shadow-[0_0_10px_rgba(236,72,153,0.5)]":tt===0?"bg-zinc-900 border-gray-800 text-gray-600 cursor-not-allowed decoration-slice line-through":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:je},je))}),A&&G.ringStock[A]>0&&n.jsxs("p",{className:`text-xs mt-2 flex items-center gap-1 ${G.ringStock[A]<=5?"text-orange-400 font-bold":"text-green-400"}`,children:[n.jsx(gt,{size:12}),G.ringStock[A]<=5?`Only ${G.ringStock[A]} left in stock!`:"In Stock"]}),A&&G.ringStock[A]===0&&n.jsx("p",{className:"text-xs text-red-500 mt-2 font-bold",children:"Out of stock for this size."})]}),(G.type==="Stud"||G.type==="Dangle")&&G.showEarringOptions&&G.earringMaterials&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Material"}),n.jsx("div",{className:"grid gap-3",children:G.earringMaterials.map(je=>n.jsxs("div",{onClick:()=>ne(je),className:`relative p-4 rounded-xl border cursor-pointer transition-all ${(L==null?void 0:L.name)===je.name?"bg-pink-900/10 border-pink-500 shadow-[0_0_10px_rgba(236,72,153,0.2)]":"bg-zinc-900 border-gray-800 hover:border-gray-600"}`,children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:`font-medium text-sm ${(L==null?void 0:L.name)===je.name?"text-white":"text-gray-300"}`,children:je.name}),n.jsx("span",{className:"text-xs font-bold text-pink-400",children:je.modifier>0?`+${fn()}${Rt(je.modifier).toFixed(0)}`:""})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:je.description}),(L==null?void 0:L.name)===je.name&&n.jsx("div",{className:"absolute top-3 right-3 w-4 h-4 bg-pink-500 rounded-full flex items-center justify-center",children:n.jsx(gt,{size:10,className:"text-white"})})]},je.name))})]}),G.type==="Pendant"&&G.chainStyles&&G.chainStyles.length>0&&n.jsxs("div",{className:"space-y-6",children:[G.chainStyles.length>1&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Chain Style"}),n.jsx("div",{className:"flex gap-4",children:G.chainStyles.map(je=>n.jsx("button",{onClick:()=>Ne(je),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all ${pe===je?"bg-pink-600 border-pink-600 text-white":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:je},je))})]}),pe==="Metal Chain"&&G.pendantChainLengths&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Length"}),n.jsx("div",{className:"grid gap-2",children:Object.keys(G.pendantChainLengths).filter(je=>G.pendantChainLengths[je]).map(je=>n.jsxs("button",{onClick:()=>le(je),className:`text-left p-3 rounded-lg border transition-all ${Te===je?"bg-cyan-900/20 border-cyan-500":"bg-zinc-900 border-gray-800 hover:bg-zinc-800"}`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:`text-sm font-medium ${Te===je?"text-cyan-400":"text-gray-200"}`,children:je}),Te===je&&n.jsx(gt,{size:14,className:"text-cyan-400"})]}),n.jsx("p",{className:"text-xs text-gray-500",children:rL[je]||""})]},je))})]}),pe==="Leather Cord"&&n.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded-lg border border-gray-700 flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-gray-700 rounded-full",children:n.jsx(gt,{size:14,className:"text-white"})}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-white",children:"Fixed Length: 45cm"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Standard leather cord length."})]})]})]})]}),n.jsxs("div",{className:"flex gap-4 pt-4",children:[n.jsxs("button",{onClick:es,disabled:xt||we,className:"flex-1 bg-pink-600 text-white py-4 rounded-xl font-semibold hover:bg-pink-500 transition-all flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(236,72,153,0.4)] text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Ka,{size:20})," ",We]}),n.jsx("button",{onClick:()=>r(G.id),className:`p-4 rounded-xl border transition-colors ${at?"border-pink-500 bg-pink-500/10 text-pink-500":"border-gray-700 hover:bg-zinc-800 text-gray-400 hover:text-white"}`,children:n.jsx(x0,{size:24,fill:at?"currentColor":"none"})})]}),n.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/20 to-purple-900/20 border border-cyan-500/30 rounded-xl p-5 relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 pointer-events-none",children:n.jsx(Ho,{size:60})}),n.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-2",children:[n.jsx(bn,{size:18,className:"text-pink-500"})," Share & Earn"]}),n.jsxs("p",{className:"text-xs text-gray-300 mb-4 max-w-sm",children:["Share this treasure with friends and earn ",n.jsx("strong",{className:"text-green-400",children:"50 Loyalty Points"})," instantly!"]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>Ns("whatsapp"),className:"flex-1 py-2 bg-[#25D366] hover:bg-[#1ebc57] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(37,211,102,0.4)]",children:[n.jsx(sc,{size:16})," WhatsApp"]}),n.jsxs("button",{onClick:()=>Ns("facebook"),className:"flex-1 py-2 bg-[#1877F2] hover:bg-[#166fe5] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(24,119,242,0.4)]",children:[n.jsx(xd,{size:16})," Facebook"]}),navigator.share&&n.jsxs("button",{onClick:()=>Ns("native"),className:"flex-1 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all",children:[n.jsx(Ho,{size:16})," More"]})]}),k&&n.jsxs("div",{className:"mt-3 text-xs text-green-400 font-bold flex items-center gap-1 justify-center animate-in fade-in zoom-in",children:[n.jsx(gt,{size:12})," 50 Points Awarded!"]})]}),n.jsx("div",{className:"grid grid-cols-2 gap-4 pt-8 border-t border-gray-800",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Gr,{className:"text-cyan-400 mt-1",size:20}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm text-gray-200",children:"Free Delivery"}),n.jsx("p",{className:"text-xs text-gray-500",children:"On orders over R500 (PUDO/PAXI only)"})]})]})})]})]}),n.jsxs("div",{className:"pt-12 border-t border-gray-800 animate-in fade-in slide-in-from-bottom-10 duration-700",children:[G.isUniquePendant&&n.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl mb-8 flex gap-3 items-start",children:[n.jsx(Qm,{className:"text-purple-400 shrink-0 mt-1",size:20}),n.jsxs("p",{className:"text-sm text-gray-300",children:[n.jsx("strong",{children:"Please note:"})," As this is a one-of-a-kind treasure, these reviews reflect experiences from customers who have purchased similar unique pendants from our collection."]})]}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"font-cherry text-[26px] font-bold text-white flex items-center gap-3",children:["Customer Reviews",n.jsx("span",{className:"text-sm font-sans font-normal text-gray-500 bg-zinc-900 px-3 py-1 rounded-full",children:Ae.length})]}),n.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[n.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-green-900/20 border border-green-500/30 text-green-400 px-2 py-1 rounded text-xs font-bold w-fit",children:[n.jsx(eg,{size:14,fill:"currentColor",className:"text-green-500"})," Verified Purchases Only"]}),n.jsx("p",{className:"text-xs text-gray-500 max-w-md",children:"To ensure authenticity, only customers who have purchased this item can leave a review."})]})]}),n.jsx("button",{onClick:()=>C(!0),className:"px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg border border-gray-700 hover:border-gray-600 transition-all flex items-center gap-2 text-sm font-semibold shadow-lg",children:"Write a review"})]}),Ae.length>0?n.jsxs("div",{className:"space-y-8",children:[Ae.map((je,tt)=>{var Gt;return n.jsxs("div",{className:"flex flex-col md:flex-row gap-6 border-b border-gray-800 pb-8 last:border-0",children:[n.jsxs("div",{className:"md:w-48 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-white font-bold text-xs",children:(je.userName||je.name||"Verified Buyer").charAt(0)}),n.jsx("span",{className:"font-bold text-gray-200 text-sm",children:je.userName||je.name||"Verified Buyer"})]}),n.jsxs("div",{className:"flex items-center gap-1 ml-10 mb-1",children:[n.jsx(eg,{size:12,className:"text-green-500"}),n.jsx("span",{className:"text--[10px] text-green-500 font-medium",children:"Verified Buyer"})]}),n.jsx("p",{className:"text-xs text-gray-500 ml-10 mb-2",children:je.location||"Unknown"}),n.jsxs("div",{className:"flex items-center gap-1 ml-10",children:[n.jsx("div",{className:"flex text-yellow-400",children:[1,2,3,4,5].map(gn=>n.jsx(dr,{size:12,fill:gn<=Math.round(je.rating||5)?"currentColor":"none",className:gn<=Math.round(je.rating||5)?"text-yellow-400":"text-gray-700"},gn))}),n.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["(",je.rating||5,")"]})]})]}),n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl rounded-tl-none border border-gray-800/50",children:[n.jsxs("p",{className:"text-gray-300 text-sm italic mb-3 leading-relaxed",children:['"',je.content||je.comment||je.text,'"']}),n.jsx("p",{className:"text-xs text-gray-500 font-medium text-right",children:je.date||((Gt=je.createdAt)!=null&&Gt.toDate?je.createdAt.toDate().toLocaleDateString():"Recent")})]})})]},je.id||`legacy-${tt}`)}),fe.length>=J&&n.jsx("div",{className:"text-center pt-4",children:n.jsx("button",{onClick:()=>K(je=>je+5),className:"w-full py-2 text-gold text-sm underline hover:text-white transition-colors",children:"Load More Customer Reviews"})})]}):n.jsx("div",{className:"bg-zinc-900/30 border border-dashed border-gray-800 rounded-xl p-8 text-center",children:n.jsx("p",{className:"text-gray-500 text-sm",children:"No reviews yet. Be the first to own and review this treasure!"})})]}),se.length>0&&n.jsxs("div",{className:"pt-12 border-t border-gray-800",children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white flex items-center gap-2",children:[n.jsx(Un,{size:20,className:"text-pink-500"})," More from ",G.category]}),n.jsxs(Le,{to:`/collections/${encodeURIComponent(G.category)}`,className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View Collection ",n.jsx(Yt,{size:14})]})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:se.map(je=>n.jsx(Cs,{product:je},je.id))})]})]})},xh={IS_SANDBOX:!1,MERCHANT_ID:"113371222",MERCHANT_KEY:"cbhnt80ljkt7g",getProcessUrl:()=>"https://www.payfast.co.za/eng/process",getUrls:()=>{const s=window.location.origin;return{return_url:`${s}/#/profile`,cancel_url:`${s}/#/cart`,notify_url:`${s}/api/notify`}}},v0=S.forwardRef(({amount:s,itemName:e,email:t,returnUrl:r,cancelUrl:i,notifyUrl:o,customStr1:c,customStr2:d,customStr3:m,customInt1:h,isSubscription:g=!1,frequency:b=3,cycles:w=0},P)=>{const C=S.useRef(null);S.useImperativeHandle(P,()=>({submit:()=>{C.current&&C.current.submit()}}));const k=xh.getUrls(),E=xh.MERCHANT_ID,F=xh.MERCHANT_KEY,U=new Date;U.setDate(U.getDate()+1);const q=U.toISOString().split("T")[0];return n.jsxs("form",{ref:C,action:xh.getProcessUrl(),method:"POST",className:"hidden",children:[n.jsx("input",{type:"hidden",name:"merchant_id",value:E}),n.jsx("input",{type:"hidden",name:"merchant_key",value:F}),n.jsx("input",{type:"hidden",name:"return_url",value:r||k.return_url}),n.jsx("input",{type:"hidden",name:"cancel_url",value:i||k.cancel_url}),n.jsx("input",{type:"hidden",name:"notify_url",value:o||k.notify_url}),n.jsx("input",{type:"hidden",name:"amount",value:s.toFixed(2)}),n.jsx("input",{type:"hidden",name:"item_name",value:e}),n.jsx("input",{type:"hidden",name:"email_address",value:t||""}),c&&n.jsx("input",{type:"hidden",name:"custom_str1",value:c}),d&&n.jsx("input",{type:"hidden",name:"custom_str2",value:d}),m&&n.jsx("input",{type:"hidden",name:"custom_str3",value:m}),h&&n.jsx("input",{type:"hidden",name:"custom_int1",value:h}),g&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"hidden",name:"subscription_type",value:"1"}),n.jsx("input",{type:"hidden",name:"billing_date",value:q}),n.jsx("input",{type:"hidden",name:"recurring_amount",value:s.toFixed(2)}),n.jsx("input",{type:"hidden",name:"frequency",value:b}),n.jsx("input",{type:"hidden",name:"cycles",value:w})]})]})}),yh={"Eastern Cape":{"Gqeberha (Port Elizabeth)":["PEP Pier 14 (Ground Floor, 444 Govan Mbeki Ave)","PEP Home Walmer Park (Shop 87A, Walmer Park Shopping Centre)","PEP Greenacres","PEP Newton Park","PEP Summerstrand"],"East London":["PEP EL CBD (32 Oxford St)","PEP Hemingways Mall (Shop UG54, Hemingways Mall)","PEP Vincent Park","PEP Beacon Bay","PEP Gonubie"],Mthatha:["PEP Mthatha BT Ngebs City (Shop 89, BT Ngebs City)","PEP Mthatha Circus Triangle (Shop 7, Circus Triangle)","PEP Mthatha Plaza"],"Makhanda (Grahamstown)":["PEP Grahamstown High Street (48 High St)","PEP Market Square"],"Queenstown (Komani)":["PEP Queenstown Lukhanji Mall (Shop 45, Lukhanji Mall)"],Uitenhage:["PEP Uitenhage Mall","PEP Corkwood Square"],"Jeffreys Bay":["PEP Fountains Mall","PEP Jeffrey's Bay CBD"],"King William's Town":["PEP King William's Town CBD","PEP Metlife Mall"]},"Free State":{Bloemfontein:["PEP BFN St Andrew St (45 St Andrew St)","PEP Home Mimosa Mall (Mimosa Mall, 131 Kellner St)","PEP Loch Logan","PEP Fleurdal","PEP Northridge Mall"],Welkom:["PEP Welkom Bok Street (Shop 22A, Bok Street)","PEP Welkom Goldfields Mall (Shop U5, Goldfields Mall)","PEP Boitumelo Junction"],Bethlehem:["PEP Bethlehem Dihlabeng Mall (Shop 52, Dihlabeng Mall)","PEP Bethlehem CBD"],Sasolburg:["PEP Sasolburg (Shop 9 Sake Complex, Wandellaan Street)","PEP Sasolburg Mall"],Parys:["PEP Parys (Cnr Kort Street & Middle Street)"],Kroonstad:["PEP Kroonstad Reitz Street (21 Reitz St)","PEP Maokeng Mall"]},Gauteng:{Johannesburg:["PEP JHB Carlton Centre (C/O Commissioner St & Kruis Sts)","PEP Home Jabulani Mall (Shop 84, Jabulani Mall, Soweto)","PEP Sandton City (Shop U12, Sandton City, Rivonia Rd)","PEP Jozi CBD","PEP Braamfontein","PEP Rosebank Mall","PEP Mellville","PEP Cresta","PEP Clearwater Mall"],Pretoria:["PEP PTA Central (Cnr Paul Kruger & Pretorius St)","PEP Home Menlyn Park (Menlyn Park, Garsfontein Road)","PEP Centurion Mall (Shop 15, Centurion Mall, Heuwel Ave)","PEP Sunnyside","PEP Brooklyn","PEP Kolonnade","PEP Wonderpark"],Soweto:["PEP Maponya Mall","PEP Jabulani Mall","PEP Bara Mall","PEP Dobsonville"],Centurion:["PEP Centurion Mall","PEP Lyttelton","PEP Mall @ Reds","PEP Forest Hill"],Midrand:["PEP Mall of Africa","PEP Boulders","PEP Midrand CBD"],Benoni:["PEP Benoni Lakeside Mall (Shop L20, Lakeside Mall, Tom Jones St)","PEP Northmead Square"],Boksburg:["PEP East Rand Mall","PEP Sunward Park"],Krugersdorp:["PEP Krugersdorp Cnr Ockerse (Cnr Ockerse & Human Street)","PEP Krugersdorp Westgate (Shop 30, Westgate Shopping Centre)"],Alberton:["PEP Alberton City (SHOP L106, Alberton City, Voortrekker Street)"],Vereeniging:["PEP Vereeniging Arcon Park (Arcon Park Shopping Centre)","PEP Vereeniging CBD (12 Joubert Street)"]},"KwaZulu-Natal":{Durban:["PEP Durban Dr Pixley Kaseme St (442 Dr Pixley Kaseme Street)","PEP Bluff Towers (Shop 94 Bluff Twrs, 15 Tara Rd)","PEP Home Pavilion (Shop L94, The Pavilion Shopping Centre)","PEP Durban Workshop","PEP Musgrave","PEP Berea","PEP South Beach","PEP Ushaka"],Umhlanga:["PEP Gateway","PEP Crescent","PEP Cornubia"],Pietermaritzburg:["PEP PMB Liberty Mall (Shop 15, Liberty Midlands Mall)","PEP PMB CBD (335 Church Street)","PEP Greater Edendale"],"Richards Bay":["PEP Cell Richards Bay Boardwalk (Shop U004, Boardwalk Inkwazi)","PEP Richards Bay Checkers (Shop 17A, Checkers Centre)"],Ballito:["PEP Ballito Junction","PEP Lifestyle Centre"],Newcastle:["PEP Newcastle Mall","PEP Amajuba Mall"],"Port Shepstone":["PEP Port Shepstone (Cnr Escombe & Wooley St)","PEP South Coast Mall"],Ladysmith:["PEP Ladysmith Murchison Mall (Shop LG11, Murchison Mall)"],Kokstad:["PEP Kokstad Main Street (Shop 1 Spargs Building, 40 Main Street)"]},Limpopo:{Hoedspruit:["PEP Hoedspruit (Wildlife Shop 12)","PEP Hoedspruit Centre"],Ohrigstad:["PEP Ohrigstad (Potgieter St)"],Metz:["PEP Metz Mahlakung Shopping Centre (Shop 7)","PEP Cell Metz (Shop 11)"],Phalaborwa:["PEP Home Ba-phalaborwa Eden Square (Shop 13)","PEP Phalaborwa Shoprite Centre (Shop 8)","PEP Phalaborwa Mall (Shop 5)","PEP Cell Ba-phalaborwa (Shop 7C)","PEP Ba-phalaborwa Checkers (Shop 9)","PEP Phalaborwa Standard Bank Centre (Shop B1)","PEP Ba-phalaborwa Namakwale Crossing (Shop 7)","PEP Cell Phalaborwa Namakgale Crossing (Shop 26)","PEP Lulekani Spar Centre (Shop A3)"],Burgersfort:["PEP Home Burgersfort Tubatse (Shop L50)","PEP Cell Burgersfort Morone Centre (Shop 23A)","PEP Burgersfort Morone Shopping Centre (Shop 5 & 6)","PEP Burgersfort Twin City Mall (Shop 17)","PEP Cell Burgersfort Twin City (Shop 5)","PEP Cell Burgersfort Twin City Shop 41","PEP Burgersfort Platinum Place (Shop 1-3)","PEP Cell Burgersfort Castle Square (Shop 10)","PEP Burgersfort Castle Square (Shop 8)","PEP Burgersfort Burgersfort Mall (Shop 18)","PEP Cell Burgersfort Mall (Shop 28)","PEP Burgersfort Tubatse Mall (Shop L87)","PEP Cell Burgersfort Tubatse Crossing (Shop L57)"],Steelpoort:["PEP Home Steelpoort (Steelpoort Centre)","PEP Steelpoort (Shop 5)","PEP Cell Steelpoort Shopping Centre (Shop 19)"],Polokwane:["PEP Polokwane CBD (Cnr Grobler & Thabo Mbeki St)","PEP Mall of the North (Shop 10, Mall of the North)","PEP Savanna Mall","PEP Limpopo Mall"],Tzaneen:["PEP Tzaneen Tzaneng Mall (Shop B5, Tzaneng Mall, Danie Joubert St)","PEP Tzaneen CBD","PEP Tzaneen Crossing"],Thohoyandou:["PEP Thohoyandou Venda Plaza (Shop B1, Venda Plaza)","PEP Home Thohoyandou (Next to Shoprite, Thohoyandou)","PEP Thavhani Mall","PEP Mvyu"],Mokopane:["PEP Mokopane Mall","PEP Crossing"],"Makhado (Louis Trichardt)":["PEP Louis Trichardt Burger Str (Cnr Burger St & Songozwi Rd)"]},Mpumalanga:{Acornhoek:["PEP Home Acornhoek Mall (Shop 27)","PEP Acornhoek Plaza Extension (Shop 75)","PEP Cell Acornhoek Plaza (Shop 71)","PEP Cell Acornhoek Mall (Shop 3)","PEP Acornhoek Mall (Shop 10)","PEP Cell Acornhoek Mall (Shop 33B)","PEP Acornhoek Shopping Centre (Station Centre)","PEP Cell Acornhoek Shopping Centre"],Thulamahashe:["PEP Cell Thulamahashe (Thula Mall)","PEP Thulamahashe Thula Mall (Shop 17)","PEP Cell Thulamahashe Plaza (Shop 103)","PEP Thulamahashe (Plaza Shop 7)","PEP Cell Thulamahashe Plaza (Shop 14)"],Dwarsloop:["PEP Home Dwarsloop Mall (Shop 208)","PEP Dwarsloop Mall (Shop 66)","PEP Cell Dwarsloop Mall (Shop 48)"],Bushbuckridge:["PEP Bushbuckridge Twin City Mall (Shop 9)","PEP Cell Bushbuckridge Twin City Mall (Shop 2A)","PEP Cell Bushbuckridge Shopping Centre (Shop 1B)","PEP Bushbuckridge Shopping Centre (Shop 6)"],Graskop:["PEP Graskop (Spar Centre)"],Mkhuhlu:["PEP Cell Mkhuhlu (Plaza Shop 12)","PEP Mkhuhlu (Plaza Shop 7)"],Hazyview:["PEP Home Hazyview Junction (Shop 5A)","PEP Home Numbi Gate Dayizenza (Shop 7)","PEP Hazyview Junction (Shop 14B)","PEP Cell Lowveld Mall PNP (Shop 168)","PEP Cell Lowveld Mall Spar (Shop 12)","PEP Hazyview Blue Haze (Shop 304)","PEP Hazyview Lowveld Mall (Shop 232)","PEP Hazyview Lowveld Mall (Shop 155)","PEP Numbigate Dayizenza Plaza (Shop 38A)","PEP Cell Numbigate Dayizenza Plaza (Shop 12)"],Sabie:["PEP Sabie (Shopping Centre)"],"White River":["PEP Home White River Square (Shop 20)","PEP White River (Square Shop 17)","PEP Whiteriver Square 1 (Shop 17)","PEP White River Crossing (Shop 15)","PEP White River Kabokweni (Plaza Shop 10)","PEP Cell White River Kabokweni Plaza (Shop 205A)"],"Lydenburg (Mashishing)":["PEP Home Lydenburg Lt Centre (Shop 5)","PEP Lydenburg Highland Centre (Shop 6A)","PEP Lydenburg (Tamarisk Building)","PEP Cell Mashishing Shoprite Centre"],"Mbombela (Nelspruit)":["PEP Home Riverside Mall Nelspruit (Shop G241)","PEP Home Nelspruit Promenade (Shop 41 & 42)","PEP Home Nelspruit Ilanga Mall (Shop LG36)","PEP Home Nelspruit The Square (Shop 7)","PEP Nelspruit The Grove (Shop 18)","PEP Cell Nelspruit Plaza (Shop 28)","PEP Nelspruit Plaza (Shop 17-20)","PEP Cell Nelspruit Ekukhanyeni (Shop 5)","PEP Nelspruit Brown & Henshall Street","PEP Cell Nelspruit Promenade (Shop 49)","PEP Nelspruit Brown Street (Prorom Building)","PEP Nelspruit (Bester Brown Building)","PEP Nelspruit The Square (Shop 10)","PEP Nelspruit CBD","PEP Riverside Mall (Shop U40)"],Kanyamazane:["PEP Kanyamazane (Shopping Centre Shop 11)"],Emoyeni:["PEP Emoyeni Mall (Shop 22)","PEP Cell Emoyeni Mall (Shop 8)"],"eMalahleni (Witbank)":["PEP Witbank Taxi Rank (Shop 1, 3 Escombe St)","PEP Highveld Mall (Shop U03, Highveld Mall)","PEP Witbank CBD","PEP Saveways Crescent"],Middelburg:["PEP Home Middelburg Mall (Shop 97, Middelburg Mall)","PEP Middelburg CBD (28 Cowen Ntuli Street)","PEP Midwater"],Secunda:["PEP Secunda Mall (Shop 160, Secunda Mall)","PEP Secunda CBD"]},"North West":{Rustenburg:["PEP Rustenburg Mall (Shop 73 Rustenburg Mall)","PEP Waterfall Mall (Shop 12, Waterfall Mall)","PEP Rustenburg CBD","PEP Rustenburg Plaza","PEP Platinum Square"],Potchefstroom:["PEP Potch Walter Sisulu Lane (149 Walter Sisulu Lane)","PEP Home Mooirivier Mall (Shop 16, Mooirivier Mall)","PEP Potch CBD"],"Mahikeng (Mafikeng)":["PEP Mafikeng City Mall (Shop G10, Mafikeng City Mall)","PEP Mmabatho Crossing (Shop 25, Mmabatho Crossing)","PEP Mahikeng CBD","PEP Mega City"],Klerksdorp:["PEP Klerksdorp Terminus (Shop 19, The Terminus Centre)","PEP Klerksdorp CBD","PEP Matlosana Mall","PEP City Mall"],Brits:["PEP Brits Town Centre (Shop G2, Brits Town Centre)","PEP Brits Mall"]},"Northern Cape":{Kimberley:["PEP North Cape Mall (Shop 60, North Cape Mall)","PEP Home Diamond Pavilion Mall (Shop 93, Diamond Pavilion Mall)","PEP Kimberley CBD","PEP New Park"],Upington:["PEP Upington Mall (Shop 12, Upington Mall)","PEP Upington CBD (20 Schroder Street)","PEP Kalahari Mall"],Kuruman:["PEP Kuruman Beare Street (Shop 28B, Beare Street)","PEP Kuruman Mall","PEP The Eye"],"De Aar":["PEP De Aar Main Road (35 Main Road, De Aar)"],Springbok:["PEP Springbok (62 Main Street, Springbok)"]},"Western Cape":{"Cape Town":["PEP CPT Station (Cape Town Station Concourse)","PEP Golden Acre (Shop 10, Golden Acre Mall)","PEP Home Parow Centre (Shop G6, Parow Centre, Voortrekker Rd)","PEP Gardens","PEP V&A Waterfront","PEP Canal Walk","PEP Blue Route"],Stellenbosch:["PEP Eikestad Mall (Shop E4, Eikestad Mall, 43 Andringa Rd)","PEP Kayamandi (Shop 11, Kayamandi Shopping Centre)","PEP Stellenbosch Central"],George:["PEP George Garden Route Mall (Shop 2, Garden Route Mall)","PEP George CBD (82 Hibernia Street)","PEP York Street"],Paarl:["PEP Paarl Mall (Shop 12, Paarl Mall, Cnr Newvlei & Jones St)","PEP Lady Grey","PEP Rembrandt Mall"],Hermanus:["PEP Hermanus Whale Coast Mall (Shop 15, Whale Coast Mall)"],Knysna:["PEP Knysna Long Street (13 Long Street, Knysna)","PEP Knysna Mall","PEP Woodmill Lane"],"Somerset West":["PEP Somerset Mall","PEP Main Road","PEP Waterstone"],"Mossel Bay":["PEP Mossel Bay Mall","PEP Langeberg Mall"],Worcester:["PEP Mountain Mill","PEP Worcester CBD"]}},aL=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm  8cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],oL={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:0}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:0}]},lL=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],cL=({cartItemCount:s,onShippingChange:e,subtotal:t})=>{var le,fe,ve,J,K;const{user:r,currency:i}=Ct(),[o,c]=S.useState("pudo"),[d,m]=S.useState(""),[h,g]=S.useState(""),[b,w]=S.useState(""),[P,C]=S.useState(""),[k,E]=S.useState(""),[F,U]=S.useState(""),[q,Z]=S.useState(""),[W,$]=S.useState("economy"),[R,_]=S.useState({street:((le=r.shippingAddress)==null?void 0:le.street)||"",suburb:((fe=r.shippingAddress)==null?void 0:fe.suburb)||"",city:((ve=r.shippingAddress)==null?void 0:ve.city)||"",province:((J=r.shippingAddress)==null?void 0:J.province)||"",postalCode:((K=r.shippingAddress)==null?void 0:K.postalCode)||""}),[I,V]=S.useState({street:"",suburb:"",city:"",province:"",postalCode:"",country:"",email:""}),[A,B]=S.useState(aL),[L,ne]=S.useState(oL),[pe,Ne]=S.useState(lL),Te=t>=500;return S.useEffect(()=>{Te&&o==="door"&&c("pudo")},[Te,o]),S.useEffect(()=>{i==="USD"?c("international"):o==="international"&&c("pudo")},[i]),S.useEffect(()=>{try{const X=localStorage.getItem("spv_pudo_costs");X&&B(JSON.parse(X));const ue=localStorage.getItem("spv_paxi_costs");ue&&ne(JSON.parse(ue));const G=localStorage.getItem("spv_door_to_door_costs");G&&Ne(JSON.parse(G))}catch(X){console.error("Failed to load shipping costs from storage",X)}},[]),S.useEffect(()=>{let X=0,ue="";if(o==="pudo"){const G=s<=20?"Extra-Small (XS)":"Small (S)",se=A.find(Ae=>Ae.name===G);let Ie="locker";se?se.lockerToLockerCost!==null?X=se.boxCost+se.lockerToLockerCost+se.lockerHandleFee:se.doorToLockerCost!==null?(X=se.boxCost+se.doorToLockerCost+se.doorHandleFee,Ie="door"):X=se.boxCost:X=60,k&&F&&q&&(ue=`${k} | ${F} | ${q} | ${Ie}`)}else if(o==="paxi"){let G="7-9 Days Service";t>1e3&&(G="3-5 Days Service");const se=L[G],Ie=s<=20?"Small":"Large",Ae=se.find(Be=>Be.bag.includes(Ie));Ae?X=(Ie==="Small"?6:15)+Ae.serviceCost+Ae.handleFee:X=60,d&&h&&b&&P&&(ue=`${d} | ${h} | ${b} | ${P} | ${G}`)}else if(o==="door"){const G=W==="overnight"?"Overnight":"Economy",se=pe.find(Ie=>Ie.service.includes(G));se?X=se.boxFee+se.initialCharge+(se.ratePerKg!==null?se.ratePerKg:0)+se.handleFee:X=120,R.street&&R.city&&R.postalCode&&(ue=JSON.stringify({...R,service:W}))}else o==="international"&&(X=60,I.street&&I.city&&I.postalCode?ue=`International Shipping | ${I.street}, ${I.suburb?I.suburb+", ":""}${I.city}, ${I.province?I.province+", ":""}${I.postalCode}${I.country?", "+I.country:""}${I.email?" | Email: "+I.email:""}`:ue="International Shipping");e({method:o,cost:X,details:ue})},[o,s,A,L,pe,W,k,F,q,d,h,b,P,R,I,e]),S.useEffect(()=>{U("")},[k]),S.useEffect(()=>{g(""),w(""),C("")},[d]),S.useEffect(()=>{w(""),C("")},[h]),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[n.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(Gr,{size:18,className:"text-cyan-400"})," Shipping Method"]}),n.jsx("div",{className:"space-y-3",children:i==="USD"?n.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="international"?"bg-green-900/20 border-green-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="international"?"border-green-500 bg-green-500":"border-gray-500"}`,children:o==="international"&&n.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),n.jsx("span",{className:"text-sm text-gray-300",children:"International Shipping $60"})]}),n.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="international",onChange:()=>c("international")})]}):n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="pudo"?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="pudo"?"border-cyan-500 bg-cyan-500":"border-gray-500"}`,children:o==="pudo"&&n.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),n.jsx("span",{className:"text-sm text-gray-300",children:"PUDO Locker to Locker"})]}),n.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="pudo",onChange:()=>c("pudo")})]}),n.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${o==="paxi"?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="paxi"?"border-yellow-500 bg-yellow-500":"border-gray-500"}`,children:o==="paxi"&&n.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),n.jsx("span",{className:"text-sm text-gray-300",children:"PAXI (PEP Store - 7-9 Days)"})]}),n.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="paxi",onChange:()=>c("paxi")})]}),n.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${o==="door"?"bg-purple-900/20 border-purple-500 cursor-pointer":Te?"bg-zinc-900 border-gray-800 opacity-50 cursor-not-allowed":"bg-black border-gray-700 hover:border-gray-600 cursor-pointer"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${o==="door"?"border-purple-500 bg-purple-500":Te?"border-gray-700":"border-gray-500"}`,children:o==="door"&&n.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),n.jsxs("div",{children:[n.jsx("span",{className:`text-sm ${Te?"text-gray-500":"text-gray-300"}`,children:"PUDO Door to Door"}),Te&&n.jsx("span",{className:"text-xs text-gray-500 block",children:"Not available for free shipping"})]})]}),n.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:o==="door",onChange:()=>c("door"),disabled:Te})]})]})}),o==="pudo"&&n.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-cyan-500/20",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("label",{className:"text-[10px] text-cyan-400 uppercase font-bold",children:"Select PUDO Locker Location"}),n.jsxs("a",{href:"https://thecourierguy.co.za/locations/",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[n.jsx(zd,{size:10})," Find PUDO Locker Location Click Here"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:k,onChange:X=>E(X.target.value),children:[n.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(yh).sort().map(X=>n.jsx("option",{value:X,children:X},X))]}),n.jsx(gh,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),k&&n.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[n.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:F,onChange:X=>U(X.target.value),children:[n.jsx("option",{value:"",children:"-- Select Town --"}),Object.keys(yh[k]||{}).sort().map(X=>n.jsx("option",{value:X,children:X},X))]}),n.jsx(gh,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),F&&n.jsx("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Locker Name / Address"}),n.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none",placeholder:"e.g. PUDO Locker @ Sandton City",value:q,onChange:X=>Z(X.target.value)})]})})]}),o==="paxi"&&n.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-yellow-500/20",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("label",{className:"text-[10px] text-yellow-400 uppercase font-bold",children:"Select PEP Store"}),n.jsxs("a",{href:"https://www.paxi.co.za/paxi-points",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[n.jsx(zd,{size:10})," Find PAXI Point"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:d,onChange:X=>m(X.target.value),children:[n.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(yh).sort().map(X=>n.jsx("option",{value:X,children:X},X))]}),n.jsx(gh,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),d&&n.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[n.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:h,onChange:X=>g(X.target.value),children:[n.jsx("option",{value:"",children:"-- Select Town --"}),Object.keys(yh[d]||{}).sort().map(X=>n.jsx("option",{value:X,children:X},X))]}),n.jsx(gh,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),h&&n.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Store Name (or P-Code)"}),n.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. PEP Home Acornhoek Mall",value:b,onChange:X=>w(X.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Store Street Address"}),n.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. Shop 27, Acornhoek Mall, R40 Main Rd",value:P,onChange:X=>C(X.target.value)})]})]})]}),o==="door"&&n.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-purple-500/20",children:[n.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block",children:"Select Service"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${W==="economy"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[n.jsx("input",{type:"radio",name:"doorService",value:"economy",checked:W==="economy",onChange:()=>$("economy"),className:"hidden"}),"Economy Road"]}),n.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${W==="overnight"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[n.jsx("input",{type:"radio",name:"doorService",value:"overnight",checked:W==="overnight",onChange:()=>$("overnight"),className:"hidden"}),"Overnight Courier"]})]}),n.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block pt-2 border-t border-gray-700/50",children:"Delivery Address"}),n.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:R.street,onChange:X=>_({...R,street:X.target.value})}),n.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:R.suburb,onChange:X=>_({...R,suburb:X.target.value})}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:R.city,onChange:X=>_({...R,city:X.target.value})}),n.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:R.postalCode,onChange:X=>_({...R,postalCode:X.target.value})})]}),n.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:R.province,onChange:X=>_({...R,province:X.target.value})})]}),o==="international"&&n.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-green-500/20",children:[n.jsx("label",{className:"text-[10px] text-green-400 uppercase font-bold block",children:"International Shipping Address"}),n.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.street,onChange:X=>V({...I,street:X.target.value})}),n.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.suburb,onChange:X=>V({...I,suburb:X.target.value})}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.city,onChange:X=>V({...I,city:X.target.value})}),n.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.postalCode,onChange:X=>V({...I,postalCode:X.target.value})})]}),n.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.province,onChange:X=>V({...I,province:X.target.value})}),n.jsx("input",{type:"text",placeholder:"Country",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.country||"",onChange:X=>V({...I,country:X.target.value})}),n.jsx("input",{type:"email",placeholder:"Email",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:I.email||"",onChange:X=>V({...I,email:X.target.value})}),n.jsx("p",{className:"text-xs text-yellow-400 mt-2",children:"You are liable for any import taxes if any arises."})]})]})},dL=()=>{const{cart:s,removeFromCart:e,updateCartQuantity:t,getCartTotal:r,user:i,appliedVoucher:o,setAppliedVoucher:c,applyExternalVoucher:d,updateUserAddress:m,setIsStickyProgressBarVisible:h,checkout:g,clearCart:b,register:w,login:P,currency:C}=Ct(),k=As(),[E,F]=S.useState({method:"pudo",cost:60,details:""}),[U,q]=S.useState(""),[Z,W]=S.useState(""),[$,R]=S.useState(0),_=S.useRef(null),[I,V]=S.useState(null),[A,B]=S.useState(!1),[L,ne]=S.useState("register"),[pe,Ne]=S.useState(!1),[Te,le]=S.useState(!1),[fe,ve]=S.useState(""),[J,K]=S.useState(""),[X,ue]=S.useState(""),[G,se]=S.useState(""),[Ie,Ae]=S.useState(""),[He,Be]=S.useState("");S.useEffect(()=>{h(!1)},[h]),S.useEffect(()=>{Te&&i.email&&(mt(),le(!1))},[Te,i.email]),S.useEffect(()=>{I&&_.current&&(_.current.submit(),b())},[I,b]);const xt=()=>{h(!0),k("/")},we=r(),We=s.reduce((Re,In)=>Re+In.quantity,0),at=we>=500&&(E.method==="pudo"||E.method==="paxi"),bt=at?0:E.cost;let z=0;o&&(o.minSpend&&we<o.minSpend||(o.discountType==="percentage"?z=we*o.value/100:z=o.value)),z>we&&(z=we);let re=0;const $e=we-z;i!=null&&i.storeCredit&&i.storeCredit>0&&i.creditCurrency===C&&(re=Math.min($e,i.storeCredit));let _e=0;if($>0){const Re=C==="ZAR"?1:.5;_e=$/100*Re}const qe=we+bt-z-re-_e,Vt=()=>{if(W(""),!U.trim())return;d(U.trim())?q(""):W("Invalid or expired voucher code.")},xe=async()=>{if(!E.details){alert("Please complete all shipping details.");return}if(!i.email){B(!0);return}await mt()},mt=async()=>{E.method==="door"&&await m(JSON.parse(E.details));try{const Re=await g({items:s,total:qe,shippingMethod:E.method,shippingDetails:E.details,shippingCost:bt,pointsToRedeem:$});V(Re)}catch(Re){console.error("Order creation failed",Re),alert("Could not create your order. Please try again.")}},kt=async Re=>{if(Re.preventDefault(),ve(""),Ie!==He){ve("Passwords do not match!");return}await w({name:J,email:X,birthday:G,password:Ie})?(B(!1),le(!0)):ve("Registration failed. Please try again.")},Dt=async Re=>{Re.preventDefault(),ve(""),await P(X,Ie)?(B(!1),le(!0)):ve("Invalid credentials.")},pt=()=>C==="ZAR"?"R":"$",$t=(Re,In)=>C==="ZAR"?Re:In??Re,Qt=C==="ZAR"?"R1.00":"$0.50",vt=C==="ZAR"?"R10":"$5",tn=C==="ZAR"?"R100":"$50";return s.length===0?n.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[n.jsx("div",{className:"w-20 h-20 bg-zinc-900 rounded-full flex items-center justify-center text-gray-600",children:n.jsx(Md,{size:40})}),n.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Cart is Empty"}),n.jsx("p",{className:"text-gray-400",children:"Looks like you haven't added any treasures yet."}),n.jsx(Le,{to:"/",className:"px-6 py-3 bg-pink-600 text-white font-bold rounded-full hover:bg-pink-500 transition-colors",children:"Start Shopping"})]}):n.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[n.jsx(g2,{subtotal:we,onContinueShopping:xt}),A&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>B(!1)}),n.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h3",{className:"text-2xl font-bold text-white",children:L==="register"?"Create an Account":"Sign In"}),n.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"An account is required to track your order history and status."})]}),L==="register"?n.jsxs("form",{onSubmit:kt,className:"space-y-4",children:[n.jsx("input",{type:"text",required:!0,value:J,onChange:Re=>K(Re.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Full Name"}),n.jsx("input",{type:"email",required:!0,value:X,onChange:Re=>ue(Re.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),n.jsx("input",{type:"date",required:!0,value:G,onChange:Re=>se(Re.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"}),n.jsx("input",{type:pe?"text":"password",required:!0,value:Ie,onChange:Re=>Ae(Re.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Create Password"}),n.jsx("input",{type:pe?"text":"password",required:!0,value:He,onChange:Re=>Be(Re.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Confirm Password"}),fe&&n.jsx("p",{className:"text-xs text-red-400 text-center",children:fe}),n.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500",children:"Create Account & Continue"}),n.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",n.jsx("button",{type:"button",onClick:()=>ne("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):n.jsxs("form",{onSubmit:Dt,className:"space-y-4",children:[n.jsx("input",{type:"email",required:!0,value:X,onChange:Re=>ue(Re.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),n.jsx("input",{type:pe?"text":"password",required:!0,value:Ie,onChange:Re=>Ae(Re.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Password"}),fe&&n.jsx("p",{className:"text-xs text-red-400 text-center",children:fe}),n.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500",children:"Sign In & Continue"}),n.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",n.jsx("button",{type:"button",onClick:()=>ne("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsx(v0,{ref:_,amount:(I==null?void 0:I.total)??qe,itemName:I?`Order ${I.orderNumber}`:"Spoil Me Vintage Order",email:i.email,customStr1:(I==null?void 0:I.id)??"",customStr2:E.method,customStr3:(o==null?void 0:o.code)||""}),n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs("h1",{className:"text-2xl font-bold text-white mb-4",children:["Shopping Cart (",We,")"]}),n.jsx("div",{className:"space-y-4",children:s.map((Re,In)=>{let Hn=Re.stock;Re.type==="Ring"&&Re.selectedSize&&Re.ringStock&&(Hn=Re.ringStock[Re.selectedSize]||0);const Is=Re.quantity>=Hn;return n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-4 rounded-xl flex gap-4 items-start",children:[n.jsx("div",{className:"w-20 h-20 bg-black rounded-lg overflow-hidden border border-gray-700 shrink-0",children:n.jsx("img",{src:Re.images[0],alt:Re.name,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx("h3",{className:"font-bold text-white text-sm line-clamp-2",children:Re.name}),n.jsx("button",{onClick:()=>e(Re.id,{selectedSize:Re.selectedSize,selectedMaterial:Re.selectedMaterial,selectedChainStyle:Re.selectedChainStyle,selectedChainLength:Re.selectedChainLength}),className:"text-gray-500 hover:text-red-400 p-1",children:n.jsx(ui,{size:16})})]}),n.jsxs("div",{className:"text-xs text-gray-400 mt-1 space-y-0.5",children:[Re.selectedSize&&n.jsxs("div",{children:["Size: ",n.jsx("span",{className:"text-gray-300",children:Re.selectedSize})]}),Re.selectedMaterial&&n.jsxs("div",{children:["Material: ",n.jsx("span",{className:"text-gray-300",children:Re.selectedMaterial})]}),Re.selectedChainStyle&&n.jsxs("div",{children:["Chain: ",n.jsxs("span",{className:"text-gray-300",children:[Re.selectedChainStyle," ",Re.selectedChainLength?`(${Re.selectedChainLength})`:""]})]})]}),n.jsxs("div",{className:"flex justify-between items-end mt-3",children:[n.jsxs("div",{className:"flex items-center gap-3 bg-black rounded-lg border border-gray-700 px-2 py-1",children:[n.jsx("button",{onClick:()=>t(Re.id,Re.quantity-1,Re),className:"text-gray-400 hover:text-white",children:n.jsx(h2,{size:14})}),n.jsx("span",{className:"text-sm font-bold text-white w-4 text-center",children:Re.quantity}),n.jsx("button",{onClick:()=>t(Re.id,Re.quantity+1,Re),className:"text-gray-400 hover:text-white disabled:text-gray-700 disabled:cursor-not-allowed",disabled:Is,children:n.jsx($s,{size:14})})]}),n.jsxs("div",{className:"font-bold text-white",children:[pt(),(($t(Re.price,Re.priceUSD||Re.price)+(Re.selectedMaterialModifier||0))*Re.quantity).toFixed(2)]})]})]})]},`${Re.id}_${In}`)})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(cL,{cartItemCount:We,onShippingChange:F,subtotal:we}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[n.jsx("h3",{className:"font-bold text-white mb-4",children:"Summary"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-400 mb-4 pb-4 border-b border-gray-800",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal"}),n.jsxs("span",{className:"text-white",children:[pt(),we.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Shipping"}),n.jsx("span",{className:"text-white",children:at?n.jsx("span",{className:"text-green-400",children:"FREE"}):`${pt()}${bt.toFixed(2)}`})]}),z>0&&n.jsxs("div",{className:"flex justify-between text-green-400",children:[n.jsx("span",{children:"Discount"}),n.jsxs("span",{children:["-",pt(),z.toFixed(2)]})]}),re>0&&n.jsxs("div",{className:"flex justify-between text-green-400",children:[n.jsx("span",{children:"Store Credit"}),n.jsxs("span",{children:["-",pt(),re.toFixed(2)]})]}),_e>0&&n.jsxs("div",{className:"flex justify-between text-purple-400",children:[n.jsx("span",{children:"Loyalty Discount"}),n.jsxs("span",{children:["-",pt(),_e.toFixed(2)]})]})]}),n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsx("span",{className:"text-gray-300 font-bold",children:"Total"}),n.jsxs("span",{className:"text-2xl font-bold text-white",children:[pt(),qe.toFixed(2)]})]}),o?n.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 p-3 rounded-lg mb-4 flex justify-between items-center text-xs",children:[n.jsxs("span",{className:"text-green-400 font-bold flex items-center gap-1",children:[n.jsx(gt,{size:12})," Code ",o.code," Applied"]}),n.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:"Remove"})]}):n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("input",{type:"text",placeholder:"Promo Code",className:"flex-1 bg-black border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-pink-500 outline-none",value:U,onChange:Re=>q(Re.target.value)}),n.jsx("button",{onClick:Vt,className:"bg-zinc-800 hover:bg-zinc-700 text-white px-3 py-2 rounded-lg text-sm border border-gray-600",children:"Apply"})]}),Z&&n.jsx("p",{className:"text-xs text-red-400 mb-4",children:Z}),i.email&&i.loyaltyPoints>=1e3&&n.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-lg mb-4",children:[n.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-2",children:"Redeem Loyalty Points"}),n.jsxs("p",{className:"text-xs text-gray-400 mb-3",children:["100 points = ",Qt," discount. Min 1000 points (",vt,"). ",i.isMember?"":`Non-members: max ${tn} per order.`]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",min:"0",max:Math.min(i.loyaltyPoints,i.isMember?i.loyaltyPoints:1e4),step:"100",value:$,onChange:Re=>R(Math.max(0,parseInt(Re.target.value)||0)),className:"flex-1 bg-black border border-gray-700 rounded px-3 py-2 text-white text-sm",placeholder:"Points to redeem"}),n.jsx("button",{onClick:()=>R(Math.min(i.loyaltyPoints,i.isMember?i.loyaltyPoints:1e4)),className:"bg-purple-600 hover:bg-purple-500 text-white px-3 py-2 rounded text-sm",children:"Max"})]}),$>0&&n.jsxs("p",{className:"text-xs text-purple-400 mt-2",children:["Discount: ",pt(),($/100).toFixed(2)]})]}),n.jsxs("button",{onClick:xe,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:["Pay Now ",n.jsx(Yt,{size:20})]}),n.jsxs("div",{className:"text-center mt-3 text-xs text-gray-500 flex justify-center gap-2",children:[n.jsx(Sa,{size:14})," Secure Payment via PayFast"]})]})]})]})]})},uL=()=>{const{user:s,products:e,logout:t,currency:r,closeAccount:i}=Ct(),o=As(),[c,d]=S.useState(!1),[m,h]=S.useState(!1),[g,b]=S.useState(""),w=e.filter(q=>(s.wishlist||[]).includes(q.id));if(!s.email)return o("/login"),null;const P=r==="ZAR"?"R10":"$3",C=r==="ZAR"?"R1.00":"$0.50",k=r==="ZAR"?"R10":"$5",E=r==="ZAR"?"R100 (10,000 pts)":"$50 (10,000 pts)",F=r==="ZAR"?"R100":"$50",U=async()=>{try{await i(g),h(!1),alert("Sorry to see you go. Your account will be deleted within 24 hours."),t(),o("/")}catch(q){console.error("Error closing account:",q),alert("Failed to close account. Please try again.")}};return n.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[c&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>d(!1)}),n.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[n.jsx("button",{onClick:()=>d(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:n.jsx(pn,{size:20})}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:n.jsx(or,{size:24})}),n.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),n.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",n.jsxs("span",{className:"text-green-400",children:["1 Point for every ",P]})," spent on products."]}),n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",n.jsx("span",{className:"text-green-400",children:"100 Points"})," for every verified review."]}),n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",n.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing products on social media."]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",n.jsxs("span",{className:"text-white font-bold",children:[C," Discount"]}),"."]}),n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum redemption is 1000 Points (",k,")."]})]})]}),n.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[n.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[n.jsx(or,{size:14})," Membership Rule"]}),n.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",n.jsx("strong",{children:E})," per order. To redeem more than ",F," at once, you must be a ",n.jsx(Le,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),n.jsx("button",{onClick:()=>d(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),m&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>h(!1)}),n.jsxs("div",{className:"bg-zinc-900 border border-red-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(239,68,68,0.3)] animate-in zoom-in-95 duration-200",children:[n.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:n.jsx(pn,{size:20})}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-3 bg-red-900/50 rounded-full border border-red-500 text-red-300",children:n.jsx(Ww,{size:24})}),n.jsx("h3",{className:"text-xl font-bold text-white",children:"Close Account"})]}),n.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[n.jsx("p",{className:"text-red-400 font-semibold",children:"Are you sure you want to close your account?"}),n.jsx("p",{className:"text-gray-400",children:"This action cannot be undone. Your account and all associated data will be permanently deleted within 24 hours."}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Please tell us why you're leaving (optional)"}),n.jsx("textarea",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-red-500 outline-none resize-none",rows:3,placeholder:"Help us improve our service...",value:g,onChange:q=>b(q.target.value)})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white font-bold rounded-xl transition-colors",children:"Cancel"}),n.jsx("button",{onClick:U,className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-xl transition-colors",children:"Close Account"})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"text-center flex-1",children:[n.jsxs("h1",{className:"text-[28px] font-cherry text-white",children:["Welcome, ",s.name||s.firstName||"User"]}),n.jsx("p",{className:"text-[14px] font-architects text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-yellow-400 italic",children:"Your personal vault of timeless treasuresbecause ordinary is not your style."})]}),n.jsx("div",{className:"flex-1 flex justify-end",children:n.jsx("button",{onClick:()=>{t(),o("/")},className:"p-3 bg-zinc-800 hover:bg-zinc-700 border border-gray-700 rounded-full transition-colors text-gray-400 hover:text-red-400",title:"Logout",children:n.jsx(Ww,{size:20})})})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 border border-purple-700 rounded-2xl p-6 text-white shadow-[0_0_20px_rgba(168,85,247,0.2)] relative overflow-hidden mb-8",children:[n.jsx("button",{onClick:()=>d(!0),className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors text-white/80 hover:text-white z-10",children:n.jsx(Xm,{size:18})}),n.jsxs("div",{className:"flex justify-between items-start mb-8",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-white",children:"Loyalty Balance"}),n.jsxs("p",{className:"text-xs text-white flex items-center gap-1 mt-1",children:[n.jsx(fc,{size:10})," 1 pt per ",P," spent"]}),n.jsxs("p",{className:"text-xs text-white flex items-center gap-1",children:[n.jsx(sc,{size:10})," 100 pts per review"]}),n.jsxs("p",{className:"text-xs text-white flex items-center gap-1",children:[n.jsx(Ho,{size:10})," 50 pts per share"]})]}),n.jsx(or,{size:28,className:"text-pink-300 drop-shadow-[0_0_5px_rgba(236,72,153,0.8)] mr-8"})]}),n.jsxs("div",{className:"text-[22px] font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-white to-pink-200",children:[s.loyaltyPoints||0," ",n.jsx("span",{className:"text-lg font-normal opacity-80 text-white",children:"Points"})]}),n.jsx("div",{className:"mt-4 text-xs bg-black/30 p-3 rounded-lg border border-white/10",children:(s.loyaltyPoints||0)>=1e3?`You have ${r==="ZAR"?"R":"$"}${(Math.floor((s.loyaltyPoints||0)/1e3)*(r==="ZAR"?10:5)).toFixed(2)} off available for your next order!`:`${1e3-(s.loyaltyPoints||0)} more points needed for a ${r==="ZAR"?"R10":"$5"} voucher.`})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-white",children:"Partnership Program"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Earn 20% commission on referrals"})]}),n.jsx(mn,{size:28,className:"text-green-400 drop-shadow-[0_0_5px_rgba(74,222,128,0.6)]"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-black p-3 rounded-lg flex justify-between items-center border border-gray-700",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Your Referral Code"}),n.jsx("span",{className:"font-mono font-bold text-base text-cyan-400 tracking-wider",children:s.affiliateCode||"N/A"})]}),n.jsx("button",{className:"p-2 text-gray-500 hover:text-cyan-400 transition-colors",children:n.jsx(ep,{size:18})})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Total Earnings"}),n.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",(s.affiliateEarnings||0).toFixed(2)]})]}),n.jsx(Le,{to:"/affiliate-program",className:"block w-full py-2 border border-cyan-500/50 text-cyan-400 rounded-lg font-semibold hover:bg-cyan-900/30 transition-colors text-sm text-center",children:"View Dashboard"})]})]}),n.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-white",children:"Account Management"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Manage your account settings"})]}),n.jsx(bi,{size:28,className:"text-blue-400 drop-shadow-[0_0_5px_rgba(59,130,246,0.6)]"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-black p-3 rounded-lg border border-gray-700",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Account Status"}),n.jsx("span",{className:"font-medium text-green-400",children:"Active"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-xs text-gray-500 block",children:"Member Since"}),n.jsx("span",{className:"text-sm text-white",children:new Date(s.createdAt||Date.now()).toLocaleDateString()})]})]})}),n.jsx("button",{onClick:()=>h(!0),className:"w-full py-3 border border-red-500/50 text-red-400 rounded-lg font-semibold hover:bg-red-900/30 transition-colors text-sm",children:"Close Account"})]})]})]}),n.jsxs("div",{className:"pt-8 border-t border-gray-800",children:[n.jsxs("h2",{className:"text-[20px] font-bold text-white mb-6 flex items-center gap-2",children:[n.jsx(Ka,{size:20,className:"text-pink-500"})," Wishlist (",w.length,")"]}),w.length>0?n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:w.map(q=>n.jsx(Cs,{product:q},q.id))}):n.jsx("p",{className:"text-gray-500 text-sm",children:"Your wishlist is empty."})]})]})},hL=()=>{const[s,e]=S.useState(""),[t,r]=S.useState(""),[i,o]=S.useState(""),{login:c}=Ct(),d=As(),m=async h=>{h.preventDefault(),o(""),await c(s,t)?d(s==="spoilmevintagediy@gmail.com"?"/admin":"/"):o("Invalid credentials. Please check your email and password.")};return n.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:n.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-zinc-900 rounded-2xl border border-gray-800 shadow-xl",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-3xl font-handwriting font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Welcome Back"}),n.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Sign in to access your account"})]}),n.jsxs("form",{className:"space-y-6",onSubmit:m,children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(Ld,{size:18,className:"text-gray-500"})}),n.jsx("input",{type:"email",name:"email",autoComplete:"email",required:!0,value:s,onChange:h=>e(h.target.value),className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:"name@example.com"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(Wa,{size:18,className:"text-gray-500"})}),n.jsx("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,value:t,onChange:h=>r(h.target.value),className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:""})]})]})]}),i&&n.jsx("div",{className:"p-3 bg-red-900/20 border border-red-900/50 rounded-lg",children:n.jsx("p",{className:"text-sm text-red-400 text-center",children:i})}),n.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-pink-600 hover:bg-pink-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition-all hover:shadow-[0_0_15px_rgba(236,72,153,0.4)]",children:["Sign In ",n.jsx(Yt,{size:16})]})]}),n.jsx("div",{className:"text-center pt-4 border-t border-gray-800",children:n.jsxs("p",{className:"text-xs text-gray-500",children:["Don't have an account? ",n.jsx("span",{className:"text-gray-400",children:"Registration is currently invite only."})]})})]})})};/*!
 * react-paypal-js v8.9.2 (2025-10-02T20:17:55.069Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bs;(function(s){s.INITIAL="initial",s.PENDING="pending",s.REJECTED="rejected",s.RESOLVED="resolved"})(Bs||(Bs={}));var Oa;(function(s){s.LOADING_STATUS="setLoadingStatus",s.RESET_OPTIONS="resetOptions",s.SET_BRAINTREE_INSTANCE="braintreeInstance"})(Oa||(Oa={}));var rN;(function(s){s.NUMBER="number",s.CVV="cvv",s.EXPIRATION_DATE="expirationDate",s.EXPIRATION_MONTH="expirationMonth",s.EXPIRATION_YEAR="expirationYear",s.POSTAL_CODE="postalCode"})(rN||(rN={}));var Ln=function(){return Ln=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ln.apply(this,arguments)};function C2(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t}function iN(s,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return s.concat(o||Array.prototype.slice.call(e))}var Bd="data-react-paypal-script-id",Ro={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},mL="Failed to load the PayPal JS SDK script.",k2="paypal",pL="usePayPalScriptReducer must be used within a PayPalScriptProvider";function fL(s){return s===void 0&&(s=k2),window[s]}function gL(s){for(var e="",t=0;t<s.length;t++){var r=s[t].charCodeAt(0)*t;s[t+1]&&(r+=s[t+1].charCodeAt(0)*(t-1)),e+=String.fromCharCode(97+Math.abs(r)%26)}return e}function xL(s){var e=s.reactComponentName,t=s.sdkComponentKey,r=s.sdkRequestedComponents,i=r===void 0?"":r,o=s.sdkDataNamespace,c=o===void 0?k2:o,d=t.charAt(0).toUpperCase().concat(t.substring(1)),m="Unable to render <".concat(e," /> because window.").concat(c,".").concat(d," is undefined."),h=typeof i=="string"?i:i.join(",");if(!h.includes(t)){var g=[h,t].filter(Boolean).join();m+=`
To fix the issue, add '`.concat(t,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(g,"'}}>`.")}return m}function E2(s){var e=s,t=Bd;e[t];var r=C2(e,[t+""]);return"react-paypal-js-".concat(gL(JSON.stringify(r)))}function yL(s){var e=self.document.querySelector("script[".concat(Bd,'="').concat(s,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function bL(s,e){var t,r;switch(e.type){case Oa.LOADING_STATUS:return typeof e.value=="object"?Ln(Ln({},s),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):Ln(Ln({},s),{loadingStatus:e.value});case Oa.RESET_OPTIONS:return yL(s.options[Bd]),Ln(Ln({},s),{loadingStatus:Bs.PENDING,options:Ln(Ln((t={},t[Ro.DATA_SDK_INTEGRATION_SOURCE]=Ro.DATA_LIBRARY_VALUE,t),e.value),(r={},r[Bd]="".concat(E2(e.value)),r))});case Oa.SET_BRAINTREE_INSTANCE:return Ln(Ln({},s),{braintreePayPalCheckoutInstance:e.value});default:return s}}var T2=S.createContext(null);function vL(s){if(typeof(s==null?void 0:s.dispatch)=="function"&&s.dispatch.length!==0)return s;throw new Error(pL)}function wL(){var s=vL(S.useContext(T2)),e=Ln(Ln({},s),{isInitial:s.loadingStatus===Bs.INITIAL,isPending:s.loadingStatus===Bs.PENDING,isResolved:s.loadingStatus===Bs.RESOLVED,isRejected:s.loadingStatus===Bs.REJECTED});return[e,s.dispatch]}S.createContext({});function NL(s){var e=S.useRef(new Proxy({},{get:function(t,r,i){return typeof t[r]=="function"?function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return t[r].apply(t,o)}:Reflect.get(t,r,i)}}));return e.current=Object.assign(e.current,s),e.current}var $d=function(s){var e,t=s.className,r=t===void 0?"":t,i=s.disabled,o=i===void 0?!1:i,c=s.children,d=s.forceReRender,m=d===void 0?[]:d,h=C2(s,["className","disabled","children","forceReRender"]),g=o?{opacity:.38}:{},b="".concat(r," ").concat(o?"paypal-buttons-disabled":"").trim(),w=S.useRef(null),P=S.useRef(null),C=NL(h),k=wL()[0],E=k.isResolved,F=k.options,U=S.useState(null),q=U[0],Z=U[1],W=S.useState(!0),$=W[0],R=W[1],_=S.useState(null),I=_[1];function V(){P.current!==null&&P.current.close().catch(function(){})}return!((e=P.current)===null||e===void 0)&&e.updateProps&&P.current.updateProps({message:h.message}),S.useEffect(function(){if(E===!1)return V;var A=fL(F.dataNamespace);if(A===void 0||A.Buttons===void 0)return I(function(){throw new Error(xL({reactComponentName:$d.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:F.components,sdkDataNamespace:F[Ro.DATA_NAMESPACE]}))}),V;var B=function(L,ne){Z(ne),typeof h.onInit=="function"&&h.onInit(L,ne)};try{P.current=A.Buttons(Ln(Ln({},C),{onInit:B}))}catch(L){return I(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(L))})}return P.current.isEligible()===!1?(R(!1),V):(w.current&&P.current.render(w.current).catch(function(L){w.current===null||w.current.children.length===0||I(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(L))})}),V)},iN(iN([E],m,!0),[h.fundingSource],!1)),S.useEffect(function(){q!==null&&(o===!0?q.disable().catch(function(){}):q.enable().catch(function(){}))},[o,q]),Do.createElement(Do.Fragment,null,$?Do.createElement("div",{ref:w,style:g,className:b}):c)};$d.displayName="PayPalButtons";function jL(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t}function SL(s,e){var t=document.querySelector('script[src="'.concat(s,'"]'));if(t===null)return null;var r=P2(s,e),i=t.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(r.dataset).length)return null;var o=!0;return Object.keys(i.dataset).forEach(function(c){i.dataset[c]!==r.dataset[c]&&(o=!1)}),o?t:null}function _L(s){var e=s.url,t=s.attributes,r=s.onSuccess,i=s.onError,o=P2(e,t);o.onerror=i,o.onload=r,document.head.insertBefore(o,document.head.firstElementChild)}function CL(s){var e=s.sdkBaseUrl,t=s.environment,r=jL(s,["sdkBaseUrl","environment"]),i=e||TL(t),o=r,c=Object.keys(o).filter(function(h){return typeof o[h]<"u"&&o[h]!==null&&o[h]!==""}).reduce(function(h,g){var b=o[g].toString();return g=kL(g),g.substring(0,4)==="data"||g==="crossorigin"?h.attributes[g]=b:h.queryParams[g]=b,h},{queryParams:{},attributes:{}}),d=c.queryParams,m=c.attributes;return d["merchant-id"]&&d["merchant-id"].indexOf(",")!==-1&&(m["data-merchant-id"]=d["merchant-id"],d["merchant-id"]="*"),{url:"".concat(i,"?").concat(EL(d)),attributes:m}}function kL(s){var e=function(t,r){return(r?"-":"")+t.toLowerCase()};return s.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function EL(s){var e="";return Object.keys(s).forEach(function(t){e.length!==0&&(e+="&"),e+=t+"="+s[t]}),e}function TL(s){return s==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function P2(s,e){e===void 0&&(e={});var t=document.createElement("script");return t.src=s,Object.keys(e).forEach(function(r){t.setAttribute(r,e[r]),r==="data-csp-nonce"&&t.setAttribute("nonce",e["data-csp-nonce"])}),t}function PL(s,e){if(e===void 0&&(e=Promise),A2(s,e),typeof document>"u")return e.resolve(null);var t=CL(s),r=t.url,i=t.attributes,o=i["data-namespace"]||"paypal",c=aN(o);return i["data-js-sdk-library"]||(i["data-js-sdk-library"]="paypal-js"),SL(r,i)&&c?e.resolve(c):AL({url:r,attributes:i},e).then(function(){var d=aN(o);if(d)return d;throw new Error("The window.".concat(o," global variable is not available."))})}function AL(s,e){e===void 0&&(e=Promise),A2(s,e);var t=s.url,r=s.attributes;if(typeof t!="string"||t.length===0)throw new Error("Invalid url.");if(typeof r<"u"&&typeof r!="object")throw new Error("Expected attributes to be an object.");return new e(function(i,o){if(typeof document>"u")return i();_L({url:t,attributes:r,onSuccess:function(){return i()},onError:function(){var c=new Error('The script "'.concat(t,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return o(c)}})})}function aN(s){return window[s]}function A2(s,e){if(typeof s!="object"||s===null)throw new Error("Expected an options object.");var t=s.environment;if(t&&t!=="production"&&t!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var qg=function(s){var e,t=s.options,r=t===void 0?{clientId:"test"}:t,i=s.children,o=s.deferLoading,c=o===void 0?!1:o,d=S.useReducer(bL,{options:Ln(Ln({},r),(e={},e[Ro.DATA_JS_SDK_LIBRARY]=Ro.DATA_LIBRARY_VALUE,e[Ro.DATA_SDK_INTEGRATION_SOURCE]=Ro.DATA_LIBRARY_VALUE,e[Bd]="".concat(E2(r)),e)),loadingStatus:c?Bs.INITIAL:Bs.PENDING}),m=d[0],h=d[1];return S.useEffect(function(){if(c===!1&&m.loadingStatus===Bs.INITIAL)return h({type:Oa.LOADING_STATUS,value:Bs.PENDING});if(m.loadingStatus===Bs.PENDING){var g=!0;return PL(m.options).then(function(){g&&h({type:Oa.LOADING_STATUS,value:Bs.RESOLVED})}).catch(function(b){console.error("".concat(mL," ").concat(b)),g&&h({type:Oa.LOADING_STATUS,value:{state:Bs.REJECTED,message:String(b)}})}),function(){g=!1}}},[m.options,c,m.loadingStatus]),Do.createElement(T2.Provider,{value:Ln(Ln({},m),{dispatch:h})},i)};function oN(){}S.createContext({cardFieldsForm:null,fields:{},registerField:oN,unregisterField:oN});const IL=({planId:s,userId:e,onApprove:t,onError:r})=>{const i={"client-id":"Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",currency:"USD",intent:"subscription",vault:!0,components:"buttons"},o=c=>{const d=c.toLowerCase();return d.includes("insider")?"P-27V6575111695415KNE2N6OI":d.includes("gold")?"P-4KK8219436336790HNE2N7HQ":d.includes("deluxe")?"P-5D389612KP666993XNE2N7UY":(console.error("Plan ID not found for:",c),null)};return n.jsx(qg,{options:i,children:n.jsx($d,{createSubscription:(c,d)=>{const m=o(s);if(!m||m.includes("YOUR_")||m.includes("P-INSIDER"))throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID in .env file");return d.subscription.create({plan_id:m})},onApprove:(c,d)=>{console.log("PayPal subscription approved:",c),t(c)},onError:c=>{console.error("PayPal subscription error:",c),r(c)},style:{shape:"pill",color:"silver",layout:"vertical",label:"subscribe"}})})},RL="modulepreload",DL=function(s){return"/"+s},lN={},w0=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let c=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=c(t.map(h=>{if(h=DL(h),h in lN)return;lN[h]=!0;const g=h.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${b}`))return;const w=document.createElement("link");if(w.rel=g?"stylesheet":RL,g||(w.as="script"),w.crossOrigin="",w.href=h,m&&w.setAttribute("nonce",m),document.head.appendChild(w),g)return new Promise((P,C)=>{w.addEventListener("load",P),w.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},ML=({onSuccess:s})=>{const[e,t]=S.useState(!1),[r,i]=S.useState(!1),[o,c]=S.useState({email:"",password:""}),d=(h,g)=>{c(b=>({...b,[h]:g}))},m=async h=>{if(h.preventDefault(),!o.email||!o.password){alert("Please fill in all fields.");return}i(!0);try{await y_(qn,o.email,o.password),s()}catch(g){console.error("Login Error",g),alert(g.message||"Login failed. Please check your credentials.")}finally{i(!1)}};return n.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),n.jsx("input",{type:"email",value:o.email,onChange:h=>d("email",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your email",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:e?"text":"password",value:o.password,onChange:h=>d("password",h.target.value),className:"w-full px-3 py-2 pr-10 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your password",required:!0}),n.jsx("button",{type:"button",onClick:()=>t(!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-yellow-400",children:e?n.jsx(cm,{size:20}):n.jsx(nc,{size:20})})]})]}),n.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 disabled:bg-gray-600 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:r?"Signing In...":"Sign In"})]})},LL=({onSuccess:s})=>{const[e,t]=S.useState(!1),[r,i]=S.useState(!1),[o,c]=S.useState({firstName:"",lastName:"",email:"",dob:"",gender:"",favoriteColor:"",country:"",password:""}),d=(h,g)=>{c(b=>({...b,[h]:g}))},m=async h=>{if(h.preventDefault(),!o.firstName||!o.lastName||!o.email||!o.password||!o.dob||!o.gender||!o.favoriteColor||!o.country){alert("Please fill in all fields.");return}if(o.password.length<6){alert("Password must be at least 6 characters long.");return}i(!0);try{const b=(await y5(qn,o.email,o.password)).user;await jr(dt(ye,"users",b.uid),{firstName:o.firstName,lastName:o.lastName,dob:o.dob,gender:o.gender,favoriteColor:o.favoriteColor,country:o.country,email:o.email,createdAt:new Date,membershipTier:"none",role:"user",wishlist:[]}),s()}catch(g){console.error("Registration Error",g),alert(g.message||"Registration failed. Please try again.")}finally{i(!1)}};return n.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"First Name"}),n.jsx("input",{type:"text",value:o.firstName,onChange:h=>d("firstName",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"First name",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Last Name"}),n.jsx("input",{type:"text",value:o.lastName,onChange:h=>d("lastName",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Last name",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),n.jsx("input",{type:"email",value:o.email,onChange:h=>d("email",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your email",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date of Birth"}),n.jsx("input",{type:"date",value:o.dob,onChange:h=>d("dob",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Gender"}),n.jsxs("select",{value:o.gender,onChange:h=>d("gender",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0,children:[n.jsx("option",{value:"",children:"Select gender"}),n.jsx("option",{value:"male",children:"Male"}),n.jsx("option",{value:"female",children:"Female"}),n.jsx("option",{value:"other",children:"Other"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Favorite Color"}),n.jsxs("select",{value:o.favoriteColor,onChange:h=>d("favoriteColor",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",required:!0,children:[n.jsx("option",{value:"",children:"Select favorite color"}),n.jsx("option",{value:"red",children:"Red"}),n.jsx("option",{value:"blue",children:"Blue"}),n.jsx("option",{value:"green",children:"Green"}),n.jsx("option",{value:"yellow",children:"Yellow"}),n.jsx("option",{value:"purple",children:"Purple"}),n.jsx("option",{value:"pink",children:"Pink"}),n.jsx("option",{value:"orange",children:"Orange"}),n.jsx("option",{value:"black",children:"Black"}),n.jsx("option",{value:"white",children:"White"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Country"}),n.jsx("input",{type:"text",value:o.country,onChange:h=>d("country",h.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Enter your country",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:e?"text":"password",value:o.password,onChange:h=>d("password",h.target.value),className:"w-full px-3 py-2 pr-10 bg-zinc-900 border border-gray-700 rounded-md text-white focus:outline-none focus:border-yellow-500",placeholder:"Create a password",required:!0}),n.jsx("button",{type:"button",onClick:()=>t(!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-yellow-400",children:e?n.jsx(cm,{size:20}):n.jsx(nc,{size:20})})]})]}),n.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 hover:from-pink-400 hover:via-purple-400 hover:to-cyan-300 disabled:bg-gray-600 text-black font-bold py-2 px-4 rounded-md transition-all shadow-lg hover:shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:r?"Creating Account...":"Create Account"})]})},ig={insider:"P-27V6575111695415KNE2N6OI",gold:"P-4KK8219436336790HNE2N7HQ",deluxe:"P-5D389612KP666993XNE2N7UY"},cN=s=>{const e=s.toLowerCase();return e.includes("insider")?ig.insider:e.includes("gold")?ig.gold:e.includes("deluxe")?ig.deluxe:(console.error("Plan ID not found for:",s),null)},dN=async(s,e)=>{try{if(s){const r=fS(),i=dt(r,"users",s);await jr(i,{acceptedPlans:{[e]:!0}},{merge:!0});return}}catch(r){console.warn("Firestore accept save failed, falling back to localStorage",r)}const t=`accepted_terms_${s||"guest"}_${e}`;localStorage.setItem(t,"1")},uN=({plan:s,isOpen:e,onClose:t,initialView:r})=>{const{currentUser:i}=Ct(),[o,c]=S.useState(r==="auth"?"auth":"terms"),[d,m]=S.useState("register"),[h,g]=S.useState(!1),w=(E=>{const F=E.toLowerCase();return F.includes("insider")?"text-cyan-400":F.includes("gold")?"text-purple-400":F.includes("deluxe")?"text-lime-400":F.includes("spoiler")||F.includes("spoil me")?"text-cyan-400":F.includes("basic")?"text-purple-400":F.includes("premium")?"text-pink-400":"text-gold"})(s.name);S.useEffect(()=>{c(r==="auth"?"auth":"terms")},[r]),S.useEffect(()=>{c(i?"payment":"auth")},[i]),S.useEffect(()=>{i&&o==="auth"&&(console.log("User detected during auth - Auto-switching to Payment"),c("payment"))},[i,o]);const P=()=>{console.log("Auth Success Triggered - Switching to Payment"),c("payment")},C=S.useCallback(async()=>{await dN((i==null?void 0:i.uid)||null,s.id),g(!0),c("payment")},[i,s.id]),k=async(E,F)=>{await dN((i==null?void 0:i.uid)||null,s.id),t()};return e?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",children:n.jsxs("div",{className:"bg-zinc-900 border border-gold p-6 rounded-lg max-w-md w-full relative shadow-[0_0_20px_rgba(236,72,153,0.3)]",children:[n.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:""}),!i&&o==="auth"&&n.jsxs("div",{children:[n.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] mb-4 text-center",children:d==="login"?"Welcome Back":"Create Account"}),n.jsxs("p",{className:"text-gray-400 text-sm text-center mb-4",children:["You must be logged in to subscribe to the ",n.jsx("strong",{className:w,children:s.name}),"."]}),n.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[n.jsx("button",{onClick:()=>m("login"),className:`px-4 py-2 rounded-md font-bold transition-colors ${d==="login"?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Log In"}),n.jsx("button",{onClick:()=>m("register"),className:`px-4 py-2 rounded-md font-bold transition-colors ${d==="register"?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Create Account"})]}),d==="login"?n.jsx(ML,{onSuccess:P}):n.jsx(LL,{onSuccess:P})]}),o==="welcome"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl text-gold mb-4 text-center",children:"Welcome to the Club!"}),n.jsxs("p",{className:"text-gray-400 text-sm text-center mb-4",children:["Thank you for choosing to subscribe to the ",n.jsx("strong",{className:w,children:s.name})," plan."]}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 mb-6",children:[n.jsxs("div",{className:"text-center mb-2",children:[n.jsxs("span",{className:"text-3xl font-bold text-white",children:[s.currency==="USD"?"$":"R",s.amount]}),n.jsx("span",{className:"text-gray-400",children:"/month"})]}),n.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Cancel anytime"})]}),n.jsx("div",{className:"mb-4",children:n.jsx(qg,{options:{"client-id":"Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",currency:"USD",intent:"subscription",vault:!0,components:"buttons"},children:n.jsx($d,{style:{shape:"pill",color:"gold",layout:"vertical"},fundingSource:"paypal",createSubscription:(E,F)=>{const U=cN(s.name);if(!U)throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID configuration");return F.subscription.create({plan_id:U})},onApprove:k,onCancel:()=>{},onError:E=>{console.error("PayPal error",E)}})})}),n.jsx("div",{className:"text-xs text-gray-400 text-center",children:"By completing payment you accept the Terms and Conditions."})]}),o==="terms"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gold mb-2 text-center",children:"Confirm Subscription"}),i&&n.jsxs("div",{className:"text-center mb-4 text-green-400 text-sm",children:["Logged in as: ",i.email]}),n.jsxs("div",{className:"bg-black p-4 rounded border border-gray-800 h-48 overflow-y-auto mb-4 text-sm text-gray-300",children:[n.jsx("p",{children:"1. Membership fees are billed monthly..."}),n.jsx("p",{children:"2. You may cancel anytime..."})]}),n.jsx("div",{className:"flex flex-col gap-3",children:n.jsx("button",{onClick:C,className:"bg-gold text-black font-bold py-3 rounded hover:brightness-110",children:"I AGREE - PROCEED TO PAYMENT"})})]}),o==="payment"&&n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] mb-4 text-center",children:" Welcome to Spoil Me Vintage"}),n.jsx("p",{className:"text-gray-400 text-sm text-center mb-6",children:'"You deserve to be celebrated every single day."'}),n.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 mb-6 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[n.jsxs("p",{className:"text-gray-300 italic text-sm mb-2",children:["You are taking a beautiful step towards self-love. By joining the ",n.jsx("strong",{className:w,children:s.name}),", you aren't just buying jewelry; you are investing in your own happiness and confidence."]}),n.jsx("div",{className:"text-gold text-xs uppercase tracking-wider font-bold mt-2",children:" The Spoil Me Team"})]}),n.jsxs("div",{className:"mb-6 text-sm text-gray-400",children:[n.jsxs("p",{children:["You are subscribing to the ",n.jsx("strong",{className:w,children:s.name}),"."]}),n.jsxs("p",{children:["Price: ",n.jsxs("strong",{children:[s.currency==="USD"?"$":"R",s.amount," / month"]})]}),n.jsx("p",{className:"text-xs mt-1",children:"(Cancel at anytime. No hidden fees.)"})]}),n.jsx("div",{className:"w-full relative z-10",children:n.jsx(qg,{options:{"client-id":"Ac_QfTprTRIS3Abo2dMzGbDpCiw_rs9Zv5-Rhn5dgebhUj4E0hd7hG2LBaFB9iSL6k4cIt5uqmWeNC27",currency:"USD",intent:"subscription",vault:!0,components:"buttons"},children:n.jsx($d,{style:{shape:"pill",color:"gold",layout:"vertical",label:"subscribe"},fundingSource:"paypal",createSubscription:(E,F)=>{const U=cN(s.name);if(!U)throw alert("Configuration Error: Invalid Plan ID. Please contact support."),new Error("Invalid Plan ID configuration");return F.subscription.create({plan_id:U})},onApprove:k})})})]})]})}):null},zL=()=>{const{addSystemNotification:s,user:e,memberCount:t,currency:r}=Ct();As();const i={"Insider Club":"P-27V6575111695415KNE2N6OI","Gold Member":"P-4KK8219436336790HNE2N7HQ","Deluxe Vault":"P-5D389612KP666993XNE2N7UY","Deluxe Boss":"P-5D389612KP666993XNE2N7UY"},o=S.useRef(null),[c,d]=S.useState(null),[m,h]=S.useState(!1),[g,b]=S.useState(!1),[w,P]=S.useState(""),[C,k]=S.useState(!1),[E,F]=S.useState(null),[U,q]=S.useState(null),[Z,W]=S.useState(!1),[$,R]=S.useState(412),[_,I]=S.useState(500),[V,A]=S.useState(485),[B,L]=S.useState(500),[ne,pe]=S.useState(498),[Ne,Te]=S.useState(500),le=Ae=>Ae===500?750:Ae===750?1e3:Ae===1e3?1250:Ae+250;S.useEffect(()=>{$>=_-5&&I(le(_))},[$,_]),S.useEffect(()=>{V>=B-5&&L(le(B))},[V,B]),S.useEffect(()=>{ne>=Ne-5&&Te(le(Ne))},[ne,Ne]);const fe=(Ae,He)=>{const Be=Ae/He*100;let xt="bg-green-500",we=" OPEN";return Be>=95?(xt="bg-red-500 animate-pulse",we=" CRITICAL"):Be>=80&&(xt="bg-orange-500",we=" HIGH DEMAND"),{percentage:Be,color:xt,status:we}},ve=fe($,_),J=fe(V,B),K=fe(ne,Ne),X=new Date,ue=X.getMonth(),G=X.getFullYear();X.getDate(),new Date(G,ue+1,0).getDate();const se=Ae=>{Ae.currency==="USD"?i[Ae.name]?(P(Ae.name),b(!0)):alert("PayPal plan not configured for this membership."):(d({name:Ae.name,amount:Ae.amount}),setTimeout(()=>{o.current&&o.current.submit()},100))},Ie=(Ae,He)=>{q({id:Ae,name:Ae,amount:He,currency:r}),W(!0)};return n.jsxs("div",{className:"py-8 space-y-12",children:[c&&n.jsx(v0,{ref:o,amount:c.amount,itemName:`${c.name} Membership`,email:e.email,isSubscription:!0,frequency:3,cycles:0,customStr1:e.id,customStr2:"MEMBERSHIP_SIGNUP"}),g&&w&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-zinc-900 p-8 rounded-xl max-w-md w-full mx-4",children:[n.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Complete Your Subscription"}),n.jsx(IL,{planId:w,userId:e.id,onApprove:async Ae=>{console.log("PayPal subscription approved:",Ae),alert(` Subscription successful! Welcome to ${E==null?void 0:E.name}!`),window.location.reload()},onError:Ae=>{console.error("PayPal error:",Ae),alert("Payment failed. Please try again."),b(!1)}}),n.jsx("button",{onClick:()=>b(!1),className:"mt-4 w-full py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg",children:"Cancel"})]})}),C&&E&&n.jsx(uN,{isOpen:C,onClose:()=>k(!1),onAgree:()=>{h(!0),k(!1),E&&se(E)},plan:E,currentUser:e,initialView:e?"terms":"auth"}),"%       ",Z&&U&&n.jsx(uN,{plan:U,isOpen:Z,onClose:()=>W(!1),initialView:e?"terms":"auth"}),n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("h1",{className:"font-cherry text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Membership Perks"}),n.jsx("p",{className:"font-architects text-xl md:text-2xl text-gray-300 max-w-2xl mx-auto",children:"Join the Spoil Me Vintage family and unlock a world of exclusive benefits, discounts, and special gifts!"})]}),n.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 ${r==="ZAR"?"xl:grid-cols-4":"xl:grid-cols-3"} gap-8`,children:r==="ZAR"?n.jsxs(n.Fragment,{children:[n.jsxs(Le,{to:"/weekly-winners",className:"block relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[n.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-cyan-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Popular"}),n.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"Spoil Me Package"}),n.jsxs("div",{className:"text-center mb-2",children:[n.jsx("span",{className:"text-4xl font-bold text-white",children:"R19"}),n.jsx("span",{className:"text-gray-400",children:"/month"})]}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[n.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[n.jsxs("span",{children:[$," / ",_," Spots Taken"]}),n.jsxs("span",{className:`${ve.percentage>=95?"text-red-500 animate-pulse":ve.percentage>=80?"text-orange-500":"text-green-500"}`,children:[_-$," spots left"]})]}),n.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:n.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${ve.color}`,style:{width:`${ve.percentage}%`,transition:"width 1s ease-in-out"}})}),n.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Join now before the monthly International Draw!"})]}),n.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-cyan-400 shrink-0",size:16}),n.jsxs("span",{children:["Guaranteed: Get ",n.jsx("strong",{className:"text-white",children:"R25 Store Credit"})," every month."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-cyan-400 shrink-0",size:16}),n.jsxs("span",{children:["Discount: ",n.jsx("strong",{className:"text-white",children:"5% OFF"})," everything in store."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(Er,{className:"text-cyan-400 shrink-0",size:16}),n.jsxs("span",{children:["Fun: Entry into ",n.jsx("strong",{className:"text-white",children:"Weekly Giveaway"})," (Win R500 Gift Card)."]})]})]}),n.jsxs("div",{className:"mt-auto",children:[n.jsx("button",{onClick:Ae=>{Ae.preventDefault(),Ae.stopPropagation(),Ie("Spoil Me",19)},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[n.jsx(Sa,{size:12})," PayFast Secure Subscription"]})]})]}),n.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"Basic Package"}),n.jsxs("div",{className:"text-center mb-2",children:[n.jsx("span",{className:"text-4xl font-bold text-white",children:"R49"}),n.jsx("span",{className:"text-gray-400",children:"/month"})]}),n.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-purple-500 shrink-0",size:16}),n.jsxs("span",{children:["Guaranteed: Receive a ",n.jsx("strong",{className:"text-white",children:"R50 Voucher"})," every month."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-purple-500 shrink-0",size:16}),n.jsxs("span",{children:["Discount: ",n.jsx("strong",{className:"text-white",children:"20% OFF"})," entire store."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(bn,{className:"text-purple-500 shrink-0",size:16}),n.jsxs("span",{children:["Birthday: Receive a ",n.jsx("strong",{className:"text-white",children:"R100 Birthday Voucher"}),"."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(Un,{className:"text-purple-500 shrink-0",size:16}),n.jsxs("span",{children:["Bonus: ",n.jsx("strong",{className:"text-white",children:"2x Entries"})," into the Weekly Drop."]})]})]}),n.jsxs("div",{className:"mt-auto",children:[n.jsx("button",{onClick:()=>Ie("Basic",49),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[n.jsx(Sa,{size:12})," PayFast Secure Subscription"]})]})]}),n.jsxs("div",{className:"relative bg-zinc-900 border-4 border-pink-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(236, 72, 153, 0.4)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-pink-500 text-center mt-4 mb-2",children:"Premium Package"}),n.jsxs("div",{className:"text-center mb-2",children:[n.jsx("span",{className:"text-4xl font-bold text-white",children:"R99"}),n.jsx("span",{className:"text-gray-400",children:"/month"})]}),n.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-pink-500 shrink-0",size:16}),n.jsxs("span",{children:["Guaranteed: Receive a ",n.jsx("strong",{className:"text-white",children:"R100 Voucher"})," every month."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-pink-500 shrink-0",size:16}),n.jsxs("span",{children:["Discount: ",n.jsx("strong",{className:"text-white",children:"20% OFF"})," entire store."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(bn,{className:"text-pink-500 shrink-0",size:16}),n.jsx("span",{children:"Holidays: Free small gift added to orders (Valentine's Day, Mother's Day, Festive)."})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(bn,{className:"text-pink-500 shrink-0",size:16}),n.jsxs("span",{children:["Birthday: Receive a ",n.jsx("strong",{className:"text-white",children:"R150 Birthday Voucher"}),"."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-pink-500 shrink-0",size:16}),n.jsxs("span",{children:["Priority: ",n.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),n.jsxs("div",{className:"mt-auto",children:[n.jsx("button",{onClick:()=>Ie("Premium",99),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[n.jsx(Sa,{size:12})," PayFast Secure Subscription"]})]})]}),n.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[n.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[n.jsx(It,{size:14})," The Ultimate"]}),n.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:'The Deluxe "Boss" Package'}),n.jsxs("div",{className:"text-center mb-2",children:[n.jsx("span",{className:"text-4xl font-bold text-white",children:"R199"}),n.jsx("span",{className:"text-gray-400",children:"/month"})]}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6 relative overflow-hidden",children:[n.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[n.jsxs("span",{children:[ne," / ",Ne," Spots Taken"]}),n.jsxs("span",{className:`${K.percentage>=95?"text-red-500 animate-pulse":K.percentage>=80?"text-orange-500":"text-green-500"}`,children:[Ne-ne," spots left"]})]}),n.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:n.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)] ${K.color}`,style:{width:`${K.percentage}%`,transition:"width 1s ease-in-out"}})}),n.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Warning: We strictly limit Vault access to ensure stock availability. 2 spots remaining."})]}),n.jsxs("div",{className:"bg-lime-900/20 border border-lime-500/30 rounded-xl p-4 mb-6",children:[n.jsxs("h3",{className:"text-lime-400 font-bold text-sm uppercase tracking-wide mb-2 flex items-center gap-2",children:[n.jsx(It,{size:16}),' ACCESS TO "THE SECRET VAULT"']}),n.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:["Shop clearance, samples, and slight imperfections starting at ",n.jsx("strong",{className:"text-white",children:"R10"}),"."]}),n.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[n.jsx("p",{children:n.jsx("strong",{children:"The Loyalty Ladder:"})}),n.jsx("p",{children:"Month 1: Buy 5 Vault items."}),n.jsx("p",{children:"Month 2: Buy 7 Vault items."}),n.jsx("p",{children:"Month 3: Buy 10 Vault items."}),n.jsxs("p",{children:["Month 4+: ",n.jsx("strong",{className:"text-lime-400",children:"UNLIMITED ACCESS"}),"."]}),n.jsx("p",{className:"text-red-400 italic",children:"Subscription reset? Start back at Month 1."})]})]}),n.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-lime-400 shrink-0",size:16}),n.jsxs("span",{children:["Guaranteed: ",n.jsx("strong",{className:"text-white",children:"R150 Store Credit"})," every month (Rolls over)."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-lime-400 shrink-0",size:16}),n.jsxs("span",{children:["Discount: ",n.jsx("strong",{className:"text-white",children:"20% OFF"})," normal retail items."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(bn,{className:"text-lime-400 shrink-0",size:16}),n.jsxs("span",{children:["Birthday: Receive a ",n.jsx("strong",{className:"text-white",children:"R300 Voucher"}),"."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-lime-400 shrink-0",size:16}),n.jsxs("span",{children:["Priority: ",n.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),n.jsx("p",{className:"text-xs text-yellow-400 mb-4 italic",children:"Secret Vault items may include factory rejects or slight imperfections. Sold as-is."}),n.jsxs("div",{className:"mt-auto",children:[n.jsx("button",{onClick:()=>Ie("Deluxe Vault",199),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[n.jsx(Sa,{size:12})," PayFast Secure Subscription"]})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"The Insider Club"}),n.jsxs("div",{className:"text-center mb-2",children:[n.jsx("span",{className:"text-4xl font-bold text-white",children:"$5.00"}),n.jsx("span",{className:"text-gray-400",children:"/month"})]}),n.jsxs("p",{className:"text-[10px] text-cyan-300 text-center mb-6 font-semibold uppercase tracking-wide border border-cyan-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:[ve.status," (Batch 3)"]}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[n.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[n.jsxs("span",{children:[$," / ",_," Spots Taken"]}),n.jsxs("span",{className:`${ve.percentage>=95?"text-red-500 animate-pulse":ve.percentage>=80?"text-orange-500":"text-green-500"}`,children:[_-$," spots left"]})]}),n.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:n.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${ve.color}`,style:{width:`${ve.percentage}%`,transition:"width 1s ease-in-out"}})}),n.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Join now before the monthly International Draw!"})]}),n.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-cyan-400 shrink-0",size:16}),n.jsxs("span",{children:["Guaranteed: Get ",n.jsx("strong",{className:"text-white",children:"$5.00 Store Credit"})," every month."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-cyan-400 shrink-0",size:16}),n.jsxs("span",{children:["Discount: ",n.jsx("strong",{className:"text-white",children:"5% OFF"})," everything in store."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(Er,{className:"text-cyan-400 shrink-0",size:16}),n.jsxs("span",{children:["Fun: Entry into ",n.jsx("strong",{className:"text-white",children:"Weekly Giveaway"})," (Win $50 Gift Card)."]})]})]}),n.jsxs("div",{className:"mt-auto",children:[n.jsx("button",{onClick:()=>Ie("Insider Club",5),className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[n.jsx(Sa,{size:12})," PayPal Secure Subscription"]})]})]}),n.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[n.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"The Gold Member"}),n.jsxs("div",{className:"text-center mb-2",children:[n.jsx("span",{className:"text-4xl font-bold text-white",children:"$12.00"}),n.jsx("span",{className:"text-gray-400",children:"/month"})]}),n.jsx("p",{className:"text-[10px] text-purple-300 text-center mb-6 font-semibold uppercase tracking-wide border border-purple-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:J.status}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-purple-500/30 mb-6 relative overflow-hidden",children:[n.jsxs("div",{className:"flex justify-between text-xs font-bold text-purple-400 mb-1",children:[n.jsxs("span",{children:[V," / ",B," Spots Taken"]}),n.jsxs("span",{className:`${J.percentage>=95?"text-red-500 animate-pulse":J.percentage>=80?"text-orange-500":"text-green-500"}`,children:[B-V," spots left"]})]}),n.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:n.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(168,85,247,0.8)] ${J.color}`,style:{width:`${J.percentage}%`,transition:"width 1s ease-in-out"}})}),n.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Only 15 spots left at this price."})]}),n.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-purple-500 shrink-0",size:16}),n.jsxs("span",{children:["Guaranteed: Get ",n.jsx("strong",{className:"text-white",children:"$12.00 Store Credit"})," every month."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-purple-500 shrink-0",size:16}),n.jsxs("span",{children:["Discount: ",n.jsx("strong",{className:"text-white",children:"20% OFF"})," everything in store."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(bn,{className:"text-purple-500 shrink-0",size:16}),n.jsxs("span",{children:["Birthday: Receive a ",n.jsx("strong",{className:"text-white",children:"$20 Voucher"}),"."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-purple-500 shrink-0",size:16}),n.jsxs("span",{children:["Priority: ",n.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),n.jsxs("div",{className:"mt-auto",children:[n.jsx("button",{onClick:()=>Ie("Gold Member",12),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[n.jsx(Sa,{size:12})," PayPal Secure Subscription"]})]})]}),n.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[n.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[n.jsx(It,{size:14})," Top Tier"]}),n.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:'Deluxe "Vault" Access'}),n.jsxs("div",{className:"text-center mb-2",children:[n.jsx("span",{className:"text-4xl font-bold text-white",children:"$25.00"}),n.jsx("span",{className:"text-gray-400",children:"/month"})]}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6 relative overflow-hidden",children:[n.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[n.jsxs("span",{children:[ne," / ",Ne," Spots Taken"]}),n.jsxs("span",{className:`${K.percentage>=95?"text-red-500 animate-pulse":K.percentage>=80?"text-orange-500":"text-green-500"}`,children:[Ne-ne," spots left"]})]}),n.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:n.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)] ${K.color}`,style:{width:`${K.percentage}%`,transition:"width 1s ease-in-out"}})}),n.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Warning: We strictly limit Vault access to ensure stock availability. 2 spots remaining."})]}),n.jsxs("div",{className:"bg-lime-900/20 border border-lime-500/30 rounded-xl p-4 mb-6",children:[n.jsxs("h3",{className:"text-lime-400 font-bold text-sm uppercase tracking-wide mb-2 flex items-center gap-2",children:[n.jsx(It,{size:16}),' ACCESS TO "THE SECRET VAULT"']}),n.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:["Shop clearance, samples, and slight imperfections starting at ",n.jsx("strong",{className:"text-white",children:"R10"}),"."]}),n.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[n.jsx("p",{children:n.jsx("strong",{children:"The Loyalty Ladder:"})}),n.jsx("p",{children:"Month 1: Buy 5 Vault items."}),n.jsx("p",{children:"Month 2: Buy 7 Vault items."}),n.jsx("p",{children:"Month 3: Buy 10 Vault items."}),n.jsxs("p",{children:["Month 4+: ",n.jsx("strong",{className:"text-lime-400",children:"UNLIMITED ACCESS"}),"."]}),n.jsx("p",{className:"text-red-400 italic",children:"Subscription reset? Start back at Month 1."})]})]}),n.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-lime-400 shrink-0",size:16}),n.jsxs("span",{children:["Guaranteed: ",n.jsx("strong",{className:"text-white",children:"$15.00 Store Credit"})," every month (Rolls over)."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-lime-400 shrink-0",size:16}),n.jsxs("span",{children:["Discount: ",n.jsx("strong",{className:"text-white",children:"20% OFF"})," normal retail items."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(bn,{className:"text-lime-400 shrink-0",size:16}),n.jsxs("span",{children:["Birthday: Receive a ",n.jsx("strong",{className:"text-white",children:"$40 Voucher"}),"."]})]}),n.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[n.jsx(gt,{className:"text-lime-400 shrink-0",size:16}),n.jsxs("span",{children:["Priority: ",n.jsx("strong",{className:"text-white",children:"Get promotions via WhatsApp first"}),"."]})]})]}),n.jsx("p",{className:"text-xs text-yellow-400 mb-4 italic",children:"Secret Vault items may include factory rejects or slight imperfections. Sold as-is."}),n.jsxs("div",{className:"mt-auto",children:[n.jsx("button",{onClick:()=>Ie("Deluxe Vault",25),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[n.jsx(Sa,{size:12})," PayPal Secure Subscription"]})]})]})]})}),n.jsxs("div",{className:"mt-16 border-t border-gray-800 pt-12 text-center",children:[n.jsxs("h2",{className:"font-cherry text-3xl text-white flex items-center justify-center gap-3 mb-4",children:[n.jsx(bn,{className:"text-yellow-400",size:32})," Want to Earn Rewards for Free?"]}),n.jsx("p",{className:"text-gray-400 max-w-lg mx-auto mb-8",children:"You don't have to be a member to start earning. Join our social channels, leave reviews, and shop to earn points."}),n.jsxs(Le,{to:"/earn-rewards",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105",children:["Go to Rewards Hub ",n.jsx(Yt,{size:20})]}),n.jsx("br",{}),n.jsxs(Le,{to:"/vault",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105 mt-4",children:[n.jsx(It,{size:20})," Explore The Secret Vault"]}),n.jsx("div",{className:"mt-8 text-center",children:n.jsx(Le,{to:"/terms",className:"text-gray-400 hover:text-white text-sm underline",children:"View Terms & Conditions"})})]})]})},VL=()=>{var g,b,w,P,C;const{user:s,claimSocialReward:e}=Ct(),[t,r]=S.useState(!1),[i,o]=S.useState(null),[c,d]=S.useState(""),m=(k,E)=>{o({platform:k,name:E}),d("")},h=()=>{if(i){if(i.platform!=="whatsapp"&&!c.trim()){alert(`Please enter your ${i.name} username to verify.`);return}e(i.platform,c),o(null)}};return n.jsxs("div",{className:"max-w-5xl mx-auto py-8 space-y-12 relative",children:[i&&n.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>o(null)}),n.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[n.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"One Last Step!"}),n.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"To prevent fraud and secure your points, please enter your username. This allows us to verify your follow."}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:["Your ",i.name," Username"]}),n.jsxs("div",{className:"relative",children:[n.jsx(bi,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),n.jsx("input",{type:"text",value:c,onChange:k=>d(k.target.value),className:"w-full pl-10 p-3 bg-black border border-gray-700 rounded-xl text-white text-sm focus:border-pink-500 outline-none",placeholder:"@username"})]})]}),n.jsx("button",{onClick:h,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all",children:"Verify & Claim Points"})]}),n.jsx("button",{onClick:()=>o(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:n.jsx(pn,{size:20})})]})]}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 border-b border-gray-800 pb-8",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h1",{className:"font-cherry text-4xl text-white",children:"Loyalty Rewards"}),n.jsx("button",{onClick:()=>r(!0),className:"text-gray-500 hover:text-cyan-400 transition-colors",title:"How it works",children:n.jsx(Xm,{size:24})})]}),n.jsx("p",{className:"text-gray-400 text-lg max-w-xl",children:"Complete simple tasks to earn points and unlock discounts on your next vintage treasure."})]}),n.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-purple-500/30 min-w-[250px] text-center shadow-[0_0_20px_rgba(168,85,247,0.15)] relative group",children:[n.jsx("div",{className:"absolute inset-0 bg-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl"}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("div",{className:"text-sm text-gray-400 uppercase tracking-wider mb-1 font-semibold",children:"Your Balance"}),n.jsx("div",{className:"text-5xl font-bold text-white mb-2 font-mono tracking-tight",children:s.loyaltyPoints}),n.jsx("div",{className:"text-xs text-purple-400 font-bold bg-purple-900/20 py-1 px-3 rounded-full w-fit mx-auto",children:"Points Available"})]})]})]}),t&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>r(!1)}),n.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[n.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:n.jsx(pn,{size:20})}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:n.jsx(or,{size:24})}),n.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),n.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",n.jsx("span",{className:"text-green-400",children:"1 Point for every R10"})," spent."]}),n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",n.jsx("span",{className:"text-green-400",children:"100 Points"})," for verified reviews."]}),n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",n.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing."]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",n.jsx("span",{className:"text-white font-bold",children:"R1.00 Discount"}),"."]}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum redemption is 1000 Points (R10)."})]})]}),n.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[n.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[n.jsx(or,{size:14})," Membership Rule"]}),n.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",n.jsx("strong",{children:"R100 (10,000 pts)"})," per order. To redeem more, you must be a ",n.jsx(Le,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),n.jsx("button",{onClick:()=>r(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[n.jsx(bn,{className:"text-yellow-400"})," Quick Earn: Social Media"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-pink-500 transition-all",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-pink-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),n.jsx("div",{className:"w-16 h-16 bg-black border border-pink-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(236,72,153,0.4)] relative z-10",children:n.jsx(Wi,{size:32,className:"text-pink-500"})}),n.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"TikTok"}),n.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Get exclusive clips & flash sales."}),(g=s.socialRewards)!=null&&g.tiktok?n.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[n.jsx(gt,{size:18})," 100 Pts Claimed"]}):n.jsxs("button",{onClick:()=>m("tiktok","TikTok"),className:"mt-auto w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[n.jsx(Aa,{size:16})," Join & Earn 100"]})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-blue-500 transition-all",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),n.jsx("div",{className:"w-16 h-16 bg-black border border-blue-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(59,130,246,0.4)] relative z-10",children:n.jsx(xd,{size:32,className:"text-blue-500"})}),n.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Facebook"}),n.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Join our community group."}),(b=s.socialRewards)!=null&&b.facebook?n.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[n.jsx(gt,{size:18})," 100 Pts Claimed"]}):n.jsxs("button",{onClick:()=>m("facebook","Facebook"),className:"mt-auto w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(59,130,246,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[n.jsx(Aa,{size:16})," Join & Earn 100"]})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-white/20 transition-all",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),n.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:n.jsx(Lh,{size:32,className:"text-white"})}),n.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Twitter"}),n.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"News and polls."}),(w=s.socialRewards)!=null&&w.twitter?n.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[n.jsx(gt,{size:18})," 100 Pts Claimed"]}):n.jsxs("button",{onClick:()=>m("twitter","Twitter"),className:"mt-auto w-full py-3 bg-gray-700 hover:bg-gray-600 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(255,255,255,0.2)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[n.jsx(Aa,{size:16})," Join & Earn 100"]})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-green-500/30 transition-all",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-green-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),n.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:n.jsx(sc,{size:32,className:"text-green-500"})}),n.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"WhatsApp"}),n.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Instant drop notifications."}),(P=s.socialRewards)!=null&&P.whatsapp?n.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[n.jsx(gt,{size:18})," 100 Pts Claimed"]}):n.jsxs("button",{onClick:()=>e("whatsapp"),className:"mt-auto w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(34,197,94,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[n.jsx(Aa,{size:16})," Join & Earn 100"]})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-red-500/30 transition-all",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-red-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),n.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:n.jsx("svg",{width:32,height:32,className:"text-red-500",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,children:n.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.75.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.747-1.378 0 0-.599 2.282-.744 2.84-.282 1.084-1.064 2.456-1.549 3.235C9.584 23.815 10.77 24.001 12.017 24.001c6.624 0 11.99-5.367 11.99-11.987C24.007 5.367 18.641.001 12.017.001z"})})}),n.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Pinterest"}),n.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Visual inspiration board."}),(C=s.socialRewards)!=null&&C.pinterest?n.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[n.jsx(gt,{size:18})," 100 Pts Claimed"]}):n.jsxs("button",{onClick:()=>m("pinterest","Pinterest"),className:"mt-auto w-full py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(239,68,68,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[n.jsx(Aa,{size:16})," Join & Earn 100"]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-8 border-t border-gray-800",children:[n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[n.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:n.jsx(fc,{className:"text-cyan-400",size:24})}),n.jsx("h3",{className:"text-lg font-bold text-white",children:"Shop & Earn"}),n.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 1 point for every R10 you spend on any purchase automatically."}),n.jsx(Le,{to:"/",className:"text-cyan-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Start Shopping"})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-yellow-500/30 transition-colors",children:[n.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:n.jsx(dr,{className:"text-yellow-400",size:24})}),n.jsx("h3",{className:"text-lg font-bold text-white",children:"Review Products"}),n.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 100 points for every verified review you leave on items you've bought."}),n.jsx(Le,{to:"/profile",className:"text-yellow-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Check Pending Reviews"})]})]})]})},OL=({isOpen:s,onClose:e})=>{const{user:t,updateUser:r}=Ct(),[i,o]=S.useState(null),[c,d]=S.useState(!1),m=async()=>{if(i){d(!0);try{await r({affiliateCurrency:i,currencyLocked:!0}),e()}catch(h){console.error("Error saving currency:",h)}finally{d(!1)}}};return s?n.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/95 backdrop-blur-xl",children:n.jsxs("div",{className:"bg-zinc-900 border border-pink-500/50 rounded-2xl p-8 max-w-md w-full shadow-[0_0_50px_rgba(236,72,153,0.3)] animate-in zoom-in-95 duration-300",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-pink-900/20 border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(mn,{size:32,className:"text-pink-400"})}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Choose Your Earning Currency"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"This choice determines how you receive commissions and cannot be changed later."})]}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsx("button",{onClick:()=>o("ZAR"),className:`w-full p-4 rounded-xl border transition-all ${i==="ZAR"?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-green-900/20 rounded-full flex items-center justify-center",children:n.jsx(zd,{size:16,className:"text-green-400"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-bold",children:" South African Rand (ZAR)"}),n.jsx("div",{className:"text-xs text-gray-400",children:"EFT Bank Transfer Payouts"})]}),i==="ZAR"&&n.jsx(Go,{size:20,className:"text-green-400 ml-auto"})]})}),n.jsx("button",{onClick:()=>o("USD"),className:`w-full p-4 rounded-xl border transition-all ${i==="USD"?"bg-blue-900/20 border-blue-500 text-blue-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-900/20 rounded-full flex items-center justify-center",children:n.jsx(zd,{size:16,className:"text-blue-400"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-bold",children:" US Dollar (USD)"}),n.jsx("div",{className:"text-xs text-gray-400",children:"PayPal Payouts"})]}),i==="USD"&&n.jsx(Go,{size:20,className:"text-blue-400 ml-auto"})]})})]}),n.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-4 rounded-lg mb-6",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Cr,{size:20,className:"text-yellow-500 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-yellow-400 font-bold text-sm mb-1",children:"Permanent Choice"}),n.jsx("p",{className:"text-yellow-300 text-xs",children:"Once selected, your currency cannot be changed. Choose based on your payout preferences."})]})]})}),n.jsx("button",{onClick:m,disabled:!i||c,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all shadow-lg",children:c?"Saving...":"Confirm Currency Choice"})]})}):null},FL=()=>{const{user:s,affiliateLeaderboard:e,applyForAffiliate:t,buyAffiliateContent:r,joinAffiliateElite:i,register:o,login:c,getAllUsers:d,currency:m}=Ct(),[h,g]=S.useState(!1),[b,w]=S.useState(1),[P,C]=S.useState(!1),[k,E]=S.useState(!1),[F,U]=S.useState({name:s&&s.name&&s.name!=="Guest"?s.name.split(" ")[0]:"",surname:s&&s.name&&s.name!=="Guest"?s.name.split(" ").slice(1).join(" "):"",email:(s==null?void 0:s.email)||"",dob:(s==null?void 0:s.birthday)||"",gender:"",reason:"",socials:"",password:""}),[q,Z]=S.useState(!1),[W,$]=S.useState(!1),[R,_]=S.useState(!1),[I,V]=S.useState(!1),[A,B]=S.useState(""),[L,ne]=S.useState(""),[pe,Ne]=S.useState({}),[Te,le]=S.useState(!1),[fe,ve]=S.useState([]),[J,K]=S.useState(!1);S.useEffect(()=>{var _e,qe,Vt;((_e=s.affiliateStats)==null?void 0:_e.status)==="pending"&&E(!0),((qe=s.affiliateStats)==null?void 0:qe.status)==="approved"&&d().then(xe=>{const mt=xe.filter(kt=>{var Dt;return((Dt=kt.affiliateStats)==null?void 0:Dt.parentId)===s.id});ve(mt)}),((Vt=s.affiliateStats)==null?void 0:Vt.status)==="approved"&&!s.currencyLocked&&K(!0)},[s.affiliateStats,s.id,s.currencyLocked,d]);const X=S.useMemo(()=>[{title:"1. Introduction",content:'These Terms and Conditions ("Agreement") govern your participation in the Spoil Me Vintage Partnership Program ("Program"). By enrolling in the Program, you agree to be bound by these terms.'},{title:"2. Definitions",content:'"Partner", "You", and "Your" refer to the individual or entity applying for or participating in the Program. "We", "Us", and "Our" refer to Spoil Me Vintage. "Commission" refers to the amount paid for a successful referral. "Net Sales" refers to the final sale price of a product EXCLUDING shipping costs, customs duties, taxes (VAT), and any refunds.'},{title:"3. Enrollment",content:"To begin the enrollment process, you must submit a complete Partnership Application. We will evaluate your application and notify you of your acceptance or rejection. We reserve the right to reject applications from sites or profiles that do not meet our brand standards."},{title:"4. Affiliate Links",content:"You will be issued a unique Affiliate URL or code. Sales must be tracked via these links to generate commission. We use a 30-day cookie window. It is your responsibility to ensure that these links are correctly formatted and used on your site."},{title:"5. Commissions & Earnings",content:'You will earn commissions based on the specific product category sold: 5.1. Standard Jewelry: Earn 10% to 20% on Net Sales based on your monthly performance tier. 5.2. "Secret Vault" Items: Due to the clearance pricing of Vault items, these sales earn a flat 1% Commission regardless of your tier. 5.3. Memberships: Earn a fixed monthly recurring commission (ZAR R2-R15 or USD $1-$3) for active, paid subscriptions. 5.4. Override: Earn a 1% bonus on Net Sales generated by partners you directly recruit.'},{title:"6. Payment Terms & Currency",content:"Commissions are paid once a month. 6.1. South African Partners: Paid via EFT to a valid SA Bank Account. International earnings (USD) are converted to ZAR at the bank rate. Minimum payout: R200. 6.2. International Partners: Paid via PayPal in USD. South African earnings (ZAR) are converted to USD at the bank rate. Minimum payout: $50."},{title:'7. "Secret Vault" Items',content:'This section strictly governs the purchase of discounted items from the "Secret Vault." 7.1. Nature of Goods ("Sold As-Is"): Items listed in "The Secret Vault" (priced from R10 / $1) may include: Factory overstock, Sample items, Items with minor cosmetic imperfections ("Rejects" or "Seconds"). ALL SALES FROM THE SECRET VAULT ARE FINAL. NO RETURNS, REFUNDS, OR EXCHANGES ARE PERMITTED ON THESE ITEMS. 7.2. The "Loyalty Ladder" & Purchase Limits: To prevent resale abuse, purchase limits apply to The Secret Vault based on consecutive months of membership: Month 1: Maximum 5 items, Month 2: Maximum 7 items, Month 3: Maximum 10 items, Month 4+: Unlimited. 7.3. The "Reset Rule" (Strict Enforcement): Membership continuity is required to maintain your "Loyalty Ladder" status. If you cancel your subscription or if your payment fails and is not rectified within 48 hours, your Loyalty Ladder status RESETS TO MONTH 1.'},{title:"8. Competitions & Weekly Drops",content:'8.1. Promotional Competition: The "Spoil Me" package (R19) includes entry into giveaways. This is a promotional competition under the South African Consumer Protection Act (CPA), not a lottery. You are paying for the Membership Services (Sales alerts, Vouchers), and the entry is a complimentary benefit. 8.2. International Winners: If a winner is selected from outside South Africa: Physical prizes may be converted to Store Credit of equivalent value to avoid shipping fees. If the winner requests the physical item, the winner is responsible for all international shipping costs and customs duties.'},{title:"9. International Orders & Shipping",content:"9.1. Customs, Duties, and Taxes: DDU (Delivered Duty Unpaid): For all international orders (outside South Africa), Spoil Me Vintage is NOT responsible for any customs fees, import duties, or local taxes. These fees are the sole responsibility of the customer. If you refuse to pay customs fees and the package is returned to us, we will deduct the return shipping costs from any potential refund. 9.2. Shipping Times: International shipping times are estimates (typically 10-25 business days). We are not liable for delays caused by customs departments or global logistics strikes."},{title:"10. Returns and Refunds",content:"10.1. Standard Products (Non-Vault): South Africa: You may return unused, undamaged standard jewelry within 7 days of receipt for a store credit or exchange, in accordance with the CPA. International: Due to high shipping costs, international returns are generally not accepted unless the item arrived damaged. Evidence (photos) must be provided within 24 hours of delivery. 10.2. Non-Returnable Items: The following items are final sale and cannot be returned: Earrings (for hygiene reasons), Secret Vault Items, Customized or personalized jewelry."},{title:"11. Limitation of Liability",content:"To the fullest extent permitted by law, Spoil Me Vintage shall not be liable for: Allergic Reactions: Our jewelry materials are listed on the product page. It is the customer's responsibility to verify they are not allergic to metals (e.g., nickel, copper, alloys) before wearing. We are not liable for skin reactions. Indirect Damages: Any indirect, incidental, or consequential damages arising from the use of our products or website. Maximum Liability: In no event shall our total liability to you exceed the amount you paid to us in the 3 months preceding the claim."},{title:"12. Payment Terms",content:"Payments are processed securely via third-party providers (e.g., PayFast, Stripe, Yoco). Spoil Me Vintage does not store your full credit card details. By subscribing, you authorize us to charge your payment method automatically every month until you cancel."},{title:"13. Governing Law and Dispute Resolution",content:"These Terms are governed by the laws of the Republic of South Africa. Any disputes arising from these Terms shall be subject to the exclusive jurisdiction of the Magistrate's Court in Worcester, Western Cape. For International customers, you agree to waive any right to class action lawsuits and agree to resolve disputes through binding arbitration in South Africa, or via amicable email resolution."},{title:"14. Commission Rates & Exceptions",content:'14.1. Standard Products: Commission rates (10% - 20%) apply to all full-priced, standard retail jewelry items based on your monthly performance tier. 14.2. "Secret Vault" Items: Items purchased from "The Secret Vault" (Clearance/Sample stock) are sold at near-cost prices. Therefore, all Vault items earn a flat 1% commission, regardless of your current Tier status. 14.3. Shipping & Taxes: Commissions are calculated on the Net Product Price only. Shipping fees, taxes, and duties are excluded from all calculations. 14.4. Payouts: South Africa: Paid via EFT (ZAR). International earnings converted to ZAR. International: Paid via PayPal (USD). South African earnings converted to USD.'},{title:"15. CONTACT US",content:"For questions regarding these Terms, please contact us at: Email: spoilmevintagediy@gmail.com WhatsApp: +27 71858 9370"}],[]),ue=X.length>0&&X.every((_e,qe)=>pe[qe]),G=async _e=>{var Vt;if(_e.preventDefault(),ne(""),await c(F.email,A)){V(!1),w(2);const mt=(await d()).find(kt=>kt.email.toLowerCase()===F.email.toLowerCase());((Vt=mt==null?void 0:mt.affiliateStats)==null?void 0:Vt.status)==="approved"&&(g(!1),setTimeout(()=>{var kt;return(kt=document.getElementById("affiliate-dashboard"))==null?void 0:kt.scrollIntoView({behavior:"smooth"})},500))}else ne("Invalid password. Please try again.")},se=async _e=>{if(_e.preventDefault(),!F.reason.trim()||!q)return;const qe={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},Vt={status:"pending",gender:F.gender,joinReason:`${F.reason} | Socials: ${F.socials}`,totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1};if(s.email)await t(F),_(!0);else{if(!F.email||!F.password){alert("Please provide email and password to create your account.");return}if((await d()).find(Dt=>Dt.email.toLowerCase()===F.email.toLowerCase())){V(!0),ne("This email address is already associated with an account. Please Log In to continue your application.");return}if(!await o({name:`${F.name} ${F.surname}`,email:F.email,password:F.password,birthday:F.dob,notifications:[qe],affiliateStats:Vt})){alert("Failed to create account. Please try again.");return}_(!0)}},Ie=()=>{g(!1),_(!1),w(1),$(!1),Z(!1),Ne({}),V(!1),B(""),ne("")},Ae=async()=>{window.confirm("Purchase the Partner Content Pack for R250?")&&(await r(),alert("Content Unlocked!"))},He=async()=>{window.confirm("Upgrade to Elite Partner Status? A fee applies.")&&(await i(),alert("Welcome to the Elite Squad!"))},Be=()=>{Z(!0),C(!1)},xt=_e=>{Ne(qe=>({...qe,[_e]:!qe[_e]}))},we=()=>{const _e=`${window.location.origin}/#/?ref=${s.affiliateCode}`;navigator.clipboard.writeText(_e),le(!0),setTimeout(()=>le(!1),2e3)},We=s.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,isElite:!1},at=We.status==="approved",bt=[{name:"Bronze",rate:10,min:0,max:m==="ZAR"?2e3:200},{name:"Silver",rate:11,min:m==="ZAR"?2001:201,max:m==="ZAR"?5e3:500},{name:"Gold",rate:15,min:m==="ZAR"?5001:501,max:m==="ZAR"?1e4:1e3},{name:"Platinum",rate:20,min:m==="ZAR"?10001:1001,max:m==="ZAR"?25e3:2500}],z=bt.find(_e=>We.totalSalesValue>=_e.min&&We.totalSalesValue<=_e.max)||bt[0],re=bt.indexOf(z);let $e=null;return re<bt.length-1&&($e=bt[re+1],$e.min-z.min,We.totalSalesValue-z.min),n.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-16",children:[n.jsx("style",{children:`
            @keyframes marquee {
                0% { transform: translateX(100%); }
                100% { transform: translateX(-100%); }
            }
            .animate-marquee {
                animation: marquee 20s linear infinite;
            }
        `}),n.jsxs("div",{className:"relative rounded-3xl overflow-hidden bg-zinc-900 border border-pink-500/30 min-h-[400px] flex items-center",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-zinc-900/90 to-transparent z-10"}),n.jsx("div",{className:"absolute right-0 top-0 h-full w-1/2 bg-[url('https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80')] bg-cover bg-center opacity-40 grayscale mix-blend-luminosity"}),n.jsxs("div",{className:"relative z-20 p-8 md:p-16 max-w-2xl space-y-6",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-1.5 rounded-full text-sm font-bold uppercase tracking-wider",children:[n.jsx(Od,{size:16})," Join the Team"]}),n.jsx("h1",{className:"font-cherry text-5xl md:text-7xl text-white leading-none drop-shadow-[0_0_15px_rgba(236,72,153,0.6)]",children:"Turn Passion into Profit"}),n.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:m==="ZAR"?"Join the Spoil Me Team. Earn up to 20% Commission + Monthly Recurring Rands.":"Join the Spoil Me Team. Earn up to 20% Commission + Monthly Recurring Cash."}),!at&&We.status!=="pending"&&n.jsxs("button",{onClick:()=>g(!0),className:"px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.4)] flex items-center gap-2",children:[m==="ZAR"?"JOIN THE TEAM (ZA)":"JOIN THE TEAM (GLOBAL)"," ",n.jsx(Yt,{size:20})]}),We.status==="pending"&&n.jsxs("button",{onClick:()=>E(!0),className:"inline-flex items-center gap-2 bg-yellow-900/20 border border-yellow-500/30 text-yellow-400 px-6 py-3 rounded-lg font-bold hover:bg-yellow-900/40 transition-colors",children:[n.jsx(qr,{size:18})," Check Application Status"]}),at&&n.jsxs("button",{onClick:()=>{var _e;return(_e=document.getElementById("affiliate-dashboard"))==null?void 0:_e.scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 bg-green-600 text-white font-bold rounded-full hover:bg-green-500 transition-all shadow-[0_0_20px_rgba(34,197,94,0.4)] flex items-center gap-2",children:["Go to Dashboard ",n.jsx(Yt,{size:20})]})]})]}),n.jsxs("div",{className:`overflow-hidden bg-zinc-900/50 border border-gray-800 rounded-2xl p-4 ${m==="ZAR"?"view-zar":"view-usd"}`,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Er,{className:"text-yellow-500",size:20}),n.jsx("span",{className:"text-sm font-bold text-white",children:"Recent Partner Success"})]}),n.jsx("div",{className:"overflow-hidden",children:n.jsx("div",{className:"animate-marquee whitespace-nowrap",children:m==="ZAR"?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Sarah J. (Pretoria) earned R450..."}),n.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Thandi M. (JHB) hit Gold Tier..."}),n.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Lerato K. (Durban) earned R2,000..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Emily R. (Texas) earned $50..."}),n.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Mike T. (London) hit Gold Tier..."}),n.jsx("span",{className:"inline-block mx-4 text-gray-300",children:" Jessica L. (NY) earned $120..."})]})})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[n.jsx("div",{className:"w-16 h-16 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto mb-4 text-green-500 font-bold text-xl shadow-[0_0_15px_rgba(34,197,94,0.3)]",children:"1"}),n.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sign Up & Share"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Apply to become a partner. Once approved, share your unique code to start earning."})]}),n.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[n.jsx("div",{className:"w-16 h-16 bg-black border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 text-pink-500 font-bold text-xl shadow-[0_0_15px_rgba(236,72,153,0.3)]",children:"2"}),n.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Recruit & Earn"}),n.jsxs("p",{className:"text-gray-400 text-sm",children:["Invite others to join your team. You earn a ",n.jsx("strong",{children:"1% commission"})," on their sales forever!"]})]}),n.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[n.jsx("div",{className:"w-16 h-16 bg-black border-2 border-purple-500 rounded-full flex items-center justify-center mx-auto mb-4 text-purple-500 font-bold text-xl shadow-[0_0_15px_rgba(168,85,247,0.3)]",children:"3"}),n.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Get Paid"}),n.jsx("p",{className:"text-gray-400 text-sm",children:m==="ZAR"?"We payout commissions monthly via EFT to your South African bank account.":"We pay you monthly in USD via PayPal. Fast and secure."})]})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Earning Potential"}),n.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"See what successful partners are earning with our tiered commission structure."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:n.jsx(mn,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-white",children:"Passive Income"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Recruit 10 Deluxe Members"})]})]}),n.jsx("div",{className:"text-2xl font-bold text-green-400 mb-2",children:m==="ZAR"?"R150/month":"$30/month"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Earn recurring commissions on their monthly subscriptions forever."})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-3 bg-yellow-900/20 rounded-lg text-yellow-400",children:n.jsx(Er,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-white",children:"Weekly Bonus"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Hit the milestone"})]})]}),n.jsx("div",{className:"text-2xl font-bold text-yellow-400 mb-2",children:m==="ZAR"?"R200 Cash":"$15 Cash"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Weekly cash bonuses for reaching sales targets."})]})]})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Partner Success Stories"}),n.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Real partners sharing their experiences with the Spoil Me program."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-pink-900/20 rounded-full flex items-center justify-center text-pink-400 font-bold",children:"L"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-white",children:"Lerato, Johannesburg"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Started 6 months ago"})]})]}),n.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:'"I shared my link on WhatsApp status. My first month I made R2,000 extra cash. The EFT was on time and easy to receive."'})]}),n.jsxs("div",{className:`bg-zinc-900 p-6 rounded-2xl border border-gray-800 ${m==="USD"?"block":"hidden"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-cyan-900/20 rounded-full flex items-center justify-center text-cyan-400 font-bold",children:"J"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-white",children:"Jessica, Texas"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Active partner"})]})]}),n.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:'"The recurring commission covers my own jewelry addiction! I love getting paid in USD via PayPal."'})]})]})]}),at&&n.jsxs("div",{id:"affiliate-dashboard",className:"space-y-8 animate-in slide-in-from-bottom-10 duration-700 pt-8 border-t border-gray-800",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Your Partnership Dashboard"}),n.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",s&&s.name?s.name.split(" ")[0]:"Partner","! Manage your links and earnings."]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Le,{to:"/affiliate/store-builder",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white rounded-lg text-sm font-bold flex items-center gap-2",children:[n.jsx(Od,{size:16})," Build Store"]}),n.jsxs("button",{onClick:Ae,className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg text-sm border border-gray-700 flex items-center gap-2",children:[n.jsx(o2,{size:16})," Content Assets"]}),!We.isElite&&n.jsxs("button",{onClick:He,className:"px-4 py-2 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:brightness-110",children:[n.jsx(It,{size:16})," Go Elite"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:n.jsx(mn,{size:24})}),n.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Total Earnings"})]}),n.jsxs("div",{className:"text-3xl font-bold text-white",children:["R",We.balance.toFixed(2)]}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Next payout date: 1st of month"})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:n.jsx(ks,{size:24})}),n.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Direct Sales"})]}),n.jsx("div",{className:"text-3xl font-bold text-white",children:We.totalSalesCount}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Value: R",We.totalSalesValue.toFixed(0)]})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:n.jsx(dr,{size:24})}),n.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Current Rate"})]}),n.jsxs("div",{className:"text-3xl font-bold text-white",children:[We.commissionRate,"%"]}),n.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:["Tier: ",z.name]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[n.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(Ho,{size:20,className:"text-pink-500"})," Your Referral Link"]}),n.jsx("div",{className:"bg-black p-4 rounded-xl border border-gray-700 flex flex-col gap-3",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[n.jsxs("code",{className:"flex-1 text-cyan-400 text-sm break-all font-mono bg-zinc-900/50 p-3 rounded border border-gray-800 w-full",children:[window.location.origin,"/#/?ref=",s.affiliateCode]}),n.jsxs("button",{onClick:we,className:"w-full md:w-auto px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg transition-colors flex items-center justify-center gap-2 border border-gray-600",children:[Te?n.jsx(gt,{size:14}):n.jsx(ep,{size:14}),Te?"Copied!":"Copy Link"]})]})}),n.jsx("div",{className:"mt-4 bg-pink-900/20 p-3 rounded-lg border border-pink-500/20",children:n.jsxs("p",{className:"text-xs text-pink-300",children:[n.jsx("strong",{children:"Tip:"})," Customers get ",n.jsx("strong",{children:"5% OFF"})," when using your code ",n.jsx("code",{children:s.affiliateCode})," at checkout!"]})})]}),n.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-cyan-500/30 relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:n.jsx(m2,{size:80,className:"text-cyan-500"})}),n.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 relative z-10",children:[n.jsx(ks,{size:20,className:"text-cyan-400"})," Recruitment Center"]}),n.jsx("div",{className:"bg-cyan-900/20 border border-cyan-500/30 p-4 rounded-xl mb-6 relative z-10",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-full text-cyan-400 shrink-0",children:n.jsx(mn,{size:16})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-white",children:"Earn 1% Override Commission"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Recruit new affiliates and earn 1% of their sales volume forever. No impact on their earnings!"})]})]})}),n.jsxs("div",{className:"space-y-3 relative z-10",children:[n.jsxs("h4",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:["My Recruits (",fe.length,")"]}),fe.length>0?n.jsx("div",{className:"max-h-[150px] overflow-y-auto pr-2 space-y-2 custom-scrollbar",children:fe.map(_e=>{var qe;return n.jsxs("div",{className:"flex justify-between items-center p-2 bg-black/40 rounded border border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 bg-zinc-800 rounded-full flex items-center justify-center text-[10px] text-gray-400 border border-gray-700",children:_e.name?_e.name.charAt(0):"?"}),n.jsx("span",{className:"text-xs text-gray-300",children:_e.name})]}),n.jsxs("span",{className:"text-xs text-green-400 font-mono",children:["Sales: R",(qe=_e.affiliateStats)==null?void 0:qe.totalSalesValue.toFixed(0)]})]},_e.id)})}):n.jsx("div",{className:"text-center py-4 border border-dashed border-gray-800 rounded-lg",children:n.jsx("p",{className:"text-xs text-gray-500",children:"No recruits yet. Start building your team!"})})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 relative z-10",children:[n.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"Share your recruitment link:"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("code",{className:"flex-1 bg-black p-2 rounded text-[10px] text-gray-400 truncate border border-gray-800",children:[window.location.origin,"/#/?ref=",s.affiliateCode]}),n.jsx("button",{onClick:we,className:"text-xs text-cyan-400 hover:text-cyan-300 font-bold",children:"Copy"})]})]})]})]})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Commission Tiers"}),n.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Your commission rate increases based on your all-time sales performance."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:bt.map((_e,qe)=>n.jsx("div",{className:`p-6 rounded-2xl border transition-all ${z.name===_e.name?"bg-gradient-to-br from-yellow-900/20 to-orange-900/20 border-yellow-500/50 shadow-[0_0_20px_rgba(234,179,8,0.2)]":"bg-zinc-900 border-gray-800"}`,children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full mb-3 ${z.name===_e.name?"bg-yellow-500 text-black":"bg-zinc-800 text-gray-400"}`,children:n.jsx(or,{size:20})}),n.jsx("h3",{className:`text-lg font-bold mb-1 ${z.name===_e.name?"text-yellow-400":"text-white"}`,children:_e.name}),n.jsxs("div",{className:`text-2xl font-bold mb-2 ${z.name===_e.name?"text-yellow-400":"text-gray-300"}`,children:[_e.rate,"%"]}),n.jsx("p",{className:"text-xs text-gray-500",children:m==="ZAR"?`R${_e.min.toLocaleString()} - ${_e.max===1/0?"":"R"+_e.max.toLocaleString()}`:`$${_e.min.toLocaleString()} - ${_e.max===1/0?"":"$"+_e.max.toLocaleString()}`})]})},_e.name))})]}),P&&n.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-xl",onClick:()=>!ue&&C(!1)}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-3xl w-full relative z-20 shadow-2xl h-[90vh] flex flex-col animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-800",children:[n.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[n.jsx(Gw,{size:20,className:"text-pink-500"})," Terms & Conditions"]}),n.jsx("button",{onClick:()=>C(!1),className:"text-gray-500 hover:text-white",children:n.jsx(pn,{size:20})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-8 pr-4",children:[n.jsx("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-4 rounded-lg mb-6 text-yellow-200 text-sm",children:"Please read each section carefully. You must acknowledge each section to proceed."}),X.map((_e,qe)=>n.jsxs("div",{className:"bg-black/30 rounded-xl p-5 border border-gray-800 hover:border-gray-700 transition-colors",children:[n.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:_e.title}),n.jsx("div",{className:"text-sm text-gray-400 leading-relaxed whitespace-pre-wrap font-sans mb-4 pl-2 border-l-2 border-gray-700",children:_e.content}),n.jsxs("label",{className:`flex items-center gap-3 cursor-pointer p-3 rounded-lg transition-all ${pe[qe]?"bg-green-900/20 border border-green-500/30":"bg-zinc-800/50 border border-gray-700 hover:bg-zinc-800"}`,children:[n.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${pe[qe]?"bg-green-500 border-green-500 text-black":"bg-black border-gray-600 text-transparent"}`,children:n.jsx(gt,{size:14,strokeWidth:4})}),n.jsx("input",{type:"checkbox",className:"hidden",checked:!!pe[qe],onChange:()=>xt(qe)}),n.jsxs("span",{className:`text-sm font-bold ${pe[qe]?"text-green-400":"text-gray-400"}`,children:["I have read and agree to the ",_e.title]})]})]},qe))]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 flex justify-between items-center",children:[n.jsxs("div",{className:"text-xs text-gray-500",children:[Object.values(pe).filter(Boolean).length," of ",X.length," sections agreed"]}),n.jsxs("button",{onClick:Be,disabled:!ue,className:"px-8 py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg",children:[ue?n.jsx(gt,{size:18}):n.jsx(Wa,{size:18}),ue?"Confirm Agreement":"Agree to All Sections to Continue"]})]})]})]}),k&&n.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>E(!1)}),n.jsxs("div",{className:"bg-zinc-900 border border-yellow-500/50 rounded-2xl p-8 max-w-md w-full relative z-20 shadow-[0_0_50px_rgba(234,179,8,0.2)] animate-in zoom-in-95 duration-200 text-center",children:[n.jsx("div",{className:"w-20 h-20 bg-yellow-900/20 border-2 border-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:n.jsx(qr,{size:40,className:"text-yellow-500"})}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Under Review"}),n.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed mb-6",children:["Thank you for applying to the Spoil Me Vintage Partnership Program. ",n.jsx("br",{}),n.jsx("br",{}),"Our team is currently reviewing your application details. This process typically takes ",n.jsx("strong",{children:"24-48 hours"}),"."]}),n.jsx("button",{onClick:()=>E(!1),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded-xl transition-colors",children:"Understood"})]})]}),h&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:Ie}),n.jsx("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-xl w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200 max-h-[95vh] overflow-y-auto",children:R?n.jsx("div",{className:"text-center py-8 px-4",children:n.jsxs("div",{className:"bg-zinc-800 border border-green-500/30 rounded-2xl p-8 shadow-[0_0_40px_rgba(34,197,94,0.1)] relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-cyan-500"}),n.jsx("div",{className:"w-20 h-20 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto shadow-[0_0_20px_rgba(34,197,94,0.4)] mb-6",children:n.jsx(gt,{size:40,className:"text-green-500"})}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Received!"}),n.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["Thank you, ",n.jsx("strong",{children:F.name}),". Your application has been sent to our admin team for review."]}),n.jsx("button",{onClick:Ie,className:"mt-8 w-full py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg",children:"Done"})]})}):I?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center border-b border-gray-800 pb-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:"Welcome Back"}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Please log in to continue your application."})]}),L&&n.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/50 rounded-lg flex gap-2 items-center text-red-400 text-sm",children:[n.jsx(Qm,{size:16})," ",L]}),n.jsxs("form",{onSubmit:G,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Email Address"}),n.jsx("input",{type:"email",value:F.email,readOnly:!0,className:"w-full bg-zinc-800 border border-gray-700 rounded-lg p-3 text-gray-400 text-sm cursor-not-allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Password"}),n.jsx("input",{type:"password",value:A,onChange:_e=>B(_e.target.value),required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:""})]}),n.jsxs("button",{type:"submit",className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:[n.jsx(u2,{size:18})," Login & Continue Application"]})]}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:()=>V(!1),className:"text-xs text-gray-500 hover:text-white underline",children:"Go Back"})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:"Apply to Partner"}),n.jsx("button",{onClick:Ie,className:"text-gray-500 hover:text-white",children:n.jsx(pn,{size:24})})]}),b===1&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl",children:[n.jsxs("h3",{className:"text-purple-400 font-bold mb-2 flex items-center gap-2",children:[n.jsx(Wa,{size:18})," Reality Check"]}),n.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"This is a business partnership. Inactive accounts (0 sales in 3 months) may be deactivated."})]}),n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[n.jsx("div",{className:`mt-1 w-5 h-5 rounded border flex items-center justify-center ${W?"bg-pink-500 border-pink-500":"border-gray-600"}`,children:W&&n.jsx(gt,{size:14,className:"text-white"})}),n.jsx("input",{type:"checkbox",className:"hidden",checked:W,onChange:_e=>$(_e.target.checked)}),n.jsx("span",{className:"text-sm text-gray-400 group-hover:text-white transition-colors",children:"I understand that this program requires active participation."})]}),n.jsx("button",{disabled:!W,onClick:()=>w(2),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all",children:"Continue"})]}),b===2&&n.jsxs("form",{onSubmit:se,className:"space-y-4",children:[!s.email&&n.jsxs("div",{className:"p-3 bg-zinc-800 rounded-lg border border-gray-700 mb-4",children:[n.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Create your account to get started:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[n.jsx("input",{type:"text",placeholder:"First Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:F.name,onChange:_e=>U({...F,name:_e.target.value})}),n.jsx("input",{type:"text",placeholder:"Surname",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:F.surname,onChange:_e=>U({...F,surname:_e.target.value})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("input",{type:"email",placeholder:"Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:F.email,onChange:_e=>U({...F,email:_e.target.value})}),n.jsx("input",{type:"password",placeholder:"Create Password",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:F.password,onChange:_e=>U({...F,password:_e.target.value})}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx("input",{type:"date",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:F.dob,onChange:_e=>U({...F,dob:_e.target.value})}),n.jsxs("select",{className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",required:!0,value:F.gender,onChange:_e=>U({...F,gender:_e.target.value}),children:[n.jsx("option",{value:"",children:"Gender"}),n.jsx("option",{value:"Male",children:"Male"}),n.jsx("option",{value:"Female",children:"Female"}),n.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Why do you want to join?"}),n.jsx("textarea",{required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none h-24",placeholder:"Tell us about your audience or marketing plan...",value:F.reason,onChange:_e=>U({...F,reason:_e.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Social Media Links"}),n.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Instagram, TikTok, Blog URL...",value:F.socials,onChange:_e=>U({...F,socials:_e.target.value})})]}),m==="ZAR"?n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-bold text-white",children:"Banking Details (EFT Payments)"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx("input",{type:"text",placeholder:"Bank Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm"}),n.jsx("input",{type:"text",placeholder:"Account Number",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}),n.jsx("input",{type:"text",placeholder:"Branch Code",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-bold text-white",children:"PayPal Details (USD Payments)"}),n.jsx("input",{type:"email",placeholder:"PayPal Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm"})]}),n.jsxs("div",{className:"pt-2",children:[n.jsxs("button",{type:"button",onClick:()=>C(!0),className:`w-full flex items-center justify-between p-4 rounded-xl border transition-all ${q?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:[n.jsxs("span",{className:"text-sm font-bold flex items-center gap-2",children:[n.jsx(Gw,{size:16})," ",q?"Terms Accepted":"Read Terms & Conditions"]}),q?n.jsx(Go,{size:18}):n.jsx(Yt,{size:16})]}),!q&&n.jsx("p",{className:"text-xs text-red-400 mt-1 text-center",children:"You must accept terms to proceed."})]}),n.jsx("button",{type:"submit",disabled:!q,className:"w-full py-4 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all mt-4",children:"Submit Application"})]})]})})]}),n.jsx(OL,{isOpen:J,onClose:()=>K(!1)})]})},UL=()=>{const{user:s,register:e,login:t,processGiftVoucherPurchase:r}=Ct();As();const[i,o]=S.useState(250),[c,d]=S.useState(""),[m,h]=S.useState(""),[g,b]=S.useState(""),[w,P]=S.useState(""),[C,k]=S.useState("self"),[E,F]=S.useState(0),[U,q]=S.useState(!1),[Z,W]=S.useState("register"),[$,R]=S.useState(!1),[_,I]=S.useState(""),[V,A]=S.useState(""),[B,L]=S.useState(""),[ne,pe]=S.useState(""),[Ne,Te]=S.useState(""),le=S.useRef(null);S.useEffect(()=>{i>=250&&i<=500?F(100):F(0)},[i]);const fe=i+E,ve=async()=>{await r(fe,{recipientName:c,senderName:m,message:g,whatsappNumber:w,deliveryMethod:C}),le.current&&le.current.submit()},J=()=>{if(!c||!m){alert("Please fill in the 'To' and 'From' fields.");return}s.email?ve():q(!0)},K=async ue=>{if(ue.preventDefault(),ne!==Ne){alert("Passwords do not match!");return}await e({name:_,email:V,birthday:B})&&(q(!1),setTimeout(()=>{ve()},500))},X=async ue=>{ue.preventDefault(),await t(V,ne)?(q(!1),setTimeout(()=>{ve()},500)):alert("Invalid Credentials")};return n.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 space-y-12 relative",children:[n.jsx(v0,{ref:le,amount:i,itemName:`Gift Voucher for ${c}`,email:s.email||V,customStr1:c,customStr2:m,customStr3:g,returnUrl:`${window.location.origin}/#/profile`,cancelUrl:`${window.location.origin}/#/gift-cards`}),U&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>q(!1)}),n.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h3",{className:"text-2xl font-bold text-white",children:Z==="register"?"Create Account to Pay":"Sign In to Pay"}),n.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["To secure your voucher and ensure delivery, please ",Z==="register"?"create a profile":"sign in","."]})]}),Z==="register"?n.jsxs("form",{onSubmit:K,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Full Name"}),n.jsxs("div",{className:"relative",children:[n.jsx(bi,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),n.jsx("input",{type:"text",required:!0,value:_,onChange:ue=>I(ue.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Jane Doe"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ld,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),n.jsx("input",{type:"email",required:!0,value:V,onChange:ue=>A(ue.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Birthday (For Birthday Vouchers)"}),n.jsxs("div",{className:"relative",children:[n.jsx(To,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),n.jsx("input",{type:"date",required:!0,value:B,onChange:ue=>L(ue.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Wa,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),n.jsx("input",{type:$?"text":"password",required:!0,value:ne,onChange:ue=>pe(ue.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Confirm"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:$?"text":"password",required:!0,value:Ne,onChange:ue=>Te(ue.target.value),className:"w-full p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),n.jsx("button",{type:"button",onClick:()=>R(!$),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:$?n.jsx(cm,{size:16}):n.jsx(nc,{size:16})})]})]})]}),n.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500 transition-colors",children:"Create Account & Pay"}),n.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",n.jsx("button",{type:"button",onClick:()=>W("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):n.jsxs("form",{onSubmit:X,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ld,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),n.jsx("input",{type:"email",required:!0,value:V,onChange:ue=>A(ue.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Wa,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),n.jsx("input",{type:$?"text":"password",required:!0,value:ne,onChange:ue=>pe(ue.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),n.jsx("button",{type:"button",onClick:()=>R(!$),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:$?n.jsx(cm,{size:16}):n.jsx(nc,{size:16})})]})]}),n.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500 transition-colors",children:"Sign In & Pay"}),n.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",n.jsx("button",{type:"button",onClick:()=>W("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-white drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Give the Gift of Vintage"}),n.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Create a personalized digital wish card."})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl shadow-xl space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-800",children:[n.jsx("div",{className:"p-2 bg-pink-900/30 text-pink-500 rounded-lg",children:n.jsx(bn,{size:24})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Customize Voucher"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Enter details below"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Amount (R)"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"R"}),n.jsx("input",{type:"number",value:i,onChange:ue=>o(parseFloat(ue.target.value)),className:"w-full bg-black border border-gray-700 rounded-xl py-4 pl-10 pr-4 text-white text-xl font-bold focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none transition-all",placeholder:"250",min:"50"})]}),i>=250&&i<=500?n.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-xs font-bold bg-green-900/20 p-2 rounded border border-green-500/30 animate-in fade-in slide-in-from-top-2",children:[n.jsx(Un,{size:14}),"Bonus R100 added to voucher value automatically!"]}):n.jsxs("p",{className:"text-xs text-gray-500",children:["Tip: Spend between ",n.jsx("strong",{children:"R250 - R500"})," to get a ",n.jsx("span",{className:"text-pink-500 font-bold",children:"FREE R100"})," bonus!"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"To (Recipient Name)"}),n.jsx("input",{type:"text",value:c,onChange:ue=>d(ue.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. Sarah"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 flex items-center gap-2",children:[n.jsx(Bg,{size:14})," From (Your Name)"]}),n.jsx("input",{type:"text",value:m,onChange:ue=>h(ue.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. John"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Personal Message"}),n.jsx("textarea",{rows:4,value:g,onChange:ue=>b(ue.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none resize-none",placeholder:"Write a sweet note...",maxLength:150}),n.jsxs("div",{className:"text-right text-[10px] text-gray-600",children:[g.length,"/150"]})]}),n.jsxs("div",{className:"space-y-4 pt-2 border-t border-gray-800",children:[n.jsx("label",{className:"block text-sm font-bold text-gray-300",children:"How should we deliver this?"}),n.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[n.jsxs("div",{onClick:()=>k("self"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${C==="self"?"bg-purple-900/20 border-purple-500 ring-1 ring-purple-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[n.jsx("div",{className:`mt-1 p-1 rounded-full ${C==="self"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400"}`,children:n.jsx(bi,{size:16})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:`text-sm font-bold ${C==="self"?"text-purple-400":"text-gray-300"}`,children:"Send to Me (Higher Success Rate)"}),n.jsx("div",{className:"flex items-center gap-2 mt-1",children:n.jsxs("span",{className:"text-[10px] bg-green-900/40 text-green-400 border border-green-500/30 px-1.5 py-0.5 rounded font-bold flex items-center gap-1",children:[n.jsx(gt,{size:10})," Best Option"]})}),n.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We send the voucher code and link to YOU via notification. You can then forward it via WhatsApp personally."}),C==="self"&&n.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:ue=>ue.stopPropagation(),children:[n.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[n.jsx(Wi,{size:12})," Your WhatsApp Number"]}),n.jsx("input",{type:"text",value:w,onChange:ue=>P(ue.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]}),n.jsxs("div",{onClick:()=>k("recipient"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${C==="recipient"?"bg-pink-900/20 border-pink-500 ring-1 ring-pink-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[n.jsx("div",{className:`mt-1 p-1 rounded-full ${C==="recipient"?"bg-pink-500 text-white":"bg-gray-800 text-gray-400"}`,children:n.jsx(tp,{size:16})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:`text-sm font-bold ${C==="recipient"?"text-pink-400":"text-gray-300"}`,children:"Send directly to Recipient"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We will email or WhatsApp the recipient directly on your behalf."}),C==="recipient"&&n.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:ue=>ue.stopPropagation(),children:[n.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[n.jsx(sc,{size:12})," Recipient WhatsApp (Optional)"]}),n.jsx("input",{type:"text",value:w,onChange:ue=>P(ue.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]})]})]}),n.jsxs("button",{onClick:J,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 text-lg",children:[n.jsx(Md,{size:20})," Buy Now & Pay - R",i.toFixed(2)]}),n.jsxs("p",{className:"text-center text-xs text-gray-500 mt-2 flex items-center justify-center gap-1",children:[n.jsx(gt,{size:12,className:"text-green-500"})," Secure Payment via PayFast"]})]}),n.jsxs("div",{className:"sticky top-24",children:[n.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[n.jsx(Md,{size:16})," Example"]}),n.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),n.jsx("div",{className:"absolute top-0 left-0 p-4 opacity-10 pointer-events-none",children:n.jsx("span",{className:"font-cherry text-8xl text-white leading-none",children:"SV"})}),n.jsxs("div",{className:"relative h-full p-6 md:p-8 flex flex-col justify-between z-20",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-cherry text-xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.3)]",children:"Spoil Me Vintage"}),n.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[n.jsx(Un,{size:10,className:"text-cyan-400"}),n.jsx("p",{className:"text-[10px] text-gray-300 tracking-[0.2em] uppercase",children:"Exclusive Voucher"})]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:"text-2xl md:text-5xl font-bold text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.5)] font-architects",children:["R",fe]})})]}),n.jsxs("div",{className:"flex-1 flex flex-col justify-center py-2 md:py-4 relative",children:[n.jsxs("p",{className:"font-architects text-lg md:text-2xl text-gray-200 leading-relaxed text-center break-words relative drop-shadow-sm line-clamp-3",children:['"',g||"Treat yourself to something timeless...",'"']}),n.jsx("div",{className:"mx-auto mt-4 md:mt-6 cursor-pointer group w-full md:w-auto flex justify-center",children:n.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-full px-6 py-3 md:px-6 md:py-2 flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(34,211,238,0.2)] hover:bg-cyan-900/30 hover:border-cyan-400 transition-all w-full md:w-auto",children:[n.jsx("span",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),n.jsx("span",{className:"text-xs md:text-xs font-bold text-white uppercase tracking-widest group-hover:text-cyan-300 transition-colors",children:"Redeem Now"}),n.jsx(Yt,{size:12,className:"text-cyan-400 group-hover:translate-x-1 transition-transform"})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-800 pt-3 md:pt-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"To"}),n.jsx("p",{className:"text-sm font-bold text-white truncate",children:c||"Recipient Name"})]}),n.jsxs("div",{className:"space-y-1 text-right",children:[n.jsxs("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center justify-end gap-1",children:["From ",n.jsx(Bg,{size:10})]}),n.jsx("p",{className:"text-lg font-architects text-cyan-400 truncate",children:m||"Your Name"})]})]})]})]}),n.jsxs("div",{className:"mt-6 bg-zinc-900/50 border border-gray-800 rounded-xl p-5 shadow-lg",children:[n.jsxs("h4",{className:"font-bold text-white text-sm mb-3 flex items-center gap-2 border-b border-gray-800 pb-2",children:[n.jsx(gt,{size:14,className:"text-green-400"})," Verified Voucher Features"]}),n.jsxs("ul",{className:"text-xs text-gray-400 space-y-2.5",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Un,{size:12,className:"text-purple-400 mt-0.5"})," Valid for 3 years from date of purchase."]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Wi,{size:12,className:"text-cyan-400 mt-0.5"})," ",n.jsx("span",{className:"text-white font-bold",children:"Smart Link:"}),' Recipient taps "Redeem Now" to auto-apply discount in App.']}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(sc,{size:12,className:"text-green-400 mt-0.5"})," ",n.jsx("span",{className:"text-white font-bold",children:"Instant Delivery"})," via Notification & WhatsApp."]})]})]})]})]})]})},BL=()=>{const{categoryName:s}=Gd(),{products:e,categories:t}=Ct(),r=decodeURIComponent(s||""),i=t.find(c=>c.name===r),o=e.filter(c=>c.category===r);return S.useEffect(()=>{window.scrollTo(0,0)},[s]),i?n.jsxs("div",{className:"space-y-8 pb-12",children:[n.jsxs("div",{className:"relative h-64 md:h-80 rounded-2xl overflow-hidden bg-zinc-900 border border-gray-800 shadow-2xl group",children:[n.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"}),n.jsxs("div",{className:"absolute bottom-0 left-0 p-8 w-full",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs(Le,{to:"/",className:"text-xs text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[n.jsx(Ha,{size:12})," Home"]}),n.jsx("span",{className:"text-gray-600",children:"/"}),n.jsx("span",{className:"text-xs text-pink-500 font-bold tracking-wider uppercase",children:"Collection"})]}),n.jsx("h1",{className:"font-cherry text-4xl md:text-6xl text-white drop-shadow-lg mb-2",children:i.name}),i.description&&n.jsx("p",{className:"text-gray-300 max-w-2xl text-sm md:text-base font-light border-l-4 border-pink-500 pl-4",children:i.description})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[n.jsx(Un,{size:20,className:"text-cyan-400"}),"Available Treasures (",o.length,")"]})}),o.length>0?n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map(c=>n.jsx(Cs,{product:c},c.id))}):n.jsxs("div",{className:"py-20 text-center border border-dashed border-gray-800 rounded-2xl",children:[n.jsx("p",{className:"text-gray-500",children:"No products found in this collection yet."}),n.jsx(Le,{to:"/",className:"text-pink-500 text-sm mt-4 inline-block hover:underline",children:"Browse other collections"})]})]})]}):n.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:"Collection Not Found"}),n.jsxs(Le,{to:"/",className:"text-pink-500 hover:text-pink-400 flex items-center gap-2",children:[n.jsx(Ha,{size:20})," Back to Home"]})]})},$L=()=>{const{type:s}=Gd(),{products:e,categories:t}=Ct(),[r,i]=S.useState("newest"),[o,c]=S.useState(!1),[d,m]=S.useState(""),[h,g]=S.useState(""),[b,w]=S.useState(!1),[P,C]=S.useState(1),k=20;S.useEffect(()=>{window.scrollTo(0,0),c(!1),m(""),g(""),i("newest"),C(1)},[s]);const{title:E,baseProducts:F}=S.useMemo(()=>{let $="",R=[];switch(s){case"stud":$="Stud Earrings",R=e.filter(_=>_.type==="Stud"||_.isFeaturedStud);break;case"dangle":$="Dangle Earrings",R=e.filter(_=>_.type==="Dangle"||_.isFeaturedDangle);break;case"ring":$="Rings",R=e.filter(_=>_.type==="Ring");break;case"unique":$="Unique Pendants",R=e.filter(_=>_.isUniquePendant);break;case"bracelet":$="Bracelets",R=e.filter(_=>_.type==="Bracelet"||_.isFeaturedBracelet);break;case"watch":$="Watches",R=e.filter(_=>_.isFeaturedWatch);break;case"best":$="Best Sellers",R=e.filter(_=>_.isBestSeller);break;case"sets":$="Jewelry Sets",R=e.filter(_=>_.isJewelrySet);break;default:$="Catalog",R=e}return{title:$,baseProducts:R}},[s,e]),U=S.useMemo(()=>{const $=new Set;return F.forEach(R=>{var _;(_=R.colors)==null||_.forEach(I=>$.add(I))}),Array.from($).sort()},[F]),q=S.useMemo(()=>{let $=[...F];if(o){const R=new Date;$=$.filter(_=>{const I=_.promoStartsAt?new Date(_.promoStartsAt):null,V=_.promoExpiresAt?new Date(_.promoExpiresAt):null;return(_.promoPrice||0)>0&&(!I||I<=R)&&(!V||V>R)})}return d&&($=$.filter(R=>{var _;return(_=R.colors)==null?void 0:_.includes(d)})),h&&($=$.filter(R=>R.category===h)),$.sort((R,_)=>r==="price_asc"?R.price-_.price:r==="price_desc"?_.price-R.price:new Date(_.createdAt).getTime()-new Date(R.createdAt).getTime()),$},[F,o,d,h,r]),Z=S.useMemo(()=>{const $=(P-1)*k,R=$+k;return q.slice($,R)},[q,P,k]),W=Math.ceil(q.length/k);return n.jsxs("div",{className:"space-y-8 pb-12 min-h-screen",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 pt-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs text-gray-500",children:[n.jsxs(Le,{to:"/",className:"hover:text-white flex items-center gap-1",children:[n.jsx(Ha,{size:12})," Home"]}),n.jsx("span",{children:"/"}),n.jsx("span",{className:"text-pink-500 font-bold",children:E})]}),n.jsx("h1",{className:"font-cherry text-3xl md:text-4xl text-white",children:E}),n.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[q.length," Items Found"]})]}),n.jsxs("button",{className:"md:hidden flex items-center gap-2 bg-zinc-800 px-4 py-2 rounded text-white text-sm w-fit",onClick:()=>w(!b),children:[n.jsx(KM,{size:16})," Filters & Sort"]}),n.jsxs("div",{className:`flex-col md:flex-row gap-4 items-start md:items-center bg-zinc-900/80 p-4 rounded-xl border border-gray-800 ${b?"flex":"hidden md:flex"}`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Sort:"}),n.jsxs("select",{value:r,onChange:$=>i($.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none",children:[n.jsx("option",{value:"newest",children:"Newest"}),n.jsx("option",{value:"price_asc",children:"Price Low-High"}),n.jsx("option",{value:"price_desc",children:"Price High-Low"})]})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none bg-black border border-gray-700 px-3 py-1 rounded hover:border-pink-500 transition-colors",children:[n.jsx("input",{type:"checkbox",checked:o,onChange:$=>c($.target.checked),className:"hidden"}),n.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${o?"bg-pink-600 border-pink-600":"border-gray-500"}`,children:o&&n.jsx(gt,{size:10,className:"text-white"})}),n.jsx("span",{className:`text-sm ${o?"text-pink-400 font-bold":"text-gray-300"}`,children:"Promotions"})]}),n.jsxs("select",{value:h,onChange:$=>g($.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[n.jsx("option",{value:"",children:"All Collections"}),t.map($=>n.jsx("option",{value:$.name,children:$.name},$.id))]}),U.length>0&&n.jsxs("select",{value:d,onChange:$=>m($.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[n.jsx("option",{value:"",children:"All Colors"}),U.map($=>n.jsx("option",{value:$,children:$},$))]}),(o||d||h)&&n.jsx("button",{onClick:()=>{c(!1),m(""),g("")},className:"text-xs text-red-400 hover:text-red-300 underline",children:"Clear"})]})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:Z.map($=>n.jsx(Cs,{product:$},$.id))}),q.length===0&&n.jsxs("div",{className:"py-20 text-center bg-zinc-900/30 rounded-xl border border-dashed border-gray-800",children:[n.jsx("p",{className:"text-gray-400",children:"No products found matching your filters."}),n.jsx("button",{onClick:()=>{c(!1),m(""),g("")},className:"mt-4 text-pink-500 font-bold hover:underline",children:"Clear Filters"})]}),W>1&&n.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between text-sm text-gray-400 mt-8",children:[n.jsxs("div",{children:["Page ",P," of ",W]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>C($=>Math.max($-1,1)),className:"bg-black border border-gray-700 rounded px-3 py-1 hover:bg-gray-800 transition-colors disabled:opacity-50",disabled:P===1,children:"Previous"}),n.jsx("button",{onClick:()=>C($=>Math.min($+1,W)),className:"bg-black border border-gray-700 rounded px-3 py-1 hover:bg-gray-800 transition-colors disabled:opacity-50",disabled:P===W,children:"Next"})]})]})]})},qL=()=>{const{products:s,isDemoMode:e,resetStore:t,dbConnectionError:r,seedTestUsers:i,runDataDiagnostics:o,simulateAffiliateSale:c,getAllUsers:d,adminAdjustPoints:m,auth:h}=Ct();if(!h||!h.currentUser||h.currentUser.email!=="spoilmevintagediy@gmail.com")return n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-zinc-900 text-white",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),n.jsx("p",{className:"text-gray-400",children:"You do not have permission to access the admin panel."})]})});const[g,b]=S.useState(null),[w,P]=S.useState(""),[C,k]=S.useState(100),[E,F]=S.useState(null),[U,q]=S.useState([]),[Z,W]=S.useState(""),[$,R]=S.useState(null),[_,I]=S.useState([]),[V,A]=S.useState([]),[B,L]=S.useState([]),[ne,pe]=S.useState(!0);S.useEffect(()=>{(async()=>{const X=await d();q(X),X.length>0&&W(X[0].id)})()},[d]),S.useEffect(()=>{let K=0;const X=3,ue=()=>{K++,K>=X&&pe(!1)},G=di(sn(At(ye,"artist_applications"),ci("submittedAt","desc")),He=>{const Be=He.docs.map(xt=>{var we;return{id:xt.id,...xt.data(),submittedAt:((we=xt.data().submittedAt)==null?void 0:we.toDate())||new Date}});I(Be),ue()},He=>{console.error("Error loading artist applications:",He),ue()}),se=di(At(ye,"artists"),He=>{const Be=He.docs.map(xt=>({uid:xt.id,...xt.data()}));A(Be),ue()},He=>{console.error("Error loading artists:",He),ue()}),Ie=di(At(ye,"artist_products"),He=>{const Be=He.docs.map(xt=>{var we,We,at;return{id:xt.id,...xt.data(),createdAt:((we=xt.data().createdAt)==null?void 0:we.toDate())||new Date,receivedAtHub:((We=xt.data().receivedAtHub)==null?void 0:We.toDate())||null,approvedAt:((at=xt.data().approvedAt)==null?void 0:at.toDate())||null}});L(Be),ue()},He=>{console.error("Error loading artist products:",He),ue()}),Ae=setTimeout(()=>{ne&&(console.warn("Artist data loading timed out, setting loading to false"),pe(!1))},5e3);return()=>{clearTimeout(Ae),G(),se(),Ie()}},[]);const Ne=[{title:"Total Revenue",value:"R12,450",change:"+12%",icon:mn,color:"bg-green-900/30 text-green-400 border-green-500/20"},{title:"Total Orders",value:"154",change:"+8%",icon:Ka,color:"bg-cyan-900/30 text-cyan-400 border-cyan-500/20"},{title:"Active Users",value:"1,203",change:"+24%",icon:ks,color:"bg-purple-900/30 text-purple-400 border-purple-500/20"},{title:"Products",value:s.length,change:"0%",icon:Fg,color:"bg-pink-900/30 text-pink-400 border-pink-500/20"}],Te=()=>{const K=o();b(K)},le=async()=>{if(!w)return;F("Processing...");const K=await c(w,C);F(K.message)},fe=async()=>{Z&&(await m(Z,1e3),R(`Added 1000 Points to user ID: ${Z}`),setTimeout(()=>R(null),3e3))},ve=async()=>{if(!Z){alert("Please select a user");return}await m(Z,100),R(`Simulated Review: Awarded 100 Points to ${Z}`),setTimeout(()=>R(null),3e3)},J=[{path:"/admin",icon:Fg,label:"Dashboard"},{path:"/admin/orders",icon:Ka,label:"Orders"},{path:"/admin/products",icon:rc,label:"Products"},{path:"/admin/categories",icon:f2,label:"Categories"},{path:"/admin/custom-pendant-manager",icon:Un,label:"Custom Pendants"},{path:"/admin/gift-cards",icon:bn,label:"Gift Cards"},{path:"/admin/social",icon:Ho,label:"Social Studio"},{path:"/admin/affiliates",icon:ks,label:"Affiliates"},{path:"/admin/winners",icon:Er,label:"Weekly Winners"},{path:"/admin/expenses",icon:mn,label:"Expenses"},{path:"/admin/vault",icon:It,label:"Vault Management"},{path:"/admin/members",icon:Da,label:"Membership"},{path:"/admin/artists",icon:ld,label:"Artists"}];return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Dashboard Overview"}),n.jsxs("div",{className:"flex gap-2",children:[!e&&n.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-3 py-2 rounded hover:bg-purple-900/50 transition-colors",children:[n.jsx(e6,{size:14})," Seed Test Users to DB"]}),e&&n.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-3 py-2 rounded hover:bg-red-900/50 transition-colors",children:[n.jsx(Vd,{size:14})," Reset Demo Data"]})]})]}),n.jsx("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-4",children:n.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:J.map(K=>n.jsxs(Le,{to:K.path,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-400 hover:text-white bg-zinc-800/50 hover:bg-zinc-700 rounded-lg transition-colors",children:[n.jsx(K.icon,{size:16})," ",K.label]},K.path))})}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[n.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[n.jsx(Da,{size:20,className:"text-purple-400"}),"Membership Overview"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Spoil Me"}),n.jsx("span",{className:"text-xs bg-pink-900/30 text-pink-400 border border-pink-500/30 px-2 py-1 rounded",children:"Premium"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Ultimate luxury experience with exclusive perks"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),n.jsx("span",{className:"text-white",children:"R25"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"5%"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Active Members:"}),n.jsx("span",{className:"text-green-400",children:"127"})]})]})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Basic"}),n.jsx("span",{className:"text-xs bg-blue-900/30 text-blue-400 border border-blue-500/30 px-2 py-1 rounded",children:"Standard"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Essential benefits for regular shoppers"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),n.jsx("span",{className:"text-white",children:"R50"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"20%"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Active Members:"}),n.jsx("span",{className:"text-green-400",children:"342"})]})]})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Premium"}),n.jsx("span",{className:"text-xs bg-green-900/30 text-green-400 border border-green-500/30 px-2 py-1 rounded",children:"Popular"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Enhanced shopping experience"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),n.jsx("span",{className:"text-white",children:"R12"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"20%"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Active Members:"}),n.jsx("span",{className:"text-green-400",children:"289"})]})]})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Deluxe Boss"}),n.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-400 border border-yellow-500/30 px-2 py-1 rounded",children:"Elite"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"VIP treatment with maximum benefits"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),n.jsx("span",{className:"text-white",children:"R25"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"30%"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Active Members:"}),n.jsx("span",{className:"text-green-400",children:"156"})]})]})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Insider Club"}),n.jsx("span",{className:"text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-2 py-1 rounded",children:"Exclusive"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Early access to new products and promotions"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),n.jsx("span",{className:"text-white",children:"R5"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"20%"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Active Members:"}),n.jsx("span",{className:"text-green-400",children:"98"})]})]})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Gold Member"}),n.jsx("span",{className:"text-xs bg-orange-900/30 text-orange-400 border border-orange-500/30 px-2 py-1 rounded",children:"Premium"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Gold standard benefits and rewards"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),n.jsx("span",{className:"text-white",children:"R5"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"20%"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Active Members:"}),n.jsx("span",{className:"text-green-400",children:"203"})]})]})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700 col-span-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Deluxe Vault"}),n.jsx("span",{className:"text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-2 py-1 rounded",children:"Ultimate"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Access to exclusive vault items with maximum benefits"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly Credit:"}),n.jsx("span",{className:"text-white",children:"R25"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"30%"})]})]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Active Members:"}),n.jsx("span",{className:"text-green-400",children:"87"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Vault Access:"}),n.jsx("span",{className:"text-white",children:"24hrs Early"})]})]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Priority Support:"}),n.jsx("span",{className:"text-white",children:"WhatsApp"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Free Shipping:"}),n.jsx("span",{className:"text-white",children:"Always"})]})]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly Giveaways:"}),n.jsx("span",{className:"text-white",children:"Entry"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Weekly Winners:"}),n.jsx("span",{className:"text-white",children:"Eligible"})]})]})]})]})]})]}),n.jsxs("div",{className:"bg-zinc-900/50 border-2 border-amber-500/30 p-6 rounded-xl relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 bg-amber-500/20 text-amber-400 px-3 py-1 text-xs font-bold rounded-bl-lg border-l border-b border-amber-500/30",children:"TESTING LAB"}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-amber-900/30 text-amber-400 rounded-lg border border-amber-500/30",children:n.jsx(ZM,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-white text-lg",children:"Feature Verification Lab"}),n.jsx("p",{className:"text-gray-400 text-xs",children:"Manually trigger logic to verify Affiliate & Loyalty systems."})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2 text-sm",children:[n.jsx(mn,{size:14,className:"text-green-400"})," Affiliate Sale Simulator"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Affiliate Code"}),n.jsx("input",{type:"text",className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:w,onChange:K=>P(K.target.value),placeholder:"e.g. Spoilme-FAY003"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Sale Amount (R)"}),n.jsx("input",{type:"number",className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:C,onChange:K=>k(parseFloat(K.target.value))})]}),n.jsx("button",{onClick:le,className:"w-full py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors",children:"Simulate Sale & Commission"}),E&&n.jsx("div",{className:"p-2 bg-zinc-800 rounded text-xs text-green-300 border border-green-500/30 mt-2",children:E})]})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2 text-sm",children:[n.jsx(or,{size:14,className:"text-purple-400"})," Loyalty System Tester"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Select User"}),n.jsxs("select",{className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:Z,onChange:K=>W(K.target.value),children:[n.jsx("option",{value:"",children:"-- Select User --"}),U.map(K=>n.jsxs("option",{value:K.id,children:[K.name," (",K.email,")"]},K.id))]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("button",{onClick:fe,className:"py-2 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors",children:"+1000 Points"}),n.jsx("button",{onClick:ve,className:"py-2 bg-zinc-700 hover:bg-zinc-600 text-white text-xs font-bold rounded transition-colors",children:"Simulate Review"})]}),$&&n.jsx("div",{className:"p-2 bg-zinc-800 rounded text-xs text-purple-300 border border-purple-500/30 mt-2 animate-pulse",children:$})]})]})]})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[n.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[n.jsx(Gr,{size:20,className:"text-cyan-400"}),"Shipping & Logistics"]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center bg-black/40 p-4 rounded-lg border border-gray-800",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-white",children:"PUDO Locker Management"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Access your PUDO dashboard to manage locker shipments, track parcels, and view your account details."})]}),n.jsxs("a",{href:"https://customer.pudo.co.za/dashboard",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Open PUDO Dashboard ",n.jsx(Aa,{size:16})]})]})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg relative overflow-hidden",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-900/30 text-blue-400 rounded-lg border border-blue-500/30",children:n.jsx(JM,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-white text-lg",children:"System Doctor"}),n.jsx("p",{className:"text-gray-400 text-xs",children:"Verify database integrity and save functionality."})]})]}),n.jsxs("button",{onClick:Te,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded-lg flex items-center gap-2 transition-colors",children:[n.jsx(i2,{size:14})," Run Integrity Check"]})]}),g&&n.jsxs("div",{className:`p-4 rounded-lg border flex items-start gap-3 animate-in slide-in-from-top-2 ${g.status==="success"?"bg-green-900/20 border-green-500/30 text-green-300":"bg-red-900/20 border-red-500/30 text-red-300"}`,children:[g.status==="success"?n.jsx(gt,{size:18,className:"shrink-0 mt-0.5"}):n.jsx(pn,{size:18,className:"shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-sm",children:g.status==="success"?"System Healthy":"Issue Detected"}),n.jsx("p",{className:"text-xs opacity-80",children:g.details})]})]})]}),r&&n.jsxs("div",{className:"bg-red-900/20 border border-red-600/30 p-4 rounded-xl flex items-start gap-4",children:[n.jsx("div",{className:"p-2 bg-red-900/50 text-red-500 rounded-lg",children:n.jsx(Cr,{size:20})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-bold text-red-500",children:"Firestore Connection Failed"}),n.jsxs("p",{className:"text-xs text-red-200/70 mt-1",children:["Error: ",r,".",n.jsx("br",{}),"Please ensure you have created the ",n.jsx("strong",{children:"Firestore Database"})," in your Firebase Console. Until then, the app is running in ",n.jsx("strong",{children:"Demo Mode"}),"."]})]})]}),e&&!r&&n.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-600/30 p-4 rounded-xl flex items-start gap-4",children:[n.jsx("div",{className:"p-2 bg-yellow-900/50 text-yellow-500 rounded-lg",children:n.jsx(MM,{size:20})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-bold text-yellow-500",children:"Running in Demo Mode"}),n.jsx("p",{className:"text-xs text-yellow-200/70 mt-1",children:"Firebase is not configured or unavailable. All changes (Products, Categories) are saved to your browser's Local Storage. Uploading large images might fill your storage limit."})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:Ne.map((K,X)=>n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("div",{className:`p-3 rounded-lg border ${K.color}`,children:n.jsx(K.icon,{size:20})}),n.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${K.change.startsWith("+")?"bg-green-900/30 text-green-400":"bg-gray-800 text-gray-400"}`,children:K.change})]}),n.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:K.title}),n.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:K.value})]},X))}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-red-900/30 text-red-400 rounded-lg border border-red-500/30",children:n.jsx(Cr,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-white text-lg",children:"Inventory Danger Zone"}),n.jsx("p",{className:"text-gray-400 text-xs",children:"Monitor Secret Vault stock levels for Deluxe members."})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-bold text-white mb-3 text-sm",children:"Current Vault Stock"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Total Vault Items in Stock"}),n.jsx("input",{type:"number",className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-sm",placeholder:"e.g., 3000",defaultValue:"2500"})]}),n.jsx("button",{className:"w-full py-2 bg-red-600 hover:bg-red-500 text-white text-sm font-bold rounded transition-colors",children:"Update Stock Count"})]})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsx("h4",{className:"font-bold text-white mb-3 text-sm",children:"Stock Health Check"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-400",children:"Active Deluxe Members:"}),n.jsx("span",{className:"text-white font-bold",children:"600"})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-400",children:"Avg Items/Member:"}),n.jsx("span",{className:"text-white font-bold",children:"5"})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-400",children:"Required Monthly Stock:"}),n.jsx("span",{className:"text-white font-bold",children:"3,000"})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-400",children:"Current Stock:"}),n.jsx("span",{className:"text-red-400 font-bold",children:"2,500"})]})]})]})]}),n.jsx("div",{className:"mt-6 bg-red-900/20 border border-red-600/50 p-4 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Cr,{size:20,className:"text-red-500 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-red-400 font-bold text-sm mb-1",children:"CRITICAL WARNING: Stock Shortage Detected"}),n.jsxs("p",{className:"text-red-300 text-xs",children:["You have ",n.jsx("strong",{children:"600 Deluxe Members"})," requiring ~3,000 items, but only ",n.jsx("strong",{children:"2,500 items"})," in stock. Stop ads or add stock immediately!"]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[n.jsx("h3",{className:"font-bold text-white mb-4 text-lg",children:"Recent Activity"}),n.jsx("div",{className:"space-y-4",children:[1,2,3].map((K,X)=>n.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-800 last:border-0",children:[n.jsx("div",{className:"w-10 h-10 bg-black border border-gray-800 rounded-full flex items-center justify-center text-xs font-bold text-gray-500",children:"OR"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-200",children:["Order #492",X," placed"]}),n.jsx("p",{className:"text-xs text-gray-500",children:"2 minutes ago"})]}),n.jsx("div",{className:"ml-auto font-bold text-green-400 text-sm",children:"R129.00"})]},X))})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[n.jsx("h3",{className:"font-bold text-white mb-4 text-lg",children:"Inventory Status"}),n.jsx("div",{className:"space-y-4",children:s.slice(0,4).map(K=>n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:K.images[0],className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:""}),n.jsx("span",{className:"text-sm text-gray-300 truncate w-40",children:K.name})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-24 h-2 bg-gray-800 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-pink-500",style:{width:`${Math.min(K.stock,100)}%`}})}),n.jsxs("span",{className:"text-xs font-mono text-gray-500",children:[K.stock," left"]})]})]},K.id))})]})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[n.jsx(ld,{size:20,className:"text-pink-400"}),"Artists Overview"]}),n.jsxs(Le,{to:"/admin/artists",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:["Manage Artists ",n.jsx(ld,{size:16})]})]}),ne?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"text-gray-400",children:"Loading artist data..."})}):n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Pending Applications"}),n.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-400 border border-yellow-500/30 px-2 py-1 rounded",children:_.filter(K=>K.status==="pending").length})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Applications awaiting review"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Total:"}),n.jsx("span",{className:"text-white",children:_.length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Approved:"}),n.jsx("span",{className:"text-green-400",children:_.filter(K=>K.status==="approved").length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Rejected:"}),n.jsx("span",{className:"text-red-400",children:_.filter(K=>K.status==="rejected").length})]})]})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Active Artists"}),n.jsx("span",{className:"text-xs bg-green-900/30 text-green-400 border border-green-500/30 px-2 py-1 rounded",children:V.filter(K=>K.status==="active").length})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Artists with live products"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Total Artists:"}),n.jsx("span",{className:"text-white",children:V.length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Suspended:"}),n.jsx("span",{className:"text-red-400",children:V.filter(K=>K.status==="suspended").length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Avg Slots Used:"}),n.jsx("span",{className:"text-white",children:V.length>0?Math.round(V.reduce((K,X)=>K+(X.slotsUsed||0),0)/V.length):0})]})]})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Products in Review"}),n.jsx("span",{className:"text-xs bg-blue-900/30 text-blue-400 border border-blue-500/30 px-2 py-1 rounded",children:B.filter(K=>K.status==="pending_approval").length})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Products awaiting approval"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Total Products:"}),n.jsx("span",{className:"text-white",children:B.length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Live:"}),n.jsx("span",{className:"text-green-400",children:B.filter(K=>K.status==="live").length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Rejected:"}),n.jsx("span",{className:"text-red-400",children:B.filter(K=>K.status==="rejected").length})]})]})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Revenue Generated"}),n.jsxs("span",{className:"text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-2 py-1 rounded",children:["R",V.reduce((K,X)=>{var ue,G;return K+((((ue=X.wallet)==null?void 0:ue.available)||0)+(((G=X.wallet)==null?void 0:G.pending)||0))},0).toFixed(0)]})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Total artist earnings"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Available:"}),n.jsxs("span",{className:"text-green-400",children:["R",V.reduce((K,X)=>{var ue;return K+(((ue=X.wallet)==null?void 0:ue.available)||0)},0).toFixed(0)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Pending:"}),n.jsxs("span",{className:"text-yellow-400",children:["R",V.reduce((K,X)=>{var ue;return K+(((ue=X.wallet)==null?void 0:ue.pending)||0)},0).toFixed(0)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Avg per Artist:"}),n.jsxs("span",{className:"text-white",children:["R",V.length>0?Math.round(V.reduce((K,X)=>{var ue,G;return K+((((ue=X.wallet)==null?void 0:ue.available)||0)+(((G=X.wallet)==null?void 0:G.pending)||0))},0)/V.length):0]})]})]})]})]}),n.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-800",children:[n.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-3 rounded-lg mb-4",children:n.jsxs("p",{className:"text-yellow-400 text-sm font-medium flex items-center gap-2",children:[n.jsx(Cr,{size:16}),"Reviews take up to 72 hours. Artists will be notified via email and in-app notification once their application is processed."]})}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs(Le,{to:"/admin/artists",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(ld,{size:16})," Review Applications"]}),n.jsxs(Le,{to:"/admin/artists",className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(rc,{size:16})," Approve Products"]}),n.jsxs(Le,{to:"/admin/artists",className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(mn,{size:16})," Process Payments"]})]})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let GL,HL;function WL(){return{geminiUrl:GL,vertexUrl:HL}}function KL(s,e,t){var r,i,o;if(!(!((r=s.httpOptions)===null||r===void 0)&&r.baseUrl)){const c=WL();return s.vertexai?(i=c.vertexUrl)!==null&&i!==void 0?i:e:(o=c.geminiUrl)!==null&&o!==void 0?o:t}return s.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ru{}function jt(s,e){const t=/\{([^}]+)\}/g;return s.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function y(s,e,t){for(let o=0;o<e.length-1;o++){const c=e[o];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in s))if(Array.isArray(t))s[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(s[d])){const m=s[d];if(Array.isArray(t))for(let h=0;h<m.length;h++){const g=m[h];y(g,e.slice(o+1),t[h])}else for(const h of m)y(h,e.slice(o+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in s||(s[d]=[{}]);const m=s[d];y(m[0],e.slice(o+1),t);return}(!s[c]||typeof s[c]!="object")&&(s[c]={}),s=s[c]}const r=e[e.length-1],i=s[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else s[r]=t}function x(s,e){try{if(e.length===1&&e[0]==="_self")return s;for(let t=0;t<e.length;t++){if(typeof s!="object"||s===null)return;const r=e[t];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in s){const o=s[i];return Array.isArray(o)?o.map(c=>x(c,e.slice(t+1))):void 0}else return}else s=s[r]}return s}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cn(s,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(s.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function I2(s,e){const t=Cn(s,e);return t?t.startsWith("publishers/")&&s.isVertexAI()?`projects/${s.getProject()}/locations/${s.getLocation()}/${t}`:t.startsWith("models/")&&s.isVertexAI()?`projects/${s.getProject()}/locations/${s.getLocation()}/publishers/google/${t}`:t:""}function R2(s,e){return Array.isArray(e)?e.map(t=>hm(s,t)):[hm(s,e)]}function hm(s,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function JL(s,e){const t=hm(s,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function YL(s,e){const t=hm(s,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function hN(s,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function D2(s,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>hN(s,t)):[hN(s,e)]}function Gg(s){return s!=null&&typeof s=="object"&&"parts"in s&&Array.isArray(s.parts)}function mN(s){return s!=null&&typeof s=="object"&&"functionCall"in s}function pN(s){return s!=null&&typeof s=="object"&&"functionResponse"in s}function Ws(s,e){if(e==null)throw new Error("ContentUnion is required");return Gg(e)?e:{role:"user",parts:D2(s,e)}}function M2(s,e){if(!e)return[];if(s.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=Ws(s,t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(s.isVertexAI()){const t=Ws(s,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Ws(s,t)):[Ws(s,e)]}function ro(s,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(mN(e)||pN(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ws(s,e)]}const t=[],r=[],i=Gg(e[0]);for(const o of e){const c=Gg(o);if(c!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)t.push(o);else{if(mN(o)||pN(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(o)}}return i||t.push({role:"user",parts:D2(s,r)}),t}function L2(s,e){return e}function z2(s,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function np(s,e){return e}function sp(s,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function ZL(s,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return s.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${s.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${s.getProject()}/locations/${s.getLocation()}/${e}`:i?`projects/${s.getProject()}/locations/${s.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function io(s,e){if(typeof e!="string")throw new Error("name must be a string");return ZL(s,e,"cachedContents")}function V2(s,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function ao(s,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function O2(s,e){if(typeof e!="string")throw new Error("fromName must be a string");return e.startsWith("files/")?e.split("files/")[1]:e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QL(s,e){const t={};if(x(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=x(e,["thought"]);r!=null&&y(t,["thought"],r);const i=x(e,["codeExecutionResult"]);i!=null&&y(t,["codeExecutionResult"],i);const o=x(e,["executableCode"]);o!=null&&y(t,["executableCode"],o);const c=x(e,["fileData"]);c!=null&&y(t,["fileData"],c);const d=x(e,["functionCall"]);d!=null&&y(t,["functionCall"],d);const m=x(e,["functionResponse"]);m!=null&&y(t,["functionResponse"],m);const h=x(e,["inlineData"]);h!=null&&y(t,["inlineData"],h);const g=x(e,["text"]);return g!=null&&y(t,["text"],g),t}function fN(s,e){const t={},r=x(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>QL(s,c))),y(t,["parts"],o)}const i=x(e,["role"]);return i!=null&&y(t,["role"],i),t}function XL(){return{}}function ez(s,e){const t={},r=x(e,["mode"]);r!=null&&y(t,["mode"],r);const i=x(e,["dynamicThreshold"]);return i!=null&&y(t,["dynamicThreshold"],i),t}function tz(s,e){const t={},r=x(e,["dynamicRetrievalConfig"]);return r!=null&&y(t,["dynamicRetrievalConfig"],ez(s,r)),t}function nz(s,e){const t={};if(x(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");x(e,["googleSearch"])!=null&&y(t,["googleSearch"],XL());const i=x(e,["googleSearchRetrieval"]);i!=null&&y(t,["googleSearchRetrieval"],tz(s,i));const o=x(e,["codeExecution"]);o!=null&&y(t,["codeExecution"],o);const c=x(e,["functionDeclarations"]);return c!=null&&y(t,["functionDeclarations"],c),t}function sz(s,e){const t={},r=x(e,["mode"]);r!=null&&y(t,["mode"],r);const i=x(e,["allowedFunctionNames"]);return i!=null&&y(t,["allowedFunctionNames"],i),t}function rz(s,e){const t={},r=x(e,["functionCallingConfig"]);return r!=null&&y(t,["functionCallingConfig"],sz(s,r)),t}function iz(s,e,t){const r={},i=x(e,["ttl"]);t!==void 0&&i!=null&&y(t,["ttl"],i);const o=x(e,["expireTime"]);t!==void 0&&o!=null&&y(t,["expireTime"],o);const c=x(e,["displayName"]);t!==void 0&&c!=null&&y(t,["displayName"],c);const d=x(e,["contents"]);if(t!==void 0&&d!=null){let b=ro(s,d);Array.isArray(b)&&(b=b.map(w=>fN(s,w))),y(t,["contents"],b)}const m=x(e,["systemInstruction"]);t!==void 0&&m!=null&&y(t,["systemInstruction"],fN(s,Ws(s,m)));const h=x(e,["tools"]);if(t!==void 0&&h!=null){let b=h;Array.isArray(b)&&(b=b.map(w=>nz(s,w))),y(t,["tools"],b)}const g=x(e,["toolConfig"]);return t!==void 0&&g!=null&&y(t,["toolConfig"],rz(s,g)),r}function az(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["model"],I2(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],iz(s,i,t)),t}function oz(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["_url","name"],io(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function lz(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["_url","name"],io(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function cz(s,e,t){const r={},i=x(e,["ttl"]);t!==void 0&&i!=null&&y(t,["ttl"],i);const o=x(e,["expireTime"]);return t!==void 0&&o!=null&&y(t,["expireTime"],o),r}function dz(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["_url","name"],io(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],cz(s,i,t)),t}function uz(s,e,t){const r={},i=x(e,["pageSize"]);t!==void 0&&i!=null&&y(t,["_query","pageSize"],i);const o=x(e,["pageToken"]);return t!==void 0&&o!=null&&y(t,["_query","pageToken"],o),r}function hz(s,e){const t={},r=x(e,["config"]);return r!=null&&y(t,["config"],uz(s,r,t)),t}function mz(s,e){const t={},r=x(e,["videoMetadata"]);r!=null&&y(t,["videoMetadata"],r);const i=x(e,["thought"]);i!=null&&y(t,["thought"],i);const o=x(e,["codeExecutionResult"]);o!=null&&y(t,["codeExecutionResult"],o);const c=x(e,["executableCode"]);c!=null&&y(t,["executableCode"],c);const d=x(e,["fileData"]);d!=null&&y(t,["fileData"],d);const m=x(e,["functionCall"]);m!=null&&y(t,["functionCall"],m);const h=x(e,["functionResponse"]);h!=null&&y(t,["functionResponse"],h);const g=x(e,["inlineData"]);g!=null&&y(t,["inlineData"],g);const b=x(e,["text"]);return b!=null&&y(t,["text"],b),t}function gN(s,e){const t={},r=x(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>mz(s,c))),y(t,["parts"],o)}const i=x(e,["role"]);return i!=null&&y(t,["role"],i),t}function pz(){return{}}function fz(s,e){const t={},r=x(e,["mode"]);r!=null&&y(t,["mode"],r);const i=x(e,["dynamicThreshold"]);return i!=null&&y(t,["dynamicThreshold"],i),t}function gz(s,e){const t={},r=x(e,["dynamicRetrievalConfig"]);return r!=null&&y(t,["dynamicRetrievalConfig"],fz(s,r)),t}function xz(s,e){const t={},r=x(e,["retrieval"]);r!=null&&y(t,["retrieval"],r),x(e,["googleSearch"])!=null&&y(t,["googleSearch"],pz());const o=x(e,["googleSearchRetrieval"]);o!=null&&y(t,["googleSearchRetrieval"],gz(s,o));const c=x(e,["codeExecution"]);c!=null&&y(t,["codeExecution"],c);const d=x(e,["functionDeclarations"]);return d!=null&&y(t,["functionDeclarations"],d),t}function yz(s,e){const t={},r=x(e,["mode"]);r!=null&&y(t,["mode"],r);const i=x(e,["allowedFunctionNames"]);return i!=null&&y(t,["allowedFunctionNames"],i),t}function bz(s,e){const t={},r=x(e,["functionCallingConfig"]);return r!=null&&y(t,["functionCallingConfig"],yz(s,r)),t}function vz(s,e,t){const r={},i=x(e,["ttl"]);t!==void 0&&i!=null&&y(t,["ttl"],i);const o=x(e,["expireTime"]);t!==void 0&&o!=null&&y(t,["expireTime"],o);const c=x(e,["displayName"]);t!==void 0&&c!=null&&y(t,["displayName"],c);const d=x(e,["contents"]);if(t!==void 0&&d!=null){let b=ro(s,d);Array.isArray(b)&&(b=b.map(w=>gN(s,w))),y(t,["contents"],b)}const m=x(e,["systemInstruction"]);t!==void 0&&m!=null&&y(t,["systemInstruction"],gN(s,Ws(s,m)));const h=x(e,["tools"]);if(t!==void 0&&h!=null){let b=h;Array.isArray(b)&&(b=b.map(w=>xz(s,w))),y(t,["tools"],b)}const g=x(e,["toolConfig"]);return t!==void 0&&g!=null&&y(t,["toolConfig"],bz(s,g)),r}function wz(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["model"],I2(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],vz(s,i,t)),t}function Nz(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["_url","name"],io(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function jz(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["_url","name"],io(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function Sz(s,e,t){const r={},i=x(e,["ttl"]);t!==void 0&&i!=null&&y(t,["ttl"],i);const o=x(e,["expireTime"]);return t!==void 0&&o!=null&&y(t,["expireTime"],o),r}function _z(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["_url","name"],io(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],Sz(s,i,t)),t}function Cz(s,e,t){const r={},i=x(e,["pageSize"]);t!==void 0&&i!=null&&y(t,["_query","pageSize"],i);const o=x(e,["pageToken"]);return t!==void 0&&o!=null&&y(t,["_query","pageToken"],o),r}function kz(s,e){const t={},r=x(e,["config"]);return r!=null&&y(t,["config"],Cz(s,r,t)),t}function zh(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["displayName"]);i!=null&&y(t,["displayName"],i);const o=x(e,["model"]);o!=null&&y(t,["model"],o);const c=x(e,["createTime"]);c!=null&&y(t,["createTime"],c);const d=x(e,["updateTime"]);d!=null&&y(t,["updateTime"],d);const m=x(e,["expireTime"]);m!=null&&y(t,["expireTime"],m);const h=x(e,["usageMetadata"]);return h!=null&&y(t,["usageMetadata"],h),t}function Ez(){return{}}function Tz(s,e){const t={},r=x(e,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const i=x(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>zh(s,c))),y(t,["cachedContents"],o)}return t}function Vh(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["displayName"]);i!=null&&y(t,["displayName"],i);const o=x(e,["model"]);o!=null&&y(t,["model"],o);const c=x(e,["createTime"]);c!=null&&y(t,["createTime"],c);const d=x(e,["updateTime"]);d!=null&&y(t,["updateTime"],d);const m=x(e,["expireTime"]);m!=null&&y(t,["expireTime"],m);const h=x(e,["usageMetadata"]);return h!=null&&y(t,["usageMetadata"],h),t}function Pz(){return{}}function Az(s,e){const t={},r=x(e,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const i=x(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Vh(s,c))),y(t,["cachedContents"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qd;(function(s){s.PAGED_ITEM_BATCH_JOBS="batchJobs",s.PAGED_ITEM_MODELS="models",s.PAGED_ITEM_TUNING_JOBS="tuningJobs",s.PAGED_ITEM_FILES="files",s.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(qd||(qd={}));class N0{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let c={config:{}};r?typeof r=="object"?c=Object.assign({},r):c=r:c={config:{}},c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(o=(i=c.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xN;(function(s){s.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",s.OUTCOME_OK="OUTCOME_OK",s.OUTCOME_FAILED="OUTCOME_FAILED",s.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(xN||(xN={}));var yN;(function(s){s.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",s.PYTHON="PYTHON"})(yN||(yN={}));var bN;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(bN||(bN={}));var vN;(function(s){s.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",s.SEVERITY="SEVERITY",s.PROBABILITY="PROBABILITY"})(vN||(vN={}));var wN;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE",s.OFF="OFF"})(wN||(wN={}));var NN;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(NN||(NN={}));var jN;(function(s){s.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",s.STRING="STRING",s.NUMBER="NUMBER",s.INTEGER="INTEGER",s.BOOLEAN="BOOLEAN",s.ARRAY="ARRAY",s.OBJECT="OBJECT"})(jN||(jN={}));var SN;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.LANGUAGE="LANGUAGE",s.OTHER="OTHER",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.SPII="SPII",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.IMAGE_SAFETY="IMAGE_SAFETY"})(SN||(SN={}));var _N;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(_N||(_N={}));var CN;(function(s){s.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",s.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",s.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",s.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",s.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(CN||(CN={}));var kN;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(kN||(kN={}));var EN;(function(s){s.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",s.ON_DEMAND="ON_DEMAND",s.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(EN||(EN={}));var mm;(function(s){s.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",s.TEXT="TEXT",s.IMAGE="IMAGE",s.AUDIO="AUDIO"})(mm||(mm={}));var TN;(function(s){s.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",s.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",s.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",s.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(TN||(TN={}));var Hg;(function(s){s.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",s.JOB_STATE_QUEUED="JOB_STATE_QUEUED",s.JOB_STATE_PENDING="JOB_STATE_PENDING",s.JOB_STATE_RUNNING="JOB_STATE_RUNNING",s.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",s.JOB_STATE_FAILED="JOB_STATE_FAILED",s.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",s.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",s.JOB_STATE_PAUSED="JOB_STATE_PAUSED",s.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",s.JOB_STATE_UPDATING="JOB_STATE_UPDATING",s.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Hg||(Hg={}));var PN;(function(s){s.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",s.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",s.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",s.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",s.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",s.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",s.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(PN||(PN={}));var AN;(function(s){s.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",s.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",s.BALANCED="BALANCED",s.PRIORITIZE_COST="PRIORITIZE_COST"})(AN||(AN={}));var IN;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(IN||(IN={}));var RN;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.AUTO="AUTO",s.ANY="ANY",s.NONE="NONE"})(RN||(RN={}));var DN;(function(s){s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(DN||(DN={}));var MN;(function(s){s.DONT_ALLOW="DONT_ALLOW",s.ALLOW_ADULT="ALLOW_ADULT",s.ALLOW_ALL="ALLOW_ALL"})(MN||(MN={}));var LN;(function(s){s.auto="auto",s.en="en",s.ja="ja",s.ko="ko",s.hi="hi"})(LN||(LN={}));var zN;(function(s){s.STATE_UNSPECIFIED="STATE_UNSPECIFIED",s.PROCESSING="PROCESSING",s.ACTIVE="ACTIVE",s.FAILED="FAILED"})(zN||(zN={}));var VN;(function(s){s.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",s.UPLOADED="UPLOADED",s.GENERATED="GENERATED"})(VN||(VN={}));var ON;(function(s){s.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",s.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",s.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",s.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",s.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ON||(ON={}));var FN;(function(s){s.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",s.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",s.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",s.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(FN||(FN={}));var UN;(function(s){s.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",s.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",s.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",s.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(UN||(UN={}));var BN;(function(s){s.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",s.TEXT="TEXT",s.IMAGE="IMAGE",s.VIDEO="VIDEO",s.AUDIO="AUDIO",s.DOCUMENT="DOCUMENT"})(BN||(BN={}));var $N;(function(s){s.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",s.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",s.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})($N||($N={}));var qN;(function(s){s.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",s.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",s.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(qN||(qN={}));var GN;(function(s){s.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",s.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",s.NO_INTERRUPTION="NO_INTERRUPTION"})(GN||(GN={}));var HN;(function(s){s.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",s.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",s.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(HN||(HN={}));class bh{get text(){var e,t,r,i,o,c,d,m;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",g=!1;const b=[];for(const w of(m=(d=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[P,C]of Object.entries(w))P!=="text"&&P!=="thought"&&(C!==null||C!==void 0)&&b.push(P);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;g=!0,h+=w.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?h:void 0}get data(){var e,t,r,i,o,c,d,m;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const g=[];for(const b of(m=(d=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[w,P]of Object.entries(b))w!=="inlineData"&&(P!==null||P!==void 0)&&g.push(w);b.inlineData&&typeof b.inlineData.data=="string"&&(h+=atob(b.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,r,i,o,c,d,m;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(m=(d=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,r,i,o,c,d,m,h;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(m=(d=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((g==null?void 0:g.length)!==0)return(h=g==null?void 0:g[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,r,i,o,c,d,m,h;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(m=(d=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((g==null?void 0:g.length)!==0)return(h=g==null?void 0:g[0])===null||h===void 0?void 0:h.output}}class WN{}class KN{}class JN{}class YN{}class Iz{}class ZN{}class QN{}class XN{}class Rz{}class Wg{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Dz{}class Mz{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lz extends ru{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new N0(qd.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=wz(this.apiClient,e);return d=jt("cachedContents",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>Vh(this.apiClient,g))}else{const h=az(this.apiClient,e);return d=jt("cachedContents",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>zh(this.apiClient,g))}}async get(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=Nz(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>Vh(this.apiClient,g))}else{const h=oz(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>zh(this.apiClient,g))}}async delete(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=jz(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(()=>{const g=Pz(),b=new QN;return Object.assign(b,g),b})}else{const h=lz(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(()=>{const g=Ez(),b=new QN;return Object.assign(b,g),b})}}async update(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=_z(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>Vh(this.apiClient,g))}else{const h=dz(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>zh(this.apiClient,g))}}async listInternal(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=kz(this.apiClient,e);return d=jt("cachedContents",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>{const b=Az(this.apiClient,g),w=new XN;return Object.assign(w,b),w})}else{const h=hz(this.apiClient,e);return d=jt("cachedContents",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>{const b=Tz(this.apiClient,g),w=new XN;return Object.assign(w,b),w})}}}function ej(s){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&s[e],r=0;if(t)return t.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&r>=s.length&&(s=void 0),{value:s&&s[r++],done:!s}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bs(s){return this instanceof bs?(this.v=s,this):new bs(s)}function pm(s,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(s,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(P){return function(C){return Promise.resolve(C).then(P,b)}}function d(P,C){r[P]&&(i[P]=function(k){return new Promise(function(E,F){o.push([P,k,E,F])>1||m(P,k)})},C&&(i[P]=C(i[P])))}function m(P,C){try{h(r[P](C))}catch(k){w(o[0][3],k)}}function h(P){P.value instanceof bs?Promise.resolve(P.value.v).then(g,b):w(o[0][2],P)}function g(P){m("next",P)}function b(P){m("throw",P)}function w(P,C){P(C),o.shift(),o.length&&m(o[0][0],o[0][1])}}function Kg(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],t;return e?e.call(s):(s=typeof ej=="function"?ej(s):s[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=s[o]&&function(c){return new Promise(function(d,m){c=s[o](c),i(d,m,c.done,c.value)})}}function i(o,c,d,m){Promise.resolve(m).then(function(h){o({value:h,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zz(s){var e;if(s.candidates==null||s.candidates.length===0)return!1;const t=(e=s.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:F2(t)}function F2(s){if(s.parts===void 0||s.parts.length===0)return!1;for(const e of s.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function Vz(s){if(s.length!==0){if(s[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of s)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Oz(s){if(s===void 0||s.length===0)return[];const e=[],t=s.length;let r=0,i=s[0];for(;r<t;)if(s[r].role==="user")i=s[r],r++;else{const o=[];let c=!0;for(;r<t&&s[r].role==="model";)o.push(s[r]),c&&!F2(s[r])&&(c=!1),r++;c&&(e.push(i),e.push(...o))}return e}class Fz{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Uz(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class Uz{constructor(e,t,r,i={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),Vz(o)}async sendMessage(e){var t;await this.sendPromise;const r=Ws(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,c;const m=(c=(o=(await i).candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content,h=m?[m]:[];this.recordHistory(r,h)})(),await this.sendPromise,i}async sendMessageStream(e){var t;await this.sendPromise;const r=Ws(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){return e?Oz(this.history):this.history}processStreamResponse(e,t){var r,i;return pm(this,arguments,function*(){var c,d,m,h;const g=[];try{for(var b=!0,w=Kg(e),P;P=yield bs(w.next()),c=P.done,!c;b=!0){h=P.value,b=!1;const C=h;if(zz(C)){const k=(i=(r=C.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;k!==void 0&&g.push(k)}yield yield bs(C)}}catch(C){d={error:C}}finally{try{!b&&!c&&(m=w.return)&&(yield bs(m.call(w)))}finally{if(d)throw d.error}}this.recordHistory(t,g)})}recordHistory(e,t){let r=[];t.length>0&&t.every(i=>i.role==="model")?r=t:r.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bz(s,e,t){const r={},i=x(e,["pageSize"]);t!==void 0&&i!=null&&y(t,["_query","pageSize"],i);const o=x(e,["pageToken"]);return t!==void 0&&o!=null&&y(t,["_query","pageToken"],o),r}function $z(s,e){const t={},r=x(e,["config"]);return r!=null&&y(t,["config"],Bz(s,r,t)),t}function qz(s,e){const t={},r=x(e,["details"]);r!=null&&y(t,["details"],r);const i=x(e,["message"]);i!=null&&y(t,["message"],i);const o=x(e,["code"]);return o!=null&&y(t,["code"],o),t}function Gz(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["displayName"]);i!=null&&y(t,["displayName"],i);const o=x(e,["mimeType"]);o!=null&&y(t,["mimeType"],o);const c=x(e,["sizeBytes"]);c!=null&&y(t,["sizeBytes"],c);const d=x(e,["createTime"]);d!=null&&y(t,["createTime"],d);const m=x(e,["expirationTime"]);m!=null&&y(t,["expirationTime"],m);const h=x(e,["updateTime"]);h!=null&&y(t,["updateTime"],h);const g=x(e,["sha256Hash"]);g!=null&&y(t,["sha256Hash"],g);const b=x(e,["uri"]);b!=null&&y(t,["uri"],b);const w=x(e,["downloadUri"]);w!=null&&y(t,["downloadUri"],w);const P=x(e,["state"]);P!=null&&y(t,["state"],P);const C=x(e,["source"]);C!=null&&y(t,["source"],C);const k=x(e,["videoMetadata"]);k!=null&&y(t,["videoMetadata"],k);const E=x(e,["error"]);return E!=null&&y(t,["error"],qz(s,E)),t}function Hz(s,e){const t={},r=x(e,["file"]);r!=null&&y(t,["file"],Gz(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function Wz(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["_url","file"],O2(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function Kz(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["_url","file"],O2(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function Jz(s,e){const t={},r=x(e,["details"]);r!=null&&y(t,["details"],r);const i=x(e,["message"]);i!=null&&y(t,["message"],i);const o=x(e,["code"]);return o!=null&&y(t,["code"],o),t}function Jg(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["displayName"]);i!=null&&y(t,["displayName"],i);const o=x(e,["mimeType"]);o!=null&&y(t,["mimeType"],o);const c=x(e,["sizeBytes"]);c!=null&&y(t,["sizeBytes"],c);const d=x(e,["createTime"]);d!=null&&y(t,["createTime"],d);const m=x(e,["expirationTime"]);m!=null&&y(t,["expirationTime"],m);const h=x(e,["updateTime"]);h!=null&&y(t,["updateTime"],h);const g=x(e,["sha256Hash"]);g!=null&&y(t,["sha256Hash"],g);const b=x(e,["uri"]);b!=null&&y(t,["uri"],b);const w=x(e,["downloadUri"]);w!=null&&y(t,["downloadUri"],w);const P=x(e,["state"]);P!=null&&y(t,["state"],P);const C=x(e,["source"]);C!=null&&y(t,["source"],C);const k=x(e,["videoMetadata"]);k!=null&&y(t,["videoMetadata"],k);const E=x(e,["error"]);return E!=null&&y(t,["error"],Jz(s,E)),t}function Yz(s,e){const t={},r=x(e,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const i=x(e,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Jg(s,c))),y(t,["files"],o)}return t}function Zz(){return{}}function Qz(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xz extends ru{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new N0(qd.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Jg(this.apiClient,t))}async listInternal(e){var t,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$z(this.apiClient,e);return o=jt("files",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>{const h=Yz(this.apiClient,m),g=new Rz;return Object.assign(g,h),g})}}async createInternal(e){var t,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Hz(this.apiClient,e);return o=jt("upload/v1beta/files",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(()=>{const m=Zz(),h=new Dz;return Object.assign(h,m),h})}}async get(e){var t,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Wz(this.apiClient,e);return o=jt("files/{file}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>Jg(this.apiClient,m))}}async delete(e){var t,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Kz(this.apiClient,e);return o=jt("files/{file}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(()=>{const m=Qz(),h=new Mz;return Object.assign(h,m),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eV(s,e){const t={};if(x(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=x(e,["thought"]);r!=null&&y(t,["thought"],r);const i=x(e,["codeExecutionResult"]);i!=null&&y(t,["codeExecutionResult"],i);const o=x(e,["executableCode"]);o!=null&&y(t,["executableCode"],o);const c=x(e,["fileData"]);c!=null&&y(t,["fileData"],c);const d=x(e,["functionCall"]);d!=null&&y(t,["functionCall"],d);const m=x(e,["functionResponse"]);m!=null&&y(t,["functionResponse"],m);const h=x(e,["inlineData"]);h!=null&&y(t,["inlineData"],h);const g=x(e,["text"]);return g!=null&&y(t,["text"],g),t}function tV(s,e){const t={},r=x(e,["videoMetadata"]);r!=null&&y(t,["videoMetadata"],r);const i=x(e,["thought"]);i!=null&&y(t,["thought"],i);const o=x(e,["codeExecutionResult"]);o!=null&&y(t,["codeExecutionResult"],o);const c=x(e,["executableCode"]);c!=null&&y(t,["executableCode"],c);const d=x(e,["fileData"]);d!=null&&y(t,["fileData"],d);const m=x(e,["functionCall"]);m!=null&&y(t,["functionCall"],m);const h=x(e,["functionResponse"]);h!=null&&y(t,["functionResponse"],h);const g=x(e,["inlineData"]);g!=null&&y(t,["inlineData"],g);const b=x(e,["text"]);return b!=null&&y(t,["text"],b),t}function nV(s,e){const t={},r=x(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>eV(s,c))),y(t,["parts"],o)}const i=x(e,["role"]);return i!=null&&y(t,["role"],i),t}function sV(s,e){const t={},r=x(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>tV(s,c))),y(t,["parts"],o)}const i=x(e,["role"]);return i!=null&&y(t,["role"],i),t}function rV(){return{}}function iV(){return{}}function aV(s,e){const t={},r=x(e,["mode"]);r!=null&&y(t,["mode"],r);const i=x(e,["dynamicThreshold"]);return i!=null&&y(t,["dynamicThreshold"],i),t}function oV(s,e){const t={},r=x(e,["mode"]);r!=null&&y(t,["mode"],r);const i=x(e,["dynamicThreshold"]);return i!=null&&y(t,["dynamicThreshold"],i),t}function lV(s,e){const t={},r=x(e,["dynamicRetrievalConfig"]);return r!=null&&y(t,["dynamicRetrievalConfig"],aV(s,r)),t}function cV(s,e){const t={},r=x(e,["dynamicRetrievalConfig"]);return r!=null&&y(t,["dynamicRetrievalConfig"],oV(s,r)),t}function dV(s,e){const t={};if(x(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");x(e,["googleSearch"])!=null&&y(t,["googleSearch"],rV());const i=x(e,["googleSearchRetrieval"]);i!=null&&y(t,["googleSearchRetrieval"],lV(s,i));const o=x(e,["codeExecution"]);o!=null&&y(t,["codeExecution"],o);const c=x(e,["functionDeclarations"]);return c!=null&&y(t,["functionDeclarations"],c),t}function uV(s,e){const t={},r=x(e,["retrieval"]);r!=null&&y(t,["retrieval"],r),x(e,["googleSearch"])!=null&&y(t,["googleSearch"],iV());const o=x(e,["googleSearchRetrieval"]);o!=null&&y(t,["googleSearchRetrieval"],cV(s,o));const c=x(e,["codeExecution"]);c!=null&&y(t,["codeExecution"],c);const d=x(e,["functionDeclarations"]);return d!=null&&y(t,["functionDeclarations"],d),t}function hV(s,e){const t={},r=x(e,["handle"]);if(r!=null&&y(t,["handle"],r),x(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function mV(s,e){const t={},r=x(e,["handle"]);r!=null&&y(t,["handle"],r);const i=x(e,["transparent"]);return i!=null&&y(t,["transparent"],i),t}function pV(){return{}}function tj(){return{}}function fV(s,e){const t={},r=x(e,["disabled"]);r!=null&&y(t,["disabled"],r);const i=x(e,["startOfSpeechSensitivity"]);i!=null&&y(t,["startOfSpeechSensitivity"],i);const o=x(e,["endOfSpeechSensitivity"]);o!=null&&y(t,["endOfSpeechSensitivity"],o);const c=x(e,["prefixPaddingMs"]);c!=null&&y(t,["prefixPaddingMs"],c);const d=x(e,["silenceDurationMs"]);return d!=null&&y(t,["silenceDurationMs"],d),t}function gV(s,e){const t={},r=x(e,["disabled"]);r!=null&&y(t,["disabled"],r);const i=x(e,["startOfSpeechSensitivity"]);i!=null&&y(t,["startOfSpeechSensitivity"],i);const o=x(e,["endOfSpeechSensitivity"]);o!=null&&y(t,["endOfSpeechSensitivity"],o);const c=x(e,["prefixPaddingMs"]);c!=null&&y(t,["prefixPaddingMs"],c);const d=x(e,["silenceDurationMs"]);return d!=null&&y(t,["silenceDurationMs"],d),t}function xV(s,e){const t={},r=x(e,["automaticActivityDetection"]);r!=null&&y(t,["automaticActivityDetection"],fV(s,r));const i=x(e,["activityHandling"]);i!=null&&y(t,["activityHandling"],i);const o=x(e,["turnCoverage"]);return o!=null&&y(t,["turnCoverage"],o),t}function yV(s,e){const t={},r=x(e,["automaticActivityDetection"]);r!=null&&y(t,["automaticActivityDetection"],gV(s,r));const i=x(e,["activityHandling"]);i!=null&&y(t,["activityHandling"],i);const o=x(e,["turnCoverage"]);return o!=null&&y(t,["turnCoverage"],o),t}function bV(s,e){const t={},r=x(e,["targetTokens"]);return r!=null&&y(t,["targetTokens"],r),t}function vV(s,e){const t={},r=x(e,["targetTokens"]);return r!=null&&y(t,["targetTokens"],r),t}function wV(s,e){const t={},r=x(e,["triggerTokens"]);r!=null&&y(t,["triggerTokens"],r);const i=x(e,["slidingWindow"]);return i!=null&&y(t,["slidingWindow"],bV(s,i)),t}function NV(s,e){const t={},r=x(e,["triggerTokens"]);r!=null&&y(t,["triggerTokens"],r);const i=x(e,["slidingWindow"]);return i!=null&&y(t,["slidingWindow"],vV(s,i)),t}function jV(s,e,t){const r={},i=x(e,["generationConfig"]);t!==void 0&&i!=null&&y(t,["setup","generationConfig"],i);const o=x(e,["responseModalities"]);t!==void 0&&o!=null&&y(t,["setup","generationConfig","responseModalities"],o);const c=x(e,["temperature"]);t!==void 0&&c!=null&&y(t,["setup","generationConfig","temperature"],c);const d=x(e,["topP"]);t!==void 0&&d!=null&&y(t,["setup","generationConfig","topP"],d);const m=x(e,["topK"]);t!==void 0&&m!=null&&y(t,["setup","generationConfig","topK"],m);const h=x(e,["maxOutputTokens"]);t!==void 0&&h!=null&&y(t,["setup","generationConfig","maxOutputTokens"],h);const g=x(e,["mediaResolution"]);t!==void 0&&g!=null&&y(t,["setup","generationConfig","mediaResolution"],g);const b=x(e,["seed"]);t!==void 0&&b!=null&&y(t,["setup","generationConfig","seed"],b);const w=x(e,["speechConfig"]);t!==void 0&&w!=null&&y(t,["setup","generationConfig","speechConfig"],w);const P=x(e,["systemInstruction"]);t!==void 0&&P!=null&&y(t,["setup","systemInstruction"],nV(s,Ws(s,P)));const C=x(e,["tools"]);if(t!==void 0&&C!=null){let q=sp(s,C);Array.isArray(q)&&(q=q.map(Z=>dV(s,np(s,Z)))),y(t,["setup","tools"],q)}const k=x(e,["sessionResumption"]);if(t!==void 0&&k!=null&&y(t,["setup","sessionResumption"],hV(s,k)),x(e,["inputAudioTranscription"])!==void 0)throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");const E=x(e,["outputAudioTranscription"]);t!==void 0&&E!=null&&y(t,["setup","outputAudioTranscription"],pV());const F=x(e,["realtimeInputConfig"]);t!==void 0&&F!=null&&y(t,["setup","realtimeInputConfig"],xV(s,F));const U=x(e,["contextWindowCompression"]);return t!==void 0&&U!=null&&y(t,["setup","contextWindowCompression"],wV(s,U)),r}function SV(s,e,t){const r={},i=x(e,["generationConfig"]);t!==void 0&&i!=null&&y(t,["setup","generationConfig"],i);const o=x(e,["responseModalities"]);t!==void 0&&o!=null&&y(t,["setup","generationConfig","responseModalities"],o);const c=x(e,["temperature"]);t!==void 0&&c!=null&&y(t,["setup","generationConfig","temperature"],c);const d=x(e,["topP"]);t!==void 0&&d!=null&&y(t,["setup","generationConfig","topP"],d);const m=x(e,["topK"]);t!==void 0&&m!=null&&y(t,["setup","generationConfig","topK"],m);const h=x(e,["maxOutputTokens"]);t!==void 0&&h!=null&&y(t,["setup","generationConfig","maxOutputTokens"],h);const g=x(e,["mediaResolution"]);t!==void 0&&g!=null&&y(t,["setup","generationConfig","mediaResolution"],g);const b=x(e,["seed"]);t!==void 0&&b!=null&&y(t,["setup","generationConfig","seed"],b);const w=x(e,["speechConfig"]);t!==void 0&&w!=null&&y(t,["setup","generationConfig","speechConfig"],w);const P=x(e,["systemInstruction"]);t!==void 0&&P!=null&&y(t,["setup","systemInstruction"],sV(s,Ws(s,P)));const C=x(e,["tools"]);if(t!==void 0&&C!=null){let Z=sp(s,C);Array.isArray(Z)&&(Z=Z.map(W=>uV(s,np(s,W)))),y(t,["setup","tools"],Z)}const k=x(e,["sessionResumption"]);t!==void 0&&k!=null&&y(t,["setup","sessionResumption"],mV(s,k));const E=x(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&y(t,["setup","inputAudioTranscription"],tj());const F=x(e,["outputAudioTranscription"]);t!==void 0&&F!=null&&y(t,["setup","outputAudioTranscription"],tj());const U=x(e,["realtimeInputConfig"]);t!==void 0&&U!=null&&y(t,["setup","realtimeInputConfig"],yV(s,U));const q=x(e,["contextWindowCompression"]);return t!==void 0&&q!=null&&y(t,["setup","contextWindowCompression"],NV(s,q)),r}function _V(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["setup","model"],Cn(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],jV(s,i,t)),t}function CV(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["setup","model"],Cn(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],SV(s,i,t)),t}function kV(){return{}}function EV(){return{}}function TV(){return{}}function PV(){return{}}function AV(s,e){const t={},r=x(e,["media"]);r!=null&&y(t,["mediaChunks"],R2(s,r));const i=x(e,["audio"]);i!=null&&y(t,["audio"],YL(s,i));const o=x(e,["audioStreamEnd"]);o!=null&&y(t,["audioStreamEnd"],o);const c=x(e,["video"]);c!=null&&y(t,["video"],JL(s,c));const d=x(e,["text"]);return d!=null&&y(t,["text"],d),x(e,["activityStart"])!=null&&y(t,["activityStart"],kV()),x(e,["activityEnd"])!=null&&y(t,["activityEnd"],TV()),t}function IV(s,e){const t={},r=x(e,["media"]);if(r!=null&&y(t,["mediaChunks"],R2(s,r)),x(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=x(e,["audioStreamEnd"]);if(i!=null&&y(t,["audioStreamEnd"],i),x(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(x(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return x(e,["activityStart"])!=null&&y(t,["activityStart"],EV()),x(e,["activityEnd"])!=null&&y(t,["activityEnd"],PV()),t}function RV(){return{}}function DV(){return{}}function MV(s,e){const t={},r=x(e,["thought"]);r!=null&&y(t,["thought"],r);const i=x(e,["codeExecutionResult"]);i!=null&&y(t,["codeExecutionResult"],i);const o=x(e,["executableCode"]);o!=null&&y(t,["executableCode"],o);const c=x(e,["fileData"]);c!=null&&y(t,["fileData"],c);const d=x(e,["functionCall"]);d!=null&&y(t,["functionCall"],d);const m=x(e,["functionResponse"]);m!=null&&y(t,["functionResponse"],m);const h=x(e,["inlineData"]);h!=null&&y(t,["inlineData"],h);const g=x(e,["text"]);return g!=null&&y(t,["text"],g),t}function LV(s,e){const t={},r=x(e,["videoMetadata"]);r!=null&&y(t,["videoMetadata"],r);const i=x(e,["thought"]);i!=null&&y(t,["thought"],i);const o=x(e,["codeExecutionResult"]);o!=null&&y(t,["codeExecutionResult"],o);const c=x(e,["executableCode"]);c!=null&&y(t,["executableCode"],c);const d=x(e,["fileData"]);d!=null&&y(t,["fileData"],d);const m=x(e,["functionCall"]);m!=null&&y(t,["functionCall"],m);const h=x(e,["functionResponse"]);h!=null&&y(t,["functionResponse"],h);const g=x(e,["inlineData"]);g!=null&&y(t,["inlineData"],g);const b=x(e,["text"]);return b!=null&&y(t,["text"],b),t}function zV(s,e){const t={},r=x(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>MV(s,c))),y(t,["parts"],o)}const i=x(e,["role"]);return i!=null&&y(t,["role"],i),t}function VV(s,e){const t={},r=x(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>LV(s,c))),y(t,["parts"],o)}const i=x(e,["role"]);return i!=null&&y(t,["role"],i),t}function nj(s,e){const t={},r=x(e,["text"]);r!=null&&y(t,["text"],r);const i=x(e,["finished"]);return i!=null&&y(t,["finished"],i),t}function sj(s,e){const t={},r=x(e,["text"]);r!=null&&y(t,["text"],r);const i=x(e,["finished"]);return i!=null&&y(t,["finished"],i),t}function OV(s,e){const t={},r=x(e,["modelTurn"]);r!=null&&y(t,["modelTurn"],zV(s,r));const i=x(e,["turnComplete"]);i!=null&&y(t,["turnComplete"],i);const o=x(e,["interrupted"]);o!=null&&y(t,["interrupted"],o);const c=x(e,["groundingMetadata"]);c!=null&&y(t,["groundingMetadata"],c);const d=x(e,["generationComplete"]);d!=null&&y(t,["generationComplete"],d);const m=x(e,["inputTranscription"]);m!=null&&y(t,["inputTranscription"],nj(s,m));const h=x(e,["outputTranscription"]);return h!=null&&y(t,["outputTranscription"],nj(s,h)),t}function FV(s,e){const t={},r=x(e,["modelTurn"]);r!=null&&y(t,["modelTurn"],VV(s,r));const i=x(e,["turnComplete"]);i!=null&&y(t,["turnComplete"],i);const o=x(e,["interrupted"]);o!=null&&y(t,["interrupted"],o);const c=x(e,["groundingMetadata"]);c!=null&&y(t,["groundingMetadata"],c);const d=x(e,["generationComplete"]);d!=null&&y(t,["generationComplete"],d);const m=x(e,["inputTranscription"]);m!=null&&y(t,["inputTranscription"],sj(s,m));const h=x(e,["outputTranscription"]);return h!=null&&y(t,["outputTranscription"],sj(s,h)),t}function UV(s,e){const t={},r=x(e,["id"]);r!=null&&y(t,["id"],r);const i=x(e,["args"]);i!=null&&y(t,["args"],i);const o=x(e,["name"]);return o!=null&&y(t,["name"],o),t}function BV(s,e){const t={},r=x(e,["args"]);r!=null&&y(t,["args"],r);const i=x(e,["name"]);return i!=null&&y(t,["name"],i),t}function $V(s,e){const t={},r=x(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>UV(s,o))),y(t,["functionCalls"],i)}return t}function qV(s,e){const t={},r=x(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>BV(s,o))),y(t,["functionCalls"],i)}return t}function GV(s,e){const t={},r=x(e,["ids"]);return r!=null&&y(t,["ids"],r),t}function HV(s,e){const t={},r=x(e,["ids"]);return r!=null&&y(t,["ids"],r),t}function vh(s,e){const t={},r=x(e,["modality"]);r!=null&&y(t,["modality"],r);const i=x(e,["tokenCount"]);return i!=null&&y(t,["tokenCount"],i),t}function wh(s,e){const t={},r=x(e,["modality"]);r!=null&&y(t,["modality"],r);const i=x(e,["tokenCount"]);return i!=null&&y(t,["tokenCount"],i),t}function WV(s,e){const t={},r=x(e,["promptTokenCount"]);r!=null&&y(t,["promptTokenCount"],r);const i=x(e,["cachedContentTokenCount"]);i!=null&&y(t,["cachedContentTokenCount"],i);const o=x(e,["responseTokenCount"]);o!=null&&y(t,["responseTokenCount"],o);const c=x(e,["toolUsePromptTokenCount"]);c!=null&&y(t,["toolUsePromptTokenCount"],c);const d=x(e,["thoughtsTokenCount"]);d!=null&&y(t,["thoughtsTokenCount"],d);const m=x(e,["totalTokenCount"]);m!=null&&y(t,["totalTokenCount"],m);const h=x(e,["promptTokensDetails"]);if(h!=null){let P=h;Array.isArray(P)&&(P=P.map(C=>vh(s,C))),y(t,["promptTokensDetails"],P)}const g=x(e,["cacheTokensDetails"]);if(g!=null){let P=g;Array.isArray(P)&&(P=P.map(C=>vh(s,C))),y(t,["cacheTokensDetails"],P)}const b=x(e,["responseTokensDetails"]);if(b!=null){let P=b;Array.isArray(P)&&(P=P.map(C=>vh(s,C))),y(t,["responseTokensDetails"],P)}const w=x(e,["toolUsePromptTokensDetails"]);if(w!=null){let P=w;Array.isArray(P)&&(P=P.map(C=>vh(s,C))),y(t,["toolUsePromptTokensDetails"],P)}return t}function KV(s,e){const t={},r=x(e,["promptTokenCount"]);r!=null&&y(t,["promptTokenCount"],r);const i=x(e,["cachedContentTokenCount"]);i!=null&&y(t,["cachedContentTokenCount"],i);const o=x(e,["candidatesTokenCount"]);o!=null&&y(t,["responseTokenCount"],o);const c=x(e,["toolUsePromptTokenCount"]);c!=null&&y(t,["toolUsePromptTokenCount"],c);const d=x(e,["thoughtsTokenCount"]);d!=null&&y(t,["thoughtsTokenCount"],d);const m=x(e,["totalTokenCount"]);m!=null&&y(t,["totalTokenCount"],m);const h=x(e,["promptTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(k=>wh(s,k))),y(t,["promptTokensDetails"],C)}const g=x(e,["cacheTokensDetails"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(k=>wh(s,k))),y(t,["cacheTokensDetails"],C)}const b=x(e,["candidatesTokensDetails"]);if(b!=null){let C=b;Array.isArray(C)&&(C=C.map(k=>wh(s,k))),y(t,["responseTokensDetails"],C)}const w=x(e,["toolUsePromptTokensDetails"]);if(w!=null){let C=w;Array.isArray(C)&&(C=C.map(k=>wh(s,k))),y(t,["toolUsePromptTokensDetails"],C)}const P=x(e,["trafficType"]);return P!=null&&y(t,["trafficType"],P),t}function JV(s,e){const t={},r=x(e,["timeLeft"]);return r!=null&&y(t,["timeLeft"],r),t}function YV(s,e){const t={},r=x(e,["timeLeft"]);return r!=null&&y(t,["timeLeft"],r),t}function ZV(s,e){const t={},r=x(e,["newHandle"]);r!=null&&y(t,["newHandle"],r);const i=x(e,["resumable"]);i!=null&&y(t,["resumable"],i);const o=x(e,["lastConsumedClientMessageIndex"]);return o!=null&&y(t,["lastConsumedClientMessageIndex"],o),t}function QV(s,e){const t={},r=x(e,["newHandle"]);r!=null&&y(t,["newHandle"],r);const i=x(e,["resumable"]);i!=null&&y(t,["resumable"],i);const o=x(e,["lastConsumedClientMessageIndex"]);return o!=null&&y(t,["lastConsumedClientMessageIndex"],o),t}function XV(s,e){const t={};x(e,["setupComplete"])!=null&&y(t,["setupComplete"],RV());const i=x(e,["serverContent"]);i!=null&&y(t,["serverContent"],OV(s,i));const o=x(e,["toolCall"]);o!=null&&y(t,["toolCall"],$V(s,o));const c=x(e,["toolCallCancellation"]);c!=null&&y(t,["toolCallCancellation"],GV(s,c));const d=x(e,["usageMetadata"]);d!=null&&y(t,["usageMetadata"],WV(s,d));const m=x(e,["goAway"]);m!=null&&y(t,["goAway"],JV(s,m));const h=x(e,["sessionResumptionUpdate"]);return h!=null&&y(t,["sessionResumptionUpdate"],ZV(s,h)),t}function eO(s,e){const t={};x(e,["setupComplete"])!=null&&y(t,["setupComplete"],DV());const i=x(e,["serverContent"]);i!=null&&y(t,["serverContent"],FV(s,i));const o=x(e,["toolCall"]);o!=null&&y(t,["toolCall"],qV(s,o));const c=x(e,["toolCallCancellation"]);c!=null&&y(t,["toolCallCancellation"],HV(s,c));const d=x(e,["usageMetadata"]);d!=null&&y(t,["usageMetadata"],KV(s,d));const m=x(e,["goAway"]);m!=null&&y(t,["goAway"],YV(s,m));const h=x(e,["sessionResumptionUpdate"]);return h!=null&&y(t,["sessionResumptionUpdate"],QV(s,h)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tO(s,e){const t={};if(x(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=x(e,["thought"]);r!=null&&y(t,["thought"],r);const i=x(e,["codeExecutionResult"]);i!=null&&y(t,["codeExecutionResult"],i);const o=x(e,["executableCode"]);o!=null&&y(t,["executableCode"],o);const c=x(e,["fileData"]);c!=null&&y(t,["fileData"],c);const d=x(e,["functionCall"]);d!=null&&y(t,["functionCall"],d);const m=x(e,["functionResponse"]);m!=null&&y(t,["functionResponse"],m);const h=x(e,["inlineData"]);h!=null&&y(t,["inlineData"],h);const g=x(e,["text"]);return g!=null&&y(t,["text"],g),t}function rp(s,e){const t={},r=x(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>tO(s,c))),y(t,["parts"],o)}const i=x(e,["role"]);return i!=null&&y(t,["role"],i),t}function nO(s,e){const t={};if(x(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(e,["category"]);r!=null&&y(t,["category"],r);const i=x(e,["threshold"]);return i!=null&&y(t,["threshold"],i),t}function sO(){return{}}function rO(s,e){const t={},r=x(e,["mode"]);r!=null&&y(t,["mode"],r);const i=x(e,["dynamicThreshold"]);return i!=null&&y(t,["dynamicThreshold"],i),t}function iO(s,e){const t={},r=x(e,["dynamicRetrievalConfig"]);return r!=null&&y(t,["dynamicRetrievalConfig"],rO(s,r)),t}function aO(s,e){const t={};if(x(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");x(e,["googleSearch"])!=null&&y(t,["googleSearch"],sO());const i=x(e,["googleSearchRetrieval"]);i!=null&&y(t,["googleSearchRetrieval"],iO(s,i));const o=x(e,["codeExecution"]);o!=null&&y(t,["codeExecution"],o);const c=x(e,["functionDeclarations"]);return c!=null&&y(t,["functionDeclarations"],c),t}function oO(s,e){const t={},r=x(e,["mode"]);r!=null&&y(t,["mode"],r);const i=x(e,["allowedFunctionNames"]);return i!=null&&y(t,["allowedFunctionNames"],i),t}function lO(s,e){const t={},r=x(e,["functionCallingConfig"]);return r!=null&&y(t,["functionCallingConfig"],oO(s,r)),t}function cO(s,e){const t={},r=x(e,["voiceName"]);return r!=null&&y(t,["voiceName"],r),t}function dO(s,e){const t={},r=x(e,["prebuiltVoiceConfig"]);return r!=null&&y(t,["prebuiltVoiceConfig"],cO(s,r)),t}function uO(s,e){const t={},r=x(e,["voiceConfig"]);r!=null&&y(t,["voiceConfig"],dO(s,r));const i=x(e,["languageCode"]);return i!=null&&y(t,["languageCode"],i),t}function hO(s,e){const t={},r=x(e,["includeThoughts"]);r!=null&&y(t,["includeThoughts"],r);const i=x(e,["thinkingBudget"]);return i!=null&&y(t,["thinkingBudget"],i),t}function mO(s,e,t){const r={},i=x(e,["systemInstruction"]);t!==void 0&&i!=null&&y(t,["systemInstruction"],rp(s,Ws(s,i)));const o=x(e,["temperature"]);o!=null&&y(r,["temperature"],o);const c=x(e,["topP"]);c!=null&&y(r,["topP"],c);const d=x(e,["topK"]);d!=null&&y(r,["topK"],d);const m=x(e,["candidateCount"]);m!=null&&y(r,["candidateCount"],m);const h=x(e,["maxOutputTokens"]);h!=null&&y(r,["maxOutputTokens"],h);const g=x(e,["stopSequences"]);g!=null&&y(r,["stopSequences"],g);const b=x(e,["responseLogprobs"]);b!=null&&y(r,["responseLogprobs"],b);const w=x(e,["logprobs"]);w!=null&&y(r,["logprobs"],w);const P=x(e,["presencePenalty"]);P!=null&&y(r,["presencePenalty"],P);const C=x(e,["frequencyPenalty"]);C!=null&&y(r,["frequencyPenalty"],C);const k=x(e,["seed"]);k!=null&&y(r,["seed"],k);const E=x(e,["responseMimeType"]);E!=null&&y(r,["responseMimeType"],E);const F=x(e,["responseSchema"]);if(F!=null&&y(r,["responseSchema"],L2(s,F)),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=x(e,["safetySettings"]);if(t!==void 0&&U!=null){let V=U;Array.isArray(V)&&(V=V.map(A=>nO(s,A))),y(t,["safetySettings"],V)}const q=x(e,["tools"]);if(t!==void 0&&q!=null){let V=sp(s,q);Array.isArray(V)&&(V=V.map(A=>aO(s,np(s,A)))),y(t,["tools"],V)}const Z=x(e,["toolConfig"]);if(t!==void 0&&Z!=null&&y(t,["toolConfig"],lO(s,Z)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=x(e,["cachedContent"]);t!==void 0&&W!=null&&y(t,["cachedContent"],io(s,W));const $=x(e,["responseModalities"]);$!=null&&y(r,["responseModalities"],$);const R=x(e,["mediaResolution"]);R!=null&&y(r,["mediaResolution"],R);const _=x(e,["speechConfig"]);if(_!=null&&y(r,["speechConfig"],uO(s,z2(s,_))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=x(e,["thinkingConfig"]);return I!=null&&y(r,["thinkingConfig"],hO(s,I)),r}function rj(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","model"],Cn(s,r));const i=x(e,["contents"]);if(i!=null){let c=ro(s,i);Array.isArray(c)&&(c=c.map(d=>rp(s,d))),y(t,["contents"],c)}const o=x(e,["config"]);return o!=null&&y(t,["generationConfig"],mO(s,o,t)),t}function pO(s,e,t){const r={},i=x(e,["taskType"]);t!==void 0&&i!=null&&y(t,["requests[]","taskType"],i);const o=x(e,["title"]);t!==void 0&&o!=null&&y(t,["requests[]","title"],o);const c=x(e,["outputDimensionality"]);if(t!==void 0&&c!=null&&y(t,["requests[]","outputDimensionality"],c),x(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function fO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","model"],Cn(s,r));const i=x(e,["contents"]);i!=null&&y(t,["requests[]","content"],M2(s,i));const o=x(e,["config"]);o!=null&&y(t,["config"],pO(s,o,t));const c=x(e,["model"]);return c!==void 0&&y(t,["requests[]","model"],Cn(s,c)),t}function gO(s,e,t){const r={};if(x(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=x(e,["numberOfImages"]);t!==void 0&&i!=null&&y(t,["parameters","sampleCount"],i);const o=x(e,["aspectRatio"]);t!==void 0&&o!=null&&y(t,["parameters","aspectRatio"],o);const c=x(e,["guidanceScale"]);if(t!==void 0&&c!=null&&y(t,["parameters","guidanceScale"],c),x(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=x(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&y(t,["parameters","safetySetting"],d);const m=x(e,["personGeneration"]);t!==void 0&&m!=null&&y(t,["parameters","personGeneration"],m);const h=x(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&y(t,["parameters","includeSafetyAttributes"],h);const g=x(e,["includeRaiReason"]);t!==void 0&&g!=null&&y(t,["parameters","includeRaiReason"],g);const b=x(e,["language"]);t!==void 0&&b!=null&&y(t,["parameters","language"],b);const w=x(e,["outputMimeType"]);t!==void 0&&w!=null&&y(t,["parameters","outputOptions","mimeType"],w);const P=x(e,["outputCompressionQuality"]);if(t!==void 0&&P!=null&&y(t,["parameters","outputOptions","compressionQuality"],P),x(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function xO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","model"],Cn(s,r));const i=x(e,["prompt"]);i!=null&&y(t,["instances[0]","prompt"],i);const o=x(e,["config"]);return o!=null&&y(t,["config"],gO(s,o,t)),t}function yO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","name"],Cn(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function bO(s,e,t){const r={},i=x(e,["displayName"]);t!==void 0&&i!=null&&y(t,["displayName"],i);const o=x(e,["description"]);return t!==void 0&&o!=null&&y(t,["description"],o),r}function vO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","name"],Cn(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],bO(s,i,t)),t}function wO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","name"],Cn(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function NO(s,e){const t={};if(x(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function jO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","model"],Cn(s,r));const i=x(e,["contents"]);if(i!=null){let c=ro(s,i);Array.isArray(c)&&(c=c.map(d=>rp(s,d))),y(t,["contents"],c)}const o=x(e,["config"]);return o!=null&&y(t,["config"],NO(s,o)),t}function SO(s,e){const t={};if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=x(e,["imageBytes"]);r!=null&&y(t,["bytesBase64Encoded"],ao(s,r));const i=x(e,["mimeType"]);return i!=null&&y(t,["mimeType"],i),t}function _O(s,e,t){const r={},i=x(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&y(t,["parameters","sampleCount"],i),x(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=x(e,["durationSeconds"]);if(t!==void 0&&o!=null&&y(t,["parameters","durationSeconds"],o),x(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=x(e,["aspectRatio"]);if(t!==void 0&&c!=null&&y(t,["parameters","aspectRatio"],c),x(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=x(e,["personGeneration"]);if(t!==void 0&&d!=null&&y(t,["parameters","personGeneration"],d),x(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=x(e,["negativePrompt"]);if(t!==void 0&&m!=null&&y(t,["parameters","negativePrompt"],m),x(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function CO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","model"],Cn(s,r));const i=x(e,["prompt"]);i!=null&&y(t,["instances[0]","prompt"],i);const o=x(e,["image"]);o!=null&&y(t,["instances[0]","image"],SO(s,o));const c=x(e,["config"]);return c!=null&&y(t,["config"],_O(s,c,t)),t}function kO(s,e){const t={},r=x(e,["videoMetadata"]);r!=null&&y(t,["videoMetadata"],r);const i=x(e,["thought"]);i!=null&&y(t,["thought"],i);const o=x(e,["codeExecutionResult"]);o!=null&&y(t,["codeExecutionResult"],o);const c=x(e,["executableCode"]);c!=null&&y(t,["executableCode"],c);const d=x(e,["fileData"]);d!=null&&y(t,["fileData"],d);const m=x(e,["functionCall"]);m!=null&&y(t,["functionCall"],m);const h=x(e,["functionResponse"]);h!=null&&y(t,["functionResponse"],h);const g=x(e,["inlineData"]);g!=null&&y(t,["inlineData"],g);const b=x(e,["text"]);return b!=null&&y(t,["text"],b),t}function gc(s,e){const t={},r=x(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>kO(s,c))),y(t,["parts"],o)}const i=x(e,["role"]);return i!=null&&y(t,["role"],i),t}function EO(s,e){const t={},r=x(e,["featureSelectionPreference"]);return r!=null&&y(t,["featureSelectionPreference"],r),t}function TO(s,e){const t={},r=x(e,["method"]);r!=null&&y(t,["method"],r);const i=x(e,["category"]);i!=null&&y(t,["category"],i);const o=x(e,["threshold"]);return o!=null&&y(t,["threshold"],o),t}function PO(){return{}}function AO(s,e){const t={},r=x(e,["mode"]);r!=null&&y(t,["mode"],r);const i=x(e,["dynamicThreshold"]);return i!=null&&y(t,["dynamicThreshold"],i),t}function IO(s,e){const t={},r=x(e,["dynamicRetrievalConfig"]);return r!=null&&y(t,["dynamicRetrievalConfig"],AO(s,r)),t}function U2(s,e){const t={},r=x(e,["retrieval"]);r!=null&&y(t,["retrieval"],r),x(e,["googleSearch"])!=null&&y(t,["googleSearch"],PO());const o=x(e,["googleSearchRetrieval"]);o!=null&&y(t,["googleSearchRetrieval"],IO(s,o));const c=x(e,["codeExecution"]);c!=null&&y(t,["codeExecution"],c);const d=x(e,["functionDeclarations"]);return d!=null&&y(t,["functionDeclarations"],d),t}function RO(s,e){const t={},r=x(e,["mode"]);r!=null&&y(t,["mode"],r);const i=x(e,["allowedFunctionNames"]);return i!=null&&y(t,["allowedFunctionNames"],i),t}function DO(s,e){const t={},r=x(e,["functionCallingConfig"]);return r!=null&&y(t,["functionCallingConfig"],RO(s,r)),t}function MO(s,e){const t={},r=x(e,["voiceName"]);return r!=null&&y(t,["voiceName"],r),t}function LO(s,e){const t={},r=x(e,["prebuiltVoiceConfig"]);return r!=null&&y(t,["prebuiltVoiceConfig"],MO(s,r)),t}function zO(s,e){const t={},r=x(e,["voiceConfig"]);r!=null&&y(t,["voiceConfig"],LO(s,r));const i=x(e,["languageCode"]);return i!=null&&y(t,["languageCode"],i),t}function VO(s,e){const t={},r=x(e,["includeThoughts"]);r!=null&&y(t,["includeThoughts"],r);const i=x(e,["thinkingBudget"]);return i!=null&&y(t,["thinkingBudget"],i),t}function OO(s,e,t){const r={},i=x(e,["systemInstruction"]);t!==void 0&&i!=null&&y(t,["systemInstruction"],gc(s,Ws(s,i)));const o=x(e,["temperature"]);o!=null&&y(r,["temperature"],o);const c=x(e,["topP"]);c!=null&&y(r,["topP"],c);const d=x(e,["topK"]);d!=null&&y(r,["topK"],d);const m=x(e,["candidateCount"]);m!=null&&y(r,["candidateCount"],m);const h=x(e,["maxOutputTokens"]);h!=null&&y(r,["maxOutputTokens"],h);const g=x(e,["stopSequences"]);g!=null&&y(r,["stopSequences"],g);const b=x(e,["responseLogprobs"]);b!=null&&y(r,["responseLogprobs"],b);const w=x(e,["logprobs"]);w!=null&&y(r,["logprobs"],w);const P=x(e,["presencePenalty"]);P!=null&&y(r,["presencePenalty"],P);const C=x(e,["frequencyPenalty"]);C!=null&&y(r,["frequencyPenalty"],C);const k=x(e,["seed"]);k!=null&&y(r,["seed"],k);const E=x(e,["responseMimeType"]);E!=null&&y(r,["responseMimeType"],E);const F=x(e,["responseSchema"]);F!=null&&y(r,["responseSchema"],L2(s,F));const U=x(e,["routingConfig"]);U!=null&&y(r,["routingConfig"],U);const q=x(e,["modelSelectionConfig"]);q!=null&&y(r,["modelConfig"],EO(s,q));const Z=x(e,["safetySettings"]);if(t!==void 0&&Z!=null){let ne=Z;Array.isArray(ne)&&(ne=ne.map(pe=>TO(s,pe))),y(t,["safetySettings"],ne)}const W=x(e,["tools"]);if(t!==void 0&&W!=null){let ne=sp(s,W);Array.isArray(ne)&&(ne=ne.map(pe=>U2(s,np(s,pe)))),y(t,["tools"],ne)}const $=x(e,["toolConfig"]);t!==void 0&&$!=null&&y(t,["toolConfig"],DO(s,$));const R=x(e,["labels"]);t!==void 0&&R!=null&&y(t,["labels"],R);const _=x(e,["cachedContent"]);t!==void 0&&_!=null&&y(t,["cachedContent"],io(s,_));const I=x(e,["responseModalities"]);I!=null&&y(r,["responseModalities"],I);const V=x(e,["mediaResolution"]);V!=null&&y(r,["mediaResolution"],V);const A=x(e,["speechConfig"]);A!=null&&y(r,["speechConfig"],zO(s,z2(s,A)));const B=x(e,["audioTimestamp"]);B!=null&&y(r,["audioTimestamp"],B);const L=x(e,["thinkingConfig"]);return L!=null&&y(r,["thinkingConfig"],VO(s,L)),r}function ij(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","model"],Cn(s,r));const i=x(e,["contents"]);if(i!=null){let c=ro(s,i);Array.isArray(c)&&(c=c.map(d=>gc(s,d))),y(t,["contents"],c)}const o=x(e,["config"]);return o!=null&&y(t,["generationConfig"],OO(s,o,t)),t}function FO(s,e,t){const r={},i=x(e,["taskType"]);t!==void 0&&i!=null&&y(t,["instances[]","task_type"],i);const o=x(e,["title"]);t!==void 0&&o!=null&&y(t,["instances[]","title"],o);const c=x(e,["outputDimensionality"]);t!==void 0&&c!=null&&y(t,["parameters","outputDimensionality"],c);const d=x(e,["mimeType"]);t!==void 0&&d!=null&&y(t,["instances[]","mimeType"],d);const m=x(e,["autoTruncate"]);return t!==void 0&&m!=null&&y(t,["parameters","autoTruncate"],m),r}function UO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","model"],Cn(s,r));const i=x(e,["contents"]);i!=null&&y(t,["instances[]","content"],M2(s,i));const o=x(e,["config"]);return o!=null&&y(t,["config"],FO(s,o,t)),t}function BO(s,e,t){const r={},i=x(e,["outputGcsUri"]);t!==void 0&&i!=null&&y(t,["parameters","storageUri"],i);const o=x(e,["negativePrompt"]);t!==void 0&&o!=null&&y(t,["parameters","negativePrompt"],o);const c=x(e,["numberOfImages"]);t!==void 0&&c!=null&&y(t,["parameters","sampleCount"],c);const d=x(e,["aspectRatio"]);t!==void 0&&d!=null&&y(t,["parameters","aspectRatio"],d);const m=x(e,["guidanceScale"]);t!==void 0&&m!=null&&y(t,["parameters","guidanceScale"],m);const h=x(e,["seed"]);t!==void 0&&h!=null&&y(t,["parameters","seed"],h);const g=x(e,["safetyFilterLevel"]);t!==void 0&&g!=null&&y(t,["parameters","safetySetting"],g);const b=x(e,["personGeneration"]);t!==void 0&&b!=null&&y(t,["parameters","personGeneration"],b);const w=x(e,["includeSafetyAttributes"]);t!==void 0&&w!=null&&y(t,["parameters","includeSafetyAttributes"],w);const P=x(e,["includeRaiReason"]);t!==void 0&&P!=null&&y(t,["parameters","includeRaiReason"],P);const C=x(e,["language"]);t!==void 0&&C!=null&&y(t,["parameters","language"],C);const k=x(e,["outputMimeType"]);t!==void 0&&k!=null&&y(t,["parameters","outputOptions","mimeType"],k);const E=x(e,["outputCompressionQuality"]);t!==void 0&&E!=null&&y(t,["parameters","outputOptions","compressionQuality"],E);const F=x(e,["addWatermark"]);t!==void 0&&F!=null&&y(t,["parameters","addWatermark"],F);const U=x(e,["enhancePrompt"]);return t!==void 0&&U!=null&&y(t,["parameters","enhancePrompt"],U),r}function $O(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","model"],Cn(s,r));const i=x(e,["prompt"]);i!=null&&y(t,["instances[0]","prompt"],i);const o=x(e,["config"]);return o!=null&&y(t,["config"],BO(s,o,t)),t}function qO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","name"],Cn(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function GO(s,e,t){const r={},i=x(e,["displayName"]);t!==void 0&&i!=null&&y(t,["displayName"],i);const o=x(e,["description"]);return t!==void 0&&o!=null&&y(t,["description"],o),r}function HO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","model"],Cn(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],GO(s,i,t)),t}function WO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","name"],Cn(s,r));const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function KO(s,e,t){const r={},i=x(e,["systemInstruction"]);t!==void 0&&i!=null&&y(t,["systemInstruction"],gc(s,Ws(s,i)));const o=x(e,["tools"]);if(t!==void 0&&o!=null){let d=o;Array.isArray(d)&&(d=d.map(m=>U2(s,m))),y(t,["tools"],d)}const c=x(e,["generationConfig"]);return t!==void 0&&c!=null&&y(t,["generationConfig"],c),r}function JO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","model"],Cn(s,r));const i=x(e,["contents"]);if(i!=null){let c=ro(s,i);Array.isArray(c)&&(c=c.map(d=>gc(s,d))),y(t,["contents"],c)}const o=x(e,["config"]);return o!=null&&y(t,["config"],KO(s,o,t)),t}function YO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","model"],Cn(s,r));const i=x(e,["contents"]);if(i!=null){let c=ro(s,i);Array.isArray(c)&&(c=c.map(d=>gc(s,d))),y(t,["contents"],c)}const o=x(e,["config"]);return o!=null&&y(t,["config"],o),t}function ZO(s,e){const t={},r=x(e,["gcsUri"]);r!=null&&y(t,["gcsUri"],r);const i=x(e,["imageBytes"]);i!=null&&y(t,["bytesBase64Encoded"],ao(s,i));const o=x(e,["mimeType"]);return o!=null&&y(t,["mimeType"],o),t}function QO(s,e,t){const r={},i=x(e,["numberOfVideos"]);t!==void 0&&i!=null&&y(t,["parameters","sampleCount"],i);const o=x(e,["outputGcsUri"]);t!==void 0&&o!=null&&y(t,["parameters","storageUri"],o);const c=x(e,["fps"]);t!==void 0&&c!=null&&y(t,["parameters","fps"],c);const d=x(e,["durationSeconds"]);t!==void 0&&d!=null&&y(t,["parameters","durationSeconds"],d);const m=x(e,["seed"]);t!==void 0&&m!=null&&y(t,["parameters","seed"],m);const h=x(e,["aspectRatio"]);t!==void 0&&h!=null&&y(t,["parameters","aspectRatio"],h);const g=x(e,["resolution"]);t!==void 0&&g!=null&&y(t,["parameters","resolution"],g);const b=x(e,["personGeneration"]);t!==void 0&&b!=null&&y(t,["parameters","personGeneration"],b);const w=x(e,["pubsubTopic"]);t!==void 0&&w!=null&&y(t,["parameters","pubsubTopic"],w);const P=x(e,["negativePrompt"]);t!==void 0&&P!=null&&y(t,["parameters","negativePrompt"],P);const C=x(e,["enhancePrompt"]);return t!==void 0&&C!=null&&y(t,["parameters","enhancePrompt"],C),r}function XO(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["_url","model"],Cn(s,r));const i=x(e,["prompt"]);i!=null&&y(t,["instances[0]","prompt"],i);const o=x(e,["image"]);o!=null&&y(t,["instances[0]","image"],ZO(s,o));const c=x(e,["config"]);return c!=null&&y(t,["config"],QO(s,c,t)),t}function eF(s,e){const t={},r=x(e,["thought"]);r!=null&&y(t,["thought"],r);const i=x(e,["codeExecutionResult"]);i!=null&&y(t,["codeExecutionResult"],i);const o=x(e,["executableCode"]);o!=null&&y(t,["executableCode"],o);const c=x(e,["fileData"]);c!=null&&y(t,["fileData"],c);const d=x(e,["functionCall"]);d!=null&&y(t,["functionCall"],d);const m=x(e,["functionResponse"]);m!=null&&y(t,["functionResponse"],m);const h=x(e,["inlineData"]);h!=null&&y(t,["inlineData"],h);const g=x(e,["text"]);return g!=null&&y(t,["text"],g),t}function tF(s,e){const t={},r=x(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>eF(s,c))),y(t,["parts"],o)}const i=x(e,["role"]);return i!=null&&y(t,["role"],i),t}function nF(s,e){const t={},r=x(e,["citationSources"]);return r!=null&&y(t,["citations"],r),t}function sF(s,e){const t={},r=x(e,["content"]);r!=null&&y(t,["content"],tF(s,r));const i=x(e,["citationMetadata"]);i!=null&&y(t,["citationMetadata"],nF(s,i));const o=x(e,["tokenCount"]);o!=null&&y(t,["tokenCount"],o);const c=x(e,["finishReason"]);c!=null&&y(t,["finishReason"],c);const d=x(e,["avgLogprobs"]);d!=null&&y(t,["avgLogprobs"],d);const m=x(e,["groundingMetadata"]);m!=null&&y(t,["groundingMetadata"],m);const h=x(e,["index"]);h!=null&&y(t,["index"],h);const g=x(e,["logprobsResult"]);g!=null&&y(t,["logprobsResult"],g);const b=x(e,["safetyRatings"]);return b!=null&&y(t,["safetyRatings"],b),t}function aj(s,e){const t={},r=x(e,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(m=>sF(s,m))),y(t,["candidates"],d)}const i=x(e,["modelVersion"]);i!=null&&y(t,["modelVersion"],i);const o=x(e,["promptFeedback"]);o!=null&&y(t,["promptFeedback"],o);const c=x(e,["usageMetadata"]);return c!=null&&y(t,["usageMetadata"],c),t}function rF(s,e){const t={},r=x(e,["values"]);return r!=null&&y(t,["values"],r),t}function iF(){return{}}function aF(s,e){const t={},r=x(e,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>rF(s,c))),y(t,["embeddings"],o)}return x(e,["metadata"])!=null&&y(t,["metadata"],iF()),t}function oF(s,e){const t={},r=x(e,["bytesBase64Encoded"]);r!=null&&y(t,["imageBytes"],ao(s,r));const i=x(e,["mimeType"]);return i!=null&&y(t,["mimeType"],i),t}function B2(s,e){const t={},r=x(e,["safetyAttributes","categories"]);r!=null&&y(t,["categories"],r);const i=x(e,["safetyAttributes","scores"]);i!=null&&y(t,["scores"],i);const o=x(e,["contentType"]);return o!=null&&y(t,["contentType"],o),t}function lF(s,e){const t={},r=x(e,["_self"]);r!=null&&y(t,["image"],oF(s,r));const i=x(e,["raiFilteredReason"]);i!=null&&y(t,["raiFilteredReason"],i);const o=x(e,["_self"]);return o!=null&&y(t,["safetyAttributes"],B2(s,o)),t}function cF(s,e){const t={},r=x(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>lF(s,c))),y(t,["generatedImages"],o)}const i=x(e,["positivePromptSafetyAttributes"]);return i!=null&&y(t,["positivePromptSafetyAttributes"],B2(s,i)),t}function dF(s,e){const t={},r=x(e,["baseModel"]);r!=null&&y(t,["baseModel"],r);const i=x(e,["createTime"]);i!=null&&y(t,["createTime"],i);const o=x(e,["updateTime"]);return o!=null&&y(t,["updateTime"],o),t}function oj(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["displayName"]);i!=null&&y(t,["displayName"],i);const o=x(e,["description"]);o!=null&&y(t,["description"],o);const c=x(e,["version"]);c!=null&&y(t,["version"],c);const d=x(e,["_self"]);d!=null&&y(t,["tunedModelInfo"],dF(s,d));const m=x(e,["inputTokenLimit"]);m!=null&&y(t,["inputTokenLimit"],m);const h=x(e,["outputTokenLimit"]);h!=null&&y(t,["outputTokenLimit"],h);const g=x(e,["supportedGenerationMethods"]);return g!=null&&y(t,["supportedActions"],g),t}function uF(){return{}}function hF(s,e){const t={},r=x(e,["totalTokens"]);r!=null&&y(t,["totalTokens"],r);const i=x(e,["cachedContentTokenCount"]);return i!=null&&y(t,["cachedContentTokenCount"],i),t}function mF(s,e){const t={},r=x(e,["video","uri"]);r!=null&&y(t,["uri"],r);const i=x(e,["video","encodedVideo"]);i!=null&&y(t,["videoBytes"],ao(s,i));const o=x(e,["encoding"]);return o!=null&&y(t,["mimeType"],o),t}function pF(s,e){const t={},r=x(e,["_self"]);return r!=null&&y(t,["video"],mF(s,r)),t}function fF(s,e){const t={},r=x(e,["generatedSamples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>pF(s,d))),y(t,["generatedVideos"],c)}const i=x(e,["raiMediaFilteredCount"]);i!=null&&y(t,["raiMediaFilteredCount"],i);const o=x(e,["raiMediaFilteredReasons"]);return o!=null&&y(t,["raiMediaFilteredReasons"],o),t}function gF(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["metadata"]);i!=null&&y(t,["metadata"],i);const o=x(e,["done"]);o!=null&&y(t,["done"],o);const c=x(e,["error"]);c!=null&&y(t,["error"],c);const d=x(e,["response","generateVideoResponse"]);return d!=null&&y(t,["response"],fF(s,d)),t}function xF(s,e){const t={},r=x(e,["videoMetadata"]);r!=null&&y(t,["videoMetadata"],r);const i=x(e,["thought"]);i!=null&&y(t,["thought"],i);const o=x(e,["codeExecutionResult"]);o!=null&&y(t,["codeExecutionResult"],o);const c=x(e,["executableCode"]);c!=null&&y(t,["executableCode"],c);const d=x(e,["fileData"]);d!=null&&y(t,["fileData"],d);const m=x(e,["functionCall"]);m!=null&&y(t,["functionCall"],m);const h=x(e,["functionResponse"]);h!=null&&y(t,["functionResponse"],h);const g=x(e,["inlineData"]);g!=null&&y(t,["inlineData"],g);const b=x(e,["text"]);return b!=null&&y(t,["text"],b),t}function yF(s,e){const t={},r=x(e,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>xF(s,c))),y(t,["parts"],o)}const i=x(e,["role"]);return i!=null&&y(t,["role"],i),t}function bF(s,e){const t={},r=x(e,["citations"]);return r!=null&&y(t,["citations"],r),t}function vF(s,e){const t={},r=x(e,["content"]);r!=null&&y(t,["content"],yF(s,r));const i=x(e,["citationMetadata"]);i!=null&&y(t,["citationMetadata"],bF(s,i));const o=x(e,["finishMessage"]);o!=null&&y(t,["finishMessage"],o);const c=x(e,["finishReason"]);c!=null&&y(t,["finishReason"],c);const d=x(e,["avgLogprobs"]);d!=null&&y(t,["avgLogprobs"],d);const m=x(e,["groundingMetadata"]);m!=null&&y(t,["groundingMetadata"],m);const h=x(e,["index"]);h!=null&&y(t,["index"],h);const g=x(e,["logprobsResult"]);g!=null&&y(t,["logprobsResult"],g);const b=x(e,["safetyRatings"]);return b!=null&&y(t,["safetyRatings"],b),t}function lj(s,e){const t={},r=x(e,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(g=>vF(s,g))),y(t,["candidates"],h)}const i=x(e,["createTime"]);i!=null&&y(t,["createTime"],i);const o=x(e,["responseId"]);o!=null&&y(t,["responseId"],o);const c=x(e,["modelVersion"]);c!=null&&y(t,["modelVersion"],c);const d=x(e,["promptFeedback"]);d!=null&&y(t,["promptFeedback"],d);const m=x(e,["usageMetadata"]);return m!=null&&y(t,["usageMetadata"],m),t}function wF(s,e){const t={},r=x(e,["truncated"]);r!=null&&y(t,["truncated"],r);const i=x(e,["token_count"]);return i!=null&&y(t,["tokenCount"],i),t}function NF(s,e){const t={},r=x(e,["values"]);r!=null&&y(t,["values"],r);const i=x(e,["statistics"]);return i!=null&&y(t,["statistics"],wF(s,i)),t}function jF(s,e){const t={},r=x(e,["billableCharacterCount"]);return r!=null&&y(t,["billableCharacterCount"],r),t}function SF(s,e){const t={},r=x(e,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>NF(s,c))),y(t,["embeddings"],o)}const i=x(e,["metadata"]);return i!=null&&y(t,["metadata"],jF(s,i)),t}function _F(s,e){const t={},r=x(e,["gcsUri"]);r!=null&&y(t,["gcsUri"],r);const i=x(e,["bytesBase64Encoded"]);i!=null&&y(t,["imageBytes"],ao(s,i));const o=x(e,["mimeType"]);return o!=null&&y(t,["mimeType"],o),t}function $2(s,e){const t={},r=x(e,["safetyAttributes","categories"]);r!=null&&y(t,["categories"],r);const i=x(e,["safetyAttributes","scores"]);i!=null&&y(t,["scores"],i);const o=x(e,["contentType"]);return o!=null&&y(t,["contentType"],o),t}function CF(s,e){const t={},r=x(e,["_self"]);r!=null&&y(t,["image"],_F(s,r));const i=x(e,["raiFilteredReason"]);i!=null&&y(t,["raiFilteredReason"],i);const o=x(e,["_self"]);o!=null&&y(t,["safetyAttributes"],$2(s,o));const c=x(e,["prompt"]);return c!=null&&y(t,["enhancedPrompt"],c),t}function kF(s,e){const t={},r=x(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>CF(s,c))),y(t,["generatedImages"],o)}const i=x(e,["positivePromptSafetyAttributes"]);return i!=null&&y(t,["positivePromptSafetyAttributes"],$2(s,i)),t}function EF(s,e){const t={},r=x(e,["endpoint"]);r!=null&&y(t,["name"],r);const i=x(e,["deployedModelId"]);return i!=null&&y(t,["deployedModelId"],i),t}function TF(s,e){const t={},r=x(e,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&y(t,["baseModel"],r);const i=x(e,["createTime"]);i!=null&&y(t,["createTime"],i);const o=x(e,["updateTime"]);return o!=null&&y(t,["updateTime"],o),t}function cj(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["displayName"]);i!=null&&y(t,["displayName"],i);const o=x(e,["description"]);o!=null&&y(t,["description"],o);const c=x(e,["versionId"]);c!=null&&y(t,["version"],c);const d=x(e,["deployedModels"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(b=>EF(s,b))),y(t,["endpoints"],g)}const m=x(e,["labels"]);m!=null&&y(t,["labels"],m);const h=x(e,["_self"]);return h!=null&&y(t,["tunedModelInfo"],TF(s,h)),t}function PF(){return{}}function AF(s,e){const t={},r=x(e,["totalTokens"]);return r!=null&&y(t,["totalTokens"],r),t}function IF(s,e){const t={},r=x(e,["tokensInfo"]);return r!=null&&y(t,["tokensInfo"],r),t}function RF(s,e){const t={},r=x(e,["gcsUri"]);r!=null&&y(t,["uri"],r);const i=x(e,["bytesBase64Encoded"]);i!=null&&y(t,["videoBytes"],ao(s,i));const o=x(e,["mimeType"]);return o!=null&&y(t,["mimeType"],o),t}function DF(s,e){const t={},r=x(e,["_self"]);return r!=null&&y(t,["video"],RF(s,r)),t}function MF(s,e){const t={},r=x(e,["videos"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>DF(s,d))),y(t,["generatedVideos"],c)}const i=x(e,["raiMediaFilteredCount"]);i!=null&&y(t,["raiMediaFilteredCount"],i);const o=x(e,["raiMediaFilteredReasons"]);return o!=null&&y(t,["raiMediaFilteredReasons"],o),t}function LF(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["metadata"]);i!=null&&y(t,["metadata"],i);const o=x(e,["done"]);o!=null&&y(t,["done"],o);const c=x(e,["error"]);c!=null&&y(t,["error"],c);const d=x(e,["response"]);return d!=null&&y(t,["response"],MF(s,d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function VF(s,e,t){let r,i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),s.isVertexAI()?r=eO(s,i):r=XV(s,i),e(r)}class OF{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r,i,o;const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const h=$F(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())m=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h);else{const Z=this.apiClient.getApiKey();m=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateContent?key=${Z}`}let g=()=>{};const b=new Promise(Z=>{g=Z}),w=e.callbacks,P=function(){var Z;(Z=w==null?void 0:w.onopen)===null||Z===void 0||Z.call(w),g({})},C=this.apiClient,k={onopen:P,onmessage:Z=>{VF(C,w.onmessage,Z)},onerror:(t=w==null?void 0:w.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(Z){}},E=this.webSocketFactory.create(m,BF(h),k);E.connect(),await b;let F=Cn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const Z=this.apiClient.getProject(),W=this.apiClient.getLocation();F=`projects/${Z}/locations/${W}/`+F}let U={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[mm.AUDIO]}:e.config.responseModalities=[mm.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const q={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=CV(this.apiClient,q):U=_V(this.apiClient,q),delete U.config,E.send(JSON.stringify(U)),new UF(E,this.apiClient)}}const FF={turnComplete:!0};class UF{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=ro(e,t.turns),e.isVertexAI()?r=r.map(i=>gc(e,i)):r=r.map(i=>rp(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(zF)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},FF),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:IV(this.apiClient,e)}:t={realtimeInput:AV(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function BF(s){const e={};return s.forEach((t,r)=>{e[r]=t}),e}function $F(s){const e=new Headers;for(const[t,r]of Object.entries(s))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qF extends ru{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>await this.generateContentInternal(t),this.generateContentStream=async t=>await this.generateContentStreamInternal(t),this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let o;const c=[];if(r!=null&&r.generatedImages)for(const m of r.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((i=m==null?void 0:m.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=m==null?void 0:m.safetyAttributes:c.push(m);let d;return o?d={generatedImages:c,positivePromptSafetyAttributes:o}:d={generatedImages:c},d})}async generateContentInternal(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=ij(this.apiClient,e);return d=jt("{model}:generateContent",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>{const b=lj(this.apiClient,g),w=new bh;return Object.assign(w,b),w})}else{const h=rj(this.apiClient,e);return d=jt("{model}:generateContent",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>{const b=aj(this.apiClient,g),w=new bh;return Object.assign(w,b),w})}}async generateContentStreamInternal(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=ij(this.apiClient,e);d=jt("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h.config,delete h._url,delete h._query;const g=this.apiClient;return c=g.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),c.then(function(b){return pm(this,arguments,function*(){var w,P,C,k;try{for(var E=!0,F=Kg(b),U;U=yield bs(F.next()),w=U.done,!w;E=!0){k=U.value,E=!1;const Z=lj(g,yield bs(k.json())),W=new bh;Object.assign(W,Z),yield yield bs(W)}}catch(q){P={error:q}}finally{try{!E&&!w&&(C=F.return)&&(yield bs(C.call(F)))}finally{if(P)throw P.error}}})})}else{const h=rj(this.apiClient,e);d=jt("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h.config,delete h._url,delete h._query;const g=this.apiClient;return c=g.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(b){return pm(this,arguments,function*(){var w,P,C,k;try{for(var E=!0,F=Kg(b),U;U=yield bs(F.next()),w=U.done,!w;E=!0){k=U.value,E=!1;const Z=aj(g,yield bs(k.json())),W=new bh;Object.assign(W,Z),yield yield bs(W)}}catch(q){P={error:q}}finally{try{!E&&!w&&(C=F.return)&&(yield bs(C.call(F)))}finally{if(P)throw P.error}}})})}}async embedContent(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=UO(this.apiClient,e);return d=jt("{model}:predict",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>{const b=SF(this.apiClient,g),w=new WN;return Object.assign(w,b),w})}else{const h=fO(this.apiClient,e);return d=jt("{model}:batchEmbedContents",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>{const b=aF(this.apiClient,g),w=new WN;return Object.assign(w,b),w})}}async generateImagesInternal(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=$O(this.apiClient,e);return d=jt("{model}:predict",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>{const b=kF(this.apiClient,g),w=new KN;return Object.assign(w,b),w})}else{const h=xO(this.apiClient,e);return d=jt("{model}:predict",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>{const b=cF(this.apiClient,g),w=new KN;return Object.assign(w,b),w})}}async get(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=qO(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>cj(this.apiClient,g))}else{const h=yO(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>oj(this.apiClient,g))}}async update(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=HO(this.apiClient,e);return d=jt("{model}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>cj(this.apiClient,g))}else{const h=vO(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>oj(this.apiClient,g))}}async delete(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=WO(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(()=>{const g=PF(),b=new JN;return Object.assign(b,g),b})}else{const h=wO(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(()=>{const g=uF(),b=new JN;return Object.assign(b,g),b})}}async countTokens(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=JO(this.apiClient,e);return d=jt("{model}:countTokens",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>{const b=AF(this.apiClient,g),w=new YN;return Object.assign(w,b),w})}else{const h=jO(this.apiClient,e);return d=jt("{model}:countTokens",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>{const b=hF(this.apiClient,g),w=new YN;return Object.assign(w,b),w})}}async computeTokens(e){var t,r;let i,o="",c={};if(this.apiClient.isVertexAI()){const d=YO(this.apiClient,e);return o=jt("{model}:computeTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>{const h=IF(this.apiClient,m),g=new Iz;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=XO(this.apiClient,e);return d=jt("{model}:predictLongRunning",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>LF(this.apiClient,g))}else{const h=CO(this.apiClient,e);return d=jt("{model}:predictLongRunning",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>gF(this.apiClient,g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GF(s,e){const t={},r=x(e,["operationName"]);r!=null&&y(t,["_url","operationName"],r);const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function HF(s,e){const t={},r=x(e,["operationName"]);r!=null&&y(t,["_url","operationName"],r);const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function WF(s,e){const t={},r=x(e,["operationName"]);r!=null&&y(t,["operationName"],r);const i=x(e,["resourceName"]);i!=null&&y(t,["_url","resourceName"],i);const o=x(e,["config"]);return o!=null&&y(t,["config"],o),t}function KF(s,e){const t={},r=x(e,["video","uri"]);r!=null&&y(t,["uri"],r);const i=x(e,["video","encodedVideo"]);i!=null&&y(t,["videoBytes"],ao(s,i));const o=x(e,["encoding"]);return o!=null&&y(t,["mimeType"],o),t}function JF(s,e){const t={},r=x(e,["_self"]);return r!=null&&y(t,["video"],KF(s,r)),t}function YF(s,e){const t={},r=x(e,["generatedSamples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>JF(s,d))),y(t,["generatedVideos"],c)}const i=x(e,["raiMediaFilteredCount"]);i!=null&&y(t,["raiMediaFilteredCount"],i);const o=x(e,["raiMediaFilteredReasons"]);return o!=null&&y(t,["raiMediaFilteredReasons"],o),t}function ZF(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["metadata"]);i!=null&&y(t,["metadata"],i);const o=x(e,["done"]);o!=null&&y(t,["done"],o);const c=x(e,["error"]);c!=null&&y(t,["error"],c);const d=x(e,["response","generateVideoResponse"]);return d!=null&&y(t,["response"],YF(s,d)),t}function QF(s,e){const t={},r=x(e,["gcsUri"]);r!=null&&y(t,["uri"],r);const i=x(e,["bytesBase64Encoded"]);i!=null&&y(t,["videoBytes"],ao(s,i));const o=x(e,["mimeType"]);return o!=null&&y(t,["mimeType"],o),t}function XF(s,e){const t={},r=x(e,["_self"]);return r!=null&&y(t,["video"],QF(s,r)),t}function eU(s,e){const t={},r=x(e,["videos"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>XF(s,d))),y(t,["generatedVideos"],c)}const i=x(e,["raiMediaFilteredCount"]);i!=null&&y(t,["raiMediaFilteredCount"],i);const o=x(e,["raiMediaFilteredReasons"]);return o!=null&&y(t,["raiMediaFilteredReasons"],o),t}function dj(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["metadata"]);i!=null&&y(t,["metadata"],i);const o=x(e,["done"]);o!=null&&y(t,["done"],o);const c=x(e,["error"]);c!=null&&y(t,["error"],c);const d=x(e,["response"]);return d!=null&&y(t,["response"],eU(s,d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tU extends ru{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let o;return r&&"httpOptions"in r&&(o=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:t.name,config:r})}async getVideosOperationInternal(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=HF(this.apiClient,e);return d=jt("{operationName}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>dj(this.apiClient,g))}else{const h=GF(this.apiClient,e);return d=jt("{operationName}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>ZF(this.apiClient,g))}}async fetchPredictVideosOperationInternal(e){var t,r;let i,o="",c={};if(this.apiClient.isVertexAI()){const d=WF(this.apiClient,e);return o=jt("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>dj(this.apiClient,m))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nU="Content-Type",sU="X-Server-Timeout",rU="User-Agent",iU="x-goog-api-client",aU="0.12.0",oU=`google-genai-sdk/${aU}`,lU="v1beta1",cU="v1beta",uj=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class q2 extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class Yg extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class dU{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:lU,this.getProject()||this.getLocation()?(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(i.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:cU,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))i.searchParams.append(c,String(d));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(t))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r){if(t&&t.timeout||r){const i=new AbortController,o=i.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>i.abort(),t.timeout),r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await hj(i),new Wg(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await hj(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var t;return pm(this,arguments,function*(){const i=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:m}=yield bs(i.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=o.decode(m);try{const b=JSON.parse(h);if("error"in b){const w=JSON.parse(JSON.stringify(b.error)),P=w.status,C=w.code,k=`got status: ${P}. ${JSON.stringify(b)}`;if(C>=400&&C<500)throw new q2(k);if(C>=500&&C<600)throw new Yg(k)}}catch(b){const w=b;if(w.name==="ClientError"||w.name==="ServerError")throw b}c+=h;let g=c.match(uj);for(;g;){const b=g[1];try{const w=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield bs(new Wg(w)),c=c.slice(g[0].length),g=c.match(uj)}catch(w){throw new Error(`exception parsing stream chunk ${b}. ${w}`)}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=oU+" "+this.clientOptions.userAgentExtra;return e[rU]=t,e[iU]=t,e[nU]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))t.append(r,i);e.timeout&&e.timeout>0&&t.append(sU,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var r;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,c=await o.stat(e);i.sizeBytes=String(c.size);const d=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=d;const m=await this.fetchUploadUrl(i,t);return o.upload(e,m,this)}async fetchUploadUrl(e,t){var r;let i={};t!=null&&t.httpOptions?i=t.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},c=await this.request({path:jt("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(r=c==null?void 0:c.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function hj(s){var e;if(s===void 0)throw new Yg("response is undefined");if(!s.ok){const t=s.status,r=s.statusText;let i;!((e=s.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await s.json():i={error:{message:await s.text(),code:s.status,status:s.statusText}};const o=`got status: ${t} ${r}. ${JSON.stringify(i)}`;throw t>=400&&t<500?new q2(o):t>=500&&t<600?new Yg(o):new Error(o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uU(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["_url","name"],r);const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function hU(s,e,t){const r={},i=x(e,["pageSize"]);t!==void 0&&i!=null&&y(t,["_query","pageSize"],i);const o=x(e,["pageToken"]);t!==void 0&&o!=null&&y(t,["_query","pageToken"],o);const c=x(e,["filter"]);return t!==void 0&&c!=null&&y(t,["_query","filter"],c),r}function mU(s,e){const t={},r=x(e,["config"]);return r!=null&&y(t,["config"],hU(s,r,t)),t}function pU(s,e){const t={},r=x(e,["textInput"]);r!=null&&y(t,["textInput"],r);const i=x(e,["output"]);return i!=null&&y(t,["output"],i),t}function fU(s,e){const t={};if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=x(e,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>pU(s,o))),y(t,["examples","examples"],i)}return t}function gU(s,e,t){const r={};if(x(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=x(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&y(t,["displayName"],i),x(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=x(e,["epochCount"]);t!==void 0&&o!=null&&y(t,["tuningTask","hyperparameters","epochCount"],o);const c=x(e,["learningRateMultiplier"]);if(c!=null&&y(r,["tuningTask","hyperparameters","learningRateMultiplier"],c),x(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=x(e,["batchSize"]);t!==void 0&&d!=null&&y(t,["tuningTask","hyperparameters","batchSize"],d);const m=x(e,["learningRate"]);return t!==void 0&&m!=null&&y(t,["tuningTask","hyperparameters","learningRate"],m),r}function xU(s,e){const t={},r=x(e,["baseModel"]);r!=null&&y(t,["baseModel"],r);const i=x(e,["trainingDataset"]);i!=null&&y(t,["tuningTask","trainingData"],fU(s,i));const o=x(e,["config"]);return o!=null&&y(t,["config"],gU(s,o,t)),t}function yU(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["_url","name"],r);const i=x(e,["config"]);return i!=null&&y(t,["config"],i),t}function bU(s,e,t){const r={},i=x(e,["pageSize"]);t!==void 0&&i!=null&&y(t,["_query","pageSize"],i);const o=x(e,["pageToken"]);t!==void 0&&o!=null&&y(t,["_query","pageToken"],o);const c=x(e,["filter"]);return t!==void 0&&c!=null&&y(t,["_query","filter"],c),r}function vU(s,e){const t={},r=x(e,["config"]);return r!=null&&y(t,["config"],bU(s,r,t)),t}function wU(s,e,t){const r={},i=x(e,["gcsUri"]);if(t!==void 0&&i!=null&&y(t,["supervisedTuningSpec","trainingDatasetUri"],i),x(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function NU(s,e){const t={},r=x(e,["gcsUri"]);return r!=null&&y(t,["validationDatasetUri"],r),t}function jU(s,e,t){const r={},i=x(e,["validationDataset"]);t!==void 0&&i!=null&&y(t,["supervisedTuningSpec"],NU(s,i));const o=x(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&y(t,["tunedModelDisplayName"],o);const c=x(e,["description"]);t!==void 0&&c!=null&&y(t,["description"],c);const d=x(e,["epochCount"]);t!==void 0&&d!=null&&y(t,["supervisedTuningSpec","hyperParameters","epochCount"],d);const m=x(e,["learningRateMultiplier"]);t!==void 0&&m!=null&&y(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m);const h=x(e,["adapterSize"]);if(t!==void 0&&h!=null&&y(t,["supervisedTuningSpec","hyperParameters","adapterSize"],h),x(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function SU(s,e){const t={},r=x(e,["baseModel"]);r!=null&&y(t,["baseModel"],r);const i=x(e,["trainingDataset"]);i!=null&&y(t,["supervisedTuningSpec","trainingDatasetUri"],wU(s,i,t));const o=x(e,["config"]);return o!=null&&y(t,["config"],jU(s,o,t)),t}function _U(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["model"],r);const i=x(e,["name"]);return i!=null&&y(t,["endpoint"],i),t}function G2(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["state"]);i!=null&&y(t,["state"],V2(s,i));const o=x(e,["createTime"]);o!=null&&y(t,["createTime"],o);const c=x(e,["tuningTask","startTime"]);c!=null&&y(t,["startTime"],c);const d=x(e,["tuningTask","completeTime"]);d!=null&&y(t,["endTime"],d);const m=x(e,["updateTime"]);m!=null&&y(t,["updateTime"],m);const h=x(e,["description"]);h!=null&&y(t,["description"],h);const g=x(e,["baseModel"]);g!=null&&y(t,["baseModel"],g);const b=x(e,["_self"]);b!=null&&y(t,["tunedModel"],_U(s,b));const w=x(e,["distillationSpec"]);w!=null&&y(t,["distillationSpec"],w);const P=x(e,["experiment"]);P!=null&&y(t,["experiment"],P);const C=x(e,["labels"]);C!=null&&y(t,["labels"],C);const k=x(e,["pipelineJob"]);k!=null&&y(t,["pipelineJob"],k);const E=x(e,["tunedModelDisplayName"]);return E!=null&&y(t,["tunedModelDisplayName"],E),t}function CU(s,e){const t={},r=x(e,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const i=x(e,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>G2(s,c))),y(t,["tuningJobs"],o)}return t}function kU(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["metadata"]);i!=null&&y(t,["metadata"],i);const o=x(e,["done"]);o!=null&&y(t,["done"],o);const c=x(e,["error"]);return c!=null&&y(t,["error"],c),t}function EU(s,e){const t={},r=x(e,["model"]);r!=null&&y(t,["model"],r);const i=x(e,["endpoint"]);return i!=null&&y(t,["endpoint"],i),t}function Zg(s,e){const t={},r=x(e,["name"]);r!=null&&y(t,["name"],r);const i=x(e,["state"]);i!=null&&y(t,["state"],V2(s,i));const o=x(e,["createTime"]);o!=null&&y(t,["createTime"],o);const c=x(e,["startTime"]);c!=null&&y(t,["startTime"],c);const d=x(e,["endTime"]);d!=null&&y(t,["endTime"],d);const m=x(e,["updateTime"]);m!=null&&y(t,["updateTime"],m);const h=x(e,["error"]);h!=null&&y(t,["error"],h);const g=x(e,["description"]);g!=null&&y(t,["description"],g);const b=x(e,["baseModel"]);b!=null&&y(t,["baseModel"],b);const w=x(e,["tunedModel"]);w!=null&&y(t,["tunedModel"],EU(s,w));const P=x(e,["supervisedTuningSpec"]);P!=null&&y(t,["supervisedTuningSpec"],P);const C=x(e,["tuningDataStats"]);C!=null&&y(t,["tuningDataStats"],C);const k=x(e,["encryptionSpec"]);k!=null&&y(t,["encryptionSpec"],k);const E=x(e,["partnerModelTuningSpec"]);E!=null&&y(t,["partnerModelTuningSpec"],E);const F=x(e,["distillationSpec"]);F!=null&&y(t,["distillationSpec"],F);const U=x(e,["experiment"]);U!=null&&y(t,["experiment"],U);const q=x(e,["labels"]);q!=null&&y(t,["labels"],q);const Z=x(e,["pipelineJob"]);Z!=null&&y(t,["pipelineJob"],Z);const W=x(e,["tunedModelDisplayName"]);return W!=null&&y(t,["tunedModelDisplayName"],W),t}function TU(s,e){const t={},r=x(e,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const i=x(e,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Zg(s,c))),y(t,["tuningJobs"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PU extends ru{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new N0(qd.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const r=await this.tuneMldevInternal(t);let i="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?i=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(i=r.name.split("/operations/")[0]),{name:i,state:Hg.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=yU(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>Zg(this.apiClient,g))}else{const h=uU(this.apiClient,e);return d=jt("{name}",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>G2(this.apiClient,g))}}async listInternal(e){var t,r,i,o;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=vU(this.apiClient,e);return d=jt("tuningJobs",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>{const b=TU(this.apiClient,g),w=new ZN;return Object.assign(w,b),w})}else{const h=mU(this.apiClient,e);return d=jt("tunedModels",h._url),m=h._query,delete h.config,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),c.then(g=>{const b=CU(this.apiClient,g),w=new ZN;return Object.assign(w,b),w})}}async tuneInternal(e){var t,r;let i,o="",c={};if(this.apiClient.isVertexAI()){const d=SU(this.apiClient,e);return o=jt("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>Zg(this.apiClient,m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let i,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xU(this.apiClient,e);return o=jt("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>kU(this.apiClient,m))}}}const AU=1024*1024*8;async function IU(s,e,t){var r,i;let o=0,c=0,d=new Wg(new Response),m="upload";for(o=s.size;c<o;){const g=Math.min(AU,o-c),b=s.slice(c,c+g);if(c+g>=o&&(m+=", finalize"),d=await t.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(c),"Content-Length":String(g)}}}),c+=g,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r["x-goog-upload-status"])!=="active")break;if(o<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(d==null?void 0:d.json());if(((i=d==null?void 0:d.headers)===null||i===void 0?void 0:i["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function RU(s){return{size:s.size,type:s.type}}class DU{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IU(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MU{create(e,t,r){return new LU(e,t,r)}}class LU{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mj="x-goog-api-key";class zU{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(mj)===null&&e.append(mj,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VU="gl-node/";class OU{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=KL(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new zU(this.apiKey);this.apiClient=new dU({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:VU+"web",uploader:new DU}),this.models=new qF(this.apiClient),this.live=new OF(this.apiClient,i,new MU),this.chats=new Fz(this.models,this.apiClient),this.caches=new Lz(this.apiClient),this.files=new Xz(this.apiClient),this.operations=new tU(this.apiClient),this.tunings=new PU(this.apiClient)}}const FU={};var UU={};const BU=typeof import.meta<"u"&&FU?"AIzaSyDhB9FyniBmMSJJAP_t_mNq1uILG5rZcQI":void 0,$U=typeof process<"u"?UU.VITE_GEMINI_API_KEY:void 0,Qg=BU||$U||"";typeof window<"u"&&Qg&&console.warn("Warning: Gemini API key is present in the frontend build (VITE_GEMINI_API_KEY). This exposes the key to users. Consider proxying requests through a server or using a server-side function to keep keys secret.");const iu=()=>Qg?new OU({apiKey:Qg}):(console.warn("API Key is missing. AI features will not work."),null),qU=["Timeless","Elegant","Vintage","Handmade","Artisan","Luxe","Delicate","Statement","Classic","Boho"],GU=["Gold","Silver","Sterling Silver","Resin","Bronze","Copper","Glass","Crystal","Gemstone"],HU=["Art Deco","Vintage","Boho","Minimalist","Retro","Contemporary","Minimal"],fm=s=>s[Math.floor(Math.random()*s.length)],Xg=(s,e)=>{const t=fm(qU),r=fm(HU),i=s?s.replace(/[^a-zA-Z0-9 ]/g,""):"Piece";return`${t} ${r} ${i}`.trim()},pj=s=>{const e=(s||"").toLowerCase(),t=[];return e.includes("ring")&&t.push("Ring"),(e.includes("neck")||e.includes("pendant")||e.includes("choker"))&&t.push("Pendant"),e.includes("ear")&&t.push("Stud"),e.includes("bracelet")&&t.push("Bracelet"),t.length===0&&t.push(fm(["Pendant","Ring","Stud","Dangle"])),t.push(fm(GU)),Array.from(new Set(t)).slice(0,5)},bd=(s,e,t)=>{const r=t?`Features: ${t}. `:"";return`${s} is a ${e.toLowerCase()} crafted with care. ${r}Perfect for elevating everyday looks or adding a special touch for events. Hand-finished details and quality materials make it a timeless addition to any collection.`},fj=(s,e)=>{const t=s.split(" ").slice(0,4).map(r=>r.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()).filter(Boolean);return Array.from(new Set([...t,...e.map(r=>r.toLowerCase())])).slice(0,6)},WU=async(s,e,t)=>{const r=iu();if(!r)return bd(s||Xg(e||""),e||"Jewelry",t);try{return(await r.models.generateContent({model:"gemini-2.5-flash",contents:`Write a compelling, SEO-friendly product description for an e-commerce product.
      
      Product Name: ${s}
      Category: ${e}
      Keywords/Features: ${t}
      
      Tone: Professional, persuasive, and enthusiastic. 
      Keep it under 150 words.`})).text||bd(s,e,t)||"Could not generate description."}catch(i){return console.error("Gemini API Error:",i),bd(s,e,t)}},KU=async(s,e)=>{const t=iu();if(!t)try{const i=Xg(e),o=pj(e),c=bd(i,e||"Jewelry","Handmade, Unique"),d=fj(i,o);return{name:i,description:c,whenAndHowToWear:"Perfect for both everyday wear and special occasions. Layer with other pieces for a curated look.",tags:o,seoKeywords:d,colors:[]}}catch(i){return console.error("Local fallback for product metadata failed:",i),null}const r=s.replace(/^data:image\/\w+;base64,/,"");try{const o=(await t.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:r}},{text:`You are a fashion merchandising expert for a specialized jewelry store. Analyze this image of a ${e||"jewelry product"}.
            
            Generate the following JSON object:
            {
              "name": "A short, catchy, premium product name",
              "description": "A short, powerful, attractive description (max 3 sentences) that sells the product emotionally.",
              "whenAndHowToWear": "Short, powerful advice on when and how to wear this item (max 2 sentences).",
              "tags": ["Array", "of", "5", "jewelry-specific", "tags"],
              "seoKeywords": ["Array", "of", "5", "strong", "SEO", "keywords"],
              "colors": ["List", "of", "dominant", "product", "colors"]
            }
            
            CRITICAL INSTRUCTIONS:
            1. **Tags**: STRICTLY JEWELRY ONLY. Allowed: Materials (Gold, Resin, Silver, Gemstone), Types (Ring, Stud, Choker, Pendant), Styles (Art Deco, Vintage, Boho, Minimalist), Techniques (Filigree, Wire Wrap). 
               FORBIDDEN: "Fashion", "Style", "Woman", "Girl", "Cute", "Gift", "Love", "Trend", "Beautiful", "Accessory".
            2. **Colors**: STRICTLY PRODUCT ONLY. Ignore background, skin, or prop colors. If the ring is silver and the stone is red, output ["Silver", "Red"]. Do not output "White" if the background is white.
            
            Return ONLY raw JSON.`}]},config:{responseMimeType:"application/json"}})).text;return o?JSON.parse(o):null}catch(i){console.error("Gemini Image Analysis Error:",i);try{const o=Xg(e),c=pj(e),d=bd(o,e||"Jewelry","Handmade, Unique"),m=fj(o,c);return{name:o,description:d,whenAndHowToWear:"Perfect for both everyday wear and special occasions. Layer with other pieces for a curated look.",tags:c,seoKeywords:m,colors:[]}}catch(o){return console.error("Local fallback for product metadata failed:",o),null}}},JU=async(s,e)=>{const t=iu();if(!t)return[];try{const i=(await t.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${e} unique South African product reviews for a jewelry item named "${s}".
      
      CRITICAL INSTRUCTIONS:
      1. **Persona**: Use ONLY Female names.
      2. **Diversity**: Mix names from Zulu, Xhosa, Afrikaans, English, and Coloured backgrounds.
      3. **Locations**: Use specific South African towns (e.g., Paarl, Benoni, Mthatha, Umlazi, George, Soweto, Ballito, Bloemfontein), NOT just "Cape Town" or "JHB".
      4. **Language Mixing**: 
         - Some reviews must mix English with Afrikaans (e.g., "Baie nice", "Lekker", "Te oulik").
         - Some reviews must mix English with Xhosa/Zulu slang (e.g., "Yho", "Shame", "Stunning shem", "Haikona").
         - Keep it natural.
      5. **Realism**: Include occasional spelling mistakes (e.g., "realy", "awsome") and casual grammar.
      6. **Rating**: Randomly between 3.5 and 5.0 stars.
      7. **Content**: Short, punchy comments about quality, delivery, or how it looks.
         - **Price Mentions**: When mentioning price, ALWAYS portray it as cheap and good quality (e.g., "So affordable for such good quality", "Worth every cent").
         - **Delivery/Waiting**: If any negative sentiment about waiting time, turn it positive (e.g., "Waited a bit but worth the wait", "Delivery took time but totally worth it").
      8. **Dates**: Random dates strictly between January 1st, 2025 and today (Format: YYYY-MM-DD). Do NOT generate 2024 dates.

      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return i?JSON.parse(i).map(c=>({...c,id:`rev_ai_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(r){return console.error("Gemini Review Generation Error:",r),[]}},YU=async s=>{const e=iu();if(!e)return[];try{const r=(await e.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${s} unique South African reviews specifically for "One of a Kind" handmade wire-wrapped pendants.
      
      CRITICAL INSTRUCTIONS:
      1. **Context**: These are unique, single items. The reviews should NOT mention specific colors or stones (like "love the blue stone") because every piece is different.
      2. **Focus**: Focus on the "surprise" element, the uniqueness, the wire-wrapping craftsmanship, the packaging, and the fact that nobody else has this exact piece.
      3. **Persona**: Female names, South African diversity (Zulu, Xhosa, Afrikaans, English).
      4. **Locations**: Specific SA towns.
      5. **Language**: Mix in SA slang (Lekker, Mooi, Pragtig, Yho, Stunning).
      6. **Rating**: 4.0 to 5.0 stars.
      7. **Content**: Short, punchy comments about quality, delivery, or how it looks.
         - **Price Mentions**: When mentioning price, ALWAYS portray it as cheap and good quality (e.g., "So affordable for such good quality", "Worth every cent").
         - **Delivery/Waiting**: If any negative sentiment about waiting time, turn it positive (e.g., "Waited a bit but worth the wait", "Delivery took time but totally worth it").
      8. **Dates**: Random dates between Jan 2025 and now.

      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return r?JSON.parse(r).map(o=>({...o,id:`rev_unique_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(t){return console.error("Gemini Unique Review Generation Error:",t),[]}},ZU=async(s,e,t)=>{const r=iu();if(!r)return`Check out this amazing product: ${s} for R${t}! #SpoilMeVintage #vintage #jewelry`;try{let i=`Write a single social media post for a jewelry product named "${s}". Price: R${t}.`;return e==="Instagram"||e==="TikTok"?i+=' Style: High energy, visually descriptive, lots of emojis, include 10 relevant hashtags. Focus on "Unique", "Handmade", "South Africa". Keep it under 200 characters + hashtags.':e==="Facebook"?i+=' Style: Friendly, community-focused, engaging question at the end. Mention "Spoil Me Vintage". Include link placeholder [Link].':e==="Twitter"||e==="X"?i+=" Style: Short, punchy, urgent. Max 280 characters. Include 3 hashtags.":i+=" Style: Professional yet inviting.",(await r.models.generateContent({model:"gemini-2.5-flash",contents:i})).text||""}catch(i){return console.error("Gemini Social Post Error:",i),`New arrival: ${s} for only R${t}! Get it before it's gone. #SpoilMeVintage`}},QU={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},XU=[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Black",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Silver",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Hypo-Allergic Plastic",modifier:0,description:"Plastic state bends easily"}],e9=()=>{var ot,Et,Jt,un,wn,Ut,on,Ds,Si,Nn;const{products:s,addProduct:e,updateProduct:t,deleteProduct:r,categories:i,packagingPresets:o,materialPresets:c,savePackagingPreset:d,saveMaterialPreset:m,deleteMaterialPreset:h,dbConnectionError:g,login:b,manualWinner:w,setManualWinner:P}=Ct(),[C,k]=S.useState(!1),[E,F]=S.useState(!1),[U,q]=S.useState(!1),[Z,W]=S.useState(!1),[$,R]=S.useState(!1),[_,I]=S.useState("general"),[V,A]=S.useState(null),[B,L]=S.useState(null),[ne,pe]=S.useState(""),[Ne,Te]=S.useState(""),[le,fe]=S.useState(""),[ve,J]=S.useState(""),[K,X]=S.useState(!1),[ue,G]=S.useState(""),[se,Ie]=S.useState([]),[Ae,He]=S.useState(!1),[Be,xt]=S.useState({}),we=S.useRef(null),We=S.useRef(null),at=S.useRef(null),bt={id:"",code:"",name:"",slug:"",description:"",whenAndHowToWear:"",price:0,priceUSD:0,compareAtPrice:0,compareAtPriceUSD:0,memberPrice:0,memberPriceUSD:0,costPrice:0,shippingCost:0,packaging:[],backOfficeLink:"",madeBy:"Spoil Me Vintage",category:((ot=i[0])==null?void 0:ot.name)||"",type:"Stud",status:"draft",images:[""],stock:0,soldCount:0,tags:[],seoKeywords:[],colors:[],isNewArrival:!1,isBestSeller:!1,isFeaturedRing:!1,isFeaturedBracelet:!1,isFeaturedWatch:!1,isUniquePendant:!1,isFeaturedStud:!1,isFeaturedDangle:!1,isFeaturedJewelryBox:!1,isFeaturedPerfumeHolder:!1,isJewelrySet:!1,createdAt:new Date().toISOString(),ringStock:{5:0,6:0,7:0,8:0,9:0,10:0,11:0},earringMaterials:[],showEarringOptions:!1,pendantChainLengths:{},pendantWireWrapped:!1,chainStyles:[],material:"",reviews:[],giftProductId:"",giftValue:0,promoPrice:0,promoStartsAt:"",promoExpiresAt:"",promoBasicMemberPrice:0,promoPremiumMemberPrice:0,promoDeluxeMemberPrice:0,isSoldOut:!1},[z,re]=S.useState(bt),[$e,_e]=S.useState(""),[qe,Vt]=S.useState(""),[xe,mt]=S.useState(""),[kt,Dt]=S.useState(0),[pt,$t]=S.useState(""),[Qt,vt]=S.useState(""),[tn,Re]=S.useState(5),In=[...XU,...c];Do.useEffect(()=>{re(M=>({...M,memberPrice:parseFloat((M.price*.8).toFixed(2)),memberPriceUSD:parseFloat((M.priceUSD*.8).toFixed(2))}))},[z.price,z.priceUSD]);const Hn=()=>{var M;re({...bt,id:`SPV-${Date.now()}`,createdAt:new Date().toISOString(),category:((M=i[0])==null?void 0:M.name)||""}),k(!0),I("general"),vt("")},Is=M=>{const ce={...bt,...M,compareAtPrice:M.compareAtPrice||0,compareAtPriceUSD:M.compareAtPriceUSD||0,priceUSD:M.priceUSD||0,memberPrice:M.price?parseFloat((M.price*.8).toFixed(2)):M.memberPrice||0,memberPriceUSD:M.priceUSD?parseFloat((M.priceUSD*.8).toFixed(2)):M.memberPriceUSD||0,costPrice:M.costPrice||0,shippingCost:M.shippingCost||0,soldCount:M.soldCount||0,packaging:M.packaging||[],ringStock:M.ringStock||bt.ringStock,pendantChainLengths:M.pendantChainLengths||{},showEarringOptions:M.showEarringOptions??!1,chainStyles:M.chainStyles||[],reviews:M.reviews||[],giftProductId:M.giftProductId||"",giftValue:M.giftValue||0,promoPrice:M.promoPrice||0,promoStartsAt:M.promoStartsAt||"",promoExpiresAt:M.promoExpiresAt||"",promoBasicMemberPrice:M.promoBasicMemberPrice||0,promoPremiumMemberPrice:M.promoPremiumMemberPrice||0,promoDeluxeMemberPrice:M.promoDeluxeMemberPrice||0,tags:M.tags||[],seoKeywords:M.seoKeywords||[],colors:M.colors||[],isFeaturedJewelryBox:M.isFeaturedJewelryBox||!1,isFeaturedPerfumeHolder:M.isFeaturedPerfumeHolder||!1};re(ce),k(!0),I("general"),vt("")},ds=async()=>{if(!z.name||!z.price){alert("Name and Price are required");return}F(!0);try{let M=[];if(Vn){const Ue=z.images.map(async(Ve,Ye)=>{if(Ve.startsWith("data:"))try{const St=Date.now(),Tt=Or(Vn,`products/${z.id}/img_${St}_${Ye}`);return await xR(Tt,Ve,"data_url"),await Vr(Tt)}catch(St){return console.error("Failed to upload image:",St),""}return Ve}),it=await Promise.all(Ue);console.log("AdminProducts: upload raw results:",it),M=it.filter(Ve=>Ve&&Ve.trim()!==""),console.log("AdminProducts: processedImages:",M)}else M=z.images.filter(Ue=>Ue.trim()!=="");const ce={...z,images:M,price:Number(z.price),priceUSD:Number(z.priceUSD),stock:Number(z.stock),soldCount:Number(z.soldCount),compareAtPrice:Number(z.compareAtPrice||0),memberPrice:Number(z.memberPrice||0),memberPriceUSD:Number(z.memberPriceUSD||0),costPrice:Number(z.costPrice||0),shippingCost:Number(z.shippingCost||0),giftValue:Number(z.giftValue||0),promoPrice:Number(z.promoPrice||0),promoBasicMemberPrice:Number(z.promoBasicMemberPrice||0),promoPremiumMemberPrice:Number(z.promoPremiumMemberPrice||0),promoDeluxeMemberPrice:Number(z.promoDeluxeMemberPrice||0)};ce.type==="Ring"&&ce.ringStock&&(ce.stock=Object.values(ce.ringStock).reduce((Ue,it)=>Ue+it,0)),s.some(Ue=>Ue.id===ce.id)?await t(ce):await e(ce),k(!1)}catch(M){console.error("Failed to save product:",M),alert("Failed to save product. Please check console.")}finally{F(!1)}},es=async M=>{if(window.confirm("Are you sure?"))try{await r(M)}catch{alert("Failed to delete product.")}},mr=async()=>{if(!z.name||!z.category){alert("Please enter a name and category first.");return}q(!0);const M=await WU(z.name,z.category,"Handmade, Unique, Vintage");re(ce=>({...ce,description:M})),q(!1)},ts=async M=>{var it;const ce=(it=M.target.files)==null?void 0:it[0];if(!ce)return;W(!0);const Ue=new FileReader;Ue.onloadend=async()=>{const Ve=Ue.result,Ye=[Ve,...z.images.filter(Tt=>Tt!=="")];re(Tt=>({...Tt,images:Ye})),console.log("AdminProducts: Added base64 image for analysis (preview length):",Ve.slice(0,80));const St=await KU(Ve,z.category);St&&re(Tt=>({...Tt,name:St.name,description:St.description,whenAndHowToWear:St.whenAndHowToWear,tags:[...new Set([...Tt.tags,...St.tags])],seoKeywords:[...new Set([...Tt.seoKeywords||[],...St.seoKeywords])],colors:[...new Set([...Tt.colors||[],...St.colors])],slug:St.name.toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-")})),W(!1)},Ue.readAsDataURL(ce)},Ns=async M=>{const ce=M.target.files;if(!ce||ce.length===0)return;const Ue=Array.from(ce).map(Ve=>new Promise(Ye=>{const St=new FileReader;St.onloadend=()=>Ye(St.result),St.readAsDataURL(Ve)})),it=await Promise.all(Ue);re(Ve=>({...Ve,images:[...Ve.images.filter(Ye=>Ye.trim()!==""),...it]})),M.target.value=""},us=async()=>{if(!z.name){alert("Please enter a product name first.");return}R(!0);const M=await JU(z.name,tn);M.length>0&&re(ce=>({...ce,reviews:[...ce.reviews||[],...M]})),R(!1)},fn=async()=>{R(!0);const M=await YU(25);M.length>0&&re(ce=>({...ce,reviews:[...ce.reviews||[],...M]})),R(!1)},Rt=()=>{const M=Math.floor(1e5+Math.random()*9e5);re(ce=>({...ce,code:`SPV-${M}`}))},je=()=>{if(!z.name)return;const M=z.name.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");re(ce=>({...ce,slug:M}))},tt=M=>{re(ce=>{var Ue;return{...ce,reviews:(Ue=ce.reviews)==null?void 0:Ue.filter(it=>it.id!==M)}})},Gt=(M,ce,Ue)=>{if(!ce.trim())return;const it=ce.split(",").map(Ve=>Ve.trim()).filter(Ve=>Ve.length>0);re(Ve=>({...Ve,[M]:Array.from(new Set([...Ve[M]||[],...it]))})),Ue("")},gn=(M,ce)=>{re(Ue=>{var it;return{...Ue,[M]:(it=Ue[M])==null?void 0:it.filter((Ve,Ye)=>Ye!==ce)}})},Wn=M=>{const ce=z.images.filter((Ue,it)=>it!==M);ce.length===0&&ce.push(""),re({...z,images:ce})},ns=M=>{A(M.id),L({userName:M.userName,location:M.location,content:M.content,rating:M.rating,date:M.date||new Date().toLocaleDateString()})},ea=()=>{!V||!B||(re(M=>{var ce;return{...M,reviews:(ce=M.reviews)==null?void 0:ce.map(Ue=>Ue.id===V?{...Ue,...B}:Ue)}}),A(null),L(null))},pr=(M,ce,Ue)=>{var it;(it=z.earringMaterials)!=null&&it.some(Ve=>Ve.name===M)||re(Ve=>({...Ve,earringMaterials:[...Ve.earringMaterials||[],{name:M,modifier:ce,description:Ue}]}))},fr=M=>{const ce=[...z.earringMaterials||[]];ce.splice(M,1),re({...z,earringMaterials:ce})},Ys=M=>{xe&&(pr(xe,kt,pt),M&&(m({name:xe,modifier:kt,description:pt}),alert("Material saved to presets!")),mt(""),Dt(0),$t(""))},ta=(M,ce)=>{M.stopPropagation(),window.confirm(`Remove "${ce}" from presets?`)&&h(ce)},Zs=()=>{(z.packaging||[]).length>=3||re({...z,packaging:[...z.packaging||[],{id:`pack_${Date.now()}`,name:"",bulkCost:0,bulkQuantity:1,unitCost:0}]})},Rs=M=>{if(!M)return;const ce=o.find(Ue=>Ue.name===M);ce&&(z.packaging||[]).length<3&&re({...z,packaging:[...z.packaging||[],{...ce,id:`pack_${Date.now()}`}]})},Hr=M=>{var Ue;const ce=(Ue=z.packaging)==null?void 0:Ue[M];ce&&ce.name&&(d(ce),alert(`Saved "${ce.name}" to packaging presets!`))},Q=(M,ce,Ue)=>{const it=[...z.packaging||[]],Ve={...it[M],[ce]:Ue};if(ce==="bulkCost"||ce==="bulkQuantity"){const Ye=ce==="bulkCost"?parseFloat(Ue):Ve.bulkCost,St=ce==="bulkQuantity"?parseFloat(Ue):Ve.bulkQuantity;Ve.unitCost=St>0?Ye/St:0}it[M]=Ve,re({...z,packaging:it})},ee=M=>{const ce=[...z.packaging||[]];ce.splice(M,1),re({...z,packaging:ce})},ie=((Et=z.packaging)==null?void 0:Et.reduce((M,ce)=>M+ce.unitCost,0))||0,ge=(z.costPrice||0)+(z.shippingCost||0)+ie,Me=z.price-ge,Xe=(z.memberPrice||0)-ge,rt=Array.from(new Set(s.map(M=>M.category).filter(Boolean))),nt=Array.from(new Set(s.map(M=>M.type).filter(Boolean))),Fe=s.filter(M=>{var Ue;const ce=ne.toLowerCase();return(M.name.toLowerCase().includes(ce)||M.code.toLowerCase().includes(ce))&&(Ne?M.type===Ne:!0)&&(le?M.category===le:!0)&&(ve?(Ue=M.colors)==null?void 0:Ue.includes(ve):!0)&&(K?M.promoPrice&&M.promoPrice>0:!0)&&(ue?M.status===ue:!0)});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-white",children:"Product Management"}),!C&&n.jsxs("button",{onClick:Hn,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 shadow-lg transition-colors text-sm",children:[n.jsx($s,{size:18})," Add Product"]})]}),g&&n.jsx("div",{className:"bg-yellow-900/20 border-l-4 border-yellow-500 text-yellow-300 p-3 rounded mb-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-bold",children:"Firestore Warning"}),n.jsx("div",{className:"text-xs mt-1",children:g}),n.jsx("div",{className:"text-xs mt-1",children:"Changes may be saved locally only. Fix authentication or Firestore rules to persist remotely."})]}),n.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[n.jsxs("div",{className:"text-xs text-gray-200 mb-1",children:["Auth: ",((Jt=qn==null?void 0:qn.currentUser)==null?void 0:Jt.email)||"not signed in"]}),n.jsx("button",{onClick:async()=>{try{await b("spoilmevintagediy@gmail.com","admin@spoilme"),alert("Attempted admin sign-in  check console for result.")}catch(M){console.error("Admin sign-in attempt failed:",M),alert("Sign-in failed  check console.")}},className:"px-3 py-1 bg-yellow-600 text-black rounded font-semibold text-sm",children:"Sign in as admin"}),n.jsx("button",{onClick:async()=>{try{C?(s.some(M=>M.id===z.id)?await t(z):await e(z),alert("Retry attempted  check console for Firestore response.")):alert("No active product being edited to retry.")}catch(M){console.error("Retry push failed:",M),alert("Retry failed  check console.")}},className:"px-3 py-1 bg-yellow-600 text-black rounded font-semibold text-sm",children:"Retry push"}),n.jsx("button",{onClick:()=>{var M;(M=navigator.clipboard)==null||M.writeText(JSON.stringify(localStorage.getItem("spv_products"))),alert("Local products JSON copied to clipboard")},className:"px-3 py-1 bg-zinc-800 text-white rounded text-sm",children:"Copy local backup"})]})]})}),!C&&n.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx(no,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),n.jsx("input",{type:"text",placeholder:"Search by Name or SKU...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:ne,onChange:M=>pe(M.target.value)})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Vl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),n.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:Ne,onChange:M=>Te(M.target.value),children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"Ring",children:"Rings"}),n.jsx("option",{value:"Stud",children:"Stud Earrings"}),n.jsx("option",{value:"Dangle",children:"Dangle Earrings"}),n.jsx("option",{value:"Pendant",children:"Pendants"}),n.jsx("option",{value:"Bracelet",children:"Bracelets"}),n.jsx("option",{value:"Watch",children:"Watches"}),n.jsx("option",{value:"Jewelry Box",children:"Jewelry Boxes"}),n.jsx("option",{value:"Perfume Holder",children:"Perfume Holders"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(FM,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),n.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:le,onChange:M=>fe(M.target.value),children:[n.jsx("option",{value:"",children:"All Collections"}),rt.map(M=>n.jsx("option",{value:M,children:M},M))]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Vl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),n.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:ve,onChange:M=>J(M.target.value),children:[n.jsx("option",{value:"",children:"All Colors"}),Array.from(new Set(s.flatMap(M=>M.colors||[]))).map(M=>n.jsx("option",{value:M,children:M},M))]})]}),n.jsxs("button",{onClick:()=>X(!K),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all flex items-center gap-2 ${K?"bg-green-900/30 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-400 hover:bg-zinc-800"}`,children:[n.jsx(yd,{size:16})," ",K?"Promotions Active":"Show Promotions"]}),n.jsxs("div",{className:"relative",children:[n.jsx(Vl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),n.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:ue,onChange:M=>G(M.target.value),children:[n.jsx("option",{value:"",children:"All Statuses"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"})]})]}),(ne||Ne||le||ve||K||ue)&&n.jsx("button",{onClick:()=>{pe(""),Te(""),fe(""),J(""),X(!1),G("")},className:"px-3 py-2 text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Reset Filters"})]}),!C&&nt.length>0&&n.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[n.jsxs("h3",{className:"text-white font-bold mb-3 flex items-center gap-2",children:[n.jsx(Vl,{size:18,className:"text-cyan-400"})," Bulk Select by Type"]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[nt.map(M=>n.jsxs("button",{onClick:()=>{const ce=Fe.filter(it=>it.type===M).map(it=>it.id),Ue=ce.every(it=>se.includes(it));Ie(Ue?se.filter(it=>!ce.includes(it)):[...new Set([...se,...ce])])},className:`px-3 py-2 rounded-lg text-sm font-medium border transition-all flex items-center gap-2 ${Fe.filter(ce=>ce.type===M).every(ce=>se.includes(ce.id))?"bg-cyan-900/30 border-cyan-500 text-cyan-400":"bg-black border-gray-700 text-gray-400 hover:bg-zinc-800"}`,children:[M," (",Fe.filter(ce=>ce.type===M).length,")"]},M)),se.length>0&&n.jsx("button",{onClick:()=>Ie([]),className:"px-3 py-2 text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Clear All"})]})]}),!C&&se.length>0&&n.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex items-center justify-between",children:[n.jsxs("span",{className:"text-white text-sm",children:[se.length," product(s) selected"]}),n.jsxs("button",{onClick:()=>He(!0),className:"bg-cyan-600 text-white px-4 py-2 rounded-lg hover:bg-cyan-500 flex items-center gap-2",children:[n.jsx(cd,{size:16})," Bulk Edit Prices"]})]}),C?n.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"flex border-b border-gray-800 bg-zinc-950/50 overflow-x-auto no-scrollbar",children:["general","pricing","media","inventory","marketing","reviews","promotions","gifts"].map(M=>n.jsx("button",{onClick:()=>I(M),className:`px-6 py-4 text-sm font-medium capitalize whitespace-nowrap transition-colors ${_===M?"text-pink-500 border-b-2 border-pink-500 bg-pink-500/5":"text-gray-400 hover:text-white"}`,children:M},M))}),n.jsxs("div",{className:"p-6",children:[_==="general"&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Name *"}),n.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm focus:border-pink-500",value:z.name,onChange:M=>re({...z,name:M.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"URL Slug"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:z.slug,onChange:M=>re({...z,slug:M.target.value}),placeholder:"product-name-url"}),n.jsx("button",{onClick:je,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:n.jsx(Vd,{size:16})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"SKU / Code"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:z.code,onChange:M=>re({...z,code:M.target.value}),placeholder:"SPV-001"}),n.jsx("button",{onClick:Rt,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:n.jsx(Vd,{size:16})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Status"}),n.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:z.status,onChange:M=>re({...z,status:M.target.value}),children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),n.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:z.category,onChange:M=>re({...z,category:M.target.value}),children:[n.jsx("option",{value:"",children:"Select Category"}),i.map(M=>n.jsx("option",{value:M.name,children:M.name},M.id))]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Type"}),n.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:z.type,onChange:M=>re({...z,type:M.target.value}),children:[n.jsx("option",{value:"Ring",children:"Rings"}),n.jsx("option",{value:"Stud",children:"Stud Earrings"}),n.jsx("option",{value:"Dangle",children:"Dangle Earrings"}),n.jsx("option",{value:"Pendant",children:"Pendants"}),n.jsx("option",{value:"Bracelet",children:"Bracelets"}),n.jsx("option",{value:"Watch",children:"Watches"}),n.jsx("option",{value:"Jewelry Box",children:"Jewelry Boxes"}),n.jsx("option",{value:"Perfume Holder",children:"Perfume Holders"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Made By"}),n.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:z.madeBy,onChange:M=>re({...z,madeBy:M.target.value}),children:[n.jsx("option",{value:"Spoil Me Vintage",children:"Spoil Me Vintage (Handmade)"}),n.jsx("option",{value:"Outsourced",children:"Outsourced"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Base Material"}),n.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:z.material,onChange:M=>re({...z,material:M.target.value}),placeholder:"e.g. Epoxy Resin, Copper"})]})]})]}),_==="pricing"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[n.jsx(mn,{size:18,className:"text-green-400"})," South African Rand (ZAR)"]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (R) *"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-green-400",value:z.price,onChange:M=>re({...z,price:parseFloat(M.target.value)||0})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>re({...z,priceUSD:parseFloat((z.price/29).toFixed(2))}),className:"flex-1 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded-lg",children:"Convert to USD"}),n.jsx("button",{onClick:()=>re({...z,priceUSD:0}),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold rounded-lg",children:"Reset USD"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Member Price (R)"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-purple-400",value:z.memberPrice||"",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (R)"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:z.compareAtPrice||"",onChange:M=>re({...z,compareAtPrice:parseFloat(M.target.value)||0})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[n.jsx(mn,{size:18,className:"text-yellow-400"})," United States Dollar (USD)"]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (USD) *"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-yellow-400",value:z.priceUSD,onChange:M=>re({...z,priceUSD:parseFloat(M.target.value)||0})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>re({...z,price:parseFloat((z.priceUSD*29).toFixed(2))}),className:"flex-1 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded-lg",children:"Convert to R"}),n.jsx("button",{onClick:()=>re({...z,price:0}),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-bold rounded-lg",children:"Reset R"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Member Price (USD)"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-purple-400",value:z.memberPriceUSD||"",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (USD)"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:z.compareAtPriceUSD||"",onChange:M=>re({...z,compareAtPriceUSD:parseFloat(M.target.value)||0})})]})]})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 shadow-lg",children:[n.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 mb-4",children:[n.jsx(RM,{size:18,className:"text-cyan-400"})," Profit & Margins"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[n.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-red-900/30",children:[n.jsx("span",{className:"text-gray-400 block mb-1",children:"Total Unit Cost"}),n.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["R",ge.toFixed(2)]}),n.jsxs("div",{className:"text-xs text-gray-500 mt-2 space-y-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Product:"})," ",n.jsxs("span",{children:["R",(z.costPrice||0).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Shipping:"})," ",n.jsxs("span",{children:["R",(z.shippingCost||0).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Packaging:"})," ",n.jsxs("span",{children:["R",ie.toFixed(2)]})]})]})]}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-green-900/30",children:[n.jsx("span",{className:"text-gray-400 block mb-1",children:"Retail Profit"}),n.jsxs("div",{className:`text-2xl font-bold ${Me>0?"text-green-400":"text-red-500"}`,children:["R",Me.toFixed(2)]})]}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-purple-900/30",children:[n.jsx("span",{className:"text-gray-400 block mb-1",children:"Member Profit"}),n.jsxs("div",{className:`text-2xl font-bold ${Xe>0?"text-purple-400":"text-red-500"}`,children:["R",Xe.toFixed(2)]})]})]})]}),n.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[n.jsx(rc,{size:16,className:"text-pink-500"})," Packaging Breakdown"]}),n.jsxs("select",{className:"bg-zinc-800 text-xs text-gray-300 border border-gray-700 rounded px-2 py-1",onChange:M=>Rs(M.target.value),value:"",children:[n.jsx("option",{value:"",children:"Load Preset..."}),o.map((M,ce)=>n.jsxs("option",{value:M.name,children:[M.name," (R",M.unitCost.toFixed(2),")"]},ce))]})]}),(((un=z.packaging)==null?void 0:un.length)||0)<3&&n.jsxs("button",{onClick:Zs,className:"text-xs flex items-center gap-1 text-cyan-400 hover:text-cyan-300",children:[n.jsx($s,{size:12})," Add Item"]})]}),n.jsx("div",{className:"space-y-3",children:(wn=z.packaging)==null?void 0:wn.map((M,ce)=>n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end bg-zinc-900 p-3 rounded border border-gray-800",children:[n.jsxs("div",{className:"md:col-span-3",children:[n.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Item Name"}),n.jsx("input",{type:"text",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:M.name,onChange:Ue=>Q(ce,"name",Ue.target.value)})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Cost (R)"}),n.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:M.bulkCost,onChange:Ue=>Q(ce,"bulkCost",parseFloat(Ue.target.value)||0)})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Qty"}),n.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:M.bulkQuantity,onChange:Ue=>Q(ce,"bulkQuantity",parseFloat(Ue.target.value)||0)})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Unit Cost"}),n.jsxs("div",{className:"w-full p-1.5 bg-zinc-800 border border-gray-700 rounded text-xs text-red-300 font-mono",children:["R",M.unitCost.toFixed(2)]})]}),n.jsxs("div",{className:"md:col-span-3 flex justify-end pb-1 gap-2",children:[n.jsx("button",{onClick:()=>Hr(ce),className:"text-blue-400 hover:text-blue-300 bg-blue-900/20 p-1 rounded hover:bg-blue-900/40 transition-colors",title:"Save as Preset",children:n.jsx(Ol,{size:16})}),n.jsx("button",{onClick:()=>ee(ce),className:"text-gray-600 hover:text-red-400 p-1",children:n.jsx(ui,{size:16})})]})]},ce))})]})]}),_==="inventory"&&n.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Current Stock"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:z.stock,onChange:M=>re({...z,stock:parseInt(M.target.value)||0})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sold Count"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:z.soldCount,onChange:M=>re({...z,soldCount:parseInt(M.target.value)||0})})]}),n.jsxs("div",{className:"col-span-3",children:[n.jsxs("label",{className:"inline-flex items-center gap-2 mt-2",children:[n.jsx("input",{type:"checkbox",checked:!!z.isSoldOut,onChange:M=>{const ce=M.target.checked;re(Ue=>({...Ue,isSoldOut:ce,stock:ce?0:Ue.stock}))},className:"form-checkbox h-4 w-4 text-red-600 bg-black border-gray-600"}),n.jsx("span",{className:"text-sm text-white font-bold",children:'Mark as "Sorry Just SOLD out!" (Persistent)'})]}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'When checked, this product will display a "Sorry Just SOLD out!" badge to customers regardless of stock. Only uncheck to make it available again.'})]})]}),z.type==="Ring"&&n.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[n.jsx("h3",{className:"text-sm font-bold text-white mb-3",children:"Ring Sizes"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.keys(bt.ringStock||{}).map(M=>{var ce;return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:["Size ",M]}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded text-white text-sm",value:((ce=z.ringStock)==null?void 0:ce[M])||0,onChange:Ue=>re({...z,ringStock:{...z.ringStock,[M]:parseInt(Ue.target.value)||0}})})]},M)})})]}),(z.type==="Stud"||z.type==="Dangle")&&n.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("input",{type:"checkbox",id:"showEarringOptions",checked:z.showEarringOptions,onChange:M=>re({...z,showEarringOptions:M.target.checked}),className:"rounded bg-black border-gray-600 text-pink-600 focus:ring-pink-500"}),n.jsx("label",{htmlFor:"showEarringOptions",className:"text-sm font-bold text-white",children:"Enable Material Customization"})]}),z.showEarringOptions&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex gap-2 flex-wrap",children:In.map(M=>n.jsxs("div",{className:"group relative inline-flex",children:[n.jsxs("button",{onClick:()=>pr(M.name,M.modifier,M.description),className:"text-xs bg-gray-800 hover:bg-gray-700 text-gray-300 px-2 py-1 rounded border border-gray-600",children:["+ ",M.name]}),c.some(ce=>ce.name===M.name)&&n.jsx("button",{onClick:ce=>ta(ce,M.name),className:"absolute -top-1.5 -right-1.5 bg-red-600 text-white rounded-full p-0.5 w-3 h-3 flex items-center justify-center text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:"X"})]},M.name))}),n.jsx("div",{className:"space-y-2",children:(Ut=z.earringMaterials)==null?void 0:Ut.map((M,ce)=>n.jsxs("div",{className:"flex items-center gap-2 bg-black p-2 rounded border border-gray-800",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-white",children:M.name}),n.jsxs("span",{className:"text-xs text-pink-400",children:["+R",M.modifier]})]}),n.jsx("p",{className:"text-xs text-gray-500",children:M.description})]}),n.jsx("button",{onClick:()=>fr(ce),className:"text-gray-600 hover:text-red-400",children:n.jsx(ui,{size:14})})]},ce))}),n.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end pt-2 border-t border-gray-700",children:[n.jsx("div",{className:"col-span-3",children:n.jsx("input",{type:"text",placeholder:"Custom Material",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:xe,onChange:M=>mt(M.target.value)})}),n.jsx("div",{className:"col-span-2",children:n.jsx("input",{type:"number",placeholder:"Price Mod",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:kt,onChange:M=>Dt(parseFloat(M.target.value)||0)})}),n.jsx("div",{className:"col-span-4",children:n.jsx("input",{type:"text",placeholder:"Description",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:pt,onChange:M=>$t(M.target.value)})}),n.jsxs("div",{className:"col-span-3 flex gap-1",children:[n.jsx("button",{onClick:()=>Ys(!1),className:"flex-1 p-1.5 bg-pink-600 text-white rounded text-xs flex items-center justify-center",title:"Add to Product",children:n.jsx($s,{size:14})}),n.jsx("button",{onClick:()=>Ys(!0),className:"flex-1 p-1.5 bg-cyan-600 text-white rounded text-xs flex items-center justify-center",title:"Add & Save Preset",children:n.jsx(Ol,{size:14})})]})]})]})]}),z.type==="Pendant"&&n.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Chain Styles"}),n.jsx("div",{className:"flex gap-2",children:["Metal Chain","Leather Cord","Ribbon"].map(M=>{var ce;return n.jsx("button",{onClick:()=>{var Ve,Ye;const it=((Ve=z.chainStyles)==null?void 0:Ve.includes(M))?(Ye=z.chainStyles)==null?void 0:Ye.filter(St=>St!==M):[...z.chainStyles||[],M];re({...z,chainStyles:it})},className:`px-3 py-1 rounded text-xs border ${(ce=z.chainStyles)!=null&&ce.includes(M)?"bg-cyan-900/50 border-cyan-500 text-cyan-400":"bg-black border-gray-700 text-gray-400"}`,children:M},M)})})]}),((on=z.chainStyles)==null?void 0:on.includes("Metal Chain"))&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Available Lengths"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(QU).map(M=>{var ce,Ue;return n.jsxs("div",{onClick:()=>{const it=z.pendantChainLengths||{};re({...z,pendantChainLengths:{...it,[M]:!it[M]}})},className:`p-2 rounded border cursor-pointer text-xs flex items-center justify-between ${(ce=z.pendantChainLengths)!=null&&ce[M]?"bg-green-900/20 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-500"}`,children:[n.jsx("span",{children:M}),((Ue=z.pendantChainLengths)==null?void 0:Ue[M])&&n.jsx(gt,{size:12})]},M)})})]})]})]}),_==="marketing"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[n.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[n.jsx(yd,{size:18,className:"text-cyan-400"})," Product Visibility & Features"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${z.isNewArrival?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[n.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${z.isNewArrival?"bg-cyan-500 border-cyan-500":"border-gray-600"}`,children:z.isNewArrival&&n.jsx(gt,{size:14,className:"text-black"})}),n.jsx("input",{type:"checkbox",className:"hidden",checked:z.isNewArrival,onChange:M=>re({...z,isNewArrival:M.target.checked})}),n.jsx("span",{className:"text-sm font-bold text-white",children:"New Arrival"})]}),n.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${z.isBestSeller?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[n.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${z.isBestSeller?"bg-yellow-500 border-yellow-500":"border-gray-600"}`,children:z.isBestSeller&&n.jsx(gt,{size:14,className:"text-black"})}),n.jsx("input",{type:"checkbox",className:"hidden",checked:z.isBestSeller,onChange:M=>re({...z,isBestSeller:M.target.checked})}),n.jsx("span",{className:"text-sm font-bold text-white",children:"Best Seller"})]}),n.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${z.isJewelrySet?"bg-purple-900/20 border-purple-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[n.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${z.isJewelrySet?"bg-purple-500 border-purple-500":"border-gray-600"}`,children:z.isJewelrySet&&n.jsx(gt,{size:14,className:"text-white"})}),n.jsx("input",{type:"checkbox",className:"hidden",checked:z.isJewelrySet,onChange:M=>re({...z,isJewelrySet:M.target.checked})}),n.jsx("span",{className:"text-sm font-bold text-white",children:"Jewelry Set"})]})]}),n.jsx("h4",{className:"text-sm text-gray-400 font-bold mt-6 mb-3 uppercase tracking-wider",children:"Category Features"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:z.isFeaturedRing,onChange:M=>re({...z,isFeaturedRing:M.target.checked})}),n.jsx("span",{className:"text-xs text-white",children:"Featured Ring"})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:z.isFeaturedBracelet,onChange:M=>re({...z,isFeaturedBracelet:M.target.checked})}),n.jsx("span",{className:"text-xs text-white",children:"Featured Bracelet"})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:z.isUniquePendant,onChange:M=>re({...z,isUniquePendant:M.target.checked})}),n.jsx("span",{className:"text-xs text-white",children:"Unique Pendant"})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:z.isFeaturedStud,onChange:M=>re({...z,isFeaturedStud:M.target.checked})}),n.jsx("span",{className:"text-xs text-white",children:"Featured Studs"})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:z.isFeaturedDangle,onChange:M=>re({...z,isFeaturedDangle:M.target.checked})}),n.jsx("span",{className:"text-xs text-white",children:"Featured Dangles"})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:z.isFeaturedWatch,onChange:M=>re({...z,isFeaturedWatch:M.target.checked})}),n.jsx("span",{className:"text-xs text-white",children:"Featured Watch"})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:z.isFeaturedJewelryBox,onChange:M=>re({...z,isFeaturedJewelryBox:M.target.checked})}),n.jsx("span",{className:"text-xs text-white",children:"Featured Jewelry Box"})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:z.isFeaturedPerfumeHolder,onChange:M=>re({...z,isFeaturedPerfumeHolder:M.target.checked})}),n.jsx("span",{className:"text-xs text-white",children:"Featured Perfume Holder"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Tags & SEO"}),n.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:z.tags.map((M,ce)=>n.jsxs("span",{className:"bg-gray-800 text-gray-300 text-xs px-2 py-1 rounded flex items-center gap-1",children:[M,n.jsx(pn,{size:12,className:"cursor-pointer",onClick:()=>gn("tags",ce)})]},ce))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:$e,onChange:M=>_e(M.target.value),onKeyDown:M=>M.key==="Enter"&&Gt("tags",$e,_e),placeholder:"Add tag..."}),n.jsx("button",{onClick:()=>Gt("tags",$e,_e),className:"bg-gray-800 p-2 rounded text-white",children:n.jsx($s,{size:18})})]})]})]}),_==="reviews"&&n.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[n.jsxs("div",{className:"flex gap-4 flex-wrap",children:[n.jsxs("div",{className:"flex-1 bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-500/30 p-5 rounded-xl shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3 text-cyan-400 font-bold text-lg",children:[n.jsx(Hw,{size:24}),n.jsx("h3",{children:"AI South African Reviewer"})]}),n.jsxs("button",{onClick:us,disabled:$,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[$?n.jsx($i,{className:"animate-spin",size:18}):n.jsx(Un,{size:18})," Generate Standard Reviews"]})]}),(z.isUniquePendant||z.type==="Pendant")&&n.jsxs("div",{className:"flex-1 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/30 p-5 rounded-xl shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3 text-purple-400 font-bold text-lg",children:[n.jsx(zM,{size:24}),n.jsx("h3",{children:"Unique Piece Reviewer"})]}),n.jsxs("button",{onClick:fn,disabled:$,className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[$?n.jsx($i,{className:"animate-spin",size:18}):n.jsx(Un,{size:18})," Generate Unique Reviews"]})]})]}),n.jsx("div",{className:"space-y-3",children:(Ds=z.reviews)==null?void 0:Ds.map(M=>n.jsx("div",{className:"bg-black p-3 rounded border border-gray-800",children:V===M.id&&B?n.jsxs("div",{className:"space-y-3 animate-in fade-in",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:B.userName,onChange:ce=>L({...B,userName:ce.target.value}),placeholder:"Name"}),n.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:B.location,onChange:ce=>L({...B,location:ce.target.value}),placeholder:"Location"}),n.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white col-span-2",value:B.date,onChange:ce=>L({...B,date:ce.target.value}),placeholder:"Date (YYYY-MM-DD or Text)"})]}),n.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(ce=>n.jsx(dr,{size:16,className:"cursor-pointer",fill:ce<=B.rating?"orange":"none",stroke:ce<=B.rating?"orange":"gray",onClick:()=>L({...B,rating:ce})},ce))}),n.jsx("textarea",{className:"w-full bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",rows:3,value:B.content,onChange:ce=>L({...B,content:ce.target.value})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>A(null),className:"px-3 py-1 bg-zinc-800 text-white text-xs rounded hover:bg-zinc-700",children:"Cancel"}),n.jsx("button",{onClick:ea,className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-500",children:"Save"})]})]}):n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-300",children:[M.userName," ",n.jsxs("span",{className:"text-gray-600 font-normal",children:["from ",M.location]}),n.jsx("span",{className:"text-gray-500 font-normal ml-2",children:M.date})]}),n.jsx("div",{className:"flex text-yellow-400 gap-0.5 my-1",children:[1,2,3,4,5].map(ce=>n.jsx(dr,{size:10,fill:ce<=M.rating?"currentColor":"none"},ce))}),n.jsxs("p",{className:"text-xs text-gray-400 italic",children:['"',M.content,'"']})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>ns(M),className:"p-2 text-gray-400 hover:text-cyan-400",children:n.jsx(cd,{size:16})}),n.jsx("button",{onClick:()=>tt(M.id),className:"p-2 text-gray-400 hover:text-red-400",children:n.jsx(ui,{size:16})})]})]})},M.id))})]}),_==="promotions"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[n.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Gr,{className:"text-green-400"}),n.jsx("div",{children:n.jsx("h3",{className:"text-lg font-bold text-white",children:"Retail Base Price"})})]}),n.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["R",z.price.toFixed(2)]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:n.jsx("div",{className:"space-y-8",children:n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-4",children:[n.jsx(yd,{size:18,className:"text-cyan-400"})," Non-Member Promo"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Promotional Price (R)"}),n.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:z.promoPrice||"",onChange:M=>re({...z,promoPrice:parseFloat(M.target.value)||0})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Discount (%)"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white",value:((z.price-(z.promoPrice||0))/z.price*100).toFixed(0),readOnly:!0}),n.jsx(p2,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[n.jsx(qr,{size:12})," Start"]}),n.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((Si=z.promoStartsAt)==null?void 0:Si.slice(0,16))||"",onChange:M=>re({...z,promoStartsAt:M.target.value})})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[n.jsx(qr,{size:12})," End"]}),n.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((Nn=z.promoExpiresAt)==null?void 0:Nn.slice(0,16))||"",onChange:M=>re({...z,promoExpiresAt:M.target.value})})]})]})]})})})]}),_==="gifts"&&n.jsx("div",{className:"space-y-6 animate-in fade-in",children:n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(bn,{size:18,className:"text-pink-500"})," Promotional Gift"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Select Gift Product"}),n.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm",value:z.giftProductId||"",onChange:M=>re({...z,giftProductId:M.target.value}),children:[n.jsx("option",{value:"",children:"-- No Gift --"}),s.filter(M=>M.id!==z.id).map(M=>n.jsx("option",{value:M.id,children:M.name},M.id))]})]}),z.giftProductId&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Gift Value (R)"}),n.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:z.giftValue||"",onChange:M=>re({...z,giftValue:parseFloat(M.target.value)||0})})]})]})]})}),_==="media"&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 border border-pink-500/30 p-5 rounded-xl shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3 text-pink-400 font-bold text-lg",children:[n.jsx(Un,{size:20}),n.jsx("h3",{children:"AI Product Analyst"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{type:"file",accept:"image/*",ref:we,className:"hidden",onChange:ts}),n.jsxs("button",{onClick:()=>{var M;return(M=we.current)==null?void 0:M.click()},disabled:Z,className:"flex-1 py-3 bg-zinc-800 hover:bg-pink-600 text-white rounded-lg border border-gray-600 hover:border-pink-400 transition-all flex items-center justify-center gap-2 text-sm font-semibold disabled:opacity-50 shadow-lg",children:[Z?n.jsx($i,{className:"animate-spin",size:18}):n.jsx(DM,{size:18}),Z?"Analyzing Image...":"Upload & Analyze with AI"]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Description"}),n.jsxs("button",{onClick:mr,disabled:U,className:"text-xs text-cyan-400 flex items-center gap-1 hover:text-cyan-300",children:[n.jsx(Hw,{size:12})," ",U?"Writing...":"Generate from Text"]})]}),n.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-32 text-white text-sm",value:z.description,onChange:M=>re({...z,description:M.target.value})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"When & How to Wear"}),n.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-24 text-white text-sm",value:z.whenAndHowToWear,onChange:M=>re({...z,whenAndHowToWear:M.target.value}),placeholder:"Styling advice..."})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Images"}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-2",children:[z.images.filter(M=>M!=="").map((M,ce)=>n.jsxs("div",{className:"relative group aspect-square rounded-lg overflow-hidden border border-gray-800 bg-black",children:[n.jsx("img",{src:M,alt:"",className:"w-full h-full object-cover",onError:Wo}),n.jsx("button",{onClick:()=>Wn(ce),className:"absolute top-1 right-1 bg-black/60 hover:bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-all",children:n.jsx(pn,{size:12})})]},ce)),n.jsxs("div",{onClick:()=>{var M;return(M=We.current)==null?void 0:M.click()},className:"aspect-square rounded-lg border border-dashed border-gray-700 bg-zinc-900/30 flex flex-col items-center justify-center text-gray-500 cursor-pointer hover:bg-zinc-800 hover:border-gray-500 transition-all",children:[n.jsx($s,{size:24}),n.jsx("span",{className:"text-[10px] mt-1",children:"Add Image"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:We,className:"hidden",onChange:Ns}),n.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:at,className:"hidden",onChange:Ns}),n.jsxs("button",{onClick:()=>{var M;return(M=We.current)==null?void 0:M.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[n.jsx(VM,{size:16,className:"text-cyan-400"})," Upload"]}),n.jsxs("button",{onClick:()=>{var M;return(M=at.current)==null?void 0:M.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[n.jsx(Wi,{size:16,className:"text-pink-500"})," Camera"]})]})]})]})]}),n.jsxs("div",{className:"p-4 border-t border-gray-800 bg-zinc-950 flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Cancel"}),n.jsxs("button",{onClick:ds,disabled:E,className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2 shadow transition-colors text-sm font-semibold disabled:opacity-50",children:[E?n.jsx($i,{className:"animate-spin",size:18}):n.jsx(Ol,{size:18})," ",E?"Saving...":"Save Product"]})]})]}):n.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:n.jsxs("table",{className:"w-full text-left text-sm",children:[n.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-4",children:n.jsx("input",{type:"checkbox",checked:se.length===Fe.length&&Fe.length>0,onChange:M=>{M.target.checked?Ie(Fe.map(ce=>ce.id)):Ie([])},className:"rounded bg-black border-gray-600"})}),n.jsx("th",{className:"p-4",children:"Product"}),n.jsx("th",{className:"p-4",children:"Type"}),n.jsx("th",{className:"p-4",children:"SKU"}),n.jsx("th",{className:"p-4",children:"Price (R)"}),n.jsx("th",{className:"p-4",children:"Price (USD)"}),n.jsx("th",{className:"p-4",children:"Stock"}),n.jsx("th",{className:"p-4",children:"Status"}),n.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-800",children:Fe.map(M=>n.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[n.jsx("td",{className:"p-4",children:n.jsx("input",{type:"checkbox",checked:se.includes(M.id),onChange:ce=>{ce.target.checked?Ie([...se,M.id]):Ie(se.filter(Ue=>Ue!==M.id))},className:"rounded bg-black border-gray-600"})}),n.jsxs("td",{className:"p-4 flex items-center gap-3",children:[n.jsx("img",{src:M.images[0]||"https://via.placeholder.com/40",className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:"",onError:Wo}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-200 block",children:M.name}),n.jsx("span",{className:"text-xs text-gray-500",children:M.category})]})]}),n.jsx("td",{className:"p-4 text-gray-400",children:M.type}),n.jsx("td",{className:"p-4 text-gray-500 font-mono text-xs",children:M.code}),n.jsxs("td",{className:"p-4 font-medium text-green-400",children:["R",M.price?M.price.toFixed(2):"0.00"]}),n.jsxs("td",{className:"p-4 font-medium text-yellow-400",children:["$ ",M.priceUSD?M.priceUSD.toFixed(2):"0.00"]}),n.jsx("td",{className:"p-4 text-gray-300",children:M.stock}),n.jsx("td",{className:"p-4",children:n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${M.status==="published"?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:M.status})}),n.jsx("td",{className:"p-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:()=>Is(M),className:"p-2 text-gray-400 hover:text-cyan-400",children:n.jsx(cd,{size:16})}),n.jsx("button",{onClick:()=>es(M.id),className:"p-2 text-gray-400 hover:text-red-400",children:n.jsx(ui,{size:16})})]})})]},M.id))})]})}),!C&&n.jsx("div",{className:"fixed right-6 bottom-6 z-50",children:n.jsx("button",{onClick:Hn,title:"Add Product",className:"w-14 h-14 flex items-center justify-center rounded-full bg-pink-600 hover:bg-pink-500 text-white shadow-lg",children:n.jsx($s,{size:20})})}),Ae&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 max-w-md w-full mx-4",children:[n.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[n.jsx(cd,{size:18,className:"text-cyan-400"})," Bulk Edit Prices"]}),n.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Update prices for ",se.length," selected product(s). Leave fields empty to keep current values."]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (R)"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Be.price||"",onChange:M=>xt({...Be,price:parseFloat(M.target.value)||void 0}),placeholder:"Leave empty to keep current"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (USD)"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Be.priceUSD||"",onChange:M=>xt({...Be,priceUSD:parseFloat(M.target.value)||void 0}),placeholder:"Leave empty to keep current"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (R)"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Be.compareAtPrice||"",onChange:M=>xt({...Be,compareAtPrice:parseFloat(M.target.value)||void 0}),placeholder:"Leave empty to keep current"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (USD)"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Be.compareAtPriceUSD||"",onChange:M=>xt({...Be,compareAtPriceUSD:parseFloat(M.target.value)||void 0}),placeholder:"Leave empty to keep current"})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[n.jsx("button",{onClick:()=>{He(!1),xt({})},className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Cancel"}),n.jsxs("button",{onClick:async()=>{try{for(const M of se){const ce=s.find(Ue=>Ue.id===M);if(ce){const Ue={...ce,price:Be.price!==void 0?Be.price:ce.price,priceUSD:Be.priceUSD!==void 0?Be.priceUSD:ce.priceUSD,compareAtPrice:Be.compareAtPrice!==void 0?Be.compareAtPrice:ce.compareAtPrice,compareAtPriceUSD:Be.compareAtPriceUSD!==void 0?Be.compareAtPriceUSD:ce.compareAtPriceUSD,memberPrice:Be.price!==void 0?parseFloat((Be.price*.8).toFixed(2)):ce.memberPrice,memberPriceUSD:Be.priceUSD!==void 0?parseFloat((Be.priceUSD*.8).toFixed(2)):ce.memberPriceUSD};await t(Ue)}}Ie([]),He(!1),xt({}),alert("Bulk update completed successfully!")}catch(M){console.error("Bulk update failed:",M),alert("Bulk update failed. Please check console.")}},className:"px-6 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-500 flex items-center gap-2 shadow transition-colors text-sm font-semibold",children:[n.jsx(Ol,{size:18})," Update Prices"]})]})]})}),n.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/20 to-orange-900/20 border border-yellow-500/30 p-6 rounded-xl mt-6",children:[n.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[n.jsx(It,{size:18,className:"text-yellow-400"})," Manual Winner Override"]}),n.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Override the current week's winner for social proof notifications. Leave empty to use auto-generated winners."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Winner Name"}),n.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(w==null?void 0:w.name)||"",onChange:M=>P(w?{...w,name:M.target.value}:{name:M.target.value,prize:500,currency:"ZAR"}),placeholder:"e.g. John Doe"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prize Amount"}),n.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(w==null?void 0:w.prize)||"",onChange:M=>P(w?{...w,prize:parseFloat(M.target.value)||0}:{name:"",prize:parseFloat(M.target.value)||0,currency:"ZAR"}),placeholder:"500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Currency"}),n.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:(w==null?void 0:w.currency)||"ZAR",onChange:M=>P(w?{...w,currency:M.target.value}:{name:"",prize:500,currency:M.target.value}),children:[n.jsx("option",{value:"ZAR",children:"ZAR (R)"}),n.jsx("option",{value:"USD",children:"USD ($)"})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[n.jsx("button",{onClick:()=>P(null),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Clear Override"}),n.jsx("button",{onClick:()=>alert("Manual winner set!"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-500 transition-colors text-sm",children:"Set Winner"})]})]})]})},t9=()=>{const{categories:s,addCategory:e,updateCategory:t,deleteCategory:r,replaceCategories:i}=Ct(),o=S.useRef({}),[c,d]=S.useState(null),m=(b,w)=>{const P=[...s],C=w==="up"?b-1:b+1;C>=0&&C<P.length&&([P[b],P[C]]=[P[C],P[b]],i(P))},h=async(b,w)=>{if(!w)return;if(Vn)try{d(b);const C=Date.now(),k=Or(Vn,`categories/${b}/${C}_${w.name}`),E=await HS(k,w),F=await Vr(E.ref),U=s.find(q=>q.id===b);U&&t({...U,image:F}),d(null);return}catch(C){console.error("Firebase Storage Upload failed:",C)}const P=new FileReader;P.onloadend=()=>{const C=s.find(k=>k.id===b);C&&typeof P.result=="string"&&t({...C,image:P.result}),d(null)},P.readAsDataURL(w)},g=()=>{e({id:`cat_${Date.now()}`,name:"New Collection",image:"https://picsum.photos/400/400?grayscale",description:""})};return n.jsxs("div",{className:"space-y-6 max-w-4xl",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Category Management"}),n.jsxs("button",{onClick:g,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 transition-colors text-sm",children:[n.jsx($s,{size:18})," Add Category"]})]}),n.jsxs("div",{className:"space-y-4",children:[s.map((b,w)=>n.jsxs("div",{className:"flex items-center gap-4 bg-zinc-900 p-4 rounded-xl border border-gray-800 shadow-sm animate-in fade-in",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("button",{onClick:()=>m(w,"up"),disabled:w===0,className:`p-1 rounded hover:bg-gray-800 ${w===0?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:n.jsx(IM,{size:18})}),n.jsx("button",{onClick:()=>m(w,"down"),disabled:w===s.length-1,className:`p-1 rounded hover:bg-gray-800 ${w===s.length-1?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:n.jsx(AM,{size:18})})]}),n.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Collection Name"}),n.jsx("input",{type:"text",value:b.name,onChange:P=>t({...b,name:P.target.value}),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm focus:border-cyan-400 focus:outline-none"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative w-12 h-12",children:[n.jsx("img",{src:b.image,alt:b.name,className:`w-12 h-12 rounded object-cover bg-zinc-800 border border-gray-700 ${c===b.id?"opacity-50":""}`}),c===b.id&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx($i,{size:16,className:"animate-spin text-pink-500"})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Cover Image"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>{var P;return(P=o.current[b.id])==null?void 0:P.click()},disabled:c===b.id,className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-gray-200 text-xs rounded border border-gray-600 transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:c===b.id?"Uploading...":"Change Image"}),n.jsx("input",{type:"file",ref:P=>{o.current[b.id]=P},className:"hidden",accept:"image/*",onChange:P=>P.target.files&&h(b.id,P.target.files[0])})]})]})]})]}),n.jsx("div",{className:"ml-2",children:n.jsx("button",{onClick:()=>{window.confirm("Delete this category?")&&r(b.id)},className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-900/20 rounded-full transition-all",children:n.jsx(pn,{size:20})})})]},b.id)),s.length===0&&n.jsx("div",{className:"text-center py-12 text-gray-500",children:'No categories found. Click "Add Category" to start.'})]})]})},n9=()=>{const{vouchers:s,addVoucher:e,deleteVoucher:t,cart:r,currency:i}=Ct(),[o,c]=S.useState(10),[d,m]=S.useState(""),[h,g]=S.useState(""),[b,w]=S.useState(""),[P,C]=S.useState(""),[k,E]=S.useState(null),[F,U]=S.useState(!1),q=r.filter(R=>R.code==="GV-DIGITAL"),Z=()=>{const R="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let _="";for(let I=0;I<12;I++)I>0&&I%4===0&&(_+="-"),_+=R.charAt(Math.floor(Math.random()*R.length));C(_)},W=async()=>{if(!o||!P)return;U(!0);const R=o*29,_={code:P,discountType:"fixed",value:R,minSpend:R,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};if(e(_),h&&ye)try{const I=At(ye,"users"),V=sn(I,zn("email","==",h)),A=await Qn(V);if(A.empty)alert(`Voucher created, but user with email ${h} was not found. Please send the code manually.`);else{const B=A.docs[0],L={id:`gift_recv_${Date.now()}`,type:"gift_received",title:"You received a Gift Voucher!",message:`Spoil Me Vintage sent you a voucher worth ${i==="ZAR"?"R":"$"}${i==="ZAR"?R:o}.`,date:new Date().toISOString(),isRead:!1,voucherData:{code:P,amount:R,meta:{recipientName:d||B.data().name||"Valued Customer",senderName:"Spoil Me Vintage Team",message:b||"Enjoy a little something special from us!",deliveryMethod:"recipient"}}};await Ft(B.ref,{notifications:Eo(L)}),alert(`Voucher created AND sent to ${h}!`)}}catch(I){console.error("Error sending voucher:",I),alert("Voucher created, but failed to send to user due to an error.")}else h&&!ye&&alert("Voucher created, but cannot send to user (Database not connected / Demo Mode).");C(""),m(""),g(""),w(""),U(!1)},$=R=>{navigator.clipboard.writeText(R),E(R),setTimeout(()=>E(null),2e3)};return n.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Gift Card Management"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Generate valid codes and manage active vouchers."})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[q.length>0&&n.jsxs("div",{className:"bg-pink-900/10 border border-pink-500/30 p-4 rounded-xl mb-6",children:[n.jsxs("h3",{className:"text-pink-400 font-bold flex items-center gap-2 mb-3",children:[n.jsx(Ka,{size:18})," Pending Requests (",q.length,")"]}),n.jsx("div",{className:"space-y-2",children:q.map((R,_)=>n.jsxs("div",{className:"bg-zinc-900 p-3 rounded-lg border border-pink-500/20 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-white text-sm font-medium",children:R.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Value: ",i==="ZAR"?"R":"$",i==="ZAR"?R.price:(R.price/29).toFixed(0)]})]}),n.jsx("button",{onClick:()=>{c(i==="ZAR"?R.price:R.price/29),m("Customer"),Z()},className:"px-3 py-1.5 bg-pink-600 text-white text-xs rounded hover:bg-pink-500",children:"Process"})]},_))})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl shadow-sm",children:[n.jsxs("h2",{className:"font-bold text-white mb-6 flex items-center gap-2",children:[n.jsx($s,{size:20,className:"text-cyan-400"})," Issue New Voucher"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Voucher Value (USD)"}),n.jsx("input",{type:"number",min:"10",max:"100",value:o,onChange:R=>c(parseFloat(R.target.value)),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white font-bold focus:border-cyan-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Recipient Name"}),n.jsx("input",{type:"text",value:d,onChange:R=>m(R.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white focus:border-cyan-400 outline-none",placeholder:"e.g. Sarah"})]})]}),n.jsxs("div",{className:"bg-black/30 border border-gray-700 rounded-xl p-4 mb-6",children:[n.jsxs("h3",{className:"text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[n.jsx(tp,{size:14})," Send Directly to User (Optional)"]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"User Email Address"}),n.jsx("input",{type:"email",value:h,onChange:R=>g(R.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"user@example.com (Must be registered)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Custom Message"}),n.jsx("textarea",{rows:2,value:b,onChange:R=>w(R.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Enjoy your gift!"})]})]})]}),n.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 mb-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 w-full",children:[n.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Unique Voucher Code"}),n.jsx("div",{className:"font-mono text-2xl text-cyan-400 tracking-widest break-all",children:P||"XXXX-XXXX-XXXX"})]}),n.jsxs("button",{onClick:Z,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors whitespace-nowrap",children:[n.jsx(Vd,{size:16})," Generate Number"]})]}),n.jsx("button",{onClick:W,disabled:!P||F,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center justify-center gap-2",children:F?"Processing...":h?"Create & Send to User":"Activate Voucher Only"})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[n.jsx("h2",{className:"font-bold text-white mb-4",children:"Active Vouchers"}),s.length===0?n.jsx("p",{className:"text-gray-500 text-sm",children:"No active vouchers."}):n.jsx("div",{className:"space-y-3",children:s.map((R,_)=>n.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-gray-600 transition-colors",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-mono text-cyan-400 font-bold",children:R.code}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Value: ",i==="ZAR"?"R":"$",i==="ZAR"?R.value:(R.value/29).toFixed(0),"  Expires: ",new Date(R.expiresAt).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>$(R.code),className:"p-2 text-gray-500 hover:text-white",children:k===R.code?n.jsx(gt,{size:16,className:"text-green-400"}):n.jsx(ep,{size:16})}),n.jsx("button",{onClick:()=>t(R.code),className:"p-2 text-gray-500 hover:text-red-400",children:n.jsx(ui,{size:16})})]})]},_))})]})]}),n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"sticky top-6",children:[n.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[n.jsx(Md,{size:16})," Card Preview"]}),n.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),n.jsxs("div",{className:"relative h-full p-6 flex flex-col justify-between z-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx("div",{className:"font-cherry text-xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400",children:"Spoil Me Vintage"}),n.jsxs("div",{className:"text-3xl font-bold text-white font-architects",children:[i==="ZAR"?"R":"$",i==="ZAR"?(o*29).toFixed(0):o]})]}),n.jsxs("div",{className:"text-center my-auto",children:[n.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-[0.3em] mb-2",children:"VOUCHER CODE"}),n.jsx("div",{className:"bg-white/5 border border-white/10 rounded px-4 py-2 inline-block backdrop-blur-sm",children:n.jsx("span",{className:"font-mono text-xl md:text-2xl font-bold text-cyan-400 tracking-wider",children:P||"--"})})]}),n.jsxs("div",{className:"flex justify-between items-end text-[10px] text-gray-500 uppercase tracking-wider",children:[n.jsxs("div",{children:["To: ",d||"Valued Customer",n.jsx("div",{className:"font-handwriting text-lg text-gray-300 normal-case mt-1",children:"Admin Team"})]}),n.jsxs("div",{className:"text-right",children:["Valid for 3 Years",n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date().toLocaleDateString()})]})]})]})]}),n.jsxs("div",{className:"mt-6 bg-zinc-900/50 p-4 rounded-xl border border-gray-800 text-sm text-gray-400",children:[n.jsx("p",{className:"mb-2 font-bold text-white",children:"Sending Instructions:"}),n.jsxs("ul",{className:"list-disc pl-4 space-y-2 text-xs",children:[n.jsx("li",{children:"Set the Value and generate a unique code."}),n.jsxs("li",{children:[n.jsx("strong",{children:"Option A (Manual):"}),' Click "Activate Voucher Only", then send the code via WhatsApp/Email manually.']}),n.jsxs("li",{children:[n.jsx("strong",{children:"Option B (Direct):"}),` Enter the user's Registered Email. The voucher will appear in their App Profile under "My Gifts".`]})]})]})]})})]})]})},s9=[{id:"fb",name:"Facebook",icon:"facebook",isConnected:!1,accountName:"",urlTemplate:"https://www.facebook.com/sharer/sharer.php?u={url}&quote={text}"},{id:"ig",name:"Instagram",icon:"instagram",isConnected:!1,accountName:"",urlTemplate:""},{id:"tk",name:"TikTok",icon:"video",isConnected:!1,accountName:"",urlTemplate:""},{id:"x",name:"X (Twitter)",icon:"twitter",isConnected:!1,accountName:"",urlTemplate:"https://twitter.com/intent/tweet?text={text}&url={url}"}],r9={fb:["Log in to your Facebook Brand Page in your browser or app.","Enter your Page Name below for the AI context.","When you click 'Post Now', we will open the Facebook Sharer tool.","Paste the caption we generate for you."],ig:["Ensure the Instagram App is installed on this device.","Enter your Instagram Handle (@name) below.","When you click 'Post Now', we will copy the caption to your clipboard.","We will then open Instagram. Create a new post and select the downloaded photo.","Long press in the caption box and select 'Paste'."],tk:["Ensure the TikTok App is installed.","Enter your Handle below.","We will copy the text and hashtags to your clipboard.","When TikTok opens, upload the video/photo and paste the caption."],x:["Log in to X (Twitter).","Enter your handle below.","We will automatically open a 'Compose Tweet' window with your text and link pre-filled."]},i9=()=>{var V;const{products:s}=Ct(),[e,t]=S.useState(s9),[r,i]=S.useState(!1),[o,c]=S.useState(null),[d,m]=S.useState(""),[h,g]=S.useState(null),[b,w]=S.useState({}),[P,C]=S.useState(null),[k,E]=S.useState(!1),[F,U]=S.useState([]),[q,Z]=S.useState({posts:0,errors:0});S.useEffect(()=>{const A=localStorage.getItem("spv_social_config");A&&t(JSON.parse(A))},[]),S.useEffect(()=>{let A;return k&&(A=setInterval(()=>{if(s.length===0)return;const B=s[Math.floor(Math.random()*s.length)],L=e.filter(Ne=>Ne.isConnected),ne=L.length>0?L[Math.floor(Math.random()*L.length)]:e[Math.floor(Math.random()*e.length)],pe=new Date().toLocaleTimeString();U(Ne=>[{time:pe,msg:`AI Worker: Analyzing "${B.name}" trends & hashtags...`,type:"process"},...Ne].slice(0,6)),setTimeout(()=>{const Ne=new Date().toLocaleTimeString();U(Te=>[{time:Ne,msg:`Server: Successfully scheduled post to ${ne.name} (Simulated)`,type:"success"},...Te].slice(0,6)),Z(Te=>({...Te,posts:Te.posts+1}))},2e3)},5e3)),()=>clearInterval(A)},[k,s,e]);const W=A=>{c(A),m(A.accountName||"")},$=()=>{if(!o)return;const A=e.map(B=>B.id===o.id?{...B,isConnected:!0,accountName:d}:B);t(A),localStorage.setItem("spv_social_config",JSON.stringify(A)),c(null)},R=A=>{const B=e.map(L=>L.id===A?{...L,isConnected:!1,accountName:""}:L);t(B),localStorage.setItem("spv_social_config",JSON.stringify(B))},_=async()=>{if(s.length===0)return;i(!0);const A=s[Math.floor(Math.random()*s.length)];g(A);const B={},L=e.filter(ne=>ne.isConnected);if(L.length===0){alert("Please connect at least one platform first."),i(!1);return}for(const ne of L){const pe=ne.accountName?`(Account: @${ne.accountName})`:"";B[ne.id]=await ZU(A.name,`${ne.name} ${pe}`,A.price)}w(B),i(!1)},I=A=>{const B=b[A.id];if(!B||!h)return;const L=`${window.location.origin}/#/product/${h.id}`;if(navigator.clipboard.writeText(`${B} ${L}`).then(()=>{C(A.id),setTimeout(()=>C(null),2e3)}),A.id==="fb"||A.id==="x"){const ne=A.urlTemplate.replace("{url}",encodeURIComponent(L)).replace("{text}",encodeURIComponent(B));window.open(ne,"_blank","width=600,height=400")}else alert("Caption copied! Opening platform..."),A.id==="ig"&&window.open("https://instagram.com","_blank"),A.id==="tk"&&window.open("https://tiktok.com","_blank")};return n.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[o&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>c(null)}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[n.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.id==="fb"&&n.jsx(xd,{size:24,className:"text-blue-500"}),o.id==="ig"&&n.jsx(tg,{size:24,className:"text-pink-500"}),o.id==="x"&&n.jsx(Lh,{size:24,className:"text-white"}),o.id==="tk"&&n.jsx(Wi,{size:24,className:"text-cyan-400"}),"Connect ",o.name]}),n.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:n.jsx(pn,{size:20})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 uppercase mb-1",children:"Account Handle / Name"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"@"}),n.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 pl-8 text-white focus:border-pink-500 outline-none",value:d,onChange:A=>m(A.target.value),placeholder:"spoilmevintage"})]})]}),n.jsxs("div",{className:"bg-black/30 p-4 rounded-lg border border-gray-800",children:[n.jsxs("h4",{className:"text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[n.jsx(d2,{size:14})," How to connect:"]}),n.jsx("ul",{className:"space-y-2",children:(V=r9[o.id])==null?void 0:V.map((A,B)=>n.jsxs("li",{className:"text-xs text-gray-400 flex gap-2",children:[n.jsx("span",{className:"bg-gray-800 w-4 h-4 rounded-full flex items-center justify-center text-[10px] shrink-0 mt-0.5",children:B+1}),A]},B))})]}),n.jsxs("button",{onClick:$,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl flex items-center justify-center gap-2 transition-colors",children:[n.jsx(Ol,{size:18})," Save & Connect"]})]})]})]}),n.jsx("div",{className:"flex justify-between items-start",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Social Media Studio"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Manage accounts and automate daily content sharing."})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:e.map(A=>n.jsxs("div",{className:`p-4 rounded-xl border transition-all relative group ${A.isConnected?"bg-zinc-900 border-green-500/50 shadow-[0_0_10px_rgba(34,197,94,0.1)]":"bg-black border-gray-800 opacity-75"}`,children:[n.jsx("button",{onClick:()=>W(A),className:"absolute top-2 right-2 p-2 text-gray-500 hover:text-white hover:bg-gray-800 rounded-full transition-colors",children:n.jsx($g,{size:16})}),n.jsxs("div",{className:"flex flex-col items-center text-center pt-4 pb-2 cursor-pointer",onClick:()=>W(A),children:[n.jsxs("div",{className:`p-3 rounded-full mb-3 transition-colors ${A.isConnected?"bg-white text-black":"bg-gray-800 text-gray-500"}`,children:[A.id==="fb"&&n.jsx(xd,{size:24}),A.id==="ig"&&n.jsx(tg,{size:24}),A.id==="x"&&n.jsx(Lh,{size:24}),A.id==="tk"&&n.jsx(Wi,{size:24})]}),n.jsx("h3",{className:"font-bold text-white text-sm",children:A.name}),A.isConnected?n.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[n.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsxs("p",{className:"text-xs text-green-400 font-medium",children:["@",A.accountName]})]}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Not Connected"})]}),A.isConnected&&n.jsx("button",{onClick:B=>{B.stopPropagation(),R(A.id)},className:"w-full mt-3 py-1 text-[10px] text-red-400 hover:text-red-300 border border-red-900/30 hover:bg-red-900/20 rounded",children:"Disconnect"}),!A.isConnected&&n.jsx("button",{onClick:()=>W(A),className:"w-full mt-3 py-1 text-[10px] text-cyan-400 hover:text-cyan-300 border border-cyan-900/30 hover:bg-cyan-900/20 rounded",children:"Configure"})]},A.id))}),n.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-500/30 rounded-2xl p-6 md:p-8 shadow-xl relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:n.jsx(t6,{size:120,className:"text-purple-500"})}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 relative z-10",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:`p-2 rounded-lg ${k?"bg-green-500/20 text-green-400":"bg-gray-800 text-gray-500"}`,children:n.jsx(GM,{size:24})}),n.jsx("h2",{className:"text-xl font-bold text-white",children:"Background Auto-Pilot (Demo)"})]}),n.jsx("p",{className:"text-sm text-gray-400 max-w-lg",children:"Enable this to simulate the server-side process that automatically picks products, writes captions, and schedules them to your connected accounts while you sleep."}),k&&n.jsxs("div",{className:"flex items-center gap-2 mt-4 text-xs text-green-400 font-mono bg-green-900/20 border border-green-500/30 px-3 py-1.5 rounded-lg w-fit animate-pulse",children:[n.jsx(i2,{size:14})," Service Running..."]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-right hidden md:block",children:[n.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:q.posts}),n.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Posts Queued"})]}),n.jsxs("button",{onClick:()=>E(!k),className:`px-6 py-4 rounded-xl font-bold flex items-center gap-2 transition-all shadow-lg ${k?"bg-red-600 hover:bg-red-500 text-white shadow-red-900/20":"bg-purple-600 hover:bg-purple-500 text-white shadow-purple-900/20"}`,children:[k?n.jsx($M,{size:20,fill:"currentColor"}):n.jsx(qM,{size:20,fill:"currentColor"}),k?"Stop Simulation":"Start Auto-Pilot"]})]})]}),n.jsxs("div",{className:"mt-8 bg-black rounded-xl border border-gray-800 font-mono text-xs p-4 h-48 overflow-y-auto shadow-inner relative",children:[n.jsxs("div",{className:"absolute top-2 right-2 text-gray-700 flex items-center gap-1 pointer-events-none",children:[n.jsx(YM,{size:14})," Console"]}),F.length===0?n.jsx("div",{className:"h-full flex items-center justify-center text-gray-600 italic",children:"System Idle. Press Start to begin simulation."}):n.jsx("div",{className:"space-y-2",children:F.map((A,B)=>n.jsxs("div",{className:"flex gap-3 animate-in slide-in-from-left-2 fade-in duration-300",children:[n.jsxs("span",{className:"text-gray-600 shrink-0",children:["[",A.time,"]"]}),n.jsxs("span",{className:`break-all ${A.type==="success"?"text-green-400":A.type==="process"?"text-yellow-400":"text-gray-300"}`,children:[A.type==="success"&&n.jsx(gt,{size:12,className:"inline mr-1"}),A.type==="process"&&n.jsx($i,{size:12,className:"inline mr-1 animate-spin"}),A.msg]})]},B))})]})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 md:p-8 shadow-xl",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 mb-8",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[n.jsx(Un,{className:"text-pink-500"})," Manual Content Generator"]}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"One click to pick a product and write tailored captions for all your active platforms."})]}),n.jsxs("button",{onClick:_,disabled:r,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg flex items-center gap-2 disabled:opacity-50 transition-all",children:[r?n.jsx($i,{className:"animate-spin"}):n.jsx(Vd,{}),r?"Creating Strategy...":"Generate Today's Posts"]})]}),h&&n.jsxs("div",{className:"animate-in slide-in-from-bottom-4 fade-in",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6 bg-black p-4 rounded-xl border border-gray-800",children:[n.jsx("img",{src:h.images[0],alt:"",className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-pink-500 uppercase font-bold",children:"Today's Pick"}),n.jsx("h3",{className:"text-white font-bold",children:h.name}),n.jsxs("p",{className:"text-gray-400 text-xs",children:["R",h.price]})]}),n.jsx("div",{className:"ml-auto hidden md:block",children:n.jsxs("a",{href:h.images[0],download:!0,target:"_blank",rel:"noreferrer",className:"text-xs text-cyan-400 flex items-center gap-1 hover:underline",children:[n.jsx(OM,{size:14})," Download High-Res"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.filter(A=>A.isConnected).map(A=>n.jsxs("div",{className:"bg-black border border-gray-800 p-4 rounded-xl space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800 pb-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-300",children:[A.id==="fb"&&n.jsx(xd,{size:16,className:"text-blue-500"}),A.id==="ig"&&n.jsx(tg,{size:16,className:"text-pink-500"}),A.id==="x"&&n.jsx(Lh,{size:16,className:"text-white"}),A.id==="tk"&&n.jsx(Wi,{size:16,className:"text-cyan-400"}),A.name," Draft"]}),n.jsxs("button",{onClick:()=>I(A),className:"text-xs bg-zinc-800 hover:bg-pink-600 text-white px-3 py-1.5 rounded-full transition-colors flex items-center gap-1",children:[P===A.id?n.jsx(gt,{size:12}):n.jsx(Ho,{size:12}),P===A.id?"Copied!":"Post Now"]})]}),n.jsx("textarea",{className:"w-full h-32 bg-transparent text-sm text-gray-300 resize-none focus:outline-none",value:b[A.id]||"Generating...",readOnly:!0})]},A.id))})]}),!h&&!r&&n.jsx("div",{className:"text-center py-12 border border-dashed border-gray-800 rounded-xl",children:n.jsx("p",{className:"text-gray-500",children:'Click "Generate" to start your daily social media workflow.'})})]}),n.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-blue-400 font-bold flex items-center gap-2 mb-3",children:[n.jsx(Qm,{size:20})," System Capabilities Explained"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-gray-300",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-white mb-2",children:"What this system CAN do:"}),n.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[n.jsx("li",{children:"Use AI to generate unique, platform-specific captions for your products instantly."}),n.jsx("li",{children:"Organize your daily posting workflow into a single dashboard."}),n.jsx("li",{children:'Use "Web Intents" to open your social apps with text pre-filled (semi-automated).'}),n.jsxs("li",{children:[n.jsx("strong",{children:"Demo Simulation:"})," As seen above, we can simulate how a server-side bot would process your queue."]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-white mb-2",children:"What requires Server Upgrades:"}),n.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Fully Automated Background Posting:"}),' To enable the "Auto-Pilot" feature for real (posting while you sleep), a dedicated backend server (e.g., Firebase Cloud Functions) is required to run timers (Cron jobs).']}),n.jsxs("li",{children:[n.jsx("strong",{children:"Direct API Integration:"})," Posting directly without opening the app requires expensive API approvals and secure server-side token storage which cannot run safely in a browser-only admin panel."]})]})]})]})]})]})},a9=()=>{var We,at,bt;const{getAllUsers:s,approveAffiliate:e,rejectAffiliate:t,updateAffiliateTier:r,assignAffiliateParent:i}=Ct(),[o,c]=S.useState([]),[d,m]=S.useState(!0),[h,g]=S.useState("applicants"),[b,w]=S.useState("overview"),[P,C]=S.useState("domestic"),[k,E]=S.useState(18.2),[F,U]=S.useState(.055),[q,Z]=S.useState(""),[W,$]=S.useState("all"),[R,_]=S.useState({bronze:10,silver:11,gold:15,platinum:20,vault:1}),[I,V]=S.useState({zar:{spoilMe:2,basic:5,premium:10,deluxe:15},usd:{insider:1,gold:2,deluxe:3}}),[A,B]=S.useState({sprinter:{zar:50,usd:5},bigSpender:{zar:200,usd:15}}),[L,ne]=S.useState(null),[pe,Ne]=S.useState(10),[Te,le]=S.useState(""),[fe,ve]=S.useState(null),[J,K]=S.useState("");S.useEffect(()=>{X()},[]);const X=async()=>{m(!0);const z=await s();c(z),m(!1)};o.filter(z=>{var re;return((re=z.affiliateStats)==null?void 0:re.status)==="pending"});const ue=o.filter(z=>{var re;return((re=z.affiliateStats)==null?void 0:re.status)==="approved"}),G=async()=>{fe&&(fe.action==="approve"?await e(fe.userId,J):await t(fe.userId,J),ve(null),K(""),X())},se=z=>{var re;ne(z),Ne(((re=z.affiliateStats)==null?void 0:re.commissionRate)||10),le("")},Ie=async()=>{if(!L)return;await r(L.id,pe);const z={...L,affiliateStats:{...L.affiliateStats,commissionRate:pe}};ne(z),c(re=>re.map($e=>$e.id===L.id?z:$e)),alert("Commission Tier Updated!")},Ae=async()=>{if(!L||!Te)return;await i(Te,L.id),alert("Recruit Added! This affiliate will now earn 1% commission from their sales.");const z=await s();c(z);const re=z.find($e=>$e.id===L.id);re&&ne(re),le("")},He=L?o.filter(z=>{var re;return((re=z.affiliateStats)==null?void 0:re.parentId)===L.id}):[],Be=(We=L==null?void 0:L.affiliateStats)!=null&&We.parentId?o.find(z=>{var re;return z.id===((re=L.affiliateStats)==null?void 0:re.parentId)}):null,we=He.reduce((z,re)=>{var $e;return z+((($e=re.affiliateStats)==null?void 0:$e.totalSalesValue)||0)},0)*.01;return n.jsxs("div",{className:"space-y-8 relative",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Affiliate Manager"}),n.jsxs("button",{onClick:X,className:"text-xs text-gray-400 hover:text-white flex items-center gap-1",children:[n.jsx(no,{size:14})," Refresh Data"]})]}),n.jsx("div",{className:"flex gap-2 border-b border-gray-800 pb-2 overflow-x-auto",children:[{key:"overview",label:"Dashboard Overview",icon:dm},{key:"payouts",label:"Payout Manager",icon:mn},{key:"partners",label:"Partner List",icon:ks},{key:"settings",label:"Settings & Variables",icon:$g},{key:"validator",label:"Commission Validator",icon:Cr}].map(({key:z,label:re,icon:$e})=>n.jsxs("button",{onClick:()=>w(z),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors whitespace-nowrap flex items-center gap-2 ${b===z?"border-yellow-500 text-yellow-500":"border-transparent text-gray-400 hover:text-white"}`,children:[n.jsx($e,{size:16})," ",re]},z))}),b==="overview"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:n.jsx(mn,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-white",children:"Pending Payouts (ZAR)"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Ready for EFT"})]})]}),n.jsxs("p",{className:"text-3xl font-bold text-green-400",children:["R",ue.filter(z=>{var re;return(((re=z.affiliateStats)==null?void 0:re.balance)||0)>200}).reduce((z,re)=>{var $e;return z+((($e=re.affiliateStats)==null?void 0:$e.balance)||0)},0).toFixed(0)]})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:n.jsx(mn,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-white",children:"Pending Payouts (USD)"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Ready for PayPal"})]})]}),n.jsxs("p",{className:"text-3xl font-bold text-blue-400",children:["$",ue.filter(z=>{var re;return(((re=z.affiliateStats)==null?void 0:re.balance)||0)>50}).reduce((z,re)=>{var $e;return z+((($e=re.affiliateStats)==null?void 0:$e.balance)||0)},0).toFixed(0)]})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:n.jsx(dr,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-white",children:"Top Vault Movers"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Most vault sales"})]})]}),n.jsx("p",{className:"text-3xl font-bold text-purple-400",children:ue.reduce((z,re)=>{var $e;return Math.max(z,(($e=re.affiliateStats)==null?void 0:$e.totalSalesCount)||0)},0)}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Items sold"})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-3 bg-cyan-900/20 rounded-lg text-cyan-400",children:n.jsx(ks,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-white",children:"Total Partners"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Active affiliates"})]})]}),n.jsx("p",{className:"text-3xl font-bold text-cyan-400",children:ue.length})]})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>w("payouts"),className:"p-4 bg-green-900/20 border border-green-500/30 rounded-lg hover:bg-green-900/30 transition-colors text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(mn,{size:20,className:"text-green-400"}),n.jsx("span",{className:"text-green-400 font-bold",children:"Process Payouts"})]}),n.jsx("p",{className:"text-sm text-gray-400",children:"Manage EFT and PayPal payments"})]}),n.jsxs("button",{onClick:()=>w("partners"),className:"p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg hover:bg-blue-900/30 transition-colors text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(ks,{size:20,className:"text-blue-400"}),n.jsx("span",{className:"text-blue-400 font-bold",children:"Manage Partners"})]}),n.jsx("p",{className:"text-sm text-gray-400",children:"Review applications and tiers"})]}),n.jsxs("button",{onClick:()=>w("validator"),className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg hover:bg-red-900/30 transition-colors text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Cr,{size:20,className:"text-red-400"}),n.jsx("span",{className:"text-red-400 font-bold",children:"Validate Commissions"})]}),n.jsx("p",{className:"text-sm text-gray-400",children:"Check for errors and anomalies"})]})]})]})]}),b==="payouts"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4 border-b border-gray-800 pb-2",children:[n.jsxs("button",{onClick:()=>C("domestic"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${P==="domestic"?"border-green-500 text-green-500":"border-transparent text-gray-400 hover:text-white"}`,children:[n.jsx(o2,{size:16})," Domestic EFT (ZAR)"]}),n.jsxs("button",{onClick:()=>C("international"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${P==="international"?"border-blue-500 text-blue-500":"border-transparent text-gray-400 hover:text-white"}`,children:[n.jsx(mn,{size:16})," International PayPal (USD)"]})]}),P==="domestic"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Exchange Rate Settings"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("label",{className:"text-sm text-gray-400",children:"USD to ZAR Rate:"}),n.jsx("input",{type:"number",step:"0.01",value:k,onChange:z=>E(parseFloat(z.target.value)),className:"bg-black border border-gray-600 rounded p-2 text-white text-sm w-24"}),n.jsx("span",{className:"text-gray-500",children:"(Today's rate for conversion)"})]})]}),n.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-gray-800",children:[n.jsx("h3",{className:"text-lg font-bold text-white",children:"Domestic Payout Queue"}),n.jsx("p",{className:"text-sm text-gray-400",children:"South African affiliates with balances > R200"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-black/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Bank"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"ZAR Earned"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"USD Earned"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Final Payout (ZAR)"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Action"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-800",children:ue.filter(z=>{var re;return(((re=z.affiliateStats)==null?void 0:re.balance)||0)>200}).map(z=>{var qe;const re=((qe=z.affiliateStats)==null?void 0:qe.balance)||0,$e=0,_e=re+$e*k;return n.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-bold",children:z.name}),n.jsx("p",{className:"text-gray-400 text-sm",children:z.email})]})}),n.jsx("td",{className:"px-6 py-4 text-gray-300",children:"FNB"}),n.jsxs("td",{className:"px-6 py-4 text-green-400 font-bold",children:["R",re.toFixed(2)]}),n.jsxs("td",{className:"px-6 py-4 text-blue-400",children:["$",$e.toFixed(2)]}),n.jsxs("td",{className:"px-6 py-4 text-yellow-400 font-bold",children:["R",_e.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("button",{className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-500",children:"Mark Paid"})})]},z.id)})})]})}),n.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-gray-400",children:[ue.filter(z=>{var re;return(((re=z.affiliateStats)==null?void 0:re.balance)||0)>200}).length," partners ready for payout"]}),n.jsxs("button",{className:"px-6 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-500 flex items-center gap-2",children:[n.jsx(tc,{size:18})," Download FNB/STD Bank Batch File"]})]})]})]}),P==="international"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Exchange Rate Settings"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("label",{className:"text-sm text-gray-400",children:"ZAR to USD Rate:"}),n.jsx("input",{type:"number",step:"0.0001",value:F,onChange:z=>U(parseFloat(z.target.value)),className:"bg-black border border-gray-600 rounded p-2 text-white text-sm w-24"}),n.jsx("span",{className:"text-gray-500",children:"(Today's rate for conversion)"})]})]}),n.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-gray-800",children:[n.jsx("h3",{className:"text-lg font-bold text-white",children:"International Payout Queue"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Non-SA affiliates with balances > $50"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-black/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"PayPal Email"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"USD Earned"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"ZAR Earned"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Final Payout (USD)"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Action"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-800",children:ue.filter(z=>{var re;return(((re=z.affiliateStats)==null?void 0:re.balance)||0)>50}).map(z=>{var qe;const re=((qe=z.affiliateStats)==null?void 0:qe.balance)||0,$e=0,_e=re+$e*F;return n.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-bold",children:z.name}),n.jsx("p",{className:"text-gray-400 text-sm",children:z.email})]})}),n.jsx("td",{className:"px-6 py-4 text-gray-300",children:z.email}),n.jsxs("td",{className:"px-6 py-4 text-blue-400 font-bold",children:["$",re.toFixed(2)]}),n.jsxs("td",{className:"px-6 py-4 text-green-400",children:["R",$e.toFixed(2)]}),n.jsxs("td",{className:"px-6 py-4 text-yellow-400 font-bold",children:["$",_e.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-500",children:"Mark Paid"})})]},z.id)})})]})}),n.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-gray-400",children:[ue.filter(z=>{var re;return(((re=z.affiliateStats)==null?void 0:re.balance)||0)>50}).length," partners ready for payout"]}),n.jsxs("button",{className:"px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-500 flex items-center gap-2",children:[n.jsx(tc,{size:18})," Export PayPal Mass Pay CSV"]})]})]})]})]}),b==="partners"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Search Partners"}),n.jsx("input",{type:"text",placeholder:"Name, email, or code...",value:q,onChange:z=>Z(z.target.value),className:"w-full bg-black border border-gray-600 rounded p-3 text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Filter by Tier"}),n.jsxs("select",{value:W,onChange:z=>$(z.target.value),className:"bg-black border border-gray-600 rounded p-3 text-white min-w-[150px]",children:[n.jsx("option",{value:"all",children:"All Tiers"}),n.jsx("option",{value:"bronze",children:"Bronze (10%)"}),n.jsx("option",{value:"silver",children:"Silver (11%)"}),n.jsx("option",{value:"gold",children:"Gold (15%)"}),n.jsx("option",{value:"platinum",children:"Platinum (20%)"})]})]})]})}),n.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-black/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Partner"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Current Tier"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Sales (This Month)"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Vault Sales"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-800",children:ue.filter(z=>{var re,$e,_e,qe;return(q===""||z.name.toLowerCase().includes(q.toLowerCase())||z.email.toLowerCase().includes(q.toLowerCase())||z.affiliateCode.toLowerCase().includes(q.toLowerCase()))&&(W==="all"||W==="bronze"&&((re=z.affiliateStats)==null?void 0:re.commissionRate)===10||W==="silver"&&(($e=z.affiliateStats)==null?void 0:$e.commissionRate)===11||W==="gold"&&((_e=z.affiliateStats)==null?void 0:_e.commissionRate)===15||W==="platinum"&&((qe=z.affiliateStats)==null?void 0:qe.commissionRate)===20)}).map(z=>{var re,$e,_e,qe,Vt,xe,mt,kt;return n.jsxs("tr",{className:"hover:bg-zinc-800/50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center text-cyan-400 font-bold",children:z.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-bold",children:z.name}),n.jsx("p",{className:"text-gray-400 text-sm",children:z.email})]})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${((re=z.affiliateStats)==null?void 0:re.commissionRate)===20?"bg-yellow-900/30 text-yellow-400 border border-yellow-500/30":(($e=z.affiliateStats)==null?void 0:$e.commissionRate)===15?"bg-purple-900/30 text-purple-400 border border-purple-500/30":((_e=z.affiliateStats)==null?void 0:_e.commissionRate)===11?"bg-gray-900/30 text-gray-400 border border-gray-500/30":"bg-orange-900/30 text-orange-400 border border-orange-500/30"}`,children:[((qe=z.affiliateStats)==null?void 0:qe.commissionRate)===20?" Gold":((Vt=z.affiliateStats)==null?void 0:Vt.commissionRate)===15?" Silver":((xe=z.affiliateStats)==null?void 0:xe.commissionRate)===11?" Bronze":"Starter"," - ",(mt=z.affiliateStats)==null?void 0:mt.commissionRate,"%"]})}),n.jsxs("td",{className:"px-6 py-4 text-white font-bold",children:["R",(kt=z.affiliateStats)==null?void 0:kt.totalSalesValue.toFixed(0)]}),n.jsxs("td",{className:"px-6 py-4 text-purple-400",children:[Math.floor(Math.random()*50)," items"]}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"px-2 py-1 bg-green-900/30 text-green-400 rounded text-xs border border-green-500/30",children:"Active"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>se(z),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-500",children:"Edit"}),n.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-500",children:"History"})]})})]},z.id)})})]})})})]}),b==="settings"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx($g,{size:18,className:"text-yellow-400"})," Commission Rates"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Standard Products"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"text-center p-2 bg-orange-900/20 border border-orange-500/30 rounded",children:[n.jsx("p",{className:"text-xs text-orange-400",children:"Bronze"}),n.jsxs("p",{className:"text-lg font-bold text-white",children:[R.bronze,"%"]})]}),n.jsxs("div",{className:"text-center p-2 bg-gray-900/20 border border-gray-500/30 rounded",children:[n.jsx("p",{className:"text-xs text-gray-400",children:"Silver"}),n.jsxs("p",{className:"text-lg font-bold text-white",children:[R.silver,"%"]})]}),n.jsxs("div",{className:"text-center p-2 bg-purple-900/20 border border-purple-500/30 rounded",children:[n.jsx("p",{className:"text-xs text-purple-400",children:"Gold"}),n.jsxs("p",{className:"text-lg font-bold text-white",children:[R.gold,"%"]})]}),n.jsxs("div",{className:"text-center p-2 bg-yellow-900/20 border border-yellow-500/30 rounded",children:[n.jsx("p",{className:"text-xs text-yellow-400",children:"Platinum"}),n.jsxs("p",{className:"text-lg font-bold text-white",children:[R.platinum,"%"]})]})]})]}),n.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Wa,{size:16,className:"text-red-400"}),n.jsx("label",{className:"text-sm text-gray-400",children:"Secret Vault Items"})]}),n.jsxs("div",{className:"text-center p-3 bg-red-900/20 border border-red-500/30 rounded",children:[n.jsxs("p",{className:"text-lg font-bold text-red-400",children:[R.vault,"%"]}),n.jsx("p",{className:"text-xs text-red-300",children:"LOCKED AT 1%"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This ensures we do not lose money on clearance stock."})]})]})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(mn,{size:18,className:"text-green-400"})," Membership Fees"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"South African (ZAR)"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Spoil Me"}),n.jsxs("span",{className:"text-green-400 font-bold",children:["R",I.zar.spoilMe]})]}),n.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Basic"}),n.jsxs("span",{className:"text-green-400 font-bold",children:["R",I.zar.basic]})]}),n.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Premium"}),n.jsxs("span",{className:"text-green-400 font-bold",children:["R",I.zar.premium]})]}),n.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Deluxe"}),n.jsxs("span",{className:"text-green-400 font-bold",children:["R",I.zar.deluxe]})]})]})]}),n.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[n.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"International (USD)"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Insider"}),n.jsxs("span",{className:"text-blue-400 font-bold",children:["$",I.usd.insider]})]}),n.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Gold"}),n.jsxs("span",{className:"text-blue-400 font-bold",children:["$",I.usd.gold]})]}),n.jsxs("div",{className:"flex justify-between p-2 bg-black/50 rounded",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Deluxe"}),n.jsxs("span",{className:"text-blue-400 font-bold",children:["$",I.usd.deluxe]})]})]})]})]})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(Er,{size:18,className:"text-orange-400"})," Gamification Bonuses"]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Weekly Achievements"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"p-3 bg-black/50 rounded border border-gray-700",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Sprinter Bonus"}),n.jsxs("span",{className:"text-orange-400 font-bold",children:["R",A.sprinter.zar," / $",A.sprinter.usd]})]}),n.jsx("p",{className:"text-xs text-gray-500",children:"5 memberships in a week"})]}),n.jsxs("div",{className:"p-3 bg-black/50 rounded border border-gray-700",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Big Spender Bonus"}),n.jsxs("span",{className:"text-orange-400 font-bold",children:["R",A.bigSpender.zar," / $",A.bigSpender.usd]})]}),n.jsx("p",{className:"text-xs text-gray-500",children:"R5,000 / $300 sales volume"})]})]})]})})]})]})}),b==="validator"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(Cr,{size:18,className:"text-red-400"})," Commission Validator"]}),n.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Monitor recent commissions for errors and anomalies. Green = Standard, Yellow = Vault, Red = Error."}),n.jsx("div",{className:"space-y-2",children:[{id:1,type:"standard",partner:"Sarah J.",amount:450,product:"Gold Hoops",status:"approved"},{id:2,type:"vault",partner:"Mike T.",amount:10,product:"Clearance Studs",status:"approved"},{id:3,type:"standard",partner:"Lerato K.",amount:1200,product:"Necklace Set",status:"approved"},{id:4,type:"error",partner:"Jessica L.",amount:5e3,product:"Diamond Ring",status:"flagged"}].map(z=>n.jsx("div",{className:`p-4 rounded-lg border ${z.type==="standard"?"bg-green-900/10 border-green-500/30":z.type==="vault"?"bg-yellow-900/10 border-yellow-500/30":"bg-red-900/10 border-red-500/30"}`,children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-white font-bold",children:[z.partner," - ",z.product]}),n.jsxs("p",{className:"text-sm text-gray-400",children:["Commission: R",z.amount]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${z.type==="standard"?"bg-green-900/50 text-green-400":z.type==="vault"?"bg-yellow-900/50 text-yellow-400":"bg-red-900/50 text-red-400"}`,children:z.type==="standard"?"Standard":z.type==="vault"?"Vault (1%)":"ERROR"}),z.status==="flagged"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-500",children:"Void"}),n.jsx("button",{className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-500",children:"Approve"})]})]})]})},z.id))})]})}),fe&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>ve(null)}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-6 max-w-sm w-full relative z-10 shadow-2xl",children:[n.jsxs("h3",{className:"text-lg font-bold text-white mb-2 capitalize",children:[fe.action," Application"]}),n.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["For ",fe.name]}),n.jsx("textarea",{className:"w-full bg-black border border-gray-700 rounded p-3 text-white text-sm mb-4",placeholder:"Add a note (optional)...",rows:3,value:J,onChange:z=>K(z.target.value)}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>ve(null),className:"flex-1 py-2 bg-zinc-800 text-gray-300 rounded hover:bg-zinc-700",children:"Cancel"}),n.jsx("button",{onClick:G,className:`flex-1 py-2 text-white font-bold rounded ${fe.action==="approve"?"bg-green-600 hover:bg-green-500":"bg-red-600 hover:bg-red-500"}`,children:"Confirm"})]})]})]}),L&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>ne(null)}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-4xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg border-2 border-white/10",children:L.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:L.name}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-400",children:L.email}),n.jsx("span",{className:"text-gray-600",children:""}),n.jsx("span",{className:"font-mono text-cyan-400 bg-cyan-900/20 px-2 py-0.5 rounded text-xs border border-cyan-500/30",children:L.affiliateCode})]})]})]}),n.jsx("button",{onClick:()=>ne(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white transition-colors",children:n.jsx(pn,{size:20})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[n.jsx(mn,{size:16,className:"text-green-500"}),n.jsx("span",{className:"text-xs uppercase",children:"Direct Sales"})]}),n.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",(at=L.affiliateStats)==null?void 0:at.totalSalesValue.toFixed(2)]})]}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[n.jsx(dm,{size:16,className:"text-purple-500"}),n.jsx("span",{className:"text-xs uppercase",children:"Total Earned"})]}),n.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["R",(bt=L.affiliateStats)==null?void 0:bt.balance.toFixed(2)]})]}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[n.jsx(ks,{size:16,className:"text-cyan-500"}),n.jsx("span",{className:"text-xs uppercase",children:"Network"})]}),n.jsxs("p",{className:"text-2xl font-bold text-white",children:[He.length," ",n.jsx("span",{className:"text-sm font-normal text-gray-500",children:"Recruits"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700",children:[n.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(WM,{size:18,className:"text-yellow-400"})," Commission Settings"]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Direct Commission Tier (%)"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("input",{type:"number",value:pe,onChange:z=>Ne(parseFloat(z.target.value)),className:"w-full bg-black border border-gray-600 rounded-lg p-3 text-white text-sm font-bold focus:border-pink-500 outline-none"}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),n.jsx("button",{onClick:Ie,className:"bg-pink-600 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 shadow-lg",children:"Update"})]}),n.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:["Standard Tiers: ",n.jsx("span",{className:"text-gray-300",children:"10%, 11%, 15%, 20%"}),". This setting overrides automatic tier progression."]})]})})]}),Be&&n.jsxs("div",{className:"bg-blue-900/10 p-4 rounded-xl border border-blue-500/30 flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-500/20 rounded-full text-blue-400",children:n.jsx(d2,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-blue-300 uppercase font-bold mb-1",children:"Recruited By (Upline)"}),n.jsx("p",{className:"text-white font-bold text-sm",children:Be.name}),n.jsx("p",{className:"text-[10px] text-gray-400",children:Be.affiliateCode})]})]})]}),n.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700 h-full flex flex-col",children:[n.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(m2,{size:18,className:"text-cyan-400"})," Network & Downline"]}),n.jsxs("div",{className:"mb-4 p-4 bg-black/40 rounded-xl border border-gray-700",children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Add Recruit to Downline"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{className:"flex-1 bg-zinc-900 border border-gray-600 rounded-lg p-2 text-xs text-white focus:border-cyan-500 outline-none",value:Te,onChange:z=>le(z.target.value),children:[n.jsx("option",{value:"",children:"Select User to Link..."}),o.filter(z=>{var re,$e;return z.id!==L.id&&((re=z.affiliateStats)==null?void 0:re.parentId)!==L.id&&(($e=z.affiliateStats)==null?void 0:$e.status)==="approved"}).sort((z,re)=>z.name.localeCompare(re.name)).map(z=>n.jsxs("option",{value:z.id,children:[z.name," (",z.affiliateCode,")"]},z.id))]}),n.jsxs("button",{onClick:Ae,disabled:!Te,className:"bg-cyan-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center gap-1",children:[n.jsx($s,{size:14})," Add"]})]}),n.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:[L.name," will earn ",n.jsx("strong",{children:"1%"})," from sales made by users added here."]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 max-h-[300px] custom-scrollbar",children:He.length===0?n.jsx("div",{className:"text-center py-8 border border-dashed border-gray-800 rounded-xl",children:n.jsx("p",{className:"text-gray-500 text-xs",children:"No recruits in downline yet."})}):He.map(z=>{var re,$e;return n.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-zinc-900 rounded-full flex items-center justify-center text-xs font-bold text-gray-400 border border-gray-700",children:z.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-white font-bold",children:z.name}),n.jsx("p",{className:"text-[10px] text-gray-500",children:z.affiliateCode})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-[10px] text-gray-500",children:["Sales: R",(re=z.affiliateStats)==null?void 0:re.totalSalesValue.toFixed(0)]}),n.jsxs("p",{className:"text-xs text-green-400 font-bold",children:["+R",((($e=z.affiliateStats)==null?void 0:$e.totalSalesValue)||0*.01).toFixed(2)]})]})]},z.id)})}),He.length>0&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold",children:"Passive Income Generated"}),n.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",we.toFixed(2)]})]})]})]})]})]})]})]})},o9=()=>{const[s,e]=S.useState(null),[t,r]=S.useState(!1),[i,o]=S.useState(!1);S.useEffect(()=>{const d=window.navigator.userAgent.toLowerCase(),m=/iphone|ipad|ipod/.test(d);if(o(m),window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)return;const g=w=>{w.preventDefault(),e(w),setTimeout(()=>r(!0),3e3)},b=()=>{r(!0)};return window.addEventListener("beforeinstallprompt",g),window.addEventListener("open-install-prompt",b),m&&setTimeout(()=>r(!0),5e3),()=>{window.removeEventListener("beforeinstallprompt",g),window.removeEventListener("open-install-prompt",b)}},[]);const c=async()=>{if(!s)return;s.prompt();const{outcome:d}=await s.userChoice;d==="accepted"&&(e(null),r(!1))};return t?n.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>r(!1)}),n.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-6 shadow-[0_0_50px_rgba(236,72,153,0.4)] relative max-w-sm w-full animate-in zoom-in-95 duration-300 text-center",children:[n.jsx("button",{onClick:()=>r(!1),className:"absolute top-3 right-3 p-2 text-gray-400 hover:text-white rounded-full hover:bg-white/10 transition-colors",children:n.jsx(pn,{size:20})}),n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-pink-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-xl mx-auto mb-6 rotate-3 border-2 border-white/10",children:n.jsx("span",{className:"font-cherry text-white text-3xl drop-shadow-md",children:"SV"})}),n.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Install App"}),n.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-6",children:"Get the best experience! Install Spoil Me Vintage for faster access, exclusive notifications, and offline browsing."}),i?n.jsxs("div",{className:"text-xs text-left text-gray-400 bg-black/40 p-4 rounded-xl border border-gray-700",children:[n.jsxs("p",{className:"mb-3 font-bold text-white flex items-center gap-2",children:[n.jsx(Wi,{size:14})," iOS Installation:"]}),n.jsxs("ol",{className:"list-decimal pl-4 space-y-2",children:[n.jsxs("li",{children:["Tap the ",n.jsx("strong",{className:"text-cyan-400",children:"Share"})," button ",n.jsx(HM,{size:12,className:"inline align-middle"})," in your browser bar."]}),n.jsxs("li",{children:["Scroll down and select ",n.jsx("strong",{className:"text-white",children:"Add to Home Screen"}),"."]})]})]}):n.jsxs("button",{onClick:c,className:"w-full py-3.5 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl transition-all flex items-center justify-center gap-2 text-sm shadow-lg hover:shadow-pink-500/25 hover:scale-[1.02]",children:[n.jsx(tc,{size:18})," Install Now"]})]})]}):null},l9=()=>{const{weeklyWinners:s}=Ct(),[e,t]=S.useState(new Date),[r,i]=S.useState("");return S.useEffect(()=>{const o=()=>{const d=new Date,m=new Date(d);m.setUTCDate(d.getUTCDate()+(7-d.getUTCDay())),m.setUTCHours(8,0,0,0),m<d&&m.setUTCDate(m.getUTCDate()+7),t(m)};o();const c=setInterval(o,6e4);return()=>clearInterval(c)},[]),S.useEffect(()=>{const o=setInterval(()=>{const c=new Date,d=e.getTime()-c.getTime();if(d>0){const m=Math.floor(d/864e5),h=Math.floor(d/(1e3*60*60)%24),g=Math.floor(d/1e3/60%60);i(`${m}d ${h}h ${g}m`)}else i("Drawing new winners...")},1e3);return()=>clearInterval(o)},[e]),n.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-12",children:[n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("div",{className:"inline-block bg-gradient-to-br from-yellow-500 to-orange-500 p-5 rounded-full shadow-[0_0_30px_rgba(250,204,21,0.5)]",children:n.jsx(Er,{size:48,className:"text-white"})}),n.jsx("h1",{className:"font-cherry text-5xl text-white",children:"This Week's Winners!"}),n.jsx("p",{className:"text-gray-300 text-lg",children:"Congratulations to the lucky members of our R19 Spoil Me Package!"})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[n.jsxs("div",{className:"text-center md:text-left",children:[n.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:[n.jsx(qr,{size:20,className:"text-cyan-400"}),"Next Draw"]}),n.jsx("p",{className:"text-gray-400 text-sm",children:"A new set of winners is drawn every Sunday at 08:00 AM."})]}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:r}),n.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Time Remaining"})]})]}),n.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/20 p-5 rounded-xl flex items-start gap-4",children:[n.jsx(bn,{size:24,className:"text-purple-400 shrink-0 mt-1"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-purple-300",children:"How to Claim Your Prize"}),n.jsx("p",{className:"text-sm text-gray-300/80 mt-1",children:"If you're a winner, a notification has been sent to your profile's inbox containing your unique voucher code. Simply apply it at checkout to claim your winnings!"})]})]}),n.jsx("div",{className:"bg-zinc-900 rounded-2xl border border-gray-800 overflow-hidden",children:n.jsx("div",{className:"divide-y divide-gray-800",children:s.map(o=>n.jsxs("div",{className:`p-4 flex items-center justify-between gap-4 transition-colors ${o.rank<=3?"bg-yellow-900/10":""}`,children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm border-2 ${o.rank===1?"bg-yellow-500 border-yellow-300 text-black shadow-[0_0_10px_rgba(250,204,21,0.5)]":o.rank===2?"bg-gray-400 border-gray-200 text-black":o.rank===3?"bg-orange-600 border-orange-400 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:["#",o.rank]}),n.jsx("span",{className:"font-medium text-white",children:o.name})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("span",{className:"font-bold text-lg text-green-400",children:["R",o.prize.toFixed(2)]}),n.jsx("span",{className:"text-xs text-gray-500 block",children:"Voucher"})]})]},o.rank))})}),n.jsxs("div",{className:"mt-12 bg-gradient-to-r from-pink-600 to-purple-600 p-8 rounded-2xl text-center shadow-2xl",children:[n.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Want to be on this list?"}),n.jsx("p",{className:"text-pink-100 mb-6 max-w-lg mx-auto",children:"Join the Spoil Me Package for just R19/month for your chance to win weekly vouchers and get exclusive member perks!"}),n.jsxs(Le,{to:"/membership",className:"inline-flex items-center gap-2 px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-lg text-lg",children:["Join Now ",n.jsx(Yt,{size:20})]})]})]})},c9=()=>{const{weeklyWinners:s}=Ct();return n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{children:[n.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[n.jsx(Er,{size:24,className:"text-yellow-400"}),' Weekly "Spoil Me" Winners']}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Review and manage the simulated weekly prize draw."})]})}),n.jsxs("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-5 rounded-xl flex items-start gap-4",children:[n.jsx(Cr,{size:24,className:"text-yellow-500 shrink-0 mt-1"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-yellow-400",children:"Simulation Mode Active"}),n.jsxs("p",{className:"text-sm text-yellow-200/80 mt-1",children:["This panel displays a ",n.jsx("strong",{className:"text-white",children:"simulated list of winners"})," for demonstration. In a live production environment, this page would be connected to your database to:"]}),n.jsxs("ul",{className:"list-disc pl-5 mt-3 text-xs text-yellow-200/70 space-y-1",children:[n.jsx("li",{children:'Show a list of all users subscribed to the "Spoil Me Package".'}),n.jsxs("li",{children:["Allow you to run the draw, which would randomly select ",n.jsx("strong",{children:"real users"})," from that list."]}),n.jsx("li",{children:"Automatically generate unique voucher codes and assign them to the winning user accounts."}),n.jsx("li",{children:"Send a notification to the winners' in-app inbox."})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsx("div",{className:"flex justify-between items-start mb-4",children:n.jsx("div",{className:"p-3 rounded-lg bg-cyan-900/30 text-cyan-400 border border-cyan-500/20",children:n.jsx(ks,{size:20})})}),n.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Winners This Week"}),n.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:s.length})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[n.jsx("div",{className:"flex justify-between items-start mb-4",children:n.jsx("div",{className:"p-3 rounded-lg bg-green-900/30 text-green-400 border border-green-500/20",children:n.jsx(Fg,{size:20})})}),n.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Prize Value"}),n.jsxs("p",{className:"text-[22px] font-bold text-white mt-1",children:["R",s.reduce((e,t)=>e+t.prize,0).toFixed(2)]})]})]}),n.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:n.jsxs("table",{className:"w-full text-left text-sm",children:[n.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-4 w-20",children:"Rank"}),n.jsx("th",{className:"p-4",children:"Winner Name"}),n.jsx("th",{className:"p-4 text-right",children:"Prize Value"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-800",children:s.map(e=>n.jsxs("tr",{className:`group transition-colors ${e.rank<=3?"bg-yellow-900/10":"hover:bg-zinc-800/50"}`,children:[n.jsx("td",{className:"p-4",children:n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold border ${e.rank===1?"bg-yellow-500 border-yellow-400 text-black":e.rank===2?"bg-gray-400 border-gray-300 text-black":e.rank===3?"bg-orange-600 border-orange-500 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:e.rank})}),n.jsx("td",{className:"p-4 font-medium text-gray-200",children:e.name}),n.jsxs("td",{className:"p-4 text-right font-bold text-lg text-green-400",children:["R",e.prize.toFixed(2)]})]},e.rank))})]})})]})},H2=()=>{const[s,e]=S.useState([]),[t,r]=S.useState({enabled:!0,priceZAR:199,priceUSD:12,reachCount:7540}),[i,o]=S.useState(!0);S.useEffect(()=>{c()},[]);const c=async()=>{try{const g=dt(ye,"settings","ad_config"),b=await Pd(g);if(b.exists()){const w=b.data();e(w.packages||[]),r(w.socialAddon||t)}}catch(g){console.error("Error loading ad config:",g)}finally{o(!1)}},d=async()=>{try{await jr(dt(ye,"settings","ad_config"),{packages:s,socialAddon:t}),alert("Configuration saved successfully!")}catch(g){console.error("Error saving ad config:",g),alert("Failed to save configuration.")}},m=(g,b,w)=>{const P=[...s];P[g]={...P[g],[b]:w},e(P)},h=(g,b)=>{r({...t,[g]:b})};return i?n.jsx("div",{className:"p-6",children:"Loading..."}):n.jsxs("div",{className:"p-6 bg-gray-900 text-white min-h-screen",children:[n.jsx("h1",{className:"text-3xl font-bold mb-8 text-yellow-400",children:"Marketing Settings"}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ad Packages"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full bg-gray-800 rounded-lg",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-700",children:[n.jsx("th",{className:"p-4 text-left",children:"Name"}),n.jsx("th",{className:"p-4 text-left",children:"Duration (Days)"}),n.jsx("th",{className:"p-4 text-left",children:"Price (ZAR)"}),n.jsx("th",{className:"p-4 text-left",children:"Price (USD)"}),n.jsx("th",{className:"p-4 text-left",children:"Benefit"}),n.jsx("th",{className:"p-4 text-left",children:"Active"})]})}),n.jsx("tbody",{children:s.map((g,b)=>n.jsxs("tr",{className:"border-b border-gray-700",children:[n.jsx("td",{className:"p-4",children:n.jsx("input",{type:"text",value:g.name,onChange:w=>m(b,"name",w.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),n.jsx("td",{className:"p-4",children:n.jsx("input",{type:"number",value:g.durationDays,onChange:w=>m(b,"durationDays",parseInt(w.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),n.jsx("td",{className:"p-4",children:n.jsx("input",{type:"number",step:"0.01",value:g.priceZAR,onChange:w=>m(b,"priceZAR",parseFloat(w.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),n.jsx("td",{className:"p-4",children:n.jsx("input",{type:"number",step:"0.01",value:g.priceUSD,onChange:w=>m(b,"priceUSD",parseFloat(w.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),n.jsx("td",{className:"p-4",children:n.jsx("input",{type:"text",value:g.benefit,onChange:w=>m(b,"benefit",w.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})}),n.jsx("td",{className:"p-4",children:n.jsx("input",{type:"checkbox",checked:g.active,onChange:w=>m(b,"active",w.target.checked),className:"w-4 h-4"})})]},g.id))})]})})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Social Media Add-on"}),n.jsx("div",{className:"bg-gray-800 p-4 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Enabled"}),n.jsx("input",{type:"checkbox",checked:t.enabled,onChange:g=>h("enabled",g.target.checked),className:"w-4 h-4"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (ZAR)"}),n.jsx("input",{type:"number",step:"0.01",value:t.priceZAR,onChange:g=>h("priceZAR",parseFloat(g.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (USD)"}),n.jsx("input",{type:"number",step:"0.01",value:t.priceUSD,onChange:g=>h("priceUSD",parseFloat(g.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Network Reach"}),n.jsx("input",{type:"number",value:t.reachCount,onChange:g=>h("reachCount",parseInt(g.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 w-full"})]})]})})]}),n.jsx("button",{onClick:d,className:"bg-yellow-400 text-black font-bold py-2 px-6 rounded-lg hover:bg-yellow-500 transition-colors",children:"Save Changes"})]})},d9=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],u9={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:10},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:10}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:10},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:10}]},h9=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],m9=()=>{const[s,e]=S.useState("shipping"),[t,r]=S.useState(()=>{const C=localStorage.getItem("spv_pudo_costs");return C?JSON.parse(C):d9}),[i,o]=S.useState(()=>{const C=localStorage.getItem("spv_paxi_costs");return C?JSON.parse(C):u9}),[c,d]=S.useState(()=>{const C=localStorage.getItem("spv_door_to_door_costs");return C?JSON.parse(C):h9}),[m,h]=S.useState({}),g=C=>{h(k=>({...k,[C]:"Saved!"})),setTimeout(()=>{h(k=>({...k,[C]:""}))},2e3)};S.useEffect(()=>{},[]),S.useEffect(()=>{try{localStorage.setItem("spv_paxi_costs",JSON.stringify(i))}catch(C){console.error("Failed to save PAXI costs to storage",C)}},[i]),S.useEffect(()=>{},[]),S.useEffect(()=>{try{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(c))}catch(C){console.error("Failed to save Door to Door costs to storage",C)}},[c]);const b=(C,k,E)=>{const F=[...t],U=parseFloat(E)||0;F[C][k]=U,r(F)},w=(C,k,E,F)=>{const U={...i},q=parseFloat(F)||0;U[C][k][E]=q,o(U)},P=(C,k,E)=>{d(F=>F.map((q,Z)=>{if(Z!==C)return q;let W={...q};if(k==="initialCharge"||k==="ratePerKg"||k==="handleFee"||k==="boxFee"){const $=parseFloat(E);k==="ratePerKg"&&(isNaN($)||E==="")?W[k]=null:W[k]=isNaN($)?0:$}else W[k]=E;return W}))};return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[n.jsx(mn,{size:24,className:"text-green-400"})," Shipping Expenses & Supplies"]}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Reference for PUDO & PAXI costs and supplies."})]}),n.jsxs("div",{className:"rounded-xl border border-gray-700 bg-zinc-900",children:[n.jsxs("div",{className:"grid w-full grid-cols-3",children:[n.jsx("button",{onClick:()=>e("shipping"),className:`py-3 px-4 text-sm font-medium transition-colors ${s==="shipping"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Shipping Costs"}),n.jsx("button",{onClick:()=>e("ads"),className:`py-3 px-4 text-sm font-medium transition-colors ${s==="ads"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Ad Revenue"}),n.jsx("button",{onClick:()=>e("marketing"),className:`py-3 px-4 text-sm font-medium transition-colors ${s==="marketing"?"bg-yellow-400 text-black border-b-2 border-yellow-400":"text-gray-300 hover:text-white"}`,children:"Marketing Settings"})]}),n.jsxs("div",{className:"p-6",children:[s==="shipping"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg mb-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[n.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[n.jsx(a2,{size:20,className:"text-cyan-400"})," PUDO Box & Service Pricing"]}),n.jsxs("a",{href:"https://stationery.thecourierguy.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Order Stationery ",n.jsx(Aa,{size:16})]})]}),n.jsx("div",{className:"space-y-4 md:hidden",children:t.map((C,k)=>{const E=C.boxCost+(C.lockerToLockerCost||0)+C.lockerHandleFee;return C.boxCost+(C.doorToLockerCost||0)+C.doorHandleFee,n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-800",children:[n.jsx("h4",{className:"font-bold text-white mb-2",children:C.name}),n.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[n.jsxs("p",{children:["Dimensions: ",C.dimensions]}),n.jsxs("p",{children:["Max Weight: ",C.maxWeight]}),n.jsxs("p",{children:["Box Cost: R",C.boxCost]}),C.lockerToLockerCost&&n.jsxs("p",{children:["Locker to Locker: R",C.lockerToLockerCost]}),C.doorToLockerCost&&n.jsxs("p",{children:["Door to Locker: R",C.doorToLockerCost]}),n.jsxs("p",{className:"font-bold text-cyan-400",children:["Total: R",E.toFixed(2)]})]})]},k)})}),n.jsxs("div",{className:"hidden md:block mt-8",children:[n.jsx("h4",{className:"font-bold text-cyan-400 mb-2 mt-6",children:"Locker to Locker"}),n.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[n.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2",children:"Box"}),n.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),n.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),n.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),n.jsx("th",{className:"px-4 py-2",children:"Locker to Locker"}),n.jsx("th",{className:"px-4 py-2",children:"Locker Handle Fee"}),n.jsx("th",{className:"px-4 py-2",children:"Total"}),n.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),n.jsx("tbody",{children:t.map((C,k)=>{if(C.lockerToLockerCost===null)return null;const E=C.boxCost+(C.lockerToLockerCost||0)+C.lockerHandleFee;return n.jsxs("tr",{className:"border-b border-gray-700",children:[n.jsx("td",{className:"px-4 py-2 font-bold text-white",children:C.name}),n.jsx("td",{className:"px-4 py-2",children:C.dimensions}),n.jsx("td",{className:"px-4 py-2",children:C.maxWeight}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"number",value:C.boxCost,onChange:F=>b(k,"boxCost",F.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"number",value:C.lockerToLockerCost||0,onChange:F=>b(k,"lockerToLockerCost",F.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"number",value:C.lockerHandleFee,onChange:F=>b(k,"lockerHandleFee",F.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),n.jsxs("td",{className:"px-4 py-2 font-bold text-cyan-400",children:["R",E.toFixed(2)]}),n.jsxs("td",{className:"px-4 py-2",children:[n.jsx("button",{className:"px-2 py-1 bg-cyan-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(t)),g(`pudo-lockerToLockerCost-${k}`)},children:""}),n.jsx("span",{className:"text-green-400 text-xs",children:m[`pudo-lockerToLockerCost-${k}`]})]})]},k)})})]}),n.jsx("h4",{className:"font-bold text-purple-400 mb-2 mt-6",children:"Door to Locker"}),n.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400",children:[n.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2",children:"Box"}),n.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),n.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),n.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),n.jsx("th",{className:"px-4 py-2",children:"Door to Locker"}),n.jsx("th",{className:"px-4 py-2",children:"Door Handle Fee"}),n.jsx("th",{className:"px-4 py-2",children:"Total"}),n.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),n.jsx("tbody",{children:t.map((C,k)=>{if(C.doorToLockerCost===null)return null;const E=C.boxCost+(C.doorToLockerCost||0)+C.doorHandleFee;return n.jsxs("tr",{className:"border-b border-gray-700",children:[n.jsx("td",{className:"px-4 py-2 font-bold text-white",children:C.name}),n.jsx("td",{className:"px-4 py-2",children:C.dimensions}),n.jsx("td",{className:"px-4 py-2",children:C.maxWeight}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"number",value:C.boxCost,onChange:F=>b(k,"boxCost",F.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"number",value:C.doorToLockerCost||0,onChange:F=>b(k,"doorToLockerCost",F.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"number",value:C.doorHandleFee,onChange:F=>b(k,"doorHandleFee",F.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),n.jsxs("td",{className:"px-4 py-2 font-bold text-purple-400",children:["R",E.toFixed(2)]}),n.jsxs("td",{className:"px-4 py-2",children:[n.jsx("button",{className:"px-2 py-1 bg-purple-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(t)),g(`pudo-doorToLockerCost-${k}`)},children:""}),n.jsx("span",{className:"text-green-400 text-xs",children:m[`pudo-doorToLockerCost-${k}`]})]})]},k)})})]})]})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg mb-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[n.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[n.jsx(rc,{size:20,className:"text-pink-400"})," PAXI Bag & Service Pricing"]}),n.jsxs("a",{href:"https://www.paxi.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["PAXI Website ",n.jsx(Aa,{size:16})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:Object.entries(i).map(([C,k])=>n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-pink-400 mb-2",children:C}),n.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[n.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2",children:"Bag"}),n.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),n.jsx("th",{className:"px-4 py-2",children:"Service Cost"}),n.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),n.jsx("th",{className:"px-4 py-2",children:"Total"}),n.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),n.jsx("tbody",{children:k.map((E,F)=>{let U=E.bag.includes("Small")?6:15;const q=U+E.serviceCost+E.handleFee;return n.jsxs("tr",{className:"border-b border-gray-700",children:[n.jsx("td",{className:"px-4 py-2 font-bold text-white",children:E.bag}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"number",value:U,onChange:Z=>{},className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right",disabled:!0})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"number",value:E.serviceCost,onChange:Z=>w(C,F,"serviceCost",Z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"number",value:E.handleFee,onChange:Z=>w(C,F,"handleFee",Z.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),n.jsxs("td",{className:"px-4 py-2 font-bold text-pink-400",children:["R",q.toFixed(2)]}),n.jsxs("td",{className:"px-4 py-2",children:[n.jsx("button",{className:"px-2 py-1 bg-pink-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_paxi_costs",JSON.stringify(i)),g(`paxi-${C}-${F}`)},children:""}),n.jsx("span",{className:"text-green-400 text-xs",children:m[`paxi-${C}-${F}`]})]})]},F)})})]})]},C))})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[n.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:n.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[n.jsx(Gr,{size:20,className:"text-yellow-400"})," Door-to-Door Courier Pricing"]})}),n.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[n.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2",children:"Service"}),n.jsx("th",{className:"px-4 py-2",children:"Initial Weight"}),n.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),n.jsx("th",{className:"px-4 py-2",children:"Initial Charge"}),n.jsx("th",{className:"px-4 py-2",children:"Rate per Kg"}),n.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),n.jsx("th",{className:"px-4 py-2",children:"Total"}),n.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),n.jsx("tbody",{children:c.map((C,k)=>{const E=C.boxFee+C.initialCharge+(C.ratePerKg!==null?C.ratePerKg:0)+C.handleFee;return n.jsxs("tr",{className:"border-b border-gray-700",children:[n.jsx("td",{className:"px-4 py-2 font-bold text-white",children:C.service}),n.jsx("td",{className:"px-4 py-2",children:C.initialWeight}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"number",value:C.boxFee,onChange:F=>P(k,"boxFee",F.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"number",value:C.initialCharge,onChange:F=>P(k,"initialCharge",F.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),n.jsx("td",{className:"px-4 py-2",children:C.ratePerKg!==null?n.jsx("input",{type:"number",value:C.ratePerKg,onChange:F=>P(k,"ratePerKg",F.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"}):"-"}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"number",value:C.handleFee,onChange:F=>P(k,"handleFee",F.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),n.jsxs("td",{className:"px-4 py-2 font-bold text-yellow-400",children:["R",E.toFixed(2)]}),n.jsxs("td",{className:"px-4 py-2",children:[n.jsx("button",{className:"px-2 py-1 bg-yellow-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(c)),g(`doorToDoor-${k}`)},children:""}),n.jsx("span",{className:"text-green-400 text-xs",children:m[`doorToDoor-${k}`]})]})]},k)})})]})]})]}),s==="ads"&&n.jsx(AdminAdRevenue,{}),s==="marketing"&&n.jsx(H2,{})]})]})]})},gj=s=>{switch(s){case"Pending":return"bg-yellow-900/30 text-yellow-400 border-yellow-500/30";case"Processing":return"bg-blue-900/30 text-blue-400 border-blue-500/30";case"Shipped":return"bg-cyan-900/30 text-cyan-400 border-cyan-500/30";case"Delivered":return"bg-green-900/30 text-green-400 border-green-500/30";case"Cancelled":return"bg-red-900/30 text-red-400 border-red-500/30";default:return"bg-gray-800 text-gray-400"}},p9=()=>{const{orders:s,updateOrder:e,deleteOrder:t}=Ct(),[r,i]=S.useState(""),[o,c]=S.useState(""),[d,m]=S.useState(null),[h,g]=S.useState(""),b=S.useMemo(()=>s.filter(k=>{const E=r.toLowerCase();return k.orderNumber.toLowerCase().includes(E)||k.customerName.toLowerCase().includes(E)||k.customerEmail.toLowerCase().includes(E)}).filter(k=>o?k.status===o:!0),[s,r,o]),w=k=>{m(k),g(k.status)},P=async()=>{d&&h&&(await e({...d,status:h}),m(null),g(""))},C=async k=>{window.confirm("Are you sure you want to delete this order? This action cannot be undone.")&&(await t(k),m(null))};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Order Management"}),n.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx(no,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),n.jsx("input",{type:"text",placeholder:"Search by Order #, Name, or Email...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:r,onChange:k=>i(k.target.value)})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Vl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),n.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none appearance-none",value:o,onChange:k=>c(k.target.value),children:[n.jsx("option",{value:"",children:"All Statuses"}),n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Processing",children:"Processing"}),n.jsx("option",{value:"Shipped",children:"Shipped"}),n.jsx("option",{value:"Delivered",children:"Delivered"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),n.jsxs("div",{className:"hidden md:block bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[n.jsxs("table",{className:"w-full text-left text-sm",children:[n.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-4",children:"Order #"}),n.jsx("th",{className:"p-4",children:"Date"}),n.jsx("th",{className:"p-4",children:"Customer"}),n.jsx("th",{className:"p-4 text-right",children:"Total"}),n.jsx("th",{className:"p-4",children:"Status"}),n.jsx("th",{className:"p-4"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-800",children:b.map(k=>n.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[n.jsx("td",{className:"p-4 font-mono text-cyan-400",children:k.orderNumber}),n.jsx("td",{className:"p-4 text-gray-400",children:new Date(k.date).toLocaleDateString()}),n.jsxs("td",{className:"p-4",children:[n.jsx("div",{className:"font-medium text-gray-200",children:k.customerName}),n.jsx("div",{className:"text-xs text-gray-500",children:k.customerEmail})]}),n.jsxs("td",{className:"p-4 text-right font-bold text-green-400",children:["R",k.total.toFixed(2)]}),n.jsx("td",{className:"p-4",children:n.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${gj(k.status)}`,children:k.status})}),n.jsx("td",{className:"p-4 text-right",children:n.jsx("button",{onClick:()=>w(k),className:"text-xs text-gray-400 hover:text-white underline opacity-0 group-hover:opacity-100 transition-opacity",children:"View Details"})})]},k.id))})]}),b.length===0&&n.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),n.jsxs("div",{className:"md:hidden space-y-4",children:[b.map(k=>n.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-mono text-cyan-400 text-sm",children:k.orderNumber}),n.jsx("div",{className:"text-xs text-gray-500",children:new Date(k.date).toLocaleString()})]}),n.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${gj(k.status)}`,children:k.status})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-200 text-sm",children:k.customerName}),n.jsx("div",{className:"text-xs text-gray-500",children:k.customerEmail})]}),n.jsxs("div",{className:"flex justify-between items-end pt-2 border-t border-gray-800",children:[n.jsx("button",{onClick:()=>w(k),className:"text-xs text-gray-400 hover:text-white underline",children:"View Details"}),n.jsxs("div",{className:"font-bold text-green-400 text-lg",children:["R",k.total.toFixed(2)]})]})]},k.id)),b.length===0&&n.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),d&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>m(null)}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-2xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Order Details"}),n.jsx("p",{className:"font-mono text-cyan-400",children:d.orderNumber})]}),n.jsx("button",{onClick:()=>m(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white",children:n.jsx(pn,{size:20})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[n.jsx(bi,{size:16,className:"text-gray-500"}),n.jsx("span",{className:"text-gray-300",children:d.customerName})]}),n.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[n.jsx(Ld,{size:16,className:"text-gray-500"}),n.jsx("span",{className:"text-gray-300",children:d.customerEmail})]}),n.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[n.jsx(To,{size:16,className:"text-gray-500"}),n.jsx("span",{className:"text-gray-300",children:new Date(d.date).toLocaleString()})]})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800",children:[n.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[n.jsx(Gr,{size:18,className:"text-cyan-400"}),"Shipping Information"]}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{className:"text-gray-400",children:"Method:"})," ",n.jsx("span",{className:"text-gray-200",children:d.shippingMethod})]}),n.jsxs("p",{children:[n.jsx("strong",{className:"text-gray-400",children:"Details:"})," ",n.jsx("span",{className:"text-gray-200",children:d.shippingDetails})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[n.jsx(Ka,{size:18,className:"text-pink-400"}),"Items (",d.items.reduce((k,E)=>k+E.quantity,0),")"]}),d.items.map((k,E)=>n.jsxs("div",{className:"flex items-center gap-4 bg-black/40 p-3 rounded-lg border border-gray-800",children:[n.jsx("img",{src:k.images[0],alt:k.name,className:"w-12 h-12 rounded object-cover border border-gray-700"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-white",children:k.name}),n.jsxs("p",{className:"text-xs text-gray-400",children:[k.selectedSize&&`Size: ${k.selectedSize}`,k.selectedMaterial&&`Material: ${k.selectedMaterial}`]})]}),n.jsxs("div",{className:"text-sm text-gray-400",children:["x",k.quantity]}),n.jsxs("div",{className:"text-sm font-bold text-white",children:["R",(k.price*k.quantity).toFixed(2)]})]},E))]}),n.jsxs("div",{className:"pt-4 border-t border-gray-800 text-sm text-right space-y-2",children:[n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("span",{className:"text-gray-400",children:"Subtotal:"})," ",n.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",(d.total-d.shippingCost).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("span",{className:"text-gray-400",children:"Shipping:"})," ",n.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",d.shippingCost.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-end gap-4 font-bold text-lg",children:[n.jsx("span",{className:"text-white",children:"Total:"})," ",n.jsxs("span",{className:"text-green-400 w-24 text-left",children:["R",d.total.toFixed(2)]})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-gray-800 bg-zinc-950/50 flex flex-col md:flex-row justify-between items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[n.jsx("label",{className:"text-sm font-bold text-white",children:"Status:"}),n.jsxs("select",{value:h,onChange:k=>g(k.target.value),className:"flex-1 bg-black border border-gray-700 rounded-lg p-2 text-white text-sm focus:border-pink-500 outline-none",children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Processing",children:"Processing"}),n.jsx("option",{value:"Shipped",children:"Shipped"}),n.jsx("option",{value:"Delivered",children:"Delivered"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),n.jsx("button",{onClick:P,className:"px-4 py-2 bg-pink-600 text-white font-bold rounded-lg text-sm hover:bg-pink-500",children:"Save"})]}),n.jsxs("button",{onClick:()=>C(d.id),className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 text-red-400 text-sm font-bold hover:bg-red-900/20 rounded-lg border border-red-900/0 hover:border-red-900/30 transition-colors",children:[n.jsx(ui,{size:16})," Delete Order"]})]})]})]})]})},f9=()=>n.jsx("div",{className:"bg-gray-900 text-white min-h-screen p-8",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-4xl font-bold mb-6 text-cyan-400",children:"Terms and Conditions"}),n.jsxs("div",{className:"space-y-6 text-gray-300",children:[n.jsx("p",{children:"Welcome to Spoil Me. These terms and conditions outline the rules and regulations for the use of Spoil Me's Website, located at spoilme.com."}),n.jsx("p",{children:"By accessing this website we assume you accept these terms and conditions. Do not continue to use Spoil Me if you do not agree to take all of the terms and conditions stated on this page."}),n.jsx("h2",{className:"text-2xl font-semibold text-cyan-400 mt-4",children:"Cookies"}),n.jsx("p",{children:"We employ the use of cookies. By accessing Spoil Me, you agreed to use cookies in agreement with the Spoil Me's Privacy Policy."}),n.jsx("h2",{className:"text-2xl font-semibold text-cyan-400 mt-4",children:"License"}),n.jsx("p",{children:"Unless otherwise stated, Spoil Me and/or its licensors own the intellectual property rights for all material on Spoil Me. All intellectual property rights are reserved. You may access this from Spoil Me for your own personal use subjected to restrictions set in these terms and conditions."})]})]})}),g9=so("App",{web:()=>w0(()=>import("./web-CyWHYwUX.js"),[]).then(s=>new s.AppWeb)}),x9="__capgo_keep_url_path_after_reload",ag="__capgo_history_stack__",xj=100,y9=typeof window<"u"&&typeof document<"u"&&typeof history<"u";if(y9){const s=window;if(!s.__capgoHistoryPatched){s.__capgoHistoryPatched=!0;const e=()=>{try{if(s.__capgoKeepUrlPathAfterReload)return!0}catch{}try{return window.localStorage.getItem(x9)==="1"}catch{return!1}},t=()=>{try{const W=window.sessionStorage.getItem(ag);if(!W)return{stack:[],index:-1};const $=JSON.parse(W);return!$||!Array.isArray($.stack)||typeof $.index!="number"?{stack:[],index:-1}:$}catch{return{stack:[],index:-1}}},r=(W,$)=>{try{window.sessionStorage.setItem(ag,JSON.stringify({stack:W,index:$}))}catch{}},i=()=>{try{window.sessionStorage.removeItem(ag)}catch{}},o=W=>{try{const $=W??window.location.href,R=new URL($ instanceof URL?$.toString():$,window.location.href);return`${R.pathname}${R.search}${R.hash}`}catch{return null}},c=(W,$)=>{if(W.length<=xj)return{stack:W,index:$};const R=W.length-xj,_=W.slice(R),I=Math.max(0,$-R);return{stack:_,index:I}},d=W=>{document.readyState==="complete"||document.readyState==="interactive"?W():window.addEventListener("DOMContentLoaded",W,{once:!0})};let m=!1,h=!1,g=!1;const b=()=>{if(!m)return;const W=t(),$=o();if($){if(W.stack.length===0){W.stack.push($),W.index=0,r(W.stack,W.index);return}(W.index<0||W.index>=W.stack.length)&&(W.index=W.stack.length-1),W.stack[W.index]!==$&&(W.stack[W.index]=$,r(W.stack,W.index))}},w=(W,$)=>{if(!m||h)return;const R=o(W);if(!R)return;let{stack:_,index:I}=t();_.length===0?(_.push(R),I=_.length-1):$?((I<0||I>=_.length)&&(I=_.length-1),_[I]=R):I>=_.length-1?(_.push(R),I=_.length-1):(_=_.slice(0,I+1),_.push(R),I=_.length-1),{stack:_,index:I}=c(_,I),r(_,I)},P=()=>{if(!m||h)return;const W=t();if(W.stack.length===0){b();return}const $=W.index>=0&&W.index<W.stack.length?W.index:W.stack.length-1,R=o();if(W.stack.length===1&&R===W.stack[0])return;const _=W.stack[0];if(!_)return;h=!0;try{history.replaceState(history.state,document.title,_);for(let A=1;A<W.stack.length;A+=1)history.pushState(history.state,document.title,W.stack[A])}catch{h=!1;return}h=!1;const I=W.stack.length-1,V=$-I;V!==0?history.go(V):(history.replaceState(history.state,document.title,W.stack[$]),window.dispatchEvent(new PopStateEvent("popstate")))},C=()=>{!m||g||(g=!0,d(()=>{g=!1,P()}))};let k=null,E=null;const F=()=>{if(!m||h)return;const W=o();if(!W)return;const $=t(),R=$.stack.lastIndexOf(W);R>=0?$.index=R:($.stack.push(W),$.index=$.stack.length-1);const _=c($.stack,$.index);r(_.stack,_.index)},U=()=>{k&&E||(k=history.pushState,E=history.replaceState,history.pushState=function($,R,_){const I=k.call(history,$,R,_);return w(_,!1),I},history.replaceState=function($,R,_){const I=E.call(history,$,R,_);return w(_,!0),I},window.addEventListener("popstate",F))},q=()=>{k&&(history.pushState=k,k=null),E&&(history.replaceState=E,E=null),window.removeEventListener("popstate",F)},Z=W=>{if(m===W){m&&(b(),C());return}m=W,m?(U(),b(),C()):(q(),i())};window.addEventListener("CapacitorUpdaterKeepUrlPathAfterReload",W=>{var $;const R=W,_=($=R==null?void 0:R.detail)===null||$===void 0?void 0:$.enabled;typeof _=="boolean"?(s.__capgoKeepUrlPathAfterReload=_,Z(_)):(s.__capgoKeepUrlPathAfterReload=!0,Z(!0))}),Z(e())}}var yj;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.UPDATE_NOT_AVAILABLE=1]="UPDATE_NOT_AVAILABLE",s[s.UPDATE_AVAILABLE=2]="UPDATE_AVAILABLE",s[s.UPDATE_IN_PROGRESS=3]="UPDATE_IN_PROGRESS"})(yj||(yj={}));var bj;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.PENDING=1]="PENDING",s[s.DOWNLOADING=2]="DOWNLOADING",s[s.INSTALLING=3]="INSTALLING",s[s.INSTALLED=4]="INSTALLED",s[s.FAILED=5]="FAILED",s[s.CANCELED=6]="CANCELED",s[s.DOWNLOADED=11]="DOWNLOADED"})(bj||(bj={}));var vj;(function(s){s[s.OK=0]="OK",s[s.CANCELED=1]="CANCELED",s[s.FAILED=2]="FAILED",s[s.NOT_AVAILABLE=3]="NOT_AVAILABLE",s[s.NOT_ALLOWED=4]="NOT_ALLOWED",s[s.INFO_MISSING=5]="INFO_MISSING"})(vj||(vj={}));const Nh=so("CapacitorUpdater",{web:()=>w0(()=>import("./web-DAhk_k88.js"),[]).then(s=>new s.CapacitorUpdaterWeb)});function b9(s){s.CapacitorUtils.Synapse=new Proxy({},{get(e,t){return new Proxy({},{get(r,i){return(o,c,d)=>{const m=s.Capacitor.Plugins[t];if(m===void 0){d(new Error(`Capacitor plugin ${t} not found`));return}if(typeof m[i]!="function"){d(new Error(`Method ${i} not found in Capacitor plugin ${t}`));return}(async()=>{try{const h=await m[i](o);c(h)}catch(h){d(h)}})()}}})}})}function v9(s){s.CapacitorUtils.Synapse=new Proxy({},{get(e,t){return s.cordova.plugins[t]}})}function w9(s=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!s?b9(window):window.cordova!==void 0&&v9(window))}var gm;(function(s){s.Documents="DOCUMENTS",s.Data="DATA",s.Library="LIBRARY",s.Cache="CACHE",s.External="EXTERNAL",s.ExternalStorage="EXTERNAL_STORAGE",s.ExternalCache="EXTERNAL_CACHE",s.LibraryNoCloud="LIBRARY_NO_CLOUD",s.Temporary="TEMPORARY"})(gm||(gm={}));var wj;(function(s){s.UTF8="utf8",s.ASCII="ascii",s.UTF16="utf16"})(wj||(wj={}));const Nj=so("Filesystem",{web:()=>w0(()=>import("./web-B0X4dXsz.js"),[]).then(s=>new s.FilesystemWeb)});w9();const N9=so("FileOpener"),j9=()=>{const[s,e]=S.useState(null),[t,r]=S.useState(!1),i=S.useCallback(async()=>{if(Fd.isNativePlatform()){try{Nh.notifyAppReady();const c=await Nh.checkForUpdate();if(c.available){e({version:c.bundle.version,apkUrl:""});return}}catch(c){console.warn("CapacitorUpdater plugin check failed, falling back to manual check:",c)}try{const c=await fetch("https://spoilme-edee0.web.app/version.json",{cache:"no-store"});if(!c.ok)throw new Error("Failed to fetch version.json");const d=await c.json(),h=(await g9.getInfo()).version;d.version&&d.version!==h&&e(d)}catch(c){console.error("Error checking for app update:",c)}}},[]),o=S.useCallback(async()=>{if(s){r(!0);try{if(s.apkUrl===""){await Nh.downloadUpdate(),await Nh.setUpdate();return}const c=`Spoil-Me-Vintage-${s.version}.apk`,d=await fetch(s.apkUrl);if(!d.ok)throw new Error("Failed to download APK");const m=await d.arrayBuffer(),h=await new Promise((b,w)=>{const P=new FileReader;P.onload=()=>b(P.result.split(",")[1]),P.onerror=w,P.readAsDataURL(new Blob([m]))});await Nj.writeFile({path:c,data:h,directory:gm.External});const g=await Nj.getUri({directory:gm.External,path:c});await N9.open({filePath:g.uri,contentType:"application/vnd.android.package-archive"})}catch(c){console.error("Error performing app update:",c)}finally{r(!1),e(null)}}},[s]);return S.useEffect(()=>{i()},[i]),{updateAvailable:s,isDownloading:t,performUpdate:o,dismissUpdate:()=>e(null)}},S9=({version:s,isDownloading:e,onUpdate:t,onDismiss:r})=>n.jsx("div",{className:"fixed bottom-4 right-4 z-[100] w-full max-w-sm",children:n.jsx("div",{className:"bg-zinc-800 border-2 border-pink-500 rounded-2xl p-6 shadow-[0_0_40px_rgba(236,72,153,0.3)] animate-in slide-in-from-bottom-10 duration-500",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:n.jsx(tc,{size:24,className:"text-white"})})}),n.jsxs("div",{className:"ml-4 flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-white",children:"New Update Available!"}),n.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Version ",s," is ready to be installed."]}),n.jsxs("div",{className:"mt-4 flex space-x-3",children:[n.jsx("button",{onClick:t,disabled:e,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-white text-black font-bold rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e?n.jsxs(n.Fragment,{children:[n.jsx(UM,{size:18,className:"animate-spin mr-2"}),"Downloading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(tc,{size:18,className:"mr-2"}),"Update Now"]})}),n.jsx("button",{onClick:r,disabled:e,className:"px-3 py-2 text-gray-400 hover:text-white transition-colors",children:"Later"})]})]}),n.jsx("div",{className:"ml-3 flex-shrink-0",children:n.jsx("button",{onClick:r,disabled:e,className:"text-gray-500 hover:text-gray-300",children:n.jsx(pn,{size:20})})})]})})}),_9=()=>{const{products:s}=Ct(),[e,t]=S.useState(""),[r,i]=S.useState(null),[o,c]=S.useState(""),[d,m]=S.useState(""),[h,g]=S.useState(""),[b,w]=S.useState(""),[P,C]=S.useState([]);S.useEffect(()=>{const q=localStorage.getItem("vaultItems");q&&C(JSON.parse(q))},[]);const k=s.filter(q=>q.name.toLowerCase().includes(e.toLowerCase())),E=()=>{if(!r||!o||!d||!h)return;const q={id:Date.now().toString(),productId:r.id,productName:r.name,productImage:r.images[0],vaultPriceZAR:parseFloat(o),vaultPriceUSD:parseFloat(d),vaultStock:parseInt(h),goLiveDate:b||new Date().toISOString().split("T")[0],isActive:!1},Z=[...P,q];C(Z),localStorage.setItem("vaultItems",JSON.stringify(Z)),i(null),c(""),m(""),g(""),w("")},F=q=>{const Z=P.map(W=>W.id===q?{...W,isActive:!W.isActive}:W);C(Z),localStorage.setItem("vaultItems",JSON.stringify(Z))},U=q=>{const Z=P.filter(W=>W.id!==q);C(Z),localStorage.setItem("vaultItems",JSON.stringify(Z))};return n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-3",children:[n.jsx(It,{className:"text-yellow-400",size:28}),"Vault Management"]})}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[n.jsxs("h3",{className:"font-bold text-white text-lg mb-6 flex items-center gap-3",children:[n.jsx($s,{size:20,className:"text-green-400"}),"Add Product to Vault"]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Search & Select Product"}),n.jsxs("div",{className:"relative",children:[n.jsx(no,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),n.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 pl-10 text-white",value:e,onChange:q=>t(q.target.value)})]})]}),n.jsx("div",{className:"max-h-64 overflow-y-auto bg-zinc-800 rounded border border-gray-600",children:k.map(q=>n.jsx("div",{className:`p-3 border-b border-gray-700 cursor-pointer hover:bg-zinc-700 ${(r==null?void 0:r.id)===q.id?"bg-cyan-900/30 border-cyan-500":""}`,onClick:()=>i(q),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:q.images[0],className:"w-12 h-12 rounded object-cover",alt:""}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-medium",children:q.name}),n.jsxs("p",{className:"text-gray-400 text-sm",children:["Stock: ",q.stock]})]})]})},q.id))})]}),n.jsxs("div",{className:"space-y-4",children:[r&&n.jsxs("div",{className:"bg-zinc-800 p-4 rounded border border-cyan-500/30",children:[n.jsx("h4",{className:"text-white font-medium mb-2",children:"Selected Product"}),n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("img",{src:r.images[0],className:"w-16 h-16 rounded object-cover",alt:""}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white",children:r.name}),n.jsxs("p",{className:"text-gray-400 text-sm",children:["Stock: ",r.stock]})]})]}),n.jsxs("div",{className:"bg-zinc-700 p-3 rounded border border-gray-600",children:[n.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Current Product Price"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("p",{className:"text-green-400 font-bold",children:["R",r.price]}),n.jsxs("p",{className:"text-blue-400 font-bold",children:["$",r.priceUSD]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Price (ZAR)"}),n.jsx("input",{type:"number",placeholder:"e.g., 10",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:o,onChange:q=>c(q.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Price (USD)"}),n.jsx("input",{type:"number",placeholder:"e.g., 1",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:d,onChange:q=>m(q.target.value)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Vault Stock Quantity"}),n.jsx("input",{type:"number",placeholder:"e.g., 50",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:h,onChange:q=>g(q.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Go Live Date"}),n.jsx("input",{type:"date",className:"w-full bg-zinc-800 border border-gray-600 rounded p-3 text-white",value:b,onChange:q=>w(q.target.value)})]}),n.jsxs("button",{onClick:E,disabled:!r||!o||!d||!h,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-gray-600 text-white font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:[n.jsx($s,{size:16}),"Add to Vault Batch"]})]})]})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[n.jsxs("h3",{className:"font-bold text-white text-lg mb-6 flex items-center gap-3",children:[n.jsx(rc,{size:20,className:"text-purple-400"}),"Vault Items (",P.length,")"]}),n.jsxs("div",{className:"space-y-4",children:[P.map(q=>n.jsx("div",{className:"bg-zinc-800 p-4 rounded border border-gray-600",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("img",{src:q.productImage,className:"w-16 h-16 rounded object-cover",alt:""}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-white font-medium",children:q.productName}),n.jsxs("p",{className:"text-gray-400 text-sm",children:["Vault: R",q.vaultPriceZAR," / $",q.vaultPriceUSD," | Stock: ",q.vaultStock]}),n.jsxs("p",{className:"text-gray-400 text-sm",children:["Go Live: ",q.goLiveDate]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${q.isActive?"bg-green-900/30 text-green-400":"bg-gray-700 text-gray-400"}`,children:q.isActive?"ACTIVE":"INACTIVE"})}),n.jsx("button",{onClick:()=>F(q.id),className:`px-3 py-1 rounded text-xs font-bold transition-colors ${q.isActive?"bg-red-600 hover:bg-red-500 text-white":"bg-green-600 hover:bg-green-500 text-white"}`,children:q.isActive?"Deactivate":"Activate"}),n.jsx("button",{onClick:()=>U(q.id),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors",children:"Remove"})]})]})},q.id)),P.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-400",children:[n.jsx(It,{size:48,className:"mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No items in the vault yet. Add some products above!"})]})]})]})]})},C9=()=>{const{user:s,currency:e,addToCart:t,products:r}=Ct(),i=As(),[o,c]=S.useState([]),[d,m]=S.useState([]),[h,g]=S.useState(""),[b,w]=S.useState(""),[P,C]=S.useState("newest"),[k,E]=S.useState(!1),[F,U]=S.useState(!1),[q,Z]=S.useState(null);S.useEffect(()=>{const _=localStorage.getItem("vaultItems");if(_){const I=JSON.parse(_).filter(V=>V.isActive);c(I),m(I)}},[]),S.useEffect(()=>{let _=o;h&&(_=_.filter(I=>I.productName.toLowerCase().includes(h.toLowerCase()))),b&&(_=_.filter(I=>I.productName.toLowerCase().includes(b.toLowerCase()))),_.sort((I,V)=>{switch(P){case"price-low":return(e==="ZAR"?I.vaultPriceZAR:I.vaultPriceUSD)-(e==="ZAR"?V.vaultPriceZAR:V.vaultPriceUSD);case"price-high":return(e==="ZAR"?V.vaultPriceZAR:V.vaultPriceUSD)-(e==="ZAR"?I.vaultPriceZAR:I.vaultPriceUSD);case"newest":default:return new Date(V.goLiveDate).getTime()-new Date(I.goLiveDate).getTime()}}),m(_)},[o,h,b,P,e]);const W=s.membershipType==="deluxe"||s.membershipType==="Deluxe",$=_=>{if(!W){Z(_),U(!0);return}const I=s.membershipMonths||0;let V=5;I>=3?V=10:I>=2&&(V=7);const A=JSON.parse(localStorage.getItem(`vaultPurchases_${s.id}_${new Date().getMonth()}`)||"[]");if(A.length>=V){const B=I>=3?"You have reached your monthly limit of 10 Vault items. Keep your subscription active for unlimited access!":`You have reached your limit of ${V} Vault items this month. Keep your subscription to unlock ${I>=2?"unlimited":"7"} items next month!`;alert(B);return}t({id:_.id,name:_.productName,price:e==="ZAR"?_.vaultPriceZAR:_.vaultPriceUSD,image:_.productImage,quantity:1,vaultItem:!0}),A.push(_.id),localStorage.setItem(`vaultPurchases_${s.id}_${new Date().getMonth()}`,JSON.stringify(A)),alert("Added to cart!")},R=_=>{U(!1),_==="subscribe"?i("/membership"):alert("Redirecting to regular product page...")};return n.jsxs("div",{className:"py-8 space-y-8",children:[n.jsxs("div",{className:"text-center space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx(It,{className:"text-yellow-400",size:40}),n.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"THE SECRET VAULT"}),n.jsx("button",{onClick:()=>E(!k),className:"text-gray-400 hover:text-white transition-colors",children:n.jsx(Mh,{size:20})})]}),n.jsx("p",{className:"font-architects text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"Exclusive Clearance & Samples for Deluxe Members."}),k&&n.jsxs("div",{className:"bg-zinc-900 border border-cyan-500/30 p-4 rounded-lg max-w-md mx-auto text-left",children:[n.jsx("h4",{className:"text-cyan-400 font-bold mb-2",children:"How The Vault Works:"}),n.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[n.jsxs("li",{children:[" ",n.jsx("strong",{className:"text-white",children:"Exclusive Access:"})," Only Deluxe Members can purchase."]}),n.jsxs("li",{children:[" ",n.jsx("strong",{className:"text-white",children:"Loyalty Limits:"})," Month 1 members can buy 5 items. Limits increase every month."]}),n.jsxs("li",{children:[" ",n.jsx("strong",{className:"text-white",children:"First Come, First Serve:"})," Stock is limited. Once it's gone, it's gone."]}),n.jsxs("li",{children:[" ",n.jsx("strong",{className:"text-white",children:"As-Is:"})," Items may be samples or have minor imperfections."]})]})]})]}),n.jsx("div",{className:"bg-zinc-900 border border-gray-700 p-4 rounded-xl sticky top-4 z-10",children:n.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Type"}),n.jsxs("select",{value:h,onChange:_=>g(_.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"earring",children:"Earrings"}),n.jsx("option",{value:"ring",children:"Rings"}),n.jsx("option",{value:"necklace",children:"Necklaces"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Color"}),n.jsxs("select",{value:b,onChange:_=>w(_.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[n.jsx("option",{value:"",children:"All Colors"}),n.jsx("option",{value:"silver",children:"Silver"}),n.jsx("option",{value:"gold",children:"Gold"}),n.jsx("option",{value:"rose",children:"Rose Gold"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:"Sort By"}),n.jsxs("select",{value:P,onChange:_=>C(_.target.value),className:"bg-zinc-800 border border-gray-600 rounded p-2 text-white text-sm",children:[n.jsx("option",{value:"newest",children:"Newest Added"}),n.jsx("option",{value:"price-low",children:"Price: Low to High"}),n.jsx("option",{value:"price-high",children:"Price: High to Low"})]})]})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:d.map(_=>n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-4 hover:border-cyan-500/50 transition-colors",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:_.productImage,className:"w-full h-48 object-cover rounded-lg mb-4",alt:""}),_.vaultStock<5&&n.jsx("div",{className:"absolute top-2 right-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded",children:"Almost Gone!"})]}),n.jsx("h3",{className:"text-white font-medium mb-2",children:_.productName}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("span",{className:"text-2xl font-bold text-green-400",children:e==="ZAR"?`R${_.vaultPriceZAR}`:`$${_.vaultPriceUSD}`}),n.jsx("span",{className:"text-gray-500 line-through text-sm",children:(()=>{const I=r.find(V=>V.id===_.productId);return I?e==="ZAR"?`R${I.price}`:`$${I.priceUSD}`:e==="ZAR"?`R${_.vaultPriceZAR*10}`:`$${_.vaultPriceUSD*10}`})()})]}),n.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:["Stock: ",_.vaultStock," left"]}),n.jsx("button",{onClick:()=>$(_),className:`w-full py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2 ${W?"bg-cyan-600 hover:bg-cyan-500 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:W?n.jsxs(n.Fragment,{children:[n.jsx(fc,{size:16}),"ADD TO CART"]}):n.jsxs(n.Fragment,{children:[n.jsx(Wa,{size:16})," UNLOCK PRICE"]})})]},_.id))}),d.length===0&&n.jsxs("div",{className:"text-center py-16",children:[n.jsx(It,{size:64,className:"mx-auto mb-4 text-gray-600"}),n.jsx("h3",{className:"text-xl font-bold text-gray-400 mb-2",children:"The Vault is Empty"}),n.jsx("p",{className:"text-gray-500",children:"Check back later for exclusive deals!"})]}),F&&q&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>U(!1)}),n.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-md w-full shadow-[0_0_50px_rgba(236,72,153,0.4)]",children:[n.jsx("button",{onClick:()=>U(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:""}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(Wa,{size:48,className:"mx-auto mb-4 text-yellow-400"}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Access Denied"}),n.jsx("p",{className:"text-gray-300",children:"You have found The Secret Vault, but you don't have the key!"})]}),n.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("img",{src:q.productImage,className:"w-16 h-16 rounded object-cover",alt:""}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-white font-medium",children:q.productName}),n.jsxs("p",{className:"text-green-400 font-bold",children:["Vault Price: ",e==="ZAR"?`R${q.vaultPriceZAR}`:`$${q.vaultPriceUSD}`]})]})]}),n.jsxs("p",{className:"text-sm text-gray-300",children:["This ",n.jsx("strong",{children:e==="ZAR"?`R${q.vaultPriceZAR}`:`$${q.vaultPriceUSD}`})," deal is reserved exclusively for Deluxe Members."]})]}),n.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"Want this item? Subscribe to the Deluxe Package today and get instant access to the Vault, plus R150 monthly store credit."}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:()=>R("subscribe"),className:"w-full py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-lg transition-colors",children:"BECOME A DELUXE MEMBER - R199 / $25"}),n.jsx("button",{onClick:()=>R("payfull"),className:"w-full py-2 text-gray-400 hover:text-white text-sm underline",children:"No thanks, I'll pay full price"})]})]})]})]})},jh=Sr?g0(Sr):null,k9=()=>{const{user:s}=Ct(),[e,t]=S.useState(""),[r,i]=S.useState([]),[o,c]=S.useState(null),[d,m]=S.useState(!1),[h,g]=S.useState(!1),[b,w]=S.useState(""),[P,C]=S.useState(7),[k,E]=S.useState(""),[F,U]=S.useState(!1),[q,Z]=S.useState(0),[W,$]=S.useState([]),[R,_]=S.useState(null),[I,V]=S.useState(!1),[A,B]=S.useState(!0),[L,ne]=S.useState([]),pe=S.useRef(null),[Ne,Te]=S.useState(20),[le,fe]=S.useState("all"),[ve,J]=S.useState("all"),K=["Spoil Me","Basic","Premium","Deluxe Boss","Insider Club","Gold Member","Deluxe Vault"],X=async()=>{if(!o&&!k||!b||!P||!jh)return;let we=o==null?void 0:o.id;if(!we&&k)try{const We=At(ye,"users"),at=sn(We,zn("email","==",k)),bt=await Qn(at);if(bt.empty){alert("User not found with that email.");return}we=bt.docs[0].id}catch(We){console.error("Error finding user:",We),alert("Error finding user.");return}try{await Io(jh,"grantTrial")({userId:we,plan:b,days:P}),alert("Trial granted successfully!"),g(!1),c(null),w(""),C(7),E("")}catch(We){console.error("Error granting trial:",We),alert("Failed to grant trial")}},ue=async()=>{if(!(!o||!jh))try{await Io(jh,"adjustStoreCredit")({userId:o.id,amount:q}),alert("Store credit adjusted successfully!"),U(!1),c(null),Z(0)}catch(we){console.error("Error adjusting credit:",we),alert("Failed to adjust credit")}},G=we=>{switch(we){case"active":return"text-green-400";case"trial":return"text-blue-400";case"expired":return"text-red-400";case"cancelled":return"text-gray-400";default:return"text-gray-400"}},se=we=>{switch(we){case"active":return n.jsx(Go,{className:"w-4 h-4"});case"trial":return n.jsx(qr,{className:"w-4 h-4"});case"expired":return n.jsx(Ug,{className:"w-4 h-4"});default:return n.jsx(Ug,{className:"w-4 h-4"})}},Ie=async()=>{V(!0);try{const we=At(ye,"users"),We=sn(we,ci("createdAt","desc"),Ll(20)),at=await Qn(We),bt=at.docs[at.docs.length-1],z=at.docs.map(re=>({id:re.id,...re.data()}));$(z),_(bt),B(at.docs.length===20)}catch(we){console.error("Error loading users:",we)}finally{V(!1)}},Ae=async()=>{if(!(!R||I)){V(!0);try{const we=At(ye,"users"),We=sn(we,ci("createdAt","desc"),oI(R),Ll(20)),at=await Qn(We),bt=at.docs[at.docs.length-1],z=at.docs.map(re=>({id:re.id,...re.data()}));$(re=>[...re,...z]),_(bt),B(at.docs.length===20)}catch(we){console.error("Error loading more:",we)}finally{V(!1)}}},He=async we=>{if(t(we),!we){Ie();return}const We=At(ye,"users"),at=sn(We,zn("email",">=",we),zn("email","<=",we+""),Ll(20)),bt=await Qn(at);$(bt.docs.map(z=>({id:z.id,...z.data()}))),B(!1)},Be=we=>{if(t(we),!we.trim()){ne([]);return}pe.current&&clearTimeout(pe.current),pe.current=setTimeout(()=>{(async()=>{const at=At(ye,"users"),bt=sn(at,zn("email",">=",we),zn("email","<=",we+""),Ll(10)),re=(await Qn(bt)).docs.map($e=>$e.data().email);ne(re)})()},300)},xt=async()=>{V(!0),ne([]);try{const we=At(ye,"users");let We=sn(we,ci("createdAt","desc"));le==="ZA"?We=sn(We,zn("country","==","South Africa")):le==="other"&&(We=sn(We,zn("country","!=","South Africa"))),ve==="buyers"&&(We=sn(We,zn("ordersCount",">",0))),e?We=sn(At(ye,"users"),zn("email","==",e)):We=sn(We,ci("createdAt","desc")),We=sn(We,Ll(Ne));const at=await Qn(We),bt=at.docs[at.docs.length-1],z=at.docs.map(re=>({id:re.id,...re.data()}));$(z),_(bt),B(at.docs.length===Ne),z.length===0&&alert("No users found matching these filters.")}catch(we){console.error("Error applying filters:",we),we.message.includes("requires an index")?alert("System Warning: This specific filter combination requires a new Database Index. Open Console (F12) and click the Firebase link."):alert("Failed to fetch. "+we.message)}finally{V(!1)}};return S.useEffect(()=>{Ie()},[]),n.jsxs("div",{className:"p-8 space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Member Management"}),n.jsx("p",{className:"text-gray-400",children:"Search users and manage their membership benefits"})]}),n.jsx("div",{className:"bg-zinc-900 p-6 rounded-lg border border-zinc-800 mb-8",children:n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Search Email"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Start typing email...",value:e,onChange:we=>Be(we.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white outline-none focus:border-gold"}),L.length>0&&n.jsx("div",{className:"absolute top-full left-0 w-full bg-zinc-800 border border-zinc-700 rounded-b shadow-xl z-50 max-h-40 overflow-y-auto",children:L.map(we=>n.jsx("div",{onClick:()=>{t(we),ne([]),He(we)},className:"p-2 hover:bg-zinc-700 cursor-pointer text-sm text-gray-300 border-b border-zinc-700/50",children:we},we))})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Region"}),n.jsxs("select",{value:le,onChange:we=>fe(we.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white",children:[n.jsx("option",{value:"all",children:" All Regions"}),n.jsx("option",{value:"ZA",children:" South Africa"}),n.jsx("option",{value:"other",children:" International"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Activity"}),n.jsxs("select",{value:ve,onChange:we=>J(we.target.value),className:"w-full bg-black border border-zinc-700 p-3 rounded text-white",children:[n.jsx("option",{value:"all",children:"Everyone"}),n.jsx("option",{value:"buyers",children:" Buyers Only"})]})]})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{onClick:xt,disabled:I,className:"w-full bg-gold hover:bg-yellow-600 text-black font-bold p-3 rounded flex items-center justify-center gap-2 transition-all",children:I?"Processing...":n.jsxs(n.Fragment,{children:[n.jsx(no,{size:18})," RUN SEARCH"]})})})]})}),r.length>0&&n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Search Results"}),n.jsx("div",{className:"space-y-3",children:r.map(we=>n.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors cursor-pointer",onClick:()=>c(we),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(bi,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-medium",children:we.email}),n.jsx("p",{className:"text-gray-400 text-sm",children:we.displayName||"No display name"})]})]}),n.jsxs("div",{className:`flex items-center gap-2 ${G(we.membershipStatus||"none")}`,children:[se(we.membershipStatus||"none"),n.jsx("span",{className:"text-sm capitalize",children:we.membershipStatus||"None"})]})]}),we.membershipTier&&n.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[n.jsx(It,{className:"w-4 h-4 text-yellow-400"}),n.jsx("span",{className:"text-gray-300 text-sm",children:we.membershipTier})]})]},we.id))})]}),o&&n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"bg-zinc-800 border border-cyan-500 rounded-lg p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"User Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"User Information"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-gray-300",children:[n.jsx("span",{className:"text-gray-400",children:"Email:"})," ",o.email]}),n.jsxs("p",{className:"text-gray-300",children:[n.jsx("span",{className:"text-gray-400",children:"Name:"})," ",o.displayName||"N/A"]}),n.jsxs("p",{className:"text-gray-300",children:[n.jsx("span",{className:"text-gray-400",children:"Status:"}),n.jsx("span",{className:`ml-2 ${G(o.membershipStatus||"none")}`,children:o.membershipStatus||"None"})]}),n.jsxs("p",{className:"text-gray-300",children:[n.jsx("span",{className:"text-gray-400",children:"Plan:"})," ",o.membershipTier||"None"]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Store Credit"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-gray-300",children:[n.jsx("span",{className:"text-gray-400",children:"Balance:"}),o.creditCurrency==="USD"?"$":"R",o.storeCredit||0]}),n.jsxs("p",{className:"text-gray-300",children:[n.jsx("span",{className:"text-gray-400",children:"Currency:"})," ",o.creditCurrency||"ZAR"]})]})]})]}),n.jsxs("div",{className:"flex gap-4 mt-6",children:[n.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),n.jsx("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Adjust Credit"})]})]})}),h&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[n.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Grant Trial Membership"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-300 mb-2",children:"Select Plan"}),n.jsxs("select",{value:b,onChange:we=>w(we.target.value),className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[n.jsx("option",{value:"",children:"Choose a plan..."}),K.map(we=>n.jsx("option",{value:we,children:we},we))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-300 mb-2",children:"Trial Duration (Days)"}),n.jsx("input",{type:"number",value:P,onChange:we=>C(parseInt(we.target.value)),min:"1",max:"365",className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-300 mb-2",children:"User Email"}),n.jsx("input",{type:"email",value:k,onChange:we=>E(we.target.value),className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",placeholder:"Enter user email"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:X,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),n.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),F&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[n.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Adjust Store Credit"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-300 mb-2",children:"Amount (use negative for deduction)"}),n.jsx("input",{type:"number",value:q,onChange:we=>Z(parseFloat(we.target.value)),step:"0.01",className:"w-full p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500"})]})}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:ue,className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Adjust Credit"}),n.jsx("button",{onClick:()=>U(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[n.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[n.jsx(It,{size:20,className:"text-purple-400"}),"Membership Tiers & Benefits"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Spoil Me Package"}),n.jsx("span",{className:"text-xs bg-pink-900/30 text-pink-400 border border-pink-500/30 px-2 py-1 rounded",children:"Popular"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Ultimate luxury experience with exclusive perks"}),n.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly:"}),n.jsx("span",{className:"text-white",children:"R19"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),n.jsx("span",{className:"text-white",children:"R25/month"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"5% OFF"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Weekly Giveaway:"}),n.jsx("span",{className:"text-white",children:"Win R500"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Spots:"}),n.jsx("span",{className:"text-green-400",children:"412/500 (88 left)"})]})]}),n.jsx("button",{onClick:()=>{w("Spoil Me"),g(!0)},className:"w-full py-2 bg-pink-600 hover:bg-pink-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Basic Package"}),n.jsx("span",{className:"text-xs bg-blue-900/30 text-blue-400 border border-blue-500/30 px-2 py-1 rounded",children:"Standard"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Essential benefits for regular shoppers"}),n.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly:"}),n.jsx("span",{className:"text-white",children:"R49"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),n.jsx("span",{className:"text-white",children:"R50/month"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"20% OFF"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),n.jsx("span",{className:"text-white",children:"R100"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Weekly Drop:"}),n.jsx("span",{className:"text-white",children:"2x Entries"})]})]}),n.jsx("button",{onClick:()=>{w("Basic"),g(!0)},className:"w-full py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Premium Package"}),n.jsx("span",{className:"text-xs bg-green-900/30 text-green-400 border border-green-500/30 px-2 py-1 rounded",children:"Popular"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Enhanced shopping experience"}),n.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly:"}),n.jsx("span",{className:"text-white",children:"R99"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),n.jsx("span",{className:"text-white",children:"R100/month"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"20% OFF"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Holiday Gifts:"}),n.jsx("span",{className:"text-white",children:"Free small gift"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),n.jsx("span",{className:"text-white",children:"R150"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),n.jsx("span",{className:"text-white",children:"Yes"})]})]}),n.jsx("button",{onClick:()=>{w("Premium"),g(!0)},className:"w-full py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:'Deluxe "Boss" Package'}),n.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-400 border border-yellow-500/30 px-2 py-1 rounded",children:"Elite"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"VIP treatment with maximum benefits"}),n.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly:"}),n.jsx("span",{className:"text-white",children:"R199"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),n.jsx("span",{className:"text-white",children:"R150/month"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"20% OFF"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),n.jsx("span",{className:"text-white",children:"R300"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),n.jsx("span",{className:"text-white",children:"Yes"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Vault Access:"}),n.jsx("span",{className:"text-white",children:"Limited"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Spots:"}),n.jsx("span",{className:"text-green-400",children:"498/750 (252 left)"})]})]}),n.jsx("button",{onClick:()=>{w("Deluxe Boss"),g(!0)},className:"w-full py-2 bg-yellow-600 hover:bg-yellow-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Insider Club"}),n.jsx("span",{className:"text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-2 py-1 rounded",children:"High Demand"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Early access to new products and promotions"}),n.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly:"}),n.jsx("span",{className:"text-white",children:"$5.00"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),n.jsx("span",{className:"text-white",children:"$5.00/month"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"5% OFF"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Weekly Giveaway:"}),n.jsx("span",{className:"text-white",children:"Win $50"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Spots:"}),n.jsx("span",{className:"text-green-400",children:"412/500 (88 left)"})]})]}),n.jsx("button",{onClick:()=>{w("Insider Club"),g(!0)},className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:"Gold Member"}),n.jsx("span",{className:"text-xs bg-orange-900/30 text-orange-400 border border-orange-500/30 px-2 py-1 rounded",children:"Critical"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Gold standard benefits and rewards"}),n.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly:"}),n.jsx("span",{className:"text-white",children:"$12.00"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),n.jsx("span",{className:"text-white",children:"$12.00/month"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"20% OFF"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),n.jsx("span",{className:"text-white",children:"$20"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),n.jsx("span",{className:"text-white",children:"Yes"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Spots:"}),n.jsx("span",{className:"text-green-400",children:"485/500 (15 left)"})]})]}),n.jsx("button",{onClick:()=>{w("Gold Member"),g(!0)},className:"w-full py-2 bg-orange-600 hover:bg-orange-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]}),n.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700 col-span-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-bold text-white text-sm",children:'Deluxe "Vault" Access'}),n.jsx("span",{className:"text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-2 py-1 rounded",children:"Ultimate"})]}),n.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Access to exclusive vault items with maximum benefits"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3",children:[n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly:"}),n.jsx("span",{className:"text-white",children:"$25.00"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Store Credit:"}),n.jsx("span",{className:"text-white",children:"$15.00/month"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Discount:"}),n.jsx("span",{className:"text-white",children:"20% OFF"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Birthday Voucher:"}),n.jsx("span",{className:"text-white",children:"$40"})]})]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"WhatsApp Priority:"}),n.jsx("span",{className:"text-white",children:"Yes"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Vault Access:"}),n.jsx("span",{className:"text-white",children:"24hrs Early"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Monthly Giveaways:"}),n.jsx("span",{className:"text-white",children:"Entry"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Weekly Winners:"}),n.jsx("span",{className:"text-white",children:"Eligible"})]})]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Loyalty Ladder:"}),n.jsx("span",{className:"text-white",children:"Month 1: 5 items"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400"}),n.jsx("span",{className:"text-white",children:"Month 2: 7 items"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400"}),n.jsx("span",{className:"text-white",children:"Month 3: 10 items"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400"}),n.jsx("span",{className:"text-white",children:"Month 4+: Unlimited"})]})]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Spots:"}),n.jsx("span",{className:"text-green-400",children:"498/750 (252 left)"})]}),n.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Shop clearance, samples, and slight imperfections starting at R10. Sold as-is."})]})]}),n.jsx("button",{onClick:()=>{w("Deluxe Vault"),g(!0)},className:"w-full py-2 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors",children:"Grant Trial"})]})]})]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:["All Members (",W.length,")"]}),n.jsx("div",{className:"space-y-3",children:W.map(we=>n.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors cursor-pointer",onClick:()=>c(we),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(bi,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-medium",children:we.email}),n.jsx("p",{className:"text-gray-400 text-sm",children:we.displayName||we.name||"No display name"})]})]}),n.jsxs("div",{className:`flex items-center gap-2 ${G(we.membershipStatus||"none")}`,children:[se(we.membershipStatus||"none"),n.jsx("span",{className:"text-sm capitalize",children:we.membershipStatus||"None"})]})]}),we.membershipTier&&n.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[n.jsx(It,{className:"w-4 h-4 text-yellow-400"}),n.jsx("span",{className:"text-gray-300 text-sm",children:we.membershipTier})]})]},we.id))}),n.jsx("div",{className:"mt-6 flex justify-center",children:I?n.jsx("div",{className:"text-gold animate-pulse",children:"Loading members..."}):A&&!e&&n.jsx("button",{onClick:Ae,className:"px-6 py-2 bg-zinc-800 border border-zinc-700 hover:border-gold text-white rounded-full text-sm transition-all",children:"Load More Members"})})]})]})},ja=Sr?g0(Sr):null,ar=({checked:s,onChange:e,className:t,children:r})=>n.jsx("button",{type:"button",onClick:e,className:`${t} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:r}),E9=()=>{const{user:s}=Ct(),[e,t]=S.useState([]),[r,i]=S.useState([]),[o,c]=S.useState(!0),[d,m]=S.useState(""),[h,g]=S.useState([]),b=S.useRef(null),[w,P]=S.useState(null),[C,k]=S.useState(!1),[E,F]=S.useState(null),[U,q]=S.useState({dashboard:!0,products:!1,orders:!1,categories:!1,members:!1,users:!1,giftCards:!1,social:!1,affiliates:!1,winners:!1,expenses:!1,vault:!1,artists:!1}),[Z,W]=S.useState("all"),[$,R]=S.useState("all"),[_,I]=S.useState(""),[V,A]=S.useState(!1),[B,L]=S.useState(null),[ne,pe]=S.useState("basic"),[Ne,Te]=S.useState(7),[le,fe]=S.useState(1),[ve,J]=S.useState(1),K=10,[X,ue]=S.useState(!1),[G,se]=S.useState(null),[Ie,Ae]=S.useState("none"),[He,Be]=S.useState(!1),[xt,we]=S.useState(null),[We,at]=S.useState("basic");S.useEffect(()=>{(async()=>{c(!0);try{const mt=qn.currentUser;if(!mt){console.error("No authenticated user"),c(!1);return}const kt=await mt.getIdToken(),Dt=await fetch("https://us-central1-spoilme-edee0.cloudfunctions.net/api/users",{headers:{Authorization:`Bearer ${kt}`,"Content-Type":"application/json"}});if(!Dt.ok)throw new Error(`HTTP error! status: ${Dt.status}`);const $t=(await Dt.json()).users,Qt=[];for(const vt of $t)try{const tn=await Pd(dt(ye,"users",vt.uid));tn.exists()?Qt.push({id:vt.uid,...vt,...tn.data(),email:vt.email,displayName:vt.displayName,emailVerified:vt.emailVerified,createdAt:vt.metadata.creationTime?new Date(vt.metadata.creationTime):null,lastSignInAt:vt.metadata.lastSignInTime?new Date(vt.metadata.lastSignInTime):null}):Qt.push({id:vt.uid,...vt,createdAt:vt.metadata.creationTime?new Date(vt.metadata.creationTime):null,lastSignInAt:vt.metadata.lastSignInTime?new Date(vt.metadata.lastSignInTime):null})}catch(tn){console.error(`Error fetching Firestore data for user ${vt.uid}:`,tn),Qt.push({id:vt.uid,...vt,createdAt:vt.metadata.creationTime?new Date(vt.metadata.creationTime):null,lastSignInAt:vt.metadata.lastSignInTime?new Date(vt.metadata.lastSignInTime):null})}t(Qt),i(Qt)}catch(mt){console.error("Error loading users:",mt)}finally{c(!1)}})()},[]),S.useEffect(()=>{let xe=e;d.trim()&&(xe=xe.filter(pt=>{var $t,Qt,vt,tn;return(($t=pt.email)==null?void 0:$t.toLowerCase().includes(d.toLowerCase()))||((Qt=pt.displayName)==null?void 0:Qt.toLowerCase().includes(d.toLowerCase()))||((vt=pt.firstName)==null?void 0:vt.toLowerCase().includes(d.toLowerCase()))||((tn=pt.lastName)==null?void 0:tn.toLowerCase().includes(d.toLowerCase()))})),Z==="ZA"?xe=xe.filter(pt=>pt.country==="South Africa"):Z==="other"&&(xe=xe.filter(pt=>pt.country!=="South Africa")),$==="buyers"&&(xe=xe.filter(pt=>(pt.totalOrders||0)>0)),_&&(xe=xe.filter(pt=>pt.membershipStatus===_)),xe.sort((pt,$t)=>{var tn,Re;if(pt.isActive===!1&&$t.isActive!==!1)return-1;if($t.isActive===!1&&pt.isActive!==!1)return 1;const Qt=((tn=pt.createdAt)==null?void 0:tn.seconds)||0;return(((Re=$t.createdAt)==null?void 0:Re.seconds)||0)-Qt});const mt=(le-1)*K,kt=mt+K,Dt=xe.slice(mt,kt);i(Dt),J(Math.ceil(xe.length/K))},[d,Z,$,_,e,le]);const bt=async xe=>{try{if(!ja){alert("Firebase functions not available");return}await Io(ja,"deleteUser")({userId:xe});const kt=e.filter(Dt=>Dt.id!==xe);t(kt),i(kt.filter(Dt=>{var pt,$t,Qt,vt;return!d.trim()||((pt=Dt.email)==null?void 0:pt.toLowerCase().includes(d.toLowerCase()))||(($t=Dt.displayName)==null?void 0:$t.toLowerCase().includes(d.toLowerCase()))||((Qt=Dt.firstName)==null?void 0:Qt.toLowerCase().includes(d.toLowerCase()))||((vt=Dt.lastName)==null?void 0:vt.toLowerCase().includes(d.toLowerCase()))})),alert("User permanently deleted successfully!"),P(null)}catch(mt){console.error("Error deleting user:",mt),alert("Failed to delete user. Please try again.")}},z=xe=>{switch(xe){case"active":return"text-green-400";case"trial":return"text-blue-400";case"expired":return"text-red-400";case"cancelled":return"text-gray-400";default:return"text-gray-400"}},re=xe=>{switch(xe){case"active":return"";case"trial":return"";case"expired":return"";case"cancelled":return"";default:return""}},$e=xe=>{q(mt=>({...mt,[xe]:!mt[xe]}))},_e=xe=>{F(xe);const mt=xe.adminPermissions||{dashboard:!0,products:!1,orders:!1,categories:!1,members:!1,users:!1,giftCards:!1,social:!1,affiliates:!1,winners:!1,expenses:!1,vault:!1,artists:!1};q(mt),k(!0)},qe=async()=>{if(E)try{const xe=dt(ye,"users",E.id);await Ft(xe,{adminPermissions:U}),alert("Admin permissions updated successfully!"),k(!1),F(null)}catch(xe){console.error("Error updating admin permissions:",xe),alert("Failed to update permissions. Please try again.")}},Vt=xe=>{m(xe),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{fe(1)},300)};return n.jsxs("div",{className:"p-8 space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Users Management"}),n.jsx("p",{className:"text-gray-400",children:"Manage all registered users and their accounts"}),(s==null?void 0:s.email)==="spoilmevintagediy@gmail.com"&&n.jsxs("button",{onClick:()=>window.location.href="/#/artist-partnership",className:"mt-4 px-6 py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[n.jsx(Da,{size:16}),"Apply as Artist (Test Flow)"]})]}),n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"md:col-span-2 relative",children:[n.jsx(no,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"Search by name or email...",value:d,onChange:xe=>Vt(xe.target.value),className:"w-full pl-10 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(l2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsxs("select",{value:Z,onChange:xe=>W(xe.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[n.jsx("option",{value:"all",children:"All Regions"}),n.jsx("option",{value:"ZA",children:"South Africa"}),n.jsx("option",{value:"other",children:"Other Regions"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Vl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsxs("select",{value:$,onChange:xe=>R(xe.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[n.jsx("option",{value:"all",children:"All Users"}),n.jsx("option",{value:"buyers",children:"Buyers"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(To,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsxs("select",{value:_,onChange:xe=>I(xe.target.value),className:"w-full pl-8 pr-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[n.jsx("option",{value:"",children:"All Statuses"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"trial",children:"Trial"}),n.jsx("option",{value:"expired",children:"Expired"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(d||Z!=="all"||$!=="all"||_)&&n.jsx("div",{className:"mt-2 text-center",children:n.jsx("button",{onClick:()=>{m(""),W("all"),R("all"),I("")},className:"text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Clear all filters"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[n.jsx("div",{className:"flex justify-between items-start mb-4",children:n.jsx("div",{className:"p-3 rounded-lg border bg-blue-900/30 text-blue-400 border-blue-500/20",children:n.jsx(ks,{size:20})})}),n.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Users"}),n.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.length})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[n.jsx("div",{className:"flex justify-between items-start mb-4",children:n.jsx("div",{className:"p-3 rounded-lg border bg-green-900/30 text-green-400 border-green-500/20",children:n.jsx(It,{size:20})})}),n.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Active Members"}),n.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.filter(xe=>xe.membershipStatus==="active").length})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[n.jsx("div",{className:"flex justify-between items-start mb-4",children:n.jsx("div",{className:"p-3 rounded-lg border bg-blue-900/30 text-blue-400 border-blue-500/20",children:n.jsx(To,{size:20})})}),n.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Trial Users"}),n.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.filter(xe=>xe.membershipStatus==="trial").length})]}),n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[n.jsx("div",{className:"flex justify-between items-start mb-4",children:n.jsx("div",{className:"p-3 rounded-lg border bg-gray-900/30 text-gray-400 border-gray-500/20",children:n.jsx(bi,{size:20})})}),n.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Free Users"}),n.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:e.filter(xe=>!xe.membershipTier).length})]})]}),n.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[n.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[n.jsx(ks,{size:20,className:"text-blue-400"}),"All Users (",r.length,")"]}),o?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Loading users..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.map(xe=>n.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-4 hover:border-cyan-500 transition-colors",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:xe.firstName&&xe.lastName?`${xe.firstName.charAt(0)}${xe.lastName.charAt(0)}`.toUpperCase():xe.displayName?xe.displayName.charAt(0).toUpperCase():xe.email.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-white flex items-center gap-2",children:[xe.firstName&&xe.lastName?`${xe.firstName} ${xe.lastName}`:xe.displayName||"No Name",xe.isActive===!1&&n.jsx(Cr,{size:16,className:"text-red-500",title:"Account pending deletion"}),xe.membershipTier&&n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-yellow-900/30 text-yellow-400",children:xe.membershipTier}),xe.email==="spoilmevintagediy@gmail.com"&&n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-red-900/30 text-red-400 font-bold",children:"OWNER"})]}),n.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-1",children:[n.jsx(Ld,{size:12}),xe.email]}),n.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[xe.country&&n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[n.jsx(zd,{size:10}),xe.country]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx("span",{children:re(xe.membershipStatus||"none")}),n.jsx("span",{className:z(xe.membershipStatus||"none"),children:xe.membershipStatus||"Free User"})]}),xe.createdAt&&n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[n.jsx(To,{size:10}),new Date(xe.createdAt.seconds*1e3).toLocaleDateString()]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[xe.email==="spoilmevintagediy@gmail.com"&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{se(xe),Ae(xe.artistStatus||"none"),ue(!0)},className:"px-3 py-1 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[n.jsx(Da,{size:12}),"Artist"]}),n.jsxs("button",{onClick:()=>{we(xe),at(xe.membershipTier||"basic"),Be(!0)},className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[n.jsx(It,{size:12}),"Membership"]})]}),n.jsxs("button",{onClick:()=>{L(xe),pe("basic"),Te(7),A(!0)},className:"px-3 py-1 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[n.jsx(To,{size:12}),"Grant Trial"]}),n.jsxs("button",{onClick:()=>_e(xe),className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[n.jsx(It,{size:12}),"Admin"]}),n.jsxs("button",{onClick:()=>P(xe.id),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1",children:[n.jsx(ui,{size:12}),"Delete"]})]})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[n.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[n.jsx("div",{className:"text-gray-400",children:"Store Credit"}),n.jsxs("div",{className:"text-white font-bold",children:[xe.creditCurrency==="USD"?"$":"R",xe.storeCredit||0]})]}),n.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[n.jsx("div",{className:"text-gray-400",children:"Loyalty Points"}),n.jsx("div",{className:"text-white font-bold",children:xe.loyaltyPoints||0})]}),n.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[n.jsx("div",{className:"text-gray-400",children:"Orders"}),n.jsx("div",{className:"text-white font-bold",children:xe.totalOrders||0})]}),n.jsxs("div",{className:"bg-black/40 p-2 rounded",children:[n.jsx("div",{className:"text-gray-400",children:"Gender"}),n.jsx("div",{className:"text-white font-bold",children:xe.gender||"Not set"})]})]})]},xe.id))}),r.length===0&&!o&&n.jsx("div",{className:"text-center py-8 text-gray-400",children:d?"No users found matching your search.":"No users found in the system."})]})]}),n.jsxs("div",{className:"flex justify-center mt-4",children:[n.jsx("button",{onClick:()=>fe(xe=>Math.max(xe-1,1)),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-l-lg",disabled:le===1,children:"Previous"}),n.jsxs("span",{className:"px-4 py-2 bg-gray-800 text-white",children:["Page ",le," of ",ve]}),n.jsx("button",{onClick:()=>fe(xe=>Math.min(xe+1,ve)),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-r-lg",disabled:le===ve,children:"Next"})]}),w&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-red-900/50 text-red-500 rounded-lg",children:n.jsx(Cr,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-white",children:"Delete User"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"This action cannot be undone."})]})]}),n.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to delete this user? This will permanently remove their account and all associated data."}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>bt(w),className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white font-medium rounded-lg transition-colors",children:"Delete User"}),n.jsx("button",{onClick:()=>P(null),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),C&&E&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-blue-900/50 text-blue-500 rounded-lg",children:n.jsx(It,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-white",children:"Admin Permissions"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Manage user permissions"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Dashboard Access"}),n.jsxs(ar,{checked:U.dashboard,onChange:()=>$e("dashboard"),className:`${U.dashboard?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable dashboard access"}),n.jsx("span",{className:`${U.dashboard?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Products Management"}),n.jsxs(ar,{checked:U.products,onChange:()=>$e("products"),className:`${U.products?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable products management"}),n.jsx("span",{className:`${U.products?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Orders Management"}),n.jsxs(ar,{checked:U.orders,onChange:()=>$e("orders"),className:`${U.orders?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable orders management"}),n.jsx("span",{className:`${U.orders?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Categories Management"}),n.jsxs(ar,{checked:U.categories,onChange:()=>$e("categories"),className:`${U.categories?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable categories management"}),n.jsx("span",{className:`${U.categories?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Members Management"}),n.jsxs(ar,{checked:U.members,onChange:()=>$e("members"),className:`${U.members?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable members management"}),n.jsx("span",{className:`${U.members?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Users Management"}),n.jsxs(ar,{checked:U.users,onChange:()=>$e("users"),className:`${U.users?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable users management"}),n.jsx("span",{className:`${U.users?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Gift Cards Management"}),n.jsxs(ar,{checked:U.giftCards,onChange:()=>$e("giftCards"),className:`${U.giftCards?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable gift cards management"}),n.jsx("span",{className:`${U.giftCards?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Social Media Management"}),n.jsxs(ar,{checked:U.social,onChange:()=>$e("social"),className:`${U.social?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable social media management"}),n.jsx("span",{className:`${U.social?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Affiliates Management"}),n.jsxs(ar,{checked:U.affiliates,onChange:()=>$e("affiliates"),className:`${U.affiliates?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable affiliates management"}),n.jsx("span",{className:`${U.affiliates?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Winners Management"}),n.jsxs(ar,{checked:U.winners,onChange:()=>$e("winners"),className:`${U.winners?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable winners management"}),n.jsx("span",{className:`${U.winners?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Expenses Management"}),n.jsxs(ar,{checked:U.expenses,onChange:()=>$e("expenses"),className:`${U.expenses?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable expenses management"}),n.jsx("span",{className:`${U.expenses?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Vault Access"}),n.jsxs(ar,{checked:U.vault,onChange:()=>$e("vault"),className:`${U.vault?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable vault access"}),n.jsx("span",{className:`${U.vault?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Artists Management"}),n.jsxs(ar,{checked:U.artists,onChange:()=>$e("artists"),className:`${U.artists?"bg-green-600":"bg-gray-400"} relative inline-flex items-center h-6 rounded-full w-11`,children:[n.jsx("span",{className:"sr-only",children:"Enable artists management"}),n.jsx("span",{className:`${U.artists?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})]})]})]}),n.jsxs("div",{className:"mt-6 flex gap-3",children:[n.jsx("button",{onClick:qe,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Permissions"}),n.jsx("button",{onClick:()=>k(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),V&&B&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-green-900/50 text-green-500 rounded-lg",children:n.jsx(To,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-white",children:"Trial User Settings"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Manage trial user details"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Trial Plan"}),n.jsxs("select",{value:ne,onChange:xe=>pe(xe.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500",children:[n.jsx("option",{value:"basic",children:"Basic Plan"}),n.jsx("option",{value:"premium",children:"Premium Plan"}),n.jsx("option",{value:"deluxe",children:"Deluxe Plan"}),n.jsx("option",{value:"insider",children:"Insider Club"}),n.jsx("option",{value:"gold",children:"Gold Member"}),n.jsx("option",{value:"spoilme",children:"Spoil Me"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Trial Duration (days)"}),n.jsx("input",{type:"number",min:"1",value:Ne,onChange:xe=>Te(Number(xe.target.value)),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500"})]})]}),n.jsxs("div",{className:"mt-6 flex gap-3",children:[n.jsx("button",{onClick:async()=>{if(!ja){alert("Firebase functions not available");return}try{const mt=await Io(ja,"grantTrial")({userId:B.id,plan:ne,days:Ne});alert("Trial granted successfully!"),A(!1),L(null),window.location.reload()}catch(xe){console.error("Error granting trial:",xe),alert("Failed to grant trial. Please try again.")}},className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors",children:"Grant Trial"}),n.jsx("button",{onClick:()=>A(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),X&&G&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-purple-900/50 text-purple-500 rounded-lg",children:n.jsx(Da,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-white",children:"Artist Status"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Manage artist approval status"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Current Status"}),n.jsx("span",{className:`text-sm font-medium ${Ie==="approved"?"text-green-400":Ie==="rejected"?"text-red-400":"text-yellow-400"}`,children:Ie.charAt(0).toUpperCase()+Ie.slice(1)})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>Ae("approved"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${Ie==="approved"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[n.jsx(Da,{size:16}),"Approve Artist"]}),n.jsxs("button",{onClick:()=>Ae("rejected"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${Ie==="rejected"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[n.jsx(ui,{size:16}),"Reject Artist"]})]})]}),n.jsxs("div",{className:"mt-6 flex gap-3",children:[n.jsx("button",{onClick:async()=>{if(!ja){alert("Firebase functions not available");return}try{await Io(ja,"updateArtistStatus")({userId:G.id,status:Ie}),alert("Artist status updated successfully!"),ue(!1),se(null),window.location.reload()}catch(xe){console.error("Error updating artist status:",xe),alert("Failed to update artist status. Please try again.")}},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Changes"}),n.jsx("button",{onClick:()=>ue(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})}),He&&xt&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-yellow-900/50 text-yellow-500 rounded-lg",children:n.jsx(It,{size:24})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-white",children:"Membership Tier"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Manage user membership tier"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Current Tier"}),n.jsx("span",{className:"text-sm font-medium text-yellow-400",children:We.charAt(0).toUpperCase()+We.slice(1)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Change to"}),n.jsxs("select",{value:We,onChange:xe=>at(xe.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg text-white py-2 px-3 focus:outline-none focus:border-cyan-500",children:[n.jsx("option",{value:"basic",children:"Basic"}),n.jsx("option",{value:"premium",children:"Premium"}),n.jsx("option",{value:"deluxe",children:"Deluxe"})]})]})]}),n.jsxs("div",{className:"mt-6 flex gap-3",children:[n.jsx("button",{onClick:async()=>{if(!ja){alert("Firebase functions not available");return}try{await Io(ja,"updateMembershipTier")({userId:xt.id,tier:We}),alert("Membership tier updated successfully!"),Be(!1),we(null),window.location.reload()}catch(xe){console.error("Error updating membership tier:",xe),alert("Failed to update membership tier. Please try again.")}},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Save Changes"}),n.jsx("button",{onClick:()=>Be(!1),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors",children:"Cancel"})]})]})})]})},T9=()=>{const{affiliateCode:s}=Gd(),{products:e,currency:t,addToCart:r,toggleWishlist:i}=Ct(),[o,c]=S.useState(null),[d,m]=S.useState([]),[h,g]=S.useState(!0);S.useEffect(()=>{s&&(async()=>{try{const k={code:s,name:"Sarah Johnson",currency:"ZAR",storeConfig:{products:["product1","product2","product3","product4","product5"],strategy:{discount:10,commission:15},currency:"ZAR"}};c(k);const E=e.filter(U=>k.storeConfig.products.includes(U.id));m(E);const F={code:k.code,discountPercent:k.storeConfig.strategy.discount,commissionPercent:k.storeConfig.strategy.commission,currency:k.currency,expires:Date.now()+720*60*60*1e3};localStorage.setItem("spoilme_referral",JSON.stringify(F))}catch(k){console.error("Error loading affiliate store:",k)}finally{g(!1)}})()},[s,e]);const b=C=>{var E;if(!((E=o==null?void 0:o.storeConfig)!=null&&E.strategy))return C.price;const k=C.price*(o.storeConfig.strategy.discount/100);return C.price-k},w=C=>{var E;if(!((E=o==null?void 0:o.storeConfig)!=null&&E.strategy))return C.priceUSD;const k=C.priceUSD*(o.storeConfig.strategy.discount/100);return C.priceUSD-k},P=C=>{r(C,{quantity:1,price:b(C),priceUSD:w(C)})};return h?n.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-pink-500 border-t-transparent rounded-full mx-auto mb-4"}),n.jsx("p",{className:"text-gray-400",children:"Loading VIP store..."})]})}):!o||d.length===0?n.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"VIP Store Not Found"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"This affiliate store is not available or has been deactivated."}),n.jsx(Le,{to:"/",className:"px-6 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg",children:"Shop Regular Store"})]})}):n.jsxs("div",{className:"min-h-screen bg-zinc-950",children:[n.jsx("div",{className:"bg-gradient-to-r from-pink-900/20 to-purple-900/20 border-b border-gray-800",children:n.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-2 rounded-full text-sm font-bold mb-4",children:[n.jsx(Od,{size:16})," VIP ACCESS"]}),n.jsxs("h1",{className:"text-4xl md:text-6xl font-cherry text-white mb-4",children:["Welcome to ",o.name,"'s VIP Collection"]}),n.jsxs("p",{className:"text-xl text-gray-300 mb-6",children:["Exclusive ",o.storeConfig.strategy.discount,"% OFF everything in this curated collection"]}),n.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-xl p-4 inline-block",children:n.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[n.jsx(p2,{size:20}),n.jsxs("span",{className:"font-bold",children:[o.storeConfig.strategy.discount,"% Discount Applied Automatically"]})]})})]})})}),n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map(C=>n.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl overflow-hidden hover:border-pink-500/50 transition-all group",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Le,{to:`/product/${C.slug}`,children:n.jsx("img",{src:C.images[0],alt:C.name,className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300"})}),n.jsx("div",{className:"absolute top-4 left-4",children:n.jsxs("div",{className:"bg-pink-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:[o.storeConfig.strategy.discount,"% OFF"]})}),n.jsx("button",{onClick:()=>i(C.id),className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(x0,{size:20})})]}),n.jsxs("div",{className:"p-6",children:[n.jsx(Le,{to:`/product/${C.slug}`,children:n.jsx("h3",{className:"text-lg font-bold text-white mb-2 hover:text-pink-400 transition-colors",children:C.name})}),n.jsx("p",{className:"text-sm text-gray-400 mb-4",children:C.category}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((k,E)=>n.jsx(dr,{size:14,fill:"currentColor"},E))}),n.jsx("span",{className:"text-sm text-gray-400",children:"(4.8)"})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("span",{className:"text-lg font-bold text-green-400",children:t==="ZAR"?`R${b(C)}`:`$${w(C)}`}),n.jsx("span",{className:"text-sm text-gray-500 line-through",children:t==="ZAR"?`R${C.price}`:`$${C.priceUSD}`})]}),n.jsxs("button",{onClick:()=>P(C),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2",children:[n.jsx(fc,{size:18}),"Add to Cart"]})]})]},C.id))}),n.jsx("div",{className:"mt-16 text-center",children:n.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-2xl p-8 max-w-2xl mx-auto",children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Didn't find what you love?"}),n.jsxs("p",{className:"text-gray-400 mb-6",children:["Browse our full collection and enjoy ",o.storeConfig.strategy.discount,"% OFF on everything!"]}),n.jsxs(Le,{to:"/",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl transition-all shadow-lg",children:["Browse Full Catalog ",n.jsx(Yt,{size:20})]})]})})]})]})},P9={bronze:{max:15,options:[{d:5,c:10},{d:10,c:5}]},silver:{max:20,options:[{d:10,c:10},{d:15,c:5}]},gold:{max:25,options:[{d:10,c:15},{d:15,c:10},{d:20,c:5}]},platinum:{max:30,options:[{d:10,c:20},{d:15,c:15},{d:20,c:10},{d:25,c:5}]}},A9=s=>s>=10001?"platinum":s>=5001?"gold":s>=2001?"silver":"bronze",I9=()=>{var Z,W;const{user:s,products:e,currency:t,updateUser:r}=Ct(),[i,o]=S.useState([]),[c,d]=S.useState(""),[m,h]=S.useState(null),[g,b]=S.useState(!1),w=A9(((Z=s.affiliateStats)==null?void 0:Z.totalSalesValue)||0),P=P9[w],C=e.filter($=>$.name.toLowerCase().includes(c.toLowerCase())||$.category.toLowerCase().includes(c.toLowerCase())),k=$=>{i.length<5&&!i.find(R=>R.id===$.id)&&o([...i,$])},E=$=>{o(i.filter(R=>R.id!==$))},F=async()=>{if(!(i.length!==5||!m)){b(!0);try{const $={products:i.map(R=>R.id),strategy:m,currency:s.affiliateCurrency,lastUpdated:new Date().toISOString()};await r({affiliateStoreConfig:$}),alert("Store configuration saved successfully!")}catch($){console.error("Error saving store config:",$),alert("Failed to save store configuration.")}finally{b(!1)}}},U=$=>{if(!m)return $.price;const R=$.price*(m.discount/100);return $.price-R},q=$=>{if(!m)return $.priceUSD;const R=$.priceUSD*(m.discount/100);return $.priceUSD-R};return!((W=s.affiliateStats)!=null&&W.status)==="approved"?n.jsxs("div",{className:"max-w-4xl mx-auto py-8 text-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Access Denied"}),n.jsx("p",{className:"text-gray-400",children:"You need to be an approved affiliate to access this page."}),n.jsx(Le,{to:"/affiliate",className:"inline-block mt-4 px-6 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg",children:"Go to Affiliate Program"})]}):n.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-8",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Le,{to:"/affiliate",className:"p-2 bg-zinc-800 hover:bg-zinc-700 rounded-lg",children:n.jsx(Ha,{size:20,className:"text-gray-400"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"VIP Store Builder"}),n.jsx("p",{className:"text-gray-400",children:"Create your personalized affiliate storefront with 5 curated products."})]})]}),n.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-3 bg-yellow-900/20 rounded-lg text-yellow-400",children:n.jsx(Od,{size:24})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-bold text-white",children:["Your Current Tier: ",w.toUpperCase()]}),n.jsxs("p",{className:"text-sm text-gray-400",children:["Max Commission: ",P.max,"% | Available Strategies: ",P.options.length]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:P.options.map(($,R)=>n.jsx("button",{onClick:()=>h($),className:`p-4 rounded-lg border transition-all ${(m==null?void 0:m.discount)===$.discount&&(m==null?void 0:m.commission)===$.commission?"bg-pink-900/20 border-pink-500 text-pink-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold mb-1",children:[$.discount,"% OFF / ",$.commission,"% Commission"]}),n.jsxs("div",{className:"text-xs text-gray-500",children:["Give customers ",$.discount,"% discount, earn ",$.commission,"% commission"]})]})},R))})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["Select 5 Products (",i.length,"/5)"]}),n.jsxs("div",{className:"relative",children:[n.jsx(no,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products...",value:c,onChange:$=>d($.target.value),className:"w-full bg-zinc-900 border border-gray-700 rounded-lg pl-10 pr-4 py-3 text-white focus:border-pink-500 outline-none"})]})]}),n.jsx("div",{className:"max-h-[600px] overflow-y-auto space-y-3 custom-scrollbar",children:C.slice(0,20).map($=>{const R=i.find(_=>_.id===$.id);return n.jsx("div",{className:`p-4 rounded-lg border transition-all ${R?"bg-pink-900/10 border-pink-500":"bg-zinc-900 border-gray-800"}`,children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("img",{src:$.images[0],alt:$.name,className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-white text-sm",children:$.name}),n.jsx("p",{className:"text-xs text-gray-400",children:$.category}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:"text-sm font-bold text-green-400",children:t==="ZAR"?`R${$.price}`:`$${$.priceUSD}`}),m&&n.jsxs("span",{className:"text-xs text-pink-400",children:[" ",t==="ZAR"?`R${U($)}`:`$${q($)}`]})]})]}),n.jsx("button",{onClick:()=>R?E($.id):k($),className:`p-2 rounded-lg transition-all ${R?"bg-red-600 hover:bg-red-500 text-white":i.length>=5?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-pink-600 hover:bg-pink-500 text-white"}`,disabled:!R&&i.length>=5,children:R?n.jsx(h2,{size:16}):n.jsx($s,{size:16})})]})},$.id)})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Your VIP Store Preview"}),n.jsx("p",{className:"text-sm text-gray-400",children:"This is how your storefront will appear to customers visiting your affiliate link."})]}),i.length===0?n.jsxs("div",{className:"bg-zinc-900/50 border border-dashed border-gray-700 rounded-xl p-8 text-center",children:[n.jsx(Od,{size:48,className:"text-gray-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:"No Products Selected"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Choose 5 products from the left to build your VIP store."})]}):n.jsxs("div",{className:"space-y-4",children:[i.map($=>n.jsx("div",{className:"bg-zinc-900 border border-gray-800 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("img",{src:$.images[0],alt:$.name,className:"w-20 h-20 rounded-lg object-cover border border-gray-700"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-white",children:$.name}),n.jsx("p",{className:"text-sm text-gray-400 mb-2",children:$.category}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"text-gray-500 line-through",children:t==="ZAR"?`R${$.price}`:`$${$.priceUSD}`}),n.jsx("span",{className:"text-green-400 font-bold ml-2",children:t==="ZAR"?`R${U($)}`:`$${q($)}`})]}),m&&n.jsxs("div",{className:"text-xs bg-pink-900/20 text-pink-400 px-2 py-1 rounded",children:[m.discount,"% OFF"]})]})]})]})},$.id)),i.length===5&&m&&n.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-green-500/20 rounded-full",children:n.jsx(nc,{size:20,className:"text-green-400"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-green-400",children:"Store Ready!"}),n.jsxs("p",{className:"text-sm text-green-300",children:["Your VIP store is configured. Customers will see ",m.discount,"% off these products and you'll earn ",m.commission,"% commission."]})]})]}),n.jsx("button",{onClick:F,disabled:g,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:opacity-50 text-white font-bold rounded-lg transition-all",children:g?"Saving...":"Save Store Configuration"})]})]})]})]})]})},R9=()=>{const{user:s,products:e,logout:t,submitReview:r,currency:i}=Ct(),o=As(),[c,d]=S.useState(null),[m,h]=S.useState(5),[g,b]=S.useState(""),w=(s.notifications||[]).filter(_=>_.type==="review_request"&&!_.isRead),P=(s.notifications||[]).filter(_=>_.type==="gift_ready"),C=(s.notifications||[]).filter(_=>_.type==="gift_received"),k=(s.notifications||[]).filter(_=>(_.type==="system"||_.type==="affiliate_msg")&&!_.isRead),E=(s.notifications||[]).filter(_=>_.type==="credit_received"||_.type==="credit_adjusted"),F=(s.notifications||[]).filter(_=>_.type==="trial_ended"),U=[...w,...P,...C,...k,...E,...F].sort((_,I)=>new Date(I.date).getTime()-new Date(_.date).getTime()),q=async()=>{!c||!c.productId||(await r(c.productId,m,g,c.id),b(""),h(5),d(null),alert("Review submitted! You earned 100 Loyalty Points."))},Z=_=>{if(!_.voucherData)return;const{code:I,amount:V,meta:A}=_.voucherData,B=`${window.location.origin}/#/?voucher=${I}`,L=`Hey ${A.recipientName}! 

${A.senderName} sent you a Spoil Me Vintage Gift Voucher worth R${V}!

"${A.message}"

Redeem it here:
${B}`,ne=A.whatsappNumber?A.whatsappNumber.replace(/[^0-9]/g,""):"",pe=ne?`https://wa.me/${ne}?text=${encodeURIComponent(L)}`:`https://wa.me/?text=${encodeURIComponent(L)}`;window.open(pe,"_blank")},W=_=>{window.location.href=`/#/?voucher=${_}`};if(!s.email)return o("/login"),null;const $=_=>{switch(_){case"review_request":return n.jsx(dr,{className:"text-yellow-500",size:20});case"gift_ready":return n.jsx(bn,{className:"text-pink-500",size:20});case"gift_received":return n.jsx(bn,{className:"text-green-500",size:20});case"system":return n.jsx(Pa,{className:"text-blue-500",size:20});case"affiliate_msg":return n.jsx(sc,{className:"text-purple-500",size:20});case"credit_received":return n.jsx(mn,{className:"text-green-500",size:20});case"credit_adjusted":return n.jsx(mn,{className:"text-cyan-500",size:20});case"trial_ended":return n.jsx(Qm,{className:"text-red-500",size:20});default:return n.jsx(Pa,{className:"text-gray-500",size:20})}},R=_=>{switch(_){case"review_request":return"border-yellow-500/30 bg-yellow-900/20";case"gift_ready":return"border-pink-500/30 bg-pink-900/20";case"gift_received":return"border-green-500/30 bg-green-900/20";case"system":return"border-blue-500/30 bg-blue-900/20";case"affiliate_msg":return"border-purple-500/30 bg-purple-900/20";case"credit_received":return"border-green-500/30 bg-green-900/20";case"credit_adjusted":return"border-cyan-500/30 bg-cyan-900/20";case"trial_ended":return"border-red-500/30 bg-red-900/20";default:return"border-gray-500/30 bg-gray-900/20"}};return n.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsxs("h1",{className:"text-[28px] font-cherry text-white",children:["Welcome, ",s.name||s.firstName||"Valued Customer"]}),n.jsx("p",{className:"text-[14px] font-architects text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-yellow-400 italic mb-8",children:"This is where we communicate with you, deliver your gift vouchers, and share all important notifications and updates."})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[n.jsx(Pa,{size:32,className:"text-blue-500"}),"Your Notifications Center"]}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Stay updated with your account activity, rewards, and exclusive offers"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-2xl font-bold text-white",children:U.length}),n.jsx("div",{className:"text-sm text-gray-400",children:"Total Notifications"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(dr,{className:"text-yellow-500",size:16}),n.jsx("span",{className:"text-sm text-gray-400",children:"Pending Reviews"})]}),n.jsx("div",{className:"text-xl font-bold text-white",children:w.length})]}),n.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(bn,{className:"text-pink-500",size:16}),n.jsx("span",{className:"text-sm text-gray-400",children:"Gifts"})]}),n.jsx("div",{className:"text-xl font-bold text-white",children:P.length+C.length})]}),n.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(mn,{className:"text-green-500",size:16}),n.jsx("span",{className:"text-sm text-gray-400",children:"Credits"})]}),n.jsx("div",{className:"text-xl font-bold text-white",children:E.length})]}),n.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Pa,{className:"text-blue-500",size:16}),n.jsx("span",{className:"text-sm text-gray-400",children:"System"})]}),n.jsx("div",{className:"text-xl font-bold text-white",children:k.length})]})]}),n.jsx("div",{className:"space-y-4",children:U.length===0?n.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-xl p-8 text-center",children:[n.jsx(Pa,{size:48,className:"text-gray-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No notifications yet"}),n.jsx("p",{className:"text-gray-400",children:"When you have activity on your account, you'll see it here."})]}):U.map((_,I)=>n.jsx("div",{className:`p-6 rounded-xl border ${R(_.type)}`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"shrink-0 mt-1",children:$(_.type)}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-white text-lg mb-1",children:_.title}),n.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-3",children:_.message}),_.type==="review_request"&&_.productId&&n.jsxs("button",{onClick:()=>d(_),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Bg,{size:16})," Write Review"]}),_.type==="gift_ready"&&_.voucherData&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>Z(_),className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(tp,{size:16})," Send via WhatsApp"]}),n.jsxs("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/#/?voucher=${_.voucherData.code}`),className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(ep,{size:16})," Copy Link"]})]}),_.type==="gift_received"&&_.voucherData&&n.jsxs("button",{onClick:()=>W(_.voucherData.code),className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(bn,{size:16})," Redeem Gift"]}),_.type==="trial_ended"&&n.jsxs(Le,{to:"/membership",className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center gap-2",children:[n.jsx(Yt,{size:16})," Renew Membership"]})]}),n.jsx("div",{className:"text-right text-xs text-gray-500 shrink-0",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(qr,{size:12}),new Date(_.date).toLocaleDateString()]})})]})})]})},_.id||I))}),c&&c.type==="review_request"&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>d(null)}),n.jsxs("div",{className:"bg-zinc-900 border border-yellow-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(234,179,8,0.3)] animate-in zoom-in-95 duration-200",children:[n.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:n.jsx(pn,{size:20})}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-3 bg-yellow-900/50 rounded-full border border-yellow-500 text-yellow-300",children:n.jsx(dr,{size:24})}),n.jsx("h3",{className:"text-xl font-bold text-white",children:"Write a Review"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Rating"}),n.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(_=>n.jsx("button",{onClick:()=>h(_),className:`text-2xl ${_<=m?"text-yellow-500":"text-gray-600"}`,children:""},_))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Your Review"}),n.jsx("textarea",{value:g,onChange:_=>b(_.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-yellow-500 outline-none h-24",placeholder:"Share your thoughts about this product..."})]}),n.jsx("button",{onClick:q,disabled:!g.trim(),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold rounded-xl transition-all shadow-lg",children:"Submit Review (+100 Points)"})]})]})]})]})},td=so("PushNotifications",{});let jj=!1;const D9=async s=>{if(jj){console.log("Push notifications already initialized. Skipping.");return}if(s==="guest"){console.log("Skipping push notifications for guest user.");return}jj=!0;try{if(Fd.isNativePlatform()){console.log("Initializing Native Push...");let e=await td.checkPermissions();if(e.receive==="prompt"&&(e=await td.requestPermissions()),e.receive!=="granted"){console.error("User denied permissions!");return}await td.register(),td.addListener("registration",t=>{console.log("Native Token:",t.value),Sj(s,t.value,"native")}),td.addListener("pushNotificationActionPerformed",t=>{const r=t.notification.data;r.url&&(window.location.href=r.url)})}else{console.log("Initializing Web Push...");try{if(await Notification.requestPermission()==="granted"){const t=await rM(n2,{vapidKey:"BEZuB_F1gXmTyk47fzfgaEWXKTluRTYdB1MVSyfvQhjkueVbpPywG1vIAUeLVwUsvWcb1a4RE3aver4Ds8wcx8M"});console.log("Web Token:",t),Sj(s,t,"web")}}catch(e){console.error("Web Push Error:",e)}}}catch(e){console.error("Push Init Error:",e)}},Sj=async(s,e,t)=>{if(!(!s||!e))try{const r=t==="web"?"web_device":"mobile_device",i=dt(ye,"users",s,"push_tokens",e.slice(0,20));await jr(i,{token:e,platform:t,lastSeen:Ig(),userAgent:navigator.userAgent},{merge:!0}),console.log("Token saved to sub-collection securely.")}catch(r){console.error("Error saving token:",r)}},M9=()=>{const[s,e]=S.useState(!1),[t,r]=S.useState("all"),[i,o]=S.useState(""),[c,d]=S.useState({title:"",body:"",imageUrl:"",link:"/vault"}),m=async h=>{if(h.preventDefault(),!!confirm("Are you sure you want to send this notification?")){e(!0);try{const b=await Io(s2,"sendAdminPush")({targetType:t,targetValue:t==="tier"||t==="individual"?i:null,...c});b.data.success?(alert(` Success! Sent to ${b.data.sentCount} devices.`),d({...c,title:"",body:""})):alert(` ${b.data.message}`)}catch(g){console.error(g),alert(`Error: ${g.message}`)}finally{e(!1)}}};return n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg border border-zinc-800 max-w-2xl mx-auto mt-10",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-zinc-800 pb-4",children:[n.jsx(Pa,{className:"text-yellow-500",size:24}),n.jsx("h2",{className:"text-xl font-bold text-white",children:"Push Notification Center"})]}),n.jsxs("form",{onSubmit:m,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("button",{type:"button",onClick:()=>r("all"),className:`p-4 rounded border flex flex-col items-center gap-2 ${t==="all"?"border-yellow-500 bg-yellow-900/20 text-white":"border-zinc-700 text-gray-400"}`,children:[n.jsx(l2,{size:20}),n.jsx("span",{className:"text-sm font-bold",children:"Everyone"})]}),n.jsxs("button",{type:"button",onClick:()=>r("tier"),className:`p-4 rounded border flex flex-col items-center gap-2 ${t==="tier"?"border-yellow-500 bg-yellow-900/20 text-white":"border-zinc-700 text-gray-400"}`,children:[n.jsx(ks,{size:20}),n.jsx("span",{className:"text-sm font-bold",children:"Membership Tier"})]}),n.jsxs("button",{type:"button",onClick:()=>r("individual"),className:`p-4 rounded border flex flex-col items-center gap-2 ${t==="individual"?"border-yellow-500 bg-yellow-900/20 text-white":"border-zinc-700 text-gray-400"}`,children:[n.jsx(bi,{size:20}),n.jsx("span",{className:"text-sm font-bold",children:"Individual"})]})]}),t==="tier"&&n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-400 text-sm",children:"Select Membership Tier"}),n.jsxs("select",{className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",onChange:h=>o(h.target.value),value:i,children:[n.jsx("option",{value:"",children:"Select a Tier..."}),n.jsx("option",{value:"spoil-me",children:"Spoil Me (R19)"}),n.jsx("option",{value:"basic",children:"Basic"}),n.jsx("option",{value:"premium",children:"Premium"}),n.jsx("option",{value:"deluxe",children:"Deluxe (Vault Access)"})]})]}),t==="individual"&&n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-400 text-sm",children:"User ID (UID)"}),n.jsx("input",{type:"text",placeholder:"Paste User UID here...",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:i,onChange:h=>o(h.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-400 text-sm",children:"Notification Title"}),n.jsx("input",{type:"text",placeholder:"e.g.  The Vault is Open!",required:!0,className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1 font-bold",value:c.title,onChange:h=>d({...c,title:h.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-400 text-sm",children:"Message Body"}),n.jsx("textarea",{placeholder:"e.g. New vintage stock just added. Tap to shop now.",required:!0,rows:3,className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:c.body,onChange:h=>d({...c,body:h.target.value})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-400 text-sm",children:"Deep Link (Optional)"}),n.jsx("input",{type:"text",placeholder:"e.g. /vault or /membership",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:c.link,onChange:h=>d({...c,link:h.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-400 text-sm",children:"Image URL (Optional)"}),n.jsx("input",{type:"text",placeholder:"https://...",className:"w-full bg-black border border-zinc-700 text-white p-3 rounded mt-1",value:c.imageUrl,onChange:h=>d({...c,imageUrl:h.target.value})})]})]}),n.jsx("button",{type:"submit",disabled:s,className:"w-full bg-yellow-600 hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed text-black font-bold py-4 rounded flex items-center justify-center gap-2 transition-colors",children:s?"Sending...":n.jsxs(n.Fragment,{children:[n.jsx(tp,{size:20})," SEND NOTIFICATION"]})})]})]})},L9=()=>{const s=As(),[e,t]=S.useState([]),[r,i]=S.useState(!0);S.useEffect(()=>{o()},[]);const o=async()=>{try{const c=await Qn(At(ye,"custom_templates")),d=[];c.forEach(m=>{d.push({id:m.id,...m.data()})}),t(d.filter(m=>m.isActive!==!1))}catch(c){console.error("Error fetching templates:",c)}finally{i(!1)}};return r?n.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:n.jsx("div",{className:"text-gold text-xl",children:"Loading custom pendants..."})}):n.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[n.jsx("button",{onClick:()=>s("/"),className:"p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700",children:n.jsx(Ha,{size:24})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gold flex items-center gap-2",children:[n.jsx(Un,{size:32}),"Customized Wire Wrapped Pendants"]}),n.jsx("p",{className:"text-gray-400",children:"Design your own unique wire-wrapped pendant"})]})]}),n.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6 mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create Your Perfect Pendant"}),n.jsx("p",{className:"text-gray-300 mb-4",children:"Choose from our selection of premium wire-wrapped pendant templates. Customize with your choice of stones, wire styles, and chain lengths to create a truly unique piece of jewelry."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(It,{size:16,className:"text-gold"}),n.jsx("span",{children:"Premium Materials"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Un,{size:16,className:"text-gold"}),n.jsx("span",{children:"Custom Design"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(It,{size:16,className:"text-gold"}),n.jsx("span",{children:"Handcrafted Quality"})]})]})]}),e.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Un,{size:48,className:"text-gray-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No Custom Templates Available"}),n.jsx("p",{className:"text-gray-500",children:"Check back soon for new designs!"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(c=>n.jsxs("div",{className:"bg-zinc-900 rounded-lg overflow-hidden hover:bg-zinc-800 transition-colors cursor-pointer group",onClick:()=>s(`/customized-wire-wrapped-pendants/${c.id}`),children:[n.jsx("div",{className:"aspect-square bg-zinc-800 overflow-hidden",children:n.jsx("img",{src:c.mainImage,alt:c.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-gold mb-2",children:c.name}),n.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:c.description}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"text-lg font-semibold text-white",children:["From R",c.basePrice]}),n.jsx("button",{className:"px-4 py-2 bg-gold text-black font-bold rounded-lg hover:bg-yellow-500 transition-colors",children:"Customize"})]})]})]},c.id))})]})})},z9=()=>{var A,B,L;const{user:s}=Ct(),[e,t]=S.useState([]),[r,i]=S.useState(!0),[o,c]=S.useState(!1),[d,m]=S.useState(!1),[h,g]=S.useState({name:"",basePrice:0,description:"",mainImage:"",stones:[],wireStyles:[],chainOptions:[],isActive:!0});S.useEffect(()=>{b()},[]);const b=async()=>{try{const ne=await Qn(At(ye,"custom_templates")),pe=[];ne.forEach(Ne=>{pe.push({id:Ne.id,...Ne.data()})}),t(pe)}catch(ne){console.error("Error loading templates:",ne)}finally{i(!1)}},w=async()=>{if(!(!h.name||!h.description)){m(!0);try{const ne={...h,stones:h.stones||[],wireStyles:h.wireStyles||[],chainOptions:h.chainOptions||[]};h.id?await Ft(dt(ye,"custom_templates",h.id),ne):await Fi(At(ye,"custom_templates"),ne),await b(),c(!1),g({name:"",basePrice:0,description:"",mainImage:"",stones:[],wireStyles:[],chainOptions:[],isActive:!0})}catch(ne){console.error("Error saving template:",ne)}finally{m(!1)}}},P=async ne=>{if(confirm("Are you sure you want to delete this template?"))try{await pd(dt(ye,"custom_templates",ne)),await b()}catch(pe){console.error("Error deleting template:",pe)}},C=async ne=>{const pe=Or(Vn,`custom-templates/${Date.now()}-${ne.name}`);return await HS(pe,ne),await Vr(pe)},k=async ne=>{var Ne;const pe=(Ne=ne.target.files)==null?void 0:Ne[0];if(pe)try{const Te=await C(pe);g(le=>({...le,mainImage:Te}))}catch(Te){console.error("Error uploading image:",Te)}},E=()=>{g(ne=>({...ne,stones:[...ne.stones||[],{id:Date.now().toString(),name:"",image:"",priceModifier:0}]}))},F=(ne,pe,Ne)=>{g(Te=>{var le;return{...Te,stones:(le=Te.stones)==null?void 0:le.map((fe,ve)=>ve===ne?{...fe,[pe]:Ne}:fe)}})},U=ne=>{g(pe=>{var Ne;return{...pe,stones:(Ne=pe.stones)==null?void 0:Ne.filter((Te,le)=>le!==ne)}})},q=async(ne,pe)=>{var Te;const Ne=(Te=pe.target.files)==null?void 0:Te[0];if(Ne)try{const le=await C(Ne);F(ne,"image",le)}catch(le){console.error("Error uploading stone image:",le)}},Z=()=>{g(ne=>({...ne,wireStyles:[...ne.wireStyles||[],{id:Date.now().toString(),name:"",imageFrameOnly:"",imageWithExample:"",priceModifier:0}]}))},W=(ne,pe,Ne)=>{g(Te=>{var le;return{...Te,wireStyles:(le=Te.wireStyles)==null?void 0:le.map((fe,ve)=>ve===ne?{...fe,[pe]:Ne}:fe)}})},$=ne=>{g(pe=>{var Ne;return{...pe,wireStyles:(Ne=pe.wireStyles)==null?void 0:Ne.filter((Te,le)=>le!==ne)}})},R=async(ne,pe,Ne)=>{var le;const Te=(le=Ne.target.files)==null?void 0:le[0];if(Te)try{const fe=await C(Te);W(ne,pe==="frame"?"imageFrameOnly":"imageWithExample",fe)}catch(fe){console.error("Error uploading wire image:",fe)}},_=()=>{g(ne=>({...ne,chainOptions:[...ne.chainOptions||[],""]}))},I=(ne,pe)=>{g(Ne=>{var Te;return{...Ne,chainOptions:(Te=Ne.chainOptions)==null?void 0:Te.map((le,fe)=>fe===ne?pe:le)}})},V=ne=>{g(pe=>{var Ne;return{...pe,chainOptions:(Ne=pe.chainOptions)==null?void 0:Ne.filter((Te,le)=>le!==ne)}})};return s!=null&&s.isAdmin?r?n.jsx("div",{className:"p-6 text-center",children:n.jsx($i,{className:"animate-spin mx-auto",size:24})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Custom Pendant Templates"}),n.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2",children:[n.jsx($s,{size:20})," New Template"]})]}),n.jsx("div",{className:"grid gap-4",children:e.map(ne=>n.jsx("div",{className:"bg-zinc-800 p-4 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold",children:ne.name}),n.jsx("p",{className:"text-gray-400",children:ne.description}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Base Price: R",ne.basePrice]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{g(ne),c(!0)},className:"p-2 text-blue-400 hover:text-blue-300",children:n.jsx(cd,{size:20})}),n.jsx("button",{onClick:()=>P(ne.id),className:"p-2 text-red-400 hover:text-red-300",children:n.jsx(ui,{size:20})})]})]})},ne.id))}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-bold",children:h.id?"Edit Template":"New Template"}),n.jsx("button",{onClick:()=>c(!1),className:"p-2",children:n.jsx(pn,{size:24})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx("input",{type:"text",placeholder:"Template Name",value:h.name||"",onChange:ne=>g(pe=>({...pe,name:ne.target.value})),className:"p-2 bg-zinc-800 rounded"}),n.jsx("input",{type:"number",placeholder:"Base Price",value:h.basePrice||0,onChange:ne=>g(pe=>({...pe,basePrice:parseFloat(ne.target.value)})),className:"p-2 bg-zinc-800 rounded"})]}),n.jsx("textarea",{placeholder:"Description",value:h.description||"",onChange:ne=>g(pe=>({...pe,description:ne.target.value})),className:"w-full p-2 bg-zinc-800 rounded h-20"}),n.jsxs("div",{children:[n.jsx("label",{className:"block mb-2",children:"Main Image"}),n.jsx("input",{type:"file",accept:"image/*",onChange:k}),h.mainImage&&n.jsx("img",{src:h.mainImage,alt:"Main",className:"w-32 h-32 object-cover mt-2 rounded"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Stones"}),n.jsx("button",{onClick:E,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Stone"})]}),n.jsx("div",{className:"space-y-4",children:(A=h.stones)==null?void 0:A.map((ne,pe)=>n.jsxs("div",{className:"bg-zinc-800 p-4 rounded flex gap-4 items-center",children:[n.jsx("input",{type:"text",placeholder:"Stone Name",value:ne.name,onChange:Ne=>F(pe,"name",Ne.target.value),className:"flex-1 p-2 bg-zinc-700 rounded"}),n.jsx("input",{type:"number",placeholder:"Price Modifier",value:ne.priceModifier,onChange:Ne=>F(pe,"priceModifier",parseFloat(Ne.target.value)),className:"w-24 p-2 bg-zinc-700 rounded"}),n.jsx("input",{type:"file",accept:"image/*",onChange:Ne=>q(pe,Ne)}),ne.image&&n.jsx("img",{src:ne.image,alt:ne.name,className:"w-16 h-16 object-cover rounded"}),n.jsx("button",{onClick:()=>U(pe),className:"p-2 text-red-400",children:n.jsx(pn,{size:20})})]},ne.id))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Wire Styles"}),n.jsx("button",{onClick:Z,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Wire Style"})]}),n.jsx("div",{className:"space-y-4",children:(B=h.wireStyles)==null?void 0:B.map((ne,pe)=>n.jsxs("div",{className:"bg-zinc-800 p-4 rounded space-y-4",children:[n.jsx("input",{type:"text",placeholder:"Wire Style Name",value:ne.name,onChange:Ne=>W(pe,"name",Ne.target.value),className:"w-full p-2 bg-zinc-700 rounded"}),n.jsx("input",{type:"number",placeholder:"Price Modifier",value:ne.priceModifier,onChange:Ne=>W(pe,"priceModifier",parseFloat(Ne.target.value)),className:"w-24 p-2 bg-zinc-700 rounded"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block mb-2",children:"Frame Only Image"}),n.jsx("input",{type:"file",accept:"image/*",onChange:Ne=>R(pe,"frame",Ne)}),ne.imageFrameOnly&&n.jsx("img",{src:ne.imageFrameOnly,alt:"Frame",className:"w-16 h-16 object-cover mt-2 rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block mb-2",children:"With Example Image"}),n.jsx("input",{type:"file",accept:"image/*",onChange:Ne=>R(pe,"example",Ne)}),ne.imageWithExample&&n.jsx("img",{src:ne.imageWithExample,alt:"Example",className:"w-16 h-16 object-cover mt-2 rounded"})]})]}),n.jsx("button",{onClick:()=>$(pe),className:"p-2 text-red-400",children:n.jsx(pn,{size:20})})]},ne.id))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Chain Options"}),n.jsx("button",{onClick:_,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Add Chain"})]}),n.jsx("div",{className:"space-y-2",children:(L=h.chainOptions)==null?void 0:L.map((ne,pe)=>n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"Chain Length",value:ne,onChange:Ne=>I(pe,Ne.target.value),className:"flex-1 p-2 bg-zinc-700 rounded"}),n.jsx("button",{onClick:()=>V(pe),className:"p-2 text-red-400",children:n.jsx(pn,{size:20})})]},pe))})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-600 text-white rounded",children:"Cancel"}),n.jsxs("button",{onClick:w,disabled:d,className:"px-4 py-2 bg-pink-600 text-white rounded disabled:opacity-50 flex items-center gap-2",children:[d?n.jsx($i,{className:"animate-spin",size:16}):n.jsx(Ol,{size:16}),"Save"]})]})]})]})})]}):n.jsx("div",{className:"p-6 text-center",children:"Access denied. Admin only."})},V9=()=>{const{id:s}=Gd(),e=As(),{user:t,addToCart:r}=Ct(),[i,o]=S.useState(null),[c,d]=S.useState(!0),[m,h]=S.useState({stone:"",wireStyle:"",chainLength:""}),[g,b]=S.useState(!1);S.useEffect(()=>{s&&w()},[s]);const w=async()=>{try{const k=dt(ye,"custom_templates",s),E=await Pd(k);E.exists()?o({id:E.id,...E.data()}):e("/customized-wire-wrapped-pendants")}catch(k){console.error("Error fetching template:",k),e("/customized-wire-wrapped-pendants")}finally{d(!1)}},P=()=>{if(!i)return 0;let k=i.basePrice;if(m.stone){const E=i.stones.find(F=>F.id===m.stone);E&&(k+=E.priceModifier)}if(m.wireStyle){const E=i.wireStyles.find(F=>F.id===m.wireStyle);E&&(k+=E.priceModifier)}return k},C=async()=>{if(!(!t||!i)){if(!m.stone||!m.wireStyle||!m.chainLength){alert("Please select all options before adding to cart.");return}b(!0);try{const k=i.stones.find(U=>U.id===m.stone),E=i.wireStyles.find(U=>U.id===m.wireStyle),F={id:`custom-${Date.now()}`,name:`${i.name} - Custom`,description:`Custom pendant with ${k==null?void 0:k.name} stone, ${E==null?void 0:E.name} wire style, ${m.chainLength} chain`,price:P(),image:i.mainImage,type:"Custom Pendant",quantity:1,customOptions:{templateId:i.id,stone:k,wireStyle:E,chainLength:m.chainLength},isCustom:!0};await Fi(At(ye,"cart_items"),{userId:t.uid,productId:F.id,...F,addedAt:new Date}),r(F),alert("Custom pendant added to cart!"),e("/cart")}catch(k){console.error("Error adding to cart:",k),alert("Failed to add to cart. Please try again.")}finally{b(!1)}}};return c?n.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:n.jsx("div",{className:"text-gold text-xl",children:"Loading custom builder..."})}):i?n.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[n.jsx("button",{onClick:()=>e("/customized-wire-wrapped-pendants"),className:"p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700",children:n.jsx(Ha,{size:24})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gold",children:i.name}),n.jsx("p",{className:"text-gray-400",children:i.description})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"aspect-square bg-zinc-900 rounded-2xl overflow-hidden",children:n.jsx("img",{src:i.mainImage,alt:i.name,className:"w-full h-full object-cover"})}),m.wireStyle&&n.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Wire Style Preview"}),n.jsx("div",{className:"grid grid-cols-2 gap-4",children:(()=>{const k=i.wireStyles.find(E=>E.id===m.wireStyle);return k?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Frame Only"}),n.jsx("img",{src:k.imageFrameOnly,alt:"Frame",className:"w-full aspect-square object-cover rounded"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"With Example"}),n.jsx("img",{src:k.imageWithExample,alt:"Example",className:"w-full aspect-square object-cover rounded"})]})]}):null})()})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[n.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[n.jsx(Un,{size:20,className:"text-gold"}),"Choose Your Stone"]}),n.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.stones.map(k=>n.jsxs("button",{onClick:()=>h(E=>({...E,stone:k.id})),className:`p-4 rounded-lg border-2 transition-colors ${m.stone===k.id?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:[n.jsx("img",{src:k.image,alt:k.name,className:"w-full aspect-square object-cover rounded mb-2"}),n.jsx("h4",{className:"font-semibold",children:k.name}),n.jsx("p",{className:"text-sm text-gray-400",children:k.priceModifier>0?`+R${k.priceModifier}`:"No extra cost"})]},k.id))})]}),n.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[n.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[n.jsx(It,{size:20,className:"text-gold"}),"Choose Wire Style"]}),n.jsx("div",{className:"space-y-4",children:i.wireStyles.map(k=>n.jsx("button",{onClick:()=>h(E=>({...E,wireStyle:k.id})),className:`w-full p-4 rounded-lg border-2 transition-colors ${m.wireStyle===k.id?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-left",children:k.name}),n.jsx("p",{className:"text-sm text-gray-400",children:k.priceModifier>0?`+R${k.priceModifier}`:"No extra cost"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("img",{src:k.imageFrameOnly,alt:"Frame",className:"w-16 h-16 object-cover rounded"}),n.jsx("img",{src:k.imageWithExample,alt:"Example",className:"w-16 h-16 object-cover rounded"})]})]})},k.id))})]}),n.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Chain Length"}),n.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.chainOptions.map((k,E)=>n.jsx("button",{onClick:()=>h(F=>({...F,chainLength:k})),className:`p-4 rounded-lg border-2 transition-colors ${m.chainLength===k?"border-gold bg-gold/10":"border-gray-700 hover:border-gray-600"}`,children:n.jsx("span",{className:"font-semibold",children:k})},E))})]}),n.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("span",{className:"text-lg",children:"Total Price:"}),n.jsxs("span",{className:"text-2xl font-bold text-gold",children:["R",P()]})]}),n.jsxs("button",{onClick:C,disabled:g||!m.stone||!m.wireStyle||!m.chainLength,className:"w-full bg-gold text-black font-bold py-4 rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[n.jsx(fc,{size:20}),g?"Adding to Cart...":"Add to Cart"]}),(!m.stone||!m.wireStyle||!m.chainLength)&&n.jsx("p",{className:"text-sm text-gray-400 mt-2 text-center",children:"Please select all options to continue"})]})]})]})]})}):n.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:n.jsx("div",{className:"text-white text-xl",children:"Template not found"})})},O9=()=>{const[s,e]=S.useState("applications"),[t,r]=S.useState([]),[i,o]=S.useState([]),[c,d]=S.useState([]),[m,h]=S.useState(!0);S.useEffect(()=>{const E=di(sn(At(ye,"artist_applications"),ci("submittedAt","desc")),q=>{const Z=q.docs.map(W=>{var $;return{id:W.id,...W.data(),submittedAt:(($=W.data().submittedAt)==null?void 0:$.toDate())||new Date}});r(Z)}),F=di(At(ye,"artists"),q=>{const Z=q.docs.map(W=>({uid:W.id,...W.data()}));o(Z),h(!1)}),U=di(At(ye,"artist_products"),q=>{const Z=q.docs.map(W=>{var $,R,_;return{id:W.id,...W.data(),createdAt:(($=W.data().createdAt)==null?void 0:$.toDate())||new Date,receivedAtHub:((R=W.data().receivedAtHub)==null?void 0:R.toDate())||null,approvedAt:((_=W.data().approvedAt)==null?void 0:_.toDate())||null}});d(Z)});return()=>{E(),F(),U()}},[]);const g=async E=>{try{const F={uid:E.uid,shopName:E.artistTradeName||`${E.name} ${E.surname}`,slotLimit:5,slotsUsed:0,wallet:{pending:0,available:0,currency:"ZAR"},status:"active",isFirstTime:!0};await Fi(At(ye,"artists"),F),await Ft(dt(ye,"artist_applications",E.id),{status:"approved"}),await Fi(At(ye,"notifications"),{userId:E.uid,type:"system",title:"Artist Application Approved!",message:"Welcome to Spoil Me Vintage Artist Program! As a first-time artist, you can upload 1 product initially. Please ship it to our Worcester Hub for approval.",date:new Date().toISOString(),isRead:!1}),alert("Application approved successfully!")}catch(F){console.error("Error approving application:",F),alert("Failed to approve application.")}},b=async E=>{try{await Ft(dt(ye,"artist_applications",E.id),{status:"rejected"}),await Fi(At(ye,"notifications"),{userId:E.uid,type:"system",title:"Artist Application Update",message:"We regret to inform you that your artist application has been declined.",date:new Date().toISOString(),isRead:!1}),alert("Application rejected.")}catch(F){console.error("Error rejecting application:",F),alert("Failed to reject application.")}},w=async E=>{try{await Ft(dt(ye,"artist_products",E.id),{status:"approved",approvedAt:new Date});const F=i.find(U=>U.uid===E.artistId);F&&await Fi(At(ye,"notifications"),{userId:F.uid,type:"system",title:"Product Approved",message:`Your product "${E.name}" has been approved and is now live.`,date:new Date().toISOString(),isRead:!1}),alert("Product approved successfully!")}catch(F){console.error("Error approving product:",F),alert("Failed to approve product.")}},P=async E=>{try{await Ft(dt(ye,"artist_products",E.id),{status:"rejected"});const F=i.find(U=>U.uid===E.artistId);F&&await Fi(At(ye,"notifications"),{userId:F.uid,type:"system",title:"Product Rejected",message:`Your product "${E.name}" has been rejected. Please check the quality standards and re-submit.`,date:new Date().toISOString(),isRead:!1}),alert("Product rejected.")}catch(F){console.error("Error rejecting product:",F),alert("Failed to reject product.")}},C=async E=>{try{await Ft(dt(ye,"artist_products",E.id),{stockLevel:E.stockLevel+1,status:"live",receivedAtHub:new Date}),alert("Stock received and product updated.")}catch(F){console.error("Error updating stock:",F),alert("Failed to update stock.")}},k=async E=>{if(window.confirm("Are you sure you want to delete this product?"))try{await pd(dt(ye,"artist_products",E)),alert("Product deleted successfully.")}catch(F){console.error("Error deleting product:",F),alert("Failed to delete product.")}};return m?n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"text-white",children:"Loading artist data..."})}):n.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Artist Hub"}),n.jsxs("div",{className:"flex space-x-1 mb-6 bg-zinc-900 p-1 rounded-lg",children:[n.jsxs("button",{onClick:()=>e("applications"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="applications"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:["Applications (",t.filter(E=>E.status==="pending").length,")"]}),n.jsx("button",{onClick:()=>e("pricing"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="pricing"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Pricing Room"}),n.jsx("button",{onClick:()=>e("quality"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="quality"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Quality Control"}),n.jsx("button",{onClick:()=>e("stock"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${s==="stock"?"bg-yellow-400 text-black":"text-gray-300 hover:text-white"}`,children:"Stock Management"})]}),s==="applications"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-bold text-yellow-400",children:"Pending Applications"}),n.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-3 rounded-lg",children:n.jsxs("p",{className:"text-yellow-400 text-sm font-medium flex items-center gap-2",children:[n.jsx(Cr,{size:16}),"Reviews take up to 72 hours. Artists will be notified via email and in-app notification once their application is processed."]})}),t.filter(E=>E.status==="pending").length===0?n.jsx("div",{className:"text-gray-400",children:"No pending applications."}):t.filter(E=>E.status==="pending").map(E=>n.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-bold text-white",children:[E.name," ",E.surname,E.artistTradeName&&n.jsxs("span",{className:"text-yellow-400",children:[" (",E.artistTradeName,")"]})]}),n.jsxs("p",{className:"text-gray-300",children:[E.email," | ",E.contactNumber]}),n.jsxs("p",{className:"text-sm text-gray-400",children:["Applied: ",E.submittedAt.toLocaleDateString()]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>g(E),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[n.jsx(Go,{size:16})," Approve"]}),n.jsxs("button",{onClick:()=>b(E),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[n.jsx(Ug,{size:16})," Reject"]})]})]}),n.jsx("div",{className:"grid grid-cols-5 gap-2",children:E.productImages.slice(0,5).map((F,U)=>n.jsx("img",{src:F,alt:`Product ${U+1}`,className:"w-full h-20 object-cover rounded border border-zinc-700"},U))})]},E.id)),n.jsx("h2",{className:"text-xl font-bold text-yellow-400 mt-8",children:"All Applications"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(E=>n.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h3",{className:"font-bold text-white",children:[E.name," ",E.surname]}),n.jsx("span",{className:`px-2 py-1 rounded text-xs ${E.status==="approved"?"bg-green-600":E.status==="rejected"?"bg-red-600":"bg-yellow-600"}`,children:E.status})]}),n.jsx("p",{className:"text-sm text-gray-400",children:E.email}),n.jsx("p",{className:"text-xs text-gray-500",children:E.submittedAt.toLocaleDateString()})]},E.id))})]}),s==="pricing"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-yellow-400 mb-4",children:"Pricing Room"}),n.jsx("div",{className:"text-gray-400",children:"Product pricing interface will be implemented here. Artists upload products, admin sets selling prices and RRP."})]}),s==="quality"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-yellow-400 mb-4",children:"Quality Control Hub"}),n.jsx("div",{className:"text-gray-400",children:"Quality inspection interface will be implemented here. Scan order IDs, pass/fail inspections."})]}),s==="stock"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-bold text-yellow-400",children:"Artist Stock Management"}),c.length===0?n.jsx("div",{className:"text-gray-400",children:"No products found. Encourage artists to upload products."}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(E=>{var F;return n.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-bold text-white",children:E.name}),n.jsx("span",{className:`px-2 py-1 rounded text-xs ${E.status==="approved"?"bg-green-600":E.status==="rejected"?"bg-red-600":"bg-yellow-600"}`,children:E.status})]}),n.jsxs("p",{className:"text-sm text-gray-400",children:["Artist: ",(F=i.find(U=>U.uid===E.artistId))==null?void 0:F.shopName]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Stock Level: ",E.stockLevel]}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx("button",{onClick:()=>w(E),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex-1",children:"Approve Product"}),n.jsx("button",{onClick:()=>P(E),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex-1",children:"Reject Product"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-white text-sm font-semibold mb-2",children:"Product Images"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:E.images.map((U,q)=>n.jsx("img",{src:U,alt:`Product Image ${q+1}`,className:"w-full h-20 object-cover rounded border border-zinc-700"},q))})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsxs("button",{onClick:()=>C(E),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex-1",children:[n.jsx(Gr,{className:"w-5 h-5 mr-2"})," Receive Stock"]}),n.jsxs("button",{onClick:()=>k(E.id),className:"bg-red-800 text-white px-4 py-2 rounded-lg hover:bg-red-900 transition-colors flex-1",children:[n.jsx(XM,{className:"w-5 h-5 mr-2"})," Delete Product"]})]})]},E.id)})})]})]})},F9=()=>{const{currency:s,applyForArtist:e}=Ct(),[t,r]=S.useState(!1),[i,o]=S.useState({name:"",surname:"",artistTradeName:"",contactNumber:"",email:"",productImages:[]}),[c,d]=S.useState(!1),m=[{name:"Tester",slots:5,priceZAR:19,priceUSD:1.5,features:["5 Product Slots","Basic Support"]},{name:"Hobbyist",slots:20,priceZAR:49,priceUSD:4,features:["20 Product Slots","Email Support"]},{name:"Creator",slots:50,priceZAR:99,priceUSD:8,features:["50 Product Slots","Priority Support","Access to Analytics"]},{name:"Boutique",slots:100,priceZAR:189,priceUSD:15,features:["100 Product Slots","Dedicated Support","Advanced Analytics"]},{name:"Gallery",slots:250,priceZAR:399,priceUSD:32,features:["250 Product Slots","24/7 Support","Full Analytics Suite"]}];return n.jsx("div",{className:"bg-black text-white min-h-screen p-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("header",{className:"text-center mb-12",children:[n.jsx("h1",{className:"text-5xl font-bold text-yellow-400",children:"Your Art. Global Stage. 1% Fees."}),n.jsx("p",{className:"text-xl mt-4 text-zinc-300",children:"Join a curated marketplace for elite jewelry artists and reach over 7,000 collectors worldwide."}),n.jsx("button",{onClick:()=>r(!0),className:"mt-8 bg-yellow-400 text-black font-bold py-3 px-8 rounded-lg text-lg hover:bg-yellow-500 transition-colors",children:s==="ZAR"?"START YOUR SHOP - R19 / Month":"START YOUR SHOP - $1.50 / Month"})]}),n.jsxs("section",{className:"mb-16",children:[n.jsx("h2",{className:"text-3xl font-bold text-center text-yellow-400 mb-8",children:"The Trust Timeline: Secure Escrow Payments"}),n.jsxs("div",{className:"flex justify-between items-center text-center",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("h3",{className:"font-bold text-lg",children:"Sold"}),n.jsx("p",{className:"text-zinc-400",children:"Funds are held securely in escrow."})]}),n.jsx("div",{className:"flex-1 text-zinc-500",children:"--->"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("h3",{className:"font-bold text-lg",children:"Hub Check"}),n.jsx("p",{className:"text-zinc-400",children:"Your piece is inspected at our Worcester hub."})]}),n.jsx("div",{className:"flex-1 text-zinc-500",children:"--->"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("h3",{className:"font-bold text-lg",children:"Delivered"}),n.jsx("p",{className:"text-zinc-400",children:"The collector receives your art."})]}),n.jsx("div",{className:"flex-1 text-zinc-500",children:"--->"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("h3",{className:"font-bold text-lg",children:"Day 30"}),n.jsx("p",{className:"text-zinc-400",children:"Funds are released to your wallet."})]})]})]}),n.jsxs("section",{className:"mb-16",children:[n.jsx("h2",{className:"text-3xl font-bold text-center text-yellow-400 mb-8",children:"Choose Your Plan"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-8",children:m.map(h=>n.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg p-6 text-center hover:border-yellow-400 transition-all",children:[n.jsx("h3",{className:"text-2xl font-bold text-yellow-400",children:h.name}),n.jsxs("p",{className:"text-4xl font-bold my-4",children:[s==="ZAR"?`R${h.priceZAR}`:`$${h.priceUSD}`,n.jsx("span",{className:"text-lg font-normal text-zinc-400",children:"/month"})]}),n.jsxs("p",{className:"text-zinc-400 mb-4",children:[h.slots," Product Slots"]}),n.jsx("button",{className:"w-full bg-yellow-400 text-black font-bold py-2 px-4 rounded-lg hover:bg-yellow-500 transition-colors",children:"Select Plan"})]},h.name))})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-3xl font-bold text-center text-yellow-400 mb-8",children:"How It Works"}),n.jsxs("div",{className:"max-w-3xl mx-auto text-lg text-zinc-300 space-y-4",children:[n.jsx("p",{children:"1. Apply to become a partner. We review applications to maintain a high-quality, curated collection of handmade jewelry."}),n.jsx("p",{children:"2. Once approved, choose a subscription plan that fits your needs. You can upload professional photos of your products. No need to send us stock upfront!"}),n.jsx("p",{children:"3. When an item sells, you ship it to our hub in Worcester, South Africa for inspection. You are responsible for this initial shipping cost."}),n.jsx("p",{children:"4. We handle the final quality check and ship the item to the customer. If an item fails inspection, it will be returned to you at your cost, or you can opt to have it sold in our 'Vault' at a reduced price."}),n.jsx("p",{children:"5. Your funds are held in escrow and released to your artist wallet 30 days after the customer receives the item. Our commission is a flat 1% of the sale price."})]})]})]})})},U9=({onClose:s})=>n.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:s}),n.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-sm w-full shadow-[0_0_50px_rgba(236,72,153,0.4)] animate-in zoom-in-95 duration-300 text-center",children:[n.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:n.jsx(pn,{size:20})}),n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600 to-purple-600 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg transform rotate-3",children:n.jsx(QM,{size:32,className:"text-white"})}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Voucher Redeemed!"}),n.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"To ensure your discount applies correctly and for the best shopping experience, please use our App."}),n.jsxs("button",{className:"w-full py-3 bg-white text-black font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors mb-3 shadow-lg",onClick:()=>alert("Please use the Install button at the bottom of the screen."),children:[n.jsx(tc,{size:20})," Install App"]}),n.jsx("button",{onClick:s,className:"text-xs text-gray-500 hover:text-gray-300 underline",children:"Continue in Browser"})]})]}),B9=()=>{const s=Ya(),e=As(),{applyExternalVoucher:t}=Ct(),[r,i]=S.useState(!1);return S.useEffect(()=>{const c=new URLSearchParams(s.search).get("voucher");c&&t(c)&&(i(!0),e("/cart",{replace:!0}))},[s,t,e]),r?n.jsx(U9,{onClose:()=>i(!1)}):null},$9=()=>n.jsx(kM,{children:n.jsx(q9,{})}),q9=()=>{const{isLoading:s,user:e}=Ct(),{updateAvailable:t,isDownloading:r,performUpdate:i,dismissUpdate:o}=j9();return S.useEffect(()=>{e!=null&&e.id&&D9(e.id)},[e==null?void 0:e.id]),s?n.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:n.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):n.jsxs(hE,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[n.jsx(B9,{}),n.jsx(o9,{}),t&&n.jsx(S9,{version:t.version,isDownloading:r,onUpdate:i,onDismiss:o}),n.jsxs(iE,{children:[n.jsxs(_t,{path:"/",element:n.jsx(x6,{}),children:[n.jsx(_t,{index:!0,element:n.jsx(N6,{})}),n.jsx(_t,{path:"collections/:categoryName",element:n.jsx(BL,{})}),n.jsx(_t,{path:"catalog/:type",element:n.jsx($L,{})}),n.jsx(_t,{path:"product/:id",element:n.jsx(iL,{})}),n.jsx(_t,{path:"cart",element:n.jsx(dL,{})}),n.jsx(_t,{path:"profile",element:n.jsx(uL,{})}),n.jsx(_t,{path:"membership",element:n.jsx(zL,{})}),n.jsx(_t,{path:"earn-rewards",element:n.jsx(VL,{})}),n.jsx(_t,{path:"affiliate-program",element:n.jsx(FL,{})}),n.jsx(_t,{path:"gift-cards",element:n.jsx(UL,{})}),n.jsx(_t,{path:"weekly-winners",element:n.jsx(l9,{})})," ",n.jsx(_t,{path:"login",element:n.jsx(hL,{})}),n.jsx(_t,{path:"terms",element:n.jsx(f9,{})})," ",n.jsx(_t,{path:"vault",element:n.jsx(C9,{})})," ",n.jsx(_t,{path:"vip/:affiliateCode",element:n.jsx(T9,{})}),n.jsx(_t,{path:"notifications",element:n.jsx(R9,{})})," ",n.jsx(_t,{path:"customized-wire-wrapped-pendants",element:n.jsx(L9,{})}),n.jsx(_t,{path:"customized-wire-wrapped-pendants/:id",element:n.jsx(V9,{})})," ",n.jsx(_t,{path:"artist-partnership",element:n.jsx(F9,{})})," "]}),n.jsxs(_t,{path:"/admin",element:n.jsx(y6,{}),children:[n.jsx(_t,{index:!0,element:n.jsx(qL,{})}),n.jsx(_t,{path:"products",element:n.jsx(e9,{})}),n.jsx(_t,{path:"orders",element:n.jsx(p9,{})}),n.jsx(_t,{path:"categories",element:n.jsx(t9,{})}),n.jsx(_t,{path:"gift-cards",element:n.jsx(n9,{})}),n.jsx(_t,{path:"social",element:n.jsx(i9,{})}),n.jsx(_t,{path:"affiliates",element:n.jsx(a9,{})}),n.jsx(_t,{path:"winners",element:n.jsx(c9,{})}),n.jsx(_t,{path:"expenses",element:n.jsx(m9,{})})," ",n.jsx(_t,{path:"vault",element:n.jsx(_9,{})})," ",n.jsx(_t,{path:"members",element:n.jsx(k9,{})})," ",n.jsx(_t,{path:"users",element:n.jsx(E9,{})})," ",n.jsx(_t,{path:"affiliate/store-builder",element:n.jsx(I9,{})}),n.jsx(_t,{path:"notifications",element:n.jsx(M9,{})})," ",n.jsx(_t,{path:"custom-pendant-manager",element:n.jsx(z9,{})})," ",n.jsx(_t,{path:"artists",element:n.jsx(O9,{})}),n.jsx(_t,{path:"ad-pricing",element:n.jsx(H2,{})})]}),n.jsx(_t,{path:"*",element:n.jsx(sE,{to:"/"})})]})]})};"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(s){for(let e of s)e.unregister()});const W2=document.getElementById("root");if(!W2)throw new Error("Could not find root element to mount to");const G9=dk.createRoot(W2);G9.render(n.jsx(Do.StrictMode,{children:n.jsx($9,{})}));export{yj as A,wj as E,x2 as W,u6 as b};
